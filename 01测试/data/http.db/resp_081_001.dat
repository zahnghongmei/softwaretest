webpackJsonp([1],{"+BTi":function(e,n){},"+Rdb":function(e,n){},"/I4U":function(e,n){},"/RYo":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.lo-container[data-v-8a54e678] {\n  height: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.lo-container div[data-v-8a54e678] {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.lo-container .lo-header[data-v-8a54e678] {\n  height: 70px;\n}\n.lo-container .lo-content[data-v-8a54e678] {\n  height: calc(100% - 70px);\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: auto;\n}\n.lo-content[data-v-8a54e678] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.lo-content .lo-tree[data-v-8a54e678] {\n  width: 255px;\n  min-width: 255px;\n}\n.lo-content .lo-main[data-v-8a54e678] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow: auto;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/views/src/views/layout.vue"],names:[],mappings:";AA4BA;EACA,aAAA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,2BAAA;UAAA,uBAAA;CACA;AAEA;EACA,+BAAA;UAAA,uBAAA;CACA;AAEA;EACA,aAAA;CACA;AAEA;EACA,0BAAA;EACA,oBAAA;MAAA,YAAA;UAAA,QAAA;EACA,eAAA;CACA;AAEA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;CACA;AAEA;EACA,aAAA;EACA,iBAAA;CACA;AAEA;EACA,oBAAA;MAAA,YAAA;UAAA,QAAA;EACA,eAAA;CACA",file:"layout.vue",sourcesContent:['<template>\n  <div class="lo-container">\n    <div class="lo-header">\n      <layout-header />\n    </div>\n    <div class="lo-content">\n      <div class="lo-tree">\n        <router-tree />\n      </div>\n      <div class="lo-main">\n        <router-view/>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LayoutHeader from \'@/components/commons/layoutHeader\'\nimport RouterTree from \'@/components/commons/routerTree\'\nexport default {\n  components: {\n    LayoutHeader,\n    RouterTree\n  }\n}\n<\/script>\n\n<style scoped>\n  .lo-container {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .lo-container div {\n    box-sizing: border-box;\n  }\n  \n  .lo-container .lo-header {\n    height: 70px;\n  }\n\n  .lo-container .lo-content {\n    height: calc(100% - 70px);\n    flex: 1;\n    overflow: auto;\n  }\n\n  .lo-content {\n    display: flex;\n  }\n\n  .lo-content .lo-tree {\n    width: 255px;\n    min-width: 255px;\n  }\n\n  .lo-content .lo-main {\n    flex: 1;\n    overflow: auto;\n  }\n</style>\n'],sourceRoot:""}])},"/dBK":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.role-manage .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.role-manage .search-form-container .el-form-item {\n  width: 25%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageRole/src/components/manageRole/roleManage.vue"],names:[],mappings:";AAyRA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA",file:"roleManage.vue",sourcesContent:['<template>\n  <div class="role-manage">\n    <div>\n      <circle-title\n        title-name="角色管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="roleForm"\n          class="demo-form-inline">\n          <el-form-item label="角色名称">\n            <el-input\n              v-model="roleForm.name"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="roleForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="roleForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getRoleList"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间">\n            <el-date-picker\n              :title="roleForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="roleForm.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getRoleList"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            @click="getRoleList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <el-button\n            type="primary"\n            @click="addRole">\n            添加\n            <i class="el-icon-plus el-icon--right"/>\n          </el-button>\n          <el-dialog\n            :visible.sync="dialogVisible"\n            title="创建角色"\n            width="60%"\n            @close="closeDialog">\n            <div\n              :is="componentName"\n              :roleid="roleid"\n              @closeDialog="closeDialog"/>\n          </el-dialog>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="200">\n          <template slot-scope="scope">\n            <span>\n              <span\n                class="user reset-password"\n                @click="detailRole(scope.row)">\n                查看\n              </span>\n              <span\n                class="user edit"\n                @click="handleEdit(scope.row)">\n                编辑\n              </span>\n              <span\n                class="user delete"\n                @click="handleDelete(scope.row)">\n                删除\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport AddRole from \'@/components/manageRole/addRole\'\nimport EditRole from \'@/components/manageRole/editRole\'\nimport DetailRole from \'@/components/manageRole/detailRole\'\nimport * as Actions from \'@/api/systemUsersApi\'\nexport default {\n  components: {\n    CircleTitle,\n    AddRole,\n    EditRole,\n    DetailRole\n  },\n  data () {\n    return {\n      roleForm: {\n        name: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      dialogVisible: false,\n      componentName: \'AddRole\',\n      tableHeader: [\n        {\n          prop: \'name\',\n          label: \'角色名称\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'创建时间\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      roleid: \'\'\n    }\n  },\n  watch: {\n    \'roleForm.name\' (val) {\n      this.getRoleList()\n    }\n  },\n  mounted () {\n    this.getRouterParam()\n    /** 获取频道列表 **/\n    this.getRoleList()\n  },\n  methods: {\n    getRouterParam () {\n      let query = this.$route.query\n      if (query.pageNo) {\n        this.pageNo = parseInt(query.pageNo)\n      }\n    },\n    closeDialog () {\n      this.dialogVisible = false\n      this.componentName = \'\'\n      this.getRoleList()\n    },\n    getRoleList () {\n      this.$options.filters[\'swapTime\'](this.roleForm)\n      let timeStart = this.roleForm.startDate !== null ? new Date(this.roleForm.startDate).getTime() : null\n      let timeEnd = this.roleForm.endDate !== null ? new Date(this.roleForm.endDate).getTime() : null\n      Actions.getRoleList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'name\': this.roleForm.name,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n          this.pageNo = listData.pageNum\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getRoleList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getRoleList()\n    },\n    /** 查看角色权限 **/\n    detailRole (row) {\n      this.dialogVisible = true\n      this.componentName = \'DetailRole\'\n      this.roleid = row.roleid\n    },\n    /** 编辑时获取单元格数据 **/\n    handleEdit: function (row) {\n      this.componentName = \'EditRole\'\n      this.dialogVisible = true\n      this.roleid = row.roleid\n      // sessionStorage.setItem(\'roleid\', row.roleid)\n      // this.$router.push({path: \'/manageChannel/edit\', query: {\'pageNo\': this.pageNo}})\n    },\n    addRole () {\n      this.componentName = \'AddRole\'\n      this.dialogVisible = true\n    },\n    /** 删除角色 **/\n    handleDelete (row) {\n      this.$confirm(\'是否删除"\' + row.name + \'"?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\'\n      }).then(() => {\n        Actions.deleteRole({\n          \'role\': {\n            \'roleid\': row.roleid\n          }\n        }).then((res) => {\n          if (res.data.status) {\n            this.$message({\n              type: \'success\',\n              message: \'删除成功!\'\n            })\n          }\n          this.getRoleList()\n        })\n      }).catch(() => {\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: flex-end;\n  }\n  .user{\n    display: inline-block;\n    width: 30px;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .edit{\n    border: 1px solid #1883FF;\n    color:#1883FF;\n  }\n  .reset-password{\n    border: 1px solid #694EFF;\n    color:#694EFF;\n  }\n  .delete{\n    border:1px solid #F00808;\n    color: #F00808;\n  }\n</style>\n<style>\n  .role-manage .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .role-manage .search-form-container .el-form-item {\n    width: 25%;\n  }\n</style>\n'],sourceRoot:""}])},"/sDA":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-9ef4ce2c] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-9ef4ce2c]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSlide/src/components/manageSlide/slideCreate.vue"],names:[],mappings:";AAySA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"slideCreate.vue",sourcesContent:['<template>\n  <div class="slide create">\n    <circle-title\n      title-name="轮播图编辑"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="ruleForm"\n      :model="ruleForm"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="轮播图标题"\n        prop="chart_name">\n        <el-input v-model.trim="ruleForm.chart_name"/>\n      </el-form-item>\n      <el-form-item\n        class="item"\n        label="上传图片"\n        prop="icon">\n        <el-upload\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :show-file-list="false"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="ruleForm.icon"\n            :src="ruleForm.icon"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="关联内容"\n        prop="relativeContent">\n        <el-input\n          v-model="ruleForm.relativeContent"\n          disabled\n          style="width: 87%"/>\n        <el-button\n          type="primary"\n          style="width: 11%;margin-left: 1%"\n          @click="dialogVisible = true">添加</el-button>\n      </el-form-item>\n      <el-dialog\n        :visible.sync="dialogVisible"\n        title="选择关联内容"\n        width="70%">\n        <el-radio-group\n          v-model="radio"\n          text-color="#ffffff"\n          fill="#694EFF"\n          size="small"\n          @change="handleOperationClick(radio)">\n          <el-radio-button label="稿件"/>\n          <el-radio-button label="专题"/>\n        </el-radio-group>\n        <div\n          :is="componentName"\n          @selected-row="selectedRow"/>\n      </el-dialog>\n      <el-form-item\n        label="归属频道"\n        prop="channelid">\n        <el-select\n          v-model="ruleForm.channelid"\n          filterable\n          clearable\n          placeholder="">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="有效期"\n        class="indate"\n        required>\n        <el-date-picker\n          v-model="ruleForm.indate"\n          :clearable="false"\n          style="width:100%"\n          type="datetimerange"\n          range-separator="至"\n          format="yyyy-MM-dd HH:mm"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"/>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="ruleForm.state"\n          placeholder="请选择">\n          <el-option\n            :value="1"\n            label="启用"/>\n          <el-option\n            :value="0"\n            label="停用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        prop="sort"\n        class="sort"\n        required>\n        <el-input\n          v-model.number="ruleForm.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'ruleForm\')">提交</el-button>\n        <router-link to="/manageSlide/list">\n          <el-button>取消</el-button>\n        </router-link>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/slideApi\'\nimport AddTopic from \'./addTopic\'\nimport AddManuscript from \'./addManuscript\'\nimport uploadHeaders from \'@/mixins\'\nexport default {\n  components: {\n    CircleTitle,\n    AddManuscript,\n    AddTopic\n  },\n\n  mixins: [uploadHeaders],\n  \n  data () {\n    return {\n      ruleForm: {\n        chart_name: \'\',\n        icon: \'\',\n        imageUrl: \'\',\n        indate: [new Date(), new Date()],\n        sort: \'\',\n        channelid: \'\',\n        relativeContent: \'\',\n        state: 0\n      },\n      radio: \'稿件\',\n      isChooseDate: false,\n      dialogVisible: false,\n      componentName: \'AddManuscript\',\n      rules: {\n        chart_name: [\n          { required: true, message: \'请输入轮播图标题\', trigger: \'blur\' },\n          { min: 0, max: 64, message: \'标题限定64个字符内\', trigger: \'change\' }\n        ],\n        channelid: [\n          { required: true, message: \'请选择归属频道\', trigger: \'blur\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          { type: \'number\', message: \'排序必须为数字\' }\n        ],\n        icon: [\n          { required: true, message: \'请上传图片\', trigger: \'blur\' }\n        ],\n        relativeContent: { required: true, message: \'请选择关联内容\', trigger: \'blur\' }\n      },\n      chartid: \'\',\n      channelTypeList: [],\n      jump_type: 0, // 关联的是稿件还是专题\n      articleid: \'\',\n      specialid: \'\',\n      jump_url: \'\'\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getListUsableChannel()\n  },\n  methods: {\n    /** 选择稿件，选择专题 **/\n    handleOperationClick (radio) {\n      if (radio) {\n        switch (radio) {\n          case \'稿件\':\n            this.componentName = \'AddManuscript\'\n            break\n          case \'专题\':\n            this.componentName = \'AddTopic\'\n        }\n      }\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.addSlide({\n            \'rotationChart\': {\n              \'chart_name\': this.ruleForm.chart_name,\n              \'chart_head_url\': this.ruleForm.icon,\n              \'jump_type\': this.jump_type,\n              \'articleid\': this.articleid,\n              \'specialid\': this.specialid,\n              \'channelid\': this.ruleForm.channelid,\n              \'expiry_date_start\': new Date(this.ruleForm.indate[0]).getTime(),\n              \'expiry_date_end\': new Date(this.ruleForm.indate[1]).getTime(),\n              \'sort\': this.ruleForm.sort,\n              \'state\': this.ruleForm.state\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/manageSlide/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'添加成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.ruleForm.icon = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'上传图片只能是 JPG 格式!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取轮播图配置的稿件或专题信息 **/\n    selectedRow (row) {\n      this.dialogVisible = false\n      if (row.articleid) {\n        this.ruleForm.relativeContent = \'稿件-\' + row.title\n        this.jump_type = 1\n        this.articleid = row.articleid\n        this.specialid = \'\'\n        this.jump_url = row.article_url\n      } else {\n        this.ruleForm.relativeContent = \'专题-\' + row.special_name\n        this.jump_type = 2\n        this.articleid = \'\'\n        this.specialid = row.specialid\n        this.jump_url = \'\'\n      }\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},"/uBi":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-70231bb7]{\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageLog/src/components/manageLog/logStatistics.vue"],names:[],mappings:";AAsQA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;CACA",file:"logStatistics.vue",sourcesContent:["<template>\n  <div class=\"log-statistics\">\n    <div>\n      <circle-title\n        title-name=\"日志统计管理\"\n        class=\"cicle-controller\"\n      />\n      <div class=\"search-form-container\">\n        <el-form\n          :inline=\"true\"\n          :model=\"ruleForm\"\n          class=\"demo-form-inline\">\n          <el-form-item label=\"操作人员\">\n            <el-input\n              v-model=\"ruleForm.username\"\n              clearable/>\n          </el-form-item>\n          <el-form-item label=\"操作事件\">\n            <el-input\n              v-model=\"ruleForm.operationContent\"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label=\"操作开始日期\">\n            <el-date-picker\n              :title=\"ruleForm.startDate | FormatDate('yyyy-MM-dd hh:mm')\"\n              v-model=\"ruleForm.startDate\"\n              type=\"datetime\"\n              format=\"yyyy-MM-dd HH:mm\"\n              placeholder=\"选择日期\"\n              @change=\"getLogList\"/>\n          </el-form-item>\n          <el-form-item\n            style=\"margin-left: -28px;\"\n            label=\"操作结束日期\">\n            <el-date-picker\n              :title=\"ruleForm.endDate | FormatDate('yyyy-MM-dd hh:mm')\"\n              v-model=\"ruleForm.endDate\"\n              type=\"datetime\"\n              format=\"yyyy-MM-dd HH:mm\"\n              placeholder=\"选择日期\"\n              @change=\"getLogList\"/>\n          </el-form-item>\n          <el-button\n            type=\"primary\"\n            style=\"margin-left: 98px;\"\n            @click=\"getLogList\">\n            查询\n            <i class=\"el-icon-search el-icon--right\"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class=\"table-list\">\n      <el-table\n        ref=\"channelTable\"\n        :data=\"tableData\"\n        stripe\n        class=\"whole-table\"\n        min-height=\"400\">\n        <el-table-column\n          v-for=\"(item, index) in tableHeader\"\n          :key=\"index\"\n          :prop=\"item.prop\"\n          :label=\"item.label\"\n          :width=\"item.width\"\n          :formatter=\"item.formatter\"\n          align=\"center\"\n          show-overflow-tooltip\n        />\n      </el-table>\n      <div class=\"pagination\">\n        <div>\n          <el-select\n            v-model=\"batchProcess\"\n            placeholder=\"清除日志\"\n            @change=\"clearLog\">\n            <el-option\n              v-for=\"item in processList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n              :disabled=\"item.disabled\"/>\n          </el-select>\n        </div>\n        <el-pagination\n          :total=\"total\"\n          :page-sizes=\"[10, 20, 30, 40]\"\n          background\n          layout=\"total, sizes, prev, pager, next\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/logApi'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      ruleForm: {\n        username: '',\n        operationContent: '',\n        startDate: '',\n        endDate: ''\n      },\n      tableHeader: [\n        {\n          prop: 'logid',\n          label: '日志编号',\n          width: 180\n        },\n        {\n          prop: 'username',\n          label: '操作人员',\n          width: 120\n        },\n        {\n          prop: 'createtime',\n          label: '操作日期',\n          width: 140,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters['FormatDate'](cellValue, 'yyyy-MM-dd hh:mm')\n          }\n        },\n        {\n          prop: 'ipAddress',\n          label: 'IP地址',\n          width: 180\n        },\n        {\n          prop: 'operationContent',\n          label: '操作事件'\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      batchProcess: '',\n      processList: [\n        {\n          value: 'week',\n          label: '一周之前'\n        }, {\n          value: 'month',\n          label: '一个月之前'\n        }, {\n          value: 'halfYear',\n          label: '半年之前'\n        }, {\n          value: 'year',\n          label: '一年之前'\n        }\n      ]\n    }\n  },\n  watch: {\n    'ruleForm.username' (val) {\n      this.getLogList()\n    },\n    'ruleForm.operationContent' (val) {\n      this.getLogList()\n    }\n  },\n  mounted () {\n    /** 获取日志列表 **/\n    this.getLogList()\n  },\n  methods: {\n    getLogList () {\n      this.$options.filters['swapTime'](this.ruleForm)\n      let timeStart = this.ruleForm.startDate !== null ? new Date(this.ruleForm.startDate).getTime() : null\n      let timeEnd = this.ruleForm.endDate !== null ? new Date(this.ruleForm.endDate).getTime() : null\n      let option = {\n        'pageNo': this.pageNo,\n        'pageSize': this.pageSize,\n        'username': this.ruleForm.username,\n        'operationContent': this.ruleForm.operationContent,\n        'timeStart': timeStart,\n        'timeEnd': timeEnd\n      }\n      Actions.getLogList(option).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n          this.pageNo = listData.pageNum\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getLogList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getLogList()\n    },\n    clearLog (val) {\n      this.$confirm('是否清除日志?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        switch (val) {\n          case 'week':\n            this.deleteLog({\n              'days': 7,\n              'months': null,\n              'years': null\n            })\n            break\n          case 'month':\n            this.deleteLog({\n              'days': null,\n              'months': 1,\n              'years': null\n            })\n            break\n          case 'halfYear':\n            this.deleteLog({\n              'days': null,\n              'months': 6,\n              'years': null\n            })\n            break\n          case 'year':\n            this.deleteLog({\n              'days': null,\n              'months': null,\n              'years': 1\n            })\n            break\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    deleteLog (obj) {\n      Actions.deleteLog(\n        obj\n      ).then(res => {\n        if (res.data.status) {\n          this.$notify({\n            type: 'success',\n            title: '提示',\n            message: '清除成功!'\n          })\n          this.getLogList()\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n</style>\n<style>\n  .log-statistics .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .log-statistics .search-form-container .el-form-item {\n    width: 31%;\n    margin-right: 10px;\n  }\n  .pagination .el-select{\n    width: auto;\n    margin-left: 0;\n  }\n</style>\n"],sourceRoot:""}])},0:function(e,n,t){t("NHnr"),t("0vT8"),e.exports=t("rMzd")},"0m4B":function(e,n,t){var a=t("l2rU");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("324d754b",a,!1,{})},"0vT8":function(e,n){},"1mAr":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.search-form-container .btn-container .el-button{\n  padding: 12px 10px;\n}\n.search-form-container .btn-container .el-icon--right{\n  margin: 0;\n}\n.custom-dialog .el-dialog__header{\n  /*padding: 0;*/\n  border-bottom: 1px solid rgba(192,190,255,1);\n}\n.el-tooltip__popper{\n  max-width: 300px;\n}\n.coomment-list .el-form--inline .el-form-item__content {\n  width: 65%;\n}\n.coomment-list .search-form-container .el-form-item {\n  width: 23%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageComment/src/components/manageComment/commentList.vue"],names:[],mappings:";AA8wBA;EACA,mBAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,eAAA;EACA,6CAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA",file:"commentList.vue",sourcesContent:["<template>\n  <div class=\"coomment-list\">\n    <div>\n      <circle-title\n        title-name=\"评论管理\"\n        class=\"cicle-controller\"\n      />\n      <div class=\"comment-top-info\">\n        <div\n          :class=\"['comment-info-item', countAuditWait ? 'comment-active-bg': '']\"\n          @click=\"changeComment('countAuditWait')\">\n          <div class=\"box\">\n            <span\n              :class=\"['comment-icon-container', countAuditWait ? 'icon-container-bg': 'comment-sec-bg']\">\n              <i\n                :style=\"{'color': countAuditWait ? '#694EFF': ''}\"\n                class=\"iconfont icon-daishenhe\"/>\n            </span>\n            <span class=\"comment-data\">\n              <span :style=\"{'color': countAuditWait ? 'white': 'rgba(71,71,71,1)'}\">{{ countAuditWaitNum }}</span>\n              <span :style=\"{'color': countAuditWait ? 'white': 'rgba(71,71,71,1)'}\">待审核</span>\n            </span>\n          </div>\n        </div>\n        <div\n          :class=\"['comment-info-item', countAuditPass ? 'comment-active-bg': '']\"\n          @click=\"changeComment('countAuditPass')\">\n          <div class=\"box\">\n            <span\n              :class=\"['comment-icon-container', countAuditPass ? 'icon-container-bg': 'comment-thr-bg']\">\n              <i\n                :style=\"{'color': countAuditPass ? '#694EFF': ''}\"\n                class=\"iconfont icon-audit\"/>\n            </span>\n            <span class=\"comment-data\">\n              <span :style=\"{'color': countAuditPass ? 'white': 'rgba(71,71,71,1)'}\">{{ countAuditPassNum }}</span>\n              <span :style=\"{'color': countAuditPass ? 'white': 'rgba(71,71,71,1)'}\">已通过</span>\n            </span>\n          </div>\n        </div>\n        <div\n          :class=\"['comment-info-item', countAuditNotPass ? 'comment-active-bg': '']\"\n          @click=\"changeComment('countAuditNotPass')\">\n          <div class=\"box\">\n            <span\n              :class=\"['comment-icon-container', countAuditNotPass ? 'icon-container-bg': 'comment-four-bg']\">\n              <i\n                :style=\"{'color': countAuditNotPass ? '#694EFF': ''}\"\n                class=\"iconfont icon-yishanchu\"/>\n            </span>\n            <span class=\"comment-data\">\n              <span :style=\"{'color': countAuditNotPass ? 'white': 'rgba(71,71,71,1)'}\">{{ countAuditNotPassNum }}</span>\n              <span :style=\"{'color': countAuditNotPass ? 'white': 'rgba(71,71,71,1)'}\">未通过</span>\n            </span>\n          </div>\n        </div>\n        <div\n          :class=\"['comment-info-item', countAudit ? 'comment-active-bg': '']\"\n          @click=\"changeComment('countAudit')\">\n          <div class=\"box\">\n            <span\n              :class=\"['comment-icon-container', countAudit ? 'icon-container-bg': 'comment-first-bg']\">\n              <i\n                :style=\"{'color': countAudit ? '#694EFF': ''}\"\n                class=\"iconfont icon-square-solid\"/>\n            </span>\n            <span class=\"comment-data\">\n              <span :style=\"{'color': countAudit ? 'white': 'rgba(71,71,71,1)'}\">{{ countAuditNum }}</span>\n              <span :style=\"{'color': countAudit ? 'white': 'rgba(71,71,71,1)'}\">全部</span>\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class=\"search-form-container\">\n        <el-form\n          :inline=\"true\"\n          :model=\"comment\"\n          class=\"demo-form-inline\">\n          <el-form-item label=\"用户名\">\n            <el-input\n              v-model=\"comment.user_nickname\"\n              clearable/>\n          </el-form-item>\n          <el-form-item label=\"注册手机\">\n            <el-input\n              v-model=\"comment.user_phone\"\n              clearable/>\n          </el-form-item>\n          <el-form-item label=\"标题\">\n            <el-input\n              v-model=\"comment.title\"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label=\"模块\"\n            class=\"search-left\">\n            <el-select\n              v-model=\"comment.type\"\n              placeholder=\"\"\n              @change=\"getCommentList\">\n              <el-option\n                value=\"\"\n                label=\"全部\"/>\n              <el-option\n                :value=\"1\"\n                label=\"资讯\"/>\n              <el-option\n                :value=\"2\"\n                label=\"点播\"/>\n              <el-option\n                :value=\"3\"\n                label=\"直播\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label=\"评论时间\"\n            style=\"position: relative;left: -15px;\">\n            <el-date-picker\n              :title=\"comment.startDate | FormatDate('yyyy-MM-dd hh:mm')\"\n              v-model=\"comment.startDate\"\n              type=\"datetime\"\n              format=\"yyyy-MM-dd HH:mm\"\n              placeholder=\"选择时间\"\n              @change=\"getCommentList\"/>\n          </el-form-item>\n          <el-form-item\n            label=\"结束时间\"\n            class=\"date-left\">\n            <el-date-picker\n              :title=\"comment.endDate | FormatDate('yyyy-MM-dd hh:mm')\"\n              v-model=\"comment.endDate\"\n              type=\"datetime\"\n              format=\"yyyy-MM-dd HH:mm\"\n              placeholder=\"选择时间\"\n              @change=\"getCommentList\"/>\n          </el-form-item>\n          <el-button\n            type=\"primary\"\n            style=\"margin-left: 12px\"\n            @click=\"getCommentList\">\n            查询\n            <i class=\"el-icon-search el-icon--right\"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class=\"table-list\">\n      <el-table\n        ref=\"channelTable\"\n        :data=\"tableData\"\n        stripe\n        class=\"whole-table\"\n        min-height=\"400\"\n        @select-all=\"selectAll\"\n        @selection-change=\"selectionChange\">\n        <el-table-column\n          type=\"selection\"\n          align=\"center\"\n          width=\"55\"/>\n        <el-table-column\n          v-for=\"(item, index) in tableHeader\"\n          :key=\"index\"\n          :prop=\"item.prop\"\n          :label=\"item.label\"\n          :width=\"item.width\"\n          :formatter=\"item.formatter\"\n          align=\"center\"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label=\"置顶状态\"\n          align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-tooltip\n              v-if=\"!scope.row.top\"\n              class=\"item\"\n              effect=\"dark\"\n              content=\"点击置顶\"\n              placement=\"top\">\n              <el-tag\n                size=\"mini\"\n                class=\"setPointer\"\n                style=\"width:60px;\"\n                @click.native=\"setManuUnTop(scope.row)\">\n                置顶\n              </el-tag>\n            </el-tooltip>\n            <el-tooltip\n              v-else\n              class=\"item\"\n              effect=\"dark\"\n              content=\"点击取消置顶\"\n              placement=\"top\">\n              <el-tag\n                size=\"mini\"\n                class=\"setPointer\"\n                style=\"width:60px;color:#694eff\"\n                @click.native=\"setManuTop(scope.row)\">\n                取消置顶\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"操作\"\n          align=\"center\"\n          width=\"350\">\n          <template slot-scope=\"scope\">\n            <span class=\"manu-container\">\n              <span\n                class=\"manu delete-active\"\n                @click=\"audit(scope.row)\">\n                {{ scope.row.audit === 0 ? '审核': '已审核' }}\n              </span>\n              <span\n                :class=\"['manu', 'delete-active']\"\n                @click=\"deleteComments(scope.row)\">\n                删除\n              </span>\n              <span\n                :class=\"['manu', 'delete-active']\"\n                @click=\"forbiddenUser(scope.row)\">\n                {{ scope.row.user_forbidden ? '取消禁言': '禁言' }}\n              </span>\n              <span\n                class=\"manu comment-detail\"\n                @click=\"lookComment(scope.row)\">\n                评论查看\n              </span>\n              <span\n                class=\"manu comment-detail\"\n                @click=\"audit_opinion(scope.row)\">\n                审核意见\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"pagination\">\n        <div>\n          <el-checkbox\n            v-model=\"selfSelectAll\"\n            @change=\"toggleAllSelection\">\n            全选\n          </el-checkbox>\n          <el-select\n            v-model=\"batchProcess\"\n            placeholder=\"请选择\">\n            <el-option\n              v-for=\"item in processList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n              :disabled=\"item.disabled\"/>\n          </el-select>\n          <el-button\n            type=\"primary\"\n            @click=\"deleteManyComment\">确定</el-button>\n          <el-button\n            v-show=\"1 === 2\"\n            type=\"primary\">导出数据</el-button>\n        </div>\n        <el-pagination\n          :total=\"total\"\n          :page-sizes=\"[10, 20, 30, 40]\"\n          background\n          layout=\"total, sizes, prev, pager, next\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"/>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync=\"dialogVisible\"\n      custom-class=\"custom-dialog\"\n      title=\"审核\"\n      width=\"30%\"\n      @close=\"closeDialog\">\n      <div\n        :is=\"componentName\"\n        :commentid=\"commentid\"\n        @close-dialog=\"closeDialog\"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/commentApi'\nimport Audit from './audit'\nexport default {\n  components: {\n    CircleTitle,\n    Audit\n  },\n  data () {\n    return {\n      comment: {\n        user_nickname: '',\n        type: '',\n        user_phone: '',\n        startDate: '',\n        endDate: '',\n        title: ''\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: 'user_phone',\n          label: '用户信息',\n          formatter: (row, column, cellValue, index) => {\n            return <div><p>用户名:{row.user_nickname}</p><p>电话:{cellValue}</p></div>\n          }\n        },\n        {\n          prop: 'title',\n          label: '源内容',\n          formatter: (row, column, cellValue, index) => {\n            let module = ''\n            if (row.type === 1) {\n              module = '资讯'\n            } else if (row.type === 2) {\n              module = '点播'\n            } else {\n              module = '直播'\n            }\n            return <div><p>模块:{module}</p><p>标题:{cellValue}</p></div>\n          }\n        },\n        {\n          prop: 'comment_content',\n          label: '评价内容'\n        },\n        {\n          prop: 'createtime',\n          label: '评论日期',\n          width: 200,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters['FormatDate'](cellValue, 'yyyy-MM-dd hh:mm')\n          }\n        },\n        {\n          prop: 'audit',\n          label: '状态',\n          width: '100',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 0) {\n              return '待审核'\n            } else if (cellValue === 1) {\n              return '已通过'\n            } else if (cellValue === 2) {\n              return '未通过'\n            }\n          }\n        }\n      ],\n      tableData: [],\n      batchProcess: 1,\n      processList: [\n        {\n          value: 1,\n          label: '删除'\n        }\n      ],\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false,\n      componentName: '',\n      selfSelectAll: false, // 自定义的全选\n      countAuditWait: true,\n      countAuditPass: false,\n      countAuditNotPass: false,\n      countAudit: false,\n      countAuditWaitNum: 0,\n      countAuditPassNum: 0,\n      countAuditNotPassNum: 0,\n      countAuditNum: 0,\n      commentid: '',\n      commentList: [], // 批量删除评论所用的容器\n      selectedCommentInfo: {}\n    }\n  },\n  computed: {\n    showNullTag () {\n      return function (arr) {\n        if (!arr) {\n          return true\n        } else if (arr.length <= 0) {\n          return true\n        } else {\n          return false\n        }\n      }\n    }\n  },\n  watch: {\n    'comment.user_nickname' () {\n      this.getCommentList()\n    },\n    'comment.user_phone' () {\n      this.getCommentList()\n    },\n    'comment.title' () {\n      this.getCommentList()\n    }\n  },\n  mounted () {\n    this.getCountComments()\n    this.getCommentList()\n  },\n  methods: {\n    /** 获取评论总数（全部，已通过，未通过，待审核） **/\n    getCountComments () {\n      Actions.countComments().then(res => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.countAuditWaitNum = data.countAuditWait\n          this.countAuditPassNum = data.countAuditPass\n          this.countAuditNotPassNum = data.countAuditNotPass\n          this.countAuditNum = data.countAudit\n        }\n      })\n    },\n    /** 待审核的评论点击触发事件 **/\n    changeComment (event) {\n      switch (event) {\n        case 'countAuditWait':\n          this.countAuditWait = true\n          this.countAuditPass = false\n          this.countAuditNotPass = false\n          this.countAudit = false\n          this.getCommentList()\n          break\n        case 'countAuditPass':\n          this.countAuditWait = false\n          this.countAuditPass = true\n          this.countAuditNotPass = false\n          this.countAudit = false\n          this.getCommentList()\n          break\n        case 'countAuditNotPass':\n          this.countAuditWait = false\n          this.countAuditPass = false\n          this.countAuditNotPass = true\n          this.countAudit = false\n          this.getCommentList()\n          break\n        case 'countAudit':\n          this.countAuditWait = false\n          this.countAuditPass = false\n          this.countAuditNotPass = false\n          this.countAudit = true\n          this.getCommentList()\n          break\n      }\n    },\n    /** 获取评论列表 **/\n    getCommentList () {\n      let audit = ''\n      audit = this.countAuditWait ? 0 : audit\n      audit = this.countAuditPass ? 1 : audit\n      audit = this.countAuditNotPass ? 2 : audit\n      this.$options.filters['swapTime'](this.comment)\n      let timeStart = this.comment.startDate !== null ? new Date(this.comment.startDate).getTime() : null\n      let timeEnd = this.comment.endDate !== null ? new Date(this.comment.endDate).getTime() : null\n      Actions.getCommentList({\n        'pageNo': this.pageNo,\n        'pageSize': this.pageSize,\n        'user_nickname': this.comment.user_nickname,\n        'user_phone': this.comment.user_phone,\n        'type': this.comment.type,\n        'title': this.comment.title,\n        'audit': audit,\n        'timeStart': timeStart,\n        'timeEnd': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getCommentList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getCommentList()\n    },\n    /** 获取全选的数据 **/\n    selectAll (e) {\n      if (e.length > 0) {\n        this.selfSelectAll = true\n      } else {\n        this.selfSelectAll = false\n      }\n    },\n    /** 置顶 **/\n    setManuUnTop (row) {\n      if (row.audit === 1) {\n        Actions.topComments({\n          'commentVo': {\n            'commentid': row.commentid,\n            'top': true\n          }\n        }).then(res => {\n          this.getCommentList()\n        })\n      } else {\n        this.$message({\n          type: 'error',\n          message: '审核通过的评论才能置顶!'\n        })\n      }\n    },\n    /** 取消置顶 **/\n    setManuTop (row) {\n      Actions.topComments({\n        'commentVo': {\n          'commentid': row.commentid,\n          'top': false\n        }\n      }).then(res => {\n        this.getCommentList()\n      })\n    },\n    /** 删除评论 **/\n    deleteComments (row) {\n      this.$confirm('是否删除\"' + row.user_nickname + '\"的评论?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        Actions.deleteComments({\n          'commentVo': {\n            'commentid': row.commentid\n          }\n        }).then((res) => {\n          if (res.status) {\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            })\n          }\n          this.getCommentList()\n          this.getCountComments()\n        })\n      }).catch(() => {\n      })\n    },\n    /** 禁言用户 **/\n    forbiddenUser (row) {\n      if (!row.user_forbidden) {\n        Actions.forbiddenUserComment({\n          'forbiddenCommentVo': {\n            'userid': row.userid\n          }\n        }).then(res => {\n          if (res.data.status) {\n            this.$message({\n              'type': 'success',\n              'message': '禁言成功'\n            })\n            this.getCommentList()\n          }\n        })\n      } else {\n        Actions.cancelForbiddenComment({\n          'forbiddenCommentVo': {\n            'userid': row.userid\n          }\n        }).then(res => {\n          if (res.data.status) {\n            this.$message({\n              'type': 'success',\n              'message': '取消禁言成功'\n            })\n            this.getCommentList()\n          }\n        })\n      }\n    },\n    /** 评论查看 **/\n    lookComment (row) {\n      this.comment.user_nickname = row.user_nickname\n      this.comment.user_phone = row.user_phone\n      // this.comment.title = row.title\n      this.getCommentList()\n    },\n    /** 审核意见 **/\n    audit_opinion (row) {\n      let tipContent = ''\n      if (row.audit_opinion) {\n        tipContent = row.audit_opinion\n      } else {\n        tipContent = '暂无审核意见'\n      }\n      this.$alert(tipContent, '审核意见', {\n        confirmButtonText: '确定',\n        callback: action => {\n        }\n      })\n    },\n    /** 审核 **/\n    audit (row) {\n      if (row.audit === 0) {\n        this.dialogVisible = true\n        this.componentName = 'Audit'\n        this.commentid = row.commentid\n      }\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      this.commentList = []\n      selection.forEach((item, index, arr) => {\n        this.commentList.push(item.commentid)\n      })\n      this.selectedCommentInfo = selection\n    },\n    /** 批量删除评论 **/\n    deleteManyComment () {\n      if (this.commentList.length <= 0) {\n        this.$message({\n          type: 'error',\n          message: '请至少选择一条评论!'\n        })\n        return false\n      }\n      let tipContent = '您所选择的:\"'\n      /** 已上线的稿件不可删除的提示 **/\n      this.selectedCommentInfo.forEach((item, index, arr) => {\n        tipContent += '(' + item.user_nickname + ')'\n      })\n      this.$confirm(tipContent + '用户评论即将被删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        Actions.batchDeleteComments({\n          'idList': this.commentList\n        }).then((res) => {\n          console.log(res)\n          if (res.status) {\n            this.$message({\n              type: 'success',\n              message: '批量删除成功!'\n            })\n          }\n          this.getCommentList()\n          this.getCountComments()\n        })\n      }).catch(() => {\n      })\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = ''\n      this.dialogVisible = false\n      this.getCommentList()\n      this.getCountComments()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .manu{\n    display: inline-block;\n    width: auto;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n  .comment-detail{\n    border:1px solid rgba(231,125,0,1);\n    color: rgba(231,125,0,1);\n  }\n  .date-left{\n    margin-left: 28px;\n  }\n  .comment-top-info{\n    display: flex;\n    justify-content: space-between;\n    width: 95%;\n    height: 120px;\n    margin: 0 auto;\n    margin-bottom: 60px;\n    border: 1px solid #DADEDF;\n  }\n  .comment-info-item{\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    border-right: 1px solid #DADEDF;\n    width: 25%;\n    cursor: pointer;\n  }\n  .box {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    margin: auto;\n  }\n  .change-backgroud{\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    margin: auto;\n    background-color: #694EFF;\n    color: white;\n  }\n  .comment-data {\n    display: flex;\n    flex-direction: column;\n    margin-left: 15px;\n    color:rgba(71,71,71,1);\n  }\n  .comment-data span:first-child {\n    font-size: 24px;\n  }\n  .comment-data span:last-child{\n    font-size:14px;\n  }\n  .comment-icon-container{\n    width:60px;\n    height: 60px;\n    border-radius: 100%;\n    text-align: center;\n    line-height: 68px;\n  }\n  .comment-active-bg{\n    background: rgba(105,78,255,1);\n  }\n  .icon-container-bg{\n    background: white;\n  }\n  .icon-color{\n    color: #694EFF;\n  }\n  .comment-first-bg{\n    background: rgba(255, 206, 91, 1);\n  }\n  .comment-sec-bg{\n    background: rgba(253,111,88,1);\n  }\n  .comment-thr-bg{\n    background: rgba(95, 157, 249, 1);\n  }\n  .comment-four-bg{\n    background: rgba(120, 232, 229, 1);\n  }\n  .comment-icon-container i{\n    font-size: 30px;\n    color:white;\n    display: inline-block;\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n  .custom-dialog .el-dialog__header{\n    /*padding: 0;*/\n    border-bottom: 1px solid rgba(192,190,255,1);\n  }\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .coomment-list .el-form--inline .el-form-item__content {\n    width: 65%;\n  }\n  .coomment-list .search-form-container .el-form-item {\n    width: 23%;\n  }\n</style>\n"],sourceRoot:""}])},"21cq":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-43dc1bb0]{\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.manu[data-v-43dc1bb0]{\n  display: inline-block;\n  width: 30px;\n  height: 20px;\n  border:1px solid rgba(181, 184, 217, 1);\n  border-radius: 20px;\n  font-size: 13px;\n  padding: 1px 5px 2px 5px;\n  color: rgba(181, 184, 217, 1);\n  cursor: pointer;\n}\n.manu-up-active[data-v-43dc1bb0]{\n  border: 1px solid rgba(231, 125, 0, 1);\n  color:rgba(231, 125, 0, 1);\n}\n.manu-back-active[data-v-43dc1bb0]{\n  border: 1px solid rgba(240, 8, 8, 1);\n  color:rgba(240, 8, 8, 1);\n}\n.delete-active[data-v-43dc1bb0]{\n  border:1px solid rgba(105, 78, 255, 1);\n  color: rgba(105, 78, 255, 1);\n}\n.date-left[data-v-43dc1bb0]{\n  margin-left: 28px;\n}\n.pagination[data-v-43dc1bb0] {\n  display: -webkit-box;\n  -webkit-box-pack: end;\n}\n.btn-container[data-v-43dc1bb0] {\n  width: 400px !important;\n  left: 68px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageLive/src/components/manageLive/liveList.vue"],names:[],mappings:";AAuiBA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;CACA;AACA;EACA,sBAAA;EACA,YAAA;EACA,aAAA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;EACA,yBAAA;EACA,8BAAA;EACA,gBAAA;CACA;AACA;EACA,uCAAA;EACA,2BAAA;CACA;AACA;EACA,qCAAA;EACA,yBAAA;CACA;AACA;EACA,uCAAA;EACA,6BAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,qBAAA;EACA,sBAAA;CACA;AACA;EACA,wBAAA;EACA,WAAA;CACA",file:"liveList.vue",sourcesContent:['<template>\n  <div class="live">\n    <div>\n      <circle-title\n        title-name="直播管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="live"\n          class="demo-form-inline">\n          <el-form-item label="直播主题">\n            <el-input\n              v-model="live.live_name"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="live.state"\n              placeholder=""\n              @change="searchLive">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="0"\n                label="撤销"/>\n              <el-option\n                :value="1"\n                label="待播"/>\n              <el-option\n                :value="2"\n                label="直播中"/>\n              <el-option\n                :value="3"\n                label="已结束"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="live.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="live.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchLive"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            class="date-left">\n            <el-date-picker\n              :title="live.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="live.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchLive"/>\n          </el-form-item>\n          <el-form-item class="btn-container">\n            <el-button\n              type="primary"\n              @click="searchLive">\n              查询\n              <i class="el-icon-search el-icon--right"/>\n            </el-button>\n            <router-link to="/live/create">\n              <el-button type="primary">\n                添加直播\n                <i class="el-icon-plus el-icon--right"/>\n              </el-button>\n            </router-link>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="置顶状态"\n          align="center">\n          <template slot-scope="scope">\n            <el-tooltip\n              v-if="!scope.row.top"\n              class="item"\n              effect="dark"\n              content="点击置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;"\n                @click.native="setTop(scope.row)">\n                置顶\n              </el-tag>\n            </el-tooltip>\n            <el-tooltip\n              v-else\n              class="item"\n              effect="dark"\n              content="点击取消置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;color:#694eff"\n                @click.native="setUnTop(scope.row)">\n                取消置顶\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="操作"\n          align="center"\n          width="200">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                v-if="scope.row.state === 0"\n                class="manu delete-active"\n                @click="upManu(scope.row)">\n                上稿\n              </span>\n              <span\n                v-if="scope.row.state === 1"\n                class="manu delete-active"\n                @click="downManu(scope.row)">\n                撤稿\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="editLive(scope.row)">\n                编辑\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="deleteLive(scope.row)">\n                删除\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          fixed="right"\n          label="权限配置"\n          align="center"\n          width="115">85\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="评论"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_comment ? \'#ffa507\': \'#B5B8D9\'}"\n                class="allow_comment"\n                @click="handleComment(scope.row)"\n              >\n                <i\n                  style="color: white"\n                  class="iconfont icon-manu-comment"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="分享"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_share ? \'#1883FF\': \'#B5B8D9\'}"\n                class="allow_share"\n                @click="handleShare(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-share"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="点赞"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_like ? \'#F00808\': \'#B5B8D9\'}"\n                class="allow_like"\n                @click="handlePraise(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-praise"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="收藏"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_collect ? \'#694EFF\': \'#B5B8D9\'}"\n                class="allow_collect"\n                @click="handleCollect(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-collect"/>\n              </div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/liveApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      live: {\n        live_name: \'\',\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      channelTypeList: [], // 所属频道列表\n      specialList: [],\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'live_name\',\n          label: \'主题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'创建日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'live_head_url\',\n          label: \'导视图\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'expiry_date_end\',\n          label: \'直播周期\',\n          width: 200,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](row.expiry_date_start, \'yyyy-MM-dd hh:mm\') + \'至\' + this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'live_url\',\n          label: \'默认视频链接\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>{cellValue}</a>\n          }\n        },\n        {\n          prop: \'showState\',\n          label: \'状态\',\n          width: \'100\'\n        }\n      ],\n      tableData: [],\n      comment: false,\n      share: false,\n      praise: false,\n      collect: false,\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false\n    }\n  },  \n  watch: {\n    \'live.live_name\' () {\n      this.searchLive()\n    }\n  },  \n  mounted () {\n    this.getLiveList()\n\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetLiveOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getLiveList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/live/create\') {\n      this.resetLiveOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    /** 获取稿件列表 **/\n    getLiveList () {\n      let timeStart = this.live.startDate !== null ? new Date(this.live.startDate).getTime() : null\n      let timeEnd = this.live.endDate !== null ? new Date(this.live.endDate).getTime() : null\n      Actions.getLiveList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'live_name\': this.live.live_name,\n        \'state\': this.live.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchLive()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getLiveList()\n    },\n    /** 上稿 **/\n    upManu (row) {\n      this.updateLive(row.liveid, \'state\', 1)\n    },\n    /** 撤稿 **/\n    downManu (row) {\n      this.updateLive(row.liveid, \'state\', 0)\n    },\n    editLive (row) {\n      if (row.state === 1) {\n        this.$message({\n          type: \'error\',\n          message: \'不可编辑已上稿的直播!\'\n        })\n      } else {\n        sessionStorage.setItem(\'liveid\', row.liveid)\n        this.$router.push({path: \'/live/edit\'})\n      }\n    },\n    /** 评论权限 **/\n    handleComment (row) {\n      if (row.state !== 1) {\n        if (row.allow_comment) {\n          this.updateLive(row.liveid, \'allow_comment\', false)\n        } else {\n          this.updateLive(row.liveid, \'allow_comment\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'上稿的直播不可操作评论权限!\'\n        })\n      }\n    },\n    /** 分享权限 **/\n    handleShare (row) {\n      if (row.state !== 1) {\n        if (row.allow_share) {\n          this.updateLive(row.liveid, \'allow_share\', false)\n        } else {\n          this.updateLive(row.liveid, \'allow_share\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'上稿的直播不可操作分享权限!\'\n        })\n      }\n    },\n    /** 点赞权限 **/\n    handlePraise (row) {\n      if (row.state !== 1) {\n        if (row.allow_like) {\n          this.updateLive(row.liveid, \'allow_like\', false)\n        } else {\n          this.updateLive(row.liveid, \'allow_like\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'上稿的直播不可操作点赞权限!\'\n        })\n      }\n    },\n    /** 收藏权限 **/\n    handleCollect (row) {\n      if (row.state !== 1) {\n        if (row.allow_collect) {\n          this.updateLive(row.liveid, \'allow_collect\', false)\n        } else {\n          this.updateLive(row.liveid, \'allow_collect\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'上稿的直播不可操作收藏权限!\'\n        })\n      }\n    },\n    /** 取消置顶 **/\n    setTop (row) {\n      this.updateLive(row.liveid, \'top\', true)\n    },\n    /** 取消置顶 **/\n    setUnTop (row) {\n      this.updateLive(row.liveid, \'top\', false)\n    },\n    /** 删除直播 **/\n    deleteLive (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.live_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteLive({\n            \'liveBroadcast\': {\n              \'liveid\': row.liveid\n            }\n          }).then((res) => {\n            if (res.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.searchLive()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'不可删除已上稿的直播!\'\n        })\n      }\n    },\n    /**\n       * 直播操作的公共接口\n       * @param articleid 直播ID\n       * @param key 更新字段名\n       * @param value 值\n       */\n    updateLive (liveid, key, value) {\n      Actions.updateState({\n        \'liveBroadcast\': {\n          \'liveid\': liveid,\n          [key]: value\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'操作成功!\'\n          })\n          this.searchLive()\n        }\n      })\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = \'\'\n    },\n    /** 搜索稿件 **/\n    searchLive () {\n      this.$options.filters[\'swapTime\'](this.live)\n      let timeStart = this.live.startDate !== null ? new Date(this.live.startDate).getTime() : null\n      let timeEnd = this.live.endDate !== null ? new Date(this.live.endDate).getTime() : null\n      Actions.getLiveList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'live_name\': this.live.live_name,\n        \'state\': this.live.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n\n    resetLiveOptions () {\n      this.live = {\n        live_name: \'\',\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      }\n      this.pageNo = 1\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .manu{\n    display: inline-block;\n    width: 30px;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n  .date-left{\n    margin-left: 28px;\n  }\n  .pagination {\n    display: -webkit-box;\n    -webkit-box-pack: end;\n  }\n  .btn-container {\n    width: 400px !important;\n    left: 68px;\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n  .custom-dialog .el-dialog__header{\n    /*padding: 0;*/\n    border-bottom: 1px solid rgba(192,190,255,1);\n  }\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .live .el-form--inline .el-form-item__content {\n    width: 65%;\n  }\n  .live .search-form-container .el-form-item {\n    width: 22%;\n  }\n  .live .allow_comment {\n    background-color: #ffa507;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .live .allow_share {\n    background-color: #1883FF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .live .allow_like {\n    background-color: #F00808;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .live .allow_collect {\n    background-color: #694EFF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n</style>\n'],sourceRoot:""}])},"273s":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.icon-container[data-v-52e96834]{\n  width: 450px;\n  margin:0 auto;\n  padding-bottom: 30px;\n}\n.channel-icon[data-v-52e96834]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.channel-icon span[data-v-52e96834]{\n  display: inline-block;\n  width: 100px;\n  height: 100px;\n  border: 1px solid gray;\n  margin-left: 5px;\n  margin-top: 5px;\n}\n.channel-icon span img[data-v-52e96834]{\n  width: 100%;\n  height: 100%;\n}\n.channel-icon span[data-v-52e96834]:hover{\n  border: 1px solid blue;\n}\n.channel-icon .click-border[data-v-52e96834]{\n  border: 1px solid blue;\n}\n.moren-border[data-v-52e96834]{\n  border: 1px solid gray;\n}\n.icon-submit[data-v-52e96834]{\n  text-align: right;\n  margin: 10px 20px 0px 0px\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSublive/subChannel/src/components/manageChannel/chooseIcon.vue"],names:[],mappings:";AA+DA;EACA,aAAA;EACA,cAAA;EACA,qBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,4BAAA;EACA,oBAAA;MAAA,gBAAA;CACA;AACA;EACA,sBAAA;EACA,aAAA;EACA,cAAA;EACA,uBAAA;EACA,iBAAA;EACA,gBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,kBAAA;EACA,yBAAA;CACA",file:"chooseIcon.vue",sourcesContent:['<template>\n  <div class="icon-container">\n    <div class="channel-icon">\n      <span\n        v-for="(item, index) in iconList"\n        :key="index"\n        :class="iconCheckList[index] ? \'click-border\': \'moren-border\'"\n        @click="iconSelected(index, iconCheckList[index])">\n        <img :src="item">\n      </span>\n    </div>\n    <div\n      class="icon-submit">\n      <el-button\n        type="primary"\n        @click="submitIcon">确定</el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/channelApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      iconList: [],\n      iconCheckList: [],\n      index: 0\n    }\n  },\n\n  mounted () {\n    this.getIconList()\n  },\n  methods: {\n    getIconList () {\n      Actions.listChannelIcon().then(res => {\n        if (res.data.status) {\n          this.iconCheckList = []\n          this.iconList = res.data.result\n          for (let i = 0; i < this.iconList.length; i++) {\n            this.iconCheckList.push(false)\n          }\n        }\n      })\n    },\n    iconSelected (index, isChecked) {\n      this.index = index\n      for (let i = 0; i < this.iconList.length; i++) {\n        this.$set(this.iconCheckList, i, false)\n      }\n      this.$set(this.iconCheckList, index, true)\n    },\n    submitIcon () {\n      this.$emit(\'submit-icon\', this.iconList[this.index])\n    }\n  }\n}\n<\/script>\n<style scoped>\n.icon-container{\n  width: 450px;\n  margin:0 auto;\n  padding-bottom: 30px;\n}\n.channel-icon{\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n}\n.channel-icon span{\n  display: inline-block;\n  width: 100px;\n  height: 100px;\n  border: 1px solid gray;\n  margin-left: 5px;\n  margin-top: 5px;\n}\n.channel-icon span img{\n  width: 100%;\n  height: 100%;\n}\n.channel-icon span:hover{\n  border: 1px solid blue;\n}\n.channel-icon .click-border{\n  border: 1px solid blue;\n}\n.moren-border{\n  border: 1px solid gray;\n}\n.icon-submit{\n  text-align: right;\n  margin: 10px 20px 0px 0px\n}\n</style>\n'],sourceRoot:""}])},"2F6G":function(e,n,t){var a=t("pt52");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("58845109",a,!1,{})},"2aEc":function(e,n,t){var a=t("/dBK");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("11d57ffc",a,!1,{})},"38aJ":function(e,n,t){var a=t("4EsE");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1c3d2830",a,!1,{})},"3BvS":function(e,n,t){var a=t("xUZq");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("40f52ae0",a,!1,{})},"3EUf":function(e,n,t){var a=t("XVzv");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("876a95ae",a,!1,{})},"4EsE":function(e,n,t){var a=t("kxFB");(e.exports=t("FZ+f")(!0)).push([e.i,"\n.top-header[data-v-7fa6dba4] {\n  height: 100%;\n  background-image: url("+a(t("6MuE"))+");\n  background-repeat: no-repeat;\n  background-size: cover;\n  position: relative;\n}\n.top-header .header-logo[data-v-7fa6dba4] {\n  position: absolute;\n  top: 50%;\n  left: 93px;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.top-header .header-info[data-v-7fa6dba4] {\n  height: 100%;\n  color: #fff;\n  font-size: 0;\n  float: right;\n  clear: both;\n  padding-right: 40px;\n  cursor: pointer;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.top-header .header-info img[data-v-7fa6dba4] {\n  height: 42px;\n  width: 42px;\n  border-radius: 50%;\n  vertical-align: middle;\n}\n.top-header .header-info span[data-v-7fa6dba4] {\n  font-size: 14px;\n}\n/*# sourceMappingURL=src/components/commons/layoutHeader.css.map */","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/commons/src/components/commons/layoutHeader.vue","/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/commons/layoutHeader.vue"],names:[],mappings:";AAgCA;EACE,aAAA;EACA,gDAAA;EACA,6BAAA;EACA,uBAAA;EACA,mBAAA;CC/BD;ADgCC;EACE,mBAAA;EACA,SAAA;EACA,WAAA;EACA,oCAAA;UAAA,4BAAA;CC9BH;AD+BC;EACE,aAAA;EACA,YAAA;EACA,aAAA;EACA,aAAA;EACA,YAAA;EACA,oBAAA;EACA,gBAAA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;CC7BH;AD8BG;EACE,aAAA;EACA,YAAA;EACA,mBAAA;EACA,uBAAA;CC5BL;AD6BG;EACE,gBAAA;CC3BL;AACD,mEAAmE",file:"layoutHeader.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.top-header\n  height 100%\n  background-image url('../../static/img/bg-header.png')\n  background-repeat no-repeat\n  background-size cover\n  position relative\n  .header-logo\n    position absolute\n    top 50%\n    left 93px\n    transform translateY(-50%)\n  .header-info\n    height 100%\n    color #fff\n    font-size 0\n    float right\n    clear both\n    padding-right 40px\n    cursor pointer\n    display flex\n    align-items center\n    img \n      height 42px\n      width 42px\n      border-radius 50%\n      vertical-align middle\n    span \n      font-size 14px\n",'.top-header {\n  height: 100%;\n  background-image: url("../../static/img/bg-header.png");\n  background-repeat: no-repeat;\n  background-size: cover;\n  position: relative;\n}\n.top-header .header-logo {\n  position: absolute;\n  top: 50%;\n  left: 93px;\n  transform: translateY(-50%);\n}\n.top-header .header-info {\n  height: 100%;\n  color: #fff;\n  font-size: 0;\n  float: right;\n  clear: both;\n  padding-right: 40px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n}\n.top-header .header-info img {\n  height: 42px;\n  width: 42px;\n  border-radius: 50%;\n  vertical-align: middle;\n}\n.top-header .header-info span {\n  font-size: 14px;\n}\n/*# sourceMappingURL=src/components/commons/layoutHeader.css.map */'],sourceRoot:""}])},"4IdU":function(e,n,t){var a=t("OXIX");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("8d42de32",a,!1,{})},"4mCt":function(e,n,t){var a=t("auIW");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("787918be",a,!1,{})},"5ObC":function(e,n){},"5cgV":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.channel .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.channel .search-form-container .el-form-item {\n  width: 20%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageChannel/src/components/manageChannel/channelList.vue"],names:[],mappings:";AAigBA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA",file:"channelList.vue",sourcesContent:['<template>\n  <div class="channel">\n    <div>\n      <circle-title\n        title-name="频道列表"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="channelForm"\n          class="demo-form-inline">\n          <el-form-item label="频道">\n            <el-input\n              v-model="channelForm.channel_name"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="父级频道"\n            prop="parent_channel_name">\n            <el-select\n              v-model="channelForm.parent_channelid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="searchChannel"\n              @change="searchChannel">\n              <el-option\n                v-for="(item, index) in parentChannelList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="分类"\n            class="search-left">\n            <el-select\n              v-model="channelForm.channel_typeid"\n              clearable\n              placeholder=""\n              @clear="searchChannel"\n              @change="searchChannel">\n              <el-option\n                v-for="(item, index) in channelTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="channelForm.state"\n              placeholder=""\n              @change="searchChannel">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="1"\n                label="启用"/>\n              <el-option\n                :value="0"\n                label="停用"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            class="date-left">\n            <el-date-picker\n              :title="channelForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="channelForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="searchChannel"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            class="date-left"\n            style="left: 0;">\n            <el-date-picker\n              :title="channelForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="channelForm.endDate"\n              format="yyyy-MM-dd HH:mm"\n              type="datetime"\n              placeholder="选择日期"\n              @change="searchChannel"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 40px"\n            @click="searchChannel">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/manageChannel/create">\n            <el-button type="primary">\n              添加频道\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="修改状态"              \n              placement="top">\n              <el-button\n                type="text"\n                size="small"\n                icon="el-icon-remove-outline"\n                @click="changeState(scope.row)"/>\n            </el-tooltip>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/channelApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      channelForm: {\n        channel_name: \'\',\n        channel_typeid: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\',\n        parent_channelid: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'channel_name\',\n          label: \'频道名\'\n        },\n        {\n          prop: \'parent_channel_name\',\n          label: \'父级频道\',\n          formatter: (row, col, cellValue, index) => {\n            if (!cellValue) {\n              return \'无\'\n            } else {\n              return cellValue\n            }\n          }\n        },\n        {\n          prop: \'channel_type_name\',\n          label: \'分类\'\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'icon_url\',\n          label: \'图标默认\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'description\',\n          label: \'频道描述\',\n          width: \'100\'\n        },\n        {\n          prop: \'state\',\n          label: \'状态\',\n          formatter: (row, column, cellValue, index) => {\n            if (parseInt(cellValue) === 1) {\n              return \'启用\'\n            } else {\n              return \'停用\'\n            }\n          }\n        },\n        {\n          prop: \'fixed\',\n          label: \'位置固定\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue) {\n              return \'固定\'\n            } else {\n              return \'不固定\'\n            }\n          }\n        },\n        {\n          prop: \'sort\',\n          label: \'优先级\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' id="input" class=\'self-sort\' value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      channelTypeList: [],\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      parentChannelList: [],\n      selectChannelId: \'\' // 点击排序行的channelid\n    }\n  },\n  watch: {\n    \'channelForm.channel_name\' (val) {\n      this.searchChannel()\n    }\n  },\n  mounted () {\n    /** 获取频道列表 **/\n    this.getChannelList()\n    /** 获取频道类型 **/\n    this.getChannelType()\n    this.getParentChannel()\n\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getChannelList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageChannel/create\') {\n      this.resetOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetOptions () {\n      this.channelForm = {\n        channel_name: \'\',\n        channel_typeid: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\',\n        parent_channelid: \'\'\n      }\n      this.pageNo = 1\n      this.clickCellIndex = -1\n      this.sortValue = -1\n      this.getChannelList()\n    },\n    getChannelList () {\n      let timeStart = this.channelForm.startDate !== null ? new Date(this.channelForm.startDate).getTime() : null\n      let timeEnd = this.channelForm.endDate !== null ? new Date(this.channelForm.endDate).getTime() : null\n      Actions.getChannelList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channel_name\': this.channelForm.channel_name,\n        \'channel_typeid\': this.channelForm.channel_typeid,\n        \'state\': this.channelForm.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd,\n        \'parent_channelid\': this.channelForm.parent_channelid\n      }).then((res) => {\n        if (res.data.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchChannel()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getChannelList()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      if (event.target.classList.contains(\'sort-container\')) {\n        if (row.state !== 1) {\n          let id = event.target.dataset.id\n          if (id) {\n            this.clickCellIndex = parseInt(id)\n          }\n          this.$nextTick(() => {\n            let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n            inputEles.forEach(element => {\n              if (element) {\n                /** 将channel_id存储起来标识单元行 **/\n                this.selectChannelId = row.channelid\n                element.focus()\n                element.onkeyup = (e) => {\n                  if (element.value) {\n                    this.sortValue = parseInt(element.value)\n                  }\n                }\n              }\n            })\n          })\n        } else {\n          this.$message({\n            type: \'error\',\n            message: \'启用状态下不能排序!\'\n          })\n        }\n      }\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row, column, cell, event) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectChannelId !== row.channelid) return false\n      /** 修改排序 **/\n      Actions.changeChannelSort({\n        \'channel\': {\n          \'channelid\': row.channelid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getChannelList()\n          this.sortValue = -1\n        }\n      })\n    },\n    /** 编辑时获取单元格数据 **/\n    handleEdit: function (row) {\n      if (row.state !== 1) {\n        sessionStorage.setItem(\'channelid\', row.channelid)\n        this.$router.push({path: \'/manageChannel/edit\'})\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可编辑!\'\n        })\n      }\n    },\n    /** 修改状态 **/\n    changeState (row) {\n      let state = 0\n      if (row.state === 1) {\n        state = 0\n      } else if (row.state === 0) {\n        state = 1\n      }\n      Actions.changeChannelState({\n        \'channel\': {\n          \'channelid\': row.channelid,\n          \'state\': state\n        }\n      }).then((res) => {\n        if (res.status) {\n          if (state === 0) {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为停用\'\n            })\n          } else {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为启用\'\n            })\n          }\n          this.getChannelList()\n        }\n      })\n    },\n    /** 删除频道 **/\n    handleDelete (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.channel_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteChannel({\n            \'channel\': {\n              \'channelid\': row.channelid\n            }\n          }).then((res) => {\n            if (res.data.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getChannelList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可删除!\'\n        })\n      }\n    },\n    /** 获取频道类别 **/\n    getChannelType () {\n      Actions.getChannelType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_type_name\n            newItem.value = item.channel_typeid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 搜索频道 **/\n    searchChannel () {\n      this.pageNo = 1\n      this.$options.filters[\'swapTime\'](this.channelForm)\n      this.getChannelList()\n    },\n    /** 获取父频道 **/\n    getParentChannel () {\n      Actions.listUsableParentChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.parentChannelList.push(newItem)\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style>\n  .channel .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .channel .search-form-container .el-form-item {\n    width: 20%;\n  }\n</style>\n'],sourceRoot:""}])},"60N6":function(e,n,t){var a=t("UGUT");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("445a0e88",a,!1,{})},"6Crm":function(e,n,t){var a=t("AOQE");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("6ad1a489",a,!1,{})},"6MuE":function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAB4AAAABGCAYAAAAttInhAAAfuklEQVR4Xu3dXXPjOHYGYPiju3f+XCr3uZnbVG5Tlf3ZWzvT/v5IgRZligKJA5qyJfnp2tRObBA8eEhpq+btA1z888/Xf6WUfiZ/CJyBwPNTSg93KT0+pvT6egYLsgQCBAgQIECAAAECBAgQIECAAAECBAgQIHDGApeXKV1dpZQu3hd5Mfjn1qU3X7vgXi2XjOuZrS848eSw8S+i823GBYd3j2RqHdufz0wWfUbDKYrXXG7ejtG9Srfem6swqJ9u+87lMVPrKPy8/9Her5ZYzN17pqy3h5MeLv7vz9eHi5R+tH6AjCdwlAKvKb28pHSfQ+CHt3+OfpEc5XoURYAAAQIECBAgQIAAAQIECBAgQIAAAQIEzlwgB8A5CF4jBF6UCbQkn7XwrfCswiFwsI7ZYTtJZ+zF6esL3v4tY5wYvPPzJcHnqORtbdVU9/3C6tDJpHYi7y2EsZPrn3o/Il7jxzVTZ/cMph/v48U//3y9SSn9EXsFjCJwGgKvLyk93L/93/Pz5kPQ8s11GstUJQECBAgQIECAAAECBAgQIECAAAECBAgQOHmBHKZdXZdDxSWBbvM1jflB4/BiWDpZY3DyNUPgYS3B23fv3GeEwDu1zSW7DV3Ac13KxfVPdOOW1j/buFvqGq6Bz0w4c+mtAPjkvxYtYEogbwH99JjS/c1bCJx3hG7+0sdLgAABAgQIECBAgAABAgQIECBAgAABAgQIHFzgctMFXAzVaiHZqLpFWUDrPRpEmtcUqCUcAHdJbb3YNbuAd8LhFbuAd+YdLqnUoVtY8rCUNULguS7gIvvSLuA5w/KjFQDXX3kjTlkgh8Avzynd3aT09HTKK1E7AQIECBAgQIAAAQIECBAgQIAAAQIECBA4b4HcBdxtBV340xLqtozd3ioQkg7Lahwe7wJunHhy+E7aGXtvslvj7b9PF3AmHAXNc+/ZZONuaxfwbEvx23MtTCkAjr3yRp26QA6B729TenxMKYfC/hAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQLHJXBxmVI+Dzi0tXCl9OYQuDH5bBweX1PjxGsGwF2Y2BgCh57VN+0CLi77c7qABcDH9dWmmkMKvORzge/ezgXO/9x/kR3ynuYmQIAAAQIECBAgQIAAAQIECBAgQIAAAQIE4gI5AO66gJcEZaPbNIfAXXAQr7Vh6GQmcUxnAQ9zk5a1HUUI3Bc8Kry0js/YCnq2cXfJu13pBB5NKQCOf4yNPAeB3P2bQ+D7HAI/OxP4HJ6pNRAgQIAAAQIECBAgQIAAAQIECBAgQIDA+QjkMLE/D3huVdFwNzpue6+W5LMtLy6GwLP1BWuZHda4FfSaZwHvrK2yluhz2tY3l+w2hMBrnAU8DM6H7+xEJr3sLzcIgM/nS85KDiOQQ+DHh7ctoZ9zCNx9Mg9zL7MSIECAAAECBAgQIECAAAECBAgQIECAAAECbQK5AziHwLVQsPb7qWCuWk1DZtAwdHvbcd2f1gUczEO+IgSOPMvh85w1CwTAQ4qmEHgiiJ3sgp6KoFq7gCfT5Pe3eTClDuDqh9yAsxTIIfDT4yYEfhIAn+VDtigCBAgQIECAAAECBAgQIECAAAECBAgQOFmBbivoq3r5rcFhfcb2zKAlBC7V+9Eu4HAHcDAA7oPWlnX115R8o53AkWc5HFMcPxXQFgrbZqozXdJFg68IgQMB8ODxCoBDH3SDzlIgh8DPTynd3bx1AvtDgAABAgQIECBAgAABAgQIECBAgAABAgQIHIdADveurutdwH21c+FhJFjcWXVr8tmQGYfOyx0WE6wlHAJH59uMCw7vKg6tbWbC6HNaEgJP3bbLcmcC4G5d44/EVwbAxYLeC9zUKgA+jq8xVXyZQA6Bn1O6zSFw7gT2hwABAgQIECBAgAABAgQIECBAgAABAgQIEDgKgf4s4CXB4HAB0eu317SknpuLWi4JBaV9McGJwwFwnjc650V4aFdteF0fDIGrAXC/xtF9Srdd1AU8EQDPGqyxFXS8C1gAfBTfYIr4coEcAudO4LwttD8ECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAcQhEt4Luq/2qTuBgprpFDYelXaoYexbhEDg63xd0AXfLDdRXDYELIe1cALxz38LAnR/NBLHHcBZwSkkAHPvIGPUdBITA3+EpWyMBAgQIECBAgAABAgQIECBAgAABAgQInJJA61bQU0FwJFTccwkEkcNrWoY3BcBdOll/atUhla2Ox3fYCVnrt9+OCK3tCLuAO+a5cHf8sCfWcNAQOPYMBcAN76uh30BACPwNHrIlEiBAgAABAgQIECBAgAABAgQIECBAgMBJCbRuBd0vbhzENYfA1UR1nzF6yaJO5cDka3YBLw2Ad4LUAVHtrN2dfLWy1vCzHXUCn3wXsAD4pL67FHtEAkLgI3oYSiFAgAABAgQIECBAgAABAgQIECBAgAABAimlq+uULi+XUfRh4WcEwF34GSwz1Cm7k4rWJ14zAO7vluuMrml4zbjavfU2hry1+Yqep7AVdGs3dD0E1gFc/6gY8R0Fcgh8e5PSszOBv+Pjt2YCBAgQIECAAAECBAgQIECAAAECBAgQODKBi8uU8nnAzSHuZh3VM2Pn1tuYfrYML61nco3BidcOgbcBesM7EQ63W8PPUQ3V5xoMgPO0292fZ7aBHo57v2AfZrbDu/SXBFocxmP3rxUAN7yrhn4zgeenTQj89M0WbrkECBAgQIAAAQIECBAgQIAAAQIECBAgQOAIBZZuBT1cStfNGgxSt9e1jj/mLuCdpDP2kJduBR0Kt3UBvz+E6JnCAuDYi2sUgaLAa0pPTynd5U7gPgRe8CVPlwABAgQIECBAgAABAgQIECBAgAABAgQIEFhHIHcB5yB46Z/P2g66JU4Id8vmRQcnDncBB+f8qhC4FtaHQuZ+jSOUufOAa+cV71w70zE8+WwP2wWsA3jpF4TrvofAaw6BH1O6u03pRQj8PR66VRIgQIAAAQIECBAgQIAAAQIECBAgQIDA0QrkQC2fB1wLBmsLaO4EDgav/X1bhh8iAJ7NdesdpHt8awbAXW31c2y3NdSe9fj3a5wFXKvvIAHwzEMLbQv+XpQAuPYF4PcEcgj8+JDSfQ6Bn+N/u4YcAQIECBAgQIAAAQIECBAgQIAAAQIECBAgsL7AGltB9yFkLVzcqb4l1W2ME5pC4JmgcKw9WXJjCLw0AO6d9+pquH/kGa0dAu/dswC5/dFMmN3UAdwjRbaCnmtfTkkAvP7XjhnPUaAPgbtO4OeP/82iczSyJgIECBAgQIAAAQIECBAgQIAAAQIECBAg8FkCH90KehxMRkLG6PbLlRyvSPTpAXAHMCglEG4vDYHDa5upofZ81g6Ax+/H1LPvSq44NofAUYfpEFgA/FlfRO5z+gI5BM5dwPd3KaXXxr+6c/rLtwICBAgQIECAAAECBAgQIECAAAECBAgQIHA0AmtuBd0vqhYyHjIA3gsch9nsfLfn7DM51FnAgbx4p65QCFyZdO75HOIs4LW6gKeebV5uccnRAHj74o5egQsdwEfzRaWQ0xB4eXk7D/jx/jTqVSUBAgQIECBAgAABAgQIECBAgAABAgQIEDhXgcvLlPJ20NXgdgYgHBxOhW0V3DWC0skzbYMPNhwCB4r91l3A2XtqK+jKltbF92yu1zAaApf/coAO4OBnwzACW4Hn55Ruf6f0/Lj5UeALER8BAgQIECBAgAABAgQIECBAgAABAgQIECCwvkAOgK8uP7Zr5zGFwK1drpGu5EMFwBN56ORDDjl/oAu4q2d0/WR4Ph5XqLrr0K0Eu1uDyLiJ8Li1C3hnnWUvAfD6XzVmPHeBvPtzDn+7ENh5wOf+uK2PAAECBAgQIECAAAECBAgQIECAAAECBI5c4Oo6pdwNvPTPIULXYS0tfWSHqKV6/8oZtmPXpV3AO8HlZtIl3c2tRktD4GIA3C1i/03rfrSgC7i/rDUErgTTAuClXwau+94C+Tzgx4eU7m5SyttCf2R7ie8tafUECBAgQIAAAQIECBAgQIAAAQIECBAgQOBjAheXKV0dYCvoYVU7OUA1UZ0ICIPLDAecDXVUh/YDqgPfFrE0BD70WcA98U595W2S9wLbyWGR7t7tjUcPOdCR3AXNU+9GZCvo/TEC4OBnzTACewI5BM4B8IPzgL0dBAgQIECAAAECBAgQIECAAAECBAgQIEDgSwXyVtC5C3hpw1bkuo+EwMFcdWsYDoHzFQ2TV4PG4FxLA+Cu3FIHbSBk7XGan9XEPTu3cUBbeIuLncBTXcDj5xFZ66aM1i7gPcv3CQTAX/pt5OYnL/DynNJNfx5w8Evx5BdtAQQIECBAgAABAgQIECBAgAABAgQIECBA4AgFchdwDoKX/ImEiv2827ENuUDD0O42hwiAqzUMB1QG752124D+GV3Aa54F3D+PHZKpAHiqjXjgM7n+qSw/0gXcFbm9iQC44X00lEBRIG8Fnc8DthW0F4QAAQIECBAgQIAAAQIECBAgQIAAAQIECHydQA7W+k7gJVW0hMB9KLhK922h2EMEwLsZYemmg59V0+Ll20Bv7Ya3CwSnw4przyrcZTzXyTuqb29osLu3eGbwROdxtUO79q68TSAAXvIF4BoCQ4G8FfT9bUr3dyml17atFkgSIECAAAECBAgQIECAAAECBAgQIECAAAEC6wl89DzgWrC4V+lF27bTgVx1e4tzDoFDAW2WiHa/Fl6hpV3AU7fN89VC4O73we2sp7bR/tBW0ALg9b5MzEQgbwWdu4CfHgXA3gYCBAgQIECAAAECBAgQIECAAAECBAgQIPCVAh85D3hJANxlfsFkNzis42sKgKdSy8KDqNbQD6gO3K8xcMm2onBAO/MytRoVx+eiJzpyh7eOBMDbxxAIgVffCtoW0F/5tePeZynwmtLjo62gz/LZWhQBAgQIECBAgAABAgQIECBAgAABAgQInJzA0vOAo0Hue4q5SxO5/iMh6TiQ3Ll7cOLqsOGA6uDlW0Gv0QXcBa4TNYZ/XgiAt0Hu6M2PhMDbcioh8JoB8NZBB/DJfVcp+MgF8lbQdzcpPdwfeaHKI0CAAAECBAgQIECAAAECBAgQIECAAAECZy6Qw7Wr63hn7pgjEuRur4meBbu5IJCpvk9dGbxTZ8PE1aFf1AW8DTKHD6TFYPQgPxICT912LwQuPf9uIeNi9j90xRB8brPZiMWFM4DP/OvN8j5b4PkppZvfKeX/bvofh88u1P0IECBAgAABAgQIECBAgAABAgQIECBAgMCZC3zqecCtXagN9uFtjqup7vtNq0M/KQDuctLx9sul4mYKruUxTZ3Gn7wVdHMA3IFNvzyb+W4v/vnn601K6Y+G98xQAgQmBHIX8MNdSnd3Kb2+CIG9KAQIECBAgAABAgQIECBAgAABAgQIECBA4CsFPu084Ehn5giiGsJuxocDzuiE/by1B/NJIXBTQDtRc9hozvQQW0Efogs4r2E+BBYA195tvyfQKvDy/N4F3Hqt8QQIECBAgAABAgQIECBAgAABAgQIECBAgMC6Ap9yHnAgfB2GlIHhW4SmcLNh4tDQiVC09ISWrq/LMz/YBVyaY1hjU8i8dhdwV9ygmsBaq9n7/MMTAK/7FWI2Aiml3AX88HYe8IsuYK8EAQIECBAgQIAAAQIECBAgQIAAAQIECBD4UoGPnAdcC1/3FhZIVZcGpWtvBR0o9S24DA0shLgNTz0U0C7osm4OgYNdwN2w4FbV3bBKJ/DUVtClS7drmvJwBnDDm2cogQaBHPze/k7p6bHhIkMJECBAgAABAgQIECBAgAABAgQIECBAgACBgwgsDYEPEQD3C8xzB7PV7pJwANwNjjNWhwZD4L0u3ngJxfVFA9bhbZqMSqYza91r4p16fqUO4gUBcP8YZ59P+Zc6gBvfPcMJhATyWcCPuoBDVgYRIECAAAECBAgQIECAAAECBAgQIECAAIHPELi8TCmfCdwa6jaNr6apuyvtu0MjlzWFm5EJN6VUhwYD4C6wDGyfPPesd7qjpztcZ1+XKafwz4NdwP1698os1B0Js6e6gAXAn/Ht4B4EggK5C/jmr5Sen9r+pk1wesMIECBAgAABAgQIECBAgAABAgQIECBAgACBRoEcAF9dtv97+0OGwF2QWOnwHS4zFGRWU91duOrwYAg8t5Vx5FEdxVnAPUYpyB0tYrKLu9DxuzQonqXXARx5rYwhsKLAa0r3dynd3aX06izgFWFNRYAAAQIECBAgQIAAAQIECBAgQIAAAQIElgtcXaeUu4Fb/jQFwHniaqK6e/ed7YVnrq3Vsff7YB3VYccUAFd8m42mtoKeuM/Os9qMCYW7pfnGHdMTD2KSXwDc8jE2lsA6As/Pmy7g5/YtJdapwCwECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAUOBTzgOuJqq7z2Ryt+NgQNjPtjQALmWTe2/NmYTAoQ7qHiTQBdwNLZ0HPHVtoTt4/H6WPrENIbAzgH3lETikQO78vb15Ow/YHwIECBAgQIAAAQIECBAgQIAAAQIECBAgQOA4BJaEwLXO0p2VNQbA+dq5S0Jn424K2KmzoY7q0GAA3Dt85Dzg0FbQFbRw0FtyG849DuELr/CHAuDCOprPA96tUQB8HF8zqjhbgde38DeHwPlM4Kb/cThbFAsjQIAAAQIECBAgQIAAAQIECBAgQIAAAQJfL5C3gc5nAkf/3X103HZl1UR136B2SV/DXC1Lu4Br9+6qbQiBvzoA7sqd2lI58vN+TKULeDusNGfp2gXjZkp5e4kEwF//haKC7yXw8pzS779SyttBN/+Pw/eisloCBAgQIECAAAECBAgQIECAAAECBAgQIPCpAjkAzkFw9N/fR8cVQrnQukIhbL/l8Mzgg3YB7weOxbV9SgBcqaUpKJ86C3gqLB6susvFJ/fx3ueJhPRTfpOP/f0XOoBDnzaDCHxAwDbQH8BzKQECBAgQIECAAAECBAgQIECAAAECBAgQOLDAVQ6Br2I3OZYAuMs987mzLZ2sgSWGAuhgF/DUNsaBMroha2wDXZqnv3+TXSUEPoou4G6x3eoEwNGXzDgCSwVeN9tA39kGeimh6wgQIECAAAECBAgQIECAAAECBAgQIECAwMEEchDYdwLXbtIUAL8HcrVpd34fCmFHAWkxbB1OFJ20chZxV2gwAO6GVrZPrsEMr5+1j3ZDj25YdRs+w8BaJjuBx9fm8H68+Mp20aHH2QfA//tfrzdX1+mP5he29kT8ngCBrUDe/vn3v50D7JUgQIAAAQIECBAgQIAAAQIECBAgQIAAAQLHKJBzsqvr2FbQzZlaQ/g6zBsjTrUAc/v7hhpCQ6uH0r5Vv2YAPDXf1mlBCBzqAh4+lEoI/KEAeOLh74Tgm8XOPqOLdHvxP//5enP9M/3x81dKV5eRWD/yuhlDgMBQIG8D3Z0D/OQz5s0gQIAAAQIECBAgQIAAAQIECBAgQIAAAQLHKBANgY89AO5t+zoPEgIHA+Au0xyllaGAefCCrLEVdDjonbrvzHpLnbnF+0W6gDuw3U/HVIg+43h78d//8XqTUvoj72/+8x8pXf94O+zaHwIE1hNwDvB6lmYiQIAAAQIECBAgQIAAAQIECBAgQIAAAQKHEsgZWd4Ouhby1n6/U19r4tnYS1arZRgA18b2dYdKDm4FfRZdwMEAOPuFu4AnOqT394Yuh+jVAPj1Nf2RC8ovdQ6Af/0j9nIf6sNlXgLnJpDPAX64S+n+zjbQ5/ZsrYcAAQIECBAgQIAAAQIECBAgQIAAAQIEzkugPw+4FpbWfn9MIXBXS3/ubP7vQMIbGBI+D3jNELha+0Thc9eFOoSDIfB2WKmOhV3A3eMbXFtpwH7vAM4X5pAqX5yD4Lwl9I9fKV1cFg4hPq/PsdUQOLzAa0qPDynd3giAD4/tDgQIECBAgAABAgQIECBAgAABAgQIECBA4GMCOQSuHZ1aDSKHJYTS1N2aWy5prWVve+gCV+j+wS7gPP2aW0HPrnfBWcCl+oo/+8IQeHEA3D3b1+4/XQicD7vuzgbO20KHnvLHPkyuJnDOAvn833wO8MtL7G/WnLOFtREgQIAAAQIECBAgQIAAAQIECBAgQIAAgWMXyMen5iB47k9r8Nqy5pZobmkdO6Fi4YahGoIh8JpdwNlxcs2VokPdvoMHtTO+0no7Pg84dBbwgq2gx/cZvVe7HcDDX/bdwLmw658p/fplW+iWD6WxBMYCz88p/f63ANibQYAAAQIECBAgQIAAAQIECBAgQIAAAQIETkGg2zU3h8CX89WGw9dQmrp7r5ZLwnXkW5TC3uEWw5t/Dt9/YQgcnn/DstdFPDXBil3AHVcp+K0E5ofYCnrbuT16JUelTAfA/XV720L/3GwL3fpETuGTrEYCBxR4eU7pbwHwAYVNTYAAAQIECBAgQIAAAQIECBAgQIAAAQIE1hXIgVveMXfJ+bHFShrztcbhobN9t3UFQtK87lANlc7Y/p6f1gWcbzhReC0oL9Y41XK7YgjcTTWebyaon+kCrgfA3QPZbAudzwPO7e55W+jrH84HXvcrxGznLpC3fs4dwLkTuPblcu4W1keAAAECBAgQIECAAAECBAgQIECAAAECBE5FoBYCN/07/1Ca+i7TOLwtfwhMPuw4DZ272zDn8PkHLtsOP/Yu4FzoOA8PbQU9FbaPcEpnAQ/vmVIKBsAb0twNnCvO5wHnAPhHPh/42vnAp/IFpc6vFRAAf62/uxMgQIAAAQIECBAgQIAAAQIECBAgQIAAgaUCcyFwUwA8Suoi9bSEo9300Qui4zaBZu284C71DMz50S7g8RpDwXQButrpO7qmeBbwxPMs7hhd6+7d/L5IOBECT0zZFgD363Q+cOTjaAyBXYEcAHdbQOsA9moQIECAAAECBAgQIECAAAECBAgQIECAAIGTE8hnAeczgacCx0MErxP54qxduI6GyfeCxj6sLCWQlRB40q/hjaiG0f1cS2upbR89s//y+NY7Q2sh8FSAH9wKevNIlwXAXeH9ttC5I/gypeufb1tD539uerEaHqahBE5ZwBnAp/z01E6AAAECBAgQIECAAAECBAgQIECAAAECBN5ysKkQuCkfC3TKDr1bhjfVsUkMa8926v57QewHuoCDpWxLXSMEXhLmd9cEgtx+PbMBcGnRjVtBF0r5QADc8+ZtoTfF5Rf+58+UfvzcnA/c8jbW3iy/J3DiAs9PKf3+K6XcCdz85Xvia1c+AQIECBAgQIAAAQIECBAgQIAAAQIECBA4F4Gch5UaIpv+3f+CDK3lkkPUUrv/9p7BZtGPbgW9RgDcRZwz3bWld3Y7/ou7gKfOAm4+A3jug9mdD7xBEgSfy1eYdawp8PiQ0u1vAfCapuYiQIAAAQIECBAgQIAAAQIECBAgQIAAAQJfITAVAvdZWbimWqo6mig6/BABcLe2yMJyB2s/cPjPhWs/EgKHA+BK4Yu7gMfzloLkwZoPsRV0X/vo1it0AI8eVh8Edy3wlyn9+JXSjx86giOfB2POVyB/Lh7uU7q/FQCf71O2MgIECBAgQIAAAQIECBAgQIAAAQIECBD4TgI5BL663E9Fw+FrKE3dFW29ZO1awvcfDNwJarPX5s+nngWc7zlT/OIQOLAVdKlRuHi/wlzFkkc/LHQCrx8A9w9NEPydvuKstSaQPw93tyk93L2dnx37KzK1Wf2eAAECBAgQIECAAAECBAgQIECAAAECBAgQ+EqBq7wd9NVuBeHQtRJKltYVDmA3F4draZg4PLSytfLFzFbR4XsMtnCurnXlALh7fHnOtbaCLrwPoaB4aPD23A8XAPcvpSD4K7923PtYBF5fUvr9d0r5HGB/CBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgfMQyAFdvx30cEXVMLIf3JJ0bq6JXhKuobGW6P1rzXC5vqmtosP3GJ3hO7vmyqStZwFntr0AuPvh/rs92BF7+8tQuJuNSh+ViS7gzY8PHwD3NQmCz+OLzCqWCeTg9/dftn9epucqAgQIECBAgAABAgQIECBAgAABAgQIECBwvAKlEPhQ4WuvsDQgrSoGJw4Oq+6IWjzHdxMMh+9xbCHwROHNIfBwG+3xg5vvrv68AHgcBOe27nxG8M+fKf346Yzg6gfOgJMV6M7/vduc//s6+NssJ7sihRMgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJDgXEIfO4BcF57KKBd0HXbzT1IS7tdlgM368dUxzbWVJvvI13AO2vdeaEG/09jF/CnbAE99fHvO4K7D8RlStc/38Lgi6u3hxh4jr5ZCJyEwEs+//fvlB4fT6JcRRIgQIAAAQIECBAgQIAAAQIECBAgQIAAAQILBHK+dXX9HlbWgsPtLRaEYq2XHKKWUA2BQZHa+jGX4zN3hznp5l6R+eaCyPH1kflaQuAxSXUr6H5dpXeyvBV01wH8kFL6seA9XuWSnSA4fzB+pPTjV0r50Oydvb9XuZtJCHyuQH6/8/bPN3/b/vlz5d2NAAECBAgQIECAAAECBAgQIECAAAECBAh8vsDiEDiXGghLhytqHB7qou3mD04cHBaaLxKy9qUNu4O35Y7C3+p8M8VPXTs3Z0sAXCKeDYEbt4JOF+kxB8D/Sin9/PyPwPQd82HZ19dvW0MP/6bEMdWoFgIRgRwA39+mdH+fUnqNXGEMAQIECBAgQIAAAQIECBAgQIAAAQIECBAgcMoCeefb3OiYg9RqEDlcaDhRfbuocfhBagnXEBgYtSp20G46g/tdhqtzNW4DXfXOz/py9NZO3GP44+1O16WxhYHjWxRfhIv08P+13hGnkVT76AAAAABJRU5ErkJggg=="},"6Nzk":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-2131f52c] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-2131f52c]{\n  color: #909090;\n}\n.create .residence_time span[data-v-2131f52c]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageStartpage/src/components/manageStartpage/startpageCreate.vue"],names:[],mappings:";AAwLA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"startpageCreate.vue",sourcesContent:['<template>\n  <div class="startpage create">\n    <circle-title\n      title-name="启动页新增"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="editForm"\n      :model="editForm"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        class="item"\n        label="图标配置"\n        prop="img_url">\n        <el-upload\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :show-file-list="false"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="editForm.img_url"\n            :src="editForm.img_url"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="链接地址">\n        <el-input\n          v-model.trim="editForm.jump_url"/>\n      </el-form-item>\n      <el-form-item\n        label="有效期"\n        class="validity"\n        required>\n        <el-date-picker\n          v-model="editForm.validity"\n          :clearable="false"\n          :disabled="isChooseDate"\n          style="width:100%"\n          type="datetimerange"\n          format="yyyy-MM-dd HH:mm"\n          range-separator="至"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"/>\n      </el-form-item>\n      <el-form-item\n        label="驻留时间"\n        prop="residence_time"\n        class="residence_time">\n        <el-input\n          v-model.number="editForm.residence_time"\n          style="width: 75%"/>\n        <span>s</span>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        prop="sort"\n        class="sort"\n        required>\n        <el-input\n          v-model.number="editForm.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'editForm\')">提交</el-button>\n        <router-link to="/manageStartpage/list">\n          <el-button>取消</el-button>\n        </router-link>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/startpageApi\'\nimport uploadHeaders from \'@/mixins\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  \n  mixins: [uploadHeaders],\n\n  data () {\n    return {\n      editForm: {\n        img_url: \'\',\n        channelBelong: \'1\',\n        jump_url: \'\',\n        validity: [new Date(), new Date()],\n        sort: \'\',\n        residence_time: \'\'\n      },\n      isChooseDate: false,\n      dialogVisible: false,\n      componentName: \'AddManuscript\',\n      rules: {\n        img_url: [\n          { required: true, message: \'请上传启动页图片\', trigger: \'change\' }\n        ],\n        validity: [\n          { type: \'date\', required: true, message: \'请选择时间\', trigger: \'change\' }\n        ],\n        residence_time: [\n          { required: true, message: \'请输入驻留时间\', trigger: \'change\' },\n          {type: \'number\', message: \'驻留时间必须为数字\'}\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          {type: \'number\', message: \'排序必须为数字\'}\n        ]\n      }\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  methods: {\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.addStartpage({\n            \'appAdv\': {\n              \'img_url\': this.editForm.img_url,\n              \'jump_url\': this.editForm.jump_url,\n              \'residence_time\': this.editForm.residence_time,\n              \'sort\': this.editForm.sort,\n              \'expiry_date_start\': new Date(this.editForm.validity[0]).getTime(),\n              \'expiry_date_end\': new Date(this.editForm.validity[1]).getTime()\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/manageStartpage/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'编辑成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.editForm.img_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n  .create .residence_time span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},"8CpG":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-597598f8] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-597598f8]{\n  color: #909090;\n}\n.create .residence_time span[data-v-597598f8]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageStartpage/src/components/manageStartpage/startpageEdit.vue"],names:[],mappings:";AAwNA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"startpageEdit.vue",sourcesContent:["<template>\n  <div class=\"startpage create\">\n    <circle-title\n      title-name=\"启动页编辑\"\n      class=\"cicle-controller\"\n    />\n    <el-form\n      ref=\"editForm\"\n      :model=\"editForm\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n      class=\"rule-form\">\n      <el-form-item\n        class=\"item\"\n        label=\"图标配置\" >\n        <el-upload\n          :action=\"getUploadUrl\"\n          :headers=\"uploadHeaders\"\n          :show-file-list=\"false\"\n          :on-success=\"handlePcAvatarSuccess\"\n          :before-upload=\"beforeAvatarUpload\"\n          class=\"avatar-uploader\">\n          <img\n            v-if=\"editForm.img_url\"\n            :src=\"editForm.img_url\"\n            class=\"avatar\">\n          <i\n            v-else\n            class=\"el-icon-plus avatar-uploader-icon\"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label=\"链接地址\">\n        <el-input\n          v-model=\"editForm.jump_url\"/>\n      </el-form-item>\n      <el-form-item\n        label=\"有效期\"\n        class=\"validity\"\n        required>\n        <el-date-picker\n          v-model=\"editForm.validity\"\n          :clearable=\"false\"\n          :disabled=\"isChooseDate\"\n          style=\"width:100%\"\n          type=\"datetimerange\"\n          format=\"yyyy-MM-dd HH:mm\"\n          range-separator=\"至\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"/>\n      </el-form-item>\n      <el-form-item\n        label=\"驻留时间\"\n        prop=\"residence_time\"\n        class=\"residence_time\">\n        <el-input\n          v-model.number=\"editForm.residence_time\"\n          style=\"width: 75%\"/>\n        <span>s</span>\n      </el-form-item>\n      <el-form-item\n        label=\"排序\"\n        prop=\"sort\"\n        class=\"sort\"\n        required>\n        <el-input\n          v-model.number=\"editForm.sort\"\n          style=\"width: 75%\"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          @click=\"submitForm('editForm')\">提交</el-button>\n        <el-button\n          @click=\"gotoList\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/startpageApi'\nimport uploadHeaders from '@/mixins'\nexport default {\n  components: {\n    CircleTitle\n  },\n\n  mixins: [uploadHeaders],\n  \n  data () {\n    return {\n      editForm: {\n        img_url: '',\n        channelBelong: '1',\n        jump_url: '',\n        validity: [],\n        sort: '',\n        residence_time: ''\n      },\n      isChooseDate: false,\n      dialogVisible: false,\n      componentName: 'AddManuscript',\n      rules: {\n        validity: [\n          { type: 'date', required: true, message: '请选择时间', trigger: 'change' }\n        ],\n        residence_time: [\n          { required: true, message: '请输入驻留时间', trigger: 'change' },\n          {type: 'number', message: '驻留时间必须为数字'}\n        ],\n        sort: [\n          { required: true, message: '请输入排序', trigger: 'blur' },\n          {type: 'number', message: '排序必须为数字'}\n        ]\n      },\n      adid: '',\n      isRefresh: true\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getEditInfo()\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === '/manageStartpage/list') {\n      to.meta.refresh = this.isRefresh\n    } else if (to.path === '/manageStartpage/create') {\n      this.$root.eventHub.$emit('reset-options')\n    }\n    next()\n  },\n  methods: {\n    gotoList () {\n      this.isRefresh = false\n      this.$router.push({path: '/manageStartpage/list'})\n    },\n    getEditInfo () {\n      this.adid = sessionStorage.getItem('adid')\n      Actions.getStartpageByID({\n        'appAdv': {\n          'adid': this.adid\n        }\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          console.log(data)\n          this.editForm.img_url = data.img_url\n          this.editForm.jump_url = data.jump_url\n          this.editForm.residence_time = data.residence_time\n          this.editForm.sort = data.sort\n          this.editForm.validity.push(data.expiry_date_start)\n          this.editForm.validity.push(data.expiry_date_end)\n        }\n      })\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.editStartpage({\n            'appAdv': {\n              'adid': this.adid,\n              'img_url': this.editForm.img_url,\n              'jump_url': this.editForm.jump_url,\n              'residence_time': this.editForm.residence_time,\n              'sort': this.editForm.sort,\n              'expiry_date_start': new Date(this.editForm.validity[0]).getTime(),\n              'expiry_date_end': new Date(this.editForm.validity[1]).getTime()\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: '/manageStartpage/list'})\n              this.$notify({\n                title: '通知',\n                message: '编辑成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.editForm.img_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        'image/jpeg': true,\n        'image/png': true,\n        'image/jpg': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error('请上传图片格式的文件!')\n      }\n      if (!isLt2M) {\n        this.$message.error('上传图片大小不能超过 2MB!')\n      }\n      return isImage && isLt2M\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n  .create .residence_time span{\n    color: #909090;\n  }\n</style>\n"],sourceRoot:""}])},"8jhb":function(e,n){},"9wcA":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-726cc17c] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-726cc17c]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageEvent/src/components/manageEvent/eventCreate.vue"],names:[],mappings:";AAsTA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"eventCreate.vue",sourcesContent:['<template>\n  <div class="channel create">\n    <circle-title\n      title-name="服务新增"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="createFrom"\n      :model="createFrom"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="服务名称"\n        prop="activity_name">\n        <el-input v-model.trim="createFrom.activity_name"/>\n      </el-form-item>\n      <el-form-item\n        label="归属类别"\n        prop="type_name">\n        <el-select\n          v-model="createFrom.typeid"\n          :clearable="true"\n          placeholder=""\n          @change="handleEventType(createFrom.typeid)">\n          <el-option\n            v-for="(item, index) in eventTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="图标配置"\n        class="item"\n        prop="head_img">\n        <el-upload\n          :show-file-list="false"\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="createFrom.head_img"\n            :src="createFrom.head_img"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="前端链接"\n        prop="app_url">\n        <el-input v-model.trim="createFrom.app_url"/>\n      </el-form-item>\n      <el-form-item\n        label="后端链接"\n        prop="manager_url">\n        <el-input v-model.trim="createFrom.manager_url"/>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="createFrom.state"\n          placeholder="请选择">\n          <el-option\n            :value="1"\n            label="启用"/>\n          <el-option\n            :value="0"\n            label="停用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="有效期"\n        prop="liveRange">\n        <el-date-picker\n          v-model="createFrom.liveRange"\n          :clearable="false"\n          type="datetimerange"\n          format="yyyy-MM-dd HH:mm"\n          style="width:100%"\n          range-separator="至"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"\n          @change="chooseTime"/>\n      </el-form-item>\n      <el-form-item\n        label="需要登录"\n        class="sort">\n        <el-radio-group\n          v-model="createFrom.need_login">\n          <el-radio :label="true">是</el-radio>\n          <el-radio :label="false">否</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        class="sort"\n        prop="sort">\n        <el-input\n          v-model.number="createFrom.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'createFrom\')">提交</el-button>\n        <router-link to="/event/list">\n          <el-button>取消</el-button>\n        </router-link>\n      </el-form-item>\n    </el-form>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      title="自定义服务"\n      width="40%"\n      style="padding: 20px 50px 20px 50px"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        @submit-custom-event="submitCustomEvent"\n        @cancel-custom-event="cancelCustomEvent"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport CustomEvent from \'@/components/manageEvent/customEvent\'\nimport * as Actions from \'@/api/eventApi\'\nimport uploadHeaders from \'@/mixins\'\nimport {controlTime} from \'../../helpers\'\nexport default {\n  components: {\n    CircleTitle,\n    CustomEvent\n  },\n  mixins: [uploadHeaders],\n  data () {\n    var checkUrl = (rule, value, callback) => {\n      // eslint-disable-next-line\n      var match =  /^((ht|f)tps?):\\/\\/([\\w\\-]+(\\.[\\w\\-]+)*\\/)*[\\w\\-]+(\\.[\\w\\-]+)*\\/?(\\?([\\w\\-\\.,@?^=%&:\\/~\\+#]*)+)?/\n      if (!match.test(value)) {\n        return callback(new Error(\'请输入正确的地址\'))\n      }\n      callback()\n    }\n    return {\n      createFrom: {\n        activity_name: \'\',\n        sort: \'\',\n        head_img: \'\',\n        url: \'\',\n        app_url: \'\',\n        manager_url: \'\',\n        type_name: \'\',\n        state: 0,\n        typeid: \'\',\n        liveRange: [new Date(), new Date()],\n        need_login: true\n      },\n      rules: {\n        activity_name: [\n          { required: true, message: \'请输入服务名称\', trigger: \'blur\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          { type: \'number\', message: \'排序必须为数字\' }\n        ],\n        head_img: [\n          { required: true, message: \'请上传图片\', trigger: \'blur\' }\n        ],\n        app_url: [\n          { validator: checkUrl, trigger: \'blur\' }\n        ]\n      },\n      eventTypeList: [],\n      dialogVisible: false,\n      componentName: \'\',\n      customTypeId: \'0999\'\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getActivityType()\n  },\n  methods: {\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.eventTypeList.forEach((item, index, arr) => {\n            if (item.value === this.createFrom.typeid) {\n              this.createFrom.type_name = item.label\n            }\n          })\n          Actions.addActivity({\n            \'activity\': {\n              \'activity_name\': this.createFrom.activity_name,\n              \'head_img\': this.createFrom.head_img,\n              \'app_url\': this.createFrom.app_url,\n              \'manager_url\': this.createFrom.manager_url,\n              \'typeid\': this.createFrom.typeid,\n              \'type_name\': this.createFrom.type_name,\n              \'expiry_date_start\': this.createFrom.liveRange[0].getTime(),\n              \'expiry_date_end\': this.createFrom.liveRange[1].getTime(),\n              \'state\': this.createFrom.state,\n              \'sort\': this.createFrom.sort,\n              \'need_login\': this.createFrom.need_login\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/event/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'添加成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.createFrom.head_img = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    /** 获取服务类别 **/\n    getActivityType () {\n      this.eventTypeList = []\n      Actions.getActivityType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (item.type_name === this.createFrom.typeid) {\n              /** 默认选择一个类型 **/\n              this.createFrom.typeid = item.typeid\n            }\n            let newItem = {}\n            newItem.label = item.type_name\n            newItem.value = item.typeid\n            this.eventTypeList.push(newItem)\n          })\n          let newItem = {}\n          newItem.label = \'自定义\'\n          newItem.value = this.customTypeId\n          this.eventTypeList.push(newItem)\n        }\n      })\n    },\n    chooseTime (changeTimeArr) {\n      controlTime(this, this.createFrom.liveRange, changeTimeArr)\n    },\n    handleEventType (typeid) {\n      if (typeid === this.customTypeId) {\n        this.handleCustomClick()\n      }\n    },\n    /** 点击自定义的处理逻辑 **/\n    handleCustomClick () {\n      this.dialogVisible = true\n      this.componentName = \'CustomEvent\'\n    },\n    closeDialog () {\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    submitCustomEvent (customEventName) {\n      this.closeDialog()\n      this.getActivityType()\n      this.createFrom.typeid = customEventName\n    },\n    cancelCustomEvent () {\n      this.closeDialog()\n      // this.createFrom.typeid = \'\'\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},AJsT:function(e,n,t){var a=t("zJdq");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1f2b4231",a,!1,{})},AOQE:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-7749c06d]{\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.manu[data-v-7749c06d]{\n  display: inline-block;\n  width: 30px;\n  height: 20px;\n  border:1px solid rgba(181, 184, 217, 1);\n  border-radius: 20px;\n  font-size: 13px;\n  padding: 1px 5px 2px 5px;\n  color: rgba(181, 184, 217, 1);\n  cursor: pointer;\n}\n.manu-up-active[data-v-7749c06d]{\n  border: 1px solid rgba(231, 125, 0, 1);\n  color:rgba(231, 125, 0, 1);\n}\n.manu-back-active[data-v-7749c06d]{\n  border: 1px solid rgba(240, 8, 8, 1);\n  color:rgba(240, 8, 8, 1);\n}\n.delete-active[data-v-7749c06d]{\n  border:1px solid rgba(105, 78, 255, 1);\n  color: rgba(105, 78, 255, 1);\n}\n.pagination[data-v-7749c06d] {\n  display: -webkit-box;\n  -webkit-box-pack: end;\n}\n.manuscript .allow_comment[data-v-7749c06d] {\n  background-color: #ffa507;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n  cursor: pointer;\n}\n.manuscript .allow_share[data-v-7749c06d] {\n  background-color: #1883FF;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n  cursor: pointer;\n}\n.manuscript .allow_like[data-v-7749c06d] {\n  background-color: #F00808;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n  cursor: pointer;\n}\n.manuscript .allow_collect[data-v-7749c06d] {\n  background-color: #694EFF;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n  cursor: pointer;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageManuscript/src/components/manageManuscript/manageManuscriptList.vue"],names:[],mappings:";AAwzBA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;CACA;AACA;EACA,sBAAA;EACA,YAAA;EACA,aAAA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;EACA,yBAAA;EACA,8BAAA;EACA,gBAAA;CACA;AACA;EACA,uCAAA;EACA,2BAAA;CACA;AACA;EACA,qCAAA;EACA,yBAAA;CACA;AACA;EACA,uCAAA;EACA,6BAAA;CACA;AACA;EACA,qBAAA;EACA,sBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;EACA,gBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;EACA,gBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;EACA,gBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;EACA,gBAAA;CACA",file:"manageManuscriptList.vue",sourcesContent:['<template>\n  <div class="manuscript">\n    <div>\n      <circle-title\n        title-name="稿件管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="manuScript"\n          class="demo-form-inline">\n          <el-form-item label="稿件主题">\n            <el-input\n              v-model="manuScript.title"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="归属频道"\n            prop="channelid">\n            <el-select\n              v-model="manuScript.channelid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="searchManuScript"\n              @change="searchManuScript">\n              <el-option\n                v-for="(item, index) in channelTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="归属专题">\n            <el-select\n              v-model="manuScript.specialid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="searchManuScript"\n              @change="searchManuScript">\n              <el-option\n                v-for="(item, index) in specialList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="manuScript.state"\n              placeholder=""\n              @change="searchManuScript">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="0"\n                label="待上线"/>\n              <el-option\n                :value="1"\n                label="已上线"/>\n              <el-option\n                :value="2"\n                label="已下线"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="manuScript.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="manuScript.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchManuScript"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间">\n            <el-date-picker\n              :title="manuScript.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="manuScript.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchManuScript"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 68px"\n            @click="searchManuScript">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @select-all="selectAll"\n        @selection-change="selectionChange">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="归属频道"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.articleChannelList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :content="showChannelAllName(scope.row.articleChannelList)"\n              :key="scope.row.articleid"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <el-tag\n                v-for="(item, index) in scope.row.articleChannelList"\n                :key="index"\n                size="mini">\n                {{ channelTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="归属专题"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.articleSpecialList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :content="showSpecialAllName(scope.row.articleSpecialList)"\n              :key="scope.row.articleid"\n              :visible-arrow="false"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <el-tag\n                v-for="(item, index) in scope.row.articleSpecialList"\n                :key="index"\n                size="mini">\n                {{ specialTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="置顶状态"\n          align="center">\n          <template slot-scope="scope">\n            <el-tooltip\n              v-if="!scope.row.top"\n              class="item"\n              effect="dark"\n              content="点击置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;"\n                @click.native="setManuUnTop(scope.row)">\n                置顶\n              </el-tag>\n            </el-tooltip>\n            <el-tooltip\n              v-else\n              class="item"\n              effect="dark"\n              content="点击取消置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;color:#694eff"\n                @click.native="setManuTop(scope.row)">\n                取消置顶\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="上稿/撤稿"\n          align="center">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                :class="[\'manu\', scope.row.state !== 1 && (scope.row.articleChannelList.length > 0 || scope.row.articleSpecialList.length > 0) ? \'manu-up-active\': \'\']"\n                @click="upManu(scope.row)">\n                上稿\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state === 1 ? \'manu-back-active\': \'\']"\n                @click="downManu(scope.row)">\n                撤稿\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="操作"\n          align="center">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="settingManu(scope.row)">\n                配置\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="deleteManu(scope.row)">\n                删除\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          fixed="right"\n          label="权限配置"\n          align="center"\n          width="115">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="评论"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_comment ? \'#ffa507\': \'#B5B8D9\'}"\n                class="allow_comment"\n                @click="handleComment(scope.row)"\n              >\n                <i\n                  style="color: white"\n                  class="iconfont icon-manu-comment"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="分享"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_share ? \'#1883FF\': \'#B5B8D9\'}"\n                class="allow_share"\n                @click="handleShare(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-share"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="点赞"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_like ? \'#F00808\': \'#B5B8D9\'}"\n                class="allow_like"\n                @click="handlePraise(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-praise"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="收藏"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_collect ? \'#694EFF\': \'#B5B8D9\'}"\n                class="allow_collect"\n                @click="handleCollect(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-collect"/>\n              </div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      custom-class="custom-dialog"\n      title="稿件信息配置"\n      width="50%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        :setting-article-id="settingArticleId"\n        :manu-title="manuTitle"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport SettingManu from \'./settingManu\'\nimport * as Actions from \'@/api/manuScriptApi\'\nexport default {\n  components: {\n    CircleTitle,\n    SettingManu\n  },\n  data () {\n    return {\n      manuScript: {\n        channel_name: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\',\n        channelid: \'\',\n        title: \'\',\n        specialid: \'\'\n      },\n      channelTypeList: [], // 所属频道列表\n      specialList: [],\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'title\',\n          label: \'稿件主题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'推送日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'article_url\',\n          label: \'稿件内容\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>查看稿件内容</a>\n          }\n        },\n        {\n          prop: \'state\',\n          label: \'状态\',\n          width: \'100\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 0) {\n              return \'待上线\'\n            } else if (cellValue === 1) {\n              return \'已上线\'\n            } else if (cellValue === 2) {\n              return \'已下线\'\n            }\n          }\n        }\n      ],\n      tableData: [],\n      batchProcess: 1,\n      processList: [\n        {\n          value: 1,\n          label: \'批量删除\'\n        }, {\n          value: 2,\n          label: \'其他\'\n        }\n      ],\n      comment: false,\n      share: false,\n      praise: false,\n      collect: false,\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false,\n      componentName: \'\',\n      articleidList: [], // 选择的稿件id,\n      selfSelectAll: false, // 自定义的全选,\n      selectedManuInfo: [], // 所选的稿件的详细信息\n      settingArticleId: \'0\',\n      manuTitle: \'\' // 稿件主题, 传给子组件\n    }\n  },\n  computed: {\n    showNullTag () {\n      return function (arr) {\n        if (!arr) {\n          return true\n        } else if (arr.length <= 0) {\n          return true\n        } else {\n          return false\n        }\n      }\n    },\n    channelTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.channel_name === \'\') {\n            return \'无\'\n          } else {\n            return content.channel_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    specialTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.special_name === \'\') {\n            return \'无\'\n          } else {\n            return content.special_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    showChannelAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += item.channel_name + \',\'\n          } else {\n            title += item.channel_name\n          }\n        })\n        return title\n      }\n    },\n    showSpecialAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += \'《\' + item.special_name + \'》\' + \'\'\n          } else {\n            title += \'《\' + item.special_name + \'》\'\n          }\n        })\n        return title\n      }\n    }\n  },\n  watch: {\n    \'manuScript.title\' () {\n      this.searchManuScript()\n    }\n  },\n  mounted () {\n    this.getMunuScriptList()\n    this.getListUsableChannel()\n    this.getListUsableSpecial()\n  },\n  methods: {\n    /** 获取稿件列表 **/\n    getMunuScriptList () {\n      Actions.getManuScriptList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取专题列表 **/\n    getListUsableSpecial () {\n      Actions.getListUsableSpecial().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.special_name\n            newItem.value = item.specialid\n            this.specialList.push(newItem)\n          })\n        }\n      })\n    },\n    onSubmit () {\n      console.log(\'submit!\')\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchManuScript()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.searchManuScript()\n    },\n    /** 获取全选的数据 **/\n    selectAll (e) {\n      if (e.length > 0) {\n        this.selfSelectAll = true\n      } else {\n        this.selfSelectAll = false\n      }\n    },\n    /** 评论权限 **/\n    handleComment (row) {\n      if (row.state !== 1) {\n        if (row.allow_comment) {\n          this.updateManu(row.articleid, \'allow_comment\', false)\n        } else {\n          this.updateManu(row.articleid, \'allow_comment\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作评论权限!\'\n        })\n      }\n    },\n    /** 分享权限 **/\n    handleShare (row) {\n      if (row.state !== 1) {\n        if (row.allow_share) {\n          this.updateManu(row.articleid, \'allow_share\', false)\n        } else {\n          this.updateManu(row.articleid, \'allow_share\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作分享权限!\'\n        })\n      }\n    },\n    /** 点赞权限 **/\n    handlePraise (row) {\n      if (row.state !== 1) {\n        if (row.allow_like) {\n          this.updateManu(row.articleid, \'allow_like\', false)\n        } else {\n          this.updateManu(row.articleid, \'allow_like\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作点赞权限!\'\n        })\n      }\n    },\n    /** 收藏权限 **/\n    handleCollect (row) {\n      if (row.state !== 1) {\n        if (row.allow_collect) {\n          this.updateManu(row.articleid, \'allow_collect\', false)\n        } else {\n          this.updateManu(row.articleid, \'allow_collect\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作收藏权限!\'\n        })\n      }\n    },\n    /** 取消置顶 **/\n    setManuUnTop (row) {\n      this.updateManu(row.articleid, \'top\', true)\n    },\n    /** 取消置顶 **/\n    setManuTop (row) {\n      this.updateManu(row.articleid, \'top\', false)\n    },\n    /** 上稿 **/\n    upManu (row) {\n      if (row.articleChannelList.length <= 0 && row.articleSpecialList.length <= 0) {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件还没有配置频道和专题, 不能上稿!\'\n        })\n        return false\n      }\n      if (row.state === 0 || row.state === 2) {\n        this.$confirm(\'确定要上稿吗?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          this.updateManu(row.articleid, \'state\', 1)\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件已上线!\'\n        })\n      }\n    },\n    /** 撤稿 **/\n    downManu (row) {\n      if (row.state === 1) {\n        this.$confirm(\'确定要撤稿吗?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          this.updateManu(row.articleid, \'state\', 2)\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件已撤稿!\'\n        })\n      }\n    },\n    /** 配置稿件 **/\n    settingManu (row) {\n      if (row.state !== 1) {\n        this.dialogVisible = true\n        this.componentName = SettingManu\n        this.settingArticleId = row.articleid\n        this.manuTitle = row.title\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可配置!\'\n        })\n      }\n    },\n    /** 删除稿件 **/\n    deleteManu (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.title + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteManuScript({\n            \'article\': {\n              \'articleid\': row.articleid\n            }\n          }).then((res) => {\n            if (res.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.searchManuScript()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可删除!\'\n        })\n      }\n    },\n    /**\n     * 稿件操作的公共接口\n     * @param articleid 文章ID\n     * @param key 更新字段名\n     * @param value 值\n     */\n    updateManu (articleid, key, value) {\n      Actions.updateManu({\n        \'article\': {\n          \'articleid\': articleid,\n          [key]: value\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'操作成功!\'\n          })\n          this.searchManuScript()\n        }\n      })\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      this.articleidList = []\n      selection.forEach((item, index, arr) => {\n        this.articleidList.push(item.articleid)\n      })\n      this.selectedManuInfo = selection\n    },\n    /** 批量删除稿件 **/\n    deleteManyManu () {\n      if (this.batchProcess === 1) {\n        let isAllowDelete = true\n        if (this.articleidList.length <= 0) {\n          this.$message({\n            type: \'error\',\n            message: \'请至少选择一个稿件!\'\n          })\n          return false\n        }\n        let tipContent = \'您所选择的:"\'\n        /** 已上线的稿件不可删除的提示 **/\n        this.selectedManuInfo.forEach((item, index, arr) => {\n          if (item.state === 1) {\n            isAllowDelete = false\n            if (index !== arr.length - 1) {\n              tipContent += \'《\' + item.title + \'》\'\n            } else {\n              tipContent += \' 已上线稿件, 不可删除! \'\n            }\n          }\n        })\n        if (!isAllowDelete) {\n          this.$message({\n            type: \'error\',\n            message: tipContent\n          })\n          return false\n        }\n        this.$confirm(\'确定删除所选稿件?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.batchDeleteManu({\n            \'articleidList\': this.articleidList\n          }).then((res) => {\n            console.log(res)\n            if (res.status) {\n              this.$message({\n                type: \'success\',\n                message: \'批量删除成功!\'\n              })\n            }\n            this.searchManuScript()\n          })\n        }).catch(() => {\n        })\n      }\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = \'\'\n      this.searchManuScript()\n    },\n    /** 搜索稿件 **/\n    searchManuScript () {\n      this.$options.filters[\'swapTime\'](this.manuScript)\n      let timeStart = this.manuScript.startDate !== null ? new Date(this.manuScript.startDate).getTime() : null\n      let timeEnd = this.manuScript.endDate !== null ? new Date(this.manuScript.endDate).getTime() : null\n      Actions.getManuScriptList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.manuScript.channelid,\n        \'specialid\': this.manuScript.specialid,\n        \'title\': this.manuScript.title,\n        \'state\': this.manuScript.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          console.log(data)\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .manu{\n    display: inline-block;\n    width: 30px;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n  .pagination {\n    display: -webkit-box;\n    -webkit-box-pack: end;\n  }\n  .manuscript .allow_comment {\n    background-color: #ffa507;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n    cursor: pointer;\n  }\n  .manuscript .allow_share {\n    background-color: #1883FF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n    cursor: pointer;\n  }\n  .manuscript .allow_like {\n    background-color: #F00808;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n    cursor: pointer;\n  }\n  .manuscript .allow_collect {\n    background-color: #694EFF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n    cursor: pointer;\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n.custom-dialog .el-dialog__header{\n  /*padding: 0;*/\n  border-bottom: 1px solid rgba(192,190,255,1);\n}\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .manuscript .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .manuscript .search-form-container .el-form-item {\n    width: 20%;\n  }\n</style>\n'],sourceRoot:""}])},"AX/C":function(e,n){},AiQH:function(e,n,t){var a=t("yzdr");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("56ac6aed",a,!1,{})},AqR5:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-dialog__header{\n  padding: 13px 30px 13px;\n  border-bottom: 1px solid #C0BEFF;\n  background-color: #F7FAFF;\n}\n.el-dialog__title {\n  line-height: 17px;\n  font-size: 17px;\n  color: #303133;\n}\n.el-dialog__headerbtn {\n  top: 13px;\n}\n.el-dialog__body {\n  padding: 20px 60px 0px 60px;\n}\n.assignRole .el-form {\n  margin-top: 15px;\n}\n.assignRole .submit .el-form-item__content{\n  float: right;\n  width: 160px;\n}\n.select-role {\n  border: 1px solid #694EFF;\n  background-color: #EBF5FF;\n  color: #694EFF;\n  padding:8px 22px 8px 22px;\n  border-radius: 3px;\n}\n.assignRole .el-select {\n  width: 100%;\n}\n.assignRole .el-form-item {\n  width: 100% !important;\n}\n.assignRole .el-checkbox+.el-checkbox{\n  width: 200px;\n  margin-left: 0px;\n}\n/*.assignRole .el-form-item */\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSystemUser/src/components/manageSystemUser/assignRoleList.vue"],names:[],mappings:";AA6FA;EACA,wBAAA;EACA,iCAAA;EACA,0BAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,4BAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,aAAA;EACA,aAAA;CACA;AACA;EACA,0BAAA;EACA,0BAAA;EACA,eAAA;EACA,0BAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,aAAA;EACA,iBAAA;CACA;AACA,8BAAA",file:"assignRoleList.vue",sourcesContent:["<template>\n  <div class=\"assignRole\">\n    <el-form\n      :inline=\"true\"\n      size=\"small\">\n      <el-form-item\n        label=\"用户名\"\n        style=\"margin-left: 13px;\">\n        <span>{{ username }}</span>\n      </el-form-item>\n      <el-form-item label=\"角色分配\">\n        <el-checkbox\n          v-for=\"(item, index) in allRoleList\"\n          :key=\"index\"\n          v-model=\"item.isChecked\"\n          @change=\"chooseRole(item.roleid, item.isChecked)\">\n          {{ item.name }}\n        </el-checkbox>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport * as Actions from '@/api/systemUsersApi'\nexport default {\n  name: 'AssignRole',\n  props: {\n    usercodeList: {\n      type: Array,\n      default: function () {\n        return []\n      }\n    },\n    username: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      allRoleList: []\n    }\n  },\n  mounted () {\n    /** 获取用户信息 **/\n    this.getUserInfo()\n  },\n  methods: {\n    cancel () {\n      this.$emit('closeDialog')\n    },\n    getUserInfo () {\n      Actions.getUserRoles({\n        'orgUsers': {\n          'usercode': ''\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.allRoleList = res.data.result\n        }\n      })\n    },\n    /** 给用户分配权限 **/\n    chooseRole (roleid, isChecked) {\n      Actions.assignRoleList({\n        'assign': {\n          'usercodes': this.usercodeList,\n          'roleid': roleid,\n          'assignOrCanel': isChecked\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.$message({\n            type: 'success',\n            message: '分配成功'\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .assignRole .el-form {\n    margin-top: 15px;\n  }\n  .assignRole .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .assignRole .el-select {\n    width: 100%;\n  }\n  .assignRole .el-form-item {\n    width: 100% !important;\n  }\n  .assignRole .el-checkbox+.el-checkbox{\n    width: 200px;\n    margin-left: 0px;\n  }\n  /*.assignRole .el-form-item */\n</style>\n"],sourceRoot:""}])},AuPM:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.icon-container[data-v-05290591]{\n  width: 450px;\n  margin:0 auto;\n  padding-bottom: 30px;\n}\n.channel-icon[data-v-05290591]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.channel-icon span[data-v-05290591]{\n  display: inline-block;\n  width: 100px;\n  height: 100px;\n  border: 1px solid gray;\n  margin-left: 5px;\n  margin-top: 5px;\n}\n.channel-icon span img[data-v-05290591]{\n  width: 100%;\n  height: 100%;\n}\n.channel-icon span[data-v-05290591]:hover{\n  border: 1px solid blue;\n}\n.channel-icon .click-border[data-v-05290591]{\n  border: 1px solid blue;\n}\n.moren-border[data-v-05290591]{\n  border: 1px solid gray;\n}\n.icon-submit[data-v-05290591]{\n  text-align: right;\n  margin: 10px 20px 0px 0px\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageChannel/src/components/manageChannel/chooseIcon.vue"],names:[],mappings:";AA+DA;EACA,aAAA;EACA,cAAA;EACA,qBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,4BAAA;EACA,oBAAA;MAAA,gBAAA;CACA;AACA;EACA,sBAAA;EACA,aAAA;EACA,cAAA;EACA,uBAAA;EACA,iBAAA;EACA,gBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,kBAAA;EACA,yBAAA;CACA",file:"chooseIcon.vue",sourcesContent:['<template>\n  <div class="icon-container">\n    <div class="channel-icon">\n      <span\n        v-for="(item, index) in iconList"\n        :key="index"\n        :class="iconCheckList[index] ? \'click-border\': \'moren-border\'"\n        @click="iconSelected(index, iconCheckList[index])">\n        <img :src="item">\n      </span>\n    </div>\n    <div\n      class="icon-submit">\n      <el-button\n        type="primary"\n        @click="submitIcon">确定</el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/channelApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      iconList: [],\n      iconCheckList: [],\n      index: 0\n    }\n  },\n\n  mounted () {\n    this.getIconList()\n  },\n  methods: {\n    getIconList () {\n      Actions.listChannelIcon().then(res => {\n        if (res.data.status) {\n          this.iconCheckList = []\n          this.iconList = res.data.result\n          for (let i = 0; i < this.iconList.length; i++) {\n            this.iconCheckList.push(false)\n          }\n        }\n      })\n    },\n    iconSelected (index, isChecked) {\n      this.index = index\n      for (let i = 0; i < this.iconList.length; i++) {\n        this.$set(this.iconCheckList, i, false)\n      }\n      this.$set(this.iconCheckList, index, true)\n    },\n    submitIcon () {\n      this.$emit(\'submit-icon\', this.iconList[this.index])\n    }\n  }\n}\n<\/script>\n<style scoped>\n.icon-container{\n  width: 450px;\n  margin:0 auto;\n  padding-bottom: 30px;\n}\n.channel-icon{\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n}\n.channel-icon span{\n  display: inline-block;\n  width: 100px;\n  height: 100px;\n  border: 1px solid gray;\n  margin-left: 5px;\n  margin-top: 5px;\n}\n.channel-icon span img{\n  width: 100%;\n  height: 100%;\n}\n.channel-icon span:hover{\n  border: 1px solid blue;\n}\n.channel-icon .click-border{\n  border: 1px solid blue;\n}\n.moren-border{\n  border: 1px solid gray;\n}\n.icon-submit{\n  text-align: right;\n  margin: 10px 20px 0px 0px\n}\n</style>\n'],sourceRoot:""}])},BNJR:function(e,n){},BZZX:function(e,n,t){var a=t("upZI");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("224d7790",a,!1,{})},CDJ2:function(e,n,t){var a=t("wJZB");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("53a989f0",a,!1,{})},CE9T:function(e,n,t){var a=t("qqIy");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("c519194e",a,!1,{})},CPlN:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.user-manage .el-form--inline .el-form-item__content {\n  width: 160px;\n}\n.user-manage .search-form-container .el-form-item {\n  width: 25%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSystemUser/src/components/manageSystemUser/userManage.vue"],names:[],mappings:";AAmSA;EACA,aAAA;CACA;AACA;EACA,WAAA;CACA",file:"userManage.vue",sourcesContent:['<template>\n  <div class="user-manage">\n    <div>\n      <circle-title\n        title-name="系统用户管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="manageUser"\n          class="demo-form-inline">\n          <el-form-item label="用户名">\n            <el-input\n              v-model="manageUser.username"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="manageUser.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="manageUser.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getManageUserList"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间">\n            <el-date-picker\n              :title="manageUser.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="manageUser.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getManageUserList"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            @click="getManageUserList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <el-button\n            :disabled="selectRows <= 0"\n            type="primary"\n            @click="assignRoleList">\n            分配角色\n            <i class="el-icon-edit-outline el-icon--right "/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @selection-change="selectionChange">\n        <el-table-column\n          type="selection"\n          align="center"\n          width="55"/>\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="250">\n          <template slot-scope="scope">\n            <span>\n              <span\n                class="user edit"\n                @click="assignRole(scope.row)">\n                分配角色\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      title="用户分配角色"\n      width="30%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        :usercode="usercode"\n        :usercode-list="usercodeList"\n        :username="username"\n        @closeDialog="closeDialog"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport AssignRole from \'@/components/manageSystemUser/assignRole\'\nimport AssignRoleList from \'@/components/manageSystemUser/assignRoleList\'\nimport * as Actions from \'@/api/systemUsersApi\'\nexport default {\n  components: {\n    CircleTitle,\n    AssignRole,\n    AssignRoleList\n  },\n  data () {\n    return {\n      manageUser: {\n        username: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      dialogVisible: false,\n      componentName: \'AssignRole\',\n      tableHeader: [\n        {\n          prop: \'username\',\n          label: \'成员账号\'\n        },\n        {\n          prop: \'roleList\',\n          label: \'角色\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue.length <= 0) return \'该用户暂无分配角色\'\n            let toolTip = \'\'\n            cellValue.forEach((item, index, arr) => {\n              if (index !== arr.length - 1) {\n                toolTip += item.name + \',\'\n              } else {\n                toolTip += item.name\n              }\n            })\n            return toolTip\n          }\n        },\n        {\n          prop: \'phone\',\n          label: \'手机号\'\n        },\n        {\n          prop: \'email\',\n          label: \'邮箱地址\'\n        },\n        {\n          prop: \'createdata\',\n          label: \'添加时间\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      usercodeList: [],\n      usercode: \'\',\n      username: \'\',\n      selectRows: []\n    }\n  },\n  watch: {\n    \'manageUser.username\' (val) {\n      this.getManageUserList()\n    }\n  },\n  mounted () {\n    this.getManageUserList()\n  },\n  methods: {\n    getManageUserList () {\n      this.$options.filters[\'swapTime\'](this.manageUser)\n      let timeStart = this.manageUser.startDate !== null ? new Date(this.manageUser.startDate).getTime() : null\n      let timeEnd = this.manageUser.endDate !== null ? new Date(this.manageUser.endDate).getTime() : null\n      Actions.getManageUserList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'name\': this.manageUser.username,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    assignRole (row) {\n      this.dialogVisible = true\n      this.componentName = \'AssignRole\'\n      this.usercode = row.usercode\n      this.username = row.username\n    },\n    assignRoleList () {\n      this.dialogVisible = true\n      this.componentName = \'AssignRoleList\'\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getManageUserList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getManageUserList()\n    },\n    closeDialog () {\n      this.componentName = \'\'\n      this.dialogVisible = false\n      this.getManageUserList()\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      // this.recoverSelection()\n      this.usercodeList = []\n      this.selectRows = selection\n      let usernameContact = \'\'\n      selection.forEach((item, index, arr) => {\n        if (index === arr.length - 1) {\n          usernameContact += item.username\n        } else {\n          usernameContact += item.username + \'/\'\n        }\n        this.usercodeList.push(item.usercode)\n      })\n      this.username = usernameContact\n    },\n    recoverSelection () {\n      this.selectRows.forEach((row) => {\n        this.$refs.channelTable.toggleRowSelection(row, true)\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: flex-end;\n  }\n  .user{\n    display: inline-block;\n    width: auto;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .edit{\n    border: 1px solid #1883FF;\n    color:#1883FF;\n  }\n  .reset-password{\n    border: 1px solid #694EFF;\n    color:#694EFF;\n    width: 60px;\n  }\n  .delete{\n    border:1px solid #F00808;\n    color: #F00808;\n  }\n  .disable{\n    border: 1px solid #E77D00;\n    color:#E77D00;\n  }\n</style>\n<style>\n  .user-manage .el-form--inline .el-form-item__content {\n    width: 160px;\n  }\n  .user-manage .search-form-container .el-form-item {\n    width: 25%;\n  }\n</style>\n'],sourceRoot:""}])},DIUS:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.count-item-wrapper[data-v-667dd1fb] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-bottom: 30px;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  font-size: 0;\n}\n.item-icon[data-v-667dd1fb] {\n  width: 70px;\n  min-width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  position: relative;\n}\n.item-icon i[data-v-667dd1fb] {\n  position: absolute;\n}\n.item-icon i.clock[data-v-667dd1fb] {\n  top: 0;\n  left: 0;\n  color: #694eff;\n}\n.item-icon i.custom-icon[data-v-667dd1fb] {\n  display: inline-block;\n  font-size: 35px;\n  color: #fff;\n  top: 65%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.item-num[data-v-667dd1fb] {\n  padding-left: 20px;\n  color: #474747;\n  font-size: 0;\n}\n.item-num .count-num[data-v-667dd1fb] {\n  font-size: 26px;\n}\n.item-num .count-text[data-v-667dd1fb] {\n  font-size: 14px;\n  margin-top: 10px;\n}\n/*# sourceMappingURL=src/components/commons/countItem.css.map */","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/commons/src/components/commons/countItem.vue","/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/commons/countItem.vue"],names:[],mappings:";AAuDA;EACE,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,4BAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,oBAAA;EACA,oBAAA;MAAA,YAAA;UAAA,QAAA;EACA,aAAA;CCtDD;ADwDD;EACE,YAAA;EACA,gBAAA;EACA,aAAA;EACA,mBAAA;EACA,mBAAA;CCtDD;ADuDC;EACE,mBAAA;CCrDH;ADsDG;EACE,OAAA;EACA,QAAA;EACA,eAAA;CCpDL;ADqDG;EACE,sBAAA;EACA,gBAAA;EACA,YAAA;EACA,SAAA;EACA,UAAA;EACA,yCAAA;UAAA,iCAAA;CCnDL;ADoDD;EACE,mBAAA;EACA,eAAA;EACA,aAAA;CClDD;ADmDC;EACE,gBAAA;CCjDH;ADkDC;EACE,gBAAA;EACA,iBAAA;CChDH;AACD,gEAAgE",file:"countItem.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.count-item-wrapper\n  display flex\n  justify-content flex-start\n  align-items center\n  margin-bottom 30px\n  flex 1\n  font-size 0\n      \n.item-icon\n  width 70px\n  min-width 70px\n  height 70px\n  border-radius 50%\n  position relative\n  i \n    position absolute\n    &.clock\n      top 0\n      left 0\n      color #694EFF\n    &.custom-icon\n      display inline-block\n      font-size 35px\n      color #fff\n      top 65%\n      left 50%\n      transform translate(-50%,-50%)\n.item-num\n  padding-left 20px\n  color #474747\n  font-size 0\n  .count-num\n    font-size 26px    \n  .count-text\n    font-size 14px\n    margin-top 10px\n",".count-item-wrapper {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin-bottom: 30px;\n  flex: 1;\n  font-size: 0;\n}\n.item-icon {\n  width: 70px;\n  min-width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  position: relative;\n}\n.item-icon i {\n  position: absolute;\n}\n.item-icon i.clock {\n  top: 0;\n  left: 0;\n  color: #694eff;\n}\n.item-icon i.custom-icon {\n  display: inline-block;\n  font-size: 35px;\n  color: #fff;\n  top: 65%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.item-num {\n  padding-left: 20px;\n  color: #474747;\n  font-size: 0;\n}\n.item-num .count-num {\n  font-size: 26px;\n}\n.item-num .count-text {\n  font-size: 14px;\n  margin-top: 10px;\n}\n/*# sourceMappingURL=src/components/commons/countItem.css.map */"],sourceRoot:""}])},Dnvh:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-button--primary[data-v-40a8aab3] {\n  background-color: #716BFF;\n  border-color: #716BFF;\n}\n.el-button--default[data-v-40a8aab3] {\n  color: #716BFF ;\n  border-color: #716BFF;\n}\n.addUser .el-checkbox[data-v-40a8aab3] {\n  float: left;\n}\n.addUser .check-all[data-v-40a8aab3] {\n  margin-right: 30px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageRole/src/components/manageRole/addRole.vue"],names:[],mappings:";AA+IA;EACA,0BAAA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,sBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,mBAAA;CACA",file:"addRole.vue",sourcesContent:['<template>\n  <div class="addUser">\n    <el-form\n      ref="ruleForm"\n      :model="ruleForm"\n      :rules="rules">\n      <el-form-item\n        label="角色名称"\n        prop="role_name">\n        <el-input\n          v-model.trim="ruleForm.role_name"\n          style="width:260px;"\n          clearable/>\n      </el-form-item>\n    </el-form>\n    <div class="table-lists">\n      <p style="margin-bottom: 10px;">权限配置：</p>\n      <tree-transfer\n        :title="title"\n        :from_data="fromData"\n        :to_data="toData"\n        :default-props="{label:\'label\'}"\n        :mode="mode"\n        :filter="false"\n        open-all\n        height="440px"\n        @addBtn = "addAuth"\n        @removeBtn = "removeAuth"/>\n    </div>\n    <el-form-item\n      class="submit"\n      style="width:100%">\n      <el-button\n        @click="cancel">取消</el-button>\n      <el-button\n        type="primary"\n        @click="onSubmit(\'ruleForm\')">提交</el-button>\n    </el-form-item>\n  </div>\n</template>\n<script>\nimport treeTransfer from \'el-tree-transfer\'\nimport * as Actions from \'@/api/systemUsersApi\'\nexport default {\n  name: \'AddRole\',\n  components: {\n    treeTransfer\n  },\n  data () {\n    return {\n      ruleForm: {\n        role_name: \'\'\n      },\n      mode: \'transfer\', // transfer addressList\n      fromData: [],\n      toData: [],\n      title: [\'全部权限\', \'已选择权限\'],\n      rules: {\n        role_name: [\n          { required: true, message: \'请输入角色名称\', trigger: \'blur\' }\n        ]\n      },\n      idArr: []\n    }\n  },\n  mounted () {\n    /** 获取树 **/\n    this.getTreePermission()\n  },\n  methods: {\n    getTreePermission () {\n      Actions.getTreePermission().then(res => {\n        if (res.data.status) {\n          this.fromData = res.data.result\n        }\n      })\n    },\n    getAllSelectedId () {\n      this.toData.forEach((item, index, arr) => {\n        this.idArr.push(item.id)\n        if (item.children.length > 0) {\n          this.getChildrenId(item.children)\n        }\n      })\n    },\n    getChildrenId (arr) {\n      arr.forEach((item, index, arr) => {\n        this.idArr.push(item.id)\n        if (item.children.length > 0) {\n          this.getChildrenId(item.children)\n        }\n      })\n    },\n    onSubmit (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.toData.length <= 0) {\n            this.$notify({\n              type: \'error\',\n              title: \'错误\',\n              message: \'请为角色配置权限\'\n            })\n            return false\n          }\n          this.idArr = []\n          this.getAllSelectedId()\n          Actions.addRole({\n            \'role\': {\n              \'name\': this.ruleForm.role_name,\n              \'permissionidList\': this.idArr\n            }\n          }).then(res => {\n            console.log(res)\n            if (res.data.status) {\n              this.$notify({\n                type: \'success\',\n                title: \'成功\',\n                message: \'添加角色成功\'\n              })\n              this.$emit(\'closeDialog\')\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    cancel () {\n      this.$emit(\'closeDialog\')\n    },\n    addAuth (fromData, toData, obj) {\n      this.toData = toData\n    },\n    removeAuth (fromData, toData, obj) {\n      this.toData = toData\n    }\n  }\n\n}\n<\/script>\n\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n  .addUser .el-checkbox {\n    float: left;\n  }\n  .addUser .check-all {\n    margin-right: 30px;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .addUser .el-form {\n    margin-top: 15px;\n  }\n  .addUser .el-form-item {\n    width: 100%;\n  }\n  .addUser .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .addUser .el-select {\n    width: 100%;\n  }\n  .table-lists {\n    margin-top: 10px;\n    margin-bottom: 20px;\n  }\n  .table-lists thead tr th {\n    background: #716BFF;\n    color: white;\n    border-color:#716BFF ;\n    text-align: center;\n  }\n</style>\n'],sourceRoot:""}])},Dte2:function(e,n){},Dydx:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.basis .el-upload--picture-card {\n  width: 60px;\n  height: 60px;\n  line-height: 65px;\n}\n.basis .el-upload-list--picture-card .el-upload-list__item {\n  width: 60px;\n  height: 60px;\n}\n.basis .el-dialog__header {\n  padding: 0;\n}\n.basis .el-dialog__body {\n  padding: 30px;\n  height: 240px;\n  color: #606266;\n  font-size: 14px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.basis .el-dialog__body img {\n  width: 100%;\n  height: 100%;\n}\n.basis .el-dialog {\n  position: relative;\n  margin: 0 auto 60px;\n  width: 300px;\n  height: 300px;\n}\n.basis .el-dialog__headerbtn {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n}\n.basis .menu .menu-box .el-form-item__content {\n  margin-left: 0 !important;\n}\n.basis .frame .frame-box .el-form-item__content {\n  margin-left: 45px !important;\n}\n.basis .frame .frame-box .el-form-item__label {\n  width: 40px !important;\n}\n.basis .frame .frame-box .el-form-item {\n  margin-bottom: 0 !important;\n}\n.basis .el-checkbox__input.is-checked .el-checkbox__inner, .el-checkbox__input.is-indeterminate .el-checkbox__inner {\n  background-color: #694EFF;\n  border-color: #694EFF;\n}\n.basis .el-checkbox__input.is-checked+.el-checkbox__label {\n  color: #694EFF;\n}\n.basis .menu .el-upload-list--picture-card .el-upload-list__item-actions .el-upload-list__item-delete {\n  display: none;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageBasis/src/components/manageBasis/basisConfiguration.vue"],names:[],mappings:";AAupBA;EACA,YAAA;EACA,aAAA;EACA,kBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,cAAA;EACA,cAAA;EACA,eAAA;EACA,gBAAA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,wBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;CACA;AACA;EACA,mBAAA;EACA,oBAAA;EACA,aAAA;EACA,cAAA;CACA;AACA;EACA,mBAAA;EACA,UAAA;EACA,YAAA;CACA;AACA;EACA,0BAAA;CACA;AACA;EACA,6BAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,4BAAA;CACA;AACA;EACA,0BAAA;EACA,sBAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,cAAA;CACA",file:"basisConfiguration.vue",sourcesContent:["<template>\n  <div class=\"basis\">\n    <el-form\n      ref=\"editForm\"\n      :model=\"editForm\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\">\n      <div class=\"menu\">\n        <circle-title\n          title-name=\"菜单配置\"\n          class=\"circle-title\"/>\n        <div class=\"menu-box\">\n          <div\n            v-for=\"(item,index) in editForm.menulist\"\n            :key=\"index\"\n            class=\"box-left\">\n            <el-checkbox\n              v-model=\"item.isuse\"\n              :disabled=\"item.disabled\">\n              <div :class=\"['title', countAuditWait ? 'block': 'none']\"> {{ item.name }} </div>\n              <input\n                :class=\"['input', countAuditWait ? 'input-none': 'input-block']\"\n                v-model=\"item.name\"\n                :disabled=\"item.disabled\"\n                minlength=\"1\"\n                maxlength=\"3\"\n                type=\"text\">\n            </el-checkbox>\n            <div class=\"img-box\">\n              <div style=\"width: 60px;height: 60px;overflow: hidden\">\n                <my-upload\n                  :upload-item=\"item\"\n                  align=\"left\"\n                  @open-dialog=\"openDialog\"\n                />\n                <el-dialog\n                  :visible.sync=\"dialogVisible\">\n                  <img\n                    :src=\"dialogImageUrl\"\n                    alt=\"\">\n                </el-dialog>\n              </div>\n              <span>默认图</span>\n            </div>\n            <div class=\"img-box\">\n              <div style=\"width: 60px;height: 60px;overflow: hidden\">\n                <my-upload\n                  :upload-id=\"item.id\"\n                  :upload-item=\"item\"\n                  align=\"right\"\n                  @open-dialog=\"openDialog\"/>\n              </div>\n              <span>选中图</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"edit\">\n          <el-button\n            :class=\"['', countAuditWait ? 'block': 'none']\"\n            style=\"margin-left: 90%;font-size: 14px\"\n            type=\"primary\"\n            size=\"small\"\n            @click=\"edit()\">编辑</el-button>\n          <div :class=\"['save', countAuditWait ? 'none': 'block']\">\n            <el-button\n              type=\"primary\"\n              style=\"font-size: 14px\"\n              size=\"small\"\n              @click=\"submitMenu('editForm')\">保存</el-button>\n            <el-button\n              type=\"info\"\n              style=\"font-size: 14px\"\n              size=\"small\"\n              @click=\"cancel()\">取消</el-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"frame\">\n        <circle-title\n          title-name=\"框架内容\"\n          class=\"circle-title\"/>\n        <div class=\"frame-box\">\n          <div\n            v-for=\"(item,index) in frameList\"\n            :key=\"index\"\n            class=\"box-left\">\n            <div class=\"framework-title\">{{ item.name }}</div>\n            <div class=\"img-box\">\n              <div style=\"width: 60px;height: 60px;overflow: hidden\">\n                <my-upload\n                  :upload-item=\"item\"\n                  :upload-url.sync=\"item.url\"\n                  @open-dialog=\"openDialog\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"frame-box\">\n          <div class=\"box-left\">\n            <div class=\"framework-title\">频道选中颜色</div>\n            <el-color-picker\n              v-model=\"editForm.channel_select_color\"\n              class=\"img-box\"/>\n          </div>\n        </div>\n        <div class=\"edit\">\n          <el-button\n            style=\"margin-left: 90%;font-size: 14px\"\n            type=\"primary\"\n            size=\"small\"\n            @click=\"submitFrame('editForm')\">保存</el-button>\n        </div>\n      </div>\n      <div class=\"frame content\">\n        <circle-title\n          title-name=\"内容标识\"\n          class=\"circle-title\"/>\n        <div class=\"frame-box\">\n          <div class=\"box-left\">\n            <div class=\"framework-title\">专题图标颜色</div>\n            <el-color-picker\n              v-model=\"editForm.special_icon_color\"\n              class=\"img-box\"/>\n          </div>\n          <div class=\"box-left\">\n            <div class=\"framework-title\">置顶图标颜色</div>\n            <el-color-picker\n              v-model=\"editForm.top_icon_color\"\n              class=\"img-box\"/>\n          </div>\n        </div>\n        <div class=\"edit\">\n          <el-button\n            style=\"margin-left: 90%;font-size: 14px\"\n            type=\"primary\"\n            size=\"small\"\n            @click=\"submitContent('editForm')\">保存</el-button>\n        </div>\n      </div>\n      <div class=\"frame loginPage\">\n        <circle-title\n          title-name=\"登录页\"\n          class=\"circle-title\"/>\n        <div class=\"frame-box\">\n          <div\n            v-for=\"(item,index) in loginList\"\n            :key=\"index\"\n            class=\"box-left\">\n            <div class=\"framework-title\">{{ item.name }}</div>\n            <div class=\"img-box\">\n              <div style=\"width: 60px;height: 60px;overflow: hidden\">\n                <my-upload\n                  :upload-item=\"item\"\n                  :upload-url.sync=\"item.url\"\n                  @open-dialog=\"openDialog\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"edit\">\n          <el-button\n            style=\"margin-left: 90%;font-size: 14px\"\n            type=\"primary\"\n            size=\"small\"\n            @click=\"submitLogin('editForm')\">保存</el-button>\n        </div>\n      </div>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/basisApi'\nimport uploadHeaders from '@/mixins'\nimport MyUpload from '@/components/commons/myUpload'\nexport default {\n  components: {\n    CircleTitle,\n    MyUpload\n  },\n  mixins: [uploadHeaders],\n  data () {\n    return {\n      editForm: {\n        channel_select_color: 'red',\n        special_icon_color: 'red',\n        top_icon_color: 'red',\n        menulist: [],\n        disabled: true,\n        data: ''\n      },\n      frameList: [\n        {\n          name: '顶部背景',\n          url: ''\n        },\n        {\n          name: '我的背景',\n          url: ''\n        },\n        {\n          name: '自定义图标',\n          url: ''\n        },\n        {\n          name: '搜索图标',\n          url: ''\n        },\n        {\n          name: '背景logo',\n          url: ''\n        }\n      ],\n      loginList: [\n        {\n          name: '登录背景',\n          url: ''\n        },\n        {\n          name: '登录logo',\n          url: ''\n        },\n        {\n          name: '登录按钮',\n          url: ''\n        },\n        {\n          name: '注册按钮',\n          url: ''\n        },\n        {\n          name: '账号icon',\n          url: ''\n        },\n        {\n          name: '密码icon',\n          url: ''\n        }\n      ],\n      dialogVisible: false,\n      dialogImageUrl: '',\n      countAuditWait: true,\n      rules: {\n        head_img: [\n          { required: true, message: '请上传图片', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getBasisByID()\n  },\n  methods: {\n    getBasisByID () {\n      Actions.getBasisByID().then((res) => {\n        if (res.data.status) {\n          this.editForm.data = res.data.result\n          let data = res.data.result\n          console.log(data)\n          for (var item in data.menu) {\n            data.menu[item].disabled = true\n          }\n          this.editForm.menulist = data.menu\n          this.$set(this.frameList[0], 'url', data.frame.top_bg_url)\n          this.$set(this.frameList[1], 'url', data.frame.center_bg_url)\n          this.$set(this.frameList[2], 'url', data.frame.icon_select_url)\n          this.$set(this.frameList[3], 'url', data.frame.search_icon)\n          this.$set(this.frameList[4], 'url', data.frame.bg_logo_url)\n          this.$set(this.loginList[0], 'url', data.loginPage.login_bg_url)\n          this.$set(this.loginList[1], 'url', data.loginPage.login_logo_url)\n          this.$set(this.loginList[2], 'url', data.loginPage.login_btn_url)\n          this.$set(this.loginList[3], 'url', data.loginPage.register_btn_url)\n          this.$set(this.loginList[4], 'url', data.loginPage.username_icon)\n          this.$set(this.loginList[5], 'url', data.loginPage.password_icon)\n          this.editForm.channel_select_color = data.frame.channel_select_color\n          this.editForm.special_icon_color = data.content.special_icon_color\n          this.editForm.top_icon_color = data.content.top_icon_color\n        }\n      })\n    },\n    edit () {\n      for (var item in this.editForm.data.menu) {\n        if (item !== 'personalCenter') {\n          this.editForm.data.menu[item].disabled = false\n        }\n      }\n      let deleteBtnList = Array.from(document.querySelectorAll('.menu .el-upload-list__item-delete'))\n      deleteBtnList.forEach(element => {\n        element.style.display = 'inline-block'\n      })\n      this.countAuditWait = false\n    },\n    cancel () {\n      let deleteBtnList = Array.from(document.querySelectorAll('.menu .el-upload-list__item-delete'))\n      deleteBtnList.forEach(element => {\n        element.style.display = 'none'\n      })\n      this.countAuditWait = true\n      this.getBasisByID()\n    },\n    openDialog (data1) {\n      this.dialogImageUrl = data1\n      this.dialogVisible = true\n    },\n    submitMenu (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let menu = {\n            'news': {\n              'isuse': this.editForm.menulist.news.isuse,\n              'name': this.editForm.menulist.news.name,\n              'icon': this.editForm.menulist.news.icon,\n              'icon_select': this.editForm.menulist.news.icon_select\n            },\n            'onDemand': {\n              'isuse': this.editForm.menulist.onDemand.isuse,\n              'name': this.editForm.menulist.onDemand.name,\n              'icon': this.editForm.menulist.onDemand.icon,\n              'icon_select': this.editForm.menulist.onDemand.icon_select\n            },\n            'liveBroadcast': {\n              'isuse': this.editForm.menulist.liveBroadcast.isuse,\n              'name': this.editForm.menulist.liveBroadcast.name,\n              'icon': this.editForm.menulist.liveBroadcast.icon,\n              'icon_select': this.editForm.menulist.liveBroadcast.icon_select\n            },\n            'service': {\n              'isuse': this.editForm.menulist.service.isuse,\n              'name': this.editForm.menulist.service.name,\n              'icon': this.editForm.menulist.service.icon,\n              'icon_select': this.editForm.menulist.service.icon_select\n            },\n            'e_commerce': {\n              'isuse': this.editForm.menulist.e_commerce.isuse,\n              'name': this.editForm.menulist.e_commerce.name,\n              'icon': this.editForm.menulist.e_commerce.icon,\n              'icon_select': this.editForm.menulist.e_commerce.icon_select\n            },\n            'interaction': {\n              'isuse': this.editForm.menulist.interaction.isuse,\n              'name': this.editForm.menulist.interaction.name,\n              'icon': this.editForm.menulist.interaction.icon,\n              'icon_select': this.editForm.menulist.interaction.icon_select\n            },\n            'personalCenter': {\n              'isuse': this.editForm.menulist.personalCenter.isuse,\n              'name': this.editForm.menulist.personalCenter.name,\n              'icon': this.editForm.menulist.personalCenter.icon,\n              'icon_select': this.editForm.menulist.personalCenter.icon_select\n            }\n          }\n          Actions.saveBasis({\n            'configuration': {\n              'updateConfiguration': 'menu',\n              'menu': menu\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              let deleteBtnList = Array.from(document.querySelectorAll('.menu .el-upload-list__item-delete'))\n              deleteBtnList.forEach(element => {\n                element.style.display = 'none'\n              })\n              this.getBasisByID()\n              this.countAuditWait = true\n              this.$notify({\n                title: '通知',\n                message: '更改成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    submitFrame (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.saveBasis({\n            'configuration': {\n              'updateConfiguration': 'frame',\n              'frame': {\n                'top_bg_url': this.frameList[0].url,\n                'center_bg_url': this.frameList[1].url,\n                'icon_select_url': this.frameList[2].url,\n                'search_icon': this.frameList[3].url,\n                'bg_logo_url': this.frameList[4].url,\n                'channel_select_color': this.editForm.channel_select_color\n              }\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              Actions.getBasisByID().then((res) => {\n                if (res.data.status) {\n                  let data = res.data.result\n                  this.$set(this.frameList[0], 'url', data.frame.top_bg_url)\n                  this.$set(this.frameList[1], 'url', data.frame.center_bg_url)\n                  this.$set(this.frameList[2], 'url', data.frame.icon_select_url)\n                  this.$set(this.frameList[3], 'url', data.frame.search_icon)\n                  this.$set(this.frameList[4], 'url', data.frame.bg_logo_url)\n                  this.editForm.channel_select_color = data.frame.channel_select_color\n                }\n              })\n              this.$notify({\n                title: '通知',\n                message: '更改成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    submitContent (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.saveBasis({\n            'configuration': {\n              'updateConfiguration': 'content',\n              'content': {\n                'special_icon_color': this.editForm.special_icon_color,\n                'top_icon_color': this.editForm.top_icon_color\n              }\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              Actions.getBasisByID().then((res) => {\n                if (res.data.status) {\n                  let data = res.data.result\n                  this.editForm.special_icon_color = data.content.special_icon_color\n                  this.editForm.top_icon_color = data.content.top_icon_color\n                }\n              })\n              this.$notify({\n                title: '通知',\n                message: '更改成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    submitLogin (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.saveBasis({\n            'configuration': {\n              'updateConfiguration': 'loginPage',\n              'loginPage': {\n                'login_bg_url': this.loginList[0].url,\n                'login_logo_url': this.loginList[1].url,\n                'login_btn_url': this.loginList[2].url,\n                'register_btn_url': this.loginList[3].url,\n                'username_icon': this.loginList[4].url,\n                'password_icon': this.loginList[5].url\n              }\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              Actions.getBasisByID().then((res) => {\n                if (res.data.status) {\n                  let data = res.data.result\n                  this.$set(this.loginList[0], 'url', data.loginPage.login_bg_url)\n                  this.$set(this.loginList[1], 'url', data.loginPage.login_logo_url)\n                  this.$set(this.loginList[2], 'url', data.loginPage.login_btn_url)\n                  this.$set(this.loginList[3], 'url', data.loginPage.register_btn_url)\n                  this.$set(this.loginList[4], 'url', data.loginPage.username_icon)\n                  this.$set(this.loginList[5], 'url', data.loginPage.password_icon)\n                }\n              })\n              this.$notify({\n                title: '通知',\n                message: '更改成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file, fileList) {\n      console.log(res)\n      if (res.status) {\n        let imageUrl = res.result\n        if (this.align === 'left') {\n          this.$set(this.uploadItem, 'icon', imageUrl)\n        } else {\n          debugger\n          this.$set(this.uploadItem, 'icon_select', imageUrl)\n        }\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        'image/jpeg': true,\n        'image/png': true,\n        'image/jpg': true\n      }\n      const isImage = file.type in imageObj\n      const isLt1M = file.size / 1024 / 1024 < 1\n      if (!isImage) {\n        this.$message.error('请上传一张图片!')\n      }\n      if (!isLt1M) {\n        this.$message.error('上传图片大小不能超过 1MB!')\n      }\n      return isImage && isLt1M\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .basis {\n    padding:0 28px 40px 28px;\n    overflow-x: hidden;\n  }\n  .basis .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 60px;\n    height: 60px;\n    line-height: 60px;\n    text-align: center;\n  }\n  .basis .save {\n    display: flex;\n    margin-left: 85%;\n  }\n  .basis .circle-title {\n    margin-left: 0;\n  }\n  .basis .menu {\n    padding:10px;\n    margin-top: 40px;\n    border:1px solid #DADEDF;\n    border-radius: 5px;\n  }\n  .basis .menu .menu-box {\n     display: flex;\n     align-items: center;\n     padding: 0 0 20px 40px;\n     flex-wrap: wrap;\n     margin-left: -130px;\n   }\n  .basis .menu .menu-box .box-left {\n    display: flex;\n    align-items: center;\n    padding: 0 0 20px 0;\n    margin-left: 130px;\n  }\n  .basis .frame {\n    padding:10px;\n    margin-top: 40px;\n    border:1px solid #DADEDF;\n    border-radius: 5px;\n  }\n  .basis .frame .frame-box {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    padding: 0 0 20px 40px;\n    margin-left: -260px;\n  }\n  .basis .frame .frame-box .box-left {\n    display: flex;\n    align-items: center;\n    padding: 0 0 20px 0;\n    margin-left: 260px;\n  }\n  .basis .frame .frame-box .box-left .framework-title {\n    color: #333;\n    font-size: 14px;\n  }\n  .frame-box .box-left .img-box {\n    margin-left: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .basis .content {\n    padding:10px;\n    margin-top: 40px;\n    border:1px solid #DADEDF;\n    border-radius: 5px;\n  }\n  .basis .content .content-box {\n    display: flex;\n    align-items: center;\n    padding: 0 0 20px 40px;\n  }\n  .menu-box .box-left .title {\n    width: 50px;\n  }\n  .basis .block {\n     display: block;\n   }\n  .basis .none {\n    display: none;\n  }\n  .menu-box .box-left .input-block {\n    display: block;\n    border: 1px solid #409EFF;\n    box-sizing: border-box;\n    border-radius: 2px;\n  }\n  .menu-box .box-left .input-none {\n    display: none;\n    border: none;\n  }\n  .menu-box .box-left .input {\n    width: 50px;\n  }\n  .menu-box .avatar-uploader {\n    width: 60px;\n    height: 60px;\n  }\n  .menu-box .box-left .img-box {\n    margin-right: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .menu-box .box1 .img-box {\n    margin-left: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .menu-box .img-box span {\n    color: black;\n    font-size: 14px;\n    margin-top: 8px;\n  }\n  .basis .edit {\n    display: flex;\n  }\n  .img-avatar {\n    width: 60px;\n    height: 60px;\n    display: block;\n  }\n</style>\n<style>\n  .basis .el-upload--picture-card {\n    width: 60px;\n    height: 60px;\n    line-height: 65px;\n  }\n  .basis .el-upload-list--picture-card .el-upload-list__item {\n    width: 60px;\n    height: 60px;\n  }\n  .basis .el-dialog__header {\n    padding: 0;\n  }\n  .basis .el-dialog__body {\n    padding: 30px;\n    height: 240px;\n    color: #606266;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .basis .el-dialog__body img {\n    width: 100%;\n    height: 100%;\n  }\n  .basis .el-dialog {\n    position: relative;\n    margin: 0 auto 60px;\n    width: 300px;\n    height: 300px;\n  }\n  .basis .el-dialog__headerbtn {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n  }\n  .basis .menu .menu-box .el-form-item__content {\n    margin-left: 0 !important;\n  }\n  .basis .frame .frame-box .el-form-item__content {\n    margin-left: 45px !important;\n  }\n  .basis .frame .frame-box .el-form-item__label {\n    width: 40px !important;\n  }\n  .basis .frame .frame-box .el-form-item {\n    margin-bottom: 0 !important;\n  }\n  .basis .el-checkbox__input.is-checked .el-checkbox__inner, .el-checkbox__input.is-indeterminate .el-checkbox__inner {\n    background-color: #694EFF;\n    border-color: #694EFF;\n  }\n  .basis .el-checkbox__input.is-checked+.el-checkbox__label {\n    color: #694EFF;\n  }\n  .basis .menu .el-upload-list--picture-card .el-upload-list__item-actions .el-upload-list__item-delete {\n    display: none;\n  }\n</style>\n"],sourceRoot:""}])},E20o:function(e,n,t){var a=t("AqR5");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("4740e569",a,!1,{})},FEou:function(e,n,t){var a=t("ziHb");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("eea19168",a,!1,{})},FKBe:function(e,n,t){var a=t("UHzj");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("7afcf1cc",a,!1,{})},GHGh:function(e,n,t){var a=t("z/+d");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("08bac906",a,!1,{})},GXEp:function(e,n){},GZnH:function(e,n,t){var a=t("lBbG");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5dfd114e",a,!1,{})},HZUi:function(e,n,t){var a=t("bPbJ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("70742585",a,!1,{})},Htun:function(e,n,t){var a=t("CPlN");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("28554c1a",a,!1,{})},"I/O8":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.search-form-container .btn-container .el-button{\n  padding: 12px 10px;\n}\n.search-form-container .btn-container .el-icon--right{\n  margin: 0;\n}\n.custom-dialog .el-dialog__header{\n  /*padding: 0;*/\n  border-bottom: 1px solid rgba(192,190,255,1);\n}\n.el-tooltip__popper{\n  max-width: 300px;\n}\n.live .el-form--inline .el-form-item__content {\n  width: 65%;\n}\n.live .search-form-container .el-form-item {\n  width: 22%;\n}\n.live .allow_comment {\n  background-color: #ffa507;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n}\n.live .allow_share {\n  background-color: #1883FF;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n}\n.live .allow_like {\n  background-color: #F00808;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n}\n.live .allow_collect {\n  background-color: #694EFF;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageLive/src/components/manageLive/liveList.vue"],names:[],mappings:";AA8kBA;EACA,mBAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,eAAA;EACA,6CAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;CACA",file:"liveList.vue",sourcesContent:['<template>\n  <div class="live">\n    <div>\n      <circle-title\n        title-name="直播管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="live"\n          class="demo-form-inline">\n          <el-form-item label="直播主题">\n            <el-input\n              v-model="live.live_name"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="live.state"\n              placeholder=""\n              @change="searchLive">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="0"\n                label="撤销"/>\n              <el-option\n                :value="1"\n                label="待播"/>\n              <el-option\n                :value="2"\n                label="直播中"/>\n              <el-option\n                :value="3"\n                label="已结束"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="live.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="live.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchLive"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            class="date-left">\n            <el-date-picker\n              :title="live.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="live.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchLive"/>\n          </el-form-item>\n          <el-form-item class="btn-container">\n            <el-button\n              type="primary"\n              @click="searchLive">\n              查询\n              <i class="el-icon-search el-icon--right"/>\n            </el-button>\n            <router-link to="/live/create">\n              <el-button type="primary">\n                添加直播\n                <i class="el-icon-plus el-icon--right"/>\n              </el-button>\n            </router-link>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="置顶状态"\n          align="center">\n          <template slot-scope="scope">\n            <el-tooltip\n              v-if="!scope.row.top"\n              class="item"\n              effect="dark"\n              content="点击置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;"\n                @click.native="setTop(scope.row)">\n                置顶\n              </el-tag>\n            </el-tooltip>\n            <el-tooltip\n              v-else\n              class="item"\n              effect="dark"\n              content="点击取消置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;color:#694eff"\n                @click.native="setUnTop(scope.row)">\n                取消置顶\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="操作"\n          align="center"\n          width="200">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                v-if="scope.row.state === 0"\n                class="manu delete-active"\n                @click="upManu(scope.row)">\n                上稿\n              </span>\n              <span\n                v-if="scope.row.state === 1"\n                class="manu delete-active"\n                @click="downManu(scope.row)">\n                撤稿\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="editLive(scope.row)">\n                编辑\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="deleteLive(scope.row)">\n                删除\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          fixed="right"\n          label="权限配置"\n          align="center"\n          width="115">85\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="评论"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_comment ? \'#ffa507\': \'#B5B8D9\'}"\n                class="allow_comment"\n                @click="handleComment(scope.row)"\n              >\n                <i\n                  style="color: white"\n                  class="iconfont icon-manu-comment"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="分享"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_share ? \'#1883FF\': \'#B5B8D9\'}"\n                class="allow_share"\n                @click="handleShare(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-share"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="点赞"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_like ? \'#F00808\': \'#B5B8D9\'}"\n                class="allow_like"\n                @click="handlePraise(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-praise"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="收藏"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_collect ? \'#694EFF\': \'#B5B8D9\'}"\n                class="allow_collect"\n                @click="handleCollect(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-collect"/>\n              </div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/liveApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      live: {\n        live_name: \'\',\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      channelTypeList: [], // 所属频道列表\n      specialList: [],\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'live_name\',\n          label: \'主题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'创建日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'live_head_url\',\n          label: \'导视图\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'expiry_date_end\',\n          label: \'直播周期\',\n          width: 200,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](row.expiry_date_start, \'yyyy-MM-dd hh:mm\') + \'至\' + this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'live_url\',\n          label: \'默认视频链接\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>{cellValue}</a>\n          }\n        },\n        {\n          prop: \'showState\',\n          label: \'状态\',\n          width: \'100\'\n        }\n      ],\n      tableData: [],\n      comment: false,\n      share: false,\n      praise: false,\n      collect: false,\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false\n    }\n  },  \n  watch: {\n    \'live.live_name\' () {\n      this.searchLive()\n    }\n  },  \n  mounted () {\n    this.getLiveList()\n\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetLiveOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getLiveList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/live/create\') {\n      this.resetLiveOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    /** 获取稿件列表 **/\n    getLiveList () {\n      let timeStart = this.live.startDate !== null ? new Date(this.live.startDate).getTime() : null\n      let timeEnd = this.live.endDate !== null ? new Date(this.live.endDate).getTime() : null\n      Actions.getLiveList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'live_name\': this.live.live_name,\n        \'state\': this.live.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchLive()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getLiveList()\n    },\n    /** 上稿 **/\n    upManu (row) {\n      this.updateLive(row.liveid, \'state\', 1)\n    },\n    /** 撤稿 **/\n    downManu (row) {\n      this.updateLive(row.liveid, \'state\', 0)\n    },\n    editLive (row) {\n      if (row.state === 1) {\n        this.$message({\n          type: \'error\',\n          message: \'不可编辑已上稿的直播!\'\n        })\n      } else {\n        sessionStorage.setItem(\'liveid\', row.liveid)\n        this.$router.push({path: \'/live/edit\'})\n      }\n    },\n    /** 评论权限 **/\n    handleComment (row) {\n      if (row.state !== 1) {\n        if (row.allow_comment) {\n          this.updateLive(row.liveid, \'allow_comment\', false)\n        } else {\n          this.updateLive(row.liveid, \'allow_comment\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'上稿的直播不可操作评论权限!\'\n        })\n      }\n    },\n    /** 分享权限 **/\n    handleShare (row) {\n      if (row.state !== 1) {\n        if (row.allow_share) {\n          this.updateLive(row.liveid, \'allow_share\', false)\n        } else {\n          this.updateLive(row.liveid, \'allow_share\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'上稿的直播不可操作分享权限!\'\n        })\n      }\n    },\n    /** 点赞权限 **/\n    handlePraise (row) {\n      if (row.state !== 1) {\n        if (row.allow_like) {\n          this.updateLive(row.liveid, \'allow_like\', false)\n        } else {\n          this.updateLive(row.liveid, \'allow_like\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'上稿的直播不可操作点赞权限!\'\n        })\n      }\n    },\n    /** 收藏权限 **/\n    handleCollect (row) {\n      if (row.state !== 1) {\n        if (row.allow_collect) {\n          this.updateLive(row.liveid, \'allow_collect\', false)\n        } else {\n          this.updateLive(row.liveid, \'allow_collect\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'上稿的直播不可操作收藏权限!\'\n        })\n      }\n    },\n    /** 取消置顶 **/\n    setTop (row) {\n      this.updateLive(row.liveid, \'top\', true)\n    },\n    /** 取消置顶 **/\n    setUnTop (row) {\n      this.updateLive(row.liveid, \'top\', false)\n    },\n    /** 删除直播 **/\n    deleteLive (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.live_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteLive({\n            \'liveBroadcast\': {\n              \'liveid\': row.liveid\n            }\n          }).then((res) => {\n            if (res.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.searchLive()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'不可删除已上稿的直播!\'\n        })\n      }\n    },\n    /**\n       * 直播操作的公共接口\n       * @param articleid 直播ID\n       * @param key 更新字段名\n       * @param value 值\n       */\n    updateLive (liveid, key, value) {\n      Actions.updateState({\n        \'liveBroadcast\': {\n          \'liveid\': liveid,\n          [key]: value\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'操作成功!\'\n          })\n          this.searchLive()\n        }\n      })\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = \'\'\n    },\n    /** 搜索稿件 **/\n    searchLive () {\n      this.$options.filters[\'swapTime\'](this.live)\n      let timeStart = this.live.startDate !== null ? new Date(this.live.startDate).getTime() : null\n      let timeEnd = this.live.endDate !== null ? new Date(this.live.endDate).getTime() : null\n      Actions.getLiveList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'live_name\': this.live.live_name,\n        \'state\': this.live.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n\n    resetLiveOptions () {\n      this.live = {\n        live_name: \'\',\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      }\n      this.pageNo = 1\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .manu{\n    display: inline-block;\n    width: 30px;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n  .date-left{\n    margin-left: 28px;\n  }\n  .pagination {\n    display: -webkit-box;\n    -webkit-box-pack: end;\n  }\n  .btn-container {\n    width: 400px !important;\n    left: 68px;\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n  .custom-dialog .el-dialog__header{\n    /*padding: 0;*/\n    border-bottom: 1px solid rgba(192,190,255,1);\n  }\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .live .el-form--inline .el-form-item__content {\n    width: 65%;\n  }\n  .live .search-form-container .el-form-item {\n    width: 22%;\n  }\n  .live .allow_comment {\n    background-color: #ffa507;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .live .allow_share {\n    background-color: #1883FF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .live .allow_like {\n    background-color: #F00808;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .live .allow_collect {\n    background-color: #694EFF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n</style>\n'],sourceRoot:""}])},I4nB:function(e,n){},IUWy:function(e,n,t){var a=t("lnrM");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("996fda3c",a,!1,{})},IyeX:function(e,n,t){var a=t("T0sM");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("8401d396",a,!1,{})},JyD0:function(e,n,t){var a=t("kbx9");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("24dee360",a,!1,{})},JzUG:function(e,n,t){var a=t("h8PK");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("02478e6c",a,!1,{})},KAjp:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.event-list .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.event-list .search-form-container .el-form-item {\n  width: 25%;\n}\n.el-dialog__header{\n  padding: 13px 30px 13px;\n  border-bottom: 1px solid #C0BEFF;\n  background-color: #F7FAFF;\n}\n.el-dialog__title {\n  line-height: 17px;\n  font-size: 17px;\n  color: #303133;\n}\n.el-dialog__headerbtn {\n  top: 13px;\n}\n.el-dialog__body {\n  padding: 20px 0px 20px 0px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageEvent/src/components/manageEvent/eventList.vue"],names:[],mappings:";AAufA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,wBAAA;EACA,iCAAA;EACA,0BAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,2BAAA;CACA",file:"eventList.vue",sourcesContent:['<template>\n  <div class="event-list">\n    <div>\n      <circle-title\n        title-name="服务列表"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="eventForm"\n          class="demo-form-inline">\n          <el-form-item label="服务名称">\n            <el-input\n              v-model="eventForm.activity_name"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="类型"\n            class="search-left">\n            <el-select\n              v-model="eventForm.typeid"\n              clearable\n              placeholder=""\n              @clear="getActivityList"\n              @change="getActivityList">\n              <el-option\n                v-for="(item, index) in eventTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="eventForm.state"\n              placeholder=""\n              @change="getActivityList">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="1"\n                label="未开始"/>\n              <el-option\n                :value="2"\n                label="进行中"/>\n              <el-option\n                :value="3"\n                label="已结束"/>\n              <el-option\n                :value="0"\n                label="停用"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="eventForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="eventForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getActivityList"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            style="margin-left: -28px;">\n            <el-date-picker\n              :title="eventForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="eventForm.endDate"\n              format="yyyy-MM-dd HH:mm"\n              type="datetime"\n              placeholder="选择日期"\n              @change="getActivityList"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 68px"\n            @click="getActivityList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/event/create">\n            <el-button type="primary">\n              服务新增\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="修改状态"\n              placement="top">\n              <el-button\n                type="text"\n                size="small"\n                icon="el-icon-remove-outline"\n                @click="changeState(scope.row)"/>\n            </el-tooltip>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n      <el-dialog\n        :visible.sync="dialogVisible"\n        custom-class="custom-dialog"\n        title="服务编辑"\n        width="70%"\n        @close="closeDialog">\n        <div\n          :is="componentName"\n          :setting-activity-id="settingActivityId"\n          @closeDialog="closeDialog"/>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport EventEdit from \'./eventEdit\'\nimport * as Actions from \'@/api/eventApi\'\nexport default {\n  components: {\n    CircleTitle,\n    EventEdit\n  },\n  data () {\n    return {\n      eventForm: {\n        activity_name: \'\',\n        type_name: \'\',\n        showState: \'\',\n        sort: \'1\',\n        endDate: \'\',\n        startDate: \'\'\n      },\n      clickCellIndex: -1,\n      batchProcess: 0,\n      tableHeader: [\n        {\n          prop: \'activity_name\',\n          label: \'服务名称\'\n        },\n        {\n          prop: \'type_name\',\n          label: \'类型\'\n        },\n        {\n          prop: \'head_img\',\n          label: \'图标\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'app_url\',\n          label: \'前端链接\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>{cellValue}</a>\n          }\n        },\n        {\n          prop: \'manager_url\',\n          label: \'后端链接\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue !== \'\') {\n              const token = sessionStorage.getItem(\'token\')\n              const compid = sessionStorage.getItem(\'compid\')\n              const usercode = sessionStorage.getItem(\'usercode\')\n              let url = `${cellValue}?token=${token}&compid=${compid}&usercode=${usercode}`\n              return <a href={url} target=\'_blank\'>{url}</a>\n            } else {\n              return \'无\'\n            }\n          }\n        },\n        {\n          prop: \'expiry_date_start\',\n          label: \'有效期\',\n          width: 200,\n          formatter: (row, column, cellValue, index) => {\n            let start = this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n            let end = this.$options.filters[\'FormatDate\'](row.expiry_date_end, \'yyyy-MM-dd hh:mm\')\n            return start + \'至\' + end\n          }\n        },\n        {\n          prop: \'createtime\',\n          label: \'创建日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'showState\',\n          label: \'状态\'\n        },\n        {\n          prop: \'sort\',\n          label: \'优先级\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' id="input" class=\'self-sort\' value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      eventTypeList: [],\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false,\n      settingActivityId: \'0\',\n      componentName: \'\',\n      selectActivityId: \'\'\n    }\n  },\n  watch: {\n    \'eventForm.activity_name\' (val) {\n      this.getActivityList()\n    }\n  },\n  mounted () {\n    /** 分页获取服务列表 **/\n    this.getActivityList()\n    /** 获取服务类型 **/\n    this.getActivityType()\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetLiveOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getActivityList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/event/create\' || to.path === \'/event/list\') {\n      this.resetLiveOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetLiveOptions () {\n      this.eventForm = {\n        activity_name: \'\',\n        type_name: \'\',\n        head_img: \'\',\n        app_url: \'\',\n        typeid: \'\',\n        showState: \'\',\n        state: \'\',\n        sort: \'1\',\n        endDate: \'\',\n        startDate: \'\'\n      }\n      this.pageNo = 1\n      this.getActivityList()\n    },\n    getActivityList () {\n      this.$options.filters[\'swapTime\'](this.eventForm)\n      let timeStart = this.eventForm.startDate !== null ? new Date(this.eventForm.startDate).getTime() : null\n      let timeEnd = this.eventForm.endDate !== null ? new Date(this.eventForm.endDate).getTime() : null\n      Actions.getActivityList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'activity_name\': this.eventForm.activity_name,\n        \'typeid\': this.eventForm.typeid,\n        \'state\': this.eventForm.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getActivityList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getActivityList()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      if (event.target.classList.contains(\'sort-container\')) {\n        if (row.state !== 1) {\n          let id = event.target.dataset.id\n          if (id) {\n            this.clickCellIndex = parseInt(id)\n          }\n          this.$nextTick(() => {\n            let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n            inputEles.forEach(element => {\n              if (element) {\n                this.selectActivityId = row.activityid\n                element.focus()\n                element.onkeyup = (e) => {\n                  if (element.value) {\n                    this.sortValue = parseInt(element.value)\n                  }\n                }\n              }\n            })\n          })\n        } else {\n          this.$message({\n            type: \'error\',\n            message: \'启用状态下不能排序!\'\n          })\n        }\n      }\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = \'\'\n      this.dialogVisible = false\n      this.getActivityList()\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row, column, cell, event) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectActivityId !== row.activityid) return false\n      /** 修改排序 **/\n      Actions.changeActivitySort({\n        \'activity\': {\n          \'activityid\': row.activityid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getActivityList()\n          this.sortValue = -1\n        }\n      })\n    },\n    /** 编辑时获取单元格数据 **/\n    handleEdit: function (row) {\n      if (row.state !== 1) {\n        this.dialogVisible = true\n        this.componentName = EventEdit\n        this.settingActivityId = row.activityid\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可编辑!\'\n        })\n      }\n    },\n    /** 修改状态 **/\n    changeState (row) {\n      let state = 0\n      if (row.state === 1) {\n        state = 0\n      } else if (row.state === 0) {\n        state = 1\n      }\n      Actions.changeActivityState({\n        \'activity\': {\n          \'activityid\': row.activityid,\n          \'state\': state\n        }\n      }).then((res) => {\n        if (res.status) {\n          if (state === 0) {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为停用\'\n            })\n          } else {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为启用\'\n            })\n          }\n          this.getActivityList()\n        }\n      })\n    },\n    /** 删除频道 **/\n    handleDelete (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.activity_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteActivity({\n            \'activity\': {\n              \'activityid\': row.activityid\n            }\n          }).then((res) => {\n            if (res.data.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getActivityList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可删除!\'\n        })\n      }\n    },\n    /** 获取服务类别 **/\n    getActivityType () {\n      Actions.getActivityType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.type_name\n            newItem.value = item.typeid\n            this.eventTypeList.push(newItem)\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style>\n  .event-list .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .event-list .search-form-container .el-form-item {\n    width: 25%;\n  }\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 0px 20px 0px;\n  }\n</style>\n'],sourceRoot:""}])},Kgt7:function(e,n,t){var a=t("Pyfs");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("4055b6e6",a,!1,{})},KyV3:function(e,n,t){var a=t("h1qQ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5e0b60b3",a,!1,{})},"LfT/":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-79c67e8e] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-79c67e8e]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageChannel/src/components/manageChannel/channelCreate.vue"],names:[],mappings:";AA2TA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"channelCreate.vue",sourcesContent:['<template>\n  <div class="channel create">\n    <circle-title\n      title-name="频道新增"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="createFrom"\n      :model="createFrom"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="频道名称"\n        prop="channel_name">\n        <el-input v-model.trim="createFrom.channel_name"/>\n      </el-form-item>\n      <el-form-item\n        label="父级频道"\n        prop="parent_channel_name">\n        <el-select\n          v-model="createFrom.parent_channelid"\n          filterable\n          placeholder=""\n          @change="disableIsFixed">\n          <el-option\n            v-for="(item, index) in parentChannelList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="归属类别"\n        prop="channel_type_name">\n        <el-select\n          v-model="createFrom.channel_typeid"\n          filterable\n          placeholder="">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="图标配置"\n        class="item">\n        <div class="icon-choose-container">\n          <div class="moren-icon">\n            <img\n              :src="createFrom.icon_url">\n          </div>\n          <el-button\n            type="primary"\n            @click="chooseIcon">选择图标</el-button>\n        </div>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="createFrom.state"\n          placeholder="请选择">\n          <el-option\n            :value="0"\n            label="停用"/>\n          <el-option\n            :value="1"\n            label="启用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="频道简述">\n        <el-input\n          v-model="createFrom.description"\n          type="textarea"/>\n      </el-form-item>\n      <el-form-item\n        label="是否固定"\n        prop="fixed">\n        <el-select\n          :disabled="fixedDisabled"\n          v-model="createFrom.fixed"\n          placeholder="请选择">\n          <el-option\n            :value="true"\n            label="是"/>\n          <el-option\n            :value="false"\n            label="否"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        class="sort"\n        prop="sort">\n        <el-input\n          v-model.number="createFrom.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'createFrom\')">提交</el-button>\n        <router-link to="/manageChannel/list">\n          <el-button>取消</el-button>\n        </router-link>\n      </el-form-item>\n    </el-form>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      title="图标选择"\n      width="40%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        @submit-icon="submitIcon"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport ChooseIcon from \'@/components/manageChannel/chooseIcon\'\nimport * as Actions from \'@/api/channelApi\'\nexport default {\n  components: {\n    CircleTitle,\n    ChooseIcon\n  },\n  data () {\n    let checkChannelNameLength = (rule, value, callback) => {\n      if (value.length > 10) {\n        return callback(new Error(\'频道名称长度不能超过10\'))\n      } else {\n        return callback()\n      }\n    }\n    return {\n      createFrom: {\n        channel_name: \'\',\n        parent_channel_name: \'\',\n        sort: \'\',\n        icon_url: \'/static/img/moren.jpg\',\n        channel_type_name: \'\',\n        state: 0,\n        description: \'\',\n        fixed: false,\n        parent_channelid: \'\',\n        channel_typeid: \'\'\n      },\n      rules: {\n        channel_name: [\n          { required: true, message: \'请输入频道名称\', trigger: \'blur\' },\n          { validator: checkChannelNameLength, trigger: \'change\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          { type: \'number\', message: \'排序必须为数字\' }\n        ]\n      },\n      channelTypeList: [],\n      parentChannelList: [\n        {\n          label: \'无\',\n          value: \'\'\n        }\n      ],\n      dialogVisible: false,\n      componentName: \'\',\n      fixedDisabled: false\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getChannelType()\n    this.getParentChannel()\n  },\n  methods: {\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.channelTypeList.forEach((item, index, arr) => {\n            if (item.value === this.createFrom.channel_typeid) {\n              this.createFrom.channel_type_name = item.label\n            }\n          })\n          this.parentChannelList.forEach((item, index, arr) => {\n            if (item.value === this.createFrom.parent_channelid) {\n              this.createFrom.parent_channel_name = item.label\n            }\n          })\n          Actions.addChannel({\n            \'channel\': {\n              \'parent_channelid\': this.createFrom.parent_channelid,\n              \'parent_channel_name\': this.createFrom.parent_channel_name,\n              \'channel_name\': this.createFrom.channel_name,\n              \'channel_typeid\': this.createFrom.channel_typeid,\n              \'channel_type_name\': this.createFrom.channel_type_name,\n              \'icon_url\': this.createFrom.icon_url,\n              \'state\': this.createFrom.state,\n              \'description\': this.createFrom.description,\n              \'fixed\': this.createFrom.fixed,\n              \'sort\': this.createFrom.sort\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/manageChannel/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'添加成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.createFrom.icon_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    /** 获取频道类别 **/\n    getChannelType () {\n      Actions.getChannelType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (index === 0) {\n              /** 默认选择一个类型 **/\n              this.createFrom.channel_typeid = item.channel_typeid\n            }\n            let newItem = {}\n            newItem.label = item.channel_type_name\n            newItem.value = item.channel_typeid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取父频道 **/\n    getParentChannel () {\n      Actions.listUsableParentChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          console.log(result)\n          result.forEach((item, index, arr) => {\n            if (this.channelid !== item.channelid) {\n              let newItem = {}\n              newItem.label = item.channel_name\n              newItem.value = item.channelid\n              this.parentChannelList.push(newItem)\n            }\n          })\n        }\n      })\n    },\n    /** 选取图标 **/\n    chooseIcon () {\n      this.dialogVisible = true\n      this.componentName = \'ChooseIcon\'\n    },\n    closeDialog () {\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    /** 确定图标 **/\n    submitIcon (iconUrl) {\n      this.createFrom.icon_url = iconUrl\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    /** 禁用是否固定按钮, 并让其默认为否 **/\n    disableIsFixed () {\n      if (this.createFrom.parent_channelid) {\n        this.createFrom.fixed = false\n        this.fixedDisabled = true\n      } else {\n        this.fixedDisabled = false\n      }\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},Mcq6:function(e,n,t){var a=t("/RYo");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("342921e4",a,!1,{})},NBUn:function(e,n,t){var a=t("AuPM");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("140852b3",a,!1,{})},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={};t.d(a,"FormatDate",function(){return mc}),t.d(a,"getAMonthAgo",function(){return dc}),t.d(a,"swapTime",function(){return pc});var i=t("fZjL"),l=t.n(i),o=(t("/I4U"),t("+BTi"),t("yg6k")),s=t.n(o),r=(t("cwe7"),t("2X9z")),c=t.n(r),m=(t("oq7i"),t("+TD8")),d=t.n(m),p=(t("wlbC"),t("1ZIF")),u=t.n(p),h=(t("bRYy"),t("eBGF")),g=t.n(h),A=(t("Yq4J"),t("qubY")),f=t.n(A),b=(t("jAzQ"),t("wOhx")),v=t.n(b),y=(t("BNJR"),t("fDPO")),C=t.n(y),_=(t("8jhb"),t("RDoK")),x=t.n(_),w=(t("TFIm"),t("s3ue")),F=t.n(w),k=(t("dmRH"),t("EKTV")),S=t.n(k),E=(t("WzZF"),t("wxbk")),D=t.n(E),L=(t("5ObC"),t("4ZDJ")),B=t.n(L),M=(t("isgN"),t("tLa+")),I=t.n(M),T=(t("ylrw"),t("6oiW")),$=t.n(T),z=(t("Dte2"),t("q4le")),U=t.n(z),N=(t("isE6"),t("LR6y")),R=t.n(N),V=(t("cDSy"),t("e0Bm")),j=t.n(V),P=(t("I4nB"),t("STLj")),H=t.n(P),Q=(t("GXEp"),t("mtrD")),W=t.n(Q),O=(t("X+ky"),t("HJMx")),q=t.n(O),Y=(t("+Rdb"),t("Mezo")),Z=t.n(Y),G=(t("qunJ"),t("vqwl")),J=t.n(G),X=(t("RWjY"),t("aMwW")),K=t.n(X),ee=(t("s967"),t("855/")),ne=t.n(ee),te=(t("wJKS"),t("orbS")),ae=t.n(te),ie=t("7+uW"),le=t("NYxO"),oe={modules:{live:{state:{},mutations:{},actions:{},getters:{}}}},se={data:function(){return{userName:sessionStorage.getItem("username")}},created:function(){var e=this;this.$root.eventHub.$on("params-ready",function(){e.userName=sessionStorage.getItem("username")||""})}},re=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"top-header"},[n("img",{staticClass:"header-logo",attrs:{src:t("vVZ4"),alt:""}}),this._v(" "),n("div",{staticClass:"header-info"},[n("img",{attrs:{src:t("UEw4"),alt:""}}),this._v(" "),n("span",{staticStyle:{padding:"0 10px"}},[this._v(this._s(this.userName))])])])};re._withStripped=!0;var ce={render:re,staticRenderFns:[]},me=ce;var de=!1;var pe=t("VU/8")(se,me,!1,function(e){de||t("38aJ")},"data-v-7fa6dba4",null);pe.options.__file="src/components/commons/layoutHeader.vue";var ue=pe.exports,he=t("//Fk"),ge=t.n(he),Ae="https://g.t.dacube.cn/APP-MANAGE-SV-4J/",fe=t("mtWM").create({baseURL:Ae,withCredentials:!1,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}});fe.interceptors.request.use(function(e){if("post"===e.method){var n=e.data||{};n.token=sessionStorage.getItem("token")||"",n.compid=sessionStorage.getItem("compid")||"",n.usercode=sessionStorage.getItem("usercode")||"",e.data=n}return e},function(e){return ge.a.reject(e)}),fe.interceptors.response.use(function(e){return e.data.status?e:((new ie.default).$notify({title:"错误",type:"error",message:e.data.errormsg}),!1)},function(e){var n;return(n=e)&&n.response&&(401!==n.response.status&&403!==n.response.status||(sessionStorage.clear(),window.location.href="https://center.t.dacube.cn/")),ge.a.reject(e)});var be=function(e,n){return fe.post(e,n)},ve=function(e,n){return fe.get(e,{params:n})},ye=function(e){for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];fe.defaults.headers.common[n]=t}},Ce=Ae;function _e(){return Ce+"manager/Resources/upload/images"}function xe(e){return be("manager/Special/listUsableChannel",e)}function we(e){return be("manager/Special/listUsableSpecial",e)}var Fe={data:function(){return{dataList:[],defaultProps:{children:"children",label:"label"}}},created:function(){var e=this;this.$root.eventHub.$on("params-ready",function(){e.getMenuList()});var n=sessionStorage.getItem("token");n&&(ye({token:n}),this.getMenuList())},beforeDestroy:function(){this.$root.eventHub.$off("params-ready")},methods:{handleNodeClick:function(e,n,t){this.$router.push(e.path)},getMenuList:function(){var e,n=this;be("manager/OrgUsers/userTreePermission",e).then(function(e){e.data&&e.data.status&&(n.dataList=e.data.result||[])}).catch(function(){n.dataList=[]})}}},ke=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"tree-wrapper"},[t("el-tree",{attrs:{data:e.dataList,props:e.defaultProps,accordion:""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(n){n.node;var a=n.data;return t("span",{staticClass:"custom-tree-node"},[t("router-link",{attrs:{to:a.path}},[t("i",{class:["iconfont custom-tree-icon",a.icon]}),e._v(" "),t("span",[e._v(e._s(a.label))])])],1)}}])})],1)};ke._withStripped=!0;var Se={render:ke,staticRenderFns:[]},Ee=Se;var De=!1;var Le=t("VU/8")(Fe,Ee,!1,function(e){De||t("ekcM")},"data-v-3a0a8e1e",null);Le.options.__file="src/components/commons/routerTree.vue";var Be={components:{LayoutHeader:ue,RouterTree:Le.exports}},Me=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"lo-container"},[n("div",{staticClass:"lo-header"},[n("layout-header")],1),this._v(" "),n("div",{staticClass:"lo-content"},[n("div",{staticClass:"lo-tree"},[n("router-tree")],1),this._v(" "),n("div",{staticClass:"lo-main"},[n("router-view")],1)])])};Me._withStripped=!0;var Ie={render:Me,staticRenderFns:[]},Te=Ie;var $e=!1;var ze=t("VU/8")(Be,Te,!1,function(e){$e||t("Mcq6")},"data-v-8a54e678",null);ze.options.__file="src/views/layout.vue";var Ue=ze.exports,Ne=function(e,n){n||(n=location.href),e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return null==t?null:t[1]},Re=function(e,n,t){var a=(new Date).getTime(),i=t[0].getTime(),l=t[1].getTime();i<a&&e.$set(n,0,new Date),l<a&&e.$set(n,1,new Date)},Ve={name:"App",components:{Layout:Ue},created:function(){this.getUrlToken()},methods:{getUrlToken:function(){if(!sessionStorage.getItem("token")){var e=window.location.href,n=Ne("token",e);n&&(sessionStorage.clear(),sessionStorage.setItem("token",n),ye({token:n}),this.getUserInfo())}},getUserInfo:function(){var e,n=this;ve("manager/OrgUsers/userinfo",e).then(function(e){var t=e.data?e.data.result:{};for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];sessionStorage.setItem(a,i)}n.$root.eventHub.$emit("params-ready")}).catch(function(e){console.error(e)})}}},je=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("layout")],1)};je._withStripped=!0;var Pe={render:je,staticRenderFns:[]},He=Pe;var Qe=!1;var We=t("VU/8")(Ve,He,!1,function(e){Qe||t("GHGh")},null,null);We.options.__file="src/App.vue";var Oe=We.exports,qe=t("/ocq"),Ye={name:"CircleTitle",props:{titleName:{type:String,default:"管理"}}},Ze=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"cicle-container"},[n("span",{staticClass:"border-circle"}),this._v(" "),n("span",{staticClass:"title-name"},[this._v("\n    "+this._s(this.titleName)+"\n  ")])])};Ze._withStripped=!0;var Ge={render:Ze,staticRenderFns:[]},Je=Ge;var Xe=!1;var Ke=t("VU/8")(Ye,Je,!1,function(e){Xe||t("WZzA")},"data-v-55d58161",null);Ke.options.__file="src/components/commons/circleTitle.vue";var en=Ke.exports,nn={props:{showClock:{type:Boolean,default:function(){return!1}},iconBg:{type:String,default:function(){return"#FD6F58"}},iconName:{type:String,default:function(){return""}},count:{type:[String,Number],default:function(){return 0}},label:{type:String,default:function(){return""}}}},tn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"count-item-wrapper"},[t("div",{staticClass:"item-icon",style:{"background-color":e.iconBg}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.showClock,expression:"showClock"}],staticClass:"iconfont icon-clock clock"}),e._v(" "),t("i",{class:["iconfont custom-icon",e.iconName]})]),e._v(" "),t("div",{staticClass:"item-num"},[t("p",{staticClass:"count-num"},[e._v(e._s(e.count||0))]),e._v(" "),t("p",{staticClass:"count-text"},[e._v(e._s(e.label))])])])};tn._withStripped=!0;var an={render:tn,staticRenderFns:[]},ln=an;var on=!1;var sn=t("VU/8")(nn,ln,!1,function(e){on||t("o19p")},"data-v-667dd1fb",null);sn.options.__file="src/components/commons/countItem.vue";var rn=sn.exports,cn={props:{data:{type:Array,default:function(){return[]}}},data:function(){var e=this;return{tableHeader:[{prop:"logid",label:"编号"},{prop:"username",label:"操作者"},{prop:"createtime",label:"操作日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"ipAddress",label:"IP地址"},{prop:"operationContent",label:"操作记录"}]}}},mn=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"table-list"},[n("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:this.data,stripe:"","min-height":"400"}},this._l(this.tableHeader,function(e,t){return n("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),1)],1)};mn._withStripped=!0;var dn={render:mn,staticRenderFns:[]},pn=dn;var un=!1;var hn=t("VU/8")(cn,pn,!1,function(e){un||t("rR//")},"data-v-b0610728",null);hn.options.__file="src/components/home/tableList.vue";var gn={components:{CircleTitle:en,CountItem:rn,TableList:hn.exports},data:function(){return{countResult:{},logList:[],options:{pageNo:1,pageSize:10},total:0}},created:function(){var e=this;this.$root.eventHub.$on("params-ready",function(){e.getCount(),e.getTodayLog()})},beforeDestroy:function(){this.$root.eventHub.$off("params-ready")},methods:{getCount:function(){var e=this;be("manager/HomePage/statistics").then(function(n){n.data&&n.data.status?e.countResult=n.data.result||{}:e.countResult={}})},getTodayLog:function(){var e=this;be("manager/HomePage/pageTodayOperationLog",this.options).then(function(n){if(n.data&&n.data.status){var t=n.data.result;e.logList=t.list||[],e.total=t.total||0}else e.logList=[],e.total=0})},handleSizeChange:function(e){this.options.pageNo=1,this.options.pageSize=e,this.getTodayLog()},handleCurrentChange:function(e){this.options.pageNo=e,this.getTodayLog()}}},An=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"home-wrapper"},[t("div",{staticClass:"home-todos inner-block"},[t("circle-title",{attrs:{"title-name":"待处理事物"}}),e._v(" "),t("div",{staticClass:"items-wrapper"},[t("count-item",{attrs:{count:e.countResult.countToBeAllocatedArticle,"icon-bg":"#FD6F58","show-clock":"","icon-name":"icon-paper2",label:"待分配稿件数"}}),e._v(" "),t("count-item",{attrs:{count:e.countResult.countToBeAllocatedVideo,"icon-bg":"#77E6E5","show-clock":"","icon-name":"icon-paper3",label:"待分配点播稿件数"}}),e._v(" "),t("count-item",{attrs:{count:e.countResult.countToBeAuditedComment,"show-clock":"","icon-bg":"#FFCE5B","icon-name":"icon-manu-comment",label:"待审批评论数"}})],1)],1),e._v(" "),t("div",{staticClass:"home-count inner-block"},[t("circle-title",{attrs:{"title-name":"统计数据"}}),e._v(" "),t("div",{staticClass:"items-line"},[t("div",{staticClass:"items-wrapper"},[t("count-item",{attrs:{count:e.countResult.countOnlineArticle,"icon-bg":"#FFCE5B","icon-name":"icon-menu",label:"在线资讯稿件数"}}),e._v(" "),t("count-item",{attrs:{count:e.countResult.countOnlineVideo,"icon-bg":"#77E6E5","icon-name":"icon-live",label:"在线点播稿件数"}}),e._v(" "),t("count-item",{attrs:{count:e.countResult.countTodayOnlineArticle,"icon-bg":"#5F9DF9","icon-name":"icon-live2",label:"今日新增点播稿件数"}})],1)]),e._v(" "),t("div",{staticClass:"items-line2"},[t("div",{staticClass:"items-wrapper"},[t("count-item",{attrs:{count:e.countResult.countToBeAllocatedArticle,"icon-bg":"#7968FF","icon-name":"icon-paper",label:"今日新增资讯稿件数"}}),e._v(" "),t("count-item",{attrs:{count:e.countResult.countAllRegister,"icon-bg":"#FD6F58","icon-name":"icon-users2",label:"总用户数"}}),e._v(" "),t("count-item",{attrs:{count:e.countResult.countTodayRegister,"icon-bg":"#FFCE5B","icon-name":"icon-user2",label:"今日新增用户数"}})],1)])],1),e._v(" "),t("div",{staticClass:"home-logs"},[t("circle-title"),e._v(" "),t("table-list",{attrs:{data:e.logList}}),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"current-page":e.options.pageNo,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};An._withStripped=!0;var fn={render:An,staticRenderFns:[]},bn=fn;var vn=!1;var yn=t("VU/8")(gn,bn,!1,function(e){vn||t("iZRR")},"data-v-7eb2bc79",null);yn.options.__file="src/views/home.vue";var Cn=yn.exports,_n=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"mc-container"},[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():n("router-view")],1)};_n._withStripped=!0;var xn={render:_n,staticRenderFns:[]},wn=xn;var Fn=t("VU/8")(null,wn,!1,null,null,null);Fn.options.__file="src/views/manageChannel.vue";var kn=Fn.exports,Sn=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"slide-wrapper"},[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():n("router-view")],1)};Sn._withStripped=!0;var En={render:Sn,staticRenderFns:[]},Dn=En;var Ln=t("VU/8")(null,Dn,!1,null,null,null);Ln.options.__file="src/views/manageSlide.vue";var Bn=Ln.exports,Mn=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"mc-container"},[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():n("router-view")],1)};Mn._withStripped=!0;var In={render:Mn,staticRenderFns:[]},Tn=In;var $n=t("VU/8")(null,Tn,!1,null,null,null);$n.options.__file="src/views/manageTopic.vue";var zn=$n.exports,Un=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"slide-wrapper"},[n("router-view")],1)};Un._withStripped=!0;var Nn={render:Un,staticRenderFns:[]},Rn=Nn;var Vn=t("VU/8")(null,Rn,!1,null,null,null);Vn.options.__file="src/views/manageManuscript.vue";var jn=Vn.exports,Pn=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"mc-container"},[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():n("router-view")],1)};Pn._withStripped=!0;var Hn={render:Pn,staticRenderFns:[]},Qn=Hn;var Wn=t("VU/8")(null,Qn,!1,null,null,null);Wn.options.__file="src/views/manageStartpage.vue";var On=Wn.exports,qn=function(){var e=this.$createElement,n=this._self._c||e;return n("div",[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():n("router-view")],1)};qn._withStripped=!0;var Yn={render:qn,staticRenderFns:[]},Zn=Yn;var Gn=t("VU/8")(null,Zn,!1,null,null,null);Gn.options.__file="src/views/manageSubLive.vue";var Jn=Gn.exports,Xn=function(){var e=this.$createElement,n=this._self._c||e;return n("div",[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():n("router-view")],1)};Xn._withStripped=!0;var Kn={render:Xn,staticRenderFns:[]},et=Kn;var nt=t("VU/8")(null,et,!1,null,null,null);nt.options.__file="src/views/manageLive.vue";var tt=nt.exports,at=function(){var e=this.$createElement;return(this._self._c||e)("router-view")};at._withStripped=!0;var it={render:at,staticRenderFns:[]},lt=it;var ot=t("VU/8")(null,lt,!1,null,null,null);ot.options.__file="src/views/manageEvent.vue";var st=ot.exports,rt=function(){var e=this.$createElement;return(this._self._c||e)("router-view")};rt._withStripped=!0;var ct={render:rt,staticRenderFns:[]},mt=ct;var dt=t("VU/8")(null,mt,!1,null,null,null);dt.options.__file="src/views/manageUser.vue";var pt=dt.exports,ut=function(){var e=this.$createElement;return(this._self._c||e)("router-view")};ut._withStripped=!0;var ht={render:ut,staticRenderFns:[]},gt=ht;var At=t("VU/8")(null,gt,!1,null,null,null);At.options.__file="src/views/manageComment.vue";var ft=At.exports,bt=function(){var e=this.$createElement;return(this._self._c||e)("router-view")};bt._withStripped=!0;var vt={render:bt,staticRenderFns:[]},yt=vt;var Ct=t("VU/8")(null,yt,!1,null,null,null);Ct.options.__file="src/views/manageSystemUser.vue";var _t=Ct.exports,xt=function(){var e=this.$createElement;return(this._self._c||e)("router-view")};xt._withStripped=!0;var wt={render:xt,staticRenderFns:[]},Ft=wt;var kt=t("VU/8")(null,Ft,!1,null,null,null);kt.options.__file="src/views/manageRole.vue";var St=kt.exports,Et=function(){var e=this.$createElement;return(this._self._c||e)("router-view")};Et._withStripped=!0;var Dt={render:Et,staticRenderFns:[]},Lt=Dt;var Bt=t("VU/8")(null,Lt,!1,null,null,null);Bt.options.__file="src/views/manageLog.vue";var Mt=Bt.exports,It=function(){var e=this.$createElement;return(this._self._c||e)("router-view")};It._withStripped=!0;var Tt={render:It,staticRenderFns:[]},$t=Tt;var zt=t("VU/8")(null,$t,!1,null,null,null);zt.options.__file="src/views/manageBasis.vue";var Ut=zt.exports;function Nt(e){return be("manager/Channel/listChannelType",e)}function Rt(e){return be("manager/Channel/listUsableParentChannel",e)}function Vt(e){return be("manager/Channel/listChannelIcon",e)}var jt={components:{CircleTitle:en},data:function(){var e=this,n=this.$createElement;return{channelForm:{channel_name:"",channel_typeid:"",state:"",sort:"1",startDate:"",endDate:"",parent_channelid:""},clickCellIndex:-1,tableHeader:[{prop:"channel_name",label:"频道名"},{prop:"parent_channel_name",label:"父级频道",formatter:function(e,n,t,a){return t||"无"}},{prop:"channel_type_name",label:"分类"},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"icon_url",label:"图标默认",formatter:function(e,t,a,i){return n("img",{class:"topic-table-pic",attrs:{src:a}})}},{prop:"description",label:"频道描述",width:"100"},{prop:"state",label:"状态",formatter:function(e,n,t,a){return 1===parseInt(t)?"启用":"停用"}},{prop:"fixed",label:"位置固定",formatter:function(e,n,t,a){return t?"固定":"不固定"}},{prop:"sort",label:"优先级",formatter:function(t,a,i,l){return l===e.clickCellIndex?n("input",{attrs:{type:"text",id:"input",autofocus:"autofocus"},class:"self-sort",domProps:{value:i}}):n("span",{class:"sort-container",attrs:{"data-id":l}},[i])}}],tableData:[],channelTypeList:[],sortValue:-1,pageNo:1,pageSize:10,total:0,parentChannelList:[],selectChannelId:""}},watch:{"channelForm.channel_name":function(e){this.searchChannel()}},mounted:function(){var e=this;this.getChannelList(),this.getChannelType(),this.getParentChannel(),this.$root.eventHub.$on("reset-options",function(){e.resetOptions()})},activated:function(){var e=this.$route.meta;e.hasOwnProperty("refresh")&&e.refresh&&(this.getChannelList(),delete this.$route.meta.refresh)},beforeRouteLeave:function(e,n,t){"/manageChannel/create"===e.path&&this.resetOptions(),t()},beforeDestroy:function(){this.$root.eventHub.$off("reset-options")},methods:{resetOptions:function(){this.channelForm={channel_name:"",channel_typeid:"",state:"",sort:"1",startDate:"",endDate:"",parent_channelid:""},this.pageNo=1,this.clickCellIndex=-1,this.sortValue=-1,this.getChannelList()},getChannelList:function(){var e,n=this,t=null!==this.channelForm.startDate?new Date(this.channelForm.startDate).getTime():null,a=null!==this.channelForm.endDate?new Date(this.channelForm.endDate).getTime():null;(e={pageNo:this.pageNo,pageSize:this.pageSize,channel_name:this.channelForm.channel_name,channel_typeid:this.channelForm.channel_typeid,state:this.channelForm.state,timeStart:t,timeEnd:a,parent_channelid:this.channelForm.parent_channelid},be("manager/Channel/page",e)).then(function(e){if(e.data.status){var t=e.data.result;n.tableData=t.list,n.total=t.total}})},handleSizeChange:function(e){this.pageSize=e,this.searchChannel()},handleCurrentChange:function(e){this.pageNo=e,this.getChannelList()},toggleAllSelection:function(e){this.$refs.channelTable.toggleAllSelection()},cellClick:function(e,n,t,a){var i=this;if(a.target.classList.contains("sort-container"))if(1!==e.state){var l=a.target.dataset.id;l&&(this.clickCellIndex=parseInt(l)),this.$nextTick(function(){document.querySelectorAll(".el-tooltip > input.self-sort").forEach(function(n){n&&(i.selectChannelId=e.channelid,n.focus(),n.onkeyup=function(e){n.value&&(i.sortValue=parseInt(n.value))})})})}else this.$message({type:"error",message:"启用状态下不能排序!"})},cellMouseLeave:function(e,n,t,a){var i,l=this;if(this.clickCellIndex=-1,-1===this.sortValue||this.selectChannelId!==e.channelid)return!1;(i={channel:{channelid:e.channelid,sort:this.sortValue}},be("manager/Channel/updateSort",i)).then(function(e){e.status&&(l.getChannelList(),l.sortValue=-1)})},handleEdit:function(e){1!==e.state?(sessionStorage.setItem("channelid",e.channelid),this.$router.push({path:"/manageChannel/edit"})):this.$message({type:"error",message:"启用状态下不可编辑!"})},changeState:function(e){var n,t=this,a=0;1===e.state?a=0:0===e.state&&(a=1),(n={channel:{channelid:e.channelid,state:a}},be("manager/Channel/updateState",n)).then(function(e){e.status&&(0===a?t.$message({type:"success",message:"修改状态为停用"}):t.$message({type:"success",message:"修改状态为启用"}),t.getChannelList())})},handleDelete:function(e){var n=this;1!==e.state?this.$confirm('是否删除"'+e.channel_name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={channel:{channelid:e.channelid}},be("manager/Channel/delete",t)).then(function(e){e.data.status&&n.$message({type:"success",message:"删除成功!"}),n.getChannelList()})}).catch(function(){}):this.$message({type:"error",message:"启用状态下不可删除!"})},getChannelType:function(){var e=this;Nt().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.channel_type_name,i.value=n.channel_typeid,e.channelTypeList.push(i)})})},searchChannel:function(){this.pageNo=1,this.$options.filters.swapTime(this.channelForm),this.getChannelList()},getParentChannel:function(){var e=this;Rt().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.parentChannelList.push(i)})})}}},Pt=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"频道列表"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.channelForm}},[t("el-form-item",{attrs:{label:"频道"}},[t("el-input",{attrs:{clearable:""},model:{value:e.channelForm.channel_name,callback:function(n){e.$set(e.channelForm,"channel_name",n)},expression:"channelForm.channel_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"父级频道",prop:"parent_channel_name"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{clear:e.searchChannel,change:e.searchChannel},model:{value:e.channelForm.parent_channelid,callback:function(n){e.$set(e.channelForm,"parent_channelid",n)},expression:"channelForm.parent_channelid"}},e._l(e.parentChannelList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"分类"}},[t("el-select",{attrs:{clearable:"",placeholder:""},on:{clear:e.searchChannel,change:e.searchChannel},model:{value:e.channelForm.channel_typeid,callback:function(n){e.$set(e.channelForm,"channel_typeid",n)},expression:"channelForm.channel_typeid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.searchChannel},model:{value:e.channelForm.state,callback:function(n){e.$set(e.channelForm,"state",n)},expression:"channelForm.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.channelForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.searchChannel},model:{value:e.channelForm.startDate,callback:function(n){e.$set(e.channelForm,"startDate",n)},expression:"channelForm.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"date-left",staticStyle:{left:"0"},attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.channelForm.endDate,"yyyy-MM-dd hh:mm"),format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期"},on:{change:e.searchChannel},model:{value:e.channelForm.endDate,callback:function(n){e.$set(e.channelForm,"endDate",n)},expression:"channelForm.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:e.searchChannel}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("router-link",{attrs:{to:"/manageChannel/create"}},[t("el-button",{attrs:{type:"primary"}},[e._v("\n            添加频道\n            "),t("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"cell-click":e.cellClick,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改状态",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-remove-outline"},on:{click:function(t){e.changeState(n.row)}}})],1),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.handleEdit(n.row)}}}),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(t){e.handleDelete(n.row)}}})]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],"current-page":e.pageNo,background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};Pt._withStripped=!0;var Ht={render:Pt,staticRenderFns:[]},Qt=Ht;var Wt=!1;var Ot=t("VU/8")(jt,Qt,!1,function(e){Wt||t("R2Go")},null,null);Ot.options.__file="src/components/manageChannel/channelList.vue";var qt=Ot.exports,Yt={components:{CircleTitle:en},data:function(){return{iconList:[],iconCheckList:[],index:0}},mounted:function(){this.getIconList()},methods:{getIconList:function(){var e=this;Vt().then(function(n){if(n.data.status){e.iconCheckList=[],e.iconList=n.data.result;for(var t=0;t<e.iconList.length;t++)e.iconCheckList.push(!1)}})},iconSelected:function(e,n){this.index=e;for(var t=0;t<this.iconList.length;t++)this.$set(this.iconCheckList,t,!1);this.$set(this.iconCheckList,e,!0)},submitIcon:function(){this.$emit("submit-icon",this.iconList[this.index])}}},Zt=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"icon-container"},[t("div",{staticClass:"channel-icon"},e._l(e.iconList,function(n,a){return t("span",{key:a,class:e.iconCheckList[a]?"click-border":"moren-border",on:{click:function(n){e.iconSelected(a,e.iconCheckList[a])}}},[t("img",{attrs:{src:n}})])}),0),e._v(" "),t("div",{staticClass:"icon-submit"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitIcon}},[e._v("确定")])],1)])};Zt._withStripped=!0;var Gt={render:Zt,staticRenderFns:[]},Jt=Gt;var Xt=!1;var Kt=t("VU/8")(Yt,Jt,!1,function(e){Xt||t("NBUn")},"data-v-05290591",null);Kt.options.__file="src/components/manageChannel/chooseIcon.vue";var ea=Kt.exports,na={components:{CircleTitle:en,ChooseIcon:ea},data:function(){return{createFrom:{channel_name:"",parent_channel_name:"",sort:"",icon_url:"/static/img/moren.jpg",channel_type_name:"",state:0,description:"",fixed:!1,parent_channelid:"",channel_typeid:""},rules:{channel_name:[{required:!0,message:"请输入频道名称",trigger:"blur"},{validator:function(e,n,t){return n.length>10?t(new Error("频道名称长度不能超过10")):t()},trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}]},channelTypeList:[],parentChannelList:[{label:"无",value:""}],dialogVisible:!1,componentName:"",fixedDisabled:!1}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getChannelType(),this.getParentChannel()},methods:{submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;n.channelTypeList.forEach(function(e,t,a){e.value===n.createFrom.channel_typeid&&(n.createFrom.channel_type_name=e.label)}),n.parentChannelList.forEach(function(e,t,a){e.value===n.createFrom.parent_channelid&&(n.createFrom.parent_channel_name=e.label)}),(t={channel:{parent_channelid:n.createFrom.parent_channelid,parent_channel_name:n.createFrom.parent_channel_name,channel_name:n.createFrom.channel_name,channel_typeid:n.createFrom.channel_typeid,channel_type_name:n.createFrom.channel_type_name,icon_url:n.createFrom.icon_url,state:n.createFrom.state,description:n.createFrom.description,fixed:n.createFrom.fixed,sort:n.createFrom.sort}},be("manager/Channel/add",t)).then(function(e){200===e.status&&(n.$router.push({path:"/manageChannel/list"}),n.$notify({title:"通知",message:"添加成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.createFrom.icon_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getChannelType:function(){var e=this;Nt().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){0===t&&(e.createFrom.channel_typeid=n.channel_typeid);var i={};i.label=n.channel_type_name,i.value=n.channel_typeid,e.channelTypeList.push(i)})})},getParentChannel:function(){var e=this;Rt().then(function(n){var t=n.data;if(t.status){var a=t.result;console.log(a),a.forEach(function(n,t,a){if(e.channelid!==n.channelid){var i={};i.label=n.channel_name,i.value=n.channelid,e.parentChannelList.push(i)}})}})},chooseIcon:function(){this.dialogVisible=!0,this.componentName="ChooseIcon"},closeDialog:function(){this.dialogVisible=!1,this.componentName=""},submitIcon:function(e){this.createFrom.icon_url=e,this.dialogVisible=!1,this.componentName=""},disableIsFixed:function(){this.createFrom.parent_channelid?(this.createFrom.fixed=!1,this.fixedDisabled=!0):this.fixedDisabled=!1}}},ta=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"频道新增"}}),e._v(" "),t("el-form",{ref:"createFrom",staticClass:"rule-form",attrs:{model:e.createFrom,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"频道名称",prop:"channel_name"}},[t("el-input",{model:{value:e.createFrom.channel_name,callback:function(n){e.$set(e.createFrom,"channel_name","string"==typeof n?n.trim():n)},expression:"createFrom.channel_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"父级频道",prop:"parent_channel_name"}},[t("el-select",{attrs:{filterable:"",placeholder:""},on:{change:e.disableIsFixed},model:{value:e.createFrom.parent_channelid,callback:function(n){e.$set(e.createFrom,"parent_channelid",n)},expression:"createFrom.parent_channelid"}},e._l(e.parentChannelList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"归属类别",prop:"channel_type_name"}},[t("el-select",{attrs:{filterable:"",placeholder:""},model:{value:e.createFrom.channel_typeid,callback:function(n){e.$set(e.createFrom,"channel_typeid",n)},expression:"createFrom.channel_typeid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置"}},[t("div",{staticClass:"icon-choose-container"},[t("div",{staticClass:"moren-icon"},[t("img",{attrs:{src:e.createFrom.icon_url}})]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.chooseIcon}},[e._v("选择图标")])],1)]),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createFrom.state,callback:function(n){e.$set(e.createFrom,"state",n)},expression:"createFrom.state"}},[t("el-option",{attrs:{value:0,label:"停用"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"启用"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"频道简述"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.createFrom.description,callback:function(n){e.$set(e.createFrom,"description",n)},expression:"createFrom.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否固定",prop:"fixed"}},[t("el-select",{attrs:{disabled:e.fixedDisabled,placeholder:"请选择"},model:{value:e.createFrom.fixed,callback:function(n){e.$set(e.createFrom,"fixed",n)},expression:"createFrom.fixed"}},[t("el-option",{attrs:{value:!0,label:"是"}}),e._v(" "),t("el-option",{attrs:{value:!1,label:"否"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort"}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.createFrom.sort,callback:function(n){e.$set(e.createFrom,"sort",e._n(n))},expression:"createFrom.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("createFrom")}}},[e._v("提交")]),e._v(" "),t("router-link",{attrs:{to:"/manageChannel/list"}},[t("el-button",[e._v("取消")])],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"图标选择",width:"40%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",on:{"submit-icon":e.submitIcon}})],1)],1)};ta._withStripped=!0;var aa={render:ta,staticRenderFns:[]},ia=aa;var la=!1;var oa=t("VU/8")(na,ia,!1,function(e){la||t("aC+T")},"data-v-79c67e8e",null);oa.options.__file="src/components/manageChannel/channelCreate.vue";var sa=oa.exports,ra={components:{CircleTitle:en,ChooseIcon:ea},data:function(){return{editFrom:{channel_name:"",parent_channel_name:"",parent_channelid:"",sort:0,icon_url:"/static/img/moren.jpg",channel_type_name:"",state:"",description:"",fixed:"",channel_typeid:""},rules:{channel_name:[{required:!0,message:"请输入频道名称",trigger:"blur"},{validator:function(e,n,t){return n.length>10?t(new Error("频道名称长度不能超过10")):t()},trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}]},channelTypeList:[],parentChannelList:[{label:"无",value:""}],channelid:"",disabledChooseParentChannel:!1,dialogVisible:!1,componentName:"",isRefresh:!0,fixedDisabled:!1}},computed:{getUploadUrl:function(){return _e()}},watch:{"editFrom.channel_name":{immediate:!0,handler:function(e,n){this.editFrom.channel_name=e.trim()}}},mounted:function(){this.getEditInfo(),this.getChannelType(),this.getParentChannel()},beforeRouteLeave:function(e,n,t){"/manageChannel/list"===e.path?e.meta.refresh=this.isRefresh:"/manageChannel/create"===e.path&&this.$root.eventHub.$emit("reset-options"),t()},methods:{gotoList:function(){this.isRefresh=!1,this.$router.push({path:"/manageChannel/list"})},getEditInfo:function(){var e,n=this;this.channelid=sessionStorage.getItem("channelid"),(e={channel:{channelid:this.channelid}},be("manager/Channel/getChannelByID",e)).then(function(e){if(e.data.status){var t=e.data.result;n.editFrom.channel_name=t.channel_name,n.editFrom.parent_channel_name=t.parent_channel_name,n.editFrom.sort=t.sort,n.editFrom.icon_url=t.icon_url,n.editFrom.channel_type_name=t.channel_type_name,n.editFrom.state=t.state,n.editFrom.description=t.description,n.editFrom.fixed=t.fixed,n.editFrom.channel_typeid=t.channel_typeid,n.editFrom.parent_channelid=t.parent_channelid,t.countChildren>0&&(n.disabledChooseParentChannel=!0),n.disableIsFixed()}})},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;n.channelTypeList.forEach(function(e,t,a){e.value===n.editFrom.channel_typeid&&(n.editFrom.channel_type_name=e.label)}),n.parentChannelList.forEach(function(e,t,a){e.value===n.editFrom.parent_channelid&&(n.editFrom.parent_channel_name=e.label)}),(t={channel:{parent_channelid:n.editFrom.parent_channelid,parent_channel_name:n.editFrom.parent_channel_name,channelid:n.channelid,channel_name:n.editFrom.channel_name,channel_typeid:n.editFrom.channel_typeid,channel_type_name:n.editFrom.channel_type_name,icon_url:n.editFrom.icon_url,state:n.editFrom.state,description:n.editFrom.description,fixed:n.editFrom.fixed,sort:n.editFrom.sort}},be("manager/Channel/update",t)).then(function(e){200===e.status&&(n.$router.push({path:"/manageChannel/list"}),n.$notify({title:"通知",message:"编辑成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.editFrom.icon_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getChannelType:function(){var e=this;Nt().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){0===t&&(e.editFrom.channel_typeid=n.channel_typeid);var i={};i.label=n.channel_type_name,i.value=n.channel_typeid,e.channelTypeList.push(i)})})},getParentChannel:function(){var e=this;Rt().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){if(e.channelid!==n.channelid){var i={};i.label=n.channel_name,i.value=n.channelid,e.parentChannelList.push(i)}})})},closeDialog:function(){this.dialogVisible=!1,this.componentName=""},chooseIcon:function(){this.dialogVisible=!0,this.componentName="ChooseIcon"},submitIcon:function(e){this.editFrom.icon_url=e,this.dialogVisible=!1,this.componentName=""},disableIsFixed:function(){this.editFrom.parent_channelid?(this.editFrom.fixed=!1,this.fixedDisabled=!0):this.fixedDisabled=!1}}},ca=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"频道编辑"}}),e._v(" "),t("el-form",{ref:"editFrom",staticClass:"rule-form",attrs:{model:e.editFrom,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"频道名称",prop:"channel_name"}},[t("el-input",{model:{value:e.editFrom.channel_name,callback:function(n){e.$set(e.editFrom,"channel_name","string"==typeof n?n.trim():n)},expression:"editFrom.channel_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"父级频道",prop:"parent_channel_name"}},[t("el-select",{attrs:{disabled:e.disabledChooseParentChannel,filterable:"",placeholder:""},on:{change:e.disableIsFixed},model:{value:e.editFrom.parent_channelid,callback:function(n){e.$set(e.editFrom,"parent_channelid",n)},expression:"editFrom.parent_channelid"}},e._l(e.parentChannelList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"归属类别",prop:"channel_type_name"}},[t("el-select",{attrs:{filterable:"",placeholder:""},model:{value:e.editFrom.channel_typeid,callback:function(n){e.$set(e.editFrom,"channel_typeid",n)},expression:"editFrom.channel_typeid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置"}},[t("div",{staticClass:"icon-choose-container"},[t("div",{staticClass:"moren-icon"},[t("img",{attrs:{src:e.editFrom.icon_url}})]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.chooseIcon}},[e._v("选择图标")])],1)]),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editFrom.state,callback:function(n){e.$set(e.editFrom,"state",n)},expression:"editFrom.state"}},[t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"频道简述"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.editFrom.description,callback:function(n){e.$set(e.editFrom,"description",n)},expression:"editFrom.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否固定",prop:"fixed"}},[t("el-select",{attrs:{disabled:e.fixedDisabled,placeholder:"请选择"},model:{value:e.editFrom.fixed,callback:function(n){e.$set(e.editFrom,"fixed",n)},expression:"editFrom.fixed"}},[t("el-option",{attrs:{value:!0,label:"是"}}),e._v(" "),t("el-option",{attrs:{value:!1,label:"否"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort"}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.editFrom.sort,callback:function(n){e.$set(e.editFrom,"sort",e._n(n))},expression:"editFrom.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("editFrom")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.gotoList}},[e._v("取消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"图标选择",width:"40%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",on:{"submit-icon":e.submitIcon}})],1)],1)};ca._withStripped=!0;var ma={render:ca,staticRenderFns:[]},da=ma;var pa=!1;var ua=t("VU/8")(ra,da,!1,function(e){pa||t("WdQQ")},"data-v-72e90b1c",null);ua.options.__file="src/components/manageChannel/channelEdit.vue";var ha=ua.exports;function ga(e){return be("manager/Special/page",e)}var Aa={components:{CircleTitle:en},data:function(){var e=this,n=this.$createElement;return{topicForm:{channelid:"",channel_name:"",special_name:"",daterange:[],state:"",startDate:"",endDate:""},clickCellIndex:-1,tableHeader:[{prop:"special_name",label:"专题名称"},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"channel_name",label:"归属频道"},{prop:"special_head_url",label:"图片",formatter:function(e,t,a,i){return n("img",{class:"topic-table-pic",attrs:{src:a}})}},{prop:"expiry_date_start",label:"有效期-始",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"expiry_date_end",label:"有效期-终",width:120,formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"showState",label:"状态"},{prop:"sort",label:"排序",formatter:function(t,a,i,l){return l===e.clickCellIndex?n("input",{attrs:{type:"text",id:l,autofocus:"autofocus"},class:"self-sort",domProps:{value:i}}):n("span",{class:"sort-container",attrs:{"data-id":l}},[i])}}],tableData:[],sortValue:-1,pageNo:1,pageSize:10,total:0,listUsableChannel:[],selectSpecialId:""}},watch:{"topicForm.state":function(){this.searchSpecial()}},mounted:function(){var e=this;this.getTopicList(),this.getListUsableChannel(),this.$root.eventHub.$on("reset-options",function(){e.resetOptions()})},activated:function(){var e=this.$route.meta;e.hasOwnProperty("refresh")&&e.refresh&&(this.getTopicList(),delete this.$route.meta.refresh)},beforeRouteLeave:function(e,n,t){"/manageTopic/create"===e.path&&this.resetOptions(),t()},beforeDestroy:function(){this.$root.eventHub.$off("reset-options")},methods:{resetOptions:function(){this.topicForm={channelid:"",channel_name:"",special_name:"",daterange:[],state:"",startDate:"",endDate:""},this.pageNo=1,this.getTopicList()},handleSizeChange:function(e){this.pageSize=e,this.searchSpecial()},handleCurrentChange:function(e){this.pageNo=e,this.getTopicList()},toggleAllSelection:function(e){this.$refs.channelTable.toggleAllSelection()},cellClick:function(e,n,t,a){var i=this;if(a.target.classList.contains("sort-container"))if(1!==e.state){var l=a.target.dataset.id;l&&(this.clickCellIndex=parseInt(l)),this.$nextTick(function(){document.querySelectorAll(".el-tooltip > input.self-sort").forEach(function(n){n&&(i.selectSpecialId=e.specialid,n.focus(),n.onkeyup=function(e){n.value&&(i.sortValue=parseInt(n.value))})})})}else this.$message({type:"error",message:"启用状态下不能排序!"})},cellMouseLeave:function(e){var n,t=this;if(this.clickCellIndex=-1,-1===this.sortValue||this.selectSpecialId!==e.specialid)return!1;(n={special:{specialid:e.specialid,sort:this.sortValue}},be("manager/Special/updateSort",n)).then(function(e){e.status&&(t.getTopicList(),t.sortValue=-1)})},getTopicList:function(){var e=this,n=null!==this.topicForm.startDate?new Date(this.topicForm.startDate).getTime():null,t=null!==this.topicForm.endDate?new Date(this.topicForm.endDate).getTime():null;ga({pageNo:this.pageNo,pageSize:this.pageSize,channelid:this.topicForm.channelid,special_name:this.topicForm.special_name,state:this.topicForm.state,timeStart:n,timeEnd:t}).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},handleEdit:function(e){1!==e.state?(sessionStorage.setItem("specialid",e.specialid),this.$router.push({path:"/manageTopic/edit"})):this.$message({type:"error",message:"启用状态下不可编辑!"})},changeState:function(e){var n,t=this,a=0;1===e.state?a=0:0===e.state&&(a=1),(n={special:{specialid:e.specialid,state:a}},be("manager/Special/updateState",n)).then(function(e){e.status&&(0===a?t.$message({type:"success",message:"修改状态为停用"}):t.$message({type:"success",message:"修改状态为启用"}),t.getTopicList())})},handleDelete:function(e){var n=this;1!==e.state?this.$confirm('是否删除"'+e.special_name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={special:{specialid:e.specialid}},be("manager/Special/delete",t)).then(function(e){e.data.status&&n.$message({type:"success",message:"删除成功!"}),n.getTopicList()})}).catch(function(){}):this.$message({type:"error",message:"启用状态下不可删除!"})},searchSpecial:function(){this.pageNo=1,this.$options.filters.swapTime(this.topicForm),this.getTopicList()},getListUsableChannel:function(){var e=this;xe().then(function(n){n.data.status&&n.data.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.listUsableChannel.push(i)})})}}},fa=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"topic"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"专题管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.topicForm}},[t("el-form-item",{attrs:{label:"频道"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{clear:e.searchSpecial,change:e.searchSpecial},model:{value:e.topicForm.channelid,callback:function(n){e.$set(e.topicForm,"channelid",n)},expression:"topicForm.channelid"}},e._l(e.listUsableChannel,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"专题"}},[t("el-input",{model:{value:e.topicForm.special_name,callback:function(n){e.$set(e.topicForm,"special_name",n)},expression:"topicForm.special_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.searchSpecial},model:{value:e.topicForm.state,callback:function(n){e.$set(e.topicForm,"state",n)},expression:"topicForm.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"待上线"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"已上线"}}),e._v(" "),t("el-option",{attrs:{value:3,label:"过期"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.topicForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.searchSpecial},model:{value:e.topicForm.startDate,callback:function(n){e.$set(e.topicForm,"startDate",n)},expression:"topicForm.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.topicForm.endDate,"yyyy-MM-dd hh:mm"),format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期"},on:{change:e.searchSpecial},model:{value:e.topicForm.endDate,callback:function(n){e.$set(e.topicForm,"endDate",n)},expression:"topicForm.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:e.searchSpecial}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("router-link",{attrs:{to:"/manageTopic/create"}},[t("el-button",{attrs:{type:"primary"}},[e._v("\n            添加专题\n            "),t("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"cell-click":e.cellClick,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改状态",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-remove-outline"},on:{click:function(t){e.changeState(n.row)}}})],1),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.handleEdit(n.row)}}}),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(t){e.handleDelete(n.row)}}})]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],"current-page":e.pageNo,background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};fa._withStripped=!0;var ba={render:fa,staticRenderFns:[]},va=ba;var ya=!1;var Ca=t("VU/8")(Aa,va,!1,function(e){ya||(t("KyV3"),t("3EUf"))},"data-v-8c7c9cf0",null);Ca.options.__file="src/components/manageTopic/topicList.vue";var _a=Ca.exports,xa={computed:{uploadHeaders:function(){return{token:sessionStorage.getItem("token")}}}},wa={components:{CircleTitle:en},mixins:[xa],data:function(){return{ruleForm:{sort:0,channelid:"",special_name:"",special_head_url:"",indate:[new Date,new Date],istop:0,state:0},isChooseDate:!1,rules:{sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}],special_name:[{required:!0,message:"请输入专题名称",trigger:"blur"},{min:0,max:64,message:"标题限定64个字符内",trigger:"change"}],special_head_url:[{required:!0,message:"请上传图片",trigger:"blur"}]},listUsableChannel:[]}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getListUsableChannel()},methods:{submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;(t={special:{special_name:n.ruleForm.special_name,special_head_url:n.ruleForm.special_head_url,channelid:n.ruleForm.channelid,state:n.ruleForm.state,expiry_date_start:new Date(n.ruleForm.indate[0]).getTime(),expiry_date_end:new Date(n.ruleForm.indate[1]).getTime(),sort:n.ruleForm.sort}},be("manager/Special/add",t)).then(function(e){e.status&&200===e.status&&(n.$router.push({path:"/manageTopic/list"}),n.$notify({title:"通知",message:"添加成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.ruleForm.special_head_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("上传图片只能是 JPG 格式!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getListUsableChannel:function(){var e=this;xe().then(function(n){n.data.status&&n.data.result.forEach(function(n,t,a){0===t&&(e.ruleForm.channelid=n.channelid);var i={};i.label=n.channel_name,i.value=n.channelid,e.listUsableChannel.push(i)})})}}},Fa=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"topic create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"专题新增"}}),e._v(" "),t("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"专题标题",prop:"special_name"}},[t("el-input",{model:{value:e.ruleForm.special_name,callback:function(n){e.$set(e.ruleForm,"special_name","string"==typeof n?n.trim():n)},expression:"ruleForm.special_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置",prop:"special_head_url"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.getUploadUrl,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm.special_head_url?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.special_head_url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"归属频道",prop:"channelBelong"}},[t("el-select",{attrs:{filterable:"",placeholder:""},model:{value:e.ruleForm.channelid,callback:function(n){e.$set(e.ruleForm,"channelid",n)},expression:"ruleForm.channelid"}},e._l(e.listUsableChannel,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"indate",attrs:{label:"有效期",required:""}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,disabled:e.isChooseDate,type:"datetimerange",format:"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.indate,callback:function(n){e.$set(e.ruleForm,"indate",n)},expression:"ruleForm.indate"}})],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort"}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.ruleForm.sort,callback:function(n){e.$set(e.ruleForm,"sort",e._n(n))},expression:"ruleForm.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",{attrs:{label:"状态选择"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.state,callback:function(n){e.$set(e.ruleForm,"state",n)},expression:"ruleForm.state"}},[t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("router-link",{attrs:{to:"/manageTopic/list"}},[t("el-button",[e._v("取消")])],1)],1)],1)],1)};Fa._withStripped=!0;var ka={render:Fa,staticRenderFns:[]},Sa=ka;var Ea=!1;var Da=t("VU/8")(wa,Sa,!1,function(e){Ea||t("pCyP")},"data-v-6a299334",null);Da.options.__file="src/components/manageTopic/topicCreate.vue";var La=Da.exports,Ba={components:{CircleTitle:en},mixins:[xa],data:function(){return{editForm:{special_name:"",channel_name:"",channelid:"",special_head_url:"",indate:[],state:0,sort:0},isChooseDate:!1,rules:{special_name:[{required:!0,message:"请输入专题名称",trigger:"blur"},{min:0,max:64,message:"标题限定64个字符内",trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}],special_head_url:[{required:!0,message:"请上传图片",trigger:"blur"}],channelid:[{required:!0,message:"请选择归属频道",trigger:"blur"}]},channelTypeList:[],specialid:"",isRefresh:!0}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getEditInfo()},beforeRouteLeave:function(e,n,t){"/manageTopic/list"===e.path?e.meta.refresh=this.isRefresh:"/manageTopic/create"===e.path&&this.$root.eventHub.$emit("reset-options"),t()},methods:{gotoList:function(){this.isRefresh=!1,this.$router.push({path:"/manageTopic/list"})},getEditInfo:function(){var e,n=this;this.specialid=sessionStorage.getItem("specialid"),(e={special:{specialid:this.specialid}},be("manager/Special/getSpecialByID",e)).then(function(e){if(e.data.status){var t=e.data.result;n.editForm.special_name=t.special_name,n.editForm.channel_name=t.channel_name,n.editForm.channelid=t.channelid,n.editForm.state=t.state,n.editForm.special_head_url=t.special_head_url,n.editForm.indate.push(t.expiry_date_start),n.editForm.indate.push(t.expiry_date_end),n.editForm.sort=t.sort}n.getListUsableChannel()})},setChannnelid:function(){var e=this,n=!0;console.log(this.editForm.channelid),this.channelTypeList.forEach(function(t){t.value===e.editForm.channelid&&(n=!1)}),n&&this.$set(this.editForm,"channelid","")},getListUsableChannel:function(){var e=this;xe().then(function(n){var t=n.data;t.status&&(t.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.channelTypeList.push(i)}),e.setChannnelid())})},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;n.channelTypeList.forEach(function(e,t,a){e.value===n.editForm.channel_name&&(n.editForm.channelid=e.label)}),(t={special:{specialid:n.specialid,special_name:n.editForm.special_name,special_head_url:n.editForm.special_head_url,channelid:n.editForm.channelid,state:n.editForm.state,expiry_date_start:new Date(n.editForm.indate[0]).getTime(),expiry_date_end:new Date(n.editForm.indate[1]).getTime(),sort:n.editForm.sort}},be("manager/Special/update",t)).then(function(e){200===e.status&&(n.$router.push({path:"/manageTopic/list"}),n.$notify({title:"通知",message:"编辑成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.editForm.special_head_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传一张图片!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t}}},Ma=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"topic create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"专题编辑"}}),e._v(" "),t("el-form",{ref:"editForm",staticClass:"rule-form",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"专题标题",prop:"special_name"}},[t("el-input",{model:{value:e.editForm.special_name,callback:function(n){e.$set(e.editForm,"special_name","string"==typeof n?n.trim():n)},expression:"editForm.special_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置",prop:"special_head_url"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.getUploadUrl,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editForm.special_head_url?t("img",{staticClass:"avatar",attrs:{src:e.editForm.special_head_url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"归属频道",prop:"channelid"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.editForm.channelid,callback:function(n){e.$set(e.editForm,"channelid",n)},expression:"editForm.channelid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"indate",attrs:{label:"有效期",required:""}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,type:"datetimerange","range-separator":"至",format:"yyyy-MM-dd HH:mm","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.editForm.indate,callback:function(n){e.$set(e.editForm,"indate",n)},expression:"editForm.indate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{model:{value:e.editForm.sort,callback:function(n){e.$set(e.editForm,"sort",e._n(n))},expression:"editForm.sort"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.state,callback:function(n){e.$set(e.editForm,"state",n)},expression:"editForm.state"}},[t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("editForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.gotoList}},[e._v("取消")])],1)],1)],1)};Ma._withStripped=!0;var Ia={render:Ma,staticRenderFns:[]},Ta=Ia;var $a=!1;var za=t("VU/8")(Ba,Ta,!1,function(e){$a||t("vrkP")},"data-v-6dec4e18",null);za.options.__file="src/components/manageTopic/topicEdit.vue";var Ua=za.exports;var Na={components:{CircleTitle:en},data:function(){var e=this,n=this.$createElement;return{slideForm:{chart_name:"",channelid:"",state:"",region:"",daterange:[],sort:"1",startDate:"",endDate:""},clickCellIndex:-1,tableHeader:[{prop:"chart_name",label:"图片标题"},{prop:"createtime",label:"创建日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"channel_name",label:"归属频道"},{prop:"chart_head_url",label:"轮播图图片",formatter:function(e,t,a,i){return n("img",{class:"topic-table-pic",attrs:{src:a}})}},{prop:"jump_type",label:"关联内容",formatter:function(e,n,t,a){return 1===t&&e.title?"稿件-"+e.title:2===t&&e.special_name?"专题-"+e.special_name:"无"}},{prop:"expiry_date_start",label:"有效期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")+"至"+e.$options.filters.FormatDate(n.expiry_date_end,"yyyy-MM-dd hh:mm")}},{prop:"showState",label:"状态"},{prop:"sort",label:"排序",formatter:function(t,a,i,l){return l===e.clickCellIndex?n("input",{attrs:{type:"text",id:l,autofocus:"autofocus"},class:"self-sort",domProps:{value:i}}):n("span",{class:"sort-container",attrs:{"data-id":l}},[i])}}],tableData:[],sortValue:-1,pageNo:1,pageSize:10,total:0,channelTypeList:[],selectChartId:""}},watch:{"slideForm.chart_name":function(){this.searchSlide()}},mounted:function(){var e=this;this.getSlideList(),this.getListUsableChannel(),this.$root.eventHub.$on("reset-options",function(){e.resetOptions()})},activated:function(){var e=this.$route.meta;e.hasOwnProperty("refresh")&&e.refresh&&(this.getSlideList(),delete this.$route.meta.refresh)},beforeRouteLeave:function(e,n,t){"/manageSlide/create"===e.path&&this.resetOptions(),t()},beforeDestroy:function(){this.$root.eventHub.$off("reset-options")},methods:{resetOptions:function(){this.slideForm={chart_name:"",channelid:"",state:"",region:"",daterange:[],sort:"1",startDate:"",endDate:""},this.pageNo=1,this.getSlideList()},handleSizeChange:function(e){this.pageSize=e,this.searchSlide()},handleCurrentChange:function(e){this.pageNo=e,this.getSlideList()},cellClick:function(e,n,t,a){var i=this;if(a.target.classList.contains("sort-container"))if(1!==e.state){var l=a.target.dataset.id;l&&(this.clickCellIndex=parseInt(l)),this.$nextTick(function(){document.querySelectorAll(".el-tooltip > input.self-sort").forEach(function(n){n&&(i.selectChartId=e.chartid,n.focus(),n.onkeyup=function(e){n.value&&(i.sortValue=parseInt(n.value))})})})}else this.$message({type:"error",message:"启用状态下不能排序!"})},cellMouseLeave:function(e){var n,t=this;if(this.clickCellIndex=-1,-1===this.sortValue||this.selectChartId!==e.chartid)return!1;(n={rotationChart:{chartid:e.chartid,sort:this.sortValue}},be("manager/RotationChart/updateSort",n)).then(function(e){e.status&&(t.getSlideList(),t.sortValue=-1)})},getSlideList:function(){var e,n=this,t=null!==this.slideForm.startDate?new Date(this.slideForm.startDate).getTime():null,a=null!==this.slideForm.endDate?new Date(this.slideForm.endDate).getTime():null;(e={pageNo:this.pageNo,pageSize:this.pageSize,channelid:this.slideForm.channelid,chart_name:this.slideForm.chart_name,state:this.slideForm.state,timeStart:t,timeEnd:a},be("manager/RotationChart/page",e)).then(function(e){if(e.data.status){var t=e.data.result;n.tableData=t.list,n.total=t.total}})},changeState:function(e){var n,t=this,a=0;1===e.state?a=0:0===e.state&&(a=1),(n={rotationChart:{chartid:e.chartid,state:a}},be("manager/RotationChart/updateState",n)).then(function(e){e.status&&(0===a?t.$message({type:"success",message:"修改状态为停用"}):t.$message({type:"success",message:"修改状态为启用"}),t.getSlideList())})},handleDelete:function(e){var n=this;1!==e.state?this.$confirm('是否删除"'+e.chart_name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={rotationChart:{chartid:e.chartid}},be("manager/RotationChart/delete",t)).then(function(e){e.data.status&&n.$message({type:"success",message:"删除成功!"}),n.getSlideList()})}).catch(function(){}):this.$message({type:"error",message:"启用状态下不可删除!"})},handleEdit:function(e){1!==e.state?(sessionStorage.setItem("chartid",e.chartid),this.$router.push({path:"/manageSlide/edit"})):this.$message({type:"error",message:"启用状态下不可编辑!"})},getListUsableChannel:function(){var e=this;xe().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.channelTypeList.push(i)})})},searchSlide:function(){this.pageNo=1,this.$options.filters.swapTime(this.slideForm),this.getSlideList()}}},Ra=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"slide"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"轮播图管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.slideForm}},[t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{attrs:{clearable:""},model:{value:e.slideForm.chart_name,callback:function(n){e.$set(e.slideForm,"chart_name",n)},expression:"slideForm.chart_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"归属频道"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{change:e.searchSlide,clear:e.searchSlide},model:{value:e.slideForm.channelid,callback:function(n){e.$set(e.slideForm,"channelid",n)},expression:"slideForm.channelid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.searchSlide},model:{value:e.slideForm.state,callback:function(n){e.$set(e.slideForm,"state",n)},expression:"slideForm.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"待上线"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"已上线"}}),e._v(" "),t("el-option",{attrs:{value:3,label:"过期"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"-29px"},attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.slideForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.searchSlide},model:{value:e.slideForm.startDate,callback:function(n){e.$set(e.slideForm,"startDate",n)},expression:"slideForm.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"slide-end-date-item",staticStyle:{"margin-left":"29px"},attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.slideForm.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.searchSlide},model:{value:e.slideForm.endDate,callback:function(n){e.$set(e.slideForm,"endDate",n)},expression:"slideForm.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:e.searchSlide}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("router-link",{attrs:{to:"/manageSlide/create"}},[t("el-button",{attrs:{type:"primary"}},[e._v("\n            添加轮播图\n            "),t("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"slideTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"cell-click":e.cellClick,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改状态",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-remove-outline"},on:{click:function(t){e.changeState(n.row)}}})],1),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.handleEdit(n.row)}}}),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(t){e.handleDelete(n.row)}}})]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],"current-page":e.pageNo,background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};Ra._withStripped=!0;var Va={render:Ra,staticRenderFns:[]},ja=Va;var Pa=!1;var Ha=t("VU/8")(Na,ja,!1,function(e){Pa||(t("ekX5"),t("wu8V"))},"data-v-00dae50c",null);Ha.options.__file="src/components/manageSlide/slideList.vue";var Qa=Ha.exports,Wa={name:"AddTopic",data:function(){var e=this;return{topicForm:{channelid:"",channel_name:"",special_name:"",daterange:[],startDate:"",endDate:""},tableHeader:[{prop:"special_name",label:"专题标题"},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"channel_name",label:"归属频道"},{prop:"expiry_date_start",label:"有效日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")+"至"+e.$options.filters.FormatDate(n.expiry_date_end,"yyyy-MM-dd hh:mm")}}],tableData:[],listUsableChannel:[],pageNo:1,pageSize:10,total:0,selectRow:[]}},watch:{"topicForm.special_name":function(){this.searchSpecial()}},mounted:function(){this.getTopicList(),this.getListUsableChannel()},methods:{getTopicList:function(){var e=this;ga({pageNo:this.pageNo,pageSize:this.pageSize,state:2}).then(function(n){if(n.status){var t=n.data.result;e.tableData=t.list,console.log(t),e.total=t.total}})},getListUsableChannel:function(){var e=this;xe().then(function(n){n.data.status&&n.data.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.listUsableChannel.push(i)})})},onSubmit:function(){console.log("submit!")},handleSizeChange:function(e){this.pageSize=e,this.searchSpecial()},handleCurrentChange:function(e){this.pageNo=e,this.searchSpecial()},toggleAllSelection:function(e){this.$refs.channelTable.toggleAllSelection()},select:function(e,n){this.selectRow=n,e.length>1&&e.shift()},selectAll:function(e){this.$refs.addManu.clearSelection(),this.selectRow={}},searchSpecial:function(){var e=this;this.$options.filters.swapTime(this.topicForm);var n=null!==this.topicForm.startDate?new Date(this.topicForm.startDate).getTime():null,t=null!==this.topicForm.endDate?new Date(this.topicForm.endDate).getTime():null;ga({pageNo:this.pageNo,pageSize:this.pageSize,channelid:this.topicForm.channelid,special_name:this.topicForm.special_name,state:2,timeStart:n,timeEnd:t}).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},notifyParentSelectedRow:function(){this.$emit("selected-row",this.selectRow)}}},Oa=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"addUrl"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.topicForm,size:"small"}},[t("el-form-item",{attrs:{label:"专题标题"}},[t("el-input",{attrs:{clearable:""},model:{value:e.topicForm.special_name,callback:function(n){e.$set(e.topicForm,"special_name",n)},expression:"topicForm.special_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"归属频道"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{clear:e.searchSpecial,change:e.searchSpecial},model:{value:e.topicForm.channelid,callback:function(n){e.$set(e.topicForm,"channelid",n)},expression:"topicForm.channelid"}},e._l(e.listUsableChannel,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.topicForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.searchSpecial},model:{value:e.topicForm.startDate,callback:function(n){e.$set(e.topicForm,"startDate",n)},expression:"topicForm.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.topicForm.startDate,"yyyy-MM-dd hh:mm"),format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期"},on:{change:e.searchSpecial},model:{value:e.topicForm.endDate,callback:function(n){e.$set(e.topicForm,"endDate",n)},expression:"topicForm.endDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"btn-container"},[t("el-button",{attrs:{type:"primary"},on:{click:e.searchSpecial}},[e._v("\n        查询\n        "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400",size:"small"},on:{select:e.select,"select-all":e.selectAll}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.notifyParentSelectedRow}},[e._v("确定")]),e._v(" "),t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)};Oa._withStripped=!0;var qa={render:Oa,staticRenderFns:[]},Ya=qa;var Za=!1;var Ga=t("VU/8")(Wa,Ya,!1,function(e){Za||(t("hggo"),t("AJsT"))},"data-v-1f762ffe",null);Ga.options.__file="src/components/manageSlide/addTopic.vue";var Ja=Ga.exports;function Xa(e){return be("manager/Article/page",e)}var Ka={name:"AddManuscript",data:function(){var e=this,n=this.$createElement;return{manuScript:{channel_name:"",state:"",sort:"1",startDate:"",endDate:"",channelid:"",title:"",specialid:""},clickCellIndex:-1,tableHeader:[{prop:"title",label:"稿件主题"},{prop:"createtime",label:"推送日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"article_url",label:"稿件内容",formatter:function(e,t,a,i){return n("a",{attrs:{href:a,target:"_blank"}},["查看稿件内容"])}}],channelTypeList:[],specialList:[],tableData:[],pageNo:1,pageSize:10,total:0,selectRow:{}}},computed:{showNullTag:function(){return function(e){return!e||e.length<=0}},channelTagContent:function(){return function(e){return e?""===e.channel_name?"无":e.channel_name:"无"}},specialTagContent:function(){return function(e){return e?""===e.special_name?"无":e.special_name:"无"}},showChannelAllName:function(){return function(e){var n="";return e.forEach(function(e,t,a){t!==a.length-1?n+=e.channel_name+",":n+=e.channel_name}),n}},showSpecialAllName:function(){return function(e){var n="";return e.forEach(function(e,t,a){a.length,n+="《"+e.special_name+"》"}),n}}},watch:{"manuScript.title":function(){this.searchManuScript()}},mounted:function(){this.getMunuScriptList(),this.getListUsableChannel(),this.getListUsableSpecial()},methods:{getMunuScriptList:function(){var e=this;Xa({pageNo:this.pageNo,pageSize:this.pageSize,state:1}).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},getListUsableChannel:function(){var e=this;xe().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.channelTypeList.push(i)})})},getListUsableSpecial:function(){var e=this;we().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.special_name,i.value=n.specialid,e.specialList.push(i)})})},searchManuScript:function(){var e=this;this.$options.filters.swapTime(this.manuScript);var n=null!==this.manuScript.startDate?new Date(this.manuScript.startDate).getTime():null,t=null!==this.manuScript.endDate?new Date(this.manuScript.endDate).getTime():null;Xa({pageNo:this.pageNo,pageSize:this.pageSize,channelid:this.manuScript.channelid,specialid:this.manuScript.specialid,title:this.manuScript.title,state:1,timeStart:n,timeEnd:t}).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},onSubmit:function(){console.log("submit!")},handleSizeChange:function(e){this.pageSize=e,this.searchManuScript()},handleCurrentChange:function(e){this.pageNo=e,this.searchManuScript()},select:function(e,n){this.selectRow=n,e.length>1&&e.shift()},selectAll:function(e){this.$refs.addManu.clearSelection(),this.selectRow={}},notifyParentSelectedRow:function(){this.$emit("selected-row",this.selectRow)}}},ei=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"addUrl"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.manuScript,size:"small"}},[t("el-form-item",{attrs:{label:"稿件主题"}},[t("el-input",{attrs:{clearable:""},model:{value:e.manuScript.title,callback:function(n){e.$set(e.manuScript,"title",n)},expression:"manuScript.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"归属频道"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{change:e.searchManuScript,clear:e.searchManuScript},model:{value:e.manuScript.channelid,callback:function(n){e.$set(e.manuScript,"channelid",n)},expression:"manuScript.channelid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"归属专题"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{change:e.searchManuScript,clear:e.searchManuScript},model:{value:e.manuScript.specialid,callback:function(n){e.$set(e.manuScript,"specialid",n)},expression:"manuScript.specialid"}},e._l(e.specialList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.manuScript.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.searchManuScript},model:{value:e.manuScript.startDate,callback:function(n){e.$set(e.manuScript,"startDate",n)},expression:"manuScript.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.manuScript.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.searchManuScript},model:{value:e.manuScript.endDate,callback:function(n){e.$set(e.manuScript,"endDate",n)},expression:"manuScript.endDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"btn-container"},[t("el-button",{attrs:{type:"primary"},on:{click:e.searchManuScript}},[e._v("\n        查询\n        "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"addManu",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"",size:"small ","min-height":"400"},on:{select:e.select,"select-all":e.selectAll}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{label:"归属频道",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e.showNullTag(n.row.articleChannelList)?t("el-tag",{attrs:{size:"mini"}},[e._v("无")]):e._e(),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{content:e.showChannelAllName(n.row.articleChannelList),effect:"dark",placement:"top-start"}},e._l(n.row.articleChannelList,function(n,a){return t("el-tag",{key:a,attrs:{size:"mini"}},[e._v("\n              "+e._s(e.channelTagContent(n))+"\n            ")])}),1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"归属专题",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e.showNullTag(n.row.articleSpecialList)?t("el-tag",{attrs:{size:"mini"}},[e._v("无")]):e._e(),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{"visible-arrow":!1,effect:"dark",placement:"top-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.showSpecialAllName(n.row.articleSpecialList)))]),e._v(" "),e._l(n.row.articleSpecialList,function(n,a){return t("el-tag",{key:a,attrs:{size:"mini"}},[e._v("\n              "+e._s(e.specialTagContent(n))+"\n            ")])})],2)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"置顶状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.top?t("el-tag",{staticClass:"setPointer",attrs:{size:"mini"}},[e._v("\n            已置顶\n          ")]):t("el-tag",{staticClass:"setPointer",attrs:{size:"mini"}},[e._v("\n            未置顶\n          ")])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.notifyParentSelectedRow}},[e._v("确定")]),e._v(" "),t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)};ei._withStripped=!0;var ni={render:ei,staticRenderFns:[]},ti=ni;var ai=!1;var ii=t("VU/8")(Ka,ti,!1,function(e){ai||(t("HZUi"),t("e2SV"))},"data-v-290c6304",null);ii.options.__file="src/components/manageSlide/addManuscript.vue";var li=ii.exports,oi={components:{CircleTitle:en,AddManuscript:li,AddTopic:Ja},mixins:[xa],data:function(){return{ruleForm:{chart_name:"",icon:"",imageUrl:"",indate:[new Date,new Date],sort:"",channelid:"",relativeContent:"",state:0},radio:"稿件",isChooseDate:!1,dialogVisible:!1,componentName:"AddManuscript",rules:{chart_name:[{required:!0,message:"请输入轮播图标题",trigger:"blur"},{min:0,max:64,message:"标题限定64个字符内",trigger:"change"}],channelid:[{required:!0,message:"请选择归属频道",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}],icon:[{required:!0,message:"请上传图片",trigger:"blur"}],relativeContent:{required:!0,message:"请选择关联内容",trigger:"blur"}},chartid:"",channelTypeList:[],jump_type:0,articleid:"",specialid:"",jump_url:""}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getListUsableChannel()},methods:{handleOperationClick:function(e){if(e)switch(e){case"稿件":this.componentName="AddManuscript";break;case"专题":this.componentName="AddTopic"}},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;(t={rotationChart:{chart_name:n.ruleForm.chart_name,chart_head_url:n.ruleForm.icon,jump_type:n.jump_type,articleid:n.articleid,specialid:n.specialid,channelid:n.ruleForm.channelid,expiry_date_start:new Date(n.ruleForm.indate[0]).getTime(),expiry_date_end:new Date(n.ruleForm.indate[1]).getTime(),sort:n.ruleForm.sort,state:n.ruleForm.state}},be("manager/RotationChart/add",t)).then(function(e){200===e.status&&(n.$router.push({path:"/manageSlide/list"}),n.$notify({title:"通知",message:"添加成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.ruleForm.icon=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("上传图片只能是 JPG 格式!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getListUsableChannel:function(){var e=this;xe().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.channelTypeList.push(i)})})},selectedRow:function(e){this.dialogVisible=!1,e.articleid?(this.ruleForm.relativeContent="稿件-"+e.title,this.jump_type=1,this.articleid=e.articleid,this.specialid="",this.jump_url=e.article_url):(this.ruleForm.relativeContent="专题-"+e.special_name,this.jump_type=2,this.articleid="",this.specialid=e.specialid,this.jump_url="")}}},si=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"slide create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"轮播图编辑"}}),e._v(" "),t("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"轮播图标题",prop:"chart_name"}},[t("el-input",{model:{value:e.ruleForm.chart_name,callback:function(n){e.$set(e.ruleForm,"chart_name","string"==typeof n?n.trim():n)},expression:"ruleForm.chart_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"上传图片",prop:"icon"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.getUploadUrl,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm.icon?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.icon}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"关联内容",prop:"relativeContent"}},[t("el-input",{staticStyle:{width:"87%"},attrs:{disabled:""},model:{value:e.ruleForm.relativeContent,callback:function(n){e.$set(e.ruleForm,"relativeContent",n)},expression:"ruleForm.relativeContent"}}),e._v(" "),t("el-button",{staticStyle:{width:"11%","margin-left":"1%"},attrs:{type:"primary"},on:{click:function(n){e.dialogVisible=!0}}},[e._v("添加")])],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"选择关联内容",width:"70%"},on:{"update:visible":function(n){e.dialogVisible=n}}},[t("el-radio-group",{attrs:{"text-color":"#ffffff",fill:"#694EFF",size:"small"},on:{change:function(n){e.handleOperationClick(e.radio)}},model:{value:e.radio,callback:function(n){e.radio=n},expression:"radio"}},[t("el-radio-button",{attrs:{label:"稿件"}}),e._v(" "),t("el-radio-button",{attrs:{label:"专题"}})],1),e._v(" "),t(e.componentName,{tag:"div",on:{"selected-row":e.selectedRow}})],1),e._v(" "),t("el-form-item",{attrs:{label:"归属频道",prop:"channelid"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},model:{value:e.ruleForm.channelid,callback:function(n){e.$set(e.ruleForm,"channelid",n)},expression:"ruleForm.channelid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"indate",attrs:{label:"有效期",required:""}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,type:"datetimerange","range-separator":"至",format:"yyyy-MM-dd HH:mm","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.indate,callback:function(n){e.$set(e.ruleForm,"indate",n)},expression:"ruleForm.indate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.state,callback:function(n){e.$set(e.ruleForm,"state",n)},expression:"ruleForm.state"}},[t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort",required:""}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.ruleForm.sort,callback:function(n){e.$set(e.ruleForm,"sort",e._n(n))},expression:"ruleForm.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("router-link",{attrs:{to:"/manageSlide/list"}},[t("el-button",[e._v("取消")])],1)],1)],1)],1)};si._withStripped=!0;var ri={render:si,staticRenderFns:[]},ci=ri;var mi=!1;var di=t("VU/8")(oi,ci,!1,function(e){mi||t("t6IT")},"data-v-9ef4ce2c",null);di.options.__file="src/components/manageSlide/slideCreate.vue";var pi=di.exports,ui={components:{CircleTitle:en,AddManuscript:li,AddTopic:Ja},mixins:[xa],data:function(){return{ruleForm:{chart_name:"",icon:"",imageUrl:"",indate:[],sort:"",channelid:"",relativeContent:"",state:0},radio:"稿件",isChooseDate:!1,dialogVisible:!1,componentName:"AddManuscript",rules:{chart_name:[{required:!0,message:"请输入轮播图标题",trigger:"blur"}],channelid:[{required:!0,message:"请选择归属频道",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}],relativeContent:[{required:!0,message:"请选择关联内容",trigger:"blur"}],icon:[{required:!0,message:"请上传图片",trigger:"blur"}]},chartid:"",channelTypeList:[],jump_type:0,articleid:"",specialid:"",jump_url:"",pageNo:1,isRefresh:!0}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getSlideEditInfo()},beforeRouteLeave:function(e,n,t){"/manageSlide/list"===e.path?e.meta.refresh=this.isRefresh:"/manageSlide/create"===e.path&&this.$root.eventHub.$emit("reset-options"),t()},methods:{gotoList:function(){this.isRefresh=!1,this.$router.push({path:"/manageSlide/list"})},handleOperationClick:function(e){if(e)switch(e){case"稿件":this.componentName="AddManuscript";break;case"专题":this.componentName="AddTopic"}},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;(t={rotationChart:{chartid:n.chartid,chart_name:n.ruleForm.chart_name,chart_head_url:n.ruleForm.icon,jump_type:n.jump_type,articleid:n.articleid,specialid:n.specialid,channelid:n.ruleForm.channelid,expiry_date_start:new Date(n.ruleForm.indate[0]).getTime(),expiry_date_end:new Date(n.ruleForm.indate[1]).getTime(),sort:n.ruleForm.sort,state:n.ruleForm.state}},be("manager/RotationChart/update",t)).then(function(e){200===e.status&&(n.$router.push({path:"/manageSlide/list"}),n.$notify({title:"通知",message:"编辑成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.ruleForm.icon=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("上传图片只能是 JPG 格式!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getSlideEditInfo:function(){var e,n=this;this.chartid=sessionStorage.getItem("chartid"),(e={rotationChart:{chartid:this.chartid}},be("manager/RotationChart/getRotationChartByID",e)).then(function(e){if(e.data.status){var t=e.data.result;n.ruleForm.chart_name=t.chart_name,n.ruleForm.icon=t.chart_head_url,1===t.jump_type&&t.title?n.ruleForm.relativeContent="稿件-"+t.title:2===t.jump_type&&t.special_name?n.ruleForm.relativeContent="专题-"+t.special_name:n.ruleForm.relativeContent="无",n.ruleForm.channelid=t.channelid,n.ruleForm.indate.push(new Date(t.expiry_date_start)),n.ruleForm.indate.push(new Date(t.expiry_date_end)),n.ruleForm.sort=t.sort,n.articleid=t.articleid,n.specialid=t.specialid,n.ruleForm.channelid=t.channelid,n.jump_type=t.jump_type,n.getListUsableChannel()}})},getListUsableChannel:function(){var e=this;xe().then(function(n){var t=n.data;t.status&&(t.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.channelTypeList.push(i)}),e.setChannnelid())})},setChannnelid:function(){var e=this,n=!0;console.log(this.ruleForm.channelid),this.channelTypeList.forEach(function(t){t.value===e.ruleForm.channelid&&(n=!1)}),n&&this.$set(this.ruleForm,"channelid","")},selectedRow:function(e){this.dialogVisible=!1,e.articleid?(this.ruleForm.relativeContent="稿件-"+e.title,this.jump_type=1,this.articleid=e.articleid,this.specialid="",this.jump_url=e.article_url):(this.ruleForm.relativeContent="专题-"+e.special_name,this.jump_type=2,this.articleid="",this.specialid=e.specialid,this.jump_url="")}}},hi=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"slide create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"轮播图编辑"}}),e._v(" "),t("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"轮播图标题",prop:"chart_name"}},[t("el-input",{model:{value:e.ruleForm.chart_name,callback:function(n){e.$set(e.ruleForm,"chart_name","string"==typeof n?n.trim():n)},expression:"ruleForm.chart_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"上传图片",prop:"icon"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.getUploadUrl,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm.icon?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.icon}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"关联内容",prop:"relativeContent"}},[t("el-input",{staticStyle:{width:"87%"},attrs:{disabled:""},model:{value:e.ruleForm.relativeContent,callback:function(n){e.$set(e.ruleForm,"relativeContent",n)},expression:"ruleForm.relativeContent"}}),e._v(" "),t("el-button",{staticStyle:{width:"11%","margin-left":"1%"},attrs:{type:"primary"},on:{click:function(n){e.dialogVisible=!0}}},[e._v("添加")])],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"选择关联内容",width:"70%"},on:{"update:visible":function(n){e.dialogVisible=n}}},[t("el-radio-group",{attrs:{"text-color":"#ffffff",fill:"#694EFF",size:"small"},on:{change:function(n){e.handleOperationClick(e.radio)}},model:{value:e.radio,callback:function(n){e.radio=n},expression:"radio"}},[t("el-radio-button",{attrs:{label:"稿件"}}),e._v(" "),t("el-radio-button",{attrs:{label:"专题"}})],1),e._v(" "),t(e.componentName,{tag:"div",on:{"selected-row":e.selectedRow}})],1),e._v(" "),t("el-form-item",{attrs:{label:"归属频道",prop:"channelid"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},model:{value:e.ruleForm.channelid,callback:function(n){e.$set(e.ruleForm,"channelid",n)},expression:"ruleForm.channelid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"indate",attrs:{label:"有效期",required:""}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,type:"datetimerange","range-separator":"至",format:"yyyy-MM-dd HH:mm","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.indate,callback:function(n){e.$set(e.ruleForm,"indate",n)},expression:"ruleForm.indate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.state,callback:function(n){e.$set(e.ruleForm,"state",n)},expression:"ruleForm.state"}},[t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort",required:""}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.ruleForm.sort,callback:function(n){e.$set(e.ruleForm,"sort",e._n(n))},expression:"ruleForm.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.gotoList}},[e._v("取消")])],1)],1)],1)};hi._withStripped=!0;var gi={render:hi,staticRenderFns:[]},Ai=gi;var fi=!1;var bi=t("VU/8")(ui,Ai,!1,function(e){fi||t("gc2K")},"data-v-10230c78",null);bi.options.__file="src/components/manageSlide/slideEdit.vue";var vi=bi.exports,yi=t("bOdI"),Ci=t.n(yi),_i={props:{settingArticleId:{type:String,default:"0"},manuTitle:{type:String,default:"无"}},data:function(){return{tableData:[],channelGroup:[],isShowInput:!1,submitManuTitle:this.manuTitle}},computed:{subStrSpecialLength:function(){return function(e){return e.length>23?e.substring(0,23)+"...":e}}},mounted:function(){this.getSettingManuList()},methods:{getSettingManuList:function(){var e,n=this;(e={article:{articleid:this.settingArticleId}},be("manager/Article/listUsableChannelAndSpecal",e)).then(function(e){if(e.data.status){var t=e.data.result;n.tableData=t}})},setChannelBtn:function(e){var n,t=this;(n={articleid:this.settingArticleId,channelid:e.channelid,saveOrDel:e.isChecked},be("manager/Article/saveOrDelChannelArticleRelation",n)).then(function(e){e.status&&t.$message({type:"success",message:"配置成功!"})})},setSpecialBtn:function(e){var n,t=this;e&&(n={articleid:this.settingArticleId,specialid:e.specialid,saveOrDel:e.isChecked},be("manager/Article/saveOrDelSpecialArticleRelation",n)).then(function(e){e.status&&t.$message({type:"success",message:"配置成功!"})})},showInput:function(){this.isShowInput=!0,this.$nextTick(function(){this.$refs.manuInput.focus()})},hideInputAndSubmit:function(){var e,n=this;this.isShowInput=!1,(e={article:{articleid:this.settingArticleId,title:this.submitManuTitle}},be("manager/Article/updateTitle",e)).then(function(e){e.status&&n.$message({type:"success",message:"修改成功!"})})}}},xi=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"title-class"},[e._v("\n    稿件主题:\n    "),e.isShowInput?e._e():t("span",[e._v("\n      "+e._s(e.submitManuTitle)+"\n      "),t("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:e.showInput}},[e._v("修改")])]),e._v(" "),e.isShowInput?t("span",[t("el-input",{ref:"manuInput",staticStyle:{width:"400px"},attrs:{type:"text"},on:{blur:e.hideInputAndSubmit},model:{value:e.submitManuTitle,callback:function(n){e.submitManuTitle=n},expression:"submitManuTitle"}})],1):e._e()]),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"}},[t("el-table-column",{attrs:{prop:"channel_name",label:"归属频道",align:"left",fixed:""},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-checkbox",{on:{change:function(t){e.setChannelBtn(n.row)}},model:{value:n.row.isChecked,callback:function(t){e.$set(n.row,"isChecked",t)},expression:"scope.row.isChecked"}},[e._v("\n            "+e._s(n.row.channel_name)+"\n          ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"parent_channel_name",label:"归属专题",align:"left",fixed:""},scopedSlots:e._u([{key:"default",fn:function(n){return e._l(n.row.specialList,function(n,a){return t("p",{key:a},[t("el-checkbox",{attrs:{title:n.special_name},on:{change:function(t){e.setSpecialBtn(n)}},model:{value:n.isChecked,callback:function(t){e.$set(n,"isChecked",t)},expression:"item.isChecked"}},[e._v("\n              "+e._s(e.subStrSpecialLength(n.special_name))+"\n            ")])],1)})}}])})],1)],1)])};xi._withStripped=!0;var wi={render:xi,staticRenderFns:[]},Fi=wi;var ki=!1;var Si=t("VU/8")(_i,Fi,!1,function(e){ki||(t("yRe9"),t("i42W"))},"data-v-684fe112",null);Si.options.__file="src/components/manageManuscript/settingManu.vue";var Ei=Si.exports,Di={components:{CircleTitle:en,SettingManu:Ei},data:function(){var e=this,n=this.$createElement;return{manuScript:{channel_name:"",state:"",sort:"1",startDate:"",endDate:"",channelid:"",title:"",specialid:""},channelTypeList:[],specialList:[],clickCellIndex:-1,tableHeader:[{prop:"title",label:"稿件主题"},{prop:"createtime",label:"推送日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"article_url",label:"稿件内容",formatter:function(e,t,a,i){return n("a",{attrs:{href:a,target:"_blank"}},["查看稿件内容"])}},{prop:"state",label:"状态",width:"100",formatter:function(e,n,t,a){return 0===t?"待上线":1===t?"已上线":2===t?"已下线":void 0}}],tableData:[],batchProcess:1,processList:[{value:1,label:"批量删除"},{value:2,label:"其他"}],comment:!1,share:!1,praise:!1,collect:!1,index:-1,pageNo:1,pageSize:10,total:0,dialogVisible:!1,componentName:"",articleidList:[],selfSelectAll:!1,selectedManuInfo:[],settingArticleId:"0",manuTitle:""}},computed:{showNullTag:function(){return function(e){return!e||e.length<=0}},channelTagContent:function(){return function(e){return e?""===e.channel_name?"无":e.channel_name:"无"}},specialTagContent:function(){return function(e){return e?""===e.special_name?"无":e.special_name:"无"}},showChannelAllName:function(){return function(e){var n="";return e.forEach(function(e,t,a){t!==a.length-1?n+=e.channel_name+",":n+=e.channel_name}),n}},showSpecialAllName:function(){return function(e){var n="";return e.forEach(function(e,t,a){a.length,n+="《"+e.special_name+"》"}),n}}},watch:{"manuScript.title":function(){this.searchManuScript()}},mounted:function(){this.getMunuScriptList(),this.getListUsableChannel(),this.getListUsableSpecial()},methods:{getMunuScriptList:function(){var e=this;Xa({pageNo:this.pageNo,pageSize:this.pageSize}).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},getListUsableChannel:function(){var e=this;xe().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.channelTypeList.push(i)})})},getListUsableSpecial:function(){var e=this;we().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.special_name,i.value=n.specialid,e.specialList.push(i)})})},onSubmit:function(){console.log("submit!")},handleSizeChange:function(e){this.pageSize=e,this.searchManuScript()},handleCurrentChange:function(e){this.pageNo=e,this.searchManuScript()},selectAll:function(e){e.length>0?this.selfSelectAll=!0:this.selfSelectAll=!1},handleComment:function(e){1!==e.state?e.allow_comment?this.updateManu(e.articleid,"allow_comment",!1):this.updateManu(e.articleid,"allow_comment",!0):this.$message({type:"error",message:"已上线稿件不可操作评论权限!"})},handleShare:function(e){1!==e.state?e.allow_share?this.updateManu(e.articleid,"allow_share",!1):this.updateManu(e.articleid,"allow_share",!0):this.$message({type:"error",message:"已上线稿件不可操作分享权限!"})},handlePraise:function(e){1!==e.state?e.allow_like?this.updateManu(e.articleid,"allow_like",!1):this.updateManu(e.articleid,"allow_like",!0):this.$message({type:"error",message:"已上线稿件不可操作点赞权限!"})},handleCollect:function(e){1!==e.state?e.allow_collect?this.updateManu(e.articleid,"allow_collect",!1):this.updateManu(e.articleid,"allow_collect",!0):this.$message({type:"error",message:"已上线稿件不可操作收藏权限!"})},setManuUnTop:function(e){this.updateManu(e.articleid,"top",!0)},setManuTop:function(e){this.updateManu(e.articleid,"top",!1)},upManu:function(e){var n=this;if(e.articleChannelList.length<=0&&e.articleSpecialList.length<=0)return this.$message({type:"error",message:"该稿件还没有配置频道和专题, 不能上稿!"}),!1;0===e.state||2===e.state?this.$confirm("确定要上稿吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.updateManu(e.articleid,"state",1)}).catch(function(){}):this.$message({type:"error",message:"该稿件已上线!"})},downManu:function(e){var n=this;1===e.state?this.$confirm("确定要撤稿吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.updateManu(e.articleid,"state",2)}).catch(function(){}):this.$message({type:"error",message:"该稿件已撤稿!"})},settingManu:function(e){1!==e.state?(this.dialogVisible=!0,this.componentName=Ei,this.settingArticleId=e.articleid,this.manuTitle=e.title):this.$message({type:"error",message:"已上线稿件不可配置!"})},deleteManu:function(e){var n=this;1!==e.state?this.$confirm('是否删除"'+e.title+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={article:{articleid:e.articleid}},be("manager/Article/delete",t)).then(function(e){e.status&&n.$message({type:"success",message:"删除成功!"}),n.searchManuScript()})}).catch(function(){}):this.$message({type:"error",message:"已上线稿件不可删除!"})},updateManu:function(e,n,t){var a,i=this;(a={article:Ci()({articleid:e},n,t)},be("manager/Article/update",a)).then(function(e){e.status&&(i.$message({type:"success",message:"操作成功!"}),i.searchManuScript())})},selectionChange:function(e){var n=this;this.articleidList=[],e.forEach(function(e,t,a){n.articleidList.push(e.articleid)}),this.selectedManuInfo=e},deleteManyManu:function(){var e=this;if(1===this.batchProcess){var n=!0;if(this.articleidList.length<=0)return this.$message({type:"error",message:"请至少选择一个稿件!"}),!1;var t='您所选择的:"';if(this.selectedManuInfo.forEach(function(e,a,i){1===e.state&&(n=!1,a!==i.length-1?t+="《"+e.title+"》":t+=" 已上线稿件, 不可删除! ")}),!n)return this.$message({type:"error",message:t}),!1;this.$confirm("确定删除所选稿件?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n;(n={articleidList:e.articleidList},be("manager/Article/batchDelete",n)).then(function(n){console.log(n),n.status&&e.$message({type:"success",message:"批量删除成功!"}),e.searchManuScript()})}).catch(function(){})}},closeDialog:function(){this.componentName="",this.searchManuScript()},searchManuScript:function(){var e=this;this.$options.filters.swapTime(this.manuScript);var n=null!==this.manuScript.startDate?new Date(this.manuScript.startDate).getTime():null,t=null!==this.manuScript.endDate?new Date(this.manuScript.endDate).getTime():null;Xa({pageNo:this.pageNo,pageSize:this.pageSize,channelid:this.manuScript.channelid,specialid:this.manuScript.specialid,title:this.manuScript.title,state:this.manuScript.state,timeStart:n,timeEnd:t}).then(function(n){if(n.data.status){var t=n.data.result;console.log(t),e.tableData=t.list,e.total=t.total}})}}},Li=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"manuscript"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"稿件管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.manuScript}},[t("el-form-item",{attrs:{label:"稿件主题"}},[t("el-input",{attrs:{clearable:""},model:{value:e.manuScript.title,callback:function(n){e.$set(e.manuScript,"title",n)},expression:"manuScript.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"归属频道",prop:"channelid"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{clear:e.searchManuScript,change:e.searchManuScript},model:{value:e.manuScript.channelid,callback:function(n){e.$set(e.manuScript,"channelid",n)},expression:"manuScript.channelid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"归属专题"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{clear:e.searchManuScript,change:e.searchManuScript},model:{value:e.manuScript.specialid,callback:function(n){e.$set(e.manuScript,"specialid",n)},expression:"manuScript.specialid"}},e._l(e.specialList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.searchManuScript},model:{value:e.manuScript.state,callback:function(n){e.$set(e.manuScript,"state",n)},expression:"manuScript.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"待上线"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"已上线"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"已下线"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.manuScript.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.searchManuScript},model:{value:e.manuScript.startDate,callback:function(n){e.$set(e.manuScript,"startDate",n)},expression:"manuScript.startDate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.manuScript.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.searchManuScript},model:{value:e.manuScript.endDate,callback:function(n){e.$set(e.manuScript,"endDate",n)},expression:"manuScript.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"68px"},attrs:{type:"primary"},on:{click:e.searchManuScript}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"select-all":e.selectAll,"selection-change":e.selectionChange}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{label:"归属频道",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e.showNullTag(n.row.articleChannelList)?t("el-tag",{attrs:{size:"mini"}},[e._v("无")]):e._e(),e._v(" "),t("el-tooltip",{key:n.row.articleid,staticClass:"item",attrs:{content:e.showChannelAllName(n.row.articleChannelList),effect:"dark",placement:"top-start"}},e._l(n.row.articleChannelList,function(n,a){return t("el-tag",{key:a,attrs:{size:"mini"}},[e._v("\n              "+e._s(e.channelTagContent(n))+"\n            ")])}),1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"归属专题",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e.showNullTag(n.row.articleSpecialList)?t("el-tag",{attrs:{size:"mini"}},[e._v("无")]):e._e(),e._v(" "),t("el-tooltip",{key:n.row.articleid,staticClass:"item",attrs:{content:e.showSpecialAllName(n.row.articleSpecialList),"visible-arrow":!1,effect:"dark",placement:"top-start"}},e._l(n.row.articleSpecialList,function(n,a){return t("el-tag",{key:a,attrs:{size:"mini"}},[e._v("\n              "+e._s(e.specialTagContent(n))+"\n            ")])}),1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"置顶状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.top?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击取消置顶",placement:"top"}},[t("el-tag",{staticClass:"setPointer",staticStyle:{width:"60px",color:"#694eff"},attrs:{size:"mini"},nativeOn:{click:function(t){e.setManuTop(n.row)}}},[e._v("\n              取消置顶\n            ")])],1):t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击置顶",placement:"top"}},[t("el-tag",{staticClass:"setPointer",staticStyle:{width:"60px"},attrs:{size:"mini"},nativeOn:{click:function(t){e.setManuUnTop(n.row)}}},[e._v("\n              置顶\n            ")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"上稿/撤稿",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"manu-container"},[t("span",{class:["manu",1!==n.row.state&&(n.row.articleChannelList.length>0||n.row.articleSpecialList.length>0)?"manu-up-active":""],on:{click:function(t){e.upManu(n.row)}}},[e._v("\n              上稿\n            ")]),e._v(" "),t("span",{class:["manu",1===n.row.state?"manu-back-active":""],on:{click:function(t){e.downManu(n.row)}}},[e._v("\n              撤稿\n            ")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"manu-container"},[t("span",{class:["manu",1!==n.row.state?"delete-active":""],on:{click:function(t){e.settingManu(n.row)}}},[e._v("\n              配置\n            ")]),e._v(" "),t("span",{class:["manu",1!==n.row.state?"delete-active":""],on:{click:function(t){e.deleteManu(n.row)}}},[e._v("\n              删除\n            ")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"权限配置",align:"center",width:"115"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"评论",placement:"top"}},[t("div",{staticClass:"allow_comment",style:{backgroundColor:n.row.allow_comment?"#ffa507":"#B5B8D9"},on:{click:function(t){e.handleComment(n.row)}}},[t("i",{staticClass:"iconfont icon-manu-comment",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分享",placement:"top"}},[t("div",{staticClass:"allow_share",style:{backgroundColor:n.row.allow_share?"#1883FF":"#B5B8D9"},on:{click:function(t){e.handleShare(n.row)}}},[t("i",{staticClass:"iconfont icon-share",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点赞",placement:"top"}},[t("div",{staticClass:"allow_like",style:{backgroundColor:n.row.allow_like?"#F00808":"#B5B8D9"},on:{click:function(t){e.handlePraise(n.row)}}},[t("i",{staticClass:"iconfont icon-praise",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"收藏",placement:"top"}},[t("div",{staticClass:"allow_collect",style:{backgroundColor:n.row.allow_collect?"#694EFF":"#B5B8D9"},on:{click:function(t){e.handleCollect(n.row)}}},[t("i",{staticClass:"iconfont icon-collect",staticStyle:{color:"white"}})])])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"custom-dialog",title:"稿件信息配置",width:"50%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",attrs:{"setting-article-id":e.settingArticleId,"manu-title":e.manuTitle}})],1)],1)};Li._withStripped=!0;var Bi={render:Li,staticRenderFns:[]},Mi=Bi;var Ii=!1;var Ti=t("VU/8")(Di,Mi,!1,function(e){Ii||(t("6Crm"),t("2F6G"))},"data-v-7749c06d",null);Ti.options.__file="src/components/manageManuscript/manageManuscriptList.vue";var $i=Ti.exports;var zi={components:{CircleTitle:en},data:function(){var e=this,n=this.$createElement;return{StartpageForm:{state:"",region:"",startDate:"",endDate:"",sort:"1"},clickCellIndex:-1,sortValue:-1,pageNo:1,pageSize:10,total:0,tableHeader:[{prop:"img_url",label:"启动页图片",formatter:function(e,t,a,i){return n("img",{class:"topic-table-pic",attrs:{src:a}})}},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"residence_time",label:"驻留时间"},{prop:"img_url",label:"图片地址",width:"100"},{prop:"jump_url",label:"链接地址",width:"100"},{prop:"expiry_date_start",label:"开始日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"expiry_date_end",label:"结束日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"state",label:"状态",formatter:function(e,n,t,a){return 1===parseInt(t)?"使用中":0===parseInt(t)?"待上线":"已下线"}},{prop:"sort",label:"排序",formatter:function(t,a,i,l){return l===e.clickCellIndex?n("input",{attrs:{type:"text",id:l,autofocus:"autofocus"},class:"self-sort",domProps:{value:i}}):n("span",{class:"sort-container",attrs:{"data-id":l}},[i])}}],tableData:[],batchProcess:1,processList:[{value:1,label:"批量操作"},{value:2,label:"其他"}],selectAdId:""}},mounted:function(){var e=this;this.getStartpagelList(),this.$root.eventHub.$on("reset-options",function(){e.resetOptions()})},activated:function(){var e=this.$route.meta;e.hasOwnProperty("refresh")&&e.refresh&&(this.getStartpagelList(),delete this.$route.meta.refresh)},beforeRouteLeave:function(e,n,t){"/manageStartpage/create"===e.path&&this.resetOptions(),t()},beforeDestroy:function(){this.$root.eventHub.$off("reset-options")},methods:{resetOptions:function(){this.StartpageForm={state:"",region:"",startDate:"",endDate:"",sort:"1"},this.pageNo=1,this.getStartpagelList()},getStartpagelList:function(){var e=this,n=null!==this.StartpageForm.startDate?new Date(this.StartpageForm.startDate).getTime():null,t=null!==this.StartpageForm.endDate?new Date(this.StartpageForm.endDate).getTime():null;(function(e){return be("manager/AppAdv/page",e)})({pageNo:this.pageNo,pageSize:this.pageSize,state:this.StartpageForm.state,timeStart:n,timeEnd:t}).then(function(n){if(n.status){var t=n.data.result.list;e.tableData=t,e.total=t.total}})},searchStartpage:function(){this.pageNo=1,this.$options.filters.swapTime(this.StartpageForm),this.getStartpagelList()},handleDelete:function(e){var n=this;this.$confirm("是否删除该广告页?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={appAdv:{adid:e.adid}},be("manager/AppAdv/delete",t)).then(function(e){console.log(e),e.data.status&&n.$message({type:"success",message:"删除成功!"}),n.getStartpagelList()})}).catch(function(){})},handleEdit:function(e){sessionStorage.setItem("adid",e.adid),this.$router.push({name:"startpageEdit",params:e})},handleSizeChange:function(e){this.pageSize=e,this.searchStartpage()},handleCurrentChange:function(e){this.pageNo=e,this.getStartpagelList()},toggleAllSelection:function(e){this.$refs.slideTable.toggleAllSelection()},cellClick:function(e,n,t,a){var i=this,l=a.target.dataset.id;l&&(this.clickCellIndex=parseInt(l)),this.$nextTick(function(){document.querySelectorAll(".el-tooltip > input.self-sort").forEach(function(n){n&&(i.selectAdId=e.adid,n.focus(),n.onkeyup=function(e){n.value&&(i.sortValue=parseInt(n.value))})})})},cellMouseLeave:function(e,n,t,a){var i,l=this;if(this.clickCellIndex=-1,-1===this.sortValue||this.selectAdId!==e.adid)return!1;(i={appAdv:{adid:e.adid,sort:this.sortValue}},be("manager/AppAdv/updateSort",i)).then(function(e){e.status&&(l.getStartpagelList(),l.sortValue=-1)})}}},Ui=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"startpage-list"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"广告页管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.StartpageForm}},[t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.searchStartpage},model:{value:e.StartpageForm.state,callback:function(n){e.$set(e.StartpageForm,"state",n)},expression:"StartpageForm.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"待上线"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"使用中"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"已下线"}})],1)],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"-70px"},attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.StartpageForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.searchStartpage},model:{value:e.StartpageForm.startDate,callback:function(n){e.$set(e.StartpageForm,"startDate",n)},expression:"StartpageForm.startDate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.StartpageForm.endDate,"yyyy-MM-dd hh:mm"),format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期"},on:{change:e.searchStartpage},model:{value:e.StartpageForm.endDate,callback:function(n){e.$set(e.StartpageForm,"endDate",n)},expression:"StartpageForm.endDate"}})],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.searchStartpage}},[e._v("\n          搜索\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("router-link",{attrs:{to:"/manageStartpage/create"}},[t("el-button",{attrs:{type:"primary"}},[e._v("\n            添加启动页\n            "),t("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"slideTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"cell-click":e.cellClick,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.handleEdit(n.row)}}}),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(t){e.handleDelete(n.row)}}})]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],"current-page":e.pageNo,background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};Ui._withStripped=!0;var Ni={render:Ui,staticRenderFns:[]},Ri=Ni;var Vi=!1;var ji=t("VU/8")(zi,Ri,!1,function(e){Vi||(t("60N6"),t("fHLH"))},"data-v-4a2d718c",null);ji.options.__file="src/components/manageStartpage/startpageList.vue";var Pi=ji.exports,Hi={components:{CircleTitle:en},mixins:[xa],data:function(){return{editForm:{img_url:"",channelBelong:"1",jump_url:"",validity:[new Date,new Date],sort:"",residence_time:""},isChooseDate:!1,dialogVisible:!1,componentName:"AddManuscript",rules:{img_url:[{required:!0,message:"请上传启动页图片",trigger:"change"}],validity:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],residence_time:[{required:!0,message:"请输入驻留时间",trigger:"change"},{type:"number",message:"驻留时间必须为数字"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}]}}},computed:{getUploadUrl:function(){return _e()}},methods:{submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;(t={appAdv:{img_url:n.editForm.img_url,jump_url:n.editForm.jump_url,residence_time:n.editForm.residence_time,sort:n.editForm.sort,expiry_date_start:new Date(n.editForm.validity[0]).getTime(),expiry_date_end:new Date(n.editForm.validity[1]).getTime()}},be("manager/AppAdv/add",t)).then(function(e){200===e.status&&(n.$router.push({path:"/manageStartpage/list"}),n.$notify({title:"通知",message:"编辑成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.editForm.img_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t}}},Qi=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"startpage create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"启动页新增"}}),e._v(" "),t("el-form",{ref:"editForm",staticClass:"rule-form",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{staticClass:"item",attrs:{label:"图标配置",prop:"img_url"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.getUploadUrl,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editForm.img_url?t("img",{staticClass:"avatar",attrs:{src:e.editForm.img_url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"链接地址"}},[t("el-input",{model:{value:e.editForm.jump_url,callback:function(n){e.$set(e.editForm,"jump_url","string"==typeof n?n.trim():n)},expression:"editForm.jump_url"}})],1),e._v(" "),t("el-form-item",{staticClass:"validity",attrs:{label:"有效期",required:""}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,disabled:e.isChooseDate,type:"datetimerange",format:"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.editForm.validity,callback:function(n){e.$set(e.editForm,"validity",n)},expression:"editForm.validity"}})],1),e._v(" "),t("el-form-item",{staticClass:"residence_time",attrs:{label:"驻留时间",prop:"residence_time"}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.editForm.residence_time,callback:function(n){e.$set(e.editForm,"residence_time",e._n(n))},expression:"editForm.residence_time"}}),e._v(" "),t("span",[e._v("s")])],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort",required:""}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.editForm.sort,callback:function(n){e.$set(e.editForm,"sort",e._n(n))},expression:"editForm.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("editForm")}}},[e._v("提交")]),e._v(" "),t("router-link",{attrs:{to:"/manageStartpage/list"}},[t("el-button",[e._v("取消")])],1)],1)],1)],1)};Qi._withStripped=!0;var Wi={render:Qi,staticRenderFns:[]},Oi=Wi;var qi=!1;var Yi=t("VU/8")(Hi,Oi,!1,function(e){qi||t("UhHm")},"data-v-2131f52c",null);Yi.options.__file="src/components/manageStartpage/startpageCreate.vue";var Zi=Yi.exports,Gi={components:{CircleTitle:en},mixins:[xa],data:function(){return{editForm:{img_url:"",channelBelong:"1",jump_url:""},adid:"",isRefresh:!0}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getEditInfo()},methods:{getEditInfo:function(){var e,n=this;be("manager/AppAdv/getEmbeddedAdv",e).then(function(e){e.data.status&&(console.log(e.data),n.editForm.img_url=e.data.result.bg_url,n.editForm.jump_url=e.data.result.jump_url)})},submitForm:function(){var e,n=this;(e={embedded:{title:"",bg_url:this.editForm.img_url,jump_url:this.editForm.jump_url}},be("manager/AppAdv/saveEmbeddedAdv",e)).then(function(e){200===e.status&&n.$notify({title:"通知",message:"保存成功",type:"success"})})},clearInnerPage:function(){this.editForm.img_url="",this.editForm.jump_url="",this.submitForm()},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.editForm.img_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t}}},Ji=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"startpage create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"内嵌广告页管理"}}),e._v(" "),t("el-form",{ref:"editForm",staticClass:"rule-form",attrs:{model:e.editForm,"label-width":"100px"}},[t("el-form-item",{staticClass:"item",attrs:{label:"图标配置"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.getUploadUrl,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editForm.img_url?t("img",{staticClass:"avatar",attrs:{src:e.editForm.img_url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"链接地址"}},[t("el-input",{model:{value:e.editForm.jump_url,callback:function(n){e.$set(e.editForm,"jump_url",n)},expression:"editForm.jump_url"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),t("el-button",{attrs:{type:"danger"},on:{click:e.clearInnerPage}},[e._v("清除")])],1)],1)],1)};Ji._withStripped=!0;var Xi={render:Ji,staticRenderFns:[]},Ki=Xi;var el=!1;var nl=t("VU/8")(Gi,Ki,!1,function(e){el||t("oUVL")},"data-v-628553f2",null);nl.options.__file="src/components/manageStartpage/innerAdverEdit.vue";var tl=nl.exports,al={components:{CircleTitle:en},mixins:[xa],data:function(){return{editForm:{img_url:"",channelBelong:"1",jump_url:"",validity:[],sort:"",residence_time:""},isChooseDate:!1,dialogVisible:!1,componentName:"AddManuscript",rules:{validity:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],residence_time:[{required:!0,message:"请输入驻留时间",trigger:"change"},{type:"number",message:"驻留时间必须为数字"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}]},adid:"",isRefresh:!0}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getEditInfo()},beforeRouteLeave:function(e,n,t){"/manageStartpage/list"===e.path?e.meta.refresh=this.isRefresh:"/manageStartpage/create"===e.path&&this.$root.eventHub.$emit("reset-options"),t()},methods:{gotoList:function(){this.isRefresh=!1,this.$router.push({path:"/manageStartpage/list"})},getEditInfo:function(){var e,n=this;this.adid=sessionStorage.getItem("adid"),(e={appAdv:{adid:this.adid}},be("manager/AppAdv/getAppAdvByID",e)).then(function(e){if(e.data.status){var t=e.data.result;console.log(t),n.editForm.img_url=t.img_url,n.editForm.jump_url=t.jump_url,n.editForm.residence_time=t.residence_time,n.editForm.sort=t.sort,n.editForm.validity.push(t.expiry_date_start),n.editForm.validity.push(t.expiry_date_end)}})},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;(t={appAdv:{adid:n.adid,img_url:n.editForm.img_url,jump_url:n.editForm.jump_url,residence_time:n.editForm.residence_time,sort:n.editForm.sort,expiry_date_start:new Date(n.editForm.validity[0]).getTime(),expiry_date_end:new Date(n.editForm.validity[1]).getTime()}},be("manager/AppAdv/update",t)).then(function(e){200===e.status&&(n.$router.push({path:"/manageStartpage/list"}),n.$notify({title:"通知",message:"编辑成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.editForm.img_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t}}},il=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"startpage create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"启动页编辑"}}),e._v(" "),t("el-form",{ref:"editForm",staticClass:"rule-form",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{staticClass:"item",attrs:{label:"图标配置"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.getUploadUrl,headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editForm.img_url?t("img",{staticClass:"avatar",attrs:{src:e.editForm.img_url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"链接地址"}},[t("el-input",{model:{value:e.editForm.jump_url,callback:function(n){e.$set(e.editForm,"jump_url",n)},expression:"editForm.jump_url"}})],1),e._v(" "),t("el-form-item",{staticClass:"validity",attrs:{label:"有效期",required:""}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,disabled:e.isChooseDate,type:"datetimerange",format:"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.editForm.validity,callback:function(n){e.$set(e.editForm,"validity",n)},expression:"editForm.validity"}})],1),e._v(" "),t("el-form-item",{staticClass:"residence_time",attrs:{label:"驻留时间",prop:"residence_time"}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.editForm.residence_time,callback:function(n){e.$set(e.editForm,"residence_time",e._n(n))},expression:"editForm.residence_time"}}),e._v(" "),t("span",[e._v("s")])],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort",required:""}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.editForm.sort,callback:function(n){e.$set(e.editForm,"sort",e._n(n))},expression:"editForm.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("editForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.gotoList}},[e._v("取消")])],1)],1)],1)};il._withStripped=!0;var ll={render:il,staticRenderFns:[]},ol=ll;var sl=!1;var rl=t("VU/8")(al,ol,!1,function(e){sl||t("TD7F")},"data-v-597598f8",null);rl.options.__file="src/components/manageStartpage/startpageEdit.vue";var cl=rl.exports;function ml(e){return be("manager/OnDemandChannel/listUsableParentChannel",e)}function dl(e){return be("manager/Channel/listChannelType",e)}var pl={props:{videoid:{type:String,default:"0"},manuTitle:{type:String,default:"无"}},data:function(){return{tableData:[],channelGroup:[],isShowInput:!1,submitManuTitle:this.manuTitle}},computed:{},mounted:function(){this.getSettingChannel()},methods:{getSettingChannel:function(){var e,n=this;(e={video:{videoid:this.videoid}},be("manager/OnDemandVideo/listUsableChannelAndIsBelong",e)).then(function(e){if(e.data.status){var t=e.data.result;n.tableData=t}})},setChannelBtn:function(e){var n,t=this;(n={videoid:this.videoid,channelid:e.channelid,saveOrDel:e.isChecked},be("manager/OnDemandVideo/saveOrDelChannelVideoRelation",n)).then(function(e){e.status&&t.$message({type:"success",message:"配置成功!"})})},showInput:function(){this.isShowInput=!0,this.$nextTick(function(){this.$refs.manuInput.focus()})},hideInputAndSubmit:function(){var e,n=this;this.isShowInput=!1,(e={video:{videoid:this.videoid,title:this.submitManuTitle}},be("manager/OnDemandVideo/updateTitle",e)).then(function(e){e.status&&n.$message({type:"success",message:"修改成功!"})})}}},ul=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"title-class"},[t("span",[e._v("稿件主题:\n      "),e.isShowInput?e._e():t("span",[e._v("\n        "+e._s(e.submitManuTitle)+"\n        "),t("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:e.showInput}},[e._v("修改")])]),e._v(" "),e.isShowInput?t("span",[t("el-input",{ref:"manuInput",staticStyle:{width:"400px"},attrs:{type:"text"},on:{blur:e.hideInputAndSubmit},model:{value:e.submitManuTitle,callback:function(n){e.submitManuTitle=n},expression:"submitManuTitle"}})],1):e._e()])]),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",staticStyle:{width:"450px"},attrs:{data:e.tableData,stripe:"",size:"mini","min-height":"400"}},[t("el-table-column",{attrs:{prop:"channel_name",label:"归属频道",align:"left",width:"448",fixed:""},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-checkbox",{on:{change:function(t){e.setChannelBtn(n.row)}},model:{value:n.row.isChecked,callback:function(t){e.$set(n.row,"isChecked",t)},expression:"scope.row.isChecked"}},[e._v("\n            "+e._s(n.row.channel_name)+"\n          ")])]}}])})],1)],1)])};ul._withStripped=!0;var hl={render:ul,staticRenderFns:[]},gl=hl;var Al=!1;var fl=t("VU/8")(pl,gl,!1,function(e){Al||(t("FEou"),t("pfQI"))},"data-v-488e6763",null);fl.options.__file="src/components/manageSublive/settingManu.vue";var bl=fl.exports,vl={components:{CircleTitle:en,SettingManu:bl},data:function(){var e=this,n=this.$createElement;return{subLive:{channel_name:"",state:"",startDate:"",endDate:"",channelid:"",title:""},channelTypeList:[],clickCellIndex:-1,tableHeader:[{prop:"title",label:"稿件主题"},{prop:"createtime",label:"推送日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"digest",label:"稿件内容"},{prop:"play_url",label:"默认视频链接",formatter:function(e,t,a,i){return n("a",{attrs:{href:a,target:"_blank"}},[a])}},{prop:"state",label:"状态",width:"100",formatter:function(e,n,t,a){return 0===t?"待上线":1===t?"已上线":2===t?"已下线":void 0}}],tableData:[],comment:!1,share:!1,praise:!1,collect:!1,index:-1,pageNo:1,pageSize:10,total:0,dialogVisible:!1,componentName:"",videoid:"0",manuTitle:""}},computed:{showNullTag:function(){return function(e){return!e||e.length<=0}},channelTagContent:function(){return function(e){return e?""===e.channel_name?"无":e.channel_name:"无"}},showChannelAllName:function(){return function(e){var n="";return e.forEach(function(e,t,a){t!==a.length-1?n+=e.channel_name+",":n+=e.channel_name}),n}}},watch:{"subLive.title":function(){this.getSubLiveList()}},mounted:function(){this.getSubLiveList(),this.getListUsableChannel()},methods:{getSubLiveList:function(){var e=this;this.$options.filters.swapTime(this.subLive);var n,t=null!==this.subLive.startDate?new Date(this.subLive.startDate).getTime():null,a=null!==this.subLive.endDate?new Date(this.subLive.endDate).getTime():null;(n={pageNo:this.pageNo,pageSize:this.pageSize,channelid:this.subLive.channelid,title:this.subLive.title,state:this.subLive.state,timeStart:t,timeEnd:a},be("manager/OnDemandVideo/page",n)).then(function(n){if(n.data.status){var t=n.data.result;console.log(t),e.tableData=t.list,e.total=t.total}})},getListUsableChannel:function(){var e,n=this;be("manager/OnDemandVideo/listUsableChannel",e).then(function(e){var t=e.data;t.status&&t.result.forEach(function(e,t,a){var i={};i.label=e.channel_name,i.value=e.channelid,n.channelTypeList.push(i)})})},handleSizeChange:function(e){this.pageSize=e,this.getSubLiveList()},handleCurrentChange:function(e){this.pageNo=e,this.getSubLiveList()},handleComment:function(e){1!==e.state?e.allow_comment?this.updateSubLive(e.videoid,"allow_comment",!1):this.updateSubLive(e.videoid,"allow_comment",!0):this.$message({type:"error",message:"已上线稿件不可操作评论权限!"})},handleShare:function(e){1!==e.state?e.allow_share?this.updateSubLive(e.videoid,"allow_share",!1):this.updateSubLive(e.videoid,"allow_share",!0):this.$message({type:"error",message:"已上线稿件不可操作分享权限!"})},handlePraise:function(e){1!==e.state?e.allow_like?this.updateSubLive(e.videoid,"allow_like",!1):this.updateSubLive(e.videoid,"allow_like",!0):this.$message({type:"error",message:"已上线稿件不可操作点赞权限!"})},handleCollect:function(e){1!==e.state?e.allow_collect?this.updateSubLive(e.videoid,"allow_collect",!1):this.updateSubLive(e.videoid,"allow_collect",!0):this.$message({type:"error",message:"已上线稿件不可操作收藏权限!"})},setSubLiveUnTop:function(e){this.updateSubLive(e.videoid,"top",!0)},setSubLiveTop:function(e){this.updateSubLive(e.videoid,"top",!1)},upSubLive:function(e){var n=this;if(e.channelList.length<=0)return this.$message({type:"error",message:"该稿件还没有配置频道, 不能上稿!"}),!1;0===e.state||2===e.state?this.$confirm("确定要上稿吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.updateSubLive(e.videoid,"state",1)}).catch(function(){}):this.$message({type:"error",message:"该稿件已上线!"})},downSubLive:function(e){var n=this;1===e.state?this.$confirm("确定要撤稿吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.updateSubLive(e.videoid,"state",2)}).catch(function(){}):this.$message({type:"error",message:"该稿件还未上稿!"})},settingSubLive:function(e){1!==e.state?(this.dialogVisible=!0,this.componentName=bl,this.videoid=e.videoid,this.manuTitle=e.title):this.$message({type:"error",message:"请撤稿后再配置!"})},deleteSubLive:function(e){var n=this;1!==e.state?this.$confirm('是否删除"'+e.title+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={video:{videoid:e.videoid}},be("manager/OnDemandVideo/delete",t)).then(function(e){e.status&&n.$message({type:"success",message:"删除成功!"}),n.getSubLiveList()})}).catch(function(){}):this.$message({type:"error",message:"已上线稿件不可删除!"})},updateSubLive:function(e,n,t){var a,i=this;(a={video:Ci()({videoid:e},n,t)},be("manager/OnDemandVideo/update",a)).then(function(e){e.status&&(i.$message({type:"success",message:"操作成功!"}),i.getSubLiveList())})},selectionChange:function(e){var n=this;this.articleidList=[],e.forEach(function(e,t,a){n.articleidList.push(e.articleid)}),this.selectedManuInfo=e},closeDialog:function(){this.componentName="",this.getSubLiveList()}}},yl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"sublive"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"点播管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.subLive}},[t("el-form-item",{staticStyle:{"margin-left":"-29px"},attrs:{label:"稿件主题"}},[t("el-input",{attrs:{clearable:""},model:{value:e.subLive.title,callback:function(n){e.$set(e.subLive,"title",n)},expression:"subLive.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"频道",prop:"channelid"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{clear:e.getSubLiveList,change:e.getSubLiveList},model:{value:e.subLive.channelid,callback:function(n){e.$set(e.subLive,"channelid",n)},expression:"subLive.channelid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.getSubLiveList},model:{value:e.subLive.state,callback:function(n){e.$set(e.subLive,"state",n)},expression:"subLive.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"待上线"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"已上线"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"已下线"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.subLive.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.getSubLiveList},model:{value:e.subLive.startDate,callback:function(n){e.$set(e.subLive,"startDate",n)},expression:"subLive.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"date-left",staticStyle:{"margin-left":"0px"},attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.subLive.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.getSubLiveList},model:{value:e.subLive.endDate,callback:function(n){e.$set(e.subLive,"endDate",n)},expression:"subLive.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.getSubLiveList}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{label:"归属频道",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e.showNullTag(n.row.channelList)?t("el-tag",{attrs:{size:"mini"}},[e._v("无")]):e._e(),e._v(" "),t("el-tooltip",{key:n.row.videoid,staticClass:"item",attrs:{content:e.showChannelAllName(n.row.channelList),effect:"dark",placement:"top-start"}},e._l(n.row.channelList,function(n,a){return t("el-tag",{key:a,attrs:{size:"mini"}},[e._v("\n              "+e._s(e.channelTagContent(n))+"\n            ")])}),1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"置顶状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.top?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击取消置顶",placement:"top"}},[t("el-tag",{staticClass:"setPointer",staticStyle:{width:"60px",color:"#694eff"},attrs:{size:"mini"},nativeOn:{click:function(t){e.setSubLiveTop(n.row)}}},[e._v("\n              取消置顶\n            ")])],1):t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击置顶",placement:"top"}},[t("el-tag",{staticClass:"setPointer",staticStyle:{width:"60px"},attrs:{size:"mini"},nativeOn:{click:function(t){e.setSubLiveUnTop(n.row)}}},[e._v("\n              置顶\n            ")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"上稿/撤稿",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"manu-container"},[t("span",{class:["manu",1!==n.row.state&&n.row.channelList.length>0?"manu-up-active":""],on:{click:function(t){e.upSubLive(n.row)}}},[e._v("\n              上稿\n            ")]),e._v(" "),t("span",{class:["manu",1===n.row.state?"manu-back-active":""],on:{click:function(t){e.downSubLive(n.row)}}},[e._v("\n              撤稿\n            ")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"manu-container"},[t("span",{class:["manu",1!==n.row.state?"delete-active":""],on:{click:function(t){e.settingSubLive(n.row)}}},[e._v("\n              配置\n            ")]),e._v(" "),t("span",{class:["manu",1!==n.row.state?"delete-active":""],on:{click:function(t){e.deleteSubLive(n.row)}}},[e._v("\n              删除\n            ")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"权限配置",align:"center",width:"115"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"评论",placement:"top"}},[t("div",{staticClass:"allow_comment",style:{backgroundColor:n.row.allow_comment?"#ffa507":"#B5B8D9"},on:{click:function(t){e.handleComment(n.row)}}},[t("i",{staticClass:"iconfont icon-manu-comment",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分享",placement:"top"}},[t("div",{staticClass:"allow_share",style:{backgroundColor:n.row.allow_share?"#1883FF":"#B5B8D9"},on:{click:function(t){e.handleShare(n.row)}}},[t("i",{staticClass:"iconfont icon-share",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点赞",placement:"top"}},[t("div",{staticClass:"allow_like",style:{backgroundColor:n.row.allow_like?"#F00808":"#B5B8D9"},on:{click:function(t){e.handlePraise(n.row)}}},[t("i",{staticClass:"iconfont icon-praise",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"收藏",placement:"top"}},[t("div",{staticClass:"allow_collect",style:{backgroundColor:n.row.allow_collect?"#694EFF":"#B5B8D9"},on:{click:function(t){e.handleCollect(n.row)}}},[t("i",{staticClass:"iconfont icon-collect",staticStyle:{color:"white"}})])])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"custom-dialog",title:"点播信息配置",width:"38%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",attrs:{videoid:e.videoid,"manu-title":e.manuTitle}})],1)],1)};yl._withStripped=!0;var Cl={render:yl,staticRenderFns:[]},_l=Cl;var xl=!1;var wl=t("VU/8")(vl,_l,!1,function(e){xl||(t("W/Q3"),t("4mCt"))},"data-v-2534dd02",null);wl.options.__file="src/components/manageSublive/subliveList.vue";var Fl=wl.exports,kl={components:{CircleTitle:en},data:function(){var e=this,n=this.$createElement;return{channelForm:{channel_name:"",channel_typeid:"",state:"",sort:"1",startDate:"",endDate:"",parent_channelid:""},clickCellIndex:-1,tableHeader:[{prop:"channel_name",label:"频道名"},{prop:"parent_channel_name",label:"父级频道",formatter:function(e,n,t,a){return t||"无"}},{prop:"channel_type_name",label:"分类"},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"icon_url",label:"图标默认",formatter:function(e,t,a,i){return n("img",{class:"topic-table-pic",attrs:{src:a}})}},{prop:"description",label:"频道描述",width:"100"},{prop:"state",label:"状态",formatter:function(e,n,t,a){return 1===parseInt(t)?"启用":"停用"}},{prop:"fixed",label:"位置固定",formatter:function(e,n,t,a){return t?"固定":"不固定"}},{prop:"sort",label:"优先级",formatter:function(t,a,i,l){return l===e.clickCellIndex?n("input",{attrs:{type:"text",id:"input",autofocus:"autofocus"},class:"self-sort",domProps:{value:i}}):n("span",{class:"sort-container",attrs:{"data-id":l}},[i])}}],tableData:[],channelTypeList:[],sortValue:-1,pageNo:1,pageSize:10,total:0,parentChannelList:[],selectChannelId:""}},watch:{"channelForm.channel_name":function(e){this.searchChannel()}},mounted:function(){var e=this;this.getChannelList(),this.getChannelType(),this.getParentChannel(),this.$root.eventHub.$on("reset-options",function(){e.resetOptions()})},activated:function(){var e=this.$route.meta;e.hasOwnProperty("refresh")&&e.refresh&&(this.getChannelList(),delete this.$route.meta.refresh)},beforeRouteLeave:function(e,n,t){"/subChannel/create"!==e.path&&"/subLive/list"!==e.path||this.resetOptions(),t()},beforeDestroy:function(){this.$root.eventHub.$off("reset-options")},methods:{resetOptions:function(){this.channelForm={channel_name:"",channel_typeid:"",state:"",sort:"1",startDate:"",endDate:"",parent_channelid:""},this.pageNo=1,this.getChannelList()},getChannelList:function(){var e,n=this;(e={pageNo:this.pageNo,pageSize:this.pageSize,channel_name:this.channelForm.channel_name,channel_typeid:this.channelForm.channel_typeid,state:this.channelForm.state,timeStart:new Date(this.channelForm.startDate).getTime()||"",timeEnd:new Date(this.channelForm.endDate).getTime()||"",parent_channelid:this.channelForm.parent_channelid},be("manager/OnDemandChannel/page",e)).then(function(e){if(e.data.status){var t=e.data.result;n.tableData=t.list,n.total=t.total}})},handleSizeChange:function(e){this.pageSize=e,this.searchChannel()},handleCurrentChange:function(e){this.pageNo=e,this.getChannelList()},toggleAllSelection:function(e){this.$refs.channelTable.toggleAllSelection()},cellClick:function(e,n,t,a){var i=this;if(a.target.classList.contains("sort-container"))if(1!==e.state){var l=a.target.dataset.id;l&&(this.clickCellIndex=parseInt(l)),this.$nextTick(function(){document.querySelectorAll(".el-tooltip > input.self-sort").forEach(function(n){n&&(i.selectChannelId=e.channelid,n.focus(),n.onkeyup=function(e){n.value&&(i.sortValue=parseInt(n.value))})})})}else this.$message({type:"error",message:"启用状态下不能排序!"})},cellMouseLeave:function(e,n,t,a){var i,l=this;if(this.clickCellIndex=-1,-1===this.sortValue||this.selectChannelId!==e.channelid)return!1;(i={channel:{channelid:e.channelid,sort:this.sortValue}},be("manager/OnDemandChannel/updateSort",i)).then(function(e){e.status&&(l.getChannelList(),l.sortValue=-1)})},handleEdit:function(e){1!==e.state?(sessionStorage.setItem("channelid",e.channelid),this.$router.push({path:"/subChannel/edit",query:{pageNo:this.pageNo}})):this.$message({type:"error",message:"启用状态下不可编辑!"})},changeState:function(e){var n,t=this,a=0;1===e.state?a=0:0===e.state&&(a=1),(n={channel:{channelid:e.channelid,state:a}},be("manager/OnDemandChannel/updateState",n)).then(function(e){e.status&&(0===a?t.$message({type:"success",message:"修改状态为停用"}):t.$message({type:"success",message:"修改状态为启用"}),t.getChannelList())})},handleDelete:function(e){var n=this;1!==e.state?this.$confirm('是否删除"'+e.channel_name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={channel:{channelid:e.channelid}},be("manager/OnDemandChannel/delete",t)).then(function(e){e.data.status&&n.$message({type:"success",message:"删除成功!"}),n.getChannelList()})}).catch(function(){}):this.$message({type:"error",message:"启用状态下不可删除!"})},getChannelType:function(){var e=this;dl().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.channel_type_name,i.value=n.channel_typeid,e.channelTypeList.push(i)})})},searchChannel:function(){this.pageNo=1,this.getChannelList()},getParentChannel:function(){var e=this;ml().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.channel_name,i.value=n.channelid,e.parentChannelList.push(i)})})}}},Sl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"sub-channel"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"频道列表"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.channelForm}},[t("el-form-item",{attrs:{label:"频道"}},[t("el-input",{attrs:{clearable:""},model:{value:e.channelForm.channel_name,callback:function(n){e.$set(e.channelForm,"channel_name",n)},expression:"channelForm.channel_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"父级频道",prop:"parent_channel_name"}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:""},on:{clear:e.searchChannel,change:e.searchChannel},model:{value:e.channelForm.parent_channelid,callback:function(n){e.$set(e.channelForm,"parent_channelid",n)},expression:"channelForm.parent_channelid"}},e._l(e.parentChannelList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"分类"}},[t("el-select",{attrs:{clearable:"",placeholder:""},on:{clear:e.searchChannel,change:e.searchChannel},model:{value:e.channelForm.channel_typeid,callback:function(n){e.$set(e.channelForm,"channel_typeid",n)},expression:"channelForm.channel_typeid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.searchChannel},model:{value:e.channelForm.state,callback:function(n){e.$set(e.channelForm,"state",n)},expression:"channelForm.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.channelForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.searchChannel},model:{value:e.channelForm.startDate,callback:function(n){e.$set(e.channelForm,"startDate",n)},expression:"channelForm.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"date-left",staticStyle:{left:"0"},attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.channelForm.endDate,"yyyy-MM-dd hh:mm"),format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期"},on:{change:e.searchChannel},model:{value:e.channelForm.endDate,callback:function(n){e.$set(e.channelForm,"endDate",n)},expression:"channelForm.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:e.searchChannel}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("router-link",{attrs:{to:"/subChannel/create"}},[t("el-button",{attrs:{type:"primary"}},[e._v("\n            添加频道\n            "),t("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"cell-click":e.cellClick,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改状态",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-remove-outline"},on:{click:function(t){e.changeState(n.row)}}})],1),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.handleEdit(n.row)}}}),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(t){e.handleDelete(n.row)}}})]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],"current-page":e.pageNo,background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};Sl._withStripped=!0;var El={render:Sl,staticRenderFns:[]},Dl=El;var Ll=!1;var Bl=t("VU/8")(kl,Dl,!1,function(e){Ll||t("IyeX")},null,null);Bl.options.__file="src/components/manageSublive/subChannel/channelList.vue";var Ml=Bl.exports,Il={components:{CircleTitle:en},data:function(){return{iconList:[],iconCheckList:[],index:0}},mounted:function(){this.getIconList()},methods:{getIconList:function(){var e=this;Vt().then(function(n){if(n.data.status){e.iconCheckList=[],e.iconList=n.data.result;for(var t=0;t<e.iconList.length;t++)e.iconCheckList.push(!1)}})},iconSelected:function(e,n){this.index=e;for(var t=0;t<this.iconList.length;t++)this.$set(this.iconCheckList,t,!1);this.$set(this.iconCheckList,e,!0)},submitIcon:function(){this.$emit("submit-icon",this.iconList[this.index])}}},Tl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"icon-container"},[t("div",{staticClass:"channel-icon"},e._l(e.iconList,function(n,a){return t("span",{key:a,class:e.iconCheckList[a]?"click-border":"moren-border",on:{click:function(n){e.iconSelected(a,e.iconCheckList[a])}}},[t("img",{attrs:{src:n}})])}),0),e._v(" "),t("div",{staticClass:"icon-submit"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitIcon}},[e._v("确定")])],1)])};Tl._withStripped=!0;var $l={render:Tl,staticRenderFns:[]},zl=$l;var Ul=!1;var Nl=t("VU/8")(Il,zl,!1,function(e){Ul||t("W037")},"data-v-52e96834",null);Nl.options.__file="src/components/manageSublive/subChannel/chooseIcon.vue";var Rl=Nl.exports,Vl={components:{CircleTitle:en,ChooseIcon:Rl},data:function(){return{createFrom:{channel_name:"",parent_channel_name:"",sort:"",icon_url:"",channel_type_name:"",state:0,description:"",fixed:!1,parent_channelid:"",channel_typeid:""},rules:{channel_name:[{required:!0,message:"请输入频道名称",trigger:"blur"},{validator:function(e,n,t){return n.length>10?t(new Error("频道名称长度不能超过10")):t()},trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}]},channelTypeList:[],parentChannelList:[{label:"无",value:""}],dialogVisible:!1,componentName:"",fixedDisabled:!1}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getChannelType(),this.getParentChannel()},methods:{submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;n.channelTypeList.forEach(function(e,t,a){e.value===n.createFrom.channel_typeid&&(n.createFrom.channel_type_name=e.label)}),n.parentChannelList.forEach(function(e,t,a){e.value===n.createFrom.parent_channelid&&(n.createFrom.parent_channel_name=e.label)}),(t={channel:{parent_channelid:n.createFrom.parent_channelid,parent_channel_name:n.createFrom.parent_channel_name,channel_name:n.createFrom.channel_name,channel_typeid:n.createFrom.channel_typeid,channel_type_name:n.createFrom.channel_type_name,icon_url:n.createFrom.icon_url,state:n.createFrom.state,description:n.createFrom.description,fixed:n.createFrom.fixed,sort:n.createFrom.sort}},be("manager/OnDemandChannel/add",t)).then(function(e){200===e.status&&(n.$router.push({path:"/subChannel/list"}),n.$notify({title:"通知",message:"添加成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.createFrom.icon_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getChannelType:function(){var e=this;dl().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){0===t&&(e.createFrom.channel_typeid=n.channel_typeid);var i={};i.label=n.channel_type_name,i.value=n.channel_typeid,e.channelTypeList.push(i)})})},getParentChannel:function(){var e=this;ml().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){if(e.channelid!==n.channelid){var i={};i.label=n.channel_name,i.value=n.channelid,e.parentChannelList.push(i)}})})},chooseIcon:function(){this.dialogVisible=!0,this.componentName="ChooseIcon"},closeDialog:function(){this.dialogVisible=!1,this.componentName=""},submitIcon:function(e){this.createFrom.icon_url=e,this.dialogVisible=!1,this.componentName=""},disableIsFixed:function(){this.createFrom.parent_channelid?(this.createFrom.fixed=!1,this.fixedDisabled=!0):this.fixedDisabled=!1}}},jl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"频道新增"}}),e._v(" "),t("el-form",{ref:"createFrom",staticClass:"rule-form",attrs:{model:e.createFrom,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"频道名称",prop:"channel_name"}},[t("el-input",{model:{value:e.createFrom.channel_name,callback:function(n){e.$set(e.createFrom,"channel_name","string"==typeof n?n.trim():n)},expression:"createFrom.channel_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"父级频道",prop:"parent_channel_name"}},[t("el-select",{attrs:{filterable:"",placeholder:""},on:{change:e.disableIsFixed},model:{value:e.createFrom.parent_channelid,callback:function(n){e.$set(e.createFrom,"parent_channelid",n)},expression:"createFrom.parent_channelid"}},e._l(e.parentChannelList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"归属类别",prop:"channel_type_name"}},[t("el-select",{attrs:{filterable:"",placeholder:""},model:{value:e.createFrom.channel_typeid,callback:function(n){e.$set(e.createFrom,"channel_typeid",n)},expression:"createFrom.channel_typeid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置"}},[t("div",{staticClass:"icon-choose-container"},[t("div",{staticClass:"moren-icon"},[t("img",{attrs:{src:e.createFrom.icon_url}})]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.chooseIcon}},[e._v("选择图标")])],1)]),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createFrom.state,callback:function(n){e.$set(e.createFrom,"state",n)},expression:"createFrom.state"}},[t("el-option",{attrs:{value:0,label:"停用"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"启用"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"频道简述"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.createFrom.description,callback:function(n){e.$set(e.createFrom,"description",n)},expression:"createFrom.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否固定",prop:"fixed"}},[t("el-select",{attrs:{disabled:e.fixedDisabled,placeholder:"请选择"},model:{value:e.createFrom.fixed,callback:function(n){e.$set(e.createFrom,"fixed",n)},expression:"createFrom.fixed"}},[t("el-option",{attrs:{value:!0,label:"是"}}),e._v(" "),t("el-option",{attrs:{value:!1,label:"否"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort"}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.createFrom.sort,callback:function(n){e.$set(e.createFrom,"sort",e._n(n))},expression:"createFrom.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("createFrom")}}},[e._v("提交")]),e._v(" "),t("router-link",{attrs:{to:"/subChannel/list"}},[t("el-button",[e._v("取消")])],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"图标选择",width:"40%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",on:{"submit-icon":e.submitIcon}})],1)],1)};jl._withStripped=!0;var Pl={render:jl,staticRenderFns:[]},Hl=Pl;var Ql=!1;var Wl=t("VU/8")(Vl,Hl,!1,function(e){Ql||t("ibr8")},"data-v-fe4615ea",null);Wl.options.__file="src/components/manageSublive/subChannel/channelCreate.vue";var Ol=Wl.exports,ql={components:{CircleTitle:en,ChooseIcon:Rl},data:function(){return{editFrom:{channel_name:"",parent_channel_name:"",parent_channelid:"",sort:0,icon_url:"",channel_type_name:"",state:"",description:"",fixed:"",channel_typeid:""},rules:{channel_name:[{required:!0,message:"请输入频道名称",trigger:"blur"},{validator:function(e,n,t){return n.length>10?t(new Error("频道名称长度不能超过10")):t()},trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}]},channelTypeList:[],parentChannelList:[{label:"无",value:""}],channelid:"",disabledChooseParentChannel:!1,dialogVisible:!1,componentName:"",isRefresh:!0,fixedDisabled:!1}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getEditInfo(),this.getChannelType(),this.getParentChannel()},beforeRouteLeave:function(e,n,t){"/subChannel/list"===e.path?e.meta.refresh=this.isRefresh:"/subChannel/create"===e.path&&this.$root.eventHub.$emit("reset-options"),t()},methods:{gotoList:function(){this.isRefresh=!1,this.$router.push({path:"/subChannel/list"})},getEditInfo:function(){var e,n=this;this.channelid=sessionStorage.getItem("channelid"),(e={channel:{channelid:this.channelid}},be("manager/OnDemandChannel/getChannelByID",e)).then(function(e){if(e.data.status){var t=e.data.result;n.editFrom.channel_name=t.channel_name,n.editFrom.parent_channel_name=t.parent_channel_name,n.editFrom.sort=t.sort,n.editFrom.icon_url=t.icon_url,n.editFrom.channel_type_name=t.channel_type_name,n.editFrom.state=t.state,n.editFrom.description=t.description,n.editFrom.fixed=t.fixed,n.editFrom.channel_typeid=t.channel_typeid,n.editFrom.parent_channelid=t.parent_channelid,t.countChildren>0&&(n.disabledChooseParentChannel=!0),n.disableIsFixed()}})},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;n.channelTypeList.forEach(function(e,t,a){e.value===n.editFrom.channel_typeid&&(n.editFrom.channel_type_name=e.label)}),n.parentChannelList.forEach(function(e,t,a){e.value===n.editFrom.parent_channelid&&(n.editFrom.parent_channel_name=e.label)}),(t={channel:{parent_channelid:n.editFrom.parent_channelid,parent_channel_name:n.editFrom.parent_channel_name,channelid:n.channelid,channel_name:n.editFrom.channel_name,channel_typeid:n.editFrom.channel_typeid,channel_type_name:n.editFrom.channel_type_name,icon_url:n.editFrom.icon_url,state:n.editFrom.state,description:n.editFrom.description,fixed:n.editFrom.fixed,sort:n.editFrom.sort}},be("manager/OnDemandChannel/update",t)).then(function(e){200===e.status&&(n.$router.push({path:"/subChannel/list"}),n.$notify({title:"通知",message:"编辑成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.editFrom.icon_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getChannelType:function(){var e=this;dl().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){0===t&&(e.editFrom.channel_typeid=n.channel_typeid);var i={};i.label=n.channel_type_name,i.value=n.channel_typeid,e.channelTypeList.push(i)})})},getParentChannel:function(){var e=this;ml().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){if(e.channelid!==n.channelid){var i={};i.label=n.channel_name,i.value=n.channelid,e.parentChannelList.push(i)}})})},chooseIcon:function(){this.dialogVisible=!0,this.componentName="ChooseIcon"},closeDialog:function(){this.dialogVisible=!1,this.componentName=""},submitIcon:function(e){this.editFrom.icon_url=e,this.dialogVisible=!1,this.componentName=""},disableIsFixed:function(){this.editFrom.parent_channelid?(this.editFrom.fixed=!1,this.fixedDisabled=!0):this.fixedDisabled=!1}}},Yl=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"频道编辑"}}),e._v(" "),t("el-form",{ref:"editFrom",staticClass:"rule-form",attrs:{model:e.editFrom,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"频道名称",prop:"channel_name"}},[t("el-input",{model:{value:e.editFrom.channel_name,callback:function(n){e.$set(e.editFrom,"channel_name","string"==typeof n?n.trim():n)},expression:"editFrom.channel_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"父级频道",prop:"parent_channel_name"}},[t("el-select",{attrs:{disabled:e.disabledChooseParentChannel,filterable:"",placeholder:""},on:{change:e.disableIsFixed},model:{value:e.editFrom.parent_channelid,callback:function(n){e.$set(e.editFrom,"parent_channelid",n)},expression:"editFrom.parent_channelid"}},e._l(e.parentChannelList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"归属类别",prop:"channel_type_name"}},[t("el-select",{attrs:{filterable:"",placeholder:""},model:{value:e.editFrom.channel_typeid,callback:function(n){e.$set(e.editFrom,"channel_typeid",n)},expression:"editFrom.channel_typeid"}},e._l(e.channelTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置"}},[t("div",{staticClass:"icon-choose-container"},[t("div",{staticClass:"moren-icon"},[t("img",{attrs:{src:e.editFrom.icon_url}})]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.chooseIcon}},[e._v("选择图标")])],1)]),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editFrom.state,callback:function(n){e.$set(e.editFrom,"state",n)},expression:"editFrom.state"}},[t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"频道简述"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.editFrom.description,callback:function(n){e.$set(e.editFrom,"description",n)},expression:"editFrom.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否固定",prop:"fixed"}},[t("el-select",{attrs:{disabled:e.fixedDisabled,placeholder:"请选择"},model:{value:e.editFrom.fixed,callback:function(n){e.$set(e.editFrom,"fixed",n)},expression:"editFrom.fixed"}},[t("el-option",{attrs:{value:!0,label:"是"}}),e._v(" "),t("el-option",{attrs:{value:!1,label:"否"}})],1)],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort"}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.editFrom.sort,callback:function(n){e.$set(e.editFrom,"sort",e._n(n))},expression:"editFrom.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("editFrom")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.gotoList}},[e._v("取消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"图标选择",width:"40%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",on:{"submit-icon":e.submitIcon}})],1)],1)};Yl._withStripped=!0;var Zl={render:Yl,staticRenderFns:[]},Gl=Zl;var Jl=!1;var Xl=t("VU/8")(ql,Gl,!1,function(e){Jl||t("AiQH")},"data-v-4596064e",null);Xl.options.__file="src/components/manageSublive/subChannel/channelEdit.vue";var Kl=Xl.exports;function eo(e){return be("manager/LiveBroadcast/page",e)}var no={components:{CircleTitle:en},data:function(){var e=this,n=this.$createElement;return{live:{live_name:"",state:"",startDate:"",endDate:""},channelTypeList:[],specialList:[],clickCellIndex:-1,tableHeader:[{prop:"live_name",label:"主题"},{prop:"createtime",label:"创建日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"live_head_url",label:"导视图",formatter:function(e,t,a,i){return n("img",{class:"topic-table-pic",attrs:{src:a}})}},{prop:"expiry_date_end",label:"直播周期",width:200,formatter:function(n,t,a,i){return e.$options.filters.FormatDate(n.expiry_date_start,"yyyy-MM-dd hh:mm")+"至"+e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"live_url",label:"默认视频链接",formatter:function(e,t,a,i){return n("a",{attrs:{href:a,target:"_blank"}},[a])}},{prop:"showState",label:"状态",width:"100"}],tableData:[],comment:!1,share:!1,praise:!1,collect:!1,index:-1,pageNo:1,pageSize:10,total:0,dialogVisible:!1}},watch:{"live.live_name":function(){this.searchLive()}},mounted:function(){var e=this;this.getLiveList(),this.$root.eventHub.$on("reset-options",function(){e.resetLiveOptions()})},activated:function(){var e=this.$route.meta;e.hasOwnProperty("refresh")&&e.refresh&&(this.getLiveList(),delete this.$route.meta.refresh)},beforeRouteLeave:function(e,n,t){"/live/create"===e.path&&this.resetLiveOptions(),t()},beforeDestroy:function(){this.$root.eventHub.$off("reset-options")},methods:{getLiveList:function(){var e=this,n=null!==this.live.startDate?new Date(this.live.startDate).getTime():null,t=null!==this.live.endDate?new Date(this.live.endDate).getTime():null;eo({pageNo:this.pageNo,pageSize:this.pageSize,live_name:this.live.live_name,state:this.live.state,timeStart:n,timeEnd:t}).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},handleSizeChange:function(e){this.pageSize=e,this.searchLive()},handleCurrentChange:function(e){this.pageNo=e,this.getLiveList()},upManu:function(e){this.updateLive(e.liveid,"state",1)},downManu:function(e){this.updateLive(e.liveid,"state",0)},editLive:function(e){1===e.state?this.$message({type:"error",message:"不可编辑已上稿的直播!"}):(sessionStorage.setItem("liveid",e.liveid),this.$router.push({path:"/live/edit"}))},handleComment:function(e){1!==e.state?e.allow_comment?this.updateLive(e.liveid,"allow_comment",!1):this.updateLive(e.liveid,"allow_comment",!0):this.$message({type:"error",message:"上稿的直播不可操作评论权限!"})},handleShare:function(e){1!==e.state?e.allow_share?this.updateLive(e.liveid,"allow_share",!1):this.updateLive(e.liveid,"allow_share",!0):this.$message({type:"error",message:"上稿的直播不可操作分享权限!"})},handlePraise:function(e){1!==e.state?e.allow_like?this.updateLive(e.liveid,"allow_like",!1):this.updateLive(e.liveid,"allow_like",!0):this.$message({type:"error",message:"上稿的直播不可操作点赞权限!"})},handleCollect:function(e){1!==e.state?e.allow_collect?this.updateLive(e.liveid,"allow_collect",!1):this.updateLive(e.liveid,"allow_collect",!0):this.$message({type:"error",message:"上稿的直播不可操作收藏权限!"})},setTop:function(e){this.updateLive(e.liveid,"top",!0)},setUnTop:function(e){this.updateLive(e.liveid,"top",!1)},deleteLive:function(e){var n=this;1!==e.state?this.$confirm('是否删除"'+e.live_name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={liveBroadcast:{liveid:e.liveid}},be("manager/LiveBroadcast/delete",t)).then(function(e){e.status&&n.$message({type:"success",message:"删除成功!"}),n.searchLive()})}).catch(function(){}):this.$message({type:"error",message:"不可删除已上稿的直播!"})},updateLive:function(e,n,t){var a,i=this;(a={liveBroadcast:Ci()({liveid:e},n,t)},be("manager/LiveBroadcast/updateState",a)).then(function(e){e.status&&(i.$message({type:"success",message:"操作成功!"}),i.searchLive())})},closeDialog:function(){this.componentName=""},searchLive:function(){var e=this;this.$options.filters.swapTime(this.live);var n=null!==this.live.startDate?new Date(this.live.startDate).getTime():null,t=null!==this.live.endDate?new Date(this.live.endDate).getTime():null;eo({pageNo:this.pageNo,pageSize:this.pageSize,live_name:this.live.live_name,state:this.live.state,timeStart:n,timeEnd:t}).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},resetLiveOptions:function(){this.live={live_name:"",state:"",startDate:"",endDate:""},this.pageNo=1}}},to=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"live"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"直播管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.live}},[t("el-form-item",{attrs:{label:"直播主题"}},[t("el-input",{attrs:{clearable:""},model:{value:e.live.live_name,callback:function(n){e.$set(e.live,"live_name",n)},expression:"live.live_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.searchLive},model:{value:e.live.state,callback:function(n){e.$set(e.live,"state",n)},expression:"live.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"撤销"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"待播"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"直播中"}}),e._v(" "),t("el-option",{attrs:{value:3,label:"已结束"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.live.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.searchLive},model:{value:e.live.startDate,callback:function(n){e.$set(e.live,"startDate",n)},expression:"live.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.live.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.searchLive},model:{value:e.live.endDate,callback:function(n){e.$set(e.live,"endDate",n)},expression:"live.endDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"btn-container"},[t("el-button",{attrs:{type:"primary"},on:{click:e.searchLive}},[e._v("\n            查询\n            "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("router-link",{attrs:{to:"/live/create"}},[t("el-button",{attrs:{type:"primary"}},[e._v("\n              添加直播\n              "),t("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{label:"置顶状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.top?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击取消置顶",placement:"top"}},[t("el-tag",{staticClass:"setPointer",staticStyle:{width:"60px",color:"#694eff"},attrs:{size:"mini"},nativeOn:{click:function(t){e.setUnTop(n.row)}}},[e._v("\n              取消置顶\n            ")])],1):t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击置顶",placement:"top"}},[t("el-tag",{staticClass:"setPointer",staticStyle:{width:"60px"},attrs:{size:"mini"},nativeOn:{click:function(t){e.setTop(n.row)}}},[e._v("\n              置顶\n            ")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"manu-container"},[0===n.row.state?t("span",{staticClass:"manu delete-active",on:{click:function(t){e.upManu(n.row)}}},[e._v("\n              上稿\n            ")]):e._e(),e._v(" "),1===n.row.state?t("span",{staticClass:"manu delete-active",on:{click:function(t){e.downManu(n.row)}}},[e._v("\n              撤稿\n            ")]):e._e(),e._v(" "),t("span",{class:["manu",1!==n.row.state?"delete-active":""],on:{click:function(t){e.editLive(n.row)}}},[e._v("\n              编辑\n            ")]),e._v(" "),t("span",{class:["manu",1!==n.row.state?"delete-active":""],on:{click:function(t){e.deleteLive(n.row)}}},[e._v("\n              删除\n            ")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"权限配置",align:"center",width:"115"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"评论",placement:"top"}},[t("div",{staticClass:"allow_comment",style:{backgroundColor:n.row.allow_comment?"#ffa507":"#B5B8D9"},on:{click:function(t){e.handleComment(n.row)}}},[t("i",{staticClass:"iconfont icon-manu-comment",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分享",placement:"top"}},[t("div",{staticClass:"allow_share",style:{backgroundColor:n.row.allow_share?"#1883FF":"#B5B8D9"},on:{click:function(t){e.handleShare(n.row)}}},[t("i",{staticClass:"iconfont icon-share",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点赞",placement:"top"}},[t("div",{staticClass:"allow_like",style:{backgroundColor:n.row.allow_like?"#F00808":"#B5B8D9"},on:{click:function(t){e.handlePraise(n.row)}}},[t("i",{staticClass:"iconfont icon-praise",staticStyle:{color:"white"}})])]),e._v(" "),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"收藏",placement:"top"}},[t("div",{staticClass:"allow_collect",style:{backgroundColor:n.row.allow_collect?"#694EFF":"#B5B8D9"},on:{click:function(t){e.handleCollect(n.row)}}},[t("i",{staticClass:"iconfont icon-collect",staticStyle:{color:"white"}})])])]}}])},[e._v("85\n        ")])],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30],"current-page":e.pageNo,background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};to._withStripped=!0;var ao={render:to,staticRenderFns:[]},io=ao;var lo=!1;var oo=t("VU/8")(no,io,!1,function(e){lo||(t("R9UR"),t("iy11"))},"data-v-43dc1bb0",null);oo.options.__file="src/components/manageLive/liveList.vue";var so=oo.exports,ro={components:{CircleTitle:en},mixins:[xa],data:function(){return{createForm:{live_name:"",icon_url:"",url:"",isTop:!1,liveRange:[new Date,new Date],isComment:!1,isShare:!1,isPraise:!1,isCollect:!1,state:1},rules:{live_name:[{required:!0,message:"请输入直播主题",trigger:"blur"}],url:[{validator:function(e,n,t){if(!/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(n))return t(new Error("请输入正确的地址"));t()},trigger:"blur"}],icon_url:[{required:!0,message:"请上传图片",trigger:"blur"}]}}},computed:{getUploadUrl:function(){return _e()}},methods:{submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;(t={liveBroadcast:{live_name:n.createForm.live_name,live_head_url:n.createForm.icon_url,live_url:n.createForm.url,expiry_date_start:n.createForm.liveRange[0].getTime(),expiry_date_end:n.createForm.liveRange[1].getTime(),top:n.createForm.isTop,allow_comment:n.createForm.isComment,allow_share:n.createForm.isShare,allow_like:n.createForm.isPraise,allow_collect:n.createForm.isCollect,state:n.createForm.state}},be("manager/LiveBroadcast/add",t)).then(function(e){200===e.status&&(n.$router.push({path:"/live/list"}),n.$notify({title:"通知",message:"添加成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.createForm.icon_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},chooseTime:function(e){Re(this,this.createForm.liveRange,e)}}},co=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"直播新增"}}),e._v(" "),t("el-form",{ref:"createForm",staticClass:"rule-form",attrs:{model:e.createForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"直播主题",prop:"live_name"}},[t("el-input",{model:{value:e.createForm.live_name,callback:function(n){e.$set(e.createForm,"live_name","string"==typeof n?n.trim():n)},expression:"createForm.live_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置",prop:"icon_url"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:e.getUploadUrl,headers:e.uploadHeaders,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.createForm.icon_url?t("img",{staticClass:"avatar",attrs:{src:e.createForm.icon_url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"直播周期",prop:"channel_name"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,type:"datetimerange",format:"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.chooseTime},model:{value:e.createForm.liveRange,callback:function(n){e.$set(e.createForm,"liveRange",n)},expression:"createForm.liveRange"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"内容链接",prop:"url"}},[t("el-input",{model:{value:e.createForm.url,callback:function(n){e.$set(e.createForm,"url",n)},expression:"createForm.url"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否置顶",prop:"fixed"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createForm.isTop,callback:function(n){e.$set(e.createForm,"isTop",n)},expression:"createForm.isTop"}},[t("el-option",{attrs:{value:!0,label:"是"}}),e._v(" "),t("el-option",{attrs:{value:!1,label:"否"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"权限配置"}},[t("el-checkbox",{attrs:{label:"评论"},model:{value:e.createForm.isComment,callback:function(n){e.$set(e.createForm,"isComment",n)},expression:"createForm.isComment"}}),e._v(" "),t("el-checkbox",{attrs:{label:"分享",name:"auth"},model:{value:e.createForm.isShare,callback:function(n){e.$set(e.createForm,"isShare",n)},expression:"createForm.isShare"}}),e._v(" "),t("el-checkbox",{attrs:{label:"收藏",name:"auth"},model:{value:e.createForm.isCollect,callback:function(n){e.$set(e.createForm,"isCollect",n)},expression:"createForm.isCollect"}}),e._v(" "),t("el-checkbox",{attrs:{label:"点赞",name:"auth"},model:{value:e.createForm.isPraise,callback:function(n){e.$set(e.createForm,"isPraise",n)},expression:"createForm.isPraise"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否上稿"}},[t("el-radio-group",{model:{value:e.createForm.state,callback:function(n){e.$set(e.createForm,"state",n)},expression:"createForm.state"}},[t("el-radio",{attrs:{label:1}},[e._v("\n          是\n        ")]),e._v(" "),t("el-radio",{attrs:{label:0}},[e._v("\n          否\n        ")])],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("createForm")}}},[e._v("提交")]),e._v(" "),t("router-link",{attrs:{to:"/live/list"}},[t("el-button",[e._v("取消")])],1)],1)],1)],1)};co._withStripped=!0;var mo={render:co,staticRenderFns:[]},po=mo;var uo=!1;var ho=t("VU/8")(ro,po,!1,function(e){uo||t("JyD0")},"data-v-1c2dcf06",null);ho.options.__file="src/components/manageLive/liveCreate.vue";var go=ho.exports,Ao={components:{CircleTitle:en},mixins:[xa],data:function(){return{createForm:{live_name:"",icon_url:"",url:"",isTop:!1,liveRange:[],isComment:!1,isShare:!1,isPraise:!1,isCollect:!1,state:1},rules:{live_name:[{required:!0,message:"请输入直播主题",trigger:"blur"}],url:[{validator:function(e,n,t){if(!/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(n))return t(new Error("请输入正确的地址"));t()},trigger:"blur"}],icon_url:[{required:!0,message:"请上传图片",trigger:"blur"}]},liveid:"",isRefresh:!0}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getLiveEditInfoById()},beforeRouteLeave:function(e,n,t){"/live/list"===e.path?e.meta.refresh=this.isRefresh:"/live/create"===e.path&&this.$root.eventHub.$emit("reset-options"),t()},methods:{getLiveEditInfoById:function(){var e,n=this;this.liveid=sessionStorage.getItem("liveid"),(e={liveBroadcast:{liveid:this.liveid}},be("manager/LiveBroadcast/getLiveBroadcastByID",e)).then(function(e){if(e.data.status){var t=[],a=e.data.result;n.createForm.live_name=a.live_name,n.createForm.icon_url=a.live_head_url,n.createForm.url=a.live_url,t[0]=new Date(a.expiry_date_start),t[1]=new Date(a.expiry_date_end),n.$set(n.createForm,"liveRange",t),n.createForm.isTop=a.top,n.createForm.isComment=a.allow_comment,n.createForm.isShare=a.allow_share,n.createForm.isCollect=a.allow_collect,n.createForm.isPraise=a.allow_like,n.createForm.state=a.state}})},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;(t={liveBroadcast:{liveid:n.liveid,live_name:n.createForm.live_name,live_head_url:n.createForm.icon_url,live_url:n.createForm.url,expiry_date_start:n.createForm.liveRange[0].getTime(),expiry_date_end:n.createForm.liveRange[1].getTime(),top:n.createForm.isTop,allow_comment:n.createForm.isComment,allow_share:n.createForm.isShare,allow_like:n.createForm.isPraise,allow_collect:n.createForm.isCollect,state:n.createForm.state}},be("manager/LiveBroadcast/update",t)).then(function(e){200===e.status&&(n.$router.push({path:"/live/list"}),n.$notify({title:"通知",message:"编辑成功",type:"success"}))})})},gotoList:function(){this.isRefresh=!1,this.$router.push({path:"/live/list"})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.createForm.icon_url=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t}}},fo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"编辑直播"}}),e._v(" "),t("el-form",{ref:"createForm",staticClass:"rule-form",attrs:{model:e.createForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"直播主题",prop:"live_name"}},[t("el-input",{model:{value:e.createForm.live_name,callback:function(n){e.$set(e.createForm,"live_name","string"==typeof n?n.trim():n)},expression:"createForm.live_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置",prop:"icon_url"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:e.getUploadUrl,headers:e.uploadHeaders,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.createForm.icon_url?t("img",{staticClass:"avatar",attrs:{src:e.createForm.icon_url}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"直播周期",prop:"channel_name"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,type:"datetimerange",format:"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.createForm.liveRange,callback:function(n){e.$set(e.createForm,"liveRange",n)},expression:"createForm.liveRange"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"内容链接",prop:"url"}},[t("el-input",{model:{value:e.createForm.url,callback:function(n){e.$set(e.createForm,"url",n)},expression:"createForm.url"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否置顶",prop:"fixed"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createForm.isTop,callback:function(n){e.$set(e.createForm,"isTop",n)},expression:"createForm.isTop"}},[t("el-option",{attrs:{value:!0,label:"是"}}),e._v(" "),t("el-option",{attrs:{value:!1,label:"否"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"权限配置"}},[t("el-checkbox",{attrs:{label:"评论"},model:{value:e.createForm.isComment,callback:function(n){e.$set(e.createForm,"isComment",n)},expression:"createForm.isComment"}}),e._v(" "),t("el-checkbox",{attrs:{label:"分享",name:"auth"},model:{value:e.createForm.isShare,callback:function(n){e.$set(e.createForm,"isShare",n)},expression:"createForm.isShare"}}),e._v(" "),t("el-checkbox",{attrs:{label:"收藏",name:"auth"},model:{value:e.createForm.isCollect,callback:function(n){e.$set(e.createForm,"isCollect",n)},expression:"createForm.isCollect"}}),e._v(" "),t("el-checkbox",{attrs:{label:"点赞",name:"auth"},model:{value:e.createForm.isPraise,callback:function(n){e.$set(e.createForm,"isPraise",n)},expression:"createForm.isPraise"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否上稿"}},[t("el-radio-group",{model:{value:e.createForm.state,callback:function(n){e.$set(e.createForm,"state",n)},expression:"createForm.state"}},[t("el-radio",{attrs:{label:1}},[e._v("\n          是\n        ")]),e._v(" "),t("el-radio",{attrs:{label:0}},[e._v("\n          否\n        ")])],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("createForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.gotoList}},[e._v("取消")])],1)],1)],1)};fo._withStripped=!0;var bo={render:fo,staticRenderFns:[]},vo=bo;var yo=!1;var Co=t("VU/8")(Ao,vo,!1,function(e){yo||t("CDJ2")},"data-v-254bccd8",null);Co.options.__file="src/components/manageLive/liveEdit.vue";var _o=Co.exports;function xo(e){return be("manager/Activity/typeList",e)}var wo={name:"CustomEvent",data:function(){return{customEventName:"",customErrorMessage:""}},methods:{submitEvent:function(){var e,n=this;if(""===this.customEventName)return this.customErrorMessage="注意：名称不能为空",!1;(e={type:{type_name:this.customEventName}},be("manager/Activity/addType",e)).then(function(e){e.status&&(n.$notify({title:"通知",message:"添加成功",type:"success"}),n.$emit("submit-custom-event",n.customEventName))})},cancelCustomEvent:function(){this.$emit("cancel-custom-event")}}},Fo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("el-input",{attrs:{placeholder:"请输入服务类型名称"},model:{value:e.customEventName,callback:function(n){e.customEventName=n},expression:"customEventName"}}),e._v(" "),e.customErrorMessage?t("div",{staticStyle:{color:"red","margin-top":"5px"}},[e._v(e._s(e.customErrorMessage))]):e._e(),e._v(" "),t("span",{staticClass:"custom-event-footer"},[t("el-button",{on:{click:e.cancelCustomEvent}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.submitEvent}},[e._v("确 定")])],1)],1)};Fo._withStripped=!0;var ko={render:Fo,staticRenderFns:[]},So=ko;var Eo=!1;var Do=t("VU/8")(wo,So,!1,function(e){Eo||t("OuN3")},"data-v-3c45bd22",null);Do.options.__file="src/components/manageEvent/customEvent.vue";var Lo=Do.exports,Bo={components:{CustomEvent:Lo},mixins:[xa],props:{settingActivityId:{type:String,default:"0"}},data:function(){return{editFrom:{activity_name:"",sort:0,head_img:"",app_url:"",manager_url:"",type_name:"",state:"",description:"",fixed:"",typeid:"",liveRange:[],need_login:!0},rules:{activity_name:[{required:!0,message:"请输入频道名称",trigger:"blur"},{validator:function(e,n,t){return n.length>10?t(new Error("频道名称长度不能超过10")):t()},trigger:"change"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}],head_img:[{required:!0,message:"请上传图片",trigger:"blur"}],app_url:[{validator:function(e,n,t){if(!/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(n))return t(new Error("请输入正确的地址"));t()},trigger:"blur"}]},eventTypeList:[],isRefresh:!0,customTypeId:"0999",dialogVisible:!1,componentName:""}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getEditInfo(),this.getActivityType()},beforeRouteLeave:function(e,n,t){"/subChannel/list"===e.path?e.meta.refresh=this.isRefresh:"/subChannel/create"===e.path&&this.$root.eventHub.$emit("reset-options"),t()},methods:{cancel:function(){this.$emit("closeDialog")},getEditInfo:function(){var e,n=this;(e={activity:{activityid:this.settingActivityId}},be("manager/Activity/getActivity",e)).then(function(e){if(e.data.status){var t=e.data.result;n.editFrom.liveRange=[],n.editFrom.activity_name=t.activity_name,n.editFrom.sort=t.sort,n.editFrom.head_img=t.head_img,n.editFrom.app_url=t.app_url,n.editFrom.manager_url=t.manager_url,n.editFrom.type_name=t.type_name,n.editFrom.state=t.state,n.editFrom.typeid=t.typeid,n.editFrom.need_login=t.need_login,n.editFrom.liveRange.push(new Date(t.expiry_date_start)),n.editFrom.liveRange.push(new Date(t.expiry_date_end))}})},submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;n.eventTypeList.forEach(function(e,t,a){e.value===n.editFrom.typeid&&(n.editFrom.type_name=e.label)}),(t={activity:{activityid:n.settingActivityId,activity_name:n.editFrom.activity_name,head_img:n.editFrom.head_img,app_url:n.editFrom.app_url,manager_url:n.editFrom.manager_url,typeid:n.editFrom.typeid,type_name:n.editFrom.type_name,state:n.editFrom.state,expiry_date_start:n.editFrom.liveRange[0].getTime(),expiry_date_end:n.editFrom.liveRange[1].getTime(),sort:n.editFrom.sort,need_login:n.editFrom.need_login}},be("manager/Activity/update",t)).then(function(e){200===e.status&&(n.$emit("closeDialog"),n.$notify({title:"通知",message:"编辑成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.editFrom.head_img=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getActivityType:function(){var e=this;this.eventTypeList=[],xo().then(function(n){var t=n.data;if(t.status){t.result.forEach(function(n,t,a){n.type_name===e.editFrom.typeid&&(e.editFrom.typeid=n.typeid);var i={};i.label=n.type_name,i.value=n.typeid,e.eventTypeList.push(i)});var a={label:"自定义"};a.value=e.customTypeId,e.eventTypeList.push(a)}})},handleEventType:function(e){e===this.customTypeId&&this.handleCustomClick()},handleCustomClick:function(){this.dialogVisible=!0,this.componentName="CustomEvent"},closeDialog:function(){this.dialogVisible=!1,this.componentName=""},submitCustomEvent:function(e){this.closeDialog(),this.getActivityType(),this.editFrom.typeid=e},cancelCustomEvent:function(){this.closeDialog()}}},Mo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"event-edit"},[t("el-form",{ref:"editFrom",staticClass:"rule-form",attrs:{model:e.editFrom,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"活动名称",prop:"activity_name"}},[t("el-input",{model:{value:e.editFrom.activity_name,callback:function(n){e.$set(e.editFrom,"activity_name","string"==typeof n?n.trim():n)},expression:"editFrom.activity_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"归属类别",prop:"type_name"}},[t("el-select",{attrs:{filterable:"",placeholder:"",clearable:""},on:{change:function(n){e.handleEventType(e.editFrom.typeid)}},model:{value:e.editFrom.typeid,callback:function(n){e.$set(e.editFrom,"typeid",n)},expression:"editFrom.typeid"}},e._l(e.eventTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置",prop:"head_img"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:e.getUploadUrl,headers:e.uploadHeaders,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.editFrom.head_img?t("img",{staticClass:"avatar",attrs:{src:e.editFrom.head_img}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"前端链接",prop:"app_url"}},[t("el-input",{model:{value:e.editFrom.app_url,callback:function(n){e.$set(e.editFrom,"app_url","string"==typeof n?n.trim():n)},expression:"editFrom.app_url"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"后端链接",prop:"manager_url"}},[t("el-input",{model:{value:e.editFrom.manager_url,callback:function(n){e.$set(e.editFrom,"manager_url","string"==typeof n?n.trim():n)},expression:"editFrom.manager_url"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editFrom.state,callback:function(n){e.$set(e.editFrom,"state",n)},expression:"editFrom.state"}},[t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"有效期"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,type:"datetimerange",format:"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.editFrom.liveRange,callback:function(n){e.$set(e.editFrom,"liveRange",n)},expression:"editFrom.liveRange"}})],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"需要登录"}},[t("el-radio-group",{model:{value:e.editFrom.need_login,callback:function(n){e.$set(e.editFrom,"need_login",n)},expression:"editFrom.need_login"}},[t("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort"}},[t("el-input",{staticStyle:{width:"70%"},model:{value:e.editFrom.sort,callback:function(n){e.$set(e.editFrom,"sort",e._n(n))},expression:"editFrom.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("editFrom")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1),e._v(" "),t("el-dialog",{staticStyle:{padding:"20px 50px 20px 50px"},attrs:{visible:e.dialogVisible,"append-to-body":"",title:"自定义服务",width:"40%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",on:{"submit-custom-event":e.submitCustomEvent,"cancel-custom-event":e.cancelCustomEvent}})],1)],1)};Mo._withStripped=!0;var Io={render:Mo,staticRenderFns:[]},To=Io;var $o=!1;var zo=t("VU/8")(Bo,To,!1,function(e){$o||t("Y8Es")},"data-v-787f318a",null);zo.options.__file="src/components/manageEvent/eventEdit.vue";var Uo=zo.exports,No={components:{CircleTitle:en,EventEdit:Uo},data:function(){var e=this,n=this.$createElement;return{eventForm:{activity_name:"",type_name:"",showState:"",sort:"1",endDate:"",startDate:""},clickCellIndex:-1,batchProcess:0,tableHeader:[{prop:"activity_name",label:"服务名称"},{prop:"type_name",label:"类型"},{prop:"head_img",label:"图标",formatter:function(e,t,a,i){return n("img",{class:"topic-table-pic",attrs:{src:a}})}},{prop:"app_url",label:"前端链接",formatter:function(e,t,a,i){return n("a",{attrs:{href:a,target:"_blank"}},[a])}},{prop:"manager_url",label:"后端链接",formatter:function(e,t,a,i){if(""!==a){var l=a+"?token="+sessionStorage.getItem("token")+"&compid="+sessionStorage.getItem("compid")+"&usercode="+sessionStorage.getItem("usercode");return n("a",{attrs:{href:l,target:"_blank"}},[l])}return"无"}},{prop:"expiry_date_start",label:"有效期",width:200,formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")+"至"+e.$options.filters.FormatDate(n.expiry_date_end,"yyyy-MM-dd hh:mm")}},{prop:"createtime",label:"创建日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"updatetime",label:"更新日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"showState",label:"状态"},{prop:"sort",label:"优先级",formatter:function(t,a,i,l){return l===e.clickCellIndex?n("input",{attrs:{type:"text",id:"input",autofocus:"autofocus"},class:"self-sort",domProps:{value:i}}):n("span",{class:"sort-container",attrs:{"data-id":l}},[i])}}],tableData:[],eventTypeList:[],sortValue:-1,pageNo:1,pageSize:10,total:0,dialogVisible:!1,settingActivityId:"0",componentName:"",selectActivityId:""}},watch:{"eventForm.activity_name":function(e){this.getActivityList()}},mounted:function(){var e=this;this.getActivityList(),this.getActivityType(),this.$root.eventHub.$on("reset-options",function(){e.resetLiveOptions()})},activated:function(){var e=this.$route.meta;e.hasOwnProperty("refresh")&&e.refresh&&(this.getActivityList(),delete this.$route.meta.refresh)},beforeRouteLeave:function(e,n,t){"/event/create"!==e.path&&"/event/list"!==e.path||this.resetLiveOptions(),t()},beforeDestroy:function(){this.$root.eventHub.$off("reset-options")},methods:{resetLiveOptions:function(){this.eventForm={activity_name:"",type_name:"",head_img:"",app_url:"",typeid:"",showState:"",state:"",sort:"1",endDate:"",startDate:""},this.pageNo=1,this.getActivityList()},getActivityList:function(){var e=this;this.$options.filters.swapTime(this.eventForm);var n,t=null!==this.eventForm.startDate?new Date(this.eventForm.startDate).getTime():null,a=null!==this.eventForm.endDate?new Date(this.eventForm.endDate).getTime():null;(n={pageNo:this.pageNo,pageSize:this.pageSize,activity_name:this.eventForm.activity_name,typeid:this.eventForm.typeid,state:this.eventForm.state,timeStart:t,timeEnd:a},be("manager/Activity/page",n)).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},handleSizeChange:function(e){this.pageSize=e,this.getActivityList()},handleCurrentChange:function(e){this.pageNo=e,this.getActivityList()},toggleAllSelection:function(e){this.$refs.channelTable.toggleAllSelection()},cellClick:function(e,n,t,a){var i=this;if(a.target.classList.contains("sort-container"))if(1!==e.state){var l=a.target.dataset.id;l&&(this.clickCellIndex=parseInt(l)),this.$nextTick(function(){document.querySelectorAll(".el-tooltip > input.self-sort").forEach(function(n){n&&(i.selectActivityId=e.activityid,n.focus(),n.onkeyup=function(e){n.value&&(i.sortValue=parseInt(n.value))})})})}else this.$message({type:"error",message:"启用状态下不能排序!"})},closeDialog:function(){this.componentName="",this.dialogVisible=!1,this.getActivityList()},cellMouseLeave:function(e,n,t,a){var i,l=this;if(this.clickCellIndex=-1,-1===this.sortValue||this.selectActivityId!==e.activityid)return!1;(i={activity:{activityid:e.activityid,sort:this.sortValue}},be("manager/Activity/updateSort",i)).then(function(e){e.status&&(l.getActivityList(),l.sortValue=-1)})},handleEdit:function(e){1!==e.state?(this.dialogVisible=!0,this.componentName=Uo,this.settingActivityId=e.activityid):this.$message({type:"error",message:"启用状态下不可编辑!"})},changeState:function(e){var n,t=this,a=0;1===e.state?a=0:0===e.state&&(a=1),(n={activity:{activityid:e.activityid,state:a}},be("manager/Activity/updateState",n)).then(function(e){e.status&&(0===a?t.$message({type:"success",message:"修改状态为停用"}):t.$message({type:"success",message:"修改状态为启用"}),t.getActivityList())})},handleDelete:function(e){var n=this;1!==e.state?this.$confirm('是否删除"'+e.activity_name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={activity:{activityid:e.activityid}},be("manager/Activity/delete",t)).then(function(e){e.data.status&&n.$message({type:"success",message:"删除成功!"}),n.getActivityList()})}).catch(function(){}):this.$message({type:"error",message:"启用状态下不可删除!"})},getActivityType:function(){var e=this;xo().then(function(n){var t=n.data;t.status&&t.result.forEach(function(n,t,a){var i={};i.label=n.type_name,i.value=n.typeid,e.eventTypeList.push(i)})})}}},Ro=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"event-list"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"服务列表"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.eventForm}},[t("el-form-item",{attrs:{label:"服务名称"}},[t("el-input",{attrs:{clearable:""},model:{value:e.eventForm.activity_name,callback:function(n){e.$set(e.eventForm,"activity_name",n)},expression:"eventForm.activity_name"}})],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"类型"}},[t("el-select",{attrs:{clearable:"",placeholder:""},on:{clear:e.getActivityList,change:e.getActivityList},model:{value:e.eventForm.typeid,callback:function(n){e.$set(e.eventForm,"typeid",n)},expression:"eventForm.typeid"}},e._l(e.eventTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.getActivityList},model:{value:e.eventForm.state,callback:function(n){e.$set(e.eventForm,"state",n)},expression:"eventForm.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"未开始"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"进行中"}}),e._v(" "),t("el-option",{attrs:{value:3,label:"已结束"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.eventForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.getActivityList},model:{value:e.eventForm.startDate,callback:function(n){e.$set(e.eventForm,"startDate",n)},expression:"eventForm.startDate"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"-28px"},attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.eventForm.endDate,"yyyy-MM-dd hh:mm"),format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期"},on:{change:e.getActivityList},model:{value:e.eventForm.endDate,callback:function(n){e.$set(e.eventForm,"endDate",n)},expression:"eventForm.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"68px"},attrs:{type:"primary"},on:{click:e.getActivityList}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("router-link",{attrs:{to:"/event/create"}},[t("el-button",{attrs:{type:"primary"}},[e._v("\n            服务新增\n            "),t("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"cell-click":e.cellClick,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改状态",placement:"top"}},[t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-remove-outline"},on:{click:function(t){e.changeState(n.row)}}})],1),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.handleEdit(n.row)}}}),e._v(" "),t("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(t){e.handleDelete(n.row)}}})]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],"current-page":e.pageNo,background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"custom-dialog",title:"服务编辑",width:"70%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",attrs:{"setting-activity-id":e.settingActivityId},on:{closeDialog:e.closeDialog}})],1)],1)])};Ro._withStripped=!0;var Vo={render:Ro,staticRenderFns:[]},jo=Vo;var Po=!1;var Ho=t("VU/8")(No,jo,!1,function(e){Po||t("nK0+")},null,null);Ho.options.__file="src/components/manageEvent/eventList.vue";var Qo=Ho.exports,Wo={components:{CircleTitle:en,CustomEvent:Lo},mixins:[xa],data:function(){return{createFrom:{activity_name:"",sort:"",head_img:"",url:"",app_url:"",manager_url:"",type_name:"",state:0,typeid:"",liveRange:[new Date,new Date],need_login:!0},rules:{activity_name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字"}],head_img:[{required:!0,message:"请上传图片",trigger:"blur"}],app_url:[{validator:function(e,n,t){if(!/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(n))return t(new Error("请输入正确的地址"));t()},trigger:"blur"}]},eventTypeList:[],dialogVisible:!1,componentName:"",customTypeId:"0999"}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getActivityType()},methods:{submitForm:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;n.eventTypeList.forEach(function(e,t,a){e.value===n.createFrom.typeid&&(n.createFrom.type_name=e.label)}),(t={activity:{activity_name:n.createFrom.activity_name,head_img:n.createFrom.head_img,app_url:n.createFrom.app_url,manager_url:n.createFrom.manager_url,typeid:n.createFrom.typeid,type_name:n.createFrom.type_name,expiry_date_start:n.createFrom.liveRange[0].getTime(),expiry_date_end:n.createFrom.liveRange[1].getTime(),state:n.createFrom.state,sort:n.createFrom.sort,need_login:n.createFrom.need_login}},be("manager/Activity/add",t)).then(function(e){200===e.status&&(n.$router.push({path:"/event/list"}),n.$notify({title:"通知",message:"添加成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n){if(e.status){var t=e.result;this.createFrom.head_img=t}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<2;return n||this.$message.error("请上传图片格式的文件!"),t||this.$message.error("上传图片大小不能超过 2MB!"),n&&t},getActivityType:function(){var e=this;this.eventTypeList=[],xo().then(function(n){var t=n.data;if(t.status){t.result.forEach(function(n,t,a){n.type_name===e.createFrom.typeid&&(e.createFrom.typeid=n.typeid);var i={};i.label=n.type_name,i.value=n.typeid,e.eventTypeList.push(i)});var a={label:"自定义"};a.value=e.customTypeId,e.eventTypeList.push(a)}})},chooseTime:function(e){Re(this,this.createFrom.liveRange,e)},handleEventType:function(e){e===this.customTypeId&&this.handleCustomClick()},handleCustomClick:function(){this.dialogVisible=!0,this.componentName="CustomEvent"},closeDialog:function(){this.dialogVisible=!1,this.componentName=""},submitCustomEvent:function(e){this.closeDialog(),this.getActivityType(),this.createFrom.typeid=e},cancelCustomEvent:function(){this.closeDialog()}}},Oo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"channel create"},[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"服务新增"}}),e._v(" "),t("el-form",{ref:"createFrom",staticClass:"rule-form",attrs:{model:e.createFrom,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"服务名称",prop:"activity_name"}},[t("el-input",{model:{value:e.createFrom.activity_name,callback:function(n){e.$set(e.createFrom,"activity_name","string"==typeof n?n.trim():n)},expression:"createFrom.activity_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"归属类别",prop:"type_name"}},[t("el-select",{attrs:{clearable:!0,placeholder:""},on:{change:function(n){e.handleEventType(e.createFrom.typeid)}},model:{value:e.createFrom.typeid,callback:function(n){e.$set(e.createFrom,"typeid",n)},expression:"createFrom.typeid"}},e._l(e.eventTypeList,function(e,n){return t("el-option",{key:n,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),t("el-form-item",{staticClass:"item",attrs:{label:"图标配置",prop:"head_img"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:e.getUploadUrl,headers:e.uploadHeaders,"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.createFrom.head_img?t("img",{staticClass:"avatar",attrs:{src:e.createFrom.head_img}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"前端链接",prop:"app_url"}},[t("el-input",{model:{value:e.createFrom.app_url,callback:function(n){e.$set(e.createFrom,"app_url","string"==typeof n?n.trim():n)},expression:"createFrom.app_url"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"后端链接",prop:"manager_url"}},[t("el-input",{model:{value:e.createFrom.manager_url,callback:function(n){e.$set(e.createFrom,"manager_url","string"==typeof n?n.trim():n)},expression:"createFrom.manager_url"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"状态选择",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createFrom.state,callback:function(n){e.$set(e.createFrom,"state",n)},expression:"createFrom.state"}},[t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"有效期",prop:"liveRange"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,type:"datetimerange",format:"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.chooseTime},model:{value:e.createFrom.liveRange,callback:function(n){e.$set(e.createFrom,"liveRange",n)},expression:"createFrom.liveRange"}})],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"需要登录"}},[t("el-radio-group",{model:{value:e.createFrom.need_login,callback:function(n){e.$set(e.createFrom,"need_login",n)},expression:"createFrom.need_login"}},[t("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),e._v(" "),t("el-form-item",{staticClass:"sort",attrs:{label:"排序",prop:"sort"}},[t("el-input",{staticStyle:{width:"75%"},model:{value:e.createFrom.sort,callback:function(n){e.$set(e.createFrom,"sort",e._n(n))},expression:"createFrom.sort"}}),e._v(" "),t("span",[e._v("提示：数字越小越往前")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.submitForm("createFrom")}}},[e._v("提交")]),e._v(" "),t("router-link",{attrs:{to:"/event/list"}},[t("el-button",[e._v("取消")])],1)],1)],1),e._v(" "),t("el-dialog",{staticStyle:{padding:"20px 50px 20px 50px"},attrs:{visible:e.dialogVisible,title:"自定义服务",width:"40%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",on:{"submit-custom-event":e.submitCustomEvent,"cancel-custom-event":e.cancelCustomEvent}})],1)],1)};Oo._withStripped=!0;var qo={render:Oo,staticRenderFns:[]},Yo=qo;var Zo=!1;var Go=t("VU/8")(Wo,Yo,!1,function(e){Zo||t("tk/o")},"data-v-726cc17c",null);Go.options.__file="src/components/manageEvent/eventCreate.vue";var Jo=Go.exports,Xo={components:{CircleTitle:en},data:function(){var e=this,n=this.$createElement;return{userEventForm:{activity_name:"",nickname:"",phone:"",state:"",sort:"1",startDate:"",endDate:""},tableHeader:[{prop:"head_img",label:"图标",formatter:function(e,t,a,i){return n("img",{class:"topic-table-pic",attrs:{src:a}})}},{prop:"activity_name",label:"活动名称"},{prop:"type_name",label:"活动类型"},{prop:"showState",label:"状态"},{prop:"nickname",label:"用户名称"},{prop:"phone",label:"注册手机号"},{prop:"expiry_date_start",label:"参加活动时间",width:300,formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")+"至"+e.$options.filters.FormatDate(n.expiry_date_end,"yyyy-MM-dd hh:mm")}}],tableData:[],pageNo:1,pageSize:10,total:0}},watch:{"userEventForm.activity_name":function(e){this.getpageParticipants()},"userEventForm.nickname":function(e){this.getpageParticipants()},"userEventForm.phone":function(e){this.getpageParticipants()}},mounted:function(){this.getpageParticipants()},methods:{getpageParticipants:function(){var e=this;this.$options.filters.swapTime(this.userEventForm);var n,t=null!==this.userEventForm.startDate?new Date(this.userEventForm.startDate).getTime():null,a=null!==this.userEventForm.endDate?new Date(this.userEventForm.endDate).getTime():null;(n={pageNo:this.pageNo,pageSize:this.pageSize,activity_name:this.userEventForm.activity_name,nickname:this.userEventForm.nickname,phone:this.userEventForm.phone,timeStart:t,timeEnd:a},be("manager/Activity/pageParticipants",n)).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},handleSizeChange:function(e){this.pageSize=e,this.getpageParticipants()},handleCurrentChange:function(e){this.pageNo=e,this.getpageParticipants()}}},Ko=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"user-event-list"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"用户活动列表"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.userEventForm}},[t("el-form-item",{attrs:{label:"活动名称"}},[t("el-input",{attrs:{clearable:""},on:{change:e.getpageParticipants},model:{value:e.userEventForm.activity_name,callback:function(n){e.$set(e.userEventForm,"activity_name",n)},expression:"userEventForm.activity_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{clearable:""},on:{change:e.getpageParticipants},model:{value:e.userEventForm.nickname,callback:function(n){e.$set(e.userEventForm,"nickname",n)},expression:"userEventForm.nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"注册手机号"}},[t("el-input",{attrs:{clearable:""},on:{change:e.getpageParticipants},model:{value:e.userEventForm.phone,callback:function(n){e.$set(e.userEventForm,"phone",n)},expression:"userEventForm.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.userEventForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期",clearable:""},on:{change:e.getpageParticipants},model:{value:e.userEventForm.startDate,callback:function(n){e.$set(e.userEventForm,"startDate",n)},expression:"userEventForm.startDate"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"-14px"},attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.userEventForm.endDate,"yyyy-MM-dd hh:mm"),format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期",clearable:""},on:{change:e.getpageParticipants},model:{value:e.userEventForm.endDate,callback:function(n){e.$set(e.userEventForm,"endDate",n)},expression:"userEventForm.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"95px"},attrs:{type:"primary"},on:{click:e.getpageParticipants}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"userEventTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"}},e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),1),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],"current-page":e.pageNo,background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};Ko._withStripped=!0;var es={render:Ko,staticRenderFns:[]},ns=es;var ts=!1;var as=t("VU/8")(Xo,ns,!1,function(e){ts||t("bFvB")},null,null);as.options.__file="src/components/manageEvent/userEventList.vue";var is=as.exports;function ls(e){return be("manager/Permission/treePermission",e)}function os(e){return be("manager/Permission/getRoleDetails",e)}function ss(e){return be("manager/OrgUsers/getUserRoles",e)}var rs={components:{CircleTitle:en},data:function(){var e=this,n=this.$createElement;return{ruleForm:{username:"",phone:"",state:""},tableHeader:[{prop:"nickname",label:"昵称"},{prop:"head_url",label:"头像",formatter:function(e,t,a,i){return n("a",{attrs:{href:a,target:"_blank"}},[n("img",{attrs:{src:a},class:"user-head-icon"})])}},{prop:"phone",label:"电话"},{prop:"sex",label:"性别",formatter:function(e,n,t,a){return 1===t?"男":"女"}},{prop:"age",label:"年龄"},{prop:"createtime",label:"注册日期",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"state",label:"状态",formatter:function(e,n,t,a){return 1===parseInt(t)?"启用":"停用"}}],tableData:[],pageNo:1,pageSize:10,total:0}},watch:{"ruleForm.username":function(e){this.getAppUserList()},"ruleForm.phone":function(e){this.getAppUserList()}},mounted:function(){this.getAppUserList()},methods:{getAppUserList:function(){var e,n=this;(e={pageNo:this.pageNo,pageSize:this.pageSize,nickname:this.ruleForm.username,phone:this.ruleForm.phone,state:this.ruleForm.state},be("manager/AppUser/page",e)).then(function(e){if(e.status){var t=e.data.result;n.tableData=t.list,n.total=t.total}})},handleSizeChange:function(e){this.pageSize=e,this.getAppUserList()},handleCurrentChange:function(e){this.pageNo=e,this.getAppUserList()},toggleCount:function(e){var n=this;1===e.state?this.$confirm("确定要停用账号?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.appUserUpdateState(e.userid,0)}).catch(function(){}):this.$confirm("确定要启用账号?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.appUserUpdateState(e.userid,1)}).catch(function(){})},appUserUpdateState:function(e,n){var t,a=this;(t={appUser:{userid:e,state:n}},be("manager/AppUser/updateState",t)).then(function(e){e.data.status&&a.getAppUserList()})},resetPassword:function(e){var n=this;this.$confirm("确定要重置密码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={appUser:{userid:e.userid}},be("manager/AppUser/resetPassword",t)).then(function(e){e.data.status&&n.$message({type:"success",message:"重置成功!"})})}).catch(function(){})}}},cs=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"user-list"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"用户列表"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.ruleForm}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.username,callback:function(n){e.$set(e.ruleForm,"username",n)},expression:"ruleForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"注册手机号"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.phone,callback:function(n){e.$set(e.ruleForm,"phone",n)},expression:"ruleForm.phone"}})],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.getAppUserList},model:{value:e.ruleForm.state,callback:function(n){e.$set(e.ruleForm,"state",n)},expression:"ruleForm.state"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"启用"}}),e._v(" "),t("el-option",{attrs:{value:0,label:"停用"}})],1)],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"-30px"},attrs:{type:"primary"},on:{click:e.getAppUserList}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[t("span",{class:["user",1!==n.row.state?"disable":""],on:{click:function(t){e.toggleCount(n.row)}}},[e._v("\n              "+e._s(1!==n.row.state?"启用账号":"停用账号")+"\n            ")]),e._v(" "),t("span",{staticClass:"user reset-password",on:{click:function(t){e.resetPassword(n.row)}}},[e._v("\n              重置密码\n            ")])])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};cs._withStripped=!0;var ms={render:cs,staticRenderFns:[]},ds=ms;var ps=!1;var us=t("VU/8")(rs,ds,!1,function(e){ps||(t("Kgt7"),t("IUWy"))},"data-v-69358588",null);us.options.__file="src/components/manageUser/userList.vue";var hs=us.exports,gs=function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("黑白名单管理列表")])};gs._withStripped=!0;var As={render:gs,staticRenderFns:[]},fs=As;var bs=t("VU/8")(null,fs,!1,null,null,null);bs.options.__file="src/components/manageUser/blackWhiteList.vue";var vs=bs.exports;function ys(e){return be("manager/Comment/topComments",e)}function Cs(e){return be("manager/Comment/deleteForbiddenComment",e)}var _s={props:{commentid:{type:String,default:"0"}},data:function(){return{auditForm:{type:1,desc:""}}},methods:{submit:function(){var e,n=this;(e={commentVo:{commentid:this.commentid,audit:this.auditForm.type,audit_opinion:this.auditForm.desc}},be("manager/Comment/auditComments",e)).then(function(e){e.data.status&&n.$notify({title:"成功",type:"success",message:"审核成功"}),n.$emit("close-dialog")})}}},xs=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"audit"},[t("el-form",{ref:"auditForm",attrs:{model:e.auditForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"归属类别"}},[t("el-select",{attrs:{placeholder:"请选择是否通过"},model:{value:e.auditForm.type,callback:function(n){e.$set(e.auditForm,"type",n)},expression:"auditForm.type"}},[t("el-option",{attrs:{value:1,label:"通过"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"不通过"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"审核意见"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.auditForm.desc,callback:function(n){e.$set(e.auditForm,"desc",n)},expression:"auditForm.desc"}})],1),e._v(" "),t("el-form-item",{attrs:{label:""}},[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)};xs._withStripped=!0;var ws={render:xs,staticRenderFns:[]},Fs=ws;var ks=!1;var Ss=t("VU/8")(_s,Fs,!1,function(e){ks||(t("BZZX"),t("o344"))},"data-v-74a6b5e6",null);Ss.options.__file="src/components/manageComment/audit.vue";var Es=Ss.exports,Ds={components:{CircleTitle:en,Audit:Es},data:function(){var e=this,n=this.$createElement;return{comment:{user_nickname:"",type:"",user_phone:"",startDate:"",endDate:"",title:""},clickCellIndex:-1,tableHeader:[{prop:"user_phone",label:"用户信息",formatter:function(e,t,a,i){return n("div",[n("p",["用户名:",e.user_nickname]),n("p",["电话:",a])])}},{prop:"title",label:"源内容",formatter:function(e,t,a,i){var l="";return l=1===e.type?"资讯":2===e.type?"点播":"直播",n("div",[n("p",["模块:",l]),n("p",["标题:",a])])}},{prop:"comment_content",label:"评价内容"},{prop:"createtime",label:"评论日期",width:200,formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"audit",label:"状态",width:"100",formatter:function(e,n,t,a){return 0===t?"待审核":1===t?"已通过":2===t?"未通过":void 0}}],tableData:[],batchProcess:1,processList:[{value:1,label:"删除"}],index:-1,pageNo:1,pageSize:10,total:0,dialogVisible:!1,componentName:"",selfSelectAll:!1,countAuditWait:!0,countAuditPass:!1,countAuditNotPass:!1,countAudit:!1,countAuditWaitNum:0,countAuditPassNum:0,countAuditNotPassNum:0,countAuditNum:0,commentid:"",commentList:[],selectedCommentInfo:{}}},computed:{showNullTag:function(){return function(e){return!e||e.length<=0}}},watch:{"comment.user_nickname":function(){this.getCommentList()},"comment.user_phone":function(){this.getCommentList()},"comment.title":function(){this.getCommentList()}},mounted:function(){this.getCountComments(),this.getCommentList()},methods:{getCountComments:function(){var e,n=this;be("manager/Comment/countComments",e).then(function(e){if(e.data.status){var t=e.data.result;n.countAuditWaitNum=t.countAuditWait,n.countAuditPassNum=t.countAuditPass,n.countAuditNotPassNum=t.countAuditNotPass,n.countAuditNum=t.countAudit}})},changeComment:function(e){switch(e){case"countAuditWait":this.countAuditWait=!0,this.countAuditPass=!1,this.countAuditNotPass=!1,this.countAudit=!1,this.getCommentList();break;case"countAuditPass":this.countAuditWait=!1,this.countAuditPass=!0,this.countAuditNotPass=!1,this.countAudit=!1,this.getCommentList();break;case"countAuditNotPass":this.countAuditWait=!1,this.countAuditPass=!1,this.countAuditNotPass=!0,this.countAudit=!1,this.getCommentList();break;case"countAudit":this.countAuditWait=!1,this.countAuditPass=!1,this.countAuditNotPass=!1,this.countAudit=!0,this.getCommentList()}},getCommentList:function(){var e=this,n="";n=this.countAuditWait?0:n,n=this.countAuditPass?1:n,n=this.countAuditNotPass?2:n,this.$options.filters.swapTime(this.comment);var t,a=null!==this.comment.startDate?new Date(this.comment.startDate).getTime():null,i=null!==this.comment.endDate?new Date(this.comment.endDate).getTime():null;(t={pageNo:this.pageNo,pageSize:this.pageSize,user_nickname:this.comment.user_nickname,user_phone:this.comment.user_phone,type:this.comment.type,title:this.comment.title,audit:n,timeStart:a,timeEnd:i},be("manager/Comment/pageComments",t)).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},handleSizeChange:function(e){this.pageSize=e,this.getCommentList()},handleCurrentChange:function(e){this.pageNo=e,this.getCommentList()},selectAll:function(e){e.length>0?this.selfSelectAll=!0:this.selfSelectAll=!1},setManuUnTop:function(e){var n=this;1===e.audit?ys({commentVo:{commentid:e.commentid,top:!0}}).then(function(e){n.getCommentList()}):this.$message({type:"error",message:"审核通过的评论才能置顶!"})},setManuTop:function(e){var n=this;ys({commentVo:{commentid:e.commentid,top:!1}}).then(function(e){n.getCommentList()})},deleteComments:function(e){var n=this;this.$confirm('是否删除"'+e.user_nickname+'"的评论?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={commentVo:{commentid:e.commentid}},be("manager/Comment/deleteComments",t)).then(function(e){e.status&&n.$message({type:"success",message:"删除成功!"}),n.getCommentList(),n.getCountComments()})}).catch(function(){})},forbiddenUser:function(e){var n,t=this;e.user_forbidden?Cs({forbiddenCommentVo:{userid:e.userid}}).then(function(e){e.data.status&&(t.$message({type:"success",message:"取消禁言成功"}),t.getCommentList())}):(n={forbiddenCommentVo:{userid:e.userid}},be("manager/Comment/forbiddenUserComment",n)).then(function(e){e.data.status&&(t.$message({type:"success",message:"禁言成功"}),t.getCommentList())})},lookComment:function(e){this.comment.user_nickname=e.user_nickname,this.comment.user_phone=e.user_phone,this.getCommentList()},audit_opinion:function(e){var n="";n=e.audit_opinion?e.audit_opinion:"暂无审核意见",this.$alert(n,"审核意见",{confirmButtonText:"确定",callback:function(e){}})},audit:function(e){0===e.audit&&(this.dialogVisible=!0,this.componentName="Audit",this.commentid=e.commentid)},selectionChange:function(e){var n=this;this.commentList=[],e.forEach(function(e,t,a){n.commentList.push(e.commentid)}),this.selectedCommentInfo=e},deleteManyComment:function(){var e=this;if(this.commentList.length<=0)return this.$message({type:"error",message:"请至少选择一条评论!"}),!1;var n='您所选择的:"';this.selectedCommentInfo.forEach(function(e,t,a){n+="("+e.user_nickname+")"}),this.$confirm(n+"用户评论即将被删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n;(n={idList:e.commentList},be("manager/Comment/batchDeleteComments",n)).then(function(n){console.log(n),n.status&&e.$message({type:"success",message:"批量删除成功!"}),e.getCommentList(),e.getCountComments()})}).catch(function(){})},closeDialog:function(){this.componentName="",this.dialogVisible=!1,this.getCommentList(),this.getCountComments()},toggleAllSelection:function(e){this.$refs.channelTable.toggleAllSelection()}}},Ls=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"coomment-list"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"评论管理"}}),e._v(" "),t("div",{staticClass:"comment-top-info"},[t("div",{class:["comment-info-item",e.countAuditWait?"comment-active-bg":""],on:{click:function(n){e.changeComment("countAuditWait")}}},[t("div",{staticClass:"box"},[t("span",{class:["comment-icon-container",e.countAuditWait?"icon-container-bg":"comment-sec-bg"]},[t("i",{staticClass:"iconfont icon-daishenhe",style:{color:e.countAuditWait?"#694EFF":""}})]),e._v(" "),t("span",{staticClass:"comment-data"},[t("span",{style:{color:e.countAuditWait?"white":"rgba(71,71,71,1)"}},[e._v(e._s(e.countAuditWaitNum))]),e._v(" "),t("span",{style:{color:e.countAuditWait?"white":"rgba(71,71,71,1)"}},[e._v("待审核")])])])]),e._v(" "),t("div",{class:["comment-info-item",e.countAuditPass?"comment-active-bg":""],on:{click:function(n){e.changeComment("countAuditPass")}}},[t("div",{staticClass:"box"},[t("span",{class:["comment-icon-container",e.countAuditPass?"icon-container-bg":"comment-thr-bg"]},[t("i",{staticClass:"iconfont icon-audit",style:{color:e.countAuditPass?"#694EFF":""}})]),e._v(" "),t("span",{staticClass:"comment-data"},[t("span",{style:{color:e.countAuditPass?"white":"rgba(71,71,71,1)"}},[e._v(e._s(e.countAuditPassNum))]),e._v(" "),t("span",{style:{color:e.countAuditPass?"white":"rgba(71,71,71,1)"}},[e._v("已通过")])])])]),e._v(" "),t("div",{class:["comment-info-item",e.countAuditNotPass?"comment-active-bg":""],on:{click:function(n){e.changeComment("countAuditNotPass")}}},[t("div",{staticClass:"box"},[t("span",{class:["comment-icon-container",e.countAuditNotPass?"icon-container-bg":"comment-four-bg"]},[t("i",{staticClass:"iconfont icon-yishanchu",style:{color:e.countAuditNotPass?"#694EFF":""}})]),e._v(" "),t("span",{staticClass:"comment-data"},[t("span",{style:{color:e.countAuditNotPass?"white":"rgba(71,71,71,1)"}},[e._v(e._s(e.countAuditNotPassNum))]),e._v(" "),t("span",{style:{color:e.countAuditNotPass?"white":"rgba(71,71,71,1)"}},[e._v("未通过")])])])]),e._v(" "),t("div",{class:["comment-info-item",e.countAudit?"comment-active-bg":""],on:{click:function(n){e.changeComment("countAudit")}}},[t("div",{staticClass:"box"},[t("span",{class:["comment-icon-container",e.countAudit?"icon-container-bg":"comment-first-bg"]},[t("i",{staticClass:"iconfont icon-square-solid",style:{color:e.countAudit?"#694EFF":""}})]),e._v(" "),t("span",{staticClass:"comment-data"},[t("span",{style:{color:e.countAudit?"white":"rgba(71,71,71,1)"}},[e._v(e._s(e.countAuditNum))]),e._v(" "),t("span",{style:{color:e.countAudit?"white":"rgba(71,71,71,1)"}},[e._v("全部")])])])])]),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.comment}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{clearable:""},model:{value:e.comment.user_nickname,callback:function(n){e.$set(e.comment,"user_nickname",n)},expression:"comment.user_nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"注册手机"}},[t("el-input",{attrs:{clearable:""},model:{value:e.comment.user_phone,callback:function(n){e.$set(e.comment,"user_phone",n)},expression:"comment.user_phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{attrs:{clearable:""},model:{value:e.comment.title,callback:function(n){e.$set(e.comment,"title",n)},expression:"comment.title"}})],1),e._v(" "),t("el-form-item",{staticClass:"search-left",attrs:{label:"模块"}},[t("el-select",{attrs:{placeholder:""},on:{change:e.getCommentList},model:{value:e.comment.type,callback:function(n){e.$set(e.comment,"type",n)},expression:"comment.type"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),t("el-option",{attrs:{value:1,label:"资讯"}}),e._v(" "),t("el-option",{attrs:{value:2,label:"点播"}}),e._v(" "),t("el-option",{attrs:{value:3,label:"直播"}})],1)],1),e._v(" "),t("el-form-item",{staticStyle:{position:"relative",left:"-15px"},attrs:{label:"评论时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.comment.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.getCommentList},model:{value:e.comment.startDate,callback:function(n){e.$set(e.comment,"startDate",n)},expression:"comment.startDate"}})],1),e._v(" "),t("el-form-item",{staticClass:"date-left",attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.comment.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},on:{change:e.getCommentList},model:{value:e.comment.endDate,callback:function(n){e.$set(e.comment,"endDate",n)},expression:"comment.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"primary"},on:{click:e.getCommentList}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"select-all":e.selectAll,"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{label:"置顶状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.top?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击取消置顶",placement:"top"}},[t("el-tag",{staticClass:"setPointer",staticStyle:{width:"60px",color:"#694eff"},attrs:{size:"mini"},nativeOn:{click:function(t){e.setManuTop(n.row)}}},[e._v("\n              取消置顶\n            ")])],1):t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击置顶",placement:"top"}},[t("el-tag",{staticClass:"setPointer",staticStyle:{width:"60px"},attrs:{size:"mini"},nativeOn:{click:function(t){e.setManuUnTop(n.row)}}},[e._v("\n              置顶\n            ")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"manu-container"},[t("span",{staticClass:"manu delete-active",on:{click:function(t){e.audit(n.row)}}},[e._v("\n              "+e._s(0===n.row.audit?"审核":"已审核")+"\n            ")]),e._v(" "),t("span",{class:["manu","delete-active"],on:{click:function(t){e.deleteComments(n.row)}}},[e._v("\n              删除\n            ")]),e._v(" "),t("span",{class:["manu","delete-active"],on:{click:function(t){e.forbiddenUser(n.row)}}},[e._v("\n              "+e._s(n.row.user_forbidden?"取消禁言":"禁言")+"\n            ")]),e._v(" "),t("span",{staticClass:"manu comment-detail",on:{click:function(t){e.lookComment(n.row)}}},[e._v("\n              评论查看\n            ")]),e._v(" "),t("span",{staticClass:"manu comment-detail",on:{click:function(t){e.audit_opinion(n.row)}}},[e._v("\n              审核意见\n            ")])])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("div",[t("el-checkbox",{on:{change:e.toggleAllSelection},model:{value:e.selfSelectAll,callback:function(n){e.selfSelectAll=n},expression:"selfSelectAll"}},[e._v("\n          全选\n        ")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.batchProcess,callback:function(n){e.batchProcess=n},expression:"batchProcess"}},e._l(e.processList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.deleteManyComment}},[e._v("确定")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"1 === 2"}],attrs:{type:"primary"}},[e._v("导出数据")])],1),e._v(" "),t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"custom-dialog",title:"审核",width:"30%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",attrs:{commentid:e.commentid},on:{"close-dialog":e.closeDialog}})],1)],1)};Ls._withStripped=!0;var Bs={render:Ls,staticRenderFns:[]},Ms=Bs;var Is=!1;var Ts=t("VU/8")(Ds,Ms,!1,function(e){Is||(t("Zwaw"),t("QswY"))},"data-v-44767268",null);Ts.options.__file="src/components/manageComment/commentList.vue";var $s=Ts.exports,zs={components:{CircleTitle:en,Audit:Es},data:function(){var e=this;return{forbiddenComment:{user_nickname:"",user_phone:"",startDate:"",endDate:""},clickCellIndex:-1,tableHeader:[{prop:"user_nickname",label:"昵称"},{prop:"user_phone",label:"电话"},{prop:"createtime",label:"禁言开始时间",width:200,formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}}],tableData:[],index:-1,pageNo:1,pageSize:10,total:0,selfSelectAll:!1,cancelForbiddenCommentList:[],selectionForbidden:[]}},watch:{"forbiddenComment.user_nickname":function(){this.getForbiddenCommentList()},"forbiddenComment.user_phone":function(){this.getForbiddenCommentList()}},mounted:function(){this.getForbiddenCommentList()},methods:{getForbiddenCommentList:function(){var e=this;this.$options.filters.swapTime(this.forbiddenComment);var n,t=null!==this.forbiddenComment.startDate?new Date(this.forbiddenComment.startDate).getTime():null,a=null!==this.forbiddenComment.endDate?new Date(this.forbiddenComment.endDate).getTime():null;(n={pageNo:this.pageNo,pageSize:this.pageSize,user_nickname:this.forbiddenComment.user_nickname,user_phone:this.forbiddenComment.user_phone,timeStart:t,timeEnd:a},be("manager/Comment/pageForbiddenComment",n)).then(function(n){if(n.data.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},handleSizeChange:function(e){this.pageSize=e,this.getForbiddenCommentList()},handleCurrentChange:function(e){this.pageNo=e,this.getForbiddenCommentList()},selectAll:function(e){e.length>0?this.selfSelectAll=!0:this.selfSelectAll=!1},selectionChange:function(e){var n=this;this.cancelForbiddenCommentList=[],e.forEach(function(e,t,a){n.cancelForbiddenCommentList.push(e.userid)}),this.selectionForbidden=e},cancelForbidden:function(e){var n=this;Cs({forbiddenCommentVo:{userid:e.userid}}).then(function(e){e.data.status&&(n.$message({type:"success",message:"已取消禁言"}),n.getForbiddenCommentList())})},cancelManyForbiddenComment:function(){var e=this;if(this.cancelForbiddenCommentList.length<=0)return this.$message({type:"error",message:"请至少选择一个用户!"}),!1;var n="您即将取消";this.selectionForbidden.forEach(function(e,t,a){n+="("+e.user_nickname+")"}),this.$confirm(n+"的禁言?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n;(n={idList:e.cancelForbiddenCommentList},be("manager/Comment/batchDeleteForbiddenComment",n)).then(function(n){n.data.status&&e.$message({type:"success",message:"批量取消禁言成功!"}),e.getForbiddenCommentList()})}).catch(function(){})},toggleAllSelection:function(e){this.$refs.channelTable.toggleAllSelection()}}},Us=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"limit"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"禁言管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.forbiddenComment}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{clearable:""},model:{value:e.forbiddenComment.user_nickname,callback:function(n){e.$set(e.forbiddenComment,"user_nickname",n)},expression:"forbiddenComment.user_nickname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"注册手机"}},[t("el-input",{attrs:{clearable:""},model:{value:e.forbiddenComment.user_phone,callback:function(n){e.$set(e.forbiddenComment,"user_phone",n)},expression:"forbiddenComment.user_phone"}})],1),e._v(" "),t("el-form-item",{staticStyle:{position:"relative"},attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.forbiddenComment.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},model:{value:e.forbiddenComment.startDate,callback:function(n){e.$set(e.forbiddenComment,"startDate",n)},expression:"forbiddenComment.startDate"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"-14px"},attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.forbiddenComment.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择时间"},model:{value:e.forbiddenComment.endDate,callback:function(n){e.$set(e.forbiddenComment,"endDate",n)},expression:"forbiddenComment.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"82px"},attrs:{type:"primary"},on:{click:e.getForbiddenCommentList}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"select-all":e.selectAll,"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"manu-container"},[t("span",{staticClass:"manu delete-active",on:{click:function(t){e.cancelForbidden(n.row)}}},[e._v("\n              取消禁言\n            ")])])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("div",[t("el-checkbox",{on:{change:e.toggleAllSelection},model:{value:e.selfSelectAll,callback:function(n){e.selfSelectAll=n},expression:"selfSelectAll"}},[e._v("\n          全选\n        ")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.cancelManyForbiddenComment}},[e._v("批量取消禁言")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"1 === 2"}],attrs:{type:"primary",size:"medium"},on:{click:e.cancelManyForbiddenComment}},[e._v("导出数据")])],1),e._v(" "),t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};Us._withStripped=!0;var Ns={render:Us,staticRenderFns:[]},Rs=Ns;var Vs=!1;var js=t("VU/8")(zs,Rs,!1,function(e){Vs||(t("3BvS"),t("FKBe"))},"data-v-4e77c484",null);js.options.__file="src/components/manageComment/limitList.vue";var Ps=js.exports,Hs={name:"AssignRole",props:{usercode:{type:String,default:""},username:{type:String,default:""}},data:function(){return{allRoleList:[]}},mounted:function(){this.getUserInfo()},methods:{cancel:function(){this.$emit("closeDialog")},getUserInfo:function(){var e=this;ss({orgUsers:{usercode:this.usercode}}).then(function(n){n.data.status&&(e.allRoleList=n.data.result)})},chooseRole:function(e,n){var t,a=this;(t={assign:{usercode:this.usercode,roleid:e,assignOrCanel:n}},be("manager/OrgUsers/assignOrCanelUserRole",t)).then(function(e){e.data.status&&a.$message({type:"success",message:"分配成功"})})}}},Qs=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"assignRole"},[t("el-form",{attrs:{inline:!0,size:"small"}},[t("el-form-item",{staticStyle:{"margin-left":"13px"},attrs:{label:"用户名"}},[t("span",[e._v(e._s(e.username))])]),e._v(" "),t("el-form-item",{attrs:{label:"角色分配"}},e._l(e.allRoleList,function(n,a){return t("el-checkbox",{key:a,on:{change:function(t){e.chooseRole(n.roleid,n.isChecked)}},model:{value:n.isChecked,callback:function(t){e.$set(n,"isChecked",t)},expression:"item.isChecked"}},[e._v("\n        "+e._s(n.name)+"\n      ")])}),1)],1)],1)};Qs._withStripped=!0;var Ws={render:Qs,staticRenderFns:[]},Os=Ws;var qs=!1;var Ys=t("VU/8")(Hs,Os,!1,function(e){qs||(t("o2SZ"),t("udct"))},"data-v-4ba117d5",null);Ys.options.__file="src/components/manageSystemUser/assignRole.vue";var Zs=Ys.exports,Gs={name:"AssignRole",props:{usercodeList:{type:Array,default:function(){return[]}},username:{type:String,default:""}},data:function(){return{allRoleList:[]}},mounted:function(){this.getUserInfo()},methods:{cancel:function(){this.$emit("closeDialog")},getUserInfo:function(){var e=this;ss({orgUsers:{usercode:""}}).then(function(n){n.data.status&&(e.allRoleList=n.data.result)})},chooseRole:function(e,n){var t,a=this;(t={assign:{usercodes:this.usercodeList,roleid:e,assignOrCanel:n}},be("manager/OrgUsers/batchAssignOrCanelUserRole",t)).then(function(e){e.data.status&&a.$message({type:"success",message:"分配成功"})})}}},Js=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"assignRole"},[t("el-form",{attrs:{inline:!0,size:"small"}},[t("el-form-item",{staticStyle:{"margin-left":"13px"},attrs:{label:"用户名"}},[t("span",[e._v(e._s(e.username))])]),e._v(" "),t("el-form-item",{attrs:{label:"角色分配"}},e._l(e.allRoleList,function(n,a){return t("el-checkbox",{key:a,on:{change:function(t){e.chooseRole(n.roleid,n.isChecked)}},model:{value:n.isChecked,callback:function(t){e.$set(n,"isChecked",t)},expression:"item.isChecked"}},[e._v("\n        "+e._s(n.name)+"\n      ")])}),1)],1)],1)};Js._withStripped=!0;var Xs={render:Js,staticRenderFns:[]},Ks=Xs;var er=!1;var nr=t("VU/8")(Gs,Ks,!1,function(e){er||(t("nkiH"),t("E20o"))},"data-v-5d29c713",null);nr.options.__file="src/components/manageSystemUser/assignRoleList.vue";var tr={components:{CircleTitle:en,AssignRole:Zs,AssignRoleList:nr.exports},data:function(){var e=this;return{manageUser:{username:"",startDate:"",endDate:""},dialogVisible:!1,componentName:"AssignRole",tableHeader:[{prop:"username",label:"成员账号"},{prop:"roleList",label:"角色",formatter:function(e,n,t,a){if(t.length<=0)return"该用户暂无分配角色";var i="";return t.forEach(function(e,n,t){n!==t.length-1?i+=e.name+",":i+=e.name}),i}},{prop:"phone",label:"手机号"},{prop:"email",label:"邮箱地址"},{prop:"createdata",label:"添加时间",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}}],tableData:[],pageNo:1,pageSize:10,total:0,usercodeList:[],usercode:"",username:"",selectRows:[]}},watch:{"manageUser.username":function(e){this.getManageUserList()}},mounted:function(){this.getManageUserList()},methods:{getManageUserList:function(){var e=this;this.$options.filters.swapTime(this.manageUser);var n,t=null!==this.manageUser.startDate?new Date(this.manageUser.startDate).getTime():null,a=null!==this.manageUser.endDate?new Date(this.manageUser.endDate).getTime():null;(n={pageNo:this.pageNo,pageSize:this.pageSize,name:this.manageUser.username,timeStart:t,timeEnd:a},be("manager/OrgUsers/page",n)).then(function(n){if(n.status){var t=n.data.result;e.tableData=t.list,e.total=t.total}})},assignRole:function(e){this.dialogVisible=!0,this.componentName="AssignRole",this.usercode=e.usercode,this.username=e.username},assignRoleList:function(){this.dialogVisible=!0,this.componentName="AssignRoleList"},handleSizeChange:function(e){this.pageSize=e,this.getManageUserList()},handleCurrentChange:function(e){this.pageNo=e,this.getManageUserList()},closeDialog:function(){this.componentName="",this.dialogVisible=!1,this.getManageUserList()},selectionChange:function(e){var n=this;this.usercodeList=[],this.selectRows=e;var t="";e.forEach(function(e,a,i){a===i.length-1?t+=e.username:t+=e.username+"/",n.usercodeList.push(e.usercode)}),this.username=t},recoverSelection:function(){var e=this;this.selectRows.forEach(function(n){e.$refs.channelTable.toggleRowSelection(n,!0)})}}},ar=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"user-manage"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"系统用户管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.manageUser}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{clearable:""},model:{value:e.manageUser.username,callback:function(n){e.$set(e.manageUser,"username",n)},expression:"manageUser.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.manageUser.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.getManageUserList},model:{value:e.manageUser.startDate,callback:function(n){e.$set(e.manageUser,"startDate",n)},expression:"manageUser.startDate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.manageUser.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.getManageUserList},model:{value:e.manageUser.endDate,callback:function(n){e.$set(e.manageUser,"endDate",n)},expression:"manageUser.endDate"}})],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.getManageUserList}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("el-button",{attrs:{disabled:e.selectRows<=0,type:"primary"},on:{click:e.assignRoleList}},[e._v("\n          分配角色\n          "),t("i",{staticClass:"el-icon-edit-outline el-icon--right "})])],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"},on:{"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center",fixed:"","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[t("span",{staticClass:"user edit",on:{click:function(t){e.assignRole(n.row)}}},[e._v("\n              分配角色\n            ")])])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"用户分配角色",width:"30%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",attrs:{usercode:e.usercode,"usercode-list":e.usercodeList,username:e.username},on:{closeDialog:e.closeDialog}})],1)],1)};ar._withStripped=!0;var ir={render:ar,staticRenderFns:[]},lr=ir;var or=!1;var sr=t("VU/8")(tr,lr,!1,function(e){or||(t("gm5r"),t("Htun"))},"data-v-4c4b3540",null);sr.options.__file="src/components/manageSystemUser/userManage.vue";var rr=sr.exports,cr=t("iub5"),mr=t.n(cr),dr={name:"AddRole",components:{treeTransfer:mr.a},data:function(){return{ruleForm:{role_name:""},mode:"transfer",fromData:[],toData:[],title:["全部权限","已选择权限"],rules:{role_name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},idArr:[]}},mounted:function(){this.getTreePermission()},methods:{getTreePermission:function(){var e=this;ls().then(function(n){n.data.status&&(e.fromData=n.data.result)})},getAllSelectedId:function(){var e=this;this.toData.forEach(function(n,t,a){e.idArr.push(n.id),n.children.length>0&&e.getChildrenId(n.children)})},getChildrenId:function(e){var n=this;e.forEach(function(e,t,a){n.idArr.push(e.id),e.children.length>0&&n.getChildrenId(e.children)})},onSubmit:function(e){var n=this;this.$refs[e].validate(function(e){return e?n.toData.length<=0?(n.$notify({type:"error",title:"错误",message:"请为角色配置权限"}),!1):(n.idArr=[],n.getAllSelectedId(),void(t={role:{name:n.ruleForm.role_name,permissionidList:n.idArr}},be("manager/Permission/addRole",t)).then(function(e){console.log(e),e.data.status&&(n.$notify({type:"success",title:"成功",message:"添加角色成功"}),n.$emit("closeDialog"))})):(console.log("error submit!!"),!1);var t})},cancel:function(){this.$emit("closeDialog")},addAuth:function(e,n,t){this.toData=n},removeAuth:function(e,n,t){this.toData=n}}},pr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"addUser"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[t("el-input",{staticStyle:{width:"260px"},attrs:{clearable:""},model:{value:e.ruleForm.role_name,callback:function(n){e.$set(e.ruleForm,"role_name","string"==typeof n?n.trim():n)},expression:"ruleForm.role_name"}})],1)],1),e._v(" "),t("div",{staticClass:"table-lists"},[t("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("权限配置：")]),e._v(" "),t("tree-transfer",{attrs:{title:e.title,from_data:e.fromData,to_data:e.toData,"default-props":{label:"label"},mode:e.mode,filter:!1,"open-all":"",height:"440px"},on:{addBtn:e.addAuth,removeBtn:e.removeAuth}})],1),e._v(" "),t("el-form-item",{staticClass:"submit",staticStyle:{width:"100%"}},[t("el-button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.onSubmit("ruleForm")}}},[e._v("提交")])],1)],1)};pr._withStripped=!0;var ur={render:pr,staticRenderFns:[]},hr=ur;var gr=!1;var Ar=t("VU/8")(dr,hr,!1,function(e){gr||(t("xJQC"),t("WIgC"))},"data-v-40a8aab3",null);Ar.options.__file="src/components/manageRole/addRole.vue";var fr=Ar.exports,br={name:"AddRole",components:{treeTransfer:mr.a},props:{roleid:{type:String,default:""}},data:function(){return{ruleForm:{role_name:""},mode:"transfer",fromData:[],toData:[],title:["全部权限","已选择权限"],rules:{role_name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},idArr:[]}},mounted:function(){this.getTreePermission(),this.getRoleDetails()},methods:{getTreePermission:function(){var e=this;ls().then(function(n){n.data.status&&(e.fromData=n.data.result)})},getRoleDetails:function(){var e=this;os({role:{roleid:this.roleid}}).then(function(n){if(n.data.status){var t=n.data.result;e.ruleForm.role_name=t.name,e.toData=t.treePermission||[]}})},getAllSelectedId:function(){var e=this;this.toData.forEach(function(n,t,a){e.idArr.push(n.id),n.children.length>0&&e.getChildrenId(n.children)})},getChildrenId:function(e){var n=this;e.forEach(function(e,t,a){n.idArr.push(e.id),e.children.length>0&&n.getChildrenId(e.children)})},onSubmit:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var t;n.idArr=[],n.getAllSelectedId(),(t={role:{roleid:n.roleid,name:n.ruleForm.role_name,permissionidList:n.idArr}},be("manager/Permission/updateRole",t)).then(function(e){console.log(e),e.data.status&&(n.$notify({type:"success",title:"成功",message:"编辑角色成功"}),n.$emit("closeDialog"))})})},cancel:function(){this.$emit("closeDialog")},addAuth:function(e,n,t){this.toData=n},removeAuth:function(e,n,t){this.toData=n}}},vr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"addUser"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[t("el-input",{staticStyle:{width:"260px"},attrs:{clearable:""},model:{value:e.ruleForm.role_name,callback:function(n){e.$set(e.ruleForm,"role_name","string"==typeof n?n.trim():n)},expression:"ruleForm.role_name"}})],1)],1),e._v(" "),t("div",{staticClass:"table-lists"},[t("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("权限配置：")]),e._v(" "),t("tree-transfer",{attrs:{title:e.title,from_data:e.fromData,to_data:e.toData,"default-props":{label:"label"},mode:e.mode,filter:!1,"open-all":"",height:"440px"},on:{addBtn:e.addAuth,removeBtn:e.removeAuth}})],1),e._v(" "),t("el-form-item",{staticClass:"submit",staticStyle:{width:"100%"}},[t("el-button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.onSubmit("ruleForm")}}},[e._v("提交")])],1)],1)};vr._withStripped=!0;var yr={render:vr,staticRenderFns:[]},Cr=yr;var _r=!1;var xr=t("VU/8")(br,Cr,!1,function(e){_r||(t("GZnH"),t("CE9T"))},"data-v-52c215d4",null);xr.options.__file="src/components/manageRole/editRole.vue";var wr=xr.exports,Fr={name:"AddRole",components:{},props:{roleid:{type:String,default:""}},data:function(){return{ruleForm:{role_name:""},toData:[]}},mounted:function(){this.getRoleDetails()},methods:{getRoleDetails:function(){var e=this;os({role:{roleid:this.roleid}}).then(function(n){if(n.data.status){var t=n.data.result;e.ruleForm.role_name=t.name,e.toData=t.treePermission||[]}})},cancel:function(){this.$emit("closeDialog")}}},kr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"addUser"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm}},[t("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[t("el-input",{staticStyle:{width:"260px"},attrs:{disabled:!0,clearable:""},model:{value:e.ruleForm.role_name,callback:function(n){e.$set(e.ruleForm,"role_name",n)},expression:"ruleForm.role_name"}})],1)],1),e._v(" "),t("div",{staticClass:"table-lists"},[t("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("拥有权限：")]),e._v(" "),t("div",{staticClass:"self-tree-style"},[t("el-tree",{attrs:{data:e.toData,"default-expand-all":!0}})],1)])],1)};kr._withStripped=!0;var Sr={render:kr,staticRenderFns:[]},Er=Sr;var Dr=!1;var Lr=t("VU/8")(Fr,Er,!1,function(e){Dr||(t("0m4B"),t("4IdU"))},"data-v-218a921b",null);Lr.options.__file="src/components/manageRole/detailRole.vue";var Br={components:{CircleTitle:en,AddRole:fr,EditRole:wr,DetailRole:Lr.exports},data:function(){var e=this;return{roleForm:{name:"",startDate:"",endDate:""},dialogVisible:!1,componentName:"AddRole",tableHeader:[{prop:"name",label:"角色名称"},{prop:"createtime",label:"创建时间",formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}}],tableData:[],pageNo:1,pageSize:10,total:0,roleid:""}},watch:{"roleForm.name":function(e){this.getRoleList()}},mounted:function(){this.getRouterParam(),this.getRoleList()},methods:{getRouterParam:function(){var e=this.$route.query;e.pageNo&&(this.pageNo=parseInt(e.pageNo))},closeDialog:function(){this.dialogVisible=!1,this.componentName="",this.getRoleList()},getRoleList:function(){var e=this;this.$options.filters.swapTime(this.roleForm);var n,t=null!==this.roleForm.startDate?new Date(this.roleForm.startDate).getTime():null,a=null!==this.roleForm.endDate?new Date(this.roleForm.endDate).getTime():null;(n={pageNo:this.pageNo,pageSize:this.pageSize,name:this.roleForm.name,timeStart:t,timeEnd:a},be("manager/Permission/pageRole",n)).then(function(n){if(n.status){var t=n.data.result;e.tableData=t.list,e.total=t.total,e.pageNo=t.pageNum}})},handleSizeChange:function(e){this.pageSize=e,this.getRoleList()},handleCurrentChange:function(e){this.pageNo=e,this.getRoleList()},detailRole:function(e){this.dialogVisible=!0,this.componentName="DetailRole",this.roleid=e.roleid},handleEdit:function(e){this.componentName="EditRole",this.dialogVisible=!0,this.roleid=e.roleid},addRole:function(){this.componentName="AddRole",this.dialogVisible=!0},handleDelete:function(e){var n=this;this.$confirm('是否删除"'+e.name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t={role:{roleid:e.roleid}},be("manager/Permission/deleteRole",t)).then(function(e){e.data.status&&n.$message({type:"success",message:"删除成功!"}),n.getRoleList()})}).catch(function(){})}}},Mr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"role-manage"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"角色管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.roleForm}},[t("el-form-item",{attrs:{label:"角色名称"}},[t("el-input",{attrs:{clearable:""},model:{value:e.roleForm.name,callback:function(n){e.$set(e.roleForm,"name",n)},expression:"roleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开始时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.roleForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.getRoleList},model:{value:e.roleForm.startDate,callback:function(n){e.$set(e.roleForm,"startDate",n)},expression:"roleForm.startDate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"结束时间"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.roleForm.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.getRoleList},model:{value:e.roleForm.endDate,callback:function(n){e.$set(e.roleForm,"endDate",n)},expression:"roleForm.endDate"}})],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.getRoleList}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("\n          添加\n          "),t("i",{staticClass:"el-icon-plus el-icon--right"})]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"创建角色",width:"60%"},on:{"update:visible":function(n){e.dialogVisible=n},close:e.closeDialog}},[t(e.componentName,{tag:"div",attrs:{roleid:e.roleid},on:{closeDialog:e.closeDialog}})],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"}},[e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center","show-overflow-tooltip":""}})}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[t("span",{staticClass:"user reset-password",on:{click:function(t){e.detailRole(n.row)}}},[e._v("\n              查看\n            ")]),e._v(" "),t("span",{staticClass:"user edit",on:{click:function(t){e.handleEdit(n.row)}}},[e._v("\n              编辑\n            ")]),e._v(" "),t("span",{staticClass:"user delete",on:{click:function(t){e.handleDelete(n.row)}}},[e._v("\n              删除\n            ")])])]}}])})],2),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};Mr._withStripped=!0;var Ir={render:Mr,staticRenderFns:[]},Tr=Ir;var $r=!1;var zr=t("VU/8")(Br,Tr,!1,function(e){$r||(t("btcs"),t("2aEc"))},"data-v-3b57c52f",null);zr.options.__file="src/components/manageRole/roleManage.vue";var Ur=zr.exports;var Nr={components:{CircleTitle:en},data:function(){var e=this;return{ruleForm:{username:"",operationContent:"",startDate:"",endDate:""},tableHeader:[{prop:"logid",label:"日志编号",width:180},{prop:"username",label:"操作人员",width:120},{prop:"createtime",label:"操作日期",width:140,formatter:function(n,t,a,i){return e.$options.filters.FormatDate(a,"yyyy-MM-dd hh:mm")}},{prop:"ipAddress",label:"IP地址",width:180},{prop:"operationContent",label:"操作事件"}],tableData:[],pageNo:1,pageSize:10,total:0,batchProcess:"",processList:[{value:"week",label:"一周之前"},{value:"month",label:"一个月之前"},{value:"halfYear",label:"半年之前"},{value:"year",label:"一年之前"}]}},watch:{"ruleForm.username":function(e){this.getLogList()},"ruleForm.operationContent":function(e){this.getLogList()}},mounted:function(){this.getLogList()},methods:{getLogList:function(){var e=this;this.$options.filters.swapTime(this.ruleForm);var n=null!==this.ruleForm.startDate?new Date(this.ruleForm.startDate).getTime():null,t=null!==this.ruleForm.endDate?new Date(this.ruleForm.endDate).getTime():null;(function(e){return be("manager/OperationLog/page",e)})({pageNo:this.pageNo,pageSize:this.pageSize,username:this.ruleForm.username,operationContent:this.ruleForm.operationContent,timeStart:n,timeEnd:t}).then(function(n){if(n.status){var t=n.data.result;e.tableData=t.list,e.total=t.total,e.pageNo=t.pageNum}})},handleSizeChange:function(e){this.pageSize=e,this.getLogList()},handleCurrentChange:function(e){this.pageNo=e,this.getLogList()},clearLog:function(e){var n=this;this.$confirm("是否清除日志?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){switch(e){case"week":n.deleteLog({days:7,months:null,years:null});break;case"month":n.deleteLog({days:null,months:1,years:null});break;case"halfYear":n.deleteLog({days:null,months:6,years:null});break;case"year":n.deleteLog({days:null,months:null,years:1})}}).catch(function(e){console.log(e)})},deleteLog:function(e){var n,t=this;(n=e,be("manager/OperationLog/delete",n)).then(function(e){e.data.status&&(t.$notify({type:"success",title:"提示",message:"清除成功!"}),t.getLogList())})}}},Rr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"log-statistics"},[t("div",[t("circle-title",{staticClass:"cicle-controller",attrs:{"title-name":"日志统计管理"}}),e._v(" "),t("div",{staticClass:"search-form-container"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.ruleForm}},[t("el-form-item",{attrs:{label:"操作人员"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.username,callback:function(n){e.$set(e.ruleForm,"username",n)},expression:"ruleForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"操作事件"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.operationContent,callback:function(n){e.$set(e.ruleForm,"operationContent",n)},expression:"ruleForm.operationContent"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"操作开始日期"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.ruleForm.startDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.getLogList},model:{value:e.ruleForm.startDate,callback:function(n){e.$set(e.ruleForm,"startDate",n)},expression:"ruleForm.startDate"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"-28px"},attrs:{label:"操作结束日期"}},[t("el-date-picker",{attrs:{title:e._f("FormatDate")(e.ruleForm.endDate,"yyyy-MM-dd hh:mm"),type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},on:{change:e.getLogList},model:{value:e.ruleForm.endDate,callback:function(n){e.$set(e.ruleForm,"endDate",n)},expression:"ruleForm.endDate"}})],1),e._v(" "),t("el-button",{staticStyle:{"margin-left":"98px"},attrs:{type:"primary"},on:{click:e.getLogList}},[e._v("\n          查询\n          "),t("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1)],1),e._v(" "),t("div",{staticClass:"table-list"},[t("el-table",{ref:"channelTable",staticClass:"whole-table",attrs:{data:e.tableData,stripe:"","min-height":"400"}},e._l(e.tableHeader,function(e,n){return t("el-table-column",{key:n,attrs:{prop:e.prop,label:e.label,width:e.width,formatter:e.formatter,align:"center","show-overflow-tooltip":""}})}),1),e._v(" "),t("div",{staticClass:"pagination"},[t("div",[t("el-select",{attrs:{placeholder:"清除日志"},on:{change:e.clearLog},model:{value:e.batchProcess,callback:function(n){e.batchProcess=n},expression:"batchProcess"}},e._l(e.processList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1),e._v(" "),t("el-pagination",{attrs:{total:e.total,"page-sizes":[10,20,30,40],background:"",layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])};Rr._withStripped=!0;var Vr={render:Rr,staticRenderFns:[]},jr=Vr;var Pr=!1;var Hr=t("VU/8")(Nr,jr,!1,function(e){Pr||(t("NXTN"),t("v0qt"))},"data-v-70231bb7",null);Hr.options.__file="src/components/manageLog/logStatistics.vue";var Qr=Hr.exports,Wr=t("c/Tr"),Or=t.n(Wr);function qr(e){return be("manager/AppBaseConfiguration/getByCompid",e)}function Yr(e){return be("manager/AppBaseConfiguration/save",e)}var Zr={name:"MyUpload",mixins:[xa],props:{uploadItem:{type:Object,default:function(){return{}}},align:{type:String,default:""},uploadUrl:{type:String,default:""}},computed:{getUploadUrl:function(){return _e()},chooseUrl:function(){return"left"===this.align?this.uploadItem.icon:"right"===this.align?this.uploadItem.icon_select:this.uploadUrl}},methods:{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.$emit("open-dialog",this.dialogImageUrl)},handleRemove:function(e,n){if(e.status){"left"===this.align?this.$set(this.uploadItem,"icon",null):"right"===this.align?this.$set(this.uploadItem,"icon_select",null):this.$set(this.uploadItem,"url",null)}},handlePcAvatarSuccess:function(e,n,t){if(e.status){var a=e.result;"left"===this.align?this.$set(this.uploadItem,"icon",a):"right"===this.align?this.$set(this.uploadItem,"icon_select",a):this.$set(this.uploadItem,"url",a)}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<1;return n||this.$message.error("请上传一张图片!"),t||this.$message.error("上传图片大小不能超过 1MB!"),n&&t}}},Gr=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-upload",{attrs:{"on-preview":e.handlePictureCardPreview,action:e.getUploadUrl,headers:e.uploadHeaders,"on-remove":e.handleRemove,"file-list":e.chooseUrl?[{url:e.chooseUrl}]:[],"on-success":e.handlePcAvatarSuccess,"before-upload":e.beforeAvatarUpload,limit:1,"list-type":"picture-card"}},[t("i",{staticClass:"el-icon-plus"})])};Gr._withStripped=!0;var Jr={render:Gr,staticRenderFns:[]},Xr=Jr;var Kr=!1;var ec=t("VU/8")(Zr,Xr,!1,function(e){Kr||t("JzUG")},"data-v-5c1e7324",null);ec.options.__file="src/components/commons/myUpload.vue";var nc={components:{CircleTitle:en,MyUpload:ec.exports},mixins:[xa],data:function(){return{editForm:{channel_select_color:"red",special_icon_color:"red",top_icon_color:"red",menulist:[],disabled:!0,data:""},frameList:[{name:"顶部背景",url:""},{name:"我的背景",url:""},{name:"自定义图标",url:""},{name:"搜索图标",url:""},{name:"背景logo",url:""}],loginList:[{name:"登录背景",url:""},{name:"登录logo",url:""},{name:"登录按钮",url:""},{name:"注册按钮",url:""},{name:"账号icon",url:""},{name:"密码icon",url:""}],dialogVisible:!1,dialogImageUrl:"",countAuditWait:!0,rules:{head_img:[{required:!0,message:"请上传图片",trigger:"blur"}]}}},computed:{getUploadUrl:function(){return _e()}},mounted:function(){this.getBasisByID()},methods:{getBasisByID:function(){var e=this;qr().then(function(n){if(n.data.status){e.editForm.data=n.data.result;var t=n.data.result;for(var a in console.log(t),t.menu)t.menu[a].disabled=!0;e.editForm.menulist=t.menu,e.$set(e.frameList[0],"url",t.frame.top_bg_url),e.$set(e.frameList[1],"url",t.frame.center_bg_url),e.$set(e.frameList[2],"url",t.frame.icon_select_url),e.$set(e.frameList[3],"url",t.frame.search_icon),e.$set(e.frameList[4],"url",t.frame.bg_logo_url),e.$set(e.loginList[0],"url",t.loginPage.login_bg_url),e.$set(e.loginList[1],"url",t.loginPage.login_logo_url),e.$set(e.loginList[2],"url",t.loginPage.login_btn_url),e.$set(e.loginList[3],"url",t.loginPage.register_btn_url),e.$set(e.loginList[4],"url",t.loginPage.username_icon),e.$set(e.loginList[5],"url",t.loginPage.password_icon),e.editForm.channel_select_color=t.frame.channel_select_color,e.editForm.special_icon_color=t.content.special_icon_color,e.editForm.top_icon_color=t.content.top_icon_color}})},edit:function(){for(var e in this.editForm.data.menu)"personalCenter"!==e&&(this.editForm.data.menu[e].disabled=!1);Or()(document.querySelectorAll(".menu .el-upload-list__item-delete")).forEach(function(e){e.style.display="inline-block"}),this.countAuditWait=!1},cancel:function(){Or()(document.querySelectorAll(".menu .el-upload-list__item-delete")).forEach(function(e){e.style.display="none"}),this.countAuditWait=!0,this.getBasisByID()},openDialog:function(e){this.dialogImageUrl=e,this.dialogVisible=!0},submitMenu:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Yr({configuration:{updateConfiguration:"menu",menu:{news:{isuse:n.editForm.menulist.news.isuse,name:n.editForm.menulist.news.name,icon:n.editForm.menulist.news.icon,icon_select:n.editForm.menulist.news.icon_select},onDemand:{isuse:n.editForm.menulist.onDemand.isuse,name:n.editForm.menulist.onDemand.name,icon:n.editForm.menulist.onDemand.icon,icon_select:n.editForm.menulist.onDemand.icon_select},liveBroadcast:{isuse:n.editForm.menulist.liveBroadcast.isuse,name:n.editForm.menulist.liveBroadcast.name,icon:n.editForm.menulist.liveBroadcast.icon,icon_select:n.editForm.menulist.liveBroadcast.icon_select},service:{isuse:n.editForm.menulist.service.isuse,name:n.editForm.menulist.service.name,icon:n.editForm.menulist.service.icon,icon_select:n.editForm.menulist.service.icon_select},e_commerce:{isuse:n.editForm.menulist.e_commerce.isuse,name:n.editForm.menulist.e_commerce.name,icon:n.editForm.menulist.e_commerce.icon,icon_select:n.editForm.menulist.e_commerce.icon_select},interaction:{isuse:n.editForm.menulist.interaction.isuse,name:n.editForm.menulist.interaction.name,icon:n.editForm.menulist.interaction.icon,icon_select:n.editForm.menulist.interaction.icon_select},personalCenter:{isuse:n.editForm.menulist.personalCenter.isuse,name:n.editForm.menulist.personalCenter.name,icon:n.editForm.menulist.personalCenter.icon,icon_select:n.editForm.menulist.personalCenter.icon_select}}}}).then(function(e){200===e.status&&(Or()(document.querySelectorAll(".menu .el-upload-list__item-delete")).forEach(function(e){e.style.display="none"}),n.getBasisByID(),n.countAuditWait=!0,n.$notify({title:"通知",message:"更改成功",type:"success"}))})})},submitFrame:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Yr({configuration:{updateConfiguration:"frame",frame:{top_bg_url:n.frameList[0].url,center_bg_url:n.frameList[1].url,icon_select_url:n.frameList[2].url,search_icon:n.frameList[3].url,bg_logo_url:n.frameList[4].url,channel_select_color:n.editForm.channel_select_color}}}).then(function(e){200===e.status&&(qr().then(function(e){if(e.data.status){var t=e.data.result;n.$set(n.frameList[0],"url",t.frame.top_bg_url),n.$set(n.frameList[1],"url",t.frame.center_bg_url),n.$set(n.frameList[2],"url",t.frame.icon_select_url),n.$set(n.frameList[3],"url",t.frame.search_icon),n.$set(n.frameList[4],"url",t.frame.bg_logo_url),n.editForm.channel_select_color=t.frame.channel_select_color}}),n.$notify({title:"通知",message:"更改成功",type:"success"}))})})},submitContent:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Yr({configuration:{updateConfiguration:"content",content:{special_icon_color:n.editForm.special_icon_color,top_icon_color:n.editForm.top_icon_color}}}).then(function(e){200===e.status&&(qr().then(function(e){if(e.data.status){var t=e.data.result;n.editForm.special_icon_color=t.content.special_icon_color,n.editForm.top_icon_color=t.content.top_icon_color}}),n.$notify({title:"通知",message:"更改成功",type:"success"}))})})},submitLogin:function(e){var n=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Yr({configuration:{updateConfiguration:"loginPage",loginPage:{login_bg_url:n.loginList[0].url,login_logo_url:n.loginList[1].url,login_btn_url:n.loginList[2].url,register_btn_url:n.loginList[3].url,username_icon:n.loginList[4].url,password_icon:n.loginList[5].url}}}).then(function(e){200===e.status&&(qr().then(function(e){if(e.data.status){var t=e.data.result;n.$set(n.loginList[0],"url",t.loginPage.login_bg_url),n.$set(n.loginList[1],"url",t.loginPage.login_logo_url),n.$set(n.loginList[2],"url",t.loginPage.login_btn_url),n.$set(n.loginList[3],"url",t.loginPage.register_btn_url),n.$set(n.loginList[4],"url",t.loginPage.username_icon),n.$set(n.loginList[5],"url",t.loginPage.password_icon)}}),n.$notify({title:"通知",message:"更改成功",type:"success"}))})})},handlePcAvatarSuccess:function(e,n,t){if(console.log(e),e.status){var a=e.result;"left"===this.align?this.$set(this.uploadItem,"icon",a):this.$set(this.uploadItem,"icon_select",a)}},beforeAvatarUpload:function(e){var n=e.type in{"image/jpeg":!0,"image/png":!0,"image/jpg":!0},t=e.size/1024/1024<1;return n||this.$message.error("请上传一张图片!"),t||this.$message.error("上传图片大小不能超过 1MB!"),n&&t}}},tc=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"basis"},[t("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[t("div",{staticClass:"menu"},[t("circle-title",{staticClass:"circle-title",attrs:{"title-name":"菜单配置"}}),e._v(" "),t("div",{staticClass:"menu-box"},e._l(e.editForm.menulist,function(n,a){return t("div",{key:a,staticClass:"box-left"},[t("el-checkbox",{attrs:{disabled:n.disabled},model:{value:n.isuse,callback:function(t){e.$set(n,"isuse",t)},expression:"item.isuse"}},[t("div",{class:["title",e.countAuditWait?"block":"none"]},[e._v(" "+e._s(n.name)+" ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:n.name,expression:"item.name"}],class:["input",e.countAuditWait?"input-none":"input-block"],attrs:{disabled:n.disabled,minlength:"1",maxlength:"3",type:"text"},domProps:{value:n.name},on:{input:function(t){t.target.composing||e.$set(n,"name",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"img-box"},[t("div",{staticStyle:{width:"60px",height:"60px",overflow:"hidden"}},[t("my-upload",{attrs:{"upload-item":n,align:"left"},on:{"open-dialog":e.openDialog}}),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(n){e.dialogVisible=n}}},[t("img",{attrs:{src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),t("span",[e._v("默认图")])]),e._v(" "),t("div",{staticClass:"img-box"},[t("div",{staticStyle:{width:"60px",height:"60px",overflow:"hidden"}},[t("my-upload",{attrs:{"upload-id":n.id,"upload-item":n,align:"right"},on:{"open-dialog":e.openDialog}})],1),e._v(" "),t("span",[e._v("选中图")])])],1)}),0),e._v(" "),t("div",{staticClass:"edit"},[t("el-button",{class:["",e.countAuditWait?"block":"none"],staticStyle:{"margin-left":"90%","font-size":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(n){e.edit()}}},[e._v("编辑")]),e._v(" "),t("div",{class:["save",e.countAuditWait?"none":"block"]},[t("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(n){e.submitMenu("editForm")}}},[e._v("保存")]),e._v(" "),t("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"info",size:"small"},on:{click:function(n){e.cancel()}}},[e._v("取消")])],1)],1)],1),e._v(" "),t("div",{staticClass:"frame"},[t("circle-title",{staticClass:"circle-title",attrs:{"title-name":"框架内容"}}),e._v(" "),t("div",{staticClass:"frame-box"},e._l(e.frameList,function(n,a){return t("div",{key:a,staticClass:"box-left"},[t("div",{staticClass:"framework-title"},[e._v(e._s(n.name))]),e._v(" "),t("div",{staticClass:"img-box"},[t("div",{staticStyle:{width:"60px",height:"60px",overflow:"hidden"}},[t("my-upload",{attrs:{"upload-item":n,"upload-url":n.url},on:{"update:uploadUrl":function(t){e.$set(n,"url",t)},"open-dialog":e.openDialog}})],1)])])}),0),e._v(" "),t("div",{staticClass:"frame-box"},[t("div",{staticClass:"box-left"},[t("div",{staticClass:"framework-title"},[e._v("频道选中颜色")]),e._v(" "),t("el-color-picker",{staticClass:"img-box",model:{value:e.editForm.channel_select_color,callback:function(n){e.$set(e.editForm,"channel_select_color",n)},expression:"editForm.channel_select_color"}})],1)]),e._v(" "),t("div",{staticClass:"edit"},[t("el-button",{staticStyle:{"margin-left":"90%","font-size":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(n){e.submitFrame("editForm")}}},[e._v("保存")])],1)],1),e._v(" "),t("div",{staticClass:"frame content"},[t("circle-title",{staticClass:"circle-title",attrs:{"title-name":"内容标识"}}),e._v(" "),t("div",{staticClass:"frame-box"},[t("div",{staticClass:"box-left"},[t("div",{staticClass:"framework-title"},[e._v("专题图标颜色")]),e._v(" "),t("el-color-picker",{staticClass:"img-box",model:{value:e.editForm.special_icon_color,callback:function(n){e.$set(e.editForm,"special_icon_color",n)},expression:"editForm.special_icon_color"}})],1),e._v(" "),t("div",{staticClass:"box-left"},[t("div",{staticClass:"framework-title"},[e._v("置顶图标颜色")]),e._v(" "),t("el-color-picker",{staticClass:"img-box",model:{value:e.editForm.top_icon_color,callback:function(n){e.$set(e.editForm,"top_icon_color",n)},expression:"editForm.top_icon_color"}})],1)]),e._v(" "),t("div",{staticClass:"edit"},[t("el-button",{staticStyle:{"margin-left":"90%","font-size":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(n){e.submitContent("editForm")}}},[e._v("保存")])],1)],1),e._v(" "),t("div",{staticClass:"frame loginPage"},[t("circle-title",{staticClass:"circle-title",attrs:{"title-name":"登录页"}}),e._v(" "),t("div",{staticClass:"frame-box"},e._l(e.loginList,function(n,a){return t("div",{key:a,staticClass:"box-left"},[t("div",{staticClass:"framework-title"},[e._v(e._s(n.name))]),e._v(" "),t("div",{staticClass:"img-box"},[t("div",{staticStyle:{width:"60px",height:"60px",overflow:"hidden"}},[t("my-upload",{attrs:{"upload-item":n,"upload-url":n.url},on:{"update:uploadUrl":function(t){e.$set(n,"url",t)},"open-dialog":e.openDialog}})],1)])])}),0),e._v(" "),t("div",{staticClass:"edit"},[t("el-button",{staticStyle:{"margin-left":"90%","font-size":"14px"},attrs:{type:"primary",size:"small"},on:{click:function(n){e.submitLogin("editForm")}}},[e._v("保存")])],1)],1)])],1)};tc._withStripped=!0;var ac={render:tc,staticRenderFns:[]},ic=ac;var lc=!1;var oc=t("VU/8")(nc,ic,!1,function(e){lc||(t("O70V"),t("nIs1"))},"data-v-72474744",null);oc.options.__file="src/components/manageBasis/basisConfiguration.vue";var sc=oc.exports;ie.default.use(qe.a);var rc=[{path:"/",component:Ue,redirect:"/home"},{path:"/home",component:Cn},{path:"/manageChannel",component:kn,redirect:"/manageChannel/list",children:[{path:"list",component:qt,meta:{keepAlive:!0}},{path:"create",component:sa},{path:"edit",name:"channelEdit",component:ha}]},{path:"/manageSlide",component:Bn,redirect:"/manageSlide/list",children:[{path:"list",component:Qa,meta:{keepAlive:!0}},{path:"create",component:pi},{path:"edit",name:"slideEdit",component:vi}]},{path:"/manageTopic",component:zn,redirect:"/manageTopic/list",children:[{path:"list",component:_a,meta:{keepAlive:!0}},{path:"create",component:La},{path:"edit",name:"topicEdit",component:Ua}]},{path:"/manageManuscript",component:jn,redirect:"/manageManuscript/list",children:[{path:"list",component:$i}]},{path:"/subLive",component:Jn,redirect:"/subLive/list",children:[{path:"list",component:Fl}]},{path:"/subChannel",component:Jn,redirect:"/subChannel/list",children:[{path:"list",component:Ml,meta:{keepAlive:!0}},{path:"create",component:Ol},{path:"edit",component:Kl}]},{path:"/live",component:tt,redirect:"/live/list",children:[{path:"list",component:so,meta:{keepAlive:!0}},{path:"create",component:go},{path:"edit",component:_o}]},{path:"/event",component:st,redirect:"/event/list",children:[{path:"list",component:Qo},{path:"userEventList",component:is},{path:"create",component:Jo},{path:"edit",component:Uo}]},{path:"/user",component:pt,redirect:"/user/list",children:[{path:"list",component:hs},{path:"black-white",component:vs}]},{path:"/comment",component:ft,redirect:"/comment/list",children:[{path:"list",component:$s},{path:"limit",component:Ps}]},{path:"/manageStartpage",component:On,redirect:"/manageStartpage/list",children:[{path:"list",component:Pi,meta:{keepAlive:!0}},{path:"create",component:Zi},{path:"edit",name:"startpageEdit",component:cl},{path:"innerAdverEdit",name:"innerAdverEdit",component:tl}]},{path:"/manageSystemUser",component:_t,redirect:"/manageSystemUser/systemUser",children:[{path:"systemUser",component:rr}]},{path:"/manageRole",component:St,redirect:"/manageRole/role",children:[{path:"role",component:Ur}]},{path:"/manageLog",component:Mt,redirect:"/manageLog/logStatistics",children:[{path:"logStatistics",component:Qr}]},{path:"/manageBasis",component:Ut,redirect:"/manageBasis/basis",children:[{path:"basis",component:sc}]}],cc=new qe.a({mode:"hash",routes:rc}),mc=function(e,n){if(""===e||null===e)return!1;var t={"M+":(e=e instanceof Date?e:new Date(e)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var a in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substring(4-RegExp.$1.length))),t)if(new RegExp("("+a+")").test(n)){var i="00"+t[a];n=n.replace(RegExp.$1,1===RegExp.$1.length?t[a]:i.substring(i.length-2))}return n},dc=function(){var e=new Date;return e.setMonth(e.getMonth()-1),e},pc=function(e){if(""===e.endDate||null===e.endDate)return!1;if(new Date(e.startDate).getTime()>new Date(e.endDate).getTime()){var n=e.startDate;e.startDate=e.endDate,e.endDate=n}};t("z2KO"),t("wM3z"),t("AX/C"),t("p369");ie.default.use(ae.a),ie.default.use(ne.a),ie.default.use(K.a),ie.default.use(J.a),ie.default.use(Z.a),ie.default.use(q.a),ie.default.use(W.a),ie.default.use(H.a),ie.default.use(j.a),ie.default.use(R.a),ie.default.use(U.a),ie.default.use($.a),ie.default.use(I.a),ie.default.use(B.a),ie.default.use(D.a),ie.default.use(S.a),ie.default.use(F.a),ie.default.use(W.a),ie.default.use(x.a),ie.default.use(C.a),ie.default.use(v.a),ie.default.use(f.a),ie.default.use(g.a),ie.default.use(u.a),ie.default.config.productionTip=!1,ie.default.prototype.$confirm=d.a.confirm,ie.default.prototype.$message=c.a,ie.default.prototype.$notify=s.a,ie.default.prototype.$alert=d.a.alert,l()(a).forEach(function(e){return ie.default.filter(e,a[e])}),ie.default.use(le.a);var uc=new le.a.Store(oe);new ie.default({el:"#app",router:cc,store:uc,components:{App:Oe,AddManuscript:li,AddTopic:Ja,AssignRole:Zs,AddRole:fr},data:{eventHub:new ie.default},template:"<App/>"})},NXTN:function(e,n,t){var a=t("/uBi");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("e0966a1a",a,!1,{})},O70V:function(e,n,t){var a=t("UHgU");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("0d4cdba0",a,!1,{})},OSyl:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-3b57c52f]{\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n.user[data-v-3b57c52f]{\n  display: inline-block;\n  width: 30px;\n  height: 20px;\n  border:1px solid rgba(181, 184, 217, 1);\n  border-radius: 20px;\n  font-size: 13px;\n  padding: 1px 5px 2px 5px;\n  color: rgba(181, 184, 217, 1);\n  cursor: pointer;\n}\n.edit[data-v-3b57c52f]{\n  border: 1px solid #1883FF;\n  color:#1883FF;\n}\n.reset-password[data-v-3b57c52f]{\n  border: 1px solid #694EFF;\n  color:#694EFF;\n}\n.delete[data-v-3b57c52f]{\n  border:1px solid #F00808;\n  color: #F00808;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageRole/src/components/manageRole/roleManage.vue"],names:[],mappings:";AA6PA;EACA,sBAAA;MAAA,mBAAA;UAAA,0BAAA;CACA;AACA;EACA,sBAAA;EACA,YAAA;EACA,aAAA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;EACA,yBAAA;EACA,8BAAA;EACA,gBAAA;CACA;AACA;EACA,0BAAA;EACA,cAAA;CACA;AACA;EACA,0BAAA;EACA,cAAA;CACA;AACA;EACA,yBAAA;EACA,eAAA;CACA",file:"roleManage.vue",sourcesContent:['<template>\n  <div class="role-manage">\n    <div>\n      <circle-title\n        title-name="角色管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="roleForm"\n          class="demo-form-inline">\n          <el-form-item label="角色名称">\n            <el-input\n              v-model="roleForm.name"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="roleForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="roleForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getRoleList"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间">\n            <el-date-picker\n              :title="roleForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="roleForm.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getRoleList"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            @click="getRoleList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <el-button\n            type="primary"\n            @click="addRole">\n            添加\n            <i class="el-icon-plus el-icon--right"/>\n          </el-button>\n          <el-dialog\n            :visible.sync="dialogVisible"\n            title="创建角色"\n            width="60%"\n            @close="closeDialog">\n            <div\n              :is="componentName"\n              :roleid="roleid"\n              @closeDialog="closeDialog"/>\n          </el-dialog>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="200">\n          <template slot-scope="scope">\n            <span>\n              <span\n                class="user reset-password"\n                @click="detailRole(scope.row)">\n                查看\n              </span>\n              <span\n                class="user edit"\n                @click="handleEdit(scope.row)">\n                编辑\n              </span>\n              <span\n                class="user delete"\n                @click="handleDelete(scope.row)">\n                删除\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport AddRole from \'@/components/manageRole/addRole\'\nimport EditRole from \'@/components/manageRole/editRole\'\nimport DetailRole from \'@/components/manageRole/detailRole\'\nimport * as Actions from \'@/api/systemUsersApi\'\nexport default {\n  components: {\n    CircleTitle,\n    AddRole,\n    EditRole,\n    DetailRole\n  },\n  data () {\n    return {\n      roleForm: {\n        name: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      dialogVisible: false,\n      componentName: \'AddRole\',\n      tableHeader: [\n        {\n          prop: \'name\',\n          label: \'角色名称\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'创建时间\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      roleid: \'\'\n    }\n  },\n  watch: {\n    \'roleForm.name\' (val) {\n      this.getRoleList()\n    }\n  },\n  mounted () {\n    this.getRouterParam()\n    /** 获取频道列表 **/\n    this.getRoleList()\n  },\n  methods: {\n    getRouterParam () {\n      let query = this.$route.query\n      if (query.pageNo) {\n        this.pageNo = parseInt(query.pageNo)\n      }\n    },\n    closeDialog () {\n      this.dialogVisible = false\n      this.componentName = \'\'\n      this.getRoleList()\n    },\n    getRoleList () {\n      this.$options.filters[\'swapTime\'](this.roleForm)\n      let timeStart = this.roleForm.startDate !== null ? new Date(this.roleForm.startDate).getTime() : null\n      let timeEnd = this.roleForm.endDate !== null ? new Date(this.roleForm.endDate).getTime() : null\n      Actions.getRoleList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'name\': this.roleForm.name,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n          this.pageNo = listData.pageNum\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getRoleList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getRoleList()\n    },\n    /** 查看角色权限 **/\n    detailRole (row) {\n      this.dialogVisible = true\n      this.componentName = \'DetailRole\'\n      this.roleid = row.roleid\n    },\n    /** 编辑时获取单元格数据 **/\n    handleEdit: function (row) {\n      this.componentName = \'EditRole\'\n      this.dialogVisible = true\n      this.roleid = row.roleid\n      // sessionStorage.setItem(\'roleid\', row.roleid)\n      // this.$router.push({path: \'/manageChannel/edit\', query: {\'pageNo\': this.pageNo}})\n    },\n    addRole () {\n      this.componentName = \'AddRole\'\n      this.dialogVisible = true\n    },\n    /** 删除角色 **/\n    handleDelete (row) {\n      this.$confirm(\'是否删除"\' + row.name + \'"?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\'\n      }).then(() => {\n        Actions.deleteRole({\n          \'role\': {\n            \'roleid\': row.roleid\n          }\n        }).then((res) => {\n          if (res.data.status) {\n            this.$message({\n              type: \'success\',\n              message: \'删除成功!\'\n            })\n          }\n          this.getRoleList()\n        })\n      }).catch(() => {\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: flex-end;\n  }\n  .user{\n    display: inline-block;\n    width: 30px;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .edit{\n    border: 1px solid #1883FF;\n    color:#1883FF;\n  }\n  .reset-password{\n    border: 1px solid #694EFF;\n    color:#694EFF;\n  }\n  .delete{\n    border:1px solid #F00808;\n    color: #F00808;\n  }\n</style>\n<style>\n  .role-manage .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .role-manage .search-form-container .el-form-item {\n    width: 25%;\n  }\n</style>\n'],sourceRoot:""}])},OXIX:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-dialog__header{\n  padding: 13px 30px 13px;\n  border-bottom: 1px solid #C0BEFF;\n  background-color: #F7FAFF;\n}\n.el-dialog__title {\n  line-height: 17px;\n  font-size: 17px;\n  color: #303133;\n}\n.el-dialog__headerbtn {\n  top: 13px;\n}\n.el-dialog__body {\n  padding: 20px 60px 0px 60px;\n}\n.addUser .el-form {\n  margin-top: 15px;\n}\n.addUser .el-form-item {\n  width: 100%;\n}\n.addUser .submit .el-form-item__content{\n  float: right;\n  width: 160px;\n}\n.select-role {\n  border: 1px solid #694EFF;\n  background-color: #EBF5FF;\n  color: #694EFF;\n  padding:8px 22px 8px 22px;\n  border-radius: 3px;\n}\n.addUser .el-select {\n  width: 100%;\n}\n.table-lists {\n  margin-top: 10px;\n}\n.table-lists thead tr th {\n  background: #716BFF;\n  color: white;\n  border-color:#716BFF ;\n  text-align: center;\n}\n.self-tree-style {\n  margin-left: 60px;\n  padding-bottom: 50px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageRole/src/components/manageRole/detailRole.vue"],names:[],mappings:";AAwFA;EACA,wBAAA;EACA,iCAAA;EACA,0BAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,4BAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,aAAA;EACA,aAAA;CACA;AACA;EACA,0BAAA;EACA,0BAAA;EACA,eAAA;EACA,0BAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,oBAAA;EACA,aAAA;EACA,sBAAA;EACA,mBAAA;CACA;AACA;EACA,kBAAA;EACA,qBAAA;CACA",file:"detailRole.vue",sourcesContent:['<template>\n  <div class="addUser">\n    <el-form\n      ref="ruleForm"\n      :model="ruleForm">\n      <el-form-item\n        label="角色名称"\n        prop="role_name">\n        <el-input\n          v-model="ruleForm.role_name"\n          :disabled="true"\n          style="width:260px;"\n          clearable/>\n      </el-form-item>\n    </el-form>\n    <div class="table-lists">\n      <p style="margin-bottom: 10px;">拥有权限：</p>\n      <div class="self-tree-style">\n        <el-tree\n          :data="toData"\n          :default-expand-all="true"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/systemUsersApi\'\nexport default {\n  name: \'AddRole\',\n  components: {\n  },\n  props: {\n    roleid: {\n      type: String,\n      default: \'\'\n    }\n  },\n  data () {\n    return {\n      ruleForm: {\n        role_name: \'\'\n      },\n      toData: []\n    }\n  },\n  mounted () {\n    /** 获取编辑信息 **/\n    this.getRoleDetails()\n  },\n  methods: {\n    getRoleDetails () {\n      Actions.getRoleDetails({\n        \'role\': {\n          \'roleid\': this.roleid\n        }\n      }).then(res => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.ruleForm.role_name = data.name\n          this.toData = data.treePermission || []\n        }\n      })\n    },\n    cancel () {\n      this.$emit(\'closeDialog\')\n    }\n  }\n\n}\n<\/script>\n\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n  .addUser .el-checkbox {\n    float: left;\n  }\n  .addUser .check-all {\n    margin-right: 30px;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .addUser .el-form {\n    margin-top: 15px;\n  }\n  .addUser .el-form-item {\n    width: 100%;\n  }\n  .addUser .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .addUser .el-select {\n    width: 100%;\n  }\n  .table-lists {\n    margin-top: 10px;\n  }\n  .table-lists thead tr th {\n    background: #716BFF;\n    color: white;\n    border-color:#716BFF ;\n    text-align: center;\n  }\n  .self-tree-style {\n    margin-left: 60px;\n    padding-bottom: 50px;\n  }\n</style>\n'],sourceRoot:""}])},OaDw:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.custom-event-footer[data-v-3c45bd22]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  margin-top: 20px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageEvent/src/components/manageEvent/customEvent.vue"],names:[],mappings:";AAuDA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,sBAAA;MAAA,mBAAA;UAAA,0BAAA;EACA,iBAAA;CACA",file:"customEvent.vue",sourcesContent:["<template>\n  <div>\n    <el-input\n      v-model=\"customEventName\"\n      placeholder=\"请输入服务类型名称\"/>\n    <div\n      v-if=\"customErrorMessage\"\n      style=\"color: red;margin-top: 5px;\">{{ customErrorMessage }}</div>\n    <span class=\"custom-event-footer\">\n      <el-button @click=\"cancelCustomEvent\">取 消</el-button>\n      <el-button \n        type=\"primary\" \n        @click=\"submitEvent\">确 定</el-button>\n    </span>\n  </div>\n</template>\n<script>\nimport * as Actions from '@/api/eventApi'\nexport default {\n  name: 'CustomEvent',\n  data () {\n    return {\n      customEventName: '',\n      customErrorMessage: ''\n    }\n  },\n  methods: {\n    submitEvent () {\n      if (this.customEventName === '') {\n        this.customErrorMessage = '注意：名称不能为空'\n        return false\n      }\n      Actions.addCustomEventType({\n        'type': {\n          'type_name': this.customEventName\n        }\n      }).then(res => {\n        if (res.status) {\n          this.$notify({\n            title: '通知',\n            message: '添加成功',\n            type: 'success'\n          })\n          this.$emit('submit-custom-event', this.customEventName)\n        }\n      })\n    },\n    cancelCustomEvent () {\n      this.$emit('cancel-custom-event')\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n.custom-event-footer{\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 20px;\n}\n</style>\n"],sourceRoot:""}])},OuN3:function(e,n,t){var a=t("OaDw");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("b9d5ca54",a,!1,{})},Pyfs:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-69358588]{\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n.user[data-v-69358588]{\n  display: inline-block;\n  height: 20px;\n  border:1px solid #F00808;\n  border-radius: 20px;\n  font-size: 13px;\n  padding: 1px 5px 2px 5px;\n  color:#F00808;\n  width: 60px;\n  cursor: pointer;\n}\n.reset-password[data-v-69358588]{\n  border: 1px solid #1883FF;\n  color:#1883FF;\n  width: 60px;\n}\n.disable[data-v-69358588]{\n  border: 1px solid #694EFF;\n  color:#694EFF;\n  width: 60px;\n}\n.user-head-icon[data-v-69358588]{\n  width: 50px;\n  height: 50px;\n  border-radius: 100%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageUser/src/components/manageUser/userList.vue"],names:[],mappings:";AA4QA;EACA,sBAAA;MAAA,mBAAA;UAAA,0BAAA;CACA;AACA;EACA,sBAAA;EACA,aAAA;EACA,yBAAA;EACA,oBAAA;EACA,gBAAA;EACA,yBAAA;EACA,cAAA;EACA,YAAA;EACA,gBAAA;CACA;AACA;EACA,0BAAA;EACA,cAAA;EACA,YAAA;CACA;AACA;EACA,0BAAA;EACA,cAAA;EACA,YAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,oBAAA;CACA",file:"userList.vue",sourcesContent:["<template>\n  <div class=\"user-list\">\n    <div>\n      <circle-title\n        title-name=\"用户列表\"\n        class=\"cicle-controller\"\n      />\n      <div class=\"search-form-container\">\n        <el-form\n          :inline=\"true\"\n          :model=\"ruleForm\"\n          class=\"demo-form-inline\">\n          <el-form-item label=\"用户名\">\n            <el-input\n              v-model=\"ruleForm.username\"\n              clearable/>\n          </el-form-item>\n          <el-form-item label=\"注册手机号\">\n            <el-input\n              v-model=\"ruleForm.phone\"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label=\"状态\"\n            class=\"search-left\">\n            <el-select\n              v-model=\"ruleForm.state\"\n              placeholder=\"\"\n              @change=\"getAppUserList\">\n              <el-option\n                value=\"\"\n                label=\"全部\"/>\n              <el-option\n                :value=\"1\"\n                label=\"启用\"/>\n              <el-option\n                :value=\"0\"\n                label=\"停用\"/>\n            </el-select>\n          </el-form-item>\n          <el-button\n            type=\"primary\"\n            style=\"margin-left: -30px\"\n            @click=\"getAppUserList\">\n            查询\n            <i class=\"el-icon-search el-icon--right\"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class=\"table-list\">\n      <el-table\n        ref=\"channelTable\"\n        :data=\"tableData\"\n        stripe\n        class=\"whole-table\"\n        min-height=\"400\">\n        <el-table-column\n          v-for=\"(item, index) in tableHeader\"\n          :key=\"index\"\n          :prop=\"item.prop\"\n          :label=\"item.label\"\n          :width=\"item.width\"\n          :formatter=\"item.formatter\"\n          align=\"center\"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed=\"right\"\n          label=\"操作\"\n          align=\"center\"\n          width=\"250\">\n          <template slot-scope=\"scope\">\n            <span>\n              <span\n                :class=\"['user', scope.row.state !== 1 ? 'disable': '']\"\n                @click=\"toggleCount(scope.row)\">\n                {{ scope.row.state !== 1 ? '启用账号': '停用账号' }}\n              </span>\n              <span\n                class=\"user reset-password\"\n                @click=\"resetPassword(scope.row)\">\n                重置密码\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"pagination\">\n        <el-pagination\n          :total=\"total\"\n          :page-sizes=\"[10, 20, 30, 40]\"\n          background\n          layout=\"total, sizes, prev, pager, next\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/systemUsersApi'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      ruleForm: {\n        username: '',\n        phone: '',\n        state: ''\n      },\n      tableHeader: [\n        {\n          prop: 'nickname',\n          label: '昵称'\n        },\n        {\n          prop: 'head_url',\n          label: '头像',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\"_blank\"><img src={cellValue} class=\"user-head-icon\"/></a>\n          }\n        },\n        {\n          prop: 'phone',\n          label: '电话'\n        },\n        {\n          prop: 'sex',\n          label: '性别',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 1) {\n              return '男'\n            } else {\n              return '女'\n            }\n          }\n        },\n        {\n          prop: 'age',\n          label: '年龄'\n        },\n        {\n          prop: 'createtime',\n          label: '注册日期',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters['FormatDate'](cellValue, 'yyyy-MM-dd hh:mm')\n          }\n        },\n        {\n          prop: 'state',\n          label: '状态',\n          formatter: (row, column, cellValue, index) => {\n            if (parseInt(cellValue) === 1) {\n              return '启用'\n            } else {\n              return '停用'\n            }\n          }\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0\n    }\n  },\n  watch: {\n    'ruleForm.username' (val) {\n      this.getAppUserList()\n    },\n    'ruleForm.phone' (val) {\n      this.getAppUserList()\n    }\n  },\n  mounted () {\n    /** 获取用户列表 **/\n    this.getAppUserList()\n    /** 获取频道类型 **/\n  },\n  methods: {\n    getAppUserList () {\n      Actions.getAppUserList({\n        'pageNo': this.pageNo,\n        'pageSize': this.pageSize,\n        'nickname': this.ruleForm.username,\n        'phone': this.ruleForm.phone,\n        'state': this.ruleForm.state\n      }).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getAppUserList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getAppUserList()\n    },\n    /** 停用, 启用账号 **/\n    toggleCount (row) {\n      if (row.state === 1) {\n        this.$confirm('确定要停用账号?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.appUserUpdateState(row.userid, 0)\n        }).catch(() => {\n        })\n      } else {\n        this.$confirm('确定要启用账号?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.appUserUpdateState(row.userid, 1)\n        }).catch(() => {\n        })\n      }\n    },\n    appUserUpdateState (userid, state) {\n      Actions.appUserUpdateState({\n        'appUser': {\n          'userid': userid,\n          'state': state\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.getAppUserList()\n        }\n      })\n    },\n    /** 重置密码 **/\n    resetPassword (row) {\n      this.$confirm('确定要重置密码?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        Actions.resetPassword({\n          'appUser': {\n            'userid': row.userid\n          }\n        }).then(res => {\n          if (res.data.status) {\n            this.$message({\n              type: 'success',\n              message: '重置成功!'\n            })\n          }\n        })\n      }).catch(() => {\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: flex-end;\n  }\n  .user{\n    display: inline-block;\n    height: 20px;\n    border:1px solid #F00808;\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color:#F00808;\n    width: 60px;\n    cursor: pointer;\n  }\n  .reset-password{\n    border: 1px solid #1883FF;\n    color:#1883FF;\n    width: 60px;\n  }\n  .disable{\n    border: 1px solid #694EFF;\n    color:#694EFF;\n    width: 60px;\n  }\n  .user-head-icon{\n    width: 50px;\n    height: 50px;\n    border-radius: 100%;\n  }\n</style>\n<style>\n  .user-list .el-form--inline .el-form-item__content {\n    width: 65%;\n  }\n  .user-list .search-form-container .el-form-item {\n    width: 27%;\n    margin-left: -15px;\n  }\n</style>\n"],sourceRoot:""}])},QswY:function(e,n,t){var a=t("1mAr");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1492b44a",a,!1,{})},R2Go:function(e,n,t){var a=t("5cgV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("0181197b",a,!1,{})},R9UR:function(e,n,t){var a=t("21cq");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1787c380",a,!1,{})},RWjY:function(e,n){},RqNi:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-72e90b1c] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-72e90b1c]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageChannel/src/components/manageChannel/channelEdit.vue"],names:[],mappings:";AA2WA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"channelEdit.vue",sourcesContent:['<template>\n  <div class="channel create">\n    <circle-title\n      title-name="频道编辑"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="editFrom"\n      :model="editFrom"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="频道名称"\n        prop="channel_name">\n        <el-input v-model.trim="editFrom.channel_name"/>\n      </el-form-item>\n      <el-form-item\n        label="父级频道"\n        prop="parent_channel_name">\n        <el-select\n          v-model="editFrom.parent_channelid"\n          :disabled="disabledChooseParentChannel"\n          filterable\n          placeholder=""\n          @change="disableIsFixed">\n          <el-option\n            v-for="(item, index) in parentChannelList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="归属类别"\n        prop="channel_type_name">\n        <el-select\n          v-model="editFrom.channel_typeid"\n          filterable\n          placeholder="">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="图标配置"\n        class="item">\n        <div class="icon-choose-container">\n          <div class="moren-icon">\n            <img\n              :src="editFrom.icon_url">\n          </div>\n          <el-button\n            type="primary"\n            @click="chooseIcon">选择图标</el-button>\n        </div>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="editFrom.state"\n          placeholder="请选择">\n          <el-option\n            :value="1"\n            label="启用"/>\n          <el-option\n            :value="0"\n            label="停用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="频道简述">\n        <el-input\n          v-model="editFrom.description"\n          type="textarea"/>\n      </el-form-item>\n      <el-form-item\n        label="是否固定"\n        prop="fixed">\n        <el-select\n          :disabled="fixedDisabled"\n          v-model="editFrom.fixed"\n          placeholder="请选择">\n          <el-option\n            :value="true"\n            label="是"/>\n          <el-option\n            :value="false"\n            label="否"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        class="sort"\n        prop="sort">\n        <el-input\n          v-model.number="editFrom.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'editFrom\')">提交</el-button>\n        <el-button @click="gotoList">取消</el-button>\n      </el-form-item>\n    </el-form>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      title="图标选择"\n      width="40%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        @submit-icon="submitIcon"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport ChooseIcon from \'@/components/manageChannel/chooseIcon\'\nimport * as Actions from \'@/api/channelApi\'\nexport default {\n  components: {\n    CircleTitle,\n    ChooseIcon\n  },\n  data () {\n    let checkChannelNameLength = (rule, value, callback) => {\n      if (value.length > 10) {\n        return callback(new Error(\'频道名称长度不能超过10\'))\n      } else {\n        return callback()\n      }\n    }\n    return {\n      editFrom: {\n        channel_name: \'\',\n        parent_channel_name: \'\',\n        parent_channelid: \'\',\n        sort: 0,\n        icon_url: \'/static/img/moren.jpg\',\n        channel_type_name: \'\',\n        state: \'\',\n        description: \'\',\n        fixed: \'\',\n        channel_typeid: \'\'\n      },\n      rules: {\n        channel_name: [\n          { required: true, message: \'请输入频道名称\', trigger: \'blur\' },\n          { validator: checkChannelNameLength, trigger: \'change\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          { type: \'number\', message: \'排序必须为数字\' }\n        ]\n      },\n      channelTypeList: [],\n      parentChannelList: [\n        {\n          label: \'无\',\n          value: \'\'\n        }\n      ],\n      channelid: \'\',\n      disabledChooseParentChannel: false,\n      dialogVisible: false,\n      componentName: \'\',\n      isRefresh: true,\n      fixedDisabled: false\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  watch: {\n    \'editFrom.channel_name\': {\n      immediate: true,\n      handler (newVal, oldVal) {\n        this.editFrom.channel_name = newVal.trim()\n      }\n    }\n  },\n  mounted () {\n    this.getEditInfo()\n    this.getChannelType()\n    this.getParentChannel()\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageChannel/list\') {\n      to.meta.refresh = this.isRefresh\n    } else if (to.path === \'/manageChannel/create\') {\n      this.$root.eventHub.$emit(\'reset-options\')\n    }\n    next()\n  },\n  methods: {\n    gotoList () {\n      this.isRefresh = false\n      this.$router.push({path: \'/manageChannel/list\'})\n    },\n    getEditInfo () {\n      this.channelid = sessionStorage.getItem(\'channelid\')\n      Actions.getChannelByID({\n        \'channel\': {\n          \'channelid\': this.channelid\n        }\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.editFrom.channel_name = data.channel_name\n          this.editFrom.parent_channel_name = data.parent_channel_name\n          this.editFrom.sort = data.sort\n          this.editFrom.icon_url = data.icon_url\n          this.editFrom.channel_type_name = data.channel_type_name\n          this.editFrom.state = data.state\n          this.editFrom.description = data.description\n          this.editFrom.fixed = data.fixed\n          this.editFrom.channel_typeid = data.channel_typeid\n          this.editFrom.parent_channelid = data.parent_channelid\n          if (data.countChildren > 0) {\n            this.disabledChooseParentChannel = true\n          }\n          this.disableIsFixed()\n        }\n      })\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.channelTypeList.forEach((item, index, arr) => {\n            if (item.value === this.editFrom.channel_typeid) {\n              this.editFrom.channel_type_name = item.label\n            }\n          })\n          this.parentChannelList.forEach((item, index, arr) => {\n            if (item.value === this.editFrom.parent_channelid) {\n              this.editFrom.parent_channel_name = item.label\n            }\n          })\n          Actions.editChannel({\n            \'channel\': {\n              \'parent_channelid\': this.editFrom.parent_channelid,\n              \'parent_channel_name\': this.editFrom.parent_channel_name,\n              \'channelid\': this.channelid,\n              \'channel_name\': this.editFrom.channel_name,\n              \'channel_typeid\': this.editFrom.channel_typeid,\n              \'channel_type_name\': this.editFrom.channel_type_name,\n              \'icon_url\': this.editFrom.icon_url,\n              \'state\': this.editFrom.state,\n              \'description\': this.editFrom.description,\n              \'fixed\': this.editFrom.fixed,\n              \'sort\': this.editFrom.sort\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/manageChannel/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'编辑成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.editFrom.icon_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    /** 获取频道类别 **/\n    getChannelType () {\n      Actions.getChannelType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (index === 0) {\n              /** 默认选择一个类型 **/\n              this.editFrom.channel_typeid = item.channel_typeid\n            }\n            let newItem = {}\n            newItem.label = item.channel_type_name\n            newItem.value = item.channel_typeid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取父频道 **/\n    getParentChannel () {\n      Actions.listUsableParentChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (this.channelid !== item.channelid) {\n              let newItem = {}\n              newItem.label = item.channel_name\n              newItem.value = item.channelid\n              this.parentChannelList.push(newItem)\n            }\n          })\n        }\n      })\n    },\n    closeDialog () {\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    /** 选取图标 **/\n    chooseIcon () {\n      this.dialogVisible = true\n      this.componentName = \'ChooseIcon\'\n    },\n    /** 确定图标 **/\n    submitIcon (iconUrl) {\n      this.editFrom.icon_url = iconUrl\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    /** 禁用是否固定按钮, 并让其默认为否 **/\n    disableIsFixed () {\n      if (this.editFrom.parent_channelid) {\n        this.editFrom.fixed = false\n        this.fixedDisabled = true\n      } else {\n        this.fixedDisabled = false\n      }\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},SAAO:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-button--primary[data-v-5d29c713] {\n  background-color: #716BFF;\n  border-color: #716BFF;\n}\n.el-button--default[data-v-5d29c713] {\n  color: #716BFF ;\n  border-color: #716BFF;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSystemUser/src/components/manageSystemUser/assignRoleList.vue"],names:[],mappings:";AAmFA;EACA,0BAAA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,sBAAA;CACA",file:"assignRoleList.vue",sourcesContent:["<template>\n  <div class=\"assignRole\">\n    <el-form\n      :inline=\"true\"\n      size=\"small\">\n      <el-form-item\n        label=\"用户名\"\n        style=\"margin-left: 13px;\">\n        <span>{{ username }}</span>\n      </el-form-item>\n      <el-form-item label=\"角色分配\">\n        <el-checkbox\n          v-for=\"(item, index) in allRoleList\"\n          :key=\"index\"\n          v-model=\"item.isChecked\"\n          @change=\"chooseRole(item.roleid, item.isChecked)\">\n          {{ item.name }}\n        </el-checkbox>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport * as Actions from '@/api/systemUsersApi'\nexport default {\n  name: 'AssignRole',\n  props: {\n    usercodeList: {\n      type: Array,\n      default: function () {\n        return []\n      }\n    },\n    username: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      allRoleList: []\n    }\n  },\n  mounted () {\n    /** 获取用户信息 **/\n    this.getUserInfo()\n  },\n  methods: {\n    cancel () {\n      this.$emit('closeDialog')\n    },\n    getUserInfo () {\n      Actions.getUserRoles({\n        'orgUsers': {\n          'usercode': ''\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.allRoleList = res.data.result\n        }\n      })\n    },\n    /** 给用户分配权限 **/\n    chooseRole (roleid, isChecked) {\n      Actions.assignRoleList({\n        'assign': {\n          'usercodes': this.usercodeList,\n          'roleid': roleid,\n          'assignOrCanel': isChecked\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.$message({\n            type: 'success',\n            message: '分配成功'\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .assignRole .el-form {\n    margin-top: 15px;\n  }\n  .assignRole .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .assignRole .el-select {\n    width: 100%;\n  }\n  .assignRole .el-form-item {\n    width: 100% !important;\n  }\n  .assignRole .el-checkbox+.el-checkbox{\n    width: 200px;\n    margin-left: 0px;\n  }\n  /*.assignRole .el-form-item */\n</style>\n"],sourceRoot:""}])},T0sM:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.sub-channel .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.sub-channel .search-form-container .el-form-item {\n  width: 20%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSublive/subChannel/src/components/manageSublive/subChannel/channelList.vue"],names:[],mappings:";AA2fA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA",file:"channelList.vue",sourcesContent:['<template>\n  <div class="sub-channel">\n    <div>\n      <circle-title\n        title-name="频道列表"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="channelForm"\n          class="demo-form-inline">\n          <el-form-item label="频道">\n            <el-input\n              v-model="channelForm.channel_name"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="父级频道"\n            prop="parent_channel_name">\n            <el-select\n              v-model="channelForm.parent_channelid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="searchChannel"\n              @change="searchChannel">\n              <el-option\n                v-for="(item, index) in parentChannelList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="分类"\n            class="search-left">\n            <el-select\n              v-model="channelForm.channel_typeid"\n              clearable\n              placeholder=""\n              @clear="searchChannel"\n              @change="searchChannel">\n              <el-option\n                v-for="(item, index) in channelTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="channelForm.state"\n              placeholder=""\n              @change="searchChannel">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="1"\n                label="启用"/>\n              <el-option\n                :value="0"\n                label="停用"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            class="date-left">\n            <el-date-picker\n              :title="channelForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="channelForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="searchChannel"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            class="date-left"\n            style="left: 0;">\n            <el-date-picker\n              :title="channelForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="channelForm.endDate"\n              format="yyyy-MM-dd HH:mm"\n              type="datetime"\n              placeholder="选择日期"\n              @change="searchChannel"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 40px"\n            @click="searchChannel">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/subChannel/create">\n            <el-button type="primary">\n              添加频道\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="修改状态"\n              placement="top">\n              <el-button\n                type="text"\n                size="small"\n                icon="el-icon-remove-outline"\n                @click="changeState(scope.row)"/>\n            </el-tooltip>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/demand-channel\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      channelForm: {\n        channel_name: \'\',\n        channel_typeid: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\',\n        parent_channelid: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'channel_name\',\n          label: \'频道名\'\n        },\n        {\n          prop: \'parent_channel_name\',\n          label: \'父级频道\',\n          formatter: (row, col, cellValue, index) => {\n            if (!cellValue) {\n              return \'无\'\n            } else {\n              return cellValue\n            }\n          }\n        },\n        {\n          prop: \'channel_type_name\',\n          label: \'分类\'\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'icon_url\',\n          label: \'图标默认\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'description\',\n          label: \'频道描述\',\n          width: \'100\'\n        },\n        {\n          prop: \'state\',\n          label: \'状态\',\n          formatter: (row, column, cellValue, index) => {\n            if (parseInt(cellValue) === 1) {\n              return \'启用\'\n            } else {\n              return \'停用\'\n            }\n          }\n        },\n        {\n          prop: \'fixed\',\n          label: \'位置固定\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue) {\n              return \'固定\'\n            } else {\n              return \'不固定\'\n            }\n          }\n        },\n        {\n          prop: \'sort\',\n          label: \'优先级\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' id="input" class=\'self-sort\' value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      channelTypeList: [],\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      parentChannelList: [],\n      selectChannelId: \'\' // 点击排序行的channelid\n    }\n  },\n  watch: {\n    \'channelForm.channel_name\' (val) {\n      this.searchChannel()\n    }\n  },\n  mounted () {\n    /** 分页获取频道列表 **/\n    this.getChannelList()\n    /** 获取频道类型 **/\n    this.getChannelType()\n    this.getParentChannel()\n\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getChannelList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/subChannel/create\' || to.path === \'/subLive/list\') {\n      this.resetOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetOptions () {\n      this.channelForm = {\n        channel_name: \'\',\n        channel_typeid: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\',\n        parent_channelid: \'\'\n      }\n      this.pageNo = 1\n      this.getChannelList()\n    },\n    getChannelList () {\n      Actions.getChannelList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channel_name\': this.channelForm.channel_name,\n        \'channel_typeid\': this.channelForm.channel_typeid,\n        \'state\': this.channelForm.state,\n        \'timeStart\': new Date(this.channelForm.startDate).getTime() || \'\',\n        \'timeEnd\': new Date(this.channelForm.endDate).getTime() || \'\',\n        \'parent_channelid\': this.channelForm.parent_channelid\n      }).then((res) => {\n        if (res.data.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchChannel()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getChannelList()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      if (event.target.classList.contains(\'sort-container\')) {\n        if (row.state !== 1) {\n          let id = event.target.dataset.id\n          if (id) {\n            this.clickCellIndex = parseInt(id)\n          }\n          this.$nextTick(() => {\n            let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n            inputEles.forEach(element => {\n              if (element) {\n                this.selectChannelId = row.channelid\n                element.focus()\n                element.onkeyup = (e) => {\n                  if (element.value) {\n                    this.sortValue = parseInt(element.value)\n                  }\n                }\n              }\n            })\n          })\n        } else {\n          this.$message({\n            type: \'error\',\n            message: \'启用状态下不能排序!\'\n          })\n        }\n      }\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row, column, cell, event) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectChannelId !== row.channelid) return false\n      /** 修改排序 **/\n      Actions.changeChannelSort({\n        \'channel\': {\n          \'channelid\': row.channelid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getChannelList()\n          this.sortValue = -1\n        }\n      })\n    },\n    /** 编辑时获取单元格数据 **/\n    handleEdit: function (row) {\n      if (row.state !== 1) {\n        sessionStorage.setItem(\'channelid\', row.channelid)\n        this.$router.push({path: \'/subChannel/edit\', query: {\'pageNo\': this.pageNo}})\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可编辑!\'\n        })\n      }\n    },\n    /** 修改状态 **/\n    changeState (row) {\n      let state = 0\n      if (row.state === 1) {\n        state = 0\n      } else if (row.state === 0) {\n        state = 1\n      }\n      Actions.changeChannelState({\n        \'channel\': {\n          \'channelid\': row.channelid,\n          \'state\': state\n        }\n      }).then((res) => {\n        if (res.status) {\n          if (state === 0) {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为停用\'\n            })\n          } else {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为启用\'\n            })\n          }\n          this.getChannelList()\n        }\n      })\n    },\n    /** 删除频道 **/\n    handleDelete (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.channel_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteChannel({\n            \'channel\': {\n              \'channelid\': row.channelid\n            }\n          }).then((res) => {\n            if (res.data.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getChannelList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可删除!\'\n        })\n      }\n    },\n    /** 获取频道类别 **/\n    getChannelType () {\n      Actions.getChannelType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_type_name\n            newItem.value = item.channel_typeid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 搜索频道 **/\n    searchChannel () {\n      this.pageNo = 1\n      this.getChannelList()\n    },\n    /** 获取父频道 **/\n    getParentChannel () {\n      Actions.listUsableParentChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.parentChannelList.push(newItem)\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style>\n  .sub-channel .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .sub-channel .search-form-container .el-form-item {\n    width: 20%;\n  }\n</style>\n'],sourceRoot:""}])},TD7F:function(e,n,t){var a=t("8CpG");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("79229c0d",a,!1,{})},TFIm:function(e,n){},UEw4:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM5NUFDMDhDNTFBRjExRTc5MEZCQUUyMjI5MjMxMThFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM5NUFDMDhENTFBRjExRTc5MEZCQUUyMjI5MjMxMThFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mzk1QUMwOEE1MUFGMTFFNzkwRkJBRTIyMjkyMzExOEUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mzk1QUMwOEI1MUFGMTFFNzkwRkJBRTIyMjkyMzExOEUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz66lYbFAAAFm0lEQVR42txbXWwVRRSeu2IspUFFrFWRH01qGzSWFl6A/hAxWhGSNpIYqw8mVPxp+mIabUxNUB+URqNQVKxvplFDvIJKqYIRi74YCo3a0DQBCkhsQE0gpdUmtH7He64dlt29P2dm78pJvgwpd86cb2dn5pwzZ2PKkjzQOTUHTRVQAZQAxUARUADk88/GgFFgBBgCBoE+oLenMfanDbtihkkuQNMA1APlAv1TwCEgDnSB/InIEAZJ0lELtADVph8ik/8OaAf2gPxUzgiD7ENoXgHKVDjSD7SB9JehEgbRRWg6gAdVbqQbaALx49YJg+wGNFuAmSq3Mg40g/QHVgiD6Cw023lTipJ0ARtB/IIxwiB7M5rdwBIVTTkMrAHp38SEQXYemv3AHSrachSoAelfsybMM3vgf0BWJ10ZNNOxFGv2gKHXeIx1kRdFTsQEcDWwgD2xKs37MvF6V/qt6RkBHbcbIHsEeA34NGhTwcOlHf9h4DngHuGYS9j2x9KeYT56OoUz+gLwDohezOAkcNDQ2G8Cs4TEG72OrJiPUzEgOGdp06jFYL8IPLhSdi4WCs/pxW7nxPH4YYeA7GlgpYQsCfrTUqgETgrUzGQu/jPMvvEXWQ5AG9FyGNtnMPq6G82PQJ5AzVrd9465op5DgkCAnPpXLcTVFIVtFgYc5ckoS3+lawVkKYB/w9LZ+jZwStC/jLldtoZbBEo78ATHbbCF3gkOViTScglhzlRUCxR+ZNmDkuqvZo7/zXCDIBlwCrNwzCZb6Kfdf0iY6GjQCdcLlP0Ukp88IOz/L0eHs4vlAkW/h0T4jLB/OXF12HGX5LamQiI8KexPHKscjlYkcl1IhG8woKOCCJcIlZSGRLjEhA4iXCxUcifWxk02mfI+c5cBVcVEuMiAovWWZ7feJ9DJVIpISYEBRc9wLGtjdmmzedaQugLHUGqF1vETlmb3UWXuZiPf5Ky0YzbmG57dW9C8ZVKnw+kYE3I9sBNGXmuILKV4dgFzDfIdI8KjBhVSAm0vjC00sCt/DSw1vDxGHY5lTcoySiTA6HuzJEueH6Val1vYD0YcYRTiJ7cC+2B8HFiWJtEK4BOVuAuer+zIEOWlBy2en3UEEDnCr2gyEX8emM3EaAe+35BjkUoGZ7ARtqU0RBc0SPqIcC9HPCZKFUjPQeAbbTbPZqjjRjV9BbOaW1O29cZ4/RwURk3ngG1AZ09jbNjwWbwQTSN7W5Ijrw+2LU06HnHBU6Nk9+1Q9qJpspzeGSbdNAY/1Gzj73gyKE4m8Y5n+OpQBuIRGPNtmIsQtq5C8zFQmOHELKLyJz0RT4bXpKmA7mFX25jRDF7zfSr9e+v9sHWVcoVc7Wl2pqR4Ta7IJl9znpx0E/Ttui+dlD0qcS0RJH8B61KVFYREmmxYxzYFST9zu5Qw3720pejcit/1q4gI29Ka4mdtevWe41JAt2zdPh3pCnSrip5sZdu8pNtdtecVDzepxGWyWzZlcpsf4iyTTZs8/mucuahAwnxj3uz682nBWR2GxNlGXZq9ShMdn6dGtRFd2p/IPcyLMOE8lwvb5VeSGJTi2chxqeKIZgfOv/yoMWWbdqjpvNdhtt1TMi1Mo3/X4en9ERGydBvxmUrUgyQdouwK0zSl7tLDYT6Lf84xWar/+FxNV/rISw9dM60Xl1KR2fPAuxhgMmSitAyfBl5X07Vc5opLtYG8yoe/B57CQAMhkV2M5j1gpb5BKdPlw65B3QXi5MV8CLyMQY9aIkrL6SXgcc1muwXiLgO8PgGYZC/tffZwLgpJXsX6n+RWP1HC+wTAZZTfRx60i+8FvgJ+AI6legBMkIL8FSqR1LtPXX4nnJuPPFyGpvMZz98qkR2lcO48g2Q24zaVuP+9xid4j8ZnPB7kr/wPtQLIR/JTvH8EGACAreVfJCN19wAAAABJRU5ErkJggg=="},UGUT:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-4a2d718c] {\n  margin-top: 4%;\n}\n.search-form-container[data-v-4a2d718c] {\n  padding-left: 5.2%;\n}\n.date-left[data-v-4a2d718c] {\n  position: relative;\n  left: 45px;\n}\n.table-list[data-v-4a2d718c] {\n  min-height: 400px;\n  padding: 0 3.2% 0 3.2%;\n  margin-top: 30px;\n}\n.whole-table[data-v-4a2d718c] {\n  width: 100%;\n  border: 1px solid rgba(218, 222, 223, 1);\n  min-height: 25vw;\n}\n.pagination[data-v-4a2d718c] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  margin-top: 10px;\n}\n.btn-container[data-v-4a2d718c] {\n  width: 23% !important;\n  float: right;\n  margin-right: 22px;\n}\n.self-sort[data-v-4a2d718c]{\n  width:30px;\n}\n.sort-container[data-v-4a2d718c]{\n  display: inline-block;\n  width:43px;\n  height: 31px;\n  background: rgba(246, 246, 246, 1);\n  color:rgba(255, 165, 7, 1);\n  line-height: 31px;\n}\n.show-sort[data-v-4a2d718c]{\n  display: inline-block;\n}\n.hide-sort[data-v-4a2d718c]{\n  display: none;\n}\n.pagination[data-v-4a2d718c] {\n  display: -webkit-box;\n  -webkit-box-pack: end;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageStartpage/src/components/manageStartpage/startpageList.vue"],names:[],mappings:";AAkXA;EACA,eAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,mBAAA;EACA,WAAA;CACA;AACA;EACA,kBAAA;EACA,uBAAA;EACA,iBAAA;CACA;AACA;EACA,YAAA;EACA,yCAAA;EACA,iBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;EACA,iBAAA;CACA;AACA;EACA,sBAAA;EACA,aAAA;EACA,mBAAA;CACA;AACA;EACA,WAAA;CACA;AAEA;EACA,sBAAA;EACA,WAAA;EACA,aAAA;EACA,mCAAA;EACA,2BAAA;EACA,kBAAA;CACA;AACA;EACA,sBAAA;CACA;AACA;EACA,cAAA;CACA;AACA;EACA,qBAAA;EACA,sBAAA;CACA",file:"startpageList.vue",sourcesContent:['<template>\n  <div class="startpage-list">\n    <div>\n      <circle-title\n        title-name="广告页管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="StartpageForm"\n          class="demo-form-inline">\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="StartpageForm.state"\n              placeholder=""\n              @change="searchStartpage">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="0"\n                label="待上线"/>\n              <el-option\n                :value="1"\n                label="使用中"/>\n              <el-option\n                :value="2"\n                label="已下线"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            style="margin-left: -70px">\n            <el-date-picker\n              :title="StartpageForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="StartpageForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="searchStartpage"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间">\n            <el-date-picker\n              :title="StartpageForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="StartpageForm.endDate"\n              format="yyyy-MM-dd HH:mm"\n              type="datetime"\n              placeholder="选择日期"\n              @change="searchStartpage"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            @click="searchStartpage">\n            搜索\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/manageStartpage/create">\n            <el-button type="primary">\n              添加启动页\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="slideTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/startpageApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      StartpageForm: {\n        state: \'\',\n        region: \'\',\n        startDate: \'\',\n        endDate: \'\',\n        sort: \'1\'\n      },\n      clickCellIndex: -1,\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      tableHeader: [\n        {\n          prop: \'img_url\',\n          label: \'启动页图片\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'residence_time\',\n          label: \'驻留时间\'\n        },\n        {\n          prop: \'img_url\',\n          label: \'图片地址\',\n          width: \'100\'\n        },\n        {\n          prop: \'jump_url\',\n          label: \'链接地址\',\n          width: \'100\'\n        },\n        {\n\n          prop: \'expiry_date_start\',\n          label: \'开始日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'expiry_date_end\',\n          label: \'结束日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'state\',\n          label: \'状态\',\n          formatter: (row, column, cellValue, index) => {\n            if (parseInt(cellValue) === 1) {\n              return \'使用中\'\n            } else if (parseInt(cellValue) === 0) {\n              return \'待上线\'\n            } else {\n              return \'已下线\'\n            }\n          }\n        },\n        {\n          prop: \'sort\',\n          label: \'排序\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' class=\'self-sort\' id={index} value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      batchProcess: 1,\n      processList: [\n        {\n          value: 1,\n          label: \'批量操作\'\n        }, {\n          value: 2,\n          label: \'其他\'\n        }\n      ],\n      selectAdId: \'\'\n    }\n  },\n  mounted () {\n    /** 获取启动页列表 **/\n    this.getStartpagelList()\n\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getStartpagelList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageStartpage/create\') {\n      this.resetOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetOptions () {\n      this.StartpageForm = {\n        state: \'\',\n        region: \'\',\n        startDate: \'\',\n        endDate: \'\',\n        sort: \'1\'\n      }\n      this.pageNo = 1\n      this.getStartpagelList()\n    },\n    /** 分页获取启动页列表 **/\n    getStartpagelList () {\n      let timeStart = this.StartpageForm.startDate !== null ? new Date(this.StartpageForm.startDate).getTime() : null\n      let timeEnd = this.StartpageForm.endDate !== null ? new Date(this.StartpageForm.endDate).getTime() : null\n      let option = {\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'state\': this.StartpageForm.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }\n      Actions.getStartpagelList(option).then((res) => {\n        if (res.status) {\n          let listData = res.data.result.list\n          this.tableData = listData\n          this.total = listData.total\n        }\n      })\n    },\n    /** 搜索启动页 **/\n    searchStartpage () {\n      this.pageNo = 1\n      this.$options.filters[\'swapTime\'](this.StartpageForm)\n      this.getStartpagelList()\n    },\n    /** 删除启动页 **/\n    handleDelete (row) {\n      this.$confirm(\'是否删除该广告页?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\'\n      }).then(() => {\n        Actions.deleteStartpage({\n          \'appAdv\': {\n            \'adid\': row.adid\n          }\n        }).then((res) => {\n          console.log(res)\n          if (res.data.status) {\n            this.$message({\n              type: \'success\',\n              message: \'删除成功!\'\n            })\n          }\n          this.getStartpagelList()\n        })\n      }).catch(() => {\n      })\n    },\n    /** 编辑时获取单元格数据 **/\n    handleEdit: function (row) {\n      sessionStorage.setItem(\'adid\', row.adid)\n      this.$router.push({name: \'startpageEdit\', params: row})\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchStartpage()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getStartpagelList()\n    },\n    toggleAllSelection (e) {\n      this.$refs.slideTable.toggleAllSelection()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      let id = event.target.dataset.id\n      if (id) {\n        this.clickCellIndex = parseInt(id)\n      }\n      this.$nextTick(() => {\n        let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n        inputEles.forEach(element => {\n          if (element) {\n            this.selectAdId = row.adid\n            element.focus()\n            element.onkeyup = (e) => {\n              if (element.value) {\n                this.sortValue = parseInt(element.value)\n              }\n            }\n          }\n        })\n      })\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row, column, cell, event) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectAdId !== row.adid) return false\n      /** 修改排序 **/\n      Actions.changeStartpageSort({\n        \'appAdv\': {\n          \'adid\': row.adid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getStartpagelList()\n          this.sortValue = -1\n        }\n      })\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .search-form-container {\n    padding-left: 5.2%;\n  }\n  .date-left {\n    position: relative;\n    left: 45px;\n  }\n  .table-list {\n    min-height: 400px;\n    padding: 0 3.2% 0 3.2%;\n    margin-top: 30px;\n  }\n  .whole-table {\n    width: 100%;\n    border: 1px solid rgba(218, 222, 223, 1);\n    min-height: 25vw;\n  }\n  .pagination {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 10px;\n  }\n  .btn-container {\n    width: 23% !important;\n    float: right;\n    margin-right: 22px;\n  }\n  .self-sort{\n    width:30px;\n  }\n\n  .sort-container{\n    display: inline-block;\n    width:43px;\n    height: 31px;\n    background: rgba(246, 246, 246, 1);\n    color:rgba(255, 165, 7, 1);\n    line-height: 31px;\n  }\n  .show-sort{\n    display: inline-block;\n  }\n  .hide-sort{\n    display: none;\n  }\n  .pagination {\n    display: -webkit-box;\n    -webkit-box-pack: end;\n  }\n</style>\n<style>\n  .search-form-container .el-range-editor .el-range-input{\n    width:50%;\n  }\n  .startpage-list .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .startpage-list .search-form-container .el-form-item {\n    width: 33%;\n    margin-right: 10px;\n  }\n</style>\n'],sourceRoot:""}])},UHgU:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.basis[data-v-72474744] {\n  padding:0 28px 40px 28px;\n  overflow-x: hidden;\n}\n.basis .avatar-uploader-icon[data-v-72474744] {\n  font-size: 28px;\n  color: #8c939d;\n  width: 60px;\n  height: 60px;\n  line-height: 60px;\n  text-align: center;\n}\n.basis .save[data-v-72474744] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-left: 85%;\n}\n.basis .circle-title[data-v-72474744] {\n  margin-left: 0;\n}\n.basis .menu[data-v-72474744] {\n  padding:10px;\n  margin-top: 40px;\n  border:1px solid #DADEDF;\n  border-radius: 5px;\n}\n.basis .menu .menu-box[data-v-72474744] {\n   display: -webkit-box;\n   display: -ms-flexbox;\n   display: flex;\n   -webkit-box-align: center;\n       -ms-flex-align: center;\n           align-items: center;\n   padding: 0 0 20px 40px;\n   -ms-flex-wrap: wrap;\n       flex-wrap: wrap;\n   margin-left: -130px;\n}\n.basis .menu .menu-box .box-left[data-v-72474744] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 0 20px 0;\n  margin-left: 130px;\n}\n.basis .frame[data-v-72474744] {\n  padding:10px;\n  margin-top: 40px;\n  border:1px solid #DADEDF;\n  border-radius: 5px;\n}\n.basis .frame .frame-box[data-v-72474744] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  padding: 0 0 20px 40px;\n  margin-left: -260px;\n}\n.basis .frame .frame-box .box-left[data-v-72474744] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 0 20px 0;\n  margin-left: 260px;\n}\n.basis .frame .frame-box .box-left .framework-title[data-v-72474744] {\n  color: #333;\n  font-size: 14px;\n}\n.frame-box .box-left .img-box[data-v-72474744] {\n  margin-left: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.basis .content[data-v-72474744] {\n  padding:10px;\n  margin-top: 40px;\n  border:1px solid #DADEDF;\n  border-radius: 5px;\n}\n.basis .content .content-box[data-v-72474744] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 0 20px 40px;\n}\n.menu-box .box-left .title[data-v-72474744] {\n  width: 50px;\n}\n.basis .block[data-v-72474744] {\n   display: block;\n}\n.basis .none[data-v-72474744] {\n  display: none;\n}\n.menu-box .box-left .input-block[data-v-72474744] {\n  display: block;\n  border: 1px solid #409EFF;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  border-radius: 2px;\n}\n.menu-box .box-left .input-none[data-v-72474744] {\n  display: none;\n  border: none;\n}\n.menu-box .box-left .input[data-v-72474744] {\n  width: 50px;\n}\n.menu-box .avatar-uploader[data-v-72474744] {\n  width: 60px;\n  height: 60px;\n}\n.menu-box .box-left .img-box[data-v-72474744] {\n  margin-right: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.menu-box .box1 .img-box[data-v-72474744] {\n  margin-left: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.menu-box .img-box span[data-v-72474744] {\n  color: black;\n  font-size: 14px;\n  margin-top: 8px;\n}\n.basis .edit[data-v-72474744] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.img-avatar[data-v-72474744] {\n  width: 60px;\n  height: 60px;\n  display: block;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageBasis/src/components/manageBasis/basisConfiguration.vue"],names:[],mappings:";AAohBA;EACA,yBAAA;EACA,mBAAA;CACA;AACA;EACA,gBAAA;EACA,eAAA;EACA,YAAA;EACA,aAAA;EACA,kBAAA;EACA,mBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,iBAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,aAAA;EACA,iBAAA;EACA,yBAAA;EACA,mBAAA;CACA;AACA;GACA,qBAAA;GAAA,qBAAA;GAAA,cAAA;GACA,0BAAA;OAAA,uBAAA;WAAA,oBAAA;GACA,uBAAA;GACA,oBAAA;OAAA,gBAAA;GACA,oBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,oBAAA;EACA,mBAAA;CACA;AACA;EACA,aAAA;EACA,iBAAA;EACA,yBAAA;EACA,mBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,oBAAA;MAAA,gBAAA;EACA,uBAAA;EACA,oBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,oBAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,gBAAA;CACA;AACA;EACA,kBAAA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,2BAAA;UAAA,uBAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;CACA;AACA;EACA,aAAA;EACA,iBAAA;EACA,yBAAA;EACA,mBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,uBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;GACA,eAAA;CACA;AACA;EACA,cAAA;CACA;AACA;EACA,eAAA;EACA,0BAAA;EACA,+BAAA;UAAA,uBAAA;EACA,mBAAA;CACA;AACA;EACA,cAAA;EACA,aAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;CACA;AACA;EACA,mBAAA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,2BAAA;UAAA,uBAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;CACA;AACA;EACA,kBAAA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,2BAAA;UAAA,uBAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;CACA;AACA;EACA,aAAA;EACA,gBAAA;EACA,gBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,eAAA;CACA",file:"basisConfiguration.vue",sourcesContent:["<template>\n  <div class=\"basis\">\n    <el-form\n      ref=\"editForm\"\n      :model=\"editForm\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\">\n      <div class=\"menu\">\n        <circle-title\n          title-name=\"菜单配置\"\n          class=\"circle-title\"/>\n        <div class=\"menu-box\">\n          <div\n            v-for=\"(item,index) in editForm.menulist\"\n            :key=\"index\"\n            class=\"box-left\">\n            <el-checkbox\n              v-model=\"item.isuse\"\n              :disabled=\"item.disabled\">\n              <div :class=\"['title', countAuditWait ? 'block': 'none']\"> {{ item.name }} </div>\n              <input\n                :class=\"['input', countAuditWait ? 'input-none': 'input-block']\"\n                v-model=\"item.name\"\n                :disabled=\"item.disabled\"\n                minlength=\"1\"\n                maxlength=\"3\"\n                type=\"text\">\n            </el-checkbox>\n            <div class=\"img-box\">\n              <div style=\"width: 60px;height: 60px;overflow: hidden\">\n                <my-upload\n                  :upload-item=\"item\"\n                  align=\"left\"\n                  @open-dialog=\"openDialog\"\n                />\n                <el-dialog\n                  :visible.sync=\"dialogVisible\">\n                  <img\n                    :src=\"dialogImageUrl\"\n                    alt=\"\">\n                </el-dialog>\n              </div>\n              <span>默认图</span>\n            </div>\n            <div class=\"img-box\">\n              <div style=\"width: 60px;height: 60px;overflow: hidden\">\n                <my-upload\n                  :upload-id=\"item.id\"\n                  :upload-item=\"item\"\n                  align=\"right\"\n                  @open-dialog=\"openDialog\"/>\n              </div>\n              <span>选中图</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"edit\">\n          <el-button\n            :class=\"['', countAuditWait ? 'block': 'none']\"\n            style=\"margin-left: 90%;font-size: 14px\"\n            type=\"primary\"\n            size=\"small\"\n            @click=\"edit()\">编辑</el-button>\n          <div :class=\"['save', countAuditWait ? 'none': 'block']\">\n            <el-button\n              type=\"primary\"\n              style=\"font-size: 14px\"\n              size=\"small\"\n              @click=\"submitMenu('editForm')\">保存</el-button>\n            <el-button\n              type=\"info\"\n              style=\"font-size: 14px\"\n              size=\"small\"\n              @click=\"cancel()\">取消</el-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"frame\">\n        <circle-title\n          title-name=\"框架内容\"\n          class=\"circle-title\"/>\n        <div class=\"frame-box\">\n          <div\n            v-for=\"(item,index) in frameList\"\n            :key=\"index\"\n            class=\"box-left\">\n            <div class=\"framework-title\">{{ item.name }}</div>\n            <div class=\"img-box\">\n              <div style=\"width: 60px;height: 60px;overflow: hidden\">\n                <my-upload\n                  :upload-item=\"item\"\n                  :upload-url.sync=\"item.url\"\n                  @open-dialog=\"openDialog\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"frame-box\">\n          <div class=\"box-left\">\n            <div class=\"framework-title\">频道选中颜色</div>\n            <el-color-picker\n              v-model=\"editForm.channel_select_color\"\n              class=\"img-box\"/>\n          </div>\n        </div>\n        <div class=\"edit\">\n          <el-button\n            style=\"margin-left: 90%;font-size: 14px\"\n            type=\"primary\"\n            size=\"small\"\n            @click=\"submitFrame('editForm')\">保存</el-button>\n        </div>\n      </div>\n      <div class=\"frame content\">\n        <circle-title\n          title-name=\"内容标识\"\n          class=\"circle-title\"/>\n        <div class=\"frame-box\">\n          <div class=\"box-left\">\n            <div class=\"framework-title\">专题图标颜色</div>\n            <el-color-picker\n              v-model=\"editForm.special_icon_color\"\n              class=\"img-box\"/>\n          </div>\n          <div class=\"box-left\">\n            <div class=\"framework-title\">置顶图标颜色</div>\n            <el-color-picker\n              v-model=\"editForm.top_icon_color\"\n              class=\"img-box\"/>\n          </div>\n        </div>\n        <div class=\"edit\">\n          <el-button\n            style=\"margin-left: 90%;font-size: 14px\"\n            type=\"primary\"\n            size=\"small\"\n            @click=\"submitContent('editForm')\">保存</el-button>\n        </div>\n      </div>\n      <div class=\"frame loginPage\">\n        <circle-title\n          title-name=\"登录页\"\n          class=\"circle-title\"/>\n        <div class=\"frame-box\">\n          <div\n            v-for=\"(item,index) in loginList\"\n            :key=\"index\"\n            class=\"box-left\">\n            <div class=\"framework-title\">{{ item.name }}</div>\n            <div class=\"img-box\">\n              <div style=\"width: 60px;height: 60px;overflow: hidden\">\n                <my-upload\n                  :upload-item=\"item\"\n                  :upload-url.sync=\"item.url\"\n                  @open-dialog=\"openDialog\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"edit\">\n          <el-button\n            style=\"margin-left: 90%;font-size: 14px\"\n            type=\"primary\"\n            size=\"small\"\n            @click=\"submitLogin('editForm')\">保存</el-button>\n        </div>\n      </div>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/basisApi'\nimport uploadHeaders from '@/mixins'\nimport MyUpload from '@/components/commons/myUpload'\nexport default {\n  components: {\n    CircleTitle,\n    MyUpload\n  },\n  mixins: [uploadHeaders],\n  data () {\n    return {\n      editForm: {\n        channel_select_color: 'red',\n        special_icon_color: 'red',\n        top_icon_color: 'red',\n        menulist: [],\n        disabled: true,\n        data: ''\n      },\n      frameList: [\n        {\n          name: '顶部背景',\n          url: ''\n        },\n        {\n          name: '我的背景',\n          url: ''\n        },\n        {\n          name: '自定义图标',\n          url: ''\n        },\n        {\n          name: '搜索图标',\n          url: ''\n        },\n        {\n          name: '背景logo',\n          url: ''\n        }\n      ],\n      loginList: [\n        {\n          name: '登录背景',\n          url: ''\n        },\n        {\n          name: '登录logo',\n          url: ''\n        },\n        {\n          name: '登录按钮',\n          url: ''\n        },\n        {\n          name: '注册按钮',\n          url: ''\n        },\n        {\n          name: '账号icon',\n          url: ''\n        },\n        {\n          name: '密码icon',\n          url: ''\n        }\n      ],\n      dialogVisible: false,\n      dialogImageUrl: '',\n      countAuditWait: true,\n      rules: {\n        head_img: [\n          { required: true, message: '请上传图片', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getBasisByID()\n  },\n  methods: {\n    getBasisByID () {\n      Actions.getBasisByID().then((res) => {\n        if (res.data.status) {\n          this.editForm.data = res.data.result\n          let data = res.data.result\n          console.log(data)\n          for (var item in data.menu) {\n            data.menu[item].disabled = true\n          }\n          this.editForm.menulist = data.menu\n          this.$set(this.frameList[0], 'url', data.frame.top_bg_url)\n          this.$set(this.frameList[1], 'url', data.frame.center_bg_url)\n          this.$set(this.frameList[2], 'url', data.frame.icon_select_url)\n          this.$set(this.frameList[3], 'url', data.frame.search_icon)\n          this.$set(this.frameList[4], 'url', data.frame.bg_logo_url)\n          this.$set(this.loginList[0], 'url', data.loginPage.login_bg_url)\n          this.$set(this.loginList[1], 'url', data.loginPage.login_logo_url)\n          this.$set(this.loginList[2], 'url', data.loginPage.login_btn_url)\n          this.$set(this.loginList[3], 'url', data.loginPage.register_btn_url)\n          this.$set(this.loginList[4], 'url', data.loginPage.username_icon)\n          this.$set(this.loginList[5], 'url', data.loginPage.password_icon)\n          this.editForm.channel_select_color = data.frame.channel_select_color\n          this.editForm.special_icon_color = data.content.special_icon_color\n          this.editForm.top_icon_color = data.content.top_icon_color\n        }\n      })\n    },\n    edit () {\n      for (var item in this.editForm.data.menu) {\n        if (item !== 'personalCenter') {\n          this.editForm.data.menu[item].disabled = false\n        }\n      }\n      let deleteBtnList = Array.from(document.querySelectorAll('.menu .el-upload-list__item-delete'))\n      deleteBtnList.forEach(element => {\n        element.style.display = 'inline-block'\n      })\n      this.countAuditWait = false\n    },\n    cancel () {\n      let deleteBtnList = Array.from(document.querySelectorAll('.menu .el-upload-list__item-delete'))\n      deleteBtnList.forEach(element => {\n        element.style.display = 'none'\n      })\n      this.countAuditWait = true\n      this.getBasisByID()\n    },\n    openDialog (data1) {\n      this.dialogImageUrl = data1\n      this.dialogVisible = true\n    },\n    submitMenu (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let menu = {\n            'news': {\n              'isuse': this.editForm.menulist.news.isuse,\n              'name': this.editForm.menulist.news.name,\n              'icon': this.editForm.menulist.news.icon,\n              'icon_select': this.editForm.menulist.news.icon_select\n            },\n            'onDemand': {\n              'isuse': this.editForm.menulist.onDemand.isuse,\n              'name': this.editForm.menulist.onDemand.name,\n              'icon': this.editForm.menulist.onDemand.icon,\n              'icon_select': this.editForm.menulist.onDemand.icon_select\n            },\n            'liveBroadcast': {\n              'isuse': this.editForm.menulist.liveBroadcast.isuse,\n              'name': this.editForm.menulist.liveBroadcast.name,\n              'icon': this.editForm.menulist.liveBroadcast.icon,\n              'icon_select': this.editForm.menulist.liveBroadcast.icon_select\n            },\n            'service': {\n              'isuse': this.editForm.menulist.service.isuse,\n              'name': this.editForm.menulist.service.name,\n              'icon': this.editForm.menulist.service.icon,\n              'icon_select': this.editForm.menulist.service.icon_select\n            },\n            'e_commerce': {\n              'isuse': this.editForm.menulist.e_commerce.isuse,\n              'name': this.editForm.menulist.e_commerce.name,\n              'icon': this.editForm.menulist.e_commerce.icon,\n              'icon_select': this.editForm.menulist.e_commerce.icon_select\n            },\n            'interaction': {\n              'isuse': this.editForm.menulist.interaction.isuse,\n              'name': this.editForm.menulist.interaction.name,\n              'icon': this.editForm.menulist.interaction.icon,\n              'icon_select': this.editForm.menulist.interaction.icon_select\n            },\n            'personalCenter': {\n              'isuse': this.editForm.menulist.personalCenter.isuse,\n              'name': this.editForm.menulist.personalCenter.name,\n              'icon': this.editForm.menulist.personalCenter.icon,\n              'icon_select': this.editForm.menulist.personalCenter.icon_select\n            }\n          }\n          Actions.saveBasis({\n            'configuration': {\n              'updateConfiguration': 'menu',\n              'menu': menu\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              let deleteBtnList = Array.from(document.querySelectorAll('.menu .el-upload-list__item-delete'))\n              deleteBtnList.forEach(element => {\n                element.style.display = 'none'\n              })\n              this.getBasisByID()\n              this.countAuditWait = true\n              this.$notify({\n                title: '通知',\n                message: '更改成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    submitFrame (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.saveBasis({\n            'configuration': {\n              'updateConfiguration': 'frame',\n              'frame': {\n                'top_bg_url': this.frameList[0].url,\n                'center_bg_url': this.frameList[1].url,\n                'icon_select_url': this.frameList[2].url,\n                'search_icon': this.frameList[3].url,\n                'bg_logo_url': this.frameList[4].url,\n                'channel_select_color': this.editForm.channel_select_color\n              }\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              Actions.getBasisByID().then((res) => {\n                if (res.data.status) {\n                  let data = res.data.result\n                  this.$set(this.frameList[0], 'url', data.frame.top_bg_url)\n                  this.$set(this.frameList[1], 'url', data.frame.center_bg_url)\n                  this.$set(this.frameList[2], 'url', data.frame.icon_select_url)\n                  this.$set(this.frameList[3], 'url', data.frame.search_icon)\n                  this.$set(this.frameList[4], 'url', data.frame.bg_logo_url)\n                  this.editForm.channel_select_color = data.frame.channel_select_color\n                }\n              })\n              this.$notify({\n                title: '通知',\n                message: '更改成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    submitContent (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.saveBasis({\n            'configuration': {\n              'updateConfiguration': 'content',\n              'content': {\n                'special_icon_color': this.editForm.special_icon_color,\n                'top_icon_color': this.editForm.top_icon_color\n              }\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              Actions.getBasisByID().then((res) => {\n                if (res.data.status) {\n                  let data = res.data.result\n                  this.editForm.special_icon_color = data.content.special_icon_color\n                  this.editForm.top_icon_color = data.content.top_icon_color\n                }\n              })\n              this.$notify({\n                title: '通知',\n                message: '更改成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    submitLogin (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.saveBasis({\n            'configuration': {\n              'updateConfiguration': 'loginPage',\n              'loginPage': {\n                'login_bg_url': this.loginList[0].url,\n                'login_logo_url': this.loginList[1].url,\n                'login_btn_url': this.loginList[2].url,\n                'register_btn_url': this.loginList[3].url,\n                'username_icon': this.loginList[4].url,\n                'password_icon': this.loginList[5].url\n              }\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              Actions.getBasisByID().then((res) => {\n                if (res.data.status) {\n                  let data = res.data.result\n                  this.$set(this.loginList[0], 'url', data.loginPage.login_bg_url)\n                  this.$set(this.loginList[1], 'url', data.loginPage.login_logo_url)\n                  this.$set(this.loginList[2], 'url', data.loginPage.login_btn_url)\n                  this.$set(this.loginList[3], 'url', data.loginPage.register_btn_url)\n                  this.$set(this.loginList[4], 'url', data.loginPage.username_icon)\n                  this.$set(this.loginList[5], 'url', data.loginPage.password_icon)\n                }\n              })\n              this.$notify({\n                title: '通知',\n                message: '更改成功',\n                type: 'success'\n              })\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file, fileList) {\n      console.log(res)\n      if (res.status) {\n        let imageUrl = res.result\n        if (this.align === 'left') {\n          this.$set(this.uploadItem, 'icon', imageUrl)\n        } else {\n          debugger\n          this.$set(this.uploadItem, 'icon_select', imageUrl)\n        }\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        'image/jpeg': true,\n        'image/png': true,\n        'image/jpg': true\n      }\n      const isImage = file.type in imageObj\n      const isLt1M = file.size / 1024 / 1024 < 1\n      if (!isImage) {\n        this.$message.error('请上传一张图片!')\n      }\n      if (!isLt1M) {\n        this.$message.error('上传图片大小不能超过 1MB!')\n      }\n      return isImage && isLt1M\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .basis {\n    padding:0 28px 40px 28px;\n    overflow-x: hidden;\n  }\n  .basis .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 60px;\n    height: 60px;\n    line-height: 60px;\n    text-align: center;\n  }\n  .basis .save {\n    display: flex;\n    margin-left: 85%;\n  }\n  .basis .circle-title {\n    margin-left: 0;\n  }\n  .basis .menu {\n    padding:10px;\n    margin-top: 40px;\n    border:1px solid #DADEDF;\n    border-radius: 5px;\n  }\n  .basis .menu .menu-box {\n     display: flex;\n     align-items: center;\n     padding: 0 0 20px 40px;\n     flex-wrap: wrap;\n     margin-left: -130px;\n   }\n  .basis .menu .menu-box .box-left {\n    display: flex;\n    align-items: center;\n    padding: 0 0 20px 0;\n    margin-left: 130px;\n  }\n  .basis .frame {\n    padding:10px;\n    margin-top: 40px;\n    border:1px solid #DADEDF;\n    border-radius: 5px;\n  }\n  .basis .frame .frame-box {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    padding: 0 0 20px 40px;\n    margin-left: -260px;\n  }\n  .basis .frame .frame-box .box-left {\n    display: flex;\n    align-items: center;\n    padding: 0 0 20px 0;\n    margin-left: 260px;\n  }\n  .basis .frame .frame-box .box-left .framework-title {\n    color: #333;\n    font-size: 14px;\n  }\n  .frame-box .box-left .img-box {\n    margin-left: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .basis .content {\n    padding:10px;\n    margin-top: 40px;\n    border:1px solid #DADEDF;\n    border-radius: 5px;\n  }\n  .basis .content .content-box {\n    display: flex;\n    align-items: center;\n    padding: 0 0 20px 40px;\n  }\n  .menu-box .box-left .title {\n    width: 50px;\n  }\n  .basis .block {\n     display: block;\n   }\n  .basis .none {\n    display: none;\n  }\n  .menu-box .box-left .input-block {\n    display: block;\n    border: 1px solid #409EFF;\n    box-sizing: border-box;\n    border-radius: 2px;\n  }\n  .menu-box .box-left .input-none {\n    display: none;\n    border: none;\n  }\n  .menu-box .box-left .input {\n    width: 50px;\n  }\n  .menu-box .avatar-uploader {\n    width: 60px;\n    height: 60px;\n  }\n  .menu-box .box-left .img-box {\n    margin-right: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .menu-box .box1 .img-box {\n    margin-left: 20px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .menu-box .img-box span {\n    color: black;\n    font-size: 14px;\n    margin-top: 8px;\n  }\n  .basis .edit {\n    display: flex;\n  }\n  .img-avatar {\n    width: 60px;\n    height: 60px;\n    display: block;\n  }\n</style>\n<style>\n  .basis .el-upload--picture-card {\n    width: 60px;\n    height: 60px;\n    line-height: 65px;\n  }\n  .basis .el-upload-list--picture-card .el-upload-list__item {\n    width: 60px;\n    height: 60px;\n  }\n  .basis .el-dialog__header {\n    padding: 0;\n  }\n  .basis .el-dialog__body {\n    padding: 30px;\n    height: 240px;\n    color: #606266;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .basis .el-dialog__body img {\n    width: 100%;\n    height: 100%;\n  }\n  .basis .el-dialog {\n    position: relative;\n    margin: 0 auto 60px;\n    width: 300px;\n    height: 300px;\n  }\n  .basis .el-dialog__headerbtn {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n  }\n  .basis .menu .menu-box .el-form-item__content {\n    margin-left: 0 !important;\n  }\n  .basis .frame .frame-box .el-form-item__content {\n    margin-left: 45px !important;\n  }\n  .basis .frame .frame-box .el-form-item__label {\n    width: 40px !important;\n  }\n  .basis .frame .frame-box .el-form-item {\n    margin-bottom: 0 !important;\n  }\n  .basis .el-checkbox__input.is-checked .el-checkbox__inner, .el-checkbox__input.is-indeterminate .el-checkbox__inner {\n    background-color: #694EFF;\n    border-color: #694EFF;\n  }\n  .basis .el-checkbox__input.is-checked+.el-checkbox__label {\n    color: #694EFF;\n  }\n  .basis .menu .el-upload-list--picture-card .el-upload-list__item-actions .el-upload-list__item-delete {\n    display: none;\n  }\n</style>\n"],sourceRoot:""}])},UHzj:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.search-form-container .btn-container .el-button{\n  padding: 12px 10px;\n}\n.search-form-container .btn-container .el-icon--right{\n  margin: 0;\n}\n.custom-dialog .el-dialog__header{\n  /*padding: 0;*/\n  border-bottom: 1px solid rgba(192,190,255,1);\n}\n.el-tooltip__popper{\n  max-width: 300px;\n}\n.limit .el-form--inline .el-form-item__content {\n  width: 70% !important;\n}\n.limit .search-form-container .el-form-item {\n  width: 30% !important;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageComment/src/components/manageComment/limitList.vue"],names:[],mappings:";AAoTA;EACA,mBAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,eAAA;EACA,6CAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,sBAAA;CACA;AACA;EACA,sBAAA;CACA",file:"limitList.vue",sourcesContent:['<template>\n  <div class="limit">\n    <div>\n      <circle-title\n        title-name="禁言管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="forbiddenComment"\n          class="demo-form-inline">\n          <el-form-item label="用户名">\n            <el-input\n              v-model="forbiddenComment.user_nickname"\n              clearable/>\n          </el-form-item>\n          <el-form-item label="注册手机">\n            <el-input\n              v-model="forbiddenComment.user_phone"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            style="position: relative">\n            <el-date-picker\n              :title="forbiddenComment.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="forbiddenComment.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            style="margin-left: -14px">\n            <el-date-picker\n              :title="forbiddenComment.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="forbiddenComment.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 82px"\n            @click="getForbiddenCommentList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @select-all="selectAll"\n        @selection-change="selectionChange">\n        <el-table-column\n          type="selection"\n          align="center"\n          width="55"/>\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="操作"\n          align="center"\n          width="250">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                class="manu delete-active"\n                @click="cancelForbidden(scope.row)">\n                取消禁言\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <div>\n          <el-checkbox\n            v-model="selfSelectAll"\n            @change="toggleAllSelection">\n            全选\n          </el-checkbox>\n          <el-button\n            type="primary"\n            size="medium"\n            @click="cancelManyForbiddenComment">批量取消禁言</el-button>\n          <el-button\n            v-show="1 === 2"\n            type="primary"\n            size="medium"\n            @click="cancelManyForbiddenComment">导出数据</el-button>\n        </div>\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/commentApi\'\nimport Audit from \'./audit\'\nexport default {\n  components: {\n    CircleTitle,\n    Audit\n  },\n  data () {\n    return {\n      forbiddenComment: {\n        user_nickname: \'\',\n        user_phone: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'user_nickname\',\n          label: \'昵称\'\n        },\n        {\n          prop: \'user_phone\',\n          label: \'电话\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'禁言开始时间\',\n          width: 200,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        }\n      ],\n      tableData: [],\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      selfSelectAll: false, // 自定义的全选\n      cancelForbiddenCommentList: [],\n      selectionForbidden: []\n    }\n  },\n  watch: {\n    \'forbiddenComment.user_nickname\' () {\n      this.getForbiddenCommentList()\n    },\n    \'forbiddenComment.user_phone\' () {\n      this.getForbiddenCommentList()\n    }\n  },\n  mounted () {\n    this.getForbiddenCommentList()\n  },\n  methods: {\n    /** 获取禁言列表 **/\n    getForbiddenCommentList () {\n      this.$options.filters[\'swapTime\'](this.forbiddenComment)\n      let timeStart = this.forbiddenComment.startDate !== null ? new Date(this.forbiddenComment.startDate).getTime() : null\n      let timeEnd = this.forbiddenComment.endDate !== null ? new Date(this.forbiddenComment.endDate).getTime() : null\n      Actions.getPageForbiddenComment({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'user_nickname\': this.forbiddenComment.user_nickname,\n        \'user_phone\': this.forbiddenComment.user_phone,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getForbiddenCommentList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getForbiddenCommentList()\n    },\n    /** 获取全选的数据 **/\n    selectAll (e) {\n      if (e.length > 0) {\n        this.selfSelectAll = true\n      } else {\n        this.selfSelectAll = false\n      }\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      this.cancelForbiddenCommentList = []\n      selection.forEach((item, index, arr) => {\n        this.cancelForbiddenCommentList.push(item.userid)\n      })\n      this.selectionForbidden = selection\n    },\n    /** 取消禁言 **/\n    cancelForbidden (row) {\n      Actions.cancelForbiddenComment({\n        \'forbiddenCommentVo\': {\n          \'userid\': row.userid\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.$message({\n            type: \'success\',\n            message: \'已取消禁言\'\n          })\n          this.getForbiddenCommentList()\n        }\n      })\n    },\n    /** 批量取消禁言 **/\n    cancelManyForbiddenComment () {\n      if (this.cancelForbiddenCommentList.length <= 0) {\n        this.$message({\n          type: \'error\',\n          message: \'请至少选择一个用户!\'\n        })\n        return false\n      }\n      let tipContent = \'您即将取消\'\n      /** 已上线的稿件不可删除的提示 **/\n      this.selectionForbidden.forEach((item, index, arr) => {\n        tipContent += \'(\' + item.user_nickname + \')\'\n      })\n      this.$confirm(tipContent + \'的禁言?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\'\n      }).then(() => {\n        Actions.batchDeleteForbiddenComment({\n          \'idList\': this.cancelForbiddenCommentList\n        }).then((res) => {\n          if (res.data.status) {\n            this.$message({\n              type: \'success\',\n              message: \'批量取消禁言成功!\'\n            })\n          }\n          this.getForbiddenCommentList()\n        })\n      }).catch(() => {\n      })\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .limit .search-form-container .el-form-item {\n    width: 20%;\n  }\n  .manu{\n    display: inline-block;\n    width: auto;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n  .custom-dialog .el-dialog__header{\n    /*padding: 0;*/\n    border-bottom: 1px solid rgba(192,190,255,1);\n  }\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .limit .el-form--inline .el-form-item__content {\n    width: 70% !important;\n  }\n  .limit .search-form-container .el-form-item {\n    width: 30% !important;\n  }\n</style>\n'],sourceRoot:""}])},UKDN:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.search-form-container .el-range-editor .el-range-input{\n  width:50%;\n}\n.startpage-list .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.startpage-list .search-form-container .el-form-item {\n  width: 33%;\n  margin-right: 10px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageStartpage/src/components/manageStartpage/startpageList.vue"],names:[],mappings:";AAwaA;EACA,UAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,WAAA;EACA,mBAAA;CACA",file:"startpageList.vue",sourcesContent:['<template>\n  <div class="startpage-list">\n    <div>\n      <circle-title\n        title-name="广告页管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="StartpageForm"\n          class="demo-form-inline">\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="StartpageForm.state"\n              placeholder=""\n              @change="searchStartpage">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="0"\n                label="待上线"/>\n              <el-option\n                :value="1"\n                label="使用中"/>\n              <el-option\n                :value="2"\n                label="已下线"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            style="margin-left: -70px">\n            <el-date-picker\n              :title="StartpageForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="StartpageForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="searchStartpage"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间">\n            <el-date-picker\n              :title="StartpageForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="StartpageForm.endDate"\n              format="yyyy-MM-dd HH:mm"\n              type="datetime"\n              placeholder="选择日期"\n              @change="searchStartpage"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            @click="searchStartpage">\n            搜索\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/manageStartpage/create">\n            <el-button type="primary">\n              添加启动页\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="slideTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/startpageApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      StartpageForm: {\n        state: \'\',\n        region: \'\',\n        startDate: \'\',\n        endDate: \'\',\n        sort: \'1\'\n      },\n      clickCellIndex: -1,\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      tableHeader: [\n        {\n          prop: \'img_url\',\n          label: \'启动页图片\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'residence_time\',\n          label: \'驻留时间\'\n        },\n        {\n          prop: \'img_url\',\n          label: \'图片地址\',\n          width: \'100\'\n        },\n        {\n          prop: \'jump_url\',\n          label: \'链接地址\',\n          width: \'100\'\n        },\n        {\n\n          prop: \'expiry_date_start\',\n          label: \'开始日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'expiry_date_end\',\n          label: \'结束日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'state\',\n          label: \'状态\',\n          formatter: (row, column, cellValue, index) => {\n            if (parseInt(cellValue) === 1) {\n              return \'使用中\'\n            } else if (parseInt(cellValue) === 0) {\n              return \'待上线\'\n            } else {\n              return \'已下线\'\n            }\n          }\n        },\n        {\n          prop: \'sort\',\n          label: \'排序\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' class=\'self-sort\' id={index} value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      batchProcess: 1,\n      processList: [\n        {\n          value: 1,\n          label: \'批量操作\'\n        }, {\n          value: 2,\n          label: \'其他\'\n        }\n      ],\n      selectAdId: \'\'\n    }\n  },\n  mounted () {\n    /** 获取启动页列表 **/\n    this.getStartpagelList()\n\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getStartpagelList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageStartpage/create\') {\n      this.resetOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetOptions () {\n      this.StartpageForm = {\n        state: \'\',\n        region: \'\',\n        startDate: \'\',\n        endDate: \'\',\n        sort: \'1\'\n      }\n      this.pageNo = 1\n      this.getStartpagelList()\n    },\n    /** 分页获取启动页列表 **/\n    getStartpagelList () {\n      let timeStart = this.StartpageForm.startDate !== null ? new Date(this.StartpageForm.startDate).getTime() : null\n      let timeEnd = this.StartpageForm.endDate !== null ? new Date(this.StartpageForm.endDate).getTime() : null\n      let option = {\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'state\': this.StartpageForm.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }\n      Actions.getStartpagelList(option).then((res) => {\n        if (res.status) {\n          let listData = res.data.result.list\n          this.tableData = listData\n          this.total = listData.total\n        }\n      })\n    },\n    /** 搜索启动页 **/\n    searchStartpage () {\n      this.pageNo = 1\n      this.$options.filters[\'swapTime\'](this.StartpageForm)\n      this.getStartpagelList()\n    },\n    /** 删除启动页 **/\n    handleDelete (row) {\n      this.$confirm(\'是否删除该广告页?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\'\n      }).then(() => {\n        Actions.deleteStartpage({\n          \'appAdv\': {\n            \'adid\': row.adid\n          }\n        }).then((res) => {\n          console.log(res)\n          if (res.data.status) {\n            this.$message({\n              type: \'success\',\n              message: \'删除成功!\'\n            })\n          }\n          this.getStartpagelList()\n        })\n      }).catch(() => {\n      })\n    },\n    /** 编辑时获取单元格数据 **/\n    handleEdit: function (row) {\n      sessionStorage.setItem(\'adid\', row.adid)\n      this.$router.push({name: \'startpageEdit\', params: row})\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchStartpage()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getStartpagelList()\n    },\n    toggleAllSelection (e) {\n      this.$refs.slideTable.toggleAllSelection()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      let id = event.target.dataset.id\n      if (id) {\n        this.clickCellIndex = parseInt(id)\n      }\n      this.$nextTick(() => {\n        let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n        inputEles.forEach(element => {\n          if (element) {\n            this.selectAdId = row.adid\n            element.focus()\n            element.onkeyup = (e) => {\n              if (element.value) {\n                this.sortValue = parseInt(element.value)\n              }\n            }\n          }\n        })\n      })\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row, column, cell, event) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectAdId !== row.adid) return false\n      /** 修改排序 **/\n      Actions.changeStartpageSort({\n        \'appAdv\': {\n          \'adid\': row.adid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getStartpagelList()\n          this.sortValue = -1\n        }\n      })\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .search-form-container {\n    padding-left: 5.2%;\n  }\n  .date-left {\n    position: relative;\n    left: 45px;\n  }\n  .table-list {\n    min-height: 400px;\n    padding: 0 3.2% 0 3.2%;\n    margin-top: 30px;\n  }\n  .whole-table {\n    width: 100%;\n    border: 1px solid rgba(218, 222, 223, 1);\n    min-height: 25vw;\n  }\n  .pagination {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 10px;\n  }\n  .btn-container {\n    width: 23% !important;\n    float: right;\n    margin-right: 22px;\n  }\n  .self-sort{\n    width:30px;\n  }\n\n  .sort-container{\n    display: inline-block;\n    width:43px;\n    height: 31px;\n    background: rgba(246, 246, 246, 1);\n    color:rgba(255, 165, 7, 1);\n    line-height: 31px;\n  }\n  .show-sort{\n    display: inline-block;\n  }\n  .hide-sort{\n    display: none;\n  }\n  .pagination {\n    display: -webkit-box;\n    -webkit-box-pack: end;\n  }\n</style>\n<style>\n  .search-form-container .el-range-editor .el-range-input{\n    width:50%;\n  }\n  .startpage-list .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .startpage-list .search-form-container .el-form-item {\n    width: 33%;\n    margin-right: 10px;\n  }\n</style>\n'],sourceRoot:""}])},UhHm:function(e,n,t){var a=t("6Nzk");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("376e4de3",a,!1,{})},VMTV:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-fe4615ea] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-fe4615ea]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSublive/subChannel/src/components/manageSublive/subChannel/channelCreate.vue"],names:[],mappings:";AA0TA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"channelCreate.vue",sourcesContent:['<template>\n  <div class="channel create">\n    <circle-title\n      title-name="频道新增"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="createFrom"\n      :model="createFrom"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="频道名称"\n        prop="channel_name">\n        <el-input v-model.trim="createFrom.channel_name"/>\n      </el-form-item>\n      <el-form-item\n        label="父级频道"\n        prop="parent_channel_name">\n        <el-select\n          v-model="createFrom.parent_channelid"\n          filterable\n          placeholder=""\n          @change="disableIsFixed">\n          <el-option\n            v-for="(item, index) in parentChannelList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="归属类别"\n        prop="channel_type_name">\n        <el-select\n          v-model="createFrom.channel_typeid"\n          filterable\n          placeholder="">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="图标配置"\n        class="item">\n        <div class="icon-choose-container">\n          <div class="moren-icon">\n            <img\n              :src="createFrom.icon_url">\n          </div>\n          <el-button\n            type="primary"\n            @click="chooseIcon">选择图标</el-button>\n        </div>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="createFrom.state"\n          placeholder="请选择">\n          <el-option\n            :value="0"\n            label="停用"/>\n          <el-option\n            :value="1"\n            label="启用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="频道简述">\n        <el-input\n          v-model="createFrom.description"\n          type="textarea"/>\n      </el-form-item>\n      <el-form-item\n        label="是否固定"\n        prop="fixed">\n        <el-select\n          :disabled="fixedDisabled"\n          v-model="createFrom.fixed"\n          placeholder="请选择">\n          <el-option\n            :value="true"\n            label="是"/>\n          <el-option\n            :value="false"\n            label="否"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        class="sort"\n        prop="sort">\n        <el-input\n          v-model.number="createFrom.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'createFrom\')">提交</el-button>\n        <router-link to="/subChannel/list">\n          <el-button>取消</el-button>\n        </router-link>\n      </el-form-item>\n    </el-form>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      title="图标选择"\n      width="40%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        @submit-icon="submitIcon"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport ChooseIcon from \'./chooseIcon\'\nimport * as Actions from \'@/api/demand-channel\'\nexport default {\n  components: {\n    CircleTitle,\n    ChooseIcon\n  },\n  data () {\n    let checkChannelNameLength = (rule, value, callback) => {\n      if (value.length > 10) {\n        return callback(new Error(\'频道名称长度不能超过10\'))\n      } else {\n        return callback()\n      }\n    }\n    return {\n      createFrom: {\n        channel_name: \'\',\n        parent_channel_name: \'\',\n        sort: \'\',\n        icon_url: \'\',\n        channel_type_name: \'\',\n        state: 0,\n        description: \'\',\n        fixed: false,\n        parent_channelid: \'\',\n        channel_typeid: \'\'\n      },\n      rules: {\n        channel_name: [\n          { required: true, message: \'请输入频道名称\', trigger: \'blur\' },\n          { validator: checkChannelNameLength, trigger: \'change\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          { type: \'number\', message: \'排序必须为数字\' }\n        ]\n      },\n      channelTypeList: [],\n      parentChannelList: [\n        {\n          label: \'无\',\n          value: \'\'\n        }\n      ],\n      dialogVisible: false,\n      componentName: \'\',\n      fixedDisabled: false\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getChannelType()\n    this.getParentChannel()\n  },\n  methods: {\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.channelTypeList.forEach((item, index, arr) => {\n            if (item.value === this.createFrom.channel_typeid) {\n              this.createFrom.channel_type_name = item.label\n            }\n          })\n          this.parentChannelList.forEach((item, index, arr) => {\n            if (item.value === this.createFrom.parent_channelid) {\n              this.createFrom.parent_channel_name = item.label\n            }\n          })\n          Actions.addChannel({\n            \'channel\': {\n              \'parent_channelid\': this.createFrom.parent_channelid,\n              \'parent_channel_name\': this.createFrom.parent_channel_name,\n              \'channel_name\': this.createFrom.channel_name,\n              \'channel_typeid\': this.createFrom.channel_typeid,\n              \'channel_type_name\': this.createFrom.channel_type_name,\n              \'icon_url\': this.createFrom.icon_url,\n              \'state\': this.createFrom.state,\n              \'description\': this.createFrom.description,\n              \'fixed\': this.createFrom.fixed,\n              \'sort\': this.createFrom.sort\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/subChannel/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'添加成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.createFrom.icon_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    /** 获取频道类别 **/\n    getChannelType () {\n      Actions.getChannelType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (index === 0) {\n              /** 默认选择一个类型 **/\n              this.createFrom.channel_typeid = item.channel_typeid\n            }\n            let newItem = {}\n            newItem.label = item.channel_type_name\n            newItem.value = item.channel_typeid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取父频道 **/\n    getParentChannel () {\n      Actions.listUsableParentChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (this.channelid !== item.channelid) {\n              let newItem = {}\n              newItem.label = item.channel_name\n              newItem.value = item.channelid\n              this.parentChannelList.push(newItem)\n            }\n          })\n        }\n      })\n    },\n    /** 选取图标 **/\n    chooseIcon () {\n      this.dialogVisible = true\n      this.componentName = \'ChooseIcon\'\n    },\n    closeDialog () {\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    /** 确定图标 **/\n    submitIcon (iconUrl) {\n      this.createFrom.icon_url = iconUrl\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    /** 禁用是否固定按钮, 并让其默认为否 **/\n    disableIsFixed () {\n      if (this.createFrom.parent_channelid) {\n        this.createFrom.fixed = false\n        this.fixedDisabled = true\n      } else {\n        this.fixedDisabled = false\n      }\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},"W/Q3":function(e,n,t){var a=t("vrg5");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("4fb25415",a,!1,{})},W037:function(e,n,t){var a=t("273s");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("191130d8",a,!1,{})},WIgC:function(e,n,t){var a=t("m26c");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("334fc243",a,!1,{})},WZzA:function(e,n,t){var a=t("ne5Z");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("682bdd52",a,!1,{})},WdQQ:function(e,n,t){var a=t("RqNi");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5be623bf",a,!1,{})},WzZF:function(e,n){},"X+ky":function(e,n){},XNDt:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.title-class[data-v-684fe112]{\n  margin-left: 24px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageManuscript/src/components/manageManuscript/settingManu.vue"],names:[],mappings:";AAuKA;EACA,kBAAA;CACA",file:"settingManu.vue",sourcesContent:['<template>\n  <div>\n    <div class="title-class">\n      稿件主题:\n      <span v-if="!isShowInput">\n        {{ submitManuTitle }}\n        <a\n          style="color:blue;cursor: pointer"\n          @click="showInput">修改</a>\n      </span>\n      <span v-if="isShowInput">\n        <el-input\n          ref="manuInput"\n          v-model="submitManuTitle"\n          style="width:400px"\n          type="text"\n          @blur="hideInputAndSubmit"/>\n      </span>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400">\n        <el-table-column\n          prop="channel_name"\n          label="归属频道"\n          align="left"\n          fixed>\n          <template slot-scope="scope">\n            <el-checkbox\n              v-model="scope.row.isChecked"\n              @change="setChannelBtn(scope.row)">\n              {{ scope.row.channel_name }}\n            </el-checkbox>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop="parent_channel_name"\n          label="归属专题"\n          align="left"\n          fixed>\n          <template slot-scope="scope">\n            <p\n              v-for="(item, index) in scope.row.specialList"\n              :key="index">\n              <el-checkbox\n                v-model="item.isChecked"\n                :title="item.special_name"\n                @change="setSpecialBtn(item)">\n                {{ subStrSpecialLength(item.special_name) }}\n              </el-checkbox>\n            </p>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/manuScriptApi\'\nexport default {\n  props: {\n    settingArticleId: {\n      type: String,\n      default: \'0\'\n    },\n    manuTitle: {\n      type: String,\n      default: \'无\'\n    }\n  },\n  data () {\n    return {\n      tableData: [],\n      channelGroup: [],\n      isShowInput: false,\n      submitManuTitle: this.manuTitle\n    }\n  },\n  computed: {\n    subStrSpecialLength () {\n      return function (content) {\n        if (content.length > 23) {\n          return content.substring(0, 23) + \'...\'\n        } else {\n          return content\n        }\n      }\n    }\n  },\n  mounted () {\n    this.getSettingManuList()\n  },\n  methods: {\n    getSettingManuList () {\n      Actions.listUsableChannelAndSpecal({\n        \'article\': {\n          \'articleid\': this.settingArticleId\n        }\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data\n        }\n      })\n    },\n    /** 设置所属频道的配置 **/\n    setChannelBtn (row) {\n      Actions.channelCheckbox({\n        \'articleid\': this.settingArticleId,\n        \'channelid\': row.channelid,\n        \'saveOrDel\': row.isChecked\n      }).then((res) => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'配置成功!\'\n          })\n        }\n      })\n    },\n    /** 配置专题的点击 **/\n    setSpecialBtn (item) {\n      if (item) {\n        Actions.specialCheckbox({\n          \'articleid\': this.settingArticleId,\n          \'specialid\': item.specialid,\n          \'saveOrDel\': item.isChecked\n        }).then((res) => {\n          if (res.status) {\n            this.$message({\n              type: \'success\',\n              message: \'配置成功!\'\n            })\n          }\n        })\n      }\n    },\n    showInput () {\n      this.isShowInput = true\n      this.$nextTick(function () {\n        this.$refs.manuInput.focus()\n      })\n    },\n    hideInputAndSubmit () {\n      this.isShowInput = false\n      Actions.updataManuName({\n        \'article\': {\n          \'articleid\': this.settingArticleId,\n          \'title\': this.submitManuTitle\n        }\n      }).then(res => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'修改成功!\'\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .title-class{\n    margin-left: 24px;\n  }\n</style>\n<style>\n</style>\n'],sourceRoot:""}])},XVzv:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.search-form-container .el-range-editor .el-range-input{\n  width:50%;\n}\n.topic .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageTopic/src/components/manageTopic/topicList.vue"],names:[],mappings:";AAodA;EACA,UAAA;CACA;AACA;EACA,WAAA;CACA",file:"topicList.vue",sourcesContent:['<template>\n  <div class="topic">\n    <div>\n      <circle-title\n        title-name="专题管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="topicForm"\n          class="demo-form-inline">\n          <el-form-item label="频道">\n            <el-select\n              v-model="topicForm.channelid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="searchSpecial"\n              @change="searchSpecial">\n              <el-option\n                v-for="(item, index) in listUsableChannel"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label="专题">\n            <el-input\n              v-model="topicForm.special_name"/>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="topicForm.state"\n              placeholder=""\n              @change="searchSpecial">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="1"\n                label="待上线"/>\n              <el-option\n                :value="2"\n                label="已上线"/>\n              <el-option\n                :value="3"\n                label="过期"/>\n              <el-option\n                :value="0"\n                label="停用"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            class="date-left">\n            <el-date-picker\n              :title="topicForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="topicForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="searchSpecial"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            class="date-left">\n            <el-date-picker\n              :title="topicForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="topicForm.endDate"\n              format="yyyy-MM-dd HH:mm"\n              type="datetime"\n              placeholder="选择日期"\n              @change="searchSpecial"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 40px"\n            @click="searchSpecial">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/manageTopic/create">\n            <el-button type="primary">\n              添加专题\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="修改状态"\n              placement="top">\n              <el-button\n                type="text"\n                size="small"\n                icon="el-icon-remove-outline"\n                @click="changeState(scope.row)"/>\n            </el-tooltip>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/topicApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      topicForm: {\n        channelid: \'\',\n        channel_name: \'\',\n        special_name: \'\',\n        daterange: [],\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'special_name\',\n          label: \'专题名称\'\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'channel_name\',\n          label: \'归属频道\'\n        },\n        {\n          prop: \'special_head_url\',\n          label: \'图片\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'expiry_date_start\',\n          label: \'有效期-始\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'expiry_date_end\',\n          label: \'有效期-终\',\n          width: 120,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'showState\',\n          label: \'状态\'\n        },\n        {\n          prop: \'sort\',\n          label: \'排序\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' class=\'self-sort\' id={index} value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      listUsableChannel: [], // 可用的频道列表\n      selectSpecialId: \'\' // 点击排序行的channelid\n    }\n  },\n  watch: {\n    \'topicForm.state\' () {\n      this.searchSpecial()\n    }\n  },\n  mounted () {\n    /** 获取专题列表 **/\n    this.getTopicList()\n    /** 获取可用频道列表**/\n    this.getListUsableChannel()\n\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getTopicList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageTopic/create\') {\n      this.resetOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetOptions () {\n      this.topicForm = {\n        channelid: \'\',\n        channel_name: \'\',\n        special_name: \'\',\n        daterange: [],\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      }\n      this.pageNo = 1\n      this.getTopicList()\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchSpecial()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getTopicList()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      if (event.target.classList.contains(\'sort-container\')) {\n        if (row.state !== 1) {\n          let id = event.target.dataset.id\n          if (id) {\n            this.clickCellIndex = parseInt(id)\n          }\n          this.$nextTick(() => {\n            let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n            inputEles.forEach(element => {\n              if (element) {\n                this.selectSpecialId = row.specialid\n                element.focus()\n                element.onkeyup = (e) => {\n                  if (element.value) {\n                    this.sortValue = parseInt(element.value)\n                  }\n                }\n              }\n            })\n          })\n        } else {\n          this.$message({\n            type: \'error\',\n            message: \'启用状态下不能排序!\'\n          })\n        }\n      }\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectSpecialId !== row.specialid) return false\n      /** 修改排序 **/\n      Actions.changeSpecialSort({\n        \'special\': {\n          \'specialid\': row.specialid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getTopicList()\n          this.sortValue = -1\n        }\n      })\n    },\n    /** 获取专题列表 **/\n    getTopicList () {\n      let timeStart = this.topicForm.startDate !== null ? new Date(this.topicForm.startDate).getTime() : null\n      let timeEnd = this.topicForm.endDate !== null ? new Date(this.topicForm.endDate).getTime() : null\n      Actions.getTopicList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.topicForm.channelid,\n        \'special_name\': this.topicForm.special_name,\n        \'state\': this.topicForm.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    /** 获取单元格数据 **/\n    handleEdit: function (row) {\n      if (row.state !== 1) {\n        sessionStorage.setItem(\'specialid\', row.specialid)\n        this.$router.push({path: \'/manageTopic/edit\'})\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可编辑!\'\n        })\n      }\n    },\n    /** 修改状态 **/\n    changeState (row) {\n      let state = 0\n      if (row.state === 1) {\n        state = 0\n      } else if (row.state === 0) {\n        state = 1\n      }\n      Actions.changeSpecialState({\n        \'special\': {\n          \'specialid\': row.specialid,\n          \'state\': state\n        }\n      }).then((res) => {\n        if (res.status) {\n          if (state === 0) {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为停用\'\n            })\n          } else {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为启用\'\n            })\n          }\n          this.getTopicList()\n        }\n      })\n    },\n    /** 删除专题 **/\n    handleDelete (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.special_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteSpecial({\n            \'special\': {\n              \'specialid\': row.specialid\n            }\n          }).then((res) => {\n            if (res.data.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getTopicList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可删除!\'\n        })\n      }\n    },\n    /** 搜索专题 **/\n    searchSpecial () {\n      this.pageNo = 1\n      this.$options.filters[\'swapTime\'](this.topicForm)\n      this.getTopicList()\n    },\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        if (res.data.status) {\n          let result = res.data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.listUsableChannel.push(newItem)\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .topic .search-form-container .el-form-item {\n    width: 25%;\n  }\n  .topic .search-form-container .el-date-editor {\n    width: 200px;\n  }\n  .el-form--inline .el-form-item, .el-form--inline .el-form-item__content {\n    width: 63%;\n  }\n</style>\n<style>\n  .search-form-container .el-range-editor .el-range-input{\n    width:50%;\n  }\n  .topic .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n</style>\n'],sourceRoot:""}])},Y8Es:function(e,n,t){var a=t("lExP");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("6659ed12",a,!1,{})},YNx0:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-628553f2] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-628553f2]{\n  color: #909090;\n}\n.create .residence_time span[data-v-628553f2]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageStartpage/src/components/manageStartpage/innerAdverEdit.vue"],names:[],mappings:";AAoIA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"innerAdverEdit.vue",sourcesContent:['<template>\n  <div class="startpage create">\n    <circle-title\n      title-name="内嵌广告页管理"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="editForm"\n      :model="editForm"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        class="item"\n        label="图标配置" >\n        <el-upload\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :show-file-list="false"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="editForm.img_url"\n            :src="editForm.img_url"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="链接地址">\n        <el-input\n          v-model="editForm.jump_url"/>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm">提交</el-button>\n        <el-button\n          type="danger"\n          @click="clearInnerPage">清除</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/startpageApi\'\nimport uploadHeaders from \'@/mixins\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  mixins: [uploadHeaders],\n  data () {\n    return {\n      editForm: {\n        img_url: \'\',\n        channelBelong: \'1\',\n        jump_url: \'\'\n      },\n      adid: \'\',\n      isRefresh: true\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getEditInfo()\n  },\n  methods: {\n    getEditInfo () {\n      Actions.getInnerPage().then(res => {\n        if (res.data.status) {\n          console.log(res.data)\n          this.editForm.img_url = res.data.result.bg_url\n          this.editForm.jump_url = res.data.result.jump_url\n        }\n      })\n    },\n    submitForm () {\n      Actions.saveInnerAdver({\n        \'embedded\': {\n          \'title\': \'\',\n          \'bg_url\': this.editForm.img_url,\n          \'jump_url\': this.editForm.jump_url\n        }\n      }).then((res) => {\n        if (res.status === 200) {\n          this.$notify({\n            title: \'通知\',\n            message: \'保存成功\',\n            type: \'success\'\n          })\n        }\n      })\n    },\n    clearInnerPage () {\n      this.editForm.img_url = \'\'\n      this.editForm.jump_url = \'\'\n      this.submitForm()\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.editForm.img_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n  .create .residence_time span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},Yq4J:function(e,n){},ZaQw:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-button--primary[data-v-4ba117d5] {\n  background-color: #716BFF;\n  border-color: #716BFF;\n}\n.el-button--default[data-v-4ba117d5] {\n  color: #716BFF ;\n  border-color: #716BFF;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSystemUser/src/components/manageSystemUser/assignRole.vue"],names:[],mappings:";AAmFA;EACA,0BAAA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,sBAAA;CACA",file:"assignRole.vue",sourcesContent:["<template>\n  <div class=\"assignRole\">\n    <el-form\n      :inline=\"true\"\n      size=\"small\">\n      <el-form-item\n        label=\"用户名\"\n        style=\"margin-left: 13px;\">\n        <span>{{ username }}</span>\n      </el-form-item>\n      <el-form-item label=\"角色分配\">\n        <el-checkbox\n          v-for=\"(item, index) in allRoleList\"\n          :key=\"index\"\n          v-model=\"item.isChecked\"\n          @change=\"chooseRole(item.roleid, item.isChecked)\">\n          {{ item.name }}\n        </el-checkbox>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport * as Actions from '@/api/systemUsersApi'\nexport default {\n  name: 'AssignRole',\n  props: {\n    usercode: {\n      type: String,\n      default: ''\n    },\n    username: {\n      type: String,\n      default: ''\n    }\n\n  },\n  data () {\n    return {\n      allRoleList: []\n    }\n  },\n  mounted () {\n    /** 获取用户信息 **/\n    this.getUserInfo()\n  },\n  methods: {\n    cancel () {\n      this.$emit('closeDialog')\n    },\n    getUserInfo () {\n      Actions.getUserRoles({\n        'orgUsers': {\n          'usercode': this.usercode\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.allRoleList = res.data.result\n        }\n      })\n    },\n    /** 给用户分配权限 **/\n    chooseRole (roleid, isChecked) {\n      Actions.assignOrCanelUserRole({\n        'assign': {\n          'usercode': this.usercode,\n          'roleid': roleid,\n          'assignOrCanel': isChecked\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.$message({\n            type: 'success',\n            message: '分配成功'\n          })\n        }\n      })\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .assignRole .el-form {\n    margin-top: 15px;\n  }\n  .assignRole .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .assignRole .el-select {\n    width: 100%;\n  }\n  .assignRole .el-form-item {\n    width: 100% !important;\n  }\n  .assignRole .el-checkbox+.el-checkbox{\n    width: 200px;\n    margin-left: 0px;\n  }\n  /*.assignRole .el-form-item */\n</style>\n"],sourceRoot:""}])},Zt1b:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-4c4b3540]{\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n.user[data-v-4c4b3540]{\n  display: inline-block;\n  width: auto;\n  height: 20px;\n  border:1px solid rgba(181, 184, 217, 1);\n  border-radius: 20px;\n  font-size: 13px;\n  padding: 1px 5px 2px 5px;\n  color: rgba(181, 184, 217, 1);\n  cursor: pointer;\n}\n.edit[data-v-4c4b3540]{\n  border: 1px solid #1883FF;\n  color:#1883FF;\n}\n.reset-password[data-v-4c4b3540]{\n  border: 1px solid #694EFF;\n  color:#694EFF;\n  width: 60px;\n}\n.delete[data-v-4c4b3540]{\n  border:1px solid #F00808;\n  color: #F00808;\n}\n.disable[data-v-4c4b3540]{\n  border: 1px solid #E77D00;\n  color:#E77D00;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSystemUser/src/components/manageSystemUser/userManage.vue"],names:[],mappings:";AAkQA;EACA,sBAAA;MAAA,mBAAA;UAAA,0BAAA;CACA;AACA;EACA,sBAAA;EACA,YAAA;EACA,aAAA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;EACA,yBAAA;EACA,8BAAA;EACA,gBAAA;CACA;AACA;EACA,0BAAA;EACA,cAAA;CACA;AACA;EACA,0BAAA;EACA,cAAA;EACA,YAAA;CACA;AACA;EACA,yBAAA;EACA,eAAA;CACA;AACA;EACA,0BAAA;EACA,cAAA;CACA",file:"userManage.vue",sourcesContent:['<template>\n  <div class="user-manage">\n    <div>\n      <circle-title\n        title-name="系统用户管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="manageUser"\n          class="demo-form-inline">\n          <el-form-item label="用户名">\n            <el-input\n              v-model="manageUser.username"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="manageUser.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="manageUser.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getManageUserList"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间">\n            <el-date-picker\n              :title="manageUser.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="manageUser.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="getManageUserList"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            @click="getManageUserList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <el-button\n            :disabled="selectRows <= 0"\n            type="primary"\n            @click="assignRoleList">\n            分配角色\n            <i class="el-icon-edit-outline el-icon--right "/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @selection-change="selectionChange">\n        <el-table-column\n          type="selection"\n          align="center"\n          width="55"/>\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="250">\n          <template slot-scope="scope">\n            <span>\n              <span\n                class="user edit"\n                @click="assignRole(scope.row)">\n                分配角色\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      title="用户分配角色"\n      width="30%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        :usercode="usercode"\n        :usercode-list="usercodeList"\n        :username="username"\n        @closeDialog="closeDialog"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport AssignRole from \'@/components/manageSystemUser/assignRole\'\nimport AssignRoleList from \'@/components/manageSystemUser/assignRoleList\'\nimport * as Actions from \'@/api/systemUsersApi\'\nexport default {\n  components: {\n    CircleTitle,\n    AssignRole,\n    AssignRoleList\n  },\n  data () {\n    return {\n      manageUser: {\n        username: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      dialogVisible: false,\n      componentName: \'AssignRole\',\n      tableHeader: [\n        {\n          prop: \'username\',\n          label: \'成员账号\'\n        },\n        {\n          prop: \'roleList\',\n          label: \'角色\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue.length <= 0) return \'该用户暂无分配角色\'\n            let toolTip = \'\'\n            cellValue.forEach((item, index, arr) => {\n              if (index !== arr.length - 1) {\n                toolTip += item.name + \',\'\n              } else {\n                toolTip += item.name\n              }\n            })\n            return toolTip\n          }\n        },\n        {\n          prop: \'phone\',\n          label: \'手机号\'\n        },\n        {\n          prop: \'email\',\n          label: \'邮箱地址\'\n        },\n        {\n          prop: \'createdata\',\n          label: \'添加时间\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      usercodeList: [],\n      usercode: \'\',\n      username: \'\',\n      selectRows: []\n    }\n  },\n  watch: {\n    \'manageUser.username\' (val) {\n      this.getManageUserList()\n    }\n  },\n  mounted () {\n    this.getManageUserList()\n  },\n  methods: {\n    getManageUserList () {\n      this.$options.filters[\'swapTime\'](this.manageUser)\n      let timeStart = this.manageUser.startDate !== null ? new Date(this.manageUser.startDate).getTime() : null\n      let timeEnd = this.manageUser.endDate !== null ? new Date(this.manageUser.endDate).getTime() : null\n      Actions.getManageUserList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'name\': this.manageUser.username,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    assignRole (row) {\n      this.dialogVisible = true\n      this.componentName = \'AssignRole\'\n      this.usercode = row.usercode\n      this.username = row.username\n    },\n    assignRoleList () {\n      this.dialogVisible = true\n      this.componentName = \'AssignRoleList\'\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getManageUserList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getManageUserList()\n    },\n    closeDialog () {\n      this.componentName = \'\'\n      this.dialogVisible = false\n      this.getManageUserList()\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      // this.recoverSelection()\n      this.usercodeList = []\n      this.selectRows = selection\n      let usernameContact = \'\'\n      selection.forEach((item, index, arr) => {\n        if (index === arr.length - 1) {\n          usernameContact += item.username\n        } else {\n          usernameContact += item.username + \'/\'\n        }\n        this.usercodeList.push(item.usercode)\n      })\n      this.username = usernameContact\n    },\n    recoverSelection () {\n      this.selectRows.forEach((row) => {\n        this.$refs.channelTable.toggleRowSelection(row, true)\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: flex-end;\n  }\n  .user{\n    display: inline-block;\n    width: auto;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .edit{\n    border: 1px solid #1883FF;\n    color:#1883FF;\n  }\n  .reset-password{\n    border: 1px solid #694EFF;\n    color:#694EFF;\n    width: 60px;\n  }\n  .delete{\n    border:1px solid #F00808;\n    color: #F00808;\n  }\n  .disable{\n    border: 1px solid #E77D00;\n    color:#E77D00;\n  }\n</style>\n<style>\n  .user-manage .el-form--inline .el-form-item__content {\n    width: 160px;\n  }\n  .user-manage .search-form-container .el-form-item {\n    width: 25%;\n  }\n</style>\n'],sourceRoot:""}])},Zwaw:function(e,n,t){var a=t("qo90");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("0d2c2552",a,!1,{})},"aC+T":function(e,n,t){var a=t("LfT/");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("314504bc",a,!1,{})},aIPm:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"settingManu.vue",sourceRoot:""}])},auIW:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.search-form-container .btn-container .el-button{\n  padding: 12px 10px;\n}\n.search-form-container .btn-container .el-icon--right{\n  margin: 0;\n}\n.custom-dialog .el-dialog__header{\n  /*padding: 0;*/\n  border-bottom: 1px solid rgba(192,190,255,1);\n}\n.el-tooltip__popper{\n  max-width: 300px;\n}\n.sublive .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.sublive .search-form-container .el-form-item {\n  width: 20%;\n}\n.sublive .allow_comment {\n  background-color: #ffa507;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n}\n.sublive .allow_share {\n  background-color: #1883FF;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n}\n.sublive .allow_like {\n  background-color: #F00808;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n}\n.sublive .allow_collect {\n  background-color: #694EFF;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  -moz-border-radius: 50%;\n  -webkit-border-radius: 50%;\n  float: left;\n  margin-left: 3px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSublive/src/components/manageSublive/subliveList.vue"],names:[],mappings:";AAorBA;EACA,mBAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,eAAA;EACA,6CAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;CACA;AACA;EACA,0BAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,wBAAA;EACA,2BAAA;EACA,YAAA;EACA,iBAAA;CACA",file:"subliveList.vue",sourcesContent:['<template>\n  <div class="sublive">\n    <div>\n      <circle-title\n        title-name="点播管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="subLive"\n          class="demo-form-inline">\n          <el-form-item\n            label="稿件主题"\n            style="margin-left: -29px">\n            <el-input\n              v-model="subLive.title"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="频道"\n            prop="channelid">\n            <el-select\n              v-model="subLive.channelid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="getSubLiveList"\n              @change="getSubLiveList">\n              <el-option\n                v-for="(item, index) in channelTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="subLive.state"\n              placeholder=""\n              @change="getSubLiveList">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="0"\n                label="待上线"/>\n              <el-option\n                :value="1"\n                label="已上线"/>\n              <el-option\n                :value="2"\n                label="已下线"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="subLive.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="subLive.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="getSubLiveList"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            class="date-left"\n            style="margin-left:0px">\n            <el-date-picker\n              :title="subLive.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="subLive.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="getSubLiveList"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 10px"\n            @click="getSubLiveList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="归属频道"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.channelList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :content="showChannelAllName(scope.row.channelList)"\n              :key="scope.row.videoid"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <el-tag\n                v-for="(item, index) in scope.row.channelList"\n                :key="index"\n                size="mini">\n                {{ channelTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="置顶状态"\n          align="center">\n          <template slot-scope="scope">\n            <el-tooltip\n              v-if="!scope.row.top"\n              class="item"\n              effect="dark"\n              content="点击置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;"\n                @click.native="setSubLiveUnTop(scope.row)">\n                置顶\n              </el-tag>\n            </el-tooltip>\n            <el-tooltip\n              v-else\n              class="item"\n              effect="dark"\n              content="点击取消置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;color:#694eff"\n                @click.native="setSubLiveTop(scope.row)">\n                取消置顶\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="上稿/撤稿"\n          align="center">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                :class="[\'manu\', scope.row.state !== 1 && scope.row.channelList.length > 0 ? \'manu-up-active\': \'\']"\n                @click="upSubLive(scope.row)">\n                上稿\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state === 1 ? \'manu-back-active\': \'\']"\n                @click="downSubLive(scope.row)">\n                撤稿\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="操作"\n          align="center">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="settingSubLive(scope.row)">\n                配置\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="deleteSubLive(scope.row)">\n                删除\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          fixed="right"\n          label="权限配置"\n          align="center"\n          width="115">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="评论"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_comment ? \'#ffa507\': \'#B5B8D9\'}"\n                class="allow_comment"\n                @click="handleComment(scope.row)"\n              >\n                <i\n                  style="color: white"\n                  class="iconfont icon-manu-comment"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="分享"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_share ? \'#1883FF\': \'#B5B8D9\'}"\n                class="allow_share"\n                @click="handleShare(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-share"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="点赞"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_like ? \'#F00808\': \'#B5B8D9\'}"\n                class="allow_like"\n                @click="handlePraise(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-praise"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="收藏"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_collect ? \'#694EFF\': \'#B5B8D9\'}"\n                class="allow_collect"\n                @click="handleCollect(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-collect"/>\n              </div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      custom-class="custom-dialog"\n      title="点播信息配置"\n      width="38%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        :videoid="videoid"\n        :manu-title="manuTitle"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport SettingManu from \'./settingManu\'\nimport * as Actions from \'@/api/demand-channel\'\nexport default {\n  components: {\n    CircleTitle,\n    SettingManu\n  },\n  data () {\n    return {\n      subLive: {\n        channel_name: \'\',\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\',\n        channelid: \'\',\n        title: \'\'\n      },\n      channelTypeList: [], // 所属频道列表\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'title\',\n          label: \'稿件主题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'推送日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'digest\',\n          label: \'稿件内容\'\n        },\n        {\n          prop: \'play_url\',\n          label: \'默认视频链接\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>{cellValue}</a>\n          }\n        },\n        {\n          prop: \'state\',\n          label: \'状态\',\n          width: \'100\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 0) {\n              return \'待上线\'\n            } else if (cellValue === 1) {\n              return \'已上线\'\n            } else if (cellValue === 2) {\n              return \'已下线\'\n            }\n          }\n        }\n      ],\n      tableData: [],\n      comment: false,\n      share: false,\n      praise: false,\n      collect: false,\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false,\n      componentName: \'\',\n      videoid: \'0\',\n      manuTitle: \'\' // 稿件主题, 传给子组件\n    }\n  },\n  computed: {\n    showNullTag () {\n      return function (arr) {\n        if (!arr) {\n          return true\n        } else if (arr.length <= 0) {\n          return true\n        } else {\n          return false\n        }\n      }\n    },\n    channelTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.channel_name === \'\') {\n            return \'无\'\n          } else {\n            return content.channel_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    showChannelAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += item.channel_name + \',\'\n          } else {\n            title += item.channel_name\n          }\n        })\n        return title\n      }\n    }\n  },\n  watch: {\n    \'subLive.title\' () {\n      this.getSubLiveList()\n    }\n  },\n  mounted () {\n    this.getSubLiveList()\n    this.getListUsableChannel()\n  },\n  methods: {\n    /** 获取稿件列表 **/\n    getSubLiveList () {\n      this.$options.filters[\'swapTime\'](this.subLive)\n      let timeStart = this.subLive.startDate !== null ? new Date(this.subLive.startDate).getTime() : null\n      let timeEnd = this.subLive.endDate !== null ? new Date(this.subLive.endDate).getTime() : null\n      Actions.getSubLiveList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.subLive.channelid,\n        \'title\': this.subLive.title,\n        \'state\': this.subLive.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          console.log(data)\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getSubLiveUsableChannnel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getSubLiveList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getSubLiveList()\n    },\n    /** 评论权限 **/\n    handleComment (row) {\n      if (row.state !== 1) {\n        if (row.allow_comment) {\n          this.updateSubLive(row.videoid, \'allow_comment\', false)\n        } else {\n          this.updateSubLive(row.videoid, \'allow_comment\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作评论权限!\'\n        })\n      }\n    },\n    /** 分享权限 **/\n    handleShare (row) {\n      if (row.state !== 1) {\n        if (row.allow_share) {\n          this.updateSubLive(row.videoid, \'allow_share\', false)\n        } else {\n          this.updateSubLive(row.videoid, \'allow_share\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作分享权限!\'\n        })\n      }\n    },\n    /** 点赞权限 **/\n    handlePraise (row) {\n      if (row.state !== 1) {\n        if (row.allow_like) {\n          this.updateSubLive(row.videoid, \'allow_like\', false)\n        } else {\n          this.updateSubLive(row.videoid, \'allow_like\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作点赞权限!\'\n        })\n      }\n    },\n    /** 收藏权限 **/\n    handleCollect (row) {\n      if (row.state !== 1) {\n        if (row.allow_collect) {\n          this.updateSubLive(row.videoid, \'allow_collect\', false)\n        } else {\n          this.updateSubLive(row.videoid, \'allow_collect\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作收藏权限!\'\n        })\n      }\n    },\n    /** 置顶 **/\n    setSubLiveUnTop (row) {\n      this.updateSubLive(row.videoid, \'top\', true)\n    },\n    /** 取消置顶 **/\n    setSubLiveTop (row) {\n      this.updateSubLive(row.videoid, \'top\', false)\n    },\n    /** 上稿 **/\n    upSubLive (row) {\n      if (row.channelList.length <= 0) {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件还没有配置频道, 不能上稿!\'\n        })\n        return false\n      }\n      if (row.state === 0 || row.state === 2) {\n        this.$confirm(\'确定要上稿吗?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          this.updateSubLive(row.videoid, \'state\', 1)\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件已上线!\'\n        })\n      }\n    },\n    /** 撤稿 **/\n    downSubLive (row) {\n      if (row.state === 1) {\n        this.$confirm(\'确定要撤稿吗?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          this.updateSubLive(row.videoid, \'state\', 2)\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件还未上稿!\'\n        })\n      }\n    },\n    /** 配置点播 **/\n    settingSubLive (row) {\n      if (row.state !== 1) {\n        this.dialogVisible = true\n        this.componentName = SettingManu\n        this.videoid = row.videoid\n        this.manuTitle = row.title\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'请撤稿后再配置!\'\n        })\n      }\n    },\n    /** 删除稿件 **/\n    deleteSubLive (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.title + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteSubLive({\n            \'video\': {\n              \'videoid\': row.videoid\n            }\n          }).then((res) => {\n            if (res.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getSubLiveList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可删除!\'\n        })\n      }\n    },\n    /**\n       * 点播操作的公共接口\n       * @param articleid 文章ID\n       * @param key 更新字段名\n       * @param value 值\n       */\n    updateSubLive (videoid, key, value) {\n      Actions.updateSubLive({\n        \'video\': {\n          \'videoid\': videoid,\n          [key]: value\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'操作成功!\'\n          })\n          this.getSubLiveList()\n        }\n      })\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      this.articleidList = []\n      selection.forEach((item, index, arr) => {\n        this.articleidList.push(item.articleid)\n      })\n      this.selectedManuInfo = selection\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = \'\'\n      this.getSubLiveList()\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .manu{\n    display: inline-block;\n    width: 30px;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n  .date-left{\n    margin-left: 28px;\n  }\n  .pagination {\n    display: -webkit-box;\n    -webkit-box-pack: end;\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n  .custom-dialog .el-dialog__header{\n    /*padding: 0;*/\n    border-bottom: 1px solid rgba(192,190,255,1);\n  }\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .sublive .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .sublive .search-form-container .el-form-item {\n    width: 20%;\n  }\n  .sublive .allow_comment {\n    background-color: #ffa507;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .sublive .allow_share {\n    background-color: #1883FF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .sublive .allow_like {\n    background-color: #F00808;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .sublive .allow_collect {\n    background-color: #694EFF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n</style>\n'],sourceRoot:""}])},bFvB:function(e,n,t){var a=t("bUfD");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("92c9da5e",a,!1,{})},bPbJ:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.table-list[data-v-290c6304] {\n  min-height: 400px;\n  margin-top: 10px;\n  padding: 0px;\n}\n.whole-table[data-v-290c6304] {\n  width: 100%;\n  border: 1px solid rgba(218, 222, 223, 1);\n  min-height: 25vw;\n}\n.pagination[data-v-290c6304] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  margin-top: 10px;\n}\n.addUrl .btn-container[data-v-290c6304] {\n  width: 23% !important;\n  left: 0px;\n}\n\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSlide/src/components/manageSlide/addManuscript.vue"],names:[],mappings:";AA2YA;EACA,kBAAA;EACA,iBAAA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,yCAAA;EACA,iBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;EACA,iBAAA;CACA;AACA;EACA,sBAAA;EACA,UAAA;CACA",file:"addManuscript.vue",sourcesContent:['<template>\n  <div class="addUrl">\n    <el-form\n      :inline="true"\n      :model="manuScript"\n      size="small"\n      class="demo-form-inline">\n      <el-form-item label="稿件主题">\n        <el-input\n          v-model="manuScript.title"\n          clearable/>\n      </el-form-item>\n      <el-form-item label="归属频道">\n        <el-select\n          v-model="manuScript.channelid"\n          filterable\n          clearable\n          placeholder=""\n          @change="searchManuScript"\n          @clear="searchManuScript">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item label="归属专题">\n        <el-select\n          v-model="manuScript.specialid"\n          filterable\n          clearable\n          placeholder=""\n          @change="searchManuScript"\n          @clear="searchManuScript">\n          <el-option\n            v-for="(item, index) in specialList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="开始时间"\n        class="date-left">\n        <el-date-picker\n          :title="manuScript.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n          v-model="manuScript.startDate"\n          type="datetime"\n          format="yyyy-MM-dd HH:mm"\n          placeholder="选择时间"\n          @change="searchManuScript"/>\n      </el-form-item>\n      <el-form-item\n        label="结束时间"\n        class="date-left">\n        <el-date-picker\n          :title="manuScript.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n          v-model="manuScript.endDate"\n          type="datetime"\n          format="yyyy-MM-dd HH:mm"\n          placeholder="选择时间"\n          @change="searchManuScript"/>\n      </el-form-item>\n      <el-form-item class="btn-container">\n        <el-button\n          type="primary"\n          @click="searchManuScript">\n          查询\n          <i class="el-icon-search el-icon--right"/>\n        </el-button>\n      </el-form-item>\n    </el-form>\n    <div class="table-list">\n      <el-table\n        ref="addManu"\n        :data="tableData"\n        stripe\n        size="small "\n        class="whole-table"\n        min-height="400"\n        @select="select"\n        @select-all="selectAll">\n        <el-table-column\n          type="selection"\n          align="center"\n          width="55"/>\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="归属频道"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.articleChannelList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :content="showChannelAllName(scope.row.articleChannelList)"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <el-tag\n                v-for="(item, index) in scope.row.articleChannelList"\n                :key="index"\n                size="mini">\n                {{ channelTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="归属专题"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.articleSpecialList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :visible-arrow="false"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <div slot="content">{{ showSpecialAllName(scope.row.articleSpecialList) }}</div>\n              <el-tag\n                v-for="(item, index) in scope.row.articleSpecialList"\n                :key="index"\n                size="mini">\n                {{ specialTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="置顶状态"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="!scope.row.top"\n              size="mini"\n              class="setPointer">\n              未置顶\n            </el-tag>\n            <el-tag\n              v-else\n              size="mini"\n              class="setPointer">\n              已置顶\n            </el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-button\n          type="primary"\n          size="small"\n          @click="notifyParentSelectedRow">确定</el-button>\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/manuScriptApi\'\nexport default {\n  name: \'AddManuscript\',\n  data () {\n    return {\n      manuScript: {\n        channel_name: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\',\n        channelid: \'\',\n        title: \'\',\n        specialid: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'title\',\n          label: \'稿件主题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'推送日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'article_url\',\n          label: \'稿件内容\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>查看稿件内容</a>\n          }\n        }\n      ],\n      channelTypeList: [], // 所属频道列表\n      specialList: [],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      selectRow: {} // 已选择的行\n    }\n  },\n  computed: {\n    showNullTag () {\n      return function (arr) {\n        if (!arr) {\n          return true\n        } else if (arr.length <= 0) {\n          return true\n        } else {\n          return false\n        }\n      }\n    },\n    channelTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.channel_name === \'\') {\n            return \'无\'\n          } else {\n            return content.channel_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    specialTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.special_name === \'\') {\n            return \'无\'\n          } else {\n            return content.special_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    showChannelAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += item.channel_name + \',\'\n          } else {\n            title += item.channel_name\n          }\n        })\n        return title\n      }\n    },\n    showSpecialAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += \'《\' + item.special_name + \'》\' + \'\'\n          } else {\n            title += \'《\' + item.special_name + \'》\'\n          }\n        })\n        return title\n      }\n    }\n  },\n  watch: {\n    \'manuScript.title\' () {\n      this.searchManuScript()\n    }\n  },\n  mounted () {\n    this.getMunuScriptList()\n    this.getListUsableChannel()\n    this.getListUsableSpecial()\n  },\n  methods: {\n    /** 获取稿件列表 **/\n    getMunuScriptList () {\n      Actions.getManuScriptList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'state\': 1\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取专题列表 **/\n    getListUsableSpecial () {\n      Actions.getListUsableSpecial().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.special_name\n            newItem.value = item.specialid\n            this.specialList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 搜索稿件 **/\n    searchManuScript () {\n      this.$options.filters[\'swapTime\'](this.manuScript)\n      let timeStart = this.manuScript.startDate !== null ? new Date(this.manuScript.startDate).getTime() : null\n      let timeEnd = this.manuScript.endDate !== null ? new Date(this.manuScript.endDate).getTime() : null\n      Actions.getManuScriptList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.manuScript.channelid,\n        \'specialid\': this.manuScript.specialid,\n        \'title\': this.manuScript.title,\n        \'state\': 1,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    onSubmit () {\n      console.log(\'submit!\')\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchManuScript()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.searchManuScript()\n    },\n    /** 单选 **/\n    select (selection, row) {\n      this.selectRow = row\n      if (selection.length > 1) {\n        selection.shift()\n      }\n    },\n    /** 全选 **/\n    selectAll (selection) {\n      this.$refs.addManu.clearSelection()\n      this.selectRow = {}\n    },\n    /** 通知父组件选择了哪行专题 **/\n    notifyParentSelectedRow () {\n      this.$emit(\'selected-row\', this.selectRow)\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .table-list {\n    min-height: 400px;\n    margin-top: 10px;\n    padding: 0px;\n  }\n  .whole-table {\n    width: 100%;\n    border: 1px solid rgba(218, 222, 223, 1);\n    min-height: 25vw;\n  }\n  .pagination {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 10px;\n  }\n  .addUrl .btn-container {\n    width: 23% !important;\n    left: 0px;\n  }\n\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px;\n  }\n  .addUrl .el-form-item {\n    margin-left: 0px;\n    margin-bottom: 10px;\n  }\n  .addUrl .el-form {\n    margin-top: 15px;\n  }\n  .addUrl .el-date-editor{\n    width: 85%;\n  }\n  .addUrl .el-form-item {\n    width: 30%;\n    margin-right: 3%;\n  }\n  .addUrl .date-left {\n    left: 0px;\n  }\n  .addUrl .el-range-editor .el-range-input{\n    width:50%;\n  }\n  .addUrl .btn-container .el-form-item__content {\n    width: 100%;\n  }\n .el-tooltip__popper{\n    max-width: 300px;\n  }\n</style>\n'],sourceRoot:""}])},bRYy:function(e,n){},bUfD:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.user-event-list .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.user-event-list .search-form-container .el-form-item {\n  width: 25%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageEvent/src/components/manageEvent/userEventList.vue"],names:[],mappings:";AA8MA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA",file:"userEventList.vue",sourcesContent:['<template>\n  <div class="user-event-list">\n    <div>\n      <circle-title\n        title-name="用户活动列表"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="userEventForm"\n          class="demo-form-inline">\n          <el-form-item label="活动名称">\n            <el-input\n              v-model="userEventForm.activity_name"\n              clearable\n              @change="getpageParticipants"/>\n          </el-form-item>\n          <el-form-item label="用户名">\n            <el-input\n              v-model="userEventForm.nickname"\n              clearable\n              @change="getpageParticipants"/>\n          </el-form-item>\n          <el-form-item label="注册手机号">\n            <el-input\n              v-model="userEventForm.phone"\n              clearable\n              @change="getpageParticipants"/>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="userEventForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="userEventForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              clearable\n              @change="getpageParticipants"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            style="margin-left: -14px;">\n            <el-date-picker\n              :title="userEventForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="userEventForm.endDate"\n              format="yyyy-MM-dd HH:mm"\n              type="datetime"\n              placeholder="选择日期"\n              clearable\n              @change="getpageParticipants"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 95px"\n            @click="getpageParticipants">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="userEventTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/eventApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      userEventForm: {\n        activity_name: \'\',\n        nickname: \'\',\n        phone: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      tableHeader: [\n        {\n          prop: \'head_img\',\n          label: \'图标\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'activity_name\',\n          label: \'活动名称\'\n        },\n        {\n          prop: \'type_name\',\n          label: \'活动类型\'\n        },\n        {\n          prop: \'showState\',\n          label: \'状态\'\n        },\n        {\n          prop: \'nickname\',\n          label: \'用户名称\'\n        },\n        {\n          prop: \'phone\',\n          label: \'注册手机号\'\n        },\n        {\n          prop: \'expiry_date_start\',\n          label: \'参加活动时间\',\n          width: 300,\n          formatter: (row, column, cellValue, index) => {\n            let startDate = this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n            let endDate = this.$options.filters[\'FormatDate\'](row.expiry_date_end, \'yyyy-MM-dd hh:mm\')\n            return startDate + \'至\' + endDate\n          }\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0\n    }\n  },\n  watch: {\n    \'userEventForm.activity_name\' (val) {\n      this.getpageParticipants()\n    },\n    \'userEventForm.nickname\' (val) {\n      this.getpageParticipants()\n    },\n    \'userEventForm.phone\' (val) {\n      this.getpageParticipants()\n    }\n  },\n  mounted () {\n    /** 分页获取用户活动列表 **/\n    this.getpageParticipants()\n  },\n  methods: {\n    getpageParticipants () {\n      this.$options.filters[\'swapTime\'](this.userEventForm)\n      let timeStart = this.userEventForm.startDate !== null ? new Date(this.userEventForm.startDate).getTime() : null\n      let timeEnd = this.userEventForm.endDate !== null ? new Date(this.userEventForm.endDate).getTime() : null\n      Actions.getpageParticipants({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'activity_name\': this.userEventForm.activity_name,\n        \'nickname\': this.userEventForm.nickname,\n        \'phone\': this.userEventForm.phone,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getpageParticipants()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getpageParticipants()\n    }\n  }\n}\n<\/script>\n<style>\n  .user-event-list .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .user-event-list .search-form-container .el-form-item {\n    width: 25%;\n  }\n</style>\n'],sourceRoot:""}])},btcs:function(e,n,t){var a=t("OSyl");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("f9e39c60",a,!1,{})},cDSy:function(e,n){},cwe7:function(e,n){},dmRH:function(e,n){},e2SV:function(e,n,t){var a=t("peo/");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("66cf75db",a,!1,{})},ekX5:function(e,n,t){var a=t("ywmh");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1e1454c0",a,!1,{})},ekcM:function(e,n,t){var a=t("tYlx");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1c10b5dd",a,!1,{})},fHLH:function(e,n,t){var a=t("UKDN");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("64da9104",a,!1,{})},g5CB:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-6dec4e18] {\n  margin-top: 4%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageTopic/src/components/manageTopic/topicEdit.vue"],names:[],mappings:";AA4QA;EACA,eAAA;CACA",file:"topicEdit.vue",sourcesContent:['<template>\n  <div class="topic create">\n    <circle-title\n      title-name="专题编辑"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="editForm"\n      :model="editForm"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="专题标题"\n        prop="special_name">\n        <el-input v-model.trim="editForm.special_name"/>\n      </el-form-item>\n      <el-form-item\n        class="item"\n        label="图标配置"\n        prop="special_head_url">\n        <el-upload\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :show-file-list="false"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="editForm.special_head_url"\n            :src="editForm.special_head_url"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="归属频道"\n        prop="channelid">\n        <el-select\n          v-model="editForm.channelid"\n          placeholder="">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="有效期"\n        class="indate"\n        required>\n        <el-date-picker\n          v-model="editForm.indate"\n          :clearable="false"\n          style="width:100%"\n          type="datetimerange"\n          range-separator="至"\n          format="yyyy-MM-dd HH:mm"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"/>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        prop="sort">\n        <el-input v-model.number="editForm.sort"/>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="editForm.state"\n          placeholder="请选择">\n          <el-option\n            :value="1"\n            label="启用"/>\n          <el-option\n            :value="0"\n            label="停用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'editForm\')">提交</el-button>\n        <el-button @click="gotoList">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/topicApi\'\nimport uploadHeaders from \'@/mixins\'\nexport default {\n  components: {\n    CircleTitle\n  },\n\n  mixins: [uploadHeaders],\n  \n  data () {\n    return {\n      editForm: {\n        special_name: \'\',\n        channel_name: \'\',\n        channelid: \'\',\n        special_head_url: \'\',\n        indate: [],\n        state: 0,\n        sort: 0\n      },\n      isChooseDate: false,\n      rules: {\n        special_name: [\n          { required: true, message: \'请输入专题名称\', trigger: \'blur\' },\n          { min: 0, max: 64, message: \'标题限定64个字符内\', trigger: \'change\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          {type: \'number\', message: \'排序必须为数字\'}\n        ],\n        special_head_url: [\n          { required: true, message: \'请上传图片\', trigger: \'blur\' }\n        ],\n        channelid: [\n          { required: true, message: \'请选择归属频道\', trigger: \'blur\' }\n        ]\n      },\n      channelTypeList: [],\n      specialid: \'\',\n      isRefresh: true\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getEditInfo()\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageTopic/list\') {\n      to.meta.refresh = this.isRefresh\n    } else if (to.path === \'/manageTopic/create\') {\n      this.$root.eventHub.$emit(\'reset-options\')\n    }\n    next()\n  },\n  methods: {\n    gotoList () {\n      this.isRefresh = false\n      this.$router.push({path: \'/manageTopic/list\'})\n    },\n    getEditInfo () {\n      this.specialid = sessionStorage.getItem(\'specialid\')\n      Actions.getSpecialByID({\n        \'special\': {\n          \'specialid\': this.specialid\n        }\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.editForm.special_name = data.special_name\n          this.editForm.channel_name = data.channel_name\n          this.editForm.channelid = data.channelid\n          this.editForm.state = data.state\n          this.editForm.special_head_url = data.special_head_url\n          this.editForm.indate.push(data.expiry_date_start)\n          this.editForm.indate.push(data.expiry_date_end)\n          this.editForm.sort = data.sort\n        }\n        this.getListUsableChannel()\n      })\n    },\n    /** 如果父频道被停用, 则channelid为空 **/\n    setChannnelid () {\n      let isSetEmpty = true\n      console.log(this.editForm.channelid)\n      this.channelTypeList.forEach(item => {\n        if (item.value === this.editForm.channelid) {\n          isSetEmpty = false\n        }\n      })\n      if (isSetEmpty) {\n        this.$set(this.editForm, \'channelid\', \'\')\n      }\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n          this.setChannnelid()\n        }\n      })\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.channelTypeList.forEach((item, index, arr) => {\n            if (item.value === this.editForm.channel_name) {\n              this.editForm.channelid = item.label\n            }\n          })\n          Actions.editSpecial({\n            \'special\': {\n              \'specialid\': this.specialid,\n              \'special_name\': this.editForm.special_name,\n              \'special_head_url\': this.editForm.special_head_url,\n              \'channelid\': this.editForm.channelid,\n              \'state\': this.editForm.state,\n              \'expiry_date_start\': new Date(this.editForm.indate[0]).getTime(),\n              \'expiry_date_end\': new Date(this.editForm.indate[1]).getTime(),\n              \'sort\': this.editForm.sort\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/manageTopic/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'编辑成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.editForm.special_head_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传一张图片!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n</style>\n'],sourceRoot:""}])},gc2K:function(e,n,t){var a=t("sgyu");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5cc9876c",a,!1,{})},gm5r:function(e,n,t){var a=t("Zt1b");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("084287b0",a,!1,{})},gzjL:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-b0610728] {\n  padding-top: 30px;\n  text-align: right;\n  display: block;\n}\n.table-list[data-v-b0610728] {\n  padding: 0 !important;\n  margin-top: -27px !important;\n}\n/*# sourceMappingURL=src/components/home/tableList.css.map */","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/home/src/components/home/tableList.vue","/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/home/tableList.vue"],names:[],mappings:";AAkEA;EACE,kBAAA;EACA,kBAAA;EACA,eAAA;CCjED;ADkED;EACE,sBAAA;EACA,6BAAA;CChED;AACD,6DAA6D",file:"tableList.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.pagination\n  padding-top 30px\n  text-align right\n  display block\n.table-list\n  padding 0!important\n  margin-top -27px!important\n",".pagination {\n  padding-top: 30px;\n  text-align: right;\n  display: block;\n}\n.table-list {\n  padding: 0 !important;\n  margin-top: -27px !important;\n}\n/*# sourceMappingURL=src/components/home/tableList.css.map */"],sourceRoot:""}])},h1qQ:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.topic .search-form-container .el-form-item[data-v-8c7c9cf0] {\n  width: 25%;\n}\n.topic .search-form-container .el-date-editor[data-v-8c7c9cf0] {\n  width: 200px;\n}\n.el-form--inline .el-form-item[data-v-8c7c9cf0], .el-form--inline .el-form-item__content[data-v-8c7c9cf0] {\n  width: 63%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageTopic/src/components/manageTopic/topicList.vue"],names:[],mappings:";AAycA;EACA,WAAA;CACA;AACA;EACA,aAAA;CACA;AACA;EACA,WAAA;CACA",file:"topicList.vue",sourcesContent:['<template>\n  <div class="topic">\n    <div>\n      <circle-title\n        title-name="专题管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="topicForm"\n          class="demo-form-inline">\n          <el-form-item label="频道">\n            <el-select\n              v-model="topicForm.channelid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="searchSpecial"\n              @change="searchSpecial">\n              <el-option\n                v-for="(item, index) in listUsableChannel"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label="专题">\n            <el-input\n              v-model="topicForm.special_name"/>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="topicForm.state"\n              placeholder=""\n              @change="searchSpecial">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="1"\n                label="待上线"/>\n              <el-option\n                :value="2"\n                label="已上线"/>\n              <el-option\n                :value="3"\n                label="过期"/>\n              <el-option\n                :value="0"\n                label="停用"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            class="date-left">\n            <el-date-picker\n              :title="topicForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="topicForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择日期"\n              @change="searchSpecial"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            class="date-left">\n            <el-date-picker\n              :title="topicForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="topicForm.endDate"\n              format="yyyy-MM-dd HH:mm"\n              type="datetime"\n              placeholder="选择日期"\n              @change="searchSpecial"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 40px"\n            @click="searchSpecial">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/manageTopic/create">\n            <el-button type="primary">\n              添加专题\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="修改状态"\n              placement="top">\n              <el-button\n                type="text"\n                size="small"\n                icon="el-icon-remove-outline"\n                @click="changeState(scope.row)"/>\n            </el-tooltip>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/topicApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      topicForm: {\n        channelid: \'\',\n        channel_name: \'\',\n        special_name: \'\',\n        daterange: [],\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'special_name\',\n          label: \'专题名称\'\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'channel_name\',\n          label: \'归属频道\'\n        },\n        {\n          prop: \'special_head_url\',\n          label: \'图片\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'expiry_date_start\',\n          label: \'有效期-始\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'expiry_date_end\',\n          label: \'有效期-终\',\n          width: 120,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'showState\',\n          label: \'状态\'\n        },\n        {\n          prop: \'sort\',\n          label: \'排序\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' class=\'self-sort\' id={index} value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      listUsableChannel: [], // 可用的频道列表\n      selectSpecialId: \'\' // 点击排序行的channelid\n    }\n  },\n  watch: {\n    \'topicForm.state\' () {\n      this.searchSpecial()\n    }\n  },\n  mounted () {\n    /** 获取专题列表 **/\n    this.getTopicList()\n    /** 获取可用频道列表**/\n    this.getListUsableChannel()\n\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getTopicList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageTopic/create\') {\n      this.resetOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetOptions () {\n      this.topicForm = {\n        channelid: \'\',\n        channel_name: \'\',\n        special_name: \'\',\n        daterange: [],\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      }\n      this.pageNo = 1\n      this.getTopicList()\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchSpecial()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getTopicList()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      if (event.target.classList.contains(\'sort-container\')) {\n        if (row.state !== 1) {\n          let id = event.target.dataset.id\n          if (id) {\n            this.clickCellIndex = parseInt(id)\n          }\n          this.$nextTick(() => {\n            let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n            inputEles.forEach(element => {\n              if (element) {\n                this.selectSpecialId = row.specialid\n                element.focus()\n                element.onkeyup = (e) => {\n                  if (element.value) {\n                    this.sortValue = parseInt(element.value)\n                  }\n                }\n              }\n            })\n          })\n        } else {\n          this.$message({\n            type: \'error\',\n            message: \'启用状态下不能排序!\'\n          })\n        }\n      }\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectSpecialId !== row.specialid) return false\n      /** 修改排序 **/\n      Actions.changeSpecialSort({\n        \'special\': {\n          \'specialid\': row.specialid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getTopicList()\n          this.sortValue = -1\n        }\n      })\n    },\n    /** 获取专题列表 **/\n    getTopicList () {\n      let timeStart = this.topicForm.startDate !== null ? new Date(this.topicForm.startDate).getTime() : null\n      let timeEnd = this.topicForm.endDate !== null ? new Date(this.topicForm.endDate).getTime() : null\n      Actions.getTopicList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.topicForm.channelid,\n        \'special_name\': this.topicForm.special_name,\n        \'state\': this.topicForm.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    /** 获取单元格数据 **/\n    handleEdit: function (row) {\n      if (row.state !== 1) {\n        sessionStorage.setItem(\'specialid\', row.specialid)\n        this.$router.push({path: \'/manageTopic/edit\'})\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可编辑!\'\n        })\n      }\n    },\n    /** 修改状态 **/\n    changeState (row) {\n      let state = 0\n      if (row.state === 1) {\n        state = 0\n      } else if (row.state === 0) {\n        state = 1\n      }\n      Actions.changeSpecialState({\n        \'special\': {\n          \'specialid\': row.specialid,\n          \'state\': state\n        }\n      }).then((res) => {\n        if (res.status) {\n          if (state === 0) {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为停用\'\n            })\n          } else {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为启用\'\n            })\n          }\n          this.getTopicList()\n        }\n      })\n    },\n    /** 删除专题 **/\n    handleDelete (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.special_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteSpecial({\n            \'special\': {\n              \'specialid\': row.specialid\n            }\n          }).then((res) => {\n            if (res.data.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getTopicList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可删除!\'\n        })\n      }\n    },\n    /** 搜索专题 **/\n    searchSpecial () {\n      this.pageNo = 1\n      this.$options.filters[\'swapTime\'](this.topicForm)\n      this.getTopicList()\n    },\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        if (res.data.status) {\n          let result = res.data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.listUsableChannel.push(newItem)\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .topic .search-form-container .el-form-item {\n    width: 25%;\n  }\n  .topic .search-form-container .el-date-editor {\n    width: 200px;\n  }\n  .el-form--inline .el-form-item, .el-form--inline .el-form-item__content {\n    width: 63%;\n  }\n</style>\n<style>\n  .search-form-container .el-range-editor .el-range-input{\n    width:50%;\n  }\n  .topic .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n</style>\n'],sourceRoot:""}])},h8PK:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"myUpload.vue",sourceRoot:""}])},hggo:function(e,n,t){var a=t("w+Ia");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5052e703",a,!1,{})},hmdD:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.log-statistics .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.log-statistics .search-form-container .el-form-item {\n  width: 31%;\n  margin-right: 10px;\n}\n.pagination .el-select{\n  width: auto;\n  margin-left: 0;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageLog/src/components/manageLog/logStatistics.vue"],names:[],mappings:";AA2QA;EACA,WAAA;CACA;AACA;EACA,WAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,eAAA;CACA",file:"logStatistics.vue",sourcesContent:["<template>\n  <div class=\"log-statistics\">\n    <div>\n      <circle-title\n        title-name=\"日志统计管理\"\n        class=\"cicle-controller\"\n      />\n      <div class=\"search-form-container\">\n        <el-form\n          :inline=\"true\"\n          :model=\"ruleForm\"\n          class=\"demo-form-inline\">\n          <el-form-item label=\"操作人员\">\n            <el-input\n              v-model=\"ruleForm.username\"\n              clearable/>\n          </el-form-item>\n          <el-form-item label=\"操作事件\">\n            <el-input\n              v-model=\"ruleForm.operationContent\"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label=\"操作开始日期\">\n            <el-date-picker\n              :title=\"ruleForm.startDate | FormatDate('yyyy-MM-dd hh:mm')\"\n              v-model=\"ruleForm.startDate\"\n              type=\"datetime\"\n              format=\"yyyy-MM-dd HH:mm\"\n              placeholder=\"选择日期\"\n              @change=\"getLogList\"/>\n          </el-form-item>\n          <el-form-item\n            style=\"margin-left: -28px;\"\n            label=\"操作结束日期\">\n            <el-date-picker\n              :title=\"ruleForm.endDate | FormatDate('yyyy-MM-dd hh:mm')\"\n              v-model=\"ruleForm.endDate\"\n              type=\"datetime\"\n              format=\"yyyy-MM-dd HH:mm\"\n              placeholder=\"选择日期\"\n              @change=\"getLogList\"/>\n          </el-form-item>\n          <el-button\n            type=\"primary\"\n            style=\"margin-left: 98px;\"\n            @click=\"getLogList\">\n            查询\n            <i class=\"el-icon-search el-icon--right\"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class=\"table-list\">\n      <el-table\n        ref=\"channelTable\"\n        :data=\"tableData\"\n        stripe\n        class=\"whole-table\"\n        min-height=\"400\">\n        <el-table-column\n          v-for=\"(item, index) in tableHeader\"\n          :key=\"index\"\n          :prop=\"item.prop\"\n          :label=\"item.label\"\n          :width=\"item.width\"\n          :formatter=\"item.formatter\"\n          align=\"center\"\n          show-overflow-tooltip\n        />\n      </el-table>\n      <div class=\"pagination\">\n        <div>\n          <el-select\n            v-model=\"batchProcess\"\n            placeholder=\"清除日志\"\n            @change=\"clearLog\">\n            <el-option\n              v-for=\"item in processList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n              :disabled=\"item.disabled\"/>\n          </el-select>\n        </div>\n        <el-pagination\n          :total=\"total\"\n          :page-sizes=\"[10, 20, 30, 40]\"\n          background\n          layout=\"total, sizes, prev, pager, next\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/logApi'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      ruleForm: {\n        username: '',\n        operationContent: '',\n        startDate: '',\n        endDate: ''\n      },\n      tableHeader: [\n        {\n          prop: 'logid',\n          label: '日志编号',\n          width: 180\n        },\n        {\n          prop: 'username',\n          label: '操作人员',\n          width: 120\n        },\n        {\n          prop: 'createtime',\n          label: '操作日期',\n          width: 140,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters['FormatDate'](cellValue, 'yyyy-MM-dd hh:mm')\n          }\n        },\n        {\n          prop: 'ipAddress',\n          label: 'IP地址',\n          width: 180\n        },\n        {\n          prop: 'operationContent',\n          label: '操作事件'\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      batchProcess: '',\n      processList: [\n        {\n          value: 'week',\n          label: '一周之前'\n        }, {\n          value: 'month',\n          label: '一个月之前'\n        }, {\n          value: 'halfYear',\n          label: '半年之前'\n        }, {\n          value: 'year',\n          label: '一年之前'\n        }\n      ]\n    }\n  },\n  watch: {\n    'ruleForm.username' (val) {\n      this.getLogList()\n    },\n    'ruleForm.operationContent' (val) {\n      this.getLogList()\n    }\n  },\n  mounted () {\n    /** 获取日志列表 **/\n    this.getLogList()\n  },\n  methods: {\n    getLogList () {\n      this.$options.filters['swapTime'](this.ruleForm)\n      let timeStart = this.ruleForm.startDate !== null ? new Date(this.ruleForm.startDate).getTime() : null\n      let timeEnd = this.ruleForm.endDate !== null ? new Date(this.ruleForm.endDate).getTime() : null\n      let option = {\n        'pageNo': this.pageNo,\n        'pageSize': this.pageSize,\n        'username': this.ruleForm.username,\n        'operationContent': this.ruleForm.operationContent,\n        'timeStart': timeStart,\n        'timeEnd': timeEnd\n      }\n      Actions.getLogList(option).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n          this.pageNo = listData.pageNum\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getLogList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getLogList()\n    },\n    clearLog (val) {\n      this.$confirm('是否清除日志?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        switch (val) {\n          case 'week':\n            this.deleteLog({\n              'days': 7,\n              'months': null,\n              'years': null\n            })\n            break\n          case 'month':\n            this.deleteLog({\n              'days': null,\n              'months': 1,\n              'years': null\n            })\n            break\n          case 'halfYear':\n            this.deleteLog({\n              'days': null,\n              'months': 6,\n              'years': null\n            })\n            break\n          case 'year':\n            this.deleteLog({\n              'days': null,\n              'months': null,\n              'years': 1\n            })\n            break\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    deleteLog (obj) {\n      Actions.deleteLog(\n        obj\n      ).then(res => {\n        if (res.data.status) {\n          this.$notify({\n            type: 'success',\n            title: '提示',\n            message: '清除成功!'\n          })\n          this.getLogList()\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n</style>\n<style>\n  .log-statistics .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .log-statistics .search-form-container .el-form-item {\n    width: 31%;\n    margin-right: 10px;\n  }\n  .pagination .el-select{\n    width: auto;\n    margin-left: 0;\n  }\n</style>\n"],sourceRoot:""}])},i42W:function(e,n,t){var a=t("aIPm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("f8ea9dc4",a,!1,{})},iZRR:function(e,n,t){var a=t("wR0k");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("7ba694ef",a,!1,{})},ibr8:function(e,n,t){var a=t("VMTV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("bfee7236",a,!1,{})},isE6:function(e,n){},isgN:function(e,n){},iy11:function(e,n,t){var a=t("I/O8");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("e3a2ec34",a,!1,{})},jAzQ:function(e,n){},kbx9:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-1c2dcf06] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-1c2dcf06]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageLive/src/components/manageLive/liveCreate.vue"],names:[],mappings:";AAoOA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"liveCreate.vue",sourcesContent:['<template>\n  <div class="channel create">\n    <circle-title\n      title-name="直播新增"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="createForm"\n      :model="createForm"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="直播主题"\n        prop="live_name">\n        <el-input v-model.trim="createForm.live_name"/>\n      </el-form-item>\n      <el-form-item\n        label="图标配置"\n        class="item"\n        prop="icon_url">\n        <el-upload\n          :show-file-list="false"\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="createForm.icon_url"\n            :src="createForm.icon_url"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="直播周期"\n        prop="channel_name">\n        <el-date-picker\n          v-model="createForm.liveRange"\n          :clearable="false"\n          type="datetimerange"\n          format="yyyy-MM-dd HH:mm"\n          style="width:100%"\n          range-separator="至"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"\n          @change="chooseTime"/>\n      </el-form-item>\n      <el-form-item\n        label="内容链接"\n        prop="url">\n        <el-input v-model="createForm.url"/>\n      </el-form-item>\n      <el-form-item\n        label="是否置顶"\n        prop="fixed">\n        <el-select\n          v-model="createForm.isTop"\n          placeholder="请选择">\n          <el-option\n            :value="true"\n            label="是"/>\n          <el-option\n            :value="false"\n            label="否"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item label="权限配置">\n        <el-checkbox\n          v-model="createForm.isComment"\n          label="评论"/>\n        <el-checkbox\n          v-model="createForm.isShare"\n          label="分享"\n          name="auth"/>\n        <el-checkbox\n          v-model="createForm.isCollect"\n          label="收藏"\n          name="auth"/>\n        <el-checkbox\n          v-model="createForm.isPraise"\n          label="点赞"\n          name="auth"/>\n      </el-form-item>\n      <el-form-item label="是否上稿">\n        <el-radio-group\n          v-model="createForm.state">\n          <el-radio\n            :label="1">\n            是\n          </el-radio>\n          <el-radio\n            :label="0">\n            否\n          </el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'createForm\')">提交</el-button>\n        <router-link to="/live/list">\n          <el-button>取消</el-button>\n        </router-link>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/liveApi\'\nimport uploadHeaders from \'@/mixins\'\nimport {controlTime} from \'../../helpers\'\n\nexport default {\n  components: {\n    CircleTitle\n  },\n\n  mixins: [uploadHeaders],\n  \n  data () {\n    var checkUrl = (rule, value, callback) => {\n      // eslint-disable-next-line\n      var match =  /^((ht|f)tps?):\\/\\/([\\w\\-]+(\\.[\\w\\-]+)*\\/)*[\\w\\-]+(\\.[\\w\\-]+)*\\/?(\\?([\\w\\-\\.,@?^=%&:\\/~\\+#]*)+)?/\n      if (!match.test(value)) {\n        return callback(new Error(\'请输入正确的地址\'))\n      }\n      callback()\n    }\n    return {\n      createForm: {\n        live_name: \'\',\n        icon_url: \'\',\n        url: \'\',\n        isTop: false,\n        liveRange: [new Date(), new Date()],\n        isComment: false,\n        isShare: false,\n        isPraise: false,\n        isCollect: false,\n        state: 1\n      },\n      rules: {\n        live_name: [\n          { required: true, message: \'请输入直播主题\', trigger: \'blur\' }\n        ],\n        url: [\n          { validator: checkUrl, trigger: \'blur\' }\n        ],\n        icon_url: [\n          { required: true, message: \'请上传图片\', trigger: \'blur\' }\n        ]\n      }\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  methods: {\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.addLive({\n            \'liveBroadcast\': {\n              \'live_name\': this.createForm.live_name,\n              \'live_head_url\': this.createForm.icon_url,\n              \'live_url\': this.createForm.url,\n              \'expiry_date_start\': this.createForm.liveRange[0].getTime(),\n              \'expiry_date_end\': this.createForm.liveRange[1].getTime(),\n              \'top\': this.createForm.isTop,\n              \'allow_comment\': this.createForm.isComment,\n              \'allow_share\': this.createForm.isShare,\n              \'allow_like\': this.createForm.isPraise,\n              \'allow_collect\': this.createForm.isCollect,\n              \'state\': this.createForm.state\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/live/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'添加成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.createForm.icon_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    chooseTime (changeTimeArr) {\n      controlTime(this, this.createForm.liveRange, changeTimeArr)\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},l2rU:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-button--primary[data-v-218a921b] {\n  background-color: #716BFF;\n  border-color: #716BFF;\n}\n.el-button--default[data-v-218a921b] {\n  color: #716BFF ;\n  border-color: #716BFF;\n}\n.addUser .el-checkbox[data-v-218a921b] {\n  float: left;\n}\n.addUser .check-all[data-v-218a921b] {\n  margin-right: 30px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageRole/src/components/manageRole/detailRole.vue"],names:[],mappings:";AAwEA;EACA,0BAAA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,sBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,mBAAA;CACA",file:"detailRole.vue",sourcesContent:['<template>\n  <div class="addUser">\n    <el-form\n      ref="ruleForm"\n      :model="ruleForm">\n      <el-form-item\n        label="角色名称"\n        prop="role_name">\n        <el-input\n          v-model="ruleForm.role_name"\n          :disabled="true"\n          style="width:260px;"\n          clearable/>\n      </el-form-item>\n    </el-form>\n    <div class="table-lists">\n      <p style="margin-bottom: 10px;">拥有权限：</p>\n      <div class="self-tree-style">\n        <el-tree\n          :data="toData"\n          :default-expand-all="true"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/systemUsersApi\'\nexport default {\n  name: \'AddRole\',\n  components: {\n  },\n  props: {\n    roleid: {\n      type: String,\n      default: \'\'\n    }\n  },\n  data () {\n    return {\n      ruleForm: {\n        role_name: \'\'\n      },\n      toData: []\n    }\n  },\n  mounted () {\n    /** 获取编辑信息 **/\n    this.getRoleDetails()\n  },\n  methods: {\n    getRoleDetails () {\n      Actions.getRoleDetails({\n        \'role\': {\n          \'roleid\': this.roleid\n        }\n      }).then(res => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.ruleForm.role_name = data.name\n          this.toData = data.treePermission || []\n        }\n      })\n    },\n    cancel () {\n      this.$emit(\'closeDialog\')\n    }\n  }\n\n}\n<\/script>\n\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n  .addUser .el-checkbox {\n    float: left;\n  }\n  .addUser .check-all {\n    margin-right: 30px;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .addUser .el-form {\n    margin-top: 15px;\n  }\n  .addUser .el-form-item {\n    width: 100%;\n  }\n  .addUser .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .addUser .el-select {\n    width: 100%;\n  }\n  .table-lists {\n    margin-top: 10px;\n  }\n  .table-lists thead tr th {\n    background: #716BFF;\n    color: white;\n    border-color:#716BFF ;\n    text-align: center;\n  }\n  .self-tree-style {\n    margin-left: 60px;\n    padding-bottom: 50px;\n  }\n</style>\n'],sourceRoot:""}])},lBbG:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-button--primary[data-v-52c215d4] {\n  background-color: #716BFF;\n  border-color: #716BFF;\n}\n.el-button--default[data-v-52c215d4] {\n  color: #716BFF ;\n  border-color: #716BFF;\n}\n.addUser .el-checkbox[data-v-52c215d4] {\n  float: left;\n}\n.addUser .check-all[data-v-52c215d4] {\n  margin-right: 30px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageRole/src/components/manageRole/editRole.vue"],names:[],mappings:";AA6JA;EACA,0BAAA;EACA,sBAAA;CACA;AACA;EACA,gBAAA;EACA,sBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,mBAAA;CACA",file:"editRole.vue",sourcesContent:["<template>\n  <div class=\"addUser\">\n    <el-form\n      ref=\"ruleForm\"\n      :model=\"ruleForm\"\n      :rules=\"rules\">\n      <el-form-item\n        label=\"角色名称\"\n        prop=\"role_name\">\n        <el-input\n          v-model.trim=\"ruleForm.role_name\"\n          style=\"width:260px;\"\n          clearable/>\n      </el-form-item>\n    </el-form>\n    <div class=\"table-lists\">\n      <p style=\"margin-bottom: 10px;\">权限配置：</p>\n      <tree-transfer\n        :title=\"title\"\n        :from_data=\"fromData\"\n        :to_data=\"toData\"\n        :default-props=\"{label:'label'}\"\n        :mode=\"mode\"\n        :filter=\"false\"\n        open-all\n        height=\"440px\"\n        @addBtn = \"addAuth\"\n        @removeBtn = \"removeAuth\"/>\n    </div>\n    <el-form-item\n      class=\"submit\"\n      style=\"width:100%\">\n      <el-button\n        @click=\"cancel\">取消</el-button>\n      <el-button\n        type=\"primary\"\n        @click=\"onSubmit('ruleForm')\">提交</el-button>\n    </el-form-item>\n  </div>\n</template>\n<script>\nimport treeTransfer from 'el-tree-transfer'\nimport * as Actions from '@/api/systemUsersApi'\nexport default {\n  name: 'AddRole',\n  components: {\n    treeTransfer\n  },\n  props: {\n    roleid: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      ruleForm: {\n        role_name: ''\n      },\n      mode: 'transfer', // transfer addressList\n      fromData: [],\n      toData: [],\n      title: ['全部权限', '已选择权限'],\n      rules: {\n        role_name: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' }\n        ]\n      },\n      idArr: []\n    }\n  },\n  mounted () {\n    /** 获取树 **/\n    this.getTreePermission()\n    /** 获取编辑信息 **/\n    this.getRoleDetails()\n  },\n  methods: {\n    getTreePermission () {\n      Actions.getTreePermission().then(res => {\n        if (res.data.status) {\n          this.fromData = res.data.result\n        }\n      })\n    },\n    getRoleDetails () {\n      Actions.getRoleDetails({\n        'role': {\n          'roleid': this.roleid\n        }\n      }).then(res => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.ruleForm.role_name = data.name\n          this.toData = data.treePermission || []\n        }\n      })\n    },\n    getAllSelectedId () {\n      this.toData.forEach((item, index, arr) => {\n        this.idArr.push(item.id)\n        if (item.children.length > 0) {\n          this.getChildrenId(item.children)\n        }\n      })\n    },\n    getChildrenId (arr) {\n      arr.forEach((item, index, arr) => {\n        this.idArr.push(item.id)\n        if (item.children.length > 0) {\n          this.getChildrenId(item.children)\n        }\n      })\n    },\n    onSubmit (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.idArr = []\n          this.getAllSelectedId()\n          Actions.updateRole({\n            'role': {\n              'roleid': this.roleid,\n              'name': this.ruleForm.role_name,\n              'permissionidList': this.idArr\n            }\n          }).then(res => {\n            console.log(res)\n            if (res.data.status) {\n              this.$notify({\n                type: 'success',\n                title: '成功',\n                message: '编辑角色成功'\n              })\n              this.$emit('closeDialog')\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    cancel () {\n      this.$emit('closeDialog')\n    },\n    addAuth (fromData, toData, obj) {\n      this.toData = toData\n    },\n    removeAuth (fromData, toData, obj) {\n      this.toData = toData\n    }\n  }\n\n}\n<\/script>\n\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n  .addUser .el-checkbox {\n    float: left;\n  }\n  .addUser .check-all {\n    margin-right: 30px;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .addUser .el-form {\n    margin-top: 15px;\n  }\n  .addUser .el-form-item {\n    width: 100%;\n  }\n  .addUser .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .addUser .el-select {\n    width: 100%;\n  }\n  .table-lists {\n    margin-top: 10px;\n    margin-bottom: 20px;\n  }\n  .table-lists thead tr th {\n    background: #716BFF;\n    color: white;\n    border-color:#716BFF ;\n    text-align: center;\n  }\n</style>\n"],sourceRoot:""}])},lExP:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.event-edit .sort span[data-v-787f318a]{\n  color: #909090;\n}\n.event-edit .el-form-item[data-v-787f318a] {\n  margin-left: 35px;\n  width: 65%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageEvent/src/components/manageEvent/eventEdit.vue"],names:[],mappings:";AA6VA;EACA,eAAA;CACA;AACA;EACA,kBAAA;EACA,WAAA;CACA",file:"eventEdit.vue",sourcesContent:['<template>\n  <div class="event-edit">\n    <el-form\n      ref="editFrom"\n      :model="editFrom"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="活动名称"\n        prop="activity_name">\n        <el-input v-model.trim="editFrom.activity_name"/>\n      </el-form-item>\n      <el-form-item\n        label="归属类别"\n        prop="type_name">\n        <el-select\n          v-model="editFrom.typeid"\n          filterable\n          placeholder=""\n          clearable\n          @change="handleEventType(editFrom.typeid)">\n          <el-option\n            v-for="(item, index) in eventTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="图标配置"\n        class="item"\n        prop="head_img">\n        <el-upload\n          :show-file-list="false"\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="editFrom.head_img"\n            :src="editFrom.head_img"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="前端链接"\n        prop="app_url">\n        <el-input v-model.trim="editFrom.app_url"/>\n      </el-form-item>\n      <el-form-item\n        label="后端链接"\n        prop="manager_url">\n        <el-input v-model.trim="editFrom.manager_url"/>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="editFrom.state"\n          placeholder="请选择">\n          <el-option\n            :value="1"\n            label="启用"/>\n          <el-option\n            :value="0"\n            label="停用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="有效期">\n        <el-date-picker\n          v-model="editFrom.liveRange"\n          :clearable="false"\n          type="datetimerange"\n          format="yyyy-MM-dd HH:mm"\n          style="width:100%"\n          range-separator="至"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"/>\n      </el-form-item>\n      <el-form-item\n        label="需要登录"\n        class="sort">\n        <el-radio-group\n          v-model="editFrom.need_login">\n          <el-radio :label="true">是</el-radio>\n          <el-radio :label="false">否</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        class="sort"\n        prop="sort">\n        <el-input\n          v-model.number="editFrom.sort"\n          style="width: 70%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'editFrom\')">提交</el-button>\n        <el-button @click="cancel">取消</el-button>\n      </el-form-item>\n    </el-form>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      append-to-body\n      title="自定义服务"\n      width="40%"\n      style="padding: 20px 50px 20px 50px"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        @submit-custom-event="submitCustomEvent"\n        @cancel-custom-event="cancelCustomEvent"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/eventApi\'\nimport uploadHeaders from \'@/mixins\'\nimport CustomEvent from \'@/components/manageEvent/customEvent\'\nexport default {\n  components: {\n    CustomEvent\n  },\n  mixins: [uploadHeaders],\n  props: {\n    settingActivityId: {\n      type: String,\n      default: \'0\'\n    }\n  },\n  data () {\n    var checkUrl = (rule, value, callback) => {\n      // eslint-disable-next-line\n      var match =  /^((ht|f)tps?):\\/\\/([\\w\\-]+(\\.[\\w\\-]+)*\\/)*[\\w\\-]+(\\.[\\w\\-]+)*\\/?(\\?([\\w\\-\\.,@?^=%&:\\/~\\+#]*)+)?/\n      if (!match.test(value)) {\n        return callback(new Error(\'请输入正确的地址\'))\n      }\n      callback()\n    }\n    let checkChannelNameLength = (rule, value, callback) => {\n      if (value.length > 10) {\n        return callback(new Error(\'频道名称长度不能超过10\'))\n      } else {\n        return callback()\n      }\n    }\n    return {\n      editFrom: {\n        activity_name: \'\',\n        sort: 0,\n        head_img: \'\',\n        app_url: \'\',\n        manager_url: \'\',\n        type_name: \'\',\n        state: \'\',\n        description: \'\',\n        fixed: \'\',\n        typeid: \'\',\n        liveRange: [],\n        need_login: true\n      },\n      rules: {\n        activity_name: [\n          { required: true, message: \'请输入频道名称\', trigger: \'blur\' },\n          { validator: checkChannelNameLength, trigger: \'change\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          { type: \'number\', message: \'排序必须为数字\' }\n        ],\n        head_img: [\n          { required: true, message: \'请上传图片\', trigger: \'blur\' }\n        ],\n        app_url: [\n          { validator: checkUrl, trigger: \'blur\' }\n        ]\n      },\n      eventTypeList: [],\n      isRefresh: true,\n      customTypeId: \'0999\',\n      dialogVisible: false,\n      componentName: \'\'\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getEditInfo()\n    this.getActivityType()\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/subChannel/list\') {\n      to.meta.refresh = this.isRefresh\n    } else if (to.path === \'/subChannel/create\') {\n      this.$root.eventHub.$emit(\'reset-options\')\n    }\n    next()\n  },\n  methods: {\n    cancel () {\n      this.$emit(\'closeDialog\')\n    },\n    getEditInfo () {\n      Actions.getActivityByID({\n        \'activity\': {\n          \'activityid\': this.settingActivityId\n        }\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.editFrom.liveRange = []\n          this.editFrom.activity_name = data.activity_name\n          this.editFrom.sort = data.sort\n          this.editFrom.head_img = data.head_img\n          this.editFrom.app_url = data.app_url\n          this.editFrom.manager_url = data.manager_url\n          this.editFrom.type_name = data.type_name\n          this.editFrom.state = data.state\n          this.editFrom.typeid = data.typeid\n          this.editFrom.need_login = data.need_login\n          this.editFrom.liveRange.push(new Date(data.expiry_date_start))\n          this.editFrom.liveRange.push(new Date(data.expiry_date_end))\n        }\n      })\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.eventTypeList.forEach((item, index, arr) => {\n            if (item.value === this.editFrom.typeid) {\n              this.editFrom.type_name = item.label\n            }\n          })\n          Actions.editActivity({\n            \'activity\': {\n              \'activityid\': this.settingActivityId,\n              \'activity_name\': this.editFrom.activity_name,\n              \'head_img\': this.editFrom.head_img,\n              \'app_url\': this.editFrom.app_url,\n              \'manager_url\': this.editFrom.manager_url,\n              \'typeid\': this.editFrom.typeid,\n              \'type_name\': this.editFrom.type_name,\n              \'state\': this.editFrom.state,\n              \'expiry_date_start\': this.editFrom.liveRange[0].getTime(),\n              \'expiry_date_end\': this.editFrom.liveRange[1].getTime(),\n              \'sort\': this.editFrom.sort,\n              \'need_login\': this.editFrom.need_login\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$emit(\'closeDialog\')\n              this.$notify({\n                title: \'通知\',\n                message: \'编辑成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.editFrom.head_img = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    /** 获取活动类别 **/\n    getActivityType () {\n      this.eventTypeList = []\n      Actions.getActivityType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (item.type_name === this.editFrom.typeid) {\n              /** 默认选择一个类型 **/\n              this.editFrom.typeid = item.typeid\n            }\n            let newItem = {}\n            newItem.label = item.type_name\n            newItem.value = item.typeid\n            this.eventTypeList.push(newItem)\n          })\n          let newItem = {}\n          newItem.label = \'自定义\'\n          newItem.value = this.customTypeId\n          this.eventTypeList.push(newItem)\n        }\n      })\n    },\n    handleEventType (typeid) {\n      if (typeid === this.customTypeId) {\n        this.handleCustomClick()\n      }\n    },\n    /** 点击自定义的处理逻辑 **/\n    handleCustomClick () {\n      this.dialogVisible = true\n      this.componentName = \'CustomEvent\'\n    },\n    closeDialog () {\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    submitCustomEvent (customEventName) {\n      this.closeDialog()\n      this.getActivityType()\n      this.editFrom.typeid = customEventName\n    },\n    cancelCustomEvent () {\n      this.closeDialog()\n      // this.createFrom.typeid = \'\'\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .event-edit .sort span{\n    color: #909090;\n  }\n  .event-edit .el-form-item {\n    margin-left: 35px;\n    width: 65%;\n  }\n</style>\n'],sourceRoot:""}])},lnrM:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.user-list .el-form--inline .el-form-item__content {\n  width: 65%;\n}\n.user-list .search-form-container .el-form-item {\n  width: 27%;\n  margin-left: -15px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageUser/src/components/manageUser/userList.vue"],names:[],mappings:";AA2SA;EACA,WAAA;CACA;AACA;EACA,WAAA;EACA,mBAAA;CACA",file:"userList.vue",sourcesContent:["<template>\n  <div class=\"user-list\">\n    <div>\n      <circle-title\n        title-name=\"用户列表\"\n        class=\"cicle-controller\"\n      />\n      <div class=\"search-form-container\">\n        <el-form\n          :inline=\"true\"\n          :model=\"ruleForm\"\n          class=\"demo-form-inline\">\n          <el-form-item label=\"用户名\">\n            <el-input\n              v-model=\"ruleForm.username\"\n              clearable/>\n          </el-form-item>\n          <el-form-item label=\"注册手机号\">\n            <el-input\n              v-model=\"ruleForm.phone\"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label=\"状态\"\n            class=\"search-left\">\n            <el-select\n              v-model=\"ruleForm.state\"\n              placeholder=\"\"\n              @change=\"getAppUserList\">\n              <el-option\n                value=\"\"\n                label=\"全部\"/>\n              <el-option\n                :value=\"1\"\n                label=\"启用\"/>\n              <el-option\n                :value=\"0\"\n                label=\"停用\"/>\n            </el-select>\n          </el-form-item>\n          <el-button\n            type=\"primary\"\n            style=\"margin-left: -30px\"\n            @click=\"getAppUserList\">\n            查询\n            <i class=\"el-icon-search el-icon--right\"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class=\"table-list\">\n      <el-table\n        ref=\"channelTable\"\n        :data=\"tableData\"\n        stripe\n        class=\"whole-table\"\n        min-height=\"400\">\n        <el-table-column\n          v-for=\"(item, index) in tableHeader\"\n          :key=\"index\"\n          :prop=\"item.prop\"\n          :label=\"item.label\"\n          :width=\"item.width\"\n          :formatter=\"item.formatter\"\n          align=\"center\"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed=\"right\"\n          label=\"操作\"\n          align=\"center\"\n          width=\"250\">\n          <template slot-scope=\"scope\">\n            <span>\n              <span\n                :class=\"['user', scope.row.state !== 1 ? 'disable': '']\"\n                @click=\"toggleCount(scope.row)\">\n                {{ scope.row.state !== 1 ? '启用账号': '停用账号' }}\n              </span>\n              <span\n                class=\"user reset-password\"\n                @click=\"resetPassword(scope.row)\">\n                重置密码\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"pagination\">\n        <el-pagination\n          :total=\"total\"\n          :page-sizes=\"[10, 20, 30, 40]\"\n          background\n          layout=\"total, sizes, prev, pager, next\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/systemUsersApi'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      ruleForm: {\n        username: '',\n        phone: '',\n        state: ''\n      },\n      tableHeader: [\n        {\n          prop: 'nickname',\n          label: '昵称'\n        },\n        {\n          prop: 'head_url',\n          label: '头像',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\"_blank\"><img src={cellValue} class=\"user-head-icon\"/></a>\n          }\n        },\n        {\n          prop: 'phone',\n          label: '电话'\n        },\n        {\n          prop: 'sex',\n          label: '性别',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 1) {\n              return '男'\n            } else {\n              return '女'\n            }\n          }\n        },\n        {\n          prop: 'age',\n          label: '年龄'\n        },\n        {\n          prop: 'createtime',\n          label: '注册日期',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters['FormatDate'](cellValue, 'yyyy-MM-dd hh:mm')\n          }\n        },\n        {\n          prop: 'state',\n          label: '状态',\n          formatter: (row, column, cellValue, index) => {\n            if (parseInt(cellValue) === 1) {\n              return '启用'\n            } else {\n              return '停用'\n            }\n          }\n        }\n      ],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0\n    }\n  },\n  watch: {\n    'ruleForm.username' (val) {\n      this.getAppUserList()\n    },\n    'ruleForm.phone' (val) {\n      this.getAppUserList()\n    }\n  },\n  mounted () {\n    /** 获取用户列表 **/\n    this.getAppUserList()\n    /** 获取频道类型 **/\n  },\n  methods: {\n    getAppUserList () {\n      Actions.getAppUserList({\n        'pageNo': this.pageNo,\n        'pageSize': this.pageSize,\n        'nickname': this.ruleForm.username,\n        'phone': this.ruleForm.phone,\n        'state': this.ruleForm.state\n      }).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getAppUserList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getAppUserList()\n    },\n    /** 停用, 启用账号 **/\n    toggleCount (row) {\n      if (row.state === 1) {\n        this.$confirm('确定要停用账号?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.appUserUpdateState(row.userid, 0)\n        }).catch(() => {\n        })\n      } else {\n        this.$confirm('确定要启用账号?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.appUserUpdateState(row.userid, 1)\n        }).catch(() => {\n        })\n      }\n    },\n    appUserUpdateState (userid, state) {\n      Actions.appUserUpdateState({\n        'appUser': {\n          'userid': userid,\n          'state': state\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.getAppUserList()\n        }\n      })\n    },\n    /** 重置密码 **/\n    resetPassword (row) {\n      this.$confirm('确定要重置密码?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        Actions.resetPassword({\n          'appUser': {\n            'userid': row.userid\n          }\n        }).then(res => {\n          if (res.data.status) {\n            this.$message({\n              type: 'success',\n              message: '重置成功!'\n            })\n          }\n        })\n      }).catch(() => {\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: flex-end;\n  }\n  .user{\n    display: inline-block;\n    height: 20px;\n    border:1px solid #F00808;\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color:#F00808;\n    width: 60px;\n    cursor: pointer;\n  }\n  .reset-password{\n    border: 1px solid #1883FF;\n    color:#1883FF;\n    width: 60px;\n  }\n  .disable{\n    border: 1px solid #694EFF;\n    color:#694EFF;\n    width: 60px;\n  }\n  .user-head-icon{\n    width: 50px;\n    height: 50px;\n    border-radius: 100%;\n  }\n</style>\n<style>\n  .user-list .el-form--inline .el-form-item__content {\n    width: 65%;\n  }\n  .user-list .search-form-container .el-form-item {\n    width: 27%;\n    margin-left: -15px;\n  }\n</style>\n"],sourceRoot:""}])},"luw+":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"audit.vue",sourceRoot:""}])},"m+/L":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"settingManu.vue",sourceRoot:""}])},m26c:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-dialog__header{\n  padding: 13px 30px 13px;\n  border-bottom: 1px solid #C0BEFF;\n  background-color: #F7FAFF;\n}\n.el-dialog__title {\n  line-height: 17px;\n  font-size: 17px;\n  color: #303133;\n}\n.el-dialog__headerbtn {\n  top: 13px;\n}\n.el-dialog__body {\n  padding: 20px 60px 0px 60px;\n}\n.addUser .el-form {\n  margin-top: 15px;\n}\n.addUser .el-form-item {\n  width: 100%;\n}\n.addUser .submit .el-form-item__content{\n  float: right;\n  width: 160px;\n}\n.select-role {\n  border: 1px solid #694EFF;\n  background-color: #EBF5FF;\n  color: #694EFF;\n  padding:8px 22px 8px 22px;\n  border-radius: 3px;\n}\n.addUser .el-select {\n  width: 100%;\n}\n.table-lists {\n  margin-top: 10px;\n  margin-bottom: 20px;\n}\n.table-lists thead tr th {\n  background: #716BFF;\n  color: white;\n  border-color:#716BFF ;\n  text-align: center;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageRole/src/components/manageRole/addRole.vue"],names:[],mappings:";AA+JA;EACA,wBAAA;EACA,iCAAA;EACA,0BAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,4BAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,aAAA;EACA,aAAA;CACA;AACA;EACA,0BAAA;EACA,0BAAA;EACA,eAAA;EACA,0BAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,iBAAA;EACA,oBAAA;CACA;AACA;EACA,oBAAA;EACA,aAAA;EACA,sBAAA;EACA,mBAAA;CACA",file:"addRole.vue",sourcesContent:['<template>\n  <div class="addUser">\n    <el-form\n      ref="ruleForm"\n      :model="ruleForm"\n      :rules="rules">\n      <el-form-item\n        label="角色名称"\n        prop="role_name">\n        <el-input\n          v-model.trim="ruleForm.role_name"\n          style="width:260px;"\n          clearable/>\n      </el-form-item>\n    </el-form>\n    <div class="table-lists">\n      <p style="margin-bottom: 10px;">权限配置：</p>\n      <tree-transfer\n        :title="title"\n        :from_data="fromData"\n        :to_data="toData"\n        :default-props="{label:\'label\'}"\n        :mode="mode"\n        :filter="false"\n        open-all\n        height="440px"\n        @addBtn = "addAuth"\n        @removeBtn = "removeAuth"/>\n    </div>\n    <el-form-item\n      class="submit"\n      style="width:100%">\n      <el-button\n        @click="cancel">取消</el-button>\n      <el-button\n        type="primary"\n        @click="onSubmit(\'ruleForm\')">提交</el-button>\n    </el-form-item>\n  </div>\n</template>\n<script>\nimport treeTransfer from \'el-tree-transfer\'\nimport * as Actions from \'@/api/systemUsersApi\'\nexport default {\n  name: \'AddRole\',\n  components: {\n    treeTransfer\n  },\n  data () {\n    return {\n      ruleForm: {\n        role_name: \'\'\n      },\n      mode: \'transfer\', // transfer addressList\n      fromData: [],\n      toData: [],\n      title: [\'全部权限\', \'已选择权限\'],\n      rules: {\n        role_name: [\n          { required: true, message: \'请输入角色名称\', trigger: \'blur\' }\n        ]\n      },\n      idArr: []\n    }\n  },\n  mounted () {\n    /** 获取树 **/\n    this.getTreePermission()\n  },\n  methods: {\n    getTreePermission () {\n      Actions.getTreePermission().then(res => {\n        if (res.data.status) {\n          this.fromData = res.data.result\n        }\n      })\n    },\n    getAllSelectedId () {\n      this.toData.forEach((item, index, arr) => {\n        this.idArr.push(item.id)\n        if (item.children.length > 0) {\n          this.getChildrenId(item.children)\n        }\n      })\n    },\n    getChildrenId (arr) {\n      arr.forEach((item, index, arr) => {\n        this.idArr.push(item.id)\n        if (item.children.length > 0) {\n          this.getChildrenId(item.children)\n        }\n      })\n    },\n    onSubmit (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.toData.length <= 0) {\n            this.$notify({\n              type: \'error\',\n              title: \'错误\',\n              message: \'请为角色配置权限\'\n            })\n            return false\n          }\n          this.idArr = []\n          this.getAllSelectedId()\n          Actions.addRole({\n            \'role\': {\n              \'name\': this.ruleForm.role_name,\n              \'permissionidList\': this.idArr\n            }\n          }).then(res => {\n            console.log(res)\n            if (res.data.status) {\n              this.$notify({\n                type: \'success\',\n                title: \'成功\',\n                message: \'添加角色成功\'\n              })\n              this.$emit(\'closeDialog\')\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    cancel () {\n      this.$emit(\'closeDialog\')\n    },\n    addAuth (fromData, toData, obj) {\n      this.toData = toData\n    },\n    removeAuth (fromData, toData, obj) {\n      this.toData = toData\n    }\n  }\n\n}\n<\/script>\n\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n  .addUser .el-checkbox {\n    float: left;\n  }\n  .addUser .check-all {\n    margin-right: 30px;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .addUser .el-form {\n    margin-top: 15px;\n  }\n  .addUser .el-form-item {\n    width: 100%;\n  }\n  .addUser .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .addUser .el-select {\n    width: 100%;\n  }\n  .table-lists {\n    margin-top: 10px;\n    margin-bottom: 20px;\n  }\n  .table-lists thead tr th {\n    background: #716BFF;\n    color: white;\n    border-color:#716BFF ;\n    text-align: center;\n  }\n</style>\n'],sourceRoot:""}])},m3c8:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.slide .el-form--inline .el-form-item__content {\n  width: 60%;\n}\n.slide .search-form-container .el-form-item {\n  width: 25%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSlide/src/components/manageSlide/slideList.vue"],names:[],mappings:";AA+dA;EACA,WAAA;CACA;AACA;EACA,WAAA;CACA",file:"slideList.vue",sourcesContent:['<template>\n  <div class="slide">\n    <div>\n      <circle-title\n        title-name="轮播图管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="slideForm"\n          class="demo-form-inline">\n          <el-form-item label="标题">\n            <el-input\n              v-model="slideForm.chart_name"\n              clearable/>\n          </el-form-item>\n          <el-form-item label="归属频道">\n            <el-select\n              v-model="slideForm.channelid"\n              filterable\n              clearable\n              placeholder=""\n              @change="searchSlide"\n              @clear="searchSlide">\n              <el-option\n                v-for="(item, index) in channelTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="slideForm.state"\n              placeholder=""\n              @change="searchSlide">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="1"\n                label="待上线"/>\n              <el-option\n                :value="2"\n                label="已上线"/>\n              <el-option\n                :value="3"\n                label="过期"/>\n              <el-option\n                :value="0"\n                label="停用"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            style="margin-left: -29px">\n            <el-date-picker\n              :title="slideForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="slideForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchSlide"/>\n          </el-form-item>\n          <el-form-item\n            class="slide-end-date-item"\n            label="结束时间"\n            style="margin-left: 29px">\n            <el-date-picker\n              :title="slideForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="slideForm.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchSlide"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 40px"\n            @click="searchSlide">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/manageSlide/create">\n            <el-button type="primary">\n              添加轮播图\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="slideTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="修改状态"\n              placement="top">\n              <el-button\n                type="text"\n                size="small"\n                icon="el-icon-remove-outline"\n                @click="changeState(scope.row)"/>\n            </el-tooltip>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/slideApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      slideForm: {\n        chart_name: \'\',\n        channelid: \'\',\n        state: \'\',\n        region: \'\',\n        daterange: [],\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'chart_name\',\n          label: \'图片标题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'创建日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'update\' +\n            \'time\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'channel_name\',\n          label: \'归属频道\'\n        },\n        {\n          prop: \'chart_head_url\',\n          label: \'轮播图图片\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'jump_type\',\n          label: \'关联内容\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 1 && row.title) {\n              return \'稿件-\' + row.title\n            } else if (cellValue === 2 && row.special_name) {\n              return \'专题-\' + row.special_name\n            } else {\n              return \'无\'\n            }\n          }\n        },\n        {\n          prop: \'expiry_date_start\',\n          label: \'有效期\',\n          formatter: (row, column, cellValue, index) => {\n            let startDate = this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n            let endDate = this.$options.filters[\'FormatDate\'](row.expiry_date_end, \'yyyy-MM-dd hh:mm\')\n            return startDate + \'至\' + endDate\n          }\n        },\n        {\n          prop: \'showState\',\n          label: \'状态\'\n        },\n        {\n          prop: \'sort\',\n          label: \'排序\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' class=\'self-sort\' id={index} value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      channelTypeList: [],\n      selectChartId: \'\' // 点击排序行的channelid\n    }\n  },\n  watch: {\n    \'slideForm.chart_name\' () {\n      this.searchSlide()\n    }\n  },\n  mounted () {\n    this.getSlideList()\n    this.getListUsableChannel()\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getSlideList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageSlide/create\') {\n      this.resetOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetOptions () {\n      this.slideForm = {\n        chart_name: \'\',\n        channelid: \'\',\n        state: \'\',\n        region: \'\',\n        daterange: [],\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\'\n      }\n      this.pageNo = 1\n      this.getSlideList()\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchSlide()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getSlideList()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      if (event.target.classList.contains(\'sort-container\')) {\n        if (row.state !== 1) {\n          let id = event.target.dataset.id\n          if (id) {\n            this.clickCellIndex = parseInt(id)\n          }\n          this.$nextTick(() => {\n            let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n            inputEles.forEach(element => {\n              if (element) {\n                /** 将channel_id存储起来标识单元行 **/\n                this.selectChartId = row.chartid\n                element.focus()\n                element.onkeyup = (e) => {\n                  if (element.value) {\n                    this.sortValue = parseInt(element.value)\n                  }\n                }\n              }\n            })\n          })\n        } else {\n          this.$message({\n            type: \'error\',\n            message: \'启用状态下不能排序!\'\n          })\n        }\n      }\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectChartId !== row.chartid) return false\n      /** 修改排序 **/\n      Actions.updateSlideSort({\n        \'rotationChart\': {\n          \'chartid\': row.chartid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getSlideList()\n          this.sortValue = -1\n        }\n      })\n    },\n    getSlideList () {\n      let timeStart = this.slideForm.startDate !== null ? new Date(this.slideForm.startDate).getTime() : null\n      let timeEnd = this.slideForm.endDate !== null ? new Date(this.slideForm.endDate).getTime() : null\n      Actions.getSlideList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.slideForm.channelid,\n        \'chart_name\': this.slideForm.chart_name,\n        \'state\': this.slideForm.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    /** 修改状态 **/\n    changeState (row) {\n      let state = 0\n      if (row.state === 1) {\n        state = 0\n      } else if (row.state === 0) {\n        state = 1\n      }\n      Actions.updateSlideState({\n        \'rotationChart\': {\n          \'chartid\': row.chartid,\n          \'state\': state\n        }\n      }).then((res) => {\n        if (res.status) {\n          if (state === 0) {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为停用\'\n            })\n          } else {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为启用\'\n            })\n          }\n          this.getSlideList()\n        }\n      })\n    },\n    /** 删除轮播图 **/\n    handleDelete (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.chart_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteSlide({\n            \'rotationChart\': {\n              \'chartid\': row.chartid\n            }\n          }).then((res) => {\n            if (res.data.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getSlideList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可删除!\'\n        })\n      }\n    },\n    handleEdit (row) {\n      if (row.state !== 1) {\n        sessionStorage.setItem(\'chartid\', row.chartid)\n        this.$router.push({path: \'/manageSlide/edit\'})\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可编辑!\'\n        })\n      }\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    searchSlide () {\n      this.pageNo = 1\n      this.$options.filters[\'swapTime\'](this.slideForm)\n      this.getSlideList()\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: flex-end;\n  }\n  .slide-end-date-item{\n    margin-left: -29px;\n  }\n</style>\n<style>\n  .slide .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .slide .search-form-container .el-form-item {\n    width: 25%;\n  }\n</style>\n'],sourceRoot:""}])},nIs1:function(e,n,t){var a=t("Dydx");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("2a031712",a,!1,{})},"nK0+":function(e,n,t){var a=t("KAjp");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("4d8019b6",a,!1,{})},ne5Z:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-container[data-v-55d58161]{\n  margin-bottom: 32px;\n  margin-left: 39px;\n}\n.border-circle[data-v-55d58161]{\n  width:13px;\n  height: 13px;\n  border-radius: 100%;\n  border: 3px solid rgba(105, 78, 255, 1);\n  display: inline-block;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.title-name[data-v-55d58161]{\n  color: rgba(71, 71, 71, 1);\n  font-size:18px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/commons/src/components/commons/circleTitle.vue"],names:[],mappings:";AAsBA;EACA,oBAAA;EACA,kBAAA;CACA;AACA;EACA,WAAA;EACA,aAAA;EACA,oBAAA;EACA,wCAAA;EACA,sBAAA;EACA,+BAAA;UAAA,uBAAA;CACA;AACA;EACA,2BAAA;EACA,eAAA;CACA",file:"circleTitle.vue",sourcesContent:['<template>\n  <div class="cicle-container">\n    <span class="border-circle" />\n    <span class="title-name">\n      {{ titleName }}\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \'CircleTitle\',\n  props: {\n    titleName: {\n      type: String,\n      default: \'管理\'\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n  .cicle-container{\n    margin-bottom: 32px;\n    margin-left: 39px;\n  }\n  .border-circle{\n    width:13px;\n    height: 13px;\n    border-radius: 100%;\n    border: 3px solid rgba(105, 78, 255, 1);\n    display: inline-block;\n    box-sizing: border-box;\n  }\n  .title-name{\n    color: rgba(71, 71, 71, 1);\n    font-size:18px;\n  }\n</style>\n'],sourceRoot:""}])},nkiH:function(e,n,t){var a=t("SAAO");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("6225e57e",a,!1,{})},nvBV:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-6a299334] {\n  margin-top: 4%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageTopic/src/components/manageTopic/topicCreate.vue"],names:[],mappings:";AA4NA;EACA,eAAA;CACA",file:"topicCreate.vue",sourcesContent:['<template>\n  <div class="topic create">\n    <circle-title\n      title-name="专题新增"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="ruleForm"\n      :model="ruleForm"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="专题标题"\n        prop="special_name">\n        <el-input v-model.trim="ruleForm.special_name"/>\n      </el-form-item>\n      <el-form-item\n        class="item"\n        label="图标配置"\n        prop="special_head_url">\n        <el-upload\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :show-file-list="false"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="ruleForm.special_head_url"\n            :src="ruleForm.special_head_url"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="归属频道"\n        prop="channelBelong">\n        <el-select\n          v-model="ruleForm.channelid"\n          filterable\n          placeholder="">\n          <el-option\n            v-for="(item, index) in listUsableChannel"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="有效期"\n        class="indate"\n        required>\n        <el-date-picker\n          v-model="ruleForm.indate"\n          :clearable="false"\n          :disabled="isChooseDate"\n          style="width:100%"\n          type="datetimerange"\n          format="yyyy-MM-dd HH:mm"\n          range-separator="至"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"/>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        class="sort"\n        prop="sort">\n        <el-input\n          v-model.number="ruleForm.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item\n        label="状态选择">\n        <el-select\n          v-model="ruleForm.state"\n          placeholder="请选择">\n          <el-option\n            :value="1"\n            label="启用"/>\n          <el-option\n            :value="0"\n            label="停用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'ruleForm\')">提交</el-button>\n        <router-link to="/manageTopic/list">\n          <el-button>取消</el-button>\n        </router-link>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/topicApi\'\nimport uploadHeaders from \'@/mixins\'\nexport default {\n  components: {\n    CircleTitle\n  },\n\n  mixins: [uploadHeaders],\n  \n  data () {\n    return {\n      ruleForm: {\n        sort: 0,\n        channelid: \'\',\n        special_name: \'\',\n        special_head_url: \'\',\n        indate: [new Date(), new Date()],\n        istop: 0,\n        state: 0\n      },\n      isChooseDate: false,\n      rules: {\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          { type: \'number\', message: \'排序必须为数字\' }\n        ],\n        special_name: [\n          { required: true, message: \'请输入专题名称\', trigger: \'blur\' },\n          { min: 0, max: 64, message: \'标题限定64个字符内\', trigger: \'change\' }\n        ],\n        special_head_url: [\n          { required: true, message: \'请上传图片\', trigger: \'blur\' }\n        ]\n      },\n      listUsableChannel: []\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getListUsableChannel()\n  },\n  methods: {\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.addSpecial({\n            \'special\': {\n              \'special_name\': this.ruleForm.special_name,\n              \'special_head_url\': this.ruleForm.special_head_url,\n              \'channelid\': this.ruleForm.channelid,\n              \'state\': this.ruleForm.state,\n              \'expiry_date_start\': new Date(this.ruleForm.indate[0]).getTime(),\n              \'expiry_date_end\': new Date(this.ruleForm.indate[1]).getTime(),\n              \'sort\': this.ruleForm.sort\n            }\n          }).then((res) => {\n            if (res.status) {\n              if (res.status === 200) {\n                this.$router.push({path: \'/manageTopic/list\'})\n                this.$notify({\n                  title: \'通知\',\n                  message: \'添加成功\',\n                  type: \'success\'\n                })\n              }\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.ruleForm.special_head_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'上传图片只能是 JPG 格式!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        if (res.data.status) {\n          let result = res.data.result\n          result.forEach((item, index, arr) => {\n            if (index === 0) {\n              this.ruleForm.channelid = item.channelid\n            }\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.listUsableChannel.push(newItem)\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n</style>\n'],sourceRoot:""}])},o19p:function(e,n,t){var a=t("DIUS");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("7f46a243",a,!1,{})},o2SZ:function(e,n,t){var a=t("ZaQw");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("78adee6a",a,!1,{})},o344:function(e,n,t){var a=t("luw+");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("18e6dfa4",a,!1,{})},oUVL:function(e,n,t){var a=t("YNx0");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("0b8feb5a",a,!1,{})},oq7i:function(e,n){},p369:function(e,n){},pCyP:function(e,n,t){var a=t("nvBV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("f46113de",a,!1,{})},"peo/":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-dialog__header{\n   padding: 13px 30px 13px;\n   border-bottom: 1px solid #C0BEFF;\n   background-color: #F7FAFF;\n}\n.el-dialog__title {\n   line-height: 17px;\n   font-size: 17px;\n   color: #303133;\n}\n.el-dialog__headerbtn {\n   top: 13px;\n}\n.el-dialog__body {\n   padding: 20px 60px;\n}\n.addUrl .el-form-item {\n   margin-left: 0px;\n   margin-bottom: 10px;\n}\n.addUrl .el-form {\n   margin-top: 15px;\n}\n.addUrl .el-date-editor{\n   width: 85%;\n}\n.addUrl .el-form-item {\n   width: 30%;\n   margin-right: 3%;\n}\n.addUrl .date-left {\n   left: 0px;\n}\n.addUrl .el-range-editor .el-range-input{\n   width:50%;\n}\n.addUrl .btn-container .el-form-item__content {\n   width: 100%;\n}\n.el-tooltip__popper{\n   max-width: 300px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSlide/src/components/manageSlide/addManuscript.vue"],names:[],mappings:";AAiaA;GACA,wBAAA;GACA,iCAAA;GACA,0BAAA;CACA;AACA;GACA,kBAAA;GACA,gBAAA;GACA,eAAA;CACA;AACA;GACA,UAAA;CACA;AACA;GACA,mBAAA;CACA;AACA;GACA,iBAAA;GACA,oBAAA;CACA;AACA;GACA,iBAAA;CACA;AACA;GACA,WAAA;CACA;AACA;GACA,WAAA;GACA,iBAAA;CACA;AACA;GACA,UAAA;CACA;AACA;GACA,UAAA;CACA;AACA;GACA,YAAA;CACA;AACA;GACA,iBAAA;CACA",file:"addManuscript.vue",sourcesContent:['<template>\n  <div class="addUrl">\n    <el-form\n      :inline="true"\n      :model="manuScript"\n      size="small"\n      class="demo-form-inline">\n      <el-form-item label="稿件主题">\n        <el-input\n          v-model="manuScript.title"\n          clearable/>\n      </el-form-item>\n      <el-form-item label="归属频道">\n        <el-select\n          v-model="manuScript.channelid"\n          filterable\n          clearable\n          placeholder=""\n          @change="searchManuScript"\n          @clear="searchManuScript">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item label="归属专题">\n        <el-select\n          v-model="manuScript.specialid"\n          filterable\n          clearable\n          placeholder=""\n          @change="searchManuScript"\n          @clear="searchManuScript">\n          <el-option\n            v-for="(item, index) in specialList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="开始时间"\n        class="date-left">\n        <el-date-picker\n          :title="manuScript.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n          v-model="manuScript.startDate"\n          type="datetime"\n          format="yyyy-MM-dd HH:mm"\n          placeholder="选择时间"\n          @change="searchManuScript"/>\n      </el-form-item>\n      <el-form-item\n        label="结束时间"\n        class="date-left">\n        <el-date-picker\n          :title="manuScript.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n          v-model="manuScript.endDate"\n          type="datetime"\n          format="yyyy-MM-dd HH:mm"\n          placeholder="选择时间"\n          @change="searchManuScript"/>\n      </el-form-item>\n      <el-form-item class="btn-container">\n        <el-button\n          type="primary"\n          @click="searchManuScript">\n          查询\n          <i class="el-icon-search el-icon--right"/>\n        </el-button>\n      </el-form-item>\n    </el-form>\n    <div class="table-list">\n      <el-table\n        ref="addManu"\n        :data="tableData"\n        stripe\n        size="small "\n        class="whole-table"\n        min-height="400"\n        @select="select"\n        @select-all="selectAll">\n        <el-table-column\n          type="selection"\n          align="center"\n          width="55"/>\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="归属频道"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.articleChannelList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :content="showChannelAllName(scope.row.articleChannelList)"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <el-tag\n                v-for="(item, index) in scope.row.articleChannelList"\n                :key="index"\n                size="mini">\n                {{ channelTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="归属专题"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.articleSpecialList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :visible-arrow="false"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <div slot="content">{{ showSpecialAllName(scope.row.articleSpecialList) }}</div>\n              <el-tag\n                v-for="(item, index) in scope.row.articleSpecialList"\n                :key="index"\n                size="mini">\n                {{ specialTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="置顶状态"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="!scope.row.top"\n              size="mini"\n              class="setPointer">\n              未置顶\n            </el-tag>\n            <el-tag\n              v-else\n              size="mini"\n              class="setPointer">\n              已置顶\n            </el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-button\n          type="primary"\n          size="small"\n          @click="notifyParentSelectedRow">确定</el-button>\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/manuScriptApi\'\nexport default {\n  name: \'AddManuscript\',\n  data () {\n    return {\n      manuScript: {\n        channel_name: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\',\n        channelid: \'\',\n        title: \'\',\n        specialid: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'title\',\n          label: \'稿件主题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'推送日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'article_url\',\n          label: \'稿件内容\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>查看稿件内容</a>\n          }\n        }\n      ],\n      channelTypeList: [], // 所属频道列表\n      specialList: [],\n      tableData: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      selectRow: {} // 已选择的行\n    }\n  },\n  computed: {\n    showNullTag () {\n      return function (arr) {\n        if (!arr) {\n          return true\n        } else if (arr.length <= 0) {\n          return true\n        } else {\n          return false\n        }\n      }\n    },\n    channelTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.channel_name === \'\') {\n            return \'无\'\n          } else {\n            return content.channel_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    specialTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.special_name === \'\') {\n            return \'无\'\n          } else {\n            return content.special_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    showChannelAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += item.channel_name + \',\'\n          } else {\n            title += item.channel_name\n          }\n        })\n        return title\n      }\n    },\n    showSpecialAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += \'《\' + item.special_name + \'》\' + \'\'\n          } else {\n            title += \'《\' + item.special_name + \'》\'\n          }\n        })\n        return title\n      }\n    }\n  },\n  watch: {\n    \'manuScript.title\' () {\n      this.searchManuScript()\n    }\n  },\n  mounted () {\n    this.getMunuScriptList()\n    this.getListUsableChannel()\n    this.getListUsableSpecial()\n  },\n  methods: {\n    /** 获取稿件列表 **/\n    getMunuScriptList () {\n      Actions.getManuScriptList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'state\': 1\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取专题列表 **/\n    getListUsableSpecial () {\n      Actions.getListUsableSpecial().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.special_name\n            newItem.value = item.specialid\n            this.specialList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 搜索稿件 **/\n    searchManuScript () {\n      this.$options.filters[\'swapTime\'](this.manuScript)\n      let timeStart = this.manuScript.startDate !== null ? new Date(this.manuScript.startDate).getTime() : null\n      let timeEnd = this.manuScript.endDate !== null ? new Date(this.manuScript.endDate).getTime() : null\n      Actions.getManuScriptList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.manuScript.channelid,\n        \'specialid\': this.manuScript.specialid,\n        \'title\': this.manuScript.title,\n        \'state\': 1,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    onSubmit () {\n      console.log(\'submit!\')\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchManuScript()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.searchManuScript()\n    },\n    /** 单选 **/\n    select (selection, row) {\n      this.selectRow = row\n      if (selection.length > 1) {\n        selection.shift()\n      }\n    },\n    /** 全选 **/\n    selectAll (selection) {\n      this.$refs.addManu.clearSelection()\n      this.selectRow = {}\n    },\n    /** 通知父组件选择了哪行专题 **/\n    notifyParentSelectedRow () {\n      this.$emit(\'selected-row\', this.selectRow)\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .table-list {\n    min-height: 400px;\n    margin-top: 10px;\n    padding: 0px;\n  }\n  .whole-table {\n    width: 100%;\n    border: 1px solid rgba(218, 222, 223, 1);\n    min-height: 25vw;\n  }\n  .pagination {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 10px;\n  }\n  .addUrl .btn-container {\n    width: 23% !important;\n    left: 0px;\n  }\n\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px;\n  }\n  .addUrl .el-form-item {\n    margin-left: 0px;\n    margin-bottom: 10px;\n  }\n  .addUrl .el-form {\n    margin-top: 15px;\n  }\n  .addUrl .el-date-editor{\n    width: 85%;\n  }\n  .addUrl .el-form-item {\n    width: 30%;\n    margin-right: 3%;\n  }\n  .addUrl .date-left {\n    left: 0px;\n  }\n  .addUrl .el-range-editor .el-range-input{\n    width:50%;\n  }\n  .addUrl .btn-container .el-form-item__content {\n    width: 100%;\n  }\n .el-tooltip__popper{\n    max-width: 300px;\n  }\n</style>\n'],sourceRoot:""}])},pfQI:function(e,n,t){var a=t("m+/L");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5f20afec",a,!1,{})},pt52:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n}\n.search-form-container .btn-container .el-icon--right{\n    margin: 0;\n}\n.custom-dialog .el-dialog__header{\n  /*padding: 0;*/\n  border-bottom: 1px solid rgba(192,190,255,1);\n}\n.el-tooltip__popper{\n    max-width: 300px;\n}\n.manuscript .el-form--inline .el-form-item__content {\n    width: 60%;\n}\n.manuscript .search-form-container .el-form-item {\n    width: 20%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageManuscript/src/components/manageManuscript/manageManuscriptList.vue"],names:[],mappings:";AAo4BA;IACA,mBAAA;CACA;AACA;IACA,UAAA;CACA;AACA;EACA,eAAA;EACA,6CAAA;CACA;AACA;IACA,iBAAA;CACA;AACA;IACA,WAAA;CACA;AACA;IACA,WAAA;CACA",file:"manageManuscriptList.vue",sourcesContent:['<template>\n  <div class="manuscript">\n    <div>\n      <circle-title\n        title-name="稿件管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="manuScript"\n          class="demo-form-inline">\n          <el-form-item label="稿件主题">\n            <el-input\n              v-model="manuScript.title"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="归属频道"\n            prop="channelid">\n            <el-select\n              v-model="manuScript.channelid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="searchManuScript"\n              @change="searchManuScript">\n              <el-option\n                v-for="(item, index) in channelTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="归属专题">\n            <el-select\n              v-model="manuScript.specialid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="searchManuScript"\n              @change="searchManuScript">\n              <el-option\n                v-for="(item, index) in specialList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="manuScript.state"\n              placeholder=""\n              @change="searchManuScript">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="0"\n                label="待上线"/>\n              <el-option\n                :value="1"\n                label="已上线"/>\n              <el-option\n                :value="2"\n                label="已下线"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="manuScript.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="manuScript.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchManuScript"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间">\n            <el-date-picker\n              :title="manuScript.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="manuScript.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchManuScript"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 68px"\n            @click="searchManuScript">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @select-all="selectAll"\n        @selection-change="selectionChange">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="归属频道"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.articleChannelList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :content="showChannelAllName(scope.row.articleChannelList)"\n              :key="scope.row.articleid"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <el-tag\n                v-for="(item, index) in scope.row.articleChannelList"\n                :key="index"\n                size="mini">\n                {{ channelTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="归属专题"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.articleSpecialList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :content="showSpecialAllName(scope.row.articleSpecialList)"\n              :key="scope.row.articleid"\n              :visible-arrow="false"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <el-tag\n                v-for="(item, index) in scope.row.articleSpecialList"\n                :key="index"\n                size="mini">\n                {{ specialTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="置顶状态"\n          align="center">\n          <template slot-scope="scope">\n            <el-tooltip\n              v-if="!scope.row.top"\n              class="item"\n              effect="dark"\n              content="点击置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;"\n                @click.native="setManuUnTop(scope.row)">\n                置顶\n              </el-tag>\n            </el-tooltip>\n            <el-tooltip\n              v-else\n              class="item"\n              effect="dark"\n              content="点击取消置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;color:#694eff"\n                @click.native="setManuTop(scope.row)">\n                取消置顶\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="上稿/撤稿"\n          align="center">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                :class="[\'manu\', scope.row.state !== 1 && (scope.row.articleChannelList.length > 0 || scope.row.articleSpecialList.length > 0) ? \'manu-up-active\': \'\']"\n                @click="upManu(scope.row)">\n                上稿\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state === 1 ? \'manu-back-active\': \'\']"\n                @click="downManu(scope.row)">\n                撤稿\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="操作"\n          align="center">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="settingManu(scope.row)">\n                配置\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="deleteManu(scope.row)">\n                删除\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          fixed="right"\n          label="权限配置"\n          align="center"\n          width="115">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="评论"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_comment ? \'#ffa507\': \'#B5B8D9\'}"\n                class="allow_comment"\n                @click="handleComment(scope.row)"\n              >\n                <i\n                  style="color: white"\n                  class="iconfont icon-manu-comment"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="分享"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_share ? \'#1883FF\': \'#B5B8D9\'}"\n                class="allow_share"\n                @click="handleShare(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-share"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="点赞"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_like ? \'#F00808\': \'#B5B8D9\'}"\n                class="allow_like"\n                @click="handlePraise(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-praise"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="收藏"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_collect ? \'#694EFF\': \'#B5B8D9\'}"\n                class="allow_collect"\n                @click="handleCollect(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-collect"/>\n              </div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      custom-class="custom-dialog"\n      title="稿件信息配置"\n      width="50%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        :setting-article-id="settingArticleId"\n        :manu-title="manuTitle"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport SettingManu from \'./settingManu\'\nimport * as Actions from \'@/api/manuScriptApi\'\nexport default {\n  components: {\n    CircleTitle,\n    SettingManu\n  },\n  data () {\n    return {\n      manuScript: {\n        channel_name: \'\',\n        state: \'\',\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\',\n        channelid: \'\',\n        title: \'\',\n        specialid: \'\'\n      },\n      channelTypeList: [], // 所属频道列表\n      specialList: [],\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'title\',\n          label: \'稿件主题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'推送日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'article_url\',\n          label: \'稿件内容\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>查看稿件内容</a>\n          }\n        },\n        {\n          prop: \'state\',\n          label: \'状态\',\n          width: \'100\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 0) {\n              return \'待上线\'\n            } else if (cellValue === 1) {\n              return \'已上线\'\n            } else if (cellValue === 2) {\n              return \'已下线\'\n            }\n          }\n        }\n      ],\n      tableData: [],\n      batchProcess: 1,\n      processList: [\n        {\n          value: 1,\n          label: \'批量删除\'\n        }, {\n          value: 2,\n          label: \'其他\'\n        }\n      ],\n      comment: false,\n      share: false,\n      praise: false,\n      collect: false,\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false,\n      componentName: \'\',\n      articleidList: [], // 选择的稿件id,\n      selfSelectAll: false, // 自定义的全选,\n      selectedManuInfo: [], // 所选的稿件的详细信息\n      settingArticleId: \'0\',\n      manuTitle: \'\' // 稿件主题, 传给子组件\n    }\n  },\n  computed: {\n    showNullTag () {\n      return function (arr) {\n        if (!arr) {\n          return true\n        } else if (arr.length <= 0) {\n          return true\n        } else {\n          return false\n        }\n      }\n    },\n    channelTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.channel_name === \'\') {\n            return \'无\'\n          } else {\n            return content.channel_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    specialTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.special_name === \'\') {\n            return \'无\'\n          } else {\n            return content.special_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    showChannelAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += item.channel_name + \',\'\n          } else {\n            title += item.channel_name\n          }\n        })\n        return title\n      }\n    },\n    showSpecialAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += \'《\' + item.special_name + \'》\' + \'\'\n          } else {\n            title += \'《\' + item.special_name + \'》\'\n          }\n        })\n        return title\n      }\n    }\n  },\n  watch: {\n    \'manuScript.title\' () {\n      this.searchManuScript()\n    }\n  },\n  mounted () {\n    this.getMunuScriptList()\n    this.getListUsableChannel()\n    this.getListUsableSpecial()\n  },\n  methods: {\n    /** 获取稿件列表 **/\n    getMunuScriptList () {\n      Actions.getManuScriptList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取专题列表 **/\n    getListUsableSpecial () {\n      Actions.getListUsableSpecial().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.special_name\n            newItem.value = item.specialid\n            this.specialList.push(newItem)\n          })\n        }\n      })\n    },\n    onSubmit () {\n      console.log(\'submit!\')\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchManuScript()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.searchManuScript()\n    },\n    /** 获取全选的数据 **/\n    selectAll (e) {\n      if (e.length > 0) {\n        this.selfSelectAll = true\n      } else {\n        this.selfSelectAll = false\n      }\n    },\n    /** 评论权限 **/\n    handleComment (row) {\n      if (row.state !== 1) {\n        if (row.allow_comment) {\n          this.updateManu(row.articleid, \'allow_comment\', false)\n        } else {\n          this.updateManu(row.articleid, \'allow_comment\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作评论权限!\'\n        })\n      }\n    },\n    /** 分享权限 **/\n    handleShare (row) {\n      if (row.state !== 1) {\n        if (row.allow_share) {\n          this.updateManu(row.articleid, \'allow_share\', false)\n        } else {\n          this.updateManu(row.articleid, \'allow_share\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作分享权限!\'\n        })\n      }\n    },\n    /** 点赞权限 **/\n    handlePraise (row) {\n      if (row.state !== 1) {\n        if (row.allow_like) {\n          this.updateManu(row.articleid, \'allow_like\', false)\n        } else {\n          this.updateManu(row.articleid, \'allow_like\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作点赞权限!\'\n        })\n      }\n    },\n    /** 收藏权限 **/\n    handleCollect (row) {\n      if (row.state !== 1) {\n        if (row.allow_collect) {\n          this.updateManu(row.articleid, \'allow_collect\', false)\n        } else {\n          this.updateManu(row.articleid, \'allow_collect\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作收藏权限!\'\n        })\n      }\n    },\n    /** 取消置顶 **/\n    setManuUnTop (row) {\n      this.updateManu(row.articleid, \'top\', true)\n    },\n    /** 取消置顶 **/\n    setManuTop (row) {\n      this.updateManu(row.articleid, \'top\', false)\n    },\n    /** 上稿 **/\n    upManu (row) {\n      if (row.articleChannelList.length <= 0 && row.articleSpecialList.length <= 0) {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件还没有配置频道和专题, 不能上稿!\'\n        })\n        return false\n      }\n      if (row.state === 0 || row.state === 2) {\n        this.$confirm(\'确定要上稿吗?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          this.updateManu(row.articleid, \'state\', 1)\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件已上线!\'\n        })\n      }\n    },\n    /** 撤稿 **/\n    downManu (row) {\n      if (row.state === 1) {\n        this.$confirm(\'确定要撤稿吗?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          this.updateManu(row.articleid, \'state\', 2)\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件已撤稿!\'\n        })\n      }\n    },\n    /** 配置稿件 **/\n    settingManu (row) {\n      if (row.state !== 1) {\n        this.dialogVisible = true\n        this.componentName = SettingManu\n        this.settingArticleId = row.articleid\n        this.manuTitle = row.title\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可配置!\'\n        })\n      }\n    },\n    /** 删除稿件 **/\n    deleteManu (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.title + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteManuScript({\n            \'article\': {\n              \'articleid\': row.articleid\n            }\n          }).then((res) => {\n            if (res.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.searchManuScript()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可删除!\'\n        })\n      }\n    },\n    /**\n     * 稿件操作的公共接口\n     * @param articleid 文章ID\n     * @param key 更新字段名\n     * @param value 值\n     */\n    updateManu (articleid, key, value) {\n      Actions.updateManu({\n        \'article\': {\n          \'articleid\': articleid,\n          [key]: value\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'操作成功!\'\n          })\n          this.searchManuScript()\n        }\n      })\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      this.articleidList = []\n      selection.forEach((item, index, arr) => {\n        this.articleidList.push(item.articleid)\n      })\n      this.selectedManuInfo = selection\n    },\n    /** 批量删除稿件 **/\n    deleteManyManu () {\n      if (this.batchProcess === 1) {\n        let isAllowDelete = true\n        if (this.articleidList.length <= 0) {\n          this.$message({\n            type: \'error\',\n            message: \'请至少选择一个稿件!\'\n          })\n          return false\n        }\n        let tipContent = \'您所选择的:"\'\n        /** 已上线的稿件不可删除的提示 **/\n        this.selectedManuInfo.forEach((item, index, arr) => {\n          if (item.state === 1) {\n            isAllowDelete = false\n            if (index !== arr.length - 1) {\n              tipContent += \'《\' + item.title + \'》\'\n            } else {\n              tipContent += \' 已上线稿件, 不可删除! \'\n            }\n          }\n        })\n        if (!isAllowDelete) {\n          this.$message({\n            type: \'error\',\n            message: tipContent\n          })\n          return false\n        }\n        this.$confirm(\'确定删除所选稿件?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.batchDeleteManu({\n            \'articleidList\': this.articleidList\n          }).then((res) => {\n            console.log(res)\n            if (res.status) {\n              this.$message({\n                type: \'success\',\n                message: \'批量删除成功!\'\n              })\n            }\n            this.searchManuScript()\n          })\n        }).catch(() => {\n        })\n      }\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = \'\'\n      this.searchManuScript()\n    },\n    /** 搜索稿件 **/\n    searchManuScript () {\n      this.$options.filters[\'swapTime\'](this.manuScript)\n      let timeStart = this.manuScript.startDate !== null ? new Date(this.manuScript.startDate).getTime() : null\n      let timeEnd = this.manuScript.endDate !== null ? new Date(this.manuScript.endDate).getTime() : null\n      Actions.getManuScriptList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.manuScript.channelid,\n        \'specialid\': this.manuScript.specialid,\n        \'title\': this.manuScript.title,\n        \'state\': this.manuScript.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          console.log(data)\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .manu{\n    display: inline-block;\n    width: 30px;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n  .pagination {\n    display: -webkit-box;\n    -webkit-box-pack: end;\n  }\n  .manuscript .allow_comment {\n    background-color: #ffa507;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n    cursor: pointer;\n  }\n  .manuscript .allow_share {\n    background-color: #1883FF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n    cursor: pointer;\n  }\n  .manuscript .allow_like {\n    background-color: #F00808;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n    cursor: pointer;\n  }\n  .manuscript .allow_collect {\n    background-color: #694EFF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n    cursor: pointer;\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n.custom-dialog .el-dialog__header{\n  /*padding: 0;*/\n  border-bottom: 1px solid rgba(192,190,255,1);\n}\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .manuscript .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .manuscript .search-form-container .el-form-item {\n    width: 20%;\n  }\n</style>\n'],sourceRoot:""}])},qo90:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-44767268]{\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.manu[data-v-44767268]{\n  display: inline-block;\n  width: auto;\n  height: 20px;\n  border:1px solid rgba(181, 184, 217, 1);\n  border-radius: 20px;\n  font-size: 13px;\n  padding: 1px 5px 2px 5px;\n  color: rgba(181, 184, 217, 1);\n  cursor: pointer;\n}\n.manu-up-active[data-v-44767268]{\n  border: 1px solid rgba(231, 125, 0, 1);\n  color:rgba(231, 125, 0, 1);\n}\n.manu-back-active[data-v-44767268]{\n  border: 1px solid rgba(240, 8, 8, 1);\n  color:rgba(240, 8, 8, 1);\n}\n.delete-active[data-v-44767268]{\n  border:1px solid rgba(105, 78, 255, 1);\n  color: rgba(105, 78, 255, 1);\n}\n.comment-detail[data-v-44767268]{\n  border:1px solid rgba(231,125,0,1);\n  color: rgba(231,125,0,1);\n}\n.date-left[data-v-44767268]{\n  margin-left: 28px;\n}\n.comment-top-info[data-v-44767268]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  width: 95%;\n  height: 120px;\n  margin: 0 auto;\n  margin-bottom: 60px;\n  border: 1px solid #DADEDF;\n}\n.comment-info-item[data-v-44767268]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border-right: 1px solid #DADEDF;\n  width: 25%;\n  cursor: pointer;\n}\n.box[data-v-44767268] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin: auto;\n}\n.change-backgroud[data-v-44767268]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin: auto;\n  background-color: #694EFF;\n  color: white;\n}\n.comment-data[data-v-44767268] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  margin-left: 15px;\n  color:rgba(71,71,71,1);\n}\n.comment-data span[data-v-44767268]:first-child {\n  font-size: 24px;\n}\n.comment-data span[data-v-44767268]:last-child{\n  font-size:14px;\n}\n.comment-icon-container[data-v-44767268]{\n  width:60px;\n  height: 60px;\n  border-radius: 100%;\n  text-align: center;\n  line-height: 68px;\n}\n.comment-active-bg[data-v-44767268]{\n  background: rgba(105,78,255,1);\n}\n.icon-container-bg[data-v-44767268]{\n  background: white;\n}\n.icon-color[data-v-44767268]{\n  color: #694EFF;\n}\n.comment-first-bg[data-v-44767268]{\n  background: rgba(255, 206, 91, 1);\n}\n.comment-sec-bg[data-v-44767268]{\n  background: rgba(253,111,88,1);\n}\n.comment-thr-bg[data-v-44767268]{\n  background: rgba(95, 157, 249, 1);\n}\n.comment-four-bg[data-v-44767268]{\n  background: rgba(120, 232, 229, 1);\n}\n.comment-icon-container i[data-v-44767268]{\n  font-size: 30px;\n  color:white;\n  display: inline-block;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageComment/src/components/manageComment/commentList.vue"],names:[],mappings:";AA+pBA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;CACA;AACA;EACA,sBAAA;EACA,YAAA;EACA,aAAA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;EACA,yBAAA;EACA,8BAAA;EACA,gBAAA;CACA;AACA;EACA,uCAAA;EACA,2BAAA;CACA;AACA;EACA,qCAAA;EACA,yBAAA;CACA;AACA;EACA,uCAAA;EACA,6BAAA;CACA;AACA;EACA,mCAAA;EACA,yBAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;EACA,WAAA;EACA,cAAA;EACA,eAAA;EACA,oBAAA;EACA,0BAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,4BAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,gCAAA;EACA,WAAA;EACA,gBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,4BAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,aAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,4BAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,oBAAA;EACA,aAAA;EACA,0BAAA;EACA,aAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,2BAAA;UAAA,uBAAA;EACA,kBAAA;EACA,uBAAA;CACA;AACA;EACA,gBAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,WAAA;EACA,aAAA;EACA,oBAAA;EACA,mBAAA;EACA,kBAAA;CACA;AACA;EACA,+BAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,kCAAA;CACA;AACA;EACA,+BAAA;CACA;AACA;EACA,kCAAA;CACA;AACA;EACA,mCAAA;CACA;AACA;EACA,gBAAA;EACA,YAAA;EACA,sBAAA;CACA",file:"commentList.vue",sourcesContent:["<template>\n  <div class=\"coomment-list\">\n    <div>\n      <circle-title\n        title-name=\"评论管理\"\n        class=\"cicle-controller\"\n      />\n      <div class=\"comment-top-info\">\n        <div\n          :class=\"['comment-info-item', countAuditWait ? 'comment-active-bg': '']\"\n          @click=\"changeComment('countAuditWait')\">\n          <div class=\"box\">\n            <span\n              :class=\"['comment-icon-container', countAuditWait ? 'icon-container-bg': 'comment-sec-bg']\">\n              <i\n                :style=\"{'color': countAuditWait ? '#694EFF': ''}\"\n                class=\"iconfont icon-daishenhe\"/>\n            </span>\n            <span class=\"comment-data\">\n              <span :style=\"{'color': countAuditWait ? 'white': 'rgba(71,71,71,1)'}\">{{ countAuditWaitNum }}</span>\n              <span :style=\"{'color': countAuditWait ? 'white': 'rgba(71,71,71,1)'}\">待审核</span>\n            </span>\n          </div>\n        </div>\n        <div\n          :class=\"['comment-info-item', countAuditPass ? 'comment-active-bg': '']\"\n          @click=\"changeComment('countAuditPass')\">\n          <div class=\"box\">\n            <span\n              :class=\"['comment-icon-container', countAuditPass ? 'icon-container-bg': 'comment-thr-bg']\">\n              <i\n                :style=\"{'color': countAuditPass ? '#694EFF': ''}\"\n                class=\"iconfont icon-audit\"/>\n            </span>\n            <span class=\"comment-data\">\n              <span :style=\"{'color': countAuditPass ? 'white': 'rgba(71,71,71,1)'}\">{{ countAuditPassNum }}</span>\n              <span :style=\"{'color': countAuditPass ? 'white': 'rgba(71,71,71,1)'}\">已通过</span>\n            </span>\n          </div>\n        </div>\n        <div\n          :class=\"['comment-info-item', countAuditNotPass ? 'comment-active-bg': '']\"\n          @click=\"changeComment('countAuditNotPass')\">\n          <div class=\"box\">\n            <span\n              :class=\"['comment-icon-container', countAuditNotPass ? 'icon-container-bg': 'comment-four-bg']\">\n              <i\n                :style=\"{'color': countAuditNotPass ? '#694EFF': ''}\"\n                class=\"iconfont icon-yishanchu\"/>\n            </span>\n            <span class=\"comment-data\">\n              <span :style=\"{'color': countAuditNotPass ? 'white': 'rgba(71,71,71,1)'}\">{{ countAuditNotPassNum }}</span>\n              <span :style=\"{'color': countAuditNotPass ? 'white': 'rgba(71,71,71,1)'}\">未通过</span>\n            </span>\n          </div>\n        </div>\n        <div\n          :class=\"['comment-info-item', countAudit ? 'comment-active-bg': '']\"\n          @click=\"changeComment('countAudit')\">\n          <div class=\"box\">\n            <span\n              :class=\"['comment-icon-container', countAudit ? 'icon-container-bg': 'comment-first-bg']\">\n              <i\n                :style=\"{'color': countAudit ? '#694EFF': ''}\"\n                class=\"iconfont icon-square-solid\"/>\n            </span>\n            <span class=\"comment-data\">\n              <span :style=\"{'color': countAudit ? 'white': 'rgba(71,71,71,1)'}\">{{ countAuditNum }}</span>\n              <span :style=\"{'color': countAudit ? 'white': 'rgba(71,71,71,1)'}\">全部</span>\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class=\"search-form-container\">\n        <el-form\n          :inline=\"true\"\n          :model=\"comment\"\n          class=\"demo-form-inline\">\n          <el-form-item label=\"用户名\">\n            <el-input\n              v-model=\"comment.user_nickname\"\n              clearable/>\n          </el-form-item>\n          <el-form-item label=\"注册手机\">\n            <el-input\n              v-model=\"comment.user_phone\"\n              clearable/>\n          </el-form-item>\n          <el-form-item label=\"标题\">\n            <el-input\n              v-model=\"comment.title\"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label=\"模块\"\n            class=\"search-left\">\n            <el-select\n              v-model=\"comment.type\"\n              placeholder=\"\"\n              @change=\"getCommentList\">\n              <el-option\n                value=\"\"\n                label=\"全部\"/>\n              <el-option\n                :value=\"1\"\n                label=\"资讯\"/>\n              <el-option\n                :value=\"2\"\n                label=\"点播\"/>\n              <el-option\n                :value=\"3\"\n                label=\"直播\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label=\"评论时间\"\n            style=\"position: relative;left: -15px;\">\n            <el-date-picker\n              :title=\"comment.startDate | FormatDate('yyyy-MM-dd hh:mm')\"\n              v-model=\"comment.startDate\"\n              type=\"datetime\"\n              format=\"yyyy-MM-dd HH:mm\"\n              placeholder=\"选择时间\"\n              @change=\"getCommentList\"/>\n          </el-form-item>\n          <el-form-item\n            label=\"结束时间\"\n            class=\"date-left\">\n            <el-date-picker\n              :title=\"comment.endDate | FormatDate('yyyy-MM-dd hh:mm')\"\n              v-model=\"comment.endDate\"\n              type=\"datetime\"\n              format=\"yyyy-MM-dd HH:mm\"\n              placeholder=\"选择时间\"\n              @change=\"getCommentList\"/>\n          </el-form-item>\n          <el-button\n            type=\"primary\"\n            style=\"margin-left: 12px\"\n            @click=\"getCommentList\">\n            查询\n            <i class=\"el-icon-search el-icon--right\"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class=\"table-list\">\n      <el-table\n        ref=\"channelTable\"\n        :data=\"tableData\"\n        stripe\n        class=\"whole-table\"\n        min-height=\"400\"\n        @select-all=\"selectAll\"\n        @selection-change=\"selectionChange\">\n        <el-table-column\n          type=\"selection\"\n          align=\"center\"\n          width=\"55\"/>\n        <el-table-column\n          v-for=\"(item, index) in tableHeader\"\n          :key=\"index\"\n          :prop=\"item.prop\"\n          :label=\"item.label\"\n          :width=\"item.width\"\n          :formatter=\"item.formatter\"\n          align=\"center\"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label=\"置顶状态\"\n          align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-tooltip\n              v-if=\"!scope.row.top\"\n              class=\"item\"\n              effect=\"dark\"\n              content=\"点击置顶\"\n              placement=\"top\">\n              <el-tag\n                size=\"mini\"\n                class=\"setPointer\"\n                style=\"width:60px;\"\n                @click.native=\"setManuUnTop(scope.row)\">\n                置顶\n              </el-tag>\n            </el-tooltip>\n            <el-tooltip\n              v-else\n              class=\"item\"\n              effect=\"dark\"\n              content=\"点击取消置顶\"\n              placement=\"top\">\n              <el-tag\n                size=\"mini\"\n                class=\"setPointer\"\n                style=\"width:60px;color:#694eff\"\n                @click.native=\"setManuTop(scope.row)\">\n                取消置顶\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"操作\"\n          align=\"center\"\n          width=\"350\">\n          <template slot-scope=\"scope\">\n            <span class=\"manu-container\">\n              <span\n                class=\"manu delete-active\"\n                @click=\"audit(scope.row)\">\n                {{ scope.row.audit === 0 ? '审核': '已审核' }}\n              </span>\n              <span\n                :class=\"['manu', 'delete-active']\"\n                @click=\"deleteComments(scope.row)\">\n                删除\n              </span>\n              <span\n                :class=\"['manu', 'delete-active']\"\n                @click=\"forbiddenUser(scope.row)\">\n                {{ scope.row.user_forbidden ? '取消禁言': '禁言' }}\n              </span>\n              <span\n                class=\"manu comment-detail\"\n                @click=\"lookComment(scope.row)\">\n                评论查看\n              </span>\n              <span\n                class=\"manu comment-detail\"\n                @click=\"audit_opinion(scope.row)\">\n                审核意见\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"pagination\">\n        <div>\n          <el-checkbox\n            v-model=\"selfSelectAll\"\n            @change=\"toggleAllSelection\">\n            全选\n          </el-checkbox>\n          <el-select\n            v-model=\"batchProcess\"\n            placeholder=\"请选择\">\n            <el-option\n              v-for=\"item in processList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n              :disabled=\"item.disabled\"/>\n          </el-select>\n          <el-button\n            type=\"primary\"\n            @click=\"deleteManyComment\">确定</el-button>\n          <el-button\n            v-show=\"1 === 2\"\n            type=\"primary\">导出数据</el-button>\n        </div>\n        <el-pagination\n          :total=\"total\"\n          :page-sizes=\"[10, 20, 30, 40]\"\n          background\n          layout=\"total, sizes, prev, pager, next\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"/>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync=\"dialogVisible\"\n      custom-class=\"custom-dialog\"\n      title=\"审核\"\n      width=\"30%\"\n      @close=\"closeDialog\">\n      <div\n        :is=\"componentName\"\n        :commentid=\"commentid\"\n        @close-dialog=\"closeDialog\"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from '@/components/commons/circleTitle'\nimport * as Actions from '@/api/commentApi'\nimport Audit from './audit'\nexport default {\n  components: {\n    CircleTitle,\n    Audit\n  },\n  data () {\n    return {\n      comment: {\n        user_nickname: '',\n        type: '',\n        user_phone: '',\n        startDate: '',\n        endDate: '',\n        title: ''\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: 'user_phone',\n          label: '用户信息',\n          formatter: (row, column, cellValue, index) => {\n            return <div><p>用户名:{row.user_nickname}</p><p>电话:{cellValue}</p></div>\n          }\n        },\n        {\n          prop: 'title',\n          label: '源内容',\n          formatter: (row, column, cellValue, index) => {\n            let module = ''\n            if (row.type === 1) {\n              module = '资讯'\n            } else if (row.type === 2) {\n              module = '点播'\n            } else {\n              module = '直播'\n            }\n            return <div><p>模块:{module}</p><p>标题:{cellValue}</p></div>\n          }\n        },\n        {\n          prop: 'comment_content',\n          label: '评价内容'\n        },\n        {\n          prop: 'createtime',\n          label: '评论日期',\n          width: 200,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters['FormatDate'](cellValue, 'yyyy-MM-dd hh:mm')\n          }\n        },\n        {\n          prop: 'audit',\n          label: '状态',\n          width: '100',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 0) {\n              return '待审核'\n            } else if (cellValue === 1) {\n              return '已通过'\n            } else if (cellValue === 2) {\n              return '未通过'\n            }\n          }\n        }\n      ],\n      tableData: [],\n      batchProcess: 1,\n      processList: [\n        {\n          value: 1,\n          label: '删除'\n        }\n      ],\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false,\n      componentName: '',\n      selfSelectAll: false, // 自定义的全选\n      countAuditWait: true,\n      countAuditPass: false,\n      countAuditNotPass: false,\n      countAudit: false,\n      countAuditWaitNum: 0,\n      countAuditPassNum: 0,\n      countAuditNotPassNum: 0,\n      countAuditNum: 0,\n      commentid: '',\n      commentList: [], // 批量删除评论所用的容器\n      selectedCommentInfo: {}\n    }\n  },\n  computed: {\n    showNullTag () {\n      return function (arr) {\n        if (!arr) {\n          return true\n        } else if (arr.length <= 0) {\n          return true\n        } else {\n          return false\n        }\n      }\n    }\n  },\n  watch: {\n    'comment.user_nickname' () {\n      this.getCommentList()\n    },\n    'comment.user_phone' () {\n      this.getCommentList()\n    },\n    'comment.title' () {\n      this.getCommentList()\n    }\n  },\n  mounted () {\n    this.getCountComments()\n    this.getCommentList()\n  },\n  methods: {\n    /** 获取评论总数（全部，已通过，未通过，待审核） **/\n    getCountComments () {\n      Actions.countComments().then(res => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.countAuditWaitNum = data.countAuditWait\n          this.countAuditPassNum = data.countAuditPass\n          this.countAuditNotPassNum = data.countAuditNotPass\n          this.countAuditNum = data.countAudit\n        }\n      })\n    },\n    /** 待审核的评论点击触发事件 **/\n    changeComment (event) {\n      switch (event) {\n        case 'countAuditWait':\n          this.countAuditWait = true\n          this.countAuditPass = false\n          this.countAuditNotPass = false\n          this.countAudit = false\n          this.getCommentList()\n          break\n        case 'countAuditPass':\n          this.countAuditWait = false\n          this.countAuditPass = true\n          this.countAuditNotPass = false\n          this.countAudit = false\n          this.getCommentList()\n          break\n        case 'countAuditNotPass':\n          this.countAuditWait = false\n          this.countAuditPass = false\n          this.countAuditNotPass = true\n          this.countAudit = false\n          this.getCommentList()\n          break\n        case 'countAudit':\n          this.countAuditWait = false\n          this.countAuditPass = false\n          this.countAuditNotPass = false\n          this.countAudit = true\n          this.getCommentList()\n          break\n      }\n    },\n    /** 获取评论列表 **/\n    getCommentList () {\n      let audit = ''\n      audit = this.countAuditWait ? 0 : audit\n      audit = this.countAuditPass ? 1 : audit\n      audit = this.countAuditNotPass ? 2 : audit\n      this.$options.filters['swapTime'](this.comment)\n      let timeStart = this.comment.startDate !== null ? new Date(this.comment.startDate).getTime() : null\n      let timeEnd = this.comment.endDate !== null ? new Date(this.comment.endDate).getTime() : null\n      Actions.getCommentList({\n        'pageNo': this.pageNo,\n        'pageSize': this.pageSize,\n        'user_nickname': this.comment.user_nickname,\n        'user_phone': this.comment.user_phone,\n        'type': this.comment.type,\n        'title': this.comment.title,\n        'audit': audit,\n        'timeStart': timeStart,\n        'timeEnd': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getCommentList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getCommentList()\n    },\n    /** 获取全选的数据 **/\n    selectAll (e) {\n      if (e.length > 0) {\n        this.selfSelectAll = true\n      } else {\n        this.selfSelectAll = false\n      }\n    },\n    /** 置顶 **/\n    setManuUnTop (row) {\n      if (row.audit === 1) {\n        Actions.topComments({\n          'commentVo': {\n            'commentid': row.commentid,\n            'top': true\n          }\n        }).then(res => {\n          this.getCommentList()\n        })\n      } else {\n        this.$message({\n          type: 'error',\n          message: '审核通过的评论才能置顶!'\n        })\n      }\n    },\n    /** 取消置顶 **/\n    setManuTop (row) {\n      Actions.topComments({\n        'commentVo': {\n          'commentid': row.commentid,\n          'top': false\n        }\n      }).then(res => {\n        this.getCommentList()\n      })\n    },\n    /** 删除评论 **/\n    deleteComments (row) {\n      this.$confirm('是否删除\"' + row.user_nickname + '\"的评论?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        Actions.deleteComments({\n          'commentVo': {\n            'commentid': row.commentid\n          }\n        }).then((res) => {\n          if (res.status) {\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            })\n          }\n          this.getCommentList()\n          this.getCountComments()\n        })\n      }).catch(() => {\n      })\n    },\n    /** 禁言用户 **/\n    forbiddenUser (row) {\n      if (!row.user_forbidden) {\n        Actions.forbiddenUserComment({\n          'forbiddenCommentVo': {\n            'userid': row.userid\n          }\n        }).then(res => {\n          if (res.data.status) {\n            this.$message({\n              'type': 'success',\n              'message': '禁言成功'\n            })\n            this.getCommentList()\n          }\n        })\n      } else {\n        Actions.cancelForbiddenComment({\n          'forbiddenCommentVo': {\n            'userid': row.userid\n          }\n        }).then(res => {\n          if (res.data.status) {\n            this.$message({\n              'type': 'success',\n              'message': '取消禁言成功'\n            })\n            this.getCommentList()\n          }\n        })\n      }\n    },\n    /** 评论查看 **/\n    lookComment (row) {\n      this.comment.user_nickname = row.user_nickname\n      this.comment.user_phone = row.user_phone\n      // this.comment.title = row.title\n      this.getCommentList()\n    },\n    /** 审核意见 **/\n    audit_opinion (row) {\n      let tipContent = ''\n      if (row.audit_opinion) {\n        tipContent = row.audit_opinion\n      } else {\n        tipContent = '暂无审核意见'\n      }\n      this.$alert(tipContent, '审核意见', {\n        confirmButtonText: '确定',\n        callback: action => {\n        }\n      })\n    },\n    /** 审核 **/\n    audit (row) {\n      if (row.audit === 0) {\n        this.dialogVisible = true\n        this.componentName = 'Audit'\n        this.commentid = row.commentid\n      }\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      this.commentList = []\n      selection.forEach((item, index, arr) => {\n        this.commentList.push(item.commentid)\n      })\n      this.selectedCommentInfo = selection\n    },\n    /** 批量删除评论 **/\n    deleteManyComment () {\n      if (this.commentList.length <= 0) {\n        this.$message({\n          type: 'error',\n          message: '请至少选择一条评论!'\n        })\n        return false\n      }\n      let tipContent = '您所选择的:\"'\n      /** 已上线的稿件不可删除的提示 **/\n      this.selectedCommentInfo.forEach((item, index, arr) => {\n        tipContent += '(' + item.user_nickname + ')'\n      })\n      this.$confirm(tipContent + '用户评论即将被删除?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        Actions.batchDeleteComments({\n          'idList': this.commentList\n        }).then((res) => {\n          console.log(res)\n          if (res.status) {\n            this.$message({\n              type: 'success',\n              message: '批量删除成功!'\n            })\n          }\n          this.getCommentList()\n          this.getCountComments()\n        })\n      }).catch(() => {\n      })\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = ''\n      this.dialogVisible = false\n      this.getCommentList()\n      this.getCountComments()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .manu{\n    display: inline-block;\n    width: auto;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n  .comment-detail{\n    border:1px solid rgba(231,125,0,1);\n    color: rgba(231,125,0,1);\n  }\n  .date-left{\n    margin-left: 28px;\n  }\n  .comment-top-info{\n    display: flex;\n    justify-content: space-between;\n    width: 95%;\n    height: 120px;\n    margin: 0 auto;\n    margin-bottom: 60px;\n    border: 1px solid #DADEDF;\n  }\n  .comment-info-item{\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    border-right: 1px solid #DADEDF;\n    width: 25%;\n    cursor: pointer;\n  }\n  .box {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    margin: auto;\n  }\n  .change-backgroud{\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    margin: auto;\n    background-color: #694EFF;\n    color: white;\n  }\n  .comment-data {\n    display: flex;\n    flex-direction: column;\n    margin-left: 15px;\n    color:rgba(71,71,71,1);\n  }\n  .comment-data span:first-child {\n    font-size: 24px;\n  }\n  .comment-data span:last-child{\n    font-size:14px;\n  }\n  .comment-icon-container{\n    width:60px;\n    height: 60px;\n    border-radius: 100%;\n    text-align: center;\n    line-height: 68px;\n  }\n  .comment-active-bg{\n    background: rgba(105,78,255,1);\n  }\n  .icon-container-bg{\n    background: white;\n  }\n  .icon-color{\n    color: #694EFF;\n  }\n  .comment-first-bg{\n    background: rgba(255, 206, 91, 1);\n  }\n  .comment-sec-bg{\n    background: rgba(253,111,88,1);\n  }\n  .comment-thr-bg{\n    background: rgba(95, 157, 249, 1);\n  }\n  .comment-four-bg{\n    background: rgba(120, 232, 229, 1);\n  }\n  .comment-icon-container i{\n    font-size: 30px;\n    color:white;\n    display: inline-block;\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n  .custom-dialog .el-dialog__header{\n    /*padding: 0;*/\n    border-bottom: 1px solid rgba(192,190,255,1);\n  }\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .coomment-list .el-form--inline .el-form-item__content {\n    width: 65%;\n  }\n  .coomment-list .search-form-container .el-form-item {\n    width: 23%;\n  }\n</style>\n"],sourceRoot:""}])},qqIy:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-dialog__header{\n  padding: 13px 30px 13px;\n  border-bottom: 1px solid #C0BEFF;\n  background-color: #F7FAFF;\n}\n.el-dialog__title {\n  line-height: 17px;\n  font-size: 17px;\n  color: #303133;\n}\n.el-dialog__headerbtn {\n  top: 13px;\n}\n.el-dialog__body {\n  padding: 20px 60px 0px 60px;\n}\n.addUser .el-form {\n  margin-top: 15px;\n}\n.addUser .el-form-item {\n  width: 100%;\n}\n.addUser .submit .el-form-item__content{\n  float: right;\n  width: 160px;\n}\n.select-role {\n  border: 1px solid #694EFF;\n  background-color: #EBF5FF;\n  color: #694EFF;\n  padding:8px 22px 8px 22px;\n  border-radius: 3px;\n}\n.addUser .el-select {\n  width: 100%;\n}\n.table-lists {\n  margin-top: 10px;\n  margin-bottom: 20px;\n}\n.table-lists thead tr th {\n  background: #716BFF;\n  color: white;\n  border-color:#716BFF ;\n  text-align: center;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageRole/src/components/manageRole/editRole.vue"],names:[],mappings:";AA6KA;EACA,wBAAA;EACA,iCAAA;EACA,0BAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,4BAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,aAAA;EACA,aAAA;CACA;AACA;EACA,0BAAA;EACA,0BAAA;EACA,eAAA;EACA,0BAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,iBAAA;EACA,oBAAA;CACA;AACA;EACA,oBAAA;EACA,aAAA;EACA,sBAAA;EACA,mBAAA;CACA",file:"editRole.vue",sourcesContent:["<template>\n  <div class=\"addUser\">\n    <el-form\n      ref=\"ruleForm\"\n      :model=\"ruleForm\"\n      :rules=\"rules\">\n      <el-form-item\n        label=\"角色名称\"\n        prop=\"role_name\">\n        <el-input\n          v-model.trim=\"ruleForm.role_name\"\n          style=\"width:260px;\"\n          clearable/>\n      </el-form-item>\n    </el-form>\n    <div class=\"table-lists\">\n      <p style=\"margin-bottom: 10px;\">权限配置：</p>\n      <tree-transfer\n        :title=\"title\"\n        :from_data=\"fromData\"\n        :to_data=\"toData\"\n        :default-props=\"{label:'label'}\"\n        :mode=\"mode\"\n        :filter=\"false\"\n        open-all\n        height=\"440px\"\n        @addBtn = \"addAuth\"\n        @removeBtn = \"removeAuth\"/>\n    </div>\n    <el-form-item\n      class=\"submit\"\n      style=\"width:100%\">\n      <el-button\n        @click=\"cancel\">取消</el-button>\n      <el-button\n        type=\"primary\"\n        @click=\"onSubmit('ruleForm')\">提交</el-button>\n    </el-form-item>\n  </div>\n</template>\n<script>\nimport treeTransfer from 'el-tree-transfer'\nimport * as Actions from '@/api/systemUsersApi'\nexport default {\n  name: 'AddRole',\n  components: {\n    treeTransfer\n  },\n  props: {\n    roleid: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      ruleForm: {\n        role_name: ''\n      },\n      mode: 'transfer', // transfer addressList\n      fromData: [],\n      toData: [],\n      title: ['全部权限', '已选择权限'],\n      rules: {\n        role_name: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' }\n        ]\n      },\n      idArr: []\n    }\n  },\n  mounted () {\n    /** 获取树 **/\n    this.getTreePermission()\n    /** 获取编辑信息 **/\n    this.getRoleDetails()\n  },\n  methods: {\n    getTreePermission () {\n      Actions.getTreePermission().then(res => {\n        if (res.data.status) {\n          this.fromData = res.data.result\n        }\n      })\n    },\n    getRoleDetails () {\n      Actions.getRoleDetails({\n        'role': {\n          'roleid': this.roleid\n        }\n      }).then(res => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.ruleForm.role_name = data.name\n          this.toData = data.treePermission || []\n        }\n      })\n    },\n    getAllSelectedId () {\n      this.toData.forEach((item, index, arr) => {\n        this.idArr.push(item.id)\n        if (item.children.length > 0) {\n          this.getChildrenId(item.children)\n        }\n      })\n    },\n    getChildrenId (arr) {\n      arr.forEach((item, index, arr) => {\n        this.idArr.push(item.id)\n        if (item.children.length > 0) {\n          this.getChildrenId(item.children)\n        }\n      })\n    },\n    onSubmit (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.idArr = []\n          this.getAllSelectedId()\n          Actions.updateRole({\n            'role': {\n              'roleid': this.roleid,\n              'name': this.ruleForm.role_name,\n              'permissionidList': this.idArr\n            }\n          }).then(res => {\n            console.log(res)\n            if (res.data.status) {\n              this.$notify({\n                type: 'success',\n                title: '成功',\n                message: '编辑角色成功'\n              })\n              this.$emit('closeDialog')\n            }\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    cancel () {\n      this.$emit('closeDialog')\n    },\n    addAuth (fromData, toData, obj) {\n      this.toData = toData\n    },\n    removeAuth (fromData, toData, obj) {\n      this.toData = toData\n    }\n  }\n\n}\n<\/script>\n\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n  .addUser .el-checkbox {\n    float: left;\n  }\n  .addUser .check-all {\n    margin-right: 30px;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .addUser .el-form {\n    margin-top: 15px;\n  }\n  .addUser .el-form-item {\n    width: 100%;\n  }\n  .addUser .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .addUser .el-select {\n    width: 100%;\n  }\n  .table-lists {\n    margin-top: 10px;\n    margin-bottom: 20px;\n  }\n  .table-lists thead tr th {\n    background: #716BFF;\n    color: white;\n    border-color:#716BFF ;\n    text-align: center;\n  }\n</style>\n"],sourceRoot:""}])},qunJ:function(e,n){},rMzd:function(e,n){},"rR//":function(e,n,t){var a=t("gzjL");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("160c69a4",a,!1,{})},s967:function(e,n){},sgyu:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-10230c78] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-10230c78]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSlide/src/components/manageSlide/slideEdit.vue"],names:[],mappings:";AAoWA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"slideEdit.vue",sourcesContent:['<template>\n  <div class="slide create">\n    <circle-title\n      title-name="轮播图编辑"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="ruleForm"\n      :model="ruleForm"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="轮播图标题"\n        prop="chart_name">\n        <el-input v-model.trim="ruleForm.chart_name"/>\n      </el-form-item>\n      <el-form-item\n        class="item"\n        label="上传图片"\n        prop="icon">\n        <el-upload\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :show-file-list="false"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="ruleForm.icon"\n            :src="ruleForm.icon"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="关联内容"\n        prop="relativeContent">\n        <el-input\n          v-model="ruleForm.relativeContent"\n          disabled\n          style="width: 87%"/>\n        <el-button\n          type="primary"\n          style="width: 11%;margin-left: 1%"\n          @click="dialogVisible = true">添加</el-button>\n      </el-form-item>\n      <el-dialog\n        :visible.sync="dialogVisible"\n        title="选择关联内容"\n        width="70%">\n        <el-radio-group\n          v-model="radio"\n          text-color="#ffffff"\n          fill="#694EFF"\n          size="small"\n          @change="handleOperationClick(radio)">\n          <el-radio-button label="稿件"/>\n          <el-radio-button label="专题"/>\n        </el-radio-group>\n        <div\n          :is="componentName"\n          @selected-row="selectedRow"/>\n      </el-dialog>\n      <el-form-item\n        label="归属频道"\n        prop="channelid">\n        <el-select\n          v-model="ruleForm.channelid"\n          filterable\n          clearable\n          placeholder="">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="有效期"\n        class="indate"\n        required>\n        <el-date-picker\n          v-model="ruleForm.indate"\n          :clearable="false"\n          style="width:100%"\n          type="datetimerange"\n          range-separator="至"\n          format="yyyy-MM-dd HH:mm"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"/>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="ruleForm.state"\n          placeholder="请选择">\n          <el-option\n            :value="1"\n            label="启用"/>\n          <el-option\n            :value="0"\n            label="停用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        prop="sort"\n        class="sort"\n        required>\n        <el-input\n          v-model.number="ruleForm.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'ruleForm\')">提交</el-button>\n        <el-button @click="gotoList">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/slideApi\'\nimport AddTopic from \'./addTopic\'\nimport AddManuscript from \'./addManuscript\'\nimport uploadHeaders from \'@/mixins\'\nexport default {\n  components: {\n    CircleTitle,\n    AddManuscript,\n    AddTopic\n  },\n\n  mixins: [uploadHeaders],\n  \n  data () {\n    return {\n      ruleForm: {\n        chart_name: \'\',\n        icon: \'\',\n        imageUrl: \'\',\n        indate: [],\n        sort: \'\',\n        channelid: \'\',\n        relativeContent: \'\',\n        state: 0\n      },\n      radio: \'稿件\',\n      isChooseDate: false,\n      dialogVisible: false,\n      componentName: \'AddManuscript\',\n      rules: {\n        chart_name: [\n          { required: true, message: \'请输入轮播图标题\', trigger: \'blur\' }\n        ],\n        channelid: [\n          { required: true, message: \'请选择归属频道\', trigger: \'blur\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          {type: \'number\', message: \'排序必须为数字\'}\n        ],\n        relativeContent: [\n          { required: true, message: \'请选择关联内容\', trigger: \'blur\' }\n        ],\n        icon: [\n          { required: true, message: \'请上传图片\', trigger: \'blur\' }\n        ]\n      },\n      chartid: \'\',\n      channelTypeList: [],\n      jump_type: 0, // 关联的是稿件还是专题\n      articleid: \'\',\n      specialid: \'\',\n      jump_url: \'\',\n      pageNo: 1,\n      isRefresh: true\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getSlideEditInfo()\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageSlide/list\') {\n      to.meta.refresh = this.isRefresh\n    } else if (to.path === \'/manageSlide/create\') {\n      this.$root.eventHub.$emit(\'reset-options\')\n    }\n    next()\n  },\n  methods: {\n    gotoList () {\n      this.isRefresh = false\n      this.$router.push({path: \'/manageSlide/list\'})\n    },\n    /** 选择稿件，选择专题 **/\n    handleOperationClick (radio) {\n      if (radio) {\n        switch (radio) {\n          case \'稿件\':\n            this.componentName = \'AddManuscript\'\n            break\n          case \'专题\':\n            this.componentName = \'AddTopic\'\n        }\n      }\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.editSlide({\n            \'rotationChart\': {\n              \'chartid\': this.chartid,\n              \'chart_name\': this.ruleForm.chart_name,\n              \'chart_head_url\': this.ruleForm.icon,\n              \'jump_type\': this.jump_type,\n              \'articleid\': this.articleid,\n              \'specialid\': this.specialid,\n              \'channelid\': this.ruleForm.channelid,\n              \'expiry_date_start\': new Date(this.ruleForm.indate[0]).getTime(),\n              \'expiry_date_end\': new Date(this.ruleForm.indate[1]).getTime(),\n              \'sort\': this.ruleForm.sort,\n              \'state\': this.ruleForm.state\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/manageSlide/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'编辑成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.ruleForm.icon = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'上传图片只能是 JPG 格式!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    /** 获取轮播图的信息 **/\n    getSlideEditInfo () {\n      this.chartid = sessionStorage.getItem(\'chartid\')\n      Actions.getSlideInfoByID({\n        \'rotationChart\': {\n          \'chartid\': this.chartid\n        }\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.ruleForm.chart_name = data.chart_name\n          this.ruleForm.icon = data.chart_head_url\n          if (data.jump_type === 1 && data.title) {\n            this.ruleForm.relativeContent = \'稿件-\' + data.title\n          } else if (data.jump_type === 2 && data.special_name) {\n            this.ruleForm.relativeContent = \'专题-\' + data.special_name\n          } else {\n            this.ruleForm.relativeContent = \'无\'\n          }\n          this.ruleForm.channelid = data.channelid\n          this.ruleForm.indate.push(new Date(data.expiry_date_start))\n          this.ruleForm.indate.push(new Date(data.expiry_date_end))\n          this.ruleForm.sort = data.sort\n          this.articleid = data.articleid\n          this.specialid = data.specialid\n          this.ruleForm.channelid = data.channelid\n          this.jump_type = data.jump_type\n          this.getListUsableChannel()\n        }\n      })\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n          this.setChannnelid()\n        }\n      })\n    },\n    /** 如果父频道被停用, 则channelid为空 **/\n    setChannnelid () {\n      let isSetEmpty = true\n      console.log(this.ruleForm.channelid)\n      this.channelTypeList.forEach(item => {\n        if (item.value === this.ruleForm.channelid) {\n          isSetEmpty = false\n        }\n      })\n      if (isSetEmpty) {\n        this.$set(this.ruleForm, \'channelid\', \'\')\n      }\n    },\n    /** 获取轮播图配置的稿件或专题信息 **/\n    selectedRow (row) {\n      this.dialogVisible = false\n      if (row.articleid) {\n        this.ruleForm.relativeContent = \'稿件-\' + row.title\n        this.jump_type = 1\n        this.articleid = row.articleid\n        this.specialid = \'\'\n        this.jump_url = row.article_url\n      } else {\n        this.ruleForm.relativeContent = \'专题-\' + row.special_name\n        this.jump_type = 2\n        this.articleid = \'\'\n        this.specialid = row.specialid\n        this.jump_url = \'\'\n      }\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},t6IT:function(e,n,t){var a=t("/sDA");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("6e167513",a,!1,{})},tYlx:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.tree-wrapper[data-v-3a0a8e1e] {\n  height: 100%;\n  background: #f5f8fa;\n  padding: 40px 0;\n  overflow: auto;\n}\n.tree-wrapper a[data-v-3a0a8e1e] {\n  color: #474747;\n  font-size: 16px;\n  font-weight: 400;\n}\n/*# sourceMappingURL=src/components/commons/routerTree.css.map */","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/commons/src/components/commons/routerTree.vue","/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/commons/routerTree.vue"],names:[],mappings:";AAiRA;EACE,aAAA;EACA,oBAAA;EACA,gBAAA;EACA,eAAA;CChRD;ADiRC;EACE,eAAA;EACA,gBAAA;EACA,iBAAA;CC/QH;AACD,iEAAiE",file:"routerTree.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.tree-wrapper\n  height 100%\n  background rgba(245,248,250,1)\n  padding 40px 0\n  overflow auto\n  a\n    color #474747\n    font-size 16px\n    font-weight 400\n",".tree-wrapper {\n  height: 100%;\n  background: #f5f8fa;\n  padding: 40px 0;\n  overflow: auto;\n}\n.tree-wrapper a {\n  color: #474747;\n  font-size: 16px;\n  font-weight: 400;\n}\n/*# sourceMappingURL=src/components/commons/routerTree.css.map */"],sourceRoot:""}])},"tk/o":function(e,n,t){var a=t("9wcA");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1ce184b2",a,!1,{})},udct:function(e,n,t){var a=t("uuUp");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("728b16e0",a,!1,{})},upZI:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.title-class[data-v-74a6b5e6]{\n  margin-left: 24px;\n}\n.audit .el-select[data-v-74a6b5e6]{\n  width: 100%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageComment/src/components/manageComment/audit.vue"],names:[],mappings:";AAyEA;EACA,kBAAA;CACA;AACA;EACA,YAAA;CACA",file:"audit.vue",sourcesContent:['<template>\n  <div class="audit">\n    <el-form\n      ref="auditForm"\n      :model="auditForm"\n      label-width="80px">\n      <el-form-item label="归属类别">\n        <el-select\n          v-model="auditForm.type"\n          placeholder="请选择是否通过">\n          <el-option\n            :value="1"\n            label="通过"/>\n          <el-option\n            :value="2"\n            label="不通过"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="审核意见">\n        <el-input\n          v-model="auditForm.desc"\n          type="textarea"/>\n      </el-form-item>\n      <el-form-item\n        label="">\n        <el-button\n          type="primary"\n          @click="submit">提交</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/commentApi\'\nexport default {\n  props: {\n    \'commentid\': {\n      type: String,\n      default: \'0\'\n    }\n  },\n  data () {\n    return {\n      auditForm: {\n        type: 1,\n        desc: \'\'\n      }\n    }\n  },\n  methods: {\n    submit () {\n      Actions.auditComments({\n        \'commentVo\': {\n          \'commentid\': this.commentid,\n          \'audit\': this.auditForm.type,\n          \'audit_opinion\': this.auditForm.desc\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.$notify({\n            title: \'成功\',\n            type: \'success\',\n            message: \'审核成功\'\n          })\n        }\n        this.$emit(\'close-dialog\')\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .title-class{\n    margin-left: 24px;\n  }\n  .audit .el-select{\n    width: 100%;\n  }\n</style>\n<style>\n</style>\n'],sourceRoot:""}])},uuUp:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-dialog__header{\n  padding: 13px 30px 13px;\n  border-bottom: 1px solid #C0BEFF;\n  background-color: #F7FAFF;\n}\n.el-dialog__title {\n  line-height: 17px;\n  font-size: 17px;\n  color: #303133;\n}\n.el-dialog__headerbtn {\n  top: 13px;\n}\n.el-dialog__body {\n  padding: 20px 60px 0px 60px;\n}\n.assignRole .el-form {\n  margin-top: 15px;\n}\n.assignRole .submit .el-form-item__content{\n  float: right;\n  width: 160px;\n}\n.select-role {\n  border: 1px solid #694EFF;\n  background-color: #EBF5FF;\n  color: #694EFF;\n  padding:8px 22px 8px 22px;\n  border-radius: 3px;\n}\n.assignRole .el-select {\n  width: 100%;\n}\n.assignRole .el-form-item {\n  width: 100% !important;\n}\n.assignRole .el-checkbox+.el-checkbox{\n  width: 200px;\n  margin-left: 0px;\n}\n/*.assignRole .el-form-item */\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSystemUser/src/components/manageSystemUser/assignRole.vue"],names:[],mappings:";AA6FA;EACA,wBAAA;EACA,iCAAA;EACA,0BAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,4BAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,aAAA;EACA,aAAA;CACA;AACA;EACA,0BAAA;EACA,0BAAA;EACA,eAAA;EACA,0BAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,aAAA;EACA,iBAAA;CACA;AACA,8BAAA",file:"assignRole.vue",sourcesContent:["<template>\n  <div class=\"assignRole\">\n    <el-form\n      :inline=\"true\"\n      size=\"small\">\n      <el-form-item\n        label=\"用户名\"\n        style=\"margin-left: 13px;\">\n        <span>{{ username }}</span>\n      </el-form-item>\n      <el-form-item label=\"角色分配\">\n        <el-checkbox\n          v-for=\"(item, index) in allRoleList\"\n          :key=\"index\"\n          v-model=\"item.isChecked\"\n          @change=\"chooseRole(item.roleid, item.isChecked)\">\n          {{ item.name }}\n        </el-checkbox>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport * as Actions from '@/api/systemUsersApi'\nexport default {\n  name: 'AssignRole',\n  props: {\n    usercode: {\n      type: String,\n      default: ''\n    },\n    username: {\n      type: String,\n      default: ''\n    }\n\n  },\n  data () {\n    return {\n      allRoleList: []\n    }\n  },\n  mounted () {\n    /** 获取用户信息 **/\n    this.getUserInfo()\n  },\n  methods: {\n    cancel () {\n      this.$emit('closeDialog')\n    },\n    getUserInfo () {\n      Actions.getUserRoles({\n        'orgUsers': {\n          'usercode': this.usercode\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.allRoleList = res.data.result\n        }\n      })\n    },\n    /** 给用户分配权限 **/\n    chooseRole (roleid, isChecked) {\n      Actions.assignOrCanelUserRole({\n        'assign': {\n          'usercode': this.usercode,\n          'roleid': roleid,\n          'assignOrCanel': isChecked\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.$message({\n            type: 'success',\n            message: '分配成功'\n          })\n        }\n      })\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .el-button--primary {\n    background-color: #716BFF;\n    border-color: #716BFF;\n  }\n  .el-button--default {\n    color: #716BFF ;\n    border-color: #716BFF;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px 0px 60px;\n  }\n  .assignRole .el-form {\n    margin-top: 15px;\n  }\n  .assignRole .submit .el-form-item__content{\n    float: right;\n    width: 160px;\n  }\n  .select-role {\n    border: 1px solid #694EFF;\n    background-color: #EBF5FF;\n    color: #694EFF;\n    padding:8px 22px 8px 22px;\n    border-radius: 3px;\n  }\n  .assignRole .el-select {\n    width: 100%;\n  }\n  .assignRole .el-form-item {\n    width: 100% !important;\n  }\n  .assignRole .el-checkbox+.el-checkbox{\n    width: 200px;\n    margin-left: 0px;\n  }\n  /*.assignRole .el-form-item */\n</style>\n"],sourceRoot:""}])},v0qt:function(e,n,t){var a=t("hmdD");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("08d048f3",a,!1,{})},vVZ4:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAAApCAYAAADESpC2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM0NUVERUY5Mjc4QjExRTlBQzQ1RDJDQjc2MDJFMzhCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM0NUVERUZBMjc4QjExRTlBQzQ1RDJDQjc2MDJFMzhCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzQ1RURFRjcyNzhCMTFFOUFDNDVEMkNCNzYwMkUzOEIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzQ1RURFRjgyNzhCMTFFOUFDNDVEMkNCNzYwMkUzOEIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5HgY/EAAAMUUlEQVR42uxcXYwkVRWuYQeWaDQUG43En5jaB59QkpoHE32zR/yPxPSaqC9G06OoLwa2J7qwy4LQA5pognG7dxcwEkm6QRQIRKYfjcGkW4PxzXRrXBUV6AYNs9lld9tzZ78znjncW3VvdXW7y85JTrq76tatW/d+df5vL0wmk6gg3UN8PfEZcczW2QLxLuJzxD8gfiDaoUueFgte9yPirxS47j6A8PjO1O8AL5SOEK8EtN8gfoH4LPEe4qOQjPftTP8O8HypSVwLaH8SoDN0OfFLAN1xfN4/6wdcWFi4aBaDzJ6UPmLiMY27P0U/CfoYe7Q190ts98O5KvrqlP2wvnx0EkaniZ8j/hvx3wWfIP432nw54P6F2DXZZnGwQJmLwu3AcRltM64fYV7WC66l6aOHPuo+AMU9RzxeHKuZlwDfDQ1wroJz8byAd2xSnM5Z+FVx/hbixXkBD4sjqZ4xNyPL85hj65BOsm3T8fwDs1iqba/gXPqAaV2MM/Zovw2oANYEnxp4bfxO5qFqjS32xYA+HyRuE18Jj9blNhsv9yqcX1Te8Sypavm9lnPNGJxAFVaIzQIvkQoaWtoP0S7GNQaUMbXV9+mj3zxiFfwakGEsNjLtR5aXz4y5D/DUxXgNyBr4HsGk4rkyL2sb45iLqr0/8I08OmvVWYLEY4nQFuNOciReW0jLhriuYZN44lhFSj6LlKlCqvRwrx4kjWar+hTPMhEq08VMqWVs26SzxzonswTeA4GgO36hgU4DT6iOCWyYkQZQFvAsqrqdBTwNDnGsjvYNhzq3AcK0rzj69lHBGngxxlEDCJtsv/nwrFTtT4i/ENDPUQ9v9xvEH0dYJWs87RnG+Vh1DKFuOkKlrHr2kSqV6ttetu0iQpCqY2tCpddx3ly3bxov10HmHg3cs4956OJYHrBM+6WygWdstM8H9NHyiOvdTHy3Z38fxucswMcvR0csdg32TZqxuDGkTUXZiF2HdKlgYatiETvK/kpxfQuLzdfwyxDj/D6fsEgBGgoAxgJQkfjNNupYvTjTvwRKNT0YqF6Peai7mzw93w3il4nPlBlqkTEyrW6UOm16erUTh73VzGi77ghlJLDzmg7vuYHzqU29TWPjiefrCbuO78XMdnBDHS/VxnsoEHRHPBZ+fwDoTGzvJeIXiE+VBT4HMAaY8J5YlFEG8DiE0sYiJJa2sn9ua7PLUnVfCZw27K51l62n+hoUCMmkFienIexenz4bZdh4Jnf6kCXMkJfByMvV3uQRpuDsxhmEVc7h80XiN8N2NHSs5DBK4lCnVUeEvkvH9wVkS5YzznEoQ6q3rlJfLajcVKjgoVLX8jlWPNRfz6Fu0ww7tIJ+E9W+lHDKw4FvTKsk9cpkJN2Y+EXi54n/iYzHCSEVvjaNxIMK2VKRSm1UbF6qy6vNmEerV5uRYUgD5mjgUNVMccG1r0LaDUSQmCVeIgLJ65COlTIl3ocC2puqlBtz2uz3kHTm7fsq8S3EnzKBTkg7yWeR2zWT+kHiH5Yk7VraWKeJ5Le7ikDvLIx5KfXGAp/jjPlKMqIFNeGhjwuALhaB8VgEpOdCi1j0q0oC3c0eoPsD8Q3Ef4WKeBfxdcT/4DkhfhXguwbHRlNI9FgAr+tYpI7IAFSh6uZJ45DjeKZalmftQRWErv4/5GlMHilJvf6eeI+67hriP+O8Ua9/wpheEdfdW2aRwIVA06hakdyf6JxxwP05Y8KB4zRH1Y7EuVJUbR4ZFfd1D0finpw2vyP+GBwHSc8RfwRv7h5IvrcRvyG6NGicEbyW+VSpqoe0+MbZqRYNLCPHvJR1nu6xDOeiDwnZwHg7s5Z43/eULJ9BSMRFzxBfkdPHtZCIpyzXv+4knozl5TghSSlxs3LGG5fZmQt4vwlc5PcTn8xQse/26OOXjutfl8C7lOkyx/FXiN9D/M2Avp4hXlaq1MTn/kN8LfGvid+bofJ/IdJlFw2ZkETBMEbVkY2ocNXKRfL8aYY0r7qk5KLD5niZ+O3E3yPeTXyX5zh+hfDI08RvRP9vwjnjoT4bnd+Z9rQC/8+IPzknVRFH23ORmjm4O84LGnM9HH0aG2jZs9S8LmylfSqsYohDGqvoN8JY+spD12tWybl1i+1BgEUCW4NDzoPkZVl/iH6Mg7JpL/Lz46Vhh2jVFunQwPsXeA8yCmafxJ0A3yHP9TWS7QOID54ivkJIVtPvO/D7HI4ZSfeJOYCOFzzkmhpNZstxro3F3ozDiUnP2sNQFWOIBcg4LCIB0FDnlnG+aQFdJ8qvDpLZkXoUlqmShbAyu1GXY1f5bo4P1pVUNHHH1UUBihOIrb0FgOOqYPN5EN/v8Bzos+AsMoB8ZB6gs9BQTehYHJfHhg6pyaDbVrKEN72H78sSfDjHcbMVLHyK7yyx6iKg3ABQVtV419A2FWCKhXTpA9BjeK0NC8haok+WorHov6/A1rcE3VNcN8R9EweYtZTucgecnH+S+LfEf0H6akNUijAdKKlA8zLiJwLiWD8uoUigPs1GGhF7Y2es57DRmiLpb9uXwSm7ukjhDdC+Js6v894Obe+Je9TU77ZI+I/Q11a1s+VZmqptIjxpWZ0ysIxBVlFzIWmK6wfi2WKcr8giUiPNHiZ+H2wyo1IXwDbH43ZIw4NTOjSPI6bnS38sUdqlgeBbQUyrJtTcGG9uHeCOLbbSpipVkq9qsaekSm1a7t+DKvUpUqiq+2eZFm1h53FbW/s+TImhMhn4papF/9sT0oHU3qwrNHtMANh1SMYtO3ARot44D5+FNytBZ9uUeivU7u0FFn03HIkQ0H038i8i9aHYwxB3XSe/1z2v0eCLoM58qpd14aksMt0MMKuyK6lqh7ALGw4V2BU26tAyL1sV0RZ7ta/GyOqb52UIXHEgugWANvi4AZ7Ji36L+K3EnyN+PgN0TIdx/nCgpAsFncmG7J+BfbcW0H4sJjZRNqC0D/Une6gSsHsBgkpkL82y0V7uU0iPSDkJXeWN8nfr7jQAYkX0KZ2NjngxenAajB3btWQ12N7lOR2Iew+UNtiUjma7gemLvdrTxF+Kzm9JNAPY8JiQ2wDcWz3a7oJ6/WjAgt/tKVVCJRbXteUuvHzTUVGyFr22Hi12hCRYsnVZTaGPrd35OVKP77MqDHtW8Qkb/Ur61NW42jnxt7oYS0uqVIyTtwa0Nfhw354yR4YyHBVtr9/r4F71zX6VMb5bGP2nUR2cRwdzDPwriZ8KrPm7s+xdZsJQbnpu4ZtYnINq4HO0bWEdUaVczeCRayuhxbmooN+6xblgTlWQWu9iG1jK5HWFdMUyn1w6XxX/QiC3hG7VKEoHR8fxTNzt08RPwj7woUNQu4ccku7R6HwRgC/dBdVfNsUWVWj77ZJe+pqscqQkyq/UrRS0NfNMgrxj2kbTJgLH6rriOIdKauJ4RUjmJiT7svD0hxYN0snKXJyBHfZYgGo8iL4OiGPG+30iMA32HdVHmZRYJsTEp5YsEiUvyTvMymogWJ0HvG6grZmlMmsWB0IHm9nxYJV/NcaY8j8ciCC7mZcVSLgaHIKuCqavRdt3oPWViTB2zIvpp+8qizLguwHg8wXOt3EdS8DHA0F3eMowTdbiVBTwLoQ8qK/E27Z9VKW7GFj7lIPBKblVh5SLhJcZoeraVprVFNJbv2gdlVqr4n2tbgsUW+5pQJ9Vj3cKEs+o3esDJJ8B3TtxzdmMmOBcQKeMbhMa6Io/0Uls2xp9pKexbTxDL1kSr5UDTP1nPzVHrG9okew2sLHT0FQAaXGqTzVfghfNOVnjRLTwIq9nxBH7OgSDsW/9fVpeIeg5pLQeDUhtsZe7ARvP3GOSEZ65LfLPAxcOGou3VAOkVqC/OJp+t1Wa47XHGbZZH8/CXmfPcX1PLf5eZZ+tAvwjm20Ib3oJL2dNqVGZVhzifCL6lWNOxQvTddl4WWo3JBxyOWKEuzKAdzAwFliU+M1tecb08qRgPyeTUPMIBY2j7C2JqS28Y8Cjsgghey7GsO82Y3AcHhFhEH62lo75cfxNhJmuVqDmv+VYUWGXVQHKzlbfgeGJxwr8OeNJS86X/xdvbn/ao/OqWX8+U/ScTzuRC409rk9KrfqdMYWMdSGwStfYao8g5OJLvFl7l7D1zLbGO6IdumRpoUB5uFGZP4/OF3wWoQMIm+zQDvAK0U+j80Fmn3/y5MLPe3dAt0OG/ivAAE5Mty1w6CQMAAAAAElFTkSuQmCC"},vrg5:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-2534dd02]{\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.manu[data-v-2534dd02]{\n  display: inline-block;\n  width: 30px;\n  height: 20px;\n  border:1px solid rgba(181, 184, 217, 1);\n  border-radius: 20px;\n  font-size: 13px;\n  padding: 1px 5px 2px 5px;\n  color: rgba(181, 184, 217, 1);\n  cursor: pointer;\n}\n.manu-up-active[data-v-2534dd02]{\n  border: 1px solid rgba(231, 125, 0, 1);\n  color:rgba(231, 125, 0, 1);\n}\n.manu-back-active[data-v-2534dd02]{\n  border: 1px solid rgba(240, 8, 8, 1);\n  color:rgba(240, 8, 8, 1);\n}\n.delete-active[data-v-2534dd02]{\n  border:1px solid rgba(105, 78, 255, 1);\n  color: rgba(105, 78, 255, 1);\n}\n.date-left[data-v-2534dd02]{\n  margin-left: 28px;\n}\n.pagination[data-v-2534dd02] {\n  display: -webkit-box;\n  -webkit-box-pack: end;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSublive/src/components/manageSublive/subliveList.vue"],names:[],mappings:";AAipBA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;CACA;AACA;EACA,sBAAA;EACA,YAAA;EACA,aAAA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;EACA,yBAAA;EACA,8BAAA;EACA,gBAAA;CACA;AACA;EACA,uCAAA;EACA,2BAAA;CACA;AACA;EACA,qCAAA;EACA,yBAAA;CACA;AACA;EACA,uCAAA;EACA,6BAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,qBAAA;EACA,sBAAA;CACA",file:"subliveList.vue",sourcesContent:['<template>\n  <div class="sublive">\n    <div>\n      <circle-title\n        title-name="点播管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="subLive"\n          class="demo-form-inline">\n          <el-form-item\n            label="稿件主题"\n            style="margin-left: -29px">\n            <el-input\n              v-model="subLive.title"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="频道"\n            prop="channelid">\n            <el-select\n              v-model="subLive.channelid"\n              filterable\n              clearable\n              placeholder=""\n              @clear="getSubLiveList"\n              @change="getSubLiveList">\n              <el-option\n                v-for="(item, index) in channelTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="subLive.state"\n              placeholder=""\n              @change="getSubLiveList">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="0"\n                label="待上线"/>\n              <el-option\n                :value="1"\n                label="已上线"/>\n              <el-option\n                :value="2"\n                label="已下线"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间">\n            <el-date-picker\n              :title="subLive.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="subLive.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="getSubLiveList"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            class="date-left"\n            style="margin-left:0px">\n            <el-date-picker\n              :title="subLive.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="subLive.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="getSubLiveList"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 10px"\n            @click="getSubLiveList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="归属频道"\n          align="center">\n          <template slot-scope="scope">\n            <el-tag\n              v-if="showNullTag(scope.row.channelList)"\n              size="mini">无</el-tag>\n            <el-tooltip\n              :content="showChannelAllName(scope.row.channelList)"\n              :key="scope.row.videoid"\n              class="item"\n              effect="dark"\n              placement="top-start">\n              <el-tag\n                v-for="(item, index) in scope.row.channelList"\n                :key="index"\n                size="mini">\n                {{ channelTagContent(item) }}\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="置顶状态"\n          align="center">\n          <template slot-scope="scope">\n            <el-tooltip\n              v-if="!scope.row.top"\n              class="item"\n              effect="dark"\n              content="点击置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;"\n                @click.native="setSubLiveUnTop(scope.row)">\n                置顶\n              </el-tag>\n            </el-tooltip>\n            <el-tooltip\n              v-else\n              class="item"\n              effect="dark"\n              content="点击取消置顶"\n              placement="top">\n              <el-tag\n                size="mini"\n                class="setPointer"\n                style="width:60px;color:#694eff"\n                @click.native="setSubLiveTop(scope.row)">\n                取消置顶\n              </el-tag>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="上稿/撤稿"\n          align="center">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                :class="[\'manu\', scope.row.state !== 1 && scope.row.channelList.length > 0 ? \'manu-up-active\': \'\']"\n                @click="upSubLive(scope.row)">\n                上稿\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state === 1 ? \'manu-back-active\': \'\']"\n                @click="downSubLive(scope.row)">\n                撤稿\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label="操作"\n          align="center">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="settingSubLive(scope.row)">\n                配置\n              </span>\n              <span\n                :class="[\'manu\', scope.row.state !== 1 ? \'delete-active\': \'\']"\n                @click="deleteSubLive(scope.row)">\n                删除\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          fixed="right"\n          label="权限配置"\n          align="center"\n          width="115">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="评论"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_comment ? \'#ffa507\': \'#B5B8D9\'}"\n                class="allow_comment"\n                @click="handleComment(scope.row)"\n              >\n                <i\n                  style="color: white"\n                  class="iconfont icon-manu-comment"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="分享"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_share ? \'#1883FF\': \'#B5B8D9\'}"\n                class="allow_share"\n                @click="handleShare(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-share"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="点赞"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_like ? \'#F00808\': \'#B5B8D9\'}"\n                class="allow_like"\n                @click="handlePraise(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-praise"/>\n              </div>\n            </el-tooltip>\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="收藏"\n              placement="top">\n              <div\n                :style="{backgroundColor: scope.row.allow_collect ? \'#694EFF\': \'#B5B8D9\'}"\n                class="allow_collect"\n                @click="handleCollect(scope.row)">\n                <i\n                  style="color: white"\n                  class="iconfont icon-collect"/>\n              </div>\n            </el-tooltip>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      custom-class="custom-dialog"\n      title="点播信息配置"\n      width="38%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        :videoid="videoid"\n        :manu-title="manuTitle"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport SettingManu from \'./settingManu\'\nimport * as Actions from \'@/api/demand-channel\'\nexport default {\n  components: {\n    CircleTitle,\n    SettingManu\n  },\n  data () {\n    return {\n      subLive: {\n        channel_name: \'\',\n        state: \'\',\n        startDate: \'\',\n        endDate: \'\',\n        channelid: \'\',\n        title: \'\'\n      },\n      channelTypeList: [], // 所属频道列表\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'title\',\n          label: \'稿件主题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'推送日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'digest\',\n          label: \'稿件内容\'\n        },\n        {\n          prop: \'play_url\',\n          label: \'默认视频链接\',\n          formatter: (row, column, cellValue, index) => {\n            return <a href={cellValue} target=\'_blank\'>{cellValue}</a>\n          }\n        },\n        {\n          prop: \'state\',\n          label: \'状态\',\n          width: \'100\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 0) {\n              return \'待上线\'\n            } else if (cellValue === 1) {\n              return \'已上线\'\n            } else if (cellValue === 2) {\n              return \'已下线\'\n            }\n          }\n        }\n      ],\n      tableData: [],\n      comment: false,\n      share: false,\n      praise: false,\n      collect: false,\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      dialogVisible: false,\n      componentName: \'\',\n      videoid: \'0\',\n      manuTitle: \'\' // 稿件主题, 传给子组件\n    }\n  },\n  computed: {\n    showNullTag () {\n      return function (arr) {\n        if (!arr) {\n          return true\n        } else if (arr.length <= 0) {\n          return true\n        } else {\n          return false\n        }\n      }\n    },\n    channelTagContent () {\n      return function (content) {\n        if (content) {\n          if (content.channel_name === \'\') {\n            return \'无\'\n          } else {\n            return content.channel_name\n          }\n        } else {\n          return \'无\'\n        }\n      }\n    },\n    showChannelAllName () {\n      return function (arr) {\n        let title = \'\'\n        arr.forEach((item, index, arr) => {\n          if (index !== arr.length - 1) {\n            title += item.channel_name + \',\'\n          } else {\n            title += item.channel_name\n          }\n        })\n        return title\n      }\n    }\n  },\n  watch: {\n    \'subLive.title\' () {\n      this.getSubLiveList()\n    }\n  },\n  mounted () {\n    this.getSubLiveList()\n    this.getListUsableChannel()\n  },\n  methods: {\n    /** 获取稿件列表 **/\n    getSubLiveList () {\n      this.$options.filters[\'swapTime\'](this.subLive)\n      let timeStart = this.subLive.startDate !== null ? new Date(this.subLive.startDate).getTime() : null\n      let timeEnd = this.subLive.endDate !== null ? new Date(this.subLive.endDate).getTime() : null\n      Actions.getSubLiveList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.subLive.channelid,\n        \'title\': this.subLive.title,\n        \'state\': this.subLive.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          console.log(data)\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getSubLiveUsableChannnel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getSubLiveList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getSubLiveList()\n    },\n    /** 评论权限 **/\n    handleComment (row) {\n      if (row.state !== 1) {\n        if (row.allow_comment) {\n          this.updateSubLive(row.videoid, \'allow_comment\', false)\n        } else {\n          this.updateSubLive(row.videoid, \'allow_comment\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作评论权限!\'\n        })\n      }\n    },\n    /** 分享权限 **/\n    handleShare (row) {\n      if (row.state !== 1) {\n        if (row.allow_share) {\n          this.updateSubLive(row.videoid, \'allow_share\', false)\n        } else {\n          this.updateSubLive(row.videoid, \'allow_share\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作分享权限!\'\n        })\n      }\n    },\n    /** 点赞权限 **/\n    handlePraise (row) {\n      if (row.state !== 1) {\n        if (row.allow_like) {\n          this.updateSubLive(row.videoid, \'allow_like\', false)\n        } else {\n          this.updateSubLive(row.videoid, \'allow_like\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作点赞权限!\'\n        })\n      }\n    },\n    /** 收藏权限 **/\n    handleCollect (row) {\n      if (row.state !== 1) {\n        if (row.allow_collect) {\n          this.updateSubLive(row.videoid, \'allow_collect\', false)\n        } else {\n          this.updateSubLive(row.videoid, \'allow_collect\', true)\n        }\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可操作收藏权限!\'\n        })\n      }\n    },\n    /** 置顶 **/\n    setSubLiveUnTop (row) {\n      this.updateSubLive(row.videoid, \'top\', true)\n    },\n    /** 取消置顶 **/\n    setSubLiveTop (row) {\n      this.updateSubLive(row.videoid, \'top\', false)\n    },\n    /** 上稿 **/\n    upSubLive (row) {\n      if (row.channelList.length <= 0) {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件还没有配置频道, 不能上稿!\'\n        })\n        return false\n      }\n      if (row.state === 0 || row.state === 2) {\n        this.$confirm(\'确定要上稿吗?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          this.updateSubLive(row.videoid, \'state\', 1)\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件已上线!\'\n        })\n      }\n    },\n    /** 撤稿 **/\n    downSubLive (row) {\n      if (row.state === 1) {\n        this.$confirm(\'确定要撤稿吗?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          this.updateSubLive(row.videoid, \'state\', 2)\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'该稿件还未上稿!\'\n        })\n      }\n    },\n    /** 配置点播 **/\n    settingSubLive (row) {\n      if (row.state !== 1) {\n        this.dialogVisible = true\n        this.componentName = SettingManu\n        this.videoid = row.videoid\n        this.manuTitle = row.title\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'请撤稿后再配置!\'\n        })\n      }\n    },\n    /** 删除稿件 **/\n    deleteSubLive (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.title + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteSubLive({\n            \'video\': {\n              \'videoid\': row.videoid\n            }\n          }).then((res) => {\n            if (res.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getSubLiveList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'已上线稿件不可删除!\'\n        })\n      }\n    },\n    /**\n       * 点播操作的公共接口\n       * @param articleid 文章ID\n       * @param key 更新字段名\n       * @param value 值\n       */\n    updateSubLive (videoid, key, value) {\n      Actions.updateSubLive({\n        \'video\': {\n          \'videoid\': videoid,\n          [key]: value\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'操作成功!\'\n          })\n          this.getSubLiveList()\n        }\n      })\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      this.articleidList = []\n      selection.forEach((item, index, arr) => {\n        this.articleidList.push(item.articleid)\n      })\n      this.selectedManuInfo = selection\n    },\n    /** 关闭对话框 **/\n    closeDialog () {\n      this.componentName = \'\'\n      this.getSubLiveList()\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .manu{\n    display: inline-block;\n    width: 30px;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n  .date-left{\n    margin-left: 28px;\n  }\n  .pagination {\n    display: -webkit-box;\n    -webkit-box-pack: end;\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n  .custom-dialog .el-dialog__header{\n    /*padding: 0;*/\n    border-bottom: 1px solid rgba(192,190,255,1);\n  }\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .sublive .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .sublive .search-form-container .el-form-item {\n    width: 20%;\n  }\n  .sublive .allow_comment {\n    background-color: #ffa507;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .sublive .allow_share {\n    background-color: #1883FF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .sublive .allow_like {\n    background-color: #F00808;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n  .sublive .allow_collect {\n    background-color: #694EFF;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    -moz-border-radius: 50%;\n    -webkit-border-radius: 50%;\n    float: left;\n    margin-left: 3px;\n  }\n</style>\n'],sourceRoot:""}])},vrkP:function(e,n,t){var a=t("g5CB");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("706eb2fa",a,!1,{})},"w+Ia":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.table-list[data-v-1f762ffe] {\n  min-height: 400px;\n  margin-top: 10px;\n  padding: 0px;\n}\n.whole-table[data-v-1f762ffe] {\n  width: 100%;\n  border: 1px solid rgba(218, 222, 223, 1);\n  min-height: 25vw;\n}\n.pagination[data-v-1f762ffe] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  margin-top: 10px;\n}\n.addUrl .btn-container[data-v-1f762ffe] {\n  width: 23% !important;\n  left: 0px;\n}\n\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSlide/src/components/manageSlide/addTopic.vue"],names:[],mappings:";AAqPA;EACA,kBAAA;EACA,iBAAA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,yCAAA;EACA,iBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;EACA,iBAAA;CACA;AACA;EACA,sBAAA;EACA,UAAA;CACA",file:"addTopic.vue",sourcesContent:['<template>\n  <div class="addUrl">\n    <el-form\n      :inline="true"\n      :model="topicForm"\n      size="small"\n      class="demo-form-inline">\n      <el-form-item label="专题标题">\n        <el-input\n          v-model="topicForm.special_name"\n          clearable/>\n      </el-form-item>\n      <el-form-item label="归属频道">\n        <el-select\n          v-model="topicForm.channelid"\n          filterable\n          clearable\n          placeholder=""\n          @clear="searchSpecial"\n          @change="searchSpecial">\n          <el-option\n            v-for="(item, index) in listUsableChannel"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="开始时间"\n        class="date-left">\n        <el-date-picker\n          :title="topicForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n          v-model="topicForm.startDate"\n          type="datetime"\n          format="yyyy-MM-dd HH:mm"\n          placeholder="选择日期"\n          @change="searchSpecial"/>\n      </el-form-item>\n      <el-form-item\n        label="结束时间"\n        class="date-left">\n        <el-date-picker\n          :title="topicForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n          v-model="topicForm.endDate"\n          format="yyyy-MM-dd HH:mm"\n          type="datetime"\n          placeholder="选择日期"\n          @change="searchSpecial"/>\n      </el-form-item>\n      <el-form-item class="btn-container">\n        <el-button\n          type="primary"\n          @click="searchSpecial">\n          查询\n          <i class="el-icon-search el-icon--right"/>\n        </el-button>\n      </el-form-item>\n    </el-form>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        size="small"\n        @select="select"\n        @select-all="selectAll">\n        <el-table-column\n          type="selection"\n          align="center"\n          width="55"/>\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n      </el-table>\n      <div class="pagination">\n        <el-button\n          type="primary"\n          size="small"\n          @click="notifyParentSelectedRow">确定</el-button>\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/topicApi\'\nexport default {\n  name: \'AddTopic\',\n  data () {\n    return {\n      topicForm: {\n        channelid: \'\',\n        channel_name: \'\',\n        special_name: \'\',\n        daterange: [],\n        startDate: \'\',\n        endDate: \'\'\n      },\n      tableHeader: [\n        {\n          prop: \'special_name\',\n          label: \'专题标题\'\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'channel_name\',\n          label: \'归属频道\'\n        },\n        {\n          prop: \'expiry_date_start\',\n          label: \'有效日期\',\n          formatter: (row, column, cellValue, index) => {\n            let startDate = this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n            let endDate = this.$options.filters[\'FormatDate\'](row.expiry_date_end, \'yyyy-MM-dd hh:mm\')\n            return startDate + \'至\' + endDate\n          }\n        }\n      ],\n      tableData: [],\n      listUsableChannel: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      selectRow: []\n    }\n  },\n  watch: {\n    \'topicForm.special_name\' () {\n      this.searchSpecial()\n    }\n  },\n  mounted () {\n    /** 获取专题列表 **/\n    this.getTopicList()\n    /** 获取可用频道列表**/\n    this.getListUsableChannel()\n  },\n  methods: {\n    /** 获取专题列表 **/\n    getTopicList () {\n      Actions.getTopicList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'state\': 2\n      }).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          console.log(listData)\n          this.total = listData.total\n        }\n      })\n    },\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        if (res.data.status) {\n          let result = res.data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.listUsableChannel.push(newItem)\n          })\n        }\n      })\n    },\n    onSubmit () {\n      console.log(\'submit!\')\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchSpecial()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.searchSpecial()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    },\n    /** 单选 **/\n    select (selection, row) {\n      this.selectRow = row\n      if (selection.length > 1) {\n        selection.shift()\n      }\n    },\n    /** 全选 **/\n    selectAll (selection) {\n      this.$refs.addManu.clearSelection()\n      this.selectRow = {}\n    },\n    /** 搜索专题 **/\n    searchSpecial () {\n      this.$options.filters[\'swapTime\'](this.topicForm)\n      let timeStart = this.topicForm.startDate !== null ? new Date(this.topicForm.startDate).getTime() : null\n      let timeEnd = this.topicForm.endDate !== null ? new Date(this.topicForm.endDate).getTime() : null\n      Actions.getTopicList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.topicForm.channelid,\n        \'special_name\': this.topicForm.special_name,\n        \'state\': 2,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    /** 通知父组件选择了专题 **/\n    /** 通知父组件选择了哪行专题 **/\n    notifyParentSelectedRow () {\n      this.$emit(\'selected-row\', this.selectRow)\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .table-list {\n    min-height: 400px;\n    margin-top: 10px;\n    padding: 0px;\n  }\n  .whole-table {\n    width: 100%;\n    border: 1px solid rgba(218, 222, 223, 1);\n    min-height: 25vw;\n  }\n  .pagination {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 10px;\n  }\n  .addUrl .btn-container {\n    width: 23% !important;\n    left: 0px;\n  }\n\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px;\n  }\n  .addUrl .el-form-item {\n    margin-left: 0px;\n    margin-bottom: 10px;\n  }\n  .addUrl .el-form {\n    margin-top: 15px;\n  }\n  .addUrl .el-date-editor{\n    width: 85%;\n  }\n  .addUrl .el-form-item {\n    width: 30%;\n    margin-right: 3%;\n  }\n  .addUrl .date {\n    left: 0px;\n    width: 60%;\n  }\n  .addUrl .el-range-editor .el-range-input{\n    width:50%;\n  }\n  .addUrl .btn-container .el-form-item__content {\n    width: 100%;\n  }\n</style>\n'],sourceRoot:""}])},wJKS:function(e,n){},wJZB:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-254bccd8] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-254bccd8]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageLive/src/components/manageLive/liveEdit.vue"],names:[],mappings:";AAyQA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"liveEdit.vue",sourcesContent:['<template>\n  <div class="channel create">\n    <circle-title\n      title-name="编辑直播"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="createForm"\n      :model="createForm"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="直播主题"\n        prop="live_name">\n        <el-input v-model.trim="createForm.live_name"/>\n      </el-form-item>\n      <el-form-item\n        label="图标配置"\n        class="item"\n        prop="icon_url">\n        <el-upload\n          :show-file-list="false"\n          :action="getUploadUrl"\n          :headers="uploadHeaders"\n          :on-success="handlePcAvatarSuccess"\n          :before-upload="beforeAvatarUpload"\n          class="avatar-uploader">\n          <img\n            v-if="createForm.icon_url"\n            :src="createForm.icon_url"\n            class="avatar">\n          <i\n            v-else\n            class="el-icon-plus avatar-uploader-icon"/>\n        </el-upload>\n      </el-form-item>\n      <el-form-item\n        label="直播周期"\n        prop="channel_name">\n        <el-date-picker\n          v-model="createForm.liveRange"\n          :clearable="false"\n          type="datetimerange"\n          format="yyyy-MM-dd HH:mm"\n          style="width:100%"\n          range-separator="至"\n          start-placeholder="开始日期"\n          end-placeholder="结束日期"/>\n      </el-form-item>\n      <el-form-item\n        label="内容链接"\n        prop="url">\n        <el-input v-model="createForm.url"/>\n      </el-form-item>\n      <el-form-item\n        label="是否置顶"\n        prop="fixed">\n        <el-select\n          v-model="createForm.isTop"\n          placeholder="请选择">\n          <el-option\n            :value="true"\n            label="是"/>\n          <el-option\n            :value="false"\n            label="否"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item label="权限配置">\n        <el-checkbox\n          v-model="createForm.isComment"\n          label="评论"/>\n        <el-checkbox\n          v-model="createForm.isShare"\n          label="分享"\n          name="auth"/>\n        <el-checkbox\n          v-model="createForm.isCollect"\n          label="收藏"\n          name="auth"/>\n        <el-checkbox\n          v-model="createForm.isPraise"\n          label="点赞"\n          name="auth"/>\n      </el-form-item>\n      <el-form-item label="是否上稿">\n        <el-radio-group\n          v-model="createForm.state">\n          <el-radio\n            :label="1">\n            是\n          </el-radio>\n          <el-radio\n            :label="0">\n            否\n          </el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'createForm\')">提交</el-button>\n        <el-button @click="gotoList">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/liveApi\'\nimport uploadHeaders from \'@/mixins\'\nexport default {\n  components: {\n    CircleTitle\n  },\n\n  mixins: [uploadHeaders],\n\n  data () {\n    var checkUrl = (rule, value, callback) => {\n      // eslint-disable-next-line\n      var match =  /^((ht|f)tps?):\\/\\/([\\w\\-]+(\\.[\\w\\-]+)*\\/)*[\\w\\-]+(\\.[\\w\\-]+)*\\/?(\\?([\\w\\-\\.,@?^=%&:\\/~\\+#]*)+)?/\n      if (!match.test(value)) {\n        return callback(new Error(\'请输入正确的地址\'))\n      }\n      callback()\n    }\n    return {\n      createForm: {\n        live_name: \'\',\n        icon_url: \'\',\n        url: \'\',\n        isTop: false,\n        liveRange: [],\n        isComment: false,\n        isShare: false,\n        isPraise: false,\n        isCollect: false,\n        state: 1\n      },\n      rules: {\n        live_name: [\n          { required: true, message: \'请输入直播主题\', trigger: \'blur\' }\n        ],\n        url: [\n          { validator: checkUrl, trigger: \'blur\' }\n        ],\n        icon_url: [\n          { required: true, message: \'请上传图片\', trigger: \'blur\' }\n        ]\n      },\n      liveid: \'\',\n      isRefresh: true\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },  \n  mounted () {\n    this.getLiveEditInfoById()\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/live/list\') {\n      to.meta.refresh = this.isRefresh\n    } else if (to.path === \'/live/create\') {\n      this.$root.eventHub.$emit(\'reset-options\')\n    }\n    next()\n  },\n  methods: {\n    getLiveEditInfoById () {\n      this.liveid = sessionStorage.getItem(\'liveid\')\n      Actions.getEditLiveInfoById({\n        \'liveBroadcast\': {\n          \'liveid\': this.liveid\n        }\n      }).then(res => {\n        if (res.data.status) {\n          let liveRange = []\n          let data = res.data.result\n          this.createForm.live_name = data.live_name\n          this.createForm.icon_url = data.live_head_url\n          this.createForm.url = data.live_url\n          liveRange[0] = new Date(data.expiry_date_start)\n          liveRange[1] = new Date(data.expiry_date_end)\n          this.$set(this.createForm, \'liveRange\', liveRange)\n          this.createForm.isTop = data.top\n          this.createForm.isComment = data.allow_comment\n          this.createForm.isShare = data.allow_share\n          this.createForm.isCollect = data.allow_collect\n          this.createForm.isPraise = data.allow_like\n          this.createForm.state = data.state\n        }\n      })\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          Actions.updateLive({\n            \'liveBroadcast\': {\n              \'liveid\': this.liveid,\n              \'live_name\': this.createForm.live_name,\n              \'live_head_url\': this.createForm.icon_url,\n              \'live_url\': this.createForm.url,\n              \'expiry_date_start\': this.createForm.liveRange[0].getTime(),\n              \'expiry_date_end\': this.createForm.liveRange[1].getTime(),\n              \'top\': this.createForm.isTop,\n              \'allow_comment\': this.createForm.isComment,\n              \'allow_share\': this.createForm.isShare,\n              \'allow_like\': this.createForm.isPraise,\n              \'allow_collect\': this.createForm.isCollect,\n              \'state\': this.createForm.state\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/live/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'编辑成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n\n    gotoList () {\n      this.isRefresh = false\n      this.$router.push({path: \'/live/list\'})\n    },\n\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.createForm.icon_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},wM3z:function(e,n){},wR0k:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.home-wrapper[data-v-7eb2bc79] {\n  padding: 40px 28px;\n  overflow-x: hidden;\n}\n.home-wrapper .cicle-container[data-v-7eb2bc79] {\n  margin-left: 0px !important;\n  margin-bottom: 47px !important;\n}\n.items-wrapper[data-v-7eb2bc79] {\n  padding-top: 20px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  padding: 0 40px;\n}\n.inner-block[data-v-7eb2bc79] {\n  padding: 10px;\n  border: 1px solid #f5f5f5;\n}\n.home-count[data-v-7eb2bc79] {\n  margin: 48px auto;\n}\n.items-line2[data-v-7eb2bc79] {\n  margin-top: 15px;\n}\n/*# sourceMappingURL=src/views/home.css.map */","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/views/src/views/home.vue","/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/views/home.vue"],names:[],mappings:";AA6JA;EACE,mBAAA;EACA,mBAAA;CC5JD;AD6JC;EACE,4BAAA;EACA,+BAAA;CC3JH;AD4JD;EACE,kBAAA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,0BAAA;MAAA,8BAAA;EACA,oBAAA;MAAA,gBAAA;EACA,gBAAA;CC1JD;AD2JD;EACE,cAAA;EACA,0BAAA;CCzJD;AD0JD;EACE,kBAAA;CCxJD;ADyJD;EACE,iBAAA;CCvJD;AACD,8CAA8C",file:"home.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.home-wrapper\n  padding 40px 28px\n  overflow-x hidden\n  .cicle-container\n    margin-left 0px!important\n    margin-bottom 47px!important\n.items-wrapper\n  padding-top 20px\n  display flex\n  justify-content space-around\n  flex-wrap wrap\n  padding 0 40px\n.inner-block\n  padding 10px\n  border 1px solid rgba(245,245,245,1)\n.home-count\n  margin 48px auto\n.items-line2\n  margin-top 15px\n",".home-wrapper {\n  padding: 40px 28px;\n  overflow-x: hidden;\n}\n.home-wrapper .cicle-container {\n  margin-left: 0px !important;\n  margin-bottom: 47px !important;\n}\n.items-wrapper {\n  padding-top: 20px;\n  display: flex;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  padding: 0 40px;\n}\n.inner-block {\n  padding: 10px;\n  border: 1px solid #f5f5f5;\n}\n.home-count {\n  margin: 48px auto;\n}\n.items-line2 {\n  margin-top: 15px;\n}\n/*# sourceMappingURL=src/views/home.css.map */"],sourceRoot:""}])},wlbC:function(e,n){},wu8V:function(e,n,t){var a=t("m3c8");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("d9724800",a,!1,{})},xJQC:function(e,n,t){var a=t("Dnvh");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("6c22340b",a,!1,{})},xUZq:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-4e77c484]{\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.limit .search-form-container .el-form-item[data-v-4e77c484] {\n  width: 20%;\n}\n.manu[data-v-4e77c484]{\n  display: inline-block;\n  width: auto;\n  height: 20px;\n  border:1px solid rgba(181, 184, 217, 1);\n  border-radius: 20px;\n  font-size: 13px;\n  padding: 1px 5px 2px 5px;\n  color: rgba(181, 184, 217, 1);\n  cursor: pointer;\n}\n.manu-up-active[data-v-4e77c484]{\n  border: 1px solid rgba(231, 125, 0, 1);\n  color:rgba(231, 125, 0, 1);\n}\n.manu-back-active[data-v-4e77c484]{\n  border: 1px solid rgba(240, 8, 8, 1);\n  color:rgba(240, 8, 8, 1);\n}\n.delete-active[data-v-4e77c484]{\n  border:1px solid rgba(105, 78, 255, 1);\n  color: rgba(105, 78, 255, 1);\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageComment/src/components/manageComment/limitList.vue"],names:[],mappings:";AAqRA;EACA,0BAAA;MAAA,uBAAA;UAAA,+BAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,sBAAA;EACA,YAAA;EACA,aAAA;EACA,wCAAA;EACA,oBAAA;EACA,gBAAA;EACA,yBAAA;EACA,8BAAA;EACA,gBAAA;CACA;AACA;EACA,uCAAA;EACA,2BAAA;CACA;AACA;EACA,qCAAA;EACA,yBAAA;CACA;AACA;EACA,uCAAA;EACA,6BAAA;CACA",file:"limitList.vue",sourcesContent:['<template>\n  <div class="limit">\n    <div>\n      <circle-title\n        title-name="禁言管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="forbiddenComment"\n          class="demo-form-inline">\n          <el-form-item label="用户名">\n            <el-input\n              v-model="forbiddenComment.user_nickname"\n              clearable/>\n          </el-form-item>\n          <el-form-item label="注册手机">\n            <el-input\n              v-model="forbiddenComment.user_phone"\n              clearable/>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            style="position: relative">\n            <el-date-picker\n              :title="forbiddenComment.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="forbiddenComment.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"/>\n          </el-form-item>\n          <el-form-item\n            label="结束时间"\n            style="margin-left: -14px">\n            <el-date-picker\n              :title="forbiddenComment.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="forbiddenComment.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 82px"\n            @click="getForbiddenCommentList">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @select-all="selectAll"\n        @selection-change="selectionChange">\n        <el-table-column\n          type="selection"\n          align="center"\n          width="55"/>\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          label="操作"\n          align="center"\n          width="250">\n          <template slot-scope="scope">\n            <span class="manu-container">\n              <span\n                class="manu delete-active"\n                @click="cancelForbidden(scope.row)">\n                取消禁言\n              </span>\n            </span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <div>\n          <el-checkbox\n            v-model="selfSelectAll"\n            @change="toggleAllSelection">\n            全选\n          </el-checkbox>\n          <el-button\n            type="primary"\n            size="medium"\n            @click="cancelManyForbiddenComment">批量取消禁言</el-button>\n          <el-button\n            v-show="1 === 2"\n            type="primary"\n            size="medium"\n            @click="cancelManyForbiddenComment">导出数据</el-button>\n        </div>\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/commentApi\'\nimport Audit from \'./audit\'\nexport default {\n  components: {\n    CircleTitle,\n    Audit\n  },\n  data () {\n    return {\n      forbiddenComment: {\n        user_nickname: \'\',\n        user_phone: \'\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'user_nickname\',\n          label: \'昵称\'\n        },\n        {\n          prop: \'user_phone\',\n          label: \'电话\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'禁言开始时间\',\n          width: 200,\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        }\n      ],\n      tableData: [],\n      index: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      selfSelectAll: false, // 自定义的全选\n      cancelForbiddenCommentList: [],\n      selectionForbidden: []\n    }\n  },\n  watch: {\n    \'forbiddenComment.user_nickname\' () {\n      this.getForbiddenCommentList()\n    },\n    \'forbiddenComment.user_phone\' () {\n      this.getForbiddenCommentList()\n    }\n  },\n  mounted () {\n    this.getForbiddenCommentList()\n  },\n  methods: {\n    /** 获取禁言列表 **/\n    getForbiddenCommentList () {\n      this.$options.filters[\'swapTime\'](this.forbiddenComment)\n      let timeStart = this.forbiddenComment.startDate !== null ? new Date(this.forbiddenComment.startDate).getTime() : null\n      let timeEnd = this.forbiddenComment.endDate !== null ? new Date(this.forbiddenComment.endDate).getTime() : null\n      Actions.getPageForbiddenComment({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'user_nickname\': this.forbiddenComment.user_nickname,\n        \'user_phone\': this.forbiddenComment.user_phone,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.getForbiddenCommentList()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getForbiddenCommentList()\n    },\n    /** 获取全选的数据 **/\n    selectAll (e) {\n      if (e.length > 0) {\n        this.selfSelectAll = true\n      } else {\n        this.selfSelectAll = false\n      }\n    },\n    /** 获取所有选择的稿件ID **/\n    selectionChange (selection) {\n      this.cancelForbiddenCommentList = []\n      selection.forEach((item, index, arr) => {\n        this.cancelForbiddenCommentList.push(item.userid)\n      })\n      this.selectionForbidden = selection\n    },\n    /** 取消禁言 **/\n    cancelForbidden (row) {\n      Actions.cancelForbiddenComment({\n        \'forbiddenCommentVo\': {\n          \'userid\': row.userid\n        }\n      }).then(res => {\n        if (res.data.status) {\n          this.$message({\n            type: \'success\',\n            message: \'已取消禁言\'\n          })\n          this.getForbiddenCommentList()\n        }\n      })\n    },\n    /** 批量取消禁言 **/\n    cancelManyForbiddenComment () {\n      if (this.cancelForbiddenCommentList.length <= 0) {\n        this.$message({\n          type: \'error\',\n          message: \'请至少选择一个用户!\'\n        })\n        return false\n      }\n      let tipContent = \'您即将取消\'\n      /** 已上线的稿件不可删除的提示 **/\n      this.selectionForbidden.forEach((item, index, arr) => {\n        tipContent += \'(\' + item.user_nickname + \')\'\n      })\n      this.$confirm(tipContent + \'的禁言?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\'\n      }).then(() => {\n        Actions.batchDeleteForbiddenComment({\n          \'idList\': this.cancelForbiddenCommentList\n        }).then((res) => {\n          if (res.data.status) {\n            this.$message({\n              type: \'success\',\n              message: \'批量取消禁言成功!\'\n            })\n          }\n          this.getForbiddenCommentList()\n        })\n      }).catch(() => {\n      })\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: space-between;\n  }\n  .limit .search-form-container .el-form-item {\n    width: 20%;\n  }\n  .manu{\n    display: inline-block;\n    width: auto;\n    height: 20px;\n    border:1px solid rgba(181, 184, 217, 1);\n    border-radius: 20px;\n    font-size: 13px;\n    padding: 1px 5px 2px 5px;\n    color: rgba(181, 184, 217, 1);\n    cursor: pointer;\n  }\n  .manu-up-active{\n    border: 1px solid rgba(231, 125, 0, 1);\n    color:rgba(231, 125, 0, 1);\n  }\n  .manu-back-active{\n    border: 1px solid rgba(240, 8, 8, 1);\n    color:rgba(240, 8, 8, 1);\n  }\n  .delete-active{\n    border:1px solid rgba(105, 78, 255, 1);\n    color: rgba(105, 78, 255, 1);\n  }\n</style>\n<style>\n  .search-form-container .btn-container .el-button{\n    padding: 12px 10px;\n  }\n  .search-form-container .btn-container .el-icon--right{\n    margin: 0;\n  }\n  .custom-dialog .el-dialog__header{\n    /*padding: 0;*/\n    border-bottom: 1px solid rgba(192,190,255,1);\n  }\n  .el-tooltip__popper{\n    max-width: 300px;\n  }\n  .limit .el-form--inline .el-form-item__content {\n    width: 70% !important;\n  }\n  .limit .search-form-container .el-form-item {\n    width: 30% !important;\n  }\n</style>\n'],sourceRoot:""}])},yRe9:function(e,n,t){var a=t("XNDt");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("6fd62580",a,!1,{})},ylrw:function(e,n){},ywmh:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.pagination[data-v-00dae50c]{\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n}\n.slide-end-date-item[data-v-00dae50c]{\n  margin-left: -29px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSlide/src/components/manageSlide/slideList.vue"],names:[],mappings:";AAudA;EACA,sBAAA;MAAA,mBAAA;UAAA,0BAAA;CACA;AACA;EACA,mBAAA;CACA",file:"slideList.vue",sourcesContent:['<template>\n  <div class="slide">\n    <div>\n      <circle-title\n        title-name="轮播图管理"\n        class="cicle-controller"\n      />\n      <div class="search-form-container">\n        <el-form\n          :inline="true"\n          :model="slideForm"\n          class="demo-form-inline">\n          <el-form-item label="标题">\n            <el-input\n              v-model="slideForm.chart_name"\n              clearable/>\n          </el-form-item>\n          <el-form-item label="归属频道">\n            <el-select\n              v-model="slideForm.channelid"\n              filterable\n              clearable\n              placeholder=""\n              @change="searchSlide"\n              @clear="searchSlide">\n              <el-option\n                v-for="(item, index) in channelTypeList"\n                :key="index"\n                :value="item.value"\n                :label="item.label"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="状态"\n            class="search-left">\n            <el-select\n              v-model="slideForm.state"\n              placeholder=""\n              @change="searchSlide">\n              <el-option\n                value=""\n                label="全部"/>\n              <el-option\n                :value="1"\n                label="待上线"/>\n              <el-option\n                :value="2"\n                label="已上线"/>\n              <el-option\n                :value="3"\n                label="过期"/>\n              <el-option\n                :value="0"\n                label="停用"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item\n            label="开始时间"\n            style="margin-left: -29px">\n            <el-date-picker\n              :title="slideForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="slideForm.startDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchSlide"/>\n          </el-form-item>\n          <el-form-item\n            class="slide-end-date-item"\n            label="结束时间"\n            style="margin-left: 29px">\n            <el-date-picker\n              :title="slideForm.endDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n              v-model="slideForm.endDate"\n              type="datetime"\n              format="yyyy-MM-dd HH:mm"\n              placeholder="选择时间"\n              @change="searchSlide"/>\n          </el-form-item>\n          <el-button\n            type="primary"\n            style="margin-left: 40px"\n            @click="searchSlide">\n            查询\n            <i class="el-icon-search el-icon--right"/>\n          </el-button>\n          <router-link to="/manageSlide/create">\n            <el-button type="primary">\n              添加轮播图\n              <i class="el-icon-plus el-icon--right"/>\n            </el-button>\n          </router-link>\n        </el-form>\n      </div>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="slideTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        @cell-click="cellClick"\n        @cell-mouse-leave="cellMouseLeave">\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n        <el-table-column\n          fixed="right"\n          label="操作"\n          align="center"\n          width="100">\n          <template slot-scope="scope">\n            <el-tooltip\n              class="item"\n              effect="dark"\n              content="修改状态"\n              placement="top">\n              <el-button\n                type="text"\n                size="small"\n                icon="el-icon-remove-outline"\n                @click="changeState(scope.row)"/>\n            </el-tooltip>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-edit"\n              @click="handleEdit(scope.row)"/>\n            <el-button\n              type="text"\n              size="small"\n              icon="el-icon-delete"\n              @click="handleDelete(scope.row)"/>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class="pagination">\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          :current-page="pageNo"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport * as Actions from \'@/api/slideApi\'\nexport default {\n  components: {\n    CircleTitle\n  },\n  data () {\n    return {\n      slideForm: {\n        chart_name: \'\',\n        channelid: \'\',\n        state: \'\',\n        region: \'\',\n        daterange: [],\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\'\n      },\n      clickCellIndex: -1,\n      tableHeader: [\n        {\n          prop: \'chart_name\',\n          label: \'图片标题\'\n        },\n        {\n          prop: \'createtime\',\n          label: \'创建日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'update\' +\n            \'time\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'channel_name\',\n          label: \'归属频道\'\n        },\n        {\n          prop: \'chart_head_url\',\n          label: \'轮播图图片\',\n          formatter: (row, column, cellValue, index) => {\n            return <img class=\'topic-table-pic\' src={cellValue}/>\n          }\n        },\n        {\n          prop: \'jump_type\',\n          label: \'关联内容\',\n          formatter: (row, column, cellValue, index) => {\n            if (cellValue === 1 && row.title) {\n              return \'稿件-\' + row.title\n            } else if (cellValue === 2 && row.special_name) {\n              return \'专题-\' + row.special_name\n            } else {\n              return \'无\'\n            }\n          }\n        },\n        {\n          prop: \'expiry_date_start\',\n          label: \'有效期\',\n          formatter: (row, column, cellValue, index) => {\n            let startDate = this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n            let endDate = this.$options.filters[\'FormatDate\'](row.expiry_date_end, \'yyyy-MM-dd hh:mm\')\n            return startDate + \'至\' + endDate\n          }\n        },\n        {\n          prop: \'showState\',\n          label: \'状态\'\n        },\n        {\n          prop: \'sort\',\n          label: \'排序\',\n          formatter: (row, column, cellValue, index) => {\n            if (index === this.clickCellIndex) {\n              return <input type=\'text\' class=\'self-sort\' id={index} value= {cellValue} autofocus="autofocus" />\n            } else {\n              return <span class=\'sort-container\' data-id={index}>{cellValue}</span>\n            }\n          }\n        }\n      ],\n      tableData: [],\n      sortValue: -1,\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      channelTypeList: [],\n      selectChartId: \'\' // 点击排序行的channelid\n    }\n  },\n  watch: {\n    \'slideForm.chart_name\' () {\n      this.searchSlide()\n    }\n  },\n  mounted () {\n    this.getSlideList()\n    this.getListUsableChannel()\n    this.$root.eventHub.$on(\'reset-options\', () => {\n      this.resetOptions()\n    })\n  },\n  activated () {\n    let meta = this.$route.meta\n    if (meta.hasOwnProperty(\'refresh\') && meta.refresh) {\n      this.getSlideList()\n      delete this.$route.meta.refresh\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/manageSlide/create\') {\n      this.resetOptions()\n    }\n    next()\n  },\n  beforeDestroy () {\n    this.$root.eventHub.$off(\'reset-options\')\n  },\n  methods: {\n    resetOptions () {\n      this.slideForm = {\n        chart_name: \'\',\n        channelid: \'\',\n        state: \'\',\n        region: \'\',\n        daterange: [],\n        sort: \'1\',\n        startDate: \'\',\n        endDate: \'\'\n      }\n      this.pageNo = 1\n      this.getSlideList()\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchSlide()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.getSlideList()\n    },\n    /** 单元格被点击 **/\n    cellClick (row, column, cell, event) {\n      if (event.target.classList.contains(\'sort-container\')) {\n        if (row.state !== 1) {\n          let id = event.target.dataset.id\n          if (id) {\n            this.clickCellIndex = parseInt(id)\n          }\n          this.$nextTick(() => {\n            let inputEles = document.querySelectorAll(\'.el-tooltip > input.self-sort\')\n            inputEles.forEach(element => {\n              if (element) {\n                /** 将channel_id存储起来标识单元行 **/\n                this.selectChartId = row.chartid\n                element.focus()\n                element.onkeyup = (e) => {\n                  if (element.value) {\n                    this.sortValue = parseInt(element.value)\n                  }\n                }\n              }\n            })\n          })\n        } else {\n          this.$message({\n            type: \'error\',\n            message: \'启用状态下不能排序!\'\n          })\n        }\n      }\n    },\n    /** 离开单元格 **/\n    cellMouseLeave (row) {\n      /** 重置单元格状态 **/\n      this.clickCellIndex = -1\n      if (this.sortValue === -1 || this.selectChartId !== row.chartid) return false\n      /** 修改排序 **/\n      Actions.updateSlideSort({\n        \'rotationChart\': {\n          \'chartid\': row.chartid,\n          \'sort\': this.sortValue\n        }\n      }).then((res) => {\n        if (res.status) {\n          this.getSlideList()\n          this.sortValue = -1\n        }\n      })\n    },\n    getSlideList () {\n      let timeStart = this.slideForm.startDate !== null ? new Date(this.slideForm.startDate).getTime() : null\n      let timeEnd = this.slideForm.endDate !== null ? new Date(this.slideForm.endDate).getTime() : null\n      Actions.getSlideList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.slideForm.channelid,\n        \'chart_name\': this.slideForm.chart_name,\n        \'state\': this.slideForm.state,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data.list\n          this.total = data.total\n        }\n      })\n    },\n    /** 修改状态 **/\n    changeState (row) {\n      let state = 0\n      if (row.state === 1) {\n        state = 0\n      } else if (row.state === 0) {\n        state = 1\n      }\n      Actions.updateSlideState({\n        \'rotationChart\': {\n          \'chartid\': row.chartid,\n          \'state\': state\n        }\n      }).then((res) => {\n        if (res.status) {\n          if (state === 0) {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为停用\'\n            })\n          } else {\n            this.$message({\n              type: \'success\',\n              message: \'修改状态为启用\'\n            })\n          }\n          this.getSlideList()\n        }\n      })\n    },\n    /** 删除轮播图 **/\n    handleDelete (row) {\n      if (row.state !== 1) {\n        this.$confirm(\'是否删除"\' + row.chart_name + \'"?\', \'提示\', {\n          confirmButtonText: \'确定\',\n          cancelButtonText: \'取消\',\n          type: \'warning\'\n        }).then(() => {\n          Actions.deleteSlide({\n            \'rotationChart\': {\n              \'chartid\': row.chartid\n            }\n          }).then((res) => {\n            if (res.data.status) {\n              this.$message({\n                type: \'success\',\n                message: \'删除成功!\'\n              })\n            }\n            this.getSlideList()\n          })\n        }).catch(() => {\n        })\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可删除!\'\n        })\n      }\n    },\n    handleEdit (row) {\n      if (row.state !== 1) {\n        sessionStorage.setItem(\'chartid\', row.chartid)\n        this.$router.push({path: \'/manageSlide/edit\'})\n      } else {\n        this.$message({\n          type: \'error\',\n          message: \'启用状态下不可编辑!\'\n        })\n      }\n    },\n    /** 获取频道类别 **/\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    searchSlide () {\n      this.pageNo = 1\n      this.$options.filters[\'swapTime\'](this.slideForm)\n      this.getSlideList()\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .pagination{\n    justify-content: flex-end;\n  }\n  .slide-end-date-item{\n    margin-left: -29px;\n  }\n</style>\n<style>\n  .slide .el-form--inline .el-form-item__content {\n    width: 60%;\n  }\n  .slide .search-form-container .el-form-item {\n    width: 25%;\n  }\n</style>\n'],sourceRoot:""}])},yzdr:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.cicle-controller[data-v-4596064e] {\n  margin-top: 4%;\n}\n.create .sort span[data-v-4596064e]{\n  color: #909090;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSublive/subChannel/src/components/manageSublive/subChannel/channelEdit.vue"],names:[],mappings:";AAmWA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"channelEdit.vue",sourcesContent:['<template>\n  <div class="channel create">\n    <circle-title\n      title-name="频道编辑"\n      class="cicle-controller"\n    />\n    <el-form\n      ref="editFrom"\n      :model="editFrom"\n      :rules="rules"\n      label-width="100px"\n      class="rule-form">\n      <el-form-item\n        label="频道名称"\n        prop="channel_name">\n        <el-input v-model.trim="editFrom.channel_name"/>\n      </el-form-item>\n      <el-form-item\n        label="父级频道"\n        prop="parent_channel_name">\n        <el-select\n          v-model="editFrom.parent_channelid"\n          :disabled="disabledChooseParentChannel"\n          filterable\n          placeholder=""\n          @change="disableIsFixed">\n          <el-option\n            v-for="(item, index) in parentChannelList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="归属类别"\n        prop="channel_type_name">\n        <el-select\n          v-model="editFrom.channel_typeid"\n          filterable\n          placeholder="">\n          <el-option\n            v-for="(item, index) in channelTypeList"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="图标配置"\n        class="item">\n        <div class="icon-choose-container">\n          <div class="moren-icon">\n            <img\n              :src="editFrom.icon_url">\n          </div>\n          <el-button\n            type="primary"\n            @click="chooseIcon">选择图标</el-button>\n        </div>\n      </el-form-item>\n      <el-form-item\n        label="状态选择"\n        prop="state">\n        <el-select\n          v-model="editFrom.state"\n          placeholder="请选择">\n          <el-option\n            :value="1"\n            label="启用"/>\n          <el-option\n            :value="0"\n            label="停用"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="频道简述">\n        <el-input\n          v-model="editFrom.description"\n          type="textarea"/>\n      </el-form-item>\n      <el-form-item\n        label="是否固定"\n        prop="fixed">\n        <el-select\n          :disabled="fixedDisabled"\n          v-model="editFrom.fixed"\n          placeholder="请选择">\n          <el-option\n            :value="true"\n            label="是"/>\n          <el-option\n            :value="false"\n            label="否"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="排序"\n        class="sort"\n        prop="sort">\n        <el-input\n          v-model.number="editFrom.sort"\n          style="width: 75%"/>\n        <span>提示：数字越小越往前</span>\n      </el-form-item>\n      <el-form-item>\n        <el-button\n          type="primary"\n          @click="submitForm(\'editFrom\')">提交</el-button>\n        <el-button @click="gotoList">取消</el-button>\n      </el-form-item>\n    </el-form>\n    <el-dialog\n      :visible.sync="dialogVisible"\n      title="图标选择"\n      width="40%"\n      @close="closeDialog">\n      <div\n        :is="componentName"\n        @submit-icon="submitIcon"/>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport CircleTitle from \'@/components/commons/circleTitle\'\nimport ChooseIcon from \'./chooseIcon\'\nimport * as Actions from \'@/api/demand-channel\'\nexport default {\n  components: {\n    CircleTitle,\n    ChooseIcon\n  },\n  data () {\n    let checkChannelNameLength = (rule, value, callback) => {\n      if (value.length > 10) {\n        return callback(new Error(\'频道名称长度不能超过10\'))\n      } else {\n        return callback()\n      }\n    }\n    return {\n      editFrom: {\n        channel_name: \'\',\n        parent_channel_name: \'\',\n        parent_channelid: \'\',\n        sort: 0,\n        icon_url: \'\',\n        channel_type_name: \'\',\n        state: \'\',\n        description: \'\',\n        fixed: \'\',\n        channel_typeid: \'\'\n      },\n      rules: {\n        channel_name: [\n          { required: true, message: \'请输入频道名称\', trigger: \'blur\' },\n          { validator: checkChannelNameLength, trigger: \'change\' }\n        ],\n        sort: [\n          { required: true, message: \'请输入排序\', trigger: \'blur\' },\n          { type: \'number\', message: \'排序必须为数字\' }\n        ]\n      },\n      channelTypeList: [],\n      parentChannelList: [\n        {\n          label: \'无\',\n          value: \'\'\n        }\n      ],\n      channelid: \'\',\n      disabledChooseParentChannel: false,\n      dialogVisible: false,\n      componentName: \'\',\n      isRefresh: true,\n      fixedDisabled: false\n    }\n  },\n  computed: {\n    getUploadUrl () {\n      return Actions.uploadPicture()\n    }\n  },\n  mounted () {\n    this.getEditInfo()\n    this.getChannelType()\n    this.getParentChannel()\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path === \'/subChannel/list\') {\n      to.meta.refresh = this.isRefresh\n    } else if (to.path === \'/subChannel/create\') {\n      this.$root.eventHub.$emit(\'reset-options\')\n    }\n    next()\n  },\n  methods: {\n    gotoList () {\n      this.isRefresh = false\n      this.$router.push({path: \'/subChannel/list\'})\n    },\n    getEditInfo () {\n      this.channelid = sessionStorage.getItem(\'channelid\')\n      Actions.getChannelByID({\n        \'channel\': {\n          \'channelid\': this.channelid\n        }\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.editFrom.channel_name = data.channel_name\n          this.editFrom.parent_channel_name = data.parent_channel_name\n          this.editFrom.sort = data.sort\n          this.editFrom.icon_url = data.icon_url\n          this.editFrom.channel_type_name = data.channel_type_name\n          this.editFrom.state = data.state\n          this.editFrom.description = data.description\n          this.editFrom.fixed = data.fixed\n          this.editFrom.channel_typeid = data.channel_typeid\n          this.editFrom.parent_channelid = data.parent_channelid\n          if (data.countChildren > 0) {\n            this.disabledChooseParentChannel = true\n          }\n          this.disableIsFixed()\n        }\n      })\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.channelTypeList.forEach((item, index, arr) => {\n            if (item.value === this.editFrom.channel_typeid) {\n              this.editFrom.channel_type_name = item.label\n            }\n          })\n          this.parentChannelList.forEach((item, index, arr) => {\n            if (item.value === this.editFrom.parent_channelid) {\n              this.editFrom.parent_channel_name = item.label\n            }\n          })\n          Actions.editChannel({\n            \'channel\': {\n              \'parent_channelid\': this.editFrom.parent_channelid,\n              \'parent_channel_name\': this.editFrom.parent_channel_name,\n              \'channelid\': this.channelid,\n              \'channel_name\': this.editFrom.channel_name,\n              \'channel_typeid\': this.editFrom.channel_typeid,\n              \'channel_type_name\': this.editFrom.channel_type_name,\n              \'icon_url\': this.editFrom.icon_url,\n              \'state\': this.editFrom.state,\n              \'description\': this.editFrom.description,\n              \'fixed\': this.editFrom.fixed,\n              \'sort\': this.editFrom.sort\n            }\n          }).then((res) => {\n            if (res.status === 200) {\n              this.$router.push({path: \'/subChannel/list\'})\n              this.$notify({\n                title: \'通知\',\n                message: \'编辑成功\',\n                type: \'success\'\n              })\n            }\n          })\n        } else {\n          console.log(\'error submit!!\')\n          return false\n        }\n      })\n    },\n    handlePcAvatarSuccess (res, file) {\n      if (res.status) {\n        let imageUrl = res.result\n        this.editFrom.icon_url = imageUrl\n      }\n    },\n    beforeAvatarUpload (file) {\n      let imageObj = {\n        \'image/jpeg\': true,\n        \'image/png\': true,\n        \'image/jpg\': true\n      }\n      const isImage = file.type in imageObj\n      const isLt2M = file.size / 1024 / 1024 < 2\n      if (!isImage) {\n        this.$message.error(\'请上传图片格式的文件!\')\n      }\n      if (!isLt2M) {\n        this.$message.error(\'上传图片大小不能超过 2MB!\')\n      }\n      return isImage && isLt2M\n    },\n    /** 获取频道类别 **/\n    getChannelType () {\n      Actions.getChannelType().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (index === 0) {\n              /** 默认选择一个类型 **/\n              this.editFrom.channel_typeid = item.channel_typeid\n            }\n            let newItem = {}\n            newItem.label = item.channel_type_name\n            newItem.value = item.channel_typeid\n            this.channelTypeList.push(newItem)\n          })\n        }\n      })\n    },\n    /** 获取父频道 **/\n    getParentChannel () {\n      Actions.listUsableParentChannel().then((res) => {\n        let data = res.data\n        if (data.status) {\n          let result = data.result\n          result.forEach((item, index, arr) => {\n            if (this.channelid !== item.channelid) {\n              let newItem = {}\n              newItem.label = item.channel_name\n              newItem.value = item.channelid\n              this.parentChannelList.push(newItem)\n            }\n          })\n        }\n      })\n    },\n    /** 选取图标 **/\n    chooseIcon () {\n      this.dialogVisible = true\n      this.componentName = \'ChooseIcon\'\n    },\n    closeDialog () {\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    /** 确定图标 **/\n    submitIcon (iconUrl) {\n      this.editFrom.icon_url = iconUrl\n      this.dialogVisible = false\n      this.componentName = \'\'\n    },\n    /** 禁用是否固定按钮, 并让其默认为否 **/\n    disableIsFixed () {\n      if (this.editFrom.parent_channelid) {\n        this.editFrom.fixed = false\n        this.fixedDisabled = true\n      } else {\n        this.fixedDisabled = false\n      }\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .cicle-controller {\n    margin-top: 4%;\n  }\n  .create .sort span{\n    color: #909090;\n  }\n</style>\n'],sourceRoot:""}])},"z/+d":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n#app {\n  font-family: 'MicrosoftYaHei','Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  overflow: hidden;\n}\na {\n  text-decoration: none;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/src/App.vue"],names:[],mappings:";AAqDA;EACA,qEAAA;EACA,oCAAA;EACA,mCAAA;EACA,aAAA;EACA,iBAAA;CACA;AAEA;EACA,sBAAA;CACA",file:"App.vue",sourcesContent:["<template>\n  <div id=\"app\">\n    <layout />\n  </div>\n</template>\n\n<script>\nimport Layout from '@/views/layout'\nimport { getParam } from './helpers'\nimport { getLogUserInfo } from './api/commonApi'\nimport { setAxiosHeaders } from './api'\nexport default {\n  name: 'App',\n  components: {\n    Layout\n  },\n\n  created () {\n    this.getUrlToken()\n  },\n\n  methods: {\n    getUrlToken () {\n      let cacheToken = sessionStorage.getItem('token')\n      if (cacheToken) return // 优先使用缓存中token\n      let curPath = window.location.href\n      let token = getParam('token', curPath)\n      if (token) {\n        sessionStorage.clear()\n        sessionStorage.setItem('token', token)\n        setAxiosHeaders({token})\n        this.getUserInfo()\n      }\n    },\n    getUserInfo () {\n      getLogUserInfo().then(res => {\n        let data = res.data ? res.data.result : {}\n        for (const key in data) {\n          if (data.hasOwnProperty(key)) {\n            const val = data[key]\n            sessionStorage.setItem(key, val)\n          }\n        }\n        this.$root.eventHub.$emit('params-ready')\n      }).catch(err => {\n        console.error(err)\n      })\n    }\n  }\n}\n<\/script>\n\n<style>\n#app {\n  font-family: 'MicrosoftYaHei','Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  overflow: hidden;\n}\n\na {\n  text-decoration: none;\n}\n</style>\n"],sourceRoot:""}])},z2KO:function(e,n){},zJdq:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.el-dialog__header{\n  padding: 13px 30px 13px;\n  border-bottom: 1px solid #C0BEFF;\n  background-color: #F7FAFF;\n}\n.el-dialog__title {\n  line-height: 17px;\n  font-size: 17px;\n  color: #303133;\n}\n.el-dialog__headerbtn {\n  top: 13px;\n}\n.el-dialog__body {\n  padding: 20px 60px;\n}\n.addUrl .el-form-item {\n  margin-left: 0px;\n  margin-bottom: 10px;\n}\n.addUrl .el-form {\n  margin-top: 15px;\n}\n.addUrl .el-date-editor{\n  width: 85%;\n}\n.addUrl .el-form-item {\n  width: 30%;\n  margin-right: 3%;\n}\n.addUrl .date {\n  left: 0px;\n  width: 60%;\n}\n.addUrl .el-range-editor .el-range-input{\n  width:50%;\n}\n.addUrl .btn-container .el-form-item__content {\n  width: 100%;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSlide/src/components/manageSlide/addTopic.vue"],names:[],mappings:";AA2QA;EACA,wBAAA;EACA,iCAAA;EACA,0BAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;EACA,eAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,iBAAA;EACA,oBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,WAAA;EACA,iBAAA;CACA;AACA;EACA,UAAA;EACA,WAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,YAAA;CACA",file:"addTopic.vue",sourcesContent:['<template>\n  <div class="addUrl">\n    <el-form\n      :inline="true"\n      :model="topicForm"\n      size="small"\n      class="demo-form-inline">\n      <el-form-item label="专题标题">\n        <el-input\n          v-model="topicForm.special_name"\n          clearable/>\n      </el-form-item>\n      <el-form-item label="归属频道">\n        <el-select\n          v-model="topicForm.channelid"\n          filterable\n          clearable\n          placeholder=""\n          @clear="searchSpecial"\n          @change="searchSpecial">\n          <el-option\n            v-for="(item, index) in listUsableChannel"\n            :key="index"\n            :value="item.value"\n            :label="item.label"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item\n        label="开始时间"\n        class="date-left">\n        <el-date-picker\n          :title="topicForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n          v-model="topicForm.startDate"\n          type="datetime"\n          format="yyyy-MM-dd HH:mm"\n          placeholder="选择日期"\n          @change="searchSpecial"/>\n      </el-form-item>\n      <el-form-item\n        label="结束时间"\n        class="date-left">\n        <el-date-picker\n          :title="topicForm.startDate | FormatDate(\'yyyy-MM-dd hh:mm\')"\n          v-model="topicForm.endDate"\n          format="yyyy-MM-dd HH:mm"\n          type="datetime"\n          placeholder="选择日期"\n          @change="searchSpecial"/>\n      </el-form-item>\n      <el-form-item class="btn-container">\n        <el-button\n          type="primary"\n          @click="searchSpecial">\n          查询\n          <i class="el-icon-search el-icon--right"/>\n        </el-button>\n      </el-form-item>\n    </el-form>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        min-height="400"\n        size="small"\n        @select="select"\n        @select-all="selectAll">\n        <el-table-column\n          type="selection"\n          align="center"\n          width="55"/>\n        <el-table-column\n          v-for="(item, index) in tableHeader"\n          :key="index"\n          :prop="item.prop"\n          :label="item.label"\n          :width="item.width"\n          :formatter="item.formatter"\n          align="center"\n          fixed\n          show-overflow-tooltip\n        />\n      </el-table>\n      <div class="pagination">\n        <el-button\n          type="primary"\n          size="small"\n          @click="notifyParentSelectedRow">确定</el-button>\n        <el-pagination\n          :total="total"\n          :page-sizes="[10, 20, 30, 40]"\n          background\n          layout="total, sizes, prev, pager, next"\n          @size-change="handleSizeChange"\n          @current-change="handleCurrentChange"/>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/topicApi\'\nexport default {\n  name: \'AddTopic\',\n  data () {\n    return {\n      topicForm: {\n        channelid: \'\',\n        channel_name: \'\',\n        special_name: \'\',\n        daterange: [],\n        startDate: \'\',\n        endDate: \'\'\n      },\n      tableHeader: [\n        {\n          prop: \'special_name\',\n          label: \'专题标题\'\n        },\n        {\n          prop: \'updatetime\',\n          label: \'更新日期\',\n          formatter: (row, column, cellValue, index) => {\n            return this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n          }\n        },\n        {\n          prop: \'channel_name\',\n          label: \'归属频道\'\n        },\n        {\n          prop: \'expiry_date_start\',\n          label: \'有效日期\',\n          formatter: (row, column, cellValue, index) => {\n            let startDate = this.$options.filters[\'FormatDate\'](cellValue, \'yyyy-MM-dd hh:mm\')\n            let endDate = this.$options.filters[\'FormatDate\'](row.expiry_date_end, \'yyyy-MM-dd hh:mm\')\n            return startDate + \'至\' + endDate\n          }\n        }\n      ],\n      tableData: [],\n      listUsableChannel: [],\n      pageNo: 1,\n      pageSize: 10,\n      total: 0,\n      selectRow: []\n    }\n  },\n  watch: {\n    \'topicForm.special_name\' () {\n      this.searchSpecial()\n    }\n  },\n  mounted () {\n    /** 获取专题列表 **/\n    this.getTopicList()\n    /** 获取可用频道列表**/\n    this.getListUsableChannel()\n  },\n  methods: {\n    /** 获取专题列表 **/\n    getTopicList () {\n      Actions.getTopicList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'state\': 2\n      }).then((res) => {\n        if (res.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          console.log(listData)\n          this.total = listData.total\n        }\n      })\n    },\n    getListUsableChannel () {\n      Actions.getListUsableChannel().then((res) => {\n        if (res.data.status) {\n          let result = res.data.result\n          result.forEach((item, index, arr) => {\n            let newItem = {}\n            newItem.label = item.channel_name\n            newItem.value = item.channelid\n            this.listUsableChannel.push(newItem)\n          })\n        }\n      })\n    },\n    onSubmit () {\n      console.log(\'submit!\')\n    },\n    handleSizeChange (pageSize) {\n      this.pageSize = pageSize\n      this.searchSpecial()\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageNo = pageIndex\n      this.searchSpecial()\n    },\n    toggleAllSelection (e) {\n      this.$refs.channelTable.toggleAllSelection()\n    },\n    /** 单选 **/\n    select (selection, row) {\n      this.selectRow = row\n      if (selection.length > 1) {\n        selection.shift()\n      }\n    },\n    /** 全选 **/\n    selectAll (selection) {\n      this.$refs.addManu.clearSelection()\n      this.selectRow = {}\n    },\n    /** 搜索专题 **/\n    searchSpecial () {\n      this.$options.filters[\'swapTime\'](this.topicForm)\n      let timeStart = this.topicForm.startDate !== null ? new Date(this.topicForm.startDate).getTime() : null\n      let timeEnd = this.topicForm.endDate !== null ? new Date(this.topicForm.endDate).getTime() : null\n      Actions.getTopicList({\n        \'pageNo\': this.pageNo,\n        \'pageSize\': this.pageSize,\n        \'channelid\': this.topicForm.channelid,\n        \'special_name\': this.topicForm.special_name,\n        \'state\': 2,\n        \'timeStart\': timeStart,\n        \'timeEnd\': timeEnd\n      }).then((res) => {\n        if (res.data.status) {\n          let listData = res.data.result\n          this.tableData = listData.list\n          this.total = listData.total\n        }\n      })\n    },\n    /** 通知父组件选择了专题 **/\n    /** 通知父组件选择了哪行专题 **/\n    notifyParentSelectedRow () {\n      this.$emit(\'selected-row\', this.selectRow)\n    }\n  }\n\n}\n<\/script>\n<style scoped>\n  .table-list {\n    min-height: 400px;\n    margin-top: 10px;\n    padding: 0px;\n  }\n  .whole-table {\n    width: 100%;\n    border: 1px solid rgba(218, 222, 223, 1);\n    min-height: 25vw;\n  }\n  .pagination {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 10px;\n  }\n  .addUrl .btn-container {\n    width: 23% !important;\n    left: 0px;\n  }\n\n</style>\n<style>\n  .el-dialog__header{\n    padding: 13px 30px 13px;\n    border-bottom: 1px solid #C0BEFF;\n    background-color: #F7FAFF;\n  }\n  .el-dialog__title {\n    line-height: 17px;\n    font-size: 17px;\n    color: #303133;\n  }\n  .el-dialog__headerbtn {\n    top: 13px;\n  }\n  .el-dialog__body {\n    padding: 20px 60px;\n  }\n  .addUrl .el-form-item {\n    margin-left: 0px;\n    margin-bottom: 10px;\n  }\n  .addUrl .el-form {\n    margin-top: 15px;\n  }\n  .addUrl .el-date-editor{\n    width: 85%;\n  }\n  .addUrl .el-form-item {\n    width: 30%;\n    margin-right: 3%;\n  }\n  .addUrl .date {\n    left: 0px;\n    width: 60%;\n  }\n  .addUrl .el-range-editor .el-range-input{\n    width:50%;\n  }\n  .addUrl .btn-container .el-form-item__content {\n    width: 100%;\n  }\n</style>\n'],sourceRoot:""}])},ziHb:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.title-class[data-v-488e6763]{\n  margin-left: 24px;\n}\n","",{version:3,sources:["/dockerdata/jenkins/.jenkins/workspace/App_Manage_Sv_Web/src/components/manageSublive/src/components/manageSublive/settingManu.vue"],names:[],mappings:";AAgIA;EACA,kBAAA;CACA",file:"settingManu.vue",sourcesContent:['<template>\n  <div>\n    <div class="title-class">\n      <span>稿件主题:\n        <span v-if="!isShowInput">\n          {{ submitManuTitle }}\n          <a\n            style="color:blue;cursor: pointer"\n            @click="showInput">修改</a>\n        </span>\n        <span v-if="isShowInput">\n          <el-input\n            ref="manuInput"\n            v-model="submitManuTitle"\n            style="width:400px"\n            type="text"\n            @blur="hideInputAndSubmit"/>\n        </span>\n      </span>\n    </div>\n    <div class="table-list">\n      <el-table\n        ref="channelTable"\n        :data="tableData"\n        stripe\n        class="whole-table"\n        size="mini"\n        style="width:450px;"\n        min-height="400">\n        <el-table-column\n          prop="channel_name"\n          label="归属频道"\n          align="left"\n          width="448"\n          fixed>\n          <template slot-scope="scope">\n            <el-checkbox\n              v-model="scope.row.isChecked"\n              @change="setChannelBtn(scope.row)">\n              {{ scope.row.channel_name }}\n            </el-checkbox>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n<script>\nimport * as Actions from \'@/api/demand-channel\'\nexport default {\n  props: {\n    videoid: {\n      type: String,\n      default: \'0\'\n    },\n    manuTitle: {\n      type: String,\n      default: \'无\'\n    }\n  },\n  data () {\n    return {\n      tableData: [],\n      channelGroup: [],\n      isShowInput: false,\n      submitManuTitle: this.manuTitle\n    }\n  },\n  computed: {\n\n  },\n  mounted () {\n    this.getSettingChannel()\n  },\n  methods: {\n    getSettingChannel () {\n      Actions.getSettingChannel({\n        \'video\': {\n          \'videoid\': this.videoid\n        }\n      }).then((res) => {\n        if (res.data.status) {\n          let data = res.data.result\n          this.tableData = data\n        }\n      })\n    },\n    /** 设置所属频道的配置 **/\n    setChannelBtn (row) {\n      Actions.setSubLiveChannel({\n        \'videoid\': this.videoid,\n        \'channelid\': row.channelid,\n        \'saveOrDel\': row.isChecked\n      }).then((res) => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'配置成功!\'\n          })\n        }\n      })\n    },\n    showInput () {\n      this.isShowInput = true\n      this.$nextTick(function () {\n        this.$refs.manuInput.focus()\n      })\n    },\n    hideInputAndSubmit () {\n      this.isShowInput = false\n      Actions.updataManuName({\n        \'video\': {\n          \'videoid\': this.videoid,\n          \'title\': this.submitManuTitle\n        }\n      }).then(res => {\n        if (res.status) {\n          this.$message({\n            type: \'success\',\n            message: \'修改成功!\'\n          })\n        }\n      })\n    }\n  }\n}\n<\/script>\n<style scoped>\n  .title-class{\n    margin-left: 24px;\n  }\n</style>\n<style>\n</style>\n'],sourceRoot:""}])}},[0]);
//# sourceMappingURL=app.8cc661d86ca6fd5eb4b6.js.map