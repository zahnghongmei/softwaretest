<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="70">
  <HTTPTask id="10649" hostname="update.ie.2345.com" path="/check_new_version.php" url="http://update.ie.2345.com/check_new_version.php" ip="101.71.94.9" port="80" connectionId="1" origin="Primary" frame="1" startDateTime="2019-04-16T14:14:16.548+08:00" startTime="6158734" endTime="6158796">
    <HTTPRequest method="POST">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dXBkYXRlLmllLjIzNDUuY29t</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTI3Nw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>UE9TVCAvY2hlY2tfbmV3X3ZlcnNpb24ucGhwIEhUVFAvMS4xDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOA0KSG9zdDogdXBkYXRlLmllLjIzNDUuY29tDQpDb250ZW50LUxlbmd0aDogMTI3Nw0KQ2FjaGUtQ29udHJvbDogbm8tY2FjaGUNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>ZGF0YV92ZXJzaW9uPTEuMCZjbGllbnRfZGF0YT1JUUU2UDE4dEFDVUZSZ1J2Zm1VSkd3aENSMHRJWmtORVdRZ0FjUTFhQlZFZVgwQnFFMXA5QUg1VlprWVNSMzFtYXh0NFhRQUJFeHN6Tmd3QVMwUXlIMUFYVUF4RFVqdEFIaVJmSURvaUQxTVNiMzVsV2tOZEVSd2xEak1CQndCWFhtTVJTRlFDV2dZR1Azd09MRWs5UjJ4VUZGVmhaaVZNUWxRV0tBd2RKRkZPU3drSWR3OWRGMDBNREJ3elJnUTViemdBSkZRWlZYUnFjUmNiRmtOUFRFcGhVVmhMVzE4c1RROUJDRm9BQWlrQlVHOEFmbFZtUmhOSGZYUjNDUnNKUWtkS1NHWkRSVmdJQUhBTldnVlJIbDlBYWdGR2IxUXJBemNEVHdNU0pqVldYRXNYQlZoQ2REQWNHMWRkSkhVJTI1MmJlQzBBTFRVYmJ5TUhhQmtyQUR4cE9Cc1VDMkZ2ZHpNaUkwc0dRVDFTVzFnelVnZFFUMHNYRldFVVcyTUFZRlpqUVJ0WmRYUjhHd2NhRmhJY0dTTWZBRFpSWFNRZlVCZUVrTUdZNTR5TXhveW4lMjUyYnVWVUQxVWxKVFJtWGxrUlZVQmFaMUZZUzFGZEpFNUlEMFBMMGQ2eW5zV3J1JTI1MkZLTXljVVlWV0ZtTGxkWVRCTWJGaWN5RWcwYUdncGpDRWdaUTBJT0F5NThEQ1JjS3pvd0drSVFiMzVsQ1FrVVVCc2JDeUlzSFFkTFJDQlJCbW9WUndJVmVCbElmQVY3VVc1T0ZFTjVjMlVWQ1ZRZEZCc1VDUklYR1JvS1l3UlpBME1DVFIwN1NnUVNWVFlBQ1FCR0JXOSUyNTJiWlFBRkRseEhWRWx1UlVaZUdoeGpVQXRjRDNFWkZTZ0JVRzhKWUZOMFdnRWFLQ2tZU2tKQ0YxVkFXbTVEUjE0YUhHTlNHV29EUnhzRGVCbElld1JzU1hRWlVDZ3ZNUzVWVDJjY0FoY2FNd0ZXVXhvQmRncGNCa01DVFI4cGZBa2lYam9BTGdKOEVTRWxJQnNSR2tKVlZsbzVBQ3NFV1ZvdVR6VkRCRndjR1RWTlNIY1NmMVYwV2dFWVBoc3FVRVZYQUNnTUhTUUFIUVpXRW5zZldoZE5EQUFEQlZNR0xFUW9DaVFiZkI0cFpuMGJHUnBlVlJVTENRTUdCbHhGSWtrMVFSaGVDbEpnQVZ0dkhHd0tKU2xRRWo4eUxscE9ad0lXR1JNSkhoVURWMEpqQjBnRlF3Sk5IeWw4R1NoQ09BdzFFM3dITENjc1prWlJIQmdJV214UlJFc1VFaTVPTlVZVVJ4c1ZCVTRMUGx0c1gzUkVGa0Z2YUdWV1dHY0VFZ2hhYkZGRldSWUFZeEZJUmhGTERCazdUelU3VlR4SGJGUVdSM3gzZmdnSkZGQUNDaHczQnhFYloxRTBTUVVYV3d4ZlVuWUJIejFVTHhFekJId0RORFFpR3hFYVFFUk9UUk1MQkFWWFFpUlBTQmxEV3hvWlBnRlFiM0o1SnhVeVowVjljSDhQYlExRlRrczZaMEV3TEg1eEJIeGNCeWNYSzBjWkFVWnZSVHNNTWtRQlRXOEdjSHRvZkRaRlNreHVSVEpjRHdsd2Yxc0hKV3NwTVI5aVhIOTJkeUZoTlFFS1J3PT0=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>398</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Vary" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1s</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Mzk4</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowODo1NCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Age" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Hits" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sDQpDb250ZW50LUxlbmd0aDogMzk4DQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowODo1NCBHTVQNCkFnZTogMA0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KWC1IaXRzOiAwDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>SVFFQ0xFTVJBVGNDUWxWM1puWWJCeG9FRWdnTFB4d2FTd0lTY0JOYkcxRUFYRUZzRzBoaEVqc1hPbFFaVlNVd00wa1JaRjByVlJ3NUJCb0ZWMUVsRTFnR1ZSdEJFelZPTm1JQ2ZWRmpFMXNISVNzMVhGbGtYVFFWQ2pjZk1SRklYQzVQRDBjJTJCV0Y1ZWF3MWFZd04lMkZVMjVZUmc4b1ptc2JUVkVlRWxoQ2REQWJHMWxjQkVVYVdRNWNDZ0lGVlZ0akFXQlZlRVVTUVhWcUlrRk9HbDVWSGhjaEhSZ0dXVlFlU1JORkJBeFZVbW9CUm05V0p3a3pLVTRUZUdaOUd4eGFReFFiSGpCQ1FsNWVVeVVPWGcxVFNGNFZZMFVPZlZVcUFUZEFFMEFzWm1zYlRWRWVFaVVRTndBY1N3SVNZeEZJVXdoQ0NpOHBTaEFvRW5SSFpVY1VRWDEyY3hzSEdoUWVGaDBKQncwWlhSSjdIMWtYVFF3SkdUWkdOU3RjTHdKMFRBRkdiemslM0Q=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="6158796" offset="0" length="588" />
      </TcpPackets>
    </HTTPResponse>
    <HTTPTask id="10668" hostname="center.t.dacube.cn" path="/static/js/webim.config.js" url="https://center.t.dacube.cn/static/js/webim.config.js" ip="139.9.5.231" port="443" connectionId="12" origin="HTML" frame="1" startDateTime="2019-04-16T14:14:16.604+08:00" startTime="6176140" endTime="6176218">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2VudGVyLnQuZGFjdWJlLmNu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2Mjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24v</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>emgtQ04semg7cT0wLjg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdGF0aWMvanMvd2ViaW0uY29uZmlnLmpzIEhUVFAvMS4xDQpIb3N0OiBjZW50ZXIudC5kYWN1YmUuY24NCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNTYuMC4yOTI0LjkwIFNhZmFyaS81MzcuMzYgMjM0NUV4cGxvcmVyLzkuNi4wLjE4NjI3DQpBY2NlcHQ6ICovKg0KUmVmZXJlcjogaHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24vDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IHpoLUNOLHpoO3E9MC44DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>3687</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xMi4y</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzY4Nw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjVjYWViMjRhLWU2NyI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuMTIuMg0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDM2ODcNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMTEgQXByIDIwMTkgMDM6MTk6MzggR01UDQpFVGFnOiAiNWNhZWIyNGEtZTY3Ig0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyoqCiAqIGdpdCBkbyBub3QgY29udHJvbCB3ZWJpbS5jb25maWcuanMKICogZXZlcnlvbmUgc2hvdWxkIGNvcHkgd2ViaW0uY29uZmlnLmpzLmRlbW8gdG8gd2ViaW0uY29uZmlnLmpzCiAqIGFuZCBoYXZlIHRoZWlyIG93biBjb25maWdzLgogKiBJbiB0aGlzIHdheSAsIG90aGVycyB3b24ndCBiZSBpbmZsdWVuY2VkIGJ5IHRoaXMgY29uZmlnIHdoaWxlIGdpdCBwdWxsLgogKgogKi8KY29uc3QgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmCmxldCBhcHBrZXkgPSAnMTE5NzE4MDcyMzI1Mzc0OSNhcHAtY2VudHJlLXBjJwpjb25zdCBkZXZBcHBrZXkgPSAnMTE5NzE4MDcyMzI1Mzc0OSNjZW50ZXItZGV2Jwpjb25zdCBUZXN0QXBwa2V5ID0gJzExOTcxODA3MjMyNTM3NDkjY2VudGVyLXRlc3QnCmlmIChocmVmLmluY2x1ZGVzKCcudC4nKSB8fCBocmVmLmluY2x1ZGVzKCc6OTUyOCcpKSB7CiAgLy8gaWYgKGhyZWYuaW5jbHVkZXMoJy50LicpKSB7CiAgYXBwa2V5ID0gVGVzdEFwcGtleQogIH0gZWxzZSBpZiAoaHJlZi5pbmNsdWRlcygnLmQuJykgfHwgaHJlZi5pbmNsdWRlcygnOjgwODEnKSkgewovLyB9IGVsc2UgaWYgKGhyZWYuaW5jbHVkZXMoJy5kLicpKSB7CiAgYXBwa2V5ID0gZGV2QXBwa2V5Cn0KCnZhciBXZWJJTSA9IHt9CldlYklNLmNvbmZpZyA9IHsKICAvKgogICAqIFhNUFAgc2VydmVyCiAgICovCiAgeG1wcFVSTDogJ2ltLWFwaS5lYXNlbW9iLmNvbScsCiAgLyoKICAgKiBCYWNrZW5kIFJFU1QgQVBJIFVSTAogICAqLwogIGFwaVVSTDogKGxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyA/ICdodHRwczonIDogJ2h0dHA6JykgKyAnLy9hMS5lYXNlbW9iLmNvbScsCiAgLyoKICAgKiBBcHBsaWNhdGlvbiBBcHBLZXkKICAgKi8KICBhcHBrZXk6IGFwcGtleSwKCiAgLyoKICAgKiBXaGV0aGVyIHRvIHVzZSB3c3MKICAgKiBAcGFyYW1ldGVyIHtCb29sZWFufSB0cnVlIG9yIGZhbHNlCiAgICovCiAgaHR0cHM6IGZhbHNlLAogIC8qCiAgICogaXNNdWx0aUxvZ2luU2Vzc2lvbnMKICAgKiB0cnVlOiBBIHZpc2l0b3IgY2FuIHNpZ24gaW4gdG8gbXVsdGlwbGUgd2VicGFnZXMgYW5kIHJlY2VpdmUgbWVzc2FnZXMgYXQgYWxsIHRoZSB3ZWJwYWdlcy4KICAgKiBmYWxzZTogQSB2aXNpdG9yIGNhbiBzaWduIGluIHRvIG9ubHkgb25lIHdlYnBhZ2UgYW5kIHJlY2VpdmUgbWVzc2FnZXMgYXQgdGhlIHdlYnBhZ2UuCiAgICovCiAgaXNNdWx0aUxvZ2luU2Vzc2lvbnM6IHRydWUsCiAgLyoKICAgKiBzZXQgcHJlc2VuY2UgYWZ0ZXIgbG9naW4KICAgKi8KICBpc0F1dG9Mb2dpbjogdHJ1ZSwKICAvKioKICAgKiBXaGV0aGVyIHRvIHVzZSB3aW5kb3cuZG9RdWVyeSgpCiAgICogQHBhcmFtZXRlciB7Qm9vbGVhbn0gdHJ1ZSBvciBmYWxzZQogICAqLwogIGlzV2luZG93U0RLOiBmYWxzZSwKICAvKioKICAgKiBpc1NhbmRCb3g9dHJ1ZTogIHhtcHBVUkw6ICdpbS1hcGktc2FuZGJveC5lYXNlbW9iLmNvbScsICBhcGlVUkw6ICcvL2ExLXNkYi5lYXNlbW9iLmNvbScsCiAgICogaXNTYW5kQm94PWZhbHNlOiB4bXBwVVJMOiAnaW0tYXBpLmVhc2Vtb2IuY29tJywgICAgICAgICAgYXBpVVJMOiAnLy9hMS5lYXNlbW9iLmNvbScsCiAgICogQHBhcmFtZXRlciB7Qm9vbGVhbn0gdHJ1ZSBvciBmYWxzZQogICAqLwogIGlzU2FuZEJveDogZmFsc2UsCiAgLyoqCiAgICogV2hldGhlciB0byBjb25zb2xlLmxvZyBpbiBzdHJvcGhlLmxvZygpCiAgICogQHBhcmFtZXRlciB7Qm9vbGVhbn0gdHJ1ZSBvciBmYWxzZQogICAqLwogIGlzRGVidWc6IGZhbHNlLAogIC8qKgogICAqIHdpbGwgYXV0byBjb25uZWN0IHRoZSB4bXBwIHNlcnZlciBhdXRvUmVjb25uZWN0TnVtTWF4IHRpbWVzIGluIGJhY2tncm91bmQgd2hlbiBjbGllbnQgaXMgb2ZmbGluZS4KICAgKiB3b24ndCBhdXRvIGNvbm5lY3QgaWYgYXV0b1JlY29ubmVjdE51bU1heD0wLgogICAqLwogIGF1dG9SZWNvbm5lY3ROdW1NYXg6IDIsCiAgLyoqCiAgICogdGhlIGludGVydmFsIHNlY29uZHMgYmV0d2VlbiBlYWNoIGF1dG8gcmVjb25uZWN0dGluZy4KICAgKiB3b3JrcyBvbmx5IGlmIGF1dG9SZWNvbm5lY3RNYXhOdW0gPj0gMi4KICAgKi8KICBhdXRvUmVjb25uZWN0SW50ZXJ2YWw6IDIsCiAgLyoqCiAgICogd2VicnRjIHN1cHBvcnRzIFdlYktpdCBhbmQgaHR0cHMgb25seQogICAqLwogIGlzV2ViUlRDOgogICAgKC9GaXJlZm94Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IC9XZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpICYmCiAgICAvXmh0dHBzXDokLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCksCiAgLyoqCiAgICogYWZ0ZXIgbG9naW4sIHNlbmQgZW1wdHkgbWVzc2FnZSB0byB4bXBwIHNlcnZlciBsaWtlIGhlYXJ0QmVhdCBldmVyeSA0NXMsIHRvIGtlZXAgdGhlIHdzIGNvbm5lY3Rpb24gYWxpdmUuCiAgICovCiAgaGVhcnRCZWF0V2FpdDogNDUwMCwKICAvKioKICAgKiB3aGlsZSBodHRwIGFjY2Vzcyx1c2UgaXAgZGlyZWN0bHksaW5zdGVhZCBvZiBTZXJ2ZXJOYW1lLGF2b2lkaW5nIEROUyBwcm9ibGVtLgogICAqLwogIGlzSHR0cEROUzogZmFsc2UsCgogIC8qKgogICAqIFdpbGwgc2hvdyB0aGUgc3RhdHVzIG9mIG1lc3NhZ2VzIGluIHNpbmdsZSBjaGF0CiAgICogbXNnU3RhdHVzOiB0cnVlICBzaG93CiAgICogbXNnU3RhdHVzOiB0cnVlICBoaWRlCiAgICovCiAgbXNnU3RhdHVzOiB0cnVlLAoKICAvKioKICAgKiBXaGVuIGEgbWVzc2FnZSBhcnJpdmVkLCB0aGUgcmVjZWl2ZXIgc2VuZCBhbiBhY2sgbWVzc2FnZSB0byB0aGUKICAgKiBzZW5kZXIsIGluIG9yZGVyIHRvIHRlbGwgdGhlIHNlbmRlciB0aGUgbWVzc2FnZSBoYXMgZGVsaXZlcmVkLgogICAqIFNlZSBjYWxsIGJhY2sgZnVuY3Rpb24gb25SZWNlaXZlZE1lc3NhZ2UKICAgKi8KICBkZWxpdmVyeTogdHJ1ZSwKCiAgLyoqCiAgICogV2hlbiBhIG1lc3NhZ2UgcmVhZCwgdGhlIHJlY2VpdmVyIHNlbmQgYW4gYWNrIG1lc3NhZ2UgdG8gdGhlCiAgICogc2VuZGVyLCBpbiBvcmRlciB0byB0ZWxsIHRoZSBzZW5kZXIgdGhlIG1lc3NhZ2UgaGFzIGJlZW4gcmVhZC4KICAgKiBTZWUgY2FsbCBiYWNrIGZ1bmN0aW9uIG9uUmVhZE1lc3NhZ2UKICAgKi8KICByZWFkOiB0cnVlLAoKICAvKioKICAgKiBXaGVuIGEgbWVzc2FnZSBzZW50IG9yIGFycml2ZWQsIHdpbGwgc2F2ZSBpdCBpbnRvIHRoZSBsb2NhbFN0b3JhZ2UsCiAgICogdHJ1ZTogU3RvcmUgdGhlIGNoYXQgcmVjb3JkCiAgICogZmFsc2U6IERvbid0IHN0b3JlIHRoZSBjaGF0IHJlY29yZAogICAqLwogIHNhdmVMb2NhbDogdHJ1ZSwKCiAgLyoqCiAgICogV2lsbCBlbmNyeXB0IHRleHQgbWVzc2FnZSBhbmQgZW1vamkgbWVzc2FnZQogICAqIHt0eXBlOidub25lJ30gICBubyBlbmNyeXB0CiAgICoge3R5cGU6J2Jhc2U2NCd9IGVuY3J5cHQgd2l0aCBiYXNlNjQKICAgKiB7dHlwZTonYWVzJyxtb2RlOiAnZWJjJyxrZXk6ICcxMjM0NTY3ODllYXNlbW9iJyxpdjogJzAwMDAwMDAwMDAwMDAwMDAnfSBlbmNyeXB0IHdpdGggYWVzKGViYykKICAgKiB7dHlwZTonYWVzJyxtb2RlOiAnY2JjJyxrZXk6ICcxMjM0NTY3ODllYXNlbW9iJyxpdjogJzAwMDAwMDAwMDAwMDAwMDAnfSBlbmNyeXB0IHdpdGggYWVzKGNiYykKICAgKi8KICBlbmNyeXB0OiB7CiAgICB0eXBlOiAnbm9uZScKICB9Cn0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="6176187" offset="0" length="3939" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="10670" hostname="center.t.dacube.cn" path="/static/css/app.edf99ef0.css" url="https://center.t.dacube.cn/static/css/app.edf99ef0.css" ip="139.9.5.231" port="443" connectionId="10" origin="HTML" frame="1" startDateTime="2019-04-16T14:14:16.615+08:00" startTime="6176140" endTime="6176234">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2VudGVyLnQuZGFjdWJlLmNu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2Mjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3MsKi8qO3E9MC4x</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24v</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>emgtQ04semg7cT0wLjg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdGF0aWMvY3NzL2FwcC5lZGY5OWVmMC5jc3MgSFRUUC8xLjENCkhvc3Q6IGNlbnRlci50LmRhY3ViZS5jbg0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2MjcNCkFjY2VwdDogdGV4dC9jc3MsKi8qO3E9MC4xDQpSZWZlcmVyOiBodHRwczovL2NlbnRlci50LmRhY3ViZS5jbi8NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnINCkFjY2VwdC1MYW5ndWFnZTogemgtQ04semg7cT0wLjgNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>14380</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xMi4y</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTQzODA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjVjYWViMjRhLTM4MmMi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuMTIuMg0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQNCkNvbnRlbnQtVHlwZTogdGV4dC9jc3MNCkNvbnRlbnQtTGVuZ3RoOiAxNDM4MA0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KTGFzdC1Nb2RpZmllZDogVGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQNCkVUYWc6ICI1Y2FlYjI0YS0zODJjIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LmZhZGUtZW50ZXItYWN0aXZlW2RhdGEtdi1kNjEyOTE3Y10sLmZhZGUtbGVhdmUtYWN0aXZlW2RhdGEtdi1kNjEyOTE3Y117dHJhbnNpdGlvbjpvcGFjaXR5IC4ycyBlYXNlLWluLW91dH0uZmFkZS1lbnRlcltkYXRhLXYtZDYxMjkxN2NdLC5mYWRlLWxlYXZlLWFjdGl2ZVtkYXRhLXYtZDYxMjkxN2Nde29wYWNpdHk6MH0uZmFkZS10cmFuc2Zvcm0tZW50ZXItYWN0aXZlW2RhdGEtdi1kNjEyOTE3Y10sLmZhZGUtdHJhbnNmb3JtLWxlYXZlLWFjdGl2ZVtkYXRhLXYtZDYxMjkxN2Nde3RyYW5zaXRpb246YWxsIC4zc30uZmFkZS10cmFuc2Zvcm0tZW50ZXJbZGF0YS12LWQ2MTI5MTdjXXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTMwcHgpfS5mYWRlLXRyYW5zZm9ybS1sZWF2ZS10b1tkYXRhLXYtZDYxMjkxN2Nde29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgzMHB4KX0uZmFkZS1sZWZ0LWVudGVyLWFjdGl2ZVtkYXRhLXYtZDYxMjkxN2NdLC5mYWRlLWxlZnQtbGVhdmUtYWN0aXZlW2RhdGEtdi1kNjEyOTE3Y10sLmZhZGUtcmlnaHQtZW50ZXItYWN0aXZlW2RhdGEtdi1kNjEyOTE3Y10sLmZhZGUtcmlnaHQtbGVhdmUtYWN0aXZlW2RhdGEtdi1kNjEyOTE3Y117dHJhbnNpdGlvbjphbGwgLjNzIGN1YmljLWJlemllciguNDQ1LC4wNSwuNTUsLjk1KX0uZmFkZS1sZWZ0LWVudGVyW2RhdGEtdi1kNjEyOTE3Y117b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDUwcHgpfS5mYWRlLWxlZnQtbGVhdmUtdG9bZGF0YS12LWQ2MTI5MTdjXSwuZmFkZS1yaWdodC1lbnRlcltkYXRhLXYtZDYxMjkxN2Nde29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTBweCl9LmZhZGUtcmlnaHQtbGVhdmUtdG9bZGF0YS12LWQ2MTI5MTdjXXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoNTBweCl9LmVsLXNjcm9sbGJhcl9fd3JhcFtkYXRhLXYtZDYxMjkxN2Nde292ZXJmbG93LXg6aGlkZGVuIWltcG9ydGFudH0uZWwtcG9wb3Zlci5lbC1wb3BwZXJbZGF0YS12LWQ2MTI5MTdjXSwuZWwtdG9vbHRpcFtkYXRhLXYtZDYxMjkxN2Nde291dGxpbmU6bm9uZX0uZWwtc3dpdGNoIC5lbC1zd2l0Y2hfX2NvcmVbZGF0YS12LWQ2MTI5MTdjXXtoZWlnaHQ6MTZweH0uZWwtc3dpdGNoIC5lbC1zd2l0Y2hfX2NvcmVbZGF0YS12LWQ2MTI5MTdjXTphZnRlcnt0b3A6LTNweDt3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2JhY2tncm91bmQtY29sb3I6IzNjNmRmMH0uZWwtc3dpdGNoLmlzLWNoZWNrZWQgLmVsLXN3aXRjaF9fY29yZVtkYXRhLXYtZDYxMjkxN2NdOmFmdGVye2JhY2tncm91bmQtY29sb3I6IzAwYzJmZn0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtZDYxMjkxN2Nde2JhY2tncm91bmQtY29sb3I6IzNjNmRmMH0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtZDYxMjkxN2NdOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzUwN2NmMn0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtZDYxMjkxN2NdOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiMzNjYyZDh9LmVsLXNjcm9sbGJhcl9fYmFyW2RhdGEtdi1kNjEyOTE3Y117ei1pbmRleDoxMDAwMH0uZWwtdGFnW2RhdGEtdi1kNjEyOTE3Y117Ym9yZGVyLWNvbG9yOiMzYjc3ZTM7YmFja2dyb3VuZC1jb2xvcjojZWJmNWZmO2NvbG9yOiMzNTlhZmY7Zm9udC1zaXplOjE0cHh9LmVsLWJhZGdlX19jb250ZW50W2RhdGEtdi1kNjEyOTE3Y117Ym9yZGVyOm5vbmU7YmFja2dyb3VuZC1jb2xvcjojZjQzNTMwfS5xcmRvd25bZGF0YS12LWQ2MTI5MTdjXXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2Zsb2F0OnJpZ2h0O21hcmdpbi1yaWdodDotMThweDtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxNHB4fS5xcltkYXRhLXYtZDYxMjkxN2Nde2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47d2lkdGg6MTAwcHh9LnFyPmRpdltkYXRhLXYtZDYxMjkxN2NdLC5xciBhW2RhdGEtdi1kNjEyOTE3Y117dGV4dC1hbGlnbjpjZW50ZXJ9LnFyPmRpdltkYXRhLXYtZDYxMjkxN2NdIDpob3ZlciwucXIgYVtkYXRhLXYtZDYxMjkxN2NdIDpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS5wb3AtaW1nW2RhdGEtdi1kNjEyOTE3Y117d2lkdGg6MTAwJX0ucXJjb2RlW2RhdGEtdi1kNjEyOTE3Y117bWFyZ2luOjAgYXV0byAxMnB4O3BhZGRpbmc6M3B4O3dpZHRoOjYwcHg7aGVpZ2h0OjYwcHg7Ym9yZGVyLXJhZGl1czoxMnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZn0ucXJjb2RlIGltZ1tkYXRhLXYtZDYxMjkxN2Nde3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCV9LmZhZGUtZW50ZXItYWN0aXZlW2RhdGEtdi0zZTY5YWM5MF0sLmZhZGUtbGVhdmUtYWN0aXZlW2RhdGEtdi0zZTY5YWM5MF17dHJhbnNpdGlvbjpvcGFjaXR5IC4ycyBlYXNlLWluLW91dH0uZmFkZS1lbnRlcltkYXRhLXYtM2U2OWFjOTBdLC5mYWRlLWxlYXZlLWFjdGl2ZVtkYXRhLXYtM2U2OWFjOTBde29wYWNpdHk6MH0uZmFkZS10cmFuc2Zvcm0tZW50ZXItYWN0aXZlW2RhdGEtdi0zZTY5YWM5MF0sLmZhZGUtdHJhbnNmb3JtLWxlYXZlLWFjdGl2ZVtkYXRhLXYtM2U2OWFjOTBde3RyYW5zaXRpb246YWxsIC4zc30uZmFkZS10cmFuc2Zvcm0tZW50ZXJbZGF0YS12LTNlNjlhYzkwXXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTMwcHgpfS5mYWRlLXRyYW5zZm9ybS1sZWF2ZS10b1tkYXRhLXYtM2U2OWFjOTBde29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgzMHB4KX0uZmFkZS1sZWZ0LWVudGVyLWFjdGl2ZVtkYXRhLXYtM2U2OWFjOTBdLC5mYWRlLWxlZnQtbGVhdmUtYWN0aXZlW2RhdGEtdi0zZTY5YWM5MF0sLmZhZGUtcmlnaHQtZW50ZXItYWN0aXZlW2RhdGEtdi0zZTY5YWM5MF0sLmZhZGUtcmlnaHQtbGVhdmUtYWN0aXZlW2RhdGEtdi0zZTY5YWM5MF17dHJhbnNpdGlvbjphbGwgLjNzIGN1YmljLWJlemllciguNDQ1LC4wNSwuNTUsLjk1KX0uZmFkZS1sZWZ0LWVudGVyW2RhdGEtdi0zZTY5YWM5MF17b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDUwcHgpfS5mYWRlLWxlZnQtbGVhdmUtdG9bZGF0YS12LTNlNjlhYzkwXSwuZmFkZS1yaWdodC1lbnRlcltkYXRhLXYtM2U2OWFjOTBde29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTBweCl9LmZhZGUtcmlnaHQtbGVhdmUtdG9bZGF0YS12LTNlNjlhYzkwXXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoNTBweCl9LmVsLXNjcm9sbGJhcl9fd3JhcFtkYXRhLXYtM2U2OWFjOTBde292ZXJmbG93LXg6aGlkZGVuIWltcG9ydGFudH0uZWwtcG9wb3Zlci5lbC1wb3BwZXJbZGF0YS12LTNlNjlhYzkwXSwuZWwtdG9vbHRpcFtkYXRhLXYtM2U2OWFjOTBde291dGxpbmU6bm9uZX0uZWwtc3dpdGNoIC5lbC1zd2l0Y2hfX2NvcmVbZGF0YS12LTNlNjlhYzkwXXtoZWlnaHQ6MTZweH0uZWwtc3dpdGNoIC5lbC1zd2l0Y2hfX2NvcmVbZGF0YS12LTNlNjlhYzkwXTphZnRlcnt0b3A6LTNweDt3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2JhY2tncm91bmQtY29sb3I6IzNjNmRmMH0uZWwtc3dpdGNoLmlzLWNoZWNrZWQgLmVsLXN3aXRjaF9fY29yZVtkYXRhLXYtM2U2OWFjOTBdOmFmdGVye2JhY2tncm91bmQtY29sb3I6IzAwYzJmZn0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtM2U2OWFjOTBde2JhY2tncm91bmQtY29sb3I6IzNjNmRmMH0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtM2U2OWFjOTBdOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzUwN2NmMn0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtM2U2OWFjOTBdOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiMzNjYyZDh9LmVsLXNjcm9sbGJhcl9fYmFyW2RhdGEtdi0zZTY5YWM5MF17ei1pbmRleDoxMDAwMH0uZWwtdGFnW2RhdGEtdi0zZTY5YWM5MF17Ym9yZGVyLWNvbG9yOiMzYjc3ZTM7YmFja2dyb3VuZC1jb2xvcjojZWJmNWZmO2NvbG9yOiMzNTlhZmY7Zm9udC1zaXplOjE0cHh9LmVsLWJhZGdlX19jb250ZW50W2RhdGEtdi0zZTY5YWM5MF17Ym9yZGVyOm5vbmU7YmFja2dyb3VuZC1jb2xvcjojZjQzNTMwfS5hcHAtbG9naW4tY29udGVudFtkYXRhLXYtM2U2OWFjOTBde3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7bGVmdDoxMiU7cGFkZGluZzozLjVlbSAyZW0gMmVtO2JhY2tncm91bmQtY29sb3I6aHNsYSgwLDAlLDEwMCUsLjIpO2NvbG9yOiNmZmY7Zm9udC1zaXplOjIwcHh9LmFwcC1sb2dpbi1jb250ZW50IC50aXRsZVtkYXRhLXYtM2U2OWFjOTBde21hcmdpbjowIDAgLjNlbTtmb250LXNpemU6MmVtfS5hcHAtbG9naW4tY29udGVudCAubGlzdFtkYXRhLXYtM2U2OWFjOTBde21hcmdpbjowIDAgMS4yZW0gMWVtO2ZvbnQtc2l6ZToxZW07bGluZS1oZWlnaHQ6Mn0uYXBwLWxvZ2luLWNvbnRlbnQgLmxpc3Qgc3BhbitzcGFuW2RhdGEtdi0zZTY5YWM5MF17bWFyZ2luLWxlZnQ6NC4wOWVtfUBtZWRpYSAobWluLXdpZHRoOjEzNjZweCkgYW5kIChtYXgtd2lkdGg6MTYwMHB4KXsuYXBwLWxvZ2luLWNvbnRlbnRbZGF0YS12LTNlNjlhYzkwXXtmb250LXNpemU6MThweH19QG1lZGlhIChtYXgtd2lkdGg6MTM2NnB4KXsuYXBwLWxvZ2luLWNvbnRlbnRbZGF0YS12LTNlNjlhYzkwXXtmb250LXNpemU6MTVweH19LkNvcHlyaWdodFtkYXRhLXYtM2U2OWFjOTBde3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO2JvdHRvbTo0JTt6LWluZGV4OjIwMDA7Y29sb3I6I2ZmZjt3aGl0ZS1zcGFjZTpub3dyYXA7Zm9udC1zaXplOjE0cHh9LkNvcHlyaWdodC5ibGFja1tkYXRhLXYtM2U2OWFjOTBde2JvdHRvbToyMHB4O2NvbG9yOiM1YzVjNWN9LmZhZGUtZW50ZXItYWN0aXZlW2RhdGEtdi1lNTRhMzk3YV0sLmZhZGUtbGVhdmUtYWN0aXZlW2RhdGEtdi1lNTRhMzk3YV17dHJhbnNpdGlvbjpvcGFjaXR5IC4ycyBlYXNlLWluLW91dH0uZmFkZS1lbnRlcltkYXRhLXYtZTU0YTM5N2FdLC5mYWRlLWxlYXZlLWFjdGl2ZVtkYXRhLXYtZTU0YTM5N2Fde29wYWNpdHk6MH0uZmFkZS10cmFuc2Zvcm0tZW50ZXItYWN0aXZlW2RhdGEtdi1lNTRhMzk3YV0sLmZhZGUtdHJhbnNmb3JtLWxlYXZlLWFjdGl2ZVtkYXRhLXYtZTU0YTM5N2Fde3RyYW5zaXRpb246YWxsIC4zc30uZmFkZS10cmFuc2Zvcm0tZW50ZXJbZGF0YS12LWU1NGEzOTdhXXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTMwcHgpfS5mYWRlLXRyYW5zZm9ybS1sZWF2ZS10b1tkYXRhLXYtZTU0YTM5N2Fde29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgzMHB4KX0uZmFkZS1sZWZ0LWVudGVyLWFjdGl2ZVtkYXRhLXYtZTU0YTM5N2FdLC5mYWRlLWxlZnQtbGVhdmUtYWN0aXZlW2RhdGEtdi1lNTRhMzk3YV0sLmZhZGUtcmlnaHQtZW50ZXItYWN0aXZlW2RhdGEtdi1lNTRhMzk3YV0sLmZhZGUtcmlnaHQtbGVhdmUtYWN0aXZlW2RhdGEtdi1lNTRhMzk3YV17dHJhbnNpdGlvbjphbGwgLjNzIGN1YmljLWJlemllciguNDQ1LC4wNSwuNTUsLjk1KX0uZmFkZS1sZWZ0LWVudGVyW2RhdGEtdi1lNTRhMzk3YV17b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDUwcHgpfS5mYWRlLWxlZnQtbGVhdmUtdG9bZGF0YS12LWU1NGEzOTdhXSwuZmFkZS1yaWdodC1lbnRlcltkYXRhLXYtZTU0YTM5N2Fde29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTBweCl9LmZhZGUtcmlnaHQtbGVhdmUtdG9bZGF0YS12LWU1NGEzOTdhXXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoNTBweCl9LmVsLXNjcm9sbGJhcl9fd3JhcFtkYXRhLXYtZTU0YTM5N2Fde292ZXJmbG93LXg6aGlkZGVuIWltcG9ydGFudH0uZWwtcG9wb3Zlci5lbC1wb3BwZXJbZGF0YS12LWU1NGEzOTdhXSwuZWwtdG9vbHRpcFtkYXRhLXYtZTU0YTM5N2Fde291dGxpbmU6bm9uZX0uZWwtc3dpdGNoIC5lbC1zd2l0Y2hfX2NvcmVbZGF0YS12LWU1NGEzOTdhXXtoZWlnaHQ6MTZweH0uZWwtc3dpdGNoIC5lbC1zd2l0Y2hfX2NvcmVbZGF0YS12LWU1NGEzOTdhXTphZnRlcnt0b3A6LTNweDt3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2JhY2tncm91bmQtY29sb3I6IzNjNmRmMH0uZWwtc3dpdGNoLmlzLWNoZWNrZWQgLmVsLXN3aXRjaF9fY29yZVtkYXRhLXYtZTU0YTM5N2FdOmFmdGVye2JhY2tncm91bmQtY29sb3I6IzAwYzJmZn0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtZTU0YTM5N2Fde2JhY2tncm91bmQtY29sb3I6IzNjNmRmMH0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtZTU0YTM5N2FdOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzUwN2NmMn0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeVtkYXRhLXYtZTU0YTM5N2FdOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiMzNjYyZDh9LmVsLXNjcm9sbGJhcl9fYmFyW2RhdGEtdi1lNTRhMzk3YV17ei1pbmRleDoxMDAwMH0uZWwtdGFnW2RhdGEtdi1lNTRhMzk3YV17Ym9yZGVyLWNvbG9yOiMzYjc3ZTM7YmFja2dyb3VuZC1jb2xvcjojZWJmNWZmO2NvbG9yOiMzNTlhZmY7Zm9udC1zaXplOjE0cHh9LmVsLWJhZGdlX19jb250ZW50W2RhdGEtdi1lNTRhMzk3YV17Ym9yZGVyOm5vbmU7YmFja2dyb3VuZC1jb2xvcjojZjQzNTMwfS5tb2R1bGVbZGF0YS12LWU1NGEzOTdhXXtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym94LXNoYWRvdzowIDRweCA1cHggMCBoc2xhKDAsMCUsODAuNCUsLjQ4KX0uY2VudGVyVGl0bGVbZGF0YS12LWU1NGEzOTdhXSwudGl0bGVbZGF0YS12LWU1NGEzOTdhXXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2hlaWdodDo0NHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlN2U3ZTc7Y29sb3I6IzM1OGVlYztmb250LXNpemU6MTZweH0udGl0bGVbZGF0YS12LWU1NGEzOTdhXXtwYWRkaW5nOjAgMTZweH0udGl0bGUgLmljb25mb250W2RhdGEtdi1lNTRhMzk3YV17ZmxleDowIDAgYXV0bzttYXJnaW4tcmlnaHQ6MTBweH0uY2VudGVyVGl0bGVbZGF0YS12LWU1NGEzOTdhXXtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5mYWRlLWVudGVyLWFjdGl2ZVtkYXRhLXYtNzI3MGY5NmRdLC5mYWRlLWxlYXZlLWFjdGl2ZVtkYXRhLXYtNzI3MGY5NmRde3RyYW5zaXRpb246b3BhY2l0eSAuMnMgZWFzZS1pbi1vdXR9LmZhZGUtZW50ZXJbZGF0YS12LTcyNzBmOTZkXSwuZmFkZS1sZWF2ZS1hY3RpdmVbZGF0YS12LTcyNzBmOTZkXXtvcGFjaXR5OjB9LmZhZGUtdHJhbnNmb3JtLWVudGVyLWFjdGl2ZVtkYXRhLXYtNzI3MGY5NmRdLC5mYWRlLXRyYW5zZm9ybS1sZWF2ZS1hY3RpdmVbZGF0YS12LTcyNzBmOTZkXXt0cmFuc2l0aW9uOmFsbCAuM3N9LmZhZGUtdHJhbnNmb3JtLWVudGVyW2RhdGEtdi03MjcwZjk2ZF17b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0zMHB4KX0uZmFkZS10cmFuc2Zvcm0tbGVhdmUtdG9bZGF0YS12LTcyNzBmOTZkXXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMzBweCl9LmZhZGUtbGVmdC1lbnRlci1hY3RpdmVbZGF0YS12LTcyNzBmOTZkXSwuZmFkZS1sZWZ0LWxlYXZlLWFjdGl2ZVtkYXRhLXYtNzI3MGY5NmRdLC5mYWRlLXJpZ2h0LWVudGVyLWFjdGl2ZVtkYXRhLXYtNzI3MGY5NmRdLC5mYWRlLXJpZ2h0LWxlYXZlLWFjdGl2ZVtkYXRhLXYtNzI3MGY5NmRde3RyYW5zaXRpb246YWxsIC4zcyBjdWJpYy1iZXppZXIoLjQ0NSwuMDUsLjU1LC45NSl9LmZhZGUtbGVmdC1lbnRlcltkYXRhLXYtNzI3MGY5NmRde29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWCg1MHB4KX0uZmFkZS1sZWZ0LWxlYXZlLXRvW2RhdGEtdi03MjcwZjk2ZF0sLmZhZGUtcmlnaHQtZW50ZXJbZGF0YS12LTcyNzBmOTZkXXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwcHgpfS5mYWRlLXJpZ2h0LWxlYXZlLXRvW2RhdGEtdi03MjcwZjk2ZF17b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDUwcHgpfS5lbC1zY3JvbGxiYXJfX3dyYXBbZGF0YS12LTcyNzBmOTZkXXtvdmVyZmxvdy14OmhpZGRlbiFpbXBvcnRhbnR9LmVsLXBvcG92ZXIuZWwtcG9wcGVyW2RhdGEtdi03MjcwZjk2ZF0sLmVsLXRvb2x0aXBbZGF0YS12LTcyNzBmOTZkXXtvdXRsaW5lOm5vbmV9LmVsLXN3aXRjaCAuZWwtc3dpdGNoX19jb3JlW2RhdGEtdi03MjcwZjk2ZF17aGVpZ2h0OjE2cHh9LmVsLXN3aXRjaCAuZWwtc3dpdGNoX19jb3JlW2RhdGEtdi03MjcwZjk2ZF06YWZ0ZXJ7dG9wOi0zcHg7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDtiYWNrZ3JvdW5kLWNvbG9yOiMzYzZkZjB9LmVsLXN3aXRjaC5pcy1jaGVja2VkIC5lbC1zd2l0Y2hfX2NvcmVbZGF0YS12LTcyNzBmOTZkXTphZnRlcntiYWNrZ3JvdW5kLWNvbG9yOiMwMGMyZmZ9LmVsLWJ1dHRvbi5lbC1idXR0b24tLXByaW1hcnlbZGF0YS12LTcyNzBmOTZkXXtiYWNrZ3JvdW5kLWNvbG9yOiMzYzZkZjB9LmVsLWJ1dHRvbi5lbC1idXR0b24tLXByaW1hcnlbZGF0YS12LTcyNzBmOTZkXTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiM1MDdjZjJ9LmVsLWJ1dHRvbi5lbC1idXR0b24tLXByaW1hcnlbZGF0YS12LTcyNzBmOTZkXTphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojMzY2MmQ4fS5lbC1zY3JvbGxiYXJfX2JhcltkYXRhLXYtNzI3MGY5NmRde3otaW5kZXg6MTAwMDB9LmVsLXRhZ1tkYXRhLXYtNzI3MGY5NmRde2JvcmRlci1jb2xvcjojM2I3N2UzO2JhY2tncm91bmQtY29sb3I6I2ViZjVmZjtjb2xvcjojMzU5YWZmO2ZvbnQtc2l6ZToxNHB4fS5lbC1iYWRnZV9fY29udGVudFtkYXRhLXYtNzI3MGY5NmRde2JvcmRlcjpub25lO2JhY2tncm91bmQtY29sb3I6I2Y0MzUzMH0uZGl2aWRlcltkYXRhLXYtNzI3MGY5NmRde2hlaWdodDoxMnB4O2JhY2tncm91bmQtY29sb3I6I2YzZjlmZn0uZmFkZS1lbnRlci1hY3RpdmUsLmZhZGUtbGVhdmUtYWN0aXZle3RyYW5zaXRpb246b3BhY2l0eSAuMnMgZWFzZS1pbi1vdXR9LmZhZGUtZW50ZXIsLmZhZGUtbGVhdmUtYWN0aXZle29wYWNpdHk6MH0uZmFkZS10cmFuc2Zvcm0tZW50ZXItYWN0aXZlLC5mYWRlLXRyYW5zZm9ybS1sZWF2ZS1hY3RpdmV7dHJhbnNpdGlvbjphbGwgLjNzfS5mYWRlLXRyYW5zZm9ybS1lbnRlcntvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTMwcHgpfS5mYWRlLXRyYW5zZm9ybS1sZWF2ZS10b3tvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMzBweCl9LmZhZGUtbGVmdC1lbnRlci1hY3RpdmUsLmZhZGUtbGVmdC1sZWF2ZS1hY3RpdmUsLmZhZGUtcmlnaHQtZW50ZXItYWN0aXZlLC5mYWRlLXJpZ2h0LWxlYXZlLWFjdGl2ZXt0cmFuc2l0aW9uOmFsbCAuM3MgY3ViaWMtYmV6aWVyKC40NDUsLjA1LC41NSwuOTUpfS5mYWRlLWxlZnQtZW50ZXJ7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDUwcHgpfS5mYWRlLWxlZnQtbGVhdmUtdG8sLmZhZGUtcmlnaHQtZW50ZXJ7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MHB4KX0uZmFkZS1yaWdodC1sZWF2ZS10b3tvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoNTBweCl9LmVsLXNjcm9sbGJhcl9fd3JhcHtvdmVyZmxvdy14OmhpZGRlbiFpbXBvcnRhbnR9LmVsLXBvcG92ZXIuZWwtcG9wcGVyLC5lbC10b29sdGlwe291dGxpbmU6bm9uZX0uZWwtc3dpdGNoIC5lbC1zd2l0Y2hfX2NvcmV7aGVpZ2h0OjE2cHh9LmVsLXN3aXRjaCAuZWwtc3dpdGNoX19jb3JlOmFmdGVye3RvcDotM3B4O3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7YmFja2dyb3VuZC1jb2xvcjojM2M2ZGYwfS5lbC1zd2l0Y2guaXMtY2hlY2tlZCAuZWwtc3dpdGNoX19jb3JlOmFmdGVye2JhY2tncm91bmQtY29sb3I6IzAwYzJmZn0uZWwtYnV0dG9uLmVsLWJ1dHRvbi0tcHJpbWFyeXtiYWNrZ3JvdW5kLWNvbG9yOiMzYzZkZjB9LmVsLWJ1dHRvbi5lbC1idXR0b24tLXByaW1hcnk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojNTA3Y2YyfS5lbC1idXR0b24uZWwtYnV0dG9uLS1wcmltYXJ5OmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiMzNjYyZDh9LmVsLXNjcm9sbGJhcl9fYmFye3otaW5kZXg6MTAwMDB9LmVsLXRhZ3tib3JkZXItY29sb3I6IzNiNzdlMztiYWNrZ3JvdW5kLWNvbG9yOiNlYmY1ZmY7Y29sb3I6IzM1OWFmZjtmb250LXNpemU6MTRweH0uZWwtYmFkZ2VfX2NvbnRlbnR7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZC1jb2xvcjojZjQzNTMwfSNhcHAsYm9keSxodG1se2JveC1zaXppbmc6Ym9yZGVyLWJveDttaW4td2lkdGg6MTIwMHB4O21pbi1oZWlnaHQ6NTgwcHg7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjV9I2FwcCxib2R5LGh0bWwscHJle2ZvbnQtZmFtaWx5Ok1pY3Jvc29mdCBZYUhlaSxzYW5zLXNlcmlmO2xpbmUtaGVpZ2h0OjEuM31wcmV7bWFyZ2luOjA7Zm9udC1zaXplOjE0cHh9I2FwcHtvdmVyZmxvdzpoaWRkZW59YXtjb2xvcjppbmhlcml0O3RleHQtZGVjb3JhdGlvbjpub25lfXAsdWx7bWFyZ2luOjA7cGFkZGluZzowfWlucHV0Oi13ZWJraXQtYXV0b2ZpbGx7b3V0bGluZTpub25lO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7YmFja2dyb3VuZC1pbWFnZTpub25lO2NvbG9yOiMwMDA7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAwIDEwMDBweCAjZmZmIGluc2V0IWltcG9ydGFudH0uaWNvbntvdmVyZmxvdzpoaWRkZW47d2lkdGg6MWVtO2hlaWdodDoxZW07dmVydGljYWwtYWxpZ246LS4xNWVtO2ZpbGw6Y3VycmVudENvbG9yfS5ydGMtZGVmYXVsdHtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOm5vd3JhcDthbGlnbi1pdGVtczpjZW50ZXI7b3ZlcmZsb3c6aGlkZGVuO21heC1oZWlnaHQ6MjRweH0ucnRjLWRlZmF1bHQgLmljb25mb250e2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbi1yaWdodDo0cHg7Y29sb3I6IzY2Njtmb250LXNpemU6MTRweH0ucnRjLWRlZmF1bHQgLmljb24tdmlkZW8tY2FsbHtmb250LXNpemU6MjBweH0ucnRjLWRlZmF1bHQucnRjLWJ1c3ksLnJ0Yy1kZWZhdWx0LnJ0Yy1idXN5IC5leHRNZXNzYWdlLC5ydGMtZGVmYXVsdC5ydGMtYnVzeSAuaWNvbmZvbnQsLnJ0Yy1kZWZhdWx0LnJ0Yy1kZWNsaW5lLC5ydGMtZGVmYXVsdC5ydGMtZGVjbGluZSAuZXh0TWVzc2FnZSwucnRjLWRlZmF1bHQucnRjLWRlY2xpbmUgLmljb25mb250LC5ydGMtZGVmYXVsdC5ydGMtaGFuZ3VwLC5ydGMtZGVmYXVsdC5ydGMtaGFuZ3VwIC5leHRNZXNzYWdlLC5ydGMtZGVmYXVsdC5ydGMtaGFuZ3VwIC5pY29uZm9udCwucnRjLWRlZmF1bHQucnRjLXVuZGVmaW5lZCwucnRjLWRlZmF1bHQucnRjLXVuZGVmaW5lZCAuZXh0TWVzc2FnZSwucnRjLWRlZmF1bHQucnRjLXVuZGVmaW5lZCAuaWNvbmZvbnR7Y29sb3I6I2Y0MzUzMH0uaXNTZWxmIC5ydGMtZGVmYXVsdCAuaWNvbmZvbnQsLmlzU2VsZiAucnRjLWRlZmF1bHQucnRjLWJ1c3ksLmlzU2VsZiAucnRjLWRlZmF1bHQucnRjLWJ1c3kgLmV4dE1lc3NhZ2UsLmlzU2VsZiAucnRjLWRlZmF1bHQucnRjLWJ1c3kgLmljb25mb250LC5pc1NlbGYgLnJ0Yy1kZWZhdWx0LnJ0Yy1kZWNsaW5lLC5pc1NlbGYgLnJ0Yy1kZWZhdWx0LnJ0Yy1kZWNsaW5lIC5leHRNZXNzYWdlLC5pc1NlbGYgLnJ0Yy1kZWZhdWx0LnJ0Yy1kZWNsaW5lIC5pY29uZm9udCwuaXNTZWxmIC5ydGMtZGVmYXVsdC5ydGMtaGFuZ3VwLC5pc1NlbGYgLnJ0Yy1kZWZhdWx0LnJ0Yy1oYW5ndXAgLmV4dE1lc3NhZ2UsLmlzU2VsZiAucnRjLWRlZmF1bHQucnRjLWhhbmd1cCAuaWNvbmZvbnQsLmlzU2VsZiAucnRjLWRlZmF1bHQucnRjLXVuZGVmaW5lZCwuaXNTZWxmIC5ydGMtZGVmYXVsdC5ydGMtdW5kZWZpbmVkIC5leHRNZXNzYWdlLC5pc1NlbGYgLnJ0Yy1kZWZhdWx0LnJ0Yy11bmRlZmluZWQgLmljb25mb250e2NvbG9yOiNmZmZ9LnBvcnRhbC1uby1kYXRhe2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt3aWR0aDoxMDAlO2hlaWdodDozMjBweDtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXJ9LnBvcnRhbC1uby1kYXRhIGltZ3ttYXgtd2lkdGg6MjAwcHg7d2lkdGg6ODAlfS5wb3J0YWwtbm8tZGF0YSBzcGFue21hcmdpbi10b3A6MTRweDtjb2xvcjojOTk5O2ZvbnQtc2l6ZToxNHB4fQoKLyohIG5vcm1hbGl6ZS5jc3MgdjcuMC4wIHwgTUlUIExpY2Vuc2UgfCBnaXRodWIuY29tL25lY29sYXMvbm9ybWFsaXplLmNzcyAqL2h0bWx7bGluZS1oZWlnaHQ6MS4xNTstbXMtdGV4dC1zaXplLWFkanVzdDoxMDAlOy13ZWJraXQtdGV4dC1zaXplLWFkanVzdDoxMDAlfWJvZHl7bWFyZ2luOjB9YXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLG5hdixzZWN0aW9ue2Rpc3BsYXk6YmxvY2t9aDF7Zm9udC1zaXplOjJlbTttYXJnaW46LjY3ZW0gMH1maWdjYXB0aW9uLGZpZ3VyZSxtYWlue2Rpc3BsYXk6YmxvY2t9ZmlndXJle21hcmdpbjoxZW0gNDBweH1ocntib3gtc2l6aW5nOmNvbnRlbnQtYm94O2hlaWdodDowO292ZXJmbG93OnZpc2libGV9cHJle2ZvbnQtZmFtaWx5Om1vbm9zcGFjZSxtb25vc3BhY2U7Zm9udC1zaXplOjFlbX1he2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7LXdlYmtpdC10ZXh0LWRlY29yYXRpb24tc2tpcDpvYmplY3RzfWFiYnJbdGl0bGVde2JvcmRlci1ib3R0b206bm9uZTt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmUgZG90dGVkfWIsc3Ryb25ne2ZvbnQtd2VpZ2h0OmluaGVyaXQ7Zm9udC13ZWlnaHQ6Ym9sZGVyfWNvZGUsa2JkLHNhbXB7Zm9udC1mYW1pbHk6bW9ub3NwYWNlLG1vbm9zcGFjZTtmb250LXNpemU6MWVtfWRmbntmb250LXN0eWxlOml0YWxpY31tYXJre2JhY2tncm91bmQtY29sb3I6I2ZmMDtjb2xvcjojMDAwfXNtYWxse2ZvbnQtc2l6ZTo4MCV9c3ViLHN1cHtmb250LXNpemU6NzUlO2xpbmUtaGVpZ2h0OjA7cG9zaXRpb246cmVsYXRpdmU7dmVydGljYWwtYWxpZ246YmFzZWxpbmV9c3Vie2JvdHRvbTotLjI1ZW19c3Vwe3RvcDotLjVlbX1hdWRpbyx2aWRlb3tkaXNwbGF5OmlubGluZS1ibG9ja31hdWRpbzpub3QoW2NvbnRyb2xzXSl7ZGlzcGxheTpub25lO2hlaWdodDowfWltZ3tib3JkZXItc3R5bGU6bm9uZX1zdmc6bm90KDpyb290KXtvdmVyZmxvdzpoaWRkZW59YnV0dG9uLGlucHV0LG9wdGdyb3VwLHNlbGVjdCx0ZXh0YXJlYXtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxMDAlO2xpbmUtaGVpZ2h0OjEuMTU7bWFyZ2luOjB9YnV0dG9uLGlucHV0e292ZXJmbG93OnZpc2libGV9YnV0dG9uLHNlbGVjdHt0ZXh0LXRyYW5zZm9ybTpub25lfVt0eXBlPXJlc2V0XSxbdHlwZT1zdWJtaXRdLGJ1dHRvbixodG1sIFt0eXBlPWJ1dHRvbl17LXdlYmtpdC1hcHBlYXJhbmNlOmJ1dHRvbn1bdHlwZT1idXR0b25dOjotbW96LWZvY3VzLWlubmVyLFt0eXBlPXJlc2V0XTo6LW1vei1mb2N1cy1pbm5lcixbdHlwZT1zdWJtaXRdOjotbW96LWZvY3VzLWlubmVyLGJ1dHRvbjo6LW1vei1mb2N1cy1pbm5lcntib3JkZXItc3R5bGU6bm9uZTtwYWRkaW5nOjB9W3R5cGU9YnV0dG9uXTotbW96LWZvY3VzcmluZyxbdHlwZT1yZXNldF06LW1vei1mb2N1c3JpbmcsW3R5cGU9c3VibWl0XTotbW96LWZvY3VzcmluZyxidXR0b246LW1vei1mb2N1c3Jpbmd7b3V0bGluZToxcHggZG90dGVkIEJ1dHRvblRleHR9ZmllbGRzZXR7cGFkZGluZzouMzVlbSAuNzVlbSAuNjI1ZW19bGVnZW5ke2JveC1zaXppbmc6Ym9yZGVyLWJveDtjb2xvcjppbmhlcml0O2Rpc3BsYXk6dGFibGU7bWF4LXdpZHRoOjEwMCU7cGFkZGluZzowO3doaXRlLXNwYWNlOm5vcm1hbH1wcm9ncmVzc3tkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZX10ZXh0YXJlYXtvdmVyZmxvdzphdXRvfVt0eXBlPWNoZWNrYm94XSxbdHlwZT1yYWRpb117Ym94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MH1bdHlwZT1udW1iZXJdOjotd2Via2l0LWlubmVyLXNwaW4tYnV0dG9uLFt0eXBlPW51bWJlcl06Oi13ZWJraXQtb3V0ZXItc3Bpbi1idXR0b257aGVpZ2h0OmF1dG99W3R5cGU9c2VhcmNoXXstd2Via2l0LWFwcGVhcmFuY2U6dGV4dGZpZWxkO291dGxpbmUtb2Zmc2V0Oi0ycHh9W3R5cGU9c2VhcmNoXTo6LXdlYmtpdC1zZWFyY2gtY2FuY2VsLWJ1dHRvbixbdHlwZT1zZWFyY2hdOjotd2Via2l0LXNlYXJjaC1kZWNvcmF0aW9uey13ZWJraXQtYXBwZWFyYW5jZTpub25lfTo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b257LXdlYmtpdC1hcHBlYXJhbmNlOmJ1dHRvbjtmb250OmluaGVyaXR9ZGV0YWlscyxtZW51e2Rpc3BsYXk6YmxvY2t9c3VtbWFyeXtkaXNwbGF5Omxpc3QtaXRlbX1jYW52YXN7ZGlzcGxheTppbmxpbmUtYmxvY2t9W2hpZGRlbl0sdGVtcGxhdGV7ZGlzcGxheTpub25lfQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="6176234" offset="0" length="14620" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="10672" hostname="center.t.dacube.cn" path="/static/js/stomp.min.js" url="https://center.t.dacube.cn/static/js/stomp.min.js" ip="139.9.5.231" port="443" connectionId="11" origin="HTML" frame="1" startDateTime="2019-04-16T14:14:16.629+08:00" startTime="6176140" endTime="6176296">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2VudGVyLnQuZGFjdWJlLmNu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2Mjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24v</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>emgtQ04semg7cT0wLjg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdGF0aWMvanMvc3RvbXAubWluLmpzIEhUVFAvMS4xDQpIb3N0OiBjZW50ZXIudC5kYWN1YmUuY24NCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNTYuMC4yOTI0LjkwIFNhZmFyaS81MzcuMzYgMjM0NUV4cGxvcmVyLzkuNi4wLjE4NjI3DQpBY2NlcHQ6ICovKg0KUmVmZXJlcjogaHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24vDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IHpoLUNOLHpoO3E9MC44DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>9311</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xMi4y</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>OTMxMQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjVjYWViMjRhLTI0NWYi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuMTIuMg0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDkzMTENCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMTEgQXByIDIwMTkgMDM6MTk6MzggR01UDQpFVGFnOiAiNWNhZWIyNGEtMjQ1ZiINCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ly8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMQovKgogICBTdG9tcCBPdmVyIFdlYlNvY2tldCBodHRwOi8vd3d3LmptZXNuaWwubmV0L3N0b21wLXdlYnNvY2tldC9kb2MvIHwgQXBhY2hlIExpY2Vuc2UgVjIuMAoKICAgQ29weXJpZ2h0IChDKSAyMDEwLTIwMTMgW0plZmYgTWVzbmlsXShodHRwOi8vam1lc25pbC5uZXQvKQogICBDb3B5cmlnaHQgKEMpIDIwMTIgW0Z1c2VTb3VyY2UsIEluYy5dKGh0dHA6Ly9mdXNlc291cmNlLmNvbSkKICovCihmdW5jdGlvbiAoKSB7IHZhciB0LCBlLCBuLCBpLCByID0ge30uaGFzT3duUHJvcGVydHksIG8gPSBbXS5zbGljZTsgdCA9IHsgTEY6ICJcbiIsIE5VTEw6ICJceDAwIiB9OyBuID0gZnVuY3Rpb24gKCkgeyB2YXIgZTsgZnVuY3Rpb24gbih0LCBlLCBuKSB7IHRoaXMuY29tbWFuZCA9IHQ7IHRoaXMuaGVhZGVycyA9IGUgIT0gbnVsbCA/IGUgOiB7fTsgdGhpcy5ib2R5ID0gbiAhPSBudWxsID8gbiA6ICIiIH0gbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7IHZhciBlLCBpLCBvLCBzLCB1OyBlID0gW3RoaXMuY29tbWFuZF07IG8gPSB0aGlzLmhlYWRlcnNbImNvbnRlbnQtbGVuZ3RoIl0gPT09IGZhbHNlID8gdHJ1ZSA6IGZhbHNlOyBpZiAobykgeyBkZWxldGUgdGhpcy5oZWFkZXJzWyJjb250ZW50LWxlbmd0aCJdIH0gdSA9IHRoaXMuaGVhZGVyczsgZm9yIChpIGluIHUpIHsgaWYgKCFyLmNhbGwodSwgaSkpIGNvbnRpbnVlOyBzID0gdVtpXTsgZS5wdXNoKCIiICsgaSArICI6IiArIHMpIH0gaWYgKHRoaXMuYm9keSAmJiAhbykgeyBlLnB1c2goImNvbnRlbnQtbGVuZ3RoOiIgKyBuLnNpemVPZlVURjgodGhpcy5ib2R5KSkgfSBlLnB1c2godC5MRiArIHRoaXMuYm9keSk7IHJldHVybiBlLmpvaW4odC5MRikgfTsgbi5zaXplT2ZVVEY4ID0gZnVuY3Rpb24gKHQpIHsgaWYgKHQpIHsgcmV0dXJuIGVuY29kZVVSSSh0KS5tYXRjaCgvJS4ufC4vZykubGVuZ3RoIH0gZWxzZSB7IHJldHVybiAwIH0gfTsgZSA9IGZ1bmN0aW9uIChlKSB7IHZhciBpLCByLCBvLCBzLCB1LCBhLCBjLCBmLCBoLCBsLCBwLCBkLCBnLCBiLCBtLCB2LCB5OyBzID0gZS5zZWFyY2goUmVnRXhwKCIiICsgdC5MRiArIHQuTEYpKTsgdSA9IGUuc3Vic3RyaW5nKDAsIHMpLnNwbGl0KHQuTEYpOyBvID0gdS5zaGlmdCgpOyBhID0ge307IGQgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gdC5yZXBsYWNlKC9eXHMrfFxzKyQvZywgIiIpIH07IHYgPSB1LnJldmVyc2UoKTsgZm9yIChnID0gMCwgbSA9IHYubGVuZ3RoOyBnIDwgbTsgZysrKSB7IGwgPSB2W2ddOyBmID0gbC5pbmRleE9mKCI6Iik7IGFbZChsLnN1YnN0cmluZygwLCBmKSldID0gZChsLnN1YnN0cmluZyhmICsgMSkpIH0gaSA9ICIiOyBwID0gcyArIDI7IGlmIChhWyJjb250ZW50LWxlbmd0aCJdKSB7IGggPSBwYXJzZUludChhWyJjb250ZW50LWxlbmd0aCJdKTsgaSA9ICgiIiArIGUpLnN1YnN0cmluZyhwLCBwICsgaCkgfSBlbHNlIHsgciA9IG51bGw7IGZvciAoYyA9IGIgPSBwLCB5ID0gZS5sZW5ndGg7IHAgPD0geSA/IGIgPCB5IDogYiA+IHk7IGMgPSBwIDw9IHkgPyArK2IgOiAtLWIpIHsgciA9IGUuY2hhckF0KGMpOyBpZiAociA9PT0gdC5OVUxMKSB7IGJyZWFrIH0gaSArPSByIH0gfSByZXR1cm4gbmV3IG4obywgYSwgaSkgfTsgbi51bm1hcnNoYWxsID0gZnVuY3Rpb24gKG4pIHsgdmFyIGk7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciByLCBvLCBzLCB1OyBzID0gbi5zcGxpdChSZWdFeHAoIiIgKyB0Lk5VTEwgKyB0LkxGICsgIioiKSk7IHUgPSBbXTsgZm9yIChyID0gMCwgbyA9IHMubGVuZ3RoOyByIDwgbzsgcisrKSB7IGkgPSBzW3JdOyBpZiAoKGkgIT0gbnVsbCA/IGkubGVuZ3RoIDogdm9pZCAwKSA+IDApIHsgdS5wdXNoKGUoaSkpIH0gfSByZXR1cm4gdSB9KCkgfTsgbi5tYXJzaGFsbCA9IGZ1bmN0aW9uIChlLCBpLCByKSB7IHZhciBvOyBvID0gbmV3IG4oZSwgaSwgcik7IHJldHVybiBvLnRvU3RyaW5nKCkgKyB0Lk5VTEwgfTsgcmV0dXJuIG4gfSgpOyBlID0gZnVuY3Rpb24gKCkgeyB2YXIgZTsgZnVuY3Rpb24gcih0KSB7IHRoaXMud3MgPSB0OyB0aGlzLndzLmJpbmFyeVR5cGUgPSAiYXJyYXlidWZmZXIiOyB0aGlzLmNvdW50ZXIgPSAwOyB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOyB0aGlzLmhlYXJ0YmVhdCA9IHsgb3V0Z29pbmc6IDFlNCwgaW5jb21pbmc6IDFlNCB9OyB0aGlzLm1heFdlYlNvY2tldEZyYW1lU2l6ZSA9IDE2ICogMTAyNDsgdGhpcy5zdWJzY3JpcHRpb25zID0ge30gfSByLnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uICh0KSB7IHZhciBlOyByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgd2luZG93ICE9PSBudWxsID8gKGUgPSB3aW5kb3cuY29uc29sZSkgIT0gbnVsbCA/IGUubG9nKHQpIDogdm9pZCAwIDogdm9pZCAwIH07IGUgPSBmdW5jdGlvbiAoKSB7IGlmIChEYXRlLm5vdykgeyByZXR1cm4gRGF0ZS5ub3coKSB9IGVsc2UgeyByZXR1cm4gKG5ldyBEYXRlKS52YWx1ZU9mIH0gfTsgci5wcm90b3R5cGUuX3RyYW5zbWl0ID0gZnVuY3Rpb24gKHQsIGUsIGkpIHsgdmFyIHI7IHIgPSBuLm1hcnNoYWxsKHQsIGUsIGkpOyBpZiAodHlwZW9mIHRoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsgdGhpcy5kZWJ1ZygiPj4+ICIgKyByKSB9IHdoaWxlICh0cnVlKSB7IGlmIChyLmxlbmd0aCA+IHRoaXMubWF4V2ViU29ja2V0RnJhbWVTaXplKSB7IHRoaXMud3Muc2VuZChyLnN1YnN0cmluZygwLCB0aGlzLm1heFdlYlNvY2tldEZyYW1lU2l6ZSkpOyByID0gci5zdWJzdHJpbmcodGhpcy5tYXhXZWJTb2NrZXRGcmFtZVNpemUpOyBpZiAodHlwZW9mIHRoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsgdGhpcy5kZWJ1ZygicmVtYWluaW5nID0gIiArIHIubGVuZ3RoKSB9IH0gZWxzZSB7IHJldHVybiB0aGlzLndzLnNlbmQocikgfSB9IH07IHIucHJvdG90eXBlLl9zZXR1cEhlYXJ0YmVhdCA9IGZ1bmN0aW9uIChuKSB7IHZhciByLCBvLCBzLCB1LCBhLCBjOyBpZiAoKGEgPSBuLnZlcnNpb24pICE9PSBpLlZFUlNJT05TLlYxXzEgJiYgYSAhPT0gaS5WRVJTSU9OUy5WMV8yKSB7IHJldHVybiB9IGMgPSBmdW5jdGlvbiAoKSB7IHZhciB0LCBlLCBpLCByOyBpID0gblsiaGVhcnQtYmVhdCJdLnNwbGl0KCIsIik7IHIgPSBbXTsgZm9yICh0ID0gMCwgZSA9IGkubGVuZ3RoOyB0IDwgZTsgdCsrKSB7IHUgPSBpW3RdOyByLnB1c2gocGFyc2VJbnQodSkpIH0gcmV0dXJuIHIgfSgpLCBvID0gY1swXSwgciA9IGNbMV07IGlmICghKHRoaXMuaGVhcnRiZWF0Lm91dGdvaW5nID09PSAwIHx8IHIgPT09IDApKSB7IHMgPSBNYXRoLm1heCh0aGlzLmhlYXJ0YmVhdC5vdXRnb2luZywgcik7IGlmICh0eXBlb2YgdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIikgeyB0aGlzLmRlYnVnKCJzZW5kIFBJTkcgZXZlcnkgIiArIHMgKyAibXMiKSB9IHRoaXMucGluZ2VyID0gaS5zZXRJbnRlcnZhbChzLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyBlLndzLnNlbmQodC5MRik7IHJldHVybiB0eXBlb2YgZS5kZWJ1ZyA9PT0gImZ1bmN0aW9uIiA/IGUuZGVidWcoIj4+PiBQSU5HIikgOiB2b2lkIDAgfSB9KHRoaXMpKSB9IGlmICghKHRoaXMuaGVhcnRiZWF0LmluY29taW5nID09PSAwIHx8IG8gPT09IDApKSB7IHMgPSBNYXRoLm1heCh0aGlzLmhlYXJ0YmVhdC5pbmNvbWluZywgbyk7IGlmICh0eXBlb2YgdGhpcy5kZWJ1ZyA9PT0gImZ1bmN0aW9uIikgeyB0aGlzLmRlYnVnKCJjaGVjayBQT05HIGV2ZXJ5ICIgKyBzICsgIm1zIikgfSByZXR1cm4gdGhpcy5wb25nZXIgPSBpLnNldEludGVydmFsKHMsIGZ1bmN0aW9uICh0KSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBuOyBuID0gZSgpIC0gdC5zZXJ2ZXJBY3Rpdml0eTsgaWYgKG4gPiBzICogMikgeyBpZiAodHlwZW9mIHQuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsgdC5kZWJ1ZygiZGlkIG5vdCByZWNlaXZlIHNlcnZlciBhY3Rpdml0eSBmb3IgdGhlIGxhc3QgIiArIG4gKyAibXMiKSB9IHJldHVybiB0LndzLmNsb3NlKCkgfSB9IH0odGhpcykpIH0gfTsgci5wcm90b3R5cGUuX3BhcnNlQ29ubmVjdCA9IGZ1bmN0aW9uICgpIHsgdmFyIHQsIGUsIG4sIGk7IHQgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBvLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdOyBpID0ge307IHN3aXRjaCAodC5sZW5ndGgpIHsgY2FzZSAyOiBpID0gdFswXSwgZSA9IHRbMV07IGJyZWFrOyBjYXNlIDM6IGlmICh0WzFdIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsgaSA9IHRbMF0sIGUgPSB0WzFdLCBuID0gdFsyXSB9IGVsc2UgeyBpLmxvZ2luID0gdFswXSwgaS5wYXNzY29kZSA9IHRbMV0sIGUgPSB0WzJdIH0gYnJlYWs7IGNhc2UgNDogaS5sb2dpbiA9IHRbMF0sIGkucGFzc2NvZGUgPSB0WzFdLCBlID0gdFsyXSwgbiA9IHRbM107IGJyZWFrOyBkZWZhdWx0OiBpLmxvZ2luID0gdFswXSwgaS5wYXNzY29kZSA9IHRbMV0sIGUgPSB0WzJdLCBuID0gdFszXSwgaS5ob3N0ID0gdFs0XSB9cmV0dXJuIFtpLCBlLCBuXSB9OyByLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkgeyB2YXIgciwgcywgdSwgYTsgciA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IG8uY2FsbChhcmd1bWVudHMsIDApIDogW107IGEgPSB0aGlzLl9wYXJzZUNvbm5lY3QuYXBwbHkodGhpcywgcik7IHUgPSBhWzBdLCB0aGlzLmNvbm5lY3RDYWxsYmFjayA9IGFbMV0sIHMgPSBhWzJdOyBpZiAodHlwZW9mIHRoaXMuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsgdGhpcy5kZWJ1ZygiT3BlbmluZyBXZWIgU29ja2V0Li4uIikgfSB0aGlzLndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChpKSB7IHJldHVybiBmdW5jdGlvbiAocikgeyB2YXIgbywgdSwgYSwgYywgZiwgaCwgbCwgcCwgZCwgZywgYiwgbTsgYyA9IHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gInVuZGVmaW5lZCIgJiYgci5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyAobyA9IG5ldyBVaW50OEFycmF5KHIuZGF0YSksIHR5cGVvZiBpLmRlYnVnID09PSAiZnVuY3Rpb24iID8gaS5kZWJ1ZygiLS0tIGdvdCBkYXRhIGxlbmd0aDogIiArIG8ubGVuZ3RoKSA6IHZvaWQgMCwgZnVuY3Rpb24gKCkgeyB2YXIgdCwgZSwgbjsgbiA9IFtdOyBmb3IgKHQgPSAwLCBlID0gby5sZW5ndGg7IHQgPCBlOyB0KyspIHsgdSA9IG9bdF07IG4ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHUpKSB9IHJldHVybiBuIH0oKS5qb2luKCIiKSkgOiByLmRhdGE7IGkuc2VydmVyQWN0aXZpdHkgPSBlKCk7IGlmIChjID09PSB0LkxGKSB7IGlmICh0eXBlb2YgaS5kZWJ1ZyA9PT0gImZ1bmN0aW9uIikgeyBpLmRlYnVnKCI8PDwgUE9ORyIpIH0gcmV0dXJuIH0gaWYgKHR5cGVvZiBpLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7IGkuZGVidWcoIjw8PCAiICsgYykgfSBiID0gbi51bm1hcnNoYWxsKGMpOyBtID0gW107IGZvciAoZCA9IDAsIGcgPSBiLmxlbmd0aDsgZCA8IGc7IGQrKykgeyBmID0gYltkXTsgc3dpdGNoIChmLmNvbW1hbmQpIHsgY2FzZSAiQ09OTkVDVEVEIjogaWYgKHR5cGVvZiBpLmRlYnVnID09PSAiZnVuY3Rpb24iKSB7IGkuZGVidWcoImNvbm5lY3RlZCB0byBzZXJ2ZXIgIiArIGYuaGVhZGVycy5zZXJ2ZXIpIH0gaS5jb25uZWN0ZWQgPSB0cnVlOyBpLl9zZXR1cEhlYXJ0YmVhdChmLmhlYWRlcnMpOyBtLnB1c2godHlwZW9mIGkuY29ubmVjdENhbGxiYWNrID09PSAiZnVuY3Rpb24iID8gaS5jb25uZWN0Q2FsbGJhY2soZikgOiB2b2lkIDApOyBicmVhazsgY2FzZSAiTUVTU0FHRSI6IHAgPSBmLmhlYWRlcnMuc3Vic2NyaXB0aW9uOyBsID0gaS5zdWJzY3JpcHRpb25zW3BdIHx8IGkub25yZWNlaXZlOyBpZiAobCkgeyBhID0gaTsgaCA9IGYuaGVhZGVyc1sibWVzc2FnZS1pZCJdOyBmLmFjayA9IGZ1bmN0aW9uICh0KSB7IGlmICh0ID09IG51bGwpIHsgdCA9IHt9IH0gcmV0dXJuIGEuYWNrKGgsIHAsIHQpIH07IGYubmFjayA9IGZ1bmN0aW9uICh0KSB7IGlmICh0ID09IG51bGwpIHsgdCA9IHt9IH0gcmV0dXJuIGEubmFjayhoLCBwLCB0KSB9OyBtLnB1c2gobChmKSkgfSBlbHNlIHsgbS5wdXNoKHR5cGVvZiBpLmRlYnVnID09PSAiZnVuY3Rpb24iID8gaS5kZWJ1ZygiVW5oYW5kbGVkIHJlY2VpdmVkIE1FU1NBR0U6ICIgKyBmKSA6IHZvaWQgMCkgfSBicmVhazsgY2FzZSAiUkVDRUlQVCI6IG0ucHVzaCh0eXBlb2YgaS5vbnJlY2VpcHQgPT09ICJmdW5jdGlvbiIgPyBpLm9ucmVjZWlwdChmKSA6IHZvaWQgMCk7IGJyZWFrOyBjYXNlICJFUlJPUiI6IG0ucHVzaCh0eXBlb2YgcyA9PT0gImZ1bmN0aW9uIiA/IHMoZikgOiB2b2lkIDApOyBicmVhazsgZGVmYXVsdDogbS5wdXNoKHR5cGVvZiBpLmRlYnVnID09PSAiZnVuY3Rpb24iID8gaS5kZWJ1ZygiVW5oYW5kbGVkIGZyYW1lOiAiICsgZikgOiB2b2lkIDApIH0gfSByZXR1cm4gbSB9IH0odGhpcyk7IHRoaXMud3Mub25jbG9zZSA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBlOyBlID0gIldob29wcyEgTG9zdCBjb25uZWN0aW9uIHRvICIgKyB0LndzLnVybDsgaWYgKHR5cGVvZiB0LmRlYnVnID09PSAiZnVuY3Rpb24iKSB7IHQuZGVidWcoZSkgfSB0Ll9jbGVhblVwKCk7IHJldHVybiB0eXBlb2YgcyA9PT0gImZ1bmN0aW9uIiA/IHMoZSkgOiB2b2lkIDAgfSB9KHRoaXMpOyByZXR1cm4gdGhpcy53cy5vbm9wZW4gPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyBpZiAodHlwZW9mIHQuZGVidWcgPT09ICJmdW5jdGlvbiIpIHsgdC5kZWJ1ZygiV2ViIFNvY2tldCBPcGVuZWQuLi4iKSB9IHVbImFjY2VwdC12ZXJzaW9uIl0gPSBpLlZFUlNJT05TLnN1cHBvcnRlZFZlcnNpb25zKCk7IHVbImhlYXJ0LWJlYXQiXSA9IFt0LmhlYXJ0YmVhdC5vdXRnb2luZywgdC5oZWFydGJlYXQuaW5jb21pbmddLmpvaW4oIiwiKTsgcmV0dXJuIHQuX3RyYW5zbWl0KCJDT05ORUNUIiwgdSkgfSB9KHRoaXMpIH07IHIucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAodCwgZSkgeyBpZiAoZSA9PSBudWxsKSB7IGUgPSB7fSB9IHRoaXMuX3RyYW5zbWl0KCJESVNDT05ORUNUIiwgZSk7IHRoaXMud3Mub25jbG9zZSA9IG51bGw7IHRoaXMud3MuY2xvc2UoKTsgdGhpcy5fY2xlYW5VcCgpOyByZXR1cm4gdHlwZW9mIHQgPT09ICJmdW5jdGlvbiIgPyB0KCkgOiB2b2lkIDAgfTsgci5wcm90b3R5cGUuX2NsZWFuVXAgPSBmdW5jdGlvbiAoKSB7IHRoaXMuY29ubmVjdGVkID0gZmFsc2U7IGlmICh0aGlzLnBpbmdlcikgeyBpLmNsZWFySW50ZXJ2YWwodGhpcy5waW5nZXIpIH0gaWYgKHRoaXMucG9uZ2VyKSB7IHJldHVybiBpLmNsZWFySW50ZXJ2YWwodGhpcy5wb25nZXIpIH0gfTsgci5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uICh0LCBlLCBuKSB7IGlmIChlID09IG51bGwpIHsgZSA9IHt9IH0gaWYgKG4gPT0gbnVsbCkgeyBuID0gIiIgfSBlLmRlc3RpbmF0aW9uID0gdDsgcmV0dXJuIHRoaXMuX3RyYW5zbWl0KCJTRU5EIiwgZSwgbikgfTsgci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHQsIGUsIG4pIHsgdmFyIGk7IGlmIChuID09IG51bGwpIHsgbiA9IHt9IH0gaWYgKCFuLmlkKSB7IG4uaWQgPSAic3ViLSIgKyB0aGlzLmNvdW50ZXIrKyB9IG4uZGVzdGluYXRpb24gPSB0OyB0aGlzLnN1YnNjcmlwdGlvbnNbbi5pZF0gPSBlOyB0aGlzLl90cmFuc21pdCgiU1VCU0NSSUJFIiwgbik7IGkgPSB0aGlzOyByZXR1cm4geyBpZDogbi5pZCwgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGkudW5zdWJzY3JpYmUobi5pZCkgfSB9IH07IHIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHQpIHsgZGVsZXRlIHRoaXMuc3Vic2NyaXB0aW9uc1t0XTsgcmV0dXJuIHRoaXMuX3RyYW5zbWl0KCJVTlNVQlNDUklCRSIsIHsgaWQ6IHQgfSkgfTsgci5wcm90b3R5cGUuYmVnaW4gPSBmdW5jdGlvbiAodCkgeyB2YXIgZSwgbjsgbiA9IHQgfHwgInR4LSIgKyB0aGlzLmNvdW50ZXIrKzsgdGhpcy5fdHJhbnNtaXQoIkJFR0lOIiwgeyB0cmFuc2FjdGlvbjogbiB9KTsgZSA9IHRoaXM7IHJldHVybiB7IGlkOiBuLCBjb21taXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGUuY29tbWl0KG4pIH0sIGFib3J0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlLmFib3J0KG4pIH0gfSB9OyByLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gdGhpcy5fdHJhbnNtaXQoIkNPTU1JVCIsIHsgdHJhbnNhY3Rpb246IHQgfSkgfTsgci5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gdGhpcy5fdHJhbnNtaXQoIkFCT1JUIiwgeyB0cmFuc2FjdGlvbjogdCB9KSB9OyByLnByb3RvdHlwZS5hY2sgPSBmdW5jdGlvbiAodCwgZSwgbikgeyBpZiAobiA9PSBudWxsKSB7IG4gPSB7fSB9IG5bIm1lc3NhZ2UtaWQiXSA9IHQ7IG4uc3Vic2NyaXB0aW9uID0gZTsgcmV0dXJuIHRoaXMuX3RyYW5zbWl0KCJBQ0siLCBuKSB9OyByLnByb3RvdHlwZS5uYWNrID0gZnVuY3Rpb24gKHQsIGUsIG4pIHsgaWYgKG4gPT0gbnVsbCkgeyBuID0ge30gfSBuWyJtZXNzYWdlLWlkIl0gPSB0OyBuLnN1YnNjcmlwdGlvbiA9IGU7IHJldHVybiB0aGlzLl90cmFuc21pdCgiTkFDSyIsIG4pIH07IHJldHVybiByIH0oKTsgaSA9IHsgVkVSU0lPTlM6IHsgVjFfMDogIjEuMCIsIFYxXzE6ICIxLjEiLCBWMV8yOiAiMS4yIiwgc3VwcG9ydGVkVmVyc2lvbnM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICIxLjEsMS4wIiB9IH0sIGNsaWVudDogZnVuY3Rpb24gKHQsIG4pIHsgdmFyIHIsIG87IGlmIChuID09IG51bGwpIHsgbiA9IFsidjEwLnN0b21wIiwgInYxMS5zdG9tcCJdIH0gciA9IGkuV2ViU29ja2V0Q2xhc3MgfHwgV2ViU29ja2V0OyBvID0gbmV3IHIodCwgbik7IHJldHVybiBuZXcgZShvKSB9LCBvdmVyOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gbmV3IGUodCkgfSwgRnJhbWU6IG4gfTsgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAidW5kZWZpbmVkIiAmJiBleHBvcnRzICE9PSBudWxsKSB7IGV4cG9ydHMuU3RvbXAgPSBpIH0gaWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiICYmIHdpbmRvdyAhPT0gbnVsbCkgeyBpLnNldEludGVydmFsID0gZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIHdpbmRvdy5zZXRJbnRlcnZhbChlLCB0KSB9OyBpLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gd2luZG93LmNsZWFySW50ZXJ2YWwodCkgfTsgd2luZG93LlN0b21wID0gaSB9IGVsc2UgaWYgKCFleHBvcnRzKSB7IHNlbGYuU3RvbXAgPSBpIH0gfSkuY2FsbCh0aGlzKTs=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="6176296" offset="0" length="9564" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="10674" hostname="center.t.dacube.cn" path="/static/js/EMedia_x1v1.js" url="https://center.t.dacube.cn/static/js/EMedia_x1v1.js" ip="139.9.5.231" port="443" connectionId="13" origin="HTML" frame="1" startDateTime="2019-04-16T14:14:16.649+08:00" startTime="6176140" endTime="6177078">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2VudGVyLnQuZGFjdWJlLmNu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2Mjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24v</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>emgtQ04semg7cT0wLjg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdGF0aWMvanMvRU1lZGlhX3gxdjEuanMgSFRUUC8xLjENCkhvc3Q6IGNlbnRlci50LmRhY3ViZS5jbg0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2MjcNCkFjY2VwdDogKi8qDQpSZWZlcmVyOiBodHRwczovL2NlbnRlci50LmRhY3ViZS5jbi8NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZSwgYnINCkFjY2VwdC1MYW5ndWFnZTogemgtQ04semg7cT0wLjgNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1461926</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xMi4y</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTQ2MTkyNg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjVjYWViMjRhLTE2NGVhNiI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuMTIuMg0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDE0NjE5MjYNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMTEgQXByIDIwMTkgMDM6MTk6MzggR01UDQpFVGFnOiAiNWNhZWIyNGEtMTY0ZWE2Ig0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHsKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7Ci8qKioqKiovIAkJfQovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwKLyoqKioqKi8gCQkJbDogZmFsc2UsCi8qKioqKiovIAkJCWV4cG9ydHM6IHt9Ci8qKioqKiovIAkJfTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwovKioqKioqLwovKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwovKioqKioqLyAJfQovKioqKioqLwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7Ci8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykgewovKioqKioqLyAJCWlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3QKLyoqKioqKi8gCS8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdAovKioqKioqLyAJLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zCi8qKioqKiovIAkvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3QKLyoqKioqKi8gCS8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7Ci8qKioqKiovIAkJaWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7Ci8qKioqKiovIAkJaWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTsKLyoqKioqKi8gCQlpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlOwovKioqKioqLyAJCXZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7Ci8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTsKLyoqKioqKi8gCQlPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7Ci8qKioqKiovIAkJaWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpOwovKioqKioqLyAJCXJldHVybiBuczsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7Ci8qKioqKiovIAkJdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07Ci8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOwovKioqKioqLyAJCXJldHVybiBnZXR0ZXI7Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07Ci8qKioqKiovCi8qKioqKiovIAkvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gIi9Vc2Vycy9saXV5dW4vY29kZS9zZGsvd2ViaW0vd2VicnRjIjsKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7Ci8qKioqKiovIH0pCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKiovIChbCi8qIDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKCi8qKiovIH0pLAovKiAxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzt2YXIgVXRpbCA9IChfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLmRlZmF1bHQpOwp2YXIgQ2FsbCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7Cgp2YXIgZW1lZGlhID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCndpbmRvdy5XZWJJTSA9IHR5cGVvZiBXZWJJTSAhPT0gJ3VuZGVmaW5lZCcgPyBXZWJJTSA6IHt9OwpXZWJJTS5XZWJSVEMgPSBXZWJJTS5XZWJSVEMgfHwge307CldlYklNLldlYlJUQy5DYWxsID0gQ2FsbDsKV2ViSU0uV2ViUlRDLlV0aWwgPSBVdGlsOwoKV2ViSU0uX19hbHJlYWR5T3Blbk1lZGlhcyA9IFtdOwoKaWYgKCB0cnVlICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gJ29iamVjdCcpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gV2ViSU0uV2ViUlRDOwp9IGVsc2UgaWYgKHRydWUpIHsKICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFdlYklNLldlYlJUQzsKICAgIH0pLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pLAoJCQkJX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwp9CgoKLy8gLyoqCi8vICAqIOWIpOaWreaYr+WQpuaUr+aMgXByYW5zd2VyCi8vICAqLwovLyBpZiAoL0ZpcmVmb3gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsKLy8gICAgIC8vV2ViSU0uV2ViUlRDLnN1cHBvcnRQUkFuc3dlciA9IChuYXZpZ2F0b3IudXNlckFnZW50LnNwbGl0KCJDaHJvbWUvIilbMV0uc3BsaXQoIi4iKVswXSA+PSA1MCkgPyB0cnVlIDogZmFsc2U7Ci8vICAgICBXZWJJTS5XZWJSVEMuc3VwcG9ydFBSQW5zd2VyID0gZmFsc2U7Ci8vIH1lbHNlewovLyAgICAgV2ViSU0uV2ViUlRDLnN1cHBvcnRQUkFuc3dlciA9IHRydWU7Ci8vIH0KV2ViSU0uV2ViUlRDLnN1cHBvcnRQUkFuc3dlciA9IGVtZWRpYS5zdXBwb3J0UFJBbnN3ZXI7Cgpjb25zb2xlICYmIGNvbnNvbGUud2FybignV2VicnRjIHZlcnNpb24nLCAnR2l0LmU0ZjAwMDYnKTsKCi8qKiovIH0pLAovKiAyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgZWFzZW1vYl9lbWVkaWFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBlYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKGVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pOwoKLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fWyJkZWZhdWx0Il0gPSAoZWFzZW1vYl9lbWVkaWFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sidXRpbCJdKTsKCi8qKiovIH0pLAovKiAzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vdmFyIGVtZWRpYSA9IHJlcXVpcmUoJy9Vc2Vycy9EQVRBL1dPUksuSE9NRS9wcm9qZWN0cy9DTy4vRUFTRU1PQl8yMDE2LjA1LjAzfi9FTWVkaWEvd2VicnRjL2Rpc3QvRU1lZGlhX3Nkay1kZXYnKTsKdmFyIGVtZWRpYSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7Cm1vZHVsZS5leHBvcnRzID0gZW1lZGlhOwoKCi8qKiovIH0pLAovKiA0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzt2YXIgcmVxdWlyZTt2YXIgcmVxdWlyZTsoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkgewoJaWYodHJ1ZSkKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2Uge30KfSkod2luZG93LCBmdW5jdGlvbigpIHsKcmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXAKLyoqKioqKi8gCS8vIFRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307Ci8qKioqKiovCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewovKioqKioqLwovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7Ci8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwovKioqKioqLyAJCX0KLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsKLyoqKioqKi8gCQkJaTogbW9kdWxlSWQsCi8qKioqKiovIAkJCWw6IGZhbHNlLAovKioqKioqLyAJCQlleHBvcnRzOiB7fQovKioqKioqLyAJCX07Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLyAJCW1vZHVsZS5sID0gdHJ1ZTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKLyoqKioqKi8gCX0KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewovKioqKioqLyAJCWlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHsKLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsKLyoqKioqKi8gCQkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsCi8qKioqKiovIAkJCQllbnVtZXJhYmxlOiB0cnVlLAovKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXIKLyoqKioqKi8gCQkJfSk7Ci8qKioqKiovIAkJfQovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHsKLyoqKioqKi8gCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pOwovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsKLyoqKioqKi8gCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDoKLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsKLyoqKioqKi8gCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7Ci8qKioqKiovIAkJcmV0dXJuIGdldHRlcjsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiL1VzZXJzL0RBVEEvV09SSy5IT01FL3Byb2plY3RzL0NPLi9FQVNFTU9CXzIwMTYuMDUuMDN+L0VNZWRpYSI7Ci8qKioqKiovCi8qKioqKiovCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEzKTsKLyoqKioqKi8gfSkKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKi8gKFsKLyogMCAqLywKLyogMSAqLywKLyogMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgYWRhcHRlcjsKCmlmICghIWRvY3VtZW50LmRvY3VtZW50TW9kZSkgewogICAgLy8gRGV0ZWN0IElFICg2LTExKQogICAgdmFyIGhhc01hdGNoID0gL1xicnZbIDpdKyhcZCspL2cuZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSB8fCBbXTsKCiAgICB2YXIgd2VicnRjRGV0ZWN0ZWRCcm93c2VyID0gJ0lFJzsKICAgIHZhciB3ZWJydGNEZXRlY3RlZFZlcnNpb24gPSBwYXJzZUludChoYXNNYXRjaFsxXSwgMTApOwogICAgdmFyIHdlYnJ0Y01pbmltdW1WZXJzaW9uID0gOTsKICAgIHZhciB3ZWJydGNEZXRlY3RlZFR5cGUgPSAncGx1Z2luJzsKICAgIHZhciB3ZWJydGNEZXRlY3RlZERDU3VwcG9ydCA9ICdTQ1RQJzsKCiAgICBpZiAoIXdlYnJ0Y0RldGVjdGVkVmVyc2lvbikgewogICAgICAgIGhhc01hdGNoID0gL1xiTVNJRVsgOl0rKFxkKykvZy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IFtdOwoKICAgICAgICB3ZWJydGNEZXRlY3RlZFZlcnNpb24gPSBwYXJzZUludChoYXNNYXRjaFsxXSB8fCAnMCcsIDEwKTsKICAgIH0KCiAgICAvL2FkYXB0ZXIgPSByZXF1aXJlKCcuL2FkYXB0ZXIuaWUnKTsKICAgIGxvZ2dlci5lcnJvcigiYWRhcHRlci5pZSBub3QgcmVxdWlyZWQiKTsKCiAgICBhZGFwdGVyLl9fYnJvd3NlciA9IHdlYnJ0Y0RldGVjdGVkQnJvd3NlcjsKICAgIGFkYXB0ZXIuX19icm93c2VyVmVyc2lvbiA9IHdlYnJ0Y0RldGVjdGVkVmVyc2lvbjsKCiAgICAvL2FkYXB0ZXIgPSByZXF1aXJlKCcuL1RlbWFzeXMud3JhcHBlcicpOyAvLzYuMC4zCn0gZWxzZSB7CiAgICBhZGFwdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsgLy82LjIuMAogICAgd3JhcEF0dGFjaE1lZGlhU3RyZWFtKCk7Cn0KCmFkYXB0ZXIuX19icm93c2VyID0gYWRhcHRlci5fX2Jyb3dzZXIgfHwgYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyOyAvLyBmaXJlZm94IGNocm9tZSBzYWZhcmkKYWRhcHRlci5fX2Jyb3dzZXJWZXJzaW9uID0gYWRhcHRlci5fX2Jyb3dzZXJWZXJzaW9uIHx8IGFkYXB0ZXIuYnJvd3NlckRldGFpbHMudmVyc2lvbjsKCmNvbnNvbGUgJiYgdHlwZW9mIGNvbnNvbGUuaW5mbyA9PT0gImZ1bmN0aW9uIiAmJiBjb25zb2xlLmluZm8oIkN1cnJlbnQgYnJvd3NlciIsIGFkYXB0ZXIuX19icm93c2VyLCBhZGFwdGVyLl9fYnJvd3NlclZlcnNpb24pOwoKaWYgKCJOb3QgYSBzdXBwb3J0ZWQgYnJvd3Nlci4iID09PSBhZGFwdGVyLl9fYnJvd3NlcikgewogICAgdGhyb3cgIk5vdCBhIHN1cHBvcnRlZCBicm93c2VyIjsKfQoKbW9kdWxlLmV4cG9ydHMgPSBhZGFwdGVyOwoKZnVuY3Rpb24gd3JhcEF0dGFjaE1lZGlhU3RyZWFtKCkgewogICAgZnVuY3Rpb24gX2F0dGFjaE1lZGlhU3RyZWFtKGVsZW1lbnQsIHN0cmVhbSkgewogICAgICAgIGVsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtOwogICAgfQoKICAgIC8qKgogICAgICogbXV0ZWQgdW5kZWZpbmVkLCBzdHJlYW0gX2xvY2F0ZWQgdHJ1ZSDml7ZtdXRlZAogICAgICoKICAgICAqIEBwYXJhbSBlbGVtZW50CiAgICAgKiBAcGFyYW0gc3RyZWFtCiAgICAgKiBAcGFyYW0gbXV0ZWQKICAgICAqIEByZXR1cm5zIHsqfQogICAgICovCiAgICBmdW5jdGlvbiBlYXNlbW9iQXR0YWNoTWVkaWFTdHJlYW0oZWxlbWVudCwgc3RyZWFtLCBtdXRlZCwgX2Z1bikgewogICAgICAgIGZ1bmN0aW9uIG11dGUoKSB7CiAgICAgICAgICAgIG11dGVkID0gISEobXV0ZWQgPT09IHVuZGVmaW5lZCA/IHN0cmVhbS5fbG9jYXRlZCA6IG11dGVkKTsKCiAgICAgICAgICAgIC8v5Li65LqG6Kej5Yaz5p+Q5Lqb5omL5py6bXV0ZemAoOaIkOacrOWcsOWbvuWDj+WNoeeahOmXrumimAogICAgICAgICAgICBlbGVtZW50Lm11dGVkID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChtdXRlZCAhPT0gZWxlbWVudC5tdXRlZCkgewogICAgICAgICAgICAgICAgZWxlbWVudC5tdXRlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF9mdW4gfHwgKF9mdW4gPSB3aW5kb3cuX19hdHRhY2hNZWRpYVN0cmVhbSkgfHwgKF9mdW4gPSBfYXR0YWNoTWVkaWFTdHJlYW0pOwoKICAgICAgICBpZiAoIWVsZW1lbnQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFzdHJlYW0pIHsKICAgICAgICAgICAgX2Z1bihlbGVtZW50LCBzdHJlYW0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIWVsZW1lbnQuc3JjT2JqZWN0KSB7CiAgICAgICAgICAgIG11dGUoKTsKICAgICAgICAgICAgX2Z1bihlbGVtZW50LCBzdHJlYW0pOwogICAgICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgICB9CgogICAgICAgIGlmIChlbGVtZW50LnNyY09iamVjdC5fbG9jYXRlZCAvL29sZCBzdHJlYW0g5Lmf5pivIF9sb2NhdGVkCiAgICAgICAgJiYgc3RyZWFtLl9sb2NhdGVkICYmIGVsZW1lbnQuc3JjT2JqZWN0LmlkID09PSBzdHJlYW0uaWQpIHsKICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuc3JjT2JqZWN0OwogICAgICAgIH0KCiAgICAgICAgbXV0ZSgpOwogICAgICAgIF9mdW4oZWxlbWVudCwgc3RyZWFtKTsKCiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICB9CgogICAgaWYgKHdpbmRvdy5hdHRhY2hNZWRpYVN0cmVhbSAmJiB3aW5kb3cuYXR0YWNoTWVkaWFTdHJlYW0uX3dyYXBwZWQgIT09IHRydWUpIHsKICAgICAgICB3aW5kb3cuX19hdHRhY2hNZWRpYVN0cmVhbSA9IHdpbmRvdy5hdHRhY2hNZWRpYVN0cmVhbTsKICAgIH0KCiAgICB3aW5kb3cuYXR0YWNoTWVkaWFTdHJlYW0gPSBlYXNlbW9iQXR0YWNoTWVkaWFTdHJlYW07CiAgICB3aW5kb3cuYXR0YWNoTWVkaWFTdHJlYW0uX3dyYXBwZWQgPSB0cnVlOwogICAgY29uc29sZSAmJiB0eXBlb2YgY29uc29sZS5pbmZvID09PSAiZnVuY3Rpb24iICYmIGNvbnNvbGUuaW5mbygiV3JhcCB0aGUgYXR0YWNoTWVkaWFTdHJlYW0gIiwgYWRhcHRlci5fX2Jyb3dzZXIsIGFkYXB0ZXIuX19icm93c2VyVmVyc2lvbik7Cn0KCi8qKiovIH0pLAovKiAzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07CgovLzYuMi4wCihmdW5jdGlvbiAoZikgewogICAgaWYgKCh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoZXhwb3J0cykpID09PSAib2JqZWN0IiAmJiB0eXBlb2YgbW9kdWxlICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZigpOwogICAgfSBlbHNlIGlmICh0cnVlKSB7CiAgICAgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IChmKSwKCQkJCV9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gKHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgPwoJCQkJKF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSkgOiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18pLAoJCQkJX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpOwogICAgfSBlbHNlIHsgdmFyIGc7IH0KfSkoZnVuY3Rpb24gKCkgewogICAgdmFyIGRlZmluZSwgbW9kdWxlLCBleHBvcnRzO3JldHVybiBmdW5jdGlvbiBlKHQsIG4sIHIpIHsKICAgICAgICBmdW5jdGlvbiBzKG8sIHUpIHsKICAgICAgICAgICAgaWYgKCFuW29dKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRbb10pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHR5cGVvZiByZXF1aXJlID09ICJmdW5jdGlvbiIgJiYgcmVxdWlyZTtpZiAoIXUgJiYgYSkgcmV0dXJuIHJlcXVpcmUobywgITApO2lmIChpKSByZXR1cm4gaShvLCAhMCk7dmFyIGYgPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIiArIG8gKyAiJyIpO3Rocm93IGYuY29kZSA9ICJNT0RVTEVfTk9UX0ZPVU5EIiwgZjsKICAgICAgICAgICAgICAgIH12YXIgbCA9IG5bb10gPSB7IGV4cG9ydHM6IHt9IH07dFtvXVswXS5jYWxsKGwuZXhwb3J0cywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRbb11bMV1bZV07cmV0dXJuIHMobiA/IG4gOiBlKTsKICAgICAgICAgICAgICAgIH0sIGwsIGwuZXhwb3J0cywgZSwgdCwgbiwgcik7CiAgICAgICAgICAgIH1yZXR1cm4gbltvXS5leHBvcnRzOwogICAgICAgIH12YXIgaSA9IHR5cGVvZiByZXF1aXJlID09ICJmdW5jdGlvbiIgJiYgcmVxdWlyZTtmb3IgKHZhciBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHsKICAgICAgICAgICAgcyhyW29dKTsKICAgICAgICB9cmV0dXJuIHM7CiAgICB9KHsgMTogW2Z1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgICAgICAgLyoKICAgICAgICAgICAgICogIFZlcnNpb246IDYuMi4wCiAgICAgICAgICAgICAqCiAgICAgICAgICAgICAqICBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgICAgICAgICAgICAqCiAgICAgICAgICAgICAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAgICAgICAgICAgICAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICAgICAgICAgICAgICogIHRyZWUuCiAgICAgICAgICAgICAqLwogICAgICAgICAgICAvKiBlc2xpbnQtZW52IG5vZGUgKi8KICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgICAgdmFyIFNEUFV0aWxzID0gcmVxdWlyZSgnc2RwJyk7CgogICAgICAgICAgICBmdW5jdGlvbiBmaXhTdGF0c1R5cGUoc3RhdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBpbmJvdW5kcnRwOiAnaW5ib3VuZC1ydHAnLAogICAgICAgICAgICAgICAgICAgIG91dGJvdW5kcnRwOiAnb3V0Ym91bmQtcnRwJywKICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLAogICAgICAgICAgICAgICAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJywKICAgICAgICAgICAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgICAgICAgICAgICAgfVtzdGF0LnR5cGVdIHx8IHN0YXQudHlwZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gd3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIGNhcHMsIHR5cGUsIHN0cmVhbSwgZHRsc1JvbGUpIHsKICAgICAgICAgICAgICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uKHRyYW5zY2VpdmVyLmtpbmQsIGNhcHMpOwoKICAgICAgICAgICAgICAgIC8vIE1hcCBJQ0UgcGFyYW1ldGVycyAodWZyYWcsIHB3ZCkgdG8gU0RQLgogICAgICAgICAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyh0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKSk7CgogICAgICAgICAgICAgICAgLy8gTWFwIERUTFMgcGFyYW1ldGVycyB0byBTRFAuCiAgICAgICAgICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycyh0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LmdldExvY2FsUGFyYW1ldGVycygpLCB0eXBlID09PSAnb2ZmZXInID8gJ2FjdHBhc3MnIDogZHRsc1JvbGUgfHwgJ2FjdGl2ZScpOwoKICAgICAgICAgICAgICAgIHNkcCArPSAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcclxuJzsKCiAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPXNlbmRyZWN2XHJcbic7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT1zZW5kb25seVxyXG4nOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikgewogICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT1yZWN2b25seVxyXG4nOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9aW5hY3RpdmVcclxuJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrSWQgPSB0cmFuc2NlaXZlci5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkIHx8IHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjay5pZDsKICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkID0gdHJhY2tJZDsKICAgICAgICAgICAgICAgICAgICAvLyBzcGVjLgogICAgICAgICAgICAgICAgICAgIHZhciBtc2lkID0gJ21zaWQ6JyArIChzdHJlYW0gPyBzdHJlYW0uaWQgOiAnLScpICsgJyAnICsgdHJhY2tJZCArICdcclxuJzsKICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9JyArIG1zaWQ7CiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIENocm9tZS4gTGVnYWN5IHNob3VsZCBubyBsb25nZXIgYmUgcmVxdWlyZWQuCiAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArICcgJyArIG1zaWQ7CgogICAgICAgICAgICAgICAgICAgIC8vIFJUWAogICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArICcgJyArIG1zaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT1zc3JjLWdyb3VwOkZJRCAnICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsgJyAnICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArICdcclxuJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBGSVhNRTogdGhpcyBzaG91bGQgYmUgd3JpdHRlbiBieSB3cml0ZVJ0cERlc2NyaXB0aW9uLgogICAgICAgICAgICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXHJcbic7CiAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7CiAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgKyAnIGNuYW1lOicgKyBTRFBVdGlscy5sb2NhbENOYW1lICsgJ1xyXG4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHNkcDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRWRnZSBkb2VzIG5vdCBsaWtlCiAgICAgICAgICAgIC8vIDEpIHN0dW46IGZpbHRlcmVkIGFmdGVyIDE0MzkzIHVubGVzcyA/dHJhbnNwb3J0PXVkcCBpcyBwcmVzZW50CiAgICAgICAgICAgIC8vIDIpIHR1cm46IHRoYXQgZG9lcyBub3QgaGF2ZSBhbGwgb2YgdHVybjpob3N0OnBvcnQ/dHJhbnNwb3J0PXVkcAogICAgICAgICAgICAvLyAzKSB0dXJuOiB3aXRoIGlwdjYgYWRkcmVzc2VzCiAgICAgICAgICAgIC8vIDQpIHR1cm46IG9jY3VycmluZyBtdWxpcGxlIHRpbWVzCiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbHRlckljZVNlcnZlcnMoaWNlU2VydmVycywgZWRnZVZlcnNpb24pIHsKICAgICAgICAgICAgICAgIHZhciBoYXNUdXJuID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpY2VTZXJ2ZXJzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpY2VTZXJ2ZXJzKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gaWNlU2VydmVycy5maWx0ZXIoZnVuY3Rpb24gKHNlcnZlcikgewogICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXIgJiYgKHNlcnZlci51cmxzIHx8IHNlcnZlci51cmwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmxzID0gc2VydmVyLnVybHMgfHwgc2VydmVyLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcnZlci51cmwgJiYgIXNlcnZlci51cmxzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1JUQ0ljZVNlcnZlci51cmwgaXMgZGVwcmVjYXRlZCEgVXNlIHVybHMgaW5zdGVhZC4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgdXJscyA9PT0gJ3N0cmluZyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1N0cmluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJscyA9IFt1cmxzXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB1cmxzID0gdXJscy5maWx0ZXIoZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkVHVybiA9IHVybC5pbmRleE9mKCd0dXJuOicpID09PSAwICYmIHVybC5pbmRleE9mKCd0cmFuc3BvcnQ9dWRwJykgIT09IC0xICYmIHVybC5pbmRleE9mKCd0dXJuOlsnKSA9PT0gLTEgJiYgIWhhc1R1cm47CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkVHVybikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1R1cm4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybC5pbmRleE9mKCdzdHVuOicpID09PSAwICYmIGVkZ2VWZXJzaW9uID49IDE0MzkzICYmIHVybC5pbmRleE9mKCc/dHJhbnNwb3J0PXVkcCcpID09PSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VydmVyLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyLnVybHMgPSBpc1N0cmluZyA/IHVybHNbMF0gOiB1cmxzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF1cmxzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRGV0ZXJtaW5lcyB0aGUgaW50ZXJzZWN0aW9uIG9mIGxvY2FsIGFuZCByZW1vdGUgY2FwYWJpbGl0aWVzLgogICAgICAgICAgICBmdW5jdGlvbiBnZXRDb21tb25DYXBhYmlsaXRpZXMobG9jYWxDYXBhYmlsaXRpZXMsIHJlbW90ZUNhcGFiaWxpdGllcykgewogICAgICAgICAgICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IHsKICAgICAgICAgICAgICAgICAgICBjb2RlY3M6IFtdLAogICAgICAgICAgICAgICAgICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLAogICAgICAgICAgICAgICAgICAgIGZlY01lY2hhbmlzbXM6IFtdCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBmaW5kQ29kZWNCeVBheWxvYWRUeXBlID0gZnVuY3Rpb24gZmluZENvZGVjQnlQYXlsb2FkVHlwZShwdCwgY29kZWNzKSB7CiAgICAgICAgICAgICAgICAgICAgcHQgPSBwYXJzZUludChwdCwgMTApOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlY3NbaV0ucGF5bG9hZFR5cGUgPT09IHB0IHx8IGNvZGVjc1tpXS5wcmVmZXJyZWRQYXlsb2FkVHlwZSA9PT0gcHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2RlY3NbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBydHhDYXBhYmlsaXR5TWF0Y2hlcyA9IGZ1bmN0aW9uIHJ0eENhcGFiaWxpdHlNYXRjaGVzKGxSdHgsIHJSdHgsIGxDb2RlY3MsIHJDb2RlY3MpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbENvZGVjID0gZmluZENvZGVjQnlQYXlsb2FkVHlwZShsUnR4LnBhcmFtZXRlcnMuYXB0LCBsQ29kZWNzKTsKICAgICAgICAgICAgICAgICAgICB2YXIgckNvZGVjID0gZmluZENvZGVjQnlQYXlsb2FkVHlwZShyUnR4LnBhcmFtZXRlcnMuYXB0LCByQ29kZWNzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbENvZGVjICYmIHJDb2RlYyAmJiBsQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpID09PSByQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbiAobENvZGVjKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByQ29kZWMgPSByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobENvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gckNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSAmJiBsQ29kZWMuY2xvY2tSYXRlID09PSByQ29kZWMuY2xvY2tSYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobENvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3J0eCcgJiYgbENvZGVjLnBhcmFtZXRlcnMgJiYgckNvZGVjLnBhcmFtZXRlcnMuYXB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIFJUWCB3ZSBuZWVkIHRvIGZpbmQgdGhlIGxvY2FsIHJ0eCB0aGF0IGhhcyBhIGFwdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIHBvaW50cyB0byB0aGUgc2FtZSBsb2NhbCBjb2RlYyBhcyB0aGUgcmVtb3RlIG9uZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJ0eENhcGFiaWxpdHlNYXRjaGVzKGxDb2RlYywgckNvZGVjLCBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MsIHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJDb2RlYyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkockNvZGVjKSk7IC8vIGRlZXBjb3B5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgY2hhbm5lbHMgaXMgdGhlIGhpZ2hlc3QgY29tbW9uIG51bWJlciBvZiBjaGFubmVscwogICAgICAgICAgICAgICAgICAgICAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzID0gTWF0aC5taW4obENvZGVjLm51bUNoYW5uZWxzLCByQ29kZWMubnVtQ2hhbm5lbHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHVzaCByQ29kZWMgc28gd2UgcmVwbHkgd2l0aCBvZmZlcmVyIHBheWxvYWQgdHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uQ2FwYWJpbGl0aWVzLmNvZGVjcy5wdXNoKHJDb2RlYyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIGNvbW1vbiBmZWVkYmFjayBtZWNoYW5pc21zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByQ29kZWMucnRjcEZlZWRiYWNrID0gckNvZGVjLnJ0Y3BGZWVkYmFjay5maWx0ZXIoZnVuY3Rpb24gKGZiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsQ29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsQ29kZWMucnRjcEZlZWRiYWNrW2pdLnR5cGUgPT09IGZiLnR5cGUgJiYgbENvZGVjLnJ0Y3BGZWVkYmFja1tqXS5wYXJhbWV0ZXIgPT09IGZiLnBhcmFtZXRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRTogYWxzbyBuZWVkIHRvIGRldGVybWluZSAucGFyYW1ldGVycwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIHNlZSBodHRwczovL2dpdGh1Yi5jb20vb3BlbnBlZXIvb3J0Yy9pc3N1ZXMvNTY5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAobEhlYWRlckV4dGVuc2lvbikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJIZWFkZXJFeHRlbnNpb24gPSByZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9uc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxIZWFkZXJFeHRlbnNpb24udXJpID09PSBySGVhZGVyRXh0ZW5zaW9uLnVyaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMucHVzaChySGVhZGVyRXh0ZW5zaW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8gRklYTUU6IGZlY01lY2hhbmlzbXMKICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25DYXBhYmlsaXRpZXM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGlzIGFjdGlvbj1zZXRMb2NhbERlc2NyaXB0aW9uIHdpdGggdHlwZSBhbGxvd2VkIGluIHNpZ25hbGluZ1N0YXRlCiAgICAgICAgICAgIGZ1bmN0aW9uIGlzQWN0aW9uQWxsb3dlZEluU2lnbmFsaW5nU3RhdGUoYWN0aW9uLCB0eXBlLCBzaWduYWxpbmdTdGF0ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBvZmZlcjogewogICAgICAgICAgICAgICAgICAgICAgICBzZXRMb2NhbERlc2NyaXB0aW9uOiBbJ3N0YWJsZScsICdoYXZlLWxvY2FsLW9mZmVyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlbW90ZURlc2NyaXB0aW9uOiBbJ3N0YWJsZScsICdoYXZlLXJlbW90ZS1vZmZlciddCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBhbnN3ZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0TG9jYWxEZXNjcmlwdGlvbjogWydoYXZlLXJlbW90ZS1vZmZlcicsICdoYXZlLWxvY2FsLXByYW5zd2VyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlbW90ZURlc2NyaXB0aW9uOiBbJ2hhdmUtbG9jYWwtb2ZmZXInLCAnaGF2ZS1yZW1vdGUtcHJhbnN3ZXInXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1bdHlwZV1bYWN0aW9uXS5pbmRleE9mKHNpZ25hbGluZ1N0YXRlKSAhPT0gLTE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIG1heWJlQWRkQ2FuZGlkYXRlKGljZVRyYW5zcG9ydCwgY2FuZGlkYXRlKSB7CiAgICAgICAgICAgICAgICAvLyBFZGdlJ3MgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gYWRkcyBzb21lIGZpZWxkcyB0aGVyZWZvcmUKICAgICAgICAgICAgICAgIC8vIG5vdCBhbGwgZmllbGTRlSBhcmUgdGFrZW4gaW50byBhY2NvdW50LgogICAgICAgICAgICAgICAgdmFyIGFscmVhZHlBZGRlZCA9IGljZVRyYW5zcG9ydC5nZXRSZW1vdGVDYW5kaWRhdGVzKCkuZmluZChmdW5jdGlvbiAocmVtb3RlQ2FuZGlkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZS5mb3VuZGF0aW9uID09PSByZW1vdGVDYW5kaWRhdGUuZm91bmRhdGlvbiAmJiBjYW5kaWRhdGUuaXAgPT09IHJlbW90ZUNhbmRpZGF0ZS5pcCAmJiBjYW5kaWRhdGUucG9ydCA9PT0gcmVtb3RlQ2FuZGlkYXRlLnBvcnQgJiYgY2FuZGlkYXRlLnByaW9yaXR5ID09PSByZW1vdGVDYW5kaWRhdGUucHJpb3JpdHkgJiYgY2FuZGlkYXRlLnByb3RvY29sID09PSByZW1vdGVDYW5kaWRhdGUucHJvdG9jb2wgJiYgY2FuZGlkYXRlLnR5cGUgPT09IHJlbW90ZUNhbmRpZGF0ZS50eXBlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlBZGRlZCkgewogICAgICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoY2FuZGlkYXRlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAhYWxyZWFkeUFkZGVkOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBtYWtlRXJyb3IobmFtZSwgZGVzY3JpcHRpb24pIHsKICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IEVycm9yKGRlc2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgIGUubmFtZSA9IG5hbWU7CiAgICAgICAgICAgICAgICAvLyBsZWdhY3kgZXJyb3IgY29kZXMgZnJvbSBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNpZGwtRE9NRXhjZXB0aW9uLWVycm9yLW5hbWVzCiAgICAgICAgICAgICAgICBlLmNvZGUgPSB7CiAgICAgICAgICAgICAgICAgICAgTm90U3VwcG9ydGVkRXJyb3I6IDksCiAgICAgICAgICAgICAgICAgICAgSW52YWxpZFN0YXRlRXJyb3I6IDExLAogICAgICAgICAgICAgICAgICAgIEludmFsaWRBY2Nlc3NFcnJvcjogMTUsCiAgICAgICAgICAgICAgICAgICAgVHlwZUVycm9yOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICAgICAgT3BlcmF0aW9uRXJyb3I6IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgfVtuYW1lXTsKICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh3aW5kb3csIGVkZ2VWZXJzaW9uKSB7CiAgICAgICAgICAgICAgICAvLyBodHRwczovL3czYy5naXRodWIuaW8vbWVkaWFjYXB0dXJlLW1haW4vI21lZGlhc3RyZWFtCiAgICAgICAgICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gYWRkIHRoZSB0cmFjayB0byB0aGUgc3RyZWFtIGFuZAogICAgICAgICAgICAgICAgLy8gZGlzcGF0Y2ggdGhlIGV2ZW50IG91cnNlbHZlcy4KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFRyYWNrVG9TdHJlYW1BbmRGaXJlRXZlbnQodHJhY2ssIHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgIHN0cmVhbS5hZGRUcmFjayh0cmFjayk7CiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmRpc3BhdGNoRXZlbnQobmV3IHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrRXZlbnQoJ2FkZHRyYWNrJywgeyB0cmFjazogdHJhY2sgfSkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZVRyYWNrRnJvbVN0cmVhbUFuZEZpcmVFdmVudCh0cmFjaywgc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTsKICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZGlzcGF0Y2hFdmVudChuZXcgd2luZG93Lk1lZGlhU3RyZWFtVHJhY2tFdmVudCgncmVtb3ZldHJhY2snLCB7IHRyYWNrOiB0cmFjayB9KSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZmlyZUFkZFRyYWNrKHBjLCB0cmFjaywgcmVjZWl2ZXIsIHN0cmVhbXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2tFdmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICAgICAgICB0cmFja0V2ZW50LnRyYWNrID0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgdHJhY2tFdmVudC5yZWNlaXZlciA9IHJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQudHJhbnNjZWl2ZXIgPSB7IHJlY2VpdmVyOiByZWNlaXZlciB9OwogICAgICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQuc3RyZWFtcyA9IHN0cmVhbXM7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBwYy5fZGlzcGF0Y2hFdmVudCgndHJhY2snLCB0cmFja0V2ZW50KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbiBSVENQZWVyQ29ubmVjdGlvbihjb25maWcpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX2V2ZW50VGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgICAgICAgICAgICAgICAgIFsnYWRkRXZlbnRMaXN0ZW5lcicsICdyZW1vdmVFdmVudExpc3RlbmVyJywgJ2Rpc3BhdGNoRXZlbnQnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGNbbWV0aG9kXSA9IF9ldmVudFRhcmdldFttZXRob2RdLmJpbmQoX2V2ZW50VGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5Ucmlja2xlSWNlQ2FuZGlkYXRlcyA9IG51bGw7CgogICAgICAgICAgICAgICAgICAgIHRoaXMubmVlZE5lZ290aWF0aW9uID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTdHJlYW1zID0gW107CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVTdHJlYW1zID0gW107CgogICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxEZXNjcmlwdGlvbiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVEZXNjcmlwdGlvbiA9IG51bGw7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsaW5nU3RhdGUgPSAnc3RhYmxlJzsKICAgICAgICAgICAgICAgICAgICB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9ICduZXcnOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gJ25ldyc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZSA9ICduZXcnOwoKICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbmZpZyB8fCB7fSkpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLnVzaW5nQnVuZGxlID0gY29uZmlnLmJ1bmRsZVBvbGljeSA9PT0gJ21heC1idW5kbGUnOwogICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcucnRjcE11eFBvbGljeSA9PT0gJ25lZ290aWF0ZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbWFrZUVycm9yKCdOb3RTdXBwb3J0ZWRFcnJvcicsICdydGNwTXV4UG9saWN5IFwnbmVnb3RpYXRlXCcgaXMgbm90IHN1cHBvcnRlZCcpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNvbmZpZy5ydGNwTXV4UG9saWN5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5ydGNwTXV4UG9saWN5ID0gJ3JlcXVpcmUnOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbGF5JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSA9ICdhbGwnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbmZpZy5idW5kbGVQb2xpY3kpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYmFsYW5jZWQnOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtYXgtY29tcGF0JzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF4LWJ1bmRsZSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5idW5kbGVQb2xpY3kgPSAnYmFsYW5jZWQnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjb25maWcuaWNlU2VydmVycyA9IGZpbHRlckljZVNlcnZlcnMoY29uZmlnLmljZVNlcnZlcnMgfHwgW10sIGVkZ2VWZXJzaW9uKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5faWNlR2F0aGVyZXJzID0gW107CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5pY2VDYW5kaWRhdGVQb29sU2l6ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gY29uZmlnLmljZUNhbmRpZGF0ZVBvb2xTaXplOyBpID4gMDsgaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pY2VHYXRoZXJlcnMucHVzaChuZXcgd2luZG93LlJUQ0ljZUdhdGhlcmVyKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY2VTZXJ2ZXJzOiBjb25maWcuaWNlU2VydmVycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXRoZXJQb2xpY3k6IGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5pY2VDYW5kaWRhdGVQb29sU2l6ZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7CgogICAgICAgICAgICAgICAgICAgIC8vIHBlci10cmFjayBpY2VHYXRoZXJzLCBpY2VUcmFuc3BvcnRzLCBkdGxzVHJhbnNwb3J0cywgcnRwU2VuZGVycywgLi4uCiAgICAgICAgICAgICAgICAgICAgLy8gZXZlcnl0aGluZyB0aGF0IGlzIG5lZWRlZCB0byBkZXNjcmliZSBhIFNEUCBtLWxpbmUuCiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2NlaXZlcnMgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2RwU2Vzc2lvbklkID0gU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZHBTZXNzaW9uVmVyc2lvbiA9IDA7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX2R0bHNSb2xlID0gdW5kZWZpbmVkOyAvLyByb2xlIGZvciBhPXNldHVwIHRvIHVzZSBpbiBhbnN3ZXJzLgoKICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc0Nsb3NlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgb24gcHJvdG90eXBlCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25pY2VjYW5kaWRhdGUgPSBudWxsOwogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9uYWRkc3RyZWFtID0gbnVsbDsKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbnRyYWNrID0gbnVsbDsKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbnJlbW92ZXN0cmVhbSA9IG51bGw7CiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25zaWduYWxpbmdzdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsOwogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbm5lZ290aWF0aW9ubmVlZGVkID0gbnVsbDsKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmRhdGFjaGFubmVsID0gbnVsbDsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2Rpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiAobmFtZSwgZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNDbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1snb24nICsgbmFtZV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1snb24nICsgbmFtZV0oZXZlbnQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoJ2ljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJywgZXZlbnQpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RyZWFtczsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlU3RyZWFtczsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gaW50ZXJuYWwgaGVscGVyIHRvIGNyZWF0ZSBhIHRyYW5zY2VpdmVyIG9iamVjdC4KICAgICAgICAgICAgICAgIC8vICh3aGljaCBpcyBub3QgeWV0IHRoZSBzYW1lIGFzIHRoZSBXZWJSVEMgMS4wIHRyYW5zY2VpdmVyKQogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9jcmVhdGVUcmFuc2NlaXZlciA9IGZ1bmN0aW9uIChraW5kLCBkb05vdEFkZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBoYXNCdW5kbGVUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGggPiAwOwogICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2s6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHJ0cFNlbmRlcjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgcnRwUmVjZWl2ZXI6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IGtpbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIG1pZDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVyczogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgd2FudFJlY2VpdmU6IHRydWUKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzaW5nQnVuZGxlICYmIGhhc0J1bmRsZVRyYW5zcG9ydCkgewogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc3BvcnRzID0gdGhpcy5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ID0gdHJhbnNwb3J0cy5pY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQgPSB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghZG9Ob3RBZGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2NlaXZlcnMucHVzaCh0cmFuc2NlaXZlcik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2NlaXZlcjsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID0gZnVuY3Rpb24gKHRyYWNrLCBzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNDbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsICdBdHRlbXB0ZWQgdG8gY2FsbCBhZGRUcmFjayBvbiBhIGNsb3NlZCBwZWVyY29ubmVjdGlvbi4nKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBhbHJlYWR5RXhpc3RzID0gdGhpcy50cmFuc2NlaXZlcnMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy50cmFjayA9PT0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG1ha2VFcnJvcignSW52YWxpZEFjY2Vzc0Vycm9yJywgJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zY2VpdmVyOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRyYW5zY2VpdmVyc1tpXS50cmFjayAmJiB0aGlzLnRyYW5zY2VpdmVyc1tpXS5raW5kID09PSB0cmFjay5raW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlciA9IHRoaXMudHJhbnNjZWl2ZXJzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIgPSB0aGlzLl9jcmVhdGVUcmFuc2NlaXZlcih0cmFjay5raW5kKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnRyYWNrID0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuc3RyZWFtID0gc3RyZWFtOwogICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlciA9IG5ldyB3aW5kb3cuUlRDUnRwU2VuZGVyKHRyYWNrLCB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwU2VuZGVyOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VWZXJzaW9uID49IDE1MDI1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuYWRkVHJhY2sodHJhY2ssIHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHkKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gdHdvIGRpZmZlcmVudCBzZW5kZXJzIGRvZXMgbm90IHdvcmsgKGJ1aWxkIDEwNTQ3KS4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRml4ZWQgaW4gMTUwMjUgKG9yIGVhcmxpZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZWRTdHJlYW0gPSBzdHJlYW0uY2xvbmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrLCBpZHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZWRUcmFjayA9IGNsb25lZFN0cmVhbS5nZXRUcmFja3MoKVtpZHhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5hYmxlZCcsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lZFRyYWNrLmVuYWJsZWQgPSBldmVudC5lbmFibGVkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBjbG9uZWRTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLmFkZFRyYWNrKHRyYWNrLCBjbG9uZWRTdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjayA9IGZ1bmN0aW9uIChzZW5kZXIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNDbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsICdBdHRlbXB0ZWQgdG8gY2FsbCByZW1vdmVUcmFjayBvbiBhIGNsb3NlZCBwZWVyY29ubmVjdGlvbi4nKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghKHNlbmRlciBpbnN0YW5jZW9mIHdpbmRvdy5SVENSdHBTZW5kZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IDEgb2YgUlRDUGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sgJyArICdkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci4nKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHRoaXMudHJhbnNjZWl2ZXJzLmZpbmQoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQucnRwU2VuZGVyID09PSBzZW5kZXI7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbWFrZUVycm9yKCdJbnZhbGlkQWNjZXNzRXJyb3InLCAnU2VuZGVyIHdhcyBub3QgY3JlYXRlZCBieSB0aGlzIGNvbm5lY3Rpb24uJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBzdHJlYW0gPSB0cmFuc2NlaXZlci5zdHJlYW07CgogICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci50cmFjayA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuc3RyZWFtID0gbnVsbDsKCiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBzdHJlYW0gZnJvbSB0aGUgc2V0IG9mIGxvY2FsIHN0cmVhbXMKICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxTdHJlYW1zID0gdGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnN0cmVhbTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEgJiYgdGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXMuc3BsaWNlKHRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSwgMSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZW5kZXIgPSBwYy5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMudHJhY2sgPT09IHRyYWNrOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMucmVtb3ZlVHJhY2soc2VuZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0cmFuc2NlaXZlci5ydHBTZW5kZXI7CiAgICAgICAgICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwU2VuZGVyOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24gKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgIH0pLm1hcChmdW5jdGlvbiAodHJhbnNjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUdhdGhlcmVyID0gZnVuY3Rpb24gKHNkcE1MaW5lSW5kZXgsIHVzaW5nQnVuZGxlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICBpZiAodXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5faWNlR2F0aGVyZXJzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faWNlR2F0aGVyZXJzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBpY2VHYXRoZXJlciA9IG5ldyB3aW5kb3cuUlRDSWNlR2F0aGVyZXIoewogICAgICAgICAgICAgICAgICAgICAgICBpY2VTZXJ2ZXJzOiB0aGlzLl9jb25maWcuaWNlU2VydmVycywKICAgICAgICAgICAgICAgICAgICAgICAgZ2F0aGVyUG9saWN5OiB0aGlzLl9jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGljZUdhdGhlcmVyLCAnc3RhdGUnLCB7IHZhbHVlOiAnbmV3Jywgd3JpdGFibGU6IHRydWUgfSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzID0gW107CiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyQ2FuZGlkYXRlcyA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gIWV2ZW50LmNhbmRpZGF0ZSB8fCBPYmplY3Qua2V5cyhldmVudC5jYW5kaWRhdGUpLmxlbmd0aCA9PT0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9seWZpbGwgc2luY2UgUlRDSWNlR2F0aGVyZXIuc3RhdGUgaXMgbm90IGltcGxlbWVudGVkIGluCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVkZ2UgMTA1NDcgeWV0LgogICAgICAgICAgICAgICAgICAgICAgICBpY2VHYXRoZXJlci5zdGF0ZSA9IGVuZCA/ICdjb21wbGV0ZWQnIDogJ2dhdGhlcmluZyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cy5wdXNoKGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWNlR2F0aGVyZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9jYWxjYW5kaWRhdGUnLCB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJDYW5kaWRhdGVzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWNlR2F0aGVyZXI7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGdhdGhlcmluZyBmcm9tIGFuIFJUQ0ljZUdhdGhlcmVyLgogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9nYXRoZXIgPSBmdW5jdGlvbiAobWlkLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICB2YXIgaWNlR2F0aGVyZXIgPSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VHYXRoZXJlcjsKICAgICAgICAgICAgICAgICAgICBpZiAoaWNlR2F0aGVyZXIub25sb2NhbGNhbmRpZGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXJlZENhbmRpZGF0ZUV2ZW50cyA9IHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzOwogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBpY2VHYXRoZXJlci5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2NhbGNhbmRpZGF0ZScsIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlckNhbmRpZGF0ZXMpOwogICAgICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGUgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYy51c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2Uga25vdyB0aGF0IHdlIHVzZSBidW5kbGUgd2UgY2FuIGRyb3AgY2FuZGlkYXRlcyB3aXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDRlWRwTUxpbmVJbmRleCA+IDAuIElmIHdlIGRvbid0IGRvIHRoaXMgdGhlbiBvdXIgc3RhdGUgZ2V0cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uZnVzZWQgc2luY2Ugd2UgZGlzcG9zZSB0aGUgZXh0cmEgaWNlIGdhdGhlcmVyLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmRpZGF0ZSA9IHsgc2RwTWlkOiBtaWQsIHNkcE1MaW5lSW5kZXg6IHNkcE1MaW5lSW5kZXggfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5kID0gZXZ0LmNhbmRpZGF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWRnZSBlbWl0cyBhbiBlbXB0eSBvYmplY3QgZm9yIFJUQ0ljZUNhbmRpZGF0ZUNvbXBsZXRl4oClCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSAhY2FuZCB8fCBPYmplY3Qua2V5cyhjYW5kKS5sZW5ndGggPT09IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbHlmaWxsIHNpbmNlIFJUQ0ljZUdhdGhlcmVyLnN0YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBpbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWRnZSAxMDU0NyB5ZXQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWNlR2F0aGVyZXIuc3RhdGUgPT09ICduZXcnIHx8IGljZUdhdGhlcmVyLnN0YXRlID09PSAnZ2F0aGVyaW5nJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyLnN0YXRlID0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWNlR2F0aGVyZXIuc3RhdGUgPT09ICduZXcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNlR2F0aGVyZXIuc3RhdGUgPSAnZ2F0aGVyaW5nJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJUQ0ljZUNhbmRpZGF0ZSBkb2Vzbid0IGhhdmUgYSBjb21wb25lbnQsIG5lZWRzIHRvIGJlIGFkZGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kLmNvbXBvbmVudCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRoZSB1c2VybmFtZUZyYWdtZW50LiBUT0RPOiB1cGRhdGUgU0RQIHRvIHRha2UgYm90aCB2YXJpYW50cy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmQudWZyYWcgPSBpY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKS51c2VybmFtZUZyYWdtZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXJpYWxpemVkQ2FuZGlkYXRlID0gU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5kaWRhdGUgPSBPYmplY3QuYXNzaWduKGV2ZW50LmNhbmRpZGF0ZSwgU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoc2VyaWFsaXplZENhbmRpZGF0ZSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgPSBzZXJpYWxpemVkQ2FuZGlkYXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY2FuZGlkYXRlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGU6IGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkcE1pZDogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2RwTUxpbmVJbmRleDogZXZlbnQuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGV2ZW50LmNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBsb2NhbCBkZXNjcmlwdGlvbi4KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyhwYy5sb2NhbERlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleF0gKz0gJ2E9JyArIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgKyAnXHJcbic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleF0gKz0gJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBwYy5sb2NhbERlc2NyaXB0aW9uLnNkcCA9IFNEUFV0aWxzLmdldERlc2NyaXB0aW9uKHBjLmxvY2FsRGVzY3JpcHRpb24uc2RwKSArIHNlY3Rpb25zLmpvaW4oJycpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcGxldGUgPSBwYy50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24gKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIgJiYgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuc3RhdGUgPT09ICdjb21wbGV0ZWQnOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYy5pY2VHYXRoZXJpbmdTdGF0ZSAhPT0gJ2dhdGhlcmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLmljZUdhdGhlcmluZ1N0YXRlID0gJ2dhdGhlcmluZyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVtaXQgY2FuZGlkYXRlLiBBbHNvIGVtaXQgbnVsbCBjYW5kaWRhdGUgd2hlbiBhbGwgZ2F0aGVyZXJzIGFyZQogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21wbGV0ZS4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9kaXNwYXRjaEV2ZW50KCdpY2VjYW5kaWRhdGUnLCBldmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBsZXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fZGlzcGF0Y2hFdmVudCgnaWNlY2FuZGlkYXRlJywgbmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5pY2VHYXRoZXJpbmdTdGF0ZSA9ICdjb21wbGV0ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBlbWl0IGFscmVhZHkgZ2F0aGVyZWQgY2FuZGlkYXRlcy4KICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGUoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgSUNFIHRyYW5zcG9ydCBhbmQgRFRMUyB0cmFuc3BvcnQuCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgdmFyIGljZVRyYW5zcG9ydCA9IG5ldyB3aW5kb3cuUlRDSWNlVHJhbnNwb3J0KG51bGwpOwogICAgICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydC5vbmljZXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBwYy5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgZHRsc1RyYW5zcG9ydCA9IG5ldyB3aW5kb3cuUlRDRHRsc1RyYW5zcG9ydChpY2VUcmFuc3BvcnQpOwogICAgICAgICAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQub25kdGxzc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25lcnJvciBkb2VzIG5vdCBzZXQgc3RhdGUgdG8gZmFpbGVkIGJ5IGl0c2VsZi4KICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGR0bHNUcmFuc3BvcnQsICdzdGF0ZScsIHsgdmFsdWU6ICdmYWlsZWQnLCB3cml0YWJsZTogdHJ1ZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydDogaWNlVHJhbnNwb3J0LAogICAgICAgICAgICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0OiBkdGxzVHJhbnNwb3J0CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gRGVzdHJveSBJQ0UgZ2F0aGVyZXIsIElDRSB0cmFuc3BvcnQgYW5kIERUTFMgdHJhbnNwb3J0LgogICAgICAgICAgICAgICAgLy8gV2l0aG91dCB0cmlnZ2VyaW5nIHRoZSBjYWxsYmFja3MuCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2Rpc3Bvc2VJY2VBbmREdGxzVHJhbnNwb3J0cyA9IGZ1bmN0aW9uIChzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGljZUdhdGhlcmVyID0gdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlR2F0aGVyZXI7CiAgICAgICAgICAgICAgICAgICAgaWYgKGljZUdhdGhlcmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlOwogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlR2F0aGVyZXI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBpY2VUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKGljZVRyYW5zcG9ydCkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uZHRsc1RyYW5zcG9ydDsKICAgICAgICAgICAgICAgICAgICBpZiAoZHRsc1RyYW5zcG9ydCkgewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZHRsc1RyYW5zcG9ydC5vbmR0bHNzdGF0ZWNoYW5nZTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGR0bHNUcmFuc3BvcnQub25lcnJvcjsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmR0bHNUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyBTdGFydCB0aGUgUlRQIFNlbmRlciBhbmQgUmVjZWl2ZXIgZm9yIGEgdHJhbnNjZWl2ZXIuCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3RyYW5zY2VpdmUgPSBmdW5jdGlvbiAodHJhbnNjZWl2ZXIsIHNlbmQsIHJlY3YpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLCB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMpOwogICAgICAgICAgICAgICAgICAgIGlmIChzZW5kICYmIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnJ0Y3AgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbmFtZTogU0RQVXRpbHMubG9jYWxDTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kOiB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycy5jb21wb3VuZAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5ydGNwLnNzcmMgPSB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnNlbmQocGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3YgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgJiYgcGFyYW1zLmNvZGVjcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBSVFggZmllbGQgaW4gRWRnZSAxNDk0MgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ3ZpZGVvJyAmJiB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzICYmIGVkZ2VWZXJzaW9uIDwgMTUwMTkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwLnJ0eDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gW3t9XTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMucnRjcCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kOiB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycy5jb21wb3VuZAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMuY25hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5ydGNwLmNuYW1lID0gdHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMuY25hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnJlY2VpdmUocGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uID0gZnVuY3Rpb24gKGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKCiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogcHJhbnN3ZXIgaXMgbm90IHN1cHBvcnRlZC4KICAgICAgICAgICAgICAgICAgICBpZiAoWydvZmZlcicsICdhbnN3ZXInXS5pbmRleE9mKGRlc2NyaXB0aW9uLnR5cGUpID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdUeXBlRXJyb3InLCAnVW5zdXBwb3J0ZWQgdHlwZSAiJyArIGRlc2NyaXB0aW9uLnR5cGUgKyAnIicpKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghaXNBY3Rpb25BbGxvd2VkSW5TaWduYWxpbmdTdGF0ZSgnc2V0TG9jYWxEZXNjcmlwdGlvbicsIGRlc2NyaXB0aW9uLnR5cGUsIHBjLnNpZ25hbGluZ1N0YXRlKSB8fCBwYy5faXNDbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLCAnQ2FuIG5vdCBzZXQgbG9jYWwgJyArIGRlc2NyaXB0aW9uLnR5cGUgKyAnIGluIHN0YXRlICcgKyBwYy5zaWduYWxpbmdTdGF0ZSkpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlY3Rpb25zOwogICAgICAgICAgICAgICAgICAgIHZhciBzZXNzaW9ucGFydDsKICAgICAgICAgICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJZIGxpbWl0ZWQgc3VwcG9ydCBmb3IgU0RQIG11bmdpbmcuIExpbWl0ZWQgdG86CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICogY2hhbmdpbmcgdGhlIG9yZGVyIG9mIGNvZGVjcwogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXBzID0gU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ubG9jYWxDYXBhYmlsaXRpZXMgPSBjYXBzOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFuc2NlaXZlciwgc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuX2dhdGhlcih0cmFuc2NlaXZlci5taWQsIHNkcE1MaW5lSW5kZXgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhwYy5yZW1vdGVEZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9ucGFydCA9IHNlY3Rpb25zLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCwgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwOwogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW90ZUNhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllczsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmVhdCBidW5kbGUtb25seSBhcyBub3QtcmVqZWN0ZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVqZWN0ZWQgPSBTRFBVdGlscy5pc1JlamVjdGVkKG1lZGlhU2VjdGlvbikgJiYgU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1idW5kbGUtb25seScpLmxlbmd0aCA9PT0gMDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlamVjdGVkICYmICF0cmFuc2NlaXZlci5yZWplY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVJY2VQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNJY2VMaXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzLnJvbGUgPSAnc2VydmVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGMudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fZ2F0aGVyKHRyYW5zY2VpdmVyLm1pZCwgc2RwTUxpbmVJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpY2VUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsIGlzSWNlTGl0ZSA/ICdjb250cm9sbGluZycgOiAnY29udHJvbGxlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkdGxzVHJhbnNwb3J0LnN0YXRlID09PSAnbmV3JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gb2YgY2FwYWJpbGl0aWVzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBnZXRDb21tb25DYXBhYmlsaXRpZXMobG9jYWxDYXBhYmlsaXRpZXMsIHJlbW90ZUNhcGFiaWxpdGllcyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBTZW5kZXIuIFRoZSBSVENSdHBSZWNlaXZlciBmb3IgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zY2VpdmVyIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBpbiBzZXRSZW1vdGVEZXNjcmlwdGlvbi4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fdHJhbnNjZWl2ZSh0cmFuc2NlaXZlciwgcGFyYW1zLmNvZGVjcy5sZW5ndGggPiAwLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcGMubG9jYWxEZXNjcmlwdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2RwOiBkZXNjcmlwdGlvbi5zZHAKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1sb2NhbC1vZmZlcicpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnc3RhYmxlJyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uIChkZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CgogICAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IHByYW5zd2VyIGlzIG5vdCBzdXBwb3J0ZWQuCiAgICAgICAgICAgICAgICAgICAgaWYgKFsnb2ZmZXInLCAnYW5zd2VyJ10uaW5kZXhPZihkZXNjcmlwdGlvbi50eXBlKSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignVHlwZUVycm9yJywgJ1Vuc3VwcG9ydGVkIHR5cGUgIicgKyBkZXNjcmlwdGlvbi50eXBlICsgJyInKSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQWN0aW9uQWxsb3dlZEluU2lnbmFsaW5nU3RhdGUoJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgZGVzY3JpcHRpb24udHlwZSwgcGMuc2lnbmFsaW5nU3RhdGUpIHx8IHBjLl9pc0Nsb3NlZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsICdDYW4gbm90IHNldCByZW1vdGUgJyArIGRlc2NyaXB0aW9uLnR5cGUgKyAnIGluIHN0YXRlICcgKyBwYy5zaWduYWxpbmdTdGF0ZSkpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbXMgPSB7fTsKICAgICAgICAgICAgICAgICAgICBwYy5yZW1vdGVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1zW3N0cmVhbS5pZF0gPSBzdHJlYW07CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlY2VpdmVyTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTsKICAgICAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCwgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwOwogICAgICAgICAgICAgICAgICAgIHZhciB1c2luZ0J1bmRsZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LCAnYT1ncm91cDpCVU5ETEUgJykubGVuZ3RoID4gMDsKICAgICAgICAgICAgICAgICAgICBwYy51c2luZ0J1bmRsZSA9IHVzaW5nQnVuZGxlOwogICAgICAgICAgICAgICAgICAgIHZhciBpY2VPcHRpb25zID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoc2Vzc2lvbnBhcnQsICdhPWljZS1vcHRpb25zOicpWzBdOwogICAgICAgICAgICAgICAgICAgIGlmIChpY2VPcHRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzID0gaWNlT3B0aW9ucy5zdWJzdHIoMTQpLnNwbGl0KCcgJykuaW5kZXhPZigndHJpY2tsZScpID49IDA7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBraW5kID0gU0RQVXRpbHMuZ2V0S2luZChtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmVhdCBidW5kbGUtb25seSBhcyBub3QtcmVqZWN0ZWQuCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWplY3RlZCA9IFNEUFV0aWxzLmlzUmVqZWN0ZWQobWVkaWFTZWN0aW9uKSAmJiBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWJ1bmRsZS1vbmx5JykubGVuZ3RoID09PSAwOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvdG9jb2wgPSBsaW5lc1swXS5zdWJzdHIoMikuc3BsaXQoJyAnKVsyXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBTRFBVdGlscy5nZXREaXJlY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVNc2lkID0gU0RQVXRpbHMucGFyc2VNc2lkKG1lZGlhU2VjdGlvbik7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWlkID0gU0RQVXRpbHMuZ2V0TWlkKG1lZGlhU2VjdGlvbikgfHwgU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWplY3QgZGF0YWNoYW5uZWxzIHdoaWNoIGFyZSBub3QgaW1wbGVtZW50ZWQgeWV0LgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2luZCA9PT0gJ2FwcGxpY2F0aW9uJyAmJiBwcm90b2NvbCA9PT0gJ0RUTFMvU0NUUCcgfHwgcmVqZWN0ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHRoaXMgaXMgZGFuZ2Vyb3VzIGluIHRoZSBjYXNlIHdoZXJlIGEgbm9uLXJlamVjdGVkIG0tbGluZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGJlY29tZXMgcmVqZWN0ZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkOiBtaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDoga2luZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3RlZDogdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWplY3RlZCAmJiBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gJiYgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJlamVjdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWN5Y2xlIGEgcmVqZWN0ZWQgdHJhbnNjZWl2ZXIuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSBwYy5fY3JlYXRlVHJhbnNjZWl2ZXIoa2luZCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2NlaXZlcjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGljZUdhdGhlcmVyOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWNlVHJhbnNwb3J0OwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHRsc1RyYW5zcG9ydDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ0cFJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VuZEVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbENhcGFiaWxpdGllczsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFjazsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUU6IGVuc3VyZSB0aGUgbWVkaWFTZWN0aW9uIGhhcyBydGNwLW11eCBzZXQuCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVDYXBhYmlsaXRpZXMgPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnM7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVEdGxzUGFyYW1ldGVyczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWplY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlSWNlUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMobWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMucm9sZSA9ICdjbGllbnQnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMgPSBTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ0Y3BQYXJhbWV0ZXJzID0gU0RQVXRpbHMucGFyc2VSdGNwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzQ29tcGxldGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWVuZC1vZi1jYW5kaWRhdGVzJywgc2Vzc2lvbnBhcnQpLmxlbmd0aCA+IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5kcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9Y2FuZGlkYXRlOicpLm1hcChmdW5jdGlvbiAoY2FuZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmQpOwogICAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGNhbmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5kLmNvbXBvbmVudCA9PT0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBjYW4gdXNlIEJVTkRMRSBhbmQgZGlzcG9zZSB0cmFuc3BvcnRzLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicgfHwgZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicpICYmICFyZWplY3RlZCAmJiB1c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCAmJiBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMoc2RwTUxpbmVJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlR2F0aGVyZXIgPSBwYy50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlVHJhbnNwb3J0ID0gcGMudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5kdGxzVHJhbnNwb3J0ID0gcGMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJ0cFNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5ydHBTZW5kZXIuc2V0VHJhbnNwb3J0KHBjLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRwUmVjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRwUmVjZWl2ZXIuc2V0VHJhbnNwb3J0KHBjLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyAmJiAhcmVqZWN0ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyID0gcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdIHx8IHBjLl9jcmVhdGVUcmFuc2NlaXZlcihraW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLm1pZCA9IG1pZDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRyYW5zY2VpdmVyLmljZUdhdGhlcmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIgPSBwYy5fY3JlYXRlSWNlR2F0aGVyZXIoc2RwTUxpbmVJbmRleCwgdXNpbmdCdW5kbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5kcy5sZW5ndGggJiYgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0YXRlID09PSAnbmV3JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NvbXBsZXRlICYmICghdXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnNldFJlbW90ZUNhbmRpZGF0ZXMoY2FuZHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRzLmZvckVhY2goZnVuY3Rpb24gKGNhbmRpZGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVBZGRDYW5kaWRhdGUodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LCBjYW5kaWRhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMgPSB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzKGtpbmQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gYWRhcHRlci5qcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VWZXJzaW9uIDwgMTUwMTkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MgPSBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uIChjb2RlYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZSAhPT0gJ3J0eCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgfHwgW3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzc3JjOiAoMiAqIHNkcE1MaW5lSW5kZXggKyAyKSAqIDEwMDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHJld3JpdGUgdG8gdXNlIGh0dHA6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1wYy8jc2V0LWFzc29jaWF0ZWQtcmVtb3RlLXN0cmVhbXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc05ld1RyYWNrID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3VHJhY2sgPSAhdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnRwUmVjZWl2ZXIgPSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlciB8fCBuZXcgd2luZG93LlJUQ1J0cFJlY2VpdmVyKHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQsIGtpbmQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOZXdUcmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjayA9IHJ0cFJlY2VpdmVyLnRyYWNrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRTogZG9lcyBub3Qgd29yayB3aXRoIFBsYW4gQi4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW90ZU1zaWQgJiYgcmVtb3RlTXNpZC5zdHJlYW0gPT09ICctJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8tb3AuIGEgc3RyZWFtIGlkIG9mICctJyBtZWFuczogbm8gYXNzb2NpYXRlZCBzdHJlYW0uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVtb3RlTXNpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSwgJ2lkJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdGVNc2lkLnN0cmVhbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRyYWNrLCAnaWQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdGVNc2lkLnRyYWNrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0cmVhbXMuZGVmYXVsdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbXMuZGVmYXVsdCA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IHN0cmVhbXMuZGVmYXVsdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRUcmFja1RvU3RyZWFtQW5kRmlyZUV2ZW50KHRyYWNrLCBzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcy5wdXNoKHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlciwgc3RyZWFtXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci50cmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmF0aXZlVHJhY2sgPSBzLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmlkID09PSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci50cmFjay5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXRpdmVUcmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVHJhY2tGcm9tU3RyZWFtQW5kRmlyZUV2ZW50KG5hdGl2ZVRyYWNrLCBzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcyA9IGxvY2FsQ2FwYWJpbGl0aWVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzID0gcmVtb3RlQ2FwYWJpbGl0aWVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgPSBydHBSZWNlaXZlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzID0gcnRjcFBhcmFtZXRlcnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gc2VuZEVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMgPSByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBSZWNlaXZlciBub3cuIFRoZSBSVFBTZW5kZXIgaXMgc3RhcnRlZCBpbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0TG9jYWxEZXNjcmlwdGlvbi4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLl90cmFuc2NlaXZlKHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSwgZmFsc2UsIGlzTmV3VHJhY2spOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInICYmICFyZWplY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIgPSBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydHBSZWNlaXZlciA9IHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID0gcmVjdkVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZW1vdGVDYXBhYmlsaXRpZXMgPSByZW1vdGVDYXBhYmlsaXRpZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRjcFBhcmFtZXRlcnMgPSBydGNwUGFyYW1ldGVyczsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZHMubGVuZ3RoICYmIGljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGlzSWNlTGl0ZSB8fCBpc0NvbXBsZXRlKSAmJiAoIXVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zZXRSZW1vdGVDYW5kaWRhdGVzKGNhbmRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kcy5mb3JFYWNoKGZ1bmN0aW9uIChjYW5kaWRhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlQWRkQ2FuZGlkYXRlKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCwgY2FuZGlkYXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpY2VUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zdGFydChpY2VHYXRoZXJlciwgcmVtb3RlSWNlUGFyYW1ldGVycywgJ2NvbnRyb2xsaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkdGxzVHJhbnNwb3J0LnN0YXRlID09PSAnbmV3JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdyZWN2b25seScsIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHJld3JpdGUgdG8gdXNlIGh0dHA6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1wYy8jc2V0LWFzc29jaWF0ZWQtcmVtb3RlLXN0cmVhbXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydHBSZWNlaXZlciAmJiAoZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjayA9IHJ0cFJlY2VpdmVyLnRyYWNrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdGVNc2lkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRyYWNrVG9TdHJlYW1BbmRGaXJlRXZlbnQodHJhY2ssIHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlciwgc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0cmVhbXMuZGVmYXVsdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtcy5kZWZhdWx0ID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRyYWNrVG9TdHJlYW1BbmRGaXJlRXZlbnQodHJhY2ssIHN0cmVhbXMuZGVmYXVsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXIsIHN0cmVhbXMuZGVmYXVsdF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUU6IGFjdHVhbGx5IHRoZSByZWNlaXZlciBzaG91bGQgYmUgY3JlYXRlZCBsYXRlci4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHBjLl9kdGxzUm9sZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9kdGxzUm9sZSA9IGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicgPyAnYWN0aXZlJyA6ICdwYXNzaXZlJzsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHBjLnJlbW90ZURlc2NyaXB0aW9uID0gewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICBzZHA6IGRlc2NyaXB0aW9uLnNkcAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdoYXZlLXJlbW90ZS1vZmZlcicpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnc3RhYmxlJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24gKHNpZCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gc3RyZWFtc1tzaWRdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLmdldFRyYWNrcygpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBjLnJlbW90ZVN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLnJlbW90ZVN0cmVhbXMucHVzaChzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtID0gc3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuX2Rpc3BhdGNoRXZlbnQoJ2FkZHN0cmVhbScsIGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFjayA9IGl0ZW1bMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY2VpdmVyID0gaXRlbVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLmlkICE9PSBpdGVtWzJdLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZUFkZFRyYWNrKHBjLCB0cmFjaywgcmVjZWl2ZXIsIFtzdHJlYW1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmaXJlQWRkVHJhY2socGMsIGl0ZW1bMF0sIGl0ZW1bMV0sIFtdKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciBhZGRJY2VDYW5kaWRhdGUoe30pIHdhcyBjYWxsZWQgd2l0aGluIGZvdXIgc2Vjb25kcyBhZnRlcgogICAgICAgICAgICAgICAgICAgIC8vIHNldFJlbW90ZURlc2NyaXB0aW9uLgogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGMgJiYgcGMudHJhbnNjZWl2ZXJzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCAmJiB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnICYmIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5nZXRSZW1vdGVDYW5kaWRhdGVzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGltZW91dCBmb3IgYWRkUmVtb3RlQ2FuZGlkYXRlLiBDb25zaWRlciBzZW5kaW5nICcgKyAnYW4gZW5kLW9mLWNhbmRpZGF0ZXMgbm90aWZpY2F0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIDQwMDApOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAvKiBub3QgeWV0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VHYXRoZXJlcikgewogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRTogY2xlYW4gdXAgdHJhY2tzLCBsb2NhbCBzdHJlYW1zLCByZW1vdGUgc3RyZWFtcywgZXRjCiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNDbG9zZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdjbG9zZWQnKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBzaWduYWxpbmcgc3RhdGUuCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9IG5ld1N0YXRlOwogICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnc2lnbmFsaW5nc3RhdGVjaGFuZ2UnKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdzaWduYWxpbmdzdGF0ZWNoYW5nZScsIGV2ZW50KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gZmlyZSB0aGUgbmVnb3RpYXRpb25uZWVkZWQgZXZlbnQuCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2lnbmFsaW5nU3RhdGUgIT09ICdzdGFibGUnIHx8IHRoaXMubmVlZE5lZ290aWF0aW9uID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZWVkTmVnb3RpYXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBjLm5lZWROZWdvdGlhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMubmVlZE5lZ290aWF0aW9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fZGlzcGF0Y2hFdmVudCgnbmVnb3RpYXRpb25uZWVkZWQnLCBldmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBpY2UgY29ubmVjdGlvbiBzdGF0ZS4KICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuZXdTdGF0ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGVzID0gewogICAgICAgICAgICAgICAgICAgICAgICAnbmV3JzogMCwKICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VkOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2luZzogMCwKICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RlZDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkOiAwCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0YXRlXSsrOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9ICduZXcnOwogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZXMuZmFpbGVkID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9ICdmYWlsZWQnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNoZWNraW5nID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9ICdjaGVja2luZyc7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuZGlzY29ubmVjdGVkID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9ICdkaXNjb25uZWN0ZWQnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLm5ldyA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUgPSAnbmV3JzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlcy5jb25uZWN0ZWQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RlZCc7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuY29tcGxldGVkID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9ICdjb21wbGV0ZWQnOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9IG5ld1N0YXRlOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBldmVudCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNvbm5lY3Rpb24gc3RhdGUuCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U3RhdGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ25ldyc6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlZDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGluZzogMCwKICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RlZDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkOiAwCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0YXRlXSsrOwogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAvLyBJQ0VUcmFuc3BvcnQuY29tcGxldGVkIGFuZCBjb25uZWN0ZWQgYXJlIHRoZSBzYW1lIGZvciB0aGlzIHB1cnBvc2UuCiAgICAgICAgICAgICAgICAgICAgc3RhdGVzLmNvbm5lY3RlZCArPSBzdGF0ZXMuY29tcGxldGVkOwoKICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9ICduZXcnOwogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZXMuZmFpbGVkID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9ICdmYWlsZWQnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RpbmcgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RpbmcnOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmRpc2Nvbm5lY3RlZCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlcy5uZXcgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlID0gJ25ldyc7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGVkID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9ICdjb25uZWN0ZWQnOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLmNvbm5lY3Rpb25TdGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IG5ld1N0YXRlOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBldmVudCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHBjLl9pc0Nsb3NlZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsICdDYW4gbm90IGNhbGwgY3JlYXRlT2ZmZXIgYWZ0ZXIgY2xvc2UnKSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQXVkaW9UcmFja3MgPSBwYy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmtpbmQgPT09ICdhdWRpbyc7CiAgICAgICAgICAgICAgICAgICAgfSkubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIHZhciBudW1WaWRlb1RyYWNrcyA9IHBjLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQua2luZCA9PT0gJ3ZpZGVvJzsKICAgICAgICAgICAgICAgICAgICB9KS5sZW5ndGg7CgogICAgICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBudW1iZXIgb2YgYXVkaW8gYW5kIHZpZGVvIHRyYWNrcyB3ZSBuZWVkIHRvIHNlbmQvcmVjdi4KICAgICAgICAgICAgICAgICAgICB2YXIgb2ZmZXJPcHRpb25zID0gYXJndW1lbnRzWzBdOwogICAgICAgICAgICAgICAgICAgIGlmIChvZmZlck9wdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVqZWN0IENocm9tZSBsZWdhY3kgY29uc3RyYWludHMuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZlck9wdGlvbnMubWFuZGF0b3J5IHx8IG9mZmVyT3B0aW9ucy5vcHRpb25hbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTGVnYWN5IG1hbmRhdG9yeS9vcHRpb25hbCBjb25zdHJhaW50cyBub3Qgc3VwcG9ydGVkLicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1BdWRpb1RyYWNrcyA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtQXVkaW9UcmFja3MgPSBvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtVmlkZW9UcmFja3MgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbyA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1WaWRlb1RyYWNrcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVZpZGVvVHJhY2tzID0gb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtQXVkaW9UcmFja3MtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1BdWRpb1RyYWNrcyA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci53YW50UmVjZWl2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVZpZGVvVHJhY2tzLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtVmlkZW9UcmFja3MgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIud2FudFJlY2VpdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgTS1saW5lcyBmb3IgcmVjdm9ubHkgc3RyZWFtcy4KICAgICAgICAgICAgICAgICAgICB3aGlsZSAobnVtQXVkaW9UcmFja3MgPiAwIHx8IG51bVZpZGVvVHJhY2tzID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtQXVkaW9UcmFja3MgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fY3JlYXRlVHJhbnNjZWl2ZXIoJ2F1ZGlvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1BdWRpb1RyYWNrcy0tOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1WaWRlb1RyYWNrcyA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9jcmVhdGVUcmFuc2NlaXZlcigndmlkZW8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVZpZGVvVHJhY2tzLS07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZShwYy5fc2RwU2Vzc2lvbklkLCBwYy5fc2RwU2Vzc2lvblZlcnNpb24rKyk7CiAgICAgICAgICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24gKHRyYW5zY2VpdmVyLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBlYWNoIHRyYWNrLCBjcmVhdGUgYW4gaWNlIGdhdGhlcmVyLCBpY2UgdHJhbnNwb3J0LAogICAgICAgICAgICAgICAgICAgICAgICAvLyBkdGxzIHRyYW5zcG9ydCwgcG90ZW50aWFsbHkgcnRwc2VuZGVyIGFuZCBydHByZWNlaXZlci4KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrID0gdHJhbnNjZWl2ZXIudHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBraW5kID0gdHJhbnNjZWl2ZXIua2luZDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1pZCA9IHRyYW5zY2VpdmVyLm1pZCB8fCBTRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIubWlkID0gbWlkOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmFuc2NlaXZlci5pY2VHYXRoZXJlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIgPSBwYy5fY3JlYXRlSWNlR2F0aGVyZXIoc2RwTUxpbmVJbmRleCwgcGMudXNpbmdCdW5kbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSB3aW5kb3cuUlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhraW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlsdGVyIFJUWCB1bnRpbCBhZGRpdGlvbmFsIHN0dWZmIG5lZWRlZCBmb3IgUlRYIGlzIGltcGxlbWVudGVkCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGFkYXB0ZXIuanMKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VWZXJzaW9uIDwgMTUwMTkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcyA9IGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24gKGNvZGVjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvZGVjLm5hbWUgIT09ICdydHgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24gKGNvZGVjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3b3JrIGFyb3VuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9NjU1MgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnkgYWRkaW5nIGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlYy5uYW1lID09PSAnSDI2NCcgJiYgY29kZWMucGFyYW1ldGVyc1snbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQnXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZWMucGFyYW1ldGVyc1snbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQnXSA9ICcxJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3Igc3Vic2VxdWVudCBvZmZlcnMsIHdlIG1pZ2h0IGhhdmUgdG8gcmUtdXNlIHRoZSBwYXlsb2FkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0eXBlIG9mIHRoZSBsYXN0IG9mZmVyLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyAmJiB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uIChyZW1vdGVDb2RlYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZWMubmFtZS50b0xvd2VyQ2FzZSgpID09PSByZW1vdGVDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgJiYgY29kZWMuY2xvY2tSYXRlID09PSByZW1vdGVDb2RlYy5jbG9ja1JhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlID0gcmVtb3RlQ29kZWMucGF5bG9hZFR5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAoaGRyRXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3RlRXh0ZW5zaW9ucyA9IHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyAmJiB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucyB8fCBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZUV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAockhkckV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZHJFeHQudXJpID09PSBySGRyRXh0LnVyaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZHJFeHQuaWQgPSBySGRyRXh0LmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlIGFuIHNzcmMgbm93LCB0byBiZSB1c2VkIGxhdGVyIGluIHJ0cFNlbmRlci5zZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycyB8fCBbewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMSkgKiAxMDAxCiAgICAgICAgICAgICAgICAgICAgICAgIH1dOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBSVFgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGdlVmVyc2lvbiA+PSAxNTAxOSAmJiBraW5kID09PSAndmlkZW8nICYmICFzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzc3JjOiBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLndhbnRSZWNlaXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlciA9IG5ldyB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIodHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCwga2luZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzID0gbG9jYWxDYXBhYmlsaXRpZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLyBhbHdheXMgb2ZmZXIgQlVORExFIGFuZCBkaXNwb3NlIG9uIHJldHVybiBpZiBub3Qgc3VwcG9ydGVkLgogICAgICAgICAgICAgICAgICAgIGlmIChwYy5fY29uZmlnLmJ1bmRsZVBvbGljeSAhPT0gJ21heC1jb21wYXQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT1ncm91cDpCVU5ETEUgJyArIHBjLnRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0Lm1pZDsKICAgICAgICAgICAgICAgICAgICAgICAgfSkuam9pbignICcpICsgJ1xyXG4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9aWNlLW9wdGlvbnM6dHJpY2tsZVxyXG4nOwoKICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbiAodHJhbnNjZWl2ZXIsIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2RwICs9IHdyaXRlTWVkaWFTZWN0aW9uKHRyYW5zY2VpdmVyLCB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcywgJ29mZmVyJywgdHJhbnNjZWl2ZXIuc3RyZWFtLCBwYy5fZHRsc1JvbGUpOwogICAgICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9cnRjcC1yc2l6ZVxyXG4nOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmIHBjLmljZUdhdGhlcmluZ1N0YXRlICE9PSAnbmV3JyAmJiAoc2RwTUxpbmVJbmRleCA9PT0gMCB8fCAhcGMudXNpbmdCdW5kbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5nZXRMb2NhbENhbmRpZGF0ZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChjYW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZC5jb21wb25lbnQgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT0nICsgU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCkgKyAnXHJcbic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuc3RhdGUgPT09ICdjb21wbGV0ZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPWVuZC1vZi1jYW5kaWRhdGVzXHJcbic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2MgPSBuZXcgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdvZmZlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHNkcDogc2RwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwoKICAgICAgICAgICAgICAgICAgICBpZiAocGMuX2lzQ2xvc2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJywgJ0NhbiBub3QgY2FsbCBjcmVhdGVBbnN3ZXIgYWZ0ZXIgY2xvc2UnKSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIShwYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtcmVtb3RlLW9mZmVyJyB8fCBwYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtbG9jYWwtcHJhbnN3ZXInKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsICdDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGluIHNpZ25hbGluZ1N0YXRlICcgKyBwYy5zaWduYWxpbmdTdGF0ZSkpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHBjLl9zZHBTZXNzaW9uSWQsIHBjLl9zZHBTZXNzaW9uVmVyc2lvbisrKTsKICAgICAgICAgICAgICAgICAgICBpZiAocGMudXNpbmdCdW5kbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPWdyb3VwOkJVTkRMRSAnICsgcGMudHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQubWlkOwogICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCcgJykgKyAnXHJcbic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBtZWRpYVNlY3Rpb25zSW5PZmZlciA9IFNEUFV0aWxzLmdldE1lZGlhU2VjdGlvbnMocGMucmVtb3RlRGVzY3JpcHRpb24uc2RwKS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24gKHRyYW5zY2VpdmVyLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZHBNTGluZUluZGV4ICsgMSA+IG1lZGlhU2VjdGlvbnNJbk9mZmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlamVjdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ2FwcGxpY2F0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkcCArPSAnbT1hcHBsaWNhdGlvbiAwIERUTFMvU0NUUCA1MDAwXHJcbic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICdhdWRpbycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ209YXVkaW8gMCBVRFAvVExTL1JUUC9TQVZQRiAwXHJcbicgKyAnYT1ydHBtYXA6MCBQQ01VLzgwMDBcclxuJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ3ZpZGVvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkcCArPSAnbT12aWRlbyAwIFVEUC9UTFMvUlRQL1NBVlBGIDEyMFxyXG4nICsgJ2E9cnRwbWFwOjEyMCBWUDgvOTAwMDBcclxuJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxyXG4nICsgJ2E9aW5hY3RpdmVcclxuJyArICdhPW1pZDonICsgdHJhbnNjZWl2ZXIubWlkICsgJ1xyXG4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRTogbG9vayBhdCBkaXJlY3Rpb24uCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5zdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbFRyYWNrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICdhdWRpbycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFRyYWNrID0gdHJhbnNjZWl2ZXIuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFRyYWNrID0gdHJhbnNjZWl2ZXIuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxUcmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBSVFgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZVZlcnNpb24gPj0gMTUwMTkgJiYgdHJhbnNjZWl2ZXIua2luZCA9PT0gJ3ZpZGVvJyAmJiAhdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHggPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzc3JjOiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIG9mIGNhcGFiaWxpdGllcy4KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IGdldENvbW1vbkNhcGFiaWxpdGllcyh0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcywgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXNSdHggPSBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLmZpbHRlcihmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMubmFtZS50b0xvd2VyQ2FzZSgpID09PSAncnR4JzsKICAgICAgICAgICAgICAgICAgICAgICAgfSkubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1J0eCAmJiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4OwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzZHAgKz0gd3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIGNvbW1vbkNhcGFiaWxpdGllcywgJ2Fuc3dlcicsIHRyYW5zY2VpdmVyLnN0cmVhbSwgcGMuX2R0bHNSb2xlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzICYmIHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9cnRjcC1yc2l6ZVxyXG4nOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBkZXNjID0gbmV3IHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24oewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYW5zd2VyJywKICAgICAgICAgICAgICAgICAgICAgICAgc2RwOiBzZHAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlc2MpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24gKGNhbmRpZGF0ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNlY3Rpb25zOwogICAgICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgJiYgIShjYW5kaWRhdGUuc2RwTUxpbmVJbmRleCAhPT0gdW5kZWZpbmVkIHx8IGNhbmRpZGF0ZS5zZHBNaWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdzZHBNTGluZUluZGV4IG9yIHNkcE1pZCByZXF1aXJlZCcpKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IG5lZWRzIHRvIGdvIGludG8gb3BzIHF1ZXVlLgogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGMucmVtb3RlRGVzY3JpcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsICdDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlIHdpdGhvdXQgYSByZW1vdGUgZGVzY3JpcHRpb24nKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNhbmRpZGF0ZSB8fCBjYW5kaWRhdGUuY2FuZGlkYXRlID09PSAnJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYy50cmFuc2NlaXZlcnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGMudHJhbnNjZWl2ZXJzW2pdLnJlamVjdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbal0uaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbnMgPSBTRFBVdGlscy5nZXRNZWRpYVNlY3Rpb25zKHBjLnJlbW90ZURlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbnNbal0gKz0gJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5yZW1vdGVEZXNjcmlwdGlvbi5zZHAgPSBTRFBVdGlscy5nZXREZXNjcmlwdGlvbihwYy5yZW1vdGVEZXNjcmlwdGlvbi5zZHApICsgc2VjdGlvbnMuam9pbignJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBjLnVzaW5nQnVuZGxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZHBNTGluZUluZGV4ID0gY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlLnNkcE1pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGMudHJhbnNjZWl2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbaV0ubWlkID09PSBjYW5kaWRhdGUuc2RwTWlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZHBNTGluZUluZGV4ID0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zY2VpdmVyID0gcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlamVjdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5kID0gT2JqZWN0LmtleXMoY2FuZGlkYXRlLmNhbmRpZGF0ZSkubGVuZ3RoID4gMCA/IFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmRpZGF0ZS5jYW5kaWRhdGUpIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIENocm9tZSdzIGludmFsaWQgY2FuZGlkYXRlcyBzaW5jZSBFZGdlIGRvZXMgbm90IGxpa2UgdGhlbS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZC5wcm90b2NvbCA9PT0gJ3RjcCcgJiYgKGNhbmQucG9ydCA9PT0gMCB8fCBjYW5kLnBvcnQgPT09IDkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBSVENQIGNhbmRpZGF0ZXMsIHdlIGFzc3VtZSBSVENQLU1VWC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZC5jb21wb25lbnQgJiYgY2FuZC5jb21wb25lbnQgIT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB1c2luZyBidW5kbGUsIGF2b2lkIGFkZGluZyBjYW5kaWRhdGVzIHRvIHRoZSB3cm9uZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGljZSB0cmFuc3BvcnQuIEFuZCBhdm9pZCBhZGRpbmcgY2FuZGlkYXRlcyBhZGRlZCBpbiB0aGUgU0RQLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZHBNTGluZUluZGV4ID09PSAwIHx8IHNkcE1MaW5lSW5kZXggPiAwICYmIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCAhPT0gcGMudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1heWJlQWRkQ2FuZGlkYXRlKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCwgY2FuZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobWFrZUVycm9yKCdPcGVyYXRpb25FcnJvcicsICdDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHJlbW90ZURlc2NyaXB0aW9uLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYW5kaWRhdGVTdHJpbmcgPSBjYW5kaWRhdGUuY2FuZGlkYXRlLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlU3RyaW5nLmluZGV4T2YoJ2E9JykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlU3RyaW5nID0gY2FuZGlkYXRlU3RyaW5nLnN1YnN0cigyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbnMgPSBTRFBVdGlscy5nZXRNZWRpYVNlY3Rpb25zKHBjLnJlbW90ZURlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbnNbc2RwTUxpbmVJbmRleF0gKz0gJ2E9JyArIChjYW5kLnR5cGUgPyBjYW5kaWRhdGVTdHJpbmcgOiAnZW5kLW9mLWNhbmRpZGF0ZXMnKSArICdcclxuJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5yZW1vdGVEZXNjcmlwdGlvbi5zZHAgPSBTRFBVdGlscy5nZXREZXNjcmlwdGlvbihwYy5yZW1vdGVEZXNjcmlwdGlvbi5zZHApICsgc2VjdGlvbnMuam9pbignJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobWFrZUVycm9yKCdPcGVyYXRpb25FcnJvcicsICdDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yICYmIHNlbGVjdG9yIGluc3RhbmNlb2Ygd2luZG93Lk1lZGlhU3RyZWFtVHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmRlck9yUmVjZWl2ZXIgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2sgPT09IHNlbGVjdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyT3JSZWNlaXZlciA9IHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIudHJhY2sgPT09IHNlbGVjdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyT3JSZWNlaXZlciA9IHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZW5kZXJPclJlY2VpdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBtYWtlRXJyb3IoJ0ludmFsaWRBY2Nlc3NFcnJvcicsICdJbnZhbGlkIHNlbGVjdG9yLicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kZXJPclJlY2VpdmVyLmdldFN0YXRzKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICBbJ3J0cFNlbmRlcicsICdydHBSZWNlaXZlcicsICdpY2VHYXRoZXJlcicsICdpY2VUcmFuc3BvcnQnLCAnZHRsc1RyYW5zcG9ydCddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyW21ldGhvZF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRyYW5zY2VpdmVyW21ldGhvZF0uZ2V0U3RhdHMoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiAoYWxsU3RhdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsbFN0YXRzLmZvckVhY2goZnVuY3Rpb24gKHN0YXRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zZXQoc3RhdC5pZCwgc3RhdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyBmaXggbG93LWxldmVsIHN0YXQgbmFtZXMgYW5kIHJldHVybiBNYXAgaW5zdGVhZCBvZiBvYmplY3QuCiAgICAgICAgICAgICAgICB2YXIgb3J0Y09iamVjdHMgPSBbJ1JUQ1J0cFNlbmRlcicsICdSVENSdHBSZWNlaXZlcicsICdSVENJY2VHYXRoZXJlcicsICdSVENJY2VUcmFuc3BvcnQnLCAnUlRDRHRsc1RyYW5zcG9ydCddOwogICAgICAgICAgICAgICAgb3J0Y09iamVjdHMuZm9yRWFjaChmdW5jdGlvbiAob3J0Y09iamVjdE5hbWUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gd2luZG93W29ydGNPYmplY3ROYW1lXTsKICAgICAgICAgICAgICAgICAgICBpZiAob2JqICYmIG9iai5wcm90b3R5cGUgJiYgb2JqLnByb3RvdHlwZS5nZXRTdGF0cykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmF0aXZlR2V0c3RhdHMgPSBvYmoucHJvdG90eXBlLmdldFN0YXRzOwogICAgICAgICAgICAgICAgICAgICAgICBvYmoucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUdldHN0YXRzLmFwcGx5KHRoaXMpLnRoZW4oZnVuY3Rpb24gKG5hdGl2ZVN0YXRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcFN0YXRzID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG5hdGl2ZVN0YXRzKS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVTdGF0c1tpZF0udHlwZSA9IGZpeFN0YXRzVHlwZShuYXRpdmVTdGF0c1tpZF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBTdGF0cy5zZXQoaWQsIG5hdGl2ZVN0YXRzW2lkXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcFN0YXRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8gbGVnYWN5IGNhbGxiYWNrIHNoaW1zLiBTaG91bGQgYmUgbW92ZWQgdG8gYWRhcHRlci5qcyBzb21lIGRheXMuCiAgICAgICAgICAgICAgICB2YXIgbWV0aG9kcyA9IFsnY3JlYXRlT2ZmZXInLCAnY3JlYXRlQW5zd2VyJ107CiAgICAgICAgICAgICAgICBtZXRob2RzLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVnYWN5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIFthcmd1bWVudHNbMl1dKS50aGVuKGZ1bmN0aW9uIChkZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzBdLmFwcGx5KG51bGwsIFtkZXNjcmlwdGlvbl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwsIFtlcnJvcl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgbWV0aG9kcyA9IFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXTsKICAgICAgICAgICAgICAgIG1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBhcmdzWzJdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZWdhY3kKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1sxXS5hcHBseShudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMl0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1syXS5hcHBseShudWxsLCBbZXJyb3JdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vIGdldFN0YXRzIGlzIHNwZWNpYWwuIEl0IGRvZXNuJ3QgaGF2ZSBhIHNwZWMgbGVnYWN5IG1ldGhvZCB5ZXQgd2Ugc3VwcG9ydAogICAgICAgICAgICAgICAgLy8gZ2V0U3RhdHMoc29tZXRoaW5nLCBjYikgd2l0aG91dCBlcnJvciBjYWxsYmFja3MuCiAgICAgICAgICAgICAgICBbJ2dldFN0YXRzJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgICAgICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gUlRDUGVlckNvbm5lY3Rpb247CiAgICAgICAgICAgIH07CiAgICAgICAgfSwgeyAic2RwIjogMiB9XSwgMjogW2Z1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgICAgICAgLyogZXNsaW50LWVudiBub2RlICovCiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgICAgIC8vIFNEUCBoZWxwZXJzLgoKICAgICAgICAgICAgdmFyIFNEUFV0aWxzID0ge307CgogICAgICAgICAgICAvLyBHZW5lcmF0ZSBhbiBhbHBoYW51bWVyaWMgaWRlbnRpZmllciBmb3IgY25hbWUgb3IgbWlkcy4KICAgICAgICAgICAgLy8gVE9ETzogdXNlIFVVSURzIGluc3RlYWQ/IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2plZC85ODI4ODMKICAgICAgICAgICAgU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBUaGUgUlRDUCBDTkFNRSB1c2VkIGJ5IGFsbCBwZWVyY29ubmVjdGlvbnMgZnJvbSB0aGUgc2FtZSBKUy4KICAgICAgICAgICAgU0RQVXRpbHMubG9jYWxDTmFtZSA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwoKICAgICAgICAgICAgLy8gU3BsaXRzIFNEUCBpbnRvIGxpbmVzLCBkZWFsaW5nIHdpdGggYm90aCBDUkxGIGFuZCBMRi4KICAgICAgICAgICAgU0RQVXRpbHMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uIChibG9iKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uIChsaW5lKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmUudHJpbSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIFNwbGl0cyBTRFAgaW50byBzZXNzaW9ucGFydCBhbmQgbWVkaWFzZWN0aW9ucy4gRW5zdXJlcyBDUkxGLgogICAgICAgICAgICBTRFBVdGlscy5zcGxpdFNlY3Rpb25zID0gZnVuY3Rpb24gKGJsb2IpIHsKICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGJsb2Iuc3BsaXQoJ1xubT0nKTsKICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24gKHBhcnQsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpbmRleCA+IDAgPyAnbT0nICsgcGFydCA6IHBhcnQpLnRyaW0oKSArICdcclxuJzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gcmV0dXJucyB0aGUgc2Vzc2lvbiBkZXNjcmlwdGlvbi4KICAgICAgICAgICAgU0RQVXRpbHMuZ2V0RGVzY3JpcHRpb24gPSBmdW5jdGlvbiAoYmxvYikgewogICAgICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhibG9iKTsKICAgICAgICAgICAgICAgIHJldHVybiBzZWN0aW9ucyAmJiBzZWN0aW9uc1swXTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIHJldHVybnMgdGhlIGluZGl2aWR1YWwgbWVkaWEgc2VjdGlvbnMuCiAgICAgICAgICAgIFNEUFV0aWxzLmdldE1lZGlhU2VjdGlvbnMgPSBmdW5jdGlvbiAoYmxvYikgewogICAgICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhibG9iKTsKICAgICAgICAgICAgICAgIHNlY3Rpb25zLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VjdGlvbnM7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LgogICAgICAgICAgICBTRFBVdGlscy5tYXRjaFByZWZpeCA9IGZ1bmN0aW9uIChibG9iLCBwcmVmaXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbiAobGluZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5lLmluZGV4T2YocHJlZml4KSA9PT0gMDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gUGFyc2VzIGFuIElDRSBjYW5kaWRhdGUgbGluZS4gU2FtcGxlIGlucHV0OgogICAgICAgICAgICAvLyBjYW5kaWRhdGU6NzAyNzg2MzUwIDIgdWRwIDQxODE5OTAyIDguOC44LjggNjA3NjkgdHlwIHJlbGF5IHJhZGRyIDguOC44LjgKICAgICAgICAgICAgLy8gcnBvcnQgNTU5OTYiCiAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlID0gZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgICAgICAgICAgIHZhciBwYXJ0czsKICAgICAgICAgICAgICAgIC8vIFBhcnNlIGJvdGggdmFyaWFudHMuCiAgICAgICAgICAgICAgICBpZiAobGluZS5pbmRleE9mKCdhPWNhbmRpZGF0ZTonKSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHsKICAgICAgICAgICAgICAgICAgICBmb3VuZGF0aW9uOiBwYXJ0c1swXSwKICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IHBhcnNlSW50KHBhcnRzWzFdLCAxMCksCiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6IHBhcnRzWzJdLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6IHBhcnNlSW50KHBhcnRzWzNdLCAxMCksCiAgICAgICAgICAgICAgICAgICAgaXA6IHBhcnRzWzRdLAogICAgICAgICAgICAgICAgICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzVdLCAxMCksCiAgICAgICAgICAgICAgICAgICAgLy8gc2tpcCBwYXJ0c1s2XSA9PSAndHlwJwogICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnRzWzddCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSA4OyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBhcnRzW2ldKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JhZGRyJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyA9IHBhcnRzW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdycG9ydCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQgPSBwYXJzZUludChwYXJ0c1tpICsgMV0sIDEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0Y3B0eXBlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS50Y3BUeXBlID0gcGFydHNbaSArIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3VmcmFnJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS51ZnJhZyA9IHBhcnRzW2kgKyAxXTsgLy8gZm9yIGJhY2t3YXJkIGNvbXBhYmlsaXR5LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgPSBwYXJ0c1tpICsgMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4dGVuc2lvbiBoYW5kbGluZywgaW4gcGFydGljdWxhciB1ZnJhZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlW3BhcnRzW2ldXSA9IHBhcnRzW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjYW5kaWRhdGU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBUcmFuc2xhdGVzIGEgY2FuZGlkYXRlIG9iamVjdCBpbnRvIFNEUCBjYW5kaWRhdGUgYXR0cmlidXRlLgogICAgICAgICAgICBTRFBVdGlscy53cml0ZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uIChjYW5kaWRhdGUpIHsKICAgICAgICAgICAgICAgIHZhciBzZHAgPSBbXTsKICAgICAgICAgICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5mb3VuZGF0aW9uKTsKICAgICAgICAgICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5jb21wb25lbnQpOwogICAgICAgICAgICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpOwogICAgICAgICAgICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLnByaW9yaXR5KTsKICAgICAgICAgICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5pcCk7CiAgICAgICAgICAgICAgICBzZHAucHVzaChjYW5kaWRhdGUucG9ydCk7CgogICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBjYW5kaWRhdGUudHlwZTsKICAgICAgICAgICAgICAgIHNkcC5wdXNoKCd0eXAnKTsKICAgICAgICAgICAgICAgIHNkcC5wdXNoKHR5cGUpOwogICAgICAgICAgICAgICAgaWYgKHR5cGUgIT09ICdob3N0JyAmJiBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgJiYgY2FuZGlkYXRlLnJlbGF0ZWRQb3J0KSB7CiAgICAgICAgICAgICAgICAgICAgc2RwLnB1c2goJ3JhZGRyJyk7CiAgICAgICAgICAgICAgICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzKTsKICAgICAgICAgICAgICAgICAgICBzZHAucHVzaCgncnBvcnQnKTsKICAgICAgICAgICAgICAgICAgICBzZHAucHVzaChjYW5kaWRhdGUucmVsYXRlZFBvcnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS50Y3BUeXBlICYmIGNhbmRpZGF0ZS5wcm90b2NvbC50b0xvd2VyQ2FzZSgpID09PSAndGNwJykgewogICAgICAgICAgICAgICAgICAgIHNkcC5wdXNoKCd0Y3B0eXBlJyk7CiAgICAgICAgICAgICAgICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50IHx8IGNhbmRpZGF0ZS51ZnJhZykgewogICAgICAgICAgICAgICAgICAgIHNkcC5wdXNoKCd1ZnJhZycpOwogICAgICAgICAgICAgICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50IHx8IGNhbmRpZGF0ZS51ZnJhZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFBhcnNlcyBhbiBpY2Utb3B0aW9ucyBsaW5lLCByZXR1cm5zIGFuIGFycmF5IG9mIG9wdGlvbiB0YWdzLgogICAgICAgICAgICAvLyBhPWljZS1vcHRpb25zOmZvbyBiYXIKICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VJY2VPcHRpb25zID0gZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsaW5lLnN1YnN0cigxNCkuc3BsaXQoJyAnKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFBhcnNlcyBhbiBydHBtYXAgbGluZSwgcmV0dXJucyBSVENSdHBDb2RkZWNQYXJhbWV0ZXJzLiBTYW1wbGUgaW5wdXQ6CiAgICAgICAgICAgIC8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzIKICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VSdHBNYXAgPSBmdW5jdGlvbiAobGluZSkgewogICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTsKICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSB7CiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZFR5cGU6IHBhcnNlSW50KHBhcnRzLnNoaWZ0KCksIDEwKSAvLyB3YXM6IGlkCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHBhcnRzID0gcGFydHNbMF0uc3BsaXQoJy8nKTsKCiAgICAgICAgICAgICAgICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdOwogICAgICAgICAgICAgICAgcGFyc2VkLmNsb2NrUmF0ZSA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCk7IC8vIHdhczogY2xvY2tyYXRlCiAgICAgICAgICAgICAgICBwYXJzZWQuY2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTsKICAgICAgICAgICAgICAgIC8vIGxlZ2FjeSBhbGlhcywgZ290IHJlbmFtZWQgYmFjayB0byBjaGFubmVscyBpbiBPUlRDLgogICAgICAgICAgICAgICAgcGFyc2VkLm51bUNoYW5uZWxzID0gcGFyc2VkLmNoYW5uZWxzOwogICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGFuIGE9cnRwbWFwIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3IKICAgICAgICAgICAgLy8gUlRDUnRwQ29kZWNQYXJhbWV0ZXJzLgogICAgICAgICAgICBTRFBVdGlscy53cml0ZVJ0cE1hcCA9IGZ1bmN0aW9uIChjb2RlYykgewogICAgICAgICAgICAgICAgdmFyIHB0ID0gY29kZWMucGF5bG9hZFR5cGU7CiAgICAgICAgICAgICAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbHMgPSBjb2RlYy5jaGFubmVscyB8fCBjb2RlYy5udW1DaGFubmVscyB8fCAxOwogICAgICAgICAgICAgICAgcmV0dXJuICdhPXJ0cG1hcDonICsgcHQgKyAnICcgKyBjb2RlYy5uYW1lICsgJy8nICsgY29kZWMuY2xvY2tSYXRlICsgKGNoYW5uZWxzICE9PSAxID8gJy8nICsgY2hhbm5lbHMgOiAnJykgKyAnXHJcbic7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBQYXJzZXMgYW4gYT1leHRtYXAgbGluZSAoaGVhZGVyZXh0ZW5zaW9uIGZyb20gUkZDIDUyODUpLiBTYW1wbGUgaW5wdXQ6CiAgICAgICAgICAgIC8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldAogICAgICAgICAgICAvLyBhPWV4dG1hcDoyL3NlbmRvbmx5IHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnRvZmZzZXQKICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VFeHRtYXAgPSBmdW5jdGlvbiAobGluZSkgewogICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHBhcnRzWzBdLCAxMCksCiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBwYXJ0c1swXS5pbmRleE9mKCcvJykgPiAwID8gcGFydHNbMF0uc3BsaXQoJy8nKVsxXSA6ICdzZW5kcmVjdicsCiAgICAgICAgICAgICAgICAgICAgdXJpOiBwYXJ0c1sxXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIEdlbmVyYXRlcyBhPWV4dG1hcCBsaW5lIGZyb20gUlRDUnRwSGVhZGVyRXh0ZW5zaW9uUGFyYW1ldGVycyBvcgogICAgICAgICAgICAvLyBSVENSdHBIZWFkZXJFeHRlbnNpb24uCiAgICAgICAgICAgIFNEUFV0aWxzLndyaXRlRXh0bWFwID0gZnVuY3Rpb24gKGhlYWRlckV4dGVuc2lvbikgewogICAgICAgICAgICAgICAgcmV0dXJuICdhPWV4dG1hcDonICsgKGhlYWRlckV4dGVuc2lvbi5pZCB8fCBoZWFkZXJFeHRlbnNpb24ucHJlZmVycmVkSWQpICsgKGhlYWRlckV4dGVuc2lvbi5kaXJlY3Rpb24gJiYgaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvbiAhPT0gJ3NlbmRyZWN2JyA/ICcvJyArIGhlYWRlckV4dGVuc2lvbi5kaXJlY3Rpb24gOiAnJykgKyAnICcgKyBoZWFkZXJFeHRlbnNpb24udXJpICsgJ1xyXG4nOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gUGFyc2VzIGFuIGZ0bXAgbGluZSwgcmV0dXJucyBkaWN0aW9uYXJ5LiBTYW1wbGUgaW5wdXQ6CiAgICAgICAgICAgIC8vIGE9Zm10cDo5NiB2YnI9b247Y25nPW9uCiAgICAgICAgICAgIC8vIEFsc28gZGVhbHMgd2l0aCB2YnI9b247IGNuZz1vbgogICAgICAgICAgICBTRFBVdGlscy5wYXJzZUZtdHAgPSBmdW5jdGlvbiAobGluZSkgewogICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHt9OwogICAgICAgICAgICAgICAgdmFyIGt2OwogICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIobGluZS5pbmRleE9mKCcgJykgKyAxKS5zcGxpdCgnOycpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJ0cy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7CiAgICAgICAgICAgICAgICAgICAgcGFyc2VkW2t2WzBdLnRyaW0oKV0gPSBrdlsxXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQ7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBHZW5lcmF0ZXMgYW4gYT1mdG1wIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3IgUlRDUnRwQ29kZWNQYXJhbWV0ZXJzLgogICAgICAgICAgICBTRFBVdGlscy53cml0ZUZtdHAgPSBmdW5jdGlvbiAoY29kZWMpIHsKICAgICAgICAgICAgICAgIHZhciBsaW5lID0gJyc7CiAgICAgICAgICAgICAgICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICAgICAgICAgICAgICAgIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb2RlYy5wYXJhbWV0ZXJzICYmIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZWMucGFyYW1ldGVyc1twYXJhbV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKHBhcmFtICsgJz0nICsgY29kZWMucGFyYW1ldGVyc1twYXJhbV0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnB1c2gocGFyYW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgbGluZSArPSAnYT1mbXRwOicgKyBwdCArICcgJyArIHBhcmFtcy5qb2luKCc7JykgKyAnXHJcbic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbGluZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDoKICAgICAgICAgICAgLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaQogICAgICAgICAgICBTRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uIChsaW5lKSB7CiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnRzLnNoaWZ0KCksCiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyOiBwYXJ0cy5qb2luKCcgJykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuCiAgICAgICAgICAgIFNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24gKGNvZGVjKSB7CiAgICAgICAgICAgICAgICB2YXIgbGluZXMgPSAnJzsKICAgICAgICAgICAgICAgIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlOwogICAgICAgICAgICAgICAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRklYTUU6IHNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyci1pbnQ/CiAgICAgICAgICAgICAgICAgICAgY29kZWMucnRjcEZlZWRiYWNrLmZvckVhY2goZnVuY3Rpb24gKGZiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArIChmYi5wYXJhbWV0ZXIgJiYgZmIucGFyYW1ldGVyLmxlbmd0aCA/ICcgJyArIGZiLnBhcmFtZXRlciA6ICcnKSArICdcclxuJzsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBsaW5lczsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFBhcnNlcyBhbiBSRkMgNTU3NiBzc3JjIG1lZGlhIGF0dHJpYnV0ZS4gU2FtcGxlIGlucHV0OgogICAgICAgICAgICAvLyBhPXNzcmM6MzczNTkyODU1OSBjbmFtZTpzb21ldGhpbmcKICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEgPSBmdW5jdGlvbiAobGluZSkgewogICAgICAgICAgICAgICAgdmFyIHNwID0gbGluZS5pbmRleE9mKCcgJyk7CiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSB7CiAgICAgICAgICAgICAgICAgICAgc3NyYzogcGFyc2VJbnQobGluZS5zdWJzdHIoNywgc3AgLSA3KSwgMTApCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGNvbG9uID0gbGluZS5pbmRleE9mKCc6Jywgc3ApOwogICAgICAgICAgICAgICAgaWYgKGNvbG9uID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICBwYXJ0cy5hdHRyaWJ1dGUgPSBsaW5lLnN1YnN0cihzcCArIDEsIGNvbG9uIC0gc3AgLSAxKTsKICAgICAgICAgICAgICAgICAgICBwYXJ0cy52YWx1ZSA9IGxpbmUuc3Vic3RyKGNvbG9uICsgMSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcGFydHM7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBFeHRyYWN0cyB0aGUgTUlEIChSRkMgNTg4OCkgZnJvbSBhIG1lZGlhIHNlY3Rpb24uCiAgICAgICAgICAgIC8vIHJldHVybnMgdGhlIE1JRCBvciB1bmRlZmluZWQgaWYgbm8gbWlkIGxpbmUgd2FzIGZvdW5kLgogICAgICAgICAgICBTRFBVdGlscy5nZXRNaWQgPSBmdW5jdGlvbiAobWVkaWFTZWN0aW9uKSB7CiAgICAgICAgICAgICAgICB2YXIgbWlkID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1taWQ6JylbMF07CiAgICAgICAgICAgICAgICBpZiAobWlkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pZC5zdWJzdHIoNik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBTRFBVdGlscy5wYXJzZUZpbmdlcnByaW50ID0gZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDE0KS5zcGxpdCgnICcpOwogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBhbGdvcml0aG06IHBhcnRzWzBdLnRvTG93ZXJDYXNlKCksIC8vIGFsZ29yaXRobSBpcyBjYXNlLXNlbnNpdGl2ZSBpbiBFZGdlLgogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJ0c1sxXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIEV4dHJhY3RzIERUTFMgcGFyYW1ldGVycyBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LgogICAgICAgICAgICAvLyBGSVhNRTogZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgZnVuY3Rpb25zIHRoaXMgc2hvdWxkIG9ubHkKICAgICAgICAgICAgLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuCiAgICAgICAgICAgIFNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHsKICAgICAgICAgICAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LCAnYT1maW5nZXJwcmludDonKTsKICAgICAgICAgICAgICAgIC8vIE5vdGU6IGE9c2V0dXAgbGluZSBpcyBpZ25vcmVkIHNpbmNlIHdlIHVzZSB0aGUgJ2F1dG8nIHJvbGUuCiAgICAgICAgICAgICAgICAvLyBOb3RlMjogJ2FsZ29yaXRobScgaXMgbm90IGNhc2Ugc2Vuc2l0aXZlIGV4Y2VwdCBpbiBFZGdlLgogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICByb2xlOiAnYXV0bycsCiAgICAgICAgICAgICAgICAgICAgZmluZ2VycHJpbnRzOiBsaW5lcy5tYXAoU0RQVXRpbHMucGFyc2VGaW5nZXJwcmludCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBTZXJpYWxpemVzIERUTFMgcGFyYW1ldGVycyB0byBTRFAuCiAgICAgICAgICAgIFNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbiAocGFyYW1zLCBzZXR1cFR5cGUpIHsKICAgICAgICAgICAgICAgIHZhciBzZHAgPSAnYT1zZXR1cDonICsgc2V0dXBUeXBlICsgJ1xyXG4nOwogICAgICAgICAgICAgICAgcGFyYW1zLmZpbmdlcnByaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChmcCkgewogICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT1maW5nZXJwcmludDonICsgZnAuYWxnb3JpdGhtICsgJyAnICsgZnAudmFsdWUgKyAnXHJcbic7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBzZHA7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIFBhcnNlcyBJQ0UgaW5mb3JtYXRpb24gZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC4KICAgICAgICAgICAgLy8gRklYTUU6IGZvciBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIGZ1bmN0aW9ucyB0aGlzIHNob3VsZCBvbmx5CiAgICAgICAgICAgIC8vICAgZ2V0IHRoZSBpY2UtdWZyYWcgYW5kIGljZS1wd2QgbGluZXMgYXMgaW5wdXQuCiAgICAgICAgICAgIFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbiAobWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogICAgICAgICAgICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICAgICAgLy8gU2VhcmNoIGluIHNlc3Npb24gcGFydCwgdG9vLgogICAgICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogICAgICAgICAgICAgICAgdmFyIGljZVBhcmFtZXRlcnMgPSB7CiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWVGcmFnbWVudDogbGluZXMuZmlsdGVyKGZ1bmN0aW9uIChsaW5lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5lLmluZGV4T2YoJ2E9aWNlLXVmcmFnOicpID09PSAwOwogICAgICAgICAgICAgICAgICAgIH0pWzBdLnN1YnN0cigxMiksCiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbiAobGluZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGluZS5pbmRleE9mKCdhPWljZS1wd2Q6JykgPT09IDA7CiAgICAgICAgICAgICAgICAgICAgfSlbMF0uc3Vic3RyKDEwKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiBpY2VQYXJhbWV0ZXJzOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gU2VyaWFsaXplcyBJQ0UgcGFyYW1ldGVycyB0byBTRFAuCiAgICAgICAgICAgIFNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnYT1pY2UtdWZyYWc6JyArIHBhcmFtcy51c2VybmFtZUZyYWdtZW50ICsgJ1xyXG4nICsgJ2E9aWNlLXB3ZDonICsgcGFyYW1zLnBhc3N3b3JkICsgJ1xyXG4nOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLgogICAgICAgICAgICBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMgPSBmdW5jdGlvbiAobWVkaWFTZWN0aW9uKSB7CiAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSB7CiAgICAgICAgICAgICAgICAgICAgY29kZWNzOiBbXSwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJFeHRlbnNpb25zOiBbXSwKICAgICAgICAgICAgICAgICAgICBmZWNNZWNoYW5pc21zOiBbXSwKICAgICAgICAgICAgICAgICAgICBydGNwOiBbXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgICAgICAgICAgIHZhciBtbGluZSA9IGxpbmVzWzBdLnNwbGl0KCcgJyk7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMzsgaSA8IG1saW5lLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBhbGwgY29kZWNzIGZyb20gbWxpbmVbMy4uXQogICAgICAgICAgICAgICAgICAgIHZhciBwdCA9IG1saW5lW2ldOwogICAgICAgICAgICAgICAgICAgIHZhciBydHBtYXBsaW5lID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydHBtYXA6JyArIHB0ICsgJyAnKVswXTsKICAgICAgICAgICAgICAgICAgICBpZiAocnRwbWFwbGluZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29kZWMgPSBTRFBVdGlscy5wYXJzZVJ0cE1hcChydHBtYXBsaW5lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZtdHBzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1mbXRwOicgKyBwdCArICcgJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuCiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnMgPSBmbXRwcy5sZW5ndGggPyBTRFBVdGlscy5wYXJzZUZtdHAoZm10cHNbMF0pIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVjLnJ0Y3BGZWVkYmFjayA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1mYjonICsgcHQgKyAnICcpLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLmNvZGVjcy5wdXNoKGNvZGVjKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFyc2UgRkVDIG1lY2hhbmlzbXMgZnJvbSBydHBtYXAgbGluZXMuCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdSRUQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVUxQRkVDJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLnB1c2goY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBSRUQgYW5kIFVMUEZFQyBhcmUgcmVjb2duaXplZCBhcyBGRUMgbWVjaGFuaXNtcy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9ZXh0bWFwOicpLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbi5oZWFkZXJFeHRlbnNpb25zLnB1c2goU0RQVXRpbHMucGFyc2VFeHRtYXAobGluZSkpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyBGSVhNRTogcGFyc2UgcnRjcC4KICAgICAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIEdlbmVyYXRlcyBwYXJ0cyBvZiB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gZGVzY3JpYmluZyB0aGUgY2FwYWJpbGl0aWVzIC8KICAgICAgICAgICAgLy8gcGFyYW1ldGVycy4KICAgICAgICAgICAgU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uIChraW5kLCBjYXBzKSB7CiAgICAgICAgICAgICAgICB2YXIgc2RwID0gJyc7CgogICAgICAgICAgICAgICAgLy8gQnVpbGQgdGhlIG1saW5lLgogICAgICAgICAgICAgICAgc2RwICs9ICdtPScgKyBraW5kICsgJyAnOwogICAgICAgICAgICAgICAgc2RwICs9IGNhcHMuY29kZWNzLmxlbmd0aCA+IDAgPyAnOScgOiAnMCc7IC8vIHJlamVjdCBpZiBubyBjb2RlY3MuCiAgICAgICAgICAgICAgICBzZHAgKz0gJyBVRFAvVExTL1JUUC9TQVZQRiAnOwogICAgICAgICAgICAgICAgc2RwICs9IGNhcHMuY29kZWNzLm1hcChmdW5jdGlvbiAoY29kZWMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2RlYy5wYXlsb2FkVHlwZTsKICAgICAgICAgICAgICAgIH0pLmpvaW4oJyAnKSArICdcclxuJzsKCiAgICAgICAgICAgICAgICBzZHAgKz0gJ2M9SU4gSVA0IDAuMC4wLjBcclxuJzsKICAgICAgICAgICAgICAgIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcclxuJzsKCiAgICAgICAgICAgICAgICAvLyBBZGQgYT1ydHBtYXAgbGluZXMgZm9yIGVhY2ggY29kZWMuIEFsc28gZm10cCBhbmQgcnRjcC1mYi4KICAgICAgICAgICAgICAgIGNhcHMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24gKGNvZGVjKSB7CiAgICAgICAgICAgICAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTsKICAgICAgICAgICAgICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGbXRwKGNvZGVjKTsKICAgICAgICAgICAgICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdGNwRmIoY29kZWMpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIgbWF4cHRpbWUgPSAwOwogICAgICAgICAgICAgICAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbiAoY29kZWMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY29kZWMubWF4cHRpbWUgPiBtYXhwdGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICBtYXhwdGltZSA9IGNvZGVjLm1heHB0aW1lOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKG1heHB0aW1lID4gMCkgewogICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT1tYXhwdGltZTonICsgbWF4cHRpbWUgKyAnXHJcbic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9cnRjcC1tdXhcclxuJzsKCiAgICAgICAgICAgICAgICBpZiAoY2Fwcy5oZWFkZXJFeHRlbnNpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgY2Fwcy5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24gKGV4dGVuc2lvbikgewogICAgICAgICAgICAgICAgICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVFeHRtYXAoZXh0ZW5zaW9uKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIEZJWE1FOiB3cml0ZSBmZWNNZWNoYW5pc21zLgogICAgICAgICAgICAgICAgcmV0dXJuIHNkcDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2YKICAgICAgICAgICAgLy8gUlRDUnRwRW5jb2RpbmdQYXJhbWV0ZXJzLgogICAgICAgICAgICBTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyA9IGZ1bmN0aW9uIChtZWRpYVNlY3Rpb24pIHsKICAgICAgICAgICAgICAgIHZhciBlbmNvZGluZ1BhcmFtZXRlcnMgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICAgICAgdmFyIGhhc1JlZCA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignUkVEJykgIT09IC0xOwogICAgICAgICAgICAgICAgdmFyIGhhc1VscGZlYyA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignVUxQRkVDJykgIT09IC0xOwoKICAgICAgICAgICAgICAgIC8vIGZpbHRlciBhPXNzcmM6Li4uIGNuYW1lOiwgaWdub3JlIFBsYW5CLW1zaWQKICAgICAgICAgICAgICAgIHZhciBzc3JjcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKS5tYXAoZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7CiAgICAgICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHBhcnRzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdmFyIHByaW1hcnlTc3JjID0gc3NyY3MubGVuZ3RoID4gMCAmJiBzc3Jjc1swXS5zc3JjOwogICAgICAgICAgICAgICAgdmFyIHNlY29uZGFyeVNzcmM7CgogICAgICAgICAgICAgICAgdmFyIGZsb3dzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjLWdyb3VwOkZJRCcpLm1hcChmdW5jdGlvbiAobGluZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDE3KS5zcGxpdCgnICcpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24gKHBhcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHBhcnQsIDEwKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKGZsb3dzLmxlbmd0aCA+IDAgJiYgZmxvd3NbMF0ubGVuZ3RoID4gMSAmJiBmbG93c1swXVswXSA9PT0gcHJpbWFyeVNzcmMpIHsKICAgICAgICAgICAgICAgICAgICBzZWNvbmRhcnlTc3JjID0gZmxvd3NbMF1bMV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24uY29kZWNzLmZvckVhY2goZnVuY3Rpb24gKGNvZGVjKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1JUWCcgJiYgY29kZWMucGFyYW1ldGVycy5hcHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuY1BhcmFtID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3NyYzogcHJpbWFyeVNzcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlY1BheWxvYWRUeXBlOiBwYXJzZUludChjb2RlYy5wYXJhbWV0ZXJzLmFwdCwgMTApCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmltYXJ5U3NyYyAmJiBzZWNvbmRhcnlTc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNQYXJhbS5ydHggPSB7IHNzcmM6IHNlY29uZGFyeVNzcmMgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNSZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY1BhcmFtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbmNQYXJhbSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jUGFyYW0uZmVjID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNzcmM6IHNlY29uZGFyeVNzcmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVjaGFuaXNtOiBoYXNVbHBmZWMgPyAncmVkK3VscGZlYycgOiAncmVkJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kaW5nUGFyYW1ldGVycy5wdXNoKGVuY1BhcmFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKGVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGggPT09IDAgJiYgcHJpbWFyeVNzcmMpIHsKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHNzcmM6IHByaW1hcnlTc3JjCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gd2Ugc3VwcG9ydCBib3RoIGI9QVMgYW5kIGI9VElBUyBidXQgaW50ZXJwcmV0IEFTIGFzIFRJQVMuCiAgICAgICAgICAgICAgICB2YXIgYmFuZHdpZHRoID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYj0nKTsKICAgICAgICAgICAgICAgIGlmIChiYW5kd2lkdGgubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJhbmR3aWR0aFswXS5pbmRleE9mKCdiPVRJQVM6JykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cig3KSwgMTApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9QVM6JykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIGZvcm11bGEgZnJvbSBKU0VQIHRvIGNvbnZlcnQgYj1BUyB0byBUSUFTIHZhbHVlLgogICAgICAgICAgICAgICAgICAgICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyKDUpLCAxMCkgKiAxMDAwICogMC45NSAtIDUwICogNDAgKiA4OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhbmR3aWR0aCA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBwYXJzZXMgaHR0cDovL2RyYWZ0Lm9ydGMub3JnLyNydGNydGNwcGFyYW1ldGVycyoKICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VSdGNwUGFyYW1ldGVycyA9IGZ1bmN0aW9uIChtZWRpYVNlY3Rpb24pIHsKICAgICAgICAgICAgICAgIHZhciBydGNwUGFyYW1ldGVycyA9IHt9OwoKICAgICAgICAgICAgICAgIHZhciBjbmFtZTsKICAgICAgICAgICAgICAgIC8vIEdldHMgdGhlIGZpcnN0IFNTUkMuIE5vdGUgdGhhdCB3aXRoIFJUWCB0aGVyZSBtaWdodCBiZSBtdWx0aXBsZQogICAgICAgICAgICAgICAgLy8gU1NSQ3MuCiAgICAgICAgICAgICAgICB2YXIgcmVtb3RlU3NyYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKS5tYXAoZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7CiAgICAgICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmouYXR0cmlidXRlID09PSAnY25hbWUnOwogICAgICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgICAgICBpZiAocmVtb3RlU3NyYykgewogICAgICAgICAgICAgICAgICAgIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBydGNwUGFyYW1ldGVycy5zc3JjID0gcmVtb3RlU3NyYy5zc3JjOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEVkZ2UgdXNlcyB0aGUgY29tcG91bmQgYXR0cmlidXRlIGluc3RlYWQgb2YgcmVkdWNlZFNpemUKICAgICAgICAgICAgICAgIC8vIGNvbXBvdW5kIGlzICFyZWR1Y2VkU2l6ZQogICAgICAgICAgICAgICAgdmFyIHJzaXplID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLXJzaXplJyk7CiAgICAgICAgICAgICAgICBydGNwUGFyYW1ldGVycy5yZWR1Y2VkU2l6ZSA9IHJzaXplLmxlbmd0aCA+IDA7CiAgICAgICAgICAgICAgICBydGNwUGFyYW1ldGVycy5jb21wb3VuZCA9IHJzaXplLmxlbmd0aCA9PT0gMDsKCiAgICAgICAgICAgICAgICAvLyBwYXJzZXMgdGhlIHJ0Y3AtbXV4IGF0dHLRlmJ1dGUuCiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgRWRnZSBkb2VzIG5vdCBzdXBwb3J0IHVubXV4ZWQgUlRDUC4KICAgICAgICAgICAgICAgIHZhciBtdXggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXJ0Y3AtbXV4Jyk7CiAgICAgICAgICAgICAgICBydGNwUGFyYW1ldGVycy5tdXggPSBtdXgubGVuZ3RoID4gMDsKCiAgICAgICAgICAgICAgICByZXR1cm4gcnRjcFBhcmFtZXRlcnM7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBwYXJzZXMgZWl0aGVyIGE9bXNpZDogb3IgYT1zc3JjOi4uLiBtc2lkIGxpbmVzIGFuZCByZXR1cm5zCiAgICAgICAgICAgIC8vIHRoZSBpZCBvZiB0aGUgTWVkaWFTdHJlYW0gYW5kIE1lZGlhU3RyZWFtVHJhY2suCiAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlTXNpZCA9IGZ1bmN0aW9uIChtZWRpYVNlY3Rpb24pIHsKICAgICAgICAgICAgICAgIHZhciBwYXJ0czsKICAgICAgICAgICAgICAgIHZhciBzcGVjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1tc2lkOicpOwogICAgICAgICAgICAgICAgaWYgKHNwZWMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBzcGVjWzBdLnN1YnN0cig3KS5zcGxpdCgnICcpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXSB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHBsYW5CID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpLm1hcChmdW5jdGlvbiAobGluZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKTsKICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAocGFydHMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMuYXR0cmlidXRlID09PSAnbXNpZCc7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChwbGFuQi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBwbGFuQlswXS52YWx1ZS5zcGxpdCgnICcpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXSB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBzZXNzaW9uIElEIGZvciBTRFAuCiAgICAgICAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1pZXRmLXJ0Y3dlYi1qc2VwLTIwI3NlY3Rpb24tNS4yLjEKICAgICAgICAgICAgLy8gcmVjb21tZW5kcyB1c2luZyBhIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSArdmUgNjQtYml0IHZhbHVlCiAgICAgICAgICAgIC8vIGJ1dCByaWdodCBub3cgdGhpcyBzaG91bGQgYmUgYWNjZXB0YWJsZSBhbmQgd2l0aGluIHRoZSByaWdodCByYW5nZQogICAgICAgICAgICBTRFBVdGlscy5nZW5lcmF0ZVNlc3Npb25JZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsIDIxKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFdyaXRlIGJvaWxkZXIgcGxhdGUgZm9yIHN0YXJ0IG9mIFNEUAogICAgICAgICAgICAvLyBzZXNzSWQgYXJndW1lbnQgaXMgb3B0aW9uYWwgLSBpZiBub3Qgc3VwcGxpZWQgaXQgd2lsbAogICAgICAgICAgICAvLyBiZSBnZW5lcmF0ZWQgcmFuZG9tbHkKICAgICAgICAgICAgLy8gc2Vzc1ZlcnNpb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIDIKICAgICAgICAgICAgU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUgPSBmdW5jdGlvbiAoc2Vzc0lkLCBzZXNzVmVyKSB7CiAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvbklkOwogICAgICAgICAgICAgICAgdmFyIHZlcnNpb24gPSBzZXNzVmVyICE9PSB1bmRlZmluZWQgPyBzZXNzVmVyIDogMjsKICAgICAgICAgICAgICAgIGlmIChzZXNzSWQpIHsKICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQgPSBzZXNzSWQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZCA9IFNEUFV0aWxzLmdlbmVyYXRlU2Vzc2lvbklkKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC4KICAgICAgICAgICAgICAgIHJldHVybiAndj0wXHJcbicgKyAnbz10aGlzaXNhZGFwdGVyb3J0YyAnICsgc2Vzc2lvbklkICsgJyAnICsgdmVyc2lvbiArICcgSU4gSVA0IDEyNy4wLjAuMVxyXG4nICsgJ3M9LVxyXG4nICsgJ3Q9MCAwXHJcbic7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbiA9IGZ1bmN0aW9uICh0cmFuc2NlaXZlciwgY2FwcywgdHlwZSwgc3RyZWFtKSB7CiAgICAgICAgICAgICAgICB2YXIgc2RwID0gU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbih0cmFuc2NlaXZlci5raW5kLCBjYXBzKTsKCiAgICAgICAgICAgICAgICAvLyBNYXAgSUNFIHBhcmFtZXRlcnMgKHVmcmFnLCBwd2QpIHRvIFNEUC4KICAgICAgICAgICAgICAgIHNkcCArPSBTRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnModHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpOwoKICAgICAgICAgICAgICAgIC8vIE1hcCBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLgogICAgICAgICAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnModHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSwgdHlwZSA9PT0gJ29mZmVyJyA/ICdhY3RwYXNzJyA6ICdhY3RpdmUnKTsKCiAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9bWlkOicgKyB0cmFuc2NlaXZlci5taWQgKyAnXHJcbic7CgogICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmRpcmVjdGlvbikgewogICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT0nICsgdHJhbnNjZWl2ZXIuZGlyZWN0aW9uICsgJ1xyXG4nOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9c2VuZHJlY3ZcclxuJzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPXNlbmRvbmx5XHJcbic7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPXJlY3Zvbmx5XHJcbic7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT1pbmFjdGl2ZVxyXG4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHsKICAgICAgICAgICAgICAgICAgICAvLyBzcGVjLgogICAgICAgICAgICAgICAgICAgIHZhciBtc2lkID0gJ21zaWQ6JyArIHN0cmVhbS5pZCArICcgJyArIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjay5pZCArICdcclxuJzsKICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9JyArIG1zaWQ7CgogICAgICAgICAgICAgICAgICAgIC8vIGZvciBDaHJvbWUuCiAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArICcgJyArIG1zaWQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICsgJyAnICsgbXNpZDsKICAgICAgICAgICAgICAgICAgICAgICAgc2RwICs9ICdhPXNzcmMtZ3JvdXA6RklEICcgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAnICcgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICsgJ1xyXG4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIEZJWE1FOiB0aGlzIHNob3VsZCBiZSB3cml0dGVuIGJ5IHdyaXRlUnRwRGVzY3JpcHRpb24uCiAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcclxuJzsKICAgICAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiYgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHsKICAgICAgICAgICAgICAgICAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXHJcbic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gc2RwOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gR2V0cyB0aGUgZGlyZWN0aW9uIGZyb20gdGhlIG1lZGlhU2VjdGlvbiBvciB0aGUgc2Vzc2lvbnBhcnQuCiAgICAgICAgICAgIFNEUFV0aWxzLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uIChtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7CiAgICAgICAgICAgICAgICAvLyBMb29rIGZvciBzZW5kcmVjdiwgc2VuZG9ubHksIHJlY3Zvbmx5LCBpbmFjdGl2ZSwgZGVmYXVsdCB0byBzZW5kcmVjdi4KICAgICAgICAgICAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGxpbmVzW2ldKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2E9c2VuZHJlY3YnOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhPXNlbmRvbmx5JzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYT1yZWN2b25seSc6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2E9aW5hY3RpdmUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpbmVzW2ldLnN1YnN0cigyKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUU6IFdoYXQgc2hvdWxkIGhhcHBlbiBoZXJlPwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzZXNzaW9ucGFydCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBTRFBVdGlscy5nZXREaXJlY3Rpb24oc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICdzZW5kcmVjdic7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBTRFBVdGlscy5nZXRLaW5kID0gZnVuY3Rpb24gKG1lZGlhU2VjdGlvbikgewogICAgICAgICAgICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICAgICAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTsKICAgICAgICAgICAgICAgIHJldHVybiBtbGluZVswXS5zdWJzdHIoMik7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBTRFBVdGlscy5pc1JlamVjdGVkID0gZnVuY3Rpb24gKG1lZGlhU2VjdGlvbikgewogICAgICAgICAgICAgICAgcmV0dXJuIG1lZGlhU2VjdGlvbi5zcGxpdCgnICcsIDIpWzFdID09PSAnMCc7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBTRFBVdGlscy5wYXJzZU1MaW5lID0gZnVuY3Rpb24gKG1lZGlhU2VjdGlvbikgewogICAgICAgICAgICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gbGluZXNbMF0uc3Vic3RyKDIpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGtpbmQ6IHBhcnRzWzBdLAogICAgICAgICAgICAgICAgICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzFdLCAxMCksCiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6IHBhcnRzWzJdLAogICAgICAgICAgICAgICAgICAgIGZtdDogcGFydHMuc2xpY2UoMykuam9pbignICcpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VPTGluZSA9IGZ1bmN0aW9uIChtZWRpYVNlY3Rpb24pIHsKICAgICAgICAgICAgICAgIHZhciBsaW5lID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnbz0nKVswXTsKICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDIpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBwYXJ0c1swXSwKICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHBhcnRzWzFdLAogICAgICAgICAgICAgICAgICAgIHNlc3Npb25WZXJzaW9uOiBwYXJzZUludChwYXJ0c1syXSwgMTApLAogICAgICAgICAgICAgICAgICAgIG5ldFR5cGU6IHBhcnRzWzNdLAogICAgICAgICAgICAgICAgICAgIGFkZHJlc3NUeXBlOiBwYXJ0c1s0XSwKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBwYXJ0c1s1XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KICAgICAgICAgICAgaWYgKCh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihtb2R1bGUpKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gU0RQVXRpbHM7CiAgICAgICAgICAgIH0KICAgICAgICB9LCB7fV0sIDM6IFtmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CiAgICAgICAgICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7CiAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogICAgICAgICAgICAgICAgKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAgICAgICAgICAgICAgICAqICB0cmVlLgogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIC8qIGVzbGludC1lbnYgbm9kZSAqLwoKICAgICAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgICAgICAgICB2YXIgYWRhcHRlckZhY3RvcnkgPSByZXF1aXJlKCcuL2FkYXB0ZXJfZmFjdG9yeS5qcycpOwogICAgICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBhZGFwdGVyRmFjdG9yeSh7IHdpbmRvdzogZ2xvYmFsLndpbmRvdyB9KTsKICAgICAgICAgICAgfSkuY2FsbCh0aGlzLCB0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KTsKICAgICAgICB9LCB7ICIuL2FkYXB0ZXJfZmFjdG9yeS5qcyI6IDQgfV0sIDQ6IFtmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAgICAgICAgICAgKgogICAgICAgICAgICAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAgICAgICAgICAgICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogICAgICAgICAgICAqICB0cmVlLgogICAgICAgICAgICAqLwogICAgICAgICAgICAvKiBlc2xpbnQtZW52IG5vZGUgKi8KCiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTsKICAgICAgICAgICAgLy8gU2hpbW1pbmcgc3RhcnRzIGhlcmUuCiAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRlcGVuZGVuY2llcywgb3B0cykgewogICAgICAgICAgICAgICAgdmFyIHdpbmRvdyA9IGRlcGVuZGVuY2llcyAmJiBkZXBlbmRlbmNpZXMud2luZG93OwoKICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICAgIHNoaW1DaHJvbWU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc2hpbUZpcmVmb3g6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc2hpbUVkZ2U6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc2hpbVNhZmFyaTogdHJ1ZQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0cykgewogICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdHMsIGtleSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1trZXldID0gb3B0c1trZXldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBVdGlscy4KICAgICAgICAgICAgICAgIHZhciBsb2dnaW5nID0gdXRpbHMubG9nOwogICAgICAgICAgICAgICAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpOwoKICAgICAgICAgICAgICAgIC8vIFVuY29tbWVudCB0aGUgbGluZSBiZWxvdyBpZiB5b3Ugd2FudCBsb2dnaW5nIHRvIG9jY3VyLCBpbmNsdWRpbmcgbG9nZ2luZwogICAgICAgICAgICAgICAgLy8gZm9yIHRoZSBzd2l0Y2ggc3RhdGVtZW50IGJlbG93LiBDYW4gYWxzbyBiZSB0dXJuZWQgb24gaW4gdGhlIGJyb3dzZXIgdmlhCiAgICAgICAgICAgICAgICAvLyBhZGFwdGVyLmRpc2FibGVMb2coZmFsc2UpLCBidXQgdGhlbiBsb2dnaW5nIGZyb20gdGhlIHN3aXRjaCBzdGF0ZW1lbnQgYmVsb3cKICAgICAgICAgICAgICAgIC8vIHdpbGwgbm90IGFwcGVhci4KICAgICAgICAgICAgICAgIC8vIHJlcXVpcmUoJy4vdXRpbHMnKS5kaXNhYmxlTG9nKGZhbHNlKTsKCiAgICAgICAgICAgICAgICAvLyBCcm93c2VyIHNoaW1zLgogICAgICAgICAgICAgICAgdmFyIGNocm9tZVNoaW0gPSByZXF1aXJlKCcuL2Nocm9tZS9jaHJvbWVfc2hpbScpIHx8IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgZWRnZVNoaW0gPSByZXF1aXJlKCcuL2VkZ2UvZWRnZV9zaGltJykgfHwgbnVsbDsKICAgICAgICAgICAgICAgIHZhciBmaXJlZm94U2hpbSA9IHJlcXVpcmUoJy4vZmlyZWZveC9maXJlZm94X3NoaW0nKSB8fCBudWxsOwogICAgICAgICAgICAgICAgdmFyIHNhZmFyaVNoaW0gPSByZXF1aXJlKCcuL3NhZmFyaS9zYWZhcmlfc2hpbScpIHx8IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgY29tbW9uU2hpbSA9IHJlcXVpcmUoJy4vY29tbW9uX3NoaW0nKSB8fCBudWxsOwoKICAgICAgICAgICAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgICAgICAgICAgICB2YXIgYWRhcHRlciA9IHsKICAgICAgICAgICAgICAgICAgICBicm93c2VyRGV0YWlsczogYnJvd3NlckRldGFpbHMsCiAgICAgICAgICAgICAgICAgICAgY29tbW9uU2hpbTogY29tbW9uU2hpbSwKICAgICAgICAgICAgICAgICAgICBleHRyYWN0VmVyc2lvbjogdXRpbHMuZXh0cmFjdFZlcnNpb24sCiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUxvZzogdXRpbHMuZGlzYWJsZUxvZywKICAgICAgICAgICAgICAgICAgICBkaXNhYmxlV2FybmluZ3M6IHV0aWxzLmRpc2FibGVXYXJuaW5ncwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyBTaGltIGJyb3dzZXIgaWYgZm91bmQuCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdjaHJvbWUnOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNocm9tZVNoaW0gfHwgIWNocm9tZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uIHx8ICFvcHRpb25zLnNoaW1DaHJvbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmcoJ0Nocm9tZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGFwdGVyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgY2hyb21lLicpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gY2hyb21lU2hpbTsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uU2hpbS5zaGltQ3JlYXRlT2JqZWN0VVJMKHdpbmRvdyk7CgogICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWVTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lU2hpbS5zaGltTWVkaWFTdHJlYW0od2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lU2hpbS5zaGltU291cmNlT2JqZWN0KHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZVNoaW0uc2hpbU9uVHJhY2sod2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lU2hpbS5zaGltQWRkVHJhY2tSZW1vdmVUcmFjayh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWVTaGltLnNoaW1HZXRTZW5kZXJzV2l0aER0bWYod2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lU2hpbS5zaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0cyh3aW5kb3cpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uU2hpbS5zaGltUlRDSWNlQ2FuZGlkYXRlKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1vblNoaW0uc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdmaXJlZm94JzoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJlZm94U2hpbSB8fCAhZmlyZWZveFNoaW0uc2hpbVBlZXJDb25uZWN0aW9uIHx8ICFvcHRpb25zLnNoaW1GaXJlZm94KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nKCdGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFkYXB0ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBmaXJlZm94LicpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gZmlyZWZveFNoaW07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1vblNoaW0uc2hpbUNyZWF0ZU9iamVjdFVSTCh3aW5kb3cpOwoKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWZveFNoaW0uc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBmaXJlZm94U2hpbS5zaGltU291cmNlT2JqZWN0KHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVmb3hTaGltLnNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBmaXJlZm94U2hpbS5zaGltT25UcmFjayh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBmaXJlZm94U2hpbS5zaGltUmVtb3ZlU3RyZWFtKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVmb3hTaGltLnNoaW1TZW5kZXJHZXRTdGF0cyh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBmaXJlZm94U2hpbS5zaGltUmVjZWl2ZXJHZXRTdGF0cyh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBmaXJlZm94U2hpbS5zaGltUlRDRGF0YUNoYW5uZWwod2luZG93KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBjb21tb25TaGltLnNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBjb21tb25TaGltLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3Iod2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZWRnZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWRnZVNoaW0gfHwgIWVkZ2VTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiB8fCAhb3B0aW9ucy5zaGltRWRnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZygnTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGFwdGVyOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgZWRnZS4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci4KICAgICAgICAgICAgICAgICAgICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IGVkZ2VTaGltOwogICAgICAgICAgICAgICAgICAgICAgICBjb21tb25TaGltLnNoaW1DcmVhdGVPYmplY3RVUkwod2luZG93KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VTaGltLnNoaW1SZXBsYWNlVHJhY2sod2luZG93KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBlZGdlIHNoaW0gaW1wbGVtZW50cyB0aGUgZnVsbCBSVENJY2VDYW5kaWRhdGUgb2JqZWN0LgoKICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uU2hpbS5zaGltTWF4TWVzc2FnZVNpemUod2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uU2hpbS5zaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NhZmFyaSc6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2FmYXJpU2hpbSB8fCAhb3B0aW9ucy5zaGltU2FmYXJpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nKCdTYWZhcmkgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRhcHRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIHNhZmFyaS4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci4KICAgICAgICAgICAgICAgICAgICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IHNhZmFyaVNoaW07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1vblNoaW0uc2hpbUNyZWF0ZU9iamVjdFVSTCh3aW5kb3cpOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2FmYXJpU2hpbS5zaGltUlRDSWNlU2VydmVyVXJscyh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZhcmlTaGltLnNoaW1DYWxsYmFja3NBUEkod2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgc2FmYXJpU2hpbS5zaGltTG9jYWxTdHJlYW1zQVBJKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhZmFyaVNoaW0uc2hpbVJlbW90ZVN0cmVhbXNBUEkod2luZG93KTsKICAgICAgICAgICAgICAgICAgICAgICAgc2FmYXJpU2hpbS5zaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBzYWZhcmlTaGltLnNoaW1DcmVhdGVPZmZlckxlZ2FjeSh3aW5kb3cpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uU2hpbS5zaGltUlRDSWNlQ2FuZGlkYXRlKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1vblNoaW0uc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nKCdVbnN1cHBvcnRlZCBicm93c2VyIScpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gYWRhcHRlcjsKICAgICAgICAgICAgfTsKICAgICAgICB9LCB7ICIuL2Nocm9tZS9jaHJvbWVfc2hpbSI6IDUsICIuL2NvbW1vbl9zaGltIjogNywgIi4vZWRnZS9lZGdlX3NoaW0iOiA4LCAiLi9maXJlZm94L2ZpcmVmb3hfc2hpbSI6IDExLCAiLi9zYWZhcmkvc2FmYXJpX3NoaW0iOiAxMywgIi4vdXRpbHMiOiAxNCB9XSwgNTogW2Z1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHsKCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAgICAgICAgICAgKgogICAgICAgICAgICAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAgICAgICAgICAgICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogICAgICAgICAgICAqICB0cmVlLgogICAgICAgICAgICAqLwogICAgICAgICAgICAvKiBlc2xpbnQtZW52IG5vZGUgKi8KICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKTsKICAgICAgICAgICAgdmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7CgogICAgICAgICAgICAvKiBpdGVyYXRlcyB0aGUgc3RhdHMgZ3JhcGggcmVjdXJzaXZlbHkuICovCiAgICAgICAgICAgIGZ1bmN0aW9uIHdhbGtTdGF0cyhzdGF0cywgYmFzZSwgcmVzdWx0U2V0KSB7CiAgICAgICAgICAgICAgICBpZiAoIWJhc2UgfHwgcmVzdWx0U2V0LmhhcyhiYXNlLmlkKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlc3VsdFNldC5zZXQoYmFzZS5pZCwgYmFzZSk7CiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhiYXNlKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoJ0lkJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2Fsa1N0YXRzKHN0YXRzLCBzdGF0cy5nZXQoYmFzZVtuYW1lXSksIHJlc3VsdFNldCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLmVuZHNXaXRoKCdJZHMnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBiYXNlW25hbWVdLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxrU3RhdHMoc3RhdHMsIHN0YXRzLmdldChpZCksIHJlc3VsdFNldCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvKiBmaWx0ZXIgZ2V0U3RhdHMgZm9yIGEgc2VuZGVyL3JlY2VpdmVyIHRyYWNrLiAqLwogICAgICAgICAgICBmdW5jdGlvbiBmaWx0ZXJTdGF0cyhyZXN1bHQsIHRyYWNrLCBvdXRib3VuZCkgewogICAgICAgICAgICAgICAgdmFyIHN0cmVhbVN0YXRzVHlwZSA9IG91dGJvdW5kID8gJ291dGJvdW5kLXJ0cCcgOiAnaW5ib3VuZC1ydHAnOwogICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkUmVzdWx0ID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgaWYgKHRyYWNrID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkUmVzdWx0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIHRyYWNrU3RhdHMgPSBbXTsKICAgICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlID09PSAndHJhY2snICYmIHZhbHVlLnRyYWNrSWRlbnRpZmllciA9PT0gdHJhY2suaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tTdGF0cy5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRyYWNrU3RhdHMuZm9yRWFjaChmdW5jdGlvbiAodHJhY2tTdGF0KSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKHN0YXRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0cy50eXBlID09PSBzdHJlYW1TdGF0c1R5cGUgJiYgc3RhdHMudHJhY2tJZCA9PT0gdHJhY2tTdGF0LmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxrU3RhdHMocmVzdWx0LCBzdGF0cywgZmlsdGVyZWRSZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZFJlc3VsdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgICAgICAgICBzaGltR2V0VXNlck1lZGlhOiByZXF1aXJlKCcuL2dldHVzZXJtZWRpYScpLAogICAgICAgICAgICAgICAgc2hpbU1lZGlhU3RyZWFtOiBmdW5jdGlvbiBzaGltTWVkaWFTdHJlYW0od2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93Lk1lZGlhU3RyZWFtID0gd2luZG93Lk1lZGlhU3RyZWFtIHx8IHdpbmRvdy53ZWJraXRNZWRpYVN0cmVhbTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgc2hpbU9uVHJhY2s6IGZ1bmN0aW9uIHNoaW1PblRyYWNrKHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIHdpbmRvdyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yod2luZG93KSkgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiAhKCdvbnRyYWNrJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkgewogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29udHJhY2snLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChmKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayA9IGYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbiA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYy5fb250cmFja3BvbHkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fb250cmFja3BvbHkgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmFkZHN0cmVhbSBkb2VzIG5vdCBmaXJlIHdoZW4gYSB0cmFjayBpcyBhZGRlZCB0byBhbiBleGlzdGluZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJlYW0uIEJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGhhdC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCBmdW5jdGlvbiAodGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNlaXZlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gcGMuZ2V0UmVjZWl2ZXJzKCkuZmluZChmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci50cmFjayAmJiByLnRyYWNrLmlkID09PSB0ZS50cmFjay5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB7IHRyYWNrOiB0ZS50cmFjayB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRyYWNrID0gdGUudHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7IHJlY2VpdmVyOiByZWNlaXZlciB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjZWl2ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlciA9IHBjLmdldFJlY2VpdmVycygpLmZpbmQoZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIudHJhY2sgJiYgci50cmFjay5pZCA9PT0gdHJhY2suaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyID0geyB0cmFjazogdHJhY2sgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRyYWNrID0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7IHJlY2VpdmVyOiByZWNlaXZlciB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCBwYy5fb250cmFja3BvbHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbi5hcHBseShwYywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEoJ1JUQ1J0cFRyYW5zY2VpdmVyJyBpbiB3aW5kb3cpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ3RyYWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZS50cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudHJhbnNjZWl2ZXIgPSB7IHJlY2VpdmVyOiBlLnJlY2VpdmVyIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzaGltR2V0U2VuZGVyc1dpdGhEdG1mOiBmdW5jdGlvbiBzaGltR2V0U2VuZGVyc1dpdGhEdG1mKHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlcyBhZGRUcmFjay9yZW1vdmVUcmFjaywgZGVwZW5kcyBvbiBzaGltQWRkVHJhY2tSZW1vdmVUcmFjay4KICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgISgnZ2V0U2VuZGVycycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkgJiYgJ2NyZWF0ZURUTUZTZW5kZXInIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoaW1TZW5kZXJXaXRoRHRtZiA9IGZ1bmN0aW9uIHNoaW1TZW5kZXJXaXRoRHRtZihwYywgdHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2s6IHRyYWNrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBkdG1mKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZHRtZiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBwYy5jcmVhdGVEVE1GU2VuZGVyKHRyYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2R0bWY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGM6IHBjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXVnbWVudCBhZGRUcmFjayB3aGVuIGdldFNlbmRlcnMgaXMgbm90IGF2YWlsYWJsZS4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZW5kZXJzID0gdGhpcy5fc2VuZGVycyB8fCBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VuZGVycy5zbGljZSgpOyAvLyByZXR1cm4gYSBjb3B5IG9mIHRoZSBpbnRlcm5hbCBzdGF0ZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbiAodHJhY2ssIHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseShwYywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXIgPSBzaGltU2VuZGVyV2l0aER0bWYocGMsIHRyYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3NlbmRlcnMucHVzaChzZW5kZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VuZGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ1JlbW92ZVRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbiAoc2VuZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnUmVtb3ZlVHJhY2suYXBwbHkocGMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHBjLl9zZW5kZXJzLmluZGV4T2Yoc2VuZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fc2VuZGVycy5zcGxpY2UoaWR4LCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnQWRkU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9zZW5kZXJzID0gcGMuX3NlbmRlcnMgfHwgW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnQWRkU3RyZWFtLmFwcGx5KHBjLCBbc3RyZWFtXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fc2VuZGVycy5wdXNoKHNoaW1TZW5kZXJXaXRoRHRtZihwYywgdHJhY2spKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdSZW1vdmVTdHJlYW0gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPSBmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3NlbmRlcnMgPSBwYy5fc2VuZGVycyB8fCBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdSZW1vdmVTdHJlYW0uYXBwbHkocGMsIFtzdHJlYW1dKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VuZGVyID0gcGMuX3NlbmRlcnMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy50cmFjayA9PT0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fc2VuZGVycy5zcGxpY2UocGMuX3NlbmRlcnMuaW5kZXhPZihzZW5kZXIpLCAxKTsgLy8gcmVtb3ZlIHNlbmRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgJ2dldFNlbmRlcnMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgJiYgJ2NyZWF0ZURUTUZTZW5kZXInIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgJiYgd2luZG93LlJUQ1J0cFNlbmRlciAmJiAhKCdkdG1mJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdHZXRTZW5kZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzOwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmRlcnMgPSBvcmlnR2V0U2VuZGVycy5hcHBseShwYywgW10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChzZW5kZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXIuX3BjID0gcGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kZXJzOwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLCAnZHRtZicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kdG1mID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhY2sua2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IHRoaXMuX3BjLmNyZWF0ZURUTUZTZW5kZXIodGhpcy50cmFjayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kdG1mID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZHRtZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0czogZnVuY3Rpb24gc2hpbVNlbmRlclJlY2VpdmVyR2V0U3RhdHMod2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgd2luZG93LlJUQ1J0cFNlbmRlciAmJiB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIHNoaW0gc2VuZGVyIHN0YXRzLgogICAgICAgICAgICAgICAgICAgIGlmICghKCdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnR2V0U2VuZGVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVyczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdHZXRTZW5kZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VuZGVycyA9IG9yaWdHZXRTZW5kZXJzLmFwcGx5KHBjLCBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChzZW5kZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyLl9wYyA9IHBjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kZXJzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdBZGRUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmlnQWRkVHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlci5fcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmRlciA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBOb3RlOiB0aGlzIHdpbGwgaW5jbHVkZSBzdGF0cyBvZiBhbGwgc2VuZGVycyB0aGF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIHNlbmQgYSB0cmFjayB3aXRoIHRoZSBzYW1lIGlkIGFzIHNlbmRlci50cmFjayBhcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBpdCBpcyBub3QgcG9zc2libGUgdG8gaWRlbnRpZnkgdGhlIFJUQ1J0cFNlbmRlci4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJTdGF0cyhyZXN1bHQsIHNlbmRlci50cmFjaywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIHNoaW0gcmVjZWl2ZXIgc3RhdHMuCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoJ2dldFN0YXRzJyBpbiB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0dldFJlY2VpdmVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ0dldFJlY2VpdmVycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjZWl2ZXJzID0gb3JpZ0dldFJlY2VpdmVycy5hcHBseShwYywgW10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZWNlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlci5fcGMgPSBwYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXJzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICd0cmFjaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlY2VpdmVyLl9wYyA9IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNlaXZlciA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyU3RhdHMocmVzdWx0LCByZWNlaXZlci50cmFjaywgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoISgnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlICYmICdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gc2hpbSBSVENQZWVyQ29ubmVjdGlvbi5nZXRTdGF0cyh0cmFjaykuCiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdHZXRTdGF0cyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2sgPSBhcmd1bWVudHNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VuZGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY2VpdmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMudHJhY2sgPT09IHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZW5kZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXIgPSBzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5nZXRSZWNlaXZlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIudHJhY2sgPT09IHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWNlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyID0gcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci50cmFjayA9PT0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgfHwgc2VuZGVyICYmIHJlY2VpdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ1RoZXJlIGFyZSBtb3JlIHRoYW4gb25lIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLicsICdJbnZhbGlkQWNjZXNzRXJyb3InKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kZXIuZ2V0U3RhdHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIuZ2V0U3RhdHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdUaGVyZSBpcyBubyBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay4nLCAnSW52YWxpZEFjY2Vzc0Vycm9yJykpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkocGMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgc2hpbVNvdXJjZU9iamVjdDogZnVuY3Rpb24gc2hpbVNvdXJjZU9iamVjdCh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgVVJMID0gd2luZG93ICYmIHdpbmRvdy5VUkw7CgogICAgICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIHdpbmRvdyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yod2luZG93KSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCAmJiAhKCdzcmNPYmplY3QnIGluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNoaW0gdGhlIHNyY09iamVjdCBwcm9wZXJ0eSwgb25jZSwgd2hlbiBIVE1MTWVkaWFFbGVtZW50IGlzIGZvdW5kLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NyY09iamVjdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSBfc3JjT2JqZWN0IGFzIGEgcHJpdmF0ZSBwcm9wZXJ0eSBmb3IgdGhpcyBzaGltCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3JjID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHJlY3JlYXRlIHRoZSBibG9iIHVybCB3aGVuIGEgdHJhY2sgaXMgYWRkZWQgb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlZC4gRG9pbmcgaXQgbWFudWFsbHkgc2luY2Ugd2Ugd2FudCB0byBhdm9pZCBhIHJlY3Vyc2lvbi4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChzZWxmLnNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdyZW1vdmV0cmFjaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnNyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoc2VsZi5zcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzaGltQWRkVHJhY2tSZW1vdmVUcmFja1dpdGhOYXRpdmU6IGZ1bmN0aW9uIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZSh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICAvLyBzaGltIGFkZFRyYWNrL3JlbW92ZVRyYWNrIHdpdGggbmF0aXZlIHZhcmlhbnRzIGluIG9yZGVyIHRvIG1ha2UKICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaW50ZXJhY3Rpb25zIHdpdGggbGVnYWN5IGdldExvY2FsU3RyZWFtcyBiZWhhdmUgYXMgaW4gb3RoZXIgYnJvd3NlcnMuCiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcHMgYSBtYXBwaW5nIHN0cmVhbS5pZCA9PiBbc3RyZWFtLCBydHBzZW5kZXJzLi4uXQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLm1hcChmdW5jdGlvbiAoc3RyZWFtSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF1bMF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbiAodHJhY2ssIHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgPSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zIHx8IHt9OwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdID0gW3N0cmVhbSwgc2VuZGVyXTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0uaW5kZXhPZihzZW5kZXIpID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdLnB1c2goc2VuZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VuZGVyOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnQWRkU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgPSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zIHx8IHt9OwoKICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxyZWFkeUV4aXN0cyA9IHBjLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMudHJhY2sgPT09IHRyYWNrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxyZWFkeUV4aXN0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsICdJbnZhbGlkQWNjZXNzRXJyb3InKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ1NlbmRlcnMgPSBwYy5nZXRTZW5kZXJzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdBZGRTdHJlYW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NlbmRlcnMgPSBwYy5nZXRTZW5kZXJzKCkuZmlsdGVyKGZ1bmN0aW9uIChuZXdTZW5kZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1NlbmRlcnMuaW5kZXhPZihuZXdTZW5kZXIpID09PSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXSA9IFtzdHJlYW1dLmNvbmNhdChuZXdTZW5kZXJzKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ1JlbW92ZVN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdSZW1vdmVTdHJlYW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ1JlbW92ZVRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjazsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrID0gZnVuY3Rpb24gKHNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbiAoc3RyZWFtSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gcGMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdLmluZGV4T2Yoc2VuZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0uc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwYy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdSZW1vdmVUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrOiBmdW5jdGlvbiBzaGltQWRkVHJhY2tSZW1vdmVUcmFjayh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7CiAgICAgICAgICAgICAgICAgICAgLy8gc2hpbSBhZGRUcmFjayBhbmQgcmVtb3ZlVHJhY2suCiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgJiYgYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA2NSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaGltQWRkVHJhY2tSZW1vdmVUcmFja1dpdGhOYXRpdmUod2luZG93KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIGFsc28gc2hpbSBwYy5nZXRMb2NhbFN0cmVhbXMgd2hlbiBhZGRUcmFjayBpcyBzaGltbWVkCiAgICAgICAgICAgICAgICAgICAgLy8gdG8gcmV0dXJuIHRoZSBvcmlnaW5hbCBzdHJlYW1zLgogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnR2V0TG9jYWxTdHJlYW1zID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVTdHJlYW1zID0gb3JpZ0dldExvY2FsU3RyZWFtcy5hcHBseSh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3JldmVyc2VTdHJlYW1zID0gcGMuX3JldmVyc2VTdHJlYW1zIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlU3RyZWFtcy5tYXAoZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBjLl9yZXZlcnNlU3RyZWFtc1tzdHJlYW0uaWRdOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0FkZFN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICBwYy5fc3RyZWFtcyA9IHBjLl9zdHJlYW1zIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBwYy5fcmV2ZXJzZVN0cmVhbXMgPSBwYy5fcmV2ZXJzZVN0cmVhbXMgfHwge307CgogICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHJlYWR5RXhpc3RzID0gcGMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy50cmFjayA9PT0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVHJhY2sgYWxyZWFkeSBleGlzdHMuJywgJ0ludmFsaWRBY2Nlc3NFcnJvcicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGlkZW50aXR5IG1hcHBpbmcgZm9yIGNvbnNpc3RlbmN5IHdpdGggYWRkVHJhY2suCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVubGVzcyB0aGlzIGlzIGJlaW5nIHVzZWQgd2l0aCBhIHN0cmVhbSBmcm9tIGFkZFRyYWNrLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBjLl9yZXZlcnNlU3RyZWFtc1tzdHJlYW0uaWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U3RyZWFtID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbShzdHJlYW0uZ2V0VHJhY2tzKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3N0cmVhbXNbc3RyZWFtLmlkXSA9IG5ld1N0cmVhbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9yZXZlcnNlU3RyZWFtc1tuZXdTdHJlYW0uaWRdID0gc3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gbmV3U3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdBZGRTdHJlYW0uYXBwbHkocGMsIFtzdHJlYW1dKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ1JlbW92ZVN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICBwYy5fc3RyZWFtcyA9IHBjLl9zdHJlYW1zIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBwYy5fcmV2ZXJzZVN0cmVhbXMgPSBwYy5fcmV2ZXJzZVN0cmVhbXMgfHwge307CgogICAgICAgICAgICAgICAgICAgICAgICBvcmlnUmVtb3ZlU3RyZWFtLmFwcGx5KHBjLCBbcGMuX3N0cmVhbXNbc3RyZWFtLmlkXSB8fCBzdHJlYW1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHBjLl9yZXZlcnNlU3RyZWFtc1twYy5fc3RyZWFtc1tzdHJlYW0uaWRdID8gcGMuX3N0cmVhbXNbc3RyZWFtLmlkXS5pZCA6IHN0cmVhbS5pZF07CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwYy5fc3RyZWFtc1tzdHJlYW0uaWRdOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbiAodHJhY2ssIHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUaGUgUlRDUGVlckNvbm5lY3Rpb25cJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgXCdjbG9zZWRcJy4nLCAnSW52YWxpZFN0YXRlRXJyb3InKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyZWFtcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmVhbXMubGVuZ3RoICE9PSAxIHx8ICFzdHJlYW1zWzBdLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID09PSB0cmFjazsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgbm90IGZ1bGx5IGNvcnJlY3QgYnV0IGFsbCB3ZSBjYW4gbWFuYWdlIHdpdGhvdXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtbYXNzb2NpYXRlZCBNZWRpYVN0cmVhbXNdXSBpbnRlcm5hbCBzbG90LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVGhlIGFkYXB0ZXIuanMgYWRkVHJhY2sgcG9seWZpbGwgb25seSBzdXBwb3J0cyBhIHNpbmdsZSAnICsgJyBzdHJlYW0gd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdHJhY2suJywgJ05vdFN1cHBvcnRlZEVycm9yJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHJlYWR5RXhpc3RzID0gcGMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLnRyYWNrID09PSB0cmFjazsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUcmFjayBhbHJlYWR5IGV4aXN0cy4nLCAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9zdHJlYW1zID0gcGMuX3N0cmVhbXMgfHwge307CiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9yZXZlcnNlU3RyZWFtcyA9IHBjLl9yZXZlcnNlU3RyZWFtcyB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFN0cmVhbSA9IHBjLl9zdHJlYW1zW3N0cmVhbS5pZF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRTdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgdXNpbmcgb2RkIENocm9tZSBiZWhhdmlvdXIsIHVzZSB3aXRoIGNhdXRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9NzgxNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogd2UgcmVseSBvbiB0aGUgaGlnaC1sZXZlbCBhZGRUcmFjay9kdG1mIHNoaW0gdG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgc2VuZGVyIHdpdGggYSBkdG1mIHNlbmRlci4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0cmVhbS5hZGRUcmFjayh0cmFjayk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJpZ2dlciBPTk4gYXN5bmMuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbmVnb3RpYXRpb25uZWVkZWQnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdTdHJlYW0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKFt0cmFja10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3N0cmVhbXNbc3RyZWFtLmlkXSA9IG5ld1N0cmVhbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9yZXZlcnNlU3RyZWFtc1tuZXdTdHJlYW0uaWRdID0gc3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuYWRkU3RyZWFtKG5ld1N0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBjLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy50cmFjayA9PT0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIGludGVybmFsIHN0cmVhbSBpZCB3aXRoIHRoZSBleHRlcm5hbCBvbmUgYW5kCiAgICAgICAgICAgICAgICAgICAgLy8gdmljZSB2ZXJzYS4KICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZChwYywgZGVzY3JpcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNkcCA9IGRlc2NyaXB0aW9uLnNkcDsKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocGMuX3JldmVyc2VTdHJlYW1zIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChpbnRlcm5hbElkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh0ZXJuYWxTdHJlYW0gPSBwYy5fcmV2ZXJzZVN0cmVhbXNbaW50ZXJuYWxJZF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJuYWxTdHJlYW0gPSBwYy5fc3RyZWFtc1tleHRlcm5hbFN0cmVhbS5pZF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZHAgPSBzZHAucmVwbGFjZShuZXcgUmVnRXhwKGludGVybmFsU3RyZWFtLmlkLCAnZycpLCBleHRlcm5hbFN0cmVhbS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2RwOiBzZHAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlcGxhY2VFeHRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2RwID0gZGVzY3JpcHRpb24uc2RwOwogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwYy5fcmV2ZXJzZVN0cmVhbXMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24gKGludGVybmFsSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHRlcm5hbFN0cmVhbSA9IHBjLl9yZXZlcnNlU3RyZWFtc1tpbnRlcm5hbElkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnRlcm5hbFN0cmVhbSA9IHBjLl9zdHJlYW1zW2V4dGVybmFsU3RyZWFtLmlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkcCA9IHNkcC5yZXBsYWNlKG5ldyBSZWdFeHAoZXh0ZXJuYWxTdHJlYW0uaWQsICdnJyksIGludGVybmFsU3RyZWFtLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZHA6IHNkcAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzTGVnYWN5Q2FsbCA9IGFyZ3VtZW50cy5sZW5ndGggJiYgdHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ2Z1bmN0aW9uJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xlZ2FjeUNhbGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHBjLCBbZnVuY3Rpb24gKGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXNjID0gcmVwbGFjZUludGVybmFsU3RyZWFtSWQocGMsIGRlc2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1swXS5hcHBseShudWxsLCBbZGVzY10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3NbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGFyZ3VtZW50c1syXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseShwYywgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uIChkZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZChwYywgZGVzY3JpcHRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnU2V0TG9jYWxEZXNjcmlwdGlvbiA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCB8fCAhYXJndW1lbnRzWzBdLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnU2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseShwYywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMF0gPSByZXBsYWNlRXh0ZXJuYWxTdHJlYW1JZChwYywgYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uLmFwcGx5KHBjLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IG1hbmdsZSBnZXRTdGF0czogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1zdGF0cy8jZG9tLXJ0Y21lZGlhc3RyZWFtc3RhdHMtc3RyZWFtaWRlbnRpZmllcgoKICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0xvY2FsRGVzY3JpcHRpb24gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdsb2NhbERlc2NyaXB0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdsb2NhbERlc2NyaXB0aW9uJywgewogICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSBvcmlnTG9jYWxEZXNjcmlwdGlvbi5nZXQuYXBwbHkodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGFjZUludGVybmFsU3RyZWFtSWQocGMsIGRlc2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrID0gZnVuY3Rpb24gKHNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUaGUgUlRDUGVlckNvbm5lY3Rpb25cJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgXCdjbG9zZWRcJy4nLCAnSW52YWxpZFN0YXRlRXJyb3InKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBjYW4gbm90IHlldCBjaGVjayBmb3Igc2VuZGVyIGluc3RhbmNlb2YgUlRDUnRwU2VuZGVyCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlIHdlIHNoaW0gUlRQU2VuZGVyLiBTbyB3ZSBjaGVjayBpZiBzZW5kZXIuX3BjIGlzIHNldC4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZW5kZXIuX3BjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdBcmd1bWVudCAxIG9mIFJUQ1BlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrICcgKyAnZG9lcyBub3QgaW1wbGVtZW50IGludGVyZmFjZSBSVENSdHBTZW5kZXIuJywgJ1R5cGVFcnJvcicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0xvY2FsID0gc2VuZGVyLl9wYyA9PT0gcGM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNMb2NhbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignU2VuZGVyIHdhcyBub3QgY3JlYXRlZCBieSB0aGlzIGNvbm5lY3Rpb24uJywgJ0ludmFsaWRBY2Nlc3NFcnJvcicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBTZWFyY2ggZm9yIHRoZSBuYXRpdmUgc3RyZWFtIHRoZSBzZW5kZXJzIHRyYWNrIGJlbG9uZ3MgdG8uCiAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9zdHJlYW1zID0gcGMuX3N0cmVhbXMgfHwge307CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJlYW07CiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHBjLl9zdHJlYW1zKS5mb3JFYWNoKGZ1bmN0aW9uIChzdHJlYW1pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhc1RyYWNrID0gcGMuX3N0cmVhbXNbc3RyZWFtaWRdLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRlci50cmFjayA9PT0gdHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNUcmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IHBjLl9zdHJlYW1zW3N0cmVhbWlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLmdldFRyYWNrcygpLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgdGhlIGxhc3QgdHJhY2sgb2YgdGhlIHN0cmVhbSwgcmVtb3ZlIHRoZSBzdHJlYW0uIFRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWtlcyBjYXJlIG9mIGFueSBzaGltbWVkIF9zZW5kZXJzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLnJlbW92ZVN0cmVhbShwYy5fcmV2ZXJzZVN0cmVhbXNbc3RyZWFtLmlkXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbHlpbmcgb24gdGhlIHNhbWUgb2RkIGNocm9tZSBiZWhhdmlvdXIgYXMgYWJvdmUuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnJlbW92ZVRyYWNrKHNlbmRlci50cmFjayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbmVnb3RpYXRpb25uZWVkZWQnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uIHNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7CgogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBSVENQZWVyQ29ubmVjdGlvbiBvYmplY3QuCiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhbnNsYXRlIGljZVRyYW5zcG9ydFBvbGljeSB0byBpY2VUcmFuc3BvcnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9NDg2OQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3YXMgZml4ZWQgaW4gTTU2IGFsb25nIHdpdGggdW5wcmVmaXhpbmcgUlRDUGVlckNvbm5lY3Rpb24uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nKCdQZWVyQ29ubmVjdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjQ29uZmlnLmljZVRyYW5zcG9ydHMgPSBwY0NvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3k7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWlncmF0ZSBmcm9tIG5vbi1zcGVjIFJUQ0ljZVNlcnZlci51cmwgdG8gUlRDSWNlU2VydmVyLnVybHMKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE9yaWdQZWVyQ29ubmVjdGlvbiA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24gKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlU2VydmVycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdJY2VTZXJ2ZXJzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2ZXIgPSBwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpICYmIHNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJsJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ1JUQ0ljZVNlcnZlci51cmwnLCAnUlRDSWNlU2VydmVyLnVybHMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2VydmVyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXIudXJscyA9IHNlcnZlci51cmw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2goc2VydmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbmV3SWNlU2VydmVyczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT3JpZ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSA9IE9yaWdQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuCiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sICdnZW5lcmF0ZUNlcnRpZmljYXRlJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9yaWdQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHNwZWMtc3R5bGUgZ2V0U3RhdHMgaXMgc3VwcG9ydGVkLCByZXR1cm4gdGhvc2Ugd2hlbiBjYWxsZWQgd2l0aAogICAgICAgICAgICAgICAgICAgICAgICAvLyBlaXRoZXIgbm8gYXJndW1lbnRzIG9yIHRoZSBzZWxlY3RvciBhcmd1bWVudCBpcyBudWxsLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ0dldFN0YXRzLmxlbmd0aCA9PT0gMCAmJiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCB8fCB0eXBlb2YgYXJndW1lbnRzWzBdICE9PSAnZnVuY3Rpb24nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXhDaHJvbWVTdGF0c18gPSBmdW5jdGlvbiBmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFuZGFyZFJlcG9ydCA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcG9ydHMgPSByZXNwb25zZS5yZXN1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydHMuZm9yRWFjaChmdW5jdGlvbiAocmVwb3J0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YW5kYXJkU3RhdHMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXBvcnQuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogcmVwb3J0LnRpbWVzdGFtcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlY2FuZGlkYXRlOiAncmVtb3RlLWNhbmRpZGF0ZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVtyZXBvcnQudHlwZV0gfHwgcmVwb3J0LnR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRhcmRTdGF0c1tuYW1lXSA9IHJlcG9ydC5zdGF0KG5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZFJlcG9ydDsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnQKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ha2VNYXBTdGF0cyA9IGZ1bmN0aW9uIG1ha2VNYXBTdGF0cyhzdGF0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXAoT2JqZWN0LmtleXMoc3RhdHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtrZXksIHN0YXRzW2tleV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NDYWxsYmFja1dyYXBwZXJfID0gZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzFdKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW3N1Y2Nlc3NDYWxsYmFja1dyYXBwZXJfLCBhcmd1bWVudHNbMF1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvbWlzZS1zdXBwb3J0CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnR2V0U3RhdHMuYXBwbHkocGMsIFtmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3RdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIC8vIGFkZCBwcm9taXNlIHN1cHBvcnQgLS0gbmF0aXZlbHkgYXZhaWxhYmxlIGluIENocm9tZSA1MQogICAgICAgICAgICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVNZXRob2QuYXBwbHkocGMsIFthcmdzWzBdLCByZXNvbHZlLCByZWplY3RdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1sxXS5hcHBseShudWxsLCBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1syXS5hcHBseShudWxsLCBbZXJyXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gcHJvbWlzZSBzdXBwb3J0IGZvciBjcmVhdGVPZmZlciBhbmQgY3JlYXRlQW5zd2VyLiBBdmFpbGFibGUgKHdpdGhvdXQKICAgICAgICAgICAgICAgICAgICAvLyBidWdzKSBzaW5jZSBNNTI6IGNyYnVnLzYxOTI4OQogICAgICAgICAgICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBfdHlwZW9mKGFyZ3VtZW50c1swXSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZU1ldGhvZC5hcHBseShwYywgW3Jlc29sdmUsIHJlamVjdCwgb3B0c10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBzaGltIGltcGxpY2l0IGNyZWF0aW9uIG9mIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbi9SVENJY2VDYW5kaWRhdGUKICAgICAgICAgICAgICAgICAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAobWV0aG9kID09PSAnYWRkSWNlQ2FuZGlkYXRlJyA/IHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgOiB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZUFkZEljZUNhbmRpZGF0ZSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFyZ3VtZW50c1swXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1sxXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlQWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9LCB7ICIuLi91dGlscy5qcyI6IDE0LCAiLi9nZXR1c2VybWVkaWEiOiA2IH1dLCA2OiBbZnVuY3Rpb24gKHJlcXVpcmUsIG1vZHVsZSwgZXhwb3J0cykgewogICAgICAgICAgICAvKgogICAgICAgICAgICAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogICAgICAgICAgICAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICAgICAgICAgICAgKiAgdHJlZS4KICAgICAgICAgICAgKi8KICAgICAgICAgICAgLyogZXNsaW50LWVudiBub2RlICovCiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzLmpzJyk7CiAgICAgICAgICAgIHZhciBsb2dnaW5nID0gdXRpbHMubG9nOwoKICAgICAgICAgICAgLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLgogICAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh3aW5kb3cpIHsKICAgICAgICAgICAgICAgIHZhciBicm93c2VyRGV0YWlscyA9IHV0aWxzLmRldGVjdEJyb3dzZXIod2luZG93KTsKICAgICAgICAgICAgICAgIHZhciBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjsKCiAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWludHNUb0Nocm9tZV8gPSBmdW5jdGlvbiBjb25zdHJhaW50c1RvQ2hyb21lXyhjKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCh0eXBlb2YgYyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoYykpICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgY2MgPSB7fTsKICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3JlcXVpcmUnIHx8IGtleSA9PT0gJ2FkdmFuY2VkJyB8fCBrZXkgPT09ICdtZWRpYVNvdXJjZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IF90eXBlb2YoY1trZXldKSA9PT0gJ29iamVjdCcgPyBjW2tleV0gOiB7IGlkZWFsOiBjW2tleV0gfTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIubWluID0gci5tYXggPSByLmV4YWN0OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRuYW1lXyA9IGZ1bmN0aW9uIG9sZG5hbWVfKHByZWZpeCwgbmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZWZpeCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lID09PSAnZGV2aWNlSWQnID8gJ3NvdXJjZUlkJyA6IG5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLm9wdGlvbmFsID0gY2Mub3B0aW9uYWwgfHwgW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2MgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygci5pZGVhbCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvY1tvbGRuYW1lXygnbWluJywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLm9wdGlvbmFsLnB1c2gob2MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9jID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Nbb2xkbmFtZV8oJ21heCcsIGtleSldID0gci5pZGVhbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Nbb2xkbmFtZV8oJycsIGtleSldID0gci5pZGVhbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5leGFjdCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByLmV4YWN0ICE9PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubWFuZGF0b3J5ID0gY2MubWFuZGF0b3J5IHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubWFuZGF0b3J5W29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuZXhhY3Q7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ21pbicsICdtYXgnXS5mb3JFYWNoKGZ1bmN0aW9uIChtaXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoclttaXhdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubWFuZGF0b3J5ID0gY2MubWFuZGF0b3J5IHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8obWl4LCBrZXkpXSA9IHJbbWl4XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmIChjLmFkdmFuY2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjYzsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHNoaW1Db25zdHJhaW50c18gPSBmdW5jdGlvbiBzaGltQ29uc3RyYWludHNfKGNvbnN0cmFpbnRzLCBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNjEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY29uc3RyYWludHMgJiYgX3R5cGVvZihjb25zdHJhaW50cy5hdWRpbykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1hcCA9IGZ1bmN0aW9uIHJlbWFwKG9iaiwgYSwgYikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgaW4gb2JqICYmICEoYiBpbiBvYmopKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2JdID0gb2JqW2FdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbYV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICAgICAgICAgICAgICAgICAgICByZW1hcChjb25zdHJhaW50cy5hdWRpbywgJ2F1dG9HYWluQ29udHJvbCcsICdnb29nQXV0b0dhaW5Db250cm9sJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnbm9pc2VTdXBwcmVzc2lvbicsICdnb29nTm9pc2VTdXBwcmVzc2lvbicpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50cy5hdWRpbyA9IGNvbnN0cmFpbnRzVG9DaHJvbWVfKGNvbnN0cmFpbnRzLmF1ZGlvKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnN0cmFpbnRzICYmIF90eXBlb2YoY29uc3RyYWludHMudmlkZW8pID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSAmIHN1cmZhY2UgcHJvLgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmFjZSA9IGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2UgPSBmYWNlICYmICgodHlwZW9mIGZhY2UgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGZhY2UpKSA9PT0gJ29iamVjdCcgPyBmYWNlIDogeyBpZGVhbDogZmFjZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldFN1cHBvcnRlZEZhY2luZ01vZGVMaWVzID0gYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDY2OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2UgJiYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmV4YWN0ID09PSAnZW52aXJvbm1lbnQnIHx8IGZhY2UuaWRlYWwgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAnZW52aXJvbm1lbnQnKSAmJiAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGUgJiYgIWdldFN1cHBvcnRlZEZhY2luZ01vZGVMaWVzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWNlLmV4YWN0ID09PSAnZW52aXJvbm1lbnQnIHx8IGZhY2UuaWRlYWwgPT09ICdlbnZpcm9ubWVudCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gWydiYWNrJywgJ3JlYXInXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuaWRlYWwgPT09ICd1c2VyJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBbJ2Zyb250J107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIG1hdGNoZXMgaW4gbGFiZWwsIG9yIHVzZSBsYXN0IGNhbSBmb3IgYmFjayAodHlwaWNhbCkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24gKGRldmljZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSAndmlkZW9pbnB1dCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGV2ID0gZGV2aWNlcy5maW5kKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlcy5zb21lKGZ1bmN0aW9uIChtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihtYXRjaCkgIT09IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRldiAmJiBkZXZpY2VzLmxlbmd0aCAmJiBtYXRjaGVzLmluZGV4T2YoJ2JhY2snKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldiA9IGRldmljZXNbZGV2aWNlcy5sZW5ndGggLSAxXTsgLy8gbW9yZSBsaWtlbHkgdGhlIGJhY2sgY2FtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRldikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8uZGV2aWNlSWQgPSBmYWNlLmV4YWN0ID8geyBleGFjdDogZGV2LmRldmljZUlkIH0gOiB7IGlkZWFsOiBkZXYuZGV2aWNlSWQgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50cy52aWRlbyA9IGNvbnN0cmFpbnRzVG9DaHJvbWVfKGNvbnN0cmFpbnRzLnZpZGVvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMudmlkZW8pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jKGNvbnN0cmFpbnRzKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbiBzaGltRXJyb3JfKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZXJtaXNzaW9uRGVuaWVkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGVybWlzc2lvbkRpc21pc3NlZEVycm9yOiAnTm90QWxsb3dlZEVycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRTdGF0ZUVycm9yOiAnTm90QWxsb3dlZEVycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERldmljZXNOb3RGb3VuZEVycm9yOiAnTm90Rm91bmRFcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25zdHJhaW50Tm90U2F0aXNmaWVkRXJyb3I6ICdPdmVyY29uc3RyYWluZWRFcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcmFja1N0YXJ0RXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lZGlhRGV2aWNlRmFpbGVkRHVlVG9TaHV0ZG93bjogJ05vdEFsbG93ZWRFcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZWRpYURldmljZUtpbGxTd2l0Y2hPbjogJ05vdEFsbG93ZWRFcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYWJDYXB0dXJlRXJyb3I6ICdBYm9ydEVycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjcmVlbkNhcHR1cmVFcnJvcjogJ0Fib3J0RXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgRGV2aWNlQ2FwdHVyZUVycm9yOiAnQWJvcnRFcnJvcicKICAgICAgICAgICAgICAgICAgICAgICAgfVtlLm5hbWVdIHx8IGUubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50OiBlLmNvbnN0cmFpbnROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gdG9TdHJpbmcoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lICsgKHRoaXMubWVzc2FnZSAmJiAnOiAnKSArIHRoaXMubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24gZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgc2hpbUNvbnN0cmFpbnRzXyhjb25zdHJhaW50cywgZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYShjLCBvblN1Y2Nlc3MsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25FcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZ2V0VXNlck1lZGlhXzsKCiAgICAgICAgICAgICAgICAvLyBSZXR1cm5zIHRoZSByZXN1bHQgb2YgZ2V0VXNlck1lZGlhIGFzIGEgUHJvbWlzZS4KICAgICAgICAgICAgICAgIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uIGdldFVzZXJNZWRpYVByb21pc2VfKGNvbnN0cmFpbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYShjb25zdHJhaW50cywgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWFQcm9taXNlXywKICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYXRlRGV2aWNlczogZnVuY3Rpb24gZW51bWVyYXRlRGV2aWNlcygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBraW5kcyA9IHsgYXVkaW86ICdhdWRpb2lucHV0JywgdmlkZW86ICd2aWRlb2lucHV0JyB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjay5nZXRTb3VyY2VzKGZ1bmN0aW9uIChkZXZpY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGV2aWNlcy5tYXAoZnVuY3Rpb24gKGRldmljZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbGFiZWw6IGRldmljZS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBraW5kc1tkZXZpY2Uua2luZF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlSWQ6IGRldmljZS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiAnJyB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U3VwcG9ydGVkQ29uc3RyYWludHM6IGZ1bmN0aW9uIGdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogdHJ1ZSwgZWNob0NhbmNlbGxhdGlvbjogdHJ1ZSwgZmFjaW5nTW9kZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVJhdGU6IHRydWUsIGhlaWdodDogdHJ1ZSwgd2lkdGg6IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC4KICAgICAgICAgICAgICAgIC8vIFRPRE8oS2FwdGVuSmFuc3NvbikgcmVtb3ZlIG9uY2UgaW1wbGVtZW50ZWQgaW4gQ2hyb21lIHN0YWJsZS4KICAgICAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHsKICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uIChjb25zdHJhaW50cykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VXNlck1lZGlhUHJvbWlzZV8oY29uc3RyYWludHMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIENocm9tZSA0NSBoYXMgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyBhbmQgYSBnZXRVc2VyTWVkaWEKICAgICAgICAgICAgICAgICAgICAvLyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSwgaXQgZG9lcyBub3QgYWNjZXB0IHNwZWMtc3R5bGUKICAgICAgICAgICAgICAgICAgICAvLyBjb25zdHJhaW50cy4KICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbiAoY3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNoaW1Db25zdHJhaW50c18oY3MsIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5hdWRpbyAmJiAhc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoIHx8IGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJycsICdOb3RGb3VuZEVycm9yJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIER1bW15IGRldmljZWNoYW5nZSBldmVudCBtZXRob2RzLgogICAgICAgICAgICAgICAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXIgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nKCdEdW1teSBtZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciBjYWxsZWQuJyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZygnRHVtbXkgbWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIgY2FsbGVkLicpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgfSwgeyAiLi4vdXRpbHMuanMiOiAxNCB9XSwgNzogW2Z1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgICAgICAgLyoKICAgICAgICAgICAgKiAgQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICAgICAgICAgICAgKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAgICAgICAgICAgICogIHRyZWUuCiAgICAgICAgICAgICovCiAgICAgICAgICAgIC8qIGVzbGludC1lbnYgbm9kZSAqLwogICAgICAgICAgICAndXNlIHN0cmljdCc7CgogICAgICAgICAgICB2YXIgU0RQVXRpbHMgPSByZXF1aXJlKCdzZHAnKTsKICAgICAgICAgICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpOwoKICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICAgICAgICAgICAgICBzaGltUlRDSWNlQ2FuZGlkYXRlOiBmdW5jdGlvbiBzaGltUlRDSWNlQ2FuZGlkYXRlKHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kYXRpb24gaXMgYXJiaXRyYXJpbHkgY2hvc2VuIGFzIGFuIGluZGljYXRvciBmb3IgZnVsbCBzdXBwb3J0IGZvcgogICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJydGMtcGMvI3J0Y2ljZWNhbmRpZGF0ZS1pbnRlcmZhY2UKICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5SVENJY2VDYW5kaWRhdGUgfHwgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSAmJiAnZm91bmRhdGlvbicgaW4gd2luZG93LlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIE5hdGl2ZVJUQ0ljZUNhbmRpZGF0ZSA9IHdpbmRvdy5SVENJY2VDYW5kaWRhdGU7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uIChhcmdzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgYT0gd2hpY2ggc2hvdWxkbid0IGJlIHBhcnQgb2YgdGhlIGNhbmRpZGF0ZSBzdHJpbmcuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIGFyZ3MgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGFyZ3MpKSA9PT0gJ29iamVjdCcgJiYgYXJncy5jYW5kaWRhdGUgJiYgYXJncy5jYW5kaWRhdGUuaW5kZXhPZignYT0nKSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJncykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5jYW5kaWRhdGUgPSBhcmdzLmNhbmRpZGF0ZS5zdWJzdHIoMik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmNhbmRpZGF0ZSAmJiBhcmdzLmNhbmRpZGF0ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF1Z21lbnQgdGhlIG5hdGl2ZSBjYW5kaWRhdGUgd2l0aCB0aGUgcGFyc2VkIGZpZWxkcy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVDYW5kaWRhdGUgPSBuZXcgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlKGFyZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZENhbmRpZGF0ZSA9IFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGFyZ3MuY2FuZGlkYXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdWdtZW50ZWRDYW5kaWRhdGUgPSBPYmplY3QuYXNzaWduKG5hdGl2ZUNhbmRpZGF0ZSwgcGFyc2VkQ2FuZGlkYXRlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBzZXJpYWxpemVyIHRoYXQgZG9lcyBub3Qgc2VyaWFsaXplIHRoZSBleHRyYSBhdHRyaWJ1dGVzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVnbWVudGVkQ2FuZGlkYXRlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGU6IGF1Z21lbnRlZENhbmRpZGF0ZS5jYW5kaWRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNkcE1pZDogYXVnbWVudGVkQ2FuZGlkYXRlLnNkcE1pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2RwTUxpbmVJbmRleDogYXVnbWVudGVkQ2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGF1Z21lbnRlZENhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXVnbWVudGVkQ2FuZGlkYXRlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlKGFyZ3MpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUgPSBOYXRpdmVSVENJY2VDYW5kaWRhdGUucHJvdG90eXBlOwoKICAgICAgICAgICAgICAgICAgICAvLyBIb29rIHVwIHRoZSBhdWdtZW50ZWQgY2FuZGlkYXRlIGluIG9uaWNlY2FuZGlkYXRlIGFuZAogICAgICAgICAgICAgICAgICAgIC8vIGFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZScsIC4uLikKICAgICAgICAgICAgICAgICAgICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICdpY2VjYW5kaWRhdGUnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5jYW5kaWRhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAnY2FuZGlkYXRlJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6ICdmYWxzZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAvLyBzaGltQ3JlYXRlT2JqZWN0VVJMIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBzaGltU291cmNlT2JqZWN0IHRvIGF2b2lkIGxvb3AuCgogICAgICAgICAgICAgICAgc2hpbUNyZWF0ZU9iamVjdFVSTDogZnVuY3Rpb24gc2hpbUNyZWF0ZU9iamVjdFVSTCh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgVVJMID0gd2luZG93ICYmIHdpbmRvdy5VUkw7CgogICAgICAgICAgICAgICAgICAgIGlmICghKCh0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZih3aW5kb3cpKSA9PT0gJ29iamVjdCcgJiYgd2luZG93LkhUTUxNZWRpYUVsZW1lbnQgJiYgJ3NyY09iamVjdCcgaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlICYmIFVSTC5jcmVhdGVPYmplY3RVUkwgJiYgVVJMLnJldm9rZU9iamVjdFVSTCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBzaGltIENyZWF0ZU9iamVjdFVSTCB1c2luZyBzcmNPYmplY3QgaWYgc3JjT2JqZWN0IGV4aXN0cy4KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVDcmVhdGVPYmplY3RVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMLmJpbmQoVVJMKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbmF0aXZlUmV2b2tlT2JqZWN0VVJMID0gVVJMLnJldm9rZU9iamVjdFVSTC5iaW5kKFVSTCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbXMgPSBuZXcgTWFwKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0lkID0gMDsKCiAgICAgICAgICAgICAgICAgICAgVVJMLmNyZWF0ZU9iamVjdFVSTCA9IGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdnZXRUcmFja3MnIGluIHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9ICdwb2x5YmxvYjonICsgKytuZXdJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbXMuc2V0KHVybCwgc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ1VSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKScsICdlbGVtLnNyY09iamVjdCA9IHN0cmVhbScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlQ3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVSZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtcy5kZWxldGUodXJsKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgZHNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmMnKTsKICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjJywgewogICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkc2MuZ2V0LmFwcGx5KHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh1cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3JjT2JqZWN0ID0gc3RyZWFtcy5nZXQodXJsKSB8fCBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRzYy5zZXQuYXBwbHkodGhpcywgW3VybF0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVTZXRBdHRyaWJ1dGUgPSB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUuc2V0QXR0cmlidXRlOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmICgnJyArIGFyZ3VtZW50c1swXSkudG9Mb3dlckNhc2UoKSA9PT0gJ3NyYycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3JjT2JqZWN0ID0gc3RyZWFtcy5nZXQoYXJndW1lbnRzWzFdKSB8fCBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVTZXRBdHRyaWJ1dGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzaGltTWF4TWVzc2FnZVNpemU6IGZ1bmN0aW9uIHNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LlJUQ1NjdHBUcmFuc3BvcnQgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBicm93c2VyRGV0YWlscyA9IHV0aWxzLmRldGVjdEJyb3dzZXIod2luZG93KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoJ3NjdHAnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnc2N0cCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fc2N0cCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogdGhpcy5fc2N0cDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgc2N0cEluRGVzY3JpcHRpb24gPSBmdW5jdGlvbiBzY3RwSW5EZXNjcmlwdGlvbihkZXNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWN0aW9ucy5zb21lKGZ1bmN0aW9uIChtZWRpYVNlY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtTGluZSA9IFNEUFV0aWxzLnBhcnNlTUxpbmUobWVkaWFTZWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtTGluZSAmJiBtTGluZS5raW5kID09PSAnYXBwbGljYXRpb24nICYmIG1MaW5lLnByb3RvY29sLmluZGV4T2YoJ1NDVFAnKSAhPT0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBnZXRSZW1vdGVGaXJlZm94VmVyc2lvbiA9IGZ1bmN0aW9uIGdldFJlbW90ZUZpcmVmb3hWZXJzaW9uKGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IElzIHRoZXJlIGEgYmV0dGVyIHNvbHV0aW9uIGZvciBkZXRlY3RpbmcgRmlyZWZveD8KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gZGVzY3JpcHRpb24uc2RwLm1hdGNoKC9tb3ppbGxhLi4uVEhJU19JU19TRFBBUlRBLShcZCspLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCA9PT0gbnVsbCB8fCBtYXRjaC5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZUludChtYXRjaFsxXSwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBUZXN0IGZvciBOYU4gKHllcywgdGhpcyBpcyB1Z2x5KQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmVyc2lvbiAhPT0gdmVyc2lvbiA/IC0xIDogdmVyc2lvbjsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0Q2FuU2VuZE1heE1lc3NhZ2VTaXplID0gZnVuY3Rpb24gZ2V0Q2FuU2VuZE1heE1lc3NhZ2VTaXplKHJlbW90ZUlzRmlyZWZveCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBFdmVyeSBpbXBsZW1lbnRhdGlvbiB3ZSBrbm93IGNhbiBzZW5kIGF0IGxlYXN0IDY0IEtpQi4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogQWx0aG91Z2ggQ2hyb21lIGlzIHRlY2huaWNhbGx5IGFibGUgdG8gc2VuZCB1cCB0byAyNTYgS2lCLCB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgZGF0YSBkb2VzIG5vdCByZWFjaCB0aGUgb3RoZXIgcGVlciByZWxpYWJseS4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9ODQxOQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gNjU1MzY7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3RlSXNGaXJlZm94ID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGRiA8IDU3IHdpbGwgc2VuZCBpbiAxNiBLaUIgY2h1bmtzIHVzaW5nIHRoZSBkZXByZWNhdGVkIFBQSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJhZ21lbnRhdGlvbi4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gMTYzODQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgb3RoZXIgRkYgKGFuZCBSQVdSVEMpIGNhbiByZWFzc2VtYmxlIFBQSUQtZnJhZ21lbnRlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZXNzYWdlcy4gVGh1cywgc3VwcG9ydGluZyB+MiBHaUIgd2hlbiBzZW5kaW5nLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5TZW5kTWF4TWVzc2FnZVNpemUgPSAyMTQ3NDgzNjM3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDYwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3VycmVudGx5LCBhbGwgRkYgPj0gNTcgd2lsbCByZXNldCB0aGUgcmVtb3RlIG1heGltdW0gbWVzc2FnZSBzaXplCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gdGhlIGRlZmF1bHQgdmFsdWUgd2hlbiBhIGRhdGEgY2hhbm5lbCBpcyBjcmVhdGVkIGF0IGEgbGF0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFnZS4gOigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MjY4MzEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5TZW5kTWF4TWVzc2FnZVNpemUgPSBicm93c2VyRGV0YWlscy52ZXJzaW9uID09PSA1NyA/IDY1NTM1IDogNjU1MzY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZGID49IDYwIHN1cHBvcnRzIHNlbmRpbmcgfjIgR2lCCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FuU2VuZE1heE1lc3NhZ2VTaXplOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBnZXRNYXhNZXNzYWdlU2l6ZSA9IGZ1bmN0aW9uIGdldE1heE1lc3NhZ2VTaXplKGRlc2NyaXB0aW9uLCByZW1vdGVJc0ZpcmVmb3gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogNjU1MzYgYnl0ZXMgaXMgdGhlIGRlZmF1bHQgdmFsdWUgZnJvbSB0aGUgU0RQIHNwZWMuIEFsc28sCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGV2ZXJ5IGltcGxlbWVudGF0aW9uIHdlIGtub3cgc3VwcG9ydHMgcmVjZWl2aW5nIDY1NTM2IGJ5dGVzLgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4TWVzc2FnZVNpemUgPSA2NTUzNjsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZGIDU3IGhhcyBhIHNsaWdodGx5IGluY29ycmVjdCBkZWZhdWx0IHJlbW90ZSBtYXggbWVzc2FnZSBzaXplLCBzbwogICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGFkanVzdCBpdCBoZXJlIHRvIGF2b2lkIGEgZmFpbHVyZSB3aGVuIHNlbmRpbmcuCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNTY5NwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPT09IDU3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IDY1NTM1OwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBTRFBVdGlscy5tYXRjaFByZWZpeChkZXNjcmlwdGlvbi5zZHAsICdhPW1heC1tZXNzYWdlLXNpemU6Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IHBhcnNlSW50KG1hdGNoWzBdLnN1YnN0cigxOSksIDEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCcgJiYgcmVtb3RlSXNGaXJlZm94ICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIGlzIG5vdCBwcmVzZW50IGluIHRoZSByZW1vdGUgU0RQIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYm90aCBsb2NhbCBhbmQgcmVtb3RlIGFyZSBGaXJlZm94LCB0aGUgcmVtb3RlIHBlZXIgY2FuIHJlY2VpdmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH4yIEdpQi4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF4TWVzc2FnZVNpemU7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbiA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3NjdHAgPSBudWxsOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjdHBJbkRlc2NyaXB0aW9uKGFyZ3VtZW50c1swXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSByZW1vdGUgaXMgRkYuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNGaXJlZm94ID0gZ2V0UmVtb3RlRmlyZWZveFZlcnNpb24oYXJndW1lbnRzWzBdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIHRoZSBsb2NhbCBwZWVyIGlzIGNhcGFibGUgb2Ygc2VuZGluZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhblNlbmRNTVMgPSBnZXRDYW5TZW5kTWF4TWVzc2FnZVNpemUoaXNGaXJlZm94KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIG9mIHRoZSByZW1vdGUgcGVlci4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVNTVMgPSBnZXRNYXhNZXNzYWdlU2l6ZShhcmd1bWVudHNbMF0sIGlzRmlyZWZveCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGZpbmFsIG1heGltdW0gbWVzc2FnZSBzaXplCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4TWVzc2FnZVNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuU2VuZE1NUyA9PT0gMCAmJiByZW1vdGVNTVMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FuU2VuZE1NUyA9PT0gMCB8fCByZW1vdGVNTVMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IE1hdGgubWF4KGNhblNlbmRNTVMsIHJlbW90ZU1NUyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heE1lc3NhZ2VTaXplID0gTWF0aC5taW4oY2FuU2VuZE1NUywgcmVtb3RlTU1TKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBkdW1teSBSVENTY3RwVHJhbnNwb3J0IG9iamVjdCBhbmQgdGhlICdtYXhNZXNzYWdlU2l6ZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzY3RwID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2N0cCwgJ21heE1lc3NhZ2VTaXplJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF4TWVzc2FnZVNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5fc2N0cCA9IHNjdHA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkocGMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgc2hpbVNlbmRUaHJvd1R5cGVFcnJvcjogZnVuY3Rpb24gc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgJ2NyZWF0ZURhdGFDaGFubmVsJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiBBbHRob3VnaCBGaXJlZm94ID49IDU3IGhhcyBhIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiwgdGhlIG1heGltdW0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBtZXNzYWdlIHNpemUgY2FuIGJlIHJlc2V0IGZvciBhbGwgZGF0YSBjaGFubmVscyBhdCBhIGxhdGVyIHN0YWdlLgogICAgICAgICAgICAgICAgICAgIC8vICAgICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNjgzMQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB3cmFwRGNTZW5kKGRjLCBwYykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0RhdGFDaGFubmVsU2VuZCA9IGRjLnNlbmQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGRjLnNlbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGFyZ3VtZW50c1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBkYXRhLmxlbmd0aCB8fCBkYXRhLnNpemUgfHwgZGF0YS5ieXRlTGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRjLnJlYWR5U3RhdGUgPT09ICdvcGVuJyAmJiBwYy5zY3RwICYmIGxlbmd0aCA+IHBjLnNjdHAubWF4TWVzc2FnZVNpemUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNZXNzYWdlIHRvbyBsYXJnZSAoY2FuIHNlbmQgYSBtYXhpbXVtIG9mICcgKyBwYy5zY3RwLm1heE1lc3NhZ2VTaXplICsgJyBieXRlcyknKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnRGF0YUNoYW5uZWxTZW5kLmFwcGx5KGRjLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0NyZWF0ZURhdGFDaGFubmVsID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbDsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUNoYW5uZWwgPSBvcmlnQ3JlYXRlRGF0YUNoYW5uZWwuYXBwbHkocGMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBEY1NlbmQoZGF0YUNoYW5uZWwsIHBjKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFDaGFubmVsOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAnZGF0YWNoYW5uZWwnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICB3cmFwRGNTZW5kKGUuY2hhbm5lbCwgZS50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9LCB7ICIuL3V0aWxzIjogMTQsICJzZHAiOiAyIH1dLCA4OiBbZnVuY3Rpb24gKHJlcXVpcmUsIG1vZHVsZSwgZXhwb3J0cykgewogICAgICAgICAgICAvKgogICAgICAgICAgICAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogICAgICAgICAgICAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICAgICAgICAgICAgKiAgdHJlZS4KICAgICAgICAgICAgKi8KICAgICAgICAgICAgLyogZXNsaW50LWVudiBub2RlICovCiAgICAgICAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgICAgICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7CiAgICAgICAgICAgIHZhciBmaWx0ZXJJY2VTZXJ2ZXJzID0gcmVxdWlyZSgnLi9maWx0ZXJpY2VzZXJ2ZXJzJyk7CiAgICAgICAgICAgIHZhciBzaGltUlRDUGVlckNvbm5lY3Rpb24gPSByZXF1aXJlKCdydGNwZWVyY29ubmVjdGlvbi1zaGltJyk7CgogICAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICAgICAgICAgIHNoaW1HZXRVc2VyTWVkaWE6IHJlcXVpcmUoJy4vZ2V0dXNlcm1lZGlhJyksCiAgICAgICAgICAgICAgICBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uIHNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7CgogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuUlRDSWNlR2F0aGVyZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24gKGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24gKGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBhZGRzIGFuIGFkZGl0aW9uYWwgZXZlbnQgbGlzdGVuZXIgdG8gTWVkaWFTdHJhY2tUcmFjayB0aGF0IHNpZ25hbHMKICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBhIHRyYWNrcyBlbmFibGVkIHByb3BlcnR5IHdhcyBjaGFuZ2VkLiBXb3JrYXJvdW5kIGZvciBhIGJ1ZyBpbgogICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGRTdHJlYW0sIHNlZSBiZWxvdy4gTm8gbG9uZ2VyIHJlcXVpcmVkIGluIDE1MDI1KwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDE1MDI1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ01TVEVuYWJsZWQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSwgJ2VuYWJsZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdNU1RFbmFibGVkLnNldC5jYWxsKHRoaXMsIHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2ID0gbmV3IEV2ZW50KCdlbmFibGVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LmVuYWJsZWQgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gT1JUQyBkZWZpbmVzIHRoZSBEVE1GIHNlbmRlciBhIGJpdCBkaWZmZXJlbnQuCiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3czYy9vcnRjL2lzc3Vlcy83MTQKICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LlJUQ1J0cFNlbmRlciAmJiAhKCdkdG1mJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLCAnZHRtZicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kdG1mID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhY2sua2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG5ldyB3aW5kb3cuUlRDRHRtZlNlbmRlcih0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kdG1mOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gRWRnZSBjdXJyZW50bHkgb25seSBpbXBsZW1lbnRzIHRoZSBSVENEdG1mU2VuZGVyLCBub3QgdGhlCiAgICAgICAgICAgICAgICAgICAgLy8gUlRDRFRNRlNlbmRlciBhbGlhcy4gU2VlIGh0dHA6Ly9kcmFmdC5vcnRjLm9yZy8jcnRjZHRtZnNlbmRlcjIqCiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENEdG1mU2VuZGVyICYmICF3aW5kb3cuUlRDRFRNRlNlbmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDRFRNRlNlbmRlciA9IHdpbmRvdy5SVENEdG1mU2VuZGVyOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIFJUQ1BlZXJDb25uZWN0aW9uU2hpbSA9IHNoaW1SVENQZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24pOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5pY2VTZXJ2ZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuaWNlU2VydmVycyA9IGZpbHRlckljZVNlcnZlcnMoY29uZmlnLmljZVNlcnZlcnMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUlRDUGVlckNvbm5lY3Rpb25TaGltKGNvbmZpZyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gUlRDUGVlckNvbm5lY3Rpb25TaGltLnByb3RvdHlwZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaGltUmVwbGFjZVRyYWNrOiBmdW5jdGlvbiBzaGltUmVwbGFjZVRyYWNrKHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIC8vIE9SVEMgaGFzIHJlcGxhY2VUcmFjayAtLSBodHRwczovL2dpdGh1Yi5jb20vdzNjL29ydGMvaXNzdWVzLzYxNAogICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuUlRDUnRwU2VuZGVyICYmICEoJ3JlcGxhY2VUcmFjaycgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLnJlcGxhY2VUcmFjayA9IHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLnNldFRyYWNrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9LCB7ICIuLi91dGlscyI6IDE0LCAiLi9maWx0ZXJpY2VzZXJ2ZXJzIjogOSwgIi4vZ2V0dXNlcm1lZGlhIjogMTAsICJydGNwZWVyY29ubmVjdGlvbi1zaGltIjogMSB9XSwgOTogW2Z1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgICAgICAgLyoKICAgICAgICAgICAgKiAgQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICAgICAgICAgICAgKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAgICAgICAgICAgICogIHRyZWUuCiAgICAgICAgICAgICovCiAgICAgICAgICAgIC8qIGVzbGludC1lbnYgbm9kZSAqLwogICAgICAgICAgICAndXNlIHN0cmljdCc7CgogICAgICAgICAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpOwogICAgICAgICAgICAvLyBFZGdlIGRvZXMgbm90IGxpa2UKICAgICAgICAgICAgLy8gMSkgc3R1bjogZmlsdGVyZWQgYWZ0ZXIgMTQzOTMgdW5sZXNzID90cmFuc3BvcnQ9dWRwIGlzIHByZXNlbnQKICAgICAgICAgICAgLy8gMikgdHVybjogdGhhdCBkb2VzIG5vdCBoYXZlIGFsbCBvZiB0dXJuOmhvc3Q6cG9ydD90cmFuc3BvcnQ9dWRwCiAgICAgICAgICAgIC8vIDMpIHR1cm46IHdpdGggaXB2NiBhZGRyZXNzZXMKICAgICAgICAgICAgLy8gNCkgdHVybjogb2NjdXJyaW5nIG11bGlwbGUgdGltZXMKICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaWNlU2VydmVycywgZWRnZVZlcnNpb24pIHsKICAgICAgICAgICAgICAgIHZhciBoYXNUdXJuID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpY2VTZXJ2ZXJzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpY2VTZXJ2ZXJzKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gaWNlU2VydmVycy5maWx0ZXIoZnVuY3Rpb24gKHNlcnZlcikgewogICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXIgJiYgKHNlcnZlci51cmxzIHx8IHNlcnZlci51cmwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmxzID0gc2VydmVyLnVybHMgfHwgc2VydmVyLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcnZlci51cmwgJiYgIXNlcnZlci51cmxzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdSVENJY2VTZXJ2ZXIudXJsJywgJ1JUQ0ljZVNlcnZlci51cmxzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIHVybHMgPT09ICdzdHJpbmcnOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybHMgPSBbdXJsc107CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdXJscyA9IHVybHMuZmlsdGVyKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWxpZFR1cm4gPSB1cmwuaW5kZXhPZigndHVybjonKSA9PT0gMCAmJiB1cmwuaW5kZXhPZigndHJhbnNwb3J0PXVkcCcpICE9PSAtMSAmJiB1cmwuaW5kZXhPZigndHVybjpbJykgPT09IC0xICYmICFoYXNUdXJuOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZFR1cm4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNUdXJuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmwuaW5kZXhPZignc3R1bjonKSA9PT0gMCAmJiBlZGdlVmVyc2lvbiA+PSAxNDM5MyAmJiB1cmwuaW5kZXhPZignP3RyYW5zcG9ydD11ZHAnKSA9PT0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNlcnZlci51cmw7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlci51cmxzID0gaXNTdHJpbmcgPyB1cmxzWzBdIDogdXJsczsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdXJscy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSwgeyAiLi4vdXRpbHMiOiAxNCB9XSwgMTA6IFtmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAgICAgICAgICAgKgogICAgICAgICAgICAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAgICAgICAgICAgICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogICAgICAgICAgICAqICB0cmVlLgogICAgICAgICAgICAqLwogICAgICAgICAgICAvKiBlc2xpbnQtZW52IG5vZGUgKi8KICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgICAgLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLgoKICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAod2luZG93KSB7CiAgICAgICAgICAgICAgICB2YXIgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7CgogICAgICAgICAgICAgICAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbiBzaGltRXJyb3JfKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB7IFBlcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicgfVtlLm5hbWVdIHx8IGUubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50OiBlLmNvbnN0cmFpbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyBnZXRVc2VyTWVkaWEgZXJyb3Igc2hpbS4KICAgICAgICAgICAgICAgIHZhciBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3Qoc2hpbUVycm9yXyhlKSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwogICAgICAgIH0sIHt9XSwgMTE6IFtmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAgICAgICAgICAgKgogICAgICAgICAgICAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAgICAgICAgICAgICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogICAgICAgICAgICAqICB0cmVlLgogICAgICAgICAgICAqLwogICAgICAgICAgICAvKiBlc2xpbnQtZW52IG5vZGUgKi8KICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTsKCiAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICAgICAgICAgc2hpbUdldFVzZXJNZWRpYTogcmVxdWlyZSgnLi9nZXR1c2VybWVkaWEnKSwKICAgICAgICAgICAgICAgIHNoaW1PblRyYWNrOiBmdW5jdGlvbiBzaGltT25UcmFjayh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgISgnb250cmFjaycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbnRyYWNrJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29udHJhY2s7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vbnRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRyYWNrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSB7IHRyYWNrOiB0cmFjayB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7IHJlY2VpdmVyOiBldmVudC5yZWNlaXZlciB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDVHJhY2tFdmVudCAmJiAncmVjZWl2ZXInIGluIHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSAmJiAhKCd0cmFuc2NlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSkgewogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLCAndHJhbnNjZWl2ZXInLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyByZWNlaXZlcjogdGhpcy5yZWNlaXZlciB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNoaW1Tb3VyY2VPYmplY3Q6IGZ1bmN0aW9uIHNoaW1Tb3VyY2VPYmplY3Qod2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBoYXMgc3VwcG9ydGVkIG1velNyY09iamVjdCBzaW5jZSBGRjIyLCB1bnByZWZpeGVkIGluIDQyLgogICAgICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIHdpbmRvdyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yod2luZG93KSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCAmJiAhKCdzcmNPYmplY3QnIGluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNoaW0gdGhlIHNyY09iamVjdCBwcm9wZXJ0eSwgb25jZSwgd2hlbiBIVE1MTWVkaWFFbGVtZW50IGlzIGZvdW5kLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubW96U3JjT2JqZWN0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW96U3JjT2JqZWN0ID0gc3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uIHNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7CgogICAgICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIHdpbmRvdyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yod2luZG93KSkgIT09ICdvYmplY3QnIHx8ICEod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uIHx8IHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBwcm9iYWJseSBtZWRpYS5wZWVyY29ubmVjdGlvbi5lbmFibGVkPWZhbHNlIGluIGFib3V0OmNvbmZpZwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBUaGUgUlRDUGVlckNvbm5lY3Rpb24gb2JqZWN0LgogICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCAzOCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC51cmxzIGlzIG5vdCBzdXBwb3J0ZWQgaW4gRkYgPCAzOC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgUlRDSWNlU2VydmVycyB3aXRoIGEgc2luZ2xlIHVybC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlU2VydmVycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SWNlU2VydmVycyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXJ2ZXIgPSBwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZXJ2ZXIudXJscy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2VydmVyID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIudXJsc1tqXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VydmVyLnVybHNbal0uaW5kZXhPZigndHVybicpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTZXJ2ZXIudXNlcm5hbWUgPSBzZXJ2ZXIudXNlcm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTZXJ2ZXIuY3JlZGVudGlhbCA9IHNlcnZlci5jcmVkZW50aWFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChuZXdTZXJ2ZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjQ29uZmlnLmljZVNlcnZlcnMgPSBuZXdJY2VTZXJ2ZXJzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSA9IHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyB3cmFwIHN0YXRpYyBtZXRob2RzLiBDdXJyZW50bHkganVzdCBnZW5lcmF0ZUNlcnRpZmljYXRlLgogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sICdnZW5lcmF0ZUNlcnRpZmljYXRlJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24gPSB3aW5kb3cubW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gd2luZG93Lm1velJUQ0ljZUNhbmRpZGF0ZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIHNoaW0gYXdheSBuZWVkIGZvciBvYnNvbGV0ZSBSVENJY2VDYW5kaWRhdGUvUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLgogICAgICAgICAgICAgICAgICAgIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3IChtZXRob2QgPT09ICdhZGRJY2VDYW5kaWRhdGUnID8gd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA6IHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIC8vIHN1cHBvcnQgZm9yIGFkZEljZUNhbmRpZGF0ZShudWxsIG9yIHVuZGVmaW5lZCkKICAgICAgICAgICAgICAgICAgICB2YXIgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJndW1lbnRzWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzFdLmFwcGx5KG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBzaGltIGdldFN0YXRzIHdpdGggbWFwbGlrZSBzdXBwb3J0CiAgICAgICAgICAgICAgICAgICAgdmFyIG1ha2VNYXBTdGF0cyA9IGZ1bmN0aW9uIG1ha2VNYXBTdGF0cyhzdGF0cykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwID0gbmV3IE1hcCgpOwogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdGF0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAuc2V0KGtleSwgc3RhdHNba2V5XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBba2V5XSA9IHN0YXRzW2tleV07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBtb2Rlcm5TdGF0c1R5cGVzID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbmJvdW5kcnRwOiAnaW5ib3VuZC1ydHAnLAogICAgICAgICAgICAgICAgICAgICAgICBvdXRib3VuZHJ0cDogJ291dGJvdW5kLXJ0cCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXBhaXI6ICdjYW5kaWRhdGUtcGFpcicsCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJywKICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlY2FuZGlkYXRlOiAncmVtb3RlLWNhbmRpZGF0ZScKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgbmF0aXZlR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIG9uU3VjYywgb25FcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUdldFN0YXRzLmFwcGx5KHRoaXMsIFtzZWxlY3RvciB8fCBudWxsXSkudGhlbihmdW5jdGlvbiAoc3RhdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cyA9IG1ha2VNYXBTdGF0cyhzdGF0cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUzICYmICFvblN1Y2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaGltIG9ubHkgcHJvbWlzZSBnZXRTdGF0cyB3aXRoIHNwZWMtaHlwaGVucyBpbiB0eXBlIG5hbWVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVhdmUgY2FsbGJhY2sgdmVyc2lvbiBhbG9uZTsgbWlzYyBvbGQgdXNlcyBvZiBmb3JFYWNoIGJlZm9yZSBNYXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0LnR5cGUgPSBtb2Rlcm5TdGF0c1R5cGVzW3N0YXQudHlwZV0gfHwgc3RhdC50eXBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLm5hbWUgIT09ICdUeXBlRXJyb3InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIFR5cGVFcnJvcjogInR5cGUiIGlzIHJlYWQtb25seSwgaW4gb2xkIHZlcnNpb25zLiAzNC00M2lzaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5zZXQoaSwgT2JqZWN0LmFzc2lnbih7fSwgc3RhdCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRzOwogICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKG9uU3VjYywgb25FcnIpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNoaW1TZW5kZXJHZXRTdGF0czogZnVuY3Rpb24gc2hpbVNlbmRlckdldFN0YXRzKHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIGlmICghKCh0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZih3aW5kb3cpKSA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmIHdpbmRvdy5SVENSdHBTZW5kZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENSdHBTZW5kZXIgJiYgJ2dldFN0YXRzJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnR2V0U2VuZGVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVyczsKICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ0dldFNlbmRlcnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZW5kZXJzID0gb3JpZ0dldFNlbmRlcnMuYXBwbHkocGMsIFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcnMuZm9yRWFjaChmdW5jdGlvbiAoc2VuZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZGVyLl9wYyA9IHBjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VuZGVyczsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrOwogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnQWRkVHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZW5kZXIgPSBvcmlnQWRkVHJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlci5fcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYWNrID8gdGhpcy5fcGMuZ2V0U3RhdHModGhpcy50cmFjaykgOiBQcm9taXNlLnJlc29sdmUobmV3IE1hcCgpKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzaGltUmVjZWl2ZXJHZXRTdGF0czogZnVuY3Rpb24gc2hpbVJlY2VpdmVyR2V0U3RhdHMod2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgd2luZG93LlJUQ1J0cFNlbmRlcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LlJUQ1J0cFNlbmRlciAmJiAnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0dldFJlY2VpdmVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzOwogICAgICAgICAgICAgICAgICAgIGlmIChvcmlnR2V0UmVjZWl2ZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNlaXZlcnMgPSBvcmlnR2V0UmVjZWl2ZXJzLmFwcGx5KHBjLCBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlcnMuZm9yRWFjaChmdW5jdGlvbiAocmVjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlci5fcGMgPSBwYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyczsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAndHJhY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlLnJlY2VpdmVyLl9wYyA9IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNoaW1SZW1vdmVTdHJlYW06IGZ1bmN0aW9uIHNoaW1SZW1vdmVTdHJlYW0od2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHwgJ3JlbW92ZVN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGMgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdyZW1vdmVTdHJlYW0nLCAncmVtb3ZlVHJhY2snKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAoc2VuZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VuZGVyLnRyYWNrICYmIHN0cmVhbS5nZXRUcmFja3MoKS5pbmRleE9mKHNlbmRlci50cmFjaykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMucmVtb3ZlVHJhY2soc2VuZGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgc2hpbVJUQ0RhdGFDaGFubmVsOiBmdW5jdGlvbiBzaGltUlRDRGF0YUNoYW5uZWwod2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gcmVuYW1lIERhdGFDaGFubmVsIHRvIFJUQ0RhdGFDaGFubmVsIChuYXRpdmUgZml4IGluIEZGNjApOgogICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTExNzM4NTEKICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LkRhdGFDaGFubmVsICYmICF3aW5kb3cuUlRDRGF0YUNoYW5uZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ0RhdGFDaGFubmVsID0gd2luZG93LkRhdGFDaGFubmVsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9LCB7ICIuLi91dGlscyI6IDE0LCAiLi9nZXR1c2VybWVkaWEiOiAxMiB9XSwgMTI6IFtmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAgICAgICAgICAgKgogICAgICAgICAgICAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAgICAgICAgICAgICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogICAgICAgICAgICAqICB0cmVlLgogICAgICAgICAgICAqLwogICAgICAgICAgICAvKiBlc2xpbnQtZW52IG5vZGUgKi8KICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTsKICAgICAgICAgICAgdmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7CgogICAgICAgICAgICAvLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCiAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHdpbmRvdykgewogICAgICAgICAgICAgICAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpOwogICAgICAgICAgICAgICAgdmFyIG5hdmlnYXRvciA9IHdpbmRvdyAmJiB3aW5kb3cubmF2aWdhdG9yOwogICAgICAgICAgICAgICAgdmFyIE1lZGlhU3RyZWFtVHJhY2sgPSB3aW5kb3cgJiYgd2luZG93Lk1lZGlhU3RyZWFtVHJhY2s7CgogICAgICAgICAgICAgICAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbiBzaGltRXJyb3JfKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnRlcm5hbEVycm9yOiAnTm90UmVhZGFibGVFcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb3RTdXBwb3J0ZWRFcnJvcjogJ1R5cGVFcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZXJtaXNzaW9uRGVuaWVkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VjdXJpdHlFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicKICAgICAgICAgICAgICAgICAgICAgICAgfVtlLm5hbWVdIHx8IGUubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RoZSBvcGVyYXRpb24gaXMgaW5zZWN1cmUuJzogJ1RoZSByZXF1ZXN0IGlzIG5vdCBhbGxvd2VkIGJ5IHRoZSAnICsgJ3VzZXIgYWdlbnQgb3IgdGhlIHBsYXRmb3JtIGluIHRoZSBjdXJyZW50IGNvbnRleHQuJwogICAgICAgICAgICAgICAgICAgICAgICB9W2UubWVzc2FnZV0gfHwgZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50OiBlLmNvbnN0cmFpbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gZ2V0VXNlck1lZGlhIGNvbnN0cmFpbnRzIHNoaW0uCiAgICAgICAgICAgICAgICB2YXIgZ2V0VXNlck1lZGlhXyA9IGZ1bmN0aW9uIGdldFVzZXJNZWRpYV8oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgICAgICAgICAgICAgICAgIHZhciBjb25zdHJhaW50c1RvRkYzN18gPSBmdW5jdGlvbiBjb25zdHJhaW50c1RvRkYzN18oYykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiBjID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihjKSkgIT09ICdvYmplY3QnIHx8IGMucmVxdWlyZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcXVpcmUgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gY1trZXldID0gX3R5cGVvZihjW2tleV0pID09PSAnb2JqZWN0JyA/IGNba2V5XSA6IHsgaWRlYWw6IGNba2V5XSB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIubWluICE9PSB1bmRlZmluZWQgfHwgci5tYXggIT09IHVuZGVmaW5lZCB8fCByLmV4YWN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlLnB1c2goa2V5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIubWluID0gci5tYXggPSByLmV4YWN0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNba2V5XSA9IHIuZXhhY3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByLmV4YWN0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuaWRlYWwgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuYWR2YW5jZWQgPSBjLmFkdmFuY2VkIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygci5pZGVhbCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Nba2V5XSA9IHsgbWluOiByLmlkZWFsLCBtYXg6IHIuaWRlYWwgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvY1trZXldID0gci5pZGVhbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5hZHZhbmNlZC5wdXNoKG9jKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgci5pZGVhbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY1trZXldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1aXJlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5yZXF1aXJlID0gcmVxdWlyZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICAgICAgICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgMzgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZygnc3BlYzogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25zdHJhaW50cy5hdWRpbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvRkYzN18oY29uc3RyYWludHMuYXVkaW8pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25zdHJhaW50cy52aWRlbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvRkYzN18oY29uc3RyYWludHMudmlkZW8pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmcoJ2ZmMzc6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYShjb25zdHJhaW50cywgb25TdWNjZXNzLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yKHNoaW1FcnJvcl8oZSkpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyBSZXR1cm5zIHRoZSByZXN1bHQgb2YgZ2V0VXNlck1lZGlhIGFzIGEgUHJvbWlzZS4KICAgICAgICAgICAgICAgIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uIGdldFVzZXJNZWRpYVByb21pc2VfKGNvbnN0cmFpbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gU2hpbSBmb3IgbWVkaWFEZXZpY2VzIG9uIG9sZGVyIHZlcnNpb25zLgogICAgICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyA9IHsgZ2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWFQcm9taXNlXywKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcigpIHt9LAogICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKCkge30KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzIHx8IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm9zID0gW3sga2luZDogJ2F1ZGlvaW5wdXQnLCBkZXZpY2VJZDogJ2RlZmF1bHQnLCBsYWJlbDogJycsIGdyb3VwSWQ6ICcnIH0sIHsga2luZDogJ3ZpZGVvaW5wdXQnLCBkZXZpY2VJZDogJ2RlZmF1bHQnLCBsYWJlbDogJycsIGdyb3VwSWQ6ICcnIH1dOwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGluZm9zKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA0MSkgewogICAgICAgICAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIGh0dHA6Ly9idWd6aWwubGEvMTE2OTY2NQogICAgICAgICAgICAgICAgICAgIHZhciBvcmdFbnVtZXJhdGVEZXZpY2VzID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzLmJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JnRW51bWVyYXRlRGV2aWNlcygpLnRoZW4odW5kZWZpbmVkLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUubmFtZSA9PT0gJ05vdEZvdW5kRXJyb3InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIGh0dHBzOi8vYnVnemlsLmxhLzgwMjMyNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fCBjLnZpZGVvICYmICFzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RoZSBvYmplY3QgY2FuIG5vdCBiZSBmb3VuZCBoZXJlLicsICdOb3RGb3VuZEVycm9yJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCEoYnJvd3NlckRldGFpbHMudmVyc2lvbiA+IDU1ICYmICdhdXRvR2FpbkNvbnRyb2wnIGluIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKSkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVtYXAgPSBmdW5jdGlvbiByZW1hcChvYmosIGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgaW4gb2JqICYmICEoYiBpbiBvYmopKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbYl0gPSBvYmpbYV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqW2FdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZUdldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiBjID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihjKSkgPT09ICdvYmplY3QnICYmIF90eXBlb2YoYy5hdWRpbykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1hcChjLmF1ZGlvLCAnYXV0b0dhaW5Db250cm9sJywgJ21vekF1dG9HYWluQ29udHJvbCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtYXAoYy5hdWRpbywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVHZXRVc2VyTWVkaWEoYyk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKE1lZGlhU3RyZWFtVHJhY2sgJiYgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hdGl2ZUdldFNldHRpbmdzID0gTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3M7CiAgICAgICAgICAgICAgICAgICAgICAgIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmdldFNldHRpbmdzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IG5hdGl2ZUdldFNldHRpbmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1hcChvYmosICdtb3pBdXRvR2FpbkNvbnRyb2wnLCAnYXV0b0dhaW5Db250cm9sJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1hcChvYmosICdtb3pOb2lzZVN1cHByZXNzaW9uJywgJ25vaXNlU3VwcHJlc3Npb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoTWVkaWFTdHJlYW1UcmFjayAmJiBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXRpdmVBcHBseUNvbnN0cmFpbnRzID0gTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50czsKICAgICAgICAgICAgICAgICAgICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5raW5kID09PSAnYXVkaW8nICYmICh0eXBlb2YgYyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoYykpID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1hcChjLCAnYXV0b0dhaW5Db250cm9sJywgJ21vekF1dG9HYWluQ29udHJvbCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFwKGMsICdub2lzZVN1cHByZXNzaW9uJywgJ21vek5vaXNlU3VwcHJlc3Npb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXRpdmVBcHBseUNvbnN0cmFpbnRzLmFwcGx5KHRoaXMsIFtjXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uIChjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA0NCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSBGaXJlZm94IDQ0KydzIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2l0aCB1bnByZWZpeGVkIHZlcnNpb24uCiAgICAgICAgICAgICAgICAgICAgdXRpbHMuZGVwcmVjYXRlZCgnbmF2aWdhdG9yLmdldFVzZXJNZWRpYScsICduYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYScpOwogICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcik7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwogICAgICAgIH0sIHsgIi4uL3V0aWxzIjogMTQgfV0sIDEzOiBbZnVuY3Rpb24gKHJlcXVpcmUsIG1vZHVsZSwgZXhwb3J0cykgewogICAgICAgICAgICAvKgogICAgICAgICAgICAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogICAgICAgICAgICAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICAgICAgICAgICAgKiAgdHJlZS4KICAgICAgICAgICAgKi8KICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTsKCiAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICAgICAgICAgc2hpbUxvY2FsU3RyZWFtc0FQSTogZnVuY3Rpb24gc2hpbUxvY2FsU3RyZWFtc0FQSSh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpICE9PSAnb2JqZWN0JyB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoJ2dldExvY2FsU3RyZWFtcycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsU3RyZWFtczsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoJ2dldFN0cmVhbUJ5SWQnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RyZWFtQnlJZCA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbG9jYWxTdHJlYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24gKHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLmlkID09PSBpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gc3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVtb3RlU3RyZWFtcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJlYW0uaWQgPT09IGlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzdHJlYW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghKCdhZGRTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrOwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRUcmFjay5jYWxsKHBjLCB0cmFjaywgc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uICh0cmFjaywgc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zID0gW3N0cmVhbV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9sb2NhbFN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYWRkVHJhY2suY2FsbCh0aGlzLCB0cmFjaywgc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoJ3JlbW92ZVN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPSBmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2tzID0gc3RyZWFtLmdldFRyYWNrcygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAoc2VuZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWNrcy5pbmRleE9mKHNlbmRlci50cmFjaykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLnJlbW92ZVRyYWNrKHNlbmRlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNoaW1SZW1vdGVTdHJlYW1zQVBJOiBmdW5jdGlvbiBzaGltUmVtb3RlU3RyZWFtc0FQSSh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpICE9PSAnb2JqZWN0JyB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoJ2dldFJlbW90ZVN0cmVhbXMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW1vdGVTdHJlYW1zID8gdGhpcy5fcmVtb3RlU3RyZWFtcyA6IFtdOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoISgnb25hZGRzdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnb25hZGRzdHJlYW0nLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb25hZGRzdHJlYW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX29uYWRkc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb25hZGRzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb25hZGRzdHJlYW1wb2x5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSA9IGYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbmFkZHN0cmVhbXBvbHkgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBjLl9yZW1vdGVTdHJlYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGMuX3JlbW90ZVN0cmVhbXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYy5fcmVtb3RlU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLl9yZW1vdGVTdHJlYW1zLnB1c2goc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaGltQ2FsbGJhY2tzQVBJOiBmdW5jdGlvbiBzaGltQ2FsbGJhY2tzQVBJKHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIHdpbmRvdyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yod2luZG93KSkgIT09ICdvYmplY3QnIHx8ICF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgcHJvdG90eXBlID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTsKICAgICAgICAgICAgICAgICAgICB2YXIgY3JlYXRlT2ZmZXIgPSBwcm90b3R5cGUuY3JlYXRlT2ZmZXI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNyZWF0ZUFuc3dlciA9IHByb3RvdHlwZS5jcmVhdGVBbnN3ZXI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNldExvY2FsRGVzY3JpcHRpb24gPSBwcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICB2YXIgc2V0UmVtb3RlRGVzY3JpcHRpb24gPSBwcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247CiAgICAgICAgICAgICAgICAgICAgdmFyIGFkZEljZUNhbmRpZGF0ZSA9IHByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU7CgogICAgICAgICAgICAgICAgICAgIHByb3RvdHlwZS5jcmVhdGVPZmZlciA9IGZ1bmN0aW9uIChzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMiA/IGFyZ3VtZW50c1syXSA6IGFyZ3VtZW50c1swXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBjcmVhdGVPZmZlci5hcHBseSh0aGlzLCBbb3B0aW9uc10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbiAoc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID49IDIgPyBhcmd1bWVudHNbMl0gOiBhcmd1bWVudHNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlQW5zd2VyLmFwcGx5KHRoaXMsIFtvcHRpb25zXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHdpdGhDYWxsYmFjayA9IGZ1bmN0aW9uIHdpdGhDYWxsYmFjayhkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBzZXRMb2NhbERlc2NyaXB0aW9uLmFwcGx5KHRoaXMsIFtkZXNjcmlwdGlvbl0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPSB3aXRoQ2FsbGJhY2s7CgogICAgICAgICAgICAgICAgICAgIHdpdGhDYWxsYmFjayA9IGZ1bmN0aW9uIHdpdGhDYWxsYmFjayhkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBzZXRSZW1vdGVEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBbZGVzY3JpcHRpb25dKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IHdpdGhDYWxsYmFjazsKCiAgICAgICAgICAgICAgICAgICAgd2l0aENhbGxiYWNrID0gZnVuY3Rpb24gd2l0aENhbGxiYWNrKGNhbmRpZGF0ZSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBhZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgW2NhbmRpZGF0ZV0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IHdpdGhDYWxsYmFjazsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaGltR2V0VXNlck1lZGlhOiBmdW5jdGlvbiBzaGltR2V0VXNlck1lZGlhKHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIHZhciBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uIChjb25zdHJhaW50cywgY2IsIGVycmNiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oY2IsIGVycmNiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZChuYXZpZ2F0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNoaW1SVENJY2VTZXJ2ZXJVcmxzOiBmdW5jdGlvbiBzaGltUlRDSWNlU2VydmVyVXJscyh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICAvLyBtaWdyYXRlIGZyb20gbm9uLXNwZWMgUlRDSWNlU2VydmVyLnVybCB0byBSVENJY2VTZXJ2ZXIudXJscwogICAgICAgICAgICAgICAgICAgIHZhciBPcmlnUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb247CiAgICAgICAgICAgICAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24gKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwY0NvbmZpZyAmJiBwY0NvbmZpZy5pY2VTZXJ2ZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SWNlU2VydmVycyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybHMnKSAmJiBzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ1JUQ0ljZVNlcnZlci51cmwnLCAnUlRDSWNlU2VydmVyLnVybHMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzZXJ2ZXIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyLnVybHMgPSBzZXJ2ZXIudXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VydmVyLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHNlcnZlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjQ29uZmlnLmljZVNlcnZlcnMgPSBuZXdJY2VTZXJ2ZXJzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT3JpZ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSBPcmlnUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlOwogICAgICAgICAgICAgICAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuCiAgICAgICAgICAgICAgICAgICAgaWYgKCdnZW5lcmF0ZUNlcnRpZmljYXRlJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT3JpZ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyOiBmdW5jdGlvbiBzaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIC8vIEFkZCBldmVudC50cmFuc2NlaXZlciBtZW1iZXIgb3ZlciBkZXByZWNhdGVkIGV2ZW50LnJlY2VpdmVyCiAgICAgICAgICAgICAgICAgICAgaWYgKCh0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZih3aW5kb3cpKSA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmICdyZWNlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlICYmCiAgICAgICAgICAgICAgICAgICAgLy8gY2FuJ3QgY2hlY2sgJ3RyYW5zY2VpdmVyJyBpbiB3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsIGFzIGl0IGlzCiAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lZCBmb3Igc29tZSByZWFzb24gZXZlbiB3aGVuIHdpbmRvdy5SVENUcmFuc2NlaXZlciBpcyBub3QuCiAgICAgICAgICAgICAgICAgICAgIXdpbmRvdy5SVENUcmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLCAndHJhbnNjZWl2ZXInLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyByZWNlaXZlcjogdGhpcy5yZWNlaXZlciB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNoaW1DcmVhdGVPZmZlckxlZ2FjeTogZnVuY3Rpb24gc2hpbUNyZWF0ZU9mZmVyTGVnYWN5KHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIHZhciBvcmlnQ3JlYXRlT2ZmZXIgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXIgPSBmdW5jdGlvbiAob2ZmZXJPcHRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZlck9wdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBiaXQgdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPSAhIW9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1ZGlvVHJhbnNjZWl2ZXIgPSBwYy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2sgJiYgdHJhbnNjZWl2ZXIuc2VuZGVyLnRyYWNrLmtpbmQgPT09ICdhdWRpbyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gZmFsc2UgJiYgYXVkaW9UcmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKCdzZW5kb25seScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSAnc2VuZG9ubHknOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdWRpb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9PT0gJ3JlY3Zvbmx5JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXVkaW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKCdpbmFjdGl2ZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSAnaW5hY3RpdmUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gdHJ1ZSAmJiAhYXVkaW9UcmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjLmFkZFRyYW5zY2VpdmVyKCdhdWRpbycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBiaXQgdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPSAhIW9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvVHJhbnNjZWl2ZXIgPSBwYy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKGZ1bmN0aW9uICh0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2sgJiYgdHJhbnNjZWl2ZXIuc2VuZGVyLnRyYWNrLmtpbmQgPT09ICd2aWRlbyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbyA9PT0gZmFsc2UgJiYgdmlkZW9UcmFuc2NlaXZlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWRlb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignc2VuZG9ubHknKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID09PSAncmVjdm9ubHknKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKCdpbmFjdGl2ZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IHRydWUgJiYgIXZpZGVvVHJhbnNjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYy5hZGRUcmFuc2NlaXZlcigndmlkZW8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ0NyZWF0ZU9mZmVyLmFwcGx5KHBjLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgfSwgeyAiLi4vdXRpbHMiOiAxNCB9XSwgMTQ6IFtmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICAgICAgICAgICAgKgogICAgICAgICAgICAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAgICAgICAgICAgICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogICAgICAgICAgICAqICB0cmVlLgogICAgICAgICAgICAqLwogICAgICAgICAgICAvKiBlc2xpbnQtZW52IG5vZGUgKi8KICAgICAgICAgICAgJ3VzZSBzdHJpY3QnOwoKICAgICAgICAgICAgdmFyIGxvZ0Rpc2FibGVkXyA9IHRydWU7CiAgICAgICAgICAgIHZhciBkZXByZWNhdGlvbldhcm5pbmdzXyA9IHRydWU7CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICogRXh0cmFjdCBicm93c2VyIHZlcnNpb24gb3V0IG9mIHRoZSBwcm92aWRlZCB1c2VyIGFnZW50IHN0cmluZy4KICAgICAgICAgICAgICoKICAgICAgICAgICAgICogQHBhcmFtIHshc3RyaW5nfSB1YXN0cmluZyB1c2VyQWdlbnQgc3RyaW5nLgogICAgICAgICAgICAgKiBAcGFyYW0geyFzdHJpbmd9IGV4cHIgUmVndWxhciBleHByZXNzaW9uIHVzZWQgYXMgbWF0Y2ggY3JpdGVyaWEuCiAgICAgICAgICAgICAqIEBwYXJhbSB7IW51bWJlcn0gcG9zIHBvc2l0aW9uIGluIHRoZSB2ZXJzaW9uIHN0cmluZyB0byBiZSByZXR1cm5lZC4KICAgICAgICAgICAgICogQHJldHVybiB7IW51bWJlcn0gYnJvd3NlciB2ZXJzaW9uLgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgZnVuY3Rpb24gZXh0cmFjdFZlcnNpb24odWFzdHJpbmcsIGV4cHIsIHBvcykgewogICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gdWFzdHJpbmcubWF0Y2goZXhwcik7CiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IHBvcyAmJiBwYXJzZUludChtYXRjaFtwb3NdLCAxMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFdyYXBzIHRoZSBwZWVyY29ubmVjdGlvbiBldmVudCBldmVudE5hbWVUb1dyYXAgaW4gYSBmdW5jdGlvbgogICAgICAgICAgICAvLyB3aGljaCByZXR1cm5zIHRoZSBtb2RpZmllZCBldmVudCBvYmplY3QuCiAgICAgICAgICAgIGZ1bmN0aW9uIHdyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgZXZlbnROYW1lVG9XcmFwLCB3cmFwcGVyKSB7CiAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBwcm90byA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CiAgICAgICAgICAgICAgICB2YXIgbmF0aXZlQWRkRXZlbnRMaXN0ZW5lciA9IHByb3RvLmFkZEV2ZW50TGlzdGVuZXI7CiAgICAgICAgICAgICAgICBwcm90by5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKG5hdGl2ZUV2ZW50TmFtZSwgY2IpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobmF0aXZlRXZlbnROYW1lICE9PSBldmVudE5hbWVUb1dyYXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRDYWxsYmFjayA9IGZ1bmN0aW9uIHdyYXBwZWRDYWxsYmFjayhlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNiKHdyYXBwZXIoZSkpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRNYXAgPSB0aGlzLl9ldmVudE1hcCB8fCB7fTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudE1hcFtjYl0gPSB3cmFwcGVkQ2FsbGJhY2s7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW25hdGl2ZUV2ZW50TmFtZSwgd3JhcHBlZENhbGxiYWNrXSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHZhciBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyID0gcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcjsKICAgICAgICAgICAgICAgIHByb3RvLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAobmF0aXZlRXZlbnROYW1lLCBjYikgewogICAgICAgICAgICAgICAgICAgIGlmIChuYXRpdmVFdmVudE5hbWUgIT09IGV2ZW50TmFtZVRvV3JhcCB8fCAhdGhpcy5fZXZlbnRNYXAgfHwgIXRoaXMuX2V2ZW50TWFwW2NiXSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgdW53cmFwcGVkQ2IgPSB0aGlzLl9ldmVudE1hcFtjYl07CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50TWFwW2NiXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBbbmF0aXZlRXZlbnROYW1lLCB1bndyYXBwZWRDYl0pOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdvbicgKyBldmVudE5hbWVUb1dyYXAsIHsKICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoY2IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lVG9XcmFwLCB0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lVG9XcmFwLCB0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXSA9IGNiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBVdGlsaXR5IG1ldGhvZHMuCiAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gewogICAgICAgICAgICAgICAgZXh0cmFjdFZlcnNpb246IGV4dHJhY3RWZXJzaW9uLAogICAgICAgICAgICAgICAgd3JhcFBlZXJDb25uZWN0aW9uRXZlbnQ6IHdyYXBQZWVyQ29ubmVjdGlvbkV2ZW50LAogICAgICAgICAgICAgICAgZGlzYWJsZUxvZzogZnVuY3Rpb24gZGlzYWJsZUxvZyhib29sKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJndW1lbnQgdHlwZTogJyArICh0eXBlb2YgYm9vbCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoYm9vbCkpICsgJy4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxvZ0Rpc2FibGVkXyA9IGJvb2w7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvb2wgPyAnYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkJyA6ICdhZGFwdGVyLmpzIGxvZ2dpbmcgZW5hYmxlZCc7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogRGlzYWJsZSBvciBlbmFibGUgZGVwcmVjYXRpb24gd2FybmluZ3MKICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7IWJvb2xlYW59IGJvb2wgc2V0IHRvIHRydWUgdG8gZGlzYWJsZSB3YXJuaW5ncy4KICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgZGlzYWJsZVdhcm5pbmdzOiBmdW5jdGlvbiBkaXNhYmxlV2FybmluZ3MoYm9vbCkgewogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYm9vbCAhPT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0FyZ3VtZW50IHR5cGU6ICcgKyAodHlwZW9mIGJvb2wgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGJvb2wpKSArICcuIFBsZWFzZSB1c2UgYSBib29sZWFuLicpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkZXByZWNhdGlvbldhcm5pbmdzXyA9ICFib29sOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAnYWRhcHRlci5qcyBkZXByZWNhdGlvbiB3YXJuaW5ncyAnICsgKGJvb2wgPyAnZGlzYWJsZWQnIDogJ2VuYWJsZWQnKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgbG9nOiBmdW5jdGlvbiBsb2coKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCh0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZih3aW5kb3cpKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ0Rpc2FibGVkXykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUubG9nID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIFNob3dzIGEgZGVwcmVjYXRpb24gd2FybmluZyBzdWdnZXN0aW5nIHRoZSBtb2Rlcm4gYW5kIHNwZWMtY29tcGF0aWJsZSBBUEkuCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIGRlcHJlY2F0ZWQ6IGZ1bmN0aW9uIGRlcHJlY2F0ZWQob2xkTWV0aG9kLCBuZXdNZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWRlcHJlY2F0aW9uV2FybmluZ3NfKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKG9sZE1ldGhvZCArICcgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSAnICsgbmV3TWV0aG9kICsgJyBpbnN0ZWFkLicpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIEJyb3dzZXIgZGV0ZWN0b3IuCiAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICogQHJldHVybiB7b2JqZWN0fSByZXN1bHQgY29udGFpbmluZyBicm93c2VyIGFuZCB2ZXJzaW9uCiAgICAgICAgICAgICAgICAgKiAgICAgcHJvcGVydGllcy4KICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgZGV0ZWN0QnJvd3NlcjogZnVuY3Rpb24gZGV0ZWN0QnJvd3Nlcih3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7CgogICAgICAgICAgICAgICAgICAgIC8vIFJldHVybmVkIHJlc3VsdCBvYmplY3QuCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5icm93c2VyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IG51bGw7CgogICAgICAgICAgICAgICAgICAgIC8vIEZhaWwgZWFybHkgaWYgaXQncyBub3QgYSBicm93c2VyCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICF3aW5kb3cubmF2aWdhdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIGJyb3dzZXIuJzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3guCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5icm93c2VyID0gJ2ZpcmVmb3gnOwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsIC9GaXJlZm94XC8oXGQrKVwuLywgMSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9tZSwgQ2hyb21pdW0sIFdlYnZpZXcsIE9wZXJhLgogICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJzaW9uIG1hdGNoZXMgQ2hyb21lL1dlYlJUQyB2ZXJzaW9uLgogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYnJvd3NlciA9ICdjaHJvbWUnOwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsIC9DaHJvbShlfGl1bSlcLyhcZCspXC4vLCAyKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRWRnZVwvKFxkKykuKFxkKykkLykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWRnZS4KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnZWRnZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC52ZXJzaW9uID0gZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwgL0VkZ2VcLyhcZCspLihcZCspJC8sIDIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FwcGxlV2ViS2l0XC8oXGQrKVwuLykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2FmYXJpLgogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuYnJvd3NlciA9ICdzYWZhcmknOwogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsIC9BcHBsZVdlYktpdFwvKFxkKylcLi8sIDEpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgZmFsbHRocm91Z2g6IG5vdCBzdXBwb3J0ZWQuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIHN1cHBvcnRlZCBicm93c2VyLic7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0sIHt9XSB9LCB7fSwgWzNdKSgzKTsKfSk7CgovKioqLyB9KSwKLyogNCAqLywKLyogNSAqLywKLyogNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDcpKF9fd2VicGFja19yZXF1aXJlX18oOCkpCgovKioqIEVYUE9SVFMgRlJPTSBleHBvcnRzLWxvYWRlciAqKiovCm1vZHVsZS5leHBvcnRzID0gd2luZG93LlplcHRvOwoKLyoqKi8gfSksCi8qIDcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLyoKCU1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwCglBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhCiovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc3JjKSB7CglmdW5jdGlvbiBsb2coZXJyb3IpIHsKCQkodHlwZW9mIGNvbnNvbGUgIT09ICJ1bmRlZmluZWQiKQoJCSYmIChjb25zb2xlLmVycm9yIHx8IGNvbnNvbGUubG9nKSgiW1NjcmlwdCBMb2FkZXJdIiwgZXJyb3IpOwoJfQoKCS8vIENoZWNrIGZvciBJRSA9PCA4CglmdW5jdGlvbiBpc0lFKCkgewoJCXJldHVybiB0eXBlb2YgYXR0YWNoRXZlbnQgIT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiBhZGRFdmVudExpc3RlbmVyID09PSAidW5kZWZpbmVkIjsKCX0KCgl0cnkgewoJCWlmICh0eXBlb2YgZXhlY1NjcmlwdCAhPT0gInVuZGVmaW5lZCIgJiYgaXNJRSgpKSB7CgkJCWV4ZWNTY3JpcHQoc3JjKTsKCQl9IGVsc2UgaWYgKHR5cGVvZiBldmFsICE9PSAidW5kZWZpbmVkIikgewoJCQlldmFsLmNhbGwobnVsbCwgc3JjKTsKCQl9IGVsc2UgewoJCQlsb2coIkV2YWxFcnJvcjogTm8gZXZhbCBmdW5jdGlvbiBhdmFpbGFibGUiKTsKCQl9Cgl9IGNhdGNoIChlcnJvcikgewoJCWxvZyhlcnJvcik7Cgl9Cn0KCgovKioqLyB9KSwKLyogOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9ICIvKiBaZXB0byB2MS4yLjAgLSB6ZXB0byBldmVudCBhamF4IGZvcm0gaWUgLSB6ZXB0b2pzLmNvbS9saWNlbnNlICovXG4oZnVuY3Rpb24oZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFjdG9yeShnbG9iYWwpIH0pXG4gIGVsc2VcbiAgICBmYWN0b3J5KGdsb2JhbClcbn0odGhpcywgZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBaZXB0byA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHVuZGVmaW5lZCwga2V5LCAkLCBjbGFzc0xpc3QsIGVtcHR5QXJyYXkgPSBbXSwgY29uY2F0ID0gZW1wdHlBcnJheS5jb25jYXQsIGZpbHRlciA9IGVtcHR5QXJyYXkuZmlsdGVyLCBzbGljZSA9IGVtcHR5QXJyYXkuc2xpY2UsXG4gICAgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQsXG4gICAgZWxlbWVudERpc3BsYXkgPSB7fSwgY2xhc3NDYWNoZSA9IHt9LFxuICAgIGNzc051bWJlciA9IHsgJ2NvbHVtbi1jb3VudCc6IDEsICdjb2x1bW5zJzogMSwgJ2ZvbnQtd2VpZ2h0JzogMSwgJ2xpbmUtaGVpZ2h0JzogMSwnb3BhY2l0eSc6IDEsICd6LWluZGV4JzogMSwgJ3pvb20nOiAxIH0sXG4gICAgZnJhZ21lbnRSRSA9IC9eXFxzKjwoXFx3K3whKVtePl0qPi8sXG4gICAgc2luZ2xlVGFnUkUgPSAvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sXG4gICAgdGFnRXhwYW5kZXJSRSA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9pZyxcbiAgICByb290Tm9kZVJFID0gL14oPzpib2R5fGh0bWwpJC9pLFxuICAgIGNhcGl0YWxSRSA9IC8oW0EtWl0pL2csXG5cbiAgICAvLyBzcGVjaWFsIGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgYmUgZ2V0L3NldCB2aWEgbWV0aG9kIGNhbGxzXG4gICAgbWV0aG9kQXR0cmlidXRlcyA9IFsndmFsJywgJ2NzcycsICdodG1sJywgJ3RleHQnLCAnZGF0YScsICd3aWR0aCcsICdoZWlnaHQnLCAnb2Zmc2V0J10sXG5cbiAgICBhZGphY2VuY3lPcGVyYXRvcnMgPSBbICdhZnRlcicsICdwcmVwZW5kJywgJ2JlZm9yZScsICdhcHBlbmQnIF0sXG4gICAgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpLFxuICAgIHRhYmxlUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKSxcbiAgICBjb250YWluZXJzID0ge1xuICAgICAgJ3RyJzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKSxcbiAgICAgICd0Ym9keSc6IHRhYmxlLCAndGhlYWQnOiB0YWJsZSwgJ3Rmb290JzogdGFibGUsXG4gICAgICAndGQnOiB0YWJsZVJvdywgJ3RoJzogdGFibGVSb3csXG4gICAgICAnKic6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgfSxcbiAgICByZWFkeVJFID0gL2NvbXBsZXRlfGxvYWRlZHxpbnRlcmFjdGl2ZS8sXG4gICAgc2ltcGxlU2VsZWN0b3JSRSA9IC9eW1xcdy1dKiQvLFxuICAgIGNsYXNzMnR5cGUgPSB7fSxcbiAgICB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmcsXG4gICAgemVwdG8gPSB7fSxcbiAgICBjYW1lbGl6ZSwgdW5pcSxcbiAgICB0ZW1wUGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgcHJvcE1hcCA9IHtcbiAgICAgICd0YWJpbmRleCc6ICd0YWJJbmRleCcsXG4gICAgICAncmVhZG9ubHknOiAncmVhZE9ubHknLFxuICAgICAgJ2Zvcic6ICdodG1sRm9yJyxcbiAgICAgICdjbGFzcyc6ICdjbGFzc05hbWUnLFxuICAgICAgJ21heGxlbmd0aCc6ICdtYXhMZW5ndGgnLFxuICAgICAgJ2NlbGxzcGFjaW5nJzogJ2NlbGxTcGFjaW5nJyxcbiAgICAgICdjZWxscGFkZGluZyc6ICdjZWxsUGFkZGluZycsXG4gICAgICAncm93c3Bhbic6ICdyb3dTcGFuJyxcbiAgICAgICdjb2xzcGFuJzogJ2NvbFNwYW4nLFxuICAgICAgJ3VzZW1hcCc6ICd1c2VNYXAnLFxuICAgICAgJ2ZyYW1lYm9yZGVyJzogJ2ZyYW1lQm9yZGVyJyxcbiAgICAgICdjb250ZW50ZWRpdGFibGUnOiAnY29udGVudEVkaXRhYmxlJ1xuICAgIH0sXG4gICAgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHxcbiAgICAgIGZ1bmN0aW9uKG9iamVjdCl7IHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBBcnJheSB9XG5cbiAgemVwdG8ubWF0Y2hlcyA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgaWYgKCFzZWxlY3RvciB8fCAhZWxlbWVudCB8fCBlbGVtZW50Lm5vZGVUeXBlICE9PSAxKSByZXR1cm4gZmFsc2VcbiAgICB2YXIgbWF0Y2hlc1NlbGVjdG9yID0gZWxlbWVudC5tYXRjaGVzIHx8IGVsZW1lbnQud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubW96TWF0Y2hlc1NlbGVjdG9yIHx8IGVsZW1lbnQub01hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm1hdGNoZXNTZWxlY3RvclxuICAgIGlmIChtYXRjaGVzU2VsZWN0b3IpIHJldHVybiBtYXRjaGVzU2VsZWN0b3IuY2FsbChlbGVtZW50LCBzZWxlY3RvcilcbiAgICAvLyBmYWxsIGJhY2sgdG8gcGVyZm9ybWluZyBhIHNlbGVjdG9yOlxuICAgIHZhciBtYXRjaCwgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlLCB0ZW1wID0gIXBhcmVudFxuICAgIGlmICh0ZW1wKSAocGFyZW50ID0gdGVtcFBhcmVudCkuYXBwZW5kQ2hpbGQoZWxlbWVudClcbiAgICBtYXRjaCA9IH56ZXB0by5xc2EocGFyZW50LCBzZWxlY3RvcikuaW5kZXhPZihlbGVtZW50KVxuICAgIHRlbXAgJiYgdGVtcFBhcmVudC5yZW1vdmVDaGlsZChlbGVtZW50KVxuICAgIHJldHVybiBtYXRjaFxuICB9XG5cbiAgZnVuY3Rpb24gdHlwZShvYmopIHtcbiAgICByZXR1cm4gb2JqID09IG51bGwgPyBTdHJpbmcob2JqKSA6XG4gICAgICBjbGFzczJ0eXBlW3RvU3RyaW5nLmNhbGwob2JqKV0gfHwgXCJvYmplY3RcIlxuICB9XG5cbiAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdHlwZSh2YWx1ZSkgPT0gXCJmdW5jdGlvblwiIH1cbiAgZnVuY3Rpb24gaXNXaW5kb3cob2JqKSAgICAgeyByZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqID09IG9iai53aW5kb3cgfVxuICBmdW5jdGlvbiBpc0RvY3VtZW50KG9iaikgICB7IHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmoubm9kZVR5cGUgPT0gb2JqLkRPQ1VNRU5UX05PREUgfVxuICBmdW5jdGlvbiBpc09iamVjdChvYmopICAgICB7IHJldHVybiB0eXBlKG9iaikgPT0gXCJvYmplY3RcIiB9XG4gIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KG9iaikgJiYgIWlzV2luZG93KG9iaikgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgPT0gT2JqZWN0LnByb3RvdHlwZVxuICB9XG5cbiAgZnVuY3Rpb24gbGlrZUFycmF5KG9iaikge1xuICAgIHZhciBsZW5ndGggPSAhIW9iaiAmJiAnbGVuZ3RoJyBpbiBvYmogJiYgb2JqLmxlbmd0aCxcbiAgICAgIHR5cGUgPSAkLnR5cGUob2JqKVxuXG4gICAgcmV0dXJuICdmdW5jdGlvbicgIT0gdHlwZSAmJiAhaXNXaW5kb3cob2JqKSAmJiAoXG4gICAgICAnYXJyYXknID09IHR5cGUgfHwgbGVuZ3RoID09PSAwIHx8XG4gICAgICAgICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+IDAgJiYgKGxlbmd0aCAtIDEpIGluIG9iailcbiAgICApXG4gIH1cblxuICBmdW5jdGlvbiBjb21wYWN0KGFycmF5KSB7IHJldHVybiBmaWx0ZXIuY2FsbChhcnJheSwgZnVuY3Rpb24oaXRlbSl7IHJldHVybiBpdGVtICE9IG51bGwgfSkgfVxuICBmdW5jdGlvbiBmbGF0dGVuKGFycmF5KSB7IHJldHVybiBhcnJheS5sZW5ndGggPiAwID8gJC5mbi5jb25jYXQuYXBwbHkoW10sIGFycmF5KSA6IGFycmF5IH1cbiAgY2FtZWxpemUgPSBmdW5jdGlvbihzdHIpeyByZXR1cm4gc3RyLnJlcGxhY2UoLy0rKC4pPy9nLCBmdW5jdGlvbihtYXRjaCwgY2hyKXsgcmV0dXJuIGNociA/IGNoci50b1VwcGVyQ2FzZSgpIDogJycgfSkgfVxuICBmdW5jdGlvbiBkYXNoZXJpemUoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC86Oi9nLCAnLycpXG4gICAgICAgICAgIC5yZXBsYWNlKC8oW0EtWl0rKShbQS1aXVthLXpdKS9nLCAnJDFfJDInKVxuICAgICAgICAgICAucmVwbGFjZSgvKFthLXpcXGRdKShbQS1aXSkvZywgJyQxXyQyJylcbiAgICAgICAgICAgLnJlcGxhY2UoL18vZywgJy0nKVxuICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICB9XG4gIHVuaXEgPSBmdW5jdGlvbihhcnJheSl7IHJldHVybiBmaWx0ZXIuY2FsbChhcnJheSwgZnVuY3Rpb24oaXRlbSwgaWR4KXsgcmV0dXJuIGFycmF5LmluZGV4T2YoaXRlbSkgPT0gaWR4IH0pIH1cblxuICBmdW5jdGlvbiBjbGFzc1JFKG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZSBpbiBjbGFzc0NhY2hlID9cbiAgICAgIGNsYXNzQ2FjaGVbbmFtZV0gOiAoY2xhc3NDYWNoZVtuYW1lXSA9IG5ldyBSZWdFeHAoJyhefFxcXFxzKScgKyBuYW1lICsgJyhcXFxcc3wkKScpKVxuICB9XG5cbiAgZnVuY3Rpb24gbWF5YmVBZGRQeChuYW1lLCB2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIgJiYgIWNzc051bWJlcltkYXNoZXJpemUobmFtZSldKSA/IHZhbHVlICsgXCJweFwiIDogdmFsdWVcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlZmF1bHREaXNwbGF5KG5vZGVOYW1lKSB7XG4gICAgdmFyIGVsZW1lbnQsIGRpc3BsYXlcbiAgICBpZiAoIWVsZW1lbnREaXNwbGF5W25vZGVOYW1lXSkge1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpXG4gICAgICBkaXNwbGF5ID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCAnJykuZ2V0UHJvcGVydHlWYWx1ZShcImRpc3BsYXlcIilcbiAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KVxuICAgICAgZGlzcGxheSA9PSBcIm5vbmVcIiAmJiAoZGlzcGxheSA9IFwiYmxvY2tcIilcbiAgICAgIGVsZW1lbnREaXNwbGF5W25vZGVOYW1lXSA9IGRpc3BsYXlcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnREaXNwbGF5W25vZGVOYW1lXVxuICB9XG5cbiAgZnVuY3Rpb24gY2hpbGRyZW4oZWxlbWVudCkge1xuICAgIHJldHVybiAnY2hpbGRyZW4nIGluIGVsZW1lbnQgP1xuICAgICAgc2xpY2UuY2FsbChlbGVtZW50LmNoaWxkcmVuKSA6XG4gICAgICAkLm1hcChlbGVtZW50LmNoaWxkTm9kZXMsIGZ1bmN0aW9uKG5vZGUpeyBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSByZXR1cm4gbm9kZSB9KVxuICB9XG5cbiAgZnVuY3Rpb24gWihkb20sIHNlbGVjdG9yKSB7XG4gICAgdmFyIGksIGxlbiA9IGRvbSA/IGRvbS5sZW5ndGggOiAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB0aGlzW2ldID0gZG9tW2ldXG4gICAgdGhpcy5sZW5ndGggPSBsZW5cbiAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3IgfHwgJydcbiAgfVxuXG4gIC8vIGAkLnplcHRvLmZyYWdtZW50YCB0YWtlcyBhIGh0bWwgc3RyaW5nIGFuZCBhbiBvcHRpb25hbCB0YWcgbmFtZVxuICAvLyB0byBnZW5lcmF0ZSBET00gbm9kZXMgZnJvbSB0aGUgZ2l2ZW4gaHRtbCBzdHJpbmcuXG4gIC8vIFRoZSBnZW5lcmF0ZWQgRE9NIG5vZGVzIGFyZSByZXR1cm5lZCBhcyBhbiBhcnJheS5cbiAgLy8gVGhpcyBmdW5jdGlvbiBjYW4gYmUgb3ZlcnJpZGRlbiBpbiBwbHVnaW5zIGZvciBleGFtcGxlIHRvIG1ha2VcbiAgLy8gaXQgY29tcGF0aWJsZSB3aXRoIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCB0aGUgRE9NIGZ1bGx5LlxuICB6ZXB0by5mcmFnbWVudCA9IGZ1bmN0aW9uKGh0bWwsIG5hbWUsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgZG9tLCBub2RlcywgY29udGFpbmVyXG5cbiAgICAvLyBBIHNwZWNpYWwgY2FzZSBvcHRpbWl6YXRpb24gZm9yIGEgc2luZ2xlIHRhZ1xuICAgIGlmIChzaW5nbGVUYWdSRS50ZXN0KGh0bWwpKSBkb20gPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoUmVnRXhwLiQxKSlcblxuICAgIGlmICghZG9tKSB7XG4gICAgICBpZiAoaHRtbC5yZXBsYWNlKSBodG1sID0gaHRtbC5yZXBsYWNlKHRhZ0V4cGFuZGVyUkUsIFwiPCQxPjwvJDI+XCIpXG4gICAgICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSBuYW1lID0gZnJhZ21lbnRSRS50ZXN0KGh0bWwpICYmIFJlZ0V4cC4kMVxuICAgICAgaWYgKCEobmFtZSBpbiBjb250YWluZXJzKSkgbmFtZSA9ICcqJ1xuXG4gICAgICBjb250YWluZXIgPSBjb250YWluZXJzW25hbWVdXG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJycgKyBodG1sXG4gICAgICBkb20gPSAkLmVhY2goc2xpY2UuY2FsbChjb250YWluZXIuY2hpbGROb2RlcyksIGZ1bmN0aW9uKCl7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoaXNQbGFpbk9iamVjdChwcm9wZXJ0aWVzKSkge1xuICAgICAgbm9kZXMgPSAkKGRvbSlcbiAgICAgICQuZWFjaChwcm9wZXJ0aWVzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChtZXRob2RBdHRyaWJ1dGVzLmluZGV4T2Yoa2V5KSA+IC0xKSBub2Rlc1trZXldKHZhbHVlKVxuICAgICAgICBlbHNlIG5vZGVzLmF0dHIoa2V5LCB2YWx1ZSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGRvbVxuICB9XG5cbiAgLy8gYCQuemVwdG8uWmAgc3dhcHMgb3V0IHRoZSBwcm90b3R5cGUgb2YgdGhlIGdpdmVuIGBkb21gIGFycmF5XG4gIC8vIG9mIG5vZGVzIHdpdGggYCQuZm5gIGFuZCB0aHVzIHN1cHBseWluZyBhbGwgdGhlIFplcHRvIGZ1bmN0aW9uc1xuICAvLyB0byB0aGUgYXJyYXkuIFRoaXMgbWV0aG9kIGNhbiBiZSBvdmVycmlkZGVuIGluIHBsdWdpbnMuXG4gIHplcHRvLlogPSBmdW5jdGlvbihkb20sIHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBaKGRvbSwgc2VsZWN0b3IpXG4gIH1cblxuICAvLyBgJC56ZXB0by5pc1pgIHNob3VsZCByZXR1cm4gYHRydWVgIGlmIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBaZXB0b1xuICAvLyBjb2xsZWN0aW9uLiBUaGlzIG1ldGhvZCBjYW4gYmUgb3ZlcnJpZGRlbiBpbiBwbHVnaW5zLlxuICB6ZXB0by5pc1ogPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgemVwdG8uWlxuICB9XG5cbiAgLy8gYCQuemVwdG8uaW5pdGAgaXMgWmVwdG8ncyBjb3VudGVycGFydCB0byBqUXVlcnkncyBgJC5mbi5pbml0YCBhbmRcbiAgLy8gdGFrZXMgYSBDU1Mgc2VsZWN0b3IgYW5kIGFuIG9wdGlvbmFsIGNvbnRleHQgKGFuZCBoYW5kbGVzIHZhcmlvdXNcbiAgLy8gc3BlY2lhbCBjYXNlcykuXG4gIC8vIFRoaXMgbWV0aG9kIGNhbiBiZSBvdmVycmlkZGVuIGluIHBsdWdpbnMuXG4gIHplcHRvLmluaXQgPSBmdW5jdGlvbihzZWxlY3RvciwgY29udGV4dCkge1xuICAgIHZhciBkb21cbiAgICAvLyBJZiBub3RoaW5nIGdpdmVuLCByZXR1cm4gYW4gZW1wdHkgWmVwdG8gY29sbGVjdGlvblxuICAgIGlmICghc2VsZWN0b3IpIHJldHVybiB6ZXB0by5aKClcbiAgICAvLyBPcHRpbWl6ZSBmb3Igc3RyaW5nIHNlbGVjdG9yc1xuICAgIGVsc2UgaWYgKHR5cGVvZiBzZWxlY3RvciA9PSAnc3RyaW5nJykge1xuICAgICAgc2VsZWN0b3IgPSBzZWxlY3Rvci50cmltKClcbiAgICAgIC8vIElmIGl0J3MgYSBodG1sIGZyYWdtZW50LCBjcmVhdGUgbm9kZXMgZnJvbSBpdFxuICAgICAgLy8gTm90ZTogSW4gYm90aCBDaHJvbWUgMjEgYW5kIEZpcmVmb3ggMTUsIERPTSBlcnJvciAxMlxuICAgICAgLy8gaXMgdGhyb3duIGlmIHRoZSBmcmFnbWVudCBkb2Vzbid0IGJlZ2luIHdpdGggPFxuICAgICAgaWYgKHNlbGVjdG9yWzBdID09ICc8JyAmJiBmcmFnbWVudFJFLnRlc3Qoc2VsZWN0b3IpKVxuICAgICAgICBkb20gPSB6ZXB0by5mcmFnbWVudChzZWxlY3RvciwgUmVnRXhwLiQxLCBjb250ZXh0KSwgc2VsZWN0b3IgPSBudWxsXG4gICAgICAvLyBJZiB0aGVyZSdzIGEgY29udGV4dCwgY3JlYXRlIGEgY29sbGVjdGlvbiBvbiB0aGF0IGNvbnRleHQgZmlyc3QsIGFuZCBzZWxlY3RcbiAgICAgIC8vIG5vZGVzIGZyb20gdGhlcmVcbiAgICAgIGVsc2UgaWYgKGNvbnRleHQgIT09IHVuZGVmaW5lZCkgcmV0dXJuICQoY29udGV4dCkuZmluZChzZWxlY3RvcilcbiAgICAgIC8vIElmIGl0J3MgYSBDU1Mgc2VsZWN0b3IsIHVzZSBpdCB0byBzZWxlY3Qgbm9kZXMuXG4gICAgICBlbHNlIGRvbSA9IHplcHRvLnFzYShkb2N1bWVudCwgc2VsZWN0b3IpXG4gICAgfVxuICAgIC8vIElmIGEgZnVuY3Rpb24gaXMgZ2l2ZW4sIGNhbGwgaXQgd2hlbiB0aGUgRE9NIGlzIHJlYWR5XG4gICAgZWxzZSBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikpIHJldHVybiAkKGRvY3VtZW50KS5yZWFkeShzZWxlY3RvcilcbiAgICAvLyBJZiBhIFplcHRvIGNvbGxlY3Rpb24gaXMgZ2l2ZW4sIGp1c3QgcmV0dXJuIGl0XG4gICAgZWxzZSBpZiAoemVwdG8uaXNaKHNlbGVjdG9yKSkgcmV0dXJuIHNlbGVjdG9yXG4gICAgZWxzZSB7XG4gICAgICAvLyBub3JtYWxpemUgYXJyYXkgaWYgYW4gYXJyYXkgb2Ygbm9kZXMgaXMgZ2l2ZW5cbiAgICAgIGlmIChpc0FycmF5KHNlbGVjdG9yKSkgZG9tID0gY29tcGFjdChzZWxlY3RvcilcbiAgICAgIC8vIFdyYXAgRE9NIG5vZGVzLlxuICAgICAgZWxzZSBpZiAoaXNPYmplY3Qoc2VsZWN0b3IpKVxuICAgICAgICBkb20gPSBbc2VsZWN0b3JdLCBzZWxlY3RvciA9IG51bGxcbiAgICAgIC8vIElmIGl0J3MgYSBodG1sIGZyYWdtZW50LCBjcmVhdGUgbm9kZXMgZnJvbSBpdFxuICAgICAgZWxzZSBpZiAoZnJhZ21lbnRSRS50ZXN0KHNlbGVjdG9yKSlcbiAgICAgICAgZG9tID0gemVwdG8uZnJhZ21lbnQoc2VsZWN0b3IudHJpbSgpLCBSZWdFeHAuJDEsIGNvbnRleHQpLCBzZWxlY3RvciA9IG51bGxcbiAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb250ZXh0LCBjcmVhdGUgYSBjb2xsZWN0aW9uIG9uIHRoYXQgY29udGV4dCBmaXJzdCwgYW5kIHNlbGVjdFxuICAgICAgLy8gbm9kZXMgZnJvbSB0aGVyZVxuICAgICAgZWxzZSBpZiAoY29udGV4dCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gJChjb250ZXh0KS5maW5kKHNlbGVjdG9yKVxuICAgICAgLy8gQW5kIGxhc3QgYnV0IG5vIGxlYXN0LCBpZiBpdCdzIGEgQ1NTIHNlbGVjdG9yLCB1c2UgaXQgdG8gc2VsZWN0IG5vZGVzLlxuICAgICAgZWxzZSBkb20gPSB6ZXB0by5xc2EoZG9jdW1lbnQsIHNlbGVjdG9yKVxuICAgIH1cbiAgICAvLyBjcmVhdGUgYSBuZXcgWmVwdG8gY29sbGVjdGlvbiBmcm9tIHRoZSBub2RlcyBmb3VuZFxuICAgIHJldHVybiB6ZXB0by5aKGRvbSwgc2VsZWN0b3IpXG4gIH1cblxuICAvLyBgJGAgd2lsbCBiZSB0aGUgYmFzZSBgWmVwdG9gIG9iamVjdC4gV2hlbiBjYWxsaW5nIHRoaXNcbiAgLy8gZnVuY3Rpb24ganVzdCBjYWxsIGAkLnplcHRvLmluaXQsIHdoaWNoIG1ha2VzIHRoZSBpbXBsZW1lbnRhdGlvblxuICAvLyBkZXRhaWxzIG9mIHNlbGVjdGluZyBub2RlcyBhbmQgY3JlYXRpbmcgWmVwdG8gY29sbGVjdGlvbnNcbiAgLy8gcGF0Y2hhYmxlIGluIHBsdWdpbnMuXG4gICQgPSBmdW5jdGlvbihzZWxlY3RvciwgY29udGV4dCl7XG4gICAgcmV0dXJuIHplcHRvLmluaXQoc2VsZWN0b3IsIGNvbnRleHQpXG4gIH1cblxuICBmdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzb3VyY2UsIGRlZXApIHtcbiAgICBmb3IgKGtleSBpbiBzb3VyY2UpXG4gICAgICBpZiAoZGVlcCAmJiAoaXNQbGFpbk9iamVjdChzb3VyY2Vba2V5XSkgfHwgaXNBcnJheShzb3VyY2Vba2V5XSkpKSB7XG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHNvdXJjZVtrZXldKSAmJiAhaXNQbGFpbk9iamVjdCh0YXJnZXRba2V5XSkpXG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSB7fVxuICAgICAgICBpZiAoaXNBcnJheShzb3VyY2Vba2V5XSkgJiYgIWlzQXJyYXkodGFyZ2V0W2tleV0pKVxuICAgICAgICAgIHRhcmdldFtrZXldID0gW11cbiAgICAgICAgZXh0ZW5kKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgZGVlcClcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHNvdXJjZVtrZXldICE9PSB1bmRlZmluZWQpIHRhcmdldFtrZXldID0gc291cmNlW2tleV1cbiAgfVxuXG4gIC8vIENvcHkgYWxsIGJ1dCB1bmRlZmluZWQgcHJvcGVydGllcyBmcm9tIG9uZSBvciBtb3JlXG4gIC8vIG9iamVjdHMgdG8gdGhlIGB0YXJnZXRgIG9iamVjdC5cbiAgJC5leHRlbmQgPSBmdW5jdGlvbih0YXJnZXQpe1xuICAgIHZhciBkZWVwLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBkZWVwID0gdGFyZ2V0XG4gICAgICB0YXJnZXQgPSBhcmdzLnNoaWZ0KClcbiAgICB9XG4gICAgYXJncy5mb3JFYWNoKGZ1bmN0aW9uKGFyZyl7IGV4dGVuZCh0YXJnZXQsIGFyZywgZGVlcCkgfSlcbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICAvLyBgJC56ZXB0by5xc2FgIGlzIFplcHRvJ3MgQ1NTIHNlbGVjdG9yIGltcGxlbWVudGF0aW9uIHdoaWNoXG4gIC8vIHVzZXMgYGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGxgIGFuZCBvcHRpbWl6ZXMgZm9yIHNvbWUgc3BlY2lhbCBjYXNlcywgbGlrZSBgI2lkYC5cbiAgLy8gVGhpcyBtZXRob2QgY2FuIGJlIG92ZXJyaWRkZW4gaW4gcGx1Z2lucy5cbiAgemVwdG8ucXNhID0gZnVuY3Rpb24oZWxlbWVudCwgc2VsZWN0b3Ipe1xuICAgIHZhciBmb3VuZCxcbiAgICAgICAgbWF5YmVJRCA9IHNlbGVjdG9yWzBdID09ICcjJyxcbiAgICAgICAgbWF5YmVDbGFzcyA9ICFtYXliZUlEICYmIHNlbGVjdG9yWzBdID09ICcuJyxcbiAgICAgICAgbmFtZU9ubHkgPSBtYXliZUlEIHx8IG1heWJlQ2xhc3MgPyBzZWxlY3Rvci5zbGljZSgxKSA6IHNlbGVjdG9yLCAvLyBFbnN1cmUgdGhhdCBhIDEgY2hhciB0YWcgbmFtZSBzdGlsbCBnZXRzIGNoZWNrZWRcbiAgICAgICAgaXNTaW1wbGUgPSBzaW1wbGVTZWxlY3RvclJFLnRlc3QobmFtZU9ubHkpXG4gICAgcmV0dXJuIChlbGVtZW50LmdldEVsZW1lbnRCeUlkICYmIGlzU2ltcGxlICYmIG1heWJlSUQpID8gLy8gU2FmYXJpIERvY3VtZW50RnJhZ21lbnQgZG9lc24ndCBoYXZlIGdldEVsZW1lbnRCeUlkXG4gICAgICAoIChmb3VuZCA9IGVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQobmFtZU9ubHkpKSA/IFtmb3VuZF0gOiBbXSApIDpcbiAgICAgIChlbGVtZW50Lm5vZGVUeXBlICE9PSAxICYmIGVsZW1lbnQubm9kZVR5cGUgIT09IDkgJiYgZWxlbWVudC5ub2RlVHlwZSAhPT0gMTEpID8gW10gOlxuICAgICAgc2xpY2UuY2FsbChcbiAgICAgICAgaXNTaW1wbGUgJiYgIW1heWJlSUQgJiYgZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID8gLy8gRG9jdW1lbnRGcmFnbWVudCBkb2Vzbid0IGhhdmUgZ2V0RWxlbWVudHNCeUNsYXNzTmFtZS9UYWdOYW1lXG4gICAgICAgICAgbWF5YmVDbGFzcyA/IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShuYW1lT25seSkgOiAvLyBJZiBpdCdzIHNpbXBsZSwgaXQgY291bGQgYmUgYSBjbGFzc1xuICAgICAgICAgIGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpIDogLy8gT3IgYSB0YWdcbiAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpIC8vIE9yIGl0J3Mgbm90IHNpbXBsZSwgYW5kIHdlIG5lZWQgdG8gcXVlcnkgYWxsXG4gICAgICApXG4gIH1cblxuICBmdW5jdGlvbiBmaWx0ZXJlZChub2Rlcywgc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/ICQobm9kZXMpIDogJChub2RlcykuZmlsdGVyKHNlbGVjdG9yKVxuICB9XG5cbiAgJC5jb250YWlucyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyA/XG4gICAgZnVuY3Rpb24ocGFyZW50LCBub2RlKSB7XG4gICAgICByZXR1cm4gcGFyZW50ICE9PSBub2RlICYmIHBhcmVudC5jb250YWlucyhub2RlKVxuICAgIH0gOlxuICAgIGZ1bmN0aW9uKHBhcmVudCwgbm9kZSkge1xuICAgICAgd2hpbGUgKG5vZGUgJiYgKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKVxuICAgICAgICBpZiAobm9kZSA9PT0gcGFyZW50KSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gIGZ1bmN0aW9uIGZ1bmNBcmcoY29udGV4dCwgYXJnLCBpZHgsIHBheWxvYWQpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihhcmcpID8gYXJnLmNhbGwoY29udGV4dCwgaWR4LCBwYXlsb2FkKSA6IGFyZ1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0QXR0cmlidXRlKG5vZGUsIG5hbWUsIHZhbHVlKSB7XG4gICAgdmFsdWUgPT0gbnVsbCA/IG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpIDogbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpXG4gIH1cblxuICAvLyBhY2Nlc3MgY2xhc3NOYW1lIHByb3BlcnR5IHdoaWxlIHJlc3BlY3RpbmcgU1ZHQW5pbWF0ZWRTdHJpbmdcbiAgZnVuY3Rpb24gY2xhc3NOYW1lKG5vZGUsIHZhbHVlKXtcbiAgICB2YXIga2xhc3MgPSBub2RlLmNsYXNzTmFtZSB8fCAnJyxcbiAgICAgICAgc3ZnICAgPSBrbGFzcyAmJiBrbGFzcy5iYXNlVmFsICE9PSB1bmRlZmluZWRcblxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gc3ZnID8ga2xhc3MuYmFzZVZhbCA6IGtsYXNzXG4gICAgc3ZnID8gKGtsYXNzLmJhc2VWYWwgPSB2YWx1ZSkgOiAobm9kZS5jbGFzc05hbWUgPSB2YWx1ZSlcbiAgfVxuXG4gIC8vIFwidHJ1ZVwiICA9PiB0cnVlXG4gIC8vIFwiZmFsc2VcIiA9PiBmYWxzZVxuICAvLyBcIm51bGxcIiAgPT4gbnVsbFxuICAvLyBcIjQyXCIgICAgPT4gNDJcbiAgLy8gXCI0Mi41XCIgID0+IDQyLjVcbiAgLy8gXCIwOFwiICAgID0+IFwiMDhcIlxuICAvLyBKU09OICAgID0+IHBhcnNlIGlmIHZhbGlkXG4gIC8vIFN0cmluZyAgPT4gc2VsZlxuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZVZhbHVlKHZhbHVlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB2YWx1ZSA/XG4gICAgICAgIHZhbHVlID09IFwidHJ1ZVwiIHx8XG4gICAgICAgICggdmFsdWUgPT0gXCJmYWxzZVwiID8gZmFsc2UgOlxuICAgICAgICAgIHZhbHVlID09IFwibnVsbFwiID8gbnVsbCA6XG4gICAgICAgICAgK3ZhbHVlICsgXCJcIiA9PSB2YWx1ZSA/ICt2YWx1ZSA6XG4gICAgICAgICAgL15bXFxbXFx7XS8udGVzdCh2YWx1ZSkgPyAkLnBhcnNlSlNPTih2YWx1ZSkgOlxuICAgICAgICAgIHZhbHVlIClcbiAgICAgICAgOiB2YWx1ZVxuICAgIH0gY2F0Y2goZSkge1xuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuICB9XG5cbiAgJC50eXBlID0gdHlwZVxuICAkLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uXG4gICQuaXNXaW5kb3cgPSBpc1dpbmRvd1xuICAkLmlzQXJyYXkgPSBpc0FycmF5XG4gICQuaXNQbGFpbk9iamVjdCA9IGlzUGxhaW5PYmplY3RcblxuICAkLmlzRW1wdHlPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgbmFtZVxuICAgIGZvciAobmFtZSBpbiBvYmopIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAkLmlzTnVtZXJpYyA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhciBudW0gPSBOdW1iZXIodmFsKSwgdHlwZSA9IHR5cGVvZiB2YWxcbiAgICByZXR1cm4gdmFsICE9IG51bGwgJiYgdHlwZSAhPSAnYm9vbGVhbicgJiZcbiAgICAgICh0eXBlICE9ICdzdHJpbmcnIHx8IHZhbC5sZW5ndGgpICYmXG4gICAgICAhaXNOYU4obnVtKSAmJiBpc0Zpbml0ZShudW0pIHx8IGZhbHNlXG4gIH1cblxuICAkLmluQXJyYXkgPSBmdW5jdGlvbihlbGVtLCBhcnJheSwgaSl7XG4gICAgcmV0dXJuIGVtcHR5QXJyYXkuaW5kZXhPZi5jYWxsKGFycmF5LCBlbGVtLCBpKVxuICB9XG5cbiAgJC5jYW1lbENhc2UgPSBjYW1lbGl6ZVxuICAkLnRyaW0gPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyID09IG51bGwgPyBcIlwiIDogU3RyaW5nLnByb3RvdHlwZS50cmltLmNhbGwoc3RyKVxuICB9XG5cbiAgLy8gcGx1Z2luIGNvbXBhdGliaWxpdHlcbiAgJC51dWlkID0gMFxuICAkLnN1cHBvcnQgPSB7IH1cbiAgJC5leHByID0geyB9XG4gICQubm9vcCA9IGZ1bmN0aW9uKCkge31cblxuICAkLm1hcCA9IGZ1bmN0aW9uKGVsZW1lbnRzLCBjYWxsYmFjayl7XG4gICAgdmFyIHZhbHVlLCB2YWx1ZXMgPSBbXSwgaSwga2V5XG4gICAgaWYgKGxpa2VBcnJheShlbGVtZW50cykpXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBjYWxsYmFjayhlbGVtZW50c1tpXSwgaSlcbiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlcy5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIGVsc2VcbiAgICAgIGZvciAoa2V5IGluIGVsZW1lbnRzKSB7XG4gICAgICAgIHZhbHVlID0gY2FsbGJhY2soZWxlbWVudHNba2V5XSwga2V5KVxuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWVzLnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgcmV0dXJuIGZsYXR0ZW4odmFsdWVzKVxuICB9XG5cbiAgJC5lYWNoID0gZnVuY3Rpb24oZWxlbWVudHMsIGNhbGxiYWNrKXtcbiAgICB2YXIgaSwga2V5XG4gICAgaWYgKGxpa2VBcnJheShlbGVtZW50cykpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKGNhbGxiYWNrLmNhbGwoZWxlbWVudHNbaV0sIGksIGVsZW1lbnRzW2ldKSA9PT0gZmFsc2UpIHJldHVybiBlbGVtZW50c1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGtleSBpbiBlbGVtZW50cylcbiAgICAgICAgaWYgKGNhbGxiYWNrLmNhbGwoZWxlbWVudHNba2V5XSwga2V5LCBlbGVtZW50c1trZXldKSA9PT0gZmFsc2UpIHJldHVybiBlbGVtZW50c1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50c1xuICB9XG5cbiAgJC5ncmVwID0gZnVuY3Rpb24oZWxlbWVudHMsIGNhbGxiYWNrKXtcbiAgICByZXR1cm4gZmlsdGVyLmNhbGwoZWxlbWVudHMsIGNhbGxiYWNrKVxuICB9XG5cbiAgaWYgKHdpbmRvdy5KU09OKSAkLnBhcnNlSlNPTiA9IEpTT04ucGFyc2VcblxuICAvLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbiAgJC5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24oaSwgbmFtZSkge1xuICAgIGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpXG4gIH0pXG5cbiAgLy8gRGVmaW5lIG1ldGhvZHMgdGhhdCB3aWxsIGJlIGF2YWlsYWJsZSBvbiBhbGxcbiAgLy8gWmVwdG8gY29sbGVjdGlvbnNcbiAgJC5mbiA9IHtcbiAgICBjb25zdHJ1Y3RvcjogemVwdG8uWixcbiAgICBsZW5ndGg6IDAsXG5cbiAgICAvLyBCZWNhdXNlIGEgY29sbGVjdGlvbiBhY3RzIGxpa2UgYW4gYXJyYXlcbiAgICAvLyBjb3B5IG92ZXIgdGhlc2UgdXNlZnVsIGFycmF5IGZ1bmN0aW9ucy5cbiAgICBmb3JFYWNoOiBlbXB0eUFycmF5LmZvckVhY2gsXG4gICAgcmVkdWNlOiBlbXB0eUFycmF5LnJlZHVjZSxcbiAgICBwdXNoOiBlbXB0eUFycmF5LnB1c2gsXG4gICAgc29ydDogZW1wdHlBcnJheS5zb3J0LFxuICAgIHNwbGljZTogZW1wdHlBcnJheS5zcGxpY2UsXG4gICAgaW5kZXhPZjogZW1wdHlBcnJheS5pbmRleE9mLFxuICAgIGNvbmNhdDogZnVuY3Rpb24oKXtcbiAgICAgIHZhciBpLCB2YWx1ZSwgYXJncyA9IFtdXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gYXJndW1lbnRzW2ldXG4gICAgICAgIGFyZ3NbaV0gPSB6ZXB0by5pc1oodmFsdWUpID8gdmFsdWUudG9BcnJheSgpIDogdmFsdWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb25jYXQuYXBwbHkoemVwdG8uaXNaKHRoaXMpID8gdGhpcy50b0FycmF5KCkgOiB0aGlzLCBhcmdzKVxuICAgIH0sXG5cbiAgICAvLyBgbWFwYCBhbmQgYHNsaWNlYCBpbiB0aGUgalF1ZXJ5IEFQSSB3b3JrIGRpZmZlcmVudGx5XG4gICAgLy8gZnJvbSB0aGVpciBhcnJheSBjb3VudGVycGFydHNcbiAgICBtYXA6IGZ1bmN0aW9uKGZuKXtcbiAgICAgIHJldHVybiAkKCQubWFwKHRoaXMsIGZ1bmN0aW9uKGVsLCBpKXsgcmV0dXJuIGZuLmNhbGwoZWwsIGksIGVsKSB9KSlcbiAgICB9LFxuICAgIHNsaWNlOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuICQoc2xpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKSlcbiAgICB9LFxuXG4gICAgcmVhZHk6IGZ1bmN0aW9uKGNhbGxiYWNrKXtcbiAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgZG9jdW1lbnQuYm9keSBleGlzdHMgZm9yIElFIGFzIHRoYXQgYnJvd3NlciByZXBvcnRzXG4gICAgICAvLyBkb2N1bWVudCByZWFkeSB3aGVuIGl0IGhhc24ndCB5ZXQgY3JlYXRlZCB0aGUgYm9keSBlbGVtZW50XG4gICAgICBpZiAocmVhZHlSRS50ZXN0KGRvY3VtZW50LnJlYWR5U3RhdGUpICYmIGRvY3VtZW50LmJvZHkpIGNhbGxiYWNrKCQpXG4gICAgICBlbHNlIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpeyBjYWxsYmFjaygkKSB9LCBmYWxzZSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfSxcbiAgICBnZXQ6IGZ1bmN0aW9uKGlkeCl7XG4gICAgICByZXR1cm4gaWR4ID09PSB1bmRlZmluZWQgPyBzbGljZS5jYWxsKHRoaXMpIDogdGhpc1tpZHggPj0gMCA/IGlkeCA6IGlkeCArIHRoaXMubGVuZ3RoXVxuICAgIH0sXG4gICAgdG9BcnJheTogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZ2V0KCkgfSxcbiAgICBzaXplOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoXG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudE5vZGUgIT0gbnVsbClcbiAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcylcbiAgICAgIH0pXG4gICAgfSxcbiAgICBlYWNoOiBmdW5jdGlvbihjYWxsYmFjayl7XG4gICAgICBlbXB0eUFycmF5LmV2ZXJ5LmNhbGwodGhpcywgZnVuY3Rpb24oZWwsIGlkeCl7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKGVsLCBpZHgsIGVsKSAhPT0gZmFsc2VcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH0sXG4gICAgZmlsdGVyOiBmdW5jdGlvbihzZWxlY3Rvcil7XG4gICAgICBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikpIHJldHVybiB0aGlzLm5vdCh0aGlzLm5vdChzZWxlY3RvcikpXG4gICAgICByZXR1cm4gJChmaWx0ZXIuY2FsbCh0aGlzLCBmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgcmV0dXJuIHplcHRvLm1hdGNoZXMoZWxlbWVudCwgc2VsZWN0b3IpXG4gICAgICB9KSlcbiAgICB9LFxuICAgIGFkZDogZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCl7XG4gICAgICByZXR1cm4gJCh1bmlxKHRoaXMuY29uY2F0KCQoc2VsZWN0b3IsY29udGV4dCkpKSlcbiAgICB9LFxuICAgIGlzOiBmdW5jdGlvbihzZWxlY3Rvcil7XG4gICAgICByZXR1cm4gdGhpcy5sZW5ndGggPiAwICYmIHplcHRvLm1hdGNoZXModGhpc1swXSwgc2VsZWN0b3IpXG4gICAgfSxcbiAgICBub3Q6IGZ1bmN0aW9uKHNlbGVjdG9yKXtcbiAgICAgIHZhciBub2Rlcz1bXVxuICAgICAgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpICYmIHNlbGVjdG9yLmNhbGwgIT09IHVuZGVmaW5lZClcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG4gICAgICAgICAgaWYgKCFzZWxlY3Rvci5jYWxsKHRoaXMsaWR4KSkgbm9kZXMucHVzaCh0aGlzKVxuICAgICAgICB9KVxuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciBleGNsdWRlcyA9IHR5cGVvZiBzZWxlY3RvciA9PSAnc3RyaW5nJyA/IHRoaXMuZmlsdGVyKHNlbGVjdG9yKSA6XG4gICAgICAgICAgKGxpa2VBcnJheShzZWxlY3RvcikgJiYgaXNGdW5jdGlvbihzZWxlY3Rvci5pdGVtKSkgPyBzbGljZS5jYWxsKHNlbGVjdG9yKSA6ICQoc2VsZWN0b3IpXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbihlbCl7XG4gICAgICAgICAgaWYgKGV4Y2x1ZGVzLmluZGV4T2YoZWwpIDwgMCkgbm9kZXMucHVzaChlbClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiAkKG5vZGVzKVxuICAgIH0sXG4gICAgaGFzOiBmdW5jdGlvbihzZWxlY3Rvcil7XG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuIGlzT2JqZWN0KHNlbGVjdG9yKSA/XG4gICAgICAgICAgJC5jb250YWlucyh0aGlzLCBzZWxlY3RvcikgOlxuICAgICAgICAgICQodGhpcykuZmluZChzZWxlY3Rvcikuc2l6ZSgpXG4gICAgICB9KVxuICAgIH0sXG4gICAgZXE6IGZ1bmN0aW9uKGlkeCl7XG4gICAgICByZXR1cm4gaWR4ID09PSAtMSA/IHRoaXMuc2xpY2UoaWR4KSA6IHRoaXMuc2xpY2UoaWR4LCArIGlkeCArIDEpXG4gICAgfSxcbiAgICBmaXJzdDogZnVuY3Rpb24oKXtcbiAgICAgIHZhciBlbCA9IHRoaXNbMF1cbiAgICAgIHJldHVybiBlbCAmJiAhaXNPYmplY3QoZWwpID8gZWwgOiAkKGVsKVxuICAgIH0sXG4gICAgbGFzdDogZnVuY3Rpb24oKXtcbiAgICAgIHZhciBlbCA9IHRoaXNbdGhpcy5sZW5ndGggLSAxXVxuICAgICAgcmV0dXJuIGVsICYmICFpc09iamVjdChlbCkgPyBlbCA6ICQoZWwpXG4gICAgfSxcbiAgICBmaW5kOiBmdW5jdGlvbihzZWxlY3Rvcil7XG4gICAgICB2YXIgcmVzdWx0LCAkdGhpcyA9IHRoaXNcbiAgICAgIGlmICghc2VsZWN0b3IpIHJlc3VsdCA9ICQoKVxuICAgICAgZWxzZSBpZiAodHlwZW9mIHNlbGVjdG9yID09ICdvYmplY3QnKVxuICAgICAgICByZXN1bHQgPSAkKHNlbGVjdG9yKS5maWx0ZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgICB2YXIgbm9kZSA9IHRoaXNcbiAgICAgICAgICByZXR1cm4gZW1wdHlBcnJheS5zb21lLmNhbGwoJHRoaXMsIGZ1bmN0aW9uKHBhcmVudCl7XG4gICAgICAgICAgICByZXR1cm4gJC5jb250YWlucyhwYXJlbnQsIG5vZGUpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIGVsc2UgaWYgKHRoaXMubGVuZ3RoID09IDEpIHJlc3VsdCA9ICQoemVwdG8ucXNhKHRoaXNbMF0sIHNlbGVjdG9yKSlcbiAgICAgIGVsc2UgcmVzdWx0ID0gdGhpcy5tYXAoZnVuY3Rpb24oKXsgcmV0dXJuIHplcHRvLnFzYSh0aGlzLCBzZWxlY3RvcikgfSlcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9LFxuICAgIGNsb3Nlc3Q6IGZ1bmN0aW9uKHNlbGVjdG9yLCBjb250ZXh0KXtcbiAgICAgIHZhciBub2RlcyA9IFtdLCBjb2xsZWN0aW9uID0gdHlwZW9mIHNlbGVjdG9yID09ICdvYmplY3QnICYmICQoc2VsZWN0b3IpXG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24oXywgbm9kZSl7XG4gICAgICAgIHdoaWxlIChub2RlICYmICEoY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24uaW5kZXhPZihub2RlKSA+PSAwIDogemVwdG8ubWF0Y2hlcyhub2RlLCBzZWxlY3RvcikpKVxuICAgICAgICAgIG5vZGUgPSBub2RlICE9PSBjb250ZXh0ICYmICFpc0RvY3VtZW50KG5vZGUpICYmIG5vZGUucGFyZW50Tm9kZVxuICAgICAgICBpZiAobm9kZSAmJiBub2Rlcy5pbmRleE9mKG5vZGUpIDwgMCkgbm9kZXMucHVzaChub2RlKVxuICAgICAgfSlcbiAgICAgIHJldHVybiAkKG5vZGVzKVxuICAgIH0sXG4gICAgcGFyZW50czogZnVuY3Rpb24oc2VsZWN0b3Ipe1xuICAgICAgdmFyIGFuY2VzdG9ycyA9IFtdLCBub2RlcyA9IHRoaXNcbiAgICAgIHdoaWxlIChub2Rlcy5sZW5ndGggPiAwKVxuICAgICAgICBub2RlcyA9ICQubWFwKG5vZGVzLCBmdW5jdGlvbihub2RlKXtcbiAgICAgICAgICBpZiAoKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpICYmICFpc0RvY3VtZW50KG5vZGUpICYmIGFuY2VzdG9ycy5pbmRleE9mKG5vZGUpIDwgMCkge1xuICAgICAgICAgICAgYW5jZXN0b3JzLnB1c2gobm9kZSlcbiAgICAgICAgICAgIHJldHVybiBub2RlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgcmV0dXJuIGZpbHRlcmVkKGFuY2VzdG9ycywgc2VsZWN0b3IpXG4gICAgfSxcbiAgICBwYXJlbnQ6IGZ1bmN0aW9uKHNlbGVjdG9yKXtcbiAgICAgIHJldHVybiBmaWx0ZXJlZCh1bmlxKHRoaXMucGx1Y2soJ3BhcmVudE5vZGUnKSksIHNlbGVjdG9yKVxuICAgIH0sXG4gICAgY2hpbGRyZW46IGZ1bmN0aW9uKHNlbGVjdG9yKXtcbiAgICAgIHJldHVybiBmaWx0ZXJlZCh0aGlzLm1hcChmdW5jdGlvbigpeyByZXR1cm4gY2hpbGRyZW4odGhpcykgfSksIHNlbGVjdG9yKVxuICAgIH0sXG4gICAgY29udGVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5jb250ZW50RG9jdW1lbnQgfHwgc2xpY2UuY2FsbCh0aGlzLmNoaWxkTm9kZXMpIH0pXG4gICAgfSxcbiAgICBzaWJsaW5nczogZnVuY3Rpb24oc2VsZWN0b3Ipe1xuICAgICAgcmV0dXJuIGZpbHRlcmVkKHRoaXMubWFwKGZ1bmN0aW9uKGksIGVsKXtcbiAgICAgICAgcmV0dXJuIGZpbHRlci5jYWxsKGNoaWxkcmVuKGVsLnBhcmVudE5vZGUpLCBmdW5jdGlvbihjaGlsZCl7IHJldHVybiBjaGlsZCE9PWVsIH0pXG4gICAgICB9KSwgc2VsZWN0b3IpXG4gICAgfSxcbiAgICBlbXB0eTogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsgdGhpcy5pbm5lckhUTUwgPSAnJyB9KVxuICAgIH0sXG4gICAgLy8gYHBsdWNrYCBpcyBib3Jyb3dlZCBmcm9tIFByb3RvdHlwZS5qc1xuICAgIHBsdWNrOiBmdW5jdGlvbihwcm9wZXJ0eSl7XG4gICAgICByZXR1cm4gJC5tYXAodGhpcywgZnVuY3Rpb24oZWwpeyByZXR1cm4gZWxbcHJvcGVydHldIH0pXG4gICAgfSxcbiAgICBzaG93OiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPT0gXCJub25lXCIgJiYgKHRoaXMuc3R5bGUuZGlzcGxheSA9ICcnKVxuICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLCAnJykuZ2V0UHJvcGVydHlWYWx1ZShcImRpc3BsYXlcIikgPT0gXCJub25lXCIpXG4gICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gZGVmYXVsdERpc3BsYXkodGhpcy5ub2RlTmFtZSlcbiAgICAgIH0pXG4gICAgfSxcbiAgICByZXBsYWNlV2l0aDogZnVuY3Rpb24obmV3Q29udGVudCl7XG4gICAgICByZXR1cm4gdGhpcy5iZWZvcmUobmV3Q29udGVudCkucmVtb3ZlKClcbiAgICB9LFxuICAgIHdyYXA6IGZ1bmN0aW9uKHN0cnVjdHVyZSl7XG4gICAgICB2YXIgZnVuYyA9IGlzRnVuY3Rpb24oc3RydWN0dXJlKVxuICAgICAgaWYgKHRoaXNbMF0gJiYgIWZ1bmMpXG4gICAgICAgIHZhciBkb20gICA9ICQoc3RydWN0dXJlKS5nZXQoMCksXG4gICAgICAgICAgICBjbG9uZSA9IGRvbS5wYXJlbnROb2RlIHx8IHRoaXMubGVuZ3RoID4gMVxuXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgJCh0aGlzKS53cmFwQWxsKFxuICAgICAgICAgIGZ1bmMgPyBzdHJ1Y3R1cmUuY2FsbCh0aGlzLCBpbmRleCkgOlxuICAgICAgICAgICAgY2xvbmUgPyBkb20uY2xvbmVOb2RlKHRydWUpIDogZG9tXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfSxcbiAgICB3cmFwQWxsOiBmdW5jdGlvbihzdHJ1Y3R1cmUpe1xuICAgICAgaWYgKHRoaXNbMF0pIHtcbiAgICAgICAgJCh0aGlzWzBdKS5iZWZvcmUoc3RydWN0dXJlID0gJChzdHJ1Y3R1cmUpKVxuICAgICAgICB2YXIgY2hpbGRyZW5cbiAgICAgICAgLy8gZHJpbGwgZG93biB0byB0aGUgaW5tb3N0IGVsZW1lbnRcbiAgICAgICAgd2hpbGUgKChjaGlsZHJlbiA9IHN0cnVjdHVyZS5jaGlsZHJlbigpKS5sZW5ndGgpIHN0cnVjdHVyZSA9IGNoaWxkcmVuLmZpcnN0KClcbiAgICAgICAgJChzdHJ1Y3R1cmUpLmFwcGVuZCh0aGlzKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9LFxuICAgIHdyYXBJbm5lcjogZnVuY3Rpb24oc3RydWN0dXJlKXtcbiAgICAgIHZhciBmdW5jID0gaXNGdW5jdGlvbihzdHJ1Y3R1cmUpXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpLCBjb250ZW50cyA9IHNlbGYuY29udGVudHMoKSxcbiAgICAgICAgICAgIGRvbSAgPSBmdW5jID8gc3RydWN0dXJlLmNhbGwodGhpcywgaW5kZXgpIDogc3RydWN0dXJlXG4gICAgICAgIGNvbnRlbnRzLmxlbmd0aCA/IGNvbnRlbnRzLndyYXBBbGwoZG9tKSA6IHNlbGYuYXBwZW5kKGRvbSlcbiAgICAgIH0pXG4gICAgfSxcbiAgICB1bndyYXA6IGZ1bmN0aW9uKCl7XG4gICAgICB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgJCh0aGlzKS5yZXBsYWNlV2l0aCgkKHRoaXMpLmNoaWxkcmVuKCkpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9LFxuICAgIGNsb25lOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmNsb25lTm9kZSh0cnVlKSB9KVxuICAgIH0sXG4gICAgaGlkZTogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiB0aGlzLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpXG4gICAgfSxcbiAgICB0b2dnbGU6IGZ1bmN0aW9uKHNldHRpbmcpe1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZWwgPSAkKHRoaXMpXG4gICAgICAgIDsoc2V0dGluZyA9PT0gdW5kZWZpbmVkID8gZWwuY3NzKFwiZGlzcGxheVwiKSA9PSBcIm5vbmVcIiA6IHNldHRpbmcpID8gZWwuc2hvdygpIDogZWwuaGlkZSgpXG4gICAgICB9KVxuICAgIH0sXG4gICAgcHJldjogZnVuY3Rpb24oc2VsZWN0b3IpeyByZXR1cm4gJCh0aGlzLnBsdWNrKCdwcmV2aW91c0VsZW1lbnRTaWJsaW5nJykpLmZpbHRlcihzZWxlY3RvciB8fCAnKicpIH0sXG4gICAgbmV4dDogZnVuY3Rpb24oc2VsZWN0b3IpeyByZXR1cm4gJCh0aGlzLnBsdWNrKCduZXh0RWxlbWVudFNpYmxpbmcnKSkuZmlsdGVyKHNlbGVjdG9yIHx8ICcqJykgfSxcbiAgICBodG1sOiBmdW5jdGlvbihodG1sKXtcbiAgICAgIHJldHVybiAwIGluIGFyZ3VtZW50cyA/XG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbihpZHgpe1xuICAgICAgICAgIHZhciBvcmlnaW5IdG1sID0gdGhpcy5pbm5lckhUTUxcbiAgICAgICAgICAkKHRoaXMpLmVtcHR5KCkuYXBwZW5kKCBmdW5jQXJnKHRoaXMsIGh0bWwsIGlkeCwgb3JpZ2luSHRtbCkgKVxuICAgICAgICB9KSA6XG4gICAgICAgICgwIGluIHRoaXMgPyB0aGlzWzBdLmlubmVySFRNTCA6IG51bGwpXG4gICAgfSxcbiAgICB0ZXh0OiBmdW5jdGlvbih0ZXh0KXtcbiAgICAgIHJldHVybiAwIGluIGFyZ3VtZW50cyA/XG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbihpZHgpe1xuICAgICAgICAgIHZhciBuZXdUZXh0ID0gZnVuY0FyZyh0aGlzLCB0ZXh0LCBpZHgsIHRoaXMudGV4dENvbnRlbnQpXG4gICAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IG5ld1RleHQgPT0gbnVsbCA/ICcnIDogJycrbmV3VGV4dFxuICAgICAgICB9KSA6XG4gICAgICAgICgwIGluIHRoaXMgPyB0aGlzLnBsdWNrKCd0ZXh0Q29udGVudCcpLmpvaW4oXCJcIikgOiBudWxsKVxuICAgIH0sXG4gICAgYXR0cjogZnVuY3Rpb24obmFtZSwgdmFsdWUpe1xuICAgICAgdmFyIHJlc3VsdFxuICAgICAgcmV0dXJuICh0eXBlb2YgbmFtZSA9PSAnc3RyaW5nJyAmJiAhKDEgaW4gYXJndW1lbnRzKSkgP1xuICAgICAgICAoMCBpbiB0aGlzICYmIHRoaXNbMF0ubm9kZVR5cGUgPT0gMSAmJiAocmVzdWx0ID0gdGhpc1swXS5nZXRBdHRyaWJ1dGUobmFtZSkpICE9IG51bGwgPyByZXN1bHQgOiB1bmRlZmluZWQpIDpcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG4gICAgICAgICAgaWYgKHRoaXMubm9kZVR5cGUgIT09IDEpIHJldHVyblxuICAgICAgICAgIGlmIChpc09iamVjdChuYW1lKSkgZm9yIChrZXkgaW4gbmFtZSkgc2V0QXR0cmlidXRlKHRoaXMsIGtleSwgbmFtZVtrZXldKVxuICAgICAgICAgIGVsc2Ugc2V0QXR0cmlidXRlKHRoaXMsIG5hbWUsIGZ1bmNBcmcodGhpcywgdmFsdWUsIGlkeCwgdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSkpKVxuICAgICAgICB9KVxuICAgIH0sXG4gICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24obmFtZSl7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7IHRoaXMubm9kZVR5cGUgPT09IDEgJiYgbmFtZS5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24oYXR0cmlidXRlKXtcbiAgICAgICAgc2V0QXR0cmlidXRlKHRoaXMsIGF0dHJpYnV0ZSlcbiAgICAgIH0sIHRoaXMpfSlcbiAgICB9LFxuICAgIHByb3A6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKXtcbiAgICAgIG5hbWUgPSBwcm9wTWFwW25hbWVdIHx8IG5hbWVcbiAgICAgIHJldHVybiAoMSBpbiBhcmd1bWVudHMpID9cbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG4gICAgICAgICAgdGhpc1tuYW1lXSA9IGZ1bmNBcmcodGhpcywgdmFsdWUsIGlkeCwgdGhpc1tuYW1lXSlcbiAgICAgICAgfSkgOlxuICAgICAgICAodGhpc1swXSAmJiB0aGlzWzBdW25hbWVdKVxuICAgIH0sXG4gICAgcmVtb3ZlUHJvcDogZnVuY3Rpb24obmFtZSl7XG4gICAgICBuYW1lID0gcHJvcE1hcFtuYW1lXSB8fCBuYW1lXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7IGRlbGV0ZSB0aGlzW25hbWVdIH0pXG4gICAgfSxcbiAgICBkYXRhOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSl7XG4gICAgICB2YXIgYXR0ck5hbWUgPSAnZGF0YS0nICsgbmFtZS5yZXBsYWNlKGNhcGl0YWxSRSwgJy0kMScpLnRvTG93ZXJDYXNlKClcblxuICAgICAgdmFyIGRhdGEgPSAoMSBpbiBhcmd1bWVudHMpID9cbiAgICAgICAgdGhpcy5hdHRyKGF0dHJOYW1lLCB2YWx1ZSkgOlxuICAgICAgICB0aGlzLmF0dHIoYXR0ck5hbWUpXG5cbiAgICAgIHJldHVybiBkYXRhICE9PSBudWxsID8gZGVzZXJpYWxpemVWYWx1ZShkYXRhKSA6IHVuZGVmaW5lZFxuICAgIH0sXG4gICAgdmFsOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBpZiAoMCBpbiBhcmd1bWVudHMpIHtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHZhbHVlID0gXCJcIlxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG4gICAgICAgICAgdGhpcy52YWx1ZSA9IGZ1bmNBcmcodGhpcywgdmFsdWUsIGlkeCwgdGhpcy52YWx1ZSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzWzBdICYmICh0aGlzWzBdLm11bHRpcGxlID9cbiAgICAgICAgICAgJCh0aGlzWzBdKS5maW5kKCdvcHRpb24nKS5maWx0ZXIoZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuc2VsZWN0ZWQgfSkucGx1Y2soJ3ZhbHVlJykgOlxuICAgICAgICAgICB0aGlzWzBdLnZhbHVlKVxuICAgICAgfVxuICAgIH0sXG4gICAgb2Zmc2V0OiBmdW5jdGlvbihjb29yZGluYXRlcyl7XG4gICAgICBpZiAoY29vcmRpbmF0ZXMpIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgY29vcmRzID0gZnVuY0FyZyh0aGlzLCBjb29yZGluYXRlcywgaW5kZXgsICR0aGlzLm9mZnNldCgpKSxcbiAgICAgICAgICAgIHBhcmVudE9mZnNldCA9ICR0aGlzLm9mZnNldFBhcmVudCgpLm9mZnNldCgpLFxuICAgICAgICAgICAgcHJvcHMgPSB7XG4gICAgICAgICAgICAgIHRvcDogIGNvb3Jkcy50b3AgIC0gcGFyZW50T2Zmc2V0LnRvcCxcbiAgICAgICAgICAgICAgbGVmdDogY29vcmRzLmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmICgkdGhpcy5jc3MoJ3Bvc2l0aW9uJykgPT0gJ3N0YXRpYycpIHByb3BzWydwb3NpdGlvbiddID0gJ3JlbGF0aXZlJ1xuICAgICAgICAkdGhpcy5jc3MocHJvcHMpXG4gICAgICB9KVxuICAgICAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuIG51bGxcbiAgICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgIT09IHRoaXNbMF0gJiYgISQuY29udGFpbnMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzWzBdKSlcbiAgICAgICAgcmV0dXJuIHt0b3A6IDAsIGxlZnQ6IDB9XG4gICAgICB2YXIgb2JqID0gdGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVmdDogb2JqLmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgICAgIHRvcDogb2JqLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCxcbiAgICAgICAgd2lkdGg6IE1hdGgucm91bmQob2JqLndpZHRoKSxcbiAgICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKG9iai5oZWlnaHQpXG4gICAgICB9XG4gICAgfSxcbiAgICBjc3M6IGZ1bmN0aW9uKHByb3BlcnR5LCB2YWx1ZSl7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzWzBdXG4gICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVyblxuICAgICAgICAgIHJldHVybiBlbGVtZW50LnN0eWxlW2NhbWVsaXplKHByb3BlcnR5KV0gfHwgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCAnJykuZ2V0UHJvcGVydHlWYWx1ZShwcm9wZXJ0eSlcbiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHByb3BlcnR5KSkge1xuICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgICAgICAgdmFyIHByb3BzID0ge31cbiAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgJycpXG4gICAgICAgICAgJC5lYWNoKHByb3BlcnR5LCBmdW5jdGlvbihfLCBwcm9wKXtcbiAgICAgICAgICAgIHByb3BzW3Byb3BdID0gKGVsZW1lbnQuc3R5bGVbY2FtZWxpemUocHJvcCldIHx8IGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShwcm9wKSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiBwcm9wc1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBjc3MgPSAnJ1xuICAgICAgaWYgKHR5cGUocHJvcGVydHkpID09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApXG4gICAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7IHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoZGFzaGVyaXplKHByb3BlcnR5KSkgfSlcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGNzcyA9IGRhc2hlcml6ZShwcm9wZXJ0eSkgKyBcIjpcIiArIG1heWJlQWRkUHgocHJvcGVydHksIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChrZXkgaW4gcHJvcGVydHkpXG4gICAgICAgICAgaWYgKCFwcm9wZXJ0eVtrZXldICYmIHByb3BlcnR5W2tleV0gIT09IDApXG4gICAgICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKXsgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShkYXNoZXJpemUoa2V5KSkgfSlcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBjc3MgKz0gZGFzaGVyaXplKGtleSkgKyAnOicgKyBtYXliZUFkZFB4KGtleSwgcHJvcGVydHlba2V5XSkgKyAnOydcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpeyB0aGlzLnN0eWxlLmNzc1RleHQgKz0gJzsnICsgY3NzIH0pXG4gICAgfSxcbiAgICBpbmRleDogZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICByZXR1cm4gZWxlbWVudCA/IHRoaXMuaW5kZXhPZigkKGVsZW1lbnQpWzBdKSA6IHRoaXMucGFyZW50KCkuY2hpbGRyZW4oKS5pbmRleE9mKHRoaXNbMF0pXG4gICAgfSxcbiAgICBoYXNDbGFzczogZnVuY3Rpb24obmFtZSl7XG4gICAgICBpZiAoIW5hbWUpIHJldHVybiBmYWxzZVxuICAgICAgcmV0dXJuIGVtcHR5QXJyYXkuc29tZS5jYWxsKHRoaXMsIGZ1bmN0aW9uKGVsKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVzdChjbGFzc05hbWUoZWwpKVxuICAgICAgfSwgY2xhc3NSRShuYW1lKSlcbiAgICB9LFxuICAgIGFkZENsYXNzOiBmdW5jdGlvbihuYW1lKXtcbiAgICAgIGlmICghbmFtZSkgcmV0dXJuIHRoaXNcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaWR4KXtcbiAgICAgICAgaWYgKCEoJ2NsYXNzTmFtZScgaW4gdGhpcykpIHJldHVyblxuICAgICAgICBjbGFzc0xpc3QgPSBbXVxuICAgICAgICB2YXIgY2xzID0gY2xhc3NOYW1lKHRoaXMpLCBuZXdOYW1lID0gZnVuY0FyZyh0aGlzLCBuYW1lLCBpZHgsIGNscylcbiAgICAgICAgbmV3TmFtZS5zcGxpdCgvXFxzKy9nKS5mb3JFYWNoKGZ1bmN0aW9uKGtsYXNzKXtcbiAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3Moa2xhc3MpKSBjbGFzc0xpc3QucHVzaChrbGFzcylcbiAgICAgICAgfSwgdGhpcylcbiAgICAgICAgY2xhc3NMaXN0Lmxlbmd0aCAmJiBjbGFzc05hbWUodGhpcywgY2xzICsgKGNscyA/IFwiIFwiIDogXCJcIikgKyBjbGFzc0xpc3Quam9pbihcIiBcIikpXG4gICAgICB9KVxuICAgIH0sXG4gICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKG5hbWUpe1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpZHgpe1xuICAgICAgICBpZiAoISgnY2xhc3NOYW1lJyBpbiB0aGlzKSkgcmV0dXJuXG4gICAgICAgIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHJldHVybiBjbGFzc05hbWUodGhpcywgJycpXG4gICAgICAgIGNsYXNzTGlzdCA9IGNsYXNzTmFtZSh0aGlzKVxuICAgICAgICBmdW5jQXJnKHRoaXMsIG5hbWUsIGlkeCwgY2xhc3NMaXN0KS5zcGxpdCgvXFxzKy9nKS5mb3JFYWNoKGZ1bmN0aW9uKGtsYXNzKXtcbiAgICAgICAgICBjbGFzc0xpc3QgPSBjbGFzc0xpc3QucmVwbGFjZShjbGFzc1JFKGtsYXNzKSwgXCIgXCIpXG4gICAgICAgIH0pXG4gICAgICAgIGNsYXNzTmFtZSh0aGlzLCBjbGFzc0xpc3QudHJpbSgpKVxuICAgICAgfSlcbiAgICB9LFxuICAgIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbihuYW1lLCB3aGVuKXtcbiAgICAgIGlmICghbmFtZSkgcmV0dXJuIHRoaXNcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaWR4KXtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSwgbmFtZXMgPSBmdW5jQXJnKHRoaXMsIG5hbWUsIGlkeCwgY2xhc3NOYW1lKHRoaXMpKVxuICAgICAgICBuYW1lcy5zcGxpdCgvXFxzKy9nKS5mb3JFYWNoKGZ1bmN0aW9uKGtsYXNzKXtcbiAgICAgICAgICAod2hlbiA9PT0gdW5kZWZpbmVkID8gISR0aGlzLmhhc0NsYXNzKGtsYXNzKSA6IHdoZW4pID9cbiAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKGtsYXNzKSA6ICR0aGlzLnJlbW92ZUNsYXNzKGtsYXNzKVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9LFxuICAgIHNjcm9sbFRvcDogZnVuY3Rpb24odmFsdWUpe1xuICAgICAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuXG4gICAgICB2YXIgaGFzU2Nyb2xsVG9wID0gJ3Njcm9sbFRvcCcgaW4gdGhpc1swXVxuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBoYXNTY3JvbGxUb3AgPyB0aGlzWzBdLnNjcm9sbFRvcCA6IHRoaXNbMF0ucGFnZVlPZmZzZXRcbiAgICAgIHJldHVybiB0aGlzLmVhY2goaGFzU2Nyb2xsVG9wID9cbiAgICAgICAgZnVuY3Rpb24oKXsgdGhpcy5zY3JvbGxUb3AgPSB2YWx1ZSB9IDpcbiAgICAgICAgZnVuY3Rpb24oKXsgdGhpcy5zY3JvbGxUbyh0aGlzLnNjcm9sbFgsIHZhbHVlKSB9KVxuICAgIH0sXG4gICAgc2Nyb2xsTGVmdDogZnVuY3Rpb24odmFsdWUpe1xuICAgICAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuXG4gICAgICB2YXIgaGFzU2Nyb2xsTGVmdCA9ICdzY3JvbGxMZWZ0JyBpbiB0aGlzWzBdXG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGhhc1Njcm9sbExlZnQgPyB0aGlzWzBdLnNjcm9sbExlZnQgOiB0aGlzWzBdLnBhZ2VYT2Zmc2V0XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGhhc1Njcm9sbExlZnQgP1xuICAgICAgICBmdW5jdGlvbigpeyB0aGlzLnNjcm9sbExlZnQgPSB2YWx1ZSB9IDpcbiAgICAgICAgZnVuY3Rpb24oKXsgdGhpcy5zY3JvbGxUbyh2YWx1ZSwgdGhpcy5zY3JvbGxZKSB9KVxuICAgIH0sXG4gICAgcG9zaXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuXG5cbiAgICAgIHZhciBlbGVtID0gdGhpc1swXSxcbiAgICAgICAgLy8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnRcbiAgICAgICAgb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKSxcbiAgICAgICAgLy8gR2V0IGNvcnJlY3Qgb2Zmc2V0c1xuICAgICAgICBvZmZzZXQgICAgICAgPSB0aGlzLm9mZnNldCgpLFxuICAgICAgICBwYXJlbnRPZmZzZXQgPSByb290Tm9kZVJFLnRlc3Qob2Zmc2V0UGFyZW50WzBdLm5vZGVOYW1lKSA/IHsgdG9wOiAwLCBsZWZ0OiAwIH0gOiBvZmZzZXRQYXJlbnQub2Zmc2V0KClcblxuICAgICAgLy8gU3VidHJhY3QgZWxlbWVudCBtYXJnaW5zXG4gICAgICAvLyBub3RlOiB3aGVuIGFuIGVsZW1lbnQgaGFzIG1hcmdpbjogYXV0byB0aGUgb2Zmc2V0TGVmdCBhbmQgbWFyZ2luTGVmdFxuICAgICAgLy8gYXJlIHRoZSBzYW1lIGluIFNhZmFyaSBjYXVzaW5nIG9mZnNldC5sZWZ0IHRvIGluY29ycmVjdGx5IGJlIDBcbiAgICAgIG9mZnNldC50b3AgIC09IHBhcnNlRmxvYXQoICQoZWxlbSkuY3NzKCdtYXJnaW4tdG9wJykgKSB8fCAwXG4gICAgICBvZmZzZXQubGVmdCAtPSBwYXJzZUZsb2F0KCAkKGVsZW0pLmNzcygnbWFyZ2luLWxlZnQnKSApIHx8IDBcblxuICAgICAgLy8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzXG4gICAgICBwYXJlbnRPZmZzZXQudG9wICArPSBwYXJzZUZsb2F0KCAkKG9mZnNldFBhcmVudFswXSkuY3NzKCdib3JkZXItdG9wLXdpZHRoJykgKSB8fCAwXG4gICAgICBwYXJlbnRPZmZzZXQubGVmdCArPSBwYXJzZUZsb2F0KCAkKG9mZnNldFBhcmVudFswXSkuY3NzKCdib3JkZXItbGVmdC13aWR0aCcpICkgfHwgMFxuXG4gICAgICAvLyBTdWJ0cmFjdCB0aGUgdHdvIG9mZnNldHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogIG9mZnNldC50b3AgIC0gcGFyZW50T2Zmc2V0LnRvcCxcbiAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdFxuICAgICAgfVxuICAgIH0sXG4gICAgb2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnQuYm9keVxuICAgICAgICB3aGlsZSAocGFyZW50ICYmICFyb290Tm9kZVJFLnRlc3QocGFyZW50Lm5vZGVOYW1lKSAmJiAkKHBhcmVudCkuY3NzKFwicG9zaXRpb25cIikgPT0gXCJzdGF0aWNcIilcbiAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQub2Zmc2V0UGFyZW50XG4gICAgICAgIHJldHVybiBwYXJlbnRcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gZm9yIG5vd1xuICAkLmZuLmRldGFjaCA9ICQuZm4ucmVtb3ZlXG5cbiAgLy8gR2VuZXJhdGUgdGhlIGB3aWR0aGAgYW5kIGBoZWlnaHRgIGZ1bmN0aW9uc1xuICA7Wyd3aWR0aCcsICdoZWlnaHQnXS5mb3JFYWNoKGZ1bmN0aW9uKGRpbWVuc2lvbil7XG4gICAgdmFyIGRpbWVuc2lvblByb3BlcnR5ID1cbiAgICAgIGRpbWVuc2lvbi5yZXBsYWNlKC8uLywgZnVuY3Rpb24obSl7IHJldHVybiBtWzBdLnRvVXBwZXJDYXNlKCkgfSlcblxuICAgICQuZm5bZGltZW5zaW9uXSA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIHZhciBvZmZzZXQsIGVsID0gdGhpc1swXVxuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiBpc1dpbmRvdyhlbCkgPyBlbFsnaW5uZXInICsgZGltZW5zaW9uUHJvcGVydHldIDpcbiAgICAgICAgaXNEb2N1bWVudChlbCkgPyBlbC5kb2N1bWVudEVsZW1lbnRbJ3Njcm9sbCcgKyBkaW1lbnNpb25Qcm9wZXJ0eV0gOlxuICAgICAgICAob2Zmc2V0ID0gdGhpcy5vZmZzZXQoKSkgJiYgb2Zmc2V0W2RpbWVuc2lvbl1cbiAgICAgIGVsc2UgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpZHgpe1xuICAgICAgICBlbCA9ICQodGhpcylcbiAgICAgICAgZWwuY3NzKGRpbWVuc2lvbiwgZnVuY0FyZyh0aGlzLCB2YWx1ZSwgaWR4LCBlbFtkaW1lbnNpb25dKCkpKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgZnVuY3Rpb24gdHJhdmVyc2VOb2RlKG5vZGUsIGZ1bikge1xuICAgIGZ1bihub2RlKVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspXG4gICAgICB0cmF2ZXJzZU5vZGUobm9kZS5jaGlsZE5vZGVzW2ldLCBmdW4pXG4gIH1cblxuICAvLyBHZW5lcmF0ZSB0aGUgYGFmdGVyYCwgYHByZXBlbmRgLCBgYmVmb3JlYCwgYGFwcGVuZGAsXG4gIC8vIGBpbnNlcnRBZnRlcmAsIGBpbnNlcnRCZWZvcmVgLCBgYXBwZW5kVG9gLCBhbmQgYHByZXBlbmRUb2AgbWV0aG9kcy5cbiAgYWRqYWNlbmN5T3BlcmF0b3JzLmZvckVhY2goZnVuY3Rpb24ob3BlcmF0b3IsIG9wZXJhdG9ySW5kZXgpIHtcbiAgICB2YXIgaW5zaWRlID0gb3BlcmF0b3JJbmRleCAlIDIgLy89PiBwcmVwZW5kLCBhcHBlbmRcblxuICAgICQuZm5bb3BlcmF0b3JdID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vIGFyZ3VtZW50cyBjYW4gYmUgbm9kZXMsIGFycmF5cyBvZiBub2RlcywgWmVwdG8gb2JqZWN0cyBhbmQgSFRNTCBzdHJpbmdzXG4gICAgICB2YXIgYXJnVHlwZSwgbm9kZXMgPSAkLm1hcChhcmd1bWVudHMsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgICAgdmFyIGFyciA9IFtdXG4gICAgICAgICAgICBhcmdUeXBlID0gdHlwZShhcmcpXG4gICAgICAgICAgICBpZiAoYXJnVHlwZSA9PSBcImFycmF5XCIpIHtcbiAgICAgICAgICAgICAgYXJnLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwubm9kZVR5cGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGFyci5wdXNoKGVsKVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCQuemVwdG8uaXNaKGVsKSkgcmV0dXJuIGFyciA9IGFyci5jb25jYXQoZWwuZ2V0KCkpXG4gICAgICAgICAgICAgICAgYXJyID0gYXJyLmNvbmNhdCh6ZXB0by5mcmFnbWVudChlbCkpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIHJldHVybiBhcnJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcmdUeXBlID09IFwib2JqZWN0XCIgfHwgYXJnID09IG51bGwgP1xuICAgICAgICAgICAgICBhcmcgOiB6ZXB0by5mcmFnbWVudChhcmcpXG4gICAgICAgICAgfSksXG4gICAgICAgICAgcGFyZW50LCBjb3B5QnlDbG9uZSA9IHRoaXMubGVuZ3RoID4gMVxuICAgICAgaWYgKG5vZGVzLmxlbmd0aCA8IDEpIHJldHVybiB0aGlzXG5cbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oXywgdGFyZ2V0KXtcbiAgICAgICAgcGFyZW50ID0gaW5zaWRlID8gdGFyZ2V0IDogdGFyZ2V0LnBhcmVudE5vZGVcblxuICAgICAgICAvLyBjb252ZXJ0IGFsbCBtZXRob2RzIHRvIGEgXCJiZWZvcmVcIiBvcGVyYXRpb25cbiAgICAgICAgdGFyZ2V0ID0gb3BlcmF0b3JJbmRleCA9PSAwID8gdGFyZ2V0Lm5leHRTaWJsaW5nIDpcbiAgICAgICAgICAgICAgICAgb3BlcmF0b3JJbmRleCA9PSAxID8gdGFyZ2V0LmZpcnN0Q2hpbGQgOlxuICAgICAgICAgICAgICAgICBvcGVyYXRvckluZGV4ID09IDIgPyB0YXJnZXQgOlxuICAgICAgICAgICAgICAgICBudWxsXG5cbiAgICAgICAgdmFyIHBhcmVudEluRG9jdW1lbnQgPSAkLmNvbnRhaW5zKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgcGFyZW50KVxuXG4gICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24obm9kZSl7XG4gICAgICAgICAgaWYgKGNvcHlCeUNsb25lKSBub2RlID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSlcbiAgICAgICAgICBlbHNlIGlmICghcGFyZW50KSByZXR1cm4gJChub2RlKS5yZW1vdmUoKVxuXG4gICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCB0YXJnZXQpXG4gICAgICAgICAgaWYgKHBhcmVudEluRG9jdW1lbnQpIHRyYXZlcnNlTm9kZShub2RlLCBmdW5jdGlvbihlbCl7XG4gICAgICAgICAgICBpZiAoZWwubm9kZU5hbWUgIT0gbnVsbCAmJiBlbC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnU0NSSVBUJyAmJlxuICAgICAgICAgICAgICAgKCFlbC50eXBlIHx8IGVsLnR5cGUgPT09ICd0ZXh0L2phdmFzY3JpcHQnKSAmJiAhZWwuc3JjKXtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGVsLm93bmVyRG9jdW1lbnQgPyBlbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IDogd2luZG93XG4gICAgICAgICAgICAgIHRhcmdldFsnZXZhbCddLmNhbGwodGFyZ2V0LCBlbC5pbm5lckhUTUwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gYWZ0ZXIgICAgPT4gaW5zZXJ0QWZ0ZXJcbiAgICAvLyBwcmVwZW5kICA9PiBwcmVwZW5kVG9cbiAgICAvLyBiZWZvcmUgICA9PiBpbnNlcnRCZWZvcmVcbiAgICAvLyBhcHBlbmQgICA9PiBhcHBlbmRUb1xuICAgICQuZm5baW5zaWRlID8gb3BlcmF0b3IrJ1RvJyA6ICdpbnNlcnQnKyhvcGVyYXRvckluZGV4ID8gJ0JlZm9yZScgOiAnQWZ0ZXInKV0gPSBmdW5jdGlvbihodG1sKXtcbiAgICAgICQoaHRtbClbb3BlcmF0b3JdKHRoaXMpXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgfSlcblxuICB6ZXB0by5aLnByb3RvdHlwZSA9IFoucHJvdG90eXBlID0gJC5mblxuXG4gIC8vIEV4cG9ydCBpbnRlcm5hbCBBUEkgZnVuY3Rpb25zIGluIHRoZSBgJC56ZXB0b2AgbmFtZXNwYWNlXG4gIHplcHRvLnVuaXEgPSB1bmlxXG4gIHplcHRvLmRlc2VyaWFsaXplVmFsdWUgPSBkZXNlcmlhbGl6ZVZhbHVlXG4gICQuemVwdG8gPSB6ZXB0b1xuXG4gIHJldHVybiAkXG59KSgpXG5cbndpbmRvdy5aZXB0byA9IFplcHRvXG53aW5kb3cuJCA9PT0gdW5kZWZpbmVkICYmICh3aW5kb3cuJCA9IFplcHRvKVxuXG47KGZ1bmN0aW9uKCQpe1xuICB2YXIgX3ppZCA9IDEsIHVuZGVmaW5lZCxcbiAgICAgIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICAgICAgaXNGdW5jdGlvbiA9ICQuaXNGdW5jdGlvbixcbiAgICAgIGlzU3RyaW5nID0gZnVuY3Rpb24ob2JqKXsgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ3N0cmluZycgfSxcbiAgICAgIGhhbmRsZXJzID0ge30sXG4gICAgICBzcGVjaWFsRXZlbnRzPXt9LFxuICAgICAgZm9jdXNpblN1cHBvcnRlZCA9ICdvbmZvY3VzaW4nIGluIHdpbmRvdyxcbiAgICAgIGZvY3VzID0geyBmb2N1czogJ2ZvY3VzaW4nLCBibHVyOiAnZm9jdXNvdXQnIH0sXG4gICAgICBob3ZlciA9IHsgbW91c2VlbnRlcjogJ21vdXNlb3ZlcicsIG1vdXNlbGVhdmU6ICdtb3VzZW91dCcgfVxuXG4gIHNwZWNpYWxFdmVudHMuY2xpY2sgPSBzcGVjaWFsRXZlbnRzLm1vdXNlZG93biA9IHNwZWNpYWxFdmVudHMubW91c2V1cCA9IHNwZWNpYWxFdmVudHMubW91c2Vtb3ZlID0gJ01vdXNlRXZlbnRzJ1xuXG4gIGZ1bmN0aW9uIHppZChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuX3ppZCB8fCAoZWxlbWVudC5femlkID0gX3ppZCsrKVxuICB9XG4gIGZ1bmN0aW9uIGZpbmRIYW5kbGVycyhlbGVtZW50LCBldmVudCwgZm4sIHNlbGVjdG9yKSB7XG4gICAgZXZlbnQgPSBwYXJzZShldmVudClcbiAgICBpZiAoZXZlbnQubnMpIHZhciBtYXRjaGVyID0gbWF0Y2hlckZvcihldmVudC5ucylcbiAgICByZXR1cm4gKGhhbmRsZXJzW3ppZChlbGVtZW50KV0gfHwgW10pLmZpbHRlcihmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gaGFuZGxlclxuICAgICAgICAmJiAoIWV2ZW50LmUgIHx8IGhhbmRsZXIuZSA9PSBldmVudC5lKVxuICAgICAgICAmJiAoIWV2ZW50Lm5zIHx8IG1hdGNoZXIudGVzdChoYW5kbGVyLm5zKSlcbiAgICAgICAgJiYgKCFmbiAgICAgICB8fCB6aWQoaGFuZGxlci5mbikgPT09IHppZChmbikpXG4gICAgICAgICYmICghc2VsZWN0b3IgfHwgaGFuZGxlci5zZWwgPT0gc2VsZWN0b3IpXG4gICAgfSlcbiAgfVxuICBmdW5jdGlvbiBwYXJzZShldmVudCkge1xuICAgIHZhciBwYXJ0cyA9ICgnJyArIGV2ZW50KS5zcGxpdCgnLicpXG4gICAgcmV0dXJuIHtlOiBwYXJ0c1swXSwgbnM6IHBhcnRzLnNsaWNlKDEpLnNvcnQoKS5qb2luKCcgJyl9XG4gIH1cbiAgZnVuY3Rpb24gbWF0Y2hlckZvcihucykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKCcoPzpefCApJyArIG5zLnJlcGxhY2UoJyAnLCAnIC4qID8nKSArICcoPzogfCQpJylcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50Q2FwdHVyZShoYW5kbGVyLCBjYXB0dXJlU2V0dGluZykge1xuICAgIHJldHVybiBoYW5kbGVyLmRlbCAmJlxuICAgICAgKCFmb2N1c2luU3VwcG9ydGVkICYmIChoYW5kbGVyLmUgaW4gZm9jdXMpKSB8fFxuICAgICAgISFjYXB0dXJlU2V0dGluZ1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhbEV2ZW50KHR5cGUpIHtcbiAgICByZXR1cm4gaG92ZXJbdHlwZV0gfHwgKGZvY3VzaW5TdXBwb3J0ZWQgJiYgZm9jdXNbdHlwZV0pIHx8IHR5cGVcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZChlbGVtZW50LCBldmVudHMsIGZuLCBkYXRhLCBzZWxlY3RvciwgZGVsZWdhdG9yLCBjYXB0dXJlKXtcbiAgICB2YXIgaWQgPSB6aWQoZWxlbWVudCksIHNldCA9IChoYW5kbGVyc1tpZF0gfHwgKGhhbmRsZXJzW2lkXSA9IFtdKSlcbiAgICBldmVudHMuc3BsaXQoL1xccy8pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgaWYgKGV2ZW50ID09ICdyZWFkeScpIHJldHVybiAkKGRvY3VtZW50KS5yZWFkeShmbilcbiAgICAgIHZhciBoYW5kbGVyICAgPSBwYXJzZShldmVudClcbiAgICAgIGhhbmRsZXIuZm4gICAgPSBmblxuICAgICAgaGFuZGxlci5zZWwgICA9IHNlbGVjdG9yXG4gICAgICAvLyBlbXVsYXRlIG1vdXNlZW50ZXIsIG1vdXNlbGVhdmVcbiAgICAgIGlmIChoYW5kbGVyLmUgaW4gaG92ZXIpIGZuID0gZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciByZWxhdGVkID0gZS5yZWxhdGVkVGFyZ2V0XG4gICAgICAgIGlmICghcmVsYXRlZCB8fCAocmVsYXRlZCAhPT0gdGhpcyAmJiAhJC5jb250YWlucyh0aGlzLCByZWxhdGVkKSkpXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIuZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgfVxuICAgICAgaGFuZGxlci5kZWwgICA9IGRlbGVnYXRvclxuICAgICAgdmFyIGNhbGxiYWNrICA9IGRlbGVnYXRvciB8fCBmblxuICAgICAgaGFuZGxlci5wcm94eSA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICBlID0gY29tcGF0aWJsZShlKVxuICAgICAgICBpZiAoZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSByZXR1cm5cbiAgICAgICAgZS5kYXRhID0gZGF0YVxuICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2suYXBwbHkoZWxlbWVudCwgZS5fYXJncyA9PSB1bmRlZmluZWQgPyBbZV0gOiBbZV0uY29uY2F0KGUuX2FyZ3MpKVxuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkgZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICAgIGhhbmRsZXIuaSA9IHNldC5sZW5ndGhcbiAgICAgIHNldC5wdXNoKGhhbmRsZXIpXG4gICAgICBpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluIGVsZW1lbnQpXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihyZWFsRXZlbnQoaGFuZGxlci5lKSwgaGFuZGxlci5wcm94eSwgZXZlbnRDYXB0dXJlKGhhbmRsZXIsIGNhcHR1cmUpKVxuICAgIH0pXG4gIH1cbiAgZnVuY3Rpb24gcmVtb3ZlKGVsZW1lbnQsIGV2ZW50cywgZm4sIHNlbGVjdG9yLCBjYXB0dXJlKXtcbiAgICB2YXIgaWQgPSB6aWQoZWxlbWVudClcbiAgICA7KGV2ZW50cyB8fCAnJykuc3BsaXQoL1xccy8pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgZmluZEhhbmRsZXJzKGVsZW1lbnQsIGV2ZW50LCBmbiwgc2VsZWN0b3IpLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlcil7XG4gICAgICAgIGRlbGV0ZSBoYW5kbGVyc1tpZF1baGFuZGxlci5pXVxuICAgICAgaWYgKCdyZW1vdmVFdmVudExpc3RlbmVyJyBpbiBlbGVtZW50KVxuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIocmVhbEV2ZW50KGhhbmRsZXIuZSksIGhhbmRsZXIucHJveHksIGV2ZW50Q2FwdHVyZShoYW5kbGVyLCBjYXB0dXJlKSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gICQuZXZlbnQgPSB7IGFkZDogYWRkLCByZW1vdmU6IHJlbW92ZSB9XG5cbiAgJC5wcm94eSA9IGZ1bmN0aW9uKGZuLCBjb250ZXh0KSB7XG4gICAgdmFyIGFyZ3MgPSAoMiBpbiBhcmd1bWVudHMpICYmIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKVxuICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgdmFyIHByb3h5Rm4gPSBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJncyA/IGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkgOiBhcmd1bWVudHMpIH1cbiAgICAgIHByb3h5Rm4uX3ppZCA9IHppZChmbilcbiAgICAgIHJldHVybiBwcm94eUZuXG4gICAgfSBlbHNlIGlmIChpc1N0cmluZyhjb250ZXh0KSkge1xuICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgYXJncy51bnNoaWZ0KGZuW2NvbnRleHRdLCBmbilcbiAgICAgICAgcmV0dXJuICQucHJveHkuYXBwbHkobnVsbCwgYXJncylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkLnByb3h5KGZuW2NvbnRleHRdLCBmbilcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImV4cGVjdGVkIGZ1bmN0aW9uXCIpXG4gICAgfVxuICB9XG5cbiAgJC5mbi5iaW5kID0gZnVuY3Rpb24oZXZlbnQsIGRhdGEsIGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihldmVudCwgZGF0YSwgY2FsbGJhY2spXG4gIH1cbiAgJC5mbi51bmJpbmQgPSBmdW5jdGlvbihldmVudCwgY2FsbGJhY2spe1xuICAgIHJldHVybiB0aGlzLm9mZihldmVudCwgY2FsbGJhY2spXG4gIH1cbiAgJC5mbi5vbmUgPSBmdW5jdGlvbihldmVudCwgc2VsZWN0b3IsIGRhdGEsIGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihldmVudCwgc2VsZWN0b3IsIGRhdGEsIGNhbGxiYWNrLCAxKVxuICB9XG5cbiAgdmFyIHJldHVyblRydWUgPSBmdW5jdGlvbigpe3JldHVybiB0cnVlfSxcbiAgICAgIHJldHVybkZhbHNlID0gZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9LFxuICAgICAgaWdub3JlUHJvcGVydGllcyA9IC9eKFtBLVpdfHJldHVyblZhbHVlJHxsYXllcltYWV0kfHdlYmtpdE1vdmVtZW50W1hZXSQpLyxcbiAgICAgIGV2ZW50TWV0aG9kcyA9IHtcbiAgICAgICAgcHJldmVudERlZmF1bHQ6ICdpc0RlZmF1bHRQcmV2ZW50ZWQnLFxuICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ICdpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCcsXG4gICAgICAgIHN0b3BQcm9wYWdhdGlvbjogJ2lzUHJvcGFnYXRpb25TdG9wcGVkJ1xuICAgICAgfVxuXG4gIGZ1bmN0aW9uIGNvbXBhdGlibGUoZXZlbnQsIHNvdXJjZSkge1xuICAgIGlmIChzb3VyY2UgfHwgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgc291cmNlIHx8IChzb3VyY2UgPSBldmVudClcblxuICAgICAgJC5lYWNoKGV2ZW50TWV0aG9kcywgZnVuY3Rpb24obmFtZSwgcHJlZGljYXRlKSB7XG4gICAgICAgIHZhciBzb3VyY2VNZXRob2QgPSBzb3VyY2VbbmFtZV1cbiAgICAgICAgZXZlbnRbbmFtZV0gPSBmdW5jdGlvbigpe1xuICAgICAgICAgIHRoaXNbcHJlZGljYXRlXSA9IHJldHVyblRydWVcbiAgICAgICAgICByZXR1cm4gc291cmNlTWV0aG9kICYmIHNvdXJjZU1ldGhvZC5hcHBseShzb3VyY2UsIGFyZ3VtZW50cylcbiAgICAgICAgfVxuICAgICAgICBldmVudFtwcmVkaWNhdGVdID0gcmV0dXJuRmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIGV2ZW50LnRpbWVTdGFtcCB8fCAoZXZlbnQudGltZVN0YW1wID0gRGF0ZS5ub3coKSlcblxuICAgICAgaWYgKHNvdXJjZS5kZWZhdWx0UHJldmVudGVkICE9PSB1bmRlZmluZWQgPyBzb3VyY2UuZGVmYXVsdFByZXZlbnRlZCA6XG4gICAgICAgICAgJ3JldHVyblZhbHVlJyBpbiBzb3VyY2UgPyBzb3VyY2UucmV0dXJuVmFsdWUgPT09IGZhbHNlIDpcbiAgICAgICAgICBzb3VyY2UuZ2V0UHJldmVudERlZmF1bHQgJiYgc291cmNlLmdldFByZXZlbnREZWZhdWx0KCkpXG4gICAgICAgIGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCA9IHJldHVyblRydWVcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVQcm94eShldmVudCkge1xuICAgIHZhciBrZXksIHByb3h5ID0geyBvcmlnaW5hbEV2ZW50OiBldmVudCB9XG4gICAgZm9yIChrZXkgaW4gZXZlbnQpXG4gICAgICBpZiAoIWlnbm9yZVByb3BlcnRpZXMudGVzdChrZXkpICYmIGV2ZW50W2tleV0gIT09IHVuZGVmaW5lZCkgcHJveHlba2V5XSA9IGV2ZW50W2tleV1cblxuICAgIHJldHVybiBjb21wYXRpYmxlKHByb3h5LCBldmVudClcbiAgfVxuXG4gICQuZm4uZGVsZWdhdGUgPSBmdW5jdGlvbihzZWxlY3RvciwgZXZlbnQsIGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihldmVudCwgc2VsZWN0b3IsIGNhbGxiYWNrKVxuICB9XG4gICQuZm4udW5kZWxlZ2F0ZSA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBldmVudCwgY2FsbGJhY2spe1xuICAgIHJldHVybiB0aGlzLm9mZihldmVudCwgc2VsZWN0b3IsIGNhbGxiYWNrKVxuICB9XG5cbiAgJC5mbi5saXZlID0gZnVuY3Rpb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICAkKGRvY3VtZW50LmJvZHkpLmRlbGVnYXRlKHRoaXMuc2VsZWN0b3IsIGV2ZW50LCBjYWxsYmFjaylcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gICQuZm4uZGllID0gZnVuY3Rpb24oZXZlbnQsIGNhbGxiYWNrKXtcbiAgICAkKGRvY3VtZW50LmJvZHkpLnVuZGVsZWdhdGUodGhpcy5zZWxlY3RvciwgZXZlbnQsIGNhbGxiYWNrKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAkLmZuLm9uID0gZnVuY3Rpb24oZXZlbnQsIHNlbGVjdG9yLCBkYXRhLCBjYWxsYmFjaywgb25lKXtcbiAgICB2YXIgYXV0b1JlbW92ZSwgZGVsZWdhdG9yLCAkdGhpcyA9IHRoaXNcbiAgICBpZiAoZXZlbnQgJiYgIWlzU3RyaW5nKGV2ZW50KSkge1xuICAgICAgJC5lYWNoKGV2ZW50LCBmdW5jdGlvbih0eXBlLCBmbil7XG4gICAgICAgICR0aGlzLm9uKHR5cGUsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lKVxuICAgICAgfSlcbiAgICAgIHJldHVybiAkdGhpc1xuICAgIH1cblxuICAgIGlmICghaXNTdHJpbmcoc2VsZWN0b3IpICYmICFpc0Z1bmN0aW9uKGNhbGxiYWNrKSAmJiBjYWxsYmFjayAhPT0gZmFsc2UpXG4gICAgICBjYWxsYmFjayA9IGRhdGEsIGRhdGEgPSBzZWxlY3Rvciwgc2VsZWN0b3IgPSB1bmRlZmluZWRcbiAgICBpZiAoY2FsbGJhY2sgPT09IHVuZGVmaW5lZCB8fCBkYXRhID09PSBmYWxzZSlcbiAgICAgIGNhbGxiYWNrID0gZGF0YSwgZGF0YSA9IHVuZGVmaW5lZFxuXG4gICAgaWYgKGNhbGxiYWNrID09PSBmYWxzZSkgY2FsbGJhY2sgPSByZXR1cm5GYWxzZVxuXG4gICAgcmV0dXJuICR0aGlzLmVhY2goZnVuY3Rpb24oXywgZWxlbWVudCl7XG4gICAgICBpZiAob25lKSBhdXRvUmVtb3ZlID0gZnVuY3Rpb24oZSl7XG4gICAgICAgIHJlbW92ZShlbGVtZW50LCBlLnR5cGUsIGNhbGxiYWNrKVxuICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZWN0b3IpIGRlbGVnYXRvciA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICB2YXIgZXZ0LCBtYXRjaCA9ICQoZS50YXJnZXQpLmNsb3Nlc3Qoc2VsZWN0b3IsIGVsZW1lbnQpLmdldCgwKVxuICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2ggIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICBldnQgPSAkLmV4dGVuZChjcmVhdGVQcm94eShlKSwge2N1cnJlbnRUYXJnZXQ6IG1hdGNoLCBsaXZlRmlyZWQ6IGVsZW1lbnR9KVxuICAgICAgICAgIHJldHVybiAoYXV0b1JlbW92ZSB8fCBjYWxsYmFjaykuYXBwbHkobWF0Y2gsIFtldnRdLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGFkZChlbGVtZW50LCBldmVudCwgY2FsbGJhY2ssIGRhdGEsIHNlbGVjdG9yLCBkZWxlZ2F0b3IgfHwgYXV0b1JlbW92ZSlcbiAgICB9KVxuICB9XG4gICQuZm4ub2ZmID0gZnVuY3Rpb24oZXZlbnQsIHNlbGVjdG9yLCBjYWxsYmFjayl7XG4gICAgdmFyICR0aGlzID0gdGhpc1xuICAgIGlmIChldmVudCAmJiAhaXNTdHJpbmcoZXZlbnQpKSB7XG4gICAgICAkLmVhY2goZXZlbnQsIGZ1bmN0aW9uKHR5cGUsIGZuKXtcbiAgICAgICAgJHRoaXMub2ZmKHR5cGUsIHNlbGVjdG9yLCBmbilcbiAgICAgIH0pXG4gICAgICByZXR1cm4gJHRoaXNcbiAgICB9XG5cbiAgICBpZiAoIWlzU3RyaW5nKHNlbGVjdG9yKSAmJiAhaXNGdW5jdGlvbihjYWxsYmFjaykgJiYgY2FsbGJhY2sgIT09IGZhbHNlKVxuICAgICAgY2FsbGJhY2sgPSBzZWxlY3Rvciwgc2VsZWN0b3IgPSB1bmRlZmluZWRcblxuICAgIGlmIChjYWxsYmFjayA9PT0gZmFsc2UpIGNhbGxiYWNrID0gcmV0dXJuRmFsc2VcblxuICAgIHJldHVybiAkdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICByZW1vdmUodGhpcywgZXZlbnQsIGNhbGxiYWNrLCBzZWxlY3RvcilcbiAgICB9KVxuICB9XG5cbiAgJC5mbi50cmlnZ2VyID0gZnVuY3Rpb24oZXZlbnQsIGFyZ3Mpe1xuICAgIGV2ZW50ID0gKGlzU3RyaW5nKGV2ZW50KSB8fCAkLmlzUGxhaW5PYmplY3QoZXZlbnQpKSA/ICQuRXZlbnQoZXZlbnQpIDogY29tcGF0aWJsZShldmVudClcbiAgICBldmVudC5fYXJncyA9IGFyZ3NcbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAvLyBoYW5kbGUgZm9jdXMoKSwgYmx1cigpIGJ5IGNhbGxpbmcgdGhlbSBkaXJlY3RseVxuICAgICAgaWYgKGV2ZW50LnR5cGUgaW4gZm9jdXMgJiYgdHlwZW9mIHRoaXNbZXZlbnQudHlwZV0gPT0gXCJmdW5jdGlvblwiKSB0aGlzW2V2ZW50LnR5cGVdKClcbiAgICAgIC8vIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uIG1pZ2h0IG5vdCBiZSBET00gZWxlbWVudHNcbiAgICAgIGVsc2UgaWYgKCdkaXNwYXRjaEV2ZW50JyBpbiB0aGlzKSB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpXG4gICAgICBlbHNlICQodGhpcykudHJpZ2dlckhhbmRsZXIoZXZlbnQsIGFyZ3MpXG4gICAgfSlcbiAgfVxuXG4gIC8vIHRyaWdnZXJzIGV2ZW50IGhhbmRsZXJzIG9uIGN1cnJlbnQgZWxlbWVudCBqdXN0IGFzIGlmIGFuIGV2ZW50IG9jY3VycmVkLFxuICAvLyBkb2Vzbid0IHRyaWdnZXIgYW4gYWN0dWFsIGV2ZW50LCBkb2Vzbid0IGJ1YmJsZVxuICAkLmZuLnRyaWdnZXJIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQsIGFyZ3Mpe1xuICAgIHZhciBlLCByZXN1bHRcbiAgICB0aGlzLmVhY2goZnVuY3Rpb24oaSwgZWxlbWVudCl7XG4gICAgICBlID0gY3JlYXRlUHJveHkoaXNTdHJpbmcoZXZlbnQpID8gJC5FdmVudChldmVudCkgOiBldmVudClcbiAgICAgIGUuX2FyZ3MgPSBhcmdzXG4gICAgICBlLnRhcmdldCA9IGVsZW1lbnRcbiAgICAgICQuZWFjaChmaW5kSGFuZGxlcnMoZWxlbWVudCwgZXZlbnQudHlwZSB8fCBldmVudCksIGZ1bmN0aW9uKGksIGhhbmRsZXIpe1xuICAgICAgICByZXN1bHQgPSBoYW5kbGVyLnByb3h5KGUpXG4gICAgICAgIGlmIChlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpIHJldHVybiBmYWxzZVxuICAgICAgfSlcbiAgICB9KVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8vIHNob3J0Y3V0IG1ldGhvZHMgZm9yIGAuYmluZChldmVudCwgZm4pYCBmb3IgZWFjaCBldmVudCB0eXBlXG4gIDsoJ2ZvY3VzaW4gZm9jdXNvdXQgZm9jdXMgYmx1ciBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrICcrXG4gICdtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSAnK1xuICAnY2hhbmdlIHNlbGVjdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yJykuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgJC5mbltldmVudF0gPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgcmV0dXJuICgwIGluIGFyZ3VtZW50cykgP1xuICAgICAgICB0aGlzLmJpbmQoZXZlbnQsIGNhbGxiYWNrKSA6XG4gICAgICAgIHRoaXMudHJpZ2dlcihldmVudClcbiAgICB9XG4gIH0pXG5cbiAgJC5FdmVudCA9IGZ1bmN0aW9uKHR5cGUsIHByb3BzKSB7XG4gICAgaWYgKCFpc1N0cmluZyh0eXBlKSkgcHJvcHMgPSB0eXBlLCB0eXBlID0gcHJvcHMudHlwZVxuICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KHNwZWNpYWxFdmVudHNbdHlwZV0gfHwgJ0V2ZW50cycpLCBidWJibGVzID0gdHJ1ZVxuICAgIGlmIChwcm9wcykgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykgKG5hbWUgPT0gJ2J1YmJsZXMnKSA/IChidWJibGVzID0gISFwcm9wc1tuYW1lXSkgOiAoZXZlbnRbbmFtZV0gPSBwcm9wc1tuYW1lXSlcbiAgICBldmVudC5pbml0RXZlbnQodHlwZSwgYnViYmxlcywgdHJ1ZSlcbiAgICByZXR1cm4gY29tcGF0aWJsZShldmVudClcbiAgfVxuXG59KShaZXB0bylcblxuOyhmdW5jdGlvbigkKXtcbiAgdmFyIGpzb25wSUQgPSArbmV3IERhdGUoKSxcbiAgICAgIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50LFxuICAgICAga2V5LFxuICAgICAgbmFtZSxcbiAgICAgIHJzY3JpcHQgPSAvPHNjcmlwdFxcYltePF0qKD86KD8hPFxcL3NjcmlwdD4pPFtePF0qKSo8XFwvc2NyaXB0Pi9naSxcbiAgICAgIHNjcmlwdFR5cGVSRSA9IC9eKD86dGV4dHxhcHBsaWNhdGlvbilcXC9qYXZhc2NyaXB0L2ksXG4gICAgICB4bWxUeXBlUkUgPSAvXig/OnRleHR8YXBwbGljYXRpb24pXFwveG1sL2ksXG4gICAgICBqc29uVHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIGh0bWxUeXBlID0gJ3RleHQvaHRtbCcsXG4gICAgICBibGFua1JFID0gL15cXHMqJC8sXG4gICAgICBvcmlnaW5BbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcblxuICBvcmlnaW5BbmNob3IuaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG5cbiAgLy8gdHJpZ2dlciBhIGN1c3RvbSBldmVudCBhbmQgcmV0dXJuIGZhbHNlIGlmIGl0IHdhcyBjYW5jZWxsZWRcbiAgZnVuY3Rpb24gdHJpZ2dlckFuZFJldHVybihjb250ZXh0LCBldmVudE5hbWUsIGRhdGEpIHtcbiAgICB2YXIgZXZlbnQgPSAkLkV2ZW50KGV2ZW50TmFtZSlcbiAgICAkKGNvbnRleHQpLnRyaWdnZXIoZXZlbnQsIGRhdGEpXG4gICAgcmV0dXJuICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKVxuICB9XG5cbiAgLy8gdHJpZ2dlciBhbiBBamF4IFwiZ2xvYmFsXCIgZXZlbnRcbiAgZnVuY3Rpb24gdHJpZ2dlckdsb2JhbChzZXR0aW5ncywgY29udGV4dCwgZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgaWYgKHNldHRpbmdzLmdsb2JhbCkgcmV0dXJuIHRyaWdnZXJBbmRSZXR1cm4oY29udGV4dCB8fCBkb2N1bWVudCwgZXZlbnROYW1lLCBkYXRhKVxuICB9XG5cbiAgLy8gTnVtYmVyIG9mIGFjdGl2ZSBBamF4IHJlcXVlc3RzXG4gICQuYWN0aXZlID0gMFxuXG4gIGZ1bmN0aW9uIGFqYXhTdGFydChzZXR0aW5ncykge1xuICAgIGlmIChzZXR0aW5ncy5nbG9iYWwgJiYgJC5hY3RpdmUrKyA9PT0gMCkgdHJpZ2dlckdsb2JhbChzZXR0aW5ncywgbnVsbCwgJ2FqYXhTdGFydCcpXG4gIH1cbiAgZnVuY3Rpb24gYWpheFN0b3Aoc2V0dGluZ3MpIHtcbiAgICBpZiAoc2V0dGluZ3MuZ2xvYmFsICYmICEoLS0kLmFjdGl2ZSkpIHRyaWdnZXJHbG9iYWwoc2V0dGluZ3MsIG51bGwsICdhamF4U3RvcCcpXG4gIH1cblxuICAvLyB0cmlnZ2VycyBhbiBleHRyYSBnbG9iYWwgZXZlbnQgXCJhamF4QmVmb3JlU2VuZFwiIHRoYXQncyBsaWtlIFwiYWpheFNlbmRcIiBidXQgY2FuY2VsYWJsZVxuICBmdW5jdGlvbiBhamF4QmVmb3JlU2VuZCh4aHIsIHNldHRpbmdzKSB7XG4gICAgdmFyIGNvbnRleHQgPSBzZXR0aW5ncy5jb250ZXh0XG4gICAgaWYgKHNldHRpbmdzLmJlZm9yZVNlbmQuY2FsbChjb250ZXh0LCB4aHIsIHNldHRpbmdzKSA9PT0gZmFsc2UgfHxcbiAgICAgICAgdHJpZ2dlckdsb2JhbChzZXR0aW5ncywgY29udGV4dCwgJ2FqYXhCZWZvcmVTZW5kJywgW3hociwgc2V0dGluZ3NdKSA9PT0gZmFsc2UpXG4gICAgICByZXR1cm4gZmFsc2VcblxuICAgIHRyaWdnZXJHbG9iYWwoc2V0dGluZ3MsIGNvbnRleHQsICdhamF4U2VuZCcsIFt4aHIsIHNldHRpbmdzXSlcbiAgfVxuICBmdW5jdGlvbiBhamF4U3VjY2VzcyhkYXRhLCB4aHIsIHNldHRpbmdzLCBkZWZlcnJlZCkge1xuICAgIHZhciBjb250ZXh0ID0gc2V0dGluZ3MuY29udGV4dCwgc3RhdHVzID0gJ3N1Y2Nlc3MnXG4gICAgc2V0dGluZ3Muc3VjY2Vzcy5jYWxsKGNvbnRleHQsIGRhdGEsIHN0YXR1cywgeGhyKVxuICAgIGlmIChkZWZlcnJlZCkgZGVmZXJyZWQucmVzb2x2ZVdpdGgoY29udGV4dCwgW2RhdGEsIHN0YXR1cywgeGhyXSlcbiAgICB0cmlnZ2VyR2xvYmFsKHNldHRpbmdzLCBjb250ZXh0LCAnYWpheFN1Y2Nlc3MnLCBbeGhyLCBzZXR0aW5ncywgZGF0YV0pXG4gICAgYWpheENvbXBsZXRlKHN0YXR1cywgeGhyLCBzZXR0aW5ncylcbiAgfVxuICAvLyB0eXBlOiBcInRpbWVvdXRcIiwgXCJlcnJvclwiLCBcImFib3J0XCIsIFwicGFyc2VyZXJyb3JcIlxuICBmdW5jdGlvbiBhamF4RXJyb3IoZXJyb3IsIHR5cGUsIHhociwgc2V0dGluZ3MsIGRlZmVycmVkKSB7XG4gICAgdmFyIGNvbnRleHQgPSBzZXR0aW5ncy5jb250ZXh0XG4gICAgc2V0dGluZ3MuZXJyb3IuY2FsbChjb250ZXh0LCB4aHIsIHR5cGUsIGVycm9yKVxuICAgIGlmIChkZWZlcnJlZCkgZGVmZXJyZWQucmVqZWN0V2l0aChjb250ZXh0LCBbeGhyLCB0eXBlLCBlcnJvcl0pXG4gICAgdHJpZ2dlckdsb2JhbChzZXR0aW5ncywgY29udGV4dCwgJ2FqYXhFcnJvcicsIFt4aHIsIHNldHRpbmdzLCBlcnJvciB8fCB0eXBlXSlcbiAgICBhamF4Q29tcGxldGUodHlwZSwgeGhyLCBzZXR0aW5ncylcbiAgfVxuICAvLyBzdGF0dXM6IFwic3VjY2Vzc1wiLCBcIm5vdG1vZGlmaWVkXCIsIFwiZXJyb3JcIiwgXCJ0aW1lb3V0XCIsIFwiYWJvcnRcIiwgXCJwYXJzZXJlcnJvclwiXG4gIGZ1bmN0aW9uIGFqYXhDb21wbGV0ZShzdGF0dXMsIHhociwgc2V0dGluZ3MpIHtcbiAgICB2YXIgY29udGV4dCA9IHNldHRpbmdzLmNvbnRleHRcbiAgICBzZXR0aW5ncy5jb21wbGV0ZS5jYWxsKGNvbnRleHQsIHhociwgc3RhdHVzKVxuICAgIHRyaWdnZXJHbG9iYWwoc2V0dGluZ3MsIGNvbnRleHQsICdhamF4Q29tcGxldGUnLCBbeGhyLCBzZXR0aW5nc10pXG4gICAgYWpheFN0b3Aoc2V0dGluZ3MpXG4gIH1cblxuICBmdW5jdGlvbiBhamF4RGF0YUZpbHRlcihkYXRhLCB0eXBlLCBzZXR0aW5ncykge1xuICAgIGlmIChzZXR0aW5ncy5kYXRhRmlsdGVyID09IGVtcHR5KSByZXR1cm4gZGF0YVxuICAgIHZhciBjb250ZXh0ID0gc2V0dGluZ3MuY29udGV4dFxuICAgIHJldHVybiBzZXR0aW5ncy5kYXRhRmlsdGVyLmNhbGwoY29udGV4dCwgZGF0YSwgdHlwZSlcbiAgfVxuXG4gIC8vIEVtcHR5IGZ1bmN0aW9uLCB1c2VkIGFzIGRlZmF1bHQgY2FsbGJhY2tcbiAgZnVuY3Rpb24gZW1wdHkoKSB7fVxuXG4gICQuYWpheEpTT05QID0gZnVuY3Rpb24ob3B0aW9ucywgZGVmZXJyZWQpe1xuICAgIGlmICghKCd0eXBlJyBpbiBvcHRpb25zKSkgcmV0dXJuICQuYWpheChvcHRpb25zKVxuXG4gICAgdmFyIF9jYWxsYmFja05hbWUgPSBvcHRpb25zLmpzb25wQ2FsbGJhY2ssXG4gICAgICBjYWxsYmFja05hbWUgPSAoJC5pc0Z1bmN0aW9uKF9jYWxsYmFja05hbWUpID9cbiAgICAgICAgX2NhbGxiYWNrTmFtZSgpIDogX2NhbGxiYWNrTmFtZSkgfHwgKCdaZXB0bycgKyAoanNvbnBJRCsrKSksXG4gICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSxcbiAgICAgIG9yaWdpbmFsQ2FsbGJhY2sgPSB3aW5kb3dbY2FsbGJhY2tOYW1lXSxcbiAgICAgIHJlc3BvbnNlRGF0YSxcbiAgICAgIGFib3J0ID0gZnVuY3Rpb24oZXJyb3JUeXBlKSB7XG4gICAgICAgICQoc2NyaXB0KS50cmlnZ2VySGFuZGxlcignZXJyb3InLCBlcnJvclR5cGUgfHwgJ2Fib3J0JylcbiAgICAgIH0sXG4gICAgICB4aHIgPSB7IGFib3J0OiBhYm9ydCB9LCBhYm9ydFRpbWVvdXRcblxuICAgIGlmIChkZWZlcnJlZCkgZGVmZXJyZWQucHJvbWlzZSh4aHIpXG5cbiAgICAkKHNjcmlwdCkub24oJ2xvYWQgZXJyb3InLCBmdW5jdGlvbihlLCBlcnJvclR5cGUpe1xuICAgICAgY2xlYXJUaW1lb3V0KGFib3J0VGltZW91dClcbiAgICAgICQoc2NyaXB0KS5vZmYoKS5yZW1vdmUoKVxuXG4gICAgICBpZiAoZS50eXBlID09ICdlcnJvcicgfHwgIXJlc3BvbnNlRGF0YSkge1xuICAgICAgICBhamF4RXJyb3IobnVsbCwgZXJyb3JUeXBlIHx8ICdlcnJvcicsIHhociwgb3B0aW9ucywgZGVmZXJyZWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhamF4U3VjY2VzcyhyZXNwb25zZURhdGFbMF0sIHhociwgb3B0aW9ucywgZGVmZXJyZWQpXG4gICAgICB9XG5cbiAgICAgIHdpbmRvd1tjYWxsYmFja05hbWVdID0gb3JpZ2luYWxDYWxsYmFja1xuICAgICAgaWYgKHJlc3BvbnNlRGF0YSAmJiAkLmlzRnVuY3Rpb24ob3JpZ2luYWxDYWxsYmFjaykpXG4gICAgICAgIG9yaWdpbmFsQ2FsbGJhY2socmVzcG9uc2VEYXRhWzBdKVxuXG4gICAgICBvcmlnaW5hbENhbGxiYWNrID0gcmVzcG9uc2VEYXRhID0gdW5kZWZpbmVkXG4gICAgfSlcblxuICAgIGlmIChhamF4QmVmb3JlU2VuZCh4aHIsIG9wdGlvbnMpID09PSBmYWxzZSkge1xuICAgICAgYWJvcnQoJ2Fib3J0JylcbiAgICAgIHJldHVybiB4aHJcbiAgICB9XG5cbiAgICB3aW5kb3dbY2FsbGJhY2tOYW1lXSA9IGZ1bmN0aW9uKCl7XG4gICAgICByZXNwb25zZURhdGEgPSBhcmd1bWVudHNcbiAgICB9XG5cbiAgICBzY3JpcHQuc3JjID0gb3B0aW9ucy51cmwucmVwbGFjZSgvXFw/KC4rKT1cXD8vLCAnPyQxPScgKyBjYWxsYmFja05hbWUpXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpXG5cbiAgICBpZiAob3B0aW9ucy50aW1lb3V0ID4gMCkgYWJvcnRUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgYWJvcnQoJ3RpbWVvdXQnKVxuICAgIH0sIG9wdGlvbnMudGltZW91dClcblxuICAgIHJldHVybiB4aHJcbiAgfVxuXG4gICQuYWpheFNldHRpbmdzID0ge1xuICAgIC8vIERlZmF1bHQgdHlwZSBvZiByZXF1ZXN0XG4gICAgdHlwZTogJ0dFVCcsXG4gICAgLy8gQ2FsbGJhY2sgdGhhdCBpcyBleGVjdXRlZCBiZWZvcmUgcmVxdWVzdFxuICAgIGJlZm9yZVNlbmQ6IGVtcHR5LFxuICAgIC8vIENhbGxiYWNrIHRoYXQgaXMgZXhlY3V0ZWQgaWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHNcbiAgICBzdWNjZXNzOiBlbXB0eSxcbiAgICAvLyBDYWxsYmFjayB0aGF0IGlzIGV4ZWN1dGVkIHRoZSB0aGUgc2VydmVyIGRyb3BzIGVycm9yXG4gICAgZXJyb3I6IGVtcHR5LFxuICAgIC8vIENhbGxiYWNrIHRoYXQgaXMgZXhlY3V0ZWQgb24gcmVxdWVzdCBjb21wbGV0ZSAoYm90aDogZXJyb3IgYW5kIHN1Y2Nlc3MpXG4gICAgY29tcGxldGU6IGVtcHR5LFxuICAgIC8vIFRoZSBjb250ZXh0IGZvciB0aGUgY2FsbGJhY2tzXG4gICAgY29udGV4dDogbnVsbCxcbiAgICAvLyBXaGV0aGVyIHRvIHRyaWdnZXIgXCJnbG9iYWxcIiBBamF4IGV2ZW50c1xuICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAvLyBUcmFuc3BvcnRcbiAgICB4aHI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KClcbiAgICB9LFxuICAgIC8vIE1JTUUgdHlwZXMgbWFwcGluZ1xuICAgIC8vIElJUyByZXR1cm5zIEphdmFzY3JpcHQgYXMgXCJhcHBsaWNhdGlvbi94LWphdmFzY3JpcHRcIlxuICAgIGFjY2VwdHM6IHtcbiAgICAgIHNjcmlwdDogJ3RleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24veC1qYXZhc2NyaXB0JyxcbiAgICAgIGpzb246ICAganNvblR5cGUsXG4gICAgICB4bWw6ICAgICdhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sJyxcbiAgICAgIGh0bWw6ICAgaHRtbFR5cGUsXG4gICAgICB0ZXh0OiAgICd0ZXh0L3BsYWluJ1xuICAgIH0sXG4gICAgLy8gV2hldGhlciB0aGUgcmVxdWVzdCBpcyB0byBhbm90aGVyIGRvbWFpblxuICAgIGNyb3NzRG9tYWluOiBmYWxzZSxcbiAgICAvLyBEZWZhdWx0IHRpbWVvdXRcbiAgICB0aW1lb3V0OiAwLFxuICAgIC8vIFdoZXRoZXIgZGF0YSBzaG91bGQgYmUgc2VyaWFsaXplZCB0byBzdHJpbmdcbiAgICBwcm9jZXNzRGF0YTogdHJ1ZSxcbiAgICAvLyBXaGV0aGVyIHRoZSBicm93c2VyIHNob3VsZCBiZSBhbGxvd2VkIHRvIGNhY2hlIEdFVCByZXNwb25zZXNcbiAgICBjYWNoZTogdHJ1ZSxcbiAgICAvL1VzZWQgdG8gaGFuZGxlIHRoZSByYXcgcmVzcG9uc2UgZGF0YSBvZiBYTUxIdHRwUmVxdWVzdC5cbiAgICAvL1RoaXMgaXMgYSBwcmUtZmlsdGVyaW5nIGZ1bmN0aW9uIHRvIHNhbml0aXplIHRoZSByZXNwb25zZS5cbiAgICAvL1RoZSBzYW5pdGl6ZWQgcmVzcG9uc2Ugc2hvdWxkIGJlIHJldHVybmVkXG4gICAgZGF0YUZpbHRlcjogZW1wdHlcbiAgfVxuXG4gIGZ1bmN0aW9uIG1pbWVUb0RhdGFUeXBlKG1pbWUpIHtcbiAgICBpZiAobWltZSkgbWltZSA9IG1pbWUuc3BsaXQoJzsnLCAyKVswXVxuICAgIHJldHVybiBtaW1lICYmICggbWltZSA9PSBodG1sVHlwZSA/ICdodG1sJyA6XG4gICAgICBtaW1lID09IGpzb25UeXBlID8gJ2pzb24nIDpcbiAgICAgIHNjcmlwdFR5cGVSRS50ZXN0KG1pbWUpID8gJ3NjcmlwdCcgOlxuICAgICAgeG1sVHlwZVJFLnRlc3QobWltZSkgJiYgJ3htbCcgKSB8fCAndGV4dCdcbiAgfVxuXG4gIGZ1bmN0aW9uIGFwcGVuZFF1ZXJ5KHVybCwgcXVlcnkpIHtcbiAgICBpZiAocXVlcnkgPT0gJycpIHJldHVybiB1cmxcbiAgICByZXR1cm4gKHVybCArICcmJyArIHF1ZXJ5KS5yZXBsYWNlKC9bJj9dezEsMn0vLCAnPycpXG4gIH1cblxuICAvLyBzZXJpYWxpemUgcGF5bG9hZCBhbmQgYXBwZW5kIGl0IHRvIHRoZSBVUkwgZm9yIEdFVCByZXF1ZXN0c1xuICBmdW5jdGlvbiBzZXJpYWxpemVEYXRhKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5wcm9jZXNzRGF0YSAmJiBvcHRpb25zLmRhdGEgJiYgJC50eXBlKG9wdGlvbnMuZGF0YSkgIT0gXCJzdHJpbmdcIilcbiAgICAgIG9wdGlvbnMuZGF0YSA9ICQucGFyYW0ob3B0aW9ucy5kYXRhLCBvcHRpb25zLnRyYWRpdGlvbmFsKVxuICAgIGlmIChvcHRpb25zLmRhdGEgJiYgKCFvcHRpb25zLnR5cGUgfHwgb3B0aW9ucy50eXBlLnRvVXBwZXJDYXNlKCkgPT0gJ0dFVCcgfHwgJ2pzb25wJyA9PSBvcHRpb25zLmRhdGFUeXBlKSlcbiAgICAgIG9wdGlvbnMudXJsID0gYXBwZW5kUXVlcnkob3B0aW9ucy51cmwsIG9wdGlvbnMuZGF0YSksIG9wdGlvbnMuZGF0YSA9IHVuZGVmaW5lZFxuICB9XG5cbiAgJC5hamF4ID0gZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoe30sIG9wdGlvbnMgfHwge30pLFxuICAgICAgICBkZWZlcnJlZCA9ICQuRGVmZXJyZWQgJiYgJC5EZWZlcnJlZCgpLFxuICAgICAgICB1cmxBbmNob3IsIGhhc2hJbmRleFxuICAgIGZvciAoa2V5IGluICQuYWpheFNldHRpbmdzKSBpZiAoc2V0dGluZ3Nba2V5XSA9PT0gdW5kZWZpbmVkKSBzZXR0aW5nc1trZXldID0gJC5hamF4U2V0dGluZ3Nba2V5XVxuXG4gICAgYWpheFN0YXJ0KHNldHRpbmdzKVxuXG4gICAgaWYgKCFzZXR0aW5ncy5jcm9zc0RvbWFpbikge1xuICAgICAgdXJsQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgICB1cmxBbmNob3IuaHJlZiA9IHNldHRpbmdzLnVybFxuICAgICAgLy8gY2xlYW5zIHVwIFVSTCBmb3IgLmhyZWYgKElFIG9ubHkpLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21hZHJvYmJ5L3plcHRvL3B1bGwvMTA0OVxuICAgICAgdXJsQW5jaG9yLmhyZWYgPSB1cmxBbmNob3IuaHJlZlxuICAgICAgc2V0dGluZ3MuY3Jvc3NEb21haW4gPSAob3JpZ2luQW5jaG9yLnByb3RvY29sICsgJy8vJyArIG9yaWdpbkFuY2hvci5ob3N0KSAhPT0gKHVybEFuY2hvci5wcm90b2NvbCArICcvLycgKyB1cmxBbmNob3IuaG9zdClcbiAgICB9XG5cbiAgICBpZiAoIXNldHRpbmdzLnVybCkgc2V0dGluZ3MudXJsID0gd2luZG93LmxvY2F0aW9uLnRvU3RyaW5nKClcbiAgICBpZiAoKGhhc2hJbmRleCA9IHNldHRpbmdzLnVybC5pbmRleE9mKCcjJykpID4gLTEpIHNldHRpbmdzLnVybCA9IHNldHRpbmdzLnVybC5zbGljZSgwLCBoYXNoSW5kZXgpXG4gICAgc2VyaWFsaXplRGF0YShzZXR0aW5ncylcblxuICAgIHZhciBkYXRhVHlwZSA9IHNldHRpbmdzLmRhdGFUeXBlLCBoYXNQbGFjZWhvbGRlciA9IC9cXD8uKz1cXD8vLnRlc3Qoc2V0dGluZ3MudXJsKVxuICAgIGlmIChoYXNQbGFjZWhvbGRlcikgZGF0YVR5cGUgPSAnanNvbnAnXG5cbiAgICBpZiAoc2V0dGluZ3MuY2FjaGUgPT09IGZhbHNlIHx8IChcbiAgICAgICAgICghb3B0aW9ucyB8fCBvcHRpb25zLmNhY2hlICE9PSB0cnVlKSAmJlxuICAgICAgICAgKCdzY3JpcHQnID09IGRhdGFUeXBlIHx8ICdqc29ucCcgPT0gZGF0YVR5cGUpXG4gICAgICAgICkpXG4gICAgICBzZXR0aW5ncy51cmwgPSBhcHBlbmRRdWVyeShzZXR0aW5ncy51cmwsICdfPScgKyBEYXRlLm5vdygpKVxuXG4gICAgaWYgKCdqc29ucCcgPT0gZGF0YVR5cGUpIHtcbiAgICAgIGlmICghaGFzUGxhY2Vob2xkZXIpXG4gICAgICAgIHNldHRpbmdzLnVybCA9IGFwcGVuZFF1ZXJ5KHNldHRpbmdzLnVybCxcbiAgICAgICAgICBzZXR0aW5ncy5qc29ucCA/IChzZXR0aW5ncy5qc29ucCArICc9PycpIDogc2V0dGluZ3MuanNvbnAgPT09IGZhbHNlID8gJycgOiAnY2FsbGJhY2s9PycpXG4gICAgICByZXR1cm4gJC5hamF4SlNPTlAoc2V0dGluZ3MsIGRlZmVycmVkKVxuICAgIH1cblxuICAgIHZhciBtaW1lID0gc2V0dGluZ3MuYWNjZXB0c1tkYXRhVHlwZV0sXG4gICAgICAgIGhlYWRlcnMgPSB7IH0sXG4gICAgICAgIHNldEhlYWRlciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7IGhlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXSA9IFtuYW1lLCB2YWx1ZV0gfSxcbiAgICAgICAgcHJvdG9jb2wgPSAvXihbXFx3LV0rOilcXC9cXC8vLnRlc3Qoc2V0dGluZ3MudXJsKSA/IFJlZ0V4cC4kMSA6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCxcbiAgICAgICAgeGhyID0gc2V0dGluZ3MueGhyKCksXG4gICAgICAgIG5hdGl2ZVNldEhlYWRlciA9IHhoci5zZXRSZXF1ZXN0SGVhZGVyLFxuICAgICAgICBhYm9ydFRpbWVvdXRcblxuICAgIGlmIChkZWZlcnJlZCkgZGVmZXJyZWQucHJvbWlzZSh4aHIpXG5cbiAgICBpZiAoIXNldHRpbmdzLmNyb3NzRG9tYWluKSBzZXRIZWFkZXIoJ1gtUmVxdWVzdGVkLVdpdGgnLCAnWE1MSHR0cFJlcXVlc3QnKVxuICAgIHNldEhlYWRlcignQWNjZXB0JywgbWltZSB8fCAnKi8qJylcbiAgICBpZiAobWltZSA9IHNldHRpbmdzLm1pbWVUeXBlIHx8IG1pbWUpIHtcbiAgICAgIGlmIChtaW1lLmluZGV4T2YoJywnKSA+IC0xKSBtaW1lID0gbWltZS5zcGxpdCgnLCcsIDIpWzBdXG4gICAgICB4aHIub3ZlcnJpZGVNaW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZShtaW1lKVxuICAgIH1cbiAgICBpZiAoc2V0dGluZ3MuY29udGVudFR5cGUgfHwgKHNldHRpbmdzLmNvbnRlbnRUeXBlICE9PSBmYWxzZSAmJiBzZXR0aW5ncy5kYXRhICYmIHNldHRpbmdzLnR5cGUudG9VcHBlckNhc2UoKSAhPSAnR0VUJykpXG4gICAgICBzZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsIHNldHRpbmdzLmNvbnRlbnRUeXBlIHx8ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKVxuXG4gICAgaWYgKHNldHRpbmdzLmhlYWRlcnMpIGZvciAobmFtZSBpbiBzZXR0aW5ncy5oZWFkZXJzKSBzZXRIZWFkZXIobmFtZSwgc2V0dGluZ3MuaGVhZGVyc1tuYW1lXSlcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlciA9IHNldEhlYWRlclxuXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZW1wdHlcbiAgICAgICAgY2xlYXJUaW1lb3V0KGFib3J0VGltZW91dClcbiAgICAgICAgdmFyIHJlc3VsdCwgZXJyb3IgPSBmYWxzZVxuICAgICAgICBpZiAoKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHx8IHhoci5zdGF0dXMgPT0gMzA0IHx8ICh4aHIuc3RhdHVzID09IDAgJiYgcHJvdG9jb2wgPT0gJ2ZpbGU6JykpIHtcbiAgICAgICAgICBkYXRhVHlwZSA9IGRhdGFUeXBlIHx8IG1pbWVUb0RhdGFUeXBlKHNldHRpbmdzLm1pbWVUeXBlIHx8IHhoci5nZXRSZXNwb25zZUhlYWRlcignY29udGVudC10eXBlJykpXG5cbiAgICAgICAgICBpZiAoeGhyLnJlc3BvbnNlVHlwZSA9PSAnYXJyYXlidWZmZXInIHx8IHhoci5yZXNwb25zZVR5cGUgPT0gJ2Jsb2InKVxuICAgICAgICAgICAgcmVzdWx0ID0geGhyLnJlc3BvbnNlXG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB4aHIucmVzcG9uc2VUZXh0XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vIGh0dHA6Ly9wZXJmZWN0aW9ua2lsbHMuY29tL2dsb2JhbC1ldmFsLXdoYXQtYXJlLXRoZS1vcHRpb25zL1xuICAgICAgICAgICAgICAvLyBzYW5pdGl6ZSByZXNwb25zZSBhY2NvcmRpbmdseSBpZiBkYXRhIGZpbHRlciBjYWxsYmFjayBwcm92aWRlZFxuICAgICAgICAgICAgICByZXN1bHQgPSBhamF4RGF0YUZpbHRlcihyZXN1bHQsIGRhdGFUeXBlLCBzZXR0aW5ncylcbiAgICAgICAgICAgICAgaWYgKGRhdGFUeXBlID09ICdzY3JpcHQnKSAgICAoMSxldmFsKShyZXN1bHQpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFUeXBlID09ICd4bWwnKSAgcmVzdWx0ID0geGhyLnJlc3BvbnNlWE1MXG4gICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFUeXBlID09ICdqc29uJykgcmVzdWx0ID0gYmxhbmtSRS50ZXN0KHJlc3VsdCkgPyBudWxsIDogJC5wYXJzZUpTT04ocmVzdWx0KVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyBlcnJvciA9IGUgfVxuXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJldHVybiBhamF4RXJyb3IoZXJyb3IsICdwYXJzZXJlcnJvcicsIHhociwgc2V0dGluZ3MsIGRlZmVycmVkKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGFqYXhTdWNjZXNzKHJlc3VsdCwgeGhyLCBzZXR0aW5ncywgZGVmZXJyZWQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWpheEVycm9yKHhoci5zdGF0dXNUZXh0IHx8IG51bGwsIHhoci5zdGF0dXMgPyAnZXJyb3InIDogJ2Fib3J0JywgeGhyLCBzZXR0aW5ncywgZGVmZXJyZWQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWpheEJlZm9yZVNlbmQoeGhyLCBzZXR0aW5ncykgPT09IGZhbHNlKSB7XG4gICAgICB4aHIuYWJvcnQoKVxuICAgICAgYWpheEVycm9yKG51bGwsICdhYm9ydCcsIHhociwgc2V0dGluZ3MsIGRlZmVycmVkKVxuICAgICAgcmV0dXJuIHhoclxuICAgIH1cblxuICAgIHZhciBhc3luYyA9ICdhc3luYycgaW4gc2V0dGluZ3MgPyBzZXR0aW5ncy5hc3luYyA6IHRydWVcbiAgICB4aHIub3BlbihzZXR0aW5ncy50eXBlLCBzZXR0aW5ncy51cmwsIGFzeW5jLCBzZXR0aW5ncy51c2VybmFtZSwgc2V0dGluZ3MucGFzc3dvcmQpXG5cbiAgICBpZiAoc2V0dGluZ3MueGhyRmllbGRzKSBmb3IgKG5hbWUgaW4gc2V0dGluZ3MueGhyRmllbGRzKSB4aHJbbmFtZV0gPSBzZXR0aW5ncy54aHJGaWVsZHNbbmFtZV1cblxuICAgIGZvciAobmFtZSBpbiBoZWFkZXJzKSBuYXRpdmVTZXRIZWFkZXIuYXBwbHkoeGhyLCBoZWFkZXJzW25hbWVdKVxuXG4gICAgaWYgKHNldHRpbmdzLnRpbWVvdXQgPiAwKSBhYm9ydFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBlbXB0eVxuICAgICAgICB4aHIuYWJvcnQoKVxuICAgICAgICBhamF4RXJyb3IobnVsbCwgJ3RpbWVvdXQnLCB4aHIsIHNldHRpbmdzLCBkZWZlcnJlZClcbiAgICAgIH0sIHNldHRpbmdzLnRpbWVvdXQpXG5cbiAgICAvLyBhdm9pZCBzZW5kaW5nIGVtcHR5IHN0cmluZyAoIzMxOSlcbiAgICB4aHIuc2VuZChzZXR0aW5ncy5kYXRhID8gc2V0dGluZ3MuZGF0YSA6IG51bGwpXG4gICAgcmV0dXJuIHhoclxuICB9XG5cbiAgLy8gaGFuZGxlIG9wdGlvbmFsIGRhdGEvc3VjY2VzcyBhcmd1bWVudHNcbiAgZnVuY3Rpb24gcGFyc2VBcmd1bWVudHModXJsLCBkYXRhLCBzdWNjZXNzLCBkYXRhVHlwZSkge1xuICAgIGlmICgkLmlzRnVuY3Rpb24oZGF0YSkpIGRhdGFUeXBlID0gc3VjY2Vzcywgc3VjY2VzcyA9IGRhdGEsIGRhdGEgPSB1bmRlZmluZWRcbiAgICBpZiAoISQuaXNGdW5jdGlvbihzdWNjZXNzKSkgZGF0YVR5cGUgPSBzdWNjZXNzLCBzdWNjZXNzID0gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHtcbiAgICAgIHVybDogdXJsXG4gICAgLCBkYXRhOiBkYXRhXG4gICAgLCBzdWNjZXNzOiBzdWNjZXNzXG4gICAgLCBkYXRhVHlwZTogZGF0YVR5cGVcbiAgICB9XG4gIH1cblxuICAkLmdldCA9IGZ1bmN0aW9uKC8qIHVybCwgZGF0YSwgc3VjY2VzcywgZGF0YVR5cGUgKi8pe1xuICAgIHJldHVybiAkLmFqYXgocGFyc2VBcmd1bWVudHMuYXBwbHkobnVsbCwgYXJndW1lbnRzKSlcbiAgfVxuXG4gICQucG9zdCA9IGZ1bmN0aW9uKC8qIHVybCwgZGF0YSwgc3VjY2VzcywgZGF0YVR5cGUgKi8pe1xuICAgIHZhciBvcHRpb25zID0gcGFyc2VBcmd1bWVudHMuYXBwbHkobnVsbCwgYXJndW1lbnRzKVxuICAgIG9wdGlvbnMudHlwZSA9ICdQT1NUJ1xuICAgIHJldHVybiAkLmFqYXgob3B0aW9ucylcbiAgfVxuXG4gICQuZ2V0SlNPTiA9IGZ1bmN0aW9uKC8qIHVybCwgZGF0YSwgc3VjY2VzcyAqLyl7XG4gICAgdmFyIG9wdGlvbnMgPSBwYXJzZUFyZ3VtZW50cy5hcHBseShudWxsLCBhcmd1bWVudHMpXG4gICAgb3B0aW9ucy5kYXRhVHlwZSA9ICdqc29uJ1xuICAgIHJldHVybiAkLmFqYXgob3B0aW9ucylcbiAgfVxuXG4gICQuZm4ubG9hZCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgc3VjY2Vzcyl7XG4gICAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuIHRoaXNcbiAgICB2YXIgc2VsZiA9IHRoaXMsIHBhcnRzID0gdXJsLnNwbGl0KC9cXHMvKSwgc2VsZWN0b3IsXG4gICAgICAgIG9wdGlvbnMgPSBwYXJzZUFyZ3VtZW50cyh1cmwsIGRhdGEsIHN1Y2Nlc3MpLFxuICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnMuc3VjY2Vzc1xuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSBvcHRpb25zLnVybCA9IHBhcnRzWzBdLCBzZWxlY3RvciA9IHBhcnRzWzFdXG4gICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgc2VsZi5odG1sKHNlbGVjdG9yID9cbiAgICAgICAgJCgnPGRpdj4nKS5odG1sKHJlc3BvbnNlLnJlcGxhY2UocnNjcmlwdCwgXCJcIikpLmZpbmQoc2VsZWN0b3IpXG4gICAgICAgIDogcmVzcG9uc2UpXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjay5hcHBseShzZWxmLCBhcmd1bWVudHMpXG4gICAgfVxuICAgICQuYWpheChvcHRpb25zKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICB2YXIgZXNjYXBlID0gZW5jb2RlVVJJQ29tcG9uZW50XG5cbiAgZnVuY3Rpb24gc2VyaWFsaXplKHBhcmFtcywgb2JqLCB0cmFkaXRpb25hbCwgc2NvcGUpe1xuICAgIHZhciB0eXBlLCBhcnJheSA9ICQuaXNBcnJheShvYmopLCBoYXNoID0gJC5pc1BsYWluT2JqZWN0KG9iailcbiAgICAkLmVhY2gob2JqLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICB0eXBlID0gJC50eXBlKHZhbHVlKVxuICAgICAgaWYgKHNjb3BlKSBrZXkgPSB0cmFkaXRpb25hbCA/IHNjb3BlIDpcbiAgICAgICAgc2NvcGUgKyAnWycgKyAoaGFzaCB8fCB0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2FycmF5JyA/IGtleSA6ICcnKSArICddJ1xuICAgICAgLy8gaGFuZGxlIGRhdGEgaW4gc2VyaWFsaXplQXJyYXkoKSBmb3JtYXRcbiAgICAgIGlmICghc2NvcGUgJiYgYXJyYXkpIHBhcmFtcy5hZGQodmFsdWUubmFtZSwgdmFsdWUudmFsdWUpXG4gICAgICAvLyByZWN1cnNlIGludG8gbmVzdGVkIG9iamVjdHNcbiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJhcnJheVwiIHx8ICghdHJhZGl0aW9uYWwgJiYgdHlwZSA9PSBcIm9iamVjdFwiKSlcbiAgICAgICAgc2VyaWFsaXplKHBhcmFtcywgdmFsdWUsIHRyYWRpdGlvbmFsLCBrZXkpXG4gICAgICBlbHNlIHBhcmFtcy5hZGQoa2V5LCB2YWx1ZSlcbiAgICB9KVxuICB9XG5cbiAgJC5wYXJhbSA9IGZ1bmN0aW9uKG9iaiwgdHJhZGl0aW9uYWwpe1xuICAgIHZhciBwYXJhbXMgPSBbXVxuICAgIHBhcmFtcy5hZGQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoJC5pc0Z1bmN0aW9uKHZhbHVlKSkgdmFsdWUgPSB2YWx1ZSgpXG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkgdmFsdWUgPSBcIlwiXG4gICAgICB0aGlzLnB1c2goZXNjYXBlKGtleSkgKyAnPScgKyBlc2NhcGUodmFsdWUpKVxuICAgIH1cbiAgICBzZXJpYWxpemUocGFyYW1zLCBvYmosIHRyYWRpdGlvbmFsKVxuICAgIHJldHVybiBwYXJhbXMuam9pbignJicpLnJlcGxhY2UoLyUyMC9nLCAnKycpXG4gIH1cbn0pKFplcHRvKVxuXG47KGZ1bmN0aW9uKCQpe1xuICAkLmZuLnNlcmlhbGl6ZUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5hbWUsIHR5cGUsIHJlc3VsdCA9IFtdLFxuICAgICAgYWRkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlLmZvckVhY2gpIHJldHVybiB2YWx1ZS5mb3JFYWNoKGFkZClcbiAgICAgICAgcmVzdWx0LnB1c2goeyBuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUgfSlcbiAgICAgIH1cbiAgICBpZiAodGhpc1swXSkgJC5lYWNoKHRoaXNbMF0uZWxlbWVudHMsIGZ1bmN0aW9uKF8sIGZpZWxkKXtcbiAgICAgIHR5cGUgPSBmaWVsZC50eXBlLCBuYW1lID0gZmllbGQubmFtZVxuICAgICAgaWYgKG5hbWUgJiYgZmllbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPSAnZmllbGRzZXQnICYmXG4gICAgICAgICFmaWVsZC5kaXNhYmxlZCAmJiB0eXBlICE9ICdzdWJtaXQnICYmIHR5cGUgIT0gJ3Jlc2V0JyAmJiB0eXBlICE9ICdidXR0b24nICYmIHR5cGUgIT0gJ2ZpbGUnICYmXG4gICAgICAgICgodHlwZSAhPSAncmFkaW8nICYmIHR5cGUgIT0gJ2NoZWNrYm94JykgfHwgZmllbGQuY2hlY2tlZCkpXG4gICAgICAgICAgYWRkKCQoZmllbGQpLnZhbCgpKVxuICAgIH0pXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgJC5mbi5zZXJpYWxpemUgPSBmdW5jdGlvbigpe1xuICAgIHZhciByZXN1bHQgPSBbXVxuICAgIHRoaXMuc2VyaWFsaXplQXJyYXkoKS5mb3JFYWNoKGZ1bmN0aW9uKGVsbSl7XG4gICAgICByZXN1bHQucHVzaChlbmNvZGVVUklDb21wb25lbnQoZWxtLm5hbWUpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGVsbS52YWx1ZSkpXG4gICAgfSlcbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJyYnKVxuICB9XG5cbiAgJC5mbi5zdWJtaXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmICgwIGluIGFyZ3VtZW50cykgdGhpcy5iaW5kKCdzdWJtaXQnLCBjYWxsYmFjaylcbiAgICBlbHNlIGlmICh0aGlzLmxlbmd0aCkge1xuICAgICAgdmFyIGV2ZW50ID0gJC5FdmVudCgnc3VibWl0JylcbiAgICAgIHRoaXMuZXEoMCkudHJpZ2dlcihldmVudClcbiAgICAgIGlmICghZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHRoaXMuZ2V0KDApLnN1Ym1pdCgpXG4gICAgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxufSkoWmVwdG8pXG5cbjsoZnVuY3Rpb24oKXtcbiAgLy8gZ2V0Q29tcHV0ZWRTdHlsZSBzaG91bGRuJ3QgZnJlYWsgb3V0IHdoZW4gY2FsbGVkXG4gIC8vIHdpdGhvdXQgYSB2YWxpZCBlbGVtZW50IGFzIGFyZ3VtZW50XG4gIHRyeSB7XG4gICAgZ2V0Q29tcHV0ZWRTdHlsZSh1bmRlZmluZWQpXG4gIH0gY2F0Y2goZSkge1xuICAgIHZhciBuYXRpdmVHZXRDb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZVxuICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlID0gZnVuY3Rpb24oZWxlbWVudCwgcHNldWRvRWxlbWVudCl7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmF0aXZlR2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBwc2V1ZG9FbGVtZW50KVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpXG4gIHJldHVybiBaZXB0b1xufSkpXG4iCgovKioqLyB9KSwKLyogOSAqLywKLyogMTAgKi8sCi8qIDExICovLAovKiAxMiAqLywKLyogMTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTsKCgovKioqLyB9KSwKLyogMTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy9jb25zb2xlLiAgZW1lZGlhLl9fZWFzZW1vYl9jdXJyZW50X21zZXJ2aWNlLmN1cnJlbnQKCgp2YXIgZW1lZGlhID0gd2luZG93LmVtZWRpYSA9IHdpbmRvdy5lbWVkaWEgfHwge307Cgp2YXIgdXRpbCA9IGVtZWRpYS51dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CnZhciB6ZXB0byA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgplbWVkaWEuY29uZmlnID0gZnVuY3Rpb24gKGNmZykgewogICAgY2ZnID0gdXRpbC5leHRlbmQoe30sIGNmZyk7CgogICAgZm9yICh2YXIga2V5IGluIGNmZykgewogICAgICAgIGVtZWRpYS5jb25maWdba2V5XSA9IGNmZ1trZXldOwogICAgICAgIGlmIChrZXkgPT09ICJsb2dMZXZlbCIpIHsKICAgICAgICAgICAgZW1lZGlhLkxPR19MRVZFTCA9IGNmZ1trZXldOwogICAgICAgIH0KICAgIH0KCiAgICBpZiAoZW1lZGlhLmNvbmZpZy5sb2dsYXN0Q29uZnJDb3VudCAmJiAhZW1lZGlhLl9sb2dDb250ZXh0KSB7CiAgICAgICAgZW1lZGlhLl9sb2dDb250ZXh0ID0gbmV3IEFycmF5KGVtZWRpYS5jb25maWcubG9nbGFzdENvbmZyQ291bnQpOwogICAgICAgIGVtZWRpYS5fbG9nQ29udGV4dEluZGV4ID0gLTE7IC8v5Luj6KGo5rKh5pyJ5pel5b+XCiAgICB9Cn07CgplbWVkaWEuY29uZmlnKHsKICAgIGF1dG9TdWI6IHRydWUsCgogICAgb25seUVudGVyOiBmYWxzZSwKCiAgICByZWNvbm5lY3Q6IDEzLCAvL+mHjei/nuasoeaVsAogICAgcmVjb25uZWN0RGVsYXk6IDMwMDAsIC8v6YeN6L+e6Ze06ZqUIOavq+enkgoKICAgIGdldENvcHlJbnRlcnZhbE1pbGxpczogMzAwMDAsCiAgICBjaGVja0Nvbm5lY3RJbnRlcnZhbE1pbGxpczogMTAwMCwKCiAgICBpY2VSZWJ1aWxkQ291bnQ6IDMsCiAgICBpY2VSZWJ1aWxkSW50ZXJ2YWxNaWxsaXM6IDUwMCwKCiAgICBlbnRlclRpbWVvdXQ6IDIwMDAwLAoKICAgIHVzZVJUQ0NmZ0lmU2VydmVyUmV0dXJuOiBmYWxzZSwKICAgIGZvcmNlVXNlUlRDQ2ZnSWZTZXJ2ZXJSZXR1cm5XaGVuUDJQOiB0cnVlLAoKICAgIGFsbG93UmVwZWF0QXVkaW9NaXhlclB1Ymxpc2g6IGZhbHNlLAoKICAgIGdldE1lZGlhTWV0ZXJJbnRlcnZhbE1pbGxpczogNDAwLAogICAgX3VzZVJlcXVlc3RBbmltYXRpb25GcmFtZTogZmFsc2UsCgogICAgbWV0ZXJXaXRoVHJhY2tBdWRpb0xldmVsOiBmYWxzZSwKICAgIGp1ZGdlVGFsa2luZ0J5SW5zdGFudEdFOiAwLjA1LAoKICAgIF9wcmludFNvdW5kRGF0YTogZmFsc2UsCgogICAgdHJhY2tCdWZmZXJTaXplOiAyMCwKICAgIGFsbG93U2VuZFdoZW5MZXNzVGhhbjogNCwKICAgIGRpc2FibGVUcmFjazogZmFsc2UsCgogICAgY3RybENoZWNrSW50ZXJ2YWxNaWxsaXM6IDEwICogMTAwMCwKICAgIGN0cmxUaW1lb3V0TWlsbGlzOiAzMCAqIDEwMDAsCgogICAgX3ByaW50RGVidWdTdGF0czogZmFsc2UsCiAgICBzdGF0c1NlY29uZHM6IDMsCiAgICAvL3dzb3JpZ2luCgogICAgbG9nbGFzdENvbmZyQ291bnQ6IDIsCiAgICBjb25zb2xlTG9nZ2VyOiB0cnVlCn0pOwoKdXRpbC5sb2dnZXIuY291bnQoKTsKLy91dGlsLmxvZ2dlci5pbmZvKG5hdmlnYXRvci51c2VyQWdlbnQpOwoKKGZ1bmN0aW9uIHJlcXVpcmVXZWJydGNBZGFwdGVyKCkgewogICAgdmFyIGFkYXB0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOwogICAgZW1lZGlhLmJyb3dzZXIgPSBhZGFwdGVyLl9fYnJvd3NlcjsgLy8gZmlyZWZveCBjaHJvbWUgc2FmYXJpIElFCiAgICBlbWVkaWEuYnJvd3NlclZlcnNpb24gPSBhZGFwdGVyLl9fYnJvd3NlclZlcnNpb247Cn0pKCk7CnV0aWwubG9nZ2VyLmluZm8oIkN1cnJlbnQgYnJvd3NlciIsIGVtZWRpYS5icm93c2VyLCBlbWVkaWEuYnJvd3NlclZlcnNpb24pOwoKZW1lZGlhLkF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKCmlmIChlbWVkaWEuY29uZmlnLmdldE1lZGlhTWV0ZXJJbnRlcnZhbE1pbGxpcykgewogICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDYzNjMwNDgvb25hdWRpb3Byb2Nlc3Mtbm90LWNhbGxlZC1vbi1pb3MxMS80NjUzNDA4OCM0NjUzNDA4OAogICAgLy8gVGhlcmUgYXJlIHR3byBwcm9ibGVtcy4KICAgIC8vIFRoZSBtYWluIG9uZSBpcyB0aGF0IFNhZmFyaSBvbiBpT1MgMTEgc2VlbXMgdG8gYXV0b21hdGljYWxseSBzdXNwZW5kIG5ldyBBdWRpb0NvbnRleHQncyB0aGF0IGFyZW4ndCBjcmVhdGVkIGluIHJlc3BvbnNlIHRvIGEgdGFwLgogICAgLy8gWW91IGNhbiByZXN1bWUoKSB0aGVtLCBidXQgb25seSBpbiByZXNwb25zZSB0byBhIHRhcC4KICAgIC8vCiAgICAvLyBTbywgeW91IGhhdmUgdG8gZWl0aGVyIGNyZWF0ZSBpdCBiZWZvcmUgeW91IGdldCB0aGUgTWVkaWFTdHJlYW0sIG9yIGVsc2UgZ2V0IHRoZSB1c2VyIHRvIHRhcCBhZ2FpbiBsYXRlci4KICAgIHRyeSB7CiAgICAgICAgaWYgKHR5cGVvZiBlbWVkaWEuQXVkaW9Db250ZXh0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGVtZWRpYS5fX2F1ZGlvQ29udGV4dCA9IG5ldyBlbWVkaWEuQXVkaW9Db250ZXh0KCk7CiAgICAgICAgICAgIGVtZWRpYS5fX3VzaW5nV2ViQXVkaW8gPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVtZWRpYS5fX3VzaW5nV2ViQXVkaW8gPSBmYWxzZTsKICAgICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgZW1lZGlhLl9fdXNpbmdXZWJBdWRpbyA9IGZhbHNlOwogICAgfQoKICAgIC8vIGNvbnRleHQgc3RhdGUgYXQgdGhpcyB0aW1lIGlzIGB1bmRlZmluZWRgIGluIGlPUzggU2FmYXJpCiAgICBpZiAoZW1lZGlhLl9fdXNpbmdXZWJBdWRpbyAmJiBlbWVkaWEuX19hdWRpb0NvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7CiAgICAgICAgemVwdG8oZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcmVzdW1lID0gZnVuY3Rpb24gcmVzdW1lKCkgewogICAgICAgICAgICAgICAgZW1lZGlhLl9fYXVkaW9Db250ZXh0LnN0YXRlID09PSAnc3VzcGVuZGVkJyAmJiBlbWVkaWEuX19hdWRpb0NvbnRleHQucmVzdW1lKCk7CiAgICAgICAgICAgICAgICB1dGlsLmxvZ2dlci53YXJuKCJBdWRpb0NvbnRleHQgc3RhdGUgc3VzcGVuZGVkIC0+IiwgZW1lZGlhLl9fYXVkaW9Db250ZXh0LnN0YXRlKTsKCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZW1lZGlhLl9fYXVkaW9Db250ZXh0LnN0YXRlID09PSAncnVubmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHJlc3VtZSwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVzdW1lLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgcmVzdW1lLCBmYWxzZSk7CiAgICAgICAgICAgIC8vZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzdW1lLCBmYWxzZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXN1bWUsIGZhbHNlKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBpZiAoIWVtZWRpYS5fX3VzaW5nV2ViQXVkaW8pIHsKICAgICAgICBjb25zb2xlLndhcm4oIiduZXcgQXVkaW9Db250ZXh0KCknIGZhaWxlZC4gY2FuIG5vdCBrbm93IHdobyB0YWxraW5nLiIpOwogICAgfQogICAgaWYgKGVtZWRpYS5fX2F1ZGlvQ29udGV4dCAmJiBlbWVkaWEuX19hdWRpb0NvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJhdWRpb0NvbnRleHQuc3RhdGUgaXMgc3VzcGVuZGVkLiBjYW4gbm90IGtub3cgd2hvIHRhbGtpbmcuIFlvdSBjYW4gcmVzdW1lKCkgZW1lZGlhLl9fYXVkaW9Db250ZXh0LCBidXQgb25seSBpbiByZXNwb25zZSB0byBhIHRhcC4iKTsKICAgIH0KfQoKaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8ICFlbWVkaWEuY29uZmlnLl91c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHsKICAgIGVtZWRpYS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoZm4sIHRpbWVvdXRNaWxsaXMpIHsKICAgICAgICByZXR1cm4gc2V0VGltZW91dChmbiwgdGltZW91dE1pbGxpcyB8fCBlbWVkaWEuY29uZmlnLmdldE1lZGlhTWV0ZXJJbnRlcnZhbE1pbGxpcyk7CiAgICB9Owp9IGVsc2UgewogICAgZW1lZGlhLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spOwogICAgfTsKfQoKaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgIWVtZWRpYS5jb25maWcuX3VzZVJlcXVlc3RBbmltYXRpb25GcmFtZSkgewogICAgZW1lZGlhLmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTsKICAgIH07Cn0gZWxzZSB7CiAgICBlbWVkaWEuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoaWQpIHsKICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpOwogICAgfTsKfQoKZW1lZGlhLnN0b3BBdWRpb1RyYWNrcyA9IGZ1bmN0aW9uIChfc3RyZWFtKSB7CiAgICBfc3RyZWFtICYmIF9zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgIHRyYWNrLnN0b3AoKTsKICAgIH0pOwp9OwplbWVkaWEuc3RvcEFuZFJlbW92ZUF1ZGlvVHJhY2tzID0gZnVuY3Rpb24gKF9zdHJlYW0pIHsKICAgIHZhciB0cmFja3MgPSBbXTsKICAgIF9zdHJlYW0gJiYgX3N0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICAgIHRyYWNrcy5wdXNoKHRyYWNrKTsKICAgIH0pOwoKICAgIHV0aWwuZm9yRWFjaCh0cmFja3MsIGZ1bmN0aW9uIChfaW5kZXgsIHRyYWNrKSB7CiAgICAgICAgX3N0cmVhbS5yZW1vdmVUcmFjayh0cmFjayk7CiAgICB9KTsKfTsKCmVtZWRpYS5zdG9wVHJhY2tzID0gZnVuY3Rpb24gKF9zdHJlYW0pIHsKICAgIHRyeSB7CiAgICAgICAgdmFyIHN0b3AgPSBmdW5jdGlvbiBzdG9wKCkgewogICAgICAgICAgICBfc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICB0cmFjay5zdG9wKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKF9zdHJlYW0uX2JpbmRBdHRlbmRlZSkgewogICAgICAgICAgICAgICAgLy9wdXNoIHN0cmVhbeaXtu+8jOeUseS6juW8guatpe+8jOWcqOacqui/lOWbnuaIkOWKn+WQju+8jOmAgOWHuuS8muiuru+8jOaRhOWDj+WktOS4jeS8muiiq+WFs+mXremXrumimAogICAgICAgICAgICAgICAgdXRpbC5yZW1vdmVBdHRyaWJ1dGUoX3N0cmVhbS5fYmluZEF0dGVuZGVlLl9vcGVuZWRSdGNNZWRpYVN0cmVhbXMsIF9zdHJlYW0uaWQpOwogICAgICAgICAgICAgICAgX3N0cmVhbS5fYmluZEF0dGVuZGVlID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB1dGlsLmxvZ2dlci5pbmZvKCJzdHJlYW0gdHJhY2tzIHN0b3BlZC4gaXQgIiwgX3N0cmVhbSk7CiAgICAgICAgfTsKCiAgICAgICAgaWYgKCFfc3RyZWFtIHx8IF9zdHJlYW0uYWN0aXZlID09PSBmYWxzZSkgewogICAgICAgICAgICB1dGlsLmxvZ2dlci5kZWJ1Zygic3RyZWFtIHRyYWNrcyBoYWQgYmVlbiBzdG9wZWQuIGl0ICIsIF9zdHJlYW0gJiYgX3N0cmVhbS5pZCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHN0b3AoKTsKICAgICAgICAvL3NldFRpbWVvdXQoc3RvcCwgMzAwKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB1dGlsLmxvZ2dlci5lcnJvcihlKTsKICAgIH0KfTsKCmVtZWRpYS5lbmFibGVWaWRlb1RyYWNrcyA9IGZ1bmN0aW9uIChfc3RyZWFtLCBlbmFibGVkKSB7CiAgICBfc3RyZWFtICYmIF9zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgIGlmICh0eXBlb2YgdHJhY2suZW5hYmxlID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIHRyYWNrLmVuYWJsZSgpOwogICAgICAgICAgICB0cmFjay5lbmFibGVkID09PSBlbmFibGVkIHx8IHRyYWNrLmVuYWJsZShlbmFibGVkKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdHJhY2suZW5hYmxlZCA9PT0gZW5hYmxlZCB8fCAodHJhY2suZW5hYmxlZCA9IGVuYWJsZWQpOwogICAgfSk7Cn07CgplbWVkaWEuZW5hYmxlQXVkaW9UcmFja3MgPSBmdW5jdGlvbiAoX3N0cmVhbSwgZW5hYmxlZCkgewogICAgX3N0cmVhbSAmJiBfc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICBpZiAodHlwZW9mIHRyYWNrLmVuYWJsZSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICB0cmFjay5lbmFibGUoKTsKICAgICAgICAgICAgdHJhY2suZW5hYmxlZCA9PT0gZW5hYmxlZCB8fCB0cmFjay5lbmFibGUoZW5hYmxlZCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRyYWNrLmVuYWJsZWQgPT09IGVuYWJsZWQgfHwgKHRyYWNrLmVuYWJsZWQgPSBlbmFibGVkKTsKICAgIH0pOwp9OwoKZW1lZGlhLmhhc0VuYWJsZWRUcmFja3MgPSBmdW5jdGlvbiAobWVkaWFTdHJlYW0pIHsKICAgIGlmICghbWVkaWFTdHJlYW0gfHwgdHlwZW9mIG1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGlmICghbWVkaWFTdHJlYW0uYWN0aXZlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHZhciB0cmFja3MgPSBtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpOwoKICAgIGlmICh0cmFja3MubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZvciAodmFyIGkgaW4gdHJhY2tzKSB7CiAgICAgICAgaWYgKHR5cGVvZiB0cmFja3NbaV0uZW5hYmxlID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIHRyYWNrc1tpXS5lbmFibGUoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYWNrc1tpXS5lbmFibGVkKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7Cn07CgplbWVkaWEuZmlsZVJlcG9ydCA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICghZW1lZGlhLl9sb2dDb250ZXh0KSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCEoZW1lZGlhLl9sb2dDb250ZXh0IGluc3RhbmNlb2YgQXJyYXkpKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHR5cGVvZiBlbWVkaWEuX2xvZ0NvbnRleHRJbmRleCA9PT0gJ3VuZGVmaW5lZCcgfHwgZW1lZGlhLl9sb2dDb250ZXh0SW5kZXggPCAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzdGFydCA9IDA7CiAgICB2YXIgZW5kID0gZW1lZGlhLl9sb2dDb250ZXh0SW5kZXg7CiAgICBpZiAoZW1lZGlhLl9sb2dDb250ZXh0SW5kZXggPj0gZW1lZGlhLl9sb2dDb250ZXh0Lmxlbmd0aCkgewogICAgICAgIHN0YXJ0ID0gZW1lZGlhLl9sb2dDb250ZXh0SW5kZXggLSBlbWVkaWEuX2xvZ0NvbnRleHQubGVuZ3RoICsgMTsKICAgIH0KCiAgICB2YXIgcmVwb3J0ID0gIiI7CiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHsKICAgICAgICB2YXIgaW5kZXggPSBpICUgZW1lZGlhLl9sb2dDb250ZXh0Lmxlbmd0aDsKICAgICAgICB2YXIgb25lQ29uZnJMb2dzID0gZW1lZGlhLl9sb2dDb250ZXh0W2luZGV4XTsKICAgICAgICByZXBvcnQgKz0gb25lQ29uZnJMb2dzLmpvaW4oIlxyXG4iKSArICJcclxuIjsKICAgIH0KCiAgICBpZiAoZW1lZGlhLl9sb2dDb250ZXh0LmxvYWRsb2dzICYmIGVtZWRpYS5fbG9nQ29udGV4dC5sb2FkbG9ncyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgcmVwb3J0ICs9ICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiI7CiAgICAgICAgcmVwb3J0ICs9IGVtZWRpYS5fbG9nQ29udGV4dC5sb2FkbG9ncy5qb2luKCJcclxuIikgKyAiXHJcbiI7CiAgICB9CgogICAgdmFyIGZpbGVDb250ZW50ID0gcmVwb3J0OwogICAgdmFyIGNvbnRlbnQgPSBlbmNvZGVVUklDb21wb25lbnQoZmlsZUNvbnRlbnQpOwoKICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgbGluay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgbGluay5kb3dubG9hZCA9ICdlbWVkaWEtJyArIG5ldyBEYXRlKCkudG9KU09OKCkgKyAnLmxvZyc7CiAgICBsaW5rLmhyZWYgPSAnZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsJyArIGNvbnRlbnQ7CiAgICAvL2xpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGxpbmsuZG93bmxvYWQpOwogICAgLy9saW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICdkYXRhOnRleHQvcGxhaW47Y2hhcnNldD11dGYtOCwnICsgY29udGVudCk7IC8vJ2RhdGE6YXR0YWNobWVudC9maWxlO2NoYXJzZXQ9dXRmLTgsJyArIGNvbnRlbnQKCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgbGluay5jbGljaygpOwogICAgbGluay5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxpbmspOwp9OwoKdmFyIFNlcnZpY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKdmFyIF9fZXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCmVtZWRpYS5XZWJydGMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCmVtZWRpYS5TZXJ2aWNlID0gU2VydmljZTsKZW1lZGlhLlAyUCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOwovLyB2YXIgY2xvbmVTZXJ2aWNlID0gdXRpbC5leHRlbmQoe30sIFNlcnZpY2UpLmV4dGVuZChTZXJ2aWNlKTsKZW1lZGlhLlhTZXJ2aWNlID0gU2VydmljZTsKZW1lZGlhLlhTZXJ2aWNlV2l0aFAyUCA9IGVtZWRpYS5QMlAoU2VydmljZSk7CgovLyBlbWVkaWEubWdyID0gcmVxdWlyZSgiLi9jb21wb25lbnRzL21nci9NYW5hZ2VyIik7Ci8vIGVtZWRpYS5tZ3IgPSBlbWVkaWEubWdyLnNpbmdsZTsKZW1lZGlhLm1nciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpLm91dGVyOwoKZW1lZGlhLmN0cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNik7CmVtZWRpYS5Db21wb3NpdGVDYW52YXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0Mik7CgplbWVkaWEucGFubmVsIHx8IChlbWVkaWEucGFubmVsID0ge30pOwplbWVkaWEucGFubmVsLkRlZmF1bHRNb3VzZVRyYWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7CmVtZWRpYS5wYW5uZWwuTW91c2VUcmFjayA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOwplbWVkaWEucGFubmVsLktleWJvYXJkVHJhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0Myk7Cgp2YXIgUENTdGF0cyA9IGVtZWRpYS5QQ1N0YXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDQpOwoKZW1lZGlhLmhlbHBlciA9IGVtZWRpYS5oZWxwZXIgfHwge307CgplbWVkaWEuaGVscGVyLlBDU3RhdHMgPSBQQ1N0YXRzOwoKZW1lZGlhLmhlbHBlci5wY3N0YXRzID0gUENTdGF0cy5lY2hvOwplbWVkaWEuaGVscGVyLmludGVydmFsUGNzdGF0cyA9IFBDU3RhdHMuaW50ZXJ2YWxFY2hvOwoKZW1lZGlhLmhlbHBlci5pbmJvdW5kQXVkaW8gPSBQQ1N0YXRzLmluYm91bmRBdWRpbzsKZW1lZGlhLmhlbHBlci5pbmJvdW5kVmlkZW8gPSBQQ1N0YXRzLmluYm91bmRWaWRlbzsKCmVtZWRpYS5oZWxwZXIub3V0Ym91bmRBdWRpbyA9IFBDU3RhdHMub3V0Ym91bmRBdWRpbzsKZW1lZGlhLmhlbHBlci5vdXRib3VuZFZpZGVvID0gUENTdGF0cy5vdXRib3VuZFZpZGVvOwoKZW1lZGlhLmV2ZW50ID0gX19ldmVudDsKCmVtZWRpYS5MT0dfTEVWRUwgPSAwOwoKZW1lZGlhLmlzRmlyZWZveCA9ICdmaXJlZm94JyA9PT0gZW1lZGlhLmJyb3dzZXI7CmVtZWRpYS5pc0Nocm9tZSA9ICdjaHJvbWUnID09PSBlbWVkaWEuYnJvd3NlcjsKZW1lZGlhLmlzU2FmYXJpID0gJ3NhZmFyaScgPT09IGVtZWRpYS5icm93c2VyOwplbWVkaWEuaXNFZGdlID0gJ2VkZ2UnID09PSBlbWVkaWEuYnJvd3NlcjsKCmVtZWRpYS5pc0VsZWN0cm9uID0gL0VsZWN0cm9uLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOwppZiAoZW1lZGlhLmlzRWxlY3Ryb24pIHsKICAgIHRyeSB7CiAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNDUpOwogICAgfSBjYXRjaCAoZSkgewogICAgICAgIHV0aWwubG9nZ2VyLmVycm9yKGUpOwogICAgfQp9CgplbWVkaWEuaXNXZWJSVEMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgL15odHRwc1w6JC8udGVzdCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wpOwoKLyoqCiAqIOWIpOaWreaYr+WQpuaUr+aMgXByYW5zd2VyCiAqLwppZiAoZW1lZGlhLmlzQ2hyb21lIHx8IGVtZWRpYS5pc1NhZmFyaSkgewogICAgZW1lZGlhLnN1cHBvcnRQUkFuc3dlciA9IHRydWU7Cn0KLyoqCiAqIDIwMTkuMDIuMjEKICog5Y+R546wY2hyb21lNzLniYjmnKwg5a+5cHJhbnN3ZXLmlK/mjIHmnInpl67popjvvIxodHRwczovL3dlYnJ0Yy5naXRodWIuaW8vc2FtcGxlcy9zcmMvY29udGVudC9wZWVyY29ubmVjdGlvbi9wci1hbnN3ZXIg5LqL5L6L5Lmf5LiN6IO95q2j5pi+56S66KeG6aKRCiAqIHZpZGVvLnNyY09iamVjdCBbcmVtb3RlIG1lZGlhIHN0cmVhbV0gYWN0aXZlOiBmYWxzZS4KICoKICog57uf5LiA6K6+572u5Li65LiN5pSv5oyBcHJhbnN3ZXIKICoKICovCmVtZWRpYS5zdXBwb3J0UFJBbnN3ZXIgPSBmYWxzZTsKCmVtZWRpYS5jb25maWcoewogICAgYmFzZUFjcHRPcHM6IFsxMDIsIDEwNCwgMTA1LCAxMDYsIDEwNywgMzAwLCAzMDIsIDMwMywgMzA0LCAzMDEsIDIwNCwgMjA2LCA0MDAsIDQwMSwgMTAwMSwgMTAwMjAxLCAxMDAyMDIsIDEwMDIwM10KICAgIC8vIGJhc2VBY3B0T3BzOiBbMTA3LCAzMDAsIDMwMiwgMzAzLCAzMDQsIDMwMSwgMjA0LCAyMDYsIDQwMCwgNDAxLCAxMDAxXQp9KTsKZW1lZGlhLmNvbmZpZyh7CiAgICBjbGllbnRUeXBlOiAnV0VCJywKICAgIHZlcnNpb246ICcyLjEuMScsCgogICAgdXNlckFnZW50OiBuYXZpZ2F0b3IudXNlckFnZW50LAoKICAgIGFjcHRPcHM6IFsxMDAyMzAsIC8v6L+c56iL5o6n5Yi2CiAgICAxMDAyMDUsIC8v6L+c56iL5oqT5Zu+CiAgICAxMDAzLCAvL+mAj+S8oOa2iOaBrwogICAgMTAwNF0KfSk7CgovLyAvKioKLy8gICogIEVudGVyIOWuouaIt+err+aQuuW4pu+8jOi/m+WFpQovLyAgKiAg5pyN5Yqh56uv5Y+v5pSv5oyB77yMSnNvbuWtl+espuS4su+8jOaIlkpzb27mlbDmja4KLy8gICovCi8vIHZhciByZXMgPSB7Ci8vICAgICB0eXBlOiAnaW9zfGFuZHJvaWR8d2ViJywKLy8gICAgIHZlcjogJzEuMC4yJywKLy8gICAgIGFnZW50OiAnJywgLy9pb3MgYW5kcm9pZOWPr+S7peS4jeS8oO+8jHdlYiBuYXZpZ2F0b3IudXNlckFnZW50Ci8vICAgICAvL+WPr+e8uuecge+8jOe8uuecgem7mOiupOaUr+aMgQovLyAgICAgLy8xMDcgMzAwIDMwMiAzMDMgMzA0IDMwMSAyMDQgMjA2IDQwMCA0MDEgMTAwMQovLyAgICAgb3BzOlsKLy8gICAgICAgICAxMDAzLCAvL+mAj+S8oOa2iOaBrwovLyAgICAgICAgIDEwMDIwMSwgLy/nvKnmlL4KLy8gICAgICAgICAxMDAyMDIsIC8v6IGa54SmCi8vICAgICAgICAgMTAwMjAzLCAvL+abneWFiQovLyAgICAgICAgIDEwMDIwNCwgLy/lrprmoLwKLy8gICAgICAgICAxMDAyMDUgLy/ov5znqIvmipPlm74KLy8gICAgIF0sCi8vCi8vICAgICB2Y29kZXM6WydIMjY0JywgJ1ZQOCddIC8v5a6i5oi356uv6L+b5YWl77yM5Y+v5Lul5pC65bim77yM5Lmf5Y+v5Lul5LiN5pC65bim44CC5pC65bim5LqG77yM5bCx5L2/55So6L+Z5Liq5bm/5pKt57uZ5YW25LuW5Lq644CCCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEHov5vlhaXvvIzmsqHmnInmkLrluKbmraTlj4LmlbDvvIzmnI3liqHnq6/pgJrov4cgdHlwZSB2ZXIgYWdlbnQg6KGl5YWo5q2k5a2X5q6177yM5bm/5pKt57uZQiBDCi8vIH0KCgptb2R1bGUuZXhwb3J0cyA9IGVtZWRpYTsKCi8qKiovIH0pLAovKiAxNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKLyoKICogISBNYXRoLnV1aWQuanMgKHYxLjQpIGh0dHA6Ly93d3cuYnJvb2ZhLmNvbSBtYWlsdG86cm9iZXJ0QGJyb29mYS5jb20KICoKICogQ29weXJpZ2h0IChjKSAyMDEwIFJvYmVydCBLaWVmZmVyIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMCiAqIGxpY2Vuc2VzLgogKi8KCi8qCiAqIEdlbmVyYXRlIGEgcmFuZG9tIHV1aWQuCiAqCiAqIFVTQUdFOiBNYXRoLnV1aWQobGVuZ3RoLCByYWRpeCkgbGVuZ3RoIC0gdGhlIGRlc2lyZWQgbnVtYmVyIG9mIGNoYXJhY3RlcnMKICogcmFkaXggLSB0aGUgbnVtYmVyIG9mIGFsbG93YWJsZSB2YWx1ZXMgZm9yIGVhY2ggY2hhcmFjdGVyLgogKgogKiBFWEFNUExFUzogLy8gTm8gYXJndW1lbnRzIC0gcmV0dXJucyBSRkM0MTIyLCB2ZXJzaW9uIDQgSUQgPj4+IE1hdGgudXVpZCgpCiAqICI5MjMyOUQzOS02RjVDLTQ1MjAtQUJGQy1BQUI2NDU0NEUxNzIiIC8vIE9uZSBhcmd1bWVudCAtIHJldHVybnMgSUQgb2YgdGhlCiAqIHNwZWNpZmllZCBsZW5ndGggPj4+IE1hdGgudXVpZCgxNSkgLy8gMTUgY2hhcmFjdGVyIElEIChkZWZhdWx0IGJhc2U9NjIpCiAqICJWY3lkeGdsdHhyVlpTVFYiIC8vIFR3byBhcmd1bWVudHMgLSByZXR1cm5zIElEIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLCBhbmQKICogcmFkaXguIChSYWRpeCBtdXN0IGJlIDw9IDYyKSA+Pj4gTWF0aC51dWlkKDgsIDIpIC8vIDggY2hhcmFjdGVyIElEIChiYXNlPTIpCiAqICIwMTAwMTAxMCIgPj4+IE1hdGgudXVpZCg4LCAxMCkgLy8gOCBjaGFyYWN0ZXIgSUQgKGJhc2U9MTApICI0NzQ3MzA0NiIgPj4+CiAqIE1hdGgudXVpZCg4LCAxNikgLy8gOCBjaGFyYWN0ZXIgSUQgKGJhc2U9MTYpICIwOThGNEQzNSIKICovCihmdW5jdGlvbiAoKSB7CiAgICAvLyBQcml2YXRlIGFycmF5IG9mIGNoYXJzIHRvIHVzZQogICAgdmFyIENIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Jy5zcGxpdCgnJyk7CgogICAgTWF0aC51dWlkID0gZnVuY3Rpb24gKGxlbiwgcmFkaXgpIHsKICAgICAgICB2YXIgY2hhcnMgPSBDSEFSUywKICAgICAgICAgICAgdXVpZCA9IFtdLAogICAgICAgICAgICBpOwogICAgICAgIHJhZGl4ID0gcmFkaXggfHwgY2hhcnMubGVuZ3RoOwoKICAgICAgICBpZiAobGVuKSB7CiAgICAgICAgICAgIC8vIENvbXBhY3QgZm9ybQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIHV1aWRbaV0gPSBjaGFyc1swIHwgTWF0aC5yYW5kb20oKSAqIHJhZGl4XTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHJmYzQxMjIsIHZlcnNpb24gNCBmb3JtCiAgICAgICAgICAgIHZhciByOwoKICAgICAgICAgICAgLy8gcmZjNDEyMiByZXF1aXJlcyB0aGVzZSBjaGFyYWN0ZXJzCiAgICAgICAgICAgIHV1aWRbOF0gPSB1dWlkWzEzXSA9IHV1aWRbMThdID0gdXVpZFsyM10gPSAnLSc7CiAgICAgICAgICAgIHV1aWRbMTRdID0gJzQnOwoKICAgICAgICAgICAgLy8gRmlsbCBpbiByYW5kb20gZGF0YS4gQXQgaT09MTkgc2V0IHRoZSBoaWdoIGJpdHMgb2YgY2xvY2sgc2VxdWVuY2UKICAgICAgICAgICAgLy8gYXMKICAgICAgICAgICAgLy8gcGVyIHJmYzQxMjIsIHNlYy4gNC4xLjUKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDM2OyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICghdXVpZFtpXSkgewogICAgICAgICAgICAgICAgICAgIHIgPSAwIHwgTWF0aC5yYW5kb20oKSAqIDE2OwogICAgICAgICAgICAgICAgICAgIHV1aWRbaV0gPSBjaGFyc1tpID09IDE5ID8gciAmIDB4MyB8IDB4OCA6IHJdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdXVpZC5qb2luKCcnKTsKICAgIH07CgogICAgLy8gQSBtb3JlIHBlcmZvcm1hbnQsIGJ1dCBzbGlnaHRseSBidWxraWVyLCBSRkM0MTIydjQgc29sdXRpb24uIFdlIGJvb3N0CiAgICAvLyBwZXJmb3JtYW5jZQogICAgLy8gYnkgbWluaW1pemluZyBjYWxscyB0byByYW5kb20oKQogICAgTWF0aC51dWlkRmFzdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgY2hhcnMgPSBDSEFSUywKICAgICAgICAgICAgdXVpZCA9IG5ldyBBcnJheSgzNiksCiAgICAgICAgICAgIHJuZCA9IDAsCiAgICAgICAgICAgIHI7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzNjsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpID09IDggfHwgaSA9PSAxMyB8fCBpID09IDE4IHx8IGkgPT0gMjMpIHsKICAgICAgICAgICAgICAgIHV1aWRbaV0gPSAnLSc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSAxNCkgewogICAgICAgICAgICAgICAgdXVpZFtpXSA9ICc0JzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChybmQgPD0gMHgwMikgcm5kID0gMHgyMDAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMCB8IDA7CiAgICAgICAgICAgICAgICByID0gcm5kICYgMHhmOwogICAgICAgICAgICAgICAgcm5kID0gcm5kID4+IDQ7CiAgICAgICAgICAgICAgICB1dWlkW2ldID0gY2hhcnNbaSA9PSAxOSA/IHIgJiAweDMgfCAweDggOiByXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdXVpZC5qb2luKCcnKTsKICAgIH07CgogICAgLy8gQSBtb3JlIGNvbXBhY3QsIGJ1dCBsZXNzIHBlcmZvcm1hbnQsIFJGQzQxMjJ2NCBzb2x1dGlvbjoKICAgIE1hdGgudXVpZENvbXBhY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLAogICAgICAgICAgICAgICAgdiA9IGMgPT0gJ3gnID8gciA6IHIgJiAweDMgfCAweDg7CiAgICAgICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTsKICAgICAgICB9KTsKICAgIH07Cn0pKCk7CgppZiAoIVN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCkgewogICAgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoID0gZnVuY3Rpb24gKHNlYXJjaFN0cmluZywgcG9zaXRpb24pIHsKICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uIHx8IDA7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhPZihzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKSA9PT0gcG9zaXRpb247CiAgICB9Owp9CgovKioKICogVXRpbAogKgogKiBAY29uc3RydWN0b3IKICovCmZ1bmN0aW9uIFV0aWwoKSB7fQoKLyoqCiAqIEZ1bmN0aW9uIExvZ2dlcgogKgogKiBAY29uc3RydWN0b3IKICovCnZhciBMb2dnZXIgPSBmdW5jdGlvbiBMb2dnZXIodGFnKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgdmFyIExvZ0xldmVsID0gewogICAgICAgIFRSQUNFOiAwLAogICAgICAgIERFQlVHOiAxLAogICAgICAgIElORk86IDIsCiAgICAgICAgV0FSTjogMywKICAgICAgICBFUlJPUjogNCwKICAgICAgICBGQVRBTDogNQogICAgfTsKCiAgICB2YXIgTG9nTGV2ZWxOYW1lID0gWydUUkFDRScsICdERUJVRycsICdJTkZPJywgJ1dBUk4nLCAnRVJST1InLCAnRkFUQUwnXTsKCiAgICB0aGlzLl9sb2cgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGxldmVsID0gYXJndW1lbnRzWzBdOwoKICAgICAgICBsZXZlbCA9IGFyZ3VtZW50c1swXSA9IExvZ0xldmVsTmFtZVtsZXZlbF07CgogICAgICAgIGVtZWRpYS5fbG9nQ29udGV4dCAmJiBzZGtsb2cuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgICAgICBpZiAoZW1lZGlhLmNvbmZpZy5jb25zb2xlTG9nZ2VyICE9PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChlbWVkaWEgJiYgZW1lZGlhLmlzRWxlY3Ryb24pIHsKICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoY29uc29sZSAmJiBsZXZlbCkgewogICAgICAgICAgICAoY29uc29sZVtsZXZlbC50b0xvd2VyQ2FzZSgpXSB8fCBjb25zb2xlLndhcm4pLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgfTsKCiAgICBmdW5jdGlvbiBjYWxsTG9nKGxldmVsLCBhcmdzKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgX2NhbGxMb2cobGV2ZWwsIGFyZ3MpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgaWYgKGNvbnNvbGUpIHsKICAgICAgICAgICAgICAgIGlmIChjb25zb2xlLmVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29uc29sZS5sb2cpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIF9zZGtsb2coKSB7CiAgICAgICAgaWYgKGVtZWRpYS5fbG9nQ29udGV4dEluZGV4IDwgMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICghZW1lZGlhLl9sb2dDb250ZXh0IHx8ICEoZW1lZGlhLl9sb2dDb250ZXh0IGluc3RhbmNlb2YgQXJyYXkpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBjb250ZXh0SW5kZXggPSBlbWVkaWEuX2xvZ0NvbnRleHRJbmRleCAlIGVtZWRpYS5fbG9nQ29udGV4dC5sZW5ndGg7CiAgICAgICAgdmFyIGxvZ0luZm9zID0gZW1lZGlhLl9sb2dDb250ZXh0W2NvbnRleHRJbmRleF07CiAgICAgICAgaWYgKCFsb2dJbmZvcyB8fCAhKGxvZ0luZm9zIGluc3RhbmNlb2YgQXJyYXkpKSB7CiAgICAgICAgICAgIGxvZ0luZm9zID0gZW1lZGlhLl9sb2dDb250ZXh0W2NvbnRleHRJbmRleF0gPSBbXTsKICAgICAgICB9CgogICAgICAgIHZhciBpbmZvID0gW107CiAgICAgICAgaW5mby5wdXNoKGVtZWRpYS5fbG9nQ29udGV4dEluZGV4KTsKCiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgaWYgKG5vdy50b0pTT04pIHsKICAgICAgICAgICAgaW5mby5wdXNoKG5vdy50b0pTT04oKSk7CiAgICAgICAgfSBlbHNlIGlmIChub3cudG9JU09TdHJpbmcpIHsKICAgICAgICAgICAgaW5mby5wdXNoKG5vdy50b0lTT1N0cmluZygpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpbmZvLnB1c2gobm93ICsgIiIpOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1tpXTsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgICAgaW5mby5wdXNoKGFyZyk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmcubWVzc2FnZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIGluZm8ucHVzaChhcmcubWVzc2FnZSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIGFyZy5tZXNzYWdlID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBpbmZvLnB1c2goYXJnLm1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIGFyZy5zdGFjayA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIGluZm8ucHVzaChhcmcuc3RhY2spOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGFyZy5ldmVudCAmJiB0eXBlb2YgYXJnLmV2ZW50LnRvU3RyaW5nID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBpbmZvLnB1c2goYXJnLmV2ZW50LnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGFyZy5ldmVudCAmJiB0eXBlb2YgYXJnLmV2ZW50LnRvU3RyaW5nID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBpbmZvLnB1c2goYXJnLmV2ZW50LnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnLmNhbmRpZGF0ZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIGluZm8ucHVzaChhcmcuY2FuZGlkYXRlKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnLnNkcCA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIGluZm8ucHVzaChhcmcuc2RwKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhcmcgJiYgaW5mby5wdXNoKEpTT04uc3RyaW5naWZ5KGFyZykpOwogICAgICAgIH0KCiAgICAgICAgbG9nSW5mb3MucHVzaChpbmZvLmpvaW4oJyAnKSk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHNka2xvZygpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBfc2RrbG9nLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICAgICAgfSBjYXRjaCAoZSkge30KICAgIH07CgogICAgZnVuY3Rpb24gX2NhbGxMb2cobGV2ZWwsIGFyZ3MpIHsKICAgICAgICBpZiAoZW1lZGlhICYmIGVtZWRpYS5MT0dfTEVWRUwgJiYgbGV2ZWwgPCBlbWVkaWEuTE9HX0xFVkVMKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBfYXJncyA9IFtdOwoKICAgICAgICBfYXJncy5wdXNoKGxldmVsKTsKICAgICAgICB0YWcgJiYgX2FyZ3MucHVzaCh0YWcpOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgX2FyZ3MucHVzaChhcmdzW2ldICYmIGFyZ3NbaV0uX3RvU3RyaW5nID8gYXJnc1tpXS5fdG9TdHJpbmcuY2FsbChhcmdzW2ldKSA6IGFyZ3NbaV0pOwogICAgICAgIH0KCiAgICAgICAgLy9fYXJncy5jYWxsZXIgJiYgX2FyZ3MucHVzaChfYXJncy5jYWxsZXIpOwoKICAgICAgICBzZWxmLl9sb2cuYXBwbHkoc2VsZiwgX2FyZ3MpOwogICAgfTsKCiAgICB0aGlzLmxvZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl9sb2cgJiYgY2FsbExvZyhMb2dMZXZlbC5JTkZPLCBhcmd1bWVudHMpOwogICAgfTsKCiAgICB0aGlzLnRyYWNlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuX2xvZyAmJiBjYWxsTG9nKExvZ0xldmVsLlRSQUNFLCBhcmd1bWVudHMpOwogICAgfTsKCiAgICB0aGlzLmRlYnVnID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuX2xvZyAmJiBjYWxsTG9nKExvZ0xldmVsLkRFQlVHLCBhcmd1bWVudHMpOwogICAgfTsKCiAgICB0aGlzLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fbG9nICYmIGNhbGxMb2coTG9nTGV2ZWwuSU5GTywgYXJndW1lbnRzKTsKICAgIH07CgogICAgdGhpcy53YXJuID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuX2xvZyAmJiBjYWxsTG9nKExvZ0xldmVsLldBUk4sIGFyZ3VtZW50cyk7CiAgICB9OwoKICAgIHRoaXMuZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fbG9nICYmIGNhbGxMb2coTG9nTGV2ZWwuRVJST1IsIGFyZ3VtZW50cyk7CiAgICB9OwoKICAgIHRoaXMuZmF0YWwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fbG9nICYmIGNhbGxMb2coTG9nTGV2ZWwuRkFUQUwsIGFyZ3VtZW50cyk7CiAgICB9Owp9OwoKTG9nZ2VyLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChlbWVkaWEuX2xvZ0NvbnRleHQpIHsKICAgICAgICBlbWVkaWEuX2xvZ0NvbnRleHRJbmRleCsrOwoKICAgICAgICB2YXIgY29udGV4dEluZGV4ID0gZW1lZGlhLl9sb2dDb250ZXh0SW5kZXggJSBlbWVkaWEuX2xvZ0NvbnRleHQubGVuZ3RoOwoKICAgICAgICBpZiAoY29udGV4dEluZGV4ID09PSAwICYmIGVtZWRpYS5fbG9nQ29udGV4dEluZGV4ICE9PSAwKSB7CiAgICAgICAgICAgIGVtZWRpYS5fbG9nQ29udGV4dC5sb2FkbG9ncyA9IGVtZWRpYS5fbG9nQ29udGV4dFtjb250ZXh0SW5kZXhdOwogICAgICAgIH0KICAgICAgICBlbWVkaWEuX2xvZ0NvbnRleHRbY29udGV4dEluZGV4XSA9IFtdOwogICAgfQp9OwoKVXRpbC5wcm90b3R5cGUubG9nZ2VyID0gbmV3IExvZ2dlcigpOwoKVXRpbC5wcm90b3R5cGUudGFnTG9nZ2VyID0gZnVuY3Rpb24gKHRhZykgewogICAgcmV0dXJuIG5ldyBMb2dnZXIodGFnKTsKfTsKCi8qKgogKiBwYXJzZSBqc29uCiAqCiAqIEBwYXJhbSBqc29uU3RyaW5nCiAqLwpVdGlsLnByb3RvdHlwZS5wYXJzZUpTT04gPSBmdW5jdGlvbiAoanNvblN0cmluZykgewogICAgcmV0dXJuIEpTT04ucGFyc2UoanNvblN0cmluZyk7Cn07CgovKioKICoganNvbiB0byBzdHJpbmcKICoKICogQHR5cGUge1V0aWwuc3RyaW5naWZ5SlNPTn0KICovCnZhciBzdHJpbmdpZnlKU09OID0gVXRpbC5wcm90b3R5cGUuc3RyaW5naWZ5SlNPTiA9IGZ1bmN0aW9uIChqc29uT2JqKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoanNvbk9iaik7Cn07Cgp2YXIgY2xhc3MydHlwZSA9IHt9OwoKdmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZzsKCnZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5OwoKdmFyIGZuVG9TdHJpbmcgPSBoYXNPd24udG9TdHJpbmc7Cgp2YXIgT2JqZWN0RnVuY3Rpb25TdHJpbmcgPSBmblRvU3RyaW5nLmNhbGwoT2JqZWN0KTsKCi8qKgogKiBjaGVjayBvYmplY3QgdHlwZQogKgogKiBAdHlwZSB7VXRpbC5pc1BsYWluT2JqZWN0fQogKi8KdmFyIGlzUGxhaW5PYmplY3QgPSBVdGlsLnByb3RvdHlwZS5pc1BsYWluT2JqZWN0ID0gZnVuY3Rpb24gKG9iaikgewogICAgdmFyIHByb3RvLCBDdG9yOwoKICAgIC8vIERldGVjdCBvYnZpb3VzIG5lZ2F0aXZlcwogICAgLy8gVXNlIHRvU3RyaW5nIGluc3RlYWQgb2YgalF1ZXJ5LnR5cGUgdG8gY2F0Y2ggaG9zdCBvYmplY3RzCiAgICB2YXIgb2JqZWN0U3RyaW5nOwogICAgaWYgKCFvYmogfHwgKG9iamVjdFN0cmluZyA9IHRvU3RyaW5nLmNhbGwob2JqKSkgIT09ICJbb2JqZWN0IE9iamVjdF0iIHx8IG9iai50b1N0cmluZygpID09PSAiPEpTQVBJLUF1dG8gSmF2YXNjcmlwdCBPYmplY3Q+IiB8fCBvYmoudG9TdHJpbmcoKSA9PT0gIltvYmplY3QgSUZCQ29tSmF2YXNjcmlwdE9iamVjdF0iKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7CgogICAgLy8gT2JqZWN0cyB3aXRoIG5vIHByb3RvdHlwZSAoZS5nLiwgYE9iamVjdC5jcmVhdGUoIG51bGwgKWApIGFyZSBwbGFpbgogICAgaWYgKCFwcm90bykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8vIE9iamVjdHMgd2l0aCBwcm90b3R5cGUgYXJlIHBsYWluIGlmZiB0aGV5IHdlcmUgY29uc3RydWN0ZWQgYnkgYQogICAgLy8gZ2xvYmFsIE9iamVjdCBmdW5jdGlvbgogICAgQ3RvciA9IGhhc093bi5jYWxsKHByb3RvLCAiY29uc3RydWN0b3IiKSAmJiBwcm90by5jb25zdHJ1Y3RvcjsKICAgIHJldHVybiB0eXBlb2YgQ3RvciA9PT0gImZ1bmN0aW9uIiAmJiBmblRvU3RyaW5nLmNhbGwoQ3RvcikgPT09IE9iamVjdEZ1bmN0aW9uU3RyaW5nOwp9OwoKVXRpbC5wcm90b3R5cGUuaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CgovKioKICogY2hlY2sgZW1wdHkgb2JqZWN0CiAqCiAqIEBwYXJhbSBvYmoKICogQHJldHVybnMge2Jvb2xlYW59CiAqLwpVdGlsLnByb3RvdHlwZS5pc0VtcHR5T2JqZWN0ID0gZnVuY3Rpb24gKG9iaikgewogICAgdmFyIG5hbWU7CiAgICBmb3IgKG5hbWUgaW4gb2JqKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7Cn07CgpVdGlsLnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24gKG9iaikgewogICAgaWYgKG9iaiA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIG9iaiArICIiOwogICAgfQogICAgcmV0dXJuICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvYmopKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIG9iaiA9PT0gImZ1bmN0aW9uIiA/IGNsYXNzMnR5cGVbdG9TdHJpbmcuY2FsbChvYmopXSB8fCAib2JqZWN0IiA6IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9iaik7Cn07CgovKioKICogRnVuY3Rpb24gZXh0ZW5kCiAqCiAqIEByZXR1cm5zIHsqfHt9fQogKi8KVXRpbC5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIG9wdGlvbnMsCiAgICAgICAgbmFtZSwKICAgICAgICBzcmMsCiAgICAgICAgY29weSwKICAgICAgICBjb3B5SXNBcnJheSwKICAgICAgICBjbG9uZSwKICAgICAgICB0YXJnZXQgPSBhcmd1bWVudHNbMF0gfHwge30sCiAgICAgICAgaSA9IDEsCiAgICAgICAgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCwKICAgICAgICBkZWVwID0gZmFsc2U7CgogICAgLy8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvbgogICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICJib29sZWFuIikgewogICAgICAgIGRlZXAgPSB0YXJnZXQ7CgogICAgICAgIC8vIFNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXQKICAgICAgICB0YXJnZXQgPSBhcmd1bWVudHNbaV0gfHwge307CiAgICAgICAgaSsrOwogICAgfQoKICAgIC8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcAogICAgLy8gY29weSkKICAgIGlmICgodHlwZW9mIHRhcmdldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodGFyZ2V0KSkgIT09ICJvYmplY3QiICYmICFzZWxmLmlzRnVuY3Rpb24odGFyZ2V0KSkgewogICAgICAgIHRhcmdldCA9IHt9OwogICAgfQoKICAgIC8vIEV4dGVuZCBzZWxmIGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWQKICAgIGlmIChpID09PSBsZW5ndGgpIHsKICAgICAgICB0YXJnZXQgPSB0aGlzOwogICAgICAgIGktLTsKICAgIH0KCiAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7CgogICAgICAgIC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXMKICAgICAgICBpZiAoKG9wdGlvbnMgPSBhcmd1bWVudHNbaV0pICE9IG51bGwpIHsKCiAgICAgICAgICAgIC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3QKICAgICAgICAgICAgZm9yIChuYW1lIGluIG9wdGlvbnMpIHsKICAgICAgICAgICAgICAgIHNyYyA9IHRhcmdldFtuYW1lXTsKICAgICAgICAgICAgICAgIGNvcHkgPSBvcHRpb25zW25hbWVdOwoKICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3AKICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IGNvcHkpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXMKICAgICAgICAgICAgICAgIGlmIChkZWVwICYmIGNvcHkgJiYgKHNlbGYuaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSBzZWxmLmlzQXJyYXkoY29weSkpKSkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoY29weUlzQXJyYXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29weUlzQXJyYXkgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBzcmMgJiYgc2VsZi5pc0FycmF5KHNyYykgPyBzcmMgOiBbXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiBzZWxmLmlzUGxhaW5PYmplY3Qoc3JjKSA/IHNyYyA6IHt9OwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gc2VsZi5leHRlbmQoZGVlcCwgY2xvbmUsIGNvcHkpOwoKICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvcHkgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHRhcmdldFtuYW1lXSA9IGNvcHk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3QKICAgIHJldHVybiB0YXJnZXQ7Cn07CgpVdGlsLnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoZWxlbSwga2V5KSB7CiAgICBpZiAoZWxlbSA9PT0gbnVsbCB8fCBlbGVtID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIG9iaiA9IGVsZW1ba2V5XTsKCiAgICAvLyBpZihlbWVkaWEuaXNTYWZhcmkgJiYgb2JqICYmIG9iai5fX3VuZGVmaW5lZEVRRGVsZXRlKXsgLy8gc2FmYXJpIGRlbGV0ZSBzdHJlYW3ml7bvvIzlnLDlnYDmoI/kvJrmnInkuKrlsI/lloflj607IOimgeW7tui/n+WIoOmZpAogICAgLy8gICAgIGVtZWRpYS5fc3RyZWFtX2dhcmJhZ2VzIHx8IChlbWVkaWEuX3N0cmVhbV9nYXJiYWdlcyA9IFtdKQogICAgLy8gICAgIGVtZWRpYS5fc3RyZWFtX2dhcmJhZ2VzLnB1c2gob2JqKTsKICAgIC8vIH0KICAgIGRlbGV0ZSBlbGVtW2tleV07CgogICAgcmV0dXJuIG9iajsKfTsKClV0aWwucHJvdG90eXBlLnByb3RvdHlwZUV4dGVuZF8wMDAgPSBVdGlsLnByb3RvdHlwZS5jbGFzc0V4dGVuZCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICBmdW5jdGlvbiBfT2JqX18oKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGNmZyA9IGFyZ3VtZW50c1tpXSB8fCB7fTsKICAgICAgICAgICAgc2VsZi5leHRlbmQodHJ1ZSwgdGhpcywgY2ZnKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuX19pbml0X18gJiYgdGhpcy5fX2luaXRfXy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHZhciBsYXN0Q29uc3RydWN0b3I7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgY2ZnID0gYXJndW1lbnRzW2ldIHx8IHt9OwoKICAgICAgICBpZiAodHlwZW9mIGNmZyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICBpZiAobGFzdENvbnN0cnVjdG9yKSB7CiAgICAgICAgICAgICAgICBjZmcuY29uc3RydWN0b3IgPSBsYXN0Q29uc3RydWN0b3I7CiAgICAgICAgICAgICAgICBjZmcuX19wcm90b19fID0gbGFzdENvbnN0cnVjdG9yLnByb3RvdHlwZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxhc3RDb25zdHJ1Y3RvciA9IGNmZzsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYuZXh0ZW5kKHRydWUsIF9PYmpfXy5wcm90b3R5cGUsIGNmZyk7CiAgICAgICAgfQogICAgfQoKICAgIGxhc3RDb25zdHJ1Y3RvciAmJiAoX09ial9fLnByb3RvdHlwZS5fX3Byb3RvX18gPSBsYXN0Q29uc3RydWN0b3IucHJvdG90eXBlKTsKICAgIGxhc3RDb25zdHJ1Y3RvciAmJiAoX09ial9fLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGxhc3RDb25zdHJ1Y3Rvcik7CgogICAgX09ial9fLmV4dGVuZCB8fCAoX09ial9fLmV4dGVuZCA9IGZ1bmN0aW9uIChfcHJvdG90eXBlRXh0ZW5kKSB7CiAgICAgICAgcmV0dXJuIHNlbGYucHJvdG90eXBlRXh0ZW5kKF9PYmpfXywgX3Byb3RvdHlwZUV4dGVuZCk7CiAgICB9KTsKCiAgICByZXR1cm4gX09ial9fOwp9OwoKVXRpbC5wcm90b3R5cGUucHJvdG90eXBlRXh0ZW5kID0gVXRpbC5wcm90b3R5cGUuY2xhc3NFeHRlbmQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgZnVuY3Rpb24gX09ial9fKCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBjZmcgPSBhcmd1bWVudHNbaV0gfHwge307CiAgICAgICAgICAgIHNlbGYuZXh0ZW5kKHRydWUsIHRoaXMsIGNmZyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9faW5pdF9fICYmIHRoaXMuX19pbml0X18uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBjZmcgPSBhcmd1bWVudHNbaV0gfHwge307CiAgICAgICAgaWYgKHR5cGVvZiBjZmcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgY2ZnID0gY2ZnLnByb3RvdHlwZTsKICAgICAgICB9CgogICAgICAgIHNlbGYuZXh0ZW5kKHRydWUsIF9PYmpfXy5wcm90b3R5cGUsIGNmZyk7CiAgICB9CgogICAgX09ial9fLmV4dGVuZCB8fCAoX09ial9fLmV4dGVuZCA9IGZ1bmN0aW9uIChfcHJvdG90eXBlRXh0ZW5kKSB7CiAgICAgICAgcmV0dXJuIHNlbGYucHJvdG90eXBlRXh0ZW5kKF9PYmpfXywgX3Byb3RvdHlwZUV4dGVuZCk7CiAgICB9KTsKCiAgICByZXR1cm4gX09ial9fOwp9OwoKLyoqCiAqIGdldCBsb2NhbCBjYWNoZQogKgogKiBAbWVtYmVyT2YgdG9vbAogKiBAbmFtZSBoYXNMb2NhbERhdGEKICogQHBhcmFtIGtleXtzdHJpbmd9CiAqICAgICAgICAgICAgbG9jYWxTdG9yYWdl55qEa2V55YC8CiAqIEByZXR1cm4gYm9vbGVhbgogKi8KVXRpbC5wcm90b3R5cGUuaGFzTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24gKGtleSkgewogICAgLy8gbnVsbCAtPiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbeaXtgogICAgLy8gJ3t9JyAtPiBjb2xsZWN0aW9uLm1vZGVscy5kZXN0cm955pe2CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSA9PSBudWxsIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgPT0gJ3t9JykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwp9OwoKVXRpbC5wcm90b3R5cGUudG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbiAobm9kZSwgY2xhc3NOYW1lKSB7CiAgICBpZiAobm9kZS5oYXNDbGFzcyhjbGFzc05hbWUpKSB7CiAgICAgICAgbm9kZS5yZW1vdmVDbGFzcyhjbGFzc05hbWUpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIG5vZGUuYWRkQ2xhc3MoY2xhc3NOYW1lKTsKfTsKCi8qKgogKiBzZXQgY29va2llCiAqCiAqIEBwYXJhbSBuYW1le1N0cmluZ30KICoKICogQHBhcmFtIHZhbHVle1N0cmluZ30KICoKICogQHBhcmFtIGhvdXJ7TnVtYmVyfQogKgogKiBAcmV0dXJuIHZvaWQKICovClV0aWwucHJvdG90eXBlLnNldENvb2tpZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgaG91cikgewogICAgdmFyIGV4cCA9IG5ldyBEYXRlKCk7CiAgICBleHAuc2V0VGltZShleHAuZ2V0VGltZSgpICsgaG91ciAqIDYwICogNjAgKiAxMDAwKTsKICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAiPSIgKyBlc2NhcGUodmFsdWUpICsgIjtleHBpcmVzPSIgKyBleHAudG9HTVRTdHJpbmcoKTsKfTsKCi8qKgogKiByZWFkIGNvb2tpZQogKgogKiBAcGFyYW0gbmFtZShTdHJpbmcpCiAqICAgICAgICAgICAgY29va2llIGtleQogKiBAcmV0dXJuIGNvb2tpZSB2YWx1ZQogKiBAbWVtYmVyT2YgVG9vbAogKi8KVXRpbC5wcm90b3R5cGUuZ2V0Q29va2llID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIHZhciBhcnIgPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZSArICI9KFteO10qKSg7fCQpIikpOwogICAgaWYgKGFyciAhPSBudWxsKSB7CiAgICAgICAgcmV0dXJuIHVuZXNjYXBlKGFyclsyXSk7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKfTsKCi8qKgogKiBxdWVyeSBwYXJhbWV0ZXIgZnJvbSB1cmwKICoKICogQG5hbWUgcGFyc2VVUkwKICogQG1lbWJlcm9mIEMuVG9vbHMKICogQHBhcmFtIHtzdHJpbmd9CiAqCiAqIEByZXR1cm4ge3N0cmluZ30KICogQHR5cGUgZnVuY3Rpb24KICogQHB1YmxpYwogKi8KVXRpbC5wcm90b3R5cGUucGFyc2VVUkwgPSBmdW5jdGlvbiAobmFtZSkgewogICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoIihefCYpIiArIG5hbWUgKyAiPShbXiZdKikoJnwkKSIsICJpIik7CiAgICB2YXIgciA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHJlZyk7CiAgICBpZiAociAhPSBudWxsKSB7CiAgICAgICAgcmV0dXJuIHVuZXNjYXBlKHJbMl0pOwogICAgfQogICAgcmV0dXJuIG51bGw7Cn07CgovKioKICogZnVuY3Rpb24oaW5kZXgsIHZhbHVlKXsKCn0KICogQHBhcmFtIG9iagogKi8KVXRpbC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmosIGZ1bmMpIHsKICAgIGlmICghb2JqKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh0aGlzLmlzQXJyYXkob2JqKSAmJiBvYmoubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCAmJiBvYmoubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKG9iai5sZW5ndGgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBmdW5jKGksIG9ialtpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIW9iaiB8fCB0aGlzLmlzRW1wdHlPYmplY3Qob2JqKSkgewogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBvYmogPSBvYmogfHwge307CgogICAgdmFyIGNvcHkgPSB0aGlzLmV4dGVuZChmYWxzZSwge30sIG9iaik7CgogICAgZm9yICh2YXIgaW5kZXggaW4gY29weSkgewogICAgICAgIGZ1bmMoaW5kZXgsIG9ialtpbmRleF0pOwogICAgfQp9OwoKVXRpbC5wcm90b3R5cGUuaXNJbnQgPSBmdW5jdGlvbiAobikgewogICAgcmV0dXJuIE51bWJlcihuKSA9PT0gbiAmJiBuICUgMSA9PT0gMDsKfTsKClV0aWwucHJvdG90eXBlLmlzRmxvYXQgPSBmdW5jdGlvbiAobikgewogICAgcmV0dXJuIE51bWJlcihuKSA9PT0gbiAmJiBuICUgMSAhPT0gMDsKfTsKClV0aWwucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBbYXJndW1lbnRzWzBdXSA6IEFycmF5LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICByZXR1cm4gYXJnczsKfTsKClV0aWwucHJvdG90eXBlLmFkZEV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUsIGZ1bmMpIHsKICAgIGlmIChlbGVtZW50LmF0dGFjaEV2ZW50KSByZXR1cm4gZWxlbWVudC5hdHRhY2hFdmVudCgib24iICsgbmFtZSwgZnVuYyk7CiAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSByZXR1cm4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmMsIGZhbHNlKTsKICAgIHRocm93ICJIYW5kbGVyIGNvdWxkIG5vdCBiZSBhdHRhY2hlZCI7Cn07CgpVdGlsLnByb3RvdHlwZS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBuYW1lLCBmdW5jKSB7CiAgICBpZiAoZWxlbWVudC5kZXRhY2hFdmVudCkgcmV0dXJuIGVsZW1lbnQuZGV0YWNoRXZlbnQoIm9uIiArIG5hbWUsIGZ1bmMpOwogICAgaWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jLCBmYWxzZSk7CiAgICB0aHJvdyAiSGFuZGxlciBjb3VsZCBub3QgYmUgcmVtb3ZlZCI7Cn07CgpVdGlsLnByb3RvdHlwZS5zdG9wRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbiA/IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIDogZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0ID8gZXZlbnQucHJldmVudERlZmF1bHQoKSA6IGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7Cn07CgpVdGlsLnByb3RvdHlwZS5nZXREb21QYWdlUmVjdCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICB2YXIgZG9tUmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICByZXR1cm4gewogICAgICAgIHg6IGRvbVJlY3QubGVmdCArICh3aW5kb3cucGFnZVhPZmZzZXQgfHwgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KSwKICAgICAgICB5OiBkb21SZWN0LnRvcCArICh3aW5kb3cucGFnZVlPZmZzZXQgfHwgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApLAogICAgICAgIHdpZHRoOiBkb21SZWN0LndpZHRoIHx8IGVsZW1lbnQub2Zmc2V0V2lkdGgsCiAgICAgICAgaGVpZ2h0OiBkb21SZWN0LmhlaWdodCB8fCBlbGVtZW50Lm9mZnNldEhlaWdodAogICAgfTsKfTsKClV0aWwucHJvdG90eXBlLmdldEV2ZW50RWxlbWVudFhZID0gZnVuY3Rpb24gKGV2ZW50LCBlbGVtZW50LCBzY2FsZSkgewogICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7CgogICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMgPyBldmVudC5jaGFuZ2VkVG91Y2hlc1swXSA6IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdIDogZXZlbnQ7CgogICAgdmFyIHBhZ2VYLCBwYWdlWTsKICAgIGlmICh0b3VjaC5wYWdlWCAhPSB1bmRlZmluZWQgJiYgdG91Y2gucGFnZVkgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcGFnZVggPSB0b3VjaC5wYWdlWDsKICAgICAgICBwYWdlWSA9IHRvdWNoLnBhZ2VZOwogICAgfSBlbHNlIGlmICh0b3VjaC5jbGllbnRYICE9IHVuZGVmaW5lZCAmJiB0b3VjaC5jbGllbnRZICE9IHVuZGVmaW5lZCkgewogICAgICAgIHBhZ2VYID0gdG91Y2guY2xpZW50WCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OwogICAgICAgIHBhZ2VZID0gdG91Y2guY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsKICAgIH0KCiAgICB2YXIgZWxlbWVudFBhZ2VYWSA9IHRoaXMuZ2V0RG9tUGFnZVJlY3QoZWxlbWVudCk7CgogICAgdmFyIHJlbGF0aXZlWCA9IHBhZ2VYIC0gZWxlbWVudFBhZ2VYWS54OwogICAgdmFyIHJlbGF0aXZlWSA9IHBhZ2VZIC0gZWxlbWVudFBhZ2VYWS55OwoKICAgIChzY2FsZSA9PT0gMCB8fCBzY2FsZSA9PSB1bmRlZmluZWQpICYmIChzY2FsZSA9IDEpOwogICAgcmV0dXJuIHsKICAgICAgICB4OiBNYXRoLnJvdW5kKE1hdGgubWF4KE1hdGgubWluKHJlbGF0aXZlWCwgZWxlbWVudFBhZ2VYWS53aWR0aCAtIDEpLCAwKSAvIHNjYWxlKSwKICAgICAgICB5OiBNYXRoLnJvdW5kKE1hdGgubWF4KE1hdGgubWluKHJlbGF0aXZlWSwgZWxlbWVudFBhZ2VYWS5oZWlnaHQgLSAxKSwgMCkgLyBzY2FsZSksCiAgICAgICAgd2lkdGg6IE1hdGgucm91bmQoZWxlbWVudFBhZ2VYWS53aWR0aCAvIHNjYWxlKSwKICAgICAgICBoZWlnaHQ6IE1hdGgucm91bmQoZWxlbWVudFBhZ2VYWS5oZWlnaHQgLyBzY2FsZSksCgogICAgICAgIHJlYWxYOiByZWxhdGl2ZVgsCiAgICAgICAgcmVhbFk6IHJlbGF0aXZlWQogICAgfTsKfTsKClV0aWwucHJvdG90eXBlLmxheW91dEVuZ2luZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBlbmdpbmUgPSB7CiAgICAgICAgcHJlc3RvOiAhIXdpbmRvdy5vcGVyYSwKICAgICAgICB0cmlkZW50OiAhIXdpbmRvdy5BY3RpdmVYT2JqZWN0ICYmICh3aW5kb3cuWE1MSHR0cFJlcXVlc3QgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsID8gNiA6IDUgOiA0KSwKICAgICAgICB3ZWJraXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiAhbmF2aWdhdG9yLnRhaW50RW5hYmxlZCAmJiAoaS5GZWF0dXJlcy54cGF0aCA/IGkuRmVhdHVyZXMucXVlcnkgPyA1MjUgOiA0MjAgOiA0MTkpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgIH0KICAgICAgICB9KCksCiAgICAgICAgZ2Vja286ICEoIWRvY3VtZW50LmdldEJveE9iamVjdEZvciAmJiBudWxsID09IHdpbmRvdy5tb3pJbm5lclNjcmVlblgpICYmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID8gMTkgOiAxOCkKICAgIH07CgogICAgZW5naW5lLndlYmtpdCAmJiAoZW5naW5lLndlYmtpdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIG4gPSAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2ViS2l0XC8oWzAtOVwuXSopIC8pIHx8IFsiIiwgZV0pWzFdOwogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KG4sIDEwKTsKICAgIH0oZW5naW5lKSk7CgogICAgcmV0dXJuIGVuZ2luZTsKfSgpOwoKVXRpbC5wcm90b3R5cGUudGFyZ2V0RE9NID0gKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoSFRNTEVsZW1lbnQpKSA9PT0gJ29iamVjdCcgPyBmdW5jdGlvbiAob2JqKSB7CiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7Cn0gOiBmdW5jdGlvbiAob2JqKSB7CiAgICByZXR1cm4gb2JqICYmICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvYmopKSA9PT0gJ29iamVjdCcgJiYgb2JqLm5vZGVUeXBlID09PSAxICYmIHR5cGVvZiBvYmoubm9kZU5hbWUgPT09ICdzdHJpbmcnOwp9OwoKVXRpbC5wcm90b3R5cGUuY2xvbmVDU1MgPSBmdW5jdGlvbiAoc3JjRWxlbWVudCwgZGVzdEVsZW1lbnQpIHsKICAgIC8qKgogICAgICogSUU45LiN5pSv5oyBd2luZG93LmdldENvbXB1dGVkU3R5bGUKICAgICAqIElFOX4xMeS4re+8jHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCkuY3NzVGV4dOi/lOWbnueahOaAu+S4uuepuuWtl+espuS4sgogICAgICog6buY6K6k55qEd2luZG93LmdldENvbXB1dGVkU3R5bGUgfHwgZG9tLmN1cnJlbnRTdHlsZSwg6L+U5Zue55qEY3Nz6ZSu5YC85a+55Lit77yM6ZSu5piv6am85bOw5ZG95ZCN55qE44CCCiAgICAgKi8KICAgIHZhciBvU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShzcmNFbGVtZW50LCBudWxsKSB8fCBzcmNFbGVtZW50LmN1cnJlbnRTdHlsZTsKICAgIGZvciAodmFyIGtleSBpbiBvU3R5bGUpIHsKICAgICAgICB2YXIgdiA9IG9TdHlsZVtrZXldOwogICAgICAgIGlmICgvXlthLXpdL2kudGVzdChrZXkpICYmIFtudWxsLCAnJywgdW5kZWZpbmVkXS5pbmRleE9mKHYpIDwgMCkgewogICAgICAgICAgICBkZXN0RWxlbWVudC5zdHlsZVtrZXldID0gdjsKICAgICAgICB9CiAgICB9Cn07CgpVdGlsLnByb3RvdHlwZS5jYW5ZaWVsZCA9IGZ1bmN0aW9uICgpIHsKICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGV2YWwoIiEhRnVuY3Rpb24oJ3lpZWxkIHRydWU7JykoKS5uZXh0KCkiKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0oKTsKCm1vZHVsZS5leHBvcnRzID0gbmV3IFV0aWwoKTsKCi8qKiovIH0pLAovKiAxNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKLy9TZXJ2aWNlIOexu++8jOS8muWIm+W7unNlc3Npb24obWUpLCDlubbkuJTlsIZjdXJyZW505bGe5oCn6K6+572u5Li6IG1lOyDku6XlkI7mlrnms5XpnIDopoHmraTlgLwKCgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCnZhciBfbG9nZ2VyID0gX3V0aWwudGFnTG9nZ2VyKCJTZXJ2aWNlIik7Cgp2YXIgU2Vzc2lvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOwoKdmFyIEF0dGVuZGVlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7Cgp2YXIgX19ldmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpOwp2YXIgRXZlbnRIYW5kbGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7Cgp2YXIgX19EZXNrdG9wID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7Cgp2YXIgX19kZXNrdG9wID0gbmV3IF9fRGVza3RvcCh7CiAgICBvbkV4dExvYWRlZDogZnVuY3Rpb24gb25FeHRMb2FkZWQoKSB7CiAgICAgICAgX2xvZ2dlci5pbmZvKCJTaGFyZSBkZXNrdG9wIGV4dC4gaGFkIGxvYWRlZC4iKTsKICAgIH0KfSk7Cgp2YXIgX19TdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTsKCnZhciBEZWZhdWx0TW91c2VUcmFjayA9IF9fd2VicGFja19yZXF1aXJlX18oMzApOwoKLyoqCiAqIHsKICogIG5ld1Nlc3Npb246CiAqICBvbkNhbGxpbmc6CiAqICBvblJpbmdpbmc6CiAqCiAqCiAqIH0KICoKICoKICoKICovCm1vZHVsZS5leHBvcnRzID0gX3V0aWwucHJvdG90eXBlRXh0ZW5kKHsKICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIF9sb2dnZXIud2FybigiZW1lZGlhIHZlcnNpb246ICIsIHdpbmRvdy5fZW1lZGlhVmVyc2lvbiB8fCAidW5rb3duIik7CiAgICAgICAgX2xvZ2dlci53YXJuKCJVc2VyQWdlbnQ6ICIsIG5hdmlnYXRvci51c2VyQWdlbnQpOwoKICAgICAgICB2YXIgdXJsTG9nTGV2ZWwgPSBfdXRpbC5wYXJzZVVSTCgiX19sb2dfbGV2ZWxfX18iKTsKICAgICAgICBpZiAodXJsTG9nTGV2ZWwpIHsKICAgICAgICAgICAgZW1lZGlhLkxPR19MRVZFTCA9IHBhcnNlSW50KHVybExvZ0xldmVsKTsKICAgICAgICB9CgogICAgICAgIC8vIGlmKHNlbGYudGlja2V0ICYmIF91dGlsLmlzUGxhaW5PYmplY3Qoc2VsZi50aWNrZXQpKXsKICAgICAgICAvLyAgICAgc2VsZi5zZXR1cChzZWxmLnRpY2tldCk7CiAgICAgICAgLy8gfQoKICAgICAgICBzZWxmLm5hbWVzcGFjZSA9IE1hdGgudXVpZEZhc3QoKTsKICAgICAgICBlbWVkaWEuX19lYXNlbW9iX2N1cnJlbnRfbXNlcnZpY2UgPSBzZWxmOwoKICAgICAgICBpZiAoc2VsZi51c2VSVENDZmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBzZWxmLnVzZVJUQ0NmZyA9IGVtZWRpYS5jb25maWcudXNlUlRDQ2ZnSWZTZXJ2ZXJSZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAodHlwZW9mIHNlbGYudXNlUlRDQ2ZnID09PSAic3RyaW5nIikgewogICAgICAgICAgICBzZWxmLnVzZVJUQ0NmZyA9IEpTT04ucGFyc2Uoc2VsZi51c2VSVENDZmcpOwogICAgICAgIH0KICAgIH0sCgogICAgQVZQdWJzdHJlYW06IF9fU3RyZWFtLmV4dGVuZCh7CiAgICAgICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICBzZWxmLnR5cGUgPSAwOwogICAgICAgICAgICBzZWxmLl9sb2NhdGVkID0gdHJ1ZTsKCiAgICAgICAgICAgIHNlbGYubXV0ZWRNdXRlZCA9IHRydWU7CgogICAgICAgICAgICBpZiAoc2VsZi5jb25zdGFpbnRzKSB7CiAgICAgICAgICAgICAgICBzZWxmLmNvbnN0YWludHMudmlkZW8gfHwgKHNlbGYudm9mZiA9IDEpOwogICAgICAgICAgICAgICAgc2VsZi5jb25zdGFpbnRzLmF1ZGlvIHx8IChzZWxmLmFvZmYgPSAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL3NlbGYuY29uc3RhaW50cyB8fCAoc2VsZi5jb25zdGFpbnRzID0ge2F1ZGlvOiAhc2VsZi5hb2ZmLCB2aWRlbzogIXNlbGYudm9mZn0pOwogICAgICAgICAgICBzZWxmLmNvbnN0YWludHMgfHwgKHNlbGYuY29uc3RhaW50cyA9IHsgYXVkaW86IHRydWUsIHZpZGVvOiB0cnVlIH0pOwoKICAgICAgICAgICAgZW1lZGlhLmNvbmZpZy5tYXhWaWRlb0JpdHJhdGUgJiYgKHNlbGYudmJpdHJhdGUgPSBlbWVkaWEuY29uZmlnLm1heFZpZGVvQml0cmF0ZSk7CiAgICAgICAgICAgIGVtZWRpYS5jb25maWcubWF4QXVkaW9CaXRyYXRlICYmIChzZWxmLmFiaXRyYXRlID0gZW1lZGlhLmNvbmZpZy5tYXhBdWRpb0JpdHJhdGUpOwogICAgICAgIH0KICAgIH0pLAoKICAgIEF1ZGlvTWl4ZXJQdWJzdHJlYW06IG5ldyBfX1N0cmVhbS5leHRlbmQoewogICAgICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgc2VsZi50eXBlID0gMjsKICAgICAgICAgICAgc2VsZi5fbG9jYXRlZCA9IHRydWU7CgogICAgICAgICAgICBzZWxmLm11dGVkTXV0ZWQgPSB0cnVlOwoKICAgICAgICAgICAgc2VsZi5jb25zdGFpbnRzIHx8IChzZWxmLmNvbnN0YWludHMgPSB7IGF1ZGlvOiB0cnVlLCB2aWRlbzogZmFsc2UgfSk7CiAgICAgICAgICAgIGlmIChzZWxmLmNvbnN0YWludHMpIHsKICAgICAgICAgICAgICAgIHZhciBhdWRpbyA9ICEhc2VsZi5jb25zdGFpbnRzLmF1ZGlvOwogICAgICAgICAgICAgICAgLy9zZWxmLmNvbnN0YWludHMuYXVkaW8gPSB0cnVlOwogICAgICAgICAgICAgICAgc2VsZi5jb25zdGFpbnRzLnZpZGVvIHx8IChzZWxmLmNvbnN0YWludHMudmlkZW8gPSBmYWxzZSk7CgogICAgICAgICAgICAgICAgc2VsZi5jb25zdGFpbnRzLnZpZGVvIHx8IChzZWxmLnZvZmYgPSAxKTsKICAgICAgICAgICAgICAgIHNlbGYuY29uc3RhaW50cy5hdWRpbyB8fCAoc2VsZi5hb2ZmID0gMSk7CgogICAgICAgICAgICAgICAgYXVkaW8gPT09IGZhbHNlICYmIChzZWxmLmFvZmYgPSAxKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZW1lZGlhLmNvbmZpZy5tYXhWaWRlb0JpdHJhdGUgJiYgKHNlbGYudmJpdHJhdGUgPSBlbWVkaWEuY29uZmlnLm1heFZpZGVvQml0cmF0ZSk7CiAgICAgICAgICAgIGVtZWRpYS5jb25maWcubWF4QXVkaW9CaXRyYXRlICYmIChzZWxmLmFiaXRyYXRlID0gZW1lZGlhLmNvbmZpZy5tYXhBdWRpb0JpdHJhdGUpOwogICAgICAgIH0sCgogICAgICAgIG9uR290UmVtb3RlTWVkaWFTdHJlYW06IGZ1bmN0aW9uIG9uR290UmVtb3RlTWVkaWFTdHJlYW0ocmVtb3RlTWVkaWFTdHJlYW0pIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKCFzZWxmLnJlbW90ZVBsYXlBdWRpb09iamVjdCkgewogICAgICAgICAgICAgICAgdmFyIF9hdWRpb0lkID0gIl9fb19yZW1vdGVfcGxheV9hdWRpb18iICsgc2VsZi5pZDsKICAgICAgICAgICAgICAgIHZhciBhdWRpb09iamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiMiICsgX2F1ZGlvSWQpOwogICAgICAgICAgICAgICAgaWYgKGF1ZGlvT2JqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgLy9hdWRpb09iamVjdC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYXVkaW9PYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpOwoKICAgICAgICAgICAgICAgICAgICBhdWRpb09iamVjdC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgIGF1ZGlvT2JqZWN0LmlkID0gIl9fb19yZW1vdGVfcGxheV9hdWRpb18iICsgc2VsZi5pZDsKICAgICAgICAgICAgICAgICAgICBhdWRpb09iamVjdC5hdXRvcGxheSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYXVkaW9PYmplY3QucGxheXNpbmxpbmUgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGF1ZGlvT2JqZWN0KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL21vbml0b3JFdmVudHMgJiYgbW9uaXRvckV2ZW50cyhhdWRpb09iamVjdCk7CgogICAgICAgICAgICAgICAgc2VsZi5yZW1vdGVQbGF5QXVkaW9PYmplY3QgPSBhdWRpb09iamVjdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gc2VsZi5yZW1vdGVQbGF5QXVkaW9PYmplY3QuYXV0b3BsYXkgPSB0cnVlOwogICAgICAgICAgICAvLyBzZWxmLnJlbW90ZVBsYXlBdWRpb09iamVjdC5wbGF5c2lubGluZSA9IHRydWU7CiAgICAgICAgICAgIHNlbGYucmVtb3RlUGxheUF1ZGlvT2JqZWN0LnNyY09iamVjdCA9IHJlbW90ZU1lZGlhU3RyZWFtOwoKICAgICAgICAgICAgLy93aW5kb3cuX18kX3JlbW90ZU1lZGlhU3RyZWFtID0gcmVtb3RlTWVkaWFTdHJlYW07CiAgICAgICAgfQogICAgfSksCgogICAgLy9zY3JlZW5PcHRpb25zIFsnc2NyZWVuJywgJ3dpbmRvdycsICd0YWInXQogICAgU2hhcmVEZXNrdG9wUHVic3RyZWFtOiBfX1N0cmVhbS5leHRlbmQoewogICAgICAgIHZvZmY6IDAsCgogICAgICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgc2VsZi50eXBlID0gMTsKICAgICAgICAgICAgc2VsZi5fbG9jYXRlZCA9IHRydWU7CgogICAgICAgICAgICBzZWxmLm11dGVkTXV0ZWQgPSB0cnVlOwogICAgICAgICAgICBzZWxmLmNvbnN0YWludHMgPSB7IGF1ZGlvOiAhdGhpcy5hb2ZmLCB2aWRlbzogdHJ1ZSB9OwoKICAgICAgICAgICAgZW1lZGlhLmNvbmZpZy5tYXhWaWRlb0JpdHJhdGUgJiYgKHNlbGYudmJpdHJhdGUgPSBlbWVkaWEuY29uZmlnLm1heFZpZGVvQml0cmF0ZSk7CiAgICAgICAgICAgIGVtZWRpYS5jb25maWcubWF4QXVkaW9CaXRyYXRlICYmIChzZWxmLmFiaXRyYXRlID0gZW1lZGlhLmNvbmZpZy5tYXhBdWRpb0JpdHJhdGUpOwogICAgICAgIH0KICAgIH0pLAoKICAgIF9fYXNzZXJ0Q3VycmVudDogZnVuY3Rpb24gX19hc3NlcnRDdXJyZW50KCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBpZiAoIXNlbGYuY3VycmVudCkgewogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJQbGVhc2UgY2FsbCBlbWVkaWEuc2VydmljZS5zZXR1cCh0aWNrZXQpIik7CiAgICAgICAgICAgIHRocm93ICJQbGVhc2UgY2FsbCBlbWVkaWEuc2VydmljZS5zZXR1cCh0aWNrZXQpIjsKICAgICAgICB9CiAgICAgICAgaWYgKHNlbGYuY3VycmVudC5jbG9zZWQpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiY3VycmVudCBjbG9zZWQiKTsKICAgICAgICAgICAgdGhyb3cgImN1cnJlbnQgY2xvc2VkIjsKICAgICAgICB9CiAgICB9LAoKICAgIGhhc0F1ZGlvTWl4ZXJzOiBmdW5jdGlvbiBoYXNBdWRpb01peGVycygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYuX19hc3NlcnRDdXJyZW50KCk7CgogICAgICAgIGZvciAodmFyIHNpZCBpbiBzZWxmLmN1cnJlbnQuYXVkaW9NaXhlcnMpIHsKICAgICAgICAgICAgdmFyIHN0cmVhbSA9IHNlbGYuY3VycmVudC5hdWRpb01peGVyc1tzaWRdOwogICAgICAgICAgICBpZiAoc3RyZWFtICYmIHN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBnZXRNZWRpYURldmljZXM6IGZ1bmN0aW9uIGdldE1lZGlhRGV2aWNlcyhraW5kLCBkZXZpY2VzLCBlcnJvckNhbGxiYWNrKSB7CiAgICAgICAgaWYgKHR5cGVvZiBraW5kID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGVycm9yQ2FsbGJhY2sgPSBkZXZpY2VzOwogICAgICAgICAgICBkZXZpY2VzID0ga2luZDsKICAgICAgICAgICAga2luZCA9IHVuZGVmaW5lZDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdvdERldmljZXMoZGV2aWNlSW5mb3MpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdERldmljZUluZm9zID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSAhPT0gZGV2aWNlSW5mb3MubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgICAgIHZhciBkZXZpY2VJbmZvID0gZGV2aWNlSW5mb3NbaV07CiAgICAgICAgICAgICAgICB2YXIgZGV2aWNlSWQgPSBkZXZpY2VJbmZvLmRldmljZUlkOwoKICAgICAgICAgICAgICAgIGlmICgha2luZCkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdERldmljZUluZm9zLnB1c2goZGV2aWNlSW5mbyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGtpbmQgJiYga2luZCA9PT0gZGV2aWNlSW5mby5raW5kKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGV2aWNlSW5mb3MucHVzaChkZXZpY2VJbmZvKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGV2aWNlSW5mby5raW5kID09PSAnYXVkaW9pbnB1dCcpIHt9IGVsc2UgaWYgKGRldmljZUluZm8ua2luZCA9PT0gJ2F1ZGlvb3V0cHV0Jykge30gZWxzZSBpZiAoZGV2aWNlSW5mby5raW5kID09PSAndmlkZW9pbnB1dCcpIHt9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygnU29tZSBvdGhlciBraW5kIG9mIHNvdXJjZS9kZXZpY2U6ICcsIGRldmljZUluZm8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBkZXZpY2VzICYmIGRldmljZXMocmVzdWx0RGV2aWNlSW5mb3MpOwogICAgICAgIH07CgogICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZ290RGV2aWNlcykuY2F0Y2goZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyb3IpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCduYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIGVycm9yOiAnLCBlcnJvcik7CiAgICAgICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIC8vIEF0dGFjaCBhdWRpbyBvdXRwdXQgZGV2aWNlIHRvIHZpZGVvIGVsZW1lbnQgdXNpbmcgZGV2aWNlL3NpbmsgSUQuCiAgICAvLyBzaW5rSWQgZGV2aWNlSW5mby5kZXZpY2VJZDsKICAgIC8vIGF0dGFjaFNpbmtJZCh2aWRlb0VsZW1lbnQsIGRldmljZUluZm8uZGV2aWNlSWQpOwogICAgYXR0YWNoU2lua0lkOiBmdW5jdGlvbiBhdHRhY2hTaW5rSWQodmlkZW9PYmosIHNpbmtJZCkgewogICAgICAgIGlmICh0eXBlb2YgdmlkZW9PYmouc2lua0lkICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICB2aWRlb09iai5zZXRTaW5rSWQoc2lua0lkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygnU3VjY2VzcywgYXVkaW8gb3V0cHV0IGRldmljZSBhdHRhY2hlZDogJyArIHNpbmtJZCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGVycm9yOwogICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdTZWN1cml0eUVycm9yJykgewogICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdZb3UgbmVlZCB0byB1c2UgSFRUUFMgZm9yIHNlbGVjdGluZyBhdWRpbyBvdXRwdXQgJyArICdkZXZpY2U6ICcgKyBlcnJvcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybihlcnJvck1lc3NhZ2UpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oJ0Jyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBvdXRwdXQgZGV2aWNlIHNlbGVjdGlvbi4nKTsKICAgICAgICB9CiAgICB9LAoKICAgIF9zdG9wVHJhY2tzOiBmdW5jdGlvbiBfc3RvcFRyYWNrcyhfc3RyZWFtKSB7CiAgICAgICAgZW1lZGlhLnN0b3BUcmFja3MoX3N0cmVhbSk7CiAgICAgICAgX3N0cmVhbSAmJiBfbG9nZ2VyLndhcm4oIlN0cmVhbSB0cmFja3Mgc3RvcC4gaXQgPSAiLCBfc3RyZWFtKTsKICAgIH0sCiAgICBfZW5hYmxlVmlkZW9UcmFja3M6IGZ1bmN0aW9uIF9lbmFibGVWaWRlb1RyYWNrcyhfc3RyZWFtLCBlbmFibGVkKSB7CiAgICAgICAgZW1lZGlhLmVuYWJsZVZpZGVvVHJhY2tzKF9zdHJlYW0sIGVuYWJsZWQpOwogICAgfSwKICAgIF9lbmFibGVBdWRpb1RyYWNrczogZnVuY3Rpb24gX2VuYWJsZUF1ZGlvVHJhY2tzKF9zdHJlYW0sIGVuYWJsZWQpIHsKICAgICAgICBlbWVkaWEuZW5hYmxlQXVkaW9UcmFja3MoX3N0cmVhbSwgZW5hYmxlZCk7CiAgICB9LAoKICAgIG9wZW5Vc2VyTWVkaWE6IGZ1bmN0aW9uIG9wZW5Vc2VyTWVkaWEocHViUykgewogICAgICAgIF9sb2dnZXIuZGVidWcoImJlZ2luIG9wZW4gdXNlciBtZWRpYSIsIHB1YlMpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIC8vc2VsZi5fX2Fzc2VydEN1cnJlbnQoKTsKCiAgICAgICAgaWYgKCFwdWJTKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoInJlcXVpcmUgcHViUyIpOwogICAgICAgICAgICB0aHJvdyAicmVxdWlyZSBwdWJTIjsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4oc3VjY2VzcywgZXJyQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIGlmIChwdWJTIGluc3RhbmNlb2Ygc2VsZi5BVlB1YnN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgIHNlbGYuX29wZW5DYW1lcmEocHViUywgc3VjY2VzcywgZXJyQ2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwdWJTIGluc3RhbmNlb2Ygc2VsZi5TaGFyZURlc2t0b3BQdWJzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcGVuU2hhcmVkRGVza3RvcChwdWJTLCBzdWNjZXNzLCBlcnJDYWxsYmFjayk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHB1YlMgaW5zdGFuY2VvZiBzZWxmLkF1ZGlvTWl4ZXJQdWJzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9vcGVuQ2FtZXJhKHB1YlMsIHN1Y2Nlc3MsIGVyckNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiVW5zcHBvcnRlZCBwdWJTIik7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgIlVuc3Bwb3J0ZWQgcHViUyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfSwKCiAgICBfb3BlblNoYXJlZERlc2t0b3A6IGZ1bmN0aW9uIF9vcGVuU2hhcmVkRGVza3RvcChwdWJTLCBzdWNjZXNzLCBlcnJDYWxsYmFjaykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgLy9zZWxmLl9fYXNzZXJ0Q3VycmVudCgpOwoKICAgICAgICBmdW5jdGlvbiBnZXRBdWRpb1N0cmVhbShwdWJTKSB7CiAgICAgICAgICAgIHZhciBhdWRpb0NvbnN0YWludHMgPSB7IGF1ZGlvOiB0cnVlIH07CiAgICAgICAgICAgIGlmIChwdWJTLmNvbnN0YWludHMpIHsKICAgICAgICAgICAgICAgIGlmIChfdHlwZW9mKHB1YlMuY29uc3RhaW50cy5hdWRpbykgPT09ICdvYmplY3QnICYmIHB1YlMuY29uc3RhaW50cy5hdWRpbykge30gZWxzZSBpZiAoIXB1YlMuY29uc3RhaW50cy5hdWRpbykgewogICAgICAgICAgICAgICAgICAgIGF1ZGlvQ29uc3RhaW50cy5hdWRpbyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGYuX19nZXRVc2VyTWVkaWEoYXVkaW9Db25zdGFpbnRzLCBmdW5jdGlvbiAoX3VzZXIsIHN0cmVhbSkgewogICAgICAgICAgICAgICAgdmFyIG1lZGlhU3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKCk7CiAgICAgICAgICAgICAgICBtZWRpYVN0cmVhbS5fbG9jYXRlZCA9IHRydWU7CgogICAgICAgICAgICAgICAgc3RyZWFtICYmIHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgbWVkaWFTdHJlYW0uYWRkVHJhY2sodHJhY2spOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcHViUy5sb2NhbFN0cmVhbSAmJiBwdWJTLmxvY2FsU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgICAgICBtZWRpYVN0cmVhbS5hZGRUcmFjayh0cmFjayk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBwdWJTLmxvY2FsU3RyZWFtID0gbWVkaWFTdHJlYW07CgogICAgICAgICAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKHNlbGYuY3VycmVudCwgbWVkaWFTdHJlYW0pOwogICAgICAgICAgICB9LCBlcnJDYWxsYmFjayk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdmlkZW9UcmFja3M7CiAgICAgICAgaWYgKHB1YlMuX2xvY2FsTWVkaWFTdHJlYW0gJiYgKHZpZGVvVHJhY2tzID0gcHViUy5fbG9jYWxNZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpKSAmJiB2aWRlb1RyYWNrcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHB1YlMubG9jYWxTdHJlYW0gPSBwdWJTLl9sb2NhbE1lZGlhU3RyZWFtOwoKICAgICAgICAgICAgaWYgKHB1YlMuY29uc3RhaW50cy5hdWRpbykgewogICAgICAgICAgICAgICAgZ2V0QXVkaW9TdHJlYW0ocHViUyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdWNjZXNzICYmIHN1Y2Nlc3Moc2VsZi5jdXJyZW50LCBzdHJlYW0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvL3NjcmVlbk9wdGlvbnMgWydzY3JlZW4nLCAnd2luZG93JywgJ3RhYiddCiAgICAgICAgX19kZXNrdG9wLm9wZW5EZXNrdG9wTWVkaWEocHViUy5zY3JlZW5PcHRpb25zIHx8IFsnc2NyZWVuJywgJ3dpbmRvdycsICd0YWInXSwgZnVuY3Rpb24gKF9ldmVudCkgewogICAgICAgICAgICBpZiAoX2V2ZW50IGluc3RhbmNlb2YgX19ldmVudC5PcGVuRGVza3RvcE1lZGlhKSB7CiAgICAgICAgICAgICAgICB2YXIgZGVza3RvcFN0cmVhbUlkID0gX2V2ZW50LmRlc2t0b3BTdHJlYW1JZDsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiZGVza3RvcCBzdHJlYW1JZCIsIGRlc2t0b3BTdHJlYW1JZCk7CgogICAgICAgICAgICAgICAgdmFyIGNvbnN0cmFpbnRzID0gewogICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICB2aWRlbzogewogICAgICAgICAgICAgICAgICAgICAgICBtYW5kYXRvcnk6IF91dGlsLmV4dGVuZChwdWJTLm1hbmRhdG9yeSB8fCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lTWVkaWFTb3VyY2U6ICdkZXNrdG9wJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZU1lZGlhU291cmNlSWQ6IGRlc2t0b3BTdHJlYW1JZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF4V2lkdGg6IHdpbmRvdy5zY3JlZW4ud2lkdGggPiAxOTIwID8gd2luZG93LnNjcmVlbi53aWR0aCA6IDE5MjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXhIZWlnaHQ6IHdpbmRvdy5zY3JlZW4uaGVpZ2h0ID4gMTA4MCA/IHdpbmRvdy5zY3JlZW4uaGVpZ2h0IDogMTA4MAogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IFtdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvL2RlbGV0ZSBwdWJTLm1hbmRhdG9yeTsKCiAgICAgICAgICAgICAgICBzZWxmLl9fZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBmdW5jdGlvbiAoX21lLCBzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBwdWJTLmxvY2FsU3RyZWFtID0gc3RyZWFtOwoKICAgICAgICAgICAgICAgICAgICBpZiAocHViUy5jb25zdGFpbnRzLmF1ZGlvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldEF1ZGlvU3RyZWFtKHB1YlMpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2VzcyhzZWxmLmN1cnJlbnQsIHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgZXJyQ2FsbGJhY2spOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50ICYmIHNlbGYuY3VycmVudC5vbkV2ZW50KG5ldyBfX2V2ZW50LlNoYXJlRGVza3RvcEV4dGVuc2lvbk5vdEZvdW5kKHsgbWVtYmVyOiBzZWxmLmN1cnJlbnQgfSkpOwogICAgICAgICAgICAgICAgZXJyQ2FsbGJhY2sgJiYgZXJyQ2FsbGJhY2soX2V2ZW50KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKCiAgICBfb3BlbkNhbWVyYTogZnVuY3Rpb24gX29wZW5DYW1lcmEocHViUywgc3VjY2VzcywgZXJyQ2FsbGJhY2spIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgLy9zZWxmLl9fYXNzZXJ0Q3VycmVudCgpOwoKICAgICAgICAvL3ZhciBjb25zdGFpbnRzID0gcHViUy5jb25zdGFpbnRzIHx8IHthdWRpbzogIXB1YlMuYW9mZiwgdmlkZW86ICFwdWJTLnZvZmZ9OwogICAgICAgIHZhciBjb25zdGFpbnRzID0gcHViUy5jb25zdGFpbnRzIHx8IHsgYXVkaW86IHRydWUsIHZpZGVvOiB0cnVlIH07CgogICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhfbWUsIHN0cmVhbSkgewogICAgICAgICAgICBzZWxmLl9fY29udHJvbFN0cmVhbShwdWJTLCBzdHJlYW0pOwoKICAgICAgICAgICAgcHViUy5sb2NhbFN0cmVhbSA9IHN0cmVhbTsKICAgICAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKHNlbGYuY3VycmVudCwgc3RyZWFtKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5fX2dldFVzZXJNZWRpYShjb25zdGFpbnRzLCBzdWNjZXNzQ2FsbGJhY2suYmluZChjb25zdGFpbnRzKSwgZXJyQ2FsbGJhY2spOwogICAgfSwKCiAgICBfX2NvbnRyb2xTdHJlYW06IGZ1bmN0aW9uIF9fY29udHJvbFN0cmVhbShwdWJTLCBzdHJlYW0pIHsKICAgICAgICBlbWVkaWEuZW5hYmxlVmlkZW9UcmFja3Moc3RyZWFtLCAhcHViUy52b2ZmKTsKICAgICAgICBlbWVkaWEuZW5hYmxlQXVkaW9UcmFja3Moc3RyZWFtLCAhcHViUy5hb2ZmKTsKICAgIH0sCgogICAgX19nZXRVc2VyTWVkaWE6IGZ1bmN0aW9uIF9fZ2V0VXNlck1lZGlhKGNvbnN0YWludHMsIHN1Y2Nlc3MsIGVyckNhbGxiYWNrKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnVXNpbmcgZ2V0IHVzZXIgbWVkaWEuIGNvbnN0YWludHMnLCBjb25zdGFpbnRzKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBjb25zdGFpbnRzID0gX3V0aWwuZXh0ZW5kKHt9LCBjb25zdGFpbnRzKTsKICAgICAgICBpZiAoX3R5cGVvZihjb25zdGFpbnRzLmF1ZGlvKSA9PT0gJ29iamVjdCcgJiYgY29uc3RhaW50cy5hdWRpbykgewogICAgICAgICAgICBjb25zdGFpbnRzLmF1ZGlvID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHZhciBfb3BlbnN0cmVhbTsKCiAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzKHN0cmVhbSkgewogICAgICAgICAgICBpZiAoc2VsZi5jdXJyZW50ICYmICFzZWxmLmN1cnJlbnQuY2xvc2VkKSB7CiAgICAgICAgICAgICAgICAvL3B1c2ggc3RyZWFt5pe277yM55Sx5LqO5byC5q2l77yM5Zyo5pyq6L+U5Zue5oiQ5Yqf5ZCO77yM6YCA5Ye65Lya6K6u77yM5pGE5YOP5aS05LiN5Lya6KKr5YWz6Zet6Zeu6aKYCiAgICAgICAgICAgICAgICAvL+WwhnN0cmVhbSDkuI4gQXR0ZW5kZWXnu5HlrpoKICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudC5fb3BlbmVkUnRjTWVkaWFTdHJlYW1zW3N0cmVhbS5pZF0gPSBzdHJlYW07CiAgICAgICAgICAgICAgICBzdHJlYW0uX2JpbmRBdHRlbmRlZSA9IHNlbGYuY3VycmVudDsKICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygic3RyZWFtIGJpbmQgYXR0ZW5kZWUuIiwgc3RyZWFtLmlkLCBzZWxmLmN1cnJlbnQudGlja2V0ICYmIHNlbGYuY3VycmVudC50aWNrZXQuaWQgfHwgc2VsZi5jdXJyZW50Lm1lbU5hbWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZW1lZGlhLmlzU2FmYXJpKSB7CiAgICAgICAgICAgICAgICBlbWVkaWEuX2lzU2FmYXJpWWV0UHVzaGVkU3RyZWFtID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX29wZW5zdHJlYW0gPSBzdHJlYW07CgogICAgICAgICAgICB2YXIgdmlkZW9UcmFja3MgPSBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTsKICAgICAgICAgICAgdmFyIGF1ZGlvVHJhY2tzID0gc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCk7CgogICAgICAgICAgICBpZiAodmlkZW9UcmFja3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygnVXNpbmcgdmlkZW8gZGV2aWNlOiAnICsgdmlkZW9UcmFja3NbMF0ubGFiZWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhdWRpb1RyYWNrcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCdVc2luZyBhdWRpbyBkZXZpY2U6ICcgKyBhdWRpb1RyYWNrc1swXS5sYWJlbCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN0cmVhbS5fbG9jYXRlZCA9IHRydWU7CgogICAgICAgICAgICBzdWNjZXNzICYmIHN1Y2Nlc3Moc2VsZi5jdXJyZW50LCBzdHJlYW0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gb25GYWlsKGUpIHsKICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygnW1dlYlJUQy1BUEldIGdldFVzZXJNZWRpYSgpIGVycm9yOiAnLCBlKTsKCiAgICAgICAgICAgIGVtZWRpYS5zdG9wVHJhY2tzKF9vcGVuc3RyZWFtKTsKCiAgICAgICAgICAgIHNlbGYuY3VycmVudCAmJiBzZWxmLmN1cnJlbnQub25FdmVudChuZXcgX19ldmVudC5PcGVuTWVkaWFFcnJvcih7IG1lbWJlcjogc2VsZi5jdXJyZW50LCBldmVudDogZSB9KSk7CiAgICAgICAgICAgIGVyckNhbGxiYWNrICYmIGVyckNhbGxiYWNrKG5ldyBfX2V2ZW50Lk9wZW5NZWRpYUVycm9yKHsgbWVtYmVyOiBzZWxmLmN1cnJlbnQsIGV2ZW50OiBlIH0pKTsKICAgICAgICB9CgogICAgICAgIHNlbGYuX19zeXNHZXRVc2VyTWVkaWEoY29uc3RhaW50cywgb25TdWNjZXNzLCBvbkZhaWwpOwogICAgfSwKCiAgICBfX3N5c0dldFVzZXJNZWRpYTogZnVuY3Rpb24gX19zeXNHZXRVc2VyTWVkaWEoY29uc3RhaW50cywgb25TdWNjZXNzLCBvbkZhaWwpIHsKICAgICAgICBmdW5jdGlvbiBnZXRVc2VyTWVkaWEoY29uc3RhaW50cywgb25TdWNjZXNzLCBvbkZhaWwpIHsKICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RhaW50cykudGhlbihvblN1Y2Nlc3MpLmNhdGNoKG9uRmFpbCk7CiAgICAgICAgICAgIC8vIG5hdmlnYXRvci5tZWRpYURldmljZXMgPyBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdGFpbnRzKS50aGVuKG9uU3VjY2VzcykuY2F0Y2gob25GYWlsKQogICAgICAgICAgICAvLyAgICAgOiBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKGNvbnN0YWludHMsIG9uU3VjY2Vzcywgb25GYWlsKTsKICAgICAgICB9CgogICAgICAgIGlmICghZW1lZGlhLmlzU2FmYXJpKSB7CiAgICAgICAgICAgIGdldFVzZXJNZWRpYShjb25zdGFpbnRzLCBvblN1Y2Nlc3MsIG9uRmFpbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnN0YWludHMgPSBfLmV4dGVuZCh7fSwgY29uc3RhaW50cyk7CgogICAgICAgIGZ1bmN0aW9uIG5ld1N0cmVhbUFuZENhbGxiYWNrKCkgewogICAgICAgICAgICB2YXIgbWVkaWFTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTsKCiAgICAgICAgICAgIGNvbnN0YWludHMuYXVkaW9TdHJlYW0gJiYgY29uc3RhaW50cy5hdWRpb1N0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICBtZWRpYVN0cmVhbS5hZGRUcmFjayh0cmFjayk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdGFpbnRzLnZpZGVvU3RyZWFtICYmIGNvbnN0YWludHMudmlkZW9TdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgICAgICAgbWVkaWFTdHJlYW0uYWRkVHJhY2sodHJhY2spOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgb25TdWNjZXNzICYmIG9uU3VjY2VzcyhtZWRpYVN0cmVhbSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2soc3RyZWFtKSB7CiAgICAgICAgICAgIGlmIChjb25zdGFpbnRzLmZhaWxlZCkgewogICAgICAgICAgICAgICAgZW1lZGlhLnN0b3BUcmFja3Moc3RyZWFtKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW8pIHsKICAgICAgICAgICAgICAgIGNvbnN0YWludHMuYXVkaW9TdHJlYW0gPSBzdHJlYW07CiAgICAgICAgICAgICAgICBpZiAoIWNvbnN0YWludHMudmlkZW8pIHsKICAgICAgICAgICAgICAgICAgICBuZXdTdHJlYW1BbmRDYWxsYmFjaygpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy52aWRlbykgewogICAgICAgICAgICAgICAgY29uc3RhaW50cy52aWRlb1N0cmVhbSA9IHN0cmVhbTsKICAgICAgICAgICAgICAgIGlmICghY29uc3RhaW50cy5hdWRpbykgewogICAgICAgICAgICAgICAgICAgIG5ld1N0cmVhbUFuZENhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY29uc3RhaW50cy5hdWRpb1N0cmVhbSAmJiBjb25zdGFpbnRzLnZpZGVvU3RyZWFtKSB7CiAgICAgICAgICAgICAgICBuZXdTdHJlYW1BbmRDYWxsYmFjaygpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmYWlsQ2FsbGJhY2soZSkgewogICAgICAgICAgICBpZiAoY29uc3RhaW50cy5mYWlsZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3RhaW50cy5mYWlsZWQgPSB0cnVlOwogICAgICAgICAgICBvbkZhaWwoZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY29uc3RhaW50cy5hdWRpbykgewogICAgICAgICAgICB2YXIgb25seUF1ZGlvID0geyBhdWRpbzogY29uc3RhaW50cy5hdWRpbyB9OwogICAgICAgICAgICBnZXRVc2VyTWVkaWEob25seUF1ZGlvLCBzdWNjZXNzQ2FsbGJhY2suYmluZChvbmx5QXVkaW8pLCBmYWlsQ2FsbGJhY2spOwogICAgICAgIH0KICAgICAgICBpZiAoY29uc3RhaW50cy52aWRlbykgewogICAgICAgICAgICB2YXIgb25seVZpZGVvID0geyB2aWRlbzogY29uc3RhaW50cy52aWRlbyB9OwogICAgICAgICAgICBnZXRVc2VyTWVkaWEob25seVZpZGVvLCBzdWNjZXNzQ2FsbGJhY2suYmluZChvbmx5VmlkZW8pLCBmYWlsQ2FsbGJhY2spOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFjb25zdGFpbnRzLnZpZGVvICYmICFjb25zdGFpbnRzLmF1ZGlvKSB7CiAgICAgICAgICAgIGZhaWxDYWxsYmFjaygiRmFpbGVkIHRvIGV4ZWN1dGUgJ2dldFVzZXJNZWRpYScgb24gJ01lZGlhRGV2aWNlcyc6IEF0IGxlYXN0IG9uZSBvZiBhdWRpbyBhbmQgdmlkZW8gbXVzdCBiZSByZXF1ZXN0ZWQiKTsKICAgICAgICB9CiAgICAgICAgLy9GYWlsZWQgdG8gZXhlY3V0ZSAnZ2V0VXNlck1lZGlhJyBvbiAnTWVkaWFEZXZpY2VzJzogQXQgbGVhc3Qgb25lIG9mIGF1ZGlvIGFuZCB2aWRlbyBtdXN0IGJlIHJlcXVlc3RlZAogICAgfSwKCiAgICBzZXR1cDogZnVuY3Rpb24gc2V0dXAodGlja2V0LCBleHQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIF9sb2dnZXIuY291bnQoKTsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJyZWN2IHRpY2tldCIsIHRpY2tldCwgZXh0KTsKCiAgICAgICAgZXh0ID0gZXh0IHx8IHt9OwoKICAgICAgICB2YXIgZXh0T2JqID0gZXh0OwogICAgICAgIGlmIChfdXRpbC5pc1BsYWluT2JqZWN0KGV4dCkpIHsKICAgICAgICAgICAgLy9leHQg5piv5a+56LGh77yMIGV4dE9iaiDkuZ/mmK/lr7nosaEKICAgICAgICAgICAgZXh0ID0gSlNPTi5zdHJpbmdpZnkoZXh0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL2V4dCDmmK/lrZfnrKbkuLLvvIwgZXh0T2JqIOWwvemHj+i9rOaNouS4uiDlr7nosaEKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGV4dE9iaiA9IEpTT04ucGFyc2UoZXh0KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2YgdGlja2V0ID09PSAic3RyaW5nIikgewogICAgICAgICAgICB0aWNrZXQgPSBKU09OLnBhcnNlKHRpY2tldCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3lzVXNlcklkLCBtZW1OYW1lOwogICAgICAgIHN5c1VzZXJJZCA9IG1lbU5hbWUgPSB0aWNrZXQubWVtTmFtZTsKCiAgICAgICAgaWYgKHNlbGYuY3VycmVudCAmJiAhc2VsZi5jdXJyZW50LmNsb3NlZCkgewogICAgICAgICAgICB2YXIgX19ldmVudENhbGxpbmcgPSBuZXcgX19ldmVudC5DdXJyZW50Q2FsbGluZygpOwogICAgICAgICAgICBzZWxmLmN1cnJlbnQub25FdmVudChfX2V2ZW50Q2FsbGluZyk7CgogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJjb25mciBub3QgY2xvc2UuIGNhbGxpbmcuLi4iKTsKICAgICAgICAgICAgdGhyb3cgX19ldmVudENhbGxpbmc7CiAgICAgICAgICAgIC8vcmV0dXJuOwoKICAgICAgICAgICAgLy9zZWxmLmN1cnJlbnQuZXhpdCgwKTsKICAgICAgICB9CgogICAgICAgIHZhciBUYXJnZXRBdHRlbmRlZSA9IHNlbGYuQXR0ZW5kZWUgfHwgQXR0ZW5kZWU7CiAgICAgICAgdmFyIF9BdHRlbmRlZSA9IFRhcmdldEF0dGVuZGVlLmV4dGVuZChFdmVudEhhbmRsZXIpOwoKICAgICAgICB2YXIgYXR0ZW5kZWUgPSBzZWxmLmN1cnJlbnQgPSBuZXcgX0F0dGVuZGVlKHsKICAgICAgICAgICAgX3NlcnZpY2U6IHNlbGYsCiAgICAgICAgICAgIGF1dG9TdWI6IGVtZWRpYS5jb25maWcuYXV0b1N1YiwKICAgICAgICAgICAgZ2V0Q29weUludGVydmFsTWlsbGlzOiBlbWVkaWEuY29uZmlnLmdldENvcHlJbnRlcnZhbE1pbGxpcywKICAgICAgICAgICAgc3lzVXNlcklkOiBzeXNVc2VySWQsCiAgICAgICAgICAgIG1lbU5hbWU6IG1lbU5hbWUsCiAgICAgICAgICAgIHJlc291cmNlOiBzZWxmLnJlc291cmNlLAogICAgICAgICAgICBuaWNrTmFtZTogc2VsZi5uaWNrTmFtZSwKICAgICAgICAgICAgdGlja2V0OiB0aWNrZXQsCiAgICAgICAgICAgIGV4dDogZXh0LAogICAgICAgICAgICBleHRPYmo6IGV4dE9iaiwKCiAgICAgICAgICAgIHNlc3Npb25GYWN0b3J5OiBmdW5jdGlvbiBzZXNzaW9uRmFjdG9yeSgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm5ld1Nlc3Npb24odGhpcywgdGlja2V0KTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHNlbGYubGlzdGVuZXJzIHx8IHt9KTsKCiAgICAgICAgcmV0dXJuIGF0dGVuZGVlOwogICAgfSwKCiAgICBnZXRTdHJlYW1CeUlkOiBmdW5jdGlvbiBnZXRTdHJlYW1CeUlkKHN0cmVhbUlkKSB7CiAgICAgICAgdmFyIHN0cmVhbSA9IHRoaXMuY3VycmVudCAmJiB0aGlzLmN1cnJlbnQuX2NhY2hlU3RyZWFtc1tzdHJlYW1JZF07CiAgICAgICAgcmV0dXJuIHN0cmVhbSAmJiBfdXRpbC5leHRlbmQoZmFsc2UsIHt9LCBzdHJlYW0pOwogICAgfSwKCiAgICBnZXRNZW1iZXJCeUlkOiBmdW5jdGlvbiBnZXRNZW1iZXJCeUlkKG1lbUlkKSB7CiAgICAgICAgdmFyIG1lbWJlciA9IHRoaXMuY3VycmVudCAmJiB0aGlzLmN1cnJlbnQuX2NhY2hlTWVtYmVyc1ttZW1JZF07CiAgICAgICAgcmV0dXJuIG1lbWJlciAmJiBfdXRpbC5leHRlbmQoZmFsc2UsIHt9LCBtZW1iZXIpOwogICAgfSwKCiAgICBleGl0OiBmdW5jdGlvbiBleGl0KGNsb3NlTXlDb25mcklmSUNydENvbmZyKSB7CiAgICAgICAgX2xvZ2dlci53YXJuKCJVc2VyIGNsaWNrIGV4aXQgIiwgY2xvc2VNeUNvbmZySWZJQ3J0Q29uZnIpOwogICAgICAgIHRoaXMuY3VycmVudCAmJiB0aGlzLmN1cnJlbnQuZXhpdChjbG9zZU15Q29uZnJJZklDcnRDb25mcik7CiAgICB9LAoKICAgIGpvaW46IGZ1bmN0aW9uIGpvaW4oam9pbmVkLCBqb2luRXJyb3IpIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJiZWdpbiBqb2luIC4uLiIpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYuX19hc3NlcnRDdXJyZW50KCk7CiAgICAgICAgaWYgKHNlbGYuY3VycmVudC5fbWVtYmVySWQpIHsKICAgICAgICAgICAgLy/lt7Lnu4/liqDlhaXkvJrorq4KICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJIYWQgam9pbmVkLiBpZ3JvbmUgaXQiKTsKICAgICAgICAgICAgam9pbmVkICYmIGpvaW5lZChzZWxmLm1lbUlkKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYuY3VycmVudC5fc2Vzc2lvbi5fc2Vzc2lvbklkID0gdW5kZWZpbmVkOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5jdXJyZW50LmpvaW4oam9pbmVkLCBqb2luRXJyb3IpOwogICAgfSwKCiAgICB3aXRocHVibGlzaDogZnVuY3Rpb24gd2l0aHB1Ymxpc2gocHViUykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFwdWJTIHx8ICFwdWJTLmxvY2FsU3RyZWFtKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoInB1YlMgbnVsbCBvciBzdHJlYW0gbm90IG9wZW4iKTsKICAgICAgICAgICAgdGhyb3cgInB1YlMgbnVsbCBvciBzdHJlYW0gbm90IG9wZW4iOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5fX2Fzc2VydEN1cnJlbnQoKTsKICAgICAgICBpZiAoc2VsZi5jdXJyZW50Ll9tZW1iZXJJZCkgewogICAgICAgICAgICAvL+W3sue7j+WKoOWFpeS8muiurgogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIkhhZCBqb2luZWQuIGlncm9uZSBpdCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYuY3VycmVudC5fc2Vzc2lvbi5fc2Vzc2lvbklkID0gdW5kZWZpbmVkOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNlbGYuY3VycmVudC53aXRocHVibGlzaChwdWJTKTsKICAgIH0sCgogICAgcHVzaDogZnVuY3Rpb24gcHVzaChwdWJTLCBwdXNoZWQsIG9uUHVzaEVycm9yKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygiYmVnaW4gcHVzaCAuLi4iKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICBvblB1c2hFcnJvciA9IHB1c2hlZDsKICAgICAgICAgICAgcHVzaGVkID0gdW5kZWZpbmVkOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFwdWJTIHx8ICFwdWJTLmxvY2FsU3RyZWFtKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoInB1YlMgb3Igc3RyZWFtIG9wZW4iKTsKICAgICAgICAgICAgdGhyb3cgInB1YlMgb3Igc3RyZWFtIG9wZW4iOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5fX2Fzc2VydEN1cnJlbnQoKTsKICAgICAgICBzZWxmLmN1cnJlbnQucHVzaChwdWJTLCBwdXNoZWQsIG9uUHVzaEVycm9yLCBmYWxzZSk7CiAgICB9LAoKICAgIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKHN0cmVhbUlkLCBvblN1Yiwgc3ViZmFpbCwgc3ViQXJncykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgX2xvZ2dlci5pbmZvKCJiZWdpbiBzdWJzY3JpYmUgIiwgc3RyZWFtSWQsIHN1YkFyZ3MpOwoKICAgICAgICBpZiAob25TdWIgJiYgX3V0aWwuaXNQbGFpbk9iamVjdChvblN1YikpIHsKICAgICAgICAgICAgc3ViQXJncyA9IG9uU3ViOwogICAgICAgICAgICBvblN1YiA9IHN1YmZhaWwgPSB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIGlmIChzdWJmYWlsICYmIF91dGlsLmlzUGxhaW5PYmplY3Qoc3ViZmFpbCkpIHsKICAgICAgICAgICAgc3ViQXJncyA9IHN1YmZhaWw7CiAgICAgICAgICAgIHN1YmZhaWwgPSBvblN1YjsKICAgICAgICAgICAgb25TdWIgPSB1bmRlZmluZWQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoZW1lZGlhLmlzU2FmYXJpKSB7CiAgICAgICAgICAgIHZhciBfb25TdWIgPSBmdW5jdGlvbiBfb25TdWIoKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBzaGlmdHN1YiA9IHN1YnMuc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICBzaGlmdHN1YiAmJiBzaGlmdHN1Yi5vblN1YiAmJiBzaGlmdHN1Yi5vblN1Yi5hcHBseShzaGlmdHN1YiwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdmFyIF9zdWJmYWlsID0gZnVuY3Rpb24gX3N1YmZhaWwoKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBzaGlmdHN1YiA9IHN1YnMuc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICBzaGlmdHN1YiAmJiBzaGlmdHN1Yi5zdWJmYWlsICYmIHNoaWZ0c3ViLnN1YmZhaWwuYXBwbHkoc2hpZnRzdWIsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgICAgICAgICAgIGlmIChzdWJzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9fc3Vic2NyaWJlKHN1YnNbMF0uc3RyZWFtSWQsIF9vblN1YiwgX3N1YmZhaWwsIHN1YnNbMF0uc3ViQXJncyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBzYWZhcmkg5Lik5Liq5rWB5ZCM5pe26K6i6ZiF5Y+v6IO95Lya5Ye6546w5peg5aOw6Z+zIOetieS4gOetiQogICAgICAgICAgICB2YXIgc3ViID0gewogICAgICAgICAgICAgICAgc3RyZWFtSWQ6IHN0cmVhbUlkLAogICAgICAgICAgICAgICAgb25TdWI6IG9uU3ViLAogICAgICAgICAgICAgICAgc3ViZmFpbDogc3ViZmFpbCwKICAgICAgICAgICAgICAgIHN1YkFyZ3M6IHN1YkFyZ3MKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHZhciBzdWJzID0gc2VsZi5fX3NhZmFyaV9zdWJzIHx8IChzZWxmLl9fc2FmYXJpX3N1YnMgPSBbXSk7CiAgICAgICAgICAgIHN1YnMucHVzaChzdWIpOwoKICAgICAgICAgICAgaWYgKHN1YnMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZWxmLl9fc3Vic2NyaWJlKHN0cmVhbUlkLCBvblN1Yiwgc3ViZmFpbCwgc3ViQXJncyk7CiAgICAgICAgfQogICAgfSwKICAgIF9fc3Vic2NyaWJlOiBmdW5jdGlvbiBfX3N1YnNjcmliZShzdHJlYW1JZCwgb25TdWIsIHN1YmZhaWwsIHN1YkFyZ3MpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYuX19hc3NlcnRDdXJyZW50KCk7CgogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHsKICAgICAgICAgICAgc3ViZmFpbCA9IG9uU3ViOwogICAgICAgICAgICBvblN1YiA9IHVuZGVmaW5lZDsKICAgICAgICB9CgogICAgICAgIGlmIChvblN1YiAmJiBfdXRpbC5pc1BsYWluT2JqZWN0KG9uU3ViKSkgewogICAgICAgICAgICBzdWJBcmdzID0gb25TdWI7CiAgICAgICAgICAgIG9uU3ViID0gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICBpZiAoc3ViZmFpbCAmJiBfdXRpbC5pc1BsYWluT2JqZWN0KHN1YmZhaWwpKSB7CiAgICAgICAgICAgIHN1YkFyZ3MgPSBzdWJmYWlsOwogICAgICAgICAgICBzdWJmYWlsID0gdW5kZWZpbmVkOwogICAgICAgIH0KCiAgICAgICAgc3ViQXJncyB8fCAoc3ViQXJncyA9IHsgc3ViU1ZpZGVvOiB0cnVlLCBzdWJTQXVkaW86IHRydWUgfSk7CgogICAgICAgIHZhciBzdWJTdHJlYW0gPSBzZWxmLmN1cnJlbnQuX2NhY2hlU3RyZWFtc1tzdHJlYW1JZF07CiAgICAgICAgLy8gaWYoc3ViU3RyZWFtICYmIHN1YlN0cmVhbS50eXBlID09PSAyICYmIHN1YkFyZ3Muc3ViU0F1ZGlvICE9PSB1bmRlZmluZWQgJiYgIXN1YkFyZ3Muc3ViU0F1ZGlvKXsKICAgICAgICAvLyAgICAgc3ViZmFpbCAmJiBzdWJmYWlsKG5ldyBfX2V2ZW50LkF1ZGlvTWl4ZXJTdHJlYW1Ob3RBbGxvd09ubHlTdWJWaWRlbyh7c3RyZWFtOiBzdWJTdHJlYW19KSk7CiAgICAgICAgLy8gICAgIHNlbGYuY3VycmVudC5vbkV2ZW50KG5ldyBfX2V2ZW50LkF1ZGlvTWl4ZXJTdHJlYW1Ob3RBbGxvd09ubHlTdWJWaWRlbyh7c3RyZWFtOiBzdWJTdHJlYW19KSk7CiAgICAgICAgLy8gICAgIHJldHVybjsKICAgICAgICAvLyB9CgogICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLmN1cnJlbnQuX2dldFdlYnJ0YyhzdHJlYW1JZCk7CgogICAgICAgIHZhciB1c2VQcmVSVENQZWVyID0gd2VicnRjICYmIHdlYnJ0Yy5pc0Nvbm5lY3RlZCgpOwoKICAgICAgICB2YXIgcmVtb3RlU3RyZWFtID0gdXNlUHJlUlRDUGVlciAmJiB3ZWJydGMuZ2V0UmVtb3RlU3RyZWFtKCk7CiAgICAgICAgaWYgKHJlbW90ZVN0cmVhbSAmJiAodXNlUHJlUlRDUGVlciA9IHJlbW90ZVN0cmVhbS5hY3RpdmUpKSB7CiAgICAgICAgICAgIHZhciBoYXNBdWRpb1RyYWNrcyA9IHJlbW90ZVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aDsKICAgICAgICAgICAgdmFyIGhhc1ZpZGVvVHJhY2tzID0gcmVtb3RlU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoOwoKICAgICAgICAgICAgaWYgKCFoYXNBdWRpb1RyYWNrcyAmJiBzdWJBcmdzLnN1YlNBdWRpbyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdXNlUHJlUlRDUGVlciA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKCFoYXNWaWRlb1RyYWNrcyAmJiBzdWJBcmdzLnN1YlNWaWRlbyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgdXNlUHJlUlRDUGVlciA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfbG9nZ2VyLmluZm8oInN1YiBzdHJlYW0iLCBzdHJlYW1JZCwgIiwgdXNlIHByZXJ0Y3BlZXIgPSIsIHVzZVByZVJUQ1BlZXIpOwoKICAgICAgICAvLyBpZih3ZWJydGMgJiYgd2VicnRjLmlzQ29ubmVjdGVkKCkgJiYgIWVtZWRpYS5pc1NhZmFyaSl7CiAgICAgICAgaWYgKHVzZVByZVJUQ1BlZXIpIHsKICAgICAgICAgICAgc2VsZi5jdXJyZW50LnN1YnNjcmliZVN0cmVhbSh3ZWJydGMuX3J0Y0lkLCBzdHJlYW1JZCwgc3ViZmFpbCwgc3ViQXJncywgb25TdWIpOwogICAgICAgICAgICBvblN1YiAmJiBvblN1YigpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB3ZWJydGMgJiYgIXdlYnJ0Yy5jbG9zZWQgJiYgc2VsZi5jdXJyZW50LmNsb3NlV2VicnRjKHdlYnJ0Yy5nZXRSdGNJZCgpLCB0cnVlLCBmYWxzZSk7CgogICAgICAgIHNlbGYuY3VycmVudC5jcmVhdGVXZWJydGNBbmRTdWJzY3JpYmVTdHJlYW0oc3RyZWFtSWQsIHsKICAgICAgICAgICAgb25Hb3RSZW1vdGU6IGZ1bmN0aW9uIG9uR290UmVtb3RlKHN0cmVhbSkgewogICAgICAgICAgICAgICAgb25TdWIgJiYgb25TdWIoc3RyZWFtKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25FdmVudDogZnVuY3Rpb24gb25FdmVudChfZXZ0KSB7CiAgICAgICAgICAgICAgICBzdWJmYWlsICYmIHN1YmZhaWwoX2V2dCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCB1bmRlZmluZWQsIHN1YkFyZ3MpOwogICAgfSwKCiAgICBjbG9zZVB1YnN0cmVhbTogZnVuY3Rpb24gY2xvc2VQdWJzdHJlYW0oc3RyZWFtKSB7CiAgICAgICAgaWYgKHN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgZW1lZGlhLnN0b3BUcmFja3Moc3RyZWFtLl9sb2NhbE1lZGlhU3RyZWFtKTsKICAgICAgICAgICAgZW1lZGlhLnN0b3BUcmFja3Moc3RyZWFtLmxvY2FsU3RyZWFtKTsKICAgICAgICB9CiAgICB9LAoKICAgIGh1bmd1cDogZnVuY3Rpb24gaHVuZ3VwKHN0cmVhbUlkKSB7CiAgICAgICAgdmFyIHN0cmVhbSA9IHRoaXMuZ2V0U3RyZWFtQnlJZChzdHJlYW1JZCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRoaXMuX2h1bmd1cChzdHJlYW1JZCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdGhpcy5vbkh1bmd1cCAmJiBzdHJlYW0gJiYgdGhpcy5vbkh1bmd1cChzdHJlYW0pOwogICAgICAgIH0KICAgIH0sCiAgICBfaHVuZ3VwOiBmdW5jdGlvbiBfaHVuZ3VwKHN0cmVhbUlkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLl9fYXNzZXJ0Q3VycmVudCgpOwoKICAgICAgICB2YXIgYXR0ZW5kZWUgPSBzZWxmLmN1cnJlbnQ7CgogICAgICAgIHZhciBzdHJlYW0gPSBhdHRlbmRlZS5fY2FjaGVTdHJlYW1zW3N0cmVhbUlkXTsKICAgICAgICB2YXIgcnRjSWQgPSBzdHJlYW0gJiYgc3RyZWFtLnJ0Y0lkOwogICAgICAgIGlmIChydGNJZCkgewogICAgICAgICAgICBhdHRlbmRlZS5jbG9zZVdlYnJ0YyhydGNJZCk7CgogICAgICAgICAgICBpZiAoc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICAgICAgc3RyZWFtLnR5cGUgIT09IDEgJiYgc3RyZWFtLl9sb2NhbE1lZGlhU3RyZWFtICYmIGVtZWRpYS5zdG9wVHJhY2tzKHN0cmVhbS5fbG9jYWxNZWRpYVN0cmVhbSk7CgogICAgICAgICAgICAgICAgaWYgKHN0cmVhbS5yZW1vdGVQbGF5QXVkaW9PYmplY3QpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHN0cmVhbS5yZW1vdGVQbGF5QXVkaW9PYmplY3QpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGF0dGVuZGVlLl9jYWNoZVN0cmVhbXNbc3RyZWFtSWRdICYmIGF0dGVuZGVlLm9uUmVtb3ZlU3RyZWFtKHN0cmVhbSk7CgogICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKGF0dGVuZGVlLl9jYWNoZVN0cmVhbXMsIHN0cmVhbUlkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHN0cmVhbSAmJiAhc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBhdHRlbmRlZS5fbGlua2VkU3RyZWFtc1tzdHJlYW0uaWRdICYmIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShhdHRlbmRlZS5fbGlua2VkU3RyZWFtcywgc3RyZWFtLmlkKTsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJIYW5nZXVwIHJlbW92ZSBmcm9tIF9saW5rZWRTdHJlYW1zLiBzdHJlYW0gPSAiLCBzdHJlYW0uaWQpOwoKICAgICAgICAgICAgc3RyZWFtID0gYXR0ZW5kZWUuX2NhY2hlU3RyZWFtc1tzdHJlYW1JZF07CiAgICAgICAgICAgIGlmICghc3RyZWFtKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBfc3RyZWFtID0gbmV3IF9fU3RyZWFtKHN0cmVhbSk7CiAgICAgICAgICAgIHN0cmVhbS5ydGNJZCA9IF9zdHJlYW0ucnRjSWQgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIHN0cmVhbS5fd2VicnRjID0gX3N0cmVhbS5fd2VicnRjID0gdW5kZWZpbmVkOwogICAgICAgICAgICBzdHJlYW0ubWVkaWFTdHJlYW0gPSBfc3RyZWFtLm1lZGlhU3RyZWFtID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgYXR0ZW5kZWUub25VcGRhdGVTdHJlYW0oX3N0cmVhbSwgbmV3IF9zdHJlYW0uVXBkYXRlKF9zdHJlYW0pKTsKICAgICAgICB9CiAgICB9LAoKICAgIHBvc3RNZXNzYWdlOiBmdW5jdGlvbiBwb3N0TWVzc2FnZShtZW1iZXJJZE9yU3RyZWFtSWQsIG1lc3NhZ2UsIGZhaWwsIG9uUnNwKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgdGhlTWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJykgewogICAgICAgICAgICBtZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkobWVzc2FnZSk7CiAgICAgICAgfQoKICAgICAgICBzZWxmLl9fYXNzZXJ0Q3VycmVudCgpOwogICAgICAgIHZhciBhdHRlbmRlZSA9IHNlbGYuY3VycmVudDsKCiAgICAgICAgdmFyIG1lbWJlcklkOwoKICAgICAgICB2YXIgbGlua2VkU3RyZWFtID0gYXR0ZW5kZWUuX2xpbmtlZFN0cmVhbXNbbWVtYmVySWRPclN0cmVhbUlkXTsKICAgICAgICBpZiAobGlua2VkU3RyZWFtICYmIGxpbmtlZFN0cmVhbS5vd25lcikgewogICAgICAgICAgICBtZW1iZXJJZCA9IGxpbmtlZFN0cmVhbS5vd25lci5pZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtZW1iZXJJZCA9IG1lbWJlcklkT3JTdHJlYW1JZDsKICAgICAgICB9CgogICAgICAgIHZhciBtZXNzYWdlID0gYXR0ZW5kZWUubmV3TWVzc2FnZSh7CiAgICAgICAgICAgIG9wOiAxMDAzLAogICAgICAgICAgICBtZW1JZDogbWVtYmVySWQsCiAgICAgICAgICAgIGFyZzogbWVzc2FnZQogICAgICAgIH0pOwoKICAgICAgICBhdHRlbmRlZS5wb3N0TWVzc2FnZShtZXNzYWdlLCAoZmFpbCB8fCBvblJzcCkgJiYgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICBvblJzcCAmJiBvblJzcChyc3AsIHRoZU1lc3NhZ2UpOwoKICAgICAgICAgICAgaWYgKHJzcC5yZXN1bHQgIT0gMCkgewogICAgICAgICAgICAgICAgdmFyIF9ldnQgPSBuZXcgX19ldmVudC5SZW1vdGVDb250cm9sRmFpbCh7IG1lbUlkOiBtZW1iZXJJZCwgZmFpbGVkOiByc3AucmVzdWx0LCBjYXVzZTogcnNwLm1zZywgdHlwZTogInBvc3RNZXNzYWdlIiwgcG9zdE1lc3NhZ2U6IG1lc3NhZ2UgfSk7CiAgICAgICAgICAgICAgICBhdHRlbmRlZS5vbkV2ZW50KF9ldnQpOwoKICAgICAgICAgICAgICAgIGZhaWwgJiYgZmFpbChfZXZ0LCB0aGVNZXNzYWdlKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgdG9yY2hSZW1vdGU6IGZ1bmN0aW9uIHRvcmNoUmVtb3RlKHN0cmVhbUlkLCB0b3JjaCwgc3VjY2VzcywgZmFpbCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKHR5cGVvZiB0b3JjaCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBmYWlsID0gc3VjY2VzczsKICAgICAgICAgICAgc3VjY2VzcyA9IHRvcmNoOwogICAgICAgICAgICB0b3JjaCA9IHVuZGVmaW5lZDsKICAgICAgICB9CgogICAgICAgIGlmICh0b3JjaCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHRvcmNoID0gdG9yY2ggPyAxIDogMDsKICAgICAgICB9CgogICAgICAgIHNlbGYuX19hc3NlcnRDdXJyZW50KCk7CiAgICAgICAgdmFyIGF0dGVuZGVlID0gc2VsZi5jdXJyZW50OwoKICAgICAgICB2YXIgbGlua2VkU3RyZWFtID0gYXR0ZW5kZWUuX2xpbmtlZFN0cmVhbXNbc3RyZWFtSWRdOwogICAgICAgIGlmICghbGlua2VkU3RyZWFtIHx8IGxpbmtlZFN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigibm90IGV4c2l0cyBvciBsb2NhdGUsIG5vdCBjb25uZWN0Iiwgc3RyZWFtSWQpOwogICAgICAgICAgICB0aHJvdyBzdHJlYW1JZCArICIgbm90IGV4c2l0cyBvciBsb2NhdGUsIG5vdCBjb25uZWN0IjsKICAgICAgICB9CgogICAgICAgIHZhciBsYXN0VG9yY2ggPSBsaW5rZWRTdHJlYW0udG9yY2g7CiAgICAgICAgdmFyIHRvcmNoID0gdG9yY2ggPT09IHVuZGVmaW5lZCA/ICFsaW5rZWRTdHJlYW0udG9yY2ggPyAxIDogMCA6IHRvcmNoOwoKICAgICAgICB2YXIgYXJnID0gewogICAgICAgICAgICBvcDI6IDIwLAogICAgICAgICAgICBzdHJlYW1JZDogc3RyZWFtSWQsCiAgICAgICAgICAgIHRvcjogdG9yY2gKICAgICAgICB9OwoKICAgICAgICB2YXIgbWVzc2FnZSA9IGF0dGVuZGVlLm5ld01lc3NhZ2UoewogICAgICAgICAgICBvcDogMTAwMiwKICAgICAgICAgICAgbWVtSWQ6IGxpbmtlZFN0cmVhbS5vd25lci5pZCwKICAgICAgICAgICAgYXJnOiBKU09OLnN0cmluZ2lmeShhcmcpLAogICAgICAgICAgICBfcmVxT3BzOiBbMTAwMjA2XQogICAgICAgIH0pOwoKICAgICAgICBsaW5rZWRTdHJlYW0udG9yY2ggPSB0b3JjaDsKCiAgICAgICAgYXR0ZW5kZWUucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICB2YXIgX2V2dCA9IG5ldyBfX2V2ZW50LlJlbW90ZUNvbnRyb2xGYWlsKHsgc3RyZWFtOiBsaW5rZWRTdHJlYW0sIGZhaWxlZDogcnNwLnJlc3VsdCwgY2F1c2U6IHJzcC5tc2csIHR5cGU6ICJ0b3JjaF9jb250cm9sIiB9KTsKICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uRXZlbnQoX2V2dCk7CgogICAgICAgICAgICAgICAgbGlua2VkU3RyZWFtLnRvcmNoID0gbGFzdFRvcmNoOwoKICAgICAgICAgICAgICAgIGZhaWwgJiYgZmFpbChfZXZ0LCBsaW5rZWRTdHJlYW0udG9yY2gpOwoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2VzcyhsaW5rZWRTdHJlYW0udG9yY2gpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGZyZWV6ZUZyYW1lUmVtb3RlOiBmdW5jdGlvbiBmcmVlemVGcmFtZVJlbW90ZShzdHJlYW1JZCwgc3VjY2VzcywgZmFpbCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5fX2Fzc2VydEN1cnJlbnQoKTsKICAgICAgICB2YXIgYXR0ZW5kZWUgPSBzZWxmLmN1cnJlbnQ7CgogICAgICAgIHZhciBsaW5rZWRTdHJlYW0gPSBhdHRlbmRlZS5fbGlua2VkU3RyZWFtc1tzdHJlYW1JZF07CiAgICAgICAgaWYgKCFsaW5rZWRTdHJlYW0gfHwgbGlua2VkU3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJub3QgZXhzaXRzIG9yIGxvY2F0ZSwgbm90IGNvbm5lY3QiLCBzdHJlYW1JZCk7CiAgICAgICAgICAgIHRocm93IHN0cmVhbUlkICsgIiBub3QgZXhzaXRzIG9yIGxvY2F0ZSwgbm90IGNvbm5lY3QiOwogICAgICAgIH0KCiAgICAgICAgdmFyIGZyZWV6ZUZyYW1lID0gIWxpbmtlZFN0cmVhbS5mcmVlemVGcmFtZTsKCiAgICAgICAgdmFyIGFyZyA9IHsKICAgICAgICAgICAgb3AyOiAyMCwKICAgICAgICAgICAgc3RyZWFtSWQ6IHN0cmVhbUlkLAogICAgICAgICAgICBmcno6IGZyZWV6ZUZyYW1lID8gMSA6IDAKICAgICAgICB9OwoKICAgICAgICB2YXIgbWVzc2FnZSA9IGF0dGVuZGVlLm5ld01lc3NhZ2UoewogICAgICAgICAgICBvcDogMTAwMiwKICAgICAgICAgICAgbWVtSWQ6IGxpbmtlZFN0cmVhbS5vd25lci5pZCwKICAgICAgICAgICAgYXJnOiBKU09OLnN0cmluZ2lmeShhcmcpLAogICAgICAgICAgICBfcmVxT3BzOiBbMTAwMjA0XQogICAgICAgIH0pOwoKICAgICAgICBsaW5rZWRTdHJlYW0uZnJlZXplRnJhbWUgPSBmcmVlemVGcmFtZTsKCiAgICAgICAgYXR0ZW5kZWUucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICB2YXIgX2V2dCA9IG5ldyBfX2V2ZW50LlJlbW90ZUNvbnRyb2xGYWlsKHsgc3RyZWFtOiBsaW5rZWRTdHJlYW0sIGZhaWxlZDogcnNwLnJlc3VsdCwgY2F1c2U6IHJzcC5tc2csIHR5cGU6ICJmcmVlemVfY29udHJvbCIgfSk7CiAgICAgICAgICAgICAgICBhdHRlbmRlZS5vbkV2ZW50KF9ldnQpOwoKICAgICAgICAgICAgICAgIGxpbmtlZFN0cmVhbS5mcmVlemVGcmFtZSA9ICFsaW5rZWRTdHJlYW0uZnJlZXplRnJhbWU7CgogICAgICAgICAgICAgICAgZmFpbCAmJiBmYWlsKF9ldnQsIGxpbmtlZFN0cmVhbS5mcmVlemVGcmFtZSk7CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKGxpbmtlZFN0cmVhbS5mcmVlemVGcmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgYmFzZTY0SW1nMkJsb2I6IGZ1bmN0aW9uIGJhc2U2NEltZzJCbG9iKGNvZGUpIHsKICAgICAgICB2YXIgcGFydHMgPSBjb2RlLnNwbGl0KCc7YmFzZTY0LCcpOwogICAgICAgIHZhciBjb250ZW50VHlwZSA9IHBhcnRzWzBdLnNwbGl0KCc6JylbMV07CiAgICAgICAgdmFyIHJhdyA9IHdpbmRvdy5hdG9iKHBhcnRzWzFdKTsKICAgICAgICB2YXIgcmF3TGVuZ3RoID0gcmF3Lmxlbmd0aDsKCiAgICAgICAgdmFyIHVJbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdMZW5ndGgpOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0xlbmd0aDsgKytpKSB7CiAgICAgICAgICAgIHVJbnQ4QXJyYXlbaV0gPSByYXcuY2hhckNvZGVBdChpKTsKICAgICAgICB9CgogICAgICAgIC8vIGlmKGVtZWRpYS5pc1NhZmFyaSl7CiAgICAgICAgLy8gICAgIHJldHVybiBuZXcgQmxvYihbdUludDhBcnJheV0sIHt0eXBlOiJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0ifSk7CiAgICAgICAgLy8gfQoKICAgICAgICByZXR1cm4gbmV3IEJsb2IoW3VJbnQ4QXJyYXldLCB7IHR5cGU6IGNvbnRlbnRUeXBlIH0pOwogICAgfSwKCiAgICBibG9iMlVSTDogZnVuY3Rpb24gYmxvYjJVUkwoYmxvYikgewogICAgICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgfSwKCiAgICBpbWFnZXNQbmdDb250ZXh0MlVSTDogZnVuY3Rpb24gaW1hZ2VzUG5nQ29udGV4dDJVUkwoY29kZSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICByZXR1cm4gc2VsZi5ibG9iMlVSTChzZWxmLmJsb2IyVVJMKGNvZGUpKTsKICAgIH0sCgogICAgZG93bmxvYWRGaWxlOiBmdW5jdGlvbiBkb3dubG9hZEZpbGUoZmlsZU5hbWUsIGNvbnRlbnQsIGJsb2JzKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgYUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYUxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB2YXIgYmxvYiA9IGNvbnRlbnQgPyBzZWxmLmJhc2U2NEltZzJCbG9iKGNvbnRlbnQpIDogYmxvYnM7IC8vbmV3IEJsb2IoW2NvbnRlbnRdKTsKCiAgICAgICAgLy8gaWYodHlwZW9mIEZpbGVSZWFkZXIgPT09ICdvYmplY3QnKXsKICAgICAgICAvLyAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgLy8KICAgICAgICAvLyAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyAgICAgICAgIHZhciB1cmwgPSByZWFkZXIucmVzdWx0OwogICAgICAgIC8vICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKTsKICAgICAgICAvLyAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsOwogICAgICAgIC8vICAgICB9OwogICAgICAgIC8vCiAgICAgICAgLy8gICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpOwogICAgICAgIC8vICAgICByZXR1cm47CiAgICAgICAgLy8gfQoKICAgICAgICB2YXIgYmxvYlVybDsKICAgICAgICBhTGluay5kb3dubG9hZCA9IGZpbGVOYW1lOwogICAgICAgIGFMaW5rLmhyZWYgPSBibG9iVXJsID0gc2VsZi5ibG9iMlVSTChibG9iKTsKICAgICAgICBhTGluay5yZWwgPSAnbm9vcGVuZXInOwogICAgICAgIC8vIGlmKGVtZWRpYS5pc1NhZmFyaSl7CiAgICAgICAgLy8gICAgIGFMaW5rLmhyZWYgPSBhTGluay5ocmVmLnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKTsKICAgICAgICAvLyB9CgogICAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpOwogICAgICAgIGV2dC5pbml0RXZlbnQoImNsaWNrIiwgZmFsc2UsIGZhbHNlKTsgLy9pbml0RXZlbnQg5LiN5Yqg5ZCO5Lik5Liq5Y+C5pWw5ZyoRkbkuIvkvJrmiqXplJkKICAgICAgICBhTGluay5kaXNwYXRjaEV2ZW50KGV2dCk7CgogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYUxpbmspOwogICAgICAgIGFMaW5rLmNsaWNrKCk7CiAgICAgICAgYUxpbmsucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhTGluayk7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMICYmIFVSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVybCk7CiAgICAgICAgfSwgNDAwMDApOwogICAgfSwKCiAgICB2aWRlb0NhcHR1cmVCYXNlNjRDb250ZXh0MlVSTDogZnVuY3Rpb24gdmlkZW9DYXB0dXJlQmFzZTY0Q29udGV4dDJVUkwodmlkZW9PYmopIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgcmV0dXJuIHNlbGYuaW1hZ2VzUG5nQ29udGV4dDJVUkwoc2VsZi5nZXRDYXB0dXJlQmFzZTY0Q29udGV4dCh2aWRlb09iaikpOwogICAgfSwKCiAgICBnZXRDYXB0dXJlQmFzZTY0Q29udGV4dDogZnVuY3Rpb24gZ2V0Q2FwdHVyZUJhc2U2NENvbnRleHQodmlkZW9PYmopIHsKICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgdmFyIGlkID0gY2FudmFzLmlkID0gIl9fY2FwdHVyZV92aWRlb18iICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgICAgIGNhbnZhcy53aWR0aCA9IHZpZGVvT2JqLnZpZGVvV2lkdGg7CiAgICAgICAgY2FudmFzLmhlaWdodCA9IHZpZGVvT2JqLnZpZGVvSGVpZ2h0OwoKICAgICAgICB2YXIgY2FudmFzMmRDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgY2FudmFzMmRDb250ZXh0LmRyYXdJbWFnZSh2aWRlb09iaiwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKCiAgICAgICAgdmFyIGJhc2U2NCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlcy9wbmcnKTsKICAgICAgICAvL2NvbnNvbGUubG9nKGJhc2U2NCk7CgogICAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9LAoKICAgIGNhcHR1cmVWaWRlbzogZnVuY3Rpb24gY2FwdHVyZVZpZGVvKHZpZGVvT2JqLCBzdG9yZUxvY2FsLCBmaWxlbmFtZSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIGJhc2U2NCA9IHNlbGYuZ2V0Q2FwdHVyZUJhc2U2NENvbnRleHQodmlkZW9PYmopOwoKICAgICAgICBpZiAoc3RvcmVMb2NhbCkgewogICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lIHx8ICJjYXB0dXJlXyIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgc2VsZi5kb3dubG9hZEZpbGUoZmlsZW5hbWUsIGJhc2U2NCk7CiAgICAgICAgICAgIC8vd2luZG93LmxvY2F0aW9uLmhyZWYgPSBiYXNlNjQ7CgogICAgICAgICAgICAvLyB2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICAgICAgICAgIC8vIGlmcmFtZS5pZCA9ICJfX2NhcHR1cmVfdmlkZW9fcGljX2RsX2lmcmFtZV8iICsgKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTsKICAgICAgICAgICAgLy8gaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIC8vZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpOwogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyBpZnJhbWUuc3JjID0gYmFzZTY0OwogICAgICAgICAgICAvLyAvL2lmcmFtZS5jb250ZW50V2luZG93LmxvY2F0aW9uLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJhc2U2NCk7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyAgICAgLy9kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7CiAgICAgICAgICAgIC8vIH0sIDUwKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9LAoKICAgIGNhcHR1cmVQaWN0dXJlUmVtb3RlOiBmdW5jdGlvbiBjYXB0dXJlUGljdHVyZVJlbW90ZShzdHJlYW1JZCwgcnNwQmFzZTY0UGljLCBzdWNjZXNzLCBmYWlsKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLl9fYXNzZXJ0Q3VycmVudCgpOwogICAgICAgIHZhciBhdHRlbmRlZSA9IHNlbGYuY3VycmVudDsKCiAgICAgICAgdmFyIGxpbmtlZFN0cmVhbSA9IGF0dGVuZGVlLl9saW5rZWRTdHJlYW1zW3N0cmVhbUlkXTsKICAgICAgICBpZiAoIWxpbmtlZFN0cmVhbSB8fCBsaW5rZWRTdHJlYW0ubG9jYXRlZCgpKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIm5vdCBleHNpdHMgb3IgbG9jYXRlLCBub3QgY29ubmVjdCIsIHN0cmVhbUlkKTsKICAgICAgICAgICAgdGhyb3cgc3RyZWFtSWQgKyAiIG5vdCBleHNpdHMgb3IgbG9jYXRlLCBub3QgY29ubmVjdCI7CiAgICAgICAgfQoKICAgICAgICB2YXIgYXJnID0gewogICAgICAgICAgICBvcDI6IDIwLAogICAgICAgICAgICBzdHJlYW1JZDogc3RyZWFtSWQsCiAgICAgICAgICAgIHBpYzogMSwKICAgICAgICAgICAgcnNwQmFzZTY0UGljOiByc3BCYXNlNjRQaWMgPT09IHRydWUKICAgICAgICB9OwoKICAgICAgICB2YXIgbWVzc2FnZSA9IGF0dGVuZGVlLm5ld01lc3NhZ2UoewogICAgICAgICAgICBvcDogMTAwMiwKICAgICAgICAgICAgbWVtSWQ6IGxpbmtlZFN0cmVhbS5vd25lci5pZCwKICAgICAgICAgICAgYXJnOiBKU09OLnN0cmluZ2lmeShhcmcpLAogICAgICAgICAgICBfcmVxT3BzOiBbMTAwMjA1XQogICAgICAgIH0pOwoKICAgICAgICBhdHRlbmRlZS5wb3N0TWVzc2FnZShtZXNzYWdlLCBmdW5jdGlvbiAocnNwKSB7CiAgICAgICAgICAgIGlmIChyc3AucmVzdWx0ICE9IDApIHsKICAgICAgICAgICAgICAgIHZhciBfZXZ0ID0gbmV3IF9fZXZlbnQuUmVtb3RlQ29udHJvbEZhaWwoeyBzdHJlYW06IGxpbmtlZFN0cmVhbSwgZmFpbGVkOiByc3AucmVzdWx0LCBjYXVzZTogcnNwLm1zZywgdHlwZTogImNhcHR1cmVfY29udHJvbCIgfSk7CiAgICAgICAgICAgICAgICBhdHRlbmRlZS5vbkV2ZW50KF9ldnQpOwogICAgICAgICAgICAgICAgZmFpbCAmJiBmYWlsKF9ldnQpOwoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICghcnNwQmFzZTY0UGljKSB7CiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghcnNwLmFyZykgewogICAgICAgICAgICAgICAgICAgIGZhaWwgJiYgZmFpbChuZXcgX19ldmVudC5SZW1vdGVDb250cm9sRmFpbCh7IHN0cmVhbTogbGlua2VkU3RyZWFtLCBmYWlsZWQ6IHJzcC5yZXN1bHQsIGNhdXNlOiAiTm90IGZvdW5kIGJhc2U2NCBwaWMiIH0pKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGFyZyA9IEpTT04ucGFyc2UocnNwLmFyZyk7CiAgICAgICAgICAgICAgICBzdWNjZXNzICYmIHN1Y2Nlc3MoYXJnLnBpYyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgem9vbVJlbW90ZTogZnVuY3Rpb24gem9vbVJlbW90ZShzdHJlYW1JZCwgbXVsdGlwbGVzLCBmYWlsLCBzdWNjZXNzKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLl9fYXNzZXJ0Q3VycmVudCgpOwogICAgICAgIHZhciBhdHRlbmRlZSA9IHNlbGYuY3VycmVudDsKCiAgICAgICAgdmFyIGxpbmtlZFN0cmVhbSA9IGF0dGVuZGVlLl9saW5rZWRTdHJlYW1zW3N0cmVhbUlkXTsKICAgICAgICBpZiAoIWxpbmtlZFN0cmVhbSB8fCBsaW5rZWRTdHJlYW0ubG9jYXRlZCgpKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIm5vdCBleHNpdHMgb3IgbG9jYXRlLCBub3QgY29ubmVjdCIsIHN0cmVhbUlkKTsKICAgICAgICAgICAgdGhyb3cgc3RyZWFtSWQgKyAiIG5vdCBleHNpdHMgb3IgbG9jYXRlLCBub3QgY29ubmVjdCI7CiAgICAgICAgfQoKICAgICAgICBsaW5rZWRTdHJlYW0uX3pvb20gfHwgKGxpbmtlZFN0cmVhbS5fem9vbSA9IDEpOwoKICAgICAgICB2YXIgX3pvb20gPSBsaW5rZWRTdHJlYW0uX3pvb20gKiBtdWx0aXBsZXM7CiAgICAgICAgaWYgKF96b29tIDwgMSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBsaW5rZWRTdHJlYW0uX3pvb20gPSBfem9vbTsKCiAgICAgICAgdmFyIGFyZyA9IHsKICAgICAgICAgICAgb3AyOiAyMCwKICAgICAgICAgICAgc3RyZWFtSWQ6IHN0cmVhbUlkLAogICAgICAgICAgICB6b29tOiBNYXRoLnJvdW5kKF96b29tICogMTAwMDApCiAgICAgICAgfTsKCiAgICAgICAgdmFyIG1lc3NhZ2UgPSBhdHRlbmRlZS5uZXdNZXNzYWdlKHsKICAgICAgICAgICAgb3A6IDEwMDIsCiAgICAgICAgICAgIG1lbUlkOiBsaW5rZWRTdHJlYW0ub3duZXIuaWQsCiAgICAgICAgICAgIGFyZzogSlNPTi5zdHJpbmdpZnkoYXJnKSwKICAgICAgICAgICAgX3JlcU9wczogWzEwMDIwMV0KICAgICAgICB9KTsKCiAgICAgICAgYXR0ZW5kZWUucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICB2YXIgX2V2dCA9IG5ldyBfX2V2ZW50LlJlbW90ZUNvbnRyb2xGYWlsKHsgc3RyZWFtOiBsaW5rZWRTdHJlYW0sIGZhaWxlZDogcnNwLnJlc3VsdCwgY2F1c2U6IHJzcC5tc2csIHR5cGU6ICJ6b29tX2NvbnRyb2wiIH0pOwogICAgICAgICAgICAgICAgYXR0ZW5kZWUub25FdmVudChfZXZ0KTsKICAgICAgICAgICAgICAgIGZhaWwgJiYgZmFpbChfZXZ0KTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2VzcygpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBfZ2V0UG9zaXRpb246IGZ1bmN0aW9uIGdldFBvc2l0aW9uKG9iaikgewogICAgICAgIHZhciB0b3BWYWx1ZSA9IDAsCiAgICAgICAgICAgIGxlZnRWYWx1ZSA9IDA7CiAgICAgICAgd2hpbGUgKG9iaikgewogICAgICAgICAgICBsZWZ0VmFsdWUgKz0gb2JqLm9mZnNldExlZnQ7CiAgICAgICAgICAgIHRvcFZhbHVlICs9IG9iai5vZmZzZXRUb3A7CiAgICAgICAgICAgIG9iaiA9IG9iai5vZmZzZXRQYXJlbnQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4geyBjbGllbnRYOiBsZWZ0VmFsdWUsIGNsaWVudFk6IHRvcFZhbHVlIH07CiAgICB9LAoKICAgIGV2ZW50WFlBdE1lZGlhOiBmdW5jdGlvbiBldmVudFhZQXRNZWRpYShldmVudFhZLCB2aWRlb1RhZykgewogICAgICAgIHZhciB2aWRlb1hZID0gX3V0aWwuZ2V0RG9tUGFnZVJlY3QodmlkZW9UYWcpOwoKICAgICAgICB2YXIgdmlkZW9XaWR0aCA9IHZpZGVvWFkud2lkdGgsCiAgICAgICAgICAgIHZpZGVvSGVpZ2h0ID0gdmlkZW9YWS5oZWlnaHQ7CiAgICAgICAgdmFyIG1lZGlhV2lkdGggPSB2aWRlb1RhZy52aWRlb1dpZHRoLAogICAgICAgICAgICBtZWRpYUhlaWdodCA9IHZpZGVvVGFnLnZpZGVvSGVpZ2h0OwoKICAgICAgICBpZiAobWVkaWFIZWlnaHQgLyBtZWRpYVdpZHRoID4gdmlkZW9IZWlnaHQgLyB2aWRlb1dpZHRoKSB7CiAgICAgICAgICAgIHZhciB0ID0gbWVkaWFXaWR0aCAvIG1lZGlhSGVpZ2h0OwogICAgICAgICAgICBtZWRpYUhlaWdodCA9IHZpZGVvSGVpZ2h0OwogICAgICAgICAgICBtZWRpYVdpZHRoID0gbWVkaWFIZWlnaHQgKiB0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciB0ID0gbWVkaWFIZWlnaHQgLyBtZWRpYVdpZHRoOwogICAgICAgICAgICBtZWRpYVdpZHRoID0gdmlkZW9XaWR0aDsKICAgICAgICAgICAgbWVkaWFIZWlnaHQgPSBtZWRpYVdpZHRoICogdDsKICAgICAgICB9CgogICAgICAgIHZhciBjbGlja1hZID0gZXZlbnRYWTsKCiAgICAgICAgdmFyIGlzUmFkaW9YLCBpc1JhZGlvWTsKICAgICAgICBpZiAoaXNSYWRpb1ggPSBfdXRpbC5pc0Zsb2F0KGNsaWNrWFkueCkpIHsKICAgICAgICAgICAgLy/mr5TnjocKICAgICAgICAgICAgY2xpY2tYWS54ID0gY2xpY2tYWS54ICogdmlkZW9XaWR0aDsKICAgICAgICB9CiAgICAgICAgaWYgKGlzUmFkaW9ZID0gX3V0aWwuaXNGbG9hdChjbGlja1hZLnkpKSB7CiAgICAgICAgICAgIC8v5q+U546HCiAgICAgICAgICAgIGNsaWNrWFkueSA9IGNsaWNrWFkueSAqIHZpZGVvSGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgaWYgKE1hdGguYWJzKGNsaWNrWFkueCkgPCAodmlkZW9XaWR0aCAtIG1lZGlhV2lkdGgpIC8gMiB8fCB2aWRlb1dpZHRoIC0gTWF0aC5hYnMoY2xpY2tYWS54KSA8ICh2aWRlb1dpZHRoIC0gbWVkaWFXaWR0aCkgLyAyKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKE1hdGguYWJzKGNsaWNrWFkueSkgPCAodmlkZW9IZWlnaHQgLSBtZWRpYUhlaWdodCkgLyAyIHx8IHZpZGVvSGVpZ2h0IC0gTWF0aC5hYnMoY2xpY2tYWS55KSA8ICh2aWRlb0hlaWdodCAtIG1lZGlhSGVpZ2h0KSAvIDIpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY2xpY2tYWS54ID0gY2xpY2tYWS54IDwgMCA/IE1hdGguZmxvb3IoY2xpY2tYWS54ICsgKHZpZGVvV2lkdGggLSBtZWRpYVdpZHRoKSAvIDIpIDogTWF0aC5mbG9vcihjbGlja1hZLnggLSAodmlkZW9XaWR0aCAtIG1lZGlhV2lkdGgpIC8gMik7CiAgICAgICAgY2xpY2tYWS55ID0gY2xpY2tYWS55IDwgMCA/IE1hdGguZmxvb3IoY2xpY2tYWS55ICsgKHZpZGVvSGVpZ2h0IC0gbWVkaWFIZWlnaHQpIC8gMikgOiBNYXRoLmZsb29yKGNsaWNrWFkueSAtICh2aWRlb0hlaWdodCAtIG1lZGlhSGVpZ2h0KSAvIDIpOwoKICAgICAgICBpZiAoaXNSYWRpb1gpIHsKICAgICAgICAgICAgY2xpY2tYWS54ID0gY2xpY2tYWS54IC8gbWVkaWFXaWR0aDsKICAgICAgICB9CiAgICAgICAgaWYgKGlzUmFkaW9ZKSB7CiAgICAgICAgICAgIGNsaWNrWFkueSA9IGNsaWNrWFkueSAvIG1lZGlhSGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsgeDogY2xpY2tYWS54LCB5OiBjbGlja1hZLnksIHdpZHRoOiBtZWRpYVdpZHRoLCBoZWlnaHQ6IG1lZGlhSGVpZ2h0IH07CiAgICB9LAoKICAgIGV2ZW50WFlBdFZpZGVvOiBmdW5jdGlvbiBldmVudFhZQXRWaWRlbyhtZWRpYVhZLCB2aWRlb1RhZykgewogICAgICAgIHZhciB2aWRlb1hZID0gX3V0aWwuZ2V0RG9tUGFnZVJlY3QodmlkZW9UYWcpOwoKICAgICAgICB2YXIgdmlkZW9XaWR0aCA9IHZpZGVvWFkud2lkdGgsCiAgICAgICAgICAgIHZpZGVvSGVpZ2h0ID0gdmlkZW9YWS5oZWlnaHQ7CiAgICAgICAgdmFyIG1lZGlhV2lkdGggPSB2aWRlb1RhZy52aWRlb1dpZHRoLAogICAgICAgICAgICBtZWRpYUhlaWdodCA9IHZpZGVvVGFnLnZpZGVvSGVpZ2h0OwoKICAgICAgICBpZiAobWVkaWFIZWlnaHQgLyBtZWRpYVdpZHRoID4gdmlkZW9IZWlnaHQgLyB2aWRlb1dpZHRoKSB7CiAgICAgICAgICAgIHZhciB0ID0gbWVkaWFXaWR0aCAvIG1lZGlhSGVpZ2h0OwogICAgICAgICAgICBtZWRpYUhlaWdodCA9IHZpZGVvSGVpZ2h0OwogICAgICAgICAgICBtZWRpYVdpZHRoID0gbWVkaWFIZWlnaHQgKiB0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciB0ID0gbWVkaWFIZWlnaHQgLyBtZWRpYVdpZHRoOwogICAgICAgICAgICBtZWRpYVdpZHRoID0gdmlkZW9XaWR0aDsKICAgICAgICAgICAgbWVkaWFIZWlnaHQgPSBtZWRpYVdpZHRoICogdDsKICAgICAgICB9CgogICAgICAgIHZhciBpc1JhZGlvWCwgaXNSYWRpb1k7CiAgICAgICAgaWYgKGlzUmFkaW9YID0gX3V0aWwuaXNGbG9hdChtZWRpYVhZLngpKSB7CiAgICAgICAgICAgIC8v5q+U546HCiAgICAgICAgICAgIG1lZGlhWFkueCA9IG1lZGlhWFkueCAqIG1lZGlhV2lkdGg7CiAgICAgICAgfQogICAgICAgIGlmIChpc1JhZGlvWSA9IF91dGlsLmlzRmxvYXQobWVkaWFYWS55KSkgewogICAgICAgICAgICAvL+avlOeOhwogICAgICAgICAgICBtZWRpYVhZLnkgPSBtZWRpYVhZLnkgKiBtZWRpYUhlaWdodDsKICAgICAgICB9CgogICAgICAgIG1lZGlhWFkueCA9IG1lZGlhWFkueCA8IDAgPyBNYXRoLmZsb29yKG1lZGlhWFkueCAtICh2aWRlb1dpZHRoIC0gbWVkaWFXaWR0aCkgLyAyKSA6IE1hdGguZmxvb3IobWVkaWFYWS54ICsgKHZpZGVvV2lkdGggLSBtZWRpYVdpZHRoKSAvIDIpOwogICAgICAgIG1lZGlhWFkueSA9IG1lZGlhWFkueSA8IDAgPyBNYXRoLmZsb29yKG1lZGlhWFkueSAtICh2aWRlb0hlaWdodCAtIG1lZGlhSGVpZ2h0KSAvIDIpIDogTWF0aC5mbG9vcihtZWRpYVhZLnkgKyAodmlkZW9IZWlnaHQgLSBtZWRpYUhlaWdodCkgLyAyKTsKCiAgICAgICAgaWYgKGlzUmFkaW9YKSB7CiAgICAgICAgICAgIG1lZGlhWFkueCA9IG1lZGlhWFkueCAvIHZpZGVvV2lkdGg7CiAgICAgICAgfQogICAgICAgIGlmIChpc1JhZGlvWSkgewogICAgICAgICAgICBtZWRpYVhZLnkgPSBtZWRpYVhZLnkgLyB2aWRlb0hlaWdodDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBtZWRpYVhZOwogICAgfSwKCiAgICBnZXRDbGlja1hZOiBmdW5jdGlvbiBnZXRDbGlja1hZKHZpZGVvVGFnLCBjbGlja0V2ZW50KSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgZSA9IGNsaWNrRXZlbnQgfHwgd2luZG93LmV2ZW50OwogICAgICAgIHZhciBzY3JvbGxYID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgICAgIHZhciBzY3JvbGxZID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICB2YXIgeCA9IGUucGFnZVggfHwgZS5jbGllbnRYICsgc2Nyb2xsWDsKICAgICAgICB2YXIgeSA9IGUucGFnZVkgfHwgZS5jbGllbnRZICsgc2Nyb2xsWTsKCiAgICAgICAgdmFyIHh5ID0gc2VsZi5fZ2V0UG9zaXRpb24odmlkZW9UYWcpOwoKICAgICAgICBfbG9nZ2VyLmluZm8oIlZpZGVvIHRhZyBwb3NpdGlvbiAiLCB4eS5jbGllbnRYLCAiOiIsIHh5LmNsaWVudFkpOwoKICAgICAgICB2YXIgbWVkaWFXaWR0aCA9IHZpZGVvVGFnLnZpZGVvV2lkdGg7CiAgICAgICAgdmFyIG1lZGlhSGVpZ2h0ID0gdmlkZW9UYWcudmlkZW9IZWlnaHQ7CgogICAgICAgIGlmIChtZWRpYUhlaWdodCAvIG1lZGlhV2lkdGggPiB2aWRlb1RhZy5vZmZzZXRIZWlnaHQgLyB2aWRlb1RhZy5vZmZzZXRXaWR0aCkgewogICAgICAgICAgICB2YXIgdCA9IG1lZGlhV2lkdGggLyBtZWRpYUhlaWdodDsKICAgICAgICAgICAgbWVkaWFIZWlnaHQgPSB2aWRlb1RhZy5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICAgIG1lZGlhV2lkdGggPSBtZWRpYUhlaWdodCAqIHQ7CgogICAgICAgICAgICB4eS5jbGllbnRYICs9ICh2aWRlb1RhZy5vZmZzZXRXaWR0aCAtIG1lZGlhV2lkdGgpIC8gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgdCA9IG1lZGlhSGVpZ2h0IC8gbWVkaWFXaWR0aDsKICAgICAgICAgICAgbWVkaWFXaWR0aCA9IHZpZGVvVGFnLm9mZnNldFdpZHRoOwogICAgICAgICAgICBtZWRpYUhlaWdodCA9IG1lZGlhV2lkdGggKiB0OwoKICAgICAgICAgICAgeHkuY2xpZW50WSArPSAodmlkZW9UYWcub2Zmc2V0SGVpZ2h0IC0gbWVkaWFIZWlnaHQpIC8gMjsKICAgICAgICB9CiAgICAgICAgX2xvZ2dlci5pbmZvKCJNZWRpYSBwb3NpdGlvbiAiLCB4eS5jbGllbnRYLCAiOiIsIHh5LmNsaWVudFkpOwogICAgICAgIF9sb2dnZXIuaW5mbygiTWVkaWEgeHkgIiwgbWVkaWFXaWR0aCwgIjoiLCBtZWRpYUhlaWdodCk7CiAgICAgICAgX2xvZ2dlci5pbmZvKCJDbGljayBwb3NpdGlvbiAiLCB4LCAiOiIsIHkpOwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtZWRpYVdpZHRoOiBtZWRpYVdpZHRoLAogICAgICAgICAgICBtZWRpYUhlaWdodDogbWVkaWFIZWlnaHQsCiAgICAgICAgICAgIHg6IHggLSB4eS5jbGllbnRYLAogICAgICAgICAgICB5OiB5IC0geHkuY2xpZW50WQogICAgICAgIH07CiAgICB9LAoKICAgIGZvY3VzRXhwb1JlbW90ZTogZnVuY3Rpb24gZm9jdXNFeHBvUmVtb3RlKHN0cmVhbUlkLCB2aWRlb1RhZywgY2xpY2tFdmVudCwgZmFpbCwgc3VjY2VzcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIGUgPSBjbGlja0V2ZW50IHx8IHdpbmRvdy5ldmVudDsKICAgICAgICB2YXIgc2Nyb2xsWCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDsKICAgICAgICB2YXIgc2Nyb2xsWSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgICAgdmFyIHggPSBlLnBhZ2VYIHx8IGUuY2xpZW50WCArIHNjcm9sbFg7CiAgICAgICAgdmFyIHkgPSBlLnBhZ2VZIHx8IGUuY2xpZW50WSArIHNjcm9sbFk7CgogICAgICAgIHZhciB4eSA9IHNlbGYuX2dldFBvc2l0aW9uKHZpZGVvVGFnKTsKCiAgICAgICAgX2xvZ2dlci5pbmZvKCJWaWRlbyB0YWcgcG9zaXRpb24gIiwgeHkuY2xpZW50WCwgIjoiLCB4eS5jbGllbnRZKTsKCiAgICAgICAgdmFyIG1lZGlhV2lkdGggPSB2aWRlb1RhZy52aWRlb1dpZHRoOwogICAgICAgIHZhciBtZWRpYUhlaWdodCA9IHZpZGVvVGFnLnZpZGVvSGVpZ2h0OwoKICAgICAgICBpZiAobWVkaWFIZWlnaHQgLyBtZWRpYVdpZHRoID4gdmlkZW9UYWcub2Zmc2V0SGVpZ2h0IC8gdmlkZW9UYWcub2Zmc2V0V2lkdGgpIHsKICAgICAgICAgICAgdmFyIHQgPSBtZWRpYVdpZHRoIC8gbWVkaWFIZWlnaHQ7CiAgICAgICAgICAgIG1lZGlhSGVpZ2h0ID0gdmlkZW9UYWcub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICBtZWRpYVdpZHRoID0gbWVkaWFIZWlnaHQgKiB0OwoKICAgICAgICAgICAgeHkuY2xpZW50WCArPSAodmlkZW9UYWcub2Zmc2V0V2lkdGggLSBtZWRpYVdpZHRoKSAvIDI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHQgPSBtZWRpYUhlaWdodCAvIG1lZGlhV2lkdGg7CiAgICAgICAgICAgIG1lZGlhV2lkdGggPSB2aWRlb1RhZy5vZmZzZXRXaWR0aDsKICAgICAgICAgICAgbWVkaWFIZWlnaHQgPSBtZWRpYVdpZHRoICogdDsKCiAgICAgICAgICAgIHh5LmNsaWVudFkgKz0gKHZpZGVvVGFnLm9mZnNldEhlaWdodCAtIG1lZGlhSGVpZ2h0KSAvIDI7CiAgICAgICAgfQogICAgICAgIF9sb2dnZXIuaW5mbygiTWVkaWEgcG9zaXRpb24gIiwgeHkuY2xpZW50WCwgIjoiLCB4eS5jbGllbnRZKTsKICAgICAgICBfbG9nZ2VyLmluZm8oIk1lZGlhIHh5ICIsIG1lZGlhV2lkdGgsICI6IiwgbWVkaWFIZWlnaHQpOwogICAgICAgIF9sb2dnZXIuaW5mbygiQ2xpY2sgcG9zaXRpb24gIiwgeCwgIjoiLCB5KTsKCiAgICAgICAgc2VsZi5fZm9jdXNFeHBvKHN0cmVhbUlkLCBtZWRpYVdpZHRoLCBtZWRpYUhlaWdodCwgeCAtIHh5LmNsaWVudFgsIHkgLSB4eS5jbGllbnRZLCBmYWlsLCBzdWNjZXNzKTsKICAgIH0sCgogICAgX2ZvY3VzRXhwbzogZnVuY3Rpb24gX2ZvY3VzRXhwbyhzdHJlYW1JZCwgd2lkdGgsIGhlaWdodCwgeCwgeSwgZmFpbCwgc3VjY2VzcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKHggPD0gMCB8fCB4ID4gd2lkdGgpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoeSA8PSAwIHx8IHkgPiBoZWlnaHQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5fX2Fzc2VydEN1cnJlbnQoKTsKICAgICAgICB2YXIgYXR0ZW5kZWUgPSBzZWxmLmN1cnJlbnQ7CgogICAgICAgIHZhciBsaW5rZWRTdHJlYW0gPSBhdHRlbmRlZS5fbGlua2VkU3RyZWFtc1tzdHJlYW1JZF07CiAgICAgICAgaWYgKCFsaW5rZWRTdHJlYW0gfHwgbGlua2VkU3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJub3QgZXhzaXRzIG9yIGxvY2F0ZSwgbm90IGNvbm5lY3QiLCBzdHJlYW1JZCk7CiAgICAgICAgICAgIHRocm93IHN0cmVhbUlkICsgIiBub3QgZXhzaXRzIG9yIGxvY2F0ZSwgbm90IGNvbm5lY3QiOwogICAgICAgIH0KCiAgICAgICAgdmFyIGFyZyA9IHsKICAgICAgICAgICAgb3AyOiAyMCwKICAgICAgICAgICAgc3RyZWFtSWQ6IHN0cmVhbUlkLAogICAgICAgICAgICBmb2N1czogMSwKICAgICAgICAgICAgZXhwbzogMSwKICAgICAgICAgICAgeDogd2lkdGggPT09IDAgPyAwIDogTWF0aC5yb3VuZCh4ICogMTAwMDAgLyB3aWR0aCksCiAgICAgICAgICAgIHk6IGhlaWdodCA9PT0gMCA/IDAgOiBNYXRoLnJvdW5kKHkgKiAxMDAwMCAvIGhlaWdodCkKICAgICAgICB9OwoKICAgICAgICB2YXIgbWVzc2FnZSA9IGF0dGVuZGVlLm5ld01lc3NhZ2UoewogICAgICAgICAgICBvcDogMTAwMiwKICAgICAgICAgICAgbWVtSWQ6IGxpbmtlZFN0cmVhbS5vd25lci5pZCwKICAgICAgICAgICAgYXJnOiBKU09OLnN0cmluZ2lmeShhcmcpLAogICAgICAgICAgICBfcmVxT3BzOiBbMTAwMjAyLCAxMDAyMDNdCiAgICAgICAgfSk7CgogICAgICAgIGF0dGVuZGVlLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICAgICAgaWYgKHJzcC5yZXN1bHQgIT0gMCkgewogICAgICAgICAgICAgICAgdmFyIF9ldnQgPSBuZXcgX19ldmVudC5SZW1vdGVDb250cm9sRmFpbCh7IHN0cmVhbTogbGlua2VkU3RyZWFtLCBmYWlsZWQ6IHJzcC5yZXN1bHQsIGNhdXNlOiByc3AubXNnLCB0eXBlOiAiZm9jdXNfZXhwb19jb250cm9sIiB9KTsKICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uRXZlbnQoX2V2dCk7CiAgICAgICAgICAgICAgICBmYWlsICYmIGZhaWwoX2V2dCk7CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgX3JlcHVibGlzaDogZnVuY3Rpb24gX3JlcHVibGlzaChwdWJTLCBzdWNjZXNzLCBlcnJvcikgewogICAgICAgIF9sb2dnZXIuaW5mbygiUmVwdWJsaXNoIHN0cmVhbS4gaXQgPSAiLCBwdWJTLmlkKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgd2VicnRjOwogICAgICAgIGlmIChwdWJTLmlkKSB7CiAgICAgICAgICAgIHZhciBydGNJZCA9IHNlbGYuY3VycmVudC5fX2dldFdlYnJ0Y0ZvcihwdWJTLmlkKTsKICAgICAgICAgICAgcnRjSWQgJiYgc2VsZi5jdXJyZW50LmNsb3NlV2VicnRjKHJ0Y0lkLCB0cnVlKTsKCiAgICAgICAgICAgIHdlYnJ0YyA9IHNlbGYuY3VycmVudC5fZ2V0V2VicnRjKHB1YlMuaWQpOwogICAgICAgIH0KCiAgICAgICAgdmFyIF9wdWJTOwoKICAgICAgICAvLyBpZihlbWVkaWEuaXNTYWZhcmkpewogICAgICAgIC8vICAgICBlbWVkaWEuZW5hYmxlQXVkaW9UcmFja3MoZmFsc2UpOwogICAgICAgIC8vICAgICBlbWVkaWEuZW5hYmxlVmlkZW9UcmFja3MoZmFsc2UpOwogICAgICAgIC8vIH0KCiAgICAgICAgc3dpdGNoIChwdWJTLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy9lbWVkaWEuaXNTYWZhcmkgfHwgZW1lZGlhLnN0b3BUcmFja3MocHViUy5fbG9jYWxNZWRpYVN0cmVhbSk7CiAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcFRyYWNrcyhwdWJTLl9sb2NhbE1lZGlhU3RyZWFtKTsKICAgICAgICAgICAgICAgIF9wdWJTID0gbmV3IHNlbGYuQVZQdWJzdHJlYW0ocHViUyk7CgogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIC8vZW1lZGlhLmlzU2FmYXJpIHx8IGVtZWRpYS5zdG9wQW5kUmVtb3ZlQXVkaW9UcmFja3MocHViUy5fbG9jYWxNZWRpYVN0cmVhbSk7CiAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcEFuZFJlbW92ZUF1ZGlvVHJhY2tzKHB1YlMuX2xvY2FsTWVkaWFTdHJlYW0pOwogICAgICAgICAgICAgICAgX3B1YlMgPSBuZXcgc2VsZi5TaGFyZURlc2t0b3BQdWJzdHJlYW0ocHViUyk7CgogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIC8vZW1lZGlhLmlzU2FmYXJpIHx8IGVtZWRpYS5zdG9wVHJhY2tzKHB1YlMuX2xvY2FsTWVkaWFTdHJlYW0pOwogICAgICAgICAgICAgICAgZW1lZGlhLnN0b3BUcmFja3MocHViUy5fbG9jYWxNZWRpYVN0cmVhbSk7CiAgICAgICAgICAgICAgICBfcHViUyA9IG5ldyBzZWxmLkF1ZGlvTWl4ZXJQdWJzdHJlYW0ocHViUyk7CgogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi5vcGVuVXNlck1lZGlhKF9wdWJTKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHB1YlMubG9jYWxTdHJlYW0gPSBfcHViUy5sb2NhbFN0cmVhbTsKCiAgICAgICAgICAgICAgICBwdWJTLmlzUmVwdWJsaXNoZWQgPSB0cnVlOwoKICAgICAgICAgICAgICAgIHB1YlMub3B0aW1hbFZpZGVvQ29kZWNzID0gcHViUy5vcHRpbWFsVmlkZW9Db2RlY3MgfHwgd2VicnRjICYmIHdlYnJ0Yy5vcHRpbWFsVmlkZW9Db2RlY3M7CiAgICAgICAgICAgICAgICBzZWxmLnB1c2gocHViUywgc3VjY2VzcywgZXJyb3IpOwogICAgICAgICAgICB9LCBlcnJvcik7CiAgICAgICAgfSwgMTAwKTsKCiAgICAgICAgLy8gaWYoZW1lZGlhLmlzU2FmYXJpKXsKICAgICAgICAvLyAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gICAgICAgICBzd2l0Y2gocHViUy50eXBlKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgY2FzZSAwOgogICAgICAgIC8vICAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcFRyYWNrcyhwdWJTLl9sb2NhbE1lZGlhU3RyZWFtKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgLy8gICAgICAgICAgICAgY2FzZSAxOgogICAgICAgIC8vICAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcEFuZFJlbW92ZUF1ZGlvVHJhY2tzKHB1YlMuX2xvY2FsTWVkaWFTdHJlYW0pOwogICAgICAgIC8vICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAvLyAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGVtZWRpYS5zdG9wVHJhY2tzKHB1YlMuX2xvY2FsTWVkaWFTdHJlYW0pOwogICAgICAgIC8vICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAvLyAgICAgfSwgMTQwMCk7CiAgICAgICAgLy8gfQogICAgfSwKCiAgICBjaGFuYWdlQ2FtZXJhOiBmdW5jdGlvbiBjaGFuYWdlQ2FtZXJhKHB1YlMsIGVycm9yLCBzdWNjZXNzKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAodHlwZW9mIHB1YlMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIC8vaWQKICAgICAgICAgICAgcHViUyA9IHNlbGYuY3VycmVudC5fY2FjaGVTdHJlYW1zW3B1YlNdOwogICAgICAgIH0gZWxzZSBpZiAocHViUy5pZCkgewogICAgICAgICAgICBwdWJTID0gc2VsZi5jdXJyZW50Ll9jYWNoZVN0cmVhbXNbcHViUy5pZF07CiAgICAgICAgfQoKICAgICAgICBpZiAocHViUy52b2ZmKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiU3RyZWFtIGlkID0gIiwgcHViUy5pZCwgIiB2b2ZmLCBkbyBub3QgY2hhbmFnZSBjYW1lcmEuIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlbGYuZ2V0TWVkaWFEZXZpY2VzKCJ2aWRlb2lucHV0IiwgZnVuY3Rpb24gKGRldmljZXMpIHsKICAgICAgICAgICAgaWYgKGRldmljZXMubGVuZ3RoIDw9IDEpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiT25seSB2aWRlbyBpbnB1dC4gbm90IGNoYW5hZ2UiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGNhbWVyYUluZGV4ID0gcHViUy5fY2FtZXJhSW5kZXggPT09IG51bGwgfHwgcHViUy5fY2FtZXJhSW5kZXggPT09IHVuZGVmaW5lZCA/IDAgOiBwdWJTLl9jYW1lcmFJbmRleDsKICAgICAgICAgICAgd2hpbGUgKGNhbWVyYUluZGV4IDwgZGV2aWNlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHZhciBsYXN0RGV2aWNlID0gZGV2aWNlc1tjYW1lcmFJbmRleF07CiAgICAgICAgICAgICAgICBjYW1lcmFJbmRleCA9IChjYW1lcmFJbmRleCArIDEpICUgZGV2aWNlcy5sZW5ndGg7CgogICAgICAgICAgICAgICAgdmFyIGRldmljZSA9IGRldmljZXNbY2FtZXJhSW5kZXhdOwoKICAgICAgICAgICAgICAgIHZhciB2aWRlb1RyYWNrcyA9IHB1YlMuX2xvY2FsTWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTsKICAgICAgICAgICAgICAgIGlmICghdmlkZW9UcmFja3MgfHwgdmlkZW9UcmFja3MubGVuZ3RoID09PSAwIHx8IGRldmljZS5sYWJlbCAhPSB2aWRlb1RyYWNrc1swXS5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgZGV2aWNlID0gZGV2aWNlc1tjYW1lcmFJbmRleF07CiAgICAgICAgICAgIHZhciBkZXZpY2VJbmZvTGFiZWwgPSBkZXZpY2UubGFiZWw7CgogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlN0cmVhbSAiLCBwdWJTLmlkLCBsYXN0RGV2aWNlLmxhYmVsLCAiPj4iLCBkZXZpY2VJbmZvTGFiZWwpOwoKICAgICAgICAgICAgcHViUy5fY2FtZXJhSW5kZXggPSBjYW1lcmFJbmRleDsKCiAgICAgICAgICAgIHB1YlMuY29uc3RhaW50cyB8fCAocHViUy5jb25zdGFpbnRzID0ge30pOwogICAgICAgICAgICBwdWJTLmNvbnN0YWludHMudmlkZW8gPSBfdHlwZW9mKHB1YlMuY29uc3RhaW50cy52aWRlbykgPT09ICJvYmplY3QiID8gcHViUy5jb25zdGFpbnRzLnZpZGVvIDoge307CiAgICAgICAgICAgIHB1YlMuY29uc3RhaW50cy52aWRlby5kZXZpY2VJZCA9IHsgZXhhY3Q6IGRldmljZS5kZXZpY2VJZCB9OwoKICAgICAgICAgICAgc2VsZi5fcmVwdWJsaXNoKHB1YlMsIGZ1bmN0aW9uIChtZWRpYVN0cmVhbSkgewogICAgICAgICAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKG1lZGlhU3RyZWFtKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKF9ldnQpIHsKICAgICAgICAgICAgICAgIGlmIChfZXZ0IGluc3RhbmNlb2YgZW1lZGlhLmV2ZW50Lk9wZW5NZWRpYUVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgLy/orr7lpIflj6/og73kuI3mlK/mjIHvvIzmr5TlpoIg5rKh5pyJ5pGE5YOP5aS077yM5oiWIOiiq+emgeatouiuv+mXruaRhOWDj+WktAogICAgICAgICAgICAgICAgICAgIHB1YlMuY29uc3RhaW50cy52aWRlbyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGVycm9yICYmIGVycm9yKF9ldnQpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LCBlcnJvcik7CiAgICB9LAoKICAgIF9yZXB1Ymxpc2hCeVZpZGVvQ29uc3RhaW50czogZnVuY3Rpb24gX3JlcHVibGlzaEJ5VmlkZW9Db25zdGFpbnRzKHB1YlMsIHZpZGVvQ29uc3RhaW50cywgZXJyb3IsIHN1Y2Nlc3MpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmICh0eXBlb2YgcHViUyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgLy9pZAogICAgICAgICAgICBwdWJTID0gc2VsZi5jdXJyZW50Ll9jYWNoZVN0cmVhbXNbcHViU107CiAgICAgICAgfQoKICAgICAgICBwdWJTID0gXy5leHRlbmQoe30sIHB1YlMpOwoKICAgICAgICB2YXIgb2xkVm9mZiA9IHB1YlMudm9mZjsKICAgICAgICB2YXIgdm9mZiA9IHB1YlMudm9mZiA9IHZpZGVvQ29uc3RhaW50cyA/IDAgOiAxOwoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbmREaXNhYmxlZCgpIHsKICAgICAgICAgICAgaWYgKHZvZmYgPT09IG9sZFZvZmYpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygicHVic3RyZWFtIHZvZmYgbm90IGNoYW5hZ2UuIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW1lZGlhLmVuYWJsZVZpZGVvVHJhY2tzKHB1YlMuZ2V0TWVkaWFTdHJlYW0oKSwgIXZvZmYpOwogICAgICAgICAgICBzZWxmLmN1cnJlbnQgJiYgc2VsZi5jdXJyZW50LnZvZmYocHViUywgdm9mZik7CiAgICAgICAgfQoKICAgICAgICBpZiAoXy5pc09iamVjdCh2aWRlb0NvbnN0YWludHMpICYmICFfLmlzRXF1YWwocHViUy5jb25zdGFpbnRzLnZpZGVvLCB2aWRlb0NvbnN0YWludHMpIHx8IHZpZGVvQ29uc3RhaW50cyAmJiAhcHViUy5jb25zdGFpbnRzLnZpZGVvKSB7CiAgICAgICAgICAgIHB1YlMuY29uc3RhaW50cy52aWRlbyA9IHZpZGVvQ29uc3RhaW50czsKICAgICAgICAgICAgc2VsZi5fcmVwdWJsaXNoKHB1YlMsIGZ1bmN0aW9uIChtZWRpYVN0cmVhbSkgewogICAgICAgICAgICAgICAgdXBkYXRlQW5kRGlzYWJsZWQoKTsKICAgICAgICAgICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2VzcyhtZWRpYVN0cmVhbSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChfZXZ0KSB7CiAgICAgICAgICAgICAgICBpZiAoX2V2dCBpbnN0YW5jZW9mIGVtZWRpYS5ldmVudC5PcGVuTWVkaWFFcnJvcikgewogICAgICAgICAgICAgICAgICAgIC8v6K6+5aSH5Y+v6IO95LiN5pSv5oyB77yM5q+U5aaCIOayoeacieaRhOWDj+WktO+8jOaIliDooqvnpoHmraLorr/pl67mkYTlg4/lpLQKICAgICAgICAgICAgICAgICAgICBwdWJTLmNvbnN0YWludHMudmlkZW8gPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlcnJvciAmJiBlcnJvcihfZXZ0KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB1cGRhdGVBbmREaXNhYmxlZCgpOwogICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2VzcyhwdWJTLmdldE1lZGlhU3RyZWFtKCkpOwogICAgfSwKCiAgICB2b2ZmOiBmdW5jdGlvbiB2b2ZmKHB1YlMsIF92b2ZmLCBlcnJvciwgc3VjY2VzcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKHR5cGVvZiBwdWJTID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAvL2lkCiAgICAgICAgICAgIHB1YlMgPSBzZWxmLmN1cnJlbnQuX2NhY2hlU3RyZWFtc1twdWJTXTsKICAgICAgICB9CgogICAgICAgIHZhciBvbGRWb2ZmID0gcHViUy52b2ZmOwogICAgICAgIF92b2ZmID0gX3ZvZmYgPyAxIDogMDsKICAgICAgICBwdWJTLnZvZmYgPSBfdm9mZjsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQW5kRGlzYWJsZWQoKSB7CiAgICAgICAgICAgIGlmIChfdm9mZiA9PSBvbGRWb2ZmKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmluZm8oInB1YnN0cmVhbSB2b2ZmIG5vdCBjaGFuYWdlLiIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVtZWRpYS5lbmFibGVWaWRlb1RyYWNrcyhwdWJTLmdldE1lZGlhU3RyZWFtKCksICFfdm9mZik7CiAgICAgICAgICAgIHNlbGYuY3VycmVudCAmJiBzZWxmLmN1cnJlbnQudm9mZihwdWJTLCBfdm9mZik7CiAgICAgICAgfQoKICAgICAgICBpZiAoIV92b2ZmICYmIHB1YlMuY29uc3RhaW50cyAmJiAhcHViUy5jb25zdGFpbnRzLnZpZGVvKSB7CiAgICAgICAgICAgIC8vZXJyb3IgJiYgZXJyb3IoIldoZW4gcHViLiBvbmx5IGF1ZGlvLCB2b2ZmIGludmFsaWRhdGUiKTsKICAgICAgICAgICAgLy90aHJvdyAiV2hlbiBwdWIuIG9ubHkgYXVkaW8sIHZvZmYgaW52YWxpZGF0ZSI7CgogICAgICAgICAgICB2YXIgcHJlVmlkZW8gPSBwdWJTLmNvbnN0YWludHMudmlkZW87CgogICAgICAgICAgICBwdWJTLmNvbnN0YWludHMudmlkZW8gPSB0cnVlOwogICAgICAgICAgICBzZWxmLl9yZXB1Ymxpc2gocHViUywgZnVuY3Rpb24gKG1lZGlhU3RyZWFtKSB7CiAgICAgICAgICAgICAgICB1cGRhdGVBbmREaXNhYmxlZCgpOwogICAgICAgICAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKG1lZGlhU3RyZWFtKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKF9ldnQpIHsKICAgICAgICAgICAgICAgIGlmIChfZXZ0IGluc3RhbmNlb2YgZW1lZGlhLmV2ZW50Lk9wZW5NZWRpYUVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgLy/orr7lpIflj6/og73kuI3mlK/mjIHvvIzmr5TlpoIg5rKh5pyJ5pGE5YOP5aS077yM5oiWIOiiq+emgeatouiuv+mXruaRhOWDj+WktAogICAgICAgICAgICAgICAgICAgIHB1YlMuY29uc3RhaW50cy52aWRlbyA9IHByZVZpZGVvOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGVycm9yICYmIGVycm9yKF9ldnQpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHVwZGF0ZUFuZERpc2FibGVkKCk7CiAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKHB1YlMuZ2V0TWVkaWFTdHJlYW0oKSk7CiAgICB9LAoKICAgIGFvZmY6IGZ1bmN0aW9uIGFvZmYocHViUywgX2FvZmYsIGVycm9yLCBzdWNjZXNzKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAodHlwZW9mIHB1YlMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIC8vaWQKICAgICAgICAgICAgcHViUyA9IHNlbGYuY3VycmVudC5fY2FjaGVTdHJlYW1zW3B1YlNdOwogICAgICAgIH0KCiAgICAgICAgdmFyIG9sZEFvZmYgPSBwdWJTLmFvZmY7CiAgICAgICAgX2FvZmYgPSBfYW9mZiA/IDEgOiAwOwogICAgICAgIHB1YlMuYW9mZiA9IF9hb2ZmOwoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbmREaXNhYmxlZCgpIHsKICAgICAgICAgICAgaWYgKF9hb2ZmID09IG9sZEFvZmYpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygicHVic3RyZWFtIGFvZmYgbm90IGNoYW5hZ2UuIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGVtZWRpYS5lbmFibGVBdWRpb1RyYWNrcyhwdWJTLmdldE1lZGlhU3RyZWFtKCksICFfYW9mZik7CiAgICAgICAgICAgIHNlbGYuY3VycmVudCAmJiBzZWxmLmN1cnJlbnQuYW9mZihwdWJTLCBfYW9mZik7CiAgICAgICAgfQoKICAgICAgICBpZiAoIV9hb2ZmICYmIHB1YlMuY29uc3RhaW50cyAmJiAhcHViUy5jb25zdGFpbnRzLmF1ZGlvKSB7CiAgICAgICAgICAgIC8vIGVycm9yICYmIGVycm9yKCJXaGVuIHB1Yi4gb25seSB2aWRlbywgYW9mZiBpbnZhbGlkYXRlIik7CiAgICAgICAgICAgIC8vIHRocm93ICJXaGVuIHB1Yi4gb25seSB2aWRlbywgYW9mZiBpbnZhbGlkYXRlIjsKCiAgICAgICAgICAgIHZhciBwcmVBdWRpbyA9IHB1YlMuY29uc3RhaW50cy5hdWRpbzsKCiAgICAgICAgICAgIHB1YlMuY29uc3RhaW50cy5hdWRpbyA9IHRydWU7CiAgICAgICAgICAgIHNlbGYuX3JlcHVibGlzaChwdWJTLCBmdW5jdGlvbiAobWVkaWFTdHJlYW0pIHsKICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERpc2FibGVkKCk7CiAgICAgICAgICAgICAgICBzdWNjZXNzICYmIHN1Y2Nlc3MobWVkaWFTdHJlYW0pOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoX2V2dCkgewogICAgICAgICAgICAgICAgaWYgKF9ldnQgaW5zdGFuY2VvZiBlbWVkaWEuZXZlbnQuT3Blbk1lZGlhRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAvL+iuvuWkh+WPr+iDveS4jeaUr+aMge+8jOavlOWmgiDmsqHmnInmkYTlg4/lpLTvvIzmiJYg6KKr56aB5q2i6K6/6Zeu5pGE5YOP5aS0CiAgICAgICAgICAgICAgICAgICAgcHViUy5jb25zdGFpbnRzLmF1ZGlvID0gcHJlQXVkaW87CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZXJyb3IgJiYgZXJyb3IoX2V2dCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdXBkYXRlQW5kRGlzYWJsZWQoKTsKICAgICAgICBzdWNjZXNzICYmIHN1Y2Nlc3MocHViUy5nZXRNZWRpYVN0cmVhbSgpKTsKICAgIH0sCgogICAgaWNlaW5nOiBmdW5jdGlvbiBpY2Vpbmcoc3RyZWFtSWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHJldHVybiBfdXRpbC5pc1BsYWluT2JqZWN0KHNlbGYuY3VycmVudC5fbGlua2VkU3RyZWFtc1tzdHJlYW1JZF0pOwogICAgfSwKCiAgICByZWNvcmRpbmc6IGZ1bmN0aW9uIHJlY29yZGluZyhzdHJlYW1JZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgcmV0dXJuIF91dGlsLmlzUGxhaW5PYmplY3Qoc2VsZi5jdXJyZW50Ll9yZWNvcmRzW3N0cmVhbUlkXSk7CiAgICB9LAoKICAgIHN0YXJ0UmVjb3JkOiBmdW5jdGlvbiBzdGFydFJlY29yZChzdHJlYW1JZCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBfc3RyZWFtID0gc2VsZi5jdXJyZW50Ll9saW5rZWRTdHJlYW1zW3N0cmVhbUlkXTsKICAgICAgICBpZiAoIV9zdHJlYW0pIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigibm90IGF0IGxpbmtlZCBzdHJlYW1zIiwgc3RyZWFtSWQpOwogICAgICAgICAgICB0aHJvdyBzdHJlYW1JZCArICIgbm90IGF0IGxpbmtlZCBzdHJlYW1zIjsKICAgICAgICB9CiAgICAgICAgaWYgKCFfc3RyZWFtLl93ZWJydGMpIHsKICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5jdXJyZW50LnN0YXJ0UmVjb3JkKF9zdHJlYW0sIGNhbGxiYWNrKTsKICAgIH0sCgogICAgc3RvcFJlY29yZDogZnVuY3Rpb24gc3RvcFJlY29yZChzdHJlYW1JZCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBfc3RyZWFtID0gc2VsZi5jdXJyZW50Ll9yZWNvcmRzW3N0cmVhbUlkXTsKICAgICAgICBpZiAoIV9zdHJlYW0pIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigibm90IGF0IHJlY29yZGluZyBzdHJlYW1zIiwgc3RyZWFtSWQpOwogICAgICAgICAgICB0aHJvdyBzdHJlYW1JZCArICIgbm90IGF0IHJlY29yZGluZyBzdHJlYW1zIjsKICAgICAgICB9CgogICAgICAgIHNlbGYuY3VycmVudC5zdG9wUmVjb3JkKF9zdHJlYW0sIGNhbGxiYWNrKTsKICAgIH0sCgogICAgZ2V0Q3VycmVudE1lbWJlcnM6IGZ1bmN0aW9uIGdldEN1cnJlbnRNZW1iZXJzKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICByZXR1cm4gc2VsZi5jdXJyZW50LmdldEN1cnJlbnRNZW1iZXJzKCk7CiAgICB9LAoKICAgIF9vbkNhcHR1cmVQaWN0dXJlOiBmdW5jdGlvbiBfb25DYXB0dXJlUGljdHVyZShldnQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciByc3BCYXNlNjRQaWMgPSBldnQuYXJnLnJzcEJhc2U2NFBpYzsKICAgICAgICB2YXIgc3RyZWFtSWQgPSBldnQuYXJnLnN0cmVhbUlkOwogICAgICAgIHZhciBzdHJlYW0gPSBzZWxmLmN1cnJlbnQuX2NhY2hlU3RyZWFtc1tzdHJlYW1JZF07CgogICAgICAgIHZhciBiYXNlNjQ7CiAgICAgICAgaWYgKHJzcEJhc2U2NFBpYykgewogICAgICAgICAgICB2YXIgaHRtbFZpZGVvOwogICAgICAgICAgICBpZiAodHlwZW9mIHNlbGYuZ2V0SFRNTFZpZGVvICE9PSAiZnVuY3Rpb24iIHx8ICEoaHRtbFZpZGVvID0gc2VsZi5nZXRIVE1MVmlkZW8oc3RyZWFtSWQpKSkgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJOb3Qgc3VwcG9ydCBjYXB0dXJlIHBpY3R1cmUuIGNhdXNlZCBieSBodG1sVmlkZW8gbm90IGZvdW5kIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJhc2U2NCA9IHNlbGYuZ2V0Q2FwdHVyZUJhc2U2NENvbnRleHQoaHRtbFZpZGVvKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodHlwZW9mIHNlbGYub25DYXB0dXJlUGljdHVyZSAhPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJOb3Qgc3VwcG9ydCBjYXB0dXJlIHBpY3R1cmUuIGNhdXNlZCBieSBvbkNhcHR1cmVQaWN0dXJlIG5vdCBmb3VuZCIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGYub25DYXB0dXJlUGljdHVyZShzdHJlYW0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIG1lc3NhZ2UgPSBzZWxmLmN1cnJlbnQubmV3TWVzc2FnZSh7CiAgICAgICAgICAgIG9wOiAxMDAxLAogICAgICAgICAgICB0c3hJZDogZXZ0LnRzeElkLAogICAgICAgICAgICBtZW1JZDogZXZ0Lm1lbUlkLAogICAgICAgICAgICBhcmc6IEpTT04uc3RyaW5naWZ5KGJhc2U2NCA/IHsgcGljOiBiYXNlNjQgfSA6IHt9KSwKICAgICAgICAgICAgcmVzdWx0OiAwCiAgICAgICAgfSk7CgogICAgICAgIHNlbGYuY3VycmVudC5wb3N0TWVzc2FnZShtZXNzYWdlLCBmdW5jdGlvbiAocnNwKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiU2VuZCByZW1vdGUgY29udHJvbCBvbkNhcHR1cmVQaWN0dXJlIHJlc3BvbnNlLiB0aGUgcmVzdWx0ID0gIiwgcnNwLnJlc3VsdCwgcnNwLm1zZyB8fCAiIik7CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfSwKCiAgICAvLyBfb25SZW1vdGVQYW5uZWxDb250cm9sOiBmdW5jdGlvbiAoZXZ0KSB7CiAgICAvLwogICAgLy8gfSwKCiAgICBuZXdTZXNzaW9uOiBmdW5jdGlvbiBuZXdTZXNzaW9uKGF0dGVuZGVlLCB0aWNrZXQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBFeHRlbmRTZXNzaW9uID0gc2VsZi5TZXNzaW9uIHx8IFNlc3Npb247CiAgICAgICAgdmFyIHNlc3Npb24gPSBuZXcgRXh0ZW5kU2Vzc2lvbih7CiAgICAgICAgICAgIHRpY2tldDogdGlja2V0LAogICAgICAgICAgICBvd25lcjogYXR0ZW5kZWUsCgogICAgICAgICAgICBvblRja2xDOiBmdW5jdGlvbiBvblRja2xDKGV2dCkgewogICAgICAgICAgICAgICAgYXR0ZW5kZWUub25UY2tsQyhldnQucnRjSWQsIGV2dC5jYW5kcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQWNwdEM6IGZ1bmN0aW9uIG9uQWNwdEMoZXZ0KSB7CiAgICAgICAgICAgICAgICBhdHRlbmRlZS5vbkFjcHRDKGV2dC5ydGNJZCwgZXZ0LnNkcCwgZXZ0LmNhbmRzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25BbnNDOiBmdW5jdGlvbiBvbkFuc0MoZXZ0KSB7CiAgICAgICAgICAgICAgICBhdHRlbmRlZS5vbkFuc0MoZXZ0LnJ0Y0lkLCBldnQuc2RwLCBldnQuY2FuZHMpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvblRlcm1DOiBmdW5jdGlvbiBvblRlcm1DKGV2dCkgewogICAgICAgICAgICAgICAgLy9zZWxmLm9uVGVybUMobWUsIGV2dCk7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmluZm8oIlNlcnZlciB0ZXJtYyBydGM6ICIsIGV2dC5ydGNJZCwgZXZ0Lm1lc3NhZ2UgfHwgZXZ0Lm1zZyk7CgogICAgICAgICAgICAgICAgaWYgKGV2dC5lbmRSZWFzb24gPT09IDIxIHx8IGV2dC5lbmRSZWFzb24gPT09IDIyKSB7CiAgICAgICAgICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChhdHRlbmRlZS5fY2FjaGVTdHJlYW1zLCBmdW5jdGlvbiAoc2lkLCBfc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfc3RyZWFtLnJ0Y0lkID09PSBldnQucnRjSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfZXZlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0LmVuZFJlYXNvbiA9PT0gMjEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZXZlbnQgPSBuZXcgZW1lZGlhLmV2ZW50LlN3aXRjaFZDb2Rlcyh7IHN0cmVhbTogX3N0cmVhbSwgdXNlVkNvZGVzOiBldnQudXNlVkNvZGVzIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZXZlbnQgPSBuZXcgZW1lZGlhLmV2ZW50LlN1YkZhaWxOb3RTdXBwb3J0VkNvZGVzKHsgc3RyZWFtOiBfc3RyZWFtIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uRXZlbnQoX2V2ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZS5jbG9zZVdlYnJ0YyhldnQucnRjSWQsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25FbnRlcjogZnVuY3Rpb24gb25FbnRlcihldnQpIHsKICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uRW50ZXIoZXZ0LmN2ZXIsIGV2dC5tZW0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbkV4aXQ6IGZ1bmN0aW9uIG9uRXhpdChldnQpIHsKICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uRXhpdChldnQuY3ZlciwgZXZ0Lm1lbUlkLCBldnQucmVhc29uIHx8IDApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvblB1YjogZnVuY3Rpb24gb25QdWIoZXZ0KSB7CiAgICAgICAgICAgICAgICBhdHRlbmRlZS5vblB1YihldnQuY3ZlciwgZXZ0Lm1lbUlkLCBldnQucHViUyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uVW5wdWI6IGZ1bmN0aW9uIG9uVW5wdWIoZXZ0KSB7CiAgICAgICAgICAgICAgICBhdHRlbmRlZS5vblVucHViKGV2dC5jdmVyLCBldnQubWVtSWQsIGV2dC5wdWJTSWQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbk1lbXM6IGZ1bmN0aW9uIG9uTWVtcyhldnQpIHt9LAogICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKGV2dCkgewogICAgICAgICAgICAgICAgYXR0ZW5kZWUub25DbG9zZShldnQuY3ZlciwgZXZ0LmNvbmZySWQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbkV2ZW50OiBmdW5jdGlvbiBvbkV2ZW50KGV2dCkgewogICAgICAgICAgICAgICAgYXR0ZW5kZWUub25FdmVudChldnQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvblN0cmVhbUNvbnRyb2w6IGZ1bmN0aW9uIG9uU3RyZWFtQ29udHJvbChldnQpIHsKICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uU3RyZWFtQ29udHJvbChldnQuY3ZlciwgZXZ0LnN0cmVhbUlkLCBldnQudm9mZiwgZXZ0LmFvZmYsIGV2dC5zdmVyKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25Sb2xlVXBkYXRlOiBmdW5jdGlvbiBvblJvbGVVcGRhdGUoZXZ0KSB7CiAgICAgICAgICAgICAgICBhdHRlbmRlZS5fb25Sb2xlVXBkYXRlKGV2dC5yb2xlLCBldnQucm9sZVRva2VuKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25SZW1vdGVDb250cm9sOiBmdW5jdGlvbiBvblJlbW90ZUNvbnRyb2woZXZ0KSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV2dC5hcmcgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgZXZ0LmFyZyA9IEpTT04ucGFyc2UoZXZ0LmFyZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZXZ0LmFyZy5vcDIgPT09IDIwICYmIGV2dC5hcmcucGljICYmIHNlbGYuX29uQ2FwdHVyZVBpY3R1cmUuY2FsbChzZWxmLCBldnQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGV2dC5hcmcub3AyID09PSAzMCAmJiBzZWxmLl9vblJlbW90ZVBhbm5lbENvbnRyb2wpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9vblJlbW90ZVBhbm5lbENvbnRyb2wuY2FsbChzZWxmLCBldnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiTm90IHN1cHBvcnQgcmVtb3RlIGNvbnRyb2wiKTsKCiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGF0dGVuZGVlLm5ld01lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIG9wOiAxMDAxLAogICAgICAgICAgICAgICAgICAgIHRzeElkOiBldnQudHN4SWQsCiAgICAgICAgICAgICAgICAgICAgbWVtSWQ6IGV2dC5tZW1JZCwKICAgICAgICAgICAgICAgICAgICBhcmc6IEpTT04uc3RyaW5naWZ5KGV2dC5hcmcpLAogICAgICAgICAgICAgICAgICAgIHJlc3VsdDogZXZ0ICYmIGV2dC5hcmcgJiYgZXZ0LmFyZy5vcDIgPT09IDMwID8gLTQwNSA6IC01MDcsCiAgICAgICAgICAgICAgICAgICAgbXNnOiAiTm90IHN1cHBvcnQgdGhlIHJlbW90ZSBjb250cm9sLiIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGF0dGVuZGVlLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlNlbmQgcmVtb3RlIGNvbnRyb2wgcmVzcG9uc2UuIHRoZSByZXN1bHQgPSAiLCByc3AucmVzdWx0LCByc3AubXNnIHx8ICIiKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvblJlY3ZSZW1vdGVNZXNzYWdlOiBmdW5jdGlvbiBvblJlY3ZSZW1vdGVNZXNzYWdlKGV2dCkgewogICAgICAgICAgICAgICAgYXR0ZW5kZWUuX29uUmVjdlJlbW90ZU1lc3NhZ2UgJiYgYXR0ZW5kZWUuX29uUmVjdlJlbW90ZU1lc3NhZ2UoZXZ0Lm1lbUlkLCBldnQuYXJnLCBldnQpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiBzZXNzaW9uOwogICAgfSwKCiAgICBfanVkZ2VUYWxraW5nOiBmdW5jdGlvbiBfanVkZ2VUYWxraW5nKG1ldGVyKSB7CiAgICAgICAgaWYgKCFtZXRlcikgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbWV0ZXIuaW5zdGFudCA+PSBlbWVkaWEuY29uZmlnLmp1ZGdlVGFsa2luZ0J5SW5zdGFudEdFOwogICAgfSwKCiAgICBncmFmZml0aVZpZGVvOiBmdW5jdGlvbiBncmFmZml0aVZpZGVvKHN0cmVhbUlkLCB2aWRlb1RhZywgY2FudmFzVGFnKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgZWFzZW1vYlN0cmVhbSA9IHNlbGYuZ2V0U3RyZWFtQnlJZChzdHJlYW1JZCk7CgogICAgICAgIHZhciBtZWRpYVN0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbSgpOwogICAgICAgIG1lZGlhU3RyZWFtLl9sb2NhdGVkID0gdHJ1ZTsKCiAgICAgICAgZWFzZW1vYlN0cmVhbS5fbG9jYWxNZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgIG1lZGlhU3RyZWFtLmFkZFRyYWNrKHRyYWNrKTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIGRyYXdTdHJlYW0gPSBjYW52YXNUYWcuY2FwdHVyZVN0cmVhbSgyNSk7CiAgICAgICAgZHJhd1N0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgIG1lZGlhU3RyZWFtLmFkZFRyYWNrKHRyYWNrKTsKICAgICAgICB9KTsKCiAgICAgICAgdmlkZW9UYWcuc3JjT2JqZWN0ID0gbWVkaWFTdHJlYW07CgogICAgICAgIGVhc2Vtb2JTdHJlYW0ubG9jYWxTdHJlYW0gPSBtZWRpYVN0cmVhbTsKICAgICAgICBlYXNlbW9iU3RyZWFtLmlzUmVwdWJsaXNoZWQgPSB0cnVlOwogICAgICAgIGVhc2Vtb2JTdHJlYW0ub3B0aW1hbFZpZGVvQ29kZWNzID0gZWFzZW1vYlN0cmVhbS5vcHRpbWFsVmlkZW9Db2RlY3M7CiAgICAgICAgc2VsZi5wdXNoKGVhc2Vtb2JTdHJlYW0pOwogICAgfSwKCiAgICByZXNldENhbnZhczogZnVuY3Rpb24gcmVzZXRDYW52YXMoY2FudmFzVGFnKSB7CiAgICAgICAgdmFyIHNldDsKICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHNldCA9IGFyZ3VtZW50c1tpXTsKCiAgICAgICAgICAgICAgICB0eXBlb2Ygc2V0ID09PSAiZnVuY3Rpb24iICYmIHNldChjYW52YXNUYWcpOwogICAgICAgICAgICAgICAgdHlwZW9mIHNldCAhPT0gImZ1bmN0aW9uIiAmJiBfdXRpbC5pc1BsYWluT2JqZWN0KHNldCkgJiYgX3V0aWwuZm9yRWFjaChzZXQsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygiQ2FudmFzIHNldCAiLCBrZXksICIgPSAiLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgY2FudmFzVGFnLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBfcmFuZG9tOiBmdW5jdGlvbiBfcmFuZG9tKGMpIHsKICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYyk7CiAgICB9LAogICAgcmVxdWVzdEZyYW1lOiBmdW5jdGlvbiByZXF1ZXN0RnJhbWUoc3RyZWFtLCBtaWxsaXMpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBfY2FjaGVTdHJlYW07CiAgICAgICAgaWYgKHR5cGVvZiBzdHJlYW0gPT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgIF9jYWNoZVN0cmVhbSA9IHRoaXMuY3VycmVudC5fY2FjaGVTdHJlYW1zW3N0cmVhbV07CiAgICAgICAgfSBlbHNlIGlmIChzdHJlYW0uaWQpIHsKICAgICAgICAgICAgX2NhY2hlU3RyZWFtID0gdGhpcy5jdXJyZW50Ll9jYWNoZVN0cmVhbXNbc3RyZWFtLmlkXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIV9jYWNoZVN0cmVhbSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBfcmVxdWVzdEZyYW1lKCkgewogICAgICAgICAgICBfY2FjaGVTdHJlYW0ucmVxdWVzdEZyYW1lKCk7CgogICAgICAgICAgICBpZiAoX2NhY2hlU3RyZWFtLmNhbnZhcykgewogICAgICAgICAgICAgICAgdmFyIHJlZHJhdyA9IERlZmF1bHRNb3VzZVRyYWNrLnByb3RvdHlwZS5yZWRyYXcuYmluZCh7IF9jYW52YXNDb250ZXh0OiBfY2FjaGVTdHJlYW0uY2FudmFzLmdldENvbnRleHQoIjJkIikgfSk7CiAgICAgICAgICAgICAgICAvL19sb2dnZXIuZGVidWcoc2VsZi5fcmFuZG9tKDI1NSkpOwogICAgICAgICAgICAgICAgcmVkcmF3KDMsIDMpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIW1pbGxpcykgewogICAgICAgICAgICBfcmVxdWVzdEZyYW1lKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfcmVxdWVzdEZyYW1lKCk7CiAgICAgICAgICAgIHNlbGYucmVxdWVzdEZyYW1lKF9jYWNoZVN0cmVhbSwgbWlsbGlzKTsKICAgICAgICB9LCBtaWxsaXMpOwogICAgfSwKCiAgICBncmFmZml0aUNhbnZhczogZnVuY3Rpb24gZ3JhZmZpdGlDYW52YXMod2l0aFZvaWNlLCBjYW52YXNUYWcpIHsKICAgICAgICBpZiAoX3V0aWwudGFyZ2V0RE9NKHdpdGhWb2ljZSkpIHsKICAgICAgICAgICAgY2FudmFzVGFnID0gd2l0aFZvaWNlOwogICAgICAgICAgICB3aXRoVm9pY2UgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHB1YlMgPSBuZXcgc2VsZi5TaGFyZURlc2t0b3BQdWJzdHJlYW0oewogICAgICAgICAgICB2b2ZmOiAwLAogICAgICAgICAgICBhb2ZmOiB3aXRoVm9pY2UgPyAwIDogMQogICAgICAgIH0pOwoKICAgICAgICBjYW52YXNUYWcgfHwgKGNhbnZhc1RhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpKTsKCiAgICAgICAgLy9jYW52YXNUYWcuZ2V0Q29udGV4dCgiMmQiLCB7d2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlfSk7IC8vRml4ZWQ6IEZpcmVmb3ggY2FwdHVyZVN0cmVhbSAgTlNfRVJST1JfTk9UX0lOSVRJQUxJWkVECiAgICAgICAgY2FudmFzVGFnLmdldENvbnRleHQoIjJkIik7CiAgICAgICAgcHViUy5jYW52YXMgPSBjYW52YXNUYWc7CgogICAgICAgIHZhciBkaXkgPSBmdW5jdGlvbiBkaXkoKSB7fTsKICAgICAgICBkaXkucHJvdG90eXBlLnNldENhbnZhcyA9IGZ1bmN0aW9uIChzZXQpIHsKICAgICAgICAgICAgdGhpcy5jYW52YXNUYWcgPSBjYW52YXNUYWc7CiAgICAgICAgICAgIHNlbGYucmVzZXRDYW52YXMoY2FudmFzVGFnLCBzZXQpOwoKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfTsKCiAgICAgICAgZGl5LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGZyYW1lUmF0ZSwgX29ucHVzaGVkKSB7CiAgICAgICAgICAgIHZhciBkaXkgPSB0aGlzOwogICAgICAgICAgICBkaXkuX3B1c2goZnJhbWVSYXRlLCBfb25wdXNoZWQpOwogICAgICAgIH07CiAgICAgICAgZGl5LnByb3RvdHlwZS5fcHVzaCA9IGZ1bmN0aW9uIChmcmFtZVJhdGUsIF9vbnB1c2hlZCkgewogICAgICAgICAgICBpZiAodHlwZW9mIGZyYW1lUmF0ZSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgX29ucHVzaGVkID0gZnJhbWVSYXRlOwogICAgICAgICAgICAgICAgZnJhbWVSYXRlID0gdW5kZWZpbmVkOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjYW52YXNUYWcuY2FwdHVyZVN0cmVhbSAmJiAoY2FudmFzVGFnLmNhcHR1cmVTdHJlYW0uZW5hYmxlZCA9IHRydWUpOwogICAgICAgICAgICB2YXIgZHJhd1N0cmVhbSA9IGNhbnZhc1RhZy5jYXB0dXJlU3RyZWFtKGZyYW1lUmF0ZSB8fCAyNSk7CgogICAgICAgICAgICBmdW5jdGlvbiBwdXNoZWQoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICBzdHJlYW0uY2FudmFzID0gY2FudmFzVGFnOwogICAgICAgICAgICAgICAgX29ucHVzaGVkICYmIF9vbnB1c2hlZChzdHJlYW0sIGNhbnZhc1RhZywgZHJhd1N0cmVhbSk7CgogICAgICAgICAgICAgICAgaWYgKHdpdGhWb2ljZSkgewogICAgICAgICAgICAgICAgICAgIC8v5Y+R6YCB5LiA5bin6KeG6aKRCiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnJlcXVlc3RGcmFtZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBwdWIocHViUywgcHVzaGVkKSB7CiAgICAgICAgICAgICAgICB2YXIgbWVkaWFTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTsKICAgICAgICAgICAgICAgIG1lZGlhU3RyZWFtLl9sb2NhdGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBwdWJTLl9sb2NhbE1lZGlhU3RyZWFtICYmIHB1YlMuX2xvY2FsTWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgICAgICAgICAgIG1lZGlhU3RyZWFtLmFkZFRyYWNrKHRyYWNrKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGRyYXdTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgICAgICAgICAgIG1lZGlhU3RyZWFtLmFkZFRyYWNrKHRyYWNrKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHB1YlMuX2xvY2FsTWVkaWFTdHJlYW0gPSBtZWRpYVN0cmVhbTsKICAgICAgICAgICAgICAgIHB1YlMubG9jYWxTdHJlYW0gPSBtZWRpYVN0cmVhbTsKICAgICAgICAgICAgICAgIHNlbGYucHVzaChwdWJTLCBwdXNoZWQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAod2l0aFZvaWNlKSB7CiAgICAgICAgICAgICAgICBzZWxmLl9fZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUgfSwgZnVuY3Rpb24gc3VjY2VzcyhfdXNlciwgc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgcHViUy5fbG9jYWxNZWRpYVN0cmVhbSA9IHN0cmVhbTsKICAgICAgICAgICAgICAgICAgICBwdWIocHViUywgcHVzaGVkKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcHViKHB1YlMsIHB1c2hlZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBuZXcgZGl5KCk7CiAgICB9LAoKICAgIGJsb2JSZWNvcmRlcjogZnVuY3Rpb24gYmxvYlJlY29yZGVyKG1lZGlhU3RyZWFtLCBvcHRpb25zLCBoYW5kbGVEYXRhQXZhaWxhYmxlLCBoYW5kbGVTdG9wKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoX3V0aWwudGFyZ2V0RE9NKG1lZGlhU3RyZWFtKSkgewogICAgICAgICAgICBtZWRpYVN0cmVhbSA9IG1lZGlhU3RyZWFtLnNyY09iamVjdDsKICAgICAgICB9CgogICAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7IG1pbWVUeXBlOiAndmlkZW8vd2VibTtjb2RlY3M9dnA5JyB9KTsKICAgICAgICBpZiAoIU1lZGlhUmVjb3JkZXIuaXNUeXBlU3VwcG9ydGVkKG9wdGlvbnMubWltZVR5cGUpKSB7CiAgICAgICAgICAgIF9sb2dnZXIuaW5mbyhvcHRpb25zLm1pbWVUeXBlLCAnIGlzIG5vdCBTdXBwb3J0ZWQnKTsKICAgICAgICAgICAgb3B0aW9ucyA9IHsgbWltZVR5cGU6ICd2aWRlby93ZWJtO2NvZGVjcz12cDgnIH07CiAgICAgICAgICAgIGlmICghTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQob3B0aW9ucy5taW1lVHlwZSkpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbyhvcHRpb25zLm1pbWVUeXBlLCAnIGlzIG5vdCBTdXBwb3J0ZWQnKTsKICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7IG1pbWVUeXBlOiAndmlkZW8vd2VibScgfTsKICAgICAgICAgICAgICAgIGlmICghTWVkaWFSZWNvcmRlci5pc1R5cGVTdXBwb3J0ZWQob3B0aW9ucy5taW1lVHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLmluZm8ob3B0aW9ucy5taW1lVHlwZSwgJyBpcyBub3QgU3VwcG9ydGVkJyk7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHsgbWltZVR5cGU6ICcnIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIobWVkaWFTdHJlYW0sIG9wdGlvbnMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRXhjZXB0aW9uIHdoaWxlIGNyZWF0aW5nIE1lZGlhUmVjb3JkZXI6ICcsIGUpOwogICAgICAgICAgICAvL2FsZXJ0KCdFeGNlcHRpb24gd2hpbGUgY3JlYXRpbmcgTWVkaWFSZWNvcmRlcjogJyArIGUgKyAnLiBtaW1lVHlwZTogJyArIG9wdGlvbnMubWltZVR5cGUpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciByZWNvcmRlZEJsb2JzID0gW107CiAgICAgICAgbWVkaWFSZWNvcmRlci5vbnN0b3AgPSBoYW5kbGVTdG9wIHx8IGZ1bmN0aW9uIGhhbmRsZVN0b3AoZXZlbnQpIHsKICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCdSZWNvcmRlciBzdG9wcGVkOiAnLCBldmVudCk7CiAgICAgICAgfTsKICAgICAgICBtZWRpYVJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IGhhbmRsZURhdGFBdmFpbGFibGUgfHwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEuc2l6ZSA+IDApIHsKICAgICAgICAgICAgICAgIHJlY29yZGVkQmxvYnMucHVzaChldmVudC5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gbWVkaWFSZWNvcmRlci5zdGFydCgxMCk7IC8vIGNvbGxlY3QgMTBtcyBvZiBkYXRhCiAgICAgICAgLy8gX2xvZ2dlci5lcnJvcignTWVkaWFSZWNvcmRlciBzdGFydGVkJywgbWVkaWFSZWNvcmRlcik7CgogICAgICAgIGZ1bmN0aW9uIEJsb2JSZWNvcmRlcigpIHsKICAgICAgICAgICAgdGhpcy5ibG9icyA9IHJlY29yZGVkQmxvYnM7CiAgICAgICAgfQogICAgICAgIEJsb2JSZWNvcmRlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoc2Vjb3JuZHMpIHsKICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdGFydChzZWNvcm5kcyk7CiAgICAgICAgfTsKICAgICAgICBCbG9iUmVjb3JkZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIuc3RvcCgpOwogICAgICAgIH07CiAgICAgICAgQmxvYlJlY29yZGVyLnByb3RvdHlwZS5wbGF5dXJsID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgICAgICAgdmFyIHN1cGVyQnVmZmVyID0gbmV3IEJsb2IodGhpcy5ibG9icywgb3B0aW9ucyB8fCB7IHR5cGU6ICd2aWRlby93ZWJtJyB9KTsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHN1cGVyQnVmZmVyKTsKICAgICAgICB9OwogICAgICAgIEJsb2JSZWNvcmRlci5wcm90b3R5cGUuZG93bmxvYWQgPSBmdW5jdGlvbiAoZmlsZW5hbWUsIG9wdGlvbnMpIHsKICAgICAgICAgICAgdmFyIGJsb2JzID0gbmV3IEJsb2IodGhpcy5ibG9icywgb3B0aW9ucyB8fCB7IHR5cGU6ICd2aWRlby93ZWJtJyB9KTsKICAgICAgICAgICAgc2VsZi5kb3dubG9hZEZpbGUoZmlsZW5hbWUsIHVuZGVmaW5lZCwgYmxvYnMpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBuZXcgQmxvYlJlY29yZGVyKCk7CiAgICB9Cn0pOwoKLyoqKi8gfSksCi8qIDE3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIG1vZHVsZSkge3ZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvLyAgICAgVW5kZXJzY29yZS5qcyAxLjkuMQovLyAgICAgaHR0cDovL3VuZGVyc2NvcmVqcy5vcmcKLy8gICAgIChjKSAyMDA5LTIwMTggSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnMKLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCgooZnVuY3Rpb24oKSB7CgogIC8vIEJhc2VsaW5lIHNldHVwCiAgLy8gLS0tLS0tLS0tLS0tLS0KCiAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgKGBzZWxmYCkgaW4gdGhlIGJyb3dzZXIsIGBnbG9iYWxgCiAgLy8gb24gdGhlIHNlcnZlciwgb3IgYHRoaXNgIGluIHNvbWUgdmlydHVhbCBtYWNoaW5lcy4gV2UgdXNlIGBzZWxmYAogIC8vIGluc3RlYWQgb2YgYHdpbmRvd2AgZm9yIGBXZWJXb3JrZXJgIHN1cHBvcnQuCiAgdmFyIHJvb3QgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGYgJiYgc2VsZiB8fAogICAgICAgICAgICB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbC5nbG9iYWwgPT09IGdsb2JhbCAmJiBnbG9iYWwgfHwKICAgICAgICAgICAgdGhpcyB8fAogICAgICAgICAgICB7fTsKCiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS4KICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fOwoKICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOgogIHZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGU7CiAgdmFyIFN5bWJvbFByb3RvID0gdHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgPyBTeW1ib2wucHJvdG90eXBlIDogbnVsbDsKCiAgLy8gQ3JlYXRlIHF1aWNrIHJlZmVyZW5jZSB2YXJpYWJsZXMgZm9yIHNwZWVkIGFjY2VzcyB0byBjb3JlIHByb3RvdHlwZXMuCiAgdmFyIHB1c2ggPSBBcnJheVByb3RvLnB1c2gsCiAgICAgIHNsaWNlID0gQXJyYXlQcm90by5zbGljZSwKICAgICAgdG9TdHJpbmcgPSBPYmpQcm90by50b1N0cmluZywKICAgICAgaGFzT3duUHJvcGVydHkgPSBPYmpQcm90by5oYXNPd25Qcm9wZXJ0eTsKCiAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlCiAgLy8gYXJlIGRlY2xhcmVkIGhlcmUuCiAgdmFyIG5hdGl2ZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5LAogICAgICBuYXRpdmVLZXlzID0gT2JqZWN0LmtleXMsCiAgICAgIG5hdGl2ZUNyZWF0ZSA9IE9iamVjdC5jcmVhdGU7CgogIC8vIE5ha2VkIGZ1bmN0aW9uIHJlZmVyZW5jZSBmb3Igc3Vycm9nYXRlLXByb3RvdHlwZS1zd2FwcGluZy4KICB2YXIgQ3RvciA9IGZ1bmN0aW9uKCl7fTsKCiAgLy8gQ3JlYXRlIGEgc2FmZSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciB1c2UgYmVsb3cuCiAgdmFyIF8gPSBmdW5jdGlvbihvYmopIHsKICAgIGlmIChvYmogaW5zdGFuY2VvZiBfKSByZXR1cm4gb2JqOwogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIF8pKSByZXR1cm4gbmV3IF8ob2JqKTsKICAgIHRoaXMuX3dyYXBwZWQgPSBvYmo7CiAgfTsKCiAgLy8gRXhwb3J0IHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGgKICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgdGhlaXIgb2xkIG1vZHVsZSBBUEkuIElmIHdlJ3JlIGluCiAgLy8gdGhlIGJyb3dzZXIsIGFkZCBgX2AgYXMgYSBnbG9iYWwgb2JqZWN0LgogIC8vIChgbm9kZVR5cGVgIGlzIGNoZWNrZWQgdG8gZW5zdXJlIHRoYXQgYG1vZHVsZWAKICAvLyBhbmQgYGV4cG9ydHNgIGFyZSBub3QgSFRNTCBlbGVtZW50cy4pCiAgaWYgKHR5cGVvZiBleHBvcnRzICE9ICd1bmRlZmluZWQnICYmICFleHBvcnRzLm5vZGVUeXBlKSB7CiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZS5leHBvcnRzKSB7CiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87CiAgICB9CiAgICBleHBvcnRzLl8gPSBfOwogIH0gZWxzZSB7CiAgICByb290Ll8gPSBfOwogIH0KCiAgLy8gQ3VycmVudCB2ZXJzaW9uLgogIF8uVkVSU0lPTiA9ICcxLjkuMSc7CgogIC8vIEludGVybmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBlZmZpY2llbnQgKGZvciBjdXJyZW50IGVuZ2luZXMpIHZlcnNpb24KICAvLyBvZiB0aGUgcGFzc2VkLWluIGNhbGxiYWNrLCB0byBiZSByZXBlYXRlZGx5IGFwcGxpZWQgaW4gb3RoZXIgVW5kZXJzY29yZQogIC8vIGZ1bmN0aW9ucy4KICB2YXIgb3B0aW1pemVDYiA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQsIGFyZ0NvdW50KSB7CiAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSByZXR1cm4gZnVuYzsKICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkgewogICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUpOwogICAgICB9OwogICAgICAvLyBUaGUgMi1hcmd1bWVudCBjYXNlIGlzIG9taXR0ZWQgYmVjYXVzZSB3ZeKAmXJlIG5vdCB1c2luZyBpdC4KICAgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pOwogICAgICB9OwogICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTsKICAgICAgfTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTsKICAgIH07CiAgfTsKCiAgdmFyIGJ1aWx0aW5JdGVyYXRlZTsKCiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgY2FsbGJhY2tzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG8gZWFjaAogIC8vIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgdGhlIGRlc2lyZWQgcmVzdWx0IOKAlCBlaXRoZXIgYGlkZW50aXR5YCwKICAvLyBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci4KICB2YXIgY2IgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpIHsKICAgIGlmIChfLml0ZXJhdGVlICE9PSBidWlsdGluSXRlcmF0ZWUpIHJldHVybiBfLml0ZXJhdGVlKHZhbHVlLCBjb250ZXh0KTsKICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gXy5pZGVudGl0eTsKICAgIGlmIChfLmlzRnVuY3Rpb24odmFsdWUpKSByZXR1cm4gb3B0aW1pemVDYih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpOwogICAgaWYgKF8uaXNPYmplY3QodmFsdWUpICYmICFfLmlzQXJyYXkodmFsdWUpKSByZXR1cm4gXy5tYXRjaGVyKHZhbHVlKTsKICAgIHJldHVybiBfLnByb3BlcnR5KHZhbHVlKTsKICB9OwoKICAvLyBFeHRlcm5hbCB3cmFwcGVyIGZvciBvdXIgY2FsbGJhY2sgZ2VuZXJhdG9yLiBVc2VycyBtYXkgY3VzdG9taXplCiAgLy8gYF8uaXRlcmF0ZWVgIGlmIHRoZXkgd2FudCBhZGRpdGlvbmFsIHByZWRpY2F0ZS9pdGVyYXRlZSBzaG9ydGhhbmQgc3R5bGVzLgogIC8vIFRoaXMgYWJzdHJhY3Rpb24gaGlkZXMgdGhlIGludGVybmFsLW9ubHkgYXJnQ291bnQgYXJndW1lbnQuCiAgXy5pdGVyYXRlZSA9IGJ1aWx0aW5JdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7CiAgICByZXR1cm4gY2IodmFsdWUsIGNvbnRleHQsIEluZmluaXR5KTsKICB9OwoKICAvLyBTb21lIGZ1bmN0aW9ucyB0YWtlIGEgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cywgb3IgYSBmZXcgZXhwZWN0ZWQKICAvLyBhcmd1bWVudHMgYXQgdGhlIGJlZ2lubmluZyBhbmQgdGhlbiBhIHZhcmlhYmxlIG51bWJlciBvZiB2YWx1ZXMgdG8gb3BlcmF0ZQogIC8vIG9uLiBUaGlzIGhlbHBlciBhY2N1bXVsYXRlcyBhbGwgcmVtYWluaW5nIGFyZ3VtZW50cyBwYXN0IHRoZSBmdW5jdGlvbuKAmXMKICAvLyBhcmd1bWVudCBsZW5ndGggKG9yIGFuIGV4cGxpY2l0IGBzdGFydEluZGV4YCksIGludG8gYW4gYXJyYXkgdGhhdCBiZWNvbWVzCiAgLy8gdGhlIGxhc3QgYXJndW1lbnQuIFNpbWlsYXIgdG8gRVM24oCZcyAicmVzdCBwYXJhbWV0ZXIiLgogIHZhciByZXN0QXJndW1lbnRzID0gZnVuY3Rpb24oZnVuYywgc3RhcnRJbmRleCkgewogICAgc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXggPT0gbnVsbCA/IGZ1bmMubGVuZ3RoIC0gMSA6ICtzdGFydEluZGV4OwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgoYXJndW1lbnRzLmxlbmd0aCAtIHN0YXJ0SW5kZXgsIDApLAogICAgICAgICAgcmVzdCA9IEFycmF5KGxlbmd0aCksCiAgICAgICAgICBpbmRleCA9IDA7CiAgICAgIGZvciAoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIHJlc3RbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4ICsgc3RhcnRJbmRleF07CiAgICAgIH0KICAgICAgc3dpdGNoIChzdGFydEluZGV4KSB7CiAgICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIHJlc3QpOwogICAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmd1bWVudHNbMF0sIHJlc3QpOwogICAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSwgcmVzdCk7CiAgICAgIH0KICAgICAgdmFyIGFyZ3MgPSBBcnJheShzdGFydEluZGV4ICsgMSk7CiAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHN0YXJ0SW5kZXg7IGluZGV4KyspIHsKICAgICAgICBhcmdzW2luZGV4XSA9IGFyZ3VtZW50c1tpbmRleF07CiAgICAgIH0KICAgICAgYXJnc1tzdGFydEluZGV4XSA9IHJlc3Q7CiAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgfTsKICB9OwoKICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBhbm90aGVyLgogIHZhciBiYXNlQ3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlKSB7CiAgICBpZiAoIV8uaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIHt9OwogICAgaWYgKG5hdGl2ZUNyZWF0ZSkgcmV0dXJuIG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpOwogICAgQ3Rvci5wcm90b3R5cGUgPSBwcm90b3R5cGU7CiAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3I7CiAgICBDdG9yLnByb3RvdHlwZSA9IG51bGw7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIHZhciBzaGFsbG93UHJvcGVydHkgPSBmdW5jdGlvbihrZXkpIHsKICAgIHJldHVybiBmdW5jdGlvbihvYmopIHsKICAgICAgcmV0dXJuIG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW2tleV07CiAgICB9OwogIH07CgogIHZhciBoYXMgPSBmdW5jdGlvbihvYmosIHBhdGgpIHsKICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcGF0aCk7CiAgfQoKICB2YXIgZGVlcEdldCA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkgewogICAgdmFyIGxlbmd0aCA9IHBhdGgubGVuZ3RoOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB2b2lkIDA7CiAgICAgIG9iaiA9IG9ialtwYXRoW2ldXTsKICAgIH0KICAgIHJldHVybiBsZW5ndGggPyBvYmogOiB2b2lkIDA7CiAgfTsKCiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uCiAgLy8gc2hvdWxkIGJlIGl0ZXJhdGVkIGFzIGFuIGFycmF5IG9yIGFzIGFuIG9iamVjdC4KICAvLyBSZWxhdGVkOiBodHRwOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aAogIC8vIEF2b2lkcyBhIHZlcnkgbmFzdHkgaU9TIDggSklUIGJ1ZyBvbiBBUk0tNjQuICMyMDk0CiAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7CiAgdmFyIGdldExlbmd0aCA9IHNoYWxsb3dQcm9wZXJ0eSgnbGVuZ3RoJyk7CiAgdmFyIGlzQXJyYXlMaWtlID0gZnVuY3Rpb24oY29sbGVjdGlvbikgewogICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChjb2xsZWN0aW9uKTsKICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8PSBNQVhfQVJSQVlfSU5ERVg7CiAgfTsKCiAgLy8gQ29sbGVjdGlvbiBGdW5jdGlvbnMKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvLyBUaGUgY29ybmVyc3RvbmUsIGFuIGBlYWNoYCBpbXBsZW1lbnRhdGlvbiwgYWthIGBmb3JFYWNoYC4KICAvLyBIYW5kbGVzIHJhdyBvYmplY3RzIGluIGFkZGl0aW9uIHRvIGFycmF5LWxpa2VzLiBUcmVhdHMgYWxsCiAgLy8gc3BhcnNlIGFycmF5LWxpa2VzIGFzIGlmIHRoZXkgd2VyZSBkZW5zZS4KICBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7CiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQpOwogICAgdmFyIGksIGxlbmd0aDsKICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7CiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIGl0ZXJhdGVlKG9ialtpXSwgaSwgb2JqKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTsKICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIGl0ZXJhdGVlKG9ialtrZXlzW2ldXSwga2V5c1tpXSwgb2JqKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG9iajsKICB9OwoKICAvLyBSZXR1cm4gdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdGVlIHRvIGVhY2ggZWxlbWVudC4KICBfLm1hcCA9IF8uY29sbGVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHsKICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpOwogICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSwKICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCwKICAgICAgICByZXN1bHRzID0gQXJyYXkobGVuZ3RoKTsKICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHsKICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDsKICAgICAgcmVzdWx0c1tpbmRleF0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICAvLyBDcmVhdGUgYSByZWR1Y2luZyBmdW5jdGlvbiBpdGVyYXRpbmcgbGVmdCBvciByaWdodC4KICB2YXIgY3JlYXRlUmVkdWNlID0gZnVuY3Rpb24oZGlyKSB7CiAgICAvLyBXcmFwIGNvZGUgdGhhdCByZWFzc2lnbnMgYXJndW1lbnQgdmFyaWFibGVzIGluIGEgc2VwYXJhdGUgZnVuY3Rpb24gdGhhbgogICAgLy8gdGhlIG9uZSB0aGF0IGFjY2Vzc2VzIGBhcmd1bWVudHMubGVuZ3RoYCB0byBhdm9pZCBhIHBlcmYgaGl0LiAoIzE5OTEpCiAgICB2YXIgcmVkdWNlciA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGluaXRpYWwpIHsKICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSwKICAgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLAogICAgICAgICAgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7CiAgICAgIGlmICghaW5pdGlhbCkgewogICAgICAgIG1lbW8gPSBvYmpba2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXhdOwogICAgICAgIGluZGV4ICs9IGRpcjsKICAgICAgfQogICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7CiAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDsKICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopOwogICAgICB9CiAgICAgIHJldHVybiBtZW1vOwogICAgfTsKCiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgbWVtbywgY29udGV4dCkgewogICAgICB2YXIgaW5pdGlhbCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMzsKICAgICAgcmV0dXJuIHJlZHVjZXIob2JqLCBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCA0KSwgbWVtbywgaW5pdGlhbCk7CiAgICB9OwogIH07CgogIC8vICoqUmVkdWNlKiogYnVpbGRzIHVwIGEgc2luZ2xlIHJlc3VsdCBmcm9tIGEgbGlzdCBvZiB2YWx1ZXMsIGFrYSBgaW5qZWN0YCwKICAvLyBvciBgZm9sZGxgLgogIF8ucmVkdWNlID0gXy5mb2xkbCA9IF8uaW5qZWN0ID0gY3JlYXRlUmVkdWNlKDEpOwoKICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC4KICBfLnJlZHVjZVJpZ2h0ID0gXy5mb2xkciA9IGNyZWF0ZVJlZHVjZSgtMSk7CgogIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC4KICBfLmZpbmQgPSBfLmRldGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7CiAgICB2YXIga2V5RmluZGVyID0gaXNBcnJheUxpa2Uob2JqKSA/IF8uZmluZEluZGV4IDogXy5maW5kS2V5OwogICAgdmFyIGtleSA9IGtleUZpbmRlcihvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7CiAgICBpZiAoa2V5ICE9PSB2b2lkIDAgJiYga2V5ICE9PSAtMSkgcmV0dXJuIG9ialtrZXldOwogIH07CgogIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIHRoYXQgcGFzcyBhIHRydXRoIHRlc3QuCiAgLy8gQWxpYXNlZCBhcyBgc2VsZWN0YC4KICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHsKICAgIHZhciByZXN1bHRzID0gW107CiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpOwogICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7CiAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBsaXN0KSkgcmVzdWx0cy5wdXNoKHZhbHVlKTsKICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdHM7CiAgfTsKCiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy4KICBfLnJlamVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7CiAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm5lZ2F0ZShjYihwcmVkaWNhdGUpKSwgY29udGV4dCk7CiAgfTsKCiAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgYWxsIG9mIHRoZSBlbGVtZW50cyBtYXRjaCBhIHRydXRoIHRlc3QuCiAgLy8gQWxpYXNlZCBhcyBgYWxsYC4KICBfLmV2ZXJ5ID0gXy5hbGwgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkgewogICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTsKICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksCiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGg7CiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7CiAgICAgIGlmICghcHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuCiAgLy8gQWxpYXNlZCBhcyBgYW55YC4KICBfLnNvbWUgPSBfLmFueSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7CiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpOwogICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSwKICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDsKICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHsKICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDsKICAgICAgaWYgKHByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH07CgogIC8vIERldGVybWluZSBpZiB0aGUgYXJyYXkgb3Igb2JqZWN0IGNvbnRhaW5zIGEgZ2l2ZW4gaXRlbSAodXNpbmcgYD09PWApLgogIC8vIEFsaWFzZWQgYXMgYGluY2x1ZGVzYCBhbmQgYGluY2x1ZGVgLgogIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7CiAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7CiAgICBpZiAodHlwZW9mIGZyb21JbmRleCAhPSAnbnVtYmVyJyB8fCBndWFyZCkgZnJvbUluZGV4ID0gMDsKICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7CiAgfTsKCiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uCiAgXy5pbnZva2UgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKG9iaiwgcGF0aCwgYXJncykgewogICAgdmFyIGNvbnRleHRQYXRoLCBmdW5jOwogICAgaWYgKF8uaXNGdW5jdGlvbihwYXRoKSkgewogICAgICBmdW5jID0gcGF0aDsKICAgIH0gZWxzZSBpZiAoXy5pc0FycmF5KHBhdGgpKSB7CiAgICAgIGNvbnRleHRQYXRoID0gcGF0aC5zbGljZSgwLCAtMSk7CiAgICAgIHBhdGggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07CiAgICB9CiAgICByZXR1cm4gXy5tYXAob2JqLCBmdW5jdGlvbihjb250ZXh0KSB7CiAgICAgIHZhciBtZXRob2QgPSBmdW5jOwogICAgICBpZiAoIW1ldGhvZCkgewogICAgICAgIGlmIChjb250ZXh0UGF0aCAmJiBjb250ZXh0UGF0aC5sZW5ndGgpIHsKICAgICAgICAgIGNvbnRleHQgPSBkZWVwR2V0KGNvbnRleHQsIGNvbnRleHRQYXRoKTsKICAgICAgICB9CiAgICAgICAgaWYgKGNvbnRleHQgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDsKICAgICAgICBtZXRob2QgPSBjb250ZXh0W3BhdGhdOwogICAgICB9CiAgICAgIHJldHVybiBtZXRob2QgPT0gbnVsbCA/IG1ldGhvZCA6IG1ldGhvZC5hcHBseShjb250ZXh0LCBhcmdzKTsKICAgIH0pOwogIH0pOwoKICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBtYXBgOiBmZXRjaGluZyBhIHByb3BlcnR5LgogIF8ucGx1Y2sgPSBmdW5jdGlvbihvYmosIGtleSkgewogICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTsKICB9OwoKICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzCiAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy4KICBfLndoZXJlID0gZnVuY3Rpb24ob2JqLCBhdHRycykgewogICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7CiAgfTsKCiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdAogIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuCiAgXy5maW5kV2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7CiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLgogIF8ubWF4ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkgewogICAgdmFyIHJlc3VsdCA9IC1JbmZpbml0eSwgbGFzdENvbXB1dGVkID0gLUluZmluaXR5LAogICAgICAgIHZhbHVlLCBjb21wdXRlZDsKICAgIGlmIChpdGVyYXRlZSA9PSBudWxsIHx8IHR5cGVvZiBpdGVyYXRlZSA9PSAnbnVtYmVyJyAmJiB0eXBlb2Ygb2JqWzBdICE9ICdvYmplY3QnICYmIG9iaiAhPSBudWxsKSB7CiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFsdWUgPSBvYmpbaV07CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgPiByZXN1bHQpIHsKICAgICAgICAgIHJlc3VsdCA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7CiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHYsIGluZGV4LCBsaXN0KSB7CiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2LCBpbmRleCwgbGlzdCk7CiAgICAgICAgaWYgKGNvbXB1dGVkID4gbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSAtSW5maW5pdHkgJiYgcmVzdWx0ID09PSAtSW5maW5pdHkpIHsKICAgICAgICAgIHJlc3VsdCA9IHY7CiAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBSZXR1cm4gdGhlIG1pbmltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuCiAgXy5taW4gPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7CiAgICB2YXIgcmVzdWx0ID0gSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IEluZmluaXR5LAogICAgICAgIHZhbHVlLCBjb21wdXRlZDsKICAgIGlmIChpdGVyYXRlZSA9PSBudWxsIHx8IHR5cGVvZiBpdGVyYXRlZSA9PSAnbnVtYmVyJyAmJiB0eXBlb2Ygb2JqWzBdICE9ICdvYmplY3QnICYmIG9iaiAhPSBudWxsKSB7CiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopOwogICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFsdWUgPSBvYmpbaV07CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgPCByZXN1bHQpIHsKICAgICAgICAgIHJlc3VsdCA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7CiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHYsIGluZGV4LCBsaXN0KSB7CiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2LCBpbmRleCwgbGlzdCk7CiAgICAgICAgaWYgKGNvbXB1dGVkIDwgbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSBJbmZpbml0eSAmJiByZXN1bHQgPT09IEluZmluaXR5KSB7CiAgICAgICAgICByZXN1bHQgPSB2OwogICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgLy8gU2h1ZmZsZSBhIGNvbGxlY3Rpb24uCiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gXy5zYW1wbGUob2JqLCBJbmZpbml0eSk7CiAgfTsKCiAgLy8gU2FtcGxlICoqbioqIHJhbmRvbSB2YWx1ZXMgZnJvbSBhIGNvbGxlY3Rpb24gdXNpbmcgdGhlIG1vZGVybiB2ZXJzaW9uIG9mIHRoZQogIC8vIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXLigJNZYXRlc19zaHVmZmxlKS4KICAvLyBJZiAqKm4qKiBpcyBub3Qgc3BlY2lmaWVkLCByZXR1cm5zIGEgc2luZ2xlIHJhbmRvbSBlbGVtZW50LgogIC8vIFRoZSBpbnRlcm5hbCBgZ3VhcmRgIGFyZ3VtZW50IGFsbG93cyBpdCB0byB3b3JrIHdpdGggYG1hcGAuCiAgXy5zYW1wbGUgPSBmdW5jdGlvbihvYmosIG4sIGd1YXJkKSB7CiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7CiAgICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTsKICAgICAgcmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoIC0gMSldOwogICAgfQogICAgdmFyIHNhbXBsZSA9IGlzQXJyYXlMaWtlKG9iaikgPyBfLmNsb25lKG9iaikgOiBfLnZhbHVlcyhvYmopOwogICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChzYW1wbGUpOwogICAgbiA9IE1hdGgubWF4KE1hdGgubWluKG4sIGxlbmd0aCksIDApOwogICAgdmFyIGxhc3QgPSBsZW5ndGggLSAxOwogICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG47IGluZGV4KyspIHsKICAgICAgdmFyIHJhbmQgPSBfLnJhbmRvbShpbmRleCwgbGFzdCk7CiAgICAgIHZhciB0ZW1wID0gc2FtcGxlW2luZGV4XTsKICAgICAgc2FtcGxlW2luZGV4XSA9IHNhbXBsZVtyYW5kXTsKICAgICAgc2FtcGxlW3JhbmRdID0gdGVtcDsKICAgIH0KICAgIHJldHVybiBzYW1wbGUuc2xpY2UoMCwgbik7CiAgfTsKCiAgLy8gU29ydCB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uIHByb2R1Y2VkIGJ5IGFuIGl0ZXJhdGVlLgogIF8uc29ydEJ5ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkgewogICAgdmFyIGluZGV4ID0gMDsKICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpOwogICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBsaXN0KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIGluZGV4OiBpbmRleCsrLAogICAgICAgIGNyaXRlcmlhOiBpdGVyYXRlZSh2YWx1ZSwga2V5LCBsaXN0KQogICAgICB9OwogICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkgewogICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWE7CiAgICAgIHZhciBiID0gcmlnaHQuY3JpdGVyaWE7CiAgICAgIGlmIChhICE9PSBiKSB7CiAgICAgICAgaWYgKGEgPiBiIHx8IGEgPT09IHZvaWQgMCkgcmV0dXJuIDE7CiAgICAgICAgaWYgKGEgPCBiIHx8IGIgPT09IHZvaWQgMCkgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIHJldHVybiBsZWZ0LmluZGV4IC0gcmlnaHQuaW5kZXg7CiAgICB9KSwgJ3ZhbHVlJyk7CiAgfTsKCiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gdXNlZCBmb3IgYWdncmVnYXRlICJncm91cCBieSIgb3BlcmF0aW9ucy4KICB2YXIgZ3JvdXAgPSBmdW5jdGlvbihiZWhhdmlvciwgcGFydGl0aW9uKSB7CiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkgewogICAgICB2YXIgcmVzdWx0ID0gcGFydGl0aW9uID8gW1tdLCBbXV0gOiB7fTsKICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7CiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICAgIHZhciBrZXkgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIG9iaik7CiAgICAgICAgYmVoYXZpb3IocmVzdWx0LCB2YWx1ZSwga2V5KTsKICAgICAgfSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9OwogIH07CgogIC8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGUKICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi4KICBfLmdyb3VwQnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHsKICAgIGlmIChoYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XS5wdXNoKHZhbHVlKTsgZWxzZSByZXN1bHRba2V5XSA9IFt2YWx1ZV07CiAgfSk7CgogIC8vIEluZGV4ZXMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiwgc2ltaWxhciB0byBgZ3JvdXBCeWAsIGJ1dCBmb3IKICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuCiAgXy5pbmRleEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7CiAgICByZXN1bHRba2V5XSA9IHZhbHVlOwogIH0pOwoKICAvLyBDb3VudHMgaW5zdGFuY2VzIG9mIGFuIG9iamVjdCB0aGF0IGdyb3VwIGJ5IGEgY2VydGFpbiBjcml0ZXJpb24uIFBhc3MKICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUKICAvLyBjcml0ZXJpb24uCiAgXy5jb3VudEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7CiAgICBpZiAoaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0rKzsgZWxzZSByZXN1bHRba2V5XSA9IDE7CiAgfSk7CgogIHZhciByZVN0clN5bWJvbCA9IC9bXlx1ZDgwMC1cdWRmZmZdfFtcdWQ4MDAtXHVkYmZmXVtcdWRjMDAtXHVkZmZmXXxbXHVkODAwLVx1ZGZmZl0vZzsKICAvLyBTYWZlbHkgY3JlYXRlIGEgcmVhbCwgbGl2ZSBhcnJheSBmcm9tIGFueXRoaW5nIGl0ZXJhYmxlLgogIF8udG9BcnJheSA9IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKCFvYmopIHJldHVybiBbXTsKICAgIGlmIChfLmlzQXJyYXkob2JqKSkgcmV0dXJuIHNsaWNlLmNhbGwob2JqKTsKICAgIGlmIChfLmlzU3RyaW5nKG9iaikpIHsKICAgICAgLy8gS2VlcCBzdXJyb2dhdGUgcGFpciBjaGFyYWN0ZXJzIHRvZ2V0aGVyCiAgICAgIHJldHVybiBvYmoubWF0Y2gocmVTdHJTeW1ib2wpOwogICAgfQogICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpOwogICAgcmV0dXJuIF8udmFsdWVzKG9iaik7CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LgogIF8uc2l6ZSA9IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gMDsKICAgIHJldHVybiBpc0FycmF5TGlrZShvYmopID8gb2JqLmxlbmd0aCA6IF8ua2V5cyhvYmopLmxlbmd0aDsKICB9OwoKICAvLyBTcGxpdCBhIGNvbGxlY3Rpb24gaW50byB0d28gYXJyYXlzOiBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIHNhdGlzZnkgdGhlIGdpdmVuCiAgLy8gcHJlZGljYXRlLCBhbmQgb25lIHdob3NlIGVsZW1lbnRzIGFsbCBkbyBub3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLgogIF8ucGFydGl0aW9uID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwgcGFzcykgewogICAgcmVzdWx0W3Bhc3MgPyAwIDogMV0ucHVzaCh2YWx1ZSk7CiAgfSwgdHJ1ZSk7CgogIC8vIEFycmF5IEZ1bmN0aW9ucwogIC8vIC0tLS0tLS0tLS0tLS0tLQoKICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE4KICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrCiAgLy8gYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLgogIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKICAgIGlmIChhcnJheSA9PSBudWxsIHx8IGFycmF5Lmxlbmd0aCA8IDEpIHJldHVybiBuID09IG51bGwgPyB2b2lkIDAgOiBbXTsKICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVswXTsKICAgIHJldHVybiBfLmluaXRpYWwoYXJyYXksIGFycmF5Lmxlbmd0aCAtIG4pOwogIH07CgogIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvbgogIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluCiAgLy8gdGhlIGFycmF5LCBleGNsdWRpbmcgdGhlIGxhc3QgTi4KICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHsKICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSAobiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pKSk7CiAgfTsKCiAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTgogIC8vIHZhbHVlcyBpbiB0aGUgYXJyYXkuCiAgXy5sYXN0ID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7CiAgICBpZiAoYXJyYXkgPT0gbnVsbCB8fCBhcnJheS5sZW5ndGggPCAxKSByZXR1cm4gbiA9PSBudWxsID8gdm9pZCAwIDogW107CiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07CiAgICByZXR1cm4gXy5yZXN0KGFycmF5LCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSBuKSk7CiAgfTsKCiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYCBhbmQgYGRyb3BgLgogIC8vIEVzcGVjaWFsbHkgdXNlZnVsIG9uIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nIGFuICoqbioqIHdpbGwgcmV0dXJuCiAgLy8gdGhlIHJlc3QgTiB2YWx1ZXMgaW4gdGhlIGFycmF5LgogIF8ucmVzdCA9IF8udGFpbCA9IF8uZHJvcCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkgewogICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKTsKICB9OwoKICAvLyBUcmltIG91dCBhbGwgZmFsc3kgdmFsdWVzIGZyb20gYW4gYXJyYXkuCiAgXy5jb21wYWN0ID0gZnVuY3Rpb24oYXJyYXkpIHsKICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgQm9vbGVhbik7CiAgfTsKCiAgLy8gSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgYSByZWN1cnNpdmUgYGZsYXR0ZW5gIGZ1bmN0aW9uLgogIHZhciBmbGF0dGVuID0gZnVuY3Rpb24oaW5wdXQsIHNoYWxsb3csIHN0cmljdCwgb3V0cHV0KSB7CiAgICBvdXRwdXQgPSBvdXRwdXQgfHwgW107CiAgICB2YXIgaWR4ID0gb3V0cHV0Lmxlbmd0aDsKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoaW5wdXQpOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHZhbHVlID0gaW5wdXRbaV07CiAgICAgIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkgJiYgKF8uaXNBcnJheSh2YWx1ZSkgfHwgXy5pc0FyZ3VtZW50cyh2YWx1ZSkpKSB7CiAgICAgICAgLy8gRmxhdHRlbiBjdXJyZW50IGxldmVsIG9mIGFycmF5IG9yIGFyZ3VtZW50cyBvYmplY3QuCiAgICAgICAgaWYgKHNoYWxsb3cpIHsKICAgICAgICAgIHZhciBqID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoOwogICAgICAgICAgd2hpbGUgKGogPCBsZW4pIG91dHB1dFtpZHgrK10gPSB2YWx1ZVtqKytdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QsIG91dHB1dCk7CiAgICAgICAgICBpZHggPSBvdXRwdXQubGVuZ3RoOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghc3RyaWN0KSB7CiAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0cHV0OwogIH07CgogIC8vIEZsYXR0ZW4gb3V0IGFuIGFycmF5LCBlaXRoZXIgcmVjdXJzaXZlbHkgKGJ5IGRlZmF1bHQpLCBvciBqdXN0IG9uZSBsZXZlbC4KICBfLmZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSwgc2hhbGxvdykgewogICAgcmV0dXJuIGZsYXR0ZW4oYXJyYXksIHNoYWxsb3csIGZhbHNlKTsKICB9OwoKICAvLyBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoZSBhcnJheSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCB2YWx1ZShzKS4KICBfLndpdGhvdXQgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGFycmF5LCBvdGhlckFycmF5cykgewogICAgcmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSwgb3RoZXJBcnJheXMpOwogIH0pOwoKICAvLyBQcm9kdWNlIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXkuIElmIHRoZSBhcnJheSBoYXMgYWxyZWFkeQogIC8vIGJlZW4gc29ydGVkLCB5b3UgaGF2ZSB0aGUgb3B0aW9uIG9mIHVzaW5nIGEgZmFzdGVyIGFsZ29yaXRobS4KICAvLyBUaGUgZmFzdGVyIGFsZ29yaXRobSB3aWxsIG5vdCB3b3JrIHdpdGggYW4gaXRlcmF0ZWUgaWYgdGhlIGl0ZXJhdGVlCiAgLy8gaXMgbm90IGEgb25lLXRvLW9uZSBmdW5jdGlvbiwgc28gcHJvdmlkaW5nIGFuIGl0ZXJhdGVlIHdpbGwgZGlzYWJsZQogIC8vIHRoZSBmYXN0ZXIgYWxnb3JpdGhtLgogIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuCiAgXy51bmlxID0gXy51bmlxdWUgPSBmdW5jdGlvbihhcnJheSwgaXNTb3J0ZWQsIGl0ZXJhdGVlLCBjb250ZXh0KSB7CiAgICBpZiAoIV8uaXNCb29sZWFuKGlzU29ydGVkKSkgewogICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7CiAgICAgIGl0ZXJhdGVlID0gaXNTb3J0ZWQ7CiAgICAgIGlzU29ydGVkID0gZmFsc2U7CiAgICB9CiAgICBpZiAoaXRlcmF0ZWUgIT0gbnVsbCkgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7CiAgICB2YXIgcmVzdWx0ID0gW107CiAgICB2YXIgc2VlbiA9IFtdOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgdmFsdWUgPSBhcnJheVtpXSwKICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7CiAgICAgIGlmIChpc1NvcnRlZCAmJiAhaXRlcmF0ZWUpIHsKICAgICAgICBpZiAoIWkgfHwgc2VlbiAhPT0gY29tcHV0ZWQpIHJlc3VsdC5wdXNoKHZhbHVlKTsKICAgICAgICBzZWVuID0gY29tcHV0ZWQ7CiAgICAgIH0gZWxzZSBpZiAoaXRlcmF0ZWUpIHsKICAgICAgICBpZiAoIV8uY29udGFpbnMoc2VlbiwgY29tcHV0ZWQpKSB7CiAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpOwogICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghXy5jb250YWlucyhyZXN1bHQsIHZhbHVlKSkgewogICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2YKICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy4KICBfLnVuaW9uID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihhcnJheXMpIHsKICAgIHJldHVybiBfLnVuaXEoZmxhdHRlbihhcnJheXMsIHRydWUsIHRydWUpKTsKICB9KTsKCiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGl0ZW0gc2hhcmVkIGJldHdlZW4gYWxsIHRoZQogIC8vIHBhc3NlZC1pbiBhcnJheXMuCiAgXy5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbihhcnJheSkgewogICAgdmFyIHJlc3VsdCA9IFtdOwogICAgdmFyIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgaXRlbSA9IGFycmF5W2ldOwogICAgICBpZiAoXy5jb250YWlucyhyZXN1bHQsIGl0ZW0pKSBjb250aW51ZTsKICAgICAgdmFyIGo7CiAgICAgIGZvciAoaiA9IDE7IGogPCBhcmdzTGVuZ3RoOyBqKyspIHsKICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKGogPT09IGFyZ3NMZW5ndGgpIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBUYWtlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gb25lIGFycmF5IGFuZCBhIG51bWJlciBvZiBvdGhlciBhcnJheXMuCiAgLy8gT25seSB0aGUgZWxlbWVudHMgcHJlc2VudCBpbiBqdXN0IHRoZSBmaXJzdCBhcnJheSB3aWxsIHJlbWFpbi4KICBfLmRpZmZlcmVuY2UgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGFycmF5LCByZXN0KSB7CiAgICByZXN0ID0gZmxhdHRlbihyZXN0LCB0cnVlLCB0cnVlKTsKICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpewogICAgICByZXR1cm4gIV8uY29udGFpbnMocmVzdCwgdmFsdWUpOwogICAgfSk7CiAgfSk7CgogIC8vIENvbXBsZW1lbnQgb2YgXy56aXAuIFVuemlwIGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIGFuZCBncm91cHMKICAvLyBlYWNoIGFycmF5J3MgZWxlbWVudHMgb24gc2hhcmVkIGluZGljZXMuCiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICB2YXIgbGVuZ3RoID0gYXJyYXkgJiYgXy5tYXgoYXJyYXksIGdldExlbmd0aCkubGVuZ3RoIHx8IDA7CiAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTsKCiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIHJlc3VsdFtpbmRleF0gPSBfLnBsdWNrKGFycmF5LCBpbmRleCk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vIFppcCB0b2dldGhlciBtdWx0aXBsZSBsaXN0cyBpbnRvIGEgc2luZ2xlIGFycmF5IC0tIGVsZW1lbnRzIHRoYXQgc2hhcmUKICAvLyBhbiBpbmRleCBnbyB0b2dldGhlci4KICBfLnppcCA9IHJlc3RBcmd1bWVudHMoXy51bnppcCk7CgogIC8vIENvbnZlcnRzIGxpc3RzIGludG8gb2JqZWN0cy4gUGFzcyBlaXRoZXIgYSBzaW5nbGUgYXJyYXkgb2YgYFtrZXksIHZhbHVlXWAKICAvLyBwYWlycywgb3IgdHdvIHBhcmFsbGVsIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGggLS0gb25lIG9mIGtleXMsIGFuZCBvbmUgb2YKICAvLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuIFBhc3NpbmcgYnkgcGFpcnMgaXMgdGhlIHJldmVyc2Ugb2YgXy5wYWlycy4KICBfLm9iamVjdCA9IGZ1bmN0aW9uKGxpc3QsIHZhbHVlcykgewogICAgdmFyIHJlc3VsdCA9IHt9OwogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChsaXN0KTsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIGlmICh2YWx1ZXMpIHsKICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0W2xpc3RbaV1bMF1dID0gbGlzdFtpXVsxXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBmaW5kSW5kZXggYW5kIGZpbmRMYXN0SW5kZXggZnVuY3Rpb25zLgogIHZhciBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciA9IGZ1bmN0aW9uKGRpcikgewogICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIGNvbnRleHQpIHsKICAgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTsKICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7CiAgICAgIHZhciBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTsKICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikgewogICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7CiAgICAgIH0KICAgICAgcmV0dXJuIC0xOwogICAgfTsKICB9OwoKICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBpbmRleCBvbiBhbiBhcnJheS1saWtlIHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QuCiAgXy5maW5kSW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigxKTsKICBfLmZpbmRMYXN0SW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigtMSk7CgogIC8vIFVzZSBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gZmlndXJlIG91dCB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2gKICAvLyBhbiBvYmplY3Qgc2hvdWxkIGJlIGluc2VydGVkIHNvIGFzIHRvIG1haW50YWluIG9yZGVyLiBVc2VzIGJpbmFyeSBzZWFyY2guCiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7CiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTsKICAgIHZhciB2YWx1ZSA9IGl0ZXJhdGVlKG9iaik7CiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7CiAgICB3aGlsZSAobG93IDwgaGlnaCkgewogICAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKTsKICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDsKICAgIH0KICAgIHJldHVybiBsb3c7CiAgfTsKCiAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgaW5kZXhPZiBhbmQgbGFzdEluZGV4T2YgZnVuY3Rpb25zLgogIHZhciBjcmVhdGVJbmRleEZpbmRlciA9IGZ1bmN0aW9uKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHsKICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgaXRlbSwgaWR4KSB7CiAgICAgIHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsKICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHsKICAgICAgICBpZiAoZGlyID4gMCkgewogICAgICAgICAgaSA9IGlkeCA+PSAwID8gaWR4IDogTWF0aC5tYXgoaWR4ICsgbGVuZ3RoLCBpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGVuZ3RoID0gaWR4ID49IDAgPyBNYXRoLm1pbihpZHggKyAxLCBsZW5ndGgpIDogaWR4ICsgbGVuZ3RoICsgMTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkgewogICAgICAgIGlkeCA9IHNvcnRlZEluZGV4KGFycmF5LCBpdGVtKTsKICAgICAgICByZXR1cm4gYXJyYXlbaWR4XSA9PT0gaXRlbSA/IGlkeCA6IC0xOwogICAgICB9CiAgICAgIGlmIChpdGVtICE9PSBpdGVtKSB7CiAgICAgICAgaWR4ID0gcHJlZGljYXRlRmluZChzbGljZS5jYWxsKGFycmF5LCBpLCBsZW5ndGgpLCBfLmlzTmFOKTsKICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7CiAgICAgIH0KICAgICAgZm9yIChpZHggPSBkaXIgPiAwID8gaSA6IGxlbmd0aCAtIDE7IGlkeCA+PSAwICYmIGlkeCA8IGxlbmd0aDsgaWR4ICs9IGRpcikgewogICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4OwogICAgICB9CiAgICAgIHJldHVybiAtMTsKICAgIH07CiAgfTsKCiAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LAogIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuCiAgLy8gSWYgdGhlIGFycmF5IGlzIGxhcmdlIGFuZCBhbHJlYWR5IGluIHNvcnQgb3JkZXIsIHBhc3MgYHRydWVgCiAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC4KICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7CiAgXy5sYXN0SW5kZXhPZiA9IGNyZWF0ZUluZGV4RmluZGVyKC0xLCBfLmZpbmRMYXN0SW5kZXgpOwoKICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mCiAgLy8gdGhlIG5hdGl2ZSBQeXRob24gYHJhbmdlKClgIGZ1bmN0aW9uLiBTZWUKICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLgogIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkgewogICAgaWYgKHN0b3AgPT0gbnVsbCkgewogICAgICBzdG9wID0gc3RhcnQgfHwgMDsKICAgICAgc3RhcnQgPSAwOwogICAgfQogICAgaWYgKCFzdGVwKSB7CiAgICAgIHN0ZXAgPSBzdG9wIDwgc3RhcnQgPyAtMSA6IDE7CiAgICB9CgogICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTsKICAgIHZhciByYW5nZSA9IEFycmF5KGxlbmd0aCk7CgogICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKywgc3RhcnQgKz0gc3RlcCkgewogICAgICByYW5nZVtpZHhdID0gc3RhcnQ7CiAgICB9CgogICAgcmV0dXJuIHJhbmdlOwogIH07CgogIC8vIENodW5rIGEgc2luZ2xlIGFycmF5IGludG8gbXVsdGlwbGUgYXJyYXlzLCBlYWNoIGNvbnRhaW5pbmcgYGNvdW50YCBvciBmZXdlcgogIC8vIGl0ZW1zLgogIF8uY2h1bmsgPSBmdW5jdGlvbihhcnJheSwgY291bnQpIHsKICAgIGlmIChjb3VudCA9PSBudWxsIHx8IGNvdW50IDwgMSkgcmV0dXJuIFtdOwogICAgdmFyIHJlc3VsdCA9IFtdOwogICAgdmFyIGkgPSAwLCBsZW5ndGggPSBhcnJheS5sZW5ndGg7CiAgICB3aGlsZSAoaSA8IGxlbmd0aCkgewogICAgICByZXN1bHQucHVzaChzbGljZS5jYWxsKGFycmF5LCBpLCBpICs9IGNvdW50KSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vIEZ1bmN0aW9uIChhaGVtKSBGdW5jdGlvbnMKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0KCiAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIGV4ZWN1dGUgYSBmdW5jdGlvbiBhcyBhIGNvbnN0cnVjdG9yCiAgLy8gb3IgYSBub3JtYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLgogIHZhciBleGVjdXRlQm91bmQgPSBmdW5jdGlvbihzb3VyY2VGdW5jLCBib3VuZEZ1bmMsIGNvbnRleHQsIGNhbGxpbmdDb250ZXh0LCBhcmdzKSB7CiAgICBpZiAoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpIHJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOwogICAgdmFyIHNlbGYgPSBiYXNlQ3JlYXRlKHNvdXJjZUZ1bmMucHJvdG90eXBlKTsKICAgIHZhciByZXN1bHQgPSBzb3VyY2VGdW5jLmFwcGx5KHNlbGYsIGFyZ3MpOwogICAgaWYgKF8uaXNPYmplY3QocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDsKICAgIHJldHVybiBzZWxmOwogIH07CgogIC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLAogIC8vIG9wdGlvbmFsbHkpLiBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgRnVuY3Rpb24uYmluZGAgaWYKICAvLyBhdmFpbGFibGUuCiAgXy5iaW5kID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdzKSB7CiAgICBpZiAoIV8uaXNGdW5jdGlvbihmdW5jKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uJyk7CiAgICB2YXIgYm91bmQgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGNhbGxBcmdzKSB7CiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIGNvbnRleHQsIHRoaXMsIGFyZ3MuY29uY2F0KGNhbGxBcmdzKSk7CiAgICB9KTsKICAgIHJldHVybiBib3VuZDsKICB9KTsKCiAgLy8gUGFydGlhbGx5IGFwcGx5IGEgZnVuY3Rpb24gYnkgY3JlYXRpbmcgYSB2ZXJzaW9uIHRoYXQgaGFzIGhhZCBzb21lIG9mIGl0cwogIC8vIGFyZ3VtZW50cyBwcmUtZmlsbGVkLCB3aXRob3V0IGNoYW5naW5nIGl0cyBkeW5hbWljIGB0aGlzYCBjb250ZXh0LiBfIGFjdHMKICAvLyBhcyBhIHBsYWNlaG9sZGVyIGJ5IGRlZmF1bHQsIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMgdG8gYmUKICAvLyBwcmUtZmlsbGVkLiBTZXQgYF8ucGFydGlhbC5wbGFjZWhvbGRlcmAgZm9yIGEgY3VzdG9tIHBsYWNlaG9sZGVyIGFyZ3VtZW50LgogIF8ucGFydGlhbCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oZnVuYywgYm91bmRBcmdzKSB7CiAgICB2YXIgcGxhY2Vob2xkZXIgPSBfLnBhcnRpYWwucGxhY2Vob2xkZXI7CiAgICB2YXIgYm91bmQgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDsKICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gcGxhY2Vob2xkZXIgPyBhcmd1bWVudHNbcG9zaXRpb24rK10gOiBib3VuZEFyZ3NbaV07CiAgICAgIH0KICAgICAgd2hpbGUgKHBvc2l0aW9uIDwgYXJndW1lbnRzLmxlbmd0aCkgYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7CiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIHRoaXMsIHRoaXMsIGFyZ3MpOwogICAgfTsKICAgIHJldHVybiBib3VuZDsKICB9KTsKCiAgXy5wYXJ0aWFsLnBsYWNlaG9sZGVyID0gXzsKCiAgLy8gQmluZCBhIG51bWJlciBvZiBhbiBvYmplY3QncyBtZXRob2RzIHRvIHRoYXQgb2JqZWN0LiBSZW1haW5pbmcgYXJndW1lbnRzCiAgLy8gYXJlIHRoZSBtZXRob2QgbmFtZXMgdG8gYmUgYm91bmQuIFVzZWZ1bCBmb3IgZW5zdXJpbmcgdGhhdCBhbGwgY2FsbGJhY2tzCiAgLy8gZGVmaW5lZCBvbiBhbiBvYmplY3QgYmVsb25nIHRvIGl0LgogIF8uYmluZEFsbCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24ob2JqLCBrZXlzKSB7CiAgICBrZXlzID0gZmxhdHRlbihrZXlzLCBmYWxzZSwgZmFsc2UpOwogICAgdmFyIGluZGV4ID0ga2V5cy5sZW5ndGg7CiAgICBpZiAoaW5kZXggPCAxKSB0aHJvdyBuZXcgRXJyb3IoJ2JpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMnKTsKICAgIHdoaWxlIChpbmRleC0tKSB7CiAgICAgIHZhciBrZXkgPSBrZXlzW2luZGV4XTsKICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7CiAgICB9CiAgfSk7CgogIC8vIE1lbW9pemUgYW4gZXhwZW5zaXZlIGZ1bmN0aW9uIGJ5IHN0b3JpbmcgaXRzIHJlc3VsdHMuCiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7CiAgICB2YXIgbWVtb2l6ZSA9IGZ1bmN0aW9uKGtleSkgewogICAgICB2YXIgY2FjaGUgPSBtZW1vaXplLmNhY2hlOwogICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTsKICAgICAgaWYgKCFoYXMoY2FjaGUsIGFkZHJlc3MpKSBjYWNoZVthZGRyZXNzXSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgcmV0dXJuIGNhY2hlW2FkZHJlc3NdOwogICAgfTsKICAgIG1lbW9pemUuY2FjaGUgPSB7fTsKICAgIHJldHVybiBtZW1vaXplOwogIH07CgogIC8vIERlbGF5cyBhIGZ1bmN0aW9uIGZvciB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYW5kIHRoZW4gY2FsbHMKICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuCiAgXy5kZWxheSA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oZnVuYywgd2FpdCwgYXJncykgewogICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgfSwgd2FpdCk7CiAgfSk7CgogIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcwogIC8vIGNsZWFyZWQuCiAgXy5kZWZlciA9IF8ucGFydGlhbChfLmRlbGF5LCBfLCAxKTsKCiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlCiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuCiAgLy8gYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uOwogIC8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzCiAgLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uCiAgXy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHsKICAgIHZhciB0aW1lb3V0LCBjb250ZXh0LCBhcmdzLCByZXN1bHQ7CiAgICB2YXIgcHJldmlvdXMgPSAwOwogICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307CgogICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7CiAgICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBfLm5vdygpOwogICAgICB0aW1lb3V0ID0gbnVsbDsKICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTsKICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7CiAgICB9OwoKICAgIHZhciB0aHJvdHRsZWQgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIG5vdyA9IF8ubm93KCk7CiAgICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7CiAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTsKICAgICAgY29udGV4dCA9IHRoaXM7CiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7CiAgICAgICAgaWYgKHRpbWVvdXQpIHsKICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTsKICAgICAgICAgIHRpbWVvdXQgPSBudWxsOwogICAgICAgIH0KICAgICAgICBwcmV2aW91cyA9IG5vdzsKICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpOwogICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsOwogICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7CiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CgogICAgdGhyb3R0bGVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkgewogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgIHByZXZpb3VzID0gMDsKICAgICAgdGltZW91dCA9IGNvbnRleHQgPSBhcmdzID0gbnVsbDsKICAgIH07CgogICAgcmV0dXJuIHRocm90dGxlZDsKICB9OwoKICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90CiAgLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvcgogIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZQogIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuCiAgXy5kZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkgewogICAgdmFyIHRpbWVvdXQsIHJlc3VsdDsKCiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbihjb250ZXh0LCBhcmdzKSB7CiAgICAgIHRpbWVvdXQgPSBudWxsOwogICAgICBpZiAoYXJncykgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTsKICAgIH07CgogICAgdmFyIGRlYm91bmNlZCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oYXJncykgewogICAgICBpZiAodGltZW91dCkgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICBpZiAoaW1tZWRpYXRlKSB7CiAgICAgICAgdmFyIGNhbGxOb3cgPSAhdGltZW91dDsKICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7CiAgICAgICAgaWYgKGNhbGxOb3cpIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGltZW91dCA9IF8uZGVsYXkobGF0ZXIsIHdhaXQsIHRoaXMsIGFyZ3MpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSk7CgogICAgZGVib3VuY2VkLmNhbmNlbCA9IGZ1bmN0aW9uKCkgewogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgIHRpbWVvdXQgPSBudWxsOwogICAgfTsKCiAgICByZXR1cm4gZGVib3VuY2VkOwogIH07CgogIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLAogIC8vIGFsbG93aW5nIHlvdSB0byBhZGp1c3QgYXJndW1lbnRzLCBydW4gY29kZSBiZWZvcmUgYW5kIGFmdGVyLCBhbmQKICAvLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLgogIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHsKICAgIHJldHVybiBfLnBhcnRpYWwod3JhcHBlciwgZnVuYyk7CiAgfTsKCiAgLy8gUmV0dXJucyBhIG5lZ2F0ZWQgdmVyc2lvbiBvZiB0aGUgcGFzc2VkLWluIHByZWRpY2F0ZS4KICBfLm5lZ2F0ZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9OwoKICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgYSBsaXN0IG9mIGZ1bmN0aW9ucywgZWFjaAogIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuCiAgXy5jb21wb3NlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGkgPSBzdGFydDsKICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIHdoaWxlIChpLS0pIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfTsKICB9OwoKICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC4KICBfLmFmdGVyID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgaWYgKC0tdGltZXMgPCAxKSB7CiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgfTsKICB9OwoKICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuCiAgXy5iZWZvcmUgPSBmdW5jdGlvbih0aW1lcywgZnVuYykgewogICAgdmFyIG1lbW87CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIGlmICgtLXRpbWVzID4gMCkgewogICAgICAgIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgaWYgKHRpbWVzIDw9IDEpIGZ1bmMgPSBudWxsOwogICAgICByZXR1cm4gbWVtbzsKICAgIH07CiAgfTsKCiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93CiAgLy8gb2Z0ZW4geW91IGNhbGwgaXQuIFVzZWZ1bCBmb3IgbGF6eSBpbml0aWFsaXphdGlvbi4KICBfLm9uY2UgPSBfLnBhcnRpYWwoXy5iZWZvcmUsIDIpOwoKICBfLnJlc3RBcmd1bWVudHMgPSByZXN0QXJndW1lbnRzOwoKICAvLyBPYmplY3QgRnVuY3Rpb25zCiAgLy8gLS0tLS0tLS0tLS0tLS0tLQoKICAvLyBLZXlzIGluIElFIDwgOSB0aGF0IHdvbid0IGJlIGl0ZXJhdGVkIGJ5IGBmb3Iga2V5IGluIC4uLmAgYW5kIHRodXMgbWlzc2VkLgogIHZhciBoYXNFbnVtQnVnID0gIXt0b1N0cmluZzogbnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7CiAgdmFyIG5vbkVudW1lcmFibGVQcm9wcyA9IFsndmFsdWVPZicsICdpc1Byb3RvdHlwZU9mJywgJ3RvU3RyaW5nJywKICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdoYXNPd25Qcm9wZXJ0eScsICd0b0xvY2FsZVN0cmluZyddOwoKICB2YXIgY29sbGVjdE5vbkVudW1Qcm9wcyA9IGZ1bmN0aW9uKG9iaiwga2V5cykgewogICAgdmFyIG5vbkVudW1JZHggPSBub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoOwogICAgdmFyIGNvbnN0cnVjdG9yID0gb2JqLmNvbnN0cnVjdG9yOwogICAgdmFyIHByb3RvID0gXy5pc0Z1bmN0aW9uKGNvbnN0cnVjdG9yKSAmJiBjb25zdHJ1Y3Rvci5wcm90b3R5cGUgfHwgT2JqUHJvdG87CgogICAgLy8gQ29uc3RydWN0b3IgaXMgYSBzcGVjaWFsIGNhc2UuCiAgICB2YXIgcHJvcCA9ICdjb25zdHJ1Y3Rvcic7CiAgICBpZiAoaGFzKG9iaiwgcHJvcCkgJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIGtleXMucHVzaChwcm9wKTsKCiAgICB3aGlsZSAobm9uRW51bUlkeC0tKSB7CiAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07CiAgICAgIGlmIChwcm9wIGluIG9iaiAmJiBvYmpbcHJvcF0gIT09IHByb3RvW3Byb3BdICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSB7CiAgICAgICAga2V5cy5wdXNoKHByb3ApOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLgogIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2AuCiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdOwogICAgaWYgKG5hdGl2ZUtleXMpIHJldHVybiBuYXRpdmVLZXlzKG9iaik7CiAgICB2YXIga2V5cyA9IFtdOwogICAgZm9yICh2YXIga2V5IGluIG9iaikgaWYgKGhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpOwogICAgLy8gQWhlbSwgSUUgPCA5LgogICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTsKICAgIHJldHVybiBrZXlzOwogIH07CgogIC8vIFJldHJpZXZlIGFsbCB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LgogIF8uYWxsS2V5cyA9IGZ1bmN0aW9uKG9iaikgewogICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTsKICAgIHZhciBrZXlzID0gW107CiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTsKICAgIC8vIEFoZW0sIElFIDwgOS4KICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7CiAgICByZXR1cm4ga2V5czsKICB9OwoKICAvLyBSZXRyaWV2ZSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCdzIHByb3BlcnRpZXMuCiAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHsKICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7CiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7CiAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgdmFsdWVzW2ldID0gb2JqW2tleXNbaV1dOwogICAgfQogICAgcmV0dXJuIHZhbHVlczsKICB9OwoKICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdC4KICAvLyBJbiBjb250cmFzdCB0byBfLm1hcCBpdCByZXR1cm5zIGFuIG9iamVjdC4KICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHsKICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpOwogICAgdmFyIGtleXMgPSBfLmtleXMob2JqKSwKICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCwKICAgICAgICByZXN1bHRzID0ge307CiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5c1tpbmRleF07CiAgICAgIHJlc3VsdHNbY3VycmVudEtleV0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICAvLyBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGEgbGlzdCBvZiBgW2tleSwgdmFsdWVdYCBwYWlycy4KICAvLyBUaGUgb3Bwb3NpdGUgb2YgXy5vYmplY3QuCiAgXy5wYWlycyA9IGZ1bmN0aW9uKG9iaikgewogICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTsKICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDsKICAgIHZhciBwYWlycyA9IEFycmF5KGxlbmd0aCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHBhaXJzW2ldID0gW2tleXNbaV0sIG9ialtrZXlzW2ldXV07CiAgICB9CiAgICByZXR1cm4gcGFpcnM7CiAgfTsKCiAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLgogIF8uaW52ZXJ0ID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgcmVzdWx0ID0ge307CiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgcmVzdWx0W29ialtrZXlzW2ldXV0gPSBrZXlzW2ldOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuCiAgLy8gQWxpYXNlZCBhcyBgbWV0aG9kc2AuCiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHsKICAgIHZhciBuYW1lcyA9IFtdOwogICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpOwogICAgfQogICAgcmV0dXJuIG5hbWVzLnNvcnQoKTsKICB9OwoKICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYXNzaWduZXIgZnVuY3Rpb25zLgogIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCBkZWZhdWx0cykgewogICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikgewogICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgaWYgKGRlZmF1bHRzKSBvYmogPSBPYmplY3Qob2JqKTsKICAgICAgaWYgKGxlbmd0aCA8IDIgfHwgb2JqID09IG51bGwpIHJldHVybiBvYmo7CiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHsKICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XSwKICAgICAgICAgICAga2V5cyA9IGtleXNGdW5jKHNvdXJjZSksCiAgICAgICAgICAgIGwgPSBrZXlzLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07CiAgICAgICAgICBpZiAoIWRlZmF1bHRzIHx8IG9ialtrZXldID09PSB2b2lkIDApIG9ialtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBvYmo7CiAgICB9OwogIH07CgogIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLgogIF8uZXh0ZW5kID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzKTsKCiAgLy8gQXNzaWducyBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgb3duIHByb3BlcnRpZXMgaW4gdGhlIHBhc3NlZC1pbiBvYmplY3QocykuCiAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24pCiAgXy5leHRlbmRPd24gPSBfLmFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKF8ua2V5cyk7CgogIC8vIFJldHVybnMgdGhlIGZpcnN0IGtleSBvbiBhbiBvYmplY3QgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdC4KICBfLmZpbmRLZXkgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkgewogICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTsKICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksIGtleTsKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIGtleSA9IGtleXNbaV07CiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTsKICAgIH0KICB9OwoKICAvLyBJbnRlcm5hbCBwaWNrIGhlbHBlciBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgYG9iamAgaGFzIGtleSBga2V5YC4KICB2YXIga2V5SW5PYmogPSBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHsKICAgIHJldHVybiBrZXkgaW4gb2JqOwogIH07CgogIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuCiAgXy5waWNrID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihvYmosIGtleXMpIHsKICAgIHZhciByZXN1bHQgPSB7fSwgaXRlcmF0ZWUgPSBrZXlzWzBdOwogICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0OwogICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHsKICAgICAgaWYgKGtleXMubGVuZ3RoID4gMSkgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBrZXlzWzFdKTsKICAgICAga2V5cyA9IF8uYWxsS2V5cyhvYmopOwogICAgfSBlbHNlIHsKICAgICAgaXRlcmF0ZWUgPSBrZXlJbk9iajsKICAgICAga2V5cyA9IGZsYXR0ZW4oa2V5cywgZmFsc2UsIGZhbHNlKTsKICAgICAgb2JqID0gT2JqZWN0KG9iaik7CiAgICB9CiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIga2V5ID0ga2V5c1tpXTsKICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07CiAgICAgIGlmIChpdGVyYXRlZSh2YWx1ZSwga2V5LCBvYmopKSByZXN1bHRba2V5XSA9IHZhbHVlOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9KTsKCiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IHdpdGhvdXQgdGhlIGJsYWNrbGlzdGVkIHByb3BlcnRpZXMuCiAgXy5vbWl0ID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihvYmosIGtleXMpIHsKICAgIHZhciBpdGVyYXRlZSA9IGtleXNbMF0sIGNvbnRleHQ7CiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkgewogICAgICBpdGVyYXRlZSA9IF8ubmVnYXRlKGl0ZXJhdGVlKTsKICAgICAgaWYgKGtleXMubGVuZ3RoID4gMSkgY29udGV4dCA9IGtleXNbMV07CiAgICB9IGVsc2UgewogICAgICBrZXlzID0gXy5tYXAoZmxhdHRlbihrZXlzLCBmYWxzZSwgZmFsc2UpLCBTdHJpbmcpOwogICAgICBpdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHsKICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTsKICAgICAgfTsKICAgIH0KICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7CiAgfSk7CgogIC8vIEZpbGwgaW4gYSBnaXZlbiBvYmplY3Qgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXMuCiAgXy5kZWZhdWx0cyA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cywgdHJ1ZSk7CgogIC8vIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gcHJvdG90eXBlIG9iamVjdC4KICAvLyBJZiBhZGRpdGlvbmFsIHByb3BlcnRpZXMgYXJlIHByb3ZpZGVkIHRoZW4gdGhleSB3aWxsIGJlIGFkZGVkIHRvIHRoZQogIC8vIGNyZWF0ZWQgb2JqZWN0LgogIF8uY3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlLCBwcm9wcykgewogICAgdmFyIHJlc3VsdCA9IGJhc2VDcmVhdGUocHJvdG90eXBlKTsKICAgIGlmIChwcm9wcykgXy5leHRlbmRPd24ocmVzdWx0LCBwcm9wcyk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC4KICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajsKICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7CiAgfTsKCiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLgogIC8vIFRoZSBwcmltYXJ5IHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gInRhcCBpbnRvIiBhIG1ldGhvZCBjaGFpbiwgaW4KICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi4KICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHsKICAgIGludGVyY2VwdG9yKG9iaik7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mIGBrZXk6dmFsdWVgIHBhaXJzLgogIF8uaXNNYXRjaCA9IGZ1bmN0aW9uKG9iamVjdCwgYXR0cnMpIHsKICAgIHZhciBrZXlzID0gXy5rZXlzKGF0dHJzKSwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7CiAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAhbGVuZ3RoOwogICAgdmFyIG9iaiA9IE9iamVjdChvYmplY3QpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIga2V5ID0ga2V5c1tpXTsKICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG9ialtrZXldIHx8ICEoa2V5IGluIG9iaikpIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH07CgoKICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgYGlzRXF1YWxgLgogIHZhciBlcSwgZGVlcEVxOwogIGVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHsKICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC4KICAgIC8vIFNlZSB0aGUgW0hhcm1vbnkgYGVnYWxgIHByb3Bvc2FsXShodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OmVnYWwpLgogICAgaWYgKGEgPT09IGIpIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjsKICAgIC8vIGBudWxsYCBvciBgdW5kZWZpbmVkYCBvbmx5IGVxdWFsIHRvIGl0c2VsZiAoc3RyaWN0IGNvbXBhcmlzb24pLgogICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBmYWxzZTsKICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuCiAgICBpZiAoYSAhPT0gYSkgcmV0dXJuIGIgIT09IGI7CiAgICAvLyBFeGhhdXN0IHByaW1pdGl2ZSBjaGVja3MKICAgIHZhciB0eXBlID0gdHlwZW9mIGE7CiAgICBpZiAodHlwZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlICE9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiAhPSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIGRlZXBFcShhLCBiLCBhU3RhY2ssIGJTdGFjayk7CiAgfTsKCiAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC4KICBkZWVwRXEgPSBmdW5jdGlvbihhLCBiLCBhU3RhY2ssIGJTdGFjaykgewogICAgLy8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuCiAgICBpZiAoYSBpbnN0YW5jZW9mIF8pIGEgPSBhLl93cmFwcGVkOwogICAgaWYgKGIgaW5zdGFuY2VvZiBfKSBiID0gYi5fd3JhcHBlZDsKICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuCiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTsKICAgIGlmIChjbGFzc05hbWUgIT09IHRvU3RyaW5nLmNhbGwoYikpIHJldHVybiBmYWxzZTsKICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7CiAgICAgIC8vIFN0cmluZ3MsIG51bWJlcnMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLgogICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOgogICAgICAvLyBSZWdFeHBzIGFyZSBjb2VyY2VkIHRvIHN0cmluZ3MgZm9yIGNvbXBhcmlzb24gKE5vdGU6ICcnICsgL2EvaSA9PT0gJy9hL2knKQogICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOgogICAgICAgIC8vIFByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdyYXBwZXJzIGFyZSBlcXVpdmFsZW50OyB0aHVzLCBgIjUiYCBpcwogICAgICAgIC8vIGVxdWl2YWxlbnQgdG8gYG5ldyBTdHJpbmcoIjUiKWAuCiAgICAgICAgcmV0dXJuICcnICsgYSA9PT0gJycgKyBiOwogICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOgogICAgICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuCiAgICAgICAgLy8gT2JqZWN0KE5hTikgaXMgZXF1aXZhbGVudCB0byBOYU4uCiAgICAgICAgaWYgKCthICE9PSArYSkgcmV0dXJuICtiICE9PSArYjsKICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLgogICAgICAgIHJldHVybiArYSA9PT0gMCA/IDEgLyArYSA9PT0gMSAvIGIgOiArYSA9PT0gK2I7CiAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOgogICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzoKICAgICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWVyaWMgcHJpbWl0aXZlIHZhbHVlcy4gRGF0ZXMgYXJlIGNvbXBhcmVkIGJ5IHRoZWlyCiAgICAgICAgLy8gbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zLiBOb3RlIHRoYXQgaW52YWxpZCBkYXRlcyB3aXRoIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9ucwogICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC4KICAgICAgICByZXR1cm4gK2EgPT09ICtiOwogICAgICBjYXNlICdbb2JqZWN0IFN5bWJvbF0nOgogICAgICAgIHJldHVybiBTeW1ib2xQcm90by52YWx1ZU9mLmNhbGwoYSkgPT09IFN5bWJvbFByb3RvLnZhbHVlT2YuY2FsbChiKTsKICAgIH0KCiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nOwogICAgaWYgKCFhcmVBcnJheXMpIHsKICAgICAgaWYgKHR5cGVvZiBhICE9ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7CgogICAgICAvLyBPYmplY3RzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWl2YWxlbnQsIGJ1dCBgT2JqZWN0YHMgb3IgYEFycmF5YHMKICAgICAgLy8gZnJvbSBkaWZmZXJlbnQgZnJhbWVzIGFyZS4KICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yOwogICAgICBpZiAoYUN0b3IgIT09IGJDdG9yICYmICEoXy5pc0Z1bmN0aW9uKGFDdG9yKSAmJiBhQ3RvciBpbnN0YW5jZW9mIGFDdG9yICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmlzRnVuY3Rpb24oYkN0b3IpICYmIGJDdG9yIGluc3RhbmNlb2YgYkN0b3IpCiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgICAvLyBBc3N1bWUgZXF1YWxpdHkgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGUgYWxnb3JpdGhtIGZvciBkZXRlY3RpbmcgY3ljbGljCiAgICAvLyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYC4KCiAgICAvLyBJbml0aWFsaXppbmcgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCiAgICAvLyBJdCdzIGRvbmUgaGVyZSBzaW5jZSB3ZSBvbmx5IG5lZWQgdGhlbSBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzIGNvbXBhcmlzb24uCiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107CiAgICBiU3RhY2sgPSBiU3RhY2sgfHwgW107CiAgICB2YXIgbGVuZ3RoID0gYVN0YWNrLmxlbmd0aDsKICAgIHdoaWxlIChsZW5ndGgtLSkgewogICAgICAvLyBMaW5lYXIgc2VhcmNoLiBQZXJmb3JtYW5jZSBpcyBpbnZlcnNlbHkgcHJvcG9ydGlvbmFsIHRvIHRoZSBudW1iZXIgb2YKICAgICAgLy8gdW5pcXVlIG5lc3RlZCBzdHJ1Y3R1cmVzLgogICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjsKICAgIH0KCiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCiAgICBhU3RhY2sucHVzaChhKTsKICAgIGJTdGFjay5wdXNoKGIpOwoKICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyBhbmQgYXJyYXlzLgogICAgaWYgKGFyZUFycmF5cykgewogICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS4KICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7CiAgICAgIGlmIChsZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7CiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuCiAgICAgIHdoaWxlIChsZW5ndGgtLSkgewogICAgICAgIGlmICghZXEoYVtsZW5ndGhdLCBiW2xlbmd0aF0sIGFTdGFjaywgYlN0YWNrKSkgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyBEZWVwIGNvbXBhcmUgb2JqZWN0cy4KICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTsKICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGg7CiAgICAgIC8vIEVuc3VyZSB0aGF0IGJvdGggb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIG51bWJlciBvZiBwcm9wZXJ0aWVzIGJlZm9yZSBjb21wYXJpbmcgZGVlcCBlcXVhbGl0eS4KICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlOwogICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKICAgICAgICAvLyBEZWVwIGNvbXBhcmUgZWFjaCBtZW1iZXIKICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07CiAgICAgICAgaWYgKCEoaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIGFTdGFjaywgYlN0YWNrKSkpIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuCiAgICBhU3RhY2sucG9wKCk7CiAgICBiU3RhY2sucG9wKCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC4KICBfLmlzRXF1YWwgPSBmdW5jdGlvbihhLCBiKSB7CiAgICByZXR1cm4gZXEoYSwgYik7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/CiAgLy8gQW4gImVtcHR5IiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuCiAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7CiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB0cnVlOwogICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgJiYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSB8fCBfLmlzQXJndW1lbnRzKG9iaikpKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDsKICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIERPTSBlbGVtZW50PwogIF8uaXNFbGVtZW50ID0gZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT8KICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheQogIF8uaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nOwogIH07CgogIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gb2JqZWN0PwogIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHsKICAgIHZhciB0eXBlID0gdHlwZW9mIG9iajsKICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqOwogIH07CgogIC8vIEFkZCBzb21lIGlzVHlwZSBtZXRob2RzOiBpc0FyZ3VtZW50cywgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzTnVtYmVyLCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Vycm9yLCBpc01hcCwgaXNXZWFrTWFwLCBpc1NldCwgaXNXZWFrU2V0LgogIF8uZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJywgJ0Vycm9yJywgJ1N5bWJvbCcsICdNYXAnLCAnV2Vha01hcCcsICdTZXQnLCAnV2Vha1NldCddLCBmdW5jdGlvbihuYW1lKSB7CiAgICBfWydpcycgKyBuYW1lXSA9IGZ1bmN0aW9uKG9iaikgewogICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCAnICsgbmFtZSArICddJzsKICAgIH07CiAgfSk7CgogIC8vIERlZmluZSBhIGZhbGxiYWNrIHZlcnNpb24gb2YgdGhlIG1ldGhvZCBpbiBicm93c2VycyAoYWhlbSwgSUUgPCA5KSwgd2hlcmUKICAvLyB0aGVyZSBpc24ndCBhbnkgaW5zcGVjdGFibGUgIkFyZ3VtZW50cyIgdHlwZS4KICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkgewogICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikgewogICAgICByZXR1cm4gaGFzKG9iaiwgJ2NhbGxlZScpOwogICAgfTsKICB9CgogIC8vIE9wdGltaXplIGBpc0Z1bmN0aW9uYCBpZiBhcHByb3ByaWF0ZS4gV29yayBhcm91bmQgc29tZSB0eXBlb2YgYnVncyBpbiBvbGQgdjgsCiAgLy8gSUUgMTEgKCMxNjIxKSwgU2FmYXJpIDggKCMxOTI5KSwgYW5kIFBoYW50b21KUyAoIzIyMzYpLgogIHZhciBub2RlbGlzdCA9IHJvb3QuZG9jdW1lbnQgJiYgcm9vdC5kb2N1bWVudC5jaGlsZE5vZGVzOwogIGlmICggdHJ1ZSAmJiB0eXBlb2YgSW50OEFycmF5ICE9ICdvYmplY3QnICYmIHR5cGVvZiBub2RlbGlzdCAhPSAnZnVuY3Rpb24nKSB7CiAgICBfLmlzRnVuY3Rpb24gPSBmdW5jdGlvbihvYmopIHsKICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTsKICAgIH07CiAgfQoKICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/CiAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuICFfLmlzU3ltYm9sKG9iaikgJiYgaXNGaW5pdGUob2JqKSAmJiAhaXNOYU4ocGFyc2VGbG9hdChvYmopKTsKICB9OwoKICAvLyBJcyB0aGUgZ2l2ZW4gdmFsdWUgYE5hTmA/CiAgXy5pc05hTiA9IGZ1bmN0aW9uKG9iaikgewogICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBpc05hTihvYmopOwogIH07CgogIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBib29sZWFuPwogIF8uaXNCb29sZWFuID0gZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gb2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UgfHwgdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBCb29sZWFuXSc7CiAgfTsKCiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsPwogIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7CiAgICByZXR1cm4gb2JqID09PSBudWxsOwogIH07CgogIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkPwogIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHsKICAgIHJldHVybiBvYmogPT09IHZvaWQgMDsKICB9OwoKICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5CiAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS4KICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkgewogICAgaWYgKCFfLmlzQXJyYXkocGF0aCkpIHsKICAgICAgcmV0dXJuIGhhcyhvYmosIHBhdGgpOwogICAgfQogICAgdmFyIGxlbmd0aCA9IHBhdGgubGVuZ3RoOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIga2V5ID0gcGF0aFtpXTsKICAgICAgaWYgKG9iaiA9PSBudWxsIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBvYmogPSBvYmpba2V5XTsKICAgIH0KICAgIHJldHVybiAhIWxlbmd0aDsKICB9OwoKICAvLyBVdGlsaXR5IEZ1bmN0aW9ucwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tCgogIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHMKICAvLyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuCiAgXy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7CiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvLyBLZWVwIHRoZSBpZGVudGl0eSBmdW5jdGlvbiBhcm91bmQgZm9yIGRlZmF1bHQgaXRlcmF0ZWVzLgogIF8uaWRlbnRpdHkgPSBmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlOwogIH07CgogIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS4KICBfLmNvbnN0YW50ID0gZnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfTsKICB9OwoKICBfLm5vb3AgPSBmdW5jdGlvbigpe307CgogIC8vIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIHBhc3NlZCBhbiBvYmplY3QsIHdpbGwgdHJhdmVyc2UgdGhhdCBvYmplY3TigJlzCiAgLy8gcHJvcGVydGllcyBkb3duIHRoZSBnaXZlbiBgcGF0aGAsIHNwZWNpZmllZCBhcyBhbiBhcnJheSBvZiBrZXlzIG9yIGluZGV4ZXMuCiAgXy5wcm9wZXJ0eSA9IGZ1bmN0aW9uKHBhdGgpIHsKICAgIGlmICghXy5pc0FycmF5KHBhdGgpKSB7CiAgICAgIHJldHVybiBzaGFsbG93UHJvcGVydHkocGF0aCk7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7CiAgICAgIHJldHVybiBkZWVwR2V0KG9iaiwgcGF0aCk7CiAgICB9OwogIH07CgogIC8vIEdlbmVyYXRlcyBhIGZ1bmN0aW9uIGZvciBhIGdpdmVuIG9iamVjdCB0aGF0IHJldHVybnMgYSBnaXZlbiBwcm9wZXJ0eS4KICBfLnByb3BlcnR5T2YgPSBmdW5jdGlvbihvYmopIHsKICAgIGlmIChvYmogPT0gbnVsbCkgewogICAgICByZXR1cm4gZnVuY3Rpb24oKXt9OwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uKHBhdGgpIHsKICAgICAgcmV0dXJuICFfLmlzQXJyYXkocGF0aCkgPyBvYmpbcGF0aF0gOiBkZWVwR2V0KG9iaiwgcGF0aCk7CiAgICB9OwogIH07CgogIC8vIFJldHVybnMgYSBwcmVkaWNhdGUgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZgogIC8vIGBrZXk6dmFsdWVgIHBhaXJzLgogIF8ubWF0Y2hlciA9IF8ubWF0Y2hlcyA9IGZ1bmN0aW9uKGF0dHJzKSB7CiAgICBhdHRycyA9IF8uZXh0ZW5kT3duKHt9LCBhdHRycyk7CiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7CiAgICAgIHJldHVybiBfLmlzTWF0Y2gob2JqLCBhdHRycyk7CiAgICB9OwogIH07CgogIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLgogIF8udGltZXMgPSBmdW5jdGlvbihuLCBpdGVyYXRlZSwgY29udGV4dCkgewogICAgdmFyIGFjY3VtID0gQXJyYXkoTWF0aC5tYXgoMCwgbikpOwogICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBhY2N1bVtpXSA9IGl0ZXJhdGVlKGkpOwogICAgcmV0dXJuIGFjY3VtOwogIH07CgogIC8vIFJldHVybiBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKGluY2x1c2l2ZSkuCiAgXy5yYW5kb20gPSBmdW5jdGlvbihtaW4sIG1heCkgewogICAgaWYgKG1heCA9PSBudWxsKSB7CiAgICAgIG1heCA9IG1pbjsKICAgICAgbWluID0gMDsKICAgIH0KICAgIHJldHVybiBtaW4gKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpOwogIH07CgogIC8vIEEgKHBvc3NpYmx5IGZhc3Rlcikgd2F5IHRvIGdldCB0aGUgY3VycmVudCB0aW1lc3RhbXAgYXMgYW4gaW50ZWdlci4KICBfLm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogIH07CgogIC8vIExpc3Qgb2YgSFRNTCBlbnRpdGllcyBmb3IgZXNjYXBpbmcuCiAgdmFyIGVzY2FwZU1hcCA9IHsKICAgICcmJzogJyZhbXA7JywKICAgICc8JzogJyZsdDsnLAogICAgJz4nOiAnJmd0OycsCiAgICAnIic6ICcmcXVvdDsnLAogICAgIiciOiAnJiN4Mjc7JywKICAgICdgJzogJyYjeDYwOycKICB9OwogIHZhciB1bmVzY2FwZU1hcCA9IF8uaW52ZXJ0KGVzY2FwZU1hcCk7CgogIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi4KICB2YXIgY3JlYXRlRXNjYXBlciA9IGZ1bmN0aW9uKG1hcCkgewogICAgdmFyIGVzY2FwZXIgPSBmdW5jdGlvbihtYXRjaCkgewogICAgICByZXR1cm4gbWFwW21hdGNoXTsKICAgIH07CiAgICAvLyBSZWdleGVzIGZvciBpZGVudGlmeWluZyBhIGtleSB0aGF0IG5lZWRzIHRvIGJlIGVzY2FwZWQuCiAgICB2YXIgc291cmNlID0gJyg/OicgKyBfLmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7CiAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpOwogICAgdmFyIHJlcGxhY2VSZWdleHAgPSBSZWdFeHAoc291cmNlLCAnZycpOwogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykgewogICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7CiAgICAgIHJldHVybiB0ZXN0UmVnZXhwLnRlc3Qoc3RyaW5nKSA/IHN0cmluZy5yZXBsYWNlKHJlcGxhY2VSZWdleHAsIGVzY2FwZXIpIDogc3RyaW5nOwogICAgfTsKICB9OwogIF8uZXNjYXBlID0gY3JlYXRlRXNjYXBlcihlc2NhcGVNYXApOwogIF8udW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTsKCiAgLy8gVHJhdmVyc2VzIHRoZSBjaGlsZHJlbiBvZiBgb2JqYCBhbG9uZyBgcGF0aGAuIElmIGEgY2hpbGQgaXMgYSBmdW5jdGlvbiwgaXQKICAvLyBpcyBpbnZva2VkIHdpdGggaXRzIHBhcmVudCBhcyBjb250ZXh0LiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmluYWwKICAvLyBjaGlsZCwgb3IgYGZhbGxiYWNrYCBpZiBhbnkgY2hpbGQgaXMgdW5kZWZpbmVkLgogIF8ucmVzdWx0ID0gZnVuY3Rpb24ob2JqLCBwYXRoLCBmYWxsYmFjaykgewogICAgaWYgKCFfLmlzQXJyYXkocGF0aCkpIHBhdGggPSBbcGF0aF07CiAgICB2YXIgbGVuZ3RoID0gcGF0aC5sZW5ndGg7CiAgICBpZiAoIWxlbmd0aCkgewogICAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKGZhbGxiYWNrKSA/IGZhbGxiYWNrLmNhbGwob2JqKSA6IGZhbGxiYWNrOwogICAgfQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgcHJvcCA9IG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW3BhdGhbaV1dOwogICAgICBpZiAocHJvcCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJvcCA9IGZhbGxiYWNrOwogICAgICAgIGkgPSBsZW5ndGg7IC8vIEVuc3VyZSB3ZSBkb24ndCBjb250aW51ZSBpdGVyYXRpbmcuCiAgICAgIH0KICAgICAgb2JqID0gXy5pc0Z1bmN0aW9uKHByb3ApID8gcHJvcC5jYWxsKG9iaikgOiBwcm9wOwogICAgfQogICAgcmV0dXJuIG9iajsKICB9OwoKICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLgogIC8vIFVzZWZ1bCBmb3IgdGVtcG9yYXJ5IERPTSBpZHMuCiAgdmFyIGlkQ291bnRlciA9IDA7CiAgXy51bmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkgewogICAgdmFyIGlkID0gKytpZENvdW50ZXIgKyAnJzsKICAgIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkOwogIH07CgogIC8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZQogIC8vIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy4KICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7CiAgICBldmFsdWF0ZTogLzwlKFtcc1xTXSs/KSU+L2csCiAgICBpbnRlcnBvbGF0ZTogLzwlPShbXHNcU10rPyklPi9nLAogICAgZXNjYXBlOiAvPCUtKFtcc1xTXSs/KSU+L2cKICB9OwoKICAvLyBXaGVuIGN1c3RvbWl6aW5nIGB0ZW1wbGF0ZVNldHRpbmdzYCwgaWYgeW91IGRvbid0IHdhbnQgdG8gZGVmaW5lIGFuCiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpcwogIC8vIGd1YXJhbnRlZWQgbm90IHRvIG1hdGNoLgogIHZhciBub01hdGNoID0gLyguKV4vOwoKICAvLyBDZXJ0YWluIGNoYXJhY3RlcnMgbmVlZCB0byBiZSBlc2NhcGVkIHNvIHRoYXQgdGhleSBjYW4gYmUgcHV0IGludG8gYQogIC8vIHN0cmluZyBsaXRlcmFsLgogIHZhciBlc2NhcGVzID0gewogICAgIiciOiAiJyIsCiAgICAnXFwnOiAnXFwnLAogICAgJ1xyJzogJ3InLAogICAgJ1xuJzogJ24nLAogICAgJ1x1MjAyOCc6ICd1MjAyOCcsCiAgICAnXHUyMDI5JzogJ3UyMDI5JwogIH07CgogIHZhciBlc2NhcGVSZWdFeHAgPSAvXFx8J3xccnxcbnxcdTIwMjh8XHUyMDI5L2c7CgogIHZhciBlc2NhcGVDaGFyID0gZnVuY3Rpb24obWF0Y2gpIHsKICAgIHJldHVybiAnXFwnICsgZXNjYXBlc1ttYXRjaF07CiAgfTsKCiAgLy8gSmF2YVNjcmlwdCBtaWNyby10ZW1wbGF0aW5nLCBzaW1pbGFyIHRvIEpvaG4gUmVzaWcncyBpbXBsZW1lbnRhdGlvbi4KICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsCiAgLy8gYW5kIGNvcnJlY3RseSBlc2NhcGVzIHF1b3RlcyB3aXRoaW4gaW50ZXJwb2xhdGVkIGNvZGUuCiAgLy8gTkI6IGBvbGRTZXR0aW5nc2Agb25seSBleGlzdHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgogIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHsKICAgIGlmICghc2V0dGluZ3MgJiYgb2xkU2V0dGluZ3MpIHNldHRpbmdzID0gb2xkU2V0dGluZ3M7CiAgICBzZXR0aW5ncyA9IF8uZGVmYXVsdHMoe30sIHNldHRpbmdzLCBfLnRlbXBsYXRlU2V0dGluZ3MpOwoKICAgIC8vIENvbWJpbmUgZGVsaW1pdGVycyBpbnRvIG9uZSByZWd1bGFyIGV4cHJlc3Npb24gdmlhIGFsdGVybmF0aW9uLgogICAgdmFyIG1hdGNoZXIgPSBSZWdFeHAoWwogICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSwKICAgICAgKHNldHRpbmdzLmludGVycG9sYXRlIHx8IG5vTWF0Y2gpLnNvdXJjZSwKICAgICAgKHNldHRpbmdzLmV2YWx1YXRlIHx8IG5vTWF0Y2gpLnNvdXJjZQogICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpOwoKICAgIC8vIENvbXBpbGUgdGhlIHRlbXBsYXRlIHNvdXJjZSwgZXNjYXBpbmcgc3RyaW5nIGxpdGVyYWxzIGFwcHJvcHJpYXRlbHkuCiAgICB2YXIgaW5kZXggPSAwOwogICAgdmFyIHNvdXJjZSA9ICJfX3ArPSciOwogICAgdGV4dC5yZXBsYWNlKG1hdGNoZXIsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGUsIGludGVycG9sYXRlLCBldmFsdWF0ZSwgb2Zmc2V0KSB7CiAgICAgIHNvdXJjZSArPSB0ZXh0LnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UoZXNjYXBlUmVnRXhwLCBlc2NhcGVDaGFyKTsKICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7CgogICAgICBpZiAoZXNjYXBlKSB7CiAgICAgICAgc291cmNlICs9ICInK1xuKChfX3Q9KCIgKyBlc2NhcGUgKyAiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXG4nIjsKICAgICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZSkgewogICAgICAgIHNvdXJjZSArPSAiJytcbigoX190PSgiICsgaW50ZXJwb2xhdGUgKyAiKSk9PW51bGw/Jyc6X190KStcbiciOwogICAgICB9IGVsc2UgaWYgKGV2YWx1YXRlKSB7CiAgICAgICAgc291cmNlICs9ICInO1xuIiArIGV2YWx1YXRlICsgIlxuX19wKz0nIjsKICAgICAgfQoKICAgICAgLy8gQWRvYmUgVk1zIG5lZWQgdGhlIG1hdGNoIHJldHVybmVkIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3Qgb2Zmc2V0LgogICAgICByZXR1cm4gbWF0Y2g7CiAgICB9KTsKICAgIHNvdXJjZSArPSAiJztcbiI7CgogICAgLy8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS4KICAgIGlmICghc2V0dGluZ3MudmFyaWFibGUpIHNvdXJjZSA9ICd3aXRoKG9ianx8e30pe1xuJyArIHNvdXJjZSArICd9XG4nOwoKICAgIHNvdXJjZSA9ICJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4sIiArCiAgICAgICJwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xuIiArCiAgICAgIHNvdXJjZSArICdyZXR1cm4gX19wO1xuJzsKCiAgICB2YXIgcmVuZGVyOwogICAgdHJ5IHsKICAgICAgcmVuZGVyID0gbmV3IEZ1bmN0aW9uKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonLCAnXycsIHNvdXJjZSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGUuc291cmNlID0gc291cmNlOwogICAgICB0aHJvdyBlOwogICAgfQoKICAgIHZhciB0ZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pOwogICAgfTsKCiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uCiAgICB2YXIgYXJndW1lbnQgPSBzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJzsKICAgIHRlbXBsYXRlLnNvdXJjZSA9ICdmdW5jdGlvbignICsgYXJndW1lbnQgKyAnKXtcbicgKyBzb3VyY2UgKyAnfSc7CgogICAgcmV0dXJuIHRlbXBsYXRlOwogIH07CgogIC8vIEFkZCBhICJjaGFpbiIgZnVuY3Rpb24uIFN0YXJ0IGNoYWluaW5nIGEgd3JhcHBlZCBVbmRlcnNjb3JlIG9iamVjdC4KICBfLmNoYWluID0gZnVuY3Rpb24ob2JqKSB7CiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7CiAgICBpbnN0YW5jZS5fY2hhaW4gPSB0cnVlOwogICAgcmV0dXJuIGluc3RhbmNlOwogIH07CgogIC8vIE9PUAogIC8vIC0tLS0tLS0tLS0tLS0tLQogIC8vIElmIFVuZGVyc2NvcmUgaXMgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGl0IHJldHVybnMgYSB3cmFwcGVkIG9iamVjdCB0aGF0CiAgLy8gY2FuIGJlIHVzZWQgT08tc3R5bGUuIFRoaXMgd3JhcHBlciBob2xkcyBhbHRlcmVkIHZlcnNpb25zIG9mIGFsbCB0aGUKICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLgoKICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udGludWUgY2hhaW5pbmcgaW50ZXJtZWRpYXRlIHJlc3VsdHMuCiAgdmFyIGNoYWluUmVzdWx0ID0gZnVuY3Rpb24oaW5zdGFuY2UsIG9iaikgewogICAgcmV0dXJuIGluc3RhbmNlLl9jaGFpbiA/IF8ob2JqKS5jaGFpbigpIDogb2JqOwogIH07CgogIC8vIEFkZCB5b3VyIG93biBjdXN0b20gZnVuY3Rpb25zIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC4KICBfLm1peGluID0gZnVuY3Rpb24ob2JqKSB7CiAgICBfLmVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSkgewogICAgICB2YXIgZnVuYyA9IF9bbmFtZV0gPSBvYmpbbmFtZV07CiAgICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBbdGhpcy5fd3JhcHBlZF07CiAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpOwogICAgICAgIHJldHVybiBjaGFpblJlc3VsdCh0aGlzLCBmdW5jLmFwcGx5KF8sIGFyZ3MpKTsKICAgICAgfTsKICAgIH0pOwogICAgcmV0dXJuIF87CiAgfTsKCiAgLy8gQWRkIGFsbCBvZiB0aGUgVW5kZXJzY29yZSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIgb2JqZWN0LgogIF8ubWl4aW4oXyk7CgogIC8vIEFkZCBhbGwgbXV0YXRvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuCiAgXy5lYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHsKICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdOwogICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7CiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7CiAgICAgIGlmICgobmFtZSA9PT0gJ3NoaWZ0JyB8fCBuYW1lID09PSAnc3BsaWNlJykgJiYgb2JqLmxlbmd0aCA9PT0gMCkgZGVsZXRlIG9ialswXTsKICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIG9iaik7CiAgICB9OwogIH0pOwoKICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci4KICBfLmVhY2goWydjb25jYXQnLCAnam9pbicsICdzbGljZSddLCBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTsKICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBjaGFpblJlc3VsdCh0aGlzLCBtZXRob2QuYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKSk7CiAgICB9OwogIH0pOwoKICAvLyBFeHRyYWN0cyB0aGUgcmVzdWx0IGZyb20gYSB3cmFwcGVkIGFuZCBjaGFpbmVkIG9iamVjdC4KICBfLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuX3dyYXBwZWQ7CiAgfTsKCiAgLy8gUHJvdmlkZSB1bndyYXBwaW5nIHByb3h5IGZvciBzb21lIG1ldGhvZHMgdXNlZCBpbiBlbmdpbmUgb3BlcmF0aW9ucwogIC8vIHN1Y2ggYXMgYXJpdGhtZXRpYyBhbmQgSlNPTiBzdHJpbmdpZmljYXRpb24uCiAgXy5wcm90b3R5cGUudmFsdWVPZiA9IF8ucHJvdG90eXBlLnRvSlNPTiA9IF8ucHJvdG90eXBlLnZhbHVlOwoKICBfLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFN0cmluZyh0aGlzLl93cmFwcGVkKTsKICB9OwoKICAvLyBBTUQgcmVnaXN0cmF0aW9uIGhhcHBlbnMgYXQgdGhlIGVuZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEFNRCBsb2FkZXJzCiAgLy8gdGhhdCBtYXkgbm90IGVuZm9yY2UgbmV4dC10dXJuIHNlbWFudGljcyBvbiBtb2R1bGVzLiBFdmVuIHRob3VnaCBnZW5lcmFsCiAgLy8gcHJhY3RpY2UgZm9yIEFNRCByZWdpc3RyYXRpb24gaXMgdG8gYmUgYW5vbnltb3VzLCB1bmRlcnNjb3JlIHJlZ2lzdGVycwogIC8vIGFzIGEgbmFtZWQgbW9kdWxlIGJlY2F1c2UsIGxpa2UgalF1ZXJ5LCBpdCBpcyBhIGJhc2UgbGlicmFyeSB0aGF0IGlzCiAgLy8gcG9wdWxhciBlbm91Z2ggdG8gYmUgYnVuZGxlZCBpbiBhIHRoaXJkIHBhcnR5IGxpYiwgYnV0IG5vdCBiZSBwYXJ0IG9mCiAgLy8gYW4gQU1EIGxvYWQgcmVxdWVzdC4gVGhvc2UgY2FzZXMgY291bGQgZ2VuZXJhdGUgYW4gZXJyb3Igd2hlbiBhbgogIC8vIGFub255bW91cyBkZWZpbmUoKSBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGxvYWRlciByZXF1ZXN0LgogIGlmICh0cnVlKSB7CiAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSAoZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBfOwogICAgfSkuYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksCgkJCQlfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7CiAgfQp9KCkpOwoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKHRoaXMsIF9fd2VicGFja19yZXF1aXJlX18oMTgpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KShtb2R1bGUpKSkKCi8qKiovIH0pLAovKiAxOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgZzsKCi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlCmcgPSAoZnVuY3Rpb24oKSB7CglyZXR1cm4gdGhpczsKfSkoKTsKCnRyeSB7CgkvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUCkKCWcgPSBnIHx8IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCkgfHwgKDEsIGV2YWwpKCJ0aGlzIik7Cn0gY2F0Y2ggKGUpIHsKCS8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlCglpZiAodHlwZW9mIHdpbmRvdyA9PT0gIm9iamVjdCIpIGcgPSB3aW5kb3c7Cn0KCi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi4KLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3MKLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufQoKbW9kdWxlLmV4cG9ydHMgPSBnOwoKCi8qKiovIH0pLAovKiAxOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkgewoJaWYgKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7CgkJbW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307CgkJbW9kdWxlLnBhdGhzID0gW107CgkJLy8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0CgkJaWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdOwoJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsICJsb2FkZWQiLCB7CgkJCWVudW1lcmFibGU6IHRydWUsCgkJCWdldDogZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gbW9kdWxlLmw7CgkJCX0KCQl9KTsKCQlPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAiaWQiLCB7CgkJCWVudW1lcmFibGU6IHRydWUsCgkJCWdldDogZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gbW9kdWxlLmk7CgkJCX0KCQl9KTsKCQltb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTsKCX0KCXJldHVybiBtb2R1bGU7Cn07CgoKLyoqKi8gfSksCi8qIDIwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIlNlc3MiKTsKCnZhciBfX2V2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7Cgp2YXIgX191cmxfc2Vxbm8gPSAwOwoKdmFyIE1lc3NhZ2UgPSBfdXRpbC5wcm90b3R5cGVFeHRlbmQoewogICAgc2V0U2Vzc0lkOiBmdW5jdGlvbiBzZXRTZXNzSWQoc2Vzc0lkKSB7CiAgICAgICAgc2Vzc0lkICYmICh0aGlzLnNlc3NJZCA9IHNlc3NJZCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0T3A6IGZ1bmN0aW9uIHNldE9wKG9wKSB7CiAgICAgICAgb3AgJiYgKHRoaXMub3AgPSBvcCk7CgogICAgICAgIGlmIChvcCA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMucmVzID0gewogICAgICAgICAgICAgICAgdHlwZTogZW1lZGlhLmNvbmZpZy5jbGllbnRUeXBlLAogICAgICAgICAgICAgICAgdmVyOiBlbWVkaWEuY29uZmlnLnZlcnNpb24sCiAgICAgICAgICAgICAgICBhZ2VudDogZW1lZGlhLmNvbmZpZy51c2VyQWdlbnQsCiAgICAgICAgICAgICAgICBvcHM6IGVtZWRpYS5jb25maWcuYWNwdE9wcwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy90aGlzLnJlcyA9IEpTT04uc3RyaW5naWZ5KHRoaXMucmVzKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHNldFRzeElkOiBmdW5jdGlvbiBzZXRUc3hJZCh0c3hJZCkgewogICAgICAgIHRzeElkICYmICh0aGlzLnRzeElkID0gdHN4SWQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHNldFRpY2tldDogZnVuY3Rpb24gc2V0VGlja2V0KHRrdCkgewogICAgICAgIHRrdCAmJiAodGhpcy50a3QgPSB0a3QpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHNldFNkcDogZnVuY3Rpb24gc2V0U2RwKHNkcCkgewogICAgICAgIHNkcCAmJiAodGhpcy5zZHAgPSBzZHApOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHNldENhbmRzOiBmdW5jdGlvbiBzZXRDYW5kcyhjYW5kcykgewogICAgICAgIGNhbmRzICYmICh0aGlzLmNhbmRzID0gY2FuZHMpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHNldFN1YlNJZDogZnVuY3Rpb24gc2V0U3ViU0lkKHN1YlNJZCkgewogICAgICAgIHN1YlNJZCAmJiAodGhpcy5zdWJTSWQgPSBzdWJTSWQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHNldE1lbUlkOiBmdW5jdGlvbiBzZXRNZW1JZChtZW1JZCkgewogICAgICAgIG1lbUlkICYmICh0aGlzLm1lbUlkID0gbWVtSWQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHNldFB1YlM6IGZ1bmN0aW9uIHNldFB1YlMocHViUykgewogICAgICAgIHB1YlMgJiYgKHRoaXMucHViUyA9IF91dGlsLmV4dGVuZChmYWxzZSwge30sIHB1YlMpKTsKCiAgICAgICAgdmFyIHRoaXNQdWJTID0gdGhpcy5wdWJTOwogICAgICAgIGlmICh0aGlzUHViUy5leHQgJiYgX3V0aWwuaXNQbGFpbk9iamVjdCh0aGlzUHViUy5leHQpKSB7CiAgICAgICAgICAgIHRoaXNQdWJTLmV4dCA9IEpTT04uc3RyaW5naWZ5KHRoaXNQdWJTLmV4dCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzUHViUyAmJiBfdXRpbC5mb3JFYWNoKHRoaXNQdWJTLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgewogICAgICAgICAgICBpZiAoX3V0aWwuaXNQbGFpbk9iamVjdCh2YWx1ZSkgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUodGhpc1B1YlMsIGtleSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgdGhpc1B1YlMgJiYgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHRoaXNQdWJTLCAibG9jYWxTdHJlYW0iKTsKICAgICAgICB0aGlzUHViUyAmJiBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUodGhpc1B1YlMsICJfbG9jYWxNZWRpYVN0cmVhbSIpOwogICAgICAgIHRoaXNQdWJTICYmIF91dGlsLnJlbW92ZUF0dHJpYnV0ZSh0aGlzUHViUywgIl93ZWJydGMiKTsKCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0UnRjSWQ6IGZ1bmN0aW9uIHNldFJ0Y0lkKHJ0Y0lkKSB7CiAgICAgICAgcnRjSWQgJiYgKHRoaXMucnRjSWQgPSBydGNJZCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0Q3ZlcjogZnVuY3Rpb24gc2V0Q3ZlcihjdmVyKSB7CiAgICAgICAgY3ZlciAmJiAodGhpcy5jdmVyID0gY3Zlcik7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0RW5kUmVhc29uOiBmdW5jdGlvbiBzZXRFbmRSZWFzb24oZW5kUmVhc29uKSB7CiAgICAgICAgZW5kUmVhc29uICYmICh0aGlzLmVuZFJlYXNvbiA9IGVuZFJlYXNvbik7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0Tmlja05hbWU6IGZ1bmN0aW9uIHNldE5pY2tOYW1lKG5pY2tOYW1lKSB7CiAgICAgICAgbmlja05hbWUgJiYgKHRoaXMubmlja05hbWUgPSBuaWNrTmFtZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0UmVzb3VyY2U6IGZ1bmN0aW9uIHNldFJlc291cmNlKHJlc291cmNlKSB7CiAgICAgICAgcmVzb3VyY2UgJiYgKHRoaXMucmVzb3VyY2UgPSByZXNvdXJjZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0UmVhc29uOiBmdW5jdGlvbiBzZXRSZWFzb24ocmVhc29uKSB7CiAgICAgICAgcmVhc29uICYmICh0aGlzLnJlYXNvbiA9IHJlYXNvbik7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0Q29uZnJJZDogZnVuY3Rpb24gc2V0Q29uZnJJZChjb25mcklkKSB7CiAgICAgICAgY29uZnJJZCAmJiAodGhpcy5jb25mcklkID0gY29uZnJJZCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0Vm9mZjogZnVuY3Rpb24gc2V0Vm9mZih2b2ZmKSB7CiAgICAgICAgdHlwZW9mIHZvZmYgPT09ICJ1bmRlZmluZWQiIHx8ICh0aGlzLnZvZmYgPSB2b2ZmID8gMSA6IDApOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHNldEFvZmY6IGZ1bmN0aW9uIHNldEFvZmYoYW9mZikgewogICAgICAgIHR5cGVvZiBhb2ZmID09PSAidW5kZWZpbmVkIiB8fCAodGhpcy5hb2ZmID0gYW9mZiA/IDEgOiAwKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0sCiAgICBzZXRGbGFnOiBmdW5jdGlvbiBzZXRGbGFnKGZsYWcpIHsKICAgICAgICBmbGFnID09PSAwICYmICh0aGlzLmZsYWcgPSAwKTsKICAgICAgICBmbGFnID09PSAxICYmICh0aGlzLmZsYWcgPSAxKTsKCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2V0RXh0OiBmdW5jdGlvbiBzZXRFeHQoZXh0KSB7CiAgICAgICAgaWYgKGV4dCAmJiBfdXRpbC5pc1BsYWluT2JqZWN0KGV4dCkpIHsKICAgICAgICAgICAgZXh0ID0gSlNPTi5zdHJpbmdpZnkoZXh0KTsKICAgICAgICB9CiAgICAgICAgZXh0ICYmICh0aGlzLmV4dCA9IGV4dCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9Cn0pOwoKLyoqCiAqIHsKICogICB3ZWJzb2NrZXQ6CiAqICAgb25NZXNzYWdlOgogKiAgIF9wb3N0TWVzc2FnZShNZXNzYWdlKToKICogICBvbkVycm9yOgogKiB9CiAqCiAqIHJlY29ubmVjdENvdW50ID4gMCDml7bkuI3kuIrmiqXplJnor6/vvIjosIPnlKhvbldlYnNvY2tldEV2ZW5077yJ44CCCiAqIOS4jeWtmOWcqOaIlj09MCDosIPnlKjosIPnlKhvbldlYnNvY2tldEV2ZW50CiAqIOiwg+eUqG9uV2Vic29ja2V0RXZlbnQgV1NDbG9zZeaXtiDlsIbkvJrlhbPpl60KICoKICogQHJldHVybnMgeyp9CiAqCiAqLwoKdmFyIF9fc2Vzc2lvbl9nbG9iYWxDb3VudCA9IGVtZWRpYS5fX3Nlc3Npb25fZ2xvYmFsQ291bnQgPSAwOwoKZnVuY3Rpb24gX2Nvbm5lY3Qob25Db25uZWN0ZWQsIG9uQ29ubmVjdEZhaWwsIHJldHJ5KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgZnVuY3Rpb24gY29ubmVjdEZhaWwoY2F1c2UsIF9ldnQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBzZWxmLm9uV2Vic29ja2V0RXZlbnQobmV3IF9fZXZlbnQuV1NDbG9zZSh7IHVybDogc2VsZi50aGlzV3NVcmksIHJldHJ5OiByZXRyeSwgb25saW5lOiBzZWxmLm9ubGluZSwgY2F1c2U6IGNhdXNlLCBldmVudDogX2V2dCwgc2Vzc2lvbjogc2VsZiB9KSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgb25Db25uZWN0RmFpbCAmJiBvbkNvbm5lY3RGYWlsKG5ldyBfX2V2ZW50LldTQ2xvc2UoeyB1cmw6IHNlbGYudGhpc1dzVXJpLCByZXRyeTogcmV0cnksIG9ubGluZTogc2VsZi5vbmxpbmUsIGNhdXNlOiBjYXVzZSwgZXZlbnQ6IF9ldnQsIHNlc3Npb246IHNlbGYgfSkpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwb3N0KG1lc3NhZ2UpIHsKICAgICAgICBpZiAoIXNlbGYuY29ubmVjdGVkKHNlbGYudGhpc1dzVXJpKSkgewogICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJjdXJyZW50IGRvbnQgY29ubmVjdC4gdGhlIG1lc3NhZ2UgPSAiLCBtZXNzYWdlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKF91dGlsLmlzUGxhaW5PYmplY3QobWVzc2FnZSkgJiYgIShtZXNzYWdlIGluc3RhbmNlb2YgTWVzc2FnZSkpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigibWVzc2FnZSBub3QgYSBNZXNzYWdlcyIpOwogICAgICAgICAgICB0aHJvdyAibWVzc2FnZSBub3QgYSBNZXNzYWdlcyI7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2VsZi5zZXNzSWQgJiYgbWVzc2FnZS5zZXNzSWQgIT0gc2VsZi5zZXNzSWQpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJzZWxmLnNlc3NJZCAmJiBtZXNzYWdlLnNlc3NJZCAhPSBzZWxmLnNlc3NJZCIsIG1lc3NhZ2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzZWxmLnRoaXNXc1VyaSA9PT0gc2VsZi5fd2Vic29ja2V0LnVybCAmJiBzZWxmLl93ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtZXNzYWdlKSk7CiAgICAgICAgc2VsZi50aGlzV3NVcmkgPT09IHNlbGYuX3dlYnNvY2tldC51cmwgJiYgX2xvZ2dlci5kZWJ1ZygiRG9uZSBzZW5kOiByZXE6IiwgbWVzc2FnZSwgc2VsZi5fd2Vic29ja2V0LnVybCk7CiAgICAgICAgc2VsZi50aGlzV3NVcmkgPT09IHNlbGYuX3dlYnNvY2tldC51cmwgfHwgX2xvZ2dlci5kZWJ1ZygiRG9ub3Qgc2VuZCh1cmwgbm90IGVxdWFsKTogcmVxOiIsIG1lc3NhZ2UsIHNlbGYuX3dlYnNvY2tldC51cmwpOwogICAgfQoKICAgIGZ1bmN0aW9uIG5vdGlmeU5ld01lc3NhZ2UoKSB7CiAgICAgICAgaWYgKHNlbGYuY29ubmVjdGVkKHNlbGYudGhpc1dzVXJpKSkgewogICAgICAgICAgICBpZiAoc2VsZi5fYnVmZmVyZWRNZXNzYWdlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIF9fYXJyYXkgPSBbXTsKCiAgICAgICAgICAgIHZhciBidWZmZXJlZE1lc3NhZ2U7CiAgICAgICAgICAgIHdoaWxlIChidWZmZXJlZE1lc3NhZ2UgPSBzZWxmLl9idWZmZXJlZE1lc3NhZ2VzLnNoaWZ0KCkpIHsKICAgICAgICAgICAgICAgIGlmICghYnVmZmVyZWRNZXNzYWdlLnNlc3NJZCAmJiAhc2VsZi5zZXNzSWQgJiYgYnVmZmVyZWRNZXNzYWdlLm9wICE9IDIwMCkgewogICAgICAgICAgICAgICAgICAgIC8v562J5b6FRW50ZXIKICAgICAgICAgICAgICAgICAgICBfX2FycmF5LnB1c2goYnVmZmVyZWRNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oInRtcCBzdG9yZSBtZXNzYWdlLCB1dGlsIGVudGVyIHN1Y2Nlc3MhIiwgYnVmZmVyZWRNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyZWRNZXNzYWdlLm9wID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAvLzIwMOWNleeLrOWPkemAge+8jOacieWPr+iDveS8muS/ruaUuXNlc3Npb27lgLwKICAgICAgICAgICAgICAgICAgICBwb3N0KGJ1ZmZlcmVkTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHNlbGYuc2Vzc0lkICYmICFidWZmZXJlZE1lc3NhZ2Uuc2Vzc0lkKSB7CiAgICAgICAgICAgICAgICAgICAgYnVmZmVyZWRNZXNzYWdlLnNlc3NJZCA9IHNlbGYuc2Vzc0lkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBfYnVmZmVyZWRNZXNzYWdlID0gcG9zdChidWZmZXJlZE1lc3NhZ2UpOwogICAgICAgICAgICAgICAgX2J1ZmZlcmVkTWVzc2FnZSAmJiBfX2FycmF5LnB1c2goX2J1ZmZlcmVkTWVzc2FnZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChfX2FycmF5Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHNlbGYuX2J1ZmZlcmVkTWVzc2FnZXMsIF9fYXJyYXkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vfSBlbHNlIGlmKCFyZXRyeSB8fCAhc2VsZi5vbmxpbmUpewogICAgICAgIH0gZWxzZSBpZiAocmV0cnkgPT09IDAgfHwgIXNlbGYub25saW5lKSB7CiAgICAgICAgICAgIHZhciBfbWVzc2FnZU1hcCA9IF91dGlsLmV4dGVuZChmYWxzZSwge30sIHNlbGYuX2NhbGxiYWNrcyk7CgogICAgICAgICAgICB2YXIgdG1wID0gW107CiAgICAgICAgICAgIGZvciAodmFyIHRzeElkIGluIF9tZXNzYWdlTWFwKSB7CiAgICAgICAgICAgICAgICB2YXIgbXNnID0gX21lc3NhZ2VNYXBbdHN4SWRdOwogICAgICAgICAgICAgICAgLy9pZihyZXRyeSA+IDAgJiYgIXNlbGYub25saW5lICYmIChtc2cub3AgPT09IDEwNyB8fCBtc2cub3AgPT09IDIwMSB8fCBtc2cub3AgPT09IDIwNCB8fCBtc2cub3AgPT09IDIwNiB8fCBtc2cub3AgPT09IDQwMCB8fCBtc2cub3AgPT09IDUwMCkpIHsKICAgICAgICAgICAgICAgIGlmIChyZXRyeSA+IDAgJiYgIXNlbGYub25saW5lKSB7CiAgICAgICAgICAgICAgICAgICAgLy/nvJPlrZjmiYDmnInmtojmga8KICAgICAgICAgICAgICAgICAgICB0bXAucHVzaChtc2cpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2VsZi5vbk1lc3NhZ2UoeyBvcDogMTAwMSwgdHN4SWQ6IHRzeElkLCByZXN1bHQ6IC05NTI3LCBtc2c6ICJzZGsgcnNwIGZhaWwuIHJldHJ5IGZhaWwgb3Igb25saW5lID0gIiArIHNlbGYub25saW5lIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZWxmLl9idWZmZXJlZE1lc3NhZ2VzID0gc2VsZi5fYnVmZmVyZWRNZXNzYWdlcyB8fCBbXTsKCiAgICAgICAgICAgIHRtcC5sZW5ndGggPiAwICYmIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHNlbGYuX2J1ZmZlcmVkTWVzc2FnZXMsIHRtcCk7CiAgICAgICAgfSBlbHNlIGlmICghc2VsZi5jb25uZWN0ZWQoKSkgewogICAgICAgICAgICAvLyB2YXIgX21lc3NhZ2VNYXAgPSBfdXRpbC5leHRlbmQoZmFsc2UsIHt9LCBzZWxmLl9jYWxsYmFja3MpOwogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyBmb3IodmFyIHRzeElkIGluIF9tZXNzYWdlTWFwKXsKICAgICAgICAgICAgLy8gICAgIHZhciBtc2cgPSBfbWVzc2FnZU1hcFt0c3hJZF07CiAgICAgICAgICAgIC8vICAgICBpZihtc2cub3AgIT09IDEwMiAmJiBtc2cub3AgIT09IDEwNSAmJiBtc2cub3AgIT09IDEwMDApIHsKICAgICAgICAgICAgLy8gICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgLy8gICAgIHNlbGYub25NZXNzYWdlKHtvcDogMTAwMSwgdHN4SWQ6IHRzeElkLCByZXN1bHQ6IC05NTI3LCBtc2c6ICJ3ZWJzb2NrZXQgZGlzY29ubmVjdCIsIHJldHJ5aW5nOiB0cnVlfSk7CiAgICAgICAgICAgIC8vIH0KICAgICAgICB9CiAgICB9CgogICAgaWYgKHNlbGYuY29ubmVjdGVkKHNlbGYudGhpc1dzVXJpKSkgewogICAgICAgIG9uQ29ubmVjdGVkICYmIG9uQ29ubmVjdGVkKHNlbGYpOwogICAgICAgIF9sb2dnZXIuaW5mbygiU2Vzc2lvbiBjb25uZWN0ZWQuIGRvbnQgY29udGludWUgY29ubmVjdCIpOwogICAgICAgIHNlbGYubm90aWZ5TmV3TWVzc2FnZSAmJiBzZWxmLm5vdGlmeU5ld01lc3NhZ2UoKTsKCiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICghc2VsZi5vbmxpbmUpIHsKICAgICAgICBjb25uZWN0RmFpbCgpOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBzZWxmLm5vdGlmeU5ld01lc3NhZ2UgPSBub3RpZnlOZXdNZXNzYWdlOwoKICAgIF9sb2dnZXIuaW5mbygiU2Vzc2lvbiBiZWdpbiBjb25uZWN0LiIpOwoKICAgIHZhciBfd2Vic29ja2V0ID0gc2VsZi5fd2Vic29ja2V0OwogICAgaWYgKF93ZWJzb2NrZXQpIHsKICAgICAgICBfbG9nZ2VyLndhcm4oIndpbGwgY2xvc2UuIHdlYnNvY2tldCBzdGF0ZSIsIF93ZWJzb2NrZXQucmVhZHlTdGF0ZSwgX3dlYnNvY2tldC51cmwsIHNlbGYudGhpc1dzVXJpKTsKICAgICAgICBfd2Vic29ja2V0LmNsb3NlKDEwMDApOwogICAgfQoKICAgIHRyeSB7CiAgICAgICAgX2xvZ2dlci5pbmZvKCJDb25uZWN0aW5nIiwgc2VsZi50aGlzV3NVcmksIHJldHJ5KTsKICAgICAgICBfd2Vic29ja2V0ID0gc2VsZi5fd2Vic29ja2V0ID0gbmV3IFdlYlNvY2tldChzZWxmLnRoaXNXc1VyaSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgX2xvZ2dlci53YXJuKGUpOwogICAgICAgIGNvbm5lY3RGYWlsKGUpOwoKICAgICAgICByZXR1cm47CiAgICB9CgogICAgX3dlYnNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgdmFyIF91cmwgPSB0aGlzLnVybDsKICAgICAgICBpZiAoX3VybCAhPT0gc2VsZi50aGlzV3NVcmkpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJpZ25vcmUgdGhlIG9ub3Blbi4gY2F1c2VkIGJ5IHdlYnNvY2tldCB1cmwgbm90ICIsIHNlbGYudGhpc1dzVXJpLCBfdXJsKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJ3ZWJzb2NrZXQgY29ubmVjdGVkOiIsIF91cmwpOwogICAgICAgICAgICBvbkNvbm5lY3RGYWlsICYmIChvbkNvbm5lY3RGYWlsID0gbnVsbCk7CiAgICAgICAgICAgIG9uQ29ubmVjdGVkICYmIG9uQ29ubmVjdGVkKHNlbGYpOwogICAgICAgICAgICBzZWxmLm9uV2Vic29ja2V0RXZlbnQobmV3IF9fZXZlbnQuV1NDb25uZWN0ZWQoeyBldmVudDogZXZ0LCBzZXNzaW9uOiBzZWxmIH0pKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAvL3NlbGYubm90aWZ5TmV3TWVzc2FnZSgpOwogICAgICAgIH0KICAgIH07CgogICAgX3dlYnNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgdmFyIF91cmwgPSB0aGlzLnVybDsKICAgICAgICBpZiAoX3VybCAhPT0gc2VsZi50aGlzV3NVcmkpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJpZ25vcmUgcmVjdiBkYXRhLiBjYXVzZWQgYnkgd2Vic29ja2V0IHVybCBub3QgIiwgc2VsZi50aGlzV3NVcmksIF91cmwsIGV2dC5kYXRhKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX2xvZ2dlci5kZWJ1ZygicmVjdiBkYXRhIiwgZXZ0LmRhdGEpOwoKICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZXZ0LmRhdGEpOwogICAgICAgIGRhdGEgJiYgZGF0YS5vcCA9PSAxMDAxICYmIF9sb2dnZXIuZGVidWcoInJlY3YgbWVzc2FnZTogcnNwOiIsIGRhdGEpOwogICAgICAgIGRhdGEgJiYgZGF0YS5vcCAhPSAxMDAxICYmIF9sb2dnZXIuZGVidWcoInJlY3YgbWVzc2FnZTogZXZ0OiIsIGRhdGEpOwoKICAgICAgICBzZWxmLm9uTWVzc2FnZShkYXRhKTsKICAgIH07CgogICAgX3dlYnNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24gKGV2dCkgewogICAgICAgIHZhciBfdXJsID0gdGhpcy51cmw7CiAgICAgICAgX2xvZ2dlci5pbmZvKCJEaXNjb25uZWN0ZWQ6IiwgX3VybCwgc2VsZi50aGlzV3NVcmksIGV2dCk7CiAgICAgICAgaWYgKF91cmwgIT09IHNlbGYudGhpc1dzVXJpKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiaWdub3JlIG9uY2xvc2UuIGNhdXNlZCBieSB3ZWJzb2NrZXQgdXJsIG5vdCAiLCBzZWxmLnRoaXNXc1VyaSwgX3VybCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlbGYubm90aWZ5TmV3TWVzc2FnZSgpOwoKICAgICAgICBpZiAoZXZ0LmNvZGUgIT09IDEwMDApIHsKICAgICAgICAgICAgLy/miYvliqjmlq3lvIAKICAgICAgICAgICAgY29ubmVjdEZhaWwodW5kZWZpbmVkLCBldnQpOwogICAgICAgIH0KICAgIH07CgogICAgX3dlYnNvY2tldC5vbmVycm9yID0gZnVuY3Rpb24gKGV2dCkgewogICAgICAgIF9sb2dnZXIuaW5mbygiT24gZXJyb3I6IiwgZXZ0KTsKCiAgICAgICAgc2VsZi5vbldlYnNvY2tldEV2ZW50KG5ldyBfX2V2ZW50LldTRXJyb3IoeyBldmVudDogZXZ0LCBvbmxpbmU6IHNlbGYub25saW5lLCBzZXNzaW9uOiBzZWxmLCB1cmw6IHRoaXMudXJsIH0pKTsKICAgIH07Cn0KCi8qKgogKiB7CiAqICAgdGlja2V0OgogKiAgIHJlY29ubmVjdENvdW50OgogKiAgIG9uRXJyb3I6CiAqCiAqICAgb25FbnRlcjoKICogICBvbkV4aXQ6CiAqICAgb25QdWI6CiAqICAgb25VbnB1YjoKICogICBvbk1lbXM6CiAqICAgb25DbG9zZToKICoKICogICBvbkluaXRDOgogKiAgIG9uVGNrbEM6CiAqCiAqCiAqICAgbmV3TWVzc2FnZToKICogICBwb3N0TWVzc2FnZToKICogfQogKgogKgogKiBAcHJpdmF0ZQogKi8KbW9kdWxlLmV4cG9ydHMgPSBfdXRpbC5wcm90b3R5cGVFeHRlbmQoewogICAgX2V2ZW50czogewogICAgICAgICcwJzogJ29uUmVxUDJQJywKICAgICAgICAnMSc6ICdvbk5ld0NmcicsCiAgICAgICAgJzInOiAnb25EZWxDZnInLAogICAgICAgICczJzogJ29uUmVxVGt0JywKCiAgICAgICAgJzEwMCc6ICdvblBpbmcnLAogICAgICAgICcxMDEnOiAnb25Qb25nJywKICAgICAgICAnMTAyJzogJ29uSW5pdEMnLAogICAgICAgICcxMDMnOiAnb25SZXFDJywKICAgICAgICAnMTA0JzogJ29uQWNwdEMnLAogICAgICAgICcxMDUnOiAnb25UY2tsQycsCiAgICAgICAgJzEwNic6ICdvbkFuc0MnLAogICAgICAgICcxMDcnOiAnb25UZXJtQycsCgogICAgICAgICczMDAnOiAnb25FbnRlcicsCiAgICAgICAgJzMwMSc6ICdvbkV4aXQnLAogICAgICAgICczMDInOiAnb25QdWInLAogICAgICAgICczMDMnOiAnb25VbnB1YicsCiAgICAgICAgJzMwNCc6ICdvbk1lbXMnLAogICAgICAgICcyMDQnOiAnb25DbG9zZScsCiAgICAgICAgJzQwMCc6ICdvblN0cmVhbUNvbnRyb2wnLAogICAgICAgICc0MDEnOiAnb25Kb2luJywKICAgICAgICAnNDEyJzogJ29uUm9sZVVwZGF0ZScsCiAgICAgICAgJzEwMDInOiAnb25SZW1vdGVDb250cm9sJywKICAgICAgICAnMTAwMyc6ICdvblJlY3ZSZW1vdGVNZXNzYWdlJwoKICAgICAgICAvLydvblNlcnZlckVycm9yJzogJ29uU2VydmVyRXJyb3InCiAgICB9LAoKICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIC8vc2VsZi5vd25lciA9IG51bGw7CgogICAgICAgIHNlbGYuX2J1ZmZlcmVkTWVzc2FnZXMgPSBbXTsKICAgICAgICBzZWxmLl9jYWxsYmFja3MgPSB7fTsKCiAgICAgICAgZnVuY3Rpb24gbm93bGluZSgpIHsKICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5vbkxpbmUpIHsKICAgICAgICAgICAgICAgIHNlbGYub25saW5lID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNlbGYub25saW5lID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIG5vd2xpbmUoKTsKCiAgICAgICAgLy8gd2luZG93Ll9fZWFzZW1vYl9jaGVja0xpbmVJbnRlcnZhbElkXyAmJiBjbGVhckludGVydmFsKHdpbmRvdy5fX2Vhc2Vtb2JfY2hlY2tMaW5lSW50ZXJ2YWxJZF8pOwogICAgICAgIC8vIHdpbmRvdy5fX2Vhc2Vtb2JfY2hlY2tMaW5lSW50ZXJ2YWxJZF8gPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gICAgIHZhciBsYXN0T25saW5lID0gc2VsZi5vbmxpbmU7CiAgICAgICAgLy8gICAgIG5vd2xpbmUoKTsKICAgICAgICAvLyAgICAgaWYoIWxhc3RPbmxpbmUgJiYgc2VsZi5vbmxpbmUpewogICAgICAgIC8vICAgICAgICAgb25saW5lKCk7CiAgICAgICAgLy8gICAgIH0KICAgICAgICAvLyAgICAgaWYobGFzdE9ubGluZSAmJiAhc2VsZi5vbmxpbmUpewogICAgICAgIC8vICAgICAgICAgb2ZmbGluZSgpOwogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gfSwgNTAwKTsKCgogICAgICAgIGZ1bmN0aW9uIG9ubGluZShlKSB7CiAgICAgICAgICAgIHNlbGYub25saW5lID0gdHJ1ZTsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJvbmxpbmUgb25saW5lIG9ubGluZSIpOwoKICAgICAgICAgICAgaWYgKCFzZWxmLmNsb3NlZCkgewogICAgICAgICAgICAgICAgc2VsZi5fcmVjb25uZWN0KGVtZWRpYS5jb25maWcucmVjb25uZWN0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gb2ZmbGluZShlKSB7CiAgICAgICAgICAgIHNlbGYub25saW5lID0gZmFsc2U7CiAgICAgICAgICAgIF9sb2dnZXIud2Fybigib2ZmbGluZSBvZmZsaW5lIG9mZmxpbmUiKTsKCiAgICAgICAgICAgIHNlbGYuX19jaGVja0Nvbm5lY3RJbnRlcnZhbElkICYmIGNsZWFyVGltZW91dChzZWxmLl9fY2hlY2tDb25uZWN0SW50ZXJ2YWxJZCk7CgogICAgICAgICAgICBzZWxmLl9fcmV0cnlDb25uZWN0SW50ZXJ2YWxJZCAmJiBjbGVhclRpbWVvdXQoc2VsZi5fX3JldHJ5Q29ubmVjdEludGVydmFsSWQpOwogICAgICAgICAgICBzZWxmLl9fcmV0cnlDb25uZWN0SW50ZXJ2YWxJZCAmJiBkZWxldGUgc2VsZi5fX3JldHJ5Q29ubmVjdEludGVydmFsSWQ7CgogICAgICAgICAgICBzZWxmLl93ZWJzb2NrZXQgJiYgc2VsZi5fd2Vic29ja2V0LmNsb3NlKDEwMDApOwogICAgICAgIH0KCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9ubGluZSIsIG9ubGluZSwgdHJ1ZSk7CgogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvZmZsaW5lIiwgb2ZmbGluZSwgdHJ1ZSk7CgogICAgICAgIF9sb2dnZXIuaW5mbygib25saW5lIHN0YXR1cyA9ICIsIHNlbGYub25saW5lKTsKICAgIH0sCgogICAgX25leHRXc1VyaTogZnVuY3Rpb24gX25leHRXc1VyaSgpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciB1cmwgPSBzZWxmLnRpY2tldC51cmw7CgogICAgICAgIC8vIHZhciBob3N0bmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTsKICAgICAgICAvLyBpZihob3N0bmFtZS5lbmRzV2l0aCgicGFpYy5jb20uY24iKSl7IC8vcGluZ2FuLmNvbS5jbiAtPiBwYWljLmNvbS5jbgogICAgICAgIC8vICAgICB1cmwgPSB1cmwucmVwbGFjZSgicGluZ2FuLmNvbS5jbiIsICJwYWljLmNvbS5jbiIpOwogICAgICAgIC8vIH1lbHNlIGlmKGhvc3RuYW1lLmVuZHNXaXRoKCJwaW5nYW4uY29tLmNuIikpeyAvLyBwYWljLmNvbS5jbiAtPiBwaW5nYW4uY29tLmNuCiAgICAgICAgLy8gICAgIHVybCA9IHVybC5yZXBsYWNlKCJwYWljLmNvbS5jbiIsICJwaW5nYW4uY29tLmNuIik7CiAgICAgICAgLy8gfQogICAgICAgIC8vIF9sb2dnZXIud2FybigidGlja2V0IHVybCBtb2RpZml5LiAiLCBob3N0bmFtZSwgdXJsKTsKCiAgICAgICAgaWYgKHR5cGVvZiBlbWVkaWEuY29udmVydFdlYnNvY2tldFVSTE9mVGlja2V0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIHZhciBvbGRVcmwgPSB1cmw7CiAgICAgICAgICAgIHVybCA9IGVtZWRpYS5jb252ZXJ0V2Vic29ja2V0VVJMT2ZUaWNrZXQodXJsKTsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKG9sZFVybCwgIi0tPiIsIHVybCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoJy8nKSkgewogICAgICAgICAgICAvL+mAmui/h+WcsOWdgOagjyDooaXpvZB1cmwKICAgICAgICAgICAgaWYgKGVtZWRpYS5jb25maWcud3NvcmlnaW4pIHsKICAgICAgICAgICAgICAgIHVybCA9IGVtZWRpYS5jb25maWcud3NvcmlnaW4gKyB1cmw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICAgICAgdmFyIHByb3RvID0gaHJlZi5zdGFydHNXaXRoKCJodHRwcyIpID8gIndzczovLyIgOiAid3M6Ly8iOwoKICAgICAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gaHJlZi5pbmRleE9mKCI6Ly8iKSArIDM7CiAgICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBocmVmLmluZGV4T2YoIi8iLCBzdGFydEluZGV4KTsKICAgICAgICAgICAgICAgIHZhciB3c29yaWdpbiA9IGhyZWYuc3Vic3RyaW5nKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTsKCiAgICAgICAgICAgICAgICB1cmwgPSBwcm90byArIHdzb3JpZ2luICsgdXJsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIndlYnNvY2tldCB1cmwuIHVwZGF0ZS4ge30gLT4ge30iLCBzZWxmLnRpY2tldC51cmwsIHVybCk7CiAgICAgICAgfSBlbHNlIGlmIChlbWVkaWEuY29uZmlnLndzb3JpZ2luKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiZW1lZGlhLmNvbmZpZy53c29yaWdpbiBpbnZhbGlkYXRlLiBjYXVzZWJ5IHNlcnZlciB1cmwge30iLCB1cmwpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHVybC5pbmRleE9mKCI/IikgPj0gMCkgewogICAgICAgICAgICB1cmwgKz0gIiYiICsgX191cmxfc2Vxbm8rKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1cmwgKz0gIj8iICsgX191cmxfc2Vxbm8rKzsKICAgICAgICB9CgogICAgICAgIGlmIChzZWxmLnRpY2tldC5jb25mcklkKSB7CiAgICAgICAgICAgIHVybCArPSAiJiIgKyBlbmNvZGVVUklDb21wb25lbnQoc2VsZi50aWNrZXQuY29uZnJJZCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB1cmw7CiAgICB9LAoKICAgIF9yZWNvbm5lY3Q6IGZ1bmN0aW9uIF9yZWNvbm5lY3QocmV0cnkpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGZ1bmN0aW9uIGNvbm5lY3RlZCgpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJSZWNvbm5lY3RlZC4gYXQgIiwgcmV0cnksIHNlbGYuX3dlYnNvY2tldC51cmwpOwogICAgICAgICAgICBzZWxmLl9fcmV0cnlDb25uZWN0SW50ZXJ2YWxJZCAmJiBjbGVhclRpbWVvdXQoc2VsZi5fX3JldHJ5Q29ubmVjdEludGVydmFsSWQpOwogICAgICAgICAgICBzZWxmLl9fcmV0cnlDb25uZWN0SW50ZXJ2YWxJZCAmJiBkZWxldGUgc2VsZi5fX3JldHJ5Q29ubmVjdEludGVydmFsSWQ7CgogICAgICAgICAgICB2YXIgZW50ZXIgPSBzZWxmLm5ld01lc3NhZ2UoKS5zZXRPcCgyMDApLnNldFNlc3NJZChzZWxmLl9zZXNzaW9uSWQpLnNldFRpY2tldChzZWxmLnRpY2tldCkuc2V0Tmlja05hbWUoc2VsZi5uaWNrTmFtZSB8fCBzZWxmLnRpY2tldC5tZW1OYW1lKS5zZXRSZXNvdXJjZShzZWxmLnJlc291cmNlKS5zZXRFeHQoc2VsZi5vd25lci5leHQpOwogICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGVudGVyLCBmdW5jdGlvbiAocnNwKSB7CiAgICAgICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LkVudGVyRmFpbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZTogc2VsZi5vd25lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdXNlOiBuZXcgX19ldmVudC5Sc3BGYWlsKHsgcmVxdWVzdDogZW50ZXIsIHJlc3BvbnNlOiByc3AgfSkgfSkpOwogICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyc3AucmVzdWx0ICE9PSAtOTUyNykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tOTUyNyDlrqLmiLfnq68g6Ieq5bex6L+U5Zue77yM572R57uc5pyq6YCa77yMIOWFtuS7luWAvOacjeWKoeerr+i/lOWbngogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlNlcnZlclJlZnVzZUVudGVyKHsgZmFpbGVkOiByc3AucmVzdWx0LCBtc2c6IHJzcC5tc2cgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LkVudGVyU3VjY2VzcygpKTsKCiAgICAgICAgICAgICAgICBzZWxmLm93bmVyLm9uTWVtYmVycyhyc3AuY3ZlciwgcnNwLm1lbXMpOwogICAgICAgICAgICAgICAgc2VsZi5vd25lci5vblN0cmVhbXMocnNwLmN2ZXIsIHJzcC5zdHJlYW1zKTsKCiAgICAgICAgICAgICAgICBzZWxmLm5vdGlmeU5ld01lc3NhZ2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmYWlsZWQoZXZ0KSB7CiAgICAgICAgICAgIGlmIChyZXRyeSA8PSAwKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlJlY29ubmVjdCBlbmQuIGJ1dCBmYWlsLiIsIGV2dC51cmwsIHJldHJ5KTsKICAgICAgICAgICAgICAgIHNlbGYuX19yZXRyeUNvbm5lY3RJbnRlcnZhbElkICYmIGRlbGV0ZSBzZWxmLl9fcmV0cnlDb25uZWN0SW50ZXJ2YWxJZDsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0cnkgJiYgKHNlbGYuX19yZXRyeUNvbm5lY3RJbnRlcnZhbElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzZWxmLmNvbm5lY3QoY29ubmVjdGVkLCBmYWlsZWQsIC0tcmV0cnkpOwogICAgICAgICAgICB9LCBlbWVkaWEuY29uZmlnLnJlY29ubmVjdERlbGF5KSk7CiAgICAgICAgfQoKICAgICAgICBzZWxmLmNvbm5lY3QoY29ubmVjdGVkLCBmYWlsZWQsIC0tcmV0cnkpOwogICAgfSwKCiAgICBfX2NoZWNrQ29ubmVjdDogZnVuY3Rpb24gX19jaGVja0Nvbm5lY3QoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLl9fY2hlY2tDb25uZWN0SW50ZXJ2YWxJZCAmJiBjbGVhclRpbWVvdXQoc2VsZi5fX2NoZWNrQ29ubmVjdEludGVydmFsSWQpOwoKICAgICAgICBlbWVkaWEuY29uZmlnLmNoZWNrQ29ubmVjdEludGVydmFsTWlsbGlzICYmIChzZWxmLl9fY2hlY2tDb25uZWN0SW50ZXJ2YWxJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvL19sb2dnZXIudHJhY2UoIkNoZWNrIGNvbm5lY3QuLiIpOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChzZWxmLm9ubGluZSAmJiAhc2VsZi5jb25uZWN0ZWQoKSkgewogICAgICAgICAgICAgICAgICAgIHNlbGYuX19yZXRyeUNvbm5lY3RJbnRlcnZhbElkICYmIF9sb2dnZXIuZGVidWcoIm9ubGluZSwgcmVjb25uZWN0aW5nLi4uIik7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX3JldHJ5Q29ubmVjdEludGVydmFsSWQgfHwgX2xvZ2dlci5kZWJ1Zygib25saW5lLCBidXQgZGlzY29ubmVjdC4gd2lsbCByZWNvbm5lY3QiKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9fcmV0cnlDb25uZWN0SW50ZXJ2YWxJZCB8fCBzZWxmLl9yZWNvbm5lY3QoZW1lZGlhLmNvbmZpZy5yZWNvbm5lY3QpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvL3NlbGYubm90aWZ5TmV3TWVzc2FnZSAmJiBzZWxmLm5vdGlmeU5ld01lc3NhZ2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIHNlbGYuX19jaGVja0Nvbm5lY3QoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIGVtZWRpYS5jb25maWcuY2hlY2tDb25uZWN0SW50ZXJ2YWxNaWxsaXMpKTsKICAgIH0sCgogICAgY29ubmVjdDogZnVuY3Rpb24gY29ubmVjdChvbkNvbm5lY3RlZCwgb25Db25uZWN0RmFpbCwgcmV0cnkpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBuZXh0VXJsID0gc2VsZi50aGlzV3NVcmkgPSBzZWxmLl9uZXh0V3NVcmkoKTsKCiAgICAgICAgdHlwZW9mIHJldHJ5ICE9PSAidW5kZWZpbmVkIiAmJiBfbG9nZ2VyLndhcm4oImJlZ2luIGNvbm5lY3QuLi4gYXQgcmV0cnkgPSAiLCByZXRyeSwgbmV4dFVybCk7CgogICAgICAgIGZ1bmN0aW9uIGNvbm5lY3RlZCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIG9uQ29ubmVjdGVkLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBzZWxmLl9fY2hlY2tDb25uZWN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZhaWxlZChldnQpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIG9uQ29ubmVjdEZhaWwuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIHJldHJ5IHx8IGV2dC51cmwgIT09IG5leHRVcmwgfHwgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlNlcnZlclJlZnVzZUVudGVyKHsKICAgICAgICAgICAgICAgICAgICBmYWlsZWQ6IC05NTI3MCwgbXNnOiAic2RrIHJlY29ubmVjdCBmYWlsLiAiICsgbmV4dFVybCArICJ8IiArIGV2dC51cmwgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIF9jb25uZWN0LmNhbGwoc2VsZiwgY29ubmVjdGVkLCBmYWlsZWQsIHJldHJ5KTsKICAgIH0sCgogICAgY29ubmVjdGVkOiBmdW5jdGlvbiBjb25uZWN0ZWQod3NVcmkpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIHJlc3VsdCA9IHNlbGYub25saW5lICYmIHNlbGYuX3dlYnNvY2tldCAmJiAoIXdzVXJpIHx8IHdzVXJpID09PSBzZWxmLl93ZWJzb2NrZXQudXJsKSAmJiBzZWxmLl93ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PSBXZWJTb2NrZXQuT1BFTjsKICAgICAgICAvL19sb2dnZXIudHJhY2UoIkNvbm5lY3RlZD8iLCByZXN1bHQsIHNlbGYub25saW5lLCB3c1VyaSwgc2VsZi5fd2Vic29ja2V0ICYmIHNlbGYuX3dlYnNvY2tldC51cmwsIHNlbGYuX3dlYnNvY2tldCAmJiBzZWxmLl93ZWJzb2NrZXQucmVhZHlTdGF0ZSk7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAoKICAgIG9uV2Vic29ja2V0RXZlbnQ6IGZ1bmN0aW9uIG9uV2Vic29ja2V0RXZlbnQoZXZ0KSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHNlbGYub25FdmVudChldnQpOwogICAgfSwKCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIobGlzdGVuZXJzKSB7CiAgICAgICAgaWYgKCh0eXBlb2YgbGlzdGVuZXJzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihsaXN0ZW5lcnMpKSA9PT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgZm9yICh2YXIgZXZlbnQgaW4gbGlzdGVuZXJzKSB7CiAgICAgICAgICAgICAgICB0aGlzLmJpbmQoZXZlbnQsIGxpc3RlbmVyc1tldmVudF0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKGV2ZW50LCBmdW5jKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgb25GdW5jOwogICAgICAgIGlmIChvbkZ1bmMgPSBzZWxmLl9ldmVudHNbZXZlbnRdKSB7CiAgICAgICAgICAgIHNlbGZbb25GdW5jXSA9IGZ1bmM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiTm90IHN1cHBvcnRlZCBldmVudCA9ICIsIGV2ZW50KTsKICAgICAgICAgICAgdGhyb3cgIk5vdCBzdXBwb3J0ZWQgZXZlbnQgPSAiICsgZXZlbnQ7CiAgICAgICAgfQogICAgfSwKCiAgICBnZXRTZXNzaW9uSWQ6IGZ1bmN0aW9uIGdldFNlc3Npb25JZCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fc2Vzc2lvbklkOwogICAgfSwKCiAgICBuZXdNZXNzYWdlOiBmdW5jdGlvbiBuZXdNZXNzYWdlKGNmZykgewogICAgICAgIHJldHVybiBuZXcgTWVzc2FnZShjZmcpOwogICAgfSwKCiAgICBfX21vZGlmeU1lc3NhZ2U6IGZ1bmN0aW9uIF9fbW9kaWZ5TWVzc2FnZShtZXNzYWdlKSB7CiAgICAgICAgaWYgKG1lc3NhZ2UgJiYgbWVzc2FnZS5zZHApIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLnNkcCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2RwID0gX3V0aWwucGFyc2VKU09OKG1lc3NhZ2Uuc2RwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBtZXNzYWdlLnNkcC50eXBlICYmIChtZXNzYWdlLnNkcC50eXBlID0gbWVzc2FnZS5zZHAudHlwZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgbWVzc2FnZS5jY3R4ICYmIChtZXNzYWdlLnNkcC5jY3R4ID0gbWVzc2FnZS5jY3R4KTsKICAgICAgICB9CiAgICAgICAgaWYgKG1lc3NhZ2UgJiYgbWVzc2FnZS5jYW5kcykgewogICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuY2FuZHMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhbmRzID0gX3V0aWwucGFyc2VKU09OKG1lc3NhZ2UuY2FuZHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2UuY2FuZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHR5cGVvZiBtZXNzYWdlLmNhbmRzW2ldID09PSAnc3RyaW5nJyAmJiAobWVzc2FnZS5jYW5kc1tpXSA9IF91dGlsLnBhcnNlSlNPTihtZXNzYWdlLmNhbmRzW2ldKSk7CgogICAgICAgICAgICAgICAgbWVzc2FnZS5jYW5kc1tpXS5zZHBNTGluZUluZGV4ID0gbWVzc2FnZS5jYW5kc1tpXS5tbGluZWluZGV4OwogICAgICAgICAgICAgICAgbWVzc2FnZS5jYW5kc1tpXS5zZHBNaWQgPSBtZXNzYWdlLmNhbmRzW2ldLm1pZDsKCiAgICAgICAgICAgICAgICBkZWxldGUgbWVzc2FnZS5jYW5kc1tpXS5tbGluZWluZGV4OwogICAgICAgICAgICAgICAgZGVsZXRlIG1lc3NhZ2UuY2FuZHNbaV0ubWlkOwoKICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2N0eCAmJiAobWVzc2FnZS5jYW5kc1tpXS5jY3R4ID0gbWVzc2FnZS5jY3R4KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKG1lc3NhZ2UgJiYgbWVzc2FnZS5tZW1zKSB7CiAgICAgICAgICAgIGlmICghX3V0aWwuaXNBcnJheShtZXNzYWdlLm1lbXMpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBfbWVtcyA9IG1lc3NhZ2UubWVtczsKICAgICAgICAgICAgbWVzc2FnZS5tZW1zID0ge307CgogICAgICAgICAgICBfdXRpbC5mb3JFYWNoKF9tZW1zLCBmdW5jdGlvbiAoaW5kZXgsIF9tZW0pIHsKICAgICAgICAgICAgICAgIF9tZW0ubmFtZSAmJiAoX21lbS5tZW1OYW1lID0gX21lbS5uYW1lKTsKICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVtc1tfbWVtLmlkXSA9IF9tZW07CgogICAgICAgICAgICAgICAgdmFyIGFjcHRPcHMgPSBfbWVtLmFjcHRPcHMgPSB7fTsKICAgICAgICAgICAgICAgIF91dGlsLmZvckVhY2goZW1lZGlhLmNvbmZpZy5iYXNlQWNwdE9wcywgZnVuY3Rpb24gKF9pbmRleCwgX29wZXIpIHsKICAgICAgICAgICAgICAgICAgICBhY3B0T3BzW19vcGVyXSA9IHRydWU7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChfbWVtLnJlcykgewogICAgICAgICAgICAgICAgICAgIF91dGlsLmZvckVhY2goX21lbS5yZXMub3BzLCBmdW5jdGlvbiAoX2luZGV4LCBfb3BlcikgewogICAgICAgICAgICAgICAgICAgICAgICBhY3B0T3BzW19vcGVyXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF9tZW0gJiYgX21lbS5leHQpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lbXNbX21lbS5pZF0uZXh0ID0gSlNPTi5wYXJzZShfbWVtLmV4dCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAobWVzc2FnZSAmJiBtZXNzYWdlLm1lbSkgewogICAgICAgICAgICBtZXNzYWdlLm1lbS5uYW1lICYmIChtZXNzYWdlLm1lbS5tZW1OYW1lID0gbWVzc2FnZS5tZW0ubmFtZSk7CgogICAgICAgICAgICB2YXIgYWNwdE9wcyA9IG1lc3NhZ2UubWVtLmFjcHRPcHMgPSB7fTsKICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChlbWVkaWEuY29uZmlnLmJhc2VBY3B0T3BzLCBmdW5jdGlvbiAoX2luZGV4LCBfb3BlcikgewogICAgICAgICAgICAgICAgYWNwdE9wc1tfb3Blcl0gPSB0cnVlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKG1lc3NhZ2UubWVtLnJlcykgewogICAgICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChtZXNzYWdlLm1lbS5yZXMub3BzLCBmdW5jdGlvbiAoX2luZGV4LCBfb3BlcikgewogICAgICAgICAgICAgICAgICAgIGFjcHRPcHNbX29wZXJdID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobWVzc2FnZS5tZW0gJiYgbWVzc2FnZS5tZW0uZXh0KSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVtLmV4dCA9IEpTT04ucGFyc2UobWVzc2FnZS5tZW0uZXh0KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobWVzc2FnZSAmJiBtZXNzYWdlLnN0cmVhbXMpIHsKICAgICAgICAgICAgaWYgKCFfdXRpbC5pc0FycmF5KG1lc3NhZ2Uuc3RyZWFtcykpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIF9zdHJlYW1zID0gbWVzc2FnZS5zdHJlYW1zOwogICAgICAgICAgICBtZXNzYWdlLnN0cmVhbXMgPSB7fTsKCiAgICAgICAgICAgIF91dGlsLmZvckVhY2goX3N0cmVhbXMsIGZ1bmN0aW9uIChpbmRleCwgX3N0cmVhbSkgewogICAgICAgICAgICAgICAgbWVzc2FnZS5zdHJlYW1zW19zdHJlYW0uaWRdID0gX3N0cmVhbTsKCiAgICAgICAgICAgICAgICBpZiAoX3N0cmVhbSAmJiBfc3RyZWFtLmV4dCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc3RyZWFtc1tfc3RyZWFtLmlkXS5leHQgPSBKU09OLnBhcnNlKF9zdHJlYW0uZXh0KTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChtZXNzYWdlICYmIG1lc3NhZ2UucHViUykgewogICAgICAgICAgICBpZiAobWVzc2FnZS5wdWJTICYmIG1lc3NhZ2UucHViUy5leHQpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wdWJTLmV4dCA9IEpTT04ucGFyc2UobWVzc2FnZS5wdWJTLmV4dCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZyhlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKG1lc3NhZ2UgJiYgbWVzc2FnZS5leHQpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXh0ID0gSlNPTi5wYXJzZShtZXNzYWdlLmV4dCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBtZXNzYWdlOwogICAgfSwKCiAgICBvbk1lc3NhZ2U6IGZ1bmN0aW9uIG9uTWVzc2FnZShzZXJ2TWVzc2FnZSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgZnVuY3Rpb24gb25GdW5jKHNlcnZNZXNzYWdlKSB7CiAgICAgICAgICAgIHZhciBvbkZ1bmM7CiAgICAgICAgICAgIHZhciBldmVudCA9IHNlcnZNZXNzYWdlLm9wOwogICAgICAgICAgICBpZiAoKG9uRnVuYyA9IHNlbGYuX2V2ZW50c1tldmVudF0pICYmIChvbkZ1bmMgPSBzZWxmW29uRnVuY10pKSB7CiAgICAgICAgICAgICAgICBvbkZ1bmMuY2FsbChzZWxmLCBzZXJ2TWVzc2FnZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvL3Rocm93ICJOb3Qgc3VwcG9ydGVkIGV2ZW50ID0gIiArIHNlcnZNZXNzYWdlOwogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJOb3Qgc3VwcG9ydGVkIGV2ZW50ID0gIiwgc2Vydk1lc3NhZ2UpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc2Vydk1lc3NhZ2Uub3AgIT0gMTAwMSAmJiAhc2Vydk1lc3NhZ2Uuc2Vzc0lkKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIm1lc3NhZ2Ugc2Vzc0lkIGVycm9yLiBzZXJ2ZXIgZXZ0IGRhdGEgZXJyb3IiKTsKICAgICAgICAgICAgdGhyb3cgIm1lc3NhZ2Ugc2Vzc0lkIGVycm9yLiBzZXJ2ZXIgZXZ0IGRhdGEgZXJyb3IiOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNlcnZNZXNzYWdlLm9wICE9IDEwMDEgJiYgc2VsZi5fc2Vzc2lvbklkICYmIHNlbGYuX3Nlc3Npb25JZCAhPSBzZXJ2TWVzc2FnZS5zZXNzSWQpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigibWVzc2FnZSBzZXNzSWQgZXJyb3IuIHNlcnZlciBhbmQgbG9jYWwgbm90IGVxdWFsIik7CiAgICAgICAgICAgIHRocm93ICJtZXNzYWdlIHNlc3NJZCBlcnJvci4gc2VydmVyIGFuZCBsb2NhbCBub3QgZXF1YWwiOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNlcnZNZXNzYWdlLm9wID09PSAxMDA0KSB7CiAgICAgICAgICAgIG9uRnVuYyhzZXJ2TWVzc2FnZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlcnZNZXNzYWdlID0gc2VsZi5fX21vZGlmeU1lc3NhZ2Uoc2Vydk1lc3NhZ2UpOwoKICAgICAgICB2YXIgcmVxTWVzc2FnZSA9IF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzZWxmLl9jYWxsYmFja3MsIHNlcnZNZXNzYWdlLnRzeElkKTsKICAgICAgICBpZiAocmVxTWVzc2FnZSAmJiByZXFNZXNzYWdlLm9wID09PSAyMDApIHsKICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbklkID0gc2Vydk1lc3NhZ2Uuc2Vzc0lkOwoKICAgICAgICAgICAgaWYgKHNlcnZNZXNzYWdlLnJlc3VsdCA9PT0gMCkgewogICAgICAgICAgICAgICAgLy9lbnRlciDmiJDlip8KICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIHNlbGYuX2J1ZmZlcmVkTWVzc2FnZXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHNlbGYuX2J1ZmZlcmVkTWVzc2FnZXNbaW5kZXhdOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc2Vzc0lkICYmIG1lc3NhZ2Uub3AgIT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlc3NJZCA9IHNlcnZNZXNzYWdlLnNlc3NJZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5ub3RpZnlOZXdNZXNzYWdlKCk7CiAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIGJ1ZmZlcmVkTWVzc2FnZTsKICAgICAgICAgICAgICAgIHdoaWxlIChidWZmZXJlZE1lc3NhZ2UgPSBzZWxmLl9idWZmZXJlZE1lc3NhZ2VzLnNoaWZ0KCkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyZWRNZXNzYWdlLm9wID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBzZWxmLm9uTWVzc2FnZSh7IG9wOiAxMDAxLCB0c3hJZDogYnVmZmVyZWRNZXNzYWdlLnRzeElkLCByZXN1bHQ6IC05NTI3LCBtc2c6ICJzZGsgZW50ZXIgZmFpbC4gc2RrIGNhbGxiYWNrLiBlbnRlciByZXN1bHQgPSAiICsgc2Vydk1lc3NhZ2UucmVzdWx0IH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc2VsZi5vd25lciAmJiBzZWxmLm93bmVyLmNsb3NlZCkgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oInNlbGYgY2xvc2VkLiBtZSBpcyAiICsgc2VsZi5vd25lci5nZXRNZW1iZXJJZCgpICsgIiwgc2Vzc2lvbl9pZCA9ICIgKyBzZWxmLmdldFNlc3Npb25JZCgpICsgIi4gZHJvcCBtZXNzYWdlIiwgc2Vydk1lc3NhZ2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuUmVjdlJlc3BvbnNlKHsgcmVxdWVzdDogcmVxTWVzc2FnZSwgcmVzcG9uc2U6IHNlcnZNZXNzYWdlIH0pKTsKCiAgICAgICAgaWYgKHJlcU1lc3NhZ2UgJiYgcmVxTWVzc2FnZS5fX2NhbGxiYWNrX18gJiYgc2Vydk1lc3NhZ2Uub3AgIT09IDEwMDQpIHsKICAgICAgICAgICAgcmVxTWVzc2FnZS5fX2NhbGxiYWNrX18oc2Vydk1lc3NhZ2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIXNlcnZNZXNzYWdlLm9wIHx8IHNlcnZNZXNzYWdlLm9wID09IDEwMDEpIHsKICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygiSWdyb24gbWVzc2FnZS4gY2F1c2VkIGJ5IG9wIG5vdCBmb3VuZC4iLCBzZXJ2TWVzc2FnZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIG9uRnVuYyhzZXJ2TWVzc2FnZSk7CiAgICB9LAoKICAgIF9fbW9kaWZ5TWVzc2FnZUZvclBvc3Q6IGZ1bmN0aW9uIF9fbW9kaWZ5TWVzc2FnZUZvclBvc3QobWVzc2FnZSkgewogICAgICAgIGlmIChtZXNzYWdlLmNhbmRzKSB7CiAgICAgICAgICAgIHZhciBfY2FuZHMgPSBbXTsKCiAgICAgICAgICAgIHZhciBjYW5kcyA9IG1lc3NhZ2UuY2FuZHM7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FuZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBfY2FuZDsKCiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgY2FuZHNbaV0uY2N0eCAmJiAobWVzc2FnZS5jY3R4ID0gY2FuZHNbaV0uY2N0eCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYW5kc1tpXSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgICBfY2FuZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNhbmRpZGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZTogY2FuZHNbaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIG1saW5laW5kZXg6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG1pZDogImF1ZGlvIgogICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXE6IGkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBpZiAoY2FuZHNbaV0udHlwZSAmJiBjYW5kc1tpXS50eXBlID09ICJjYW5kaWRhdGUiKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgIF9jYW5kcy5wdXNoKGNhbmRzW2ldKTsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgICAgICAgICBfY2FuZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNhbmRpZGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZTogY2FuZHNbaV0uY2FuZGlkYXRlLAogICAgICAgICAgICAgICAgICAgICAgICBtbGluZWluZGV4OiBjYW5kc1tpXS5zZHBNTGluZUluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICBtaWQ6IGNhbmRzW2ldLnNkcE1pZAogICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXE6IGkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jYW5kcy5wdXNoKEpTT04uc3RyaW5naWZ5KF9jYW5kKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1lc3NhZ2UuY2FuZHMgPSBfY2FuZHM7CiAgICAgICAgfQoKICAgICAgICBpZiAobWVzc2FnZS5zZHAgJiYgdHlwZW9mIG1lc3NhZ2Uuc2RwICE9PSAic3RyaW5nIikgewogICAgICAgICAgICB2YXIgX3NkcCA9IHsKICAgICAgICAgICAgICAgIHR5cGU6IG1lc3NhZ2Uuc2RwLnR5cGUsCiAgICAgICAgICAgICAgICBzZHA6IG1lc3NhZ2Uuc2RwLnNkcAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbWVzc2FnZS5zZHAuY2N0eCAmJiAobWVzc2FnZS5jY3R4ID0gbWVzc2FnZS5zZHAuY2N0eCk7CgogICAgICAgICAgICBtZXNzYWdlLnNkcCA9IF9zZHA7CgogICAgICAgICAgICBtZXNzYWdlLnNkcC50eXBlID0gbWVzc2FnZS5zZHAudHlwZS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICBtZXNzYWdlLnNkcCA9IF91dGlsLnN0cmluZ2lmeUpTT04obWVzc2FnZS5zZHApOwogICAgICAgIH0KCiAgICAgICAgLy8gaWYobWVzc2FnZS5leHQgJiYgX3V0aWwuaXNQbGFpbk9iamVjdChtZXNzYWdlLmV4dCkpewogICAgICAgIC8vICAgICBtZXNzYWdlLmV4dCA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UuZXh0KTsKICAgICAgICAvLyB9CgogICAgICAgIG1lc3NhZ2UucHViUyAmJiBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUobWVzc2FnZS5wdWJTLCAiX2xvY2F0ZWQiKTsKICAgICAgICBtZXNzYWdlLnB1YlMgJiYgX3V0aWwucmVtb3ZlQXR0cmlidXRlKG1lc3NhZ2UucHViUywgIm11dGVkTXV0ZWQiKTsKICAgICAgICBtZXNzYWdlLnB1YlMgJiYgX3V0aWwucmVtb3ZlQXR0cmlidXRlKG1lc3NhZ2UucHViUywgIm1lZGlhU3RyZWFtIik7CiAgICAgICAgbWVzc2FnZS5wdWJTICYmIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShtZXNzYWdlLnB1YlMsICJpc1JlcHVibGlzaGVkIik7CiAgICAgICAgbWVzc2FnZS5wdWJTICYmIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShtZXNzYWdlLnB1YlMsICJvcHRpbWFsVmlkZW9Db2RlY3MiKTsKCiAgICAgICAgdHlwZW9mIG1lc3NhZ2UucG9zdCA9PT0gImZ1bmN0aW9uIiAmJiBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUobWVzc2FnZSwgInBvc3QiKTsKCiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICB9LAoKICAgIHBvc3RNZXNzYWdlOiBmdW5jdGlvbiBwb3N0TWVzc2FnZShtZXNzYWdlLCBjYWxsYmFjaywgdGltZW91dE1pbGxpcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFtZXNzYWdlLnRzeElkKSB7CiAgICAgICAgICAgIG1lc3NhZ2UudHN4SWQgPSAiTVNHIiArIERhdGUubm93KCkgKyAiLSIgKyBfX3Nlc3Npb25fZ2xvYmFsQ291bnQrKzsKICAgICAgICB9CgogICAgICAgIGlmIChtZXNzYWdlLm1lbUlkKSB7CiAgICAgICAgICAgIHZhciBfbWVtID0gc2VsZi5vd25lci5fY2FjaGVNZW1iZXJzW21lc3NhZ2UubWVtSWRdOwoKICAgICAgICAgICAgaWYgKCFfbWVtKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIk1lbWJlciBub3QgZm91bmQgYXQgbG9jYWwuIG1lbWJlcklkID0gIiArIG1lc3NhZ2UubWVtSWQsIG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soeyBvcDogMTAwMSwgdHN4SWQ6IG1lc3NhZ2UudHN4SWQsIHJlc3VsdDogLTUwNywgbXNnOiAiIG1lbWJlciBub3QgZm91bmQgYXQgbG9jYWwuIG1lbWJlcklkID0gIiArIG1lc3NhZ2UubWVtSWQgfSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciByZXFPcHMgPSBtZXNzYWdlLl9yZXFPcHM7CiAgICAgICAgICAgIGlmICghcmVxT3BzKSB7CiAgICAgICAgICAgICAgICByZXFPcHMgPSBbXTsKICAgICAgICAgICAgICAgIHJlcU9wcy5wdXNoKG1lc3NhZ2Uub3ApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHZhciBpbmRleCBpbiByZXFPcHMpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVxT3AgPSByZXFPcHNbaW5kZXhdOwoKICAgICAgICAgICAgICAgIGlmICghX21lbS5hY3B0T3BzW19yZXFPcF0pIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIk1lbWJlciBub3QgYWNjZXB0IG9wICIgKyBfcmVxT3AgKyAiLCAiICsgbWVzc2FnZS5tZW1JZCwgbWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soeyBvcDogMTAwMSwgdHN4SWQ6IG1lc3NhZ2UudHN4SWQsIHJlc3VsdDogLTUwNywgbXNnOiAiIG1lbWJlciBub3QgYWNjZXB0IG9wICIgKyBfcmVxT3AgKyAiLCAiICsgbWVzc2FnZS5tZW1JZCB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKG1lc3NhZ2UsICdfcmVxT3BzJyk7CgogICAgICAgIGlmIChzZWxmLl9zZXNzaW9uSWQgJiYgc2VsZi5fc2Vzc2lvbklkICE9IG1lc3NhZ2Uuc2Vzc0lkKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2Fybigic2Vzc2lvbklkIG5vdCBleGNlcHRlZC4gc2VsZi5fc2Vzc2lvbklkID0gIiArIHNlbGYuX3Nlc3Npb25JZCwgbWVzc2FnZSk7CiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHsgb3A6IDEwMDEsIHRzeElkOiBtZXNzYWdlLnRzeElkLCByZXN1bHQ6IC05NTI3LCBtc2c6ICJzZXNzaW9uSWQgbm90IGV4Y2VwdGVkLiIgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHNlbGYuY2xvc2VkKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2Fybigic2Vzc2lvbiBjbG9zZWQuIiwgbWVzc2FnZSk7CiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHsgb3A6IDEwMDEsIHRzeElkOiBtZXNzYWdlLnRzeElkLCByZXN1bHQ6IC05NTI3LCBtc2c6ICJzZXNzaW9uIGNsb3NlZCIgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBvbGRNZXNzYWdlID0gX3V0aWwuZXh0ZW5kKHt9LCBtZXNzYWdlKTsKICAgICAgICBtZXNzYWdlID0gc2VsZi5fX21vZGlmeU1lc3NhZ2VGb3JQb3N0KG1lc3NhZ2UpOwogICAgICAgIGlmICghbWVzc2FnZSkgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIk1lc3NhZ2UgZHJvcC4gY2FsbGJhY2sgc3VjY2Vzcy4iLCBtZXNzYWdlKTsKICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soeyBvcDogMTAwMSwgdHN4SWQ6IG9sZE1lc3NhZ2UudHN4SWQsIHJlc3VsdDogMCwgbXNnOiAiTWVzc2FnZSBkcm9wLiBjYWxsYmFjayBzdWNjZXNzLiIgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChtZXNzYWdlLm9wID09PSAyMDApIHsKICAgICAgICAgICAgLy8gZW50ZXIg5pS+5Zyo6aaW5L2NCiAgICAgICAgICAgIHNlbGYuX2J1ZmZlcmVkTWVzc2FnZXMudW5zaGlmdChtZXNzYWdlKTsKCiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLl9jYWxsYmFja3NbbWVzc2FnZS50c3hJZF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiRW50ZXIgdGltZW91dC4gZmFpbC4iKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLm9uTWVzc2FnZSh7IG9wOiAxMDAxLCB0c3hJZDogbWVzc2FnZS50c3hJZCwgcmVzdWx0OiAtOTUyNywgbXNnOiAiZW50ZXIgdGltZW91dC4gbWlsbGlzID0gIiArIGVtZWRpYS5jb25maWcuZW50ZXJUaW1lb3V0IH0pOwogICAgICAgICAgICAgICAgfSwgZW1lZGlhLmNvbmZpZy5lbnRlclRpbWVvdXQpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VsZi5fYnVmZmVyZWRNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpOwogICAgICAgIH0KCiAgICAgICAgY2FsbGJhY2sgJiYgKHNlbGYuX2NhbGxiYWNrc1ttZXNzYWdlLnRzeElkXSA9IF91dGlsLmV4dGVuZChtZXNzYWdlLCB7CiAgICAgICAgICAgIF9fY2FsbGJhY2tfXzogY2FsbGJhY2suYmluZChzZWxmLm93bmVyKQogICAgICAgIH0pKTsKCiAgICAgICAgc2VsZi5ub3RpZnlOZXdNZXNzYWdlICYmIHNlbGYubm90aWZ5TmV3TWVzc2FnZSgpOwoKICAgICAgICBpZiAodGltZW91dE1pbGxpcyAmJiBjYWxsYmFjaykgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gc2VsZi5fY2FsbGJhY2tzW21lc3NhZ2UudHN4SWRdOwoKICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlICYmIG1lc3NhZ2UuX19jYWxsYmFja19fKSB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5fX2NhbGxiYWNrX18oeyBvcDogMTAwMSwgdHN4SWQ6IG9sZE1lc3NhZ2UudHN4SWQsIHJlc3VsdDogLTQwOCwgbXNnOiAiTWVzc2FnZSByZXF1ZXN0IHRpbWVvdXQuIiB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fY2FsbGJhY2tzLCBtZXNzYWdlLnRzeElkKTsKICAgICAgICAgICAgfSwgdGltZW91dE1pbGxpcyk7CiAgICAgICAgfQogICAgfSwKCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UocmVhc29uKSB7CiAgICAgICAgX2xvZ2dlci53YXJuKCJzZXNzaW9uZyBjbG9zaW5nLCByZWFzb24gPSAiLCByZWFzb24pOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYubm90aWZ5TmV3TWVzc2FnZSAmJiBzZWxmLm5vdGlmeU5ld01lc3NhZ2UoKTsKCiAgICAgICAgc2VsZi5jbG9zZWQgPSB0cnVlOwoKICAgICAgICBzZWxmLnNlcW5vID0gMDsKCiAgICAgICAgc2VsZi5fd2Vic29ja2V0ICYmIChyZWFzb24gPT0gMCB8fCByZWFzb24gPT0gMTAwID8gc2VsZi5fd2Vic29ja2V0LmNsb3NlKDEwMDApIDogc2VsZi5fd2Vic29ja2V0LmNsb3NlKCkpOwoKICAgICAgICBzZWxmLl9fcmV0cnlDb25uZWN0SW50ZXJ2YWxJZCAmJiBjbGVhclRpbWVvdXQoc2VsZi5fX3JldHJ5Q29ubmVjdEludGVydmFsSWQpOwogICAgICAgIHNlbGYuX19yZXRyeUNvbm5lY3RJbnRlcnZhbElkICYmIGRlbGV0ZSBzZWxmLl9fcmV0cnlDb25uZWN0SW50ZXJ2YWxJZDsKCiAgICAgICAgc2VsZi5fX2NoZWNrQ29ubmVjdEludGVydmFsSWQgJiYgY2xlYXJUaW1lb3V0KHNlbGYuX19jaGVja0Nvbm5lY3RJbnRlcnZhbElkKTsKICAgICAgICBzZWxmLl9fY2hlY2tDb25uZWN0SW50ZXJ2YWxJZCAmJiBkZWxldGUgc2VsZi5fX2NoZWNrQ29ubmVjdEludGVydmFsSWQ7CgogICAgICAgIHNlbGYub3duZXIgPSBudWxsOwogICAgICAgIC8vc2VsZi5fc2Vzc2lvbklkID0gbnVsbDsKCiAgICAgICAgc2VsZi5fYnVmZmVyZWRNZXNzYWdlcyA9IFtdOwogICAgICAgIHNlbGYuX2NhbGxiYWNrcyA9IHt9OwoKICAgICAgICBfbG9nZ2VyLndhcm4oInNlc3Npb24gY2xvc2VkIik7CiAgICB9Cn0pOwoKLyoqKi8gfSksCi8qIDIxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC5sb2dnZXI7CgovKioKICogRXJyb3IoewogKiAgIGhpZGRlbjoKICogfSkKICoKICoKICoKICoKICovCnZhciBFcnJvciA9IF91dGlsLnByb3RvdHlwZUV4dGVuZCh7CiAgICBtc2c6ICIiLAogICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgIHRoaXMuZGF5ID0gbmV3IERhdGUoKTsKICAgIH0sCgogICAgZXhlY1RpbWU6IGZ1bmN0aW9uIGV4ZWNUaW1lKCkgewogICAgICAgIHZhciBob3VyID0gdGhpcy5kYXkuZ2V0SG91cnMoKTsKICAgICAgICBpZiAoaG91ciA8IDEwKSB7CiAgICAgICAgICAgIGhvdXIgPSAiMCIgKyBob3VyOwogICAgICAgIH0KICAgICAgICB2YXIgbWludXRlID0gdGhpcy5kYXkuZ2V0TWludXRlcygpOwogICAgICAgIGlmIChtaW51dGUgPCAxMCkgewogICAgICAgICAgICBtaW51dGUgPSAiMCIgKyBtaW51dGU7CiAgICAgICAgfQogICAgICAgIHZhciBzZWNvbmQgPSB0aGlzLmRheS5nZXRTZWNvbmRzKCk7CiAgICAgICAgaWYgKHNlY29uZCA8IDEwKSB7CiAgICAgICAgICAgIHNlY29uZCA9ICIwIiArIHNlY29uZDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBob3VyICsgIjoiICsgbWludXRlICsgIjoiICsgc2Vjb25kOwogICAgfQp9KTsKCnZhciBfX0lDRUV2ZW50ID0gRXJyb3IuZXh0ZW5kKHsKICAgIF93ZWJydGNEZXNjOiBmdW5jdGlvbiBfd2VicnRjRGVzYygpIHsKICAgICAgICB2YXIgd2VicnRjID0gdGhpcy53ZWJydGM7CgogICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy53ZWJydGMuZ2V0UnRjSWQoKTsKCiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICB9Cn0pOwoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgICBFeGNlcHRpb246IEVycm9yLmV4dGVuZCgpLAoKICAgIC8qKgogICAgICoge3JldHJ5OiByZXRyeSwgb25saW5lOiBzZWxmLm9ubGluZSwgZXZlbnQ6IGV2dCwgY2F1c2U6IGUsIHNlc3Npb246IHNlbGZ9CiAgICAgKi8KICAgIFdTQ2xvc2U6IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5leGVjVGltZSgpICsgIiBXU0Nsb3NlOiBXZWJzb2NrZXQgY2xvc2UgKCIgKyAodGhpcy5yZXRyeSB8fCAwKSArICIpLiI7CgogICAgICAgICAgICB0aGlzLm9ubGluZSB8fCAobWVzc2FnZSArPSAiIG9mZmxpbmUuIik7CiAgICAgICAgICAgIHRoaXMuZXZlbnQgJiYgKG1lc3NhZ2UgKz0gIiB3c2NvZGU6ICIgKyB0aGlzLmV2ZW50LmNvZGUpOwogICAgICAgICAgICB0aGlzLmNhdXNlICYmIChtZXNzYWdlICs9ICIgY2F1c2U6ICIgKyB0aGlzLmNhdXNlLm1lc3NhZ2UpOwoKICAgICAgICAgICAgdGhpcy51cmwgJiYgKG1lc3NhZ2UgKz0gIiB1cmw6ICIgKyB0aGlzLnVybCk7CgogICAgICAgICAgICBtZXNzYWdlICs9ICIgcmV0cnk6ICIgKyAodGhpcy5yZXRyeSB8fCAwKTsKCiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiAmJiB0aGlzLnNlc3Npb24uZ2V0U2Vzc2lvbklkKCkgJiYgKG1lc3NhZ2UgPSBtZXNzYWdlICsgIiwgc2VzcyA9ICIgKyB0aGlzLnNlc3Npb24uZ2V0U2Vzc2lvbklkKCkpOwoKICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICAgICAgfSB9KSwKCiAgICAvKioKICAgICAqIHtldmVudDogZXZ0LCBvbmxpbmU6IHNlbGYub25saW5lLCBzZXNzaW9uOiBzZWxmfQogICAgICovCiAgICBXU0Vycm9yOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuZXhlY1RpbWUoKSArICIgV1NFcnJvcjogV2Vic29ja2V0IGVycm9yLiByZWFkeSBzdGF0ZToiICsgKHRoaXMuZXZlbnQuc3JjRWxlbWVudCAmJiB0aGlzLmV2ZW50LnNyY0VsZW1lbnQucmVhZHlTdGF0ZSB8fCB0aGlzLmV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZHlTdGF0ZSkgKyAiLiBvbmxpbmUgPSAiICsgdGhpcy5vbmxpbmU7CiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiAmJiB0aGlzLnNlc3Npb24uZ2V0U2Vzc2lvbklkKCkgJiYgKG1lc3NhZ2UgPSBtZXNzYWdlICsgIiwgc2VzcyA9ICIgKyB0aGlzLnNlc3Npb24uZ2V0U2Vzc2lvbklkKCkpOwoKICAgICAgICAgICAgdGhpcy51cmwgJiYgKG1lc3NhZ2UgKz0gIiB1cmw6ICIgKyB0aGlzLnVybCk7CgogICAgICAgICAgICByZXR1cm4gbWVzc2FnZTsKICAgICAgICB9IH0pLAoKICAgIC8qKgogICAgICoge2V2ZW50OiBldnQsIHNlc3Npb246IHNlbGZ9CiAgICAgKi8KICAgIFdTQ29ubmVjdGVkOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuZXhlY1RpbWUoKSArICIgV1NDb25uZWN0ZWQ6IFdlYnNvY2tldCBzdWNjZXNzLiByZWFkeSBzdGF0ZToiICsgKHRoaXMuZXZlbnQuc3JjRWxlbWVudCAmJiB0aGlzLmV2ZW50LnNyY0VsZW1lbnQucmVhZHlTdGF0ZSB8fCB0aGlzLmV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZHlTdGF0ZSk7CiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiAmJiB0aGlzLnNlc3Npb24uZ2V0U2Vzc2lvbklkKCkgJiYgKG1lc3NhZ2UgPSBtZXNzYWdlICsgIiwgc2VzcyA9ICIgKyB0aGlzLnNlc3Npb24uZ2V0U2Vzc2lvbklkKCkpOwoKICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICAgICAgfSB9KSwKCiAgICAvKioKICAgICAqIHt3ZWJydGM6IHdlYnJ0YywgZXZlbnQ6IHdlYnJ0Y0V2ZW50LCBzdGF0ZTogd2VicnRjRXZlbnQudGFyZ2V0LmljZUNvbm5lY3Rpb25TdGF0ZX0KICAgICAqLwogICAgSUNFQ2hhbmFnZTogX19JQ0VFdmVudC5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBJQ0VDaGFuYWdlOiAiICsgdGhpcy5fd2VicnRjRGVzYygpICsgIiBzdGF0ZTogIiArIHRoaXMuc3RhdGU7CiAgICAgICAgfSB9KSwKCiAgICAvKioKICAgICAqIHt3ZWJydGM6IHdlYnJ0YywgZXZlbnQ6IGVycn0KICAgICAqLwogICAgQWRkSWNlQ2FuZEVycm9yOiBfX0lDRUV2ZW50LmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIEFkZEljZUNhbmRFcnJvcjogIiArIHRoaXMuX3dlYnJ0Y0Rlc2MoKSArICIsIGFkZCBjYW5kIGVycm9yIjsKICAgICAgICB9IH0pLAoKICAgIC8qKgogICAgICoge3dlYnJ0Yzogd2VicnRjLCBldmVudDogZXZlbnR9CiAgICAgKi8KICAgIElDRUNvbm5lY3RGYWlsOiBfX0lDRUV2ZW50LmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIElDRUNvbm5lY3RGYWlsOiAiICsgdGhpcy5fd2VicnRjRGVzYygpICsgIiBmYWlsZWQiOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7d2VicnRjOiB3ZWJydGMsIGV2ZW50OiBldmVudH0KICAgICAqLwogICAgSUNFQ29ubmVjdGVkOiBfX0lDRUV2ZW50LmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIElDRUNvbm5lY3RlZDogIiArIHRoaXMuX3dlYnJ0Y0Rlc2MoKSArICIgY29ubmVjdGVkIjsKICAgICAgICB9IH0pLAoKICAgIC8qKgogICAgICoge3dlYnJ0Yzogd2VicnRjLCBldmVudDogZXZlbnR9CiAgICAgKi8KICAgIElDRURpc2Nvbm5lY3RlZDogX19JQ0VFdmVudC5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBJQ0VEaXNjb25uZWN0ZWQ6ICIgKyB0aGlzLl93ZWJydGNEZXNjKCkgKyAiIGRpc2Nvbm5lY3RlZCI7CiAgICAgICAgfSB9KSwKCiAgICAvKioKICAgICAqIHt3ZWJydGM6IHdlYnJ0Y30KICAgICAqLwogICAgSUNFQ2xvc2VkOiBfX0lDRUV2ZW50LmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIElDRUNsb3NlZDogIiArIHRoaXMuX3dlYnJ0Y0Rlc2MoKSArICIgY2xvc2VkIjsKICAgICAgICB9IH0pLAoKICAgIC8qKgogICAgICoge3dlYnJ0Yzogd2VicnRjfQogICAgICovCiAgICBJQ0VSZW1vdGVNZWRpYVN0cmVhbTogX19JQ0VFdmVudC5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBJQ0VSZW1vdGVNZWRpYVN0cmVhbTogIiArIHRoaXMuX3dlYnJ0Y0Rlc2MoKSArICIgZ290IHJlbW90ZSBzdHJlYW0iOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7c3RyZWFtOiBzdHJlYW0sIHN0YXRlOiwgbXNnOiB9CiAgICAgKi8KICAgIFN0cmVhbVN0YXRlOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBTdHJlYW1TdGF0ZTogIiArICIgc3RyZWFtICIgKyB0aGlzLnN0cmVhbS5pZCArICIgc3RhdGU6ICIgKyB0aGlzLnN0YXRlICsgIiAiICsgdGhpcy5tc2c7CiAgICAgICAgfSwKICAgICAgICBpY2VGYWlsOiBmdW5jdGlvbiBpY2VGYWlsKCkgewogICAgICAgICAgICB0aGlzLnN0YXRlID0gMTsKICAgICAgICAgICAgdGhpcy5tc2cgPSAibmV0d29yayBhbm9tYWx5LiBtZWRpYSBsb3N0IjsKICAgICAgICB9CiAgICB9KSwKCiAgICAvKioKICAgICAqIHttZW1iZXI6IHNlbGYuY3VycmVudCwgZXZlbnQ6IGV9CiAgICAgKi8KICAgIE9wZW5NZWRpYUVycm9yOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBPcGVuTWVkaWFFcnJvcjogIiArICIgb3BlbiBtZWRpYSBlcnJvci4gY2F1c2VkIGJ5ICIgKyB0aGlzLmV2ZW50LnRvU3RyaW5nKCk7CiAgICAgICAgfSB9KSwKCiAgICAvKioKICAgICAqIHtyZWFzb246IHJlYXNvbiwgcGFybnRlcjoge2lkOiBzZWxmLl9tZW1iZXJJZH19CiAgICAgKi8KICAgIEhhbmd1cDogRXJyb3IuZXh0ZW5kKHsgbWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuc2VsZikgewogICAgICAgICAgICAgICAgcmV0dXJuICJoYW5ndXAgaWQgPSAiICsgKHRoaXMuc2VsZi5pZCB8fCAiLS0iKSArICIgcmVhc29u77yaIiArICh0aGlzLnJlYXNvbiB8fCAwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIEhhbmd1cDogIiArICh0aGlzLnBhcm50ZXIgJiYgKHRoaXMucGFybnRlci5uYW1lIHx8IHRoaXMucGFybnRlci5pZCB8fCAiICIpIHx8ICIiKSArICIgaGFuZ3VwLCByZWFzb27vvJoiICsgKHRoaXMucmVhc29uIHx8IDApOwogICAgICAgICAgICB9CiAgICAgICAgfSB9KSwKCiAgICAvKioKICAgICAqIHtmYWlsZWQ6IHJzcC5yZXN1bHQsIG1zZzogcnNwLm1zZ30KICAgICAqLwogICAgU2VydmVyUmVmdXNlRW50ZXI6IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIFNlcnZlclJlZnVzZUVudGVyOiAiICsgInNlcnZlciByZWZ1c2UsIGNhdXNl77yaIiArIHRoaXMuZmFpbGVkICsgIiwgbXNnOiIgKyAodGhpcy5tc2cgfHwgIiIpOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7cmVxdWVzdDogcmVxLCByZXNwb25zZTogcnNwfQogICAgICovCiAgICBSc3BGYWlsOiBFcnJvci5leHRlbmQoewogICAgICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICAgICAgdGhpcy5kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICB0aGlzLmZhaWxlZCA9IHRoaXMucmVzcG9uc2UucmVzdWx0OwogICAgICAgICAgICB0aGlzLm1zZyA9IHRoaXMucmVzcG9uc2UubXNnIHx8IHRoaXMucmVzcG9uc2UubWVzc2FnZSB8fCAiLS0iOwogICAgICAgIH0sCiAgICAgICAgbWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY1RpbWUoKSArICIgUnNwRmFpbDogIiArIHRoaXMucmVxdWVzdC50c3hJZCArICIsICIgKyAodGhpcy5yZXNwb25zZS5zZXNzSWQgfHwgIi0tIikgKyAiIG9wOiAiICsgdGhpcy5yZXF1ZXN0Lm9wICsgIiwgY2F1c2U6ICIgKyB0aGlzLmZhaWxlZCArICIgIiArIHRoaXMubXNnOwogICAgICAgIH0KICAgIH0pLAoKICAgIFJlY3ZSZXNwb25zZTogRXJyb3IuZXh0ZW5kKHsKICAgICAgICBfX2luaXRfXzogZnVuY3Rpb24gX19pbml0X18oKSB7CiAgICAgICAgICAgIHRoaXMuZGF5ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgdGhpcy5mYWlsZWQgPSB0aGlzLnJlc3BvbnNlLnJlc3VsdDsKICAgICAgICAgICAgdGhpcy5tc2cgPSB0aGlzLnJlc3BvbnNlLm1zZzsKICAgICAgICAgICAgLy90aGlzLnJlcXVlc3QgPSB0aGlzLnJlc3BvbnNlLnJlc3VsdDsKICAgICAgICAgICAgLy90aGlzLnJlc3BvbnNlID0gdGhpcy5yZXNwb25zZS5tc2c7CiAgICAgICAgfSwKICAgICAgICBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBSZWN2UmVzcG9uc2U6ICIgKyAodGhpcy5yZXF1ZXN0ICYmIHRoaXMucmVxdWVzdC50c3hJZCkgKyAiLCAiICsgKHRoaXMucmVzcG9uc2Uuc2Vzc0lkIHx8ICItLSIpICsgIiBvcDogIiArICh0aGlzLnJlcXVlc3QgJiYgdGhpcy5yZXF1ZXN0Lm9wKSArICIsIGNhdXNlOiAiICsgdGhpcy5mYWlsZWQgKyAiICIgKyB0aGlzLm1zZzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIFJlY3ZNZXNzYWdlOiAiICsgKHRoaXMucmVzcG9uc2UgJiYgdGhpcy5yZXNwb25zZS50c3hJZCkgKyAiLCAiICsgKHRoaXMucmVzcG9uc2Uuc2Vzc0lkIHx8ICItLSIpICsgIiBvcDogIiArICh0aGlzLnJlc3BvbnNlICYmIHRoaXMucmVzcG9uc2Uub3ApICsgIiAiICsgdGhpcy5tc2c7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KSwKCiAgICAvKioKICAgICAqIHttZTogbWUsIGNhdXNlOiBfZXZlbnRffQogICAgICovCiAgICBFbnRlckZhaWw6IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIEVudGVyRmFpbDogIiArICJlbnRlciBmYWls77yaIiArICh0aGlzLmNhdXNlID8gdGhpcy5jYXVzZS5tZXNzYWdlKCkgOiAidW5rb3duIik7CiAgICAgICAgfSB9KSwKCiAgICBFbnRlclN1Y2Nlc3M6IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIEVudGVyU3VjY2VzczogIiArICJlbnRlciBzdWNjZXNzIjsKICAgICAgICB9IH0pLAoKICAgIC8qKgogICAgICoge3N0cmVhbUlkOiByc3Auc3RyZWFtSWR9CiAgICAgKi8KICAgIFB1c2hTdWNjZXNzOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBQdXNoU3VjY2VzczogIiArICJwdXNoIHN1Y2Nlc3MsIHN0cmVhbUlkID0gIiArIHRoaXMuc3RyZWFtLmlkICsgIiwgIiArIHRoaXMuc3RyZWFtLm9wdGltYWxWaWRlb0NvZGVjcyArICIsIHdlYnJ0YyA9ICIgKyB0aGlzLnN0cmVhbS5ydGNJZDsKICAgICAgICB9IH0pLAoKICAgIC8qKgogICAgICoge3dlYnJ0Yzogd2VicnRjLCBwdWJTOiBwdWJTLCBtZTogbWUsIGNhdXNlOiBfZXZlbnRffQogICAgICovCiAgICBQdXNoRmFpbDogRXJyb3IuZXh0ZW5kKHsgbWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY1RpbWUoKSArICIgUHVzaEZhaWw6ICIgKyAicHVzaCBmYWlsLCBzdHJlYW1JZCA9ICIgKyB0aGlzLnN0cmVhbS5pZCArICIsICIgKyB0aGlzLnN0cmVhbS5vcHRpbWFsVmlkZW9Db2RlY3MgKyAiLCB3ZWJydGMgPSAiICsgdGhpcy5zdHJlYW0ucnRjSWQgKyAiIGNhdXNl77yaIiArICh0aGlzLmNhdXNlID8gdGhpcy5jYXVzZS5tZXNzYWdlID8gdGhpcy5jYXVzZS5tZXNzYWdlKCkgOiB0aGlzLmNhdXNlIDogInVua293biIpOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7c3RyZWFtOiBzdHJlYW0sIGZhaWxlZDogZmFpbGVkLCBtZTogbWUsIGNhdXNlOiBjYXVzZX0KICAgICAqLwogICAgUmVtb3RlQ29udHJvbEZhaWw6IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIFJlbW90ZUNvbnRyb2xGYWlsOiAiICsgKHRoaXMudHlwZSB8fCAicmVtb3RlIGNvbnRyb2wiKSArICIgZmFpbCwgIiArICh0aGlzLnN0cmVhbSA/IHRoaXMuc3RyZWFtLmlkIDogIiIpICsgIiBmYWlsZWQgPSAiICsgdGhpcy5mYWlsZWQgKyAiIGNhdXNl77yaIiArICh0aGlzLmNhdXNlID8gdGhpcy5jYXVzZS5tZXNzYWdlID8gdGhpcy5jYXVzZS5tZXNzYWdlKCkgOiB0aGlzLmNhdXNlIDogInVua293biIpOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7c3RyZWFtOiBzdHJlYW0sIGNhdXNlOiB9CiAgICAgKi8KICAgIFN1YlN1Y2Nlc3M6IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIFN1YlN1Y2Nlc3M6ICIgKyAic3ViIHN1Y2Nlc3MsIHN0cmVhbUlkID0gIiArIHRoaXMuc3RyZWFtLmlkICsgIiwgIiArIHRoaXMuc3RyZWFtLnZjb2RlcyArICIsIHdlYnJ0YyA9ICIgKyB0aGlzLnN0cmVhbS5ydGNJZDsKICAgICAgICB9IH0pLAoKICAgIC8qKgogICAgICoge3N0cmVhbTogc3RyZWFtLCBjYXVzZTogfQogICAgICovCiAgICBTdWJGYWlsOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBTdWJGYWlsOiAiICsgInN1YiBmYWlsLCBzdHJlYW1JZCA9ICIgKyB0aGlzLnN0cmVhbS5pZCArICIsICIgKyB0aGlzLnN0cmVhbS52Y29kZXMgKyAiLCB3ZWJydGMgPSAiICsgdGhpcy5zdHJlYW0ucnRjSWQgKyAiIGNhdXNl77yaIiArICh0aGlzLmNhdXNlID8gdGhpcy5jYXVzZS5tZXNzYWdlID8gdGhpcy5jYXVzZS5tZXNzYWdlKCkgOiB0aGlzLmNhdXNlIDogInVua293biIpOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7c3RyZWFtOiBzdHJlYW0sIGNhdXNlOiB9CiAgICAgKi8KICAgIFN1YkZhaWxOb3RTdXBwb3J0VkNvZGVzOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBTdWJGYWlsTm90U3VwcG9ydFZDb2RlczogIiArICJzdWIgZmFpbCwgc3RyZWFtSWQgPSAiICsgdGhpcy5zdHJlYW0uaWQgKyAiIGNhdXNl77yaIiArICh0aGlzLmNhdXNlID8gdGhpcy5jYXVzZS5tZXNzYWdlID8gdGhpcy5jYXVzZS5tZXNzYWdlKCkgOiB0aGlzLmNhdXNlIDogInVua293biIpOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7c3RyZWFtOiBzdHJlYW0sIGNhdXNlOiB9CiAgICAgKi8KICAgIFN1YkZhaWxTYWZhcmlOb3RBbGxvd1N1YkJlZm9yZVB1YjogRXJyb3IuZXh0ZW5kKHsgbWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY1RpbWUoKSArICIgU3ViRmFpbFNhZmFyaU5vdEFsbG93U3ViQmVmb3JlUHViOiAiICsgInN1YiBmYWlsLCBzdHJlYW1JZCA9ICIgKyB0aGlzLnN0cmVhbS5pZCArICIgY2F1c2XvvJpTYWZhcmkgd2l0aG91dCBhY2Nlc3MgdG8gY2FwdHVyZSBkZXZpY2VzLCAiICsgIldlYktpdCBvbmx5IGV4cG9zZXMgU2VydmVyIFJlZmxleGl2ZSBhbmQgVFVSTiBJQ0UgY2FuZGlkYXRlcywgIiArICJ3aGljaCBleHBvc2UgSVBzIHRoYXQgY291bGQgYWxyZWFkeSBiZSBnYXRoZXJlZCBieSB3ZWJzaXRlcy4iOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7c3RyZWFtOiBzdHJlYW0sIHVzZVZDb2RlczogW119CiAgICAgKi8KICAgIFN3aXRjaFZDb2RlczogRXJyb3IuZXh0ZW5kKHsgbWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY1RpbWUoKSArICIgU3dpdGNoVkNvZGVzOiAiICsgInB1YiBzdHJlYW1JZCA9ICIgKyB0aGlzLnN0cmVhbS5pZDsKICAgICAgICB9IH0pLAoKICAgIEN1cnJlbnRDYWxsaW5nOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBDdXJyZW50Q2FsbGluZzogIiArICJ3YXJuISBjdXJyZW50IGNhbGxpbmcuLi4iOwogICAgICAgIH0gfSksCgogICAgLyoqCiAgICAgKiB7ZGVza3RvcFN0cmVhbUlkOiBtLnN0cmVhbUlkfQogICAgICovCiAgICBPcGVuRGVza3RvcE1lZGlhOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBPcGVuRGVza3RvcE1lZGlhOiAiICsgInNoYXJlZCBkZXNrdG9wLCBkZXNrdG9wU3RyZWFtSWQgPSAiICsgZGVza3RvcFN0cmVhbUlkOwogICAgICAgIH0gfSksCgogICAgT3BlbkRlc2t0b3BNZWRpYUFjY2Vzc0RlbmllZDogRXJyb3IuZXh0ZW5kKHsgbWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY1RpbWUoKSArICIgT3BlbkRlc2t0b3BNZWRpYUFjY2Vzc0RlbmllZDogIiArICJzaGFyZWQgZGVza3RvcCBub3QgYWxsb3ciOwogICAgICAgIH0gfSksCgogICAgU2hhcmVEZXNrdG9wRXh0ZW5zaW9uTm90Rm91bmQ6IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIFNoYXJlRGVza3RvcEV4dGVuc2lvbk5vdEZvdW5kOiAiICsgInNoYXJlZCBkZXNrdG9wIHBsdWdpbiByZXF1aXJlZCI7CiAgICAgICAgfSB9KSwKCiAgICBPdGhlckRldmljZUFuc3dlcjogRXJyb3IuZXh0ZW5kKHsgbWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY1RpbWUoKSArICIgb3RoZXIgZGV2aWNlIGFuc3dlciwgd2VicnRjID0gIiArIHRoaXMucnRjSWQ7CiAgICAgICAgfSB9KSwKCiAgICBBdWRpb01peGVyU3RyZWFtTm90QWxsb3dTdWI6IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIGF1ZGlvIG1peGVyIHN0cmVhbSBub3QgYWxsb3cgc3ViLCB3ZWJydGMgPSAiICsgdGhpcy5ydGNJZCArICIsIHN0cmVhbUlkID0gIiArIHRoaXMuc3RyZWFtLmlkOwogICAgICAgIH0gfSksCiAgICBBdWRpb01peGVyU3RyZWFtTm90QWxsb3dPbmx5U3ViVmlkZW86IEVycm9yLmV4dGVuZCh7IG1lc3NhZ2U6IGZ1bmN0aW9uIG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4ZWNUaW1lKCkgKyAiIGF1ZGlvIG1peGVyIHN0cmVhbSBub3QgYWxsb3cgb25seSBzdWIgdmlkZW8sIHdlYnJ0YyA9ICIgKyB0aGlzLnJ0Y0lkICsgIiwgc3RyZWFtSWQgPSAiICsgdGhpcy5zdHJlYW0uaWQ7CiAgICAgICAgfSB9KSwKICAgIEF1ZGlvTWl4ZXJTdHJlYW1SZXBlYXRQdWJsaXNoOiBFcnJvci5leHRlbmQoeyBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjVGltZSgpICsgIiBhdWRpbyBtaXhlciBzdHJlYW0gcmVwZWF0IHB1Ymxpc2giOwogICAgICAgIH0gfSkKfTsKCi8qKiovIH0pLAovKiAyMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIk1lIik7Cgp2YXIgTWVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7Cgp2YXIgX19ldmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpOwoKdmFyIFN0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpOwoKLyoqCiAqIOacquS9k+eOsCBtZW1iZXIg5L2/55So5LqGIHNlc3Npb27jgIIKICog6K+3IOi/meagt+WIm+W7ugogKiBNZW1iZXIoe19zZXNzaW9uOiBzZXNzfSkKICoKICoKICogY2xvc2U6CiAqIDEu5pyN5Yqh56uvIOi4ouaOiQogKiAyLuaJi+WKqOeCueWHuyDmjILmlq0KICogMy5lbnRlcuWksei0pe+8gQogKgogKiB3ZWJzb2NrZXQg5pat5byA6L+e5o6l5ZCO77yM5bm25LiN5LyaIOWOu2Nsb3Nl44CC5Zug5Li65Y+R6YCB5raI5oGv5Y+v5Lul5a6e546w6YeN6L+e77yM6YeN5pawZW50ZXIKICoKICoKICovCnZhciBBdHRlbmRlZSA9IE1lbWJlci5leHRlbmQoewogICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5fc2Vzc2lvbiB8fCBzZWxmLnNlc3Npb25GYWN0b3J5ICYmIChzZWxmLl9zZXNzaW9uID0gc2VsZi5zZXNzaW9uRmFjdG9yeSgpKTsKCiAgICAgICAgaWYgKCFzZWxmLl9zZXNzaW9uKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIlJlcXVpcmUgc2Vzc2lvbiIpOwogICAgICAgICAgICB0aHJvdyAiUmVxdWlyZSBzZXNzaW9uIjsKICAgICAgICB9CgogICAgICAgIHNlbGYuX2N2ZXIgPSAwOwoKICAgICAgICBzZWxmLl9jYWNoZU1lbWJlcnMgPSB7fTsKICAgICAgICBzZWxmLl9jYWNoZVN0cmVhbXMgPSB7fTsKICAgICAgICBzZWxmLl9tZWRpYU1ldGVycyA9IHt9OwogICAgICAgIHNlbGYuX29wZW5lZFJ0Y01lZGlhU3RyZWFtcyA9IHt9OwoKICAgICAgICBzZWxmLl9saW5rZWRTdHJlYW1zID0ge307CiAgICAgICAgc2VsZi5fbWF5YmVOb3RFeGlzdFN0cmVhbXMgPSB7fTsgLy/kuI5zZWxmLl9zdHJlYW1z57uT5p6E55u45ZCM77yM55SoIOWtmOWCqCDmlq3nvZHml7bvvIxpY2UgZmFpbOeahHN0cmVhbeWvueixoeOAgui/meS4quWvueixoeWPr+iDveS4jeWtmOWcqOS6hgoKICAgICAgICBzZWxmLl9yZWNvcmRzID0ge307CgogICAgICAgIHNlbGYuX2ljZXMgPSB7fTsKICAgICAgICBzZWxmLmF1ZGlvTWl4ZXJzID0ge307CgogICAgICAgIHNlbGYuY2xvc2VkID0gZmFsc2U7CgogICAgICAgIHNlbGYuX25leHRTdHJlYW1TZXFubyA9IDA7CgogICAgICAgIHNlbGYuZ2V0TWVkaWFNZXRlckludGVydmFsTWlsbGlzID0gc2VsZi5nZXRNZWRpYU1ldGVySW50ZXJ2YWxNaWxsaXMgfHwgZW1lZGlhLmNvbmZpZy5nZXRNZWRpYU1ldGVySW50ZXJ2YWxNaWxsaXM7CiAgICB9LAoKICAgIGdldEN1cnJlbnRNZW1iZXJzOiBmdW5jdGlvbiBnZXRDdXJyZW50TWVtYmVycygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBtZW1iZXJzID0gW107CiAgICAgICAgX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZU1lbWJlcnMsIGZ1bmN0aW9uIChfbWVtSWQsIF9jYWNoZU1lbWJlcikgewogICAgICAgICAgICB2YXIgbWVtYmVyID0gX3V0aWwuZXh0ZW5kKHRydWUsIHt9LCBfY2FjaGVNZW1iZXIpOwogICAgICAgICAgICBtZW1iZXJzLnB1c2gobWVtYmVyKTsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIG1lbWJlcnM7CiAgICB9LAoKICAgIG5ld1N0cmVhbTogZnVuY3Rpb24gbmV3U3RyZWFtKGNmZykgewogICAgICAgIHZhciBhdHRlbmRlZSA9IHRoaXM7CgogICAgICAgIHJldHVybiBuZXcgU3RyZWFtKGNmZywgewogICAgICAgICAgICBfX2luaXRfXzogZnVuY3Rpb24gX19pbml0X18oKSB7CiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICAgICAgc2VsZi5ydGNJZCB8fCBzZWxmLl93ZWJydGMgJiYgKHNlbGYucnRjSWQgPSBzZWxmLl93ZWJydGMuZ2V0UnRjSWQoKSk7CiAgICAgICAgICAgICAgICBzZWxmLl93ZWJydGMgfHwgc2VsZi5ydGNJZCAmJiAoc2VsZi5fd2VicnRjID0gYXR0ZW5kZWUuX2ljZXNbc2VsZi5ydGNJZF0pOwoKICAgICAgICAgICAgICAgIHNlbGYuX19jcmVhdGVfaWQgPSBhdHRlbmRlZS5fbmV4dFN0cmVhbVNlcW5vKys7CgogICAgICAgICAgICAgICAgaWYgKHNlbGYubWVtSWQgJiYgIXNlbGYub3duZXIpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLm93bmVyID0gX3V0aWwuZXh0ZW5kKHt9LCBhdHRlbmRlZS5fY2FjaGVNZW1iZXJzW3NlbGYubWVtSWRdKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYub3duZXIgJiYgIXNlbGYubG9jYXRlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIlJlbW90ZSBzdHJlYW0sIG5vdCBvd25lci4gaXQgPSAiLCBzZWxmLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgIlJlbW90ZSBzdHJlYW0sIG5vdCBvd25lci4gaXQgPSAiICsgc2VsZi5pZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgZ2V0Q29uZnJJZDogZnVuY3Rpb24gZ2V0Q29uZnJJZCgpIHsKICAgICAgICByZXR1cm4gdGhpcy50aWNrZXQuY29uZnJJZDsKICAgIH0sCiAgICBpc0NhbGxlcjogZnVuY3Rpb24gaXNDYWxsZXIoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHJldHVybiBzZWxmLmlzUDJQKCkgJiYgc2VsZi50aWNrZXQuY2FsbGVyID09IHNlbGYudGlja2V0Lm1lbU5hbWU7CiAgICB9LAogICAgaXNDYWxsZWU6IGZ1bmN0aW9uIGlzQ2FsbGVlKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICByZXR1cm4gc2VsZi5pc1AyUCgpICYmIHNlbGYudGlja2V0LmNhbGxlZSA9PSBzZWxmLnRpY2tldC5tZW1OYW1lOwogICAgfSwKICAgIGlzUDJQOiBmdW5jdGlvbiBpc1AyUCgpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgcmV0dXJuIHNlbGYudGlja2V0ICYmIChzZWxmLnRpY2tldC50eXBlID09ICJQMlAiIHx8IHNlbGYudGlja2V0LnR5cGUgPT0gInAycCIpOwogICAgfSwKICAgIGlzQ29uZnI6IGZ1bmN0aW9uIGlzQ29uZnIoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHJldHVybiBzZWxmLnRpY2tldCAmJiAoc2VsZi50aWNrZXQudHlwZSA9PSAiQ09ORlIiIHx8IHNlbGYudGlja2V0LnR5cGUgPT0gImNvbmZyIik7CiAgICB9LAoKICAgIG9uRXZlbnQ6IGZ1bmN0aW9uIG9uRXZlbnQoZXZ0KSB7fSwKCiAgICBqb2luOiBmdW5jdGlvbiBqb2luKGpvaW5lZCwgam9pbkVycm9yKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygiYmVnaW4gam9pbiAuLi4iKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgZW50ZXI7CgogICAgICAgIGlmIChzZWxmLl9tZW1iZXJJZCkgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIkhhZCBqb2luZWQuIGlncm9uZSBpdCIpOwogICAgICAgICAgICBqb2luZWQgJiYgam9pbmVkKHNlbGYubWVtSWQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvbkpvaW5FcnJvcihfZXZlbnRfKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoX2V2ZW50XyBpbnN0YW5jZW9mIF9fZXZlbnQuV1NDbG9zZSAmJiBfZXZlbnRfLnJldHJ5KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKF9ldmVudF8gaW5zdGFuY2VvZiBfX2V2ZW50LkVudGVyRmFpbCkpIHsKICAgICAgICAgICAgICAgICAgICBfZXZlbnRfID0gbmV3IF9fZXZlbnQuRW50ZXJGYWlsKHsgLy/lj6/og73mmK8gd2Vic29ja2V0IOmTvuaOpeacquaIkOWKnwogICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZTogc2VsZiwKICAgICAgICAgICAgICAgICAgICAgICAgY2F1c2U6IF9ldmVudF8KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQoX2V2ZW50Xyk7CiAgICAgICAgICAgICAgICBqb2luRXJyb3IgJiYgam9pbkVycm9yKF9ldmVudF8pOwogICAgICAgICAgICB9IGZpbmFsbHkge30KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGVudGVyUnNwKHJzcCkgewogICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIG9uSm9pbkVycm9yKG5ldyBfX2V2ZW50LlJzcEZhaWwoeyByZXF1ZXN0OiBlbnRlciwgcmVzcG9uc2U6IHJzcCB9KSk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIGlmIChyc3AucmVzdWx0ICE9PSAtOTUyNykgewogICAgICAgICAgICAgICAgICAgICAgICAvLy05NTI3IOWuouaIt+erryDoh6rlt7Hov5Tlm57vvIznvZHnu5zmnKrpgJrvvIwg5YW25LuW5YC85pyN5Yqh56uv6L+U5ZueCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5TZXJ2ZXJSZWZ1c2VFbnRlcih7IGZhaWxlZDogcnNwLnJlc3VsdCwgbXNnOiByc3AubXNnIH0pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZWxmLnJlZmx1c2hTdXBwb3J0VkNvZGVzKHJzcC52Y29kZXMpOwoKICAgICAgICAgICAgc2VsZi5zZXRNZW1iZXJJZChyc3AubWVtSWQpOwogICAgICAgICAgICBzZWxmLnJvbGUgPSByc3Aucm9sZTsKCiAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5FbnRlclN1Y2Nlc3MoKSk7CgogICAgICAgICAgICBqb2luZWQgJiYgam9pbmVkKHJzcC5tZW1JZCk7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc2VsZi5fX3J0Y19jZmcgPSByc3AucnRjQ2ZnOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByc3AucnRjQ2ZnID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIHNlbGYuX19ydGNfY2ZnID0gSlNPTi5wYXJzZShyc3AucnRjQ2ZnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIHNlbGYub25NZW1iZXJzKHJzcC5jdmVyLCByc3AubWVtcyk7CiAgICAgICAgICAgICAgICBzZWxmLm9uU3RyZWFtcyhyc3AuY3ZlciwgcnNwLnN0cmVhbXMpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvbkNvbm5lY3RlZCgpIHsKICAgICAgICAgICAgZW50ZXIgPSBzZWxmLm5ld01lc3NhZ2UoKS5zZXRPcCgyMDApLnNldFRpY2tldChzZWxmLnRpY2tldCkuc2V0Tmlja05hbWUoc2VsZi5uaWNrTmFtZSB8fCBzZWxmLnRpY2tldC5tZW1OYW1lKS5zZXRSZXNvdXJjZShzZWxmLnJlc291cmNlKS5zZXRFeHQoc2VsZi5leHQpOwogICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGVudGVyLCBlbnRlclJzcCk7CiAgICAgICAgfQoKICAgICAgICBzZWxmLmNvbm5lY3Qob25Db25uZWN0ZWQsIG9uSm9pbkVycm9yKTsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJqb2luIiwgc2VsZi50aWNrZXQudXJsKTsKICAgIH0sCgogICAgd2l0aHB1Ymxpc2g6IGZ1bmN0aW9uIHdpdGhwdWJsaXNoKHB1YlMpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmICghcHViUyB8fCAhcHViUy5sb2NhbFN0cmVhbSkgewogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJwdWJTIG51bGwgb3Igc3RyZWFtIG5vdCBvcGVuIik7CiAgICAgICAgICAgIHRocm93ICJwdWJTIG51bGwgb3Igc3RyZWFtIG5vdCBvcGVuIjsKICAgICAgICB9CgogICAgICAgIHZhciBlbnRlcjsKCiAgICAgICAgdmFyIG9wZW5lZFN0cmVhbSA9IHB1YlMgJiYgcHViUy5sb2NhbFN0cmVhbTsKCiAgICAgICAgdmFyIHdlYnJ0YzsKCiAgICAgICAgZnVuY3Rpb24gdGhlbihqb2luZWQsIGpvaW5FcnJvcikgewogICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgICAgam9pbkVycm9yID0gam9pbmVkOwogICAgICAgICAgICAgICAgam9pbmVkID0gdW5kZWZpbmVkOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VsZi5fbWVtYmVySWQpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiSGFkIGpvaW5lZC4gaWdyb25lIGl0Iik7CiAgICAgICAgICAgICAgICBqb2luZWQgJiYgam9pbmVkKHNlbGYubWVtSWQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBvbkpvaW5FcnJvcihfZXZlbnRfKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGlmIChfZXZlbnRfIGluc3RhbmNlb2YgX19ldmVudC5XU0Nsb3NlICYmIF9ldmVudF8ucmV0cnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2V2ZW50XyBpbnN0YW5jZW9mIF9fZXZlbnQuRW50ZXJGYWlsKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfZXZlbnRfID0gbmV3IF9fZXZlbnQuRW50ZXJGYWlsKHsgLy/lj6/og73mmK8gd2Vic29ja2V0IOmTvuaOpeacquaIkOWKnwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWU6IHNlbGYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXVzZTogX2V2ZW50XwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChfZXZlbnRfKTsKICAgICAgICAgICAgICAgICAgICBqb2luRXJyb3IgJiYgam9pbkVycm9yKF9ldmVudF8pOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcFRyYWNrcyhvcGVuZWRTdHJlYW0pOwoKICAgICAgICAgICAgICAgICAgICB3ZWJydGMgJiYgc2VsZi5jbG9zZVdlYnJ0Yyh3ZWJydGMuZ2V0UnRjSWQoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBvcHRpbWFsVmlkZW9Db2RlY3MgPSBzZWxmLmdldE9wdGltYWxWaWRlb0NvZGVjcygpOwoKICAgICAgICAgICAgZnVuY3Rpb24gZW50ZXJSc3AocnNwKSB7CiAgICAgICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgb25Kb2luRXJyb3IobmV3IF9fZXZlbnQuUnNwRmFpbCh7IHJlcXVlc3Q6IGVudGVyLCByZXNwb25zZTogcnNwIH0pKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPT0gLTk1MjcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLTk1Mjcg5a6i5oi356uvIOiHquW3sei/lOWbnu+8jOe9kee7nOacqumAmu+8jCDlhbbku5blgLzmnI3liqHnq6/ov5Tlm54KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5TZXJ2ZXJSZWZ1c2VFbnRlcih7IGZhaWxlZDogcnNwLnJlc3VsdCwgbXNnOiByc3AubXNnIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNlbGYucmVmbHVzaFN1cHBvcnRWQ29kZXMocnNwLnZjb2Rlcyk7CgogICAgICAgICAgICAgICAgc2VsZi5zZXRNZW1iZXJJZChyc3AubWVtSWQpOwogICAgICAgICAgICAgICAgc2VsZi5yb2xlID0gcnNwLnJvbGU7CgogICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LkVudGVyU3VjY2VzcygpKTsKCiAgICAgICAgICAgICAgICB2YXIgc3RyZWFtID0gc2VsZi5uZXdTdHJlYW0ocHViUyk7CiAgICAgICAgICAgICAgICBzdHJlYW0uX2xvY2FsTWVkaWFTdHJlYW0gPSBwdWJTLmxvY2FsU3RyZWFtOwogICAgICAgICAgICAgICAgc3RyZWFtLnJ0Y0lkID0gd2VicnRjLmdldFJ0Y0lkKCk7CiAgICAgICAgICAgICAgICBzdHJlYW0uX3dlYnJ0YyA9IHdlYnJ0YzsKICAgICAgICAgICAgICAgIHN0cmVhbS5pZCA9IHJzcC5zdHJlYW1JZDsKICAgICAgICAgICAgICAgIHN0cmVhbS5jc3JjID0gcnNwLmNzcmM7CiAgICAgICAgICAgICAgICBzdHJlYW0ub3duZXIgPSB7IGlkOiByc3AubWVtSWQsIG5pY2tOYW1lOiBzZWxmLm5pY2tOYW1lLCBuYW1lOiBzZWxmLnN5c1VzZXJJZCwgZXh0OiBzZWxmLmV4dE9iaiB9OwoKICAgICAgICAgICAgICAgIHN0cmVhbS5vcHRpbWFsVmlkZW9Db2RlY3MgPSBvcHRpbWFsVmlkZW9Db2RlY3M7CgogICAgICAgICAgICAgICAgam9pbmVkICYmIGpvaW5lZChyc3AubWVtSWQsIHN0cmVhbSk7CiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuUHVzaFN1Y2Nlc3MoeyBzdHJlYW06IHN0cmVhbSwgaGlkZGVuOiB0cnVlIH0pKTsgLy9pY2Xph43ov57miJDlip/lkI4g5LyaIOWGjeasoSBvbkV2ZW50IFB1c2hTdWNjZXNzCgogICAgICAgICAgICAgICAgcnNwLnNkcCAmJiBzZWxmLmFuc0Mod2VicnRjLmdldFJ0Y0lkKCksIHJzcC5zZHApOwogICAgICAgICAgICAgICAgcnNwLmNhbmRzICYmIHNlbGYudGNrbEMod2VicnRjLmdldFJ0Y0lkKCksIHJzcC5jYW5kcyk7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9fcnRjX2NmZyA9IHJzcC5ydGNDZmc7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByc3AucnRjQ2ZnID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9fcnRjX2NmZyA9IEpTT04ucGFyc2UocnNwLnJ0Y0NmZyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLl9fcnRjX2NmZyAmJiBzZWxmLl9fcnRjX2NmZy5pY2VTZXJ2ZXJzICYmIHNlbGYuX19ydGNfY2ZnLmljZVNlcnZlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlNlcnZlciByc3Agb25lIHJ0YyBjZmcuIHB1Ymxpc2ggd2lsbCByZXB1Ymxpc2giKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlcnZpY2UgJiYgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZXJ2aWNlLl9yZXB1Ymxpc2goc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub25NZW1iZXJzKHJzcC5jdmVyLCByc3AubWVtcyk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5vblN0cmVhbXMocnNwLmN2ZXIsIHJzcC5zdHJlYW1zKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gb25Db25uZWN0ZWQoKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJlbnRlciBhbmQgcHVicyIpOwoKICAgICAgICAgICAgICAgIHZhciBzdHJlYW0gPSBwdWJTLmxvY2FsU3RyZWFtOwoKICAgICAgICAgICAgICAgIHZhciBvZmZlck9wdGlvbnMsIHN1YkFyZ3M7CiAgICAgICAgICAgICAgICBpZiAocHViUy50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgb2ZmZXJPcHRpb25zID0gewogICAgICAgICAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc3ViQXJncyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc3ViU1ZpZGVvOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3ViU0F1ZGlvOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB3ZWJydGMgPSBzZWxmLmNyZWF0ZVdlYnJ0Yyh7CiAgICAgICAgICAgICAgICAgICAgX3J0Y0lkOiBwdWJTLnJ0Y0lkLAogICAgICAgICAgICAgICAgICAgIG9wdGltYWxWaWRlb0NvZGVjczogb3B0aW1hbFZpZGVvQ29kZWNzLAogICAgICAgICAgICAgICAgICAgIG9mZmVyT3B0aW9uczogb2ZmZXJPcHRpb25zLAogICAgICAgICAgICAgICAgICAgIHN1YkFyZ3M6IHN1YkFyZ3MsCiAgICAgICAgICAgICAgICAgICAgdmJpdHJhdGU6IHB1YlMudmJpdHJhdGUgfHwgcHViUy5jb25zdGFpbnRzICYmIHB1YlMuY29uc3RhaW50cy52aWRlbyAmJiBwdWJTLmNvbnN0YWludHMudmlkZW8uYml0cmF0ZSwKICAgICAgICAgICAgICAgICAgICBhYml0cmF0ZTogcHViUy5hYml0cmF0ZSB8fCBwdWJTLmNvbnN0YWludHMgJiYgcHViUy5jb25zdGFpbnRzLmF1ZGlvICYmIHB1YlMuY29uc3RhaW50cy5hdWRpby5iaXRyYXRlCiAgICAgICAgICAgICAgICB9LCBwdWJTLmljZVJlYnVpbGRDb3VudCk7CiAgICAgICAgICAgICAgICBzZWxmLnNldExvY2FsU3RyZWFtKHN0cmVhbSwgd2VicnRjLmdldFJ0Y0lkKCkpOwoKICAgICAgICAgICAgICAgIHNlbGYuZG9PZmZlcih3ZWJydGMuZ2V0UnRjSWQoKSwgZnVuY3Rpb24gKHNkcCkgewogICAgICAgICAgICAgICAgICAgIGVudGVyID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoMjAwKS5zZXRUaWNrZXQoc2VsZi50aWNrZXQpLnNldE5pY2tOYW1lKHNlbGYubmlja05hbWUgfHwgc2VsZi50aWNrZXQubWVtTmFtZSkuc2V0UmVzb3VyY2Uoc2VsZi5yZXNvdXJjZSkuc2V0U2RwKHNkcCkuc2V0UnRjSWQod2VicnRjLmdldFJ0Y0lkKCkpLnNldFB1YlMocHViUykuc2V0RXh0KHNlbGYuZXh0KTsKICAgICAgICAgICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGVudGVyLCBlbnRlclJzcCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2VsZi5jb25uZWN0KG9uQ29ubmVjdGVkLCBvbkpvaW5FcnJvcik7CiAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoImpvaW4iLCBzZWxmLnRpY2tldC51cmwpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgam9pbjogdGhlbgogICAgICAgIH07CiAgICB9LAoKICAgIHB1c2g6IGZ1bmN0aW9uIHB1c2gocHViUywgcHVzaGVkLCBvblB1c2hFcnJvciwgYXV0b1B1c2gpIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJiZWdpbiBwdXNoIC4uLiIpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICAgIG9uUHVzaEVycm9yID0gcHVzaGVkOwogICAgICAgICAgICBwdXNoZWQgPSB1bmRlZmluZWQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXB1YlMgfHwgIXB1YlMubG9jYWxTdHJlYW0pIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigicHViUyBvciBzdHJlYW0gb3BlbiIpOwogICAgICAgICAgICB0aHJvdyAicHViUyBvciBzdHJlYW0gb3BlbiI7CiAgICAgICAgfQoKICAgICAgICB2YXIgaW5pdEM7CgogICAgICAgIHZhciBvcGVuZWRTdHJlYW0gPSBwdWJTLmxvY2FsU3RyZWFtOwoKICAgICAgICB2YXIgd2VicnRjOwoKICAgICAgICBmdW5jdGlvbiBfb25QdXNoRXJyb3IoX2V2ZW50XykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdmFyIHN0cmVhbSA9IHNlbGYubmV3U3RyZWFtKHB1YlMpOwogICAgICAgICAgICAgICAgc3RyZWFtLl9sb2NhbE1lZGlhU3RyZWFtID0gcHViUy5sb2NhbFN0cmVhbTsKICAgICAgICAgICAgICAgIHN0cmVhbS5fd2VicnRjID0gd2VicnRjOwogICAgICAgICAgICAgICAgc3RyZWFtLnJ0Y0lkID0gd2VicnRjICYmIHdlYnJ0Yy5nZXRSdGNJZCgpOwogICAgICAgICAgICAgICAgc3RyZWFtLm93bmVyID0geyBpZDogc2VsZi5nZXRNZW1iZXJJZCgpLCBuaWNrTmFtZTogc2VsZi5uaWNrTmFtZSwgbmFtZTogc2VsZi5zeXNVc2VySWQsIGV4dDogc2VsZi5leHRPYmogfTsKCiAgICAgICAgICAgICAgICB2YXIgX2V2ZW50XyA9IG5ldyBfX2V2ZW50LlB1c2hGYWlsKHsKICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHN0cmVhbSwKICAgICAgICAgICAgICAgICAgICBjYXVzZTogX2V2ZW50XywKICAgICAgICAgICAgICAgICAgICBoaWRkZW46IGF1dG9QdXNoICYmIF9ldmVudF8uaGlkZGVuID09PSB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQoX2V2ZW50Xyk7CiAgICAgICAgICAgICAgICBfZXZlbnRfLmhpZGRlbiB8fCBvblB1c2hFcnJvciAmJiBvblB1c2hFcnJvcihfZXZlbnRfKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIGlmIChvcGVuZWRTdHJlYW0gJiYgX2V2ZW50Xy5oaWRkZW4gIT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcFRyYWNrcyhvcGVuZWRTdHJlYW0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHdlYnJ0YyAmJiBzZWxmLmNsb3NlV2VicnRjKHdlYnJ0Yy5nZXRSdGNJZCgpLCBfZXZlbnRfLmhpZGRlbiA9PT0gdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghcHViUy5ydGNJZCAmJiBwdWJTLnR5cGUgPT09IDIgJiYgIWVtZWRpYS5jb25maWcuYWxsb3dSZXBlYXRBdWRpb01peGVyUHVibGlzaCAmJiBzZWxmLl9zZXJ2aWNlLmhhc0F1ZGlvTWl4ZXJzKCkpIHsKICAgICAgICAgICAgX29uUHVzaEVycm9yKG5ldyBfX2V2ZW50LkF1ZGlvTWl4ZXJTdHJlYW1SZXBlYXRQdWJsaXNoKCkpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgb3B0aW1hbFZpZGVvQ29kZWNzID0gcHViUy5vcHRpbWFsVmlkZW9Db2RlY3MgfHwgc2VsZi5nZXRPcHRpbWFsVmlkZW9Db2RlY3MoKTsKCiAgICAgICAgZnVuY3Rpb24gcHVzaFJzcCh3ZWJydGMsIHJzcCkgewogICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICBfb25QdXNoRXJyb3IobmV3IF9fZXZlbnQuUnNwRmFpbCh7IHJlcXVlc3Q6IGluaXRDLCByZXNwb25zZTogcnNwLCBoaWRkZW46IHJzcC5yZXRyeWluZyA9PT0gdHJ1ZSB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc3RyZWFtID0gc2VsZi5uZXdTdHJlYW0ocHViUyk7CgogICAgICAgICAgICBzdHJlYW0uX2xvY2FsTWVkaWFTdHJlYW0gPSBwdWJTLmxvY2FsU3RyZWFtOwogICAgICAgICAgICBzdHJlYW0uX3dlYnJ0YyA9IHdlYnJ0YzsKICAgICAgICAgICAgc3RyZWFtLnJ0Y0lkID0gd2VicnRjLmdldFJ0Y0lkKCk7CiAgICAgICAgICAgIHN0cmVhbS5pZCA9IHJzcC5zdHJlYW1JZDsKICAgICAgICAgICAgc3RyZWFtLmNzcmMgPSByc3AuY3NyYzsKICAgICAgICAgICAgc3RyZWFtLm93bmVyID0geyBpZDogc2VsZi5nZXRNZW1iZXJJZCgpLCBuaWNrTmFtZTogc2VsZi5uaWNrTmFtZSwgbmFtZTogc2VsZi5zeXNVc2VySWQsIGV4dDogc2VsZi5leHRPYmogfTsKCiAgICAgICAgICAgIHN0cmVhbS5vcHRpbWFsVmlkZW9Db2RlY3MgPSBvcHRpbWFsVmlkZW9Db2RlY3M7CgogICAgICAgICAgICBzdHJlYW0uaWQgJiYgc3RyZWFtLnR5cGUgPT09IDIgJiYgKHNlbGYuYXVkaW9NaXhlcnNbc3RyZWFtLmlkXSA9IHN0cmVhbSk7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlB1c2hTdWNjZXNzKHsgc3RyZWFtOiBzdHJlYW0sIGhpZGRlbjogdHJ1ZSB9KSk7IC8vaWNl6YeN6L+e5oiQ5Yqf5ZCOIOS8miDlho3mrKEgb25FdmVudCBQdXNoU3VjY2VzcwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgcnNwLnNkcCAmJiBzZWxmLmFuc0Mod2VicnRjLmdldFJ0Y0lkKCksIHJzcC5zZHApOwogICAgICAgICAgICAgICAgcnNwLmNhbmRzICYmIHNlbGYudGNrbEMod2VicnRjLmdldFJ0Y0lkKCksIHJzcC5jYW5kcyk7CgogICAgICAgICAgICAgICAgcHVzaGVkICYmIHB1c2hlZChzdHJlYW0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwdWIocHViUykgewogICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJwdWJzIik7CgogICAgICAgICAgICB2YXIgc3RyZWFtID0gcHViUy5sb2NhbFN0cmVhbTsKCiAgICAgICAgICAgIHZhciBvZmZlck9wdGlvbnMsIHN1YkFyZ3M7CiAgICAgICAgICAgIGlmIChwdWJTLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgIG9mZmVyT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlVmlkZW86IGZhbHNlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgc3ViQXJncyA9IHsKICAgICAgICAgICAgICAgICAgICBzdWJTVmlkZW86IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHN1YlNBdWRpbzogdHJ1ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2VicnRjID0gc2VsZi5jcmVhdGVXZWJydGMoewogICAgICAgICAgICAgICAgX3J0Y0lkOiBwdWJTLnJ0Y0lkLAogICAgICAgICAgICAgICAgb3B0aW1hbFZpZGVvQ29kZWNzOiBvcHRpbWFsVmlkZW9Db2RlY3MsCiAgICAgICAgICAgICAgICBvZmZlck9wdGlvbnM6IG9mZmVyT3B0aW9ucywKICAgICAgICAgICAgICAgIHN1YkFyZ3M6IHN1YkFyZ3MsCiAgICAgICAgICAgICAgICB2Yml0cmF0ZTogcHViUy52Yml0cmF0ZSB8fCBwdWJTLmNvbnN0YWludHMgJiYgcHViUy5jb25zdGFpbnRzLnZpZGVvICYmIHB1YlMuY29uc3RhaW50cy52aWRlby5iaXRyYXRlLAogICAgICAgICAgICAgICAgYWJpdHJhdGU6IHB1YlMuYWJpdHJhdGUgfHwgcHViUy5jb25zdGFpbnRzICYmIHB1YlMuY29uc3RhaW50cy5hdWRpbyAmJiBwdWJTLmNvbnN0YWludHMuYXVkaW8uYml0cmF0ZQogICAgICAgICAgICB9LCBwdWJTLmljZVJlYnVpbGRDb3VudCk7CgogICAgICAgICAgICBzZWxmLnNldExvY2FsU3RyZWFtKHN0cmVhbSwgd2VicnRjLmdldFJ0Y0lkKCkpOwoKICAgICAgICAgICAgc2VsZi5kb09mZmVyKHdlYnJ0Yy5nZXRSdGNJZCgpLCBmdW5jdGlvbiAoc2RwKSB7CiAgICAgICAgICAgICAgICBpbml0QyA9IHNlbGYubmV3TWVzc2FnZSgpLnNldE9wKDEwMikuc2V0UnRjSWQod2VicnRjLmdldFJ0Y0lkKCkpLnNldFNkcChzZHApLnNldFB1YlMocHViUyk7CgogICAgICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShpbml0QywgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICAgICAgICAgIHB1c2hSc3Aod2VicnRjLCByc3ApOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgcHViKHB1YlMpOwogICAgICAgIF9sb2dnZXIuZGVidWcoInB1c2giLCBzZWxmLnRpY2tldC51cmwpOwogICAgfSwKCiAgICBpc1NhZmFyaTogZnVuY3Rpb24gaXNTYWZhcmkoKSB7CiAgICAgICAgcmV0dXJuICgvU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICEvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpCiAgICAgICAgKTsKICAgIH0sCgogICAgaXNTYWZhcmlCdXROb3RQdXNoU3RyZWFtOiBmdW5jdGlvbiBpc1NhZmFyaUJ1dE5vdFB1c2hTdHJlYW0oc3VjY2Vzc09wZW5NZWRpYSwgZmFpbE9wZW5NZWRpYSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKHNlbGYuaXNTYWZhcmkoKSAmJiAhZW1lZGlhLl9pc1NhZmFyaVlldFB1c2hlZFN0cmVhbSkgewogICAgICAgICAgICBpZiAoc2VsZi5fX3RyeWluZ09wZW5NZWRpYSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgc2VsZi5fX3RyeWluZ09wZW5NZWRpYVdhaXRTdWNlZXNzID0gc2VsZi5fX3RyeWluZ09wZW5NZWRpYVdhaXRTdWNlZXNzIHx8IFtdOwogICAgICAgICAgICAgICAgc2VsZi5fX3RyeWluZ09wZW5NZWRpYVdhaXRGYWlsID0gc2VsZi5fX3RyeWluZ09wZW5NZWRpYVdhaXRGYWlsIHx8IFtdOwoKICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3VjY2Vzc09wZW5NZWRpYSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgICAgIHNlbGYuX190cnlpbmdPcGVuTWVkaWFXYWl0U3VjZWVzcy5wdXNoKHN1Y2Nlc3NPcGVuTWVkaWEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmYWlsT3Blbk1lZGlhID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX3RyeWluZ09wZW5NZWRpYVdhaXRGYWlsLnB1c2goZmFpbE9wZW5NZWRpYSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZWxmLl9fdHJ5aW5nT3Blbk1lZGlhID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNlbGYuX3NlcnZpY2UuX19nZXRVc2VyTWVkaWEoeyBhdWRpbzogdHJ1ZSB9LCBmdW5jdGlvbiBzdWNjZXNzKF91c2VyLCBtZWRpYVN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgIGVtZWRpYS5faXNTYWZhcmlZZXRQdXNoZWRTdHJlYW0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIC8vICAgICBlbWVkaWEuc3RvcEF1ZGlvVHJhY2tzKG1lZGlhU3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAvLyB9LCA3MDApOwogICAgICAgICAgICAgICAgICAgIGVtZWRpYS5zdG9wQXVkaW9UcmFja3MobWVkaWFTdHJlYW0pOwoKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fX3RyeWluZ09wZW5NZWRpYSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzT3Blbk1lZGlhICYmIHN1Y2Nlc3NPcGVuTWVkaWEuYXBwbHkoc2VsZik7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX190cnlpbmdPcGVuTWVkaWFXYWl0U3VjZWVzcyAmJiBfdXRpbC5mb3JFYWNoKHNlbGYuX190cnlpbmdPcGVuTWVkaWFXYWl0U3VjZWVzcywgZnVuY3Rpb24gKGluZGV4LCBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KHNlbGYpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fX3RyeWluZ09wZW5NZWRpYVdhaXRTdWNlZXNzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX190cnlpbmdPcGVuTWVkaWFXYWl0RmFpbCA9IFtdOwogICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAvL2VtZWRpYS5faXNTYWZhcmlZZXRQdXNoZWRTdHJlYW0gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9fdHJ5aW5nT3Blbk1lZGlhID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiU2FmYXJpIG11c3QgZ2V0VXNlck1lZGlhLCBnYXRoZXIgY2FuZHMuIG5vdyB0cnkgZ2V0IGF1ZGlvLiBmYWlsLiBzdWJmYWlsIik7CgogICAgICAgICAgICAgICAgICAgIGZhaWxPcGVuTWVkaWEgJiYgZmFpbE9wZW5NZWRpYS5jYWxsKHNlbGYsIGV2ZW50KTsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9fdHJ5aW5nT3Blbk1lZGlhV2FpdEZhaWwgJiYgX3V0aWwuZm9yRWFjaChzZWxmLl9fdHJ5aW5nT3Blbk1lZGlhV2FpdEZhaWwsIGZ1bmN0aW9uIChpbmRleCwgZnVuYykgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jLmNhbGwoc2VsZiwgZXZlbnQpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHNlbGYuX190cnlpbmdPcGVuTWVkaWFXYWl0U3VjZWVzcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIHNlbGYuX190cnlpbmdPcGVuTWVkaWFXYWl0RmFpbCA9IFtdOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAoKICAgIGNyZWF0ZVdlYnJ0Y0FuZFN1YnNjcmliZVN0cmVhbTogZnVuY3Rpb24gY3JlYXRlV2VicnRjQW5kU3Vic2NyaWJlU3RyZWFtKHN0cmVhbUlkLCBjYWxsYmFja3MsIGljZVNlcnZlckNvbmZpZywgc3ViQXJncykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgY2FsbGJhY2tzIHx8IChjYWxsYmFja3MgPSB7fSk7CgogICAgICAgIHZhciBzdWJTdHJlYW0gPSBzZWxmLl9jYWNoZVN0cmVhbXNbc3RyZWFtSWRdOwogICAgICAgIHZhciBzdWJNZW1iZXIgPSBzZWxmLl9jYWNoZU1lbWJlcnNbc3ViU3RyZWFtLm1lbUlkXTsKCiAgICAgICAgLy92YXIgc3RyZWFtID0gc2VsZi5uZXdTdHJlYW0oc3ViU3RyZWFtKTsKICAgICAgICB2YXIgc3RyZWFtID0gc3ViU3RyZWFtOwogICAgICAgIHN1YkFyZ3MgPSBzdWJBcmdzIHx8IHN0cmVhbS5zdWJBcmdzIHx8IHsgc3ViU1ZpZGVvOiB0cnVlLCBzdWJTQXVkaW86IHN1YlN0cmVhbS50eXBlICE9PSAyIH07IC8v5re36Z+z6Ieq5Yqo6K6i6ZiF5LiN6KaB6K6i6ZiF6Z+z6aKRCgogICAgICAgIGZ1bmN0aW9uIF9vblN1YkZhaWwoZXZ0KSB7CiAgICAgICAgICAgIF9sb2dnZXIud2Fybigic3ViIHN0cmVhbSBlcnJvciIsIHN0cmVhbUlkLCBldnQpOwoKICAgICAgICAgICAgcHJlU3ViQXJncyAmJiBzdHJlYW0uX3dlYnJ0YyAmJiBzdHJlYW0uX3dlYnJ0Yy5zZXRTdWJBcmdzKHByZVN1YkFyZ3MpOwogICAgICAgICAgICBwcmVTdWJBcmdzICYmIChzdHJlYW0uc3ViQXJncyA9IHByZVN1YkFyZ3MpOwoKICAgICAgICAgICAgZXZ0ID0gbmV3IF9fZXZlbnQuU3ViRmFpbCh7CiAgICAgICAgICAgICAgICBzdHJlYW06IHN0cmVhbSwKICAgICAgICAgICAgICAgIGhpZGRlbjogZXZ0LmhpZGRlbiA9PT0gdHJ1ZSwKICAgICAgICAgICAgICAgIGNhdXNlOiBldnQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYWxsYmFja3MgJiYgY2FsbGJhY2tzLm9uRXZlbnQgJiYgY2FsbGJhY2tzLm9uRXZlbnQoZXZ0KTsKICAgICAgICAgICAgc2VsZi5vbkV2ZW50ICYmIHNlbGYub25FdmVudChldnQpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHB1YlN0cmVhbVZDb2RlcyA9IHN1YlN0cmVhbS52Y29kZXMgfHwgW107CiAgICAgICAgdmFyIHB1Yk1lbWJlclN1cHBvcnRWQ29kZXMgPSBzdWJNZW1iZXIgJiYgc3ViTWVtYmVyLnZjb2RlcyB8fCBbXTsKICAgICAgICB2YXIgc2VsZlN1cHBvcnRWQ29kZXMgPSBzZWxmLnN1cHBvcnRWQ29kZXM7CgogICAgICAgIHZhciBvcHRpbWFsVmlkZW9Db2RlY3MgPSBzZWxmLl9nZXRPcHRpbWFsVmlkZW9Db2RlY3NTdWJzZXQocHViU3RyZWFtVkNvZGVzLCBwdWJNZW1iZXJTdXBwb3J0VkNvZGVzLCBzZWxmU3VwcG9ydFZDb2Rlcyk7CgogICAgICAgIC8vIGlmKCFzdHJlYW0udm9mZiAmJiBzdWJBcmdzLnN1YlNWaWRlbyAmJiBvcHRpbWFsVmlkZW9Db2RlY3MubGVuZ3RoID09IDApeyAvLyDorqLpmIXop4bpopEg5L2G5pivIOayoeacieebuOWQjOeahCDop4bpopHnvJbnoIHmoLzlvI/jgILlpLHotKUKICAgICAgICAvLyAgICAgX29uU3ViRmFpbChfdXRpbC5leHRlbmQobmV3IF9fZXZlbnQuU3ViRmFpbCgpLCBuZXcgX19ldmVudC5TdWJGYWlsTm90U3VwcG9ydFZDb2Rlcyh7CiAgICAgICAgLy8gICAgICAgICBzdHJlYW06IHN0cmVhbQogICAgICAgIC8vICAgICB9KSkpOwogICAgICAgIC8vICAgICByZXR1cm47CiAgICAgICAgLy8gfQoKICAgICAgICBzdWJBcmdzID0gc3ViQXJncyB8fCBzdHJlYW0uc3ViQXJnczsKCiAgICAgICAgdmFyIHByZVN1YkFyZ3MgPSBzdHJlYW0uc3ViQXJnczsKCiAgICAgICAgdmFyIHdpdGhvdXRWaWRlbyA9ICEoc3RyZWFtLnZjb2RlcyAmJiBzdHJlYW0udmNvZGVzLmxlbmd0aCA+IDApOwogICAgICAgIGVtZWRpYS5pc1NhZmFyaSAmJiAod2l0aG91dFZpZGVvID0gd2l0aG91dFZpZGVvIHx8ICEhc3RyZWFtLnZvZmYpOwoKICAgICAgICB2YXIgb2ZmZXJPcHRpb25zID0gewogICAgICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLAogICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiBzdWJBcmdzLnN1YlNWaWRlbyAmJiAhd2l0aG91dFZpZGVvCiAgICAgICAgfTsKCiAgICAgICAgaWYgKCFvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyAmJiAhb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8pIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJvZmZlclRvUmVjZWl2ZUF1ZGlvID09IGZhbHNlIGFuZCBvZmZlclRvUmVjZWl2ZVZpZGVvID09IGZhbHNlIik7CiAgICAgICAgfQoKICAgICAgICB2YXIgd2VicnRjID0gc2VsZi5jcmVhdGVXZWJydGMoewogICAgICAgICAgICBpY2VTZXJ2ZXJDb25maWc6IGljZVNlcnZlckNvbmZpZywKICAgICAgICAgICAgb3B0aW1hbFZpZGVvQ29kZWNzOiBvcHRpbWFsVmlkZW9Db2RlY3MsCiAgICAgICAgICAgIG9mZmVyT3B0aW9uczogb2ZmZXJPcHRpb25zLAoKICAgICAgICAgICAgb25Hb3RNZWRpYVN0cmVhbTogZnVuY3Rpb24gb25Hb3RNZWRpYVN0cmVhbShyZW1vdGVNZWRpYVN0cmVhbSkgewogICAgICAgICAgICAgICAgdmFyIGV2dCA9IG5ldyBfX2V2ZW50LlN1YlN1Y2Nlc3MoewogICAgICAgICAgICAgICAgICAgIHN0cmVhbTogc3RyZWFtLAogICAgICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FsbGJhY2tzLm9uR290UmVtb3RlICYmIGNhbGxiYWNrcy5vbkdvdFJlbW90ZShzdHJlYW0pOwogICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50ICYmIHNlbGYub25FdmVudChldnQpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgc3RyZWFtLmljZVJlYnVpbGRDb3VudCk7CiAgICAgICAgdmFyIHJ0Y0lkID0gd2VicnRjLmdldFJ0Y0lkKCk7CgogICAgICAgIF9sb2dnZXIud2FybihydGNJZCwgIiBzdWIgc3RyZWFtICIsIHN0cmVhbUlkLCBvcHRpbWFsVmlkZW9Db2RlY3MpOwoKICAgICAgICBzdHJlYW0uX3dlYnJ0YyA9IHdlYnJ0YzsKICAgICAgICBzdHJlYW0ucnRjSWQgPSBydGNJZDsKICAgICAgICBzdHJlYW0ub3duZXIgPSBfdXRpbC5leHRlbmQoe30sIHN1Yk1lbWJlcik7CgogICAgICAgIHN1YkFyZ3MgJiYgc3RyZWFtLl93ZWJydGMgJiYgc3RyZWFtLl93ZWJydGMuc2V0U3ViQXJncyhzdWJBcmdzKTsKICAgICAgICBzdWJBcmdzICYmIChzdHJlYW0uc3ViQXJncyA9IHN1YkFyZ3MpOwoKICAgICAgICBpZiAoc2VsZi5pc1NhZmFyaUJ1dE5vdFB1c2hTdHJlYW0oZnVuY3Rpb24gc3VjY2VzcygpIHsKICAgICAgICAgICAgc2VsZi5vZmZlckNhbGwocnRjSWQsIG51bGwsIHN0cmVhbUlkLCBfb25TdWJGYWlsLCBmdW5jdGlvbiBvblJzcFN1Y2Nlc3MoKSB7fSk7CiAgICAgICAgfSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIlNhZmFyaSBtdXN0IGdldFVzZXJNZWRpYSwgZ2F0aGVyIGNhbmRzLiBub3cgdHJ5IGdldCBhdWRpby4gZmFpbC4gc3ViZmFpbCIsIHJ0Y0lkLCBzdHJlYW1JZCk7CiAgICAgICAgICAgIF9vblN1YkZhaWwoZXZlbnQpOwogICAgICAgIH0pKSB7Ly8gc2FmYXJpIOWmguaenOayoeaciWdldFVzZXJNZWRpYeaXtu+8jOaYr+S4jeS8mueUn+aIkGNhbmRz55qECiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VsZi5vZmZlckNhbGwocnRjSWQsIG51bGwsIHN0cmVhbUlkLCBfb25TdWJGYWlsLCBmdW5jdGlvbiBvblJzcFN1Y2Nlc3MoKSB7fSk7CiAgICAgICAgfQogICAgfSwKCiAgICBfZ2V0T3B0aW1hbFZpZGVvQ29kZWNzU3Vic2V0OiBmdW5jdGlvbiBfZ2V0T3B0aW1hbFZpZGVvQ29kZWNzU3Vic2V0KHB1YlN0cmVhbVZDb2RlcywgcHViTWVtYmVyU3VwcG9ydFZDb2Rlcywgc2VsZlN1cHBvcnRWQ29kZXMpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBvcHRpbWFsVmlkZW9Db2RlY3MgPSBbXTsKCiAgICAgICAgaWYgKHB1YlN0cmVhbVZDb2RlcyAmJiBwdWJTdHJlYW1WQ29kZXMubGVuZ3RoID4gMCAmJiBzZWxmU3VwcG9ydFZDb2Rlc1twdWJTdHJlYW1WQ29kZXNbMF1dKSB7CiAgICAgICAgICAgIG9wdGltYWxWaWRlb0NvZGVjcy5wdXNoKHB1YlN0cmVhbVZDb2Rlc1swXSk7CiAgICAgICAgfQogICAgICAgIGlmIChvcHRpbWFsVmlkZW9Db2RlY3MubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl9vcmRlclZDb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChwdWJNZW1iZXJTdXBwb3J0VkNvZGVzLCBmdW5jdGlvbiAoaW5kZXgsIHNWQ29kZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChzVkNvZGUgPT0gc2VsZi5fb3JkZXJWQ29kZXNbaV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1hbFZpZGVvQ29kZWNzLnB1c2goc1ZDb2RlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG9wdGltYWxWaWRlb0NvZGVjczsKICAgIH0sCgogICAgc3Vic2NyaWJlU3RyZWFtOiBmdW5jdGlvbiBzdWJzY3JpYmVTdHJlYW0ocnRjSWQsIHN0cmVhbUlkLCByc3BGYWlsLCBzdWJBcmdzLCBvblN1YikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHdlYnJ0YyA9IHNlbGYuX2ljZXNbcnRjSWRdOwoKICAgICAgICB2YXIgc3ViU3RyZWFtID0gc2VsZi5fY2FjaGVTdHJlYW1zW3N0cmVhbUlkXTsKICAgICAgICB2YXIgc3ViTWVtYmVyID0gc2VsZi5fY2FjaGVNZW1iZXJzW3N1YlN0cmVhbS5tZW1JZF07CgogICAgICAgIC8vdmFyIHN0cmVhbSA9IHNlbGYubmV3U3RyZWFtKHN1YlN0cmVhbSk7CiAgICAgICAgdmFyIHN0cmVhbSA9IHN1YlN0cmVhbTsKICAgICAgICBzdHJlYW0uX3dlYnJ0YyA9IHdlYnJ0YzsKICAgICAgICBzdHJlYW0ucnRjSWQgPSBydGNJZDsKICAgICAgICBzdHJlYW0ub3duZXIgPSBfdXRpbC5leHRlbmQoe30sIHN1Yk1lbWJlcik7CgogICAgICAgIHZhciBwcmVTdWJBcmdzID0gc3RyZWFtLnN1YkFyZ3M7CgogICAgICAgIHN1YkFyZ3MgPSBzdWJBcmdzIHx8IHsgc3ViU1ZpZGVvOiB0cnVlLCBzdWJTQXVkaW86IHRydWUgfTsKICAgICAgICBzdHJlYW0uc3ViQXJncyA9IHN0cmVhbS5zdWJBcmdzIHx8IHsgc3ViU1ZpZGVvOiB0cnVlLCBzdWJTQXVkaW86IHRydWUgfTsKICAgICAgICBzdHJlYW0uX3dlYnJ0YyAmJiAoc3RyZWFtLl93ZWJydGMuc3ViQXJncyA9IHN0cmVhbS5fd2VicnRjLnN1YkFyZ3MgfHwgeyBzdWJTVmlkZW86IHRydWUsIHN1YlNBdWRpbzogdHJ1ZSB9KTsKCiAgICAgICAgaWYgKCFzdHJlYW0uc3ViQXJncy5zdWJTVmlkZW8gJiYgc3ViQXJncy5zdWJTVmlkZW8gJiYgIXN0cmVhbS52b2ZmKSB7CiAgICAgICAgICAgIHZhciBwdWJTdHJlYW1WQ29kZXMgPSBzdWJTdHJlYW0udmNvZGVzOwogICAgICAgICAgICB2YXIgcHViTWVtYmVyU3VwcG9ydFZDb2RlcyA9IHN1Yk1lbWJlci52Y29kZXM7CiAgICAgICAgICAgIHZhciBzZWxmU3VwcG9ydFZDb2RlcyA9IHNlbGYuc3VwcG9ydFZDb2RlczsKCiAgICAgICAgICAgIHZhciBvcHRpbWFsVmlkZW9Db2RlY3MgPSBzZWxmLl9nZXRPcHRpbWFsVmlkZW9Db2RlY3NTdWJzZXQocHViU3RyZWFtVkNvZGVzLCBwdWJNZW1iZXJTdXBwb3J0VkNvZGVzLCBzZWxmU3VwcG9ydFZDb2Rlcyk7CgogICAgICAgICAgICAvLyBpZihvcHRpbWFsVmlkZW9Db2RlY3MubGVuZ3RoID09IDApeyAvLyDorqLpmIXop4bpopEg5L2G5pivIOayoeacieebuOWQjOeahCDop4bpopHnvJbnoIHmoLzlvI/jgILlpLHotKUKICAgICAgICAgICAgLy8gICAgIHByZVN1YkFyZ3MgJiYgc3RyZWFtLl93ZWJydGMgJiYgc3RyZWFtLl93ZWJydGMuc2V0U3ViQXJncyhwcmVTdWJBcmdzKTsKICAgICAgICAgICAgLy8gICAgIHByZVN1YkFyZ3MgJiYgKHN0cmVhbS5zdWJBcmdzID0gcHJlU3ViQXJncyk7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vICAgICB2YXIgZXZ0ID0gX3V0aWwuZXh0ZW5kKG5ldyBfX2V2ZW50LlN1YkZhaWwoKSwgbmV3IF9fZXZlbnQuU3ViRmFpbE5vdFN1cHBvcnRWQ29kZXMoewogICAgICAgICAgICAvLyAgICAgICAgIHN0cmVhbTogc3RyZWFtCiAgICAgICAgICAgIC8vICAgICB9KSk7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vICAgICByc3BGYWlsICYmIHJzcEZhaWwoZXZ0KTsKICAgICAgICAgICAgLy8gICAgIHNlbGYub25FdmVudChldnQpOwogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyAgICAgcmV0dXJuOwogICAgICAgICAgICAvLyB9CiAgICAgICAgfQoKICAgICAgICBzdWJBcmdzICYmIHN0cmVhbS5fd2VicnRjICYmIHN0cmVhbS5fd2VicnRjLnNldFN1YkFyZ3Moc3ViQXJncyk7CiAgICAgICAgc3ViQXJncyAmJiAoc3RyZWFtLnN1YkFyZ3MgPSBzdWJBcmdzKTsKCiAgICAgICAgdmFyIHN1Yk1lc3NhZ2UgPSBzZWxmLm5ld01lc3NhZ2UoKS5zZXRPcCgyMDUpLnNldFJ0Y0lkKHJ0Y0lkKS5zZXRTdWJTSWQoc3RyZWFtSWQpOwoKICAgICAgICBzdWJBcmdzICYmIF91dGlsLmV4dGVuZChzdWJNZXNzYWdlLCBzdWJBcmdzKTsKCiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShzdWJNZXNzYWdlLCBmdW5jdGlvbiAocnNwKSB7CiAgICAgICAgICAgIGlmIChyc3AucmVzdWx0ICE9IDApIHsKICAgICAgICAgICAgICAgIHByZVN1YkFyZ3MgJiYgc3RyZWFtLl93ZWJydGMgJiYgc3RyZWFtLl93ZWJydGMuc2V0U3ViQXJncyhwcmVTdWJBcmdzKTsKICAgICAgICAgICAgICAgIHByZVN1YkFyZ3MgJiYgKHN0cmVhbS5zdWJBcmdzID0gcHJlU3ViQXJncyk7CgogICAgICAgICAgICAgICAgdmFyIGV2dCA9IG5ldyBfX2V2ZW50LlN1YkZhaWwoewogICAgICAgICAgICAgICAgICAgIHN0cmVhbTogc3RyZWFtLAogICAgICAgICAgICAgICAgICAgIGNhdXNlOiBuZXcgX19ldmVudC5Sc3BGYWlsKHsgcmVxdWVzdDogc3ViTWVzc2FnZSwgcmVzcG9uc2U6IHJzcCB9KQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcnNwRmFpbCAmJiByc3BGYWlsKGV2dCk7CiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQoZXZ0KTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBldnQgPSBuZXcgX19ldmVudC5TdWJTdWNjZXNzKHsKICAgICAgICAgICAgICAgIHN0cmVhbTogc3RyZWFtLAogICAgICAgICAgICAgICAgaGlkZGVuOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZWxmLl91cGRhdGVSZW1vdGVTdHJlYW0oc3RyZWFtLCBzdHJlYW0uX3dlYnJ0Yy5nZXRSZW1vdGVTdHJlYW0oKSk7CiAgICAgICAgICAgIHNlbGYub25FdmVudChldnQpOwoKICAgICAgICAgICAgdHlwZW9mIG9uU3ViID09PSAnZnVuY3Rpb24nICYmIG9uU3ViKCk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIHVuc3Vic2NyaWJlU3RyZWFtOiBmdW5jdGlvbiB1bnN1YnNjcmliZVN0cmVhbShzdHJlYW1JZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHN0cmVhbSA9IHNlbGYuX2NhY2hlU3RyZWFtc1tzdHJlYW1JZF07CiAgICAgICAgdmFyIHJ0Y0lkID0gc3RyZWFtLl93ZWJydGMgJiYgc3RyZWFtLl93ZWJydGMuZ2V0UnRjSWQoKTsKICAgICAgICBpZiAoIXJ0Y0lkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciB1bnN1Yk1lc3NhZ2UgPSBzZWxmLm5ld01lc3NhZ2UoKS5zZXRPcCgyMDYpLnNldFJ0Y0lkKHJ0Y0lkKS5zZXRTdWJTSWQoc3RyZWFtSWQpOwoKICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh1bnN1Yk1lc3NhZ2UpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHNlbGYuY2xvc2VXZWJydGMocnRjSWQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJ0Y0lkOwogICAgfSwKCiAgICBvbkVudGVyOiBmdW5jdGlvbiBvbkVudGVyKGN2ZXIsIG1lbSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgY3ZlciAmJiAoc2VsZi5fY3ZlciA9IGN2ZXIpOwoKICAgICAgICBpZiAoIW1lbSkgcmV0dXJuOwogICAgICAgIGlmIChzZWxmLl9jYWNoZU1lbWJlcnNbbWVtLmlkXSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzZWxmLl9jYWNoZU1lbWJlcnNbbWVtLmlkXSA9IG1lbTsKCiAgICAgICAgdmFyIF90bXBNYXAgPSB7fTsKICAgICAgICBpZiAobWVtLnJlcyAmJiBtZW0ucmVzLnZjb2RlcyAmJiBtZW0ucmVzLnZjb2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIF91dGlsLmZvckVhY2gobWVtLnJlcy52Y29kZXMsIGZ1bmN0aW9uIChpbmRleCwgdmNvZGUpIHsKICAgICAgICAgICAgICAgIGlmIChfdG1wTWFwW3Zjb2RlXSkge30gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RtcE1hcFt2Y29kZV0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHNlbGYuc3VwcG9ydFZDb2Rlc1t2Y29kZV0gJiYgc2VsZi5zdXBwb3J0VkNvZGVzW3Zjb2RlXSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIHZhciBoYXNPdGhlckRldmljZXM7CiAgICAgICAgLy8gX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZU1lbWJlcnMsIGZ1bmN0aW9uIChfbWVtSWQsIF9tZW1iZXIpIHsKICAgICAgICAvLyAgICAgaWYoIWhhc090aGVyRGV2aWNlcyAmJiBfbWVtSWQgIT0gbWVtLmlkICYmIG1lbS5tZW1OYW1lID09PSBfbWVtYmVyLm1lbU5hbWUpewogICAgICAgIC8vICAgICAgICAgaGFzT3RoZXJEZXZpY2VzID0gdHJ1ZTsKICAgICAgICAvLyAgICAgfQogICAgICAgIC8vIH0pOwogICAgICAgIC8vCiAgICAgICAgLy8gaWYoaGFzT3RoZXJEZXZpY2VzKXsKICAgICAgICAvLyAgICAgcmV0dXJuOwogICAgICAgIC8vIH0KCiAgICAgICAgc2VsZi5vbkFkZE1lbWJlcihfdXRpbC5leHRlbmQoe30sIG1lbSkpOwogICAgfSwKCiAgICBfb25GaW5hbGx5OiBmdW5jdGlvbiBfb25GaW5hbGx5KCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5fY2FjaGVNZW1iZXJzID0ge307IC8vIGlkLCBuYW1lLCBuaWNrTmFtZSwgcmVzb3VyY2UKICAgICAgICBzZWxmLl9jYWNoZVN0cmVhbXMgPSB7fTsgLy8gaWQsIG1lbUlkLCBuYW1lLCB2b2ZmLCBhb2ZmLCB0eXBlCiAgICAgICAgc2VsZi5fbGlua2VkU3RyZWFtcyA9IHt9OwogICAgICAgIHNlbGYuX2ljZXMgPSB7fTsKICAgICAgICBzZWxmLl9tYXliZU5vdEV4aXN0U3RyZWFtcyA9IHt9OwoKICAgICAgICAvL3NlbGYuX3Nlc3Npb24uX3Nlc3Npb25JZCA9IHVuZGVmaW5lZDsKICAgICAgICAvL3NlbGYuX3Nlc3Npb24gPSB1bmRlZmluZWQ7CgoKICAgICAgICAvL3B1c2ggc3RyZWFt5pe277yM55Sx5LqO5byC5q2l77yM5Zyo5pyq6L+U5Zue5oiQ5Yqf5ZCO77yM6YCA5Ye65Lya6K6u77yM5pGE5YOP5aS05LiN5Lya6KKr5YWz6Zet6Zeu6aKYCiAgICAgICAgdmFyIG9wZW5lZE1lZGlhU3RyZWFtcyA9IFtdOwogICAgICAgIF91dGlsLmZvckVhY2goc2VsZi5fb3BlbmVkUnRjTWVkaWFTdHJlYW1zLCBmdW5jdGlvbiAoc3RyZWFtSWQsIG1lZGlhU3RyZWFtKSB7CiAgICAgICAgICAgIGlmIChtZWRpYVN0cmVhbS5hY3RpdmUgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAvL+i/mOayoeacieWFs+mXreeahOa1gQogICAgICAgICAgICAgICAgb3BlbmVkTWVkaWFTdHJlYW1zLnB1c2gobWVkaWFTdHJlYW0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKG9wZW5lZE1lZGlhU3RyZWFtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BlbmVkTWVkaWFTdHJlYW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBfb3BlblN0cmVhbSA9IG9wZW5lZE1lZGlhU3RyZWFtc1tpXTsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLmluZm8oImV4aXQsIGNsb3NlIHN0cmVhbSA9ICIsIF9vcGVuU3RyZWFtLmlkKTsKICAgICAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcFRyYWNrcyhfb3BlblN0cmVhbSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5lcnJvcihlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgX2xvZ2dlci53YXJuKCJmaW5hbGx5LiBhbGwgY2xlYW4uIik7CiAgICB9LAoKICAgIF9vblJvbGVVcGRhdGU6IGZ1bmN0aW9uIF9vblJvbGVVcGRhdGUocm9sZSwgcm9sZVRva2VuKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBfbG9nZ2VyLmluZm8oIlJvbGUgIiwgcm9sZSwgIiA8LSIsIHNlbGYucm9sZSk7CiAgICAgICAgX2xvZ2dlci5pbmZvKHJvbGVUb2tlbik7CiAgICAgICAgc2VsZi5yb2xlID0gcm9sZTsKICAgICAgICBzZWxmLnJvbGVUb2tlbiA9IHJvbGVUb2tlbjsKCiAgICAgICAgc2VsZi5vblJvbGVVcGRhdGUgJiYgc2VsZi5vblJvbGVVcGRhdGUocm9sZSwgcm9sZVRva2VuKTsKICAgIH0sCgogICAgb25FeGl0OiBmdW5jdGlvbiBvbkV4aXQoY3ZlciwgbWVtSWQsIHJlYXNvbikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgY3ZlciAmJiAoc2VsZi5fY3ZlciA9IGN2ZXIpOwoKICAgICAgICBpZiAobWVtSWQgPT0gc2VsZi5nZXRNZW1iZXJJZCgpKSB7CiAgICAgICAgICAgIC8v6KKr5pyN5Yqh5ZmoIOW8uuWItiBleGl0CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiTWUgZXhpdC4gIiwgcmVhc29uLCBtZW1JZCk7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc2VsZi5jbG9zZWQgfHwgc2VsZi5jbG9zZShyZWFzb24pOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuSGFuZ3VwKHsgcmVhc29uOiByZWFzb24sIHNlbGY6IHsgaWQ6IHNlbGYuX21lbWJlcklkIH0gfSkpOwogICAgICAgICAgICAgICAgc2VsZi5vbk1lRXhpdCAmJiBzZWxmLm9uTWVFeGl0KHJlYXNvbik7CgogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgcm1NZW1iZXIgPSBzZWxmLl9jYWNoZU1lbWJlcnNbbWVtSWRdOwogICAgICAgIGlmIChybU1lbWJlcikgewogICAgICAgICAgICBpZiAocm1NZW1iZXIucmVzICYmIHJtTWVtYmVyLnJlcy52Y29kZXMgJiYgcm1NZW1iZXIucmVzLnZjb2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBfdXRpbC5mb3JFYWNoKHJtTWVtYmVyLnJlcy52Y29kZXMsIGZ1bmN0aW9uIChpbmRleCwgdmNvZGUpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLnN1cHBvcnRWQ29kZXNbdmNvZGVdLS07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2VsZi5fb25SZW1vdmVNZW1iZXIocm1NZW1iZXIsIHJlYXNvbik7CiAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5IYW5ndXAoeyByZWFzb246IHJlYXNvbiwgcGFybnRlcjogcm1NZW1iZXIgfSkpOwogICAgICAgIH0KICAgIH0sCgogICAgb25QdWI6IGZ1bmN0aW9uIG9uUHViKGN2ZXIsIG1lbUlkLCBwdWJTKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYuX2NhY2hlTWVtYmVyc1ttZW1JZF0pIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiTm8gZm91bmQgbWVtYmVyLiB3aGVuIHB1YiIpOwogICAgICAgICAgICB0aHJvdyAiTm8gZm91bmQgbWVtYmVyLiB3aGVuIHB1YiI7CiAgICAgICAgfQoKICAgICAgICAvLyBpZihwdWJTLnR5cGUgPT09IDIpeyAvL+W8uuWItiBhb2ZmID0gMQogICAgICAgIC8vICAgICBwdWJTLl8xX2FvZmYgPSBwdWJTLmFvZmY7CiAgICAgICAgLy8gICAgIHB1YlMuYW9mZiA9IHNlbGYuX3NlcnZpY2UuaGFzQXVkaW9NaXhlcnMoKSA/IDAgOiAxOwogICAgICAgIC8vIH0KCiAgICAgICAgdmFyIG5ld1N0cmVhbSA9IHNlbGYubmV3U3RyZWFtKHB1YlMpOwogICAgICAgIHZhciBfc3RyZWFtID0gc2VsZi5fY2FjaGVTdHJlYW1zW3B1YlMuaWRdOwoKICAgICAgICBjdmVyICYmIChzZWxmLl9jdmVyID0gY3Zlcik7CgogICAgICAgIGlmIChfc3RyZWFtICYmIG5ld1N0cmVhbS5zdmVyICE9PSBfc3RyZWFtLnN2ZXIpIHsKICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJPbnB1Yi4gdGhlIHN0ZWFtICIsIF9zdHJlYW0uaWQsICIgcmVwdWJsaXNoLiBzdmVyICIsIF9zdHJlYW0uc3ZlciwgbmV3U3RyZWFtLnN2ZXIpOwoKICAgICAgICAgICAgaWYgKG5ld1N0cmVhbSAmJiAobmV3U3RyZWFtLmFvZmYgIT09IF9zdHJlYW0uYW9mZiB8fCBuZXdTdHJlYW0udm9mZiAhPSBfc3RyZWFtLnZvZmYpKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uU3RyZWFtQ29udHJvbCh1bmRlZmluZWQsIHB1YlMuaWQsIG5ld1N0cmVhbS52b2ZmLCBuZXdTdHJlYW0uYW9mZik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF91dGlsLmV4dGVuZChfc3RyZWFtLCBuZXdTdHJlYW0pOwogICAgICAgICAgICBzZWxmLl9vblJlcHVibGlzaFN0cmVhbShfc3RyZWFtKTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBzdHJlYW0gPSBuZXdTdHJlYW07CgogICAgICAgIHN0cmVhbS5vd25lciA9IHNlbGYuX2NhY2hlTWVtYmVyc1ttZW1JZF07CiAgICAgICAgc2VsZi5fY2FjaGVTdHJlYW1zW3B1YlMuaWRdID0gc3RyZWFtOwoKICAgICAgICBzZWxmLl9vbkFkZFN0cmVhbShzZWxmLm5ld1N0cmVhbShzdHJlYW0pKTsKCiAgICAgICAgaWYgKHNlbGYuYXV0b1N1YikgewogICAgICAgICAgICAvLyBpZihzZWxmLmlzU2FmYXJpQnV0Tm90UHVzaFN0cmVhbSgpKXsKICAgICAgICAgICAgLy8gICAgIHN0cmVhbS5fYXV0b1N1YldoZW5QdXNoU3RyZWFtID0gdHJ1ZTsKICAgICAgICAgICAgLy8gICAgIF9sb2dnZXIud2FybigiRG9udCBhdXRvIHN1YiBzdHJlYW0gIiwgc3RyZWFtLmlkLCAiLCBjYXVzZWQgYnkgc2FmYXJpIG5vdCBwdWIgc3RyZWFtIik7CiAgICAgICAgICAgIC8vICAgICAvL3JldHVybjsKICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgc2VsZi5jcmVhdGVXZWJydGNBbmRTdWJzY3JpYmVTdHJlYW0ocHViUy5pZCwgewogICAgICAgICAgICAgICAgb25Hb3RSZW1vdGU6IGZ1bmN0aW9uIG9uR290UmVtb3RlKHN0cmVhbSkge30KICAgICAgICAgICAgfSk7IC8vLCB1bmRlZmluZWQsIHN1YkFyZ3MKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdHJlYW07CiAgICB9LAoKICAgIG9uVW5wdWI6IGZ1bmN0aW9uIG9uVW5wdWIoY3ZlciwgbWVtSWQsIHNJZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHJtU3RyZWFtID0gc2VsZi5fY2FjaGVTdHJlYW1zW3NJZF07CiAgICAgICAgc2VsZi5fb25SZW1vdmVQdWJzdHJlYW0oc2VsZi5fY2FjaGVNZW1iZXJzW21lbUlkXSwgcm1TdHJlYW0pOwoKICAgICAgICBjdmVyICYmIChzZWxmLl9jdmVyID0gY3Zlcik7CiAgICB9LAoKICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoY3ZlciwgY29uZnJJZCwgcmVhc29uKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBzZWxmLmNsb3NlKHJlYXNvbiB8fCAwKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBzZWxmLm9uQ29uZnJDbG9zZSAmJiBzZWxmLm9uQ29uZnJDbG9zZShjb25mcklkLCByZWFzb24pOwogICAgICAgIH0KICAgIH0sCgogICAgX19nZXRXZWJydGNGb3I6IGZ1bmN0aW9uIF9fZ2V0V2VicnRjRm9yKHB1YlN0cmVhbUlkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgd2VicnRjID0gc2VsZi5fY2FjaGVTdHJlYW1zW3B1YlN0cmVhbUlkXSAmJiBzZWxmLl9jYWNoZVN0cmVhbXNbcHViU3RyZWFtSWRdLl93ZWJydGM7CiAgICAgICAgcmV0dXJuIHdlYnJ0YyAmJiB3ZWJydGMuZ2V0UnRjSWQoKTsKICAgIH0sCiAgICBfZ2V0V2VicnRjOiBmdW5jdGlvbiBfZ2V0V2VicnRjKHB1YlN0cmVhbUlkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgd2VicnRjID0gc2VsZi5fY2FjaGVTdHJlYW1zW3B1YlN0cmVhbUlkXSAmJiBzZWxmLl9jYWNoZVN0cmVhbXNbcHViU3RyZWFtSWRdLl93ZWJydGM7CiAgICAgICAgcmV0dXJuIHdlYnJ0YzsKICAgIH0sCgogICAgX3VwZGF0ZVJlbW90ZVN0cmVhbTogZnVuY3Rpb24gX3VwZGF0ZVJlbW90ZVN0cmVhbShzdHJlYW0sIHJlbW90ZU1lZGlhU3RyZWFtKSB7CiAgICAgICAgaWYgKHN0cmVhbS5sb2NhdGVkKCkgJiYgc3RyZWFtLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgZW1lZGlhLmVuYWJsZUF1ZGlvVHJhY2tzKHJlbW90ZU1lZGlhU3RyZWFtLCB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbWVkaWEuZW5hYmxlQXVkaW9UcmFja3MocmVtb3RlTWVkaWFTdHJlYW0sICFzdHJlYW0uYW9mZiAmJiAhKHN0cmVhbS5zdWJBcmdzICYmIHN0cmVhbS5zdWJBcmdzLnN1YlNBdWRpbyA9PT0gZmFsc2UpKTsKICAgICAgICB9CgogICAgICAgIGVtZWRpYS5lbmFibGVWaWRlb1RyYWNrcyhyZW1vdGVNZWRpYVN0cmVhbSwgIXN0cmVhbS52b2ZmICYmICEoc3RyZWFtLnN1YkFyZ3MgJiYgc3RyZWFtLnN1YkFyZ3Muc3ViU1ZpZGVvID09PSBmYWxzZSkpOwogICAgfSwKCiAgICBvblN0cmVhbUNvbnRyb2w6IGZ1bmN0aW9uIG9uU3RyZWFtQ29udHJvbChjdmVyLCBzdHJlYW1JZCwgdm9mZiwgYW9mZiwgc3ZlcikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHN0cmVhbSA9IHNlbGYuX2NhY2hlU3RyZWFtc1tzdHJlYW1JZF07CgogICAgICAgIHN0cmVhbS52b2ZmID0gdm9mZjsKICAgICAgICBzdHJlYW0uYW9mZiA9IGFvZmY7CgogICAgICAgIHZhciB3ZWJydGMgPSBzdHJlYW0uX3dlYnJ0YzsKICAgICAgICB3ZWJydGMgJiYgd2VicnRjLl9yZW1vdGVTdHJlYW0gJiYgc2VsZi5fdXBkYXRlUmVtb3RlU3RyZWFtKHN0cmVhbSwgd2VicnRjLl9yZW1vdGVTdHJlYW0pOwoKICAgICAgICB2YXIgc3RyZWFtID0gc2VsZi5uZXdTdHJlYW0oc3RyZWFtKTsKICAgICAgICBzZWxmLm9uVXBkYXRlU3RyZWFtICYmIHNlbGYub25VcGRhdGVTdHJlYW0oc3RyZWFtLCBuZXcgc3RyZWFtLlVwZGF0ZSh7IHZvZmY6IHZvZmYsIGFvZmY6IGFvZmYgfSkpOwoKICAgICAgICBjdmVyICYmIChzZWxmLl9jdmVyID0gY3Zlcik7CiAgICAgICAgc3ZlciAmJiAoc3RyZWFtLnN2ZXIgPSBzdmVyKTsKICAgIH0sCgogICAgYW9mZjogZnVuY3Rpb24gYW9mZihwdWJTLCBfYW9mZiwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNJZCA9IHNlbGYuX19nZXRXZWJydGNGb3IocHViUy5pZCk7CiAgICAgICAgaWYgKCFydGNJZCkgewogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJwdWJTIG5vdCBwdWJsaXNoIiwgcHViUy5pZCk7CiAgICAgICAgICAgIHRocm93ICJwdWJTIG5vdCBwdWJsaXNoIiArIHB1YlMuaWQ7CiAgICAgICAgfQoKICAgICAgICBzZWxmLl9saW5rZWRTdHJlYW1zW3B1YlMuaWRdLmFvZmYgPSBwdWJTLmFvZmYgPSBfYW9mZjsKCiAgICAgICAgdmFyIHN0cmVhbUNvbnRyb2wgPSBzZWxmLm5ld01lc3NhZ2UoKS5zZXRPcCg0MDApLnNldFJ0Y0lkKHJ0Y0lkKS5zZXRWb2ZmKHB1YlMudm9mZikuc2V0QW9mZihfYW9mZik7CiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShzdHJlYW1Db250cm9sLCBjYWxsYmFjayk7CiAgICAgICAgc2VsZi5vblVwZGF0ZVN0cmVhbSAmJiBzZWxmLm9uVXBkYXRlU3RyZWFtKHB1YlMsIG5ldyBwdWJTLlVwZGF0ZSh7IGFvZmY6IF9hb2ZmIH0pKTsKICAgIH0sCgogICAgdm9mZjogZnVuY3Rpb24gdm9mZihwdWJTLCBfdm9mZiwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNJZCA9IHNlbGYuX19nZXRXZWJydGNGb3IocHViUy5pZCk7CiAgICAgICAgaWYgKCFydGNJZCkgewogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJwdWJTIG5vdCBwdWJsaXNoIiwgcHViUy5pZCk7CiAgICAgICAgICAgIHRocm93ICJwdWJTIG5vdCBwdWJsaXNoIiArIHB1YlMuaWQ7CiAgICAgICAgfQoKICAgICAgICBzZWxmLl9saW5rZWRTdHJlYW1zW3B1YlMuaWRdLnZvZmYgPSBwdWJTLnZvZmYgPSBfdm9mZjsKCiAgICAgICAgdmFyIHN0cmVhbUNvbnRyb2wgPSBzZWxmLm5ld01lc3NhZ2UoKS5zZXRPcCg0MDApLnNldFJ0Y0lkKHJ0Y0lkKS5zZXRWb2ZmKF92b2ZmKS5zZXRBb2ZmKHB1YlMuYW9mZik7CiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShzdHJlYW1Db250cm9sLCBjYWxsYmFjayk7CiAgICAgICAgc2VsZi5vblVwZGF0ZVN0cmVhbSAmJiBzZWxmLm9uVXBkYXRlU3RyZWFtKHB1YlMsIG5ldyBwdWJTLlVwZGF0ZSh7IHZvZmY6IF92b2ZmIH0pKTsKICAgIH0sCgogICAgc3RhcnRSZWNvcmQ6IGZ1bmN0aW9uIHN0YXJ0UmVjb3JkKF9zdHJlYW0sIHN1Y2Nlc3MpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNJZCA9IF9zdHJlYW0ucnRjSWQ7CgogICAgICAgIHZhciBzdGFydFJlY29yZCA9IHNlbGYubmV3TWVzc2FnZSgpLnNldE9wKDUwMCkuc2V0UnRjSWQocnRjSWQpLnNldEZsYWcoMSk7CiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShzdGFydFJlY29yZCwgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oInJlY29yZCAiLCBydGNJZCwgcnNwLnJlc3VsdCwgcnNwLm1zZyk7CiAgICAgICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2Vzcyhyc3AucmVzdWx0ID09PSAwKTsKICAgICAgICAgICAgaWYgKHJzcC5yZXN1bHQgPT09IDApIHsKICAgICAgICAgICAgICAgIHNlbGYuX3JlY29yZHNbX3N0cmVhbS5pZF0gPSBfdXRpbC5leHRlbmQoZmFsc2UsIHt9LCBfc3RyZWFtKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKCiAgICBzdG9wUmVjb3JkOiBmdW5jdGlvbiBzdG9wUmVjb3JkKF9zdHJlYW0sIHN1Y2Nlc3MpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNJZCA9IF9zdHJlYW0ucnRjSWQ7CgogICAgICAgIHZhciBzdG9wUmVjb3JkID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoNTAwKS5zZXRSdGNJZChydGNJZCkuc2V0RmxhZygwKTsKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHN0b3BSZWNvcmQsIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJzdG9wIHJlY29yZCAiLCBydGNJZCwgcnNwLnJlc3VsdCwgcnNwLm1zZyk7CiAgICAgICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2Vzcyhyc3AucmVzdWx0ID09PSAwKTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHNlbGYuX3JlY29yZHNbX3N0cmVhbS5pZF0pIHsKICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX3JlY29yZHMsIF9zdHJlYW0uaWQpOwogICAgICAgIH0KICAgIH0sCgogICAgb25NZW1iZXJzOiBmdW5jdGlvbiBvbk1lbWJlcnMoY3ZlciwgbWVtYmVycykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHJlbW92ZWRNZW1iZXJzID0gW107CiAgICAgICAgX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZU1lbWJlcnMsIGZ1bmN0aW9uIChfbWVtYmVySWQsIF9tZW1iZXIpIHsKICAgICAgICAgICAgbWVtYmVyc1tfbWVtYmVySWRdIHx8IHJlbW92ZWRNZW1iZXJzLnB1c2goX21lbWJlcik7CiAgICAgICAgfSk7CiAgICAgICAgX3V0aWwuZm9yRWFjaChyZW1vdmVkTWVtYmVycywgZnVuY3Rpb24gKF9pbmRleCwgX21lbWJlcikgewogICAgICAgICAgICBzZWxmLm9uRXhpdCh1bmRlZmluZWQsIF9tZW1iZXIuaWQpOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgYWRkTWVtYmVycyA9IFtdOwogICAgICAgIF91dGlsLmZvckVhY2gobWVtYmVycywgZnVuY3Rpb24gKF9tZW1iZXJJZCwgX21lbWJlcikgewogICAgICAgICAgICBpZiAoX21lbWJlcklkICE9IHNlbGYuZ2V0TWVtYmVySWQoKSkgewogICAgICAgICAgICAgICAgc2VsZi5fY2FjaGVNZW1iZXJzW19tZW1iZXJJZF0gfHwgYWRkTWVtYmVycy5wdXNoKF9tZW1iZXIpOwogICAgICAgICAgICAgICAgc2VsZi5fY2FjaGVNZW1iZXJzW19tZW1iZXJJZF0gJiYgX3V0aWwuZXh0ZW5kKHNlbGYuX2NhY2hlTWVtYmVyc1tfbWVtYmVySWRdLCBfbWVtYmVyKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIF91dGlsLmZvckVhY2goYWRkTWVtYmVycywgZnVuY3Rpb24gKF9pbmRleCwgX21lbWJlcikgewogICAgICAgICAgICBzZWxmLm9uRW50ZXIodW5kZWZpbmVkLCBfbWVtYmVyKTsKICAgICAgICB9KTsKCiAgICAgICAgY3ZlciAmJiAoc2VsZi5fY3ZlciA9IGN2ZXIpOwogICAgfSwKCiAgICBvblN0cmVhbXM6IGZ1bmN0aW9uIG9uU3RyZWFtcyhjdmVyLCBzdHJlYW1zKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcmVtb3ZlZFN0cmVhbXMgPSBbXTsKICAgICAgICBfdXRpbC5mb3JFYWNoKHNlbGYuX2NhY2hlU3RyZWFtcywgZnVuY3Rpb24gKF9wdWJTSWQsIF9zdHJlYW0pIHsKICAgICAgICAgICAgX3N0cmVhbS5sb2NhdGVkKCkgfHwgc3RyZWFtc1tfcHViU0lkXSB8fCByZW1vdmVkU3RyZWFtcy5wdXNoKF9zdHJlYW0pOwogICAgICAgIH0pOwogICAgICAgIF91dGlsLmZvckVhY2gocmVtb3ZlZFN0cmVhbXMsIGZ1bmN0aW9uIChfaW5kZXgsIF9zdHJlYW0pIHsKICAgICAgICAgICAgc2VsZi5vblVucHViKHVuZGVmaW5lZCwgX3N0cmVhbS5tZW1JZCwgX3N0cmVhbS5pZCk7CiAgICAgICAgfSk7CgogICAgICAgIHZhciBhZGRTdHJlYW1zID0gW107CiAgICAgICAgX3V0aWwuZm9yRWFjaChzdHJlYW1zLCBmdW5jdGlvbiAoX3B1YlNJZCwgc3RyZWFtKSB7CiAgICAgICAgICAgIC8vIGlmKHN0cmVhbS50eXBlID09PSAyKXsgLy/lvLrliLYgYW9mZiA9IDEKICAgICAgICAgICAgLy8gICAgIHN0cmVhbS5fMV9hb2ZmID0gc3RyZWFtLmFvZmY7CiAgICAgICAgICAgIC8vICAgICBzdHJlYW0uYW9mZiA9IHNlbGYuX3NlcnZpY2UuaGFzQXVkaW9NaXhlcnMoKSA/IDAgOiAxOwogICAgICAgICAgICAvLyB9CgogICAgICAgICAgICBpZiAoc3RyZWFtLm1lbUlkICE9IHNlbGYuZ2V0TWVtYmVySWQoKSkgewogICAgICAgICAgICAgICAgc2VsZi5fY2FjaGVTdHJlYW1zW19wdWJTSWRdIHx8IGFkZFN0cmVhbXMucHVzaChzdHJlYW0pOwogICAgICAgICAgICAgICAgc2VsZi5fY2FjaGVTdHJlYW1zW19wdWJTSWRdICYmIF91dGlsLmV4dGVuZChzZWxmLl9jYWNoZVN0cmVhbXNbX3B1YlNJZF0sIHN0cmVhbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfdXRpbC5mb3JFYWNoKGFkZFN0cmVhbXMsIGZ1bmN0aW9uIChfaW5kZXgsIF9zdHJlYW0pIHsKICAgICAgICAgICAgc2VsZi5vblB1Yih1bmRlZmluZWQsIF9zdHJlYW0ubWVtSWQsIF9zdHJlYW0pOwogICAgICAgIH0pOwoKICAgICAgICBfdXRpbC5mb3JFYWNoKHNlbGYuX2NhY2hlU3RyZWFtcywgZnVuY3Rpb24gKF9wdWJTSWQsIF9zdHJlYW0pIHsKICAgICAgICAgICAgdmFyIG5ld1N0cmVhbTsKICAgICAgICAgICAgX3N0cmVhbS5sb2NhdGVkKCkgfHwgKG5ld1N0cmVhbSA9IHN0cmVhbXNbX3B1YlNJZF0pOwogICAgICAgICAgICBpZiAobmV3U3RyZWFtICYmIChuZXdTdHJlYW0uYW9mZiAhPT0gX3N0cmVhbS5hb2ZmIHx8IG5ld1N0cmVhbS52b2ZmICE9IF9zdHJlYW0udm9mZikpIHsKICAgICAgICAgICAgICAgIHNlbGYub25TdHJlYW1Db250cm9sKHVuZGVmaW5lZCwgX3B1YlNJZCwgbmV3U3RyZWFtLnZvZmYsIG5ld1N0cmVhbS5hb2ZmKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG5ld1N0cmVhbSAmJiBuZXdTdHJlYW0uc3ZlciAhPT0gX3N0cmVhbS5zdmVyKSB7CiAgICAgICAgICAgICAgICBfdXRpbC5leHRlbmQoX3N0cmVhbSwgbmV3U3RyZWFtKTsKICAgICAgICAgICAgICAgIHNlbGYuX29uUmVwdWJsaXNoU3RyZWFtKF9zdHJlYW0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGN2ZXIgJiYgKHNlbGYuX2N2ZXIgPSBjdmVyKTsKICAgIH0sCgogICAgX29uUmVtb3ZlTWVtYmVyOiBmdW5jdGlvbiBfb25SZW1vdmVNZW1iZXIobWVtYmVyLCByZWFzb24pIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIF9sb2dnZXIuaW5mbygicmVtb3ZlIiwgbWVtYmVyLCByZWFzb24pOwoKICAgICAgICB2YXIgdW5wdWJTdHJlYW1zID0gW107CiAgICAgICAgX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZVN0cmVhbXMsIGZ1bmN0aW9uIChfcHViU0lkLCBfc3RyZWFtKSB7CiAgICAgICAgICAgIGlmICgoX3N0cmVhbS5tZW1JZCB8fCBfc3RyZWFtLm93bmVyICYmIF9zdHJlYW0ub3duZXIuaWQpID09PSBtZW1iZXIuaWQpIHsKICAgICAgICAgICAgICAgIHVucHViU3RyZWFtcy5wdXNoKF9zdHJlYW0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIF91dGlsLmZvckVhY2godW5wdWJTdHJlYW1zLCBmdW5jdGlvbiAoaW5kZXgsIHN0cmVhbSkgewogICAgICAgICAgICBzZWxmLl9vblJlbW92ZVB1YnN0cmVhbShzdHJlYW0ub3duZXIsIHN0cmVhbSwgcmVhc29uKTsKICAgICAgICB9KTsKCiAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX2NhY2hlTWVtYmVycywgbWVtYmVyLmlkKTsKCiAgICAgICAgLy8gdmFyIGhhc090aGVyRGV2aWNlczsKICAgICAgICAvLyBfdXRpbC5mb3JFYWNoKHNlbGYuX2NhY2hlTWVtYmVycywgZnVuY3Rpb24gKF9tZW1JZCwgX21lbWJlcikgewogICAgICAgIC8vICAgICBpZighaGFzT3RoZXJEZXZpY2VzICYmIF9tZW1JZCAhPSBtZW1iZXIuaWQgJiYgbWVtYmVyLm1lbU5hbWUgPT09IF9tZW1iZXIubWVtTmFtZSl7CiAgICAgICAgLy8gICAgICAgICBoYXNPdGhlckRldmljZXMgPSB0cnVlOwogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gfSk7CiAgICAgICAgLy8KICAgICAgICAvLyBpZihoYXNPdGhlckRldmljZXMpewogICAgICAgIC8vICAgICByZXR1cm47CiAgICAgICAgLy8gfQoKICAgICAgICBzZWxmLm9uUmVtb3ZlTWVtYmVyICYmIHNlbGYub25SZW1vdmVNZW1iZXIobWVtYmVyLCByZWFzb24pOwogICAgfSwKCiAgICBfb25BZGRTdHJlYW06IGZ1bmN0aW9uIF9vbkFkZFN0cmVhbShzdHJlYW0pIHsKICAgICAgICBfbG9nZ2VyLmluZm8oImFkZCBzdHJlYW0gIiwgc3RyZWFtLmlkKTsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJhZGQgc3RyZWFtICIsIHN0cmVhbSk7CgogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBzZWxmLm9uQWRkU3RyZWFtKHN0cmVhbSk7CiAgICB9LAoKICAgIF9vblJlbW92ZVB1YnN0cmVhbTogZnVuY3Rpb24gX29uUmVtb3ZlUHVic3RyZWFtKG1lbWJlciwgc3RyZWFtKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXN0cmVhbSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChzdHJlYW0uaWQgPT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmaW5hbGx5RG8oc3RyZWFtKSB7CiAgICAgICAgICAgIGlmIChzdHJlYW0udHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuYXVkaW9NaXhlcnMsIHN0cmVhbS5pZCk7CgogICAgICAgICAgICAgICAgaWYgKHN0cmVhbS5yZW1vdGVQbGF5QXVkaW9PYmplY3QpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHN0cmVhbS5yZW1vdGVQbGF5QXVkaW9PYmplY3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgX3J0Y0lkID0gc2VsZi51bnN1YnNjcmliZVN0cmVhbShzdHJlYW0uaWQpOwogICAgICAgICAgICB2YXIgcm1TdHJlYW0gPSBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fY2FjaGVTdHJlYW1zLCBzdHJlYW0uaWQpOwogICAgICAgICAgICBzZWxmLl9tb25pdFNvdW5kQ2hhbmFnZWRTdHJlYW1zICYmIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzZWxmLl9tb25pdFNvdW5kQ2hhbmFnZWRTdHJlYW1zLCBzdHJlYW0uaWQpOwoKICAgICAgICAgICAgaWYgKHNlbGYub25SZW1vdmVTdHJlYW0pIHsKICAgICAgICAgICAgICAgIHZhciBzdHJlYW0gPSBzZWxmLm5ld1N0cmVhbShzdHJlYW0pOwoKICAgICAgICAgICAgICAgIHNlbGYub25SZW1vdmVTdHJlYW0oc3RyZWFtKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIHNvdW5kTWV0ZXIgPSBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fbWVkaWFNZXRlcnMsIHN0cmVhbS5pZCk7CiAgICAgICAgICAgIHNvdW5kTWV0ZXIgJiYgc291bmRNZXRlci5fZmluYWxseSgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGZpbmFsbHlEbyhzdHJlYW0pOwogICAgICAgIH0KICAgIH0sCgogICAgX29uUmVwdWJsaXNoU3RyZWFtOiBmdW5jdGlvbiBfb25SZXB1Ymxpc2hTdHJlYW0oX3N0cmVhbSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKChzZWxmLl9pY2VzW19zdHJlYW0ucnRjSWRdIHx8IGVtZWRpYS5zdWJzY3JpYmVkKF9zdHJlYW0pKSAmJiAhc2VsZi5fbWF5YmVOb3RFeGlzdFN0cmVhbXNbX3N0cmVhbS5pZF0pIHsKICAgICAgICAgICAgdmFyIF9ydGNJZCA9IHNlbGYudW5zdWJzY3JpYmVTdHJlYW0oX3N0cmVhbS5pZCk7CgogICAgICAgICAgICBzZWxmLmNyZWF0ZVdlYnJ0Y0FuZFN1YnNjcmliZVN0cmVhbShfc3RyZWFtLmlkLCB7CiAgICAgICAgICAgICAgICBvbkdvdFJlbW90ZTogZnVuY3Rpb24gb25Hb3RSZW1vdGUoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgLy9zZWxmLm9uVXBkYXRlU3RyZWFtKF9zdHJlYW0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZWxmLm9uVXBkYXRlU3RyZWFtKF9zdHJlYW0pOwogICAgICAgIH0KICAgIH0sCgogICAgX29uUmVjdlJlbW90ZU1lc3NhZ2U6IGZ1bmN0aW9uIF9vblJlY3ZSZW1vdGVNZXNzYWdlKGZyb21NZW1JZCwgYXJncywgZXZ0KSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJSZWN2IHJlbW90ZSBtZXNzYWdlIiwgZnJvbU1lbUlkLCBhcmdzKTsKCiAgICAgICAgdmFyIGZyb21NZW1iZXIgPSBzZWxmLl9jYWNoZU1lbWJlcnNbZnJvbU1lbUlkXTsKICAgICAgICB2YXIgYXJnc09iamVjdDsKICAgICAgICB0cnkgewogICAgICAgICAgICBhcmdzT2JqZWN0ID0gSlNPTi5wYXJzZShhcmdzKTsKICAgICAgICB9IGNhdGNoIChlKSB7fQoKICAgICAgICBzZWxmLm9uUmVjdlJlbW90ZU1lc3NhZ2UgJiYgc2VsZi5vblJlY3ZSZW1vdGVNZXNzYWdlKGZyb21NZW1iZXIgfHwgZnJvbU1lbUlkLCBhcmdzT2JqZWN0IHx8IGFyZ3MsIGV2dCk7CiAgICB9LAoKICAgIF9vblNvdW5kQ2hhbmFnZTogZnVuY3Rpb24gX29uU291bmRDaGFuYWdlKG1lbWJlciwgc3RyZWFtLCBtZXRlckRhdGEpIHsKICAgICAgICBpZiAoZW1lZGlhLmNvbmZpZy5fcHJpbnRTb3VuZERhdGEpIHsKICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJTdHJlYW0gaWQgIiArIHN0cmVhbS5pZCArICIsIG1ldGVyICIgKyAobWV0ZXJEYXRhICYmIG1ldGVyRGF0YS5pbnN0YW50LnRvRml4ZWQoMikgKyAiICIgKyBtZXRlckRhdGEuc2xvdy50b0ZpeGVkKDIpICsgIiAiICsgbWV0ZXJEYXRhLmNsaXAudG9GaXhlZCgyKSArICIgIiArIChtZXRlckRhdGEudHJhY2tBdWRpb0xldmVsIHx8ICItLSIpICsgIiAiICsgKG1ldGVyRGF0YS50cmFja1RvdGFsQXVkaW9FbmVyZ3kgfHwgIi0tIikpKTsKICAgICAgICB9CgogICAgICAgIG1ldGVyRGF0YSB8fCAobWV0ZXJEYXRhID0gewogICAgICAgICAgICBpbnN0YW50OiAwLAogICAgICAgICAgICBzbG93OiAwLAogICAgICAgICAgICBjbGlwOiAwCiAgICAgICAgfSk7CgogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKG1ldGVyRGF0YS5pbnN0YW50ID09PSAwKSB7CiAgICAgICAgICAgIG1ldGVyRGF0YS5pbnN0YW50ID0gbWV0ZXJEYXRhLnRyYWNrQXVkaW9MZXZlbCB8fCBtZXRlckRhdGEudHJhY2tUb3RhbEF1ZGlvRW5lcmd5IHx8IDA7CiAgICAgICAgfQoKICAgICAgICBzZWxmLm9uU291bmRDaGFuYWdlKG1lbWJlciwgc3RyZWFtLCBtZXRlckRhdGEpOwogICAgICAgIGlmIChzZWxmLl9zZXJ2aWNlLl9qdWRnZVRhbGtpbmcobWV0ZXJEYXRhKSkgewogICAgICAgICAgICBzZWxmLm9uVGFsa2luZyhtZW1iZXIsIHN0cmVhbSwgbWV0ZXJEYXRhKTsKICAgICAgICB9CiAgICB9LAoKICAgIG9uQWRkTWVtYmVyOiBmdW5jdGlvbiBvbkFkZE1lbWJlcihtZW1iZXIpIHt9LAogICAgb25SZW1vdmVNZW1iZXI6IGZ1bmN0aW9uIG9uUmVtb3ZlTWVtYmVyKG1lbWJlciwgcmVhc29uKSB7fSwKICAgIG9uQWRkU3RyZWFtOiBmdW5jdGlvbiBvbkFkZFN0cmVhbShzdHJlYW0pIHsvL3N0cmVhbSB1bmRlZmluZWQg6KGo5piOIGF1dG9TdWLlsZ7mgKcg56m65oiWZmFsc2UuIGF1dG9TdWIgPSB0cnVl5pe277yM6Ieq5Yqo6K6i6ZiFCgogICAgfSwKICAgIG9uUmVtb3ZlU3RyZWFtOiBmdW5jdGlvbiBvblJlbW92ZVN0cmVhbShzdHJlYW0pIHt9LAogICAgb25VcGRhdGVTdHJlYW06IGZ1bmN0aW9uIG9uVXBkYXRlU3RyZWFtKHN0cmVhbSwgdXBkYXRlKSB7fSwKICAgIG9uUmVjdlJlbW90ZU1lc3NhZ2U6IGZ1bmN0aW9uIG9uUmVjdlJlbW90ZU1lc3NhZ2UoZnJvbU1lbWJlciwgYXJnc09iamVjdCkge30sCgogICAgb25Tb3VuZENoYW5hZ2U6IGZ1bmN0aW9uIG9uU291bmRDaGFuYWdlKG1lbWJlciwgc3RyZWFtLCBtZXRlckRhdGEpIHt9LAogICAgb25UYWxraW5nOiBmdW5jdGlvbiBvblRhbGtpbmcobWVtYmVyLCBzdHJlYW0sIG1ldGVyRGF0YSkge30KfSk7Cgptb2R1bGUuZXhwb3J0cyA9IEF0dGVuZGVlOwoKLyoqKi8gfSksCi8qIDIzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIk1lbWJlciIpOwoKdmFyIF9fZXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCnZhciBXZWJSVEMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCi8qKgogKiDmnKrkvZPnjrAgTWVtYmVyIOS9v+eUqOS6hiBzZXNzaW9u44CCCiAqIOivtyDov5nmoLfliJvlu7oKICogTWVtYmVyKHtfc2Vzc2lvbjogc2VzcywgX21lbWJlcklkOiBtZW1iZXJJZH0pCiAqIHRoaXMuX3Nlc3Npb24KICoKICogewogKiAgX21lbWJlcklkOgogKiAgX2ljZXNbTWFwXToKICogfQogKgogKgogKgogKi8KbW9kdWxlLmV4cG9ydHMgPSBfdXRpbC5wcm90b3R5cGVFeHRlbmQoewogICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFzZWxmLl9zZXNzaW9uKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIlJlcXVpcmUgc2Vzc2lvbiIpOwogICAgICAgICAgICB0aHJvdyAiUmVxdWlyZSBzZXNzaW9uIjsKICAgICAgICB9CgogICAgICAgIHNlbGYuY2xvc2VkID0gZmFsc2U7CiAgICAgICAgc2VsZi5faWNlcyA9IHt9OwoKICAgICAgICBzZWxmLnN1cHBvcnRWQ29kZXMgPSB7fTsKCiAgICAgICAgc2VsZi5hdWRpb01peGVycyA9IHt9OwogICAgfSwKCiAgICByZWZsdXNoU3VwcG9ydFZDb2RlczogZnVuY3Rpb24gcmVmbHVzaFN1cHBvcnRWQ29kZXModmNvZGVzKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLnN1cHBvcnRWQ29kZXMgPSB7fTsKCiAgICAgICAgc2VsZi5fb3JkZXJWQ29kZXMgPSB2Y29kZXM7CgogICAgICAgIGlmICghdmNvZGVzIHx8IHZjb2Rlcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIk5vdCBjb25maWcgc3VwcG9ydCB2Y29kZXMiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX3V0aWwuZm9yRWFjaCh2Y29kZXMsIGZ1bmN0aW9uIChpbmRleCwgdmNvZGUpIHsKICAgICAgICAgICAgc2VsZi5zdXBwb3J0VkNvZGVzW3Zjb2RlXSA9IDE7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGdldE9wdGltYWxWaWRlb0NvZGVjczogZnVuY3Rpb24gZ2V0T3B0aW1hbFZpZGVvQ29kZWNzKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFzZWxmLl9vcmRlclZDb2RlcyB8fCBzZWxmLl9vcmRlclZDb2Rlcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICByZXR1cm4gKC9DaHJvbWUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgPyAnVlA4JyA6IC9TYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgPyAnSDI2NCcgOiAnVlA4JwogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgdmFyIG1lbWJlckNvdW50ID0gMDsKICAgICAgICBfdXRpbC5mb3JFYWNoKHNlbGYuX2NhY2hlTWVtYmVycywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBtZW1iZXJDb3VudCsrOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgbWF4U3VwcG9ydENvdW50ID0gMDsKICAgICAgICB2YXIgb3B0aW1hbFZDb2RlOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuX29yZGVyVkNvZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciB2Y29kZSA9IHNlbGYuX29yZGVyVkNvZGVzW2ldOwoKICAgICAgICAgICAgaWYgKG1heFN1cHBvcnRDb3VudCA9PSAwKSB7CiAgICAgICAgICAgICAgICBtYXhTdXBwb3J0Q291bnQgPSBzZWxmLnN1cHBvcnRWQ29kZXNbdmNvZGVdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VsZi5zdXBwb3J0VkNvZGVzW3Zjb2RlXSA+IG1lbWJlckNvdW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdmNvZGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzZWxmLnN1cHBvcnRWQ29kZXNbdmNvZGVdID4gbWF4U3VwcG9ydENvdW50KSB7CiAgICAgICAgICAgICAgICBtYXhTdXBwb3J0Q291bnQgPSBzZWxmLnN1cHBvcnRWQ29kZXNbdmNvZGVdOwogICAgICAgICAgICAgICAgb3B0aW1hbFZDb2RlID0gdmNvZGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBvcHRpbWFsVkNvZGU7CiAgICB9LAoKICAgIHNldE1lbWJlcklkOiBmdW5jdGlvbiBzZXRNZW1iZXJJZChtZW1iZXJJZCkgewogICAgICAgIHRoaXMuX21lbWJlcklkID0gbWVtYmVySWQ7CiAgICB9LAoKICAgIGdldE1lbWJlcklkOiBmdW5jdGlvbiBnZXRNZW1iZXJJZCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fbWVtYmVySWQgfHwgdGhpcy5pZDsKICAgIH0sCgogICAgLyoqCiAgICAgKiBjcmVhdGVXZWJydGMoewogICAgICogIF9ydGNJZDoKICAgICAqICBpY2VTZXJ2ZXJDb25maWc6CiAgICAgKiAgb25Hb3RNZWRpYVN0cmVhbToKICAgICAgKiBvbkV2ZW50OgogICAgICogfSkKICAgICAqCiAgICAgKiBAcGFyYW0gaWNlU2VydmVyQ29uZmlnCiAgICAgKi8KICAgIGNyZWF0ZVdlYnJ0YzogZnVuY3Rpb24gY3JlYXRlV2VicnRjKHdlYnJ0Y0NmZywgcmVidWlsZENvdW50KSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB3ZWJydGNDZmcgfHwgKHdlYnJ0Y0NmZyA9IHt9KTsKCiAgICAgICAgX3V0aWwuZXh0ZW5kKHdlYnJ0Y0NmZywgeyBfcmVidWlsZENvdW50OiByZWJ1aWxkQ291bnQgfHwgMCB9KTsKCiAgICAgICAgaWYgKHNlbGYuX3NlcnZpY2UudXNlUlRDQ2ZnID09PSB0cnVlICYmIHNlbGYuX19ydGNfY2ZnKSB7CiAgICAgICAgICAgIC8v5LyY5YWI5L2/55SoIF9fcnRjX2NmZwogICAgICAgICAgICB3ZWJydGNDZmcuaWNlU2VydmVyQ29uZmlnID0gX3V0aWwuZXh0ZW5kKHRydWUsIHt9LCBzZWxmLl9fcnRjX2NmZyk7CiAgICAgICAgfSBlbHNlIGlmIChfdXRpbC5pc1BsYWluT2JqZWN0KHNlbGYuX3NlcnZpY2UudXNlUlRDQ2ZnKSkgewogICAgICAgICAgICB3ZWJydGNDZmcuaWNlU2VydmVyQ29uZmlnID0gX3V0aWwuZXh0ZW5kKHRydWUsIHt9LCBzZWxmLl9zZXJ2aWNlLnVzZVJUQ0NmZyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgd2VicnRjID0gbmV3IFdlYlJUQyh7CiAgICAgICAgICAgIC8vaWNlU2VydmVyQ29uZmlnOiBpY2VTZXJ2ZXJDb25maWcsCgogICAgICAgICAgICBvbkljZVN0YXRlQ2hhbmdlOiBmdW5jdGlvbiBvbkljZVN0YXRlQ2hhbmdlKGljZVN0YXRlKSB7CiAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSBpY2VTdGF0ZTsKCiAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJldnQudGFyZ2V0IGljZSBzdGF0ZSIsIHN0YXRlKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlID09ICdmYWlsZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5JQ0VDb25uZWN0RmFpbCh7IHdlYnJ0Yzogd2VicnRjIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2VicnRjLm9uRXZlbnQgJiYgd2VicnRjLm9uRXZlbnQobmV3IF9fZXZlbnQuSUNFQ29ubmVjdEZhaWwoeyB3ZWJydGM6IHdlYnJ0YyB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSAnY29ubmVjdGVkJykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuSUNFQ29ubmVjdGVkKHsgd2VicnRjOiB3ZWJydGMgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3ZWJydGMub25FdmVudCA9IG51bGw7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSAnY2xvc2VkJykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuSUNFQ2xvc2VkKHsgd2VicnRjOiB3ZWJydGMgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3ZWJydGMub25FdmVudCAmJiB3ZWJydGMub25FdmVudChuZXcgX19ldmVudC5JQ0VDbG9zZWQoeyB3ZWJydGM6IHdlYnJ0YyB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSAnZGlzY29ubmVjdGVkJykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuSUNFRGlzY29ubmVjdGVkKHsgd2VicnRjOiB3ZWJydGMgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3ZWJydGMub25FdmVudCAmJiB3ZWJydGMub25FdmVudChuZXcgX19ldmVudC5JQ0VEaXNjb25uZWN0ZWQoeyB3ZWJydGM6IHdlYnJ0YyB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9vbkljZVN0YXRlQ2hhbmdlICYmIHNlbGYuX29uSWNlU3RhdGVDaGFuZ2Uod2VicnRjLCBpY2VTdGF0ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBvbkljZUNhbmRpZGF0ZTogZnVuY3Rpb24gb25JY2VDYW5kaWRhdGUoY2FuZGlkYXRlKSB7CiAgICAgICAgICAgICAgICAvL2V2ZW50LmNhbmRpZGF0ZQogICAgICAgICAgICAgICAgc2VsZi5fb25JY2VDYW5kaWRhdGUgJiYgY2FuZGlkYXRlICYmIHNlbGYuX29uSWNlQ2FuZGlkYXRlKHdlYnJ0YywgY2FuZGlkYXRlKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIG9uR290UmVtb3RlU3RyZWFtOiBmdW5jdGlvbiBvbkdvdFJlbW90ZVN0cmVhbShyZW1vdGVTdHJlYW0pIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiZ290IHN0cmVhbS4iLCB3ZWJydGMsIHJlbW90ZVN0cmVhbSk7CgogICAgICAgICAgICAgICAgd2VicnRjLm9uR290TWVkaWFTdHJlYW0gJiYgd2VicnRjLm9uR290TWVkaWFTdHJlYW0ocmVtb3RlU3RyZWFtKTsKCiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuSUNFUmVtb3RlTWVkaWFTdHJlYW0oeyB3ZWJydGM6IHdlYnJ0YyB9KSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQWRkSWNlQ2FuZGlkYXRlRXJyb3I6IGZ1bmN0aW9uIG9uQWRkSWNlQ2FuZGlkYXRlRXJyb3IoZXJyKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuQWRkSWNlQ2FuZEVycm9yKHsgd2VicnRjOiB3ZWJydGMsIGV2ZW50OiBlcnIgfSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvblNldFNlc3Npb25EZXNjcmlwdGlvbkVycm9yOiBmdW5jdGlvbiBvblNldFNlc3Npb25EZXNjcmlwdGlvbkVycm9yKGVycm9yKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oJ29uU2V0U2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3IgOiBGYWlsZWQgdG8gc2V0IHNlc3Npb24gZGVzY3JpcHRpb246ICcgKyBlcnJvci50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgIHNlbGYub25FdmVudCAmJiBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuSUNFQ29ubmVjdEZhaWwoeyB3ZWJydGM6IHdlYnJ0YywgZXZlbnQ6IGVycm9yIH0pKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25DcmVhdGVTZXNzaW9uRGVzY3JpcHRpb25FcnJvcjogZnVuY3Rpb24gb25DcmVhdGVTZXNzaW9uRGVzY3JpcHRpb25FcnJvcihlcnJvcikgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCdGYWlsZWQgdG8gY3JlYXRlIHNlc3Npb24gZGVzY3JpcHRpb246ICcgKyBlcnJvci50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgIHNlbGYub25FdmVudCAmJiBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuSUNFQ29ubmVjdEZhaWwoeyB3ZWJydGM6IHdlYnJ0YywgZXZlbnQ6IGVycm9yIH0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBvblNldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uU3VjY2VzczogZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIC8vICAgICBfbG9nZ2VyLmRlYnVnKCdvblNldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uU3VjY2VzcyA6IHNldExvY2FsRGVzY3JpcHRpb24gY29tcGxldGU6ICcgKyBlcnJvci50b1N0cmluZygpKTsKICAgICAgICAgICAgLy8gICAgIHNlbGYub25FdmVudCAmJiBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuSUNFQ29ubmVjdEZhaWwoe3dlYnJ0Yzogd2VicnRjLCBldmVudDogZXJyb3J9KSk7CiAgICAgICAgICAgIC8vIH0sCiAgICAgICAgfSwgd2VicnRjQ2ZnKTsKCiAgICAgICAgc2VsZi5faWNlcyB8fCAoc2VsZi5faWNlcyA9IHt9KTsKICAgICAgICBpZiAoc2VsZi5faWNlc1t3ZWJydGMuZ2V0UnRjSWQoKV0pIHsKICAgICAgICAgICAgc2VsZi5faG93RG9XZWJydGNXaGVuQ3J0RXhzaXRzV2VicnRjKHdlYnJ0Yyk7CiAgICAgICAgfQogICAgICAgIHNlbGYuX2ljZXNbd2VicnRjLmdldFJ0Y0lkKCldID0gd2VicnRjOwogICAgICAgIHNlbGYuX2ljZXNbd2VicnRjLl9faWRdID0gd2VicnRjOwoKICAgICAgICBzZWxmLl9pY2VDcmVhdGVSdGNQZWVyQ29ubmVjdGlvbih3ZWJydGMuZ2V0UnRjSWQoKSk7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygiY3JlYXRlIHJ0YyAiLCB3ZWJydGMpOwoKICAgICAgICByZXR1cm4gd2VicnRjOwogICAgfSwKCiAgICBfaG93RG9XZWJydGNXaGVuQ3J0RXhzaXRzV2VicnRjOiBmdW5jdGlvbiBfaG93RG9XZWJydGNXaGVuQ3J0RXhzaXRzV2VicnRjKHdlYnJ0YykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgLy90aHJvdyAiV2VicnRjIGlkIGV4c2l0cyBhdCBpY2VzLiBpdCBpcyAiICsgd2VicnRjLmdldFJ0Y0lkKCk7CiAgICAgICAgc2VsZi5jbG9zZVdlYnJ0Yyh3ZWJydGMuZ2V0UnRjSWQoKSwgdHJ1ZSwgZmFsc2UpOwogICAgfSwKCiAgICBjb25uZWN0OiBmdW5jdGlvbiBjb25uZWN0KHN1Y2Vlc3MsIGZhaWwpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYuX3Nlc3Npb24uY29ubmVjdChzdWNlZXNzLCBmYWlsKTsKICAgIH0sCgogICAgY29ubmVjdGVkOiBmdW5jdGlvbiBjb25uZWN0ZWQoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICByZXR1cm4gc2VsZi5fc2Vzc2lvbi5jb25uZWN0ZWQoKTsKICAgIH0sCgogICAgbmV3TWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZShjZmcpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBtZXNzYWdlID0gc2VsZi5fc2Vzc2lvbi5uZXdNZXNzYWdlKGNmZyk7CiAgICAgICAgbWVzc2FnZS5wb3N0ID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aW1lb3V0TWlsbGlzKSB7CiAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UodGhpcywgY2FsbGJhY2ssIHRpbWVvdXRNaWxsaXMpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBtZXNzYWdlOwogICAgfSwKCiAgICBtZXNzYWdlOiBmdW5jdGlvbiBtZXNzYWdlKGNmZykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIG1lc3NhZ2UgPSBzZWxmLl9zZXNzaW9uLm5ld01lc3NhZ2UoY2ZnKTsKICAgICAgICBtZXNzYWdlLnBvc3QgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRpbWVvdXRNaWxsaXMpIHsKICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh0aGlzLCBjYWxsYmFjaywgdGltZW91dE1pbGxpcyk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICB9LAoKICAgIHBvc3RNZXNzYWdlOiBmdW5jdGlvbiBwb3N0TWVzc2FnZShtZXNzYWdlLCBjYWxsYmFjaywgdGltZW91dE1pbGxpcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbWVzc2FnZS5zZXNzSWQgfHwgKG1lc3NhZ2Uuc2Vzc0lkID0gc2VsZi5fc2Vzc2lvbi5fc2Vzc2lvbklkKTsKICAgICAgICAgICAgc2VsZi5fc2Vzc2lvbi5wb3N0TWVzc2FnZShtZXNzYWdlLCBjYWxsYmFjaywgdGltZW91dE1pbGxpcyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7IG9wOiAxMDAxLCB0c3hJZDogbWVzc2FnZS50c3hJZCwgcmVzdWx0OiAtOTUyNywgbXNnOiAicG9zdCBtZXNzYWdlLiBleGNlcHRpb24iIH0pOwogICAgICAgICAgICBfbG9nZ2VyLndhcm4oZSk7CiAgICAgICAgfQogICAgfSwKCiAgICBvbkV2ZW50OiBmdW5jdGlvbiBvbkV2ZW50KGVycm9yKSB7fSwKCiAgICBfb25JY2VTdGF0ZUNoYW5nZTogZnVuY3Rpb24gX29uSWNlU3RhdGVDaGFuZ2Uod2VicnRjLCBydGNTdGF0ZSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgX2xvZ2dlci5pbmZvKHdlYnJ0Yy5nZXRSdGNJZCgpLCBydGNTdGF0ZSk7CiAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LklDRUNoYW5hZ2UoeyB3ZWJydGM6IHdlYnJ0Yywgc3RhdGU6IHJ0Y1N0YXRlIH0pKTsKICAgIH0sCgogICAgX29uSWNlQ2FuZGlkYXRlOiBmdW5jdGlvbiBfb25JY2VDYW5kaWRhdGUod2VicnRjLCBjYW5kKSB7CiAgICAgICAgLy9ldmVudC5jYW5kaWRhdGUKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBjYW5kczsKICAgICAgICBpZiAoX3V0aWwuaXNBcnJheShjYW5kKSkgewogICAgICAgICAgICBjYW5kcyA9IGNhbmQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FuZHMgPSBbXTsKICAgICAgICAgICAgY2FuZHMucHVzaChjYW5kKTsKICAgICAgICB9CgogICAgICAgIHZhciB0Y2tsQyA9IHNlbGYubmV3TWVzc2FnZSgpLnNldE9wKDEwNSkuc2V0UnRjSWQod2VicnRjLmdldFJ0Y0lkKCkpLnNldENhbmRzKGNhbmRzKTsKCiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh0Y2tsQywgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuUnNwRmFpbCh7IHJlcXVlc3Q6IHRja2xDLCByZXNwb25zZTogcnNwIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgX2luaXRDOiBmdW5jdGlvbiBfaW5pdEMod2VicnRjLCBzdHJlYW0sIHNkcCwgc3ViU0lkLCByc3BGYWlsLCByc3BTdWNjZXNzKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoc3RyZWFtICYmIHN0cmVhbS5ydGNJZCAhPT0gd2VicnRjLmdldFJ0Y0lkKCkpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigic3RyZWFtIGFuZCB3ZWJydGMgcnRjSWQgbm90IGVxdWFsLiIpOwogICAgICAgICAgICB0aHJvdyAic3RyZWFtIGFuZCB3ZWJydGMgcnRjSWQgbm90IGVxdWFsLiI7CiAgICAgICAgfQoKICAgICAgICB2YXIgaW5pdEMgPSBzZWxmLm5ld01lc3NhZ2UoKS5zZXRPcCgxMDIpLnNldFJ0Y0lkKHdlYnJ0Yy5nZXRSdGNJZCgpKS5zZXRTZHAoc2RwKS5zZXRTdWJTSWQoc3ViU0lkKTsKCiAgICAgICAgd2VicnRjLnN1YkFyZ3MgJiYgX3V0aWwuZXh0ZW5kKGluaXRDLCB3ZWJydGMuc3ViQXJncyk7CgogICAgICAgIGlmIChzdHJlYW0gJiYgc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBpbml0Qy5zZXRQdWJTKHN0cmVhbSk7CiAgICAgICAgfQoKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGluaXRDLCBmdW5jdGlvbiAocnNwKSB7CiAgICAgICAgICAgIGlmIChyc3AucmVzdWx0ICE9IDApIHsKICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5Sc3BGYWlsKHsgcmVxdWVzdDogaW5pdEMsIHJlc3BvbnNlOiByc3AgfSkpOwogICAgICAgICAgICAgICAgcnNwRmFpbCAmJiByc3BGYWlsKG5ldyBfX2V2ZW50LlJzcEZhaWwoeyByZXF1ZXN0OiBpbml0QywgcmVzcG9uc2U6IHJzcCwgaGlkZGVuOiByc3AucmV0cnlpbmcgPT09IHRydWUgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHN0cmVhbSAmJiAhc3RyZWFtLmlkICYmIHJzcC5zdHJlYW1JZCkgewogICAgICAgICAgICAgICAgc3RyZWFtLmlkID0gcnNwLnN0cmVhbUlkOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcnNwU3VjY2VzcyAmJiByc3BTdWNjZXNzKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcnNwLnNkcCAmJiBzZWxmLmFuc0Mod2VicnRjLmdldFJ0Y0lkKCksIHJzcC5zZHAsIHJzcC5jYW5kcyk7CgogICAgICAgICAgICByc3AubWVtcyAmJiBzZWxmLm9uTWVtYmVycyAmJiBzZWxmLm9uTWVtYmVycyhyc3AuY3ZlciwgcnNwLm1lbXMpOwogICAgICAgICAgICByc3Auc3RyZWFtcyAmJiBzZWxmLm9uU3RyZWFtcyAmJiBzZWxmLm9uU3RyZWFtcyhyc3AuY3ZlciwgcnNwLnN0cmVhbXMpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBfYWNwdEM6IGZ1bmN0aW9uIF9hY3B0Qyh3ZWJydGMsIHNkcCwgcnNwRmFpbCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIGFjcHRDID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoMTA0KS5zZXRSdGNJZCh3ZWJydGMuZ2V0UnRjSWQoKSkuc2V0U2RwKHNkcCk7CgogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoYWNwdEMsIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICAgICAgaWYgKHJzcC5yZXN1bHQgIT0gMCkgewogICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlJzcEZhaWwoeyByZXF1ZXN0OiBhY3B0QywgcmVzcG9uc2U6IHJzcCB9KSk7CiAgICAgICAgICAgICAgICByc3BGYWlsICYmIHJzcEZhaWwobmV3IF9fZXZlbnQuUnNwRmFpbCh7IHJlcXVlc3Q6IGFjcHRDLCByZXNwb25zZTogcnNwIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgX2Fuc0NBbmRQdWJzdHJlYW06IGZ1bmN0aW9uIF9hbnNDQW5kUHVic3RyZWFtKHdlYnJ0Yywgc3RyZWFtLCBzZHAsIHJzcEZhaWwsIHJzcFN1Y2Nlc3MpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBhbnNDID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoMTA2KS5zZXRSdGNJZCh3ZWJydGMuZ2V0UnRjSWQoKSkuc2V0U2RwKHNkcCk7CgogICAgICAgIHdlYnJ0Yy5zdWJBcmdzICYmIF91dGlsLmV4dGVuZChhbnNDLCB3ZWJydGMuc3ViQXJncyk7CgogICAgICAgIGlmIChzdHJlYW0gJiYgc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBzdHJlYW0gPSBfdXRpbC5leHRlbmQoe30sIHN0cmVhbSk7CiAgICAgICAgICAgIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzdHJlYW0sICJtdXRlZE11dGVkIik7CiAgICAgICAgICAgIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzdHJlYW0sICJfbG9jYXRlZCIpOwoKICAgICAgICAgICAgYW5zQy5zZXRQdWJTKHN0cmVhbSk7CiAgICAgICAgfQoKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGFuc0MsIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICAgICAgaWYgKHJzcC5yZXN1bHQgIT0gMCkgewogICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlJzcEZhaWwoeyByZXF1ZXN0OiBhbnNDLCByZXNwb25zZTogcnNwIH0pKTsKICAgICAgICAgICAgICAgIHJzcEZhaWwgJiYgcnNwRmFpbChuZXcgX19ldmVudC5Sc3BGYWlsKHsgcmVxdWVzdDogYW5zQywgcmVzcG9uc2U6IHJzcCwgaGlkZGVuOiByc3AucmV0cnlpbmcgPT09IHRydWUgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHN0cmVhbSAmJiAhc3RyZWFtLmlkICYmIHJzcC5zdHJlYW1JZCkgewogICAgICAgICAgICAgICAgc3RyZWFtLmlkID0gcnNwLnN0cmVhbUlkOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcnNwU3VjY2VzcyAmJiByc3BTdWNjZXNzKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKCiAgICBfYW5zQzogZnVuY3Rpb24gX2Fuc0Mod2VicnRjLCBzZHAsIHJzcEZhaWwpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBhbnNDID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoMTA2KS5zZXRSdGNJZCh3ZWJydGMuZ2V0UnRjSWQoKSkuc2V0U2RwKHNkcCk7CgogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoYW5zQywgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICBpZiAocnNwLnJlc3VsdCAhPSAwKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuUnNwRmFpbCh7IHJlcXVlc3Q6IGFuc0MsIHJlc3BvbnNlOiByc3AgfSkpOwogICAgICAgICAgICAgICAgcnNwRmFpbCAmJiByc3BGYWlsKG5ldyBfX2V2ZW50LlJzcEZhaWwoeyByZXF1ZXN0OiBhbnNDLCByZXNwb25zZTogcnNwIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgX3Rlcm1DOiBmdW5jdGlvbiBfdGVybUMod2VicnRjLCBlbmRSZWFzb24sIHJzcEZhaWwpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNJZCA9IHR5cGVvZiB3ZWJydGMgPT09ICJzdHJpbmciID8gd2VicnRjIDogd2VicnRjLmdldFJ0Y0lkKCk7CiAgICAgICAgdmFyIHRlcm1DID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoMTA3KS5zZXRSdGNJZChydGNJZCkuc2V0RW5kUmVhc29uKGVuZFJlYXNvbik7CgogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UodGVybUMsIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICAgICAgaWYgKHJzcC5yZXN1bHQgIT0gMCkgewogICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlJzcEZhaWwoeyByZXF1ZXN0OiB0ZXJtQywgcmVzcG9uc2U6IHJzcCB9KSk7CiAgICAgICAgICAgICAgICByc3BGYWlsICYmIHJzcEZhaWwobmV3IF9fZXZlbnQuUnNwRmFpbCh7IHJlcXVlc3Q6IHRlcm1DLCByZXNwb25zZTogcnNwIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgX2ljZUNyZWF0ZVJ0Y1BlZXJDb25uZWN0aW9uOiBmdW5jdGlvbiBfaWNlQ3JlYXRlUnRjUGVlckNvbm5lY3Rpb24ocnRjSWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYuX2ljZXNbcnRjSWRdLmNyZWF0ZVJ0Y1BlZXJDb25uZWN0aW9uKCk7CgogICAgICAgIF9sb2dnZXIuZGVidWcoImNyZWF0ZSBydGMgcGVlciBjb25uZWN0aW9uIiwgcnRjSWQpOwogICAgfSwKCiAgICBkb09mZmVyOiBmdW5jdGlvbiBkb09mZmVyKHJ0Y0lkLCBvbkdvdE9mZmVyLCBvbkNyZWF0ZU9mZmVyRXJyb3IpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLl9pY2VzW3J0Y0lkXTsKCiAgICAgICAgd2VicnRjLmNyZWF0ZU9mZmVyKGZ1bmN0aW9uIChzZHApIHsKICAgICAgICAgICAgb25Hb3RPZmZlcihzZHApOwogICAgICAgIH0pOwogICAgfSwKCiAgICBvZmZlckNhbGw6IGZ1bmN0aW9uIG9mZmVyQ2FsbChydGNJZCwgc3RyZWFtLCBzdWJTSWQsIHJzcEZhaWwsIHJzcFN1Y2Nlc3MpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLl9pY2VzW3J0Y0lkXTsKCiAgICAgICAgd2VicnRjLmNyZWF0ZU9mZmVyKGZ1bmN0aW9uIChzZHApIHsKICAgICAgICAgICAgc2VsZi5faW5pdEMgJiYgc2VsZi5faW5pdEMod2VicnRjLCBzdHJlYW0sIHNkcCwgc3ViU0lkLCByc3BGYWlsLCByc3BTdWNjZXNzKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgYWNjZXB0OiBmdW5jdGlvbiBhY2NlcHQocnRjSWQsIHJzcEZhaWwpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLl9pY2VzW3J0Y0lkXTsKICAgICAgICB3ZWJydGMuY3JlYXRlUFJBbnN3ZXIoZnVuY3Rpb24gKHNkcCkgewogICAgICAgICAgICBzZWxmLl9hY3B0QyAmJiBzZWxmLl9hY3B0Qyh3ZWJydGMsIHNkcCwgcnNwRmFpbCk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGFuc3dlckNhbGw6IGZ1bmN0aW9uIGFuc3dlckNhbGwocnRjSWQsIHN0cmVhbSwgcnNwRmFpbCwgcnNwU3VjY2VzcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHdlYnJ0YyA9IHNlbGYuX2ljZXNbcnRjSWRdOwoKICAgICAgICB3ZWJydGMuY3JlYXRlQW5zd2VyKGZ1bmN0aW9uIChzZHApIHsKICAgICAgICAgICAgc2VsZi5fYW5zQ0FuZFB1YnN0cmVhbSAmJiBzZWxmLl9hbnNDQW5kUHVic3RyZWFtKHdlYnJ0Yywgc3RyZWFtLCBzZHAsIHJzcEZhaWwsIHJzcFN1Y2Nlc3MpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBhbnN3ZXI6IGZ1bmN0aW9uIGFuc3dlcihydGNJZCwgcnNwRmFpbCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHdlYnJ0YyA9IHNlbGYuX2ljZXNbcnRjSWRdOwogICAgICAgIHdlYnJ0Yy5jcmVhdGVBbnN3ZXIoZnVuY3Rpb24gKHNkcCkgewogICAgICAgICAgICBzZWxmLl9hbnNDICYmIHNlbGYuX2Fuc0Mod2VicnRjLCBzZHAsIHJzcEZhaWwpOwogICAgICAgIH0pOwogICAgfSwKCiAgICBvblRja2xDOiBmdW5jdGlvbiBvblRja2xDKHJ0Y0lkLCBjYW5kcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBzZWxmLl9hZGRJY2VDYW5kaWRhdGUoY2FuZHMsIHJ0Y0lkKTsKICAgIH0sCgogICAgb25BY3B0QzogZnVuY3Rpb24gb25BY3B0QyhydGNJZCwgc2RwLCBjYW5kcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBzZWxmLl9pY2VTZXRSZW1vdGVTRFAoc2RwLCBydGNJZCk7CiAgICAgICAgY2FuZHMgJiYgc2VsZi5fYWRkSWNlQ2FuZGlkYXRlKGNhbmRzLCBydGNJZCk7CiAgICB9LAoKICAgIG9uQW5zQzogZnVuY3Rpb24gb25BbnNDKHJ0Y0lkLCBzZHAsIGNhbmRzKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHNlbGYuX2ljZVNldFJlbW90ZVNEUChzZHAsIHJ0Y0lkKTsKICAgICAgICBjYW5kcyAmJiBzZWxmLl9hZGRJY2VDYW5kaWRhdGUoY2FuZHMsIHJ0Y0lkKTsKICAgIH0sCgogICAgX2FkZEljZUNhbmRpZGF0ZTogZnVuY3Rpb24gX2FkZEljZUNhbmRpZGF0ZShjYW5kcywgcnRjSWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmICghY2FuZHMgfHwgY2FuZHMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJkcm9wIGNhbmRzIiwgY2FuZHMpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgd2VicnRjID0gc2VsZi5faWNlc1tydGNJZF07CiAgICAgICAgd2VicnRjICYmIHdlYnJ0Yy5hZGRJY2VDYW5kaWRhdGUoY2FuZHMpOwogICAgfSwKCiAgICBjbG9zZVdlYnJ0YzogZnVuY3Rpb24gY2xvc2VXZWJydGMocnRjSWQsIHJlbWFpbkxvY2FsU3RyZWFtLCBzZXJ2ZXJDbG9zZWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIHdlYnJ0YyA9IHNlbGYuX2ljZXNbcnRjSWRdOwoKICAgICAgICBfdXRpbC5mb3JFYWNoKHNlbGYuX2NhY2hlU3RyZWFtcywgZnVuY3Rpb24gKHNpZCwgX3N0cmVhbSkgewogICAgICAgICAgICBpZiAoX3N0cmVhbS5ydGNJZCA9PT0gcnRjSWQgJiYgIV9zdHJlYW0ubG9jYXRlZCgpKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBzb3VuZE1ldGVyID0gX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX21lZGlhTWV0ZXJzLCBzaWQpOwogICAgICAgICAgICAgICAgICAgIHNvdW5kTWV0ZXIgJiYgc291bmRNZXRlci5fZmluYWxseSgpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKF9zdHJlYW0ucnRjSWQgPT09IHJ0Y0lkICYmIF9zdHJlYW0udHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuYXVkaW9NaXhlcnMsIF9zdHJlYW0uaWQpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmICghd2VicnRjIHx8IHdlYnJ0Yy5jbG9zZWQpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJXZWJydGMgbm90IGV4c2l0cyBvciBjbG9zZWQiLCB3ZWJydGMgJiYgd2VicnRjLmNsb3NlZCk7CgogICAgICAgICAgICBpZiAoc2VydmVyQ2xvc2VkKSB7CiAgICAgICAgICAgICAgICB3ZWJydGMgJiYgX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZVN0cmVhbXMsIGZ1bmN0aW9uIChzaWQsIF9zdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX3N0cmVhbS5ydGNJZCA9PT0gcnRjSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9kZWxldGUgc2VsZi5fbGlua2VkU3RyZWFtc1tzaWRdOwogICAgICAgICAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fbGlua2VkU3RyZWFtcywgc2lkKTsKICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJXZWJydGMgY2xvc2UsIHJlbXZvZSBmcm9tIF9saW5rZWRTdHJlYW1zIiwgc2lkKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2VydmVyQ2xvc2VkIHx8IHNlbGYuX3Rlcm1DKHJ0Y0lkLCAwKTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChzZWxmLl9yZWNvcmRzKSB7CiAgICAgICAgICAgIHZhciBfc3RvcFJlY29yZCA9IGZ1bmN0aW9uIF9zdG9wUmVjb3JkKF9zdHJlYW0pIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zdG9wUmVjb3JkKF9zdHJlYW0pOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX3JlY29yZHMsIF9zdHJlYW0uaWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChzZWxmLl9yZWNvcmRzLCBmdW5jdGlvbiAoc2lkLCBfc3RyZWFtKSB7CiAgICAgICAgICAgICAgICBfc3RyZWFtLnJ0Y0lkID09PSBydGNJZCAmJiBfc3RvcFJlY29yZChfc3RyZWFtKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBzZXJ2ZXJDbG9zZWQgfHwgd2VicnRjICYmIHNlbGYuX3Rlcm1DKHdlYnJ0YywgcmVtYWluTG9jYWxTdHJlYW0gJiYgd2VicnRjLl9sb2NhbFN0cmVhbSA/IC0xMCA6IDApOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIC8vd2VicnRjICYmIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzZWxmLl9pY2VzLCBydGNJZCk7CgogICAgICAgICAgICB3ZWJydGMgJiYgd2VicnRjLmNsb3NlKHJlbWFpbkxvY2FsU3RyZWFtKTsgLy8KICAgICAgICAgICAgd2VicnRjICYmIHNlbGYub25XZWJydGNUZXJtQyAmJiBzZWxmLm9uV2VicnRjVGVybUMod2VicnRjKTsKCiAgICAgICAgICAgIGlmIChyZW1haW5Mb2NhbFN0cmVhbSkge30gZWxzZSB7CiAgICAgICAgICAgICAgICB3ZWJydGMgJiYgX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZVN0cmVhbXMsIGZ1bmN0aW9uIChzaWQsIF9zdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX3N0cmVhbS5ydGNJZCA9PT0gcnRjSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9zdHJlYW0ubG9jYXRlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcFRyYWNrcyhfc3RyZWFtLl9sb2NhbE1lZGlhU3RyZWFtKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jYWNoZVN0cmVhbXNbc2lkXSAmJiBzZWxmLl9saW5rZWRTdHJlYW1zW3NpZF0gJiYgc2VsZi5vblJlbW92ZVN0cmVhbShfc3RyZWFtKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fY2FjaGVTdHJlYW1zLCBzaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbW9uaXRTb3VuZENoYW5hZ2VkU3RyZWFtcyAmJiBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fbW9uaXRTb3VuZENoYW5hZ2VkU3RyZWFtcywgc2lkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiV2VicnRjIGNsb3NlLiBSZW1vdmUgc3RyZWFtIiwgc2lkLCAiLiBmcm9tIGNhY2hlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJDbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZGVsZXRlIHNlbGYuX2xpbmtlZFN0cmVhbXNbc2lkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzZWxmLl9saW5rZWRTdHJlYW1zLCBzaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJXZWJydGMgY2xvc2UuIFJlbW92ZSBzdHJlYW0iLCBzaWQsICIuIGZyb20gX2xpbmtlZFN0cmVhbXMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gd2VicnRjOwogICAgfSwKCiAgICBfX2Nsb3NlOiBmdW5jdGlvbiBfX2Nsb3NlKHJlYXNvbikgewogICAgICAgIF9sb2dnZXIud2FybigiY2xvc2luZywgcmVhc29uID0gIiwgcmVhc29uKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIGlmIChzZWxmLmNsb3NlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzZWxmLmNsb3NlZCA9IHRydWU7CgogICAgICAgIGlmIChzZWxmLl9fZ2V0Q29weUludGVydmFsKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi5fX2dldENvcHlJbnRlcnZhbCk7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiU3RvcCBpbnRlcnZhbCBnZXQgY29weSIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNlbGYuX2ljZXMpIHsKICAgICAgICAgICAgZm9yICh2YXIgX3J0Y0lkIGluIHNlbGYuX2ljZXMpIHsKICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VXZWJydGMoX3J0Y0lkLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBleGl0ID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoMjAxKS5zZXRSZWFzb24ocmVhc29uIHx8IDApOwogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoZXhpdCk7CiAgICB9LAoKICAgIGV4aXQ6IGZ1bmN0aW9uIGV4aXQoY2xvc2VNeUNvbmZySWZJQ3J0Q29uZnIpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmICghY2xvc2VNeUNvbmZySWZJQ3J0Q29uZnIpIHsKICAgICAgICAgICAgc2VsZi5jbG9zZSgwKTsgLy8g5q2j5bi45oyC5patCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChjbG9zZU15Q29uZnJJZklDcnRDb25mcikgewogICAgICAgICAgICBzZWxmLl9jbG9zZU15Q29uZnIoMTEpOwogICAgICAgICAgICAvL3JldHVybjsKICAgICAgICB9CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHNlbGYuY2xvc2UoMCk7IC8vIOato+W4uOaMguaWrQogICAgICAgIH0sIDEwMCk7CiAgICB9LAoKICAgIF9jbG9zZU15Q29uZnI6IGZ1bmN0aW9uIF9jbG9zZU15Q29uZnIocmVhc29uKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgY2xvc2VDb25mciA9IHNlbGYubmV3TWVzc2FnZSgpLnNldE9wKDIwNCkuc2V0UmVhc29uKHJlYXNvbiB8fCAwKTsKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGNsb3NlQ29uZnIsIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJDbG9zZSBjb25mciAiLCByc3AucmVzdWx0LCByc3AubXNnKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiAxLuacjeWKoeerryDouKLmjokKICAgICAqIDIu5omL5Yqo54K55Ye7IOaMguaWrQogICAgICogMy5lbnRlcuWksei0pe+8gQogICAgICoKICAgICAqIEBwYXJhbSByZWFzb24KICAgICAqLwogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKHJlYXNvbiwgZmFpbGVkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIGlmIChzZWxmLmNsb3NlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBfdXRpbC5mb3JFYWNoKHNlbGYuX2NhY2hlU3RyZWFtcyB8fCB7fSwgZnVuY3Rpb24gKHNpZCwgX3N0cmVhbSkgewogICAgICAgICAgICAgICAgaWYgKF9zdHJlYW0ubG9jYXRlZCgpICYmIF9zdHJlYW0uX2xvY2FsTWVkaWFTdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcFRyYWNrcyhfc3RyZWFtLl9sb2NhbE1lZGlhU3RyZWFtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzZWxmLl9fY2xvc2UocmVhc29uKTsKCiAgICAgICAgICAgIF91dGlsLmZvckVhY2goc2VsZi5fY2FjaGVTdHJlYW1zLCBmdW5jdGlvbiAoc2lkLCBfc3RyZWFtKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uUmVtb3ZlU3RyZWFtKF9zdHJlYW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZU1lbWJlcnMsIGZ1bmN0aW9uIChfaWQsIF9tZW1iZXIpIHsKICAgICAgICAgICAgICAgIHNlbGYub25SZW1vdmVNZW1iZXIoX21lbWJlcik7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZXNzaW9uICYmIHNlbGYuX3Nlc3Npb24uY2xvc2UocmVhc29uKTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CgogICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50Lkhhbmd1cCh7IHJlYXNvbjogcmVhc29uLCBmYWlsZWQ6IGZhaWxlZCwgc2VsZjogeyBpZDogc2VsZi5fbWVtYmVySWQgfSB9KSk7CiAgICAgICAgICAgICAgICBzZWxmLm9uTWVFeGl0ICYmIHNlbGYub25NZUV4aXQocmVhc29uLCBmYWlsZWQpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmVycm9yKGUpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgc2VsZi5fb25GaW5hbGx5ICYmIHNlbGYuX29uRmluYWxseSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICB3ZWJydGNTdGF0ZTogZnVuY3Rpb24gd2VicnRjU3RhdGUocnRjSWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLl9pY2VzW3J0Y0lkXTsKICAgICAgICByZXR1cm4gd2VicnRjLmljZUNvbm5lY3Rpb25TdGF0ZSgpOwogICAgfSwKCiAgICBfaWNlU2V0UmVtb3RlU0RQOiBmdW5jdGlvbiBfaWNlU2V0UmVtb3RlU0RQKHNkcCwgcnRjSWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLl9pY2VzW3J0Y0lkXTsKICAgICAgICB3ZWJydGMuc2V0UmVtb3RlRGVzY3JpcHRpb24oc2RwKTsKICAgIH0sCgogICAgc2V0TG9jYWxTdHJlYW06IGZ1bmN0aW9uIHNldExvY2FsU3RyZWFtKHN0cmVhbSwgcnRjSWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLl9pY2VzW3J0Y0lkXTsKICAgICAgICB3ZWJydGMuc2V0TG9jYWxTdHJlYW0oc3RyZWFtKTsKICAgIH0sCgogICAgb25XZWJydGNUZXJtQzogZnVuY3Rpb24gb25XZWJydGNUZXJtQyhfd2VicnRjKSB7fQp9KTsKCi8qKiovIH0pLAovKiAyNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovKioKICogV2ViUlRDCiAqCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQSAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQgogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiAgIDEuY3JlYXRlTWVkaWE6Z290IHN0cmVhbUEgICAgICAgICAgICAgICAgICAgICAgfCAxLmNyZWF0ZU1lZGlhOmdvdCBzdHJlYW1CCiAqICAgMi5uZXcgUlRDUGVlckNvbm5lY3Rpb246IEFQZWVyQ29ubmVjdGlvbiAgICAgICB8IDIubmV3IFJUQ1BlZXJDb25uZWN0aW9uOiBCUGVlckNvbm5lY3Rpb24KICogICAzLkFQZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcjpnb3Qgb2ZmZXJBICAgICAgIHwKICogICAgICBBUGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlckEpIHwKICogICAgICBzZW5kIG9mZmVyQSAtLS0+IC0tLT4gLS0tPiAtLS0+ICAgICAgICAtLS0+IHwKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgLS0tPiAzLmdvdCBvZmZlckEgfCBvZmZlckEgPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG9mZmVyQSk7CiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEJQZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihvZmZlckEpCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDQuQlBlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcjogZ290IGFuc3dlckIKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQlBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyQikKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgPC0tLS0gc2VuZCBhbnN3ZXJCCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDUuZ290IGFuc3dlckIgPC0tLSA8LS0tIDwtLS0gPC0tLQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBhbnN3ZXJCID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihhbnN3ZXJCKQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiBBUGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24oYW5zd2VyQikgICAgfAogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiA2LmdvdCBjYW5kaWRhdGVBIC0tLT4gLS0tPiAgLS0tPiAtLS0+ICAgICAgICAgICAgfCAtLS0+IGdvdCBjYW5kaWRhdGVBCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEJQZWVyQ29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUobmV3IFJUQ0ljZUNhbmRpZGF0ZShjYW5kaWRhdGVBKSkKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZ290IGNhbmRpZGF0ZUIgPC0tLSA8LS0tIDwtLS0gPC0tLQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCA8LS0tIDYuZ290IGNhbmRpZGF0ZUIgQVBlZXJDb25uZWN0aW9uLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGVCKQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCA3LiBBUGVlckNvbm5lY3Rpb24uYWRkU3RyZWFtKHN0cmVhbUEpCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDcuIEJQZWVyQ29ubmVjdGlvbi5hZGRTdHJlYW0oc3RyZWFtQikKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1BID4+Pj4+Pj4+Pj4+IHwgIDw8PDw8IHNlZSBBCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlQiA8PDw8PDw8PDw8PCAgICB8IDw8PDw8IHN0cmVhbUIKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICoKICovCgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIldlYnJ0YyIpOwoKdmFyIF9fZXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCnZhciBTRFBVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpOyAvL+W4jOacm+S9v+eUqCBTRFBVdGlscyDlj5bku6MgU0RQU2VjdGlvbgoKdmFyIF9TRFBTZWN0aW9uID0gewogICAgaGVhZGVyU2VjdGlvbjogbnVsbCwKCiAgICBhdWRpb1NlY3Rpb246IG51bGwsCiAgICB2aWRlb1NlY3Rpb246IG51bGwsCgogICAgX3BhcnNlSGVhZGVyU2VjdGlvbjogZnVuY3Rpb24gX3BhcnNlSGVhZGVyU2VjdGlvbihzZHAsIGF1ZGlvSW5kZXgsIHZpZGVvSW5kZXgpIHsKICAgICAgICB2YXIgaW5kZXggPSBhdWRpb0luZGV4OwoKICAgICAgICBpZiAodmlkZW9JbmRleCA9PT0gLTEpIHsvL+S/neaMgeS4jeWPmAogICAgICAgIH0gZWxzZSBpZiAoYXVkaW9JbmRleCA9PT0gLTEpIHsKICAgICAgICAgICAgaW5kZXggPSB2aWRlb0luZGV4OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGluZGV4ID0gTWF0aC5taW4oYXVkaW9JbmRleCwgdmlkZW9JbmRleCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICByZXR1cm4gc2RwLnNsaWNlKDAsIGluZGV4KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNkcDsKICAgIH0sCgogICAgX3BhcnNlQXVkaW9TZWN0aW9uOiBmdW5jdGlvbiBfcGFyc2VBdWRpb1NlY3Rpb24oc2RwLCBhdWRpb0luZGV4LCB2aWRlb0luZGV4KSB7CiAgICAgICAgdmFyIGluZGV4ID0gYXVkaW9JbmRleDsKICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICByZXR1cm4gc2RwLnNsaWNlKGluZGV4LCB2aWRlb0luZGV4IDwgaW5kZXggPyBzZHAubGVuZ3RoIDogdmlkZW9JbmRleCk7CiAgICAgICAgfQogICAgfSwKCiAgICBfcGFyc2VWaWRlb1NlY3Rpb246IGZ1bmN0aW9uIF9wYXJzZVZpZGVvU2VjdGlvbihzZHAsIGF1ZGlvSW5kZXgsIHZpZGVvSW5kZXgpIHsKICAgICAgICB2YXIgaW5kZXggPSB2aWRlb0luZGV4OwogICAgICAgIGlmIChpbmRleCA+PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBzZHAuc2xpY2UoaW5kZXgsIGF1ZGlvSW5kZXggPCBpbmRleCA/IHNkcC5sZW5ndGggOiBhdWRpb0luZGV4KTsKICAgICAgICB9CiAgICB9LAoKICAgIHNwaWx0U2VjdGlvbjogZnVuY3Rpb24gc3BpbHRTZWN0aW9uKHNkcCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5fcHJlU0RQID0gc2RwOwoKICAgICAgICB2YXIgYXVkaW9JbmRleCA9IHNlbGYuX3ByZUF1ZGlvSW5kZXggPSBzZHAuaW5kZXhPZignbT1hdWRpbycpOwogICAgICAgIHZhciB2aWRlb0luZGV4ID0gc2VsZi5fcHJlVmlkZW9JbmRleCA9IHNkcC5pbmRleE9mKCdtPXZpZGVvJyk7CgogICAgICAgIHNlbGYuaGVhZGVyU2VjdGlvbiA9IHNlbGYuX3BhcnNlSGVhZGVyU2VjdGlvbihzZHAsIGF1ZGlvSW5kZXgsIHZpZGVvSW5kZXgpOwogICAgICAgIHNlbGYuYXVkaW9TZWN0aW9uID0gc2VsZi5fcGFyc2VBdWRpb1NlY3Rpb24oc2RwLCBhdWRpb0luZGV4LCB2aWRlb0luZGV4KTsKICAgICAgICBzZWxmLnZpZGVvU2VjdGlvbiA9IHNlbGYuX3BhcnNlVmlkZW9TZWN0aW9uKHNkcCwgYXVkaW9JbmRleCwgdmlkZW9JbmRleCk7CiAgICB9LAoKICAgIHNldFZpZGVvQml0cmF0ZTogZnVuY3Rpb24gc2V0VmlkZW9CaXRyYXRlKHZiaXRyYXRlKSB7CiAgICAgICAgaWYgKCF2Yml0cmF0ZSB8fCAhdGhpcy52aWRlb1NlY3Rpb24pIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy52aWRlb1NlY3Rpb24gPSB0aGlzLnNldEJpdHJhdGUodGhpcy52aWRlb1NlY3Rpb24sIHZiaXRyYXRlKTsKICAgIH0sCgogICAgc2V0QXVkaW9CaXRyYXRlOiBmdW5jdGlvbiBzZXRBdWRpb0JpdHJhdGUoYWJpdHJhdGUpIHsKICAgICAgICBpZiAoIWFiaXRyYXRlIHx8ICF0aGlzLmF1ZGlvU2VjdGlvbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLmF1ZGlvU2VjdGlvbiA9IHRoaXMuc2V0Qml0cmF0ZSh0aGlzLmF1ZGlvU2VjdGlvbiwgYWJpdHJhdGUpOwogICAgfSwKCiAgICBzZXRCaXRyYXRlOiBmdW5jdGlvbiBzZXRCaXRyYXRlKHNlY3Rpb24sIGJpdHJhdGUpIHsKICAgICAgICBzZWN0aW9uID0gc2VjdGlvbi5yZXBsYWNlKC8oYj0pKD86QVN8VElBUykoXDopXGQrL2csICIkMUFTJDIiICsgYml0cmF0ZSk7CiAgICAgICAgaWYgKHNlY3Rpb24uaW5kZXhPZignYj1BUycpIDwgMCkgewogICAgICAgICAgICBzZWN0aW9uID0gc2VjdGlvbi5yZXBsYWNlKC8obT0oPzphdWRpb3x2aWRlbylbXlxyXG5dKykoW1xyXG5dKykvZywgIiQxJDJiPUFTOiIgKyBiaXRyYXRlICsgIiQyIik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZWN0aW9uOwogICAgfSwKCiAgICB1cGRhdGVWaWRlb1NlY3Rpb246IGZ1bmN0aW9uIHVwZGF0ZVZpZGVvU2VjdGlvbihyZWd4LCBvcGVyKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYudmlkZW9TZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlbGYudmlkZW9TZWN0aW9uID0gc2VsZi52aWRlb1NlY3Rpb24ucmVwbGFjZShyZWd4LCBvcGVyKTsKICAgIH0sCgogICAgdXBkYXRlQXVkaW9TZWN0aW9uOiBmdW5jdGlvbiB1cGRhdGVBdWRpb1NlY3Rpb24ocmVneCwgb3BlcikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFzZWxmLmF1ZGlvU2VjdGlvbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzZWxmLmF1ZGlvU2VjdGlvbiA9IHNlbGYuYXVkaW9TZWN0aW9uLnJlcGxhY2UocmVneCwgb3Blcik7CiAgICB9LAoKICAgIHVwZGF0ZVZpZGVvU2VuZG9ubHk6IGZ1bmN0aW9uIHVwZGF0ZVZpZGVvU2VuZG9ubHkoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYudmlkZW9TZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlbGYudmlkZW9TZWN0aW9uID0gc2VsZi52aWRlb1NlY3Rpb24ucmVwbGFjZSgvc2VuZHJlY3YvZywgInNlbmRvbmx5Iik7CiAgICB9LAoKICAgIHVwZGF0ZVZpZGVvUmVjdm9ubHk6IGZ1bmN0aW9uIHVwZGF0ZVZpZGVvUmVjdm9ubHkoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYudmlkZW9TZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlbGYudmlkZW9TZWN0aW9uID0gc2VsZi52aWRlb1NlY3Rpb24ucmVwbGFjZSgvc2VuZHJlY3YvZywgInJlY3Zvbmx5Iik7CiAgICB9LAoKICAgIHVwZGF0ZUF1ZGlvU2VuZG9ubHk6IGZ1bmN0aW9uIHVwZGF0ZUF1ZGlvU2VuZG9ubHkoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYuYXVkaW9TZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlbGYuYXVkaW9TZWN0aW9uID0gc2VsZi5hdWRpb1NlY3Rpb24ucmVwbGFjZSgvc2VuZHJlY3YvZywgInNlbmRvbmx5Iik7CiAgICB9LAoKICAgIHVwZGF0ZUF1ZGlvUmVjdm9ubHk6IGZ1bmN0aW9uIHVwZGF0ZUF1ZGlvUmVjdm9ubHkoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYuYXVkaW9TZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHNlbGYuYXVkaW9TZWN0aW9uID0gc2VsZi5hdWRpb1NlY3Rpb24ucmVwbGFjZSgvc2VuZHJlY3YvZywgInJlY3Zvbmx5Iik7CiAgICB9LAoKICAgIHVwZGF0ZVZDb2RlczogZnVuY3Rpb24gdXBkYXRlVkNvZGVzKHZjb2RlcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCF2Y29kZXMpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIXNlbGYudmlkZW9TZWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2YgdmNvZGVzID09PSAic3RyaW5nIikgewogICAgICAgICAgICB2YXIgYXJyID0gW107CiAgICAgICAgICAgIGFyci5wdXNoKHZjb2Rlcyk7CiAgICAgICAgICAgIHZjb2RlcyA9IGFycjsKICAgICAgICB9CgogICAgICAgIHZhciB2Y29kZU1hcCA9IHt9OwogICAgICAgIHZhciByZWdleHAgPSAvYT1ydHBtYXA6KFxkKykgKFtBLVphLXowLTldKylcLy4qL2lnOwogICAgICAgIHZhciBhcnIgPSBzZWxmLl9wYXJzZUxpbmUoc2VsZi52aWRlb1NlY3Rpb24sIHJlZ2V4cCk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGNvZGVOdW0gPSBhcnJbKytpXTsKICAgICAgICAgICAgdmFyIGNvZGUgPSBhcnJbKytpXTsKICAgICAgICAgICAgdmNvZGVNYXBbY29kZV0gPSBjb2RlTnVtOwogICAgICAgIH0KCiAgICAgICAgLy9IMjY0CiAgICAgICAgLy9pZigvRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXsgLy9hPWZtdHA6MTI2IHByb2ZpbGUtbGV2ZWwtaWQ9NDJlMDFmO2xldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTE7cGFja2V0aXphdGlvbi1tb2RlPTEKICAgICAgICB2YXIgaDI2NF9yZWdleHAgPSAvYT1mbXRwOihcZCspIC4qcHJvZmlsZS1sZXZlbC1pZD00MmUwMWY7Py4qL2lnOwogICAgICAgIHZhciBoMjY0X2FyciA9IHNlbGYuX3BhcnNlTGluZShzZWxmLnZpZGVvU2VjdGlvbiwgaDI2NF9yZWdleHApOwoKICAgICAgICBpZiAoaDI2NF9hcnIgJiYgaDI2NF9hcnIubGVuZ3RoID49IDIpIHsKICAgICAgICAgICAgdmNvZGVNYXBbJ0gyNjQnXSA9IGgyNjRfYXJyWzFdOwogICAgICAgIH0KICAgICAgICAvL30KCiAgICAgICAgdmFyIG51bUNvZGVzID0gW107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2Y29kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHN1cHBvcnRWQ29kZSA9IHZjb2RlTWFwW3Zjb2Rlc1tpXV07CiAgICAgICAgICAgIHN1cHBvcnRWQ29kZSAmJiBudW1Db2Rlcy5wdXNoKHN1cHBvcnRWQ29kZSk7CiAgICAgICAgfQogICAgICAgIGlmIChudW1Db2Rlcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIk5vdCBmb3VuZCB2Y29kZXMgbWFwIiwgdmNvZGVzKTsKICAgICAgICAgICAgaWYgKHNlbGYuX3dlYnJ0YykgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJOb3QgZm91bmQgdmNvZGVzIG1hcCIsIHZjb2Rlcywgc2VsZi5fd2VicnRjLl9ydGNJZCwgc2VsZi5fd2VicnRjLl9faWQpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgY29kZUxpbmVMYXN0SW5kZXggPSBzZWxmLnZpZGVvU2VjdGlvbi5pbmRleE9mKCdccicpOwogICAgICAgIHZhciBjb2RlTGluZSA9IHNlbGYudmlkZW9TZWN0aW9uLnN1YnN0cmluZygwLCBjb2RlTGluZUxhc3RJbmRleCk7CgogICAgICAgIHZhciBmaWVsZHMgPSBjb2RlTGluZS5zcGxpdCgnICcpOwoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShudW1Db2RlcywgZmllbGRzLnNsaWNlKDMpKTsKCiAgICAgICAgdmFyIG5ld051bUNvZGVzID0gW107CiAgICAgICAgdmFyIF9tYXAgPSB7fTsKICAgICAgICBfdXRpbC5mb3JFYWNoKG51bUNvZGVzLCBmdW5jdGlvbiAoaW5kZXgsIGVsZSkgewogICAgICAgICAgICBpZiAobmV3TnVtQ29kZXMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIG5ld051bUNvZGVzLnB1c2goZWxlKTsKICAgICAgICAgICAgICAgIF9tYXBbZWxlXSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoIV9tYXBbZWxlXSkgewogICAgICAgICAgICAgICAgICAgIG5ld051bUNvZGVzLnB1c2goZWxlKTsKICAgICAgICAgICAgICAgICAgICBfbWFwW2VsZV0gPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy9hbGVydChudW1Db2Rlcy5qb2luKCcgJykpOwoKICAgICAgICAvL2ZpZWxkcy5zcGxpY2UoMywgMCwgbnVtQ29kZXMpOwogICAgICAgIGZpZWxkcy5zcGxpY2UoMywgZmllbGRzLmxlbmd0aCAtIDMsIG5ld051bUNvZGVzLmpvaW4oJyAnKSk7CgogICAgICAgIGNvZGVMaW5lID0gZmllbGRzLmpvaW4oJyAnKTsKICAgICAgICAvL19sb2dnZXIuaW5mbyhjb2RlTGluZSk7CiAgICAgICAgaWYgKHNlbGYuX3dlYnJ0YykgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oY29kZUxpbmUsIHNlbGYuX3dlYnJ0Yy5fcnRjSWQsIHNlbGYuX3dlYnJ0Yy5fX2lkKTsKICAgICAgICB9CgogICAgICAgIHNlbGYudmlkZW9TZWN0aW9uID0gY29kZUxpbmUgKyBzZWxmLnZpZGVvU2VjdGlvbi5zdWJzdHJpbmcoY29kZUxpbmVMYXN0SW5kZXgpOwogICAgfSwKCiAgICByZW1vdmVTU1JDOiBmdW5jdGlvbiByZW1vdmVTU1JDKHNlY3Rpb24pIHsKICAgICAgICB2YXIgYXJyID0gW107CgogICAgICAgIHZhciBfYXJyID0gc2VjdGlvbi5zcGxpdCgvYT1zc3JjOlteXG5dKy9nKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9hcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgX2FycltpXSAhPSAnXG4nICYmIGFyci5wdXNoKF9hcnJbaV0pOwogICAgICAgIH0KICAgICAgICAvLyBhcnIucHVzaCgnJyk7CgogICAgICAgIHJldHVybiBhcnIuam9pbignXG4nKTsKICAgIH0sCgogICAgcmVtb3ZlRmllbGRfbXNpZDogZnVuY3Rpb24gcmVtb3ZlRmllbGRfbXNpZChzZWN0aW9uKSB7CiAgICAgICAgdmFyIGFyciA9IFtdOwoKICAgICAgICB2YXIgX2FyciA9IHNlY3Rpb24uc3BsaXQoL2E9bXNpZDpbXlxuXSsvZyk7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIF9hcnJbaV0gIT0gJ1xuJyAmJiBhcnIucHVzaChfYXJyW2ldKTsKICAgICAgICB9CiAgICAgICAgLy8gYXJyLnB1c2goJycpOwoKICAgICAgICBzZWN0aW9uID0gYXJyLmpvaW4oJ1xuJyk7CiAgICAgICAgYXJyID0gW107CgogICAgICAgIF9hcnIgPSBzZWN0aW9uLnNwbGl0KC9bXG5dKy9nKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9hcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgX2FycltpXSAhPSAnXG4nICYmIGFyci5wdXNoKF9hcnJbaV0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFyci5qb2luKCdcbicpOwogICAgfSwKCiAgICB1cGRhdGVIZWFkZXJNc2lkU2VtYW50aWM6IGZ1bmN0aW9uIHVwZGF0ZUhlYWRlck1zaWRTZW1hbnRpYyh3bXMpIHsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgbGluZSA9ICJhPW1zaWQtc2VtYW50aWM6IFdNUyAiICsgd21zOwoKICAgICAgICB2YXIgX2FyciA9IHNlbGYuaGVhZGVyU2VjdGlvbi5zcGxpdCgvYT1tc2lkXC1zZW1hbnRpYzogV01TLiovZyk7CiAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgIHN3aXRjaCAoX2Fyci5sZW5ndGgpIHsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgYXJyLnB1c2goX2FyclswXSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgYXJyLnB1c2goX2FyclswXSk7CiAgICAgICAgICAgICAgICBhcnIucHVzaChsaW5lKTsKICAgICAgICAgICAgICAgIGFyci5wdXNoKCdcbicpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGFyci5wdXNoKF9hcnJbMF0pOwogICAgICAgICAgICAgICAgYXJyLnB1c2gobGluZSk7CiAgICAgICAgICAgICAgICBhcnIucHVzaCgnXG4nKTsKICAgICAgICAgICAgICAgIGFyci5wdXNoKF9hcnJbMl0pOwogICAgICAgICAgICAgICAgYXJyLnB1c2goJ1xuJyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzZWxmLmhlYWRlclNlY3Rpb24gPSBhcnIuam9pbignJyk7CiAgICB9LAoKICAgIHVwZGF0ZUF1ZGlvU1NSQ1NlY3Rpb246IGZ1bmN0aW9uIHVwZGF0ZUF1ZGlvU1NSQ1NlY3Rpb24oc3NyYywgY25hbWUsIG1zaWQsIGxhYmVsKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLmF1ZGlvU2VjdGlvbiAmJiAoc2VsZi5hdWRpb1NlY3Rpb24gPSBzZWxmLnJlbW92ZVNTUkMoc2VsZi5hdWRpb1NlY3Rpb24pKTsKICAgICAgICBzZWxmLmF1ZGlvU2VjdGlvbiAmJiAoc2VsZi5hdWRpb1NlY3Rpb24gPSBzZWxmLnJlbW92ZUZpZWxkX21zaWQoc2VsZi5hdWRpb1NlY3Rpb24pKTsKICAgICAgICBzZWxmLmF1ZGlvU2VjdGlvbiAmJiAoc2VsZi5hdWRpb1NlY3Rpb24gPSBzZWxmLmF1ZGlvU2VjdGlvbiArIHNlbGYuc3NyY1NlY3Rpb24oc3NyYywgY25hbWUsIG1zaWQsIGxhYmVsKSk7CiAgICB9LAoKICAgIHVwZGF0ZVZpZGVvU1NSQ1NlY3Rpb246IGZ1bmN0aW9uIHVwZGF0ZVZpZGVvU1NSQ1NlY3Rpb24oc3NyYywgY25hbWUsIG1zaWQsIGxhYmVsKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLnZpZGVvU2VjdGlvbiAmJiAoc2VsZi52aWRlb1NlY3Rpb24gPSBzZWxmLnJlbW92ZVNTUkMoc2VsZi52aWRlb1NlY3Rpb24pKTsKICAgICAgICBzZWxmLnZpZGVvU2VjdGlvbiAmJiAoc2VsZi52aWRlb1NlY3Rpb24gPSBzZWxmLnJlbW92ZUZpZWxkX21zaWQoc2VsZi52aWRlb1NlY3Rpb24pKTsKICAgICAgICBzZWxmLnZpZGVvU2VjdGlvbiAmJiAoc2VsZi52aWRlb1NlY3Rpb24gPSBzZWxmLnZpZGVvU2VjdGlvbiArIHNlbGYuc3NyY1NlY3Rpb24oc3NyYywgY25hbWUsIG1zaWQsIGxhYmVsKSk7CiAgICB9LAoKICAgIGdldFVwZGF0ZWRTRFA6IGZ1bmN0aW9uIGdldFVwZGF0ZWRTRFAoYXVkaW9WaWRlbykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHNkcCA9ICIiOwoKICAgICAgICBzZWxmLmhlYWRlclNlY3Rpb24gJiYgKHNkcCArPSBzZWxmLmhlYWRlclNlY3Rpb24pOwoKICAgICAgICBpZiAoYXVkaW9WaWRlbyA9PT0gdHJ1ZSB8fCBhdWRpb1ZpZGVvID09PSB1bmRlZmluZWQgJiYgc2VsZi5fcHJlQXVkaW9JbmRleCA8IHNlbGYuX3ByZVZpZGVvSW5kZXgpIHsKICAgICAgICAgICAgc2VsZi5hdWRpb1NlY3Rpb24gJiYgKHNkcCArPSBzZWxmLmF1ZGlvU2VjdGlvbik7CiAgICAgICAgICAgIHNlbGYudmlkZW9TZWN0aW9uICYmIChzZHAgKz0gc2VsZi52aWRlb1NlY3Rpb24pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChhdWRpb1ZpZGVvID09PSBmYWxzZSAmJiBzZWxmLnZpZGVvU2VjdGlvbiAmJiBzZWxmLmF1ZGlvU2VjdGlvbikgewogICAgICAgICAgICAgICAgdmFyIHZpZGVvTWlkOwogICAgICAgICAgICAgICAgc2VsZi52aWRlb1NlY3Rpb24ucmVwbGFjZSgvYT1taWQ6KFteXHJcbl0rKS8sIGZ1bmN0aW9uIChtYXRjaCwgcDEpIHsKICAgICAgICAgICAgICAgICAgICB2aWRlb01pZCA9IHAxOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHZhciBhdWRpb01pZDsKICAgICAgICAgICAgICAgIHNlbGYuYXVkaW9TZWN0aW9uLnJlcGxhY2UoL2E9bWlkOihbXlxyXG5dKykvLCBmdW5jdGlvbiAobWF0Y2gsIHAxKSB7CiAgICAgICAgICAgICAgICAgICAgYXVkaW9NaWQgPSBwMTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBzZHAgPSBzZWxmLmhlYWRlclNlY3Rpb24ucmVwbGFjZSgvYT1ncm91cDpCVU5ETEUgW15cclxuXSsvLCAiYT1ncm91cDpCVU5ETEUgIiArIHZpZGVvTWlkICsgIiAiICsgYXVkaW9NaWQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZWxmLnZpZGVvU2VjdGlvbiAmJiAoc2RwICs9IHNlbGYudmlkZW9TZWN0aW9uKTsKICAgICAgICAgICAgc2VsZi5hdWRpb1NlY3Rpb24gJiYgKHNkcCArPSBzZWxmLmF1ZGlvU2VjdGlvbik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc2RwOwogICAgfSwKCiAgICBwYXJzZU1zaWRTZW1hbnRpYzogZnVuY3Rpb24gcGFyc2VNc2lkU2VtYW50aWMoaGVhZGVyKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcmVnZXhwID0gL2E9bXNpZFwtc2VtYW50aWM6XHMqV01TIChcUyspL2lnOwogICAgICAgIHZhciBhcnIgPSBzZWxmLl9wYXJzZUxpbmUoaGVhZGVyLCByZWdleHApOwoKICAgICAgICBhcnIgJiYgYXJyLmxlbmd0aCA9PSAyICYmIChzZWxmLm1zaWRTZW1hbnRpYyA9IHsKICAgICAgICAgICAgbGluZTogYXJyWzBdLAogICAgICAgICAgICBXTVM6IGFyclsxXQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gc2VsZi5tc2lkU2VtYW50aWM7CiAgICB9LAoKICAgIHNzcmNTZWN0aW9uOiBmdW5jdGlvbiBzc3JjU2VjdGlvbihzc3JjLCBjbmFtZSwgbXNpZCwgbGFiZWwpIHsKICAgICAgICB2YXIgbGluZXMgPSBbJ2E9c3NyYzonICsgc3NyYyArICcgY25hbWU6JyArIGNuYW1lLCAnYT1zc3JjOicgKyBzc3JjICsgJyBtc2lkOicgKyBtc2lkICsgJyAnICsgbGFiZWwsICdhPXNzcmM6JyArIHNzcmMgKyAnIG1zbGFiZWw6JyArIG1zaWQsICdhPXNzcmM6JyArIHNzcmMgKyAnIGxhYmVsOicgKyBsYWJlbCwgJyddOwoKICAgICAgICByZXR1cm4gbGluZXMuam9pbignXG4nKTsKICAgIH0sCgogICAgcGFyc2VTU1JDOiBmdW5jdGlvbiBwYXJzZVNTUkMoc2VjdGlvbikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoImE9KHNzcmMpOihcXGQrKSAoXFxTKyk6KFxcUyspIiwgImlnIik7CgogICAgICAgIHZhciBhcnIgPSBzZWxmLl9wYXJzZUxpbmUoc2VjdGlvbiwgcmVnZXhwKTsKICAgICAgICBpZiAoYXJyKSB7CiAgICAgICAgICAgIHZhciBzc3JjID0gewogICAgICAgICAgICAgICAgbGluZXM6IFtdLAogICAgICAgICAgICAgICAgdXBkYXRlU1NSQ1NlY3Rpb246IHNlbGYuc3NyY1NlY3Rpb24KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IGFycltpXTsKICAgICAgICAgICAgICAgIGlmIChlLmluZGV4T2YoImE9c3NyYyIpID49IDApIHsKICAgICAgICAgICAgICAgICAgICBzc3JjLmxpbmVzLnB1c2goZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzc3JjJzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY25hbWUnOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtc2lkJzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbXNsYWJlbCc6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xhYmVsJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNzcmNbZV0gPSBhcnJbKytpXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBzc3JjOwogICAgICAgIH0KICAgIH0sCgogICAgX3BhcnNlTGluZTogZnVuY3Rpb24gX3BhcnNlTGluZShzdHIsIHJlZ2V4cCkgewogICAgICAgIHZhciBhcnIgPSBbXTsKCiAgICAgICAgdmFyIF9hcnI7CiAgICAgICAgd2hpbGUgKChfYXJyID0gcmVnZXhwLmV4ZWMoc3RyKSkgIT0gbnVsbCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9hcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGFyci5wdXNoKF9hcnJbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIGFycjsKICAgICAgICB9CiAgICB9Cn07Cgp2YXIgU0RQU2VjdGlvbiA9IGZ1bmN0aW9uIFNEUFNlY3Rpb24oc2RwLCB3ZWJyYykgewogICAgX3V0aWwuZXh0ZW5kKHRoaXMsIF9TRFBTZWN0aW9uKTsKICAgIHRoaXMuX3dlYnJ0YyA9IHdlYnJjOwogICAgdGhpcy5zcGlsdFNlY3Rpb24oc2RwKTsKfTsKClNEUFNlY3Rpb24uaXNBdWRpb1ZpZGVvID0gZnVuY3Rpb24gKHNkcCkgewogICAgdmFyIGF1ZGlvSW5kZXggPSBzZHAuaW5kZXhPZignbT1hdWRpbycpOwogICAgdmFyIHZpZGVvSW5kZXggPSBzZHAuaW5kZXhPZignbT12aWRlbycpOwoKICAgIHJldHVybiBhdWRpb0luZGV4IDwgdmlkZW9JbmRleDsKfTsKClNEUFNlY3Rpb24uaXNWaWRlb1ByZUF1ZGlvID0gZnVuY3Rpb24gKHNkcCkgewogICAgdmFyIGF1ZGlvSW5kZXggPSBzZHAuaW5kZXhPZignbT1hdWRpbycpOwogICAgdmFyIHZpZGVvSW5kZXggPSBzZHAuaW5kZXhPZignbT12aWRlbycpOwoKICAgIHJldHVybiBhdWRpb0luZGV4ID49IDAgJiYgdmlkZW9JbmRleCA+PSAwICYmIHZpZGVvSW5kZXggPCBhdWRpb0luZGV4Owp9OwoKdmFyIF9fcnRjX2dsb2JhbENvdW50ID0gZW1lZGlhLl9fcnRjX2dsb2JhbENvdW50ID0gMDsKCi8qKgogKiBBYnN0cmFjdAogKiB7CiAqICAgb25JY2VTdGF0ZUNoYW5nZToKICogICBvbkljZUNhbmRpZGF0ZToKICogICBvbkdvdFJlbW90ZVN0cmVhbToKICoKICogICBjcmVhdGVSdGNQZWVyQ29ubmVjdGlvbjoKICogICBjcmVhdGVPZmZlcjoKICogICBjcmVhdGVQUkFuc3dlcjoKICogICBjcmVhdGVBbnN3ZXI6CiAqICAgYWRkSWNlQ2FuZGlkYXRlOgogKiAgIGNsb3NlOgogKiAgIGljZVN0YXRlOgogKgogKiAgIHNldExvY2FsU3RyZWFtOgogKiAgIGdldFJ0Y0lkOgogKiB9CiAqCiAqLwovKioKICogSUNFIOmAmumBk+Wksei0pe+8mgogKiAxLnNldCBzZHAg5aSx6LSlCiAqIDIuc2V0IGNhbmRzIOWksei0pQogKiDkvYbmnIDnu4jpg73mmK8gaWNlIGZhaWwKICoKICoKICogb25TZXRTZXNzaW9uRGVzY3JpcHRpb25FcnJvcgogKiBvbkNyZWF0ZVNlc3Npb25EZXNjcmlwdGlvbkVycm9yCiAqIG9uQWRkSWNlQ2FuZGlkYXRlRXJyb3IKICoKICogb25JY2VTdGF0ZUNoYW5nZSAgaWNlIGZhaWwKICoKICovCnZhciBfV2ViUlRDID0gX3V0aWwucHJvdG90eXBlRXh0ZW5kKHsKICAgIGNsb3NlZDogZmFsc2UsCiAgICBzZHBDb25zdHJhaW50czogewogICAgICAgICdtYW5kYXRvcnknOiB7CiAgICAgICAgICAgICdPZmZlclRvUmVjZWl2ZUF1ZGlvJzogdHJ1ZSwKICAgICAgICAgICAgJ09mZmVyVG9SZWNlaXZlVmlkZW8nOiB0cnVlCiAgICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIG9mZmVyVG9SZWNlaXZlQXVkaW8gZmFsc2Ugc2VuZG9ubHksIG9yIHNlbmRyZWN2CiAgICAgKiBvZmZlclRvUmVjZWl2ZVZpZGVvIGZhbHNlIHNlbmRvbmx5LCBvciBzZW5kcmVjdgogICAgICoKICAgICAqLwogICAgb2ZmZXJPcHRpb25zOiB7CiAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogdHJ1ZSwKICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlCiAgICAgICAgLy92b2ljZUFjdGl2aXR5RGV0ZWN0aW9uOiBmYWxzZQogICAgfSwKCiAgICBvcHRpbWFsVmlkZW9Db2RlY3M6IG51bGwsCiAgICBvcHRpbWFsQXVkaW9Db2RlY3M6IG51bGwsCgogICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5fcnRjSWQgfHwgKHNlbGYuX3J0Y0lkID0gIlJUQyIgKyBfX3J0Y19nbG9iYWxDb3VudCsrKTsKICAgICAgICBzZWxmLl9faWQgPSAiX2lfIiArIF9fcnRjX2dsb2JhbENvdW50Kys7CgogICAgICAgIHNlbGYuX19zZXRSZW1vdGVTRFAgPSBmYWxzZTsKICAgICAgICBzZWxmLl9fdG1wUmVtb3RlQ2FuZHMgPSBbXTsKICAgICAgICBzZWxmLl9fdG1wTG9jYWxDYW5kcyA9IFtdOwogICAgICAgIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uID0gbnVsbDsKCiAgICAgICAgc2VsZi5jY3R4ID0gc2VsZi5fX2lkOwoKICAgICAgICBfbG9nZ2VyLmluZm8oIldlYnJ0YyBjcmVhdGVkLiIsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQpOwogICAgfSwKCiAgICBnZXRSdGNJZDogZnVuY3Rpb24gZ2V0UnRjSWQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3J0Y0lkOwogICAgfSwKCiAgICBpY2VTdGF0ZTogZnVuY3Rpb24gaWNlU3RhdGUoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHJldHVybiBzZWxmLl9ydGNQZWVyQ29ubmVjdGlvbi5pY2VDb25uZWN0aW9uU3RhdGU7CiAgICB9LAoKICAgIHNldFN1YkFyZ3M6IGZ1bmN0aW9uIHNldFN1YkFyZ3Moc3ViQXJncykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBzZWxmLnN1YkFyZ3MgPSBzdWJBcmdzOwogICAgfSwKCiAgICBnZXRSZWNlaXZlcnNPZlBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbiBnZXRSZWNlaXZlcnNPZlBlZXJDb25uZWN0aW9uKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFzZWxmLl9ydGNQZWVyQ29ubmVjdGlvbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoc2VsZi5fcnRjUGVlckNvbm5lY3Rpb24uaWNlQ29ubmVjdGlvblN0YXRlID09ICdjbG9zZWQnKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzZWxmLl9ydGNQZWVyQ29ubmVjdGlvbi5nZXRSZWNlaXZlcnMoKTsKICAgIH0sCgogICAgdXBkYXRlUmVtb3RlQnlTdWJBcmdzOiBmdW5jdGlvbiB1cGRhdGVSZW1vdGVCeVN1YkFyZ3MoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYuc3ViQXJncykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICghc2VsZi5fcmVtb3RlU3RyZWFtKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGVtZWRpYS5lbmFibGVWaWRlb1RyYWNrcyhzZWxmLl9yZW1vdGVTdHJlYW0sICEoc2VsZi5zdWJBcmdzICYmIHNlbGYuc3ViQXJncy5zdWJTVmlkZW8gPT09IGZhbHNlKSk7CiAgICAgICAgZW1lZGlhLmVuYWJsZUF1ZGlvVHJhY2tzKHNlbGYuX3JlbW90ZVN0cmVhbSwgIShzZWxmLnN1YkFyZ3MgJiYgc2VsZi5zdWJBcmdzLnN1YlNBdWRpbyA9PT0gZmFsc2UpKTsKCiAgICAgICAgX2xvZ2dlci5pbmZvKCJlbmFibGUgdHJhY2tzIHJlbW90ZSBzdHJlYW0iLCBzZWxmLl9yZW1vdGVTdHJlYW0sIHNlbGYuc3ViQXJncywgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOwogICAgfSwKCiAgICBjcmVhdGVSdGNQZWVyQ29ubmVjdGlvbjogZnVuY3Rpb24gY3JlYXRlUnRjUGVlckNvbm5lY3Rpb24oaWNlU2VydmVyQ29uZmlnKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIF9sb2dnZXIuZGVidWcoJ2JlZ2luIGNyZWF0ZSBwZWVyIGNvbm5lY3Rpb24gLi4uLi4uJywgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOwoKICAgICAgICBpY2VTZXJ2ZXJDb25maWcgfHwgKGljZVNlcnZlckNvbmZpZyA9IHNlbGYuaWNlU2VydmVyQ29uZmlnKTsKCiAgICAgICAgaWYgKGljZVNlcnZlckNvbmZpZyB8fCBlbWVkaWEuaXNFZGdlKSB7CiAgICAgICAgICAgIC8vcmVkdWNlIGljZWNhbmRpZGF0ZSBudW1iZXI6YWRkIGRlZmF1bHQgdmFsdWUKICAgICAgICAgICAgaWNlU2VydmVyQ29uZmlnIHx8IChpY2VTZXJ2ZXJDb25maWcgPSB7fSk7CiAgICAgICAgICAgICFpY2VTZXJ2ZXJDb25maWcuaWNlU2VydmVycyAmJiAoaWNlU2VydmVyQ29uZmlnLmljZVNlcnZlcnMgPSBbXSk7CgogICAgICAgICAgICBpY2VTZXJ2ZXJDb25maWcucnRjcE11eFBvbGljeSA9ICJyZXF1aXJlIjsKICAgICAgICAgICAgaWNlU2VydmVyQ29uZmlnLmJ1bmRsZVBvbGljeSA9ICJtYXgtYnVuZGxlIjsKCiAgICAgICAgICAgIC8vaWNlU2VydmVyQ29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSA9ICdyZWxheSc7CiAgICAgICAgICAgIGlmIChpY2VTZXJ2ZXJDb25maWcucmVsYXlPbmx5KSB7CiAgICAgICAgICAgICAgICBpY2VTZXJ2ZXJDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5ID0gJ3JlbGF5JzsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGljZVNlcnZlckNvbmZpZyA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICAvLyBpY2VTZXJ2ZXJDb25maWcgPSB7CiAgICAgICAgLy8gICAgIGNhcEF1ZGlvOiB0cnVlLAogICAgICAgIC8vICAgICBjYXBWaWRlbzogdHJ1ZSwKICAgICAgICAvLyAgICAgaWNlU2VydmVyczpbewogICAgICAgIC8vICAgICAgICAgY3JlZGVudGlhbDogIitGMzRjR29XZU1td2ErWHR2aWJNN2RyNENjYz0iLAogICAgICAgIC8vICAgICAgICAgdXJsOiAidHVybjoxMDEuMjAwLjc2LjkzOjM0NzgiLAogICAgICAgIC8vICAgICAgICAgdXNlcm5hbWU6ICJlYXNlbW9iLWRlbW8jY2hhdGRlbW91aV95c3MwMDBAZWFzZW1vYi5jb20vd2ViaW1fZGV2aWNlX3V1aWQlMTc5MzEwNDIwMTA0ODQ3MzYwOjE1MDY0MzE3MzUiCiAgICAgICAgLy8gICAgIH1dLAogICAgICAgIC8vICAgICByZWN2QXVkaW86IHRydWUsCiAgICAgICAgLy8gICAgIHJlY3ZWaWRlbzogdHJ1ZSwKICAgICAgICAvLyAgICAgcmVsYXlPbmx5OiBmYWxzZSwKICAgICAgICAvLyB9OwogICAgICAgIF9sb2dnZXIuaW5mbygnY3JlYXRlIHBjLCBzZXQgY29uZmlnOicsIGljZVNlcnZlckNvbmZpZywgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOwoKICAgICAgICB2YXIgcnRjUGVlckNvbm5lY3Rpb24gPSBzZWxmLl9ydGNQZWVyQ29ubmVjdGlvbiA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbihpY2VTZXJ2ZXJDb25maWcpOwogICAgICAgIHJ0Y1BlZXJDb25uZWN0aW9uLl9fcGVlcklkID0gc2VsZi5fcnRjSWQ7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnY3JlYXRlZCBsb2NhbCBwZWVyIGNvbm5lY3Rpb24gb2JqZWN0JywgcnRjUGVlckNvbm5lY3Rpb24sIHNlbGYuX3J0Y0lkKTsKCiAgICAgICAgcnRjUGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IGV2ZW50LmNhbmRpZGF0ZTsKCiAgICAgICAgICAgIC8vcmVkdWNlIGljZWNhbmRpZGF0ZSBudW1iZXI6IGRvbid0IGRlYWwgd2l0aCB0Y3AsIHVkcCBvbmx5CiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09ICJpY2VjYW5kaWRhdGUiICYmICghY2FuZGlkYXRlIHx8IHR5cGVvZiBjYW5kaWRhdGUucHJvdG9jb2wgPT09ICdzdHJpbmcnICYmIGNhbmRpZGF0ZS5wcm90b2NvbC50b0xvd2VyQ2FzZSgpID09PSAndGNwJyB8fCAvIFRDUCAvLnRlc3QoY2FuZGlkYXRlLmNhbmRpZGF0ZSkpKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJPbiBJQ0UgY2FuZGlkYXRlOiBkcm9wIiwgY2FuZGlkYXRlLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghY2FuZGlkYXRlLmNhbmRpZGF0ZSkgewogICAgICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiTm90IGZvdW5kIGNhbmRpZGF0ZS4gY2FuZGlkYXRlIGlzIGVycm9yIik7CiAgICAgICAgICAgICAgICB0aHJvdyAiTm90IGZvdW5kIGNhbmRpZGF0ZS4gY2FuZGlkYXRlIGlzIGVycm9yLCI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhbmRpZGF0ZS5jY3R4ID0gc2VsZi5jY3R4OwogICAgICAgICAgICBpZiAoIXNlbGYuX19zZXRSZW1vdGVTRFApIHsKICAgICAgICAgICAgICAgIChzZWxmLl9fdG1wTG9jYWxDYW5kcyB8fCAoc2VsZi5fX3RtcExvY2FsQ2FuZHMgPSB7fSkpLnB1c2goY2FuZGlkYXRlKTsKICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoJ09uIElDRSBjYW5kaWRhdGUgb2s6IGJ1dCB0bXAgYnVmZmVyIGNhdXNlZCBieSBub3Qgc2V0IHJlbW90ZSBzZHA6ICcsIGNhbmRpZGF0ZSwgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygnT24gSUNFIGNhbmRpZGF0ZSBvazogJywgY2FuZGlkYXRlLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2VsZi5fb25JY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTsKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBzdGF0ZUNoYW5nZShldmVudCkgewogICAgICAgICAgICBfbG9nZ2VyLmluZm8oInN0YXRlczogY29ubiIsIHJ0Y1BlZXJDb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZSB8fCBydGNQZWVyQ29ubmVjdGlvbi5pY2VDb25uZWN0aW9uU3RhdGUsICIsIGljZSIsIHJ0Y1BlZXJDb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZSwgIkAiLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uSWNlU3RhdGVDaGFuZ2UocnRjUGVlckNvbm5lY3Rpb24uaWNlQ29ubmVjdGlvblN0YXRlKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHt9CiAgICAgICAgfQoKICAgICAgICBydGNQZWVyQ29ubmVjdGlvbi5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IHN0YXRlQ2hhbmdlLmJpbmQoc2VsZik7CiAgICAgICAgcnRjUGVlckNvbm5lY3Rpb24ub25pY2VzdGF0ZWNoYW5nZSA9IHN0YXRlQ2hhbmdlLmJpbmQoc2VsZik7CiAgICAgICAgcnRjUGVlckNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBzdGF0ZUNoYW5nZS5iaW5kKHNlbGYpOwogICAgICAgIHJ0Y1BlZXJDb25uZWN0aW9uLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJzdGF0ZXM6IHNpZ25hbGluZyIsIHJ0Y1BlZXJDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlLCAiQCIsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQsIHNlbGYuY2xvc2VkKTsKICAgICAgICB9OwoKICAgICAgICBpZiAocnRjUGVlckNvbm5lY3Rpb24ub250cmFjayA9PT0gbnVsbCkgewogICAgICAgICAgICBzZWxmLl9vblRyYWNrICYmIChydGNQZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICBzZWxmLl9vblRyYWNrKGV2ZW50KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBydGNQZWVyQ29ubmVjdGlvbi5vbmFkZHN0cmVhbSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBzZWxmLl9vbkdvdFJlbW90ZVN0cmVhbShldmVudCk7CiAgICAgICAgfTsKICAgIH0sCgogICAgYWRkVHJhY2s6IGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrcywgc3RyZWFtKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB0cmFja3MuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgc2VsZi5fcnRjUGVlckNvbm5lY3Rpb24uYWRkVHJhY2sodHJhY2ssIHN0cmVhbSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgc2V0TG9jYWxTdHJlYW06IGZ1bmN0aW9uIHNldExvY2FsU3RyZWFtKGxvY2FsU3RyZWFtKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLl9sb2NhbFN0cmVhbSA9IGxvY2FsU3RyZWFtOwoKICAgICAgICBpZiAoc2VsZi5fcnRjUGVlckNvbm5lY3Rpb24uYWRkVHJhY2spIHsKICAgICAgICAgICAgbG9jYWxTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uLmFkZFRyYWNrKHRyYWNrLCBsb2NhbFN0cmVhbSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShsb2NhbFN0cmVhbSk7CiAgICAgICAgfQogICAgICAgIF9sb2dnZXIuZGVidWcoJ0FkZGVkIGxvY2FsIHN0cmVhbSB0byBSdGNQZWVyQ29ubmVjdGlvbicsIGxvY2FsU3RyZWFtLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCB0aGlzLmNsb3NlZCk7CiAgICB9LAoKICAgIHJlbW92ZVN0cmVhbTogZnVuY3Rpb24gcmVtb3ZlU3RyZWFtKG1lZGlhU3RyZWFtKSB7CiAgICAgICAgdGhpcy5fcnRjUGVlckNvbm5lY3Rpb24ucmVtb3ZlU3RyZWFtKG1lZGlhU3RyZWFtKTsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCdSZW1vdmUgc3RyZWFtIGZyb20gUnRjUGVlckNvbm5lY3Rpb24nLCBtZWRpYVN0cmVhbSwgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgdGhpcy5jbG9zZWQpOwogICAgfSwKCiAgICBnZXRMb2NhbFN0cmVhbTogZnVuY3Rpb24gZ2V0TG9jYWxTdHJlYW0oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsU3RyZWFtOwogICAgfSwKICAgIGdldFJlbW90ZVN0cmVhbTogZnVuY3Rpb24gZ2V0UmVtb3RlU3RyZWFtKCkgewogICAgICAgIHJldHVybiB0aGlzLl9yZW1vdGVTdHJlYW07CiAgICB9LAoKICAgIGNyZWF0ZU9mZmVyOiBmdW5jdGlvbiBjcmVhdGVPZmZlcihvbkNyZWF0ZU9mZmVyU3VjY2Vzcywgb25DcmVhdGVPZmZlckVycm9yKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBfbG9nZ2VyLmRlYnVnKCdjcmVhdGVPZmZlciBzdGFydC4uLicsIHNlbGYub2ZmZXJPcHRpb25zKTsKCiAgICAgICAgdmFyIG9mZmVyT3B0aW9ucyA9IF91dGlsLmV4dGVuZCh7fSwgc2VsZi5vZmZlck9wdGlvbnMpOwoKICAgICAgICAvL29mZmVyVG9SZWNlaXZlQXVkaW8gPSBmYWxzZeaXtu+8jGNocm9tZeayoeaciXZpZGVv5q6177ybc2FmYXJp5Y206L+Z5Liq5Z2X44CC6ZyA6KaB5bCGc2VuZHJlY3bmlLnkuLpzZW5kb25seQogICAgICAgIC8v55Sx5LqO5omL5py65rKh5pyJ6KeG6aKR5Y+R5biD5pe277yMc2Rw5Lit5pyJdmlkZW/lrZfmrrXvvIzogIwgd2Vi5Lulb2ZmZXJUb1JlY2VpdmVWaWRlbyA9IGZhbHNl5Y676K6i6ZiF5pe277yM5a+86Ie06K6i6ZiF5rWB5Lit5rKh5pyJdmlkZW/lnZfvvIzkvJrlvJXlj5Hph43ljY/llYbjgILov5vogIzlr7zoh7Qg5aeL57uI5peg5rOV55yL5Yiw5a+55pa56KeG6aKRCiAgICAgICAgLy/miYDku6Ug6K6i6ZiF5rWB5pe2IOaXoOiuum9mZmVyVG9SZWNlaXZlVmlkZW8gPSBmYWxzZe+8jOmDveeUn+aIkG9mZmVyIHNkcO+8m+WFtuS4remDveaciXZpZGVv5Z2X44CC5Y2zIG9mZmVyVG9SZWNlaXZlVmlkZW8gPSB0cnVl77yb5L2G6KaB5bCGc2Rw5L+u5pS55Li6cmVjdm9ubHkKICAgICAgICBpZiAoc2VsZi5zdWJBcmdzKSB7CiAgICAgICAgICAgIG9mZmVyT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlQXVkaW86IHRydWUsCiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc2VsZi5fcnRjUGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIob2ZmZXJPcHRpb25zKS50aGVuKGZ1bmN0aW9uIChkZXNjKSB7CiAgICAgICAgICAgIHNlbGYub2ZmZXJEZXNjcmlwdGlvbiA9IGRlc2M7CgogICAgICAgICAgICBpZiAoZW1lZGlhLmlzRWRnZSkgewogICAgICAgICAgICAgICAgZGVzYy5zZHAgPSBkZXNjLnNkcC5yZXBsYWNlKC9wcm9maWxlLWxldmVsLWlkPVteO10rLywgInByb2ZpbGUtbGV2ZWwtaWQ9NDJlMDFmIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGVtZWRpYS5pc0ZpcmVmb3gpIHsKICAgICAgICAgICAgICAgIC8v6ZyA6KaB5Lqk5o2iIGNhbmQgYW5zd2VyCiAgICAgICAgICAgICAgICBzZWxmLmZpcmVGb3hPZmZlclZpZGVvUHJlQXVkaW8gPSBzZWxmLl9fb2ZmZXJWaWRlb1ByZUF1ZGlvID0gU0RQU2VjdGlvbi5pc1ZpZGVvUHJlQXVkaW8oZGVzYy5zZHApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2VsZi5fX29mZmVyVmlkZW9QcmVBdWRpbyA9IFNEUFNlY3Rpb24uaXNWaWRlb1ByZUF1ZGlvKGRlc2Muc2RwKTsgLy8gdmlkZW/lnKhhdWRpb+WJjeaXtu+8jHhzd2l0Y2jnmoRhbnN3ZXLmmK8gYXVkaW/lnKjliY3jgIJzZXQgYW5zd2Vy5pe26ZyA6KaBIOWPmOaNomFuc3dlcgogICAgICAgICAgICB9CgogICAgICAgICAgICBkZXNjLnNkcCA9IGRlc2Muc2RwLnJlcGxhY2UoL209dmlkZW8gMC9nLCAibT12aWRlbyA5Iik7CiAgICAgICAgICAgIF9sb2dnZXIud2Fybigic2V0TG9jYWxEZXNjcmlwdGlvbi4gbW9kaWZ5IG9mZmVyLiBpZiAnbT12aWRlbyAwJyAtPiAnbT12aWRlbyA5JzsgaWYgSDI2NCwgJ3Byb2ZpbGUtbGV2ZWwtaWQ9NDJlMDFmJyIsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQpOwoKICAgICAgICAgICAgdmFyIHVwZGF0ZVZDb2RlczsKICAgICAgICAgICAgaWYgKCh1cGRhdGVWQ29kZXMgPSBzZWxmLm9wdGltYWxWaWRlb0NvZGVjcyAmJiAodHlwZW9mIHNlbGYub3B0aW1hbFZpZGVvQ29kZWNzID09PSAic3RyaW5nIiB8fCBzZWxmLm9wdGltYWxWaWRlb0NvZGVjcy5sZW5ndGggPiAwKSkgfHwgc2VsZi5vZmZlck9wdGlvbnMgJiYgKHNlbGYub2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IGZhbHNlIHx8IHNlbGYub2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IGZhbHNlKSkgewogICAgICAgICAgICAgICAgdmFyIHNkcFNlY3Rpb24gPSBuZXcgU0RQU2VjdGlvbihkZXNjLnNkcCwgc2VsZik7CiAgICAgICAgICAgICAgICB1cGRhdGVWQ29kZXMgJiYgc2RwU2VjdGlvbi51cGRhdGVWQ29kZXMoc2VsZi5vcHRpbWFsVmlkZW9Db2RlY3MpOwoKICAgICAgICAgICAgICAgIC8vIGlmKCFlbWVkaWEuaXNTYWZhcmkgJiYgc2VsZi5zdWJBcmdzKXsgLy/orqLpmIXmtYEKICAgICAgICAgICAgICAgIC8vIH1lbHNlIGlmKGVtZWRpYS5pc1NhZmFyaSl7CiAgICAgICAgICAgICAgICAvLyAgICAgc2VsZi5vZmZlck9wdGlvbnMgJiYgc2VsZi5vZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbyA9PT0gZmFsc2UKICAgICAgICAgICAgICAgIC8vICAgICAgICAgJiYgc2RwU2VjdGlvbi51cGRhdGVWaWRlb1NlY3Rpb24oL2E9c2VuZHJlY3Z8YT1yZWN2b25seS9nLCAiYT1zZW5kb25seSIpOwogICAgICAgICAgICAgICAgLy8gICAgIHNlbGYub2ZmZXJPcHRpb25zICYmIHNlbGYub2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IGZhbHNlCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICYmIHNkcFNlY3Rpb24udXBkYXRlQXVkaW9TZWN0aW9uKC9hPXNlbmRyZWN2fGE9cmVjdm9ubHkvZywgImE9c2VuZG9ubHkiKTsKICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIHNlbGYub2ZmZXJPcHRpb25zICYmIHNlbGYub2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IGZhbHNlICYmIHNkcFNlY3Rpb24udXBkYXRlVmlkZW9TZWN0aW9uKC9hPXNlbmRyZWN2fGE9cmVjdm9ubHkvZywgImE9c2VuZG9ubHkiKTsKICAgICAgICAgICAgICAgIHNlbGYub2ZmZXJPcHRpb25zICYmIHNlbGYub2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IGZhbHNlICYmIHNkcFNlY3Rpb24udXBkYXRlQXVkaW9TZWN0aW9uKC9hPXNlbmRyZWN2fGE9cmVjdm9ubHkvZywgImE9c2VuZG9ubHkiKTsKCiAgICAgICAgICAgICAgICBkZXNjLnNkcCA9IHNkcFNlY3Rpb24uZ2V0VXBkYXRlZFNEUCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCdzZXRMb2NhbERlc2NyaXB0aW9uIHN0YXJ0JywgZGVzYywgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQsIHNlbGYub3B0aW1hbFZpZGVvQ29kZWNzKTsKICAgICAgICAgICAgc2VsZi5fcnRjUGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihkZXNjKS50aGVuKHNlbGYuX29uU2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb25TdWNjZXNzLmJpbmQoc2VsZiksIHNlbGYuX29uU2V0U2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3IuYmluZChzZWxmKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBkZXNjLmNjdHggPSBzZWxmLmNjdHg7CiAgICAgICAgICAgICAgICAob25DcmVhdGVPZmZlclN1Y2Nlc3MgfHwgc2VsZi5vbkNyZWF0ZU9mZmVyU3VjY2Vzcy5iaW5kKHNlbGYpKShkZXNjKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgb25DcmVhdGVPZmZlckVycm9yIHx8IHNlbGYuX29uQ3JlYXRlU2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3IuYmluZChzZWxmKSk7CiAgICB9LAoKICAgIGNyZWF0ZVBSQW5zd2VyOiBmdW5jdGlvbiBjcmVhdGVQUkFuc3dlcihvbkNyZWF0ZVBSQW5zd2VyU3VjY2Vzcywgb25DcmVhdGVQUkFuc3dlckVycm9yKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBfbG9nZ2VyLmluZm8oJyBjcmVhdGVQUkFuc3dlciBzdGFydCcsIHNlbGYuY2xvc2VkLCBzZWxmLnNkcENvbnN0cmFpbnRzKTsKICAgICAgICAvLyBTaW5jZSB0aGUgJ3JlbW90ZScgc2lkZSBoYXMgbm8gbWVkaWEgc3RyZWFtIHdlIG5lZWQKICAgICAgICAvLyB0byBwYXNzIGluIHRoZSByaWdodCBjb25zdHJhaW50cyBpbiBvcmRlciBmb3IgaXQgdG8KICAgICAgICAvLyBhY2NlcHQgdGhlIGluY29taW5nIG9mZmVyIG9mIGF1ZGlvIGFuZCB2aWRlby4KICAgICAgICByZXR1cm4gc2VsZi5fcnRjUGVlckNvbm5lY3Rpb24uY3JlYXRlQW5zd2VyKHNlbGYuc2RwQ29uc3RyYWludHMpLnRoZW4oZnVuY3Rpb24gKGRlc2MpIHsKICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygnX19fX19fX19fX19fX1BSQW5zd2VyICcsIGRlc2Muc2RwLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7IC8vX2xvZ2dlci5kZWJ1ZygnZnJvbSA6XG4nICsgZGVzYy5zZHApOwoKICAgICAgICAgICAgZGVzYy50eXBlID0gInByYW5zd2VyIjsKICAgICAgICAgICAgZGVzYy5zZHAgPSBkZXNjLnNkcC5yZXBsYWNlKC9hPXJlY3Zvbmx5L2csICdhPWluYWN0aXZlJyk7CgogICAgICAgICAgICBzZWxmLl9fcHJBbnN3ZXJEZXNjcmlwdGlvbiA9IGRlc2M7CgogICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCdpbmFjdGl2ZSBQUkFuc3dlciAnLCBkZXNjLnNkcCwgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOyAvL19sb2dnZXIuZGVidWcoJ2Zyb20gOlxuJyArIGRlc2Muc2RwKTsKICAgICAgICAgICAgX2xvZ2dlci5kZWJ1Zygnc2V0TG9jYWxEZXNjcmlwdGlvbiBzdGFydCcsIGRlc2MsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQsIHNlbGYuY2xvc2VkKTsKCiAgICAgICAgICAgIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZGVzYykudGhlbihzZWxmLl9vblNldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uU3VjY2Vzcy5iaW5kKHNlbGYpLCBzZWxmLl9vblNldFNlc3Npb25EZXNjcmlwdGlvbkVycm9yLmJpbmQoc2VsZikpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHNkcFNlY3Rpb24gPSBuZXcgU0RQU2VjdGlvbihkZXNjLnNkcCk7CiAgICAgICAgICAgICAgICBzZHBTZWN0aW9uLnVwZGF0ZUhlYWRlck1zaWRTZW1hbnRpYygiTVNfMDAwMCIpOwogICAgICAgICAgICAgICAgc2RwU2VjdGlvbi51cGRhdGVBdWRpb1NTUkNTZWN0aW9uKDEwMDAsICJDSFJPTUUwMDAwIiwgIk1TXzAwMDAiLCAiTEFCRUxfQVVESU9fMTAwMCIpOwogICAgICAgICAgICAgICAgc2RwU2VjdGlvbi51cGRhdGVWaWRlb1NTUkNTZWN0aW9uKDIwMDAsICJDSFJPTUUwMDAwIiwgIk1TXzAwMDAiLCAiTEFCRUxfVklERU9fMjAwMCIpOwoKICAgICAgICAgICAgICAgIGRlc2Muc2RwID0gc2RwU2VjdGlvbi5nZXRVcGRhdGVkU0RQKCk7CgogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygnU2VuZCBQUkFuc3dlciAnLCBkZXNjLnNkcCwgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOyAvL19sb2dnZXIuZGVidWcoJ2Zyb20gOlxuJyArIGRlc2Muc2RwKTsKCiAgICAgICAgICAgICAgICBzZWxmLmNjdHggJiYgKGRlc2MuY2N0eCA9IHNlbGYuY2N0eCk7CiAgICAgICAgICAgICAgICAob25DcmVhdGVQUkFuc3dlclN1Y2Nlc3MgfHwgc2VsZi5vbkNyZWF0ZVBSQW5zd2VyU3VjY2Vzcy5iaW5kKHNlbGYpKShkZXNjKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgb25DcmVhdGVQUkFuc3dlckVycm9yIHx8IHNlbGYuX29uQ3JlYXRlU2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3IuYmluZChzZWxmKSk7CiAgICB9LAoKICAgIGNyZWF0ZUFuc3dlcjogZnVuY3Rpb24gY3JlYXRlQW5zd2VyKG9uQ3JlYXRlQW5zd2VyU3VjY2Vzcywgb25DcmVhdGVBbnN3ZXJFcnJvcikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgX2xvZ2dlci5pbmZvKCdjcmVhdGVBbnN3ZXIgc3RhcnQnLCBzZWxmLmNsb3NlZCwgc2VsZi5zZHBDb25zdHJhaW50cyk7CiAgICAgICAgLy8gU2luY2UgdGhlICdyZW1vdGUnIHNpZGUgaGFzIG5vIG1lZGlhIHN0cmVhbSB3ZSBuZWVkCiAgICAgICAgLy8gdG8gcGFzcyBpbiB0aGUgcmlnaHQgY29uc3RyYWludHMgaW4gb3JkZXIgZm9yIGl0IHRvCiAgICAgICAgLy8gYWNjZXB0IHRoZSBpbmNvbWluZyBvZmZlciBvZiBhdWRpbyBhbmQgdmlkZW8uCiAgICAgICAgcmV0dXJuIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcihzZWxmLnNkcENvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uIChkZXNjKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoJ19fX19fX19fX19fX19fX19fX19fX0Fuc3dlciAnLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7IC8vX2xvZ2dlci5kZWJ1ZygnZnJvbSA6XG4nICsgZGVzYy5zZHApOwoKICAgICAgICAgICAgZGVzYy50eXBlID0gJ2Fuc3dlcic7CgogICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTRFAoKSB7CiAgICAgICAgICAgICAgICB2YXIgc2RwU2VjdGlvbiA9IG5ldyBTRFBTZWN0aW9uKGRlc2Muc2RwKTsKICAgICAgICAgICAgICAgIHZhciBtcyA9IHNkcFNlY3Rpb24ucGFyc2VNc2lkU2VtYW50aWMoc2RwU2VjdGlvbi5oZWFkZXJTZWN0aW9uKTsKICAgICAgICAgICAgICAgIGlmICghbXMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKG1zLldNUyA9PSAnKicpIHsKICAgICAgICAgICAgICAgICAgICBzZHBTZWN0aW9uLnVwZGF0ZUhlYWRlck1zaWRTZW1hbnRpYyhtcy5XTVMgPSAiTVNfMDAwMCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGF1ZGlvU1NSQyA9IHNkcFNlY3Rpb24ucGFyc2VTU1JDKHNkcFNlY3Rpb24uYXVkaW9TZWN0aW9uKTsKICAgICAgICAgICAgICAgIHZhciB2aWRlb1NTUkMgPSBzZHBTZWN0aW9uLnBhcnNlU1NSQyhzZHBTZWN0aW9uLnZpZGVvU2VjdGlvbik7CgogICAgICAgICAgICAgICAgYXVkaW9TU1JDICYmIHNkcFNlY3Rpb24udXBkYXRlQXVkaW9TU1JDU2VjdGlvbigxMDAwLCAiQ0hST01FMDAwMCIsIG1zLldNUywgYXVkaW9TU1JDLmxhYmVsIHx8ICJMQUJFTF9BVURJT18xMDAwIik7CiAgICAgICAgICAgICAgICBpZiAodmlkZW9TU1JDKSB7CiAgICAgICAgICAgICAgICAgICAgc2RwU2VjdGlvbi51cGRhdGVWaWRlb1NTUkNTZWN0aW9uKDIwMDAsICJDSFJPTUUwMDAwIiwgbXMuV01TLCB2aWRlb1NTUkMubGFiZWwgfHwgIkxBQkVMX1ZJREVPXzIwMDAiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIG1zbGFiZWwgY25hbWUKCiAgICAgICAgICAgICAgICBkZXNjLnNkcCA9IHNkcFNlY3Rpb24uZ2V0VXBkYXRlZFNEUCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZW1lZGlhLnN1cHBvcnRQUkFuc3dlcikgewogICAgICAgICAgICAgICAgdXBkYXRlU0RQKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNlbGYuX19hbnN3ZXJEZXNjcmlwdGlvbiA9IGRlc2M7CgogICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCdBbnN3ZXIgJywgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOyAvL19sb2dnZXIuZGVidWcoJ2Zyb20gOlxuJyArIGRlc2Muc2RwKTsKICAgICAgICAgICAgX2xvZ2dlci5kZWJ1Zygnc2V0TG9jYWxEZXNjcmlwdGlvbiBzdGFydCcsIGRlc2MsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQsIHNlbGYuY2xvc2VkKTsKCiAgICAgICAgICAgIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZGVzYykudGhlbihzZWxmLl9vblNldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uU3VjY2Vzcy5iaW5kKHNlbGYpLCBzZWxmLl9vblNldFNlc3Npb25EZXNjcmlwdGlvbkVycm9yLmJpbmQoc2VsZikpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKGVtZWRpYS5zdXBwb3J0UFJBbnN3ZXIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2RwU2VjdGlvbiA9IG5ldyBTRFBTZWN0aW9uKGRlc2Muc2RwKTsKCiAgICAgICAgICAgICAgICAgICAgc2RwU2VjdGlvbi51cGRhdGVIZWFkZXJNc2lkU2VtYW50aWMoIk1TXzAwMDAiKTsKICAgICAgICAgICAgICAgICAgICBzZHBTZWN0aW9uLnVwZGF0ZUF1ZGlvU1NSQ1NlY3Rpb24oMTAwMCwgIkNIUk9NRTAwMDAiLCAiTVNfMDAwMCIsICJMQUJFTF9BVURJT18xMDAwIik7CiAgICAgICAgICAgICAgICAgICAgc2RwU2VjdGlvbi51cGRhdGVWaWRlb1NTUkNTZWN0aW9uKDIwMDAsICJDSFJPTUUwMDAwIiwgIk1TXzAwMDAiLCAiTEFCRUxfVklERU9fMjAwMCIpOwoKICAgICAgICAgICAgICAgICAgICBkZXNjLnNkcCA9IHNkcFNlY3Rpb24uZ2V0VXBkYXRlZFNEUCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoJ1NlbmQgQW5zd2VyICcsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQsIHNlbGYuY2xvc2VkKTsgLy9fbG9nZ2VyLmRlYnVnKCdmcm9tIDpcbicgKyBkZXNjLnNkcCk7CgogICAgICAgICAgICAgICAgc2VsZi5jY3R4ICYmIChkZXNjLmNjdHggPSBzZWxmLmNjdHgpOwogICAgICAgICAgICAgICAgKG9uQ3JlYXRlQW5zd2VyU3VjY2VzcyB8fCBzZWxmLm9uQ3JlYXRlQW5zd2VyU3VjY2Vzcy5iaW5kKHNlbGYpKShkZXNjKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgb25DcmVhdGVBbnN3ZXJFcnJvciB8fCBzZWxmLl9vbkNyZWF0ZVNlc3Npb25EZXNjcmlwdGlvbkVycm9yLmJpbmQoc2VsZikpOwogICAgfSwKCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UocmVtYWluTG9jYWxTdHJlYW0sIG9ubHlQZWVyQ29ubmVjdGlvbkNsb3NlZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBfbG9nZ2VyLndhcm4oIndlYnJ0YyBjbG9zaW5nIiwgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOwoKICAgICAgICBpZiAoc2VsZi5jbG9zZWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgb25seVBlZXJDb25uZWN0aW9uQ2xvc2VkID0gb25seVBlZXJDb25uZWN0aW9uQ2xvc2VkID09PSB0cnVlOwoKICAgICAgICBzZWxmLmNsb3NlZCA9IHRydWU7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uICYmIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uLmNsb3NlKCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oZSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKHNlbGYuX2xvY2FsU3RyZWFtICYmIHJlbWFpbkxvY2FsU3RyZWFtID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgLy9sb2NhbHN0cmVhbeWtmOWcqO+8jOS4jeS/neeVmWxvY2Fsc3RyZWFtCiAgICAgICAgICAgICAgICBlbWVkaWEuc3RvcFRyYWNrcyhzZWxmLl9sb2NhbFN0cmVhbSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzZWxmLl9yZW1vdGVTdHJlYW0pIHsKICAgICAgICAgICAgICAgIGVtZWRpYS5zdG9wVHJhY2tzKHNlbGYuX3JlbW90ZVN0cmVhbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2VsZi5fcmVtb3RlU3RyZWFtID0gbnVsbDsKCiAgICAgICAgICAgIGlmICghb25seVBlZXJDb25uZWN0aW9uQ2xvc2VkKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uQ2xvc2UgJiYgc2VsZi5vbkNsb3NlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9sb2dnZXIud2Fybigid2VicnRjIGNsb3NlZC4gY2xvc2VkOiIsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQsIHNlbGYuY2xvc2VkKTsKICAgICAgICB9CiAgICB9LAoKICAgIGFkZEljZUNhbmRpZGF0ZTogZnVuY3Rpb24gYWRkSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFzZWxmLl9ydGNQZWVyQ29ubmVjdGlvbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBfbG9nZ2VyLmRlYnVnKCdBZGQgSUNFIGNhbmRpZGF0ZTogJywgY2FuZGlkYXRlLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7CgogICAgICAgIHZhciBfY2FuZHMgPSBfdXRpbC5pc0FycmF5KGNhbmRpZGF0ZSkgPyBjYW5kaWRhdGUgOiBbXTsKICAgICAgICAhX3V0aWwuaXNBcnJheShjYW5kaWRhdGUpICYmIF9jYW5kcy5wdXNoKGNhbmRpZGF0ZSk7CgogICAgICAgIGlmICghc2VsZi5fX3NldFJlbW90ZVNEUCkgewogICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShzZWxmLl9fdG1wUmVtb3RlQ2FuZHMgfHwgKHNlbGYuX190bXBSZW1vdGVDYW5kcyA9IHt9KSwgX2NhbmRzKTsKCiAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoJ0FkZCBJQ0UgY2FuZGlkYXRlIGJ1dCB0bXAgYnVmZmVyIGNhdXNlZCBieSBub3Qgc2V0IHJlbW90ZSBzZHA6ICcsIGNhbmRpZGF0ZSwgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9jYW5kcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjYW5kaWRhdGUgPSBfY2FuZHNbaV07CgogICAgICAgICAgICBpZiAoY2FuZGlkYXRlLmNjdHggJiYgY2FuZGlkYXRlLmNjdHggIT0gc2VsZi5jY3R4KSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oJ2FkZEljZUNhbmRpZGF0ZSBmYWlsIGRyb3AuIGNjdHggbm90IGVxdWFsLiAnLCBjYW5kaWRhdGUsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQsIHNlbGYuY2xvc2VkKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL2NhbmRpZGF0ZS5jYW5kaWRhdGUgPSBjYW5kaWRhdGUuY2FuZGlkYXRlLnJlcGxhY2UoIjE3Mi4xNy4yLjEzMCIsICIxMC4xMjEuNjMuMSIpOwogICAgICAgICAgICBpZiAoc2VsZi5maXJlRm94T2ZmZXJWaWRlb1ByZUF1ZGlvID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAvL2NhbmRpZGF0ZS5zZHBNaWQgPSAic2RwYXJ0YV8wIjsKICAgICAgICAgICAgICAgIHZhciBvbGRMaW5lSW5kZXggPSBjYW5kaWRhdGUuc2RwTUxpbmVJbmRleDsKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZS5zZHBNTGluZUluZGV4ID0gcGFyc2VJbnQoY2FuZGlkYXRlLnNkcE1pZC5yZXBsYWNlKC9bXjAtOV0qLywgJycpKTsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiRmlyZWZveCBzZHAgc2VjdGlvbiB2aWRlbyBwcmUgYXVkaW8sIHNkcCBtbGluZSBpbmRleCB1cGRhdGUgIiwgb2xkTGluZUluZGV4LCAiLT4iLCBjYW5kaWRhdGUuc2RwTUxpbmVJbmRleCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUuY2FuZGlkYXRlICYmIGNhbmRpZGF0ZS5jYW5kaWRhdGUgIT09ICIiKSB7CiAgICAgICAgICAgICAgICBzZWxmLl9ydGNQZWVyQ29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUobmV3IFJUQ0ljZUNhbmRpZGF0ZShjYW5kaWRhdGUpKS50aGVuKHNlbGYub25BZGRJY2VDYW5kaWRhdGVTdWNjZXNzLmJpbmQoc2VsZiksIHNlbGYuX29uQWRkSWNlQ2FuZGlkYXRlRXJyb3IuYmluZChzZWxmKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIkFkZCBJQ0UgY2FuZGlkYXRlIGZhaWwuIGRyb3AgaXQgIiwgY2FuZGlkYXRlLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAoKICAgIHNldFJlbW90ZURlc2NyaXB0aW9uOiBmdW5jdGlvbiBzZXRSZW1vdGVEZXNjcmlwdGlvbihkZXNjKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBfbG9nZ2VyLmRlYnVnKCdzZXRSZW1vdGVEZXNjcmlwdGlvbiBzdGFydC4gJywgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOwoKICAgICAgICAvLyDnlJ/miJBvZmZlcueahAogICAgICAgIC8vIOS8muiuruaooeW8j++8jOS5n+aYr+iuvue9rueahOaYryBwcmFuc3dlciDlkowgYW5zd2VyIOS8muacieacjeWKoeWZqOS8oOWbnuOAggogICAgICAgIC8vIHAycOaooeW8j+S4i+eahOS4u+WPq+OAguatpOaXtuiuvue9rueahOaYryBwcmFuc3dlciDlkowgYW5zd2Vy44CC6L+Z5Liq5bqU6K+l5pyJcDJw5qih5byP5LiL5Lyg5Zue44CC5Zug5q2k77yM6ZyA6KaB5aaC5p6c5pyJ55qE6K+d77yM6ZyA6KaB5Yik5patCiAgICAgICAgaWYgKHNlbGYub2ZmZXJEZXNjcmlwdGlvbikgewogICAgICAgICAgICBpZiAoZGVzYy5jY3R4ICYmIGRlc2MuY2N0eCAhPSBzZWxmLmNjdHgpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2Fybignc2V0UmVtb3RlRGVzY3JpcHRpb24gZmFpbCBkcm9wLiBjY3R4IG5vdCBlcXVhbC4gJywgZGVzYywgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgc2VsZi5jbG9zZWQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VsZi5maXJlRm94T2ZmZXJWaWRlb1ByZUF1ZGlvID09PSB0cnVlIHx8IHNlbGYuX19vZmZlclZpZGVvUHJlQXVkaW8gPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIC8vX2xvZ2dlci5kZWJ1ZygiUmVtb3RlIHNkcC4xIiwgZGVzYy5zZHApOwoKICAgICAgICAgICAgICAgIHZhciBzZHBTZWN0aW9uID0gbmV3IFNEUFNlY3Rpb24oZGVzYy5zZHAsIHNlbGYpOwogICAgICAgICAgICAgICAgZGVzYy5zZHAgPSBzZHBTZWN0aW9uLmdldFVwZGF0ZWRTRFAoZmFsc2UpOwogICAgICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJSZW1vdGUgc2RwLjIuIHN3aXRjaCBhdWRpbyB2aWRlbyIsIGRlc2Muc2RwKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8v6KKr5Y+rIHAycOaooeW8j++8jOimhueblgogICAgICAgICAgICBkZXNjLmNjdHggJiYgKHNlbGYuY2N0eCA9IGRlc2MuY2N0eCk7CiAgICAgICAgfQoKICAgICAgICBkZXNjLnNkcCA9IGRlc2Muc2RwLnJlcGxhY2UoL1VEUFwvVExTXC9SVFBcL1NBVlBGL2csICJSVFAvU0FWUEYiKTsKICAgICAgICBfbG9nZ2VyLndhcm4oJ3NldFJlbW90ZURlc2NyaXB0aW9uLiBVRFAvVExTL1JUUC9TQVZQRiAtPiBSVFAvU0FWUEY7IGlmIGZpcmVmb3g6IHN3aXRjaCBhdWRpbyB2aWRlbzsnLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkKTsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCdzZXRSZW1vdGVEZXNjcmlwdGlvbi4nLCBkZXNjLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkKTsKCiAgICAgICAgLy8gaHR0cHM6Ly93ZWJydGNoYWNrcy5jb20vbGltaXQtd2VicnRjLWJhbmR3aWR0aC1zZHAvCiAgICAgICAgLy8gYml0cmF0ZQogICAgICAgIGlmIChzZWxmLnZiaXRyYXRlIHx8IHNlbGYuYWJpdHJhdGUpIHsKICAgICAgICAgICAgdmFyIHNkcFNlY3Rpb24gPSBuZXcgU0RQU2VjdGlvbihkZXNjLnNkcCwgc2VsZik7CgogICAgICAgICAgICBzZWxmLnZiaXRyYXRlICYmIHNkcFNlY3Rpb24uc2V0VmlkZW9CaXRyYXRlKHNlbGYudmJpdHJhdGUpOwogICAgICAgICAgICBzZWxmLmFiaXRyYXRlICYmIHNkcFNlY3Rpb24uc2V0QXVkaW9CaXRyYXRlKHNlbGYuYWJpdHJhdGUpOwoKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJ2Yml0cmF0ZSA9ICIsIHNlbGYudmJpdHJhdGUsICIsIGFiaXRyYXRlID0gIiwgc2VsZi5hYml0cmF0ZSwgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCk7CiAgICAgICAgICAgIGRlc2Muc2RwID0gc2RwU2VjdGlvbi5nZXRVcGRhdGVkU0RQKCk7CiAgICAgICAgfQoKICAgICAgICBkZXNjID0gc2VsZi5fX3JlbW90ZURlc2NyaXB0aW9uID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihkZXNjKTsKCiAgICAgICAgcmV0dXJuIHNlbGYuX3J0Y1BlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGRlc2MpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLl9fc2V0UmVtb3RlU0RQID0gdHJ1ZTsKICAgICAgICAgICAgc2VsZi5fb25TZXRSZW1vdGVTdWNjZXNzLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7CgogICAgICAgICAgICBpZiAoc2VsZi5fX3RtcExvY2FsQ2FuZHMgJiYgc2VsZi5fX3RtcExvY2FsQ2FuZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygnQWZ0ZXIgc2V0UmVtb3RlRGVzY3JpcHRpb24uIHNlbmQgY2FuZHMnLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7CiAgICAgICAgICAgICAgICBzZWxmLl9vbkljZUNhbmRpZGF0ZShzZWxmLl9fdG1wTG9jYWxDYW5kcyk7CgogICAgICAgICAgICAgICAgc2VsZi5fX3RtcExvY2FsQ2FuZHMgPSBbXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHNlbGYuX190bXBSZW1vdGVDYW5kcyAmJiBzZWxmLl9fdG1wUmVtb3RlQ2FuZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygnQWZ0ZXIgc2V0UmVtb3RlRGVzY3JpcHRpb24uIGFkZCB0bXAgY2FuZHMnLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCBzZWxmLmNsb3NlZCk7CiAgICAgICAgICAgICAgICBzZWxmLmFkZEljZUNhbmRpZGF0ZShzZWxmLl9fdG1wUmVtb3RlQ2FuZHMpOwoKICAgICAgICAgICAgICAgIHNlbGYuX190bXBSZW1vdGVDYW5kcyA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgfSwgc2VsZi5fb25TZXRTZXNzaW9uRGVzY3JpcHRpb25FcnJvci5iaW5kKHNlbGYpKTsKICAgIH0sCgogICAgaWNlQ29ubmVjdGlvblN0YXRlOiBmdW5jdGlvbiBpY2VDb25uZWN0aW9uU3RhdGUoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICByZXR1cm4gc2VsZi5fcnRjUGVlckNvbm5lY3Rpb24uaWNlQ29ubmVjdGlvblN0YXRlOwogICAgfSwKCiAgICBpc0Nvbm5lY3RlZDogZnVuY3Rpb24gaXNDb25uZWN0ZWQoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgc3RhdGUgPSBzZWxmLl9ydGNQZWVyQ29ubmVjdGlvbi5pY2VDb25uZWN0aW9uU3RhdGU7CgogICAgICAgIHJldHVybiAiY29ubmVjdGVkIiA9PT0gc3RhdGUgfHwgImNvbXBsZXRlZCIgPT09IHN0YXRlOwogICAgfSwKCiAgICBfb25Hb3RSZW1vdGVTdHJlYW06IGZ1bmN0aW9uIF9vbkdvdFJlbW90ZVN0cmVhbShldmVudCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgX2xvZ2dlci5kZWJ1Zygnb25Hb3RSZW1vdGVTdHJlYW0uJywgc2VsZi5fcnRjSWQsIHNlbGYuX19pZCwgZXZlbnQpOwogICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbSA9IGV2ZW50LnN0cmVhbSB8fCBldmVudC5zdHJlYW1zWzBdOwogICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbS5fcnRjSWQgPSB0aGlzLl9ydGNJZDsKICAgICAgICB0aGlzLl9yZW1vdGVTdHJlYW0uX19ydGNfY19pZCA9IHRoaXMuX19pZDsKCiAgICAgICAgc2VsZi51cGRhdGVSZW1vdGVCeVN1YkFyZ3MoKTsKCiAgICAgICAgdGhpcy5vbkdvdFJlbW90ZVN0cmVhbSh0aGlzLl9yZW1vdGVTdHJlYW0sIGV2ZW50KTsKCiAgICAgICAgX2xvZ2dlci5kZWJ1ZygncmVjZWl2ZWQgcmVtb3RlIHN0cmVhbSwgeW91IHdpbGwgc2VlIHRoZSBvdGhlci4nLCBzZWxmLl9ydGNJZCwgc2VsZi5fX2lkLCB0aGlzLmNsb3NlZCk7CiAgICB9LAoKICAgIF9vblNldFJlbW90ZVN1Y2Nlc3M6IGZ1bmN0aW9uIF9vblNldFJlbW90ZVN1Y2Nlc3MoKSB7CiAgICAgICAgX2xvZ2dlci5pbmZvKCdvblNldFJlbW90ZVN1Y2Nlc3Mgc3VjY2VzcycsIHRoaXMuX3J0Y0lkLCB0aGlzLl9faWQpOwogICAgICAgIHRoaXMub25TZXRSZW1vdGVTdWNjZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgogICAgICAgIGlmICh0aGlzLm9mZmVyRGVzY3JpcHRpb24gJiYgdGhpcy5fX3JlbW90ZURlc2NyaXB0aW9uICYmIHRoaXMuX19yZW1vdGVEZXNjcmlwdGlvbi5zZHApIHsKICAgICAgICAgICAgdGhpcy5fb25BbnN3ZXJDb2Rlcyh0aGlzLl9fcmVtb3RlRGVzY3JpcHRpb24uc2RwKTsKICAgICAgICB9CiAgICB9LAoKICAgIF9vbkFuc3dlckNvZGVzOiBmdW5jdGlvbiBfb25BbnN3ZXJDb2RlcyhzZHApIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIHNlY3Rpb24gPSBuZXcgU0RQU2VjdGlvbihzZHAsIHRoaXMpOwogICAgICAgIGlmIChzZWN0aW9uLnZpZGVvU2VjdGlvbikgewogICAgICAgICAgICB2YXIgcnRwUGFyYW1zID0gU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzKHNlY3Rpb24udmlkZW9TZWN0aW9uKTsKCiAgICAgICAgICAgIGlmICghcnRwUGFyYW1zLmNvZGVjcyB8fCBydHBQYXJhbXMuY29kZWNzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJub3QgZm91bmQgYW55IHZpZGVvIGNvZGVzLiBAICIsIHNlbGYuX3J0Y0lkLCBzZWxmLl9faWQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgdmNvZGVzID0gW107CiAgICAgICAgICAgIF91dGlsLmZvckVhY2gocnRwUGFyYW1zLmNvZGVjcywgZnVuY3Rpb24gKF9pLCBfcGFyYW0pIHsKICAgICAgICAgICAgICAgIHZjb2Rlcy5wdXNoKF9wYXJhbS5uYW1lKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzZWxmLmZpbmFsVkNvZGVDaG9pY2VzID0gdmNvZGVzOwoKICAgICAgICAgICAgc2VsZi5vblZDb2RlQ2hvaWNlcyAmJiBzZWxmLm9uVkNvZGVDaG9pY2VzKHZjb2Rlcyk7CiAgICAgICAgfQogICAgfSwKCiAgICBvblNldFJlbW90ZVN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU2V0UmVtb3RlU3VjY2VzcygpIHt9LAoKICAgIG9uQWRkSWNlQ2FuZGlkYXRlU3VjY2VzczogZnVuY3Rpb24gb25BZGRJY2VDYW5kaWRhdGVTdWNjZXNzKCkgewogICAgICAgIF9sb2dnZXIuZGVidWcoJ2FkZEljZUNhbmRpZGF0ZSBzdWNjZXNzJywgdGhpcy5fcnRjSWQsIHRoaXMuX19pZCk7CiAgICB9LAoKICAgIF9vbkFkZEljZUNhbmRpZGF0ZUVycm9yOiBmdW5jdGlvbiBfb25BZGRJY2VDYW5kaWRhdGVFcnJvcihlcnJvcikgewogICAgICAgIF9sb2dnZXIuZXJyb3IoJ2ZhaWxlZCB0byBhZGQgSUNFIENhbmRpZGF0ZTogJyArIGVycm9yLnRvU3RyaW5nKCksIHRoaXMuX3J0Y0lkLCB0aGlzLl9faWQpOwogICAgICAgIHRoaXMub25BZGRJY2VDYW5kaWRhdGVFcnJvcihlcnJvcik7CiAgICB9LAogICAgb25BZGRJY2VDYW5kaWRhdGVFcnJvcjogZnVuY3Rpb24gb25BZGRJY2VDYW5kaWRhdGVFcnJvcihlcnJvcikge30sCgogICAgX29uSWNlQ2FuZGlkYXRlOiBmdW5jdGlvbiBfb25JY2VDYW5kaWRhdGUoY2FuZGlkYXRlKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1Zygnb25JY2VDYW5kaWRhdGU6JywgY2FuZGlkYXRlLCB0aGlzLl9ydGNJZCwgdGhpcy5fX2lkKTsKICAgICAgICB0aGlzLm9uSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7CiAgICB9LAogICAgb25JY2VDYW5kaWRhdGU6IGZ1bmN0aW9uIG9uSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSkge30sCgogICAgb25JY2VTdGF0ZUNoYW5nZTogZnVuY3Rpb24gb25JY2VTdGF0ZUNoYW5nZShzdGF0ZSkgewogICAgICAgIF9sb2dnZXIuZGVidWcoJ29uSWNlU3RhdGVDaGFuZ2UgOiBJQ0Ugc3RhdGUgJywgc3RhdGUpOwogICAgfSwKCiAgICBfb25DcmVhdGVTZXNzaW9uRGVzY3JpcHRpb25FcnJvcjogZnVuY3Rpb24gX29uQ3JlYXRlU2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3IoZXJyb3IpIHsKICAgICAgICBfbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHNlc3Npb24gZGVzY3JpcHRpb246ICcgKyBlcnJvci50b1N0cmluZygpLCB0aGlzLl9ydGNJZCwgdGhpcy5fX2lkKTsKICAgICAgICB0aGlzLm9uQ3JlYXRlU2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3IoZXJyb3IpOwogICAgfSwKICAgIG9uQ3JlYXRlU2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3I6IGZ1bmN0aW9uIG9uQ3JlYXRlU2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3IoZXJyb3IpIHt9LAoKICAgIG9uQ3JlYXRlT2ZmZXJTdWNjZXNzOiBmdW5jdGlvbiBvbkNyZWF0ZU9mZmVyU3VjY2VzcyhkZXNjKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnY3JlYXRlIG9mZmVyIHN1Y2Nlc3MnLCB0aGlzLl9ydGNJZCwgdGhpcy5fX2lkKTsKICAgIH0sCgogICAgb25DcmVhdGVQUkFuc3dlclN1Y2Nlc3M6IGZ1bmN0aW9uIG9uQ3JlYXRlUFJBbnN3ZXJTdWNjZXNzKGRlc2MpIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCdjcmVhdGUgYW5zd2VyIHN1Y2Nlc3MnLCB0aGlzLl9ydGNJZCwgdGhpcy5fX2lkKTsKICAgIH0sCgogICAgb25DcmVhdGVBbnN3ZXJTdWNjZXNzOiBmdW5jdGlvbiBvbkNyZWF0ZUFuc3dlclN1Y2Nlc3MoZGVzYykgewogICAgICAgIF9sb2dnZXIuZGVidWcoJ2NyZWF0ZSBhbnN3ZXIgc3VjY2VzcycsIHRoaXMuX3J0Y0lkLCB0aGlzLl9faWQpOwogICAgfSwKCiAgICBfb25TZXRTZXNzaW9uRGVzY3JpcHRpb25FcnJvcjogZnVuY3Rpb24gX29uU2V0U2Vzc2lvbkRlc2NyaXB0aW9uRXJyb3IoZXJyb3IpIHsKICAgICAgICBfbG9nZ2VyLmVycm9yKCdvblNldFNlc3Npb25EZXNjcmlwdGlvbkVycm9yIDogRmFpbGVkIHRvIHNldCBzZXNzaW9uIGRlc2NyaXB0aW9uOiAnICsgZXJyb3IudG9TdHJpbmcoKSwgdGhpcy5fcnRjSWQsIHRoaXMuX19pZCk7CiAgICAgICAgdGhpcy5vblNldFNlc3Npb25EZXNjcmlwdGlvbkVycm9yKGVycm9yKTsKICAgIH0sCiAgICBvblNldFNlc3Npb25EZXNjcmlwdGlvbkVycm9yOiBmdW5jdGlvbiBvblNldFNlc3Npb25EZXNjcmlwdGlvbkVycm9yKGVycm9yKSB7fSwKICAgIF9vblNldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uU3VjY2VzczogZnVuY3Rpb24gX29uU2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb25TdWNjZXNzKCkgewogICAgICAgIF9sb2dnZXIuZGVidWcoJ29uU2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb25TdWNjZXNzIDogc2V0TG9jYWxEZXNjcmlwdGlvbiBjb21wbGV0ZScsIHRoaXMuX3J0Y0lkLCB0aGlzLl9faWQpOwogICAgICAgIHRoaXMub25TZXRMb2NhbFNlc3Npb25EZXNjcmlwdGlvblN1Y2Nlc3MoKTsKCiAgICAgICAgaWYgKHRoaXMuX19hbnN3ZXJEZXNjcmlwdGlvbiAmJiB0aGlzLl9fYW5zd2VyRGVzY3JpcHRpb24uc2RwKSB7CiAgICAgICAgICAgIHRoaXMuX29uQW5zd2VyQ29kZXModGhpcy5fX2Fuc3dlckRlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgfQogICAgfSwKICAgIG9uU2V0TG9jYWxTZXNzaW9uRGVzY3JpcHRpb25TdWNjZXNzOiBmdW5jdGlvbiBvblNldExvY2FsU2Vzc2lvbkRlc2NyaXB0aW9uU3VjY2VzcygpIHt9LAoKICAgIG9uR290UmVtb3RlU3RyZWFtOiBmdW5jdGlvbiBvbkdvdFJlbW90ZVN0cmVhbShyZW1vdGVTdHJlYW0pIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJHb3QgcmVtb3RlIHN0cmVhbS4gIiwgcmVtb3RlU3RyZWFtLCB0aGlzLl9ydGNJZCwgdGhpcy5fX2lkKTsKICAgIH0KfSk7Cgptb2R1bGUuZXhwb3J0cyA9IF9XZWJSVEM7CgovKioqLyB9KSwKLyogMjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwogLyogZXNsaW50LWVudiBub2RlICovCgoKLy8gU0RQIGhlbHBlcnMuCnZhciBTRFBVdGlscyA9IHt9OwoKLy8gR2VuZXJhdGUgYW4gYWxwaGFudW1lcmljIGlkZW50aWZpZXIgZm9yIGNuYW1lIG9yIG1pZHMuCi8vIFRPRE86IHVzZSBVVUlEcyBpbnN0ZWFkPyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qZWQvOTgyODgzClNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllciA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgMTApOwp9OwoKLy8gVGhlIFJUQ1AgQ05BTUUgdXNlZCBieSBhbGwgcGVlcmNvbm5lY3Rpb25zIGZyb20gdGhlIHNhbWUgSlMuClNEUFV0aWxzLmxvY2FsQ05hbWUgPSBTRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIoKTsKCi8vIFNwbGl0cyBTRFAgaW50byBsaW5lcywgZGVhbGluZyB3aXRoIGJvdGggQ1JMRiBhbmQgTEYuClNEUFV0aWxzLnNwbGl0TGluZXMgPSBmdW5jdGlvbihibG9iKSB7CiAgcmV0dXJuIGJsb2IudHJpbSgpLnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gbGluZS50cmltKCk7CiAgfSk7Cn07Ci8vIFNwbGl0cyBTRFAgaW50byBzZXNzaW9ucGFydCBhbmQgbWVkaWFzZWN0aW9ucy4gRW5zdXJlcyBDUkxGLgpTRFBVdGlscy5zcGxpdFNlY3Rpb25zID0gZnVuY3Rpb24oYmxvYikgewogIHZhciBwYXJ0cyA9IGJsb2Iuc3BsaXQoJ1xubT0nKTsKICByZXR1cm4gcGFydHMubWFwKGZ1bmN0aW9uKHBhcnQsIGluZGV4KSB7CiAgICByZXR1cm4gKGluZGV4ID4gMCA/ICdtPScgKyBwYXJ0IDogcGFydCkudHJpbSgpICsgJ1xyXG4nOwogIH0pOwp9OwoKLy8gcmV0dXJucyB0aGUgc2Vzc2lvbiBkZXNjcmlwdGlvbi4KU0RQVXRpbHMuZ2V0RGVzY3JpcHRpb24gPSBmdW5jdGlvbihibG9iKSB7CiAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhibG9iKTsKICByZXR1cm4gc2VjdGlvbnMgJiYgc2VjdGlvbnNbMF07Cn07CgovLyByZXR1cm5zIHRoZSBpbmRpdmlkdWFsIG1lZGlhIHNlY3Rpb25zLgpTRFBVdGlscy5nZXRNZWRpYVNlY3Rpb25zID0gZnVuY3Rpb24oYmxvYikgewogIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoYmxvYik7CiAgc2VjdGlvbnMuc2hpZnQoKTsKICByZXR1cm4gc2VjdGlvbnM7Cn07CgovLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LgpTRFBVdGlscy5tYXRjaFByZWZpeCA9IGZ1bmN0aW9uKGJsb2IsIHByZWZpeCkgewogIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDA7CiAgfSk7Cn07CgovLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6Ci8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOAovLyBycG9ydCA1NTk5NiIKU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzOwogIC8vIFBhcnNlIGJvdGggdmFyaWFudHMuCiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7CiAgfSBlbHNlIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7CiAgfQoKICB2YXIgY2FuZGlkYXRlID0gewogICAgZm91bmRhdGlvbjogcGFydHNbMF0sCiAgICBjb21wb25lbnQ6IHBhcnNlSW50KHBhcnRzWzFdLCAxMCksCiAgICBwcm90b2NvbDogcGFydHNbMl0udG9Mb3dlckNhc2UoKSwKICAgIHByaW9yaXR5OiBwYXJzZUludChwYXJ0c1szXSwgMTApLAogICAgaXA6IHBhcnRzWzRdLAogICAgcG9ydDogcGFyc2VJbnQocGFydHNbNV0sIDEwKSwKICAgIC8vIHNraXAgcGFydHNbNl0gPT0gJ3R5cCcKICAgIHR5cGU6IHBhcnRzWzddCiAgfTsKCiAgZm9yICh2YXIgaSA9IDg7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMikgewogICAgc3dpdGNoIChwYXJ0c1tpXSkgewogICAgICBjYXNlICdyYWRkcic6CiAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzID0gcGFydHNbaSArIDFdOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdycG9ydCc6CiAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRQb3J0ID0gcGFyc2VJbnQocGFydHNbaSArIDFdLCAxMCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3RjcHR5cGUnOgogICAgICAgIGNhbmRpZGF0ZS50Y3BUeXBlID0gcGFydHNbaSArIDFdOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICd1ZnJhZyc6CiAgICAgICAgY2FuZGlkYXRlLnVmcmFnID0gcGFydHNbaSArIDFdOyAvLyBmb3IgYmFja3dhcmQgY29tcGFiaWxpdHkuCiAgICAgICAgY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgPSBwYXJ0c1tpICsgMV07CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6IC8vIGV4dGVuc2lvbiBoYW5kbGluZywgaW4gcGFydGljdWxhciB1ZnJhZwogICAgICAgIGNhbmRpZGF0ZVtwYXJ0c1tpXV0gPSBwYXJ0c1tpICsgMV07CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiBjYW5kaWRhdGU7Cn07CgovLyBUcmFuc2xhdGVzIGEgY2FuZGlkYXRlIG9iamVjdCBpbnRvIFNEUCBjYW5kaWRhdGUgYXR0cmlidXRlLgpTRFBVdGlscy53cml0ZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkgewogIHZhciBzZHAgPSBbXTsKICBzZHAucHVzaChjYW5kaWRhdGUuZm91bmRhdGlvbik7CiAgc2RwLnB1c2goY2FuZGlkYXRlLmNvbXBvbmVudCk7CiAgc2RwLnB1c2goY2FuZGlkYXRlLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcmlvcml0eSk7CiAgc2RwLnB1c2goY2FuZGlkYXRlLmlwKTsKICBzZHAucHVzaChjYW5kaWRhdGUucG9ydCk7CgogIHZhciB0eXBlID0gY2FuZGlkYXRlLnR5cGU7CiAgc2RwLnB1c2goJ3R5cCcpOwogIHNkcC5wdXNoKHR5cGUpOwogIGlmICh0eXBlICE9PSAnaG9zdCcgJiYgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzICYmCiAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCkgewogICAgc2RwLnB1c2goJ3JhZGRyJyk7CiAgICBzZHAucHVzaChjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MpOwogICAgc2RwLnB1c2goJ3Jwb3J0Jyk7CiAgICBzZHAucHVzaChjYW5kaWRhdGUucmVsYXRlZFBvcnQpOwogIH0KICBpZiAoY2FuZGlkYXRlLnRjcFR5cGUgJiYgY2FuZGlkYXRlLnByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09ICd0Y3AnKSB7CiAgICBzZHAucHVzaCgndGNwdHlwZScpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpOwogIH0KICBpZiAoY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgfHwgY2FuZGlkYXRlLnVmcmFnKSB7CiAgICBzZHAucHVzaCgndWZyYWcnKTsKICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50IHx8IGNhbmRpZGF0ZS51ZnJhZyk7CiAgfQogIHJldHVybiAnY2FuZGlkYXRlOicgKyBzZHAuam9pbignICcpOwp9OwoKLy8gUGFyc2VzIGFuIGljZS1vcHRpb25zIGxpbmUsIHJldHVybnMgYW4gYXJyYXkgb2Ygb3B0aW9uIHRhZ3MuCi8vIGE9aWNlLW9wdGlvbnM6Zm9vIGJhcgpTRFBVdGlscy5wYXJzZUljZU9wdGlvbnMgPSBmdW5jdGlvbihsaW5lKSB7CiAgcmV0dXJuIGxpbmUuc3Vic3RyKDE0KS5zcGxpdCgnICcpOwp9CgovLyBQYXJzZXMgYW4gcnRwbWFwIGxpbmUsIHJldHVybnMgUlRDUnRwQ29kZGVjUGFyYW1ldGVycy4gU2FtcGxlIGlucHV0OgovLyBhPXJ0cG1hcDoxMTEgb3B1cy80ODAwMC8yClNEUFV0aWxzLnBhcnNlUnRwTWFwID0gZnVuY3Rpb24obGluZSkgewogIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDkpLnNwbGl0KCcgJyk7CiAgdmFyIHBhcnNlZCA9IHsKICAgIHBheWxvYWRUeXBlOiBwYXJzZUludChwYXJ0cy5zaGlmdCgpLCAxMCkgLy8gd2FzOiBpZAogIH07CgogIHBhcnRzID0gcGFydHNbMF0uc3BsaXQoJy8nKTsKCiAgcGFyc2VkLm5hbWUgPSBwYXJ0c1swXTsKICBwYXJzZWQuY2xvY2tSYXRlID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKTsgLy8gd2FzOiBjbG9ja3JhdGUKICBwYXJzZWQuY2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTsKICAvLyBsZWdhY3kgYWxpYXMsIGdvdCByZW5hbWVkIGJhY2sgdG8gY2hhbm5lbHMgaW4gT1JUQy4KICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJzZWQuY2hhbm5lbHM7CiAgcmV0dXJuIHBhcnNlZDsKfTsKCi8vIEdlbmVyYXRlIGFuIGE9cnRwbWFwIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3IKLy8gUlRDUnRwQ29kZWNQYXJhbWV0ZXJzLgpTRFBVdGlscy53cml0ZVJ0cE1hcCA9IGZ1bmN0aW9uKGNvZGVjKSB7CiAgdmFyIHB0ID0gY29kZWMucGF5bG9hZFR5cGU7CiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHsKICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7CiAgfQogIHZhciBjaGFubmVscyA9IGNvZGVjLmNoYW5uZWxzIHx8IGNvZGVjLm51bUNoYW5uZWxzIHx8IDE7CiAgcmV0dXJuICdhPXJ0cG1hcDonICsgcHQgKyAnICcgKyBjb2RlYy5uYW1lICsgJy8nICsgY29kZWMuY2xvY2tSYXRlICsKICAgICAgKGNoYW5uZWxzICE9PSAxID8gJy8nICsgY2hhbm5lbHMgOiAnJykgKyAnXHJcbic7Cn07CgovLyBQYXJzZXMgYW4gYT1leHRtYXAgbGluZSAoaGVhZGVyZXh0ZW5zaW9uIGZyb20gUkZDIDUyODUpLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldAovLyBhPWV4dG1hcDoyL3NlbmRvbmx5IHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnRvZmZzZXQKU0RQVXRpbHMucGFyc2VFeHRtYXAgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTsKICByZXR1cm4gewogICAgaWQ6IHBhcnNlSW50KHBhcnRzWzBdLCAxMCksCiAgICBkaXJlY3Rpb246IHBhcnRzWzBdLmluZGV4T2YoJy8nKSA+IDAgPyBwYXJ0c1swXS5zcGxpdCgnLycpWzFdIDogJ3NlbmRyZWN2JywKICAgIHVyaTogcGFydHNbMV0KICB9Owp9OwoKLy8gR2VuZXJhdGVzIGE9ZXh0bWFwIGxpbmUgZnJvbSBSVENSdHBIZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzIG9yCi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi4KU0RQVXRpbHMud3JpdGVFeHRtYXAgPSBmdW5jdGlvbihoZWFkZXJFeHRlbnNpb24pIHsKICByZXR1cm4gJ2E9ZXh0bWFwOicgKyAoaGVhZGVyRXh0ZW5zaW9uLmlkIHx8IGhlYWRlckV4dGVuc2lvbi5wcmVmZXJyZWRJZCkgKwogICAgICAoaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvbiAmJiBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uICE9PSAnc2VuZHJlY3YnCiAgICAgICAgICA/ICcvJyArIGhlYWRlckV4dGVuc2lvbi5kaXJlY3Rpb24KICAgICAgICAgIDogJycpICsKICAgICAgJyAnICsgaGVhZGVyRXh0ZW5zaW9uLnVyaSArICdcclxuJzsKfTsKCi8vIFBhcnNlcyBhbiBmdG1wIGxpbmUsIHJldHVybnMgZGljdGlvbmFyeS4gU2FtcGxlIGlucHV0OgovLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vbgovLyBBbHNvIGRlYWxzIHdpdGggdmJyPW9uOyBjbmc9b24KU0RQVXRpbHMucGFyc2VGbXRwID0gZnVuY3Rpb24obGluZSkgewogIHZhciBwYXJzZWQgPSB7fTsKICB2YXIga3Y7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIobGluZS5pbmRleE9mKCcgJykgKyAxKS5zcGxpdCgnOycpOwogIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsKICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7CiAgICBwYXJzZWRba3ZbMF0udHJpbSgpXSA9IGt2WzFdOwogIH0KICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGVzIGFuIGE9ZnRtcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy4KU0RQVXRpbHMud3JpdGVGbXRwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZSA9ICcnOwogIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlOwogIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogIH0KICBpZiAoY29kZWMucGFyYW1ldGVycyAmJiBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5sZW5ndGgpIHsKICAgIHZhciBwYXJhbXMgPSBbXTsKICAgIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pIHsKICAgICAgaWYgKGNvZGVjLnBhcmFtZXRlcnNbcGFyYW1dKSB7CiAgICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFyYW1zLnB1c2gocGFyYW0pOwogICAgICB9CiAgICB9KTsKICAgIGxpbmUgKz0gJ2E9Zm10cDonICsgcHQgKyAnICcgKyBwYXJhbXMuam9pbignOycpICsgJ1xyXG4nOwogIH0KICByZXR1cm4gbGluZTsKfTsKCi8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDoKLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaQpTRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7CiAgcmV0dXJuIHsKICAgIHR5cGU6IHBhcnRzLnNoaWZ0KCksCiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKQogIH07Cn07Ci8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZXMgPSAnJzsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7CiAgICAvLyBGSVhNRTogc3BlY2lhbCBoYW5kbGluZyBmb3IgdHJyLWludD8KICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKGZiKSB7CiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArCiAgICAgIChmYi5wYXJhbWV0ZXIgJiYgZmIucGFyYW1ldGVyLmxlbmd0aCA/ICcgJyArIGZiLnBhcmFtZXRlciA6ICcnKSArCiAgICAgICAgICAnXHJcbic7CiAgICB9KTsKICB9CiAgcmV0dXJuIGxpbmVzOwp9OwoKLy8gUGFyc2VzIGFuIFJGQyA1NTc2IHNzcmMgbWVkaWEgYXR0cmlidXRlLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9c3NyYzozNzM1OTI4NTU5IGNuYW1lOnNvbWV0aGluZwpTRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgc3AgPSBsaW5lLmluZGV4T2YoJyAnKTsKICB2YXIgcGFydHMgPSB7CiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMCkKICB9OwogIHZhciBjb2xvbiA9IGxpbmUuaW5kZXhPZignOicsIHNwKTsKICBpZiAoY29sb24gPiAtMSkgewogICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHIoc3AgKyAxLCBjb2xvbiAtIHNwIC0gMSk7CiAgICBwYXJ0cy52YWx1ZSA9IGxpbmUuc3Vic3RyKGNvbG9uICsgMSk7CiAgfSBlbHNlIHsKICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSk7CiAgfQogIHJldHVybiBwYXJ0czsKfTsKCi8vIEV4dHJhY3RzIHRoZSBNSUQgKFJGQyA1ODg4KSBmcm9tIGEgbWVkaWEgc2VjdGlvbi4KLy8gcmV0dXJucyB0aGUgTUlEIG9yIHVuZGVmaW5lZCBpZiBubyBtaWQgbGluZSB3YXMgZm91bmQuClNEUFV0aWxzLmdldE1pZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikgewogIHZhciBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKVswXTsKICBpZiAobWlkKSB7CiAgICByZXR1cm4gbWlkLnN1YnN0cig2KTsKICB9Cn0KClNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoMTQpLnNwbGl0KCcgJyk7CiAgcmV0dXJuIHsKICAgIGFsZ29yaXRobTogcGFydHNbMF0udG9Mb3dlckNhc2UoKSwgLy8gYWxnb3JpdGhtIGlzIGNhc2Utc2Vuc2l0aXZlIGluIEVkZ2UuCiAgICB2YWx1ZTogcGFydHNbMV0KICB9Owp9OwoKLy8gRXh0cmFjdHMgRFRMUyBwYXJhbWV0ZXJzIGZyb20gU0RQIG1lZGlhIHNlY3Rpb24gb3Igc2Vzc2lvbnBhcnQuCi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQovLyAgIGdldCB0aGUgZmluZ2VycHJpbnQgbGluZSBhcyBpbnB1dC4gU2VlIGFsc28gZ2V0SWNlUGFyYW1ldGVycy4KU0RQVXRpbHMuZ2V0RHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7CiAgdmFyIGxpbmVzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsCiAgICAgICdhPWZpbmdlcnByaW50OicpOwogIC8vIE5vdGU6IGE9c2V0dXAgbGluZSBpcyBpZ25vcmVkIHNpbmNlIHdlIHVzZSB0aGUgJ2F1dG8nIHJvbGUuCiAgLy8gTm90ZTI6ICdhbGdvcml0aG0nIGlzIG5vdCBjYXNlIHNlbnNpdGl2ZSBleGNlcHQgaW4gRWRnZS4KICByZXR1cm4gewogICAgcm9sZTogJ2F1dG8nLAogICAgZmluZ2VycHJpbnRzOiBsaW5lcy5tYXAoU0RQVXRpbHMucGFyc2VGaW5nZXJwcmludCkKICB9Owp9OwoKLy8gU2VyaWFsaXplcyBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLgpTRFBVdGlscy53cml0ZUR0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24ocGFyYW1zLCBzZXR1cFR5cGUpIHsKICB2YXIgc2RwID0gJ2E9c2V0dXA6JyArIHNldHVwVHlwZSArICdcclxuJzsKICBwYXJhbXMuZmluZ2VycHJpbnRzLmZvckVhY2goZnVuY3Rpb24oZnApIHsKICAgIHNkcCArPSAnYT1maW5nZXJwcmludDonICsgZnAuYWxnb3JpdGhtICsgJyAnICsgZnAudmFsdWUgKyAnXHJcbic7CiAgfSk7CiAgcmV0dXJuIHNkcDsKfTsKLy8gUGFyc2VzIElDRSBpbmZvcm1hdGlvbiBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LgovLyBGSVhNRTogZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgZnVuY3Rpb25zIHRoaXMgc2hvdWxkIG9ubHkKLy8gICBnZXQgdGhlIGljZS11ZnJhZyBhbmQgaWNlLXB3ZCBsaW5lcyBhcyBpbnB1dC4KU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHsKICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7CiAgLy8gU2VhcmNoIGluIHNlc3Npb24gcGFydCwgdG9vLgogIGxpbmVzID0gbGluZXMuY29uY2F0KFNEUFV0aWxzLnNwbGl0TGluZXMoc2Vzc2lvbnBhcnQpKTsKICB2YXIgaWNlUGFyYW1ldGVycyA9IHsKICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgIHJldHVybiBsaW5lLmluZGV4T2YoJ2E9aWNlLXVmcmFnOicpID09PSAwOwogICAgfSlbMF0uc3Vic3RyKDEyKSwKICAgIHBhc3N3b3JkOiBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkgewogICAgICByZXR1cm4gbGluZS5pbmRleE9mKCdhPWljZS1wd2Q6JykgPT09IDA7CiAgICB9KVswXS5zdWJzdHIoMTApCiAgfTsKICByZXR1cm4gaWNlUGFyYW1ldGVyczsKfTsKCi8vIFNlcmlhbGl6ZXMgSUNFIHBhcmFtZXRlcnMgdG8gU0RQLgpTRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMpIHsKICByZXR1cm4gJ2E9aWNlLXVmcmFnOicgKyBwYXJhbXMudXNlcm5hbWVGcmFnbWVudCArICdcclxuJyArCiAgICAgICdhPWljZS1wd2Q6JyArIHBhcmFtcy5wYXNzd29yZCArICdcclxuJzsKfTsKCi8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgUlRDUnRwUGFyYW1ldGVycy4KU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7CiAgdmFyIGRlc2NyaXB0aW9uID0gewogICAgY29kZWNzOiBbXSwKICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLAogICAgZmVjTWVjaGFuaXNtczogW10sCiAgICBydGNwOiBbXQogIH07CiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogIHZhciBtbGluZSA9IGxpbmVzWzBdLnNwbGl0KCcgJyk7CiAgZm9yICh2YXIgaSA9IDM7IGkgPCBtbGluZS5sZW5ndGg7IGkrKykgeyAvLyBmaW5kIGFsbCBjb2RlY3MgZnJvbSBtbGluZVszLi5dCiAgICB2YXIgcHQgPSBtbGluZVtpXTsKICAgIHZhciBydHBtYXBsaW5lID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoCiAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydHBtYXA6JyArIHB0ICsgJyAnKVswXTsKICAgIGlmIChydHBtYXBsaW5lKSB7CiAgICAgIHZhciBjb2RlYyA9IFNEUFV0aWxzLnBhcnNlUnRwTWFwKHJ0cG1hcGxpbmUpOwogICAgICB2YXIgZm10cHMgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9Zm10cDonICsgcHQgKyAnICcpOwogICAgICAvLyBPbmx5IHRoZSBmaXJzdCBhPWZtdHA6PHB0PiBpcyBjb25zaWRlcmVkLgogICAgICBjb2RlYy5wYXJhbWV0ZXJzID0gZm10cHMubGVuZ3RoID8gU0RQVXRpbHMucGFyc2VGbXRwKGZtdHBzWzBdKSA6IHt9OwogICAgICBjb2RlYy5ydGNwRmVlZGJhY2sgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1mYjonICsgcHQgKyAnICcpCiAgICAgICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7CiAgICAgIGRlc2NyaXB0aW9uLmNvZGVjcy5wdXNoKGNvZGVjKTsKICAgICAgLy8gcGFyc2UgRkVDIG1lY2hhbmlzbXMgZnJvbSBydHBtYXAgbGluZXMuCiAgICAgIHN3aXRjaCAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgY2FzZSAnUkVEJzoKICAgICAgICBjYXNlICdVTFBGRUMnOgogICAgICAgICAgZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5wdXNoKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OiAvLyBvbmx5IFJFRCBhbmQgVUxQRkVDIGFyZSByZWNvZ25pemVkIGFzIEZFQyBtZWNoYW5pc21zLgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICB9CiAgU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1leHRtYXA6JykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7CiAgICBkZXNjcmlwdGlvbi5oZWFkZXJFeHRlbnNpb25zLnB1c2goU0RQVXRpbHMucGFyc2VFeHRtYXAobGluZSkpOwogIH0pOwogIC8vIEZJWE1FOiBwYXJzZSBydGNwLgogIHJldHVybiBkZXNjcmlwdGlvbjsKfTsKCi8vIEdlbmVyYXRlcyBwYXJ0cyBvZiB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gZGVzY3JpYmluZyB0aGUgY2FwYWJpbGl0aWVzIC8KLy8gcGFyYW1ldGVycy4KU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGtpbmQsIGNhcHMpIHsKICB2YXIgc2RwID0gJyc7CgogIC8vIEJ1aWxkIHRoZSBtbGluZS4KICBzZHAgKz0gJ209JyArIGtpbmQgKyAnICc7CiAgc2RwICs9IGNhcHMuY29kZWNzLmxlbmd0aCA+IDAgPyAnOScgOiAnMCc7IC8vIHJlamVjdCBpZiBubyBjb2RlY3MuCiAgc2RwICs9ICcgVURQL1RMUy9SVFAvU0FWUEYgJzsKICBzZHAgKz0gY2Fwcy5jb2RlY3MubWFwKGZ1bmN0aW9uKGNvZGVjKSB7CiAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7CiAgICB9CiAgICByZXR1cm4gY29kZWMucGF5bG9hZFR5cGU7CiAgfSkuam9pbignICcpICsgJ1xyXG4nOwoKICBzZHAgKz0gJ2M9SU4gSVA0IDAuMC4wLjBcclxuJzsKICBzZHAgKz0gJ2E9cnRjcDo5IElOIElQNCAwLjAuMC4wXHJcbic7CgogIC8vIEFkZCBhPXJ0cG1hcCBsaW5lcyBmb3IgZWFjaCBjb2RlYy4gQWxzbyBmbXRwIGFuZCBydGNwLWZiLgogIGNhcHMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHsKICAgIHNkcCArPSBTRFBVdGlscy53cml0ZVJ0cE1hcChjb2RlYyk7CiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGbXRwKGNvZGVjKTsKICAgIHNkcCArPSBTRFBVdGlscy53cml0ZVJ0Y3BGYihjb2RlYyk7CiAgfSk7CiAgdmFyIG1heHB0aW1lID0gMDsKICBjYXBzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7CiAgICBpZiAoY29kZWMubWF4cHRpbWUgPiBtYXhwdGltZSkgewogICAgICBtYXhwdGltZSA9IGNvZGVjLm1heHB0aW1lOwogICAgfQogIH0pOwogIGlmIChtYXhwdGltZSA+IDApIHsKICAgIHNkcCArPSAnYT1tYXhwdGltZTonICsgbWF4cHRpbWUgKyAnXHJcbic7CiAgfQogIHNkcCArPSAnYT1ydGNwLW11eFxyXG4nOwoKICBpZiAoY2Fwcy5oZWFkZXJFeHRlbnNpb25zKSB7CiAgICBjYXBzLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihleHRlbnNpb24pIHsKICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlRXh0bWFwKGV4dGVuc2lvbik7CiAgICB9KTsKICB9CiAgLy8gRklYTUU6IHdyaXRlIGZlY01lY2hhbmlzbXMuCiAgcmV0dXJuIHNkcDsKfTsKCi8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2YKLy8gUlRDUnRwRW5jb2RpbmdQYXJhbWV0ZXJzLgpTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikgewogIHZhciBlbmNvZGluZ1BhcmFtZXRlcnMgPSBbXTsKICB2YXIgZGVzY3JpcHRpb24gPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTsKICB2YXIgaGFzUmVkID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdSRUQnKSAhPT0gLTE7CiAgdmFyIGhhc1VscGZlYyA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignVUxQRkVDJykgIT09IC0xOwoKICAvLyBmaWx0ZXIgYT1zc3JjOi4uLiBjbmFtZTosIGlnbm9yZSBQbGFuQi1tc2lkCiAgdmFyIHNzcmNzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpCiAgLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7CiAgfSkKICAuZmlsdGVyKGZ1bmN0aW9uKHBhcnRzKSB7CiAgICByZXR1cm4gcGFydHMuYXR0cmlidXRlID09PSAnY25hbWUnOwogIH0pOwogIHZhciBwcmltYXJ5U3NyYyA9IHNzcmNzLmxlbmd0aCA+IDAgJiYgc3NyY3NbMF0uc3NyYzsKICB2YXIgc2Vjb25kYXJ5U3NyYzsKCiAgdmFyIGZsb3dzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjLWdyb3VwOkZJRCcpCiAgLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cigxNykuc3BsaXQoJyAnKTsKICAgIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCkgewogICAgICByZXR1cm4gcGFyc2VJbnQocGFydCwgMTApOwogICAgfSk7CiAgfSk7CiAgaWYgKGZsb3dzLmxlbmd0aCA+IDAgJiYgZmxvd3NbMF0ubGVuZ3RoID4gMSAmJiBmbG93c1swXVswXSA9PT0gcHJpbWFyeVNzcmMpIHsKICAgIHNlY29uZGFyeVNzcmMgPSBmbG93c1swXVsxXTsKICB9CgogIGRlc2NyaXB0aW9uLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7CiAgICBpZiAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpID09PSAnUlRYJyAmJiBjb2RlYy5wYXJhbWV0ZXJzLmFwdCkgewogICAgICB2YXIgZW5jUGFyYW0gPSB7CiAgICAgICAgc3NyYzogcHJpbWFyeVNzcmMsCiAgICAgICAgY29kZWNQYXlsb2FkVHlwZTogcGFyc2VJbnQoY29kZWMucGFyYW1ldGVycy5hcHQsIDEwKSwKICAgICAgfTsKICAgICAgaWYgKHByaW1hcnlTc3JjICYmIHNlY29uZGFyeVNzcmMpIHsKICAgICAgICBlbmNQYXJhbS5ydHggPSB7c3NyYzogc2Vjb25kYXJ5U3NyY307CiAgICAgIH0KICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pOwogICAgICBpZiAoaGFzUmVkKSB7CiAgICAgICAgZW5jUGFyYW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVuY1BhcmFtKSk7CiAgICAgICAgZW5jUGFyYW0uZmVjID0gewogICAgICAgICAgc3NyYzogc2Vjb25kYXJ5U3NyYywKICAgICAgICAgIG1lY2hhbmlzbTogaGFzVWxwZmVjID8gJ3JlZCt1bHBmZWMnIDogJ3JlZCcKICAgICAgICB9OwogICAgICAgIGVuY29kaW5nUGFyYW1ldGVycy5wdXNoKGVuY1BhcmFtKTsKICAgICAgfQogICAgfQogIH0pOwogIGlmIChlbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoID09PSAwICYmIHByaW1hcnlTc3JjKSB7CiAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7CiAgICAgIHNzcmM6IHByaW1hcnlTc3JjCiAgICB9KTsKICB9CgogIC8vIHdlIHN1cHBvcnQgYm90aCBiPUFTIGFuZCBiPVRJQVMgYnV0IGludGVycHJldCBBUyBhcyBUSUFTLgogIHZhciBiYW5kd2lkdGggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdiPScpOwogIGlmIChiYW5kd2lkdGgubGVuZ3RoKSB7CiAgICBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9VElBUzonKSA9PT0gMCkgewogICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyKDcpLCAxMCk7CiAgICB9IGVsc2UgaWYgKGJhbmR3aWR0aFswXS5pbmRleE9mKCdiPUFTOicpID09PSAwKSB7CiAgICAgIC8vIHVzZSBmb3JtdWxhIGZyb20gSlNFUCB0byBjb252ZXJ0IGI9QVMgdG8gVElBUyB2YWx1ZS4KICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cig1KSwgMTApICogMTAwMCAqIDAuOTUKICAgICAgICAgIC0gKDUwICogNDAgKiA4KTsKICAgIH0gZWxzZSB7CiAgICAgIGJhbmR3aWR0aCA9IHVuZGVmaW5lZDsKICAgIH0KICAgIGVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKHBhcmFtcykgewogICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDsKICAgIH0pOwogIH0KICByZXR1cm4gZW5jb2RpbmdQYXJhbWV0ZXJzOwp9OwoKLy8gcGFyc2VzIGh0dHA6Ly9kcmFmdC5vcnRjLm9yZy8jcnRjcnRjcHBhcmFtZXRlcnMqClNEUFV0aWxzLnBhcnNlUnRjcFBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICB2YXIgcnRjcFBhcmFtZXRlcnMgPSB7fTsKCiAgdmFyIGNuYW1lOwogIC8vIEdldHMgdGhlIGZpcnN0IFNTUkMuIE5vdGUgdGhhdCB3aXRoIFJUWCB0aGVyZSBtaWdodCBiZSBtdWx0aXBsZQogIC8vIFNTUkNzLgogIHZhciByZW1vdGVTc3JjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpCiAgICAgIC5tYXAoZnVuY3Rpb24obGluZSkgewogICAgICAgIHJldHVybiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKTsKICAgICAgfSkKICAgICAgLmZpbHRlcihmdW5jdGlvbihvYmopIHsKICAgICAgICByZXR1cm4gb2JqLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJzsKICAgICAgfSlbMF07CiAgaWYgKHJlbW90ZVNzcmMpIHsKICAgIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTsKICAgIHJ0Y3BQYXJhbWV0ZXJzLnNzcmMgPSByZW1vdGVTc3JjLnNzcmM7CiAgfQoKICAvLyBFZGdlIHVzZXMgdGhlIGNvbXBvdW5kIGF0dHJpYnV0ZSBpbnN0ZWFkIG9mIHJlZHVjZWRTaXplCiAgLy8gY29tcG91bmQgaXMgIXJlZHVjZWRTaXplCiAgdmFyIHJzaXplID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLXJzaXplJyk7CiAgcnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUgPSByc2l6ZS5sZW5ndGggPiAwOwogIHJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kID0gcnNpemUubGVuZ3RoID09PSAwOwoKICAvLyBwYXJzZXMgdGhlIHJ0Y3AtbXV4IGF0dHLRlmJ1dGUuCiAgLy8gTm90ZSB0aGF0IEVkZ2UgZG9lcyBub3Qgc3VwcG9ydCB1bm11eGVkIFJUQ1AuCiAgdmFyIG11eCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1tdXgnKTsKICBydGNwUGFyYW1ldGVycy5tdXggPSBtdXgubGVuZ3RoID4gMDsKCiAgcmV0dXJuIHJ0Y3BQYXJhbWV0ZXJzOwp9OwoKLy8gcGFyc2VzIGVpdGhlciBhPW1zaWQ6IG9yIGE9c3NyYzouLi4gbXNpZCBsaW5lcyBhbmQgcmV0dXJucwovLyB0aGUgaWQgb2YgdGhlIE1lZGlhU3RyZWFtIGFuZCBNZWRpYVN0cmVhbVRyYWNrLgpTRFBVdGlscy5wYXJzZU1zaWQgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICB2YXIgcGFydHM7CiAgdmFyIHNwZWMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1zaWQ6Jyk7CiAgaWYgKHNwZWMubGVuZ3RoID09PSAxKSB7CiAgICBwYXJ0cyA9IHNwZWNbMF0uc3Vic3RyKDcpLnNwbGl0KCcgJyk7CiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07CiAgfQogIHZhciBwbGFuQiA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKQogIC5tYXAoZnVuY3Rpb24obGluZSkgewogICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpOwogIH0pCiAgLmZpbHRlcihmdW5jdGlvbihwYXJ0cykgewogICAgcmV0dXJuIHBhcnRzLmF0dHJpYnV0ZSA9PT0gJ21zaWQnOwogIH0pOwogIGlmIChwbGFuQi5sZW5ndGggPiAwKSB7CiAgICBwYXJ0cyA9IHBsYW5CWzBdLnZhbHVlLnNwbGl0KCcgJyk7CiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07CiAgfQp9OwoKLy8gR2VuZXJhdGUgYSBzZXNzaW9uIElEIGZvciBTRFAuCi8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1pZXRmLXJ0Y3dlYi1qc2VwLTIwI3NlY3Rpb24tNS4yLjEKLy8gcmVjb21tZW5kcyB1c2luZyBhIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSArdmUgNjQtYml0IHZhbHVlCi8vIGJ1dCByaWdodCBub3cgdGhpcyBzaG91bGQgYmUgYWNjZXB0YWJsZSBhbmQgd2l0aGluIHRoZSByaWdodCByYW5nZQpTRFBVdGlscy5nZW5lcmF0ZVNlc3Npb25JZCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsIDIxKTsKfTsKCi8vIFdyaXRlIGJvaWxkZXIgcGxhdGUgZm9yIHN0YXJ0IG9mIFNEUAovLyBzZXNzSWQgYXJndW1lbnQgaXMgb3B0aW9uYWwgLSBpZiBub3Qgc3VwcGxpZWQgaXQgd2lsbAovLyBiZSBnZW5lcmF0ZWQgcmFuZG9tbHkKLy8gc2Vzc1ZlcnNpb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIDIKU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUgPSBmdW5jdGlvbihzZXNzSWQsIHNlc3NWZXIpIHsKICB2YXIgc2Vzc2lvbklkOwogIHZhciB2ZXJzaW9uID0gc2Vzc1ZlciAhPT0gdW5kZWZpbmVkID8gc2Vzc1ZlciA6IDI7CiAgaWYgKHNlc3NJZCkgewogICAgc2Vzc2lvbklkID0gc2Vzc0lkOwogIH0gZWxzZSB7CiAgICBzZXNzaW9uSWQgPSBTRFBVdGlscy5nZW5lcmF0ZVNlc3Npb25JZCgpOwogIH0KICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC4KICByZXR1cm4gJ3Y9MFxyXG4nICsKICAgICAgJ289dGhpc2lzYWRhcHRlcm9ydGMgJyArIHNlc3Npb25JZCArICcgJyArIHZlcnNpb24gKyAnIElOIElQNCAxMjcuMC4wLjFcclxuJyArCiAgICAgICdzPS1cclxuJyArCiAgICAgICd0PTAgMFxyXG4nOwp9OwoKU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24gPSBmdW5jdGlvbih0cmFuc2NlaXZlciwgY2FwcywgdHlwZSwgc3RyZWFtKSB7CiAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24odHJhbnNjZWl2ZXIua2luZCwgY2Fwcyk7CgogIC8vIE1hcCBJQ0UgcGFyYW1ldGVycyAodWZyYWcsIHB3ZCkgdG8gU0RQLgogIHNkcCArPSBTRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMoCiAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKTsKCiAgLy8gTWFwIERUTFMgcGFyYW1ldGVycyB0byBTRFAuCiAgc2RwICs9IFNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMoCiAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksCiAgICAgIHR5cGUgPT09ICdvZmZlcicgPyAnYWN0cGFzcycgOiAnYWN0aXZlJyk7CgogIHNkcCArPSAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcclxuJzsKCiAgaWYgKHRyYW5zY2VpdmVyLmRpcmVjdGlvbikgewogICAgc2RwICs9ICdhPScgKyB0cmFuc2NlaXZlci5kaXJlY3Rpb24gKyAnXHJcbic7CiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgIHNkcCArPSAnYT1zZW5kcmVjdlxyXG4nOwogIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICBzZHAgKz0gJ2E9c2VuZG9ubHlcclxuJzsKICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICBzZHAgKz0gJ2E9cmVjdm9ubHlcclxuJzsKICB9IGVsc2UgewogICAgc2RwICs9ICdhPWluYWN0aXZlXHJcbic7CiAgfQoKICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAvLyBzcGVjLgogICAgdmFyIG1zaWQgPSAnbXNpZDonICsgc3RyZWFtLmlkICsgJyAnICsKICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2suaWQgKyAnXHJcbic7CiAgICBzZHAgKz0gJ2E9JyArIG1zaWQ7CgogICAgLy8gZm9yIENocm9tZS4KICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKwogICAgICAgICcgJyArIG1zaWQ7CiAgICBpZiAodHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHsKICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgKwogICAgICAgICAgJyAnICsgbXNpZDsKICAgICAgc2RwICs9ICdhPXNzcmMtZ3JvdXA6RklEICcgKwogICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsgJyAnICsKICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgKwogICAgICAgICAgJ1xyXG4nOwogICAgfQogIH0KICAvLyBGSVhNRTogdGhpcyBzaG91bGQgYmUgd3JpdHRlbiBieSB3cml0ZVJ0cERlc2NyaXB0aW9uLgogIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKwogICAgICAnIGNuYW1lOicgKyBTRFBVdGlscy5sb2NhbENOYW1lICsgJ1xyXG4nOwogIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiYgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHsKICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICsKICAgICAgICAnIGNuYW1lOicgKyBTRFBVdGlscy5sb2NhbENOYW1lICsgJ1xyXG4nOwogIH0KICByZXR1cm4gc2RwOwp9OwoKLy8gR2V0cyB0aGUgZGlyZWN0aW9uIGZyb20gdGhlIG1lZGlhU2VjdGlvbiBvciB0aGUgc2Vzc2lvbnBhcnQuClNEUFV0aWxzLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHsKICAvLyBMb29rIGZvciBzZW5kcmVjdiwgc2VuZG9ubHksIHJlY3Zvbmx5LCBpbmFjdGl2ZSwgZGVmYXVsdCB0byBzZW5kcmVjdi4KICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgc3dpdGNoIChsaW5lc1tpXSkgewogICAgICBjYXNlICdhPXNlbmRyZWN2JzoKICAgICAgY2FzZSAnYT1zZW5kb25seSc6CiAgICAgIGNhc2UgJ2E9cmVjdm9ubHknOgogICAgICBjYXNlICdhPWluYWN0aXZlJzoKICAgICAgICByZXR1cm4gbGluZXNbaV0uc3Vic3RyKDIpOwogICAgICBkZWZhdWx0OgogICAgICAgIC8vIEZJWE1FOiBXaGF0IHNob3VsZCBoYXBwZW4gaGVyZT8KICAgIH0KICB9CiAgaWYgKHNlc3Npb25wYXJ0KSB7CiAgICByZXR1cm4gU0RQVXRpbHMuZ2V0RGlyZWN0aW9uKHNlc3Npb25wYXJ0KTsKICB9CiAgcmV0dXJuICdzZW5kcmVjdic7Cn07CgpTRFBVdGlscy5nZXRLaW5kID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7CiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogIHZhciBtbGluZSA9IGxpbmVzWzBdLnNwbGl0KCcgJyk7CiAgcmV0dXJuIG1saW5lWzBdLnN1YnN0cigyKTsKfTsKClNEUFV0aWxzLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICByZXR1cm4gbWVkaWFTZWN0aW9uLnNwbGl0KCcgJywgMilbMV0gPT09ICcwJzsKfTsKClNEUFV0aWxzLnBhcnNlTUxpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7CiAgdmFyIHBhcnRzID0gbGluZXNbMF0uc3Vic3RyKDIpLnNwbGl0KCcgJyk7CiAgcmV0dXJuIHsKICAgIGtpbmQ6IHBhcnRzWzBdLAogICAgcG9ydDogcGFyc2VJbnQocGFydHNbMV0sIDEwKSwKICAgIHByb3RvY29sOiBwYXJ0c1syXSwKICAgIGZtdDogcGFydHMuc2xpY2UoMykuam9pbignICcpCiAgfTsKfTsKClNEUFV0aWxzLnBhcnNlT0xpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICB2YXIgbGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ289JylbMF07CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoMikuc3BsaXQoJyAnKTsKICByZXR1cm4gewogICAgdXNlcm5hbWU6IHBhcnRzWzBdLAogICAgc2Vzc2lvbklkOiBwYXJ0c1sxXSwKICAgIHNlc3Npb25WZXJzaW9uOiBwYXJzZUludChwYXJ0c1syXSwgMTApLAogICAgbmV0VHlwZTogcGFydHNbM10sCiAgICBhZGRyZXNzVHlwZTogcGFydHNbNF0sCiAgICBhZGRyZXNzOiBwYXJ0c1s1XSwKICB9Owp9CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCmlmICh0cnVlKSB7CiAgbW9kdWxlLmV4cG9ydHMgPSBTRFBVdGlsczsKfQoKCi8qKiovIH0pLAovKiAyNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKCnZhciBTb3VuZE1ldGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7CgovKioKICogewogKiAgX2xvY2F0ZWQ6CiAqICBfd2VicnRjOgogKgogKiAgaWQ6CiAqICBtZW1JZDoKICogIG5hbWU6CiAqICB2b2ZmOgogKiAgYW9mZjoKICogIHR5cGU6IDAgMQogKiAgZXh0OgogKiAgb3duZXI6IHsKICogICAgaWQ6CiAqICAgIG5pY2tOYW1lOgogKiAgICBuYW1lOgogKiAgICBleHQ6CiAqICB9CiAqCiAqICBfbG9jYWxNZWRpYVN0cmVhbToKICogfQogKgogKgogKgogKi8KCmVtZWRpYS5zdWJzY3JpYmVkID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgaWYgKHN0cmVhbS5fbG9jYXRlZCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGlmIChzdHJlYW0udHlwZSA9PT0gMikgewogICAgICAgIHJldHVybiAhISghc3RyZWFtLl9sb2NhdGVkICYmIHN0cmVhbS5fd2VicnRjKTsKICAgIH0KCiAgICByZXR1cm4gc3RyZWFtLl93ZWJydGMgIT09IHVuZGVmaW5lZDsKfTsKCnZhciBNZWRpYVNvdW5kTWV0ZXIgPSBfdXRpbC5wcm90b3R5cGVFeHRlbmQoewogICAgdm9mZjogMCwKICAgIGFvZmY6IDAsCgogICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFzZWxmLl9tZWRpYVN0cmVhbSkgewogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJfbWVkaWFTdHJlYW0gZW1wdHkiKTsKICAgICAgICAgICAgdGhyb3cgIl9tZWRpYVN0cmVhbSBlbXB0eSI7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXNlbGYuaGFzRW5hYmxlZFRyYWNrcyhzZWxmLl9tZWRpYVN0cmVhbSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFzZWxmLl9fYXVkaW9Db250ZXh0KSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoInJlcXVpcmUgYXVkaW9Db250ZXh0Iik7CiAgICAgICAgICAgIHRocm93ICJyZXF1aXJlIGF1ZGlvQ29udGV4dCI7CiAgICAgICAgfQoKICAgICAgICBzZWxmLl9fc291bmRNZXRlciA9IG5ldyBTb3VuZE1ldGVyKHNlbGYuX19hdWRpb0NvbnRleHQpOwoKICAgICAgICBzZWxmLl9fc291bmRNZXRlci5jb25uZWN0VG9Tb3VyY2Uoc2VsZi5fbWVkaWFTdHJlYW0sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGYuX193b3JrZWQgPSBzZWxmLl9fc291bmRNZXRlci5fX3dvcmtlZCA9IHRydWU7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGhhc0VuYWJsZWRUcmFja3M6IGZ1bmN0aW9uIGhhc0VuYWJsZWRUcmFja3MobWVkaWFTdHJlYW0pIHsKICAgICAgICByZXR1cm4gZW1lZGlhLmhhc0VuYWJsZWRUcmFja3MobWVkaWFTdHJlYW0pOwogICAgfSwKCiAgICBnZXRTb3VuZE1ldGVyczogZnVuY3Rpb24gZ2V0U291bmRNZXRlcnMoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYuX19zb3VuZE1ldGVyIHx8ICFzZWxmLl9fd29ya2VkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghc2VsZi5fbWVkaWFTdHJlYW0uYWN0aXZlKSB7CiAgICAgICAgICAgIHNlbGYuX193b3JrZWQgJiYgc2VsZi5fZmluYWxseSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIXNlbGYuaGFzRW5hYmxlZFRyYWNrcyhzZWxmLl9tZWRpYVN0cmVhbSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5zdGFudDogc2VsZi5fX3NvdW5kTWV0ZXIuaW5zdGFudCwKICAgICAgICAgICAgc2xvdzogc2VsZi5fX3NvdW5kTWV0ZXIuc2xvdywKICAgICAgICAgICAgY2xpcDogc2VsZi5fX3NvdW5kTWV0ZXIuY2xpcAogICAgICAgIH07CiAgICB9LAoKICAgIF9maW5hbGx5OiBmdW5jdGlvbiBfZmluYWxseSgpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmIChzZWxmLl9fc291bmRNZXRlcikgewogICAgICAgICAgICBzZWxmLl9fc291bmRNZXRlci5zdG9wKCk7CiAgICAgICAgICAgIHNlbGYuX193b3JrZWQgPSBzZWxmLl9fc291bmRNZXRlci5fX3dvcmtlZCA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KfSk7Cgptb2R1bGUuZXhwb3J0cyA9IF91dGlsLnByb3RvdHlwZUV4dGVuZCh7IC8vdHlwZSAwIEFWcHViIDEgRGVza3RvcCAyIFN1YgogICAgX191bmRlZmluZWRFUURlbGV0ZTogdHJ1ZSwKCiAgICBVcGRhdGU6IF91dGlsLnByb3RvdHlwZUV4dGVuZCh7CgogICAgICAgIGlmQW9mZjogZnVuY3Rpb24gaWZBb2ZmKHVwZGF0ZSkgewogICAgICAgICAgICB0aGlzLmlmKCJhb2ZmIiwgdXBkYXRlKTsKICAgICAgICB9LAoKICAgICAgICBpZlZvZmY6IGZ1bmN0aW9uIGlmVm9mZih1cGRhdGUpIHsKICAgICAgICAgICAgdGhpcy5pZigidm9mZiIsIHVwZGF0ZSk7CiAgICAgICAgfSwKCiAgICAgICAgaWZNZWRpYVN0cmVhbTogZnVuY3Rpb24gaWZNZWRpYVN0cmVhbSh1cGRhdGUpIHsKICAgICAgICAgICAgdGhpcy5pZigibWVkaWFTdHJlYW0iLCB1cGRhdGUpOwogICAgICAgIH0sCgogICAgICAgIGlmOiBmdW5jdGlvbiBfaWYoa2V5LCB1cGRhdGUpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2tleV0gPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHVwZGF0ZSh0aGlzW2tleV0pOwogICAgICAgIH0KICAgIH0pLAoKICAgIGxvY2F0ZWQ6IGZ1bmN0aW9uIGxvY2F0ZWQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2F0ZWQgfHwgZmFsc2U7CiAgICB9LAoKICAgIHdlYnJ0YzogZnVuY3Rpb24gd2VicnRjKF93ZWJydGMpIHsKICAgICAgICBfd2VicnRjICYmICh0aGlzLl93ZWJydGMgPSBfd2VicnRjKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0sCgogICAgZ2V0TWVkaWFTdHJlYW06IGZ1bmN0aW9uIGdldE1lZGlhU3RyZWFtKCkgewogICAgICAgIGlmICh0eXBlb2YgdGhpcy5tZWRpYVN0cmVhbSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTdHJlYW07CiAgICAgICAgfQoKICAgICAgICAvLyBpZih0aGlzLnR5cGUgPT09IDIgJiYgdGhpcy5fd2VicnRjICYmIHRoaXMuX3dlYnJ0Yy5nZXRSZW1vdGVTdHJlYW0oKSl7CiAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLl93ZWJydGMuZ2V0UmVtb3RlU3RyZWFtKCk7CiAgICAgICAgLy8gfQoKICAgICAgICBpZiAodGhpcy5fbG9jYXRlZCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9jYWxNZWRpYVN0cmVhbTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLl93ZWJydGMgJiYgKHRoaXMuX3dlYnJ0Yy5nZXRSZW1vdGVTdHJlYW0oKSB8fCB0aGlzLl93ZWJydGMuZ2V0TG9jYWxTdHJlYW0oKSk7CiAgICB9LAoKICAgIHJlcXVlc3RGcmFtZTogZnVuY3Rpb24gcmVxdWVzdEZyYW1lKCkgewogICAgICAgIHRoaXMuX2xvY2FsTWVkaWFTdHJlYW0gJiYgdGhpcy5fbG9jYWxNZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgIHR5cGVvZiB0cmFjay5yZXF1ZXN0RnJhbWUgPT09ICJmdW5jdGlvbiIgJiYgdHJhY2sucmVxdWVzdEZyYW1lKCk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGdldExvY2FsTWVkaWFTdHJlYW06IGZ1bmN0aW9uIGdldExvY2FsTWVkaWFTdHJlYW0oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsTWVkaWFTdHJlYW07CiAgICB9LAoKICAgIGdldFJlbW90ZU1lZGlhU3RyZWFtOiBmdW5jdGlvbiBnZXRSZW1vdGVNZWRpYVN0cmVhbSgpIHsKICAgICAgICBpZiAodGhpcy5fd2VicnRjICYmIHR5cGVvZiB0aGlzLl93ZWJydGMuZ2V0UmVtb3RlU3RyZWFtKCkgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl93ZWJydGMuZ2V0UmVtb3RlU3RyZWFtKCk7CiAgICAgICAgfQogICAgfSwKCiAgICBtdXRlZE5lZWQ6IGZ1bmN0aW9uIG11dGVkTmVlZCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5tdXRlZE11dGVkIHx8IGZhbHNlOwogICAgfSwKCiAgICBpZk1lZGlhU3RyZWFtOiBmdW5jdGlvbiBpZk1lZGlhU3RyZWFtKHVwZGF0ZSkgewogICAgICAgIGlmICh0eXBlb2YgdGhpcy5tZWRpYVN0cmVhbSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgdXBkYXRlKHRoaXMubWVkaWFTdHJlYW0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBpZih0aGlzLnR5cGUgPT09IDIgJiYgdGhpcy5fd2VicnRjICYmIHRoaXMuX3dlYnJ0Yy5nZXRSZW1vdGVTdHJlYW0oKSAhPT0gInVuZGVmaW5lZCIpewogICAgICAgIC8vICAgICB1cGRhdGUodGhpcy5fd2VicnRjLmdldFJlbW90ZVN0cmVhbSgpKTsKICAgICAgICAvLyAgICAgcmV0dXJuOwogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKHRoaXMuX2xvY2F0ZWQgJiYgdHlwZW9mIHRoaXMuX2xvY2FsTWVkaWFTdHJlYW0gIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHVwZGF0ZSh0aGlzLl9sb2NhbE1lZGlhU3RyZWFtKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF0aGlzLl9sb2NhdGVkICYmIHRoaXMuX3dlYnJ0YyAmJiB0eXBlb2YgdGhpcy5fd2VicnRjLmdldFJlbW90ZVN0cmVhbSgpICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICB1cGRhdGUodGhpcy5fd2VicnRjLmdldFJlbW90ZVN0cmVhbSgpKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0sCgogICAgc3Vic2NyaWJlZDogZnVuY3Rpb24gc3Vic2NyaWJlZCgpIHsKICAgICAgICByZXR1cm4gZW1lZGlhLnN1YnNjcmliZWQodGhpcyk7CiAgICB9LAoKICAgIGdldEh0bWxET01JRDogZnVuY3Rpb24gZ2V0SHRtbERPTUlEKCkgewogICAgICAgIHJldHVybiAiX21fIiArIHRoaXMub3duZXIuaWQgKyAiX3NfIiArIHRoaXMuaWQ7CiAgICB9LAoKICAgIE1lZGlhU291bmRNZXRlcjogTWVkaWFTb3VuZE1ldGVyLAoKICAgIFN0cmVhbVNvdW5kTWV0ZXI6IF91dGlsLnByb3RvdHlwZUV4dGVuZCh7CiAgICAgICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICBpZiAoIXNlbGYuX3N0cmVhbSB8fCB0eXBlb2Ygc2VsZi5fc3RyZWFtLmdldE1lZGlhU3RyZWFtICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJfc3RyZWFtIGVtcHR5IG9yIG5vdCBmb3VuZCBtZXRob2QgZ2V0TWVkaWFTdHJlYW0iKTsKICAgICAgICAgICAgICAgIHRocm93ICJfc3RyZWFtIGVtcHR5IG9yIG5vdCBmb3VuZCBtZXRob2QgZ2V0TWVkaWFTdHJlYW0iOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZWxmLl9zdHJlYW1JZCA9IHNlbGYuX3N0cmVhbS5pZDsKICAgICAgICAgICAgc2VsZi5fc3RyZWFtQ3JlYXRlSWQgPSBzZWxmLl9zdHJlYW0uX19jcmVhdGVfaWQ7CiAgICAgICAgICAgIHNlbGYuX21lZGlhU3RyZWFtID0gc2VsZi5fbWVkaWFTdHJlYW07CgogICAgICAgICAgICBpZiAoc2VsZi5fc3RyZWFtLnR5cGUgPT09IDIgJiYgIXNlbGYuX3N0cmVhbS5sb2NhdGVkKCkgJiYgIXNlbGYuX3dlYnJ0YykgewogICAgICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigicmVxdWlyZSB3ZWJydGMuIHdoZW4gdHlwZSA9IDIgYW5kIG5vdCBsb2NhdGVkIik7CiAgICAgICAgICAgICAgICB0aHJvdyAicmVxdWlyZSB3ZWJydGMuIHdoZW4gdHlwZSA9IDIgYW5kIG5vdCBsb2NhdGVkIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2VsZi5fX21lZGlhU291bmRNZXRlciA9IHNlbGYuX19tZWRpYVNvdW5kTWV0ZXIgfHwgbmV3IE1lZGlhU291bmRNZXRlcih7CiAgICAgICAgICAgICAgICBfX2F1ZGlvQ29udGV4dDogc2VsZi5fX2F1ZGlvQ29udGV4dCwKICAgICAgICAgICAgICAgIF9tZWRpYVN0cmVhbTogc2VsZi5fbWVkaWFTdHJlYW0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHNlbGYuX19tZWRpYVNvdW5kTWV0ZXIudXNlQ291bnQgPSAoc2VsZi5fX21lZGlhU291bmRNZXRlci51c2VDb3VudCB8fCAwKSArIDE7CiAgICAgICAgfSwKCiAgICAgICAgb25Tb3VuZE1ldGVyczogZnVuY3Rpb24gb25Tb3VuZE1ldGVycyhjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICB2YXIgZW1wdHlSZXN1bHQgPSB7CiAgICAgICAgICAgICAgICBpbnN0YW50OiAwLAogICAgICAgICAgICAgICAgc2xvdzogMCwKICAgICAgICAgICAgICAgIGNsaXA6IDAKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmIChzZWxmLl9zdHJlYW0uYW9mZikgewogICAgICAgICAgICAgICAgc2VsZi5fZmluYWxseSgpOwogICAgICAgICAgICAgICAgY2FsbGJhY2soZW1wdHlSZXN1bHQpOwogICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UmVzdWx0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VsZi5fc3RyZWFtLnR5cGUgIT09IDIgJiYgc2VsZi5fc3RyZWFtLnN1YkFyZ3MgJiYgc2VsZi5fc3RyZWFtLnN1YkFyZ3Muc3ViU0F1ZGlvICE9PSB1bmRlZmluZWQgJiYgIXNlbGYuX3N0cmVhbS5zdWJBcmdzLnN1YlNBdWRpbykgewogICAgICAgICAgICAgICAgc2VsZi5fZmluYWxseSgpOwogICAgICAgICAgICAgICAgY2FsbGJhY2soZW1wdHlSZXN1bHQpOwogICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UmVzdWx0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VsZi5fc3RyZWFtLmlkID09IDAgfHwgc2VsZi5fc3RyZWFtLnR5cGUgPT09IDIgJiYgIXNlbGYuX3N0cmVhbS5sb2NhdGVkKCkgJiYgKCFzZWxmLl9zdHJlYW0uc3ViQXJncyB8fCAhc2VsZi5fc3RyZWFtLnN1YkFyZ3Muc3ViU0F1ZGlvKSkgewogICAgICAgICAgICAgICAgdmFyIHJlY2VpdmVycyA9IHNlbGYuX3dlYnJ0Yy5nZXRSZWNlaXZlcnNPZlBlZXJDb25uZWN0aW9uKCk7CgogICAgICAgICAgICAgICAgaWYgKCFyZWNlaXZlcnMgfHwgcmVjZWl2ZXJzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVtcHR5UmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlSZXN1bHQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIGF1ZGlvUmVjZWl2ZXI7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlY2VpdmVycykgewogICAgICAgICAgICAgICAgICAgIGlmIChyZWNlaXZlcnNbaV0udHJhY2sua2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICAgICAgICAgICAgICBhdWRpb1JlY2VpdmVyID0gcmVjZWl2ZXJzW2ldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIWF1ZGlvUmVjZWl2ZXIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlbXB0eVJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UmVzdWx0OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXVkaW9SZWNlaXZlci5nZXRDb250cmlidXRpbmdTb3VyY2VzID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJ0cENvbnRyaWJ1dGluZ1NvdXJjZXMgPSBhdWRpb1JlY2VpdmVyLmdldENvbnRyaWJ1dGluZ1NvdXJjZXMoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZW1lZGlhLmNvbmZpZy5fcHJpbnRTb3VuZERhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3V0aWwubG9nZ2VyLmRlYnVnKHNlbGYuX3N0cmVhbS5pZCwgc2VsZi5fc3RyZWFtLmNzcmMsICJydHBDb250cmlidXRpbmdTb3VyY2VzICIsIHJ0cENvbnRyaWJ1dGluZ1NvdXJjZXMpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFydHBDb250cmlidXRpbmdTb3VyY2VzIHx8IHJ0cENvbnRyaWJ1dGluZ1NvdXJjZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVtcHR5UmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UmVzdWx0OwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHJ0cENvbnRyaWJ1dGluZ1NvdXJjZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ0cENvbnRyaWJ1dGluZ1NvdXJjZXNbaV0uc291cmNlID09IHNlbGYuX3N0cmVhbS5jc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBzZWxmLl9zdHJlYW0uY3NyYzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGVtZWRpYS5jb25maWcuX3ByaW50U291bmREYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsLmxvZ2dlci5kZWJ1ZyhzZWxmLl9zdHJlYW0uaWQsIHNlbGYuX3N0cmVhbS5jc3JjLCAic291cmNlICIsIHNvdXJjZSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZW1wdHlSZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlSZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgX21ldGVyID0gc2VsZi5fX21lZGlhU291bmRNZXRlci5nZXRTb3VuZE1ldGVycygpIHx8IGVtcHR5UmVzdWx0OwoKICAgICAgICAgICAgdmFyIHdlYnJ0YyA9IHNlbGYuX3N0cmVhbS50eXBlID09PSAyID8gc2VsZi5fd2VicnRjIDogc2VsZi5fc3RyZWFtLl93ZWJydGM7CiAgICAgICAgICAgIGlmICgoZW1lZGlhLm1ldGVyV2l0aFRyYWNrQXVkaW9MZXZlbCB8fCBfbWV0ZXIuaW5zdGFudCA9PT0gMCkgJiYgd2VicnRjICYmICF3ZWJydGMuY2xvc2VkICYmIHdlYnJ0Yy5fcnRjUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICAgICAgICAgIHdlYnJ0Yy5fcnRjUGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uIChzdGF0cykgewogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0cy5zaXplID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMudHlwZSA9PT0gInRyYWNrIiAmJiAocmVzLmtpbmQgPT09ICJhdWRpbyIgfHwgcmVzLnRyYWNrSWRlbnRpZmllciA9PT0gImF1ZGlvIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWV0ZXIudHJhY2tBdWRpb0xldmVsID0gcmVzLmF1ZGlvTGV2ZWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9fbWV0ZXIudHJhY2tUb3RhbEF1ZGlvRW5lcmd5ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWV0ZXIudHJhY2tUb3RhbEF1ZGlvRW5lcmd5ID0gcmVzLnRvdGFsQXVkaW9FbmVyZ3k7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soX21ldGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhbGxiYWNrKF9tZXRlcik7CiAgICAgICAgfSwKCiAgICAgICAgX2ZpbmFsbHk6IGZ1bmN0aW9uIF9maW5hbGx5KCkgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICBpZiAoc2VsZi5fc3RyZWFtLnR5cGUgPT09IDIgJiYgc2VsZi5fc3RyZWFtLmxvY2F0ZWQoKSAmJiBzZWxmLl9yZW1vdGVNZWRpYVNvdW5kTWV0ZXJzKSB7CiAgICAgICAgICAgICAgICBzZWxmLl9yZW1vdGVNZWRpYVNvdW5kTWV0ZXJzLl9maW5hbGx5KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNlbGYuX19tZWRpYVNvdW5kTWV0ZXIudXNlQ291bnQtLTsKCiAgICAgICAgICAgIGlmIChzZWxmLl9fbWVkaWFTb3VuZE1ldGVyLnVzZUNvdW50ID09PSAwKSB7CiAgICAgICAgICAgICAgICBzZWxmLl9fbWVkaWFTb3VuZE1ldGVyLl9maW5hbGx5KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KQp9KTsKCi8qKiovIH0pLAovKiAyNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8qCiAqICBDb3B5cmlnaHQgKGMpIDIwMTUgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqCiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICogIHRyZWUuCiAqLwoKCgovLyBNZXRlciBjbGFzcyB0aGF0IGdlbmVyYXRlcyBhIG51bWJlciBjb3JyZWxhdGVkIHRvIGF1ZGlvIHZvbHVtZS4KLy8gVGhlIG1ldGVyIGNsYXNzIGl0c2VsZiBkaXNwbGF5cyBub3RoaW5nLCBidXQgaXQgbWFrZXMgdGhlCi8vIGluc3RhbnRhbmVvdXMgYW5kIHRpbWUtZGVjYXlpbmcgdm9sdW1lcyBhdmFpbGFibGUgZm9yIGluc3BlY3Rpb24uCi8vIEl0IGFsc28gcmVwb3J0cyBvbiB0aGUgZnJhY3Rpb24gb2Ygc2FtcGxlcyB0aGF0IHdlcmUgYXQgb3IgbmVhcgovLyB0aGUgdG9wIG9mIHRoZSBtZWFzdXJlbWVudCByYW5nZS4KCmZ1bmN0aW9uIFNvdW5kTWV0ZXIoY29udGV4dCkgewogIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgdGhpcy5pbnN0YW50ID0gMC4wOwogIHRoaXMuc2xvdyA9IDAuMDsKICB0aGlzLmNsaXAgPSAwLjA7CiAgdGhpcy5zY3JpcHQgPSBjb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcigyMDQ4LCAxLCAxKTsKICB2YXIgdGhhdCA9IHRoaXM7CiAgdGhpcy5zY3JpcHQub25hdWRpb3Byb2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHZhciBpbnB1dCA9IGV2ZW50LmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKDApOwogICAgdmFyIGk7CiAgICB2YXIgc3VtID0gMC4wOwogICAgdmFyIGNsaXBjb3VudCA9IDA7CiAgICBmb3IgKGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyArK2kpIHsKICAgICAgc3VtICs9IGlucHV0W2ldICogaW5wdXRbaV07CiAgICAgIGlmIChNYXRoLmFicyhpbnB1dFtpXSkgPiAwLjk5KSB7CiAgICAgICAgY2xpcGNvdW50ICs9IDE7CiAgICAgIH0KICAgIH0KICAgIHRoYXQuaW5zdGFudCA9IE1hdGguc3FydChzdW0gLyBpbnB1dC5sZW5ndGgpOwogICAgdGhhdC5zbG93ID0gMC45NSAqIHRoYXQuc2xvdyArIDAuMDUgKiB0aGF0Lmluc3RhbnQ7CiAgICB0aGF0LmNsaXAgPSBjbGlwY291bnQgLyBpbnB1dC5sZW5ndGg7CiAgfTsKfQoKU291bmRNZXRlci5wcm90b3R5cGUuY29ubmVjdFRvU291cmNlID0gZnVuY3Rpb24gKHN0cmVhbSwgY2FsbGJhY2spIHsKICBjb25zb2xlLmxvZygnU291bmRNZXRlciBjb25uZWN0aW5nJyk7CiAgdHJ5IHsKICAgIHRoaXMubWljID0gdGhpcy5jb250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHN0cmVhbSk7CiAgICB0aGlzLm1pYy5jb25uZWN0KHRoaXMuc2NyaXB0KTsKICAgIC8vIG5lY2Vzc2FyeSB0byBtYWtlIHNhbXBsZSBydW4sIGJ1dCBzaG91bGQgbm90IGJlLgogICAgdGhpcy5zY3JpcHQuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pOwogICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgY2FsbGJhY2sobnVsbCk7CiAgICB9CiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5lcnJvcihlKTsKICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgIGNhbGxiYWNrKGUpOwogICAgfQogIH0KfTsKU291bmRNZXRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLm1pYy5kaXNjb25uZWN0KCk7CiAgdGhpcy5zY3JpcHQuZGlzY29ubmVjdCgpOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBTb3VuZE1ldGVyOwoKLyoqKi8gfSksCi8qIDI4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIkhhbmRsZXIiKTsKCnZhciBfX2V2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7CgovKioKICogRXJyb3IoewogKiAgIGNvZGU6CiAqICAgdGFyZ2V0T2JqOgogKiAgIGV2dE9iajoKICogfSkKICoKICoKICoKICoKICovCnZhciBIYW5kbGVyID0gX3V0aWwucHJvdG90eXBlRXh0ZW5kKHsKICAgIG9uRXZlbnQ6IGZ1bmN0aW9uIG9uRXZlbnQoZXZ0KSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBldnQgJiYgX2xvZ2dlci5pbmZvKCJbRVZUXSIsIGV2dC5tZXNzYWdlKCksIGV2dC5oaWRkZW4gfHwgIiIpOwoKICAgICAgICBpZiAoZXZ0IGluc3RhbmNlb2YgX19ldmVudC5TZXJ2ZXJSZWZ1c2VFbnRlcikgewogICAgICAgICAgICBldnQuZmFpbGVkICYmIGV2dC5mYWlsZWQgPT09IC05NTI3MCAmJiAoZXZ0LmZhaWxlZCA9IC05NTI3KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFmdGVyTm90aWZ5KCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVFdmVudChldnQpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChldnQgaW5zdGFuY2VvZiBlbWVkaWEuZXZlbnQuU3RyZWFtU3RhdGUgJiYgZXZ0LnN0cmVhbSAmJiBldnQuc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBhZnRlck5vdGlmeSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBldnQuaGlkZGVuIHx8IHNlbGYub25Ob3RpZnlFdmVudCAmJiBzZWxmLm9uTm90aWZ5RXZlbnQoZXZ0KTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBhZnRlck5vdGlmeSgpOwogICAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlRXZlbnQ6IGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGV2dCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKGV2dCBpbnN0YW5jZW9mIF9fZXZlbnQuUmVjdlJlc3BvbnNlKSB7CiAgICAgICAgICAgIHNlbGYuX29uUmVjdlJlc3BvbnNlKGV2dCk7CiAgICAgICAgfSBlbHNlIGlmIChldnQgaW5zdGFuY2VvZiBfX2V2ZW50LlNlcnZlclJlZnVzZUVudGVyKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiU2VydmVyIHJlZnVzZSwgIiwgZXZ0LmZhaWxlZCwgZXZ0Lm1zZyk7CiAgICAgICAgICAgIHNlbGYub25TZXJ2ZXJSZWZ1c2VFbnRlcihldnQpOwogICAgICAgIH0gZWxzZSBpZiAoZXZ0IGluc3RhbmNlb2YgX19ldmVudC5FbnRlckZhaWwpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJFbnRlciBmYWlsLCByZXN1bHQgPSAiLCBldnQuZmFpbGVkKTsKICAgICAgICAgICAgc2VsZi5vbkVudGVyRmFpbCgpOwogICAgICAgIH0gZWxzZSBpZiAoZXZ0IGluc3RhbmNlb2YgX19ldmVudC5XU0Nsb3NlKSB7CiAgICAgICAgICAgIC8vX2xvZ2dlci53YXJuKCJXZWJzb2NrZXQgY2xvc2VkIik7CiAgICAgICAgICAgIHNlbGYub25XU0Nsb3NlKCk7CiAgICAgICAgfSBlbHNlIGlmIChldnQgaW5zdGFuY2VvZiBfX2V2ZW50LldTQ29ubmVjdGVkKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiV2Vic29ja2V0IGNvbm5lY3RlZCIpOwogICAgICAgIH0gZWxzZSBpZiAoZXZ0IGluc3RhbmNlb2YgX19ldmVudC5JQ0VDb25uZWN0ZWQpIHsKICAgICAgICAgICAgdmFyIHdlYnJ0YyA9IGV2dC53ZWJydGM7CiAgICAgICAgICAgIHNlbGYub25JQ0VDb25uZWN0ZWQod2VicnRjKTsKICAgICAgICB9IGVsc2UgaWYgKGV2dCBpbnN0YW5jZW9mIF9fZXZlbnQuSUNFQ29ubmVjdEZhaWwpIHsKICAgICAgICAgICAgdmFyIHdlYnJ0YyA9IGV2dC53ZWJydGM7CiAgICAgICAgICAgIHNlbGYub25JQ0VDb25uZWN0RmFpbCh3ZWJydGMpOwogICAgICAgIH0gZWxzZSBpZiAoZXZ0IGluc3RhbmNlb2YgX19ldmVudC5JQ0VEaXNjb25uZWN0ZWQpIHsKICAgICAgICAgICAgLy/lj6ropoFJQ0Xmlq3lvIAKICAgICAgICAgICAgdmFyIHdlYnJ0YyA9IGV2dC53ZWJydGM7CiAgICAgICAgICAgIHNlbGYub25JQ0VEaXNjb25uZWN0ZWQod2VicnRjKTsKICAgICAgICB9IGVsc2UgaWYgKGV2dCBpbnN0YW5jZW9mIF9fZXZlbnQuSUNFQ2xvc2VkKSB7CiAgICAgICAgICAgIC8v5Y+q6KaBSUNF5pat5byACiAgICAgICAgICAgIHZhciB3ZWJydGMgPSBldnQud2VicnRjOwogICAgICAgICAgICBzZWxmLm9uSUNFQ2xvc2VkKHdlYnJ0Yyk7CiAgICAgICAgfSBlbHNlIGlmIChldnQgaW5zdGFuY2VvZiBfX2V2ZW50LklDRVJlbW90ZU1lZGlhU3RyZWFtKSB7CiAgICAgICAgICAgIHNlbGYub25JQ0VSZW1vdGVNZWRpYVN0cmVhbShldnQud2VicnRjKTsKICAgICAgICB9IGVsc2UgaWYgKGV2dCBpbnN0YW5jZW9mIF9fZXZlbnQuUHVzaFN1Y2Nlc3MpIHsKICAgICAgICAgICAgc2VsZi5fY2FjaGVTdHJlYW1zW2V2dC5zdHJlYW0uaWRdID0gc2VsZi5fbGlua2VkU3RyZWFtc1tldnQuc3RyZWFtLmlkXSA9IGV2dC5zdHJlYW07CgogICAgICAgICAgICB2YXIgX3N0cmVhbSA9IHNlbGYubmV3U3RyZWFtKGV2dC5zdHJlYW0pOwoKICAgICAgICAgICAgaWYgKGV2dC5oaWRkZW4gJiYgIXNlbGYuX21heWJlTm90RXhpc3RTdHJlYW1zW2V2dC5zdHJlYW0uaWRdICYmICFfc3RyZWFtLmlzUmVwdWJsaXNoZWQpIHsKICAgICAgICAgICAgICAgIHNlbGYuX29uQWRkU3RyZWFtKF9zdHJlYW0pOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VsZi5pc1NhZmFyaSgpKSB7CiAgICAgICAgICAgICAgICBlbWVkaWEuX2lzU2FmYXJpWWV0UHVzaGVkU3RyZWFtID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vX3N0cmVhbSAmJiAoX3N0cmVhbS5tZWRpYVN0cmVhbSA9IF9zdHJlYW0uZ2V0TWVkaWFTdHJlYW0oKSk7CiAgICAgICAgICAgICAgICBfc3RyZWFtICYmIHNlbGYub25VcGRhdGVTdHJlYW0oX3N0cmVhbSwgbmV3IF9zdHJlYW0uVXBkYXRlKHsgdm9mZjogX3N0cmVhbS52b2ZmLCBhb2ZmOiBfc3RyZWFtLmFvZmYsIG1lZGlhU3RyZWFtOiBfc3RyZWFtLmdldE1lZGlhU3RyZWFtKCkgfSkpOwoKICAgICAgICAgICAgICAgIC8vIF91dGlsLmZvckVhY2goc2VsZi5fY2FjaGVTdHJlYW1zLCBmdW5jdGlvbiAoX3B1YlNJZCwgX3N0cmVhbSkgewogICAgICAgICAgICAgICAgLy8gICAgIGlmKF9zdHJlYW0udHlwZSA9PT0gMil7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNlbGYub25TdHJlYW1Db250cm9sKHVuZGVmaW5lZCwgX3B1YlNJZCwgX3N0cmVhbS52b2ZmLCBfc3RyZWFtLl8xX2FvZmYpOwogICAgICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNTYWZhcmkoKSkgewogICAgICAgICAgICAgICAgICAgIF91dGlsLmZvckVhY2goc2VsZi5fY2FjaGVTdHJlYW1zLCBmdW5jdGlvbiAoX3NpZCwgX3N0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3N0cmVhbS5fYXV0b1N1YldoZW5QdXNoU3RyZWFtID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoX3N0cmVhbSwgIl9hdXRvU3ViV2hlblB1c2hTdHJlYW0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlV2VicnRjQW5kU3Vic2NyaWJlU3RyZWFtKF9zdHJlYW0uaWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGV2dCBpbnN0YW5jZW9mIF9fZXZlbnQuU3ViU3VjY2VzcykgewogICAgICAgICAgICBzZWxmLl9saW5rZWRTdHJlYW1zW2V2dC5zdHJlYW0uaWRdID0gZXZ0LnN0cmVhbTsKICAgICAgICAgICAgZXZ0LnN0cmVhbS5fem9vbSA9IDE7CiAgICAgICAgfSBlbHNlIGlmIChldnQgaW5zdGFuY2VvZiBfX2V2ZW50LlB1c2hGYWlsKSB7CiAgICAgICAgICAgIGlmIChldnQuaGlkZGVuICE9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlbW92ZVN0cmVhbSA9IF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzZWxmLl9saW5rZWRTdHJlYW1zLCBldnQuc3RyZWFtLmlkKTsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiUHVzaEZhaWwgcmVtb3ZlIGZyb20gX2xpbmtlZFN0cmVhbXMiLCBldnQuc3RyZWFtLmlkLCBfcmVtb3ZlU3RyZWFtKTsKCiAgICAgICAgICAgICAgICBpZiAoX3JlbW92ZVN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgIHZhciBfc3RyZWFtID0gc2VsZi5uZXdTdHJlYW0oZXZ0LnN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5vblJlbW92ZVN0cmVhbShfc3RyZWFtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZXZ0IGluc3RhbmNlb2YgX19ldmVudC5TdWJGYWlsKSB7CiAgICAgICAgICAgIGlmIChldnQuaGlkZGVuICE9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAvL2RlbGV0ZSBzZWxmLl9saW5rZWRTdHJlYW1zW2V2dC5zdHJlYW0uaWRdOwogICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX2xpbmtlZFN0cmVhbXMsIGV2dC5zdHJlYW0uaWQpOwogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJTdWJGYWlsIHJlbW92ZSBmcm9tIF9saW5rZWRTdHJlYW1zIiwgZXZ0LnN0cmVhbS5pZCk7CgogICAgICAgICAgICAgICAgdmFyIF9zdHJlYW0gPSBzZWxmLm5ld1N0cmVhbShldnQuc3RyZWFtKTsKICAgICAgICAgICAgICAgIF9zdHJlYW0ucnRjSWQgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBfc3RyZWFtLl93ZWJydGMgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBfc3RyZWFtLm1lZGlhU3RyZWFtID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgICAgIHNlbGYub25VcGRhdGVTdHJlYW0oX3N0cmVhbSwgbmV3IF9zdHJlYW0uVXBkYXRlKF9zdHJlYW0pKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZXZ0IGluc3RhbmNlb2YgX19ldmVudC5TdWJGYWlsTm90U3VwcG9ydFZDb2RlcykgewogICAgICAgICAgICAvLyBTZXJ2ZXLlj5HnjrAg5q2k6K6i6ZiF5pe2IOS4jeaUr+aMgeinhumikeinhumikee8lueggeOAguaIluiAhSDmjqjpgIHmtYEg5omT5byA6KeG6aKR5pe277yM5bm25LiN5piv5omA5pyJ55qE6K6i6ZiF56uvIOmDveaUr+aMgeatpOinhumikee8lueggQogICAgICAgICAgICAvLyBTZXJ2ZXLkv53mjIHov5nkuKpjaGFubmVs77yM5a6i5oi356uv6Ieq6KGM5aSE55CGCgogICAgICAgICAgICB2YXIgc3RyZWFtID0gZXZ0LnN0cmVhbTsKCiAgICAgICAgICAgIF9sb2dnZXIud2FybigiUnRjIGRvbm90IHN1cHBvcnQgcHViIFZDb2Rlcy4gY2xvc2UuIHN1YiBmYWlsLiIsIHN0cmVhbS5ydGNJZCwgIiAtPiAiLCBzdHJlYW0uaWQpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc2VsZi5vbk5vdFN1cHBvcnRQdWJsaXNoVmlkZW9Db2RlY3MgJiYgc2VsZi5vbk5vdFN1cHBvcnRQdWJsaXNoVmlkZW9Db2RlY3Moc3RyZWFtKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyB2YXIgc3RyZWFtSWQgPSBzdHJlYW0uaWQ7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIHZhciB3ZWJydGMgPSBzZWxmLl9nZXRXZWJydGMoc3RyZWFtSWQpOwogICAgICAgICAgICAvLyBpZih3ZWJydGMgJiYgd2VicnRjLmlzQ29ubmVjdGVkKCkpewogICAgICAgICAgICAvLyAgICAgc2VsZi5zdWJzY3JpYmVTdHJlYW0od2VicnRjLl9ydGNJZCwgc3RyZWFtSWQsIHVuZGVmaW5lZCwge3N1YlNWaWRlbzogZmFsc2UsIHN1YlNBdWRpbzogdHJ1ZX0pOwogICAgICAgICAgICAvLyAgICAgcmV0dXJuOwogICAgICAgICAgICAvLyB9CiAgICAgICAgfSBlbHNlIGlmIChldnQgaW5zdGFuY2VvZiBfX2V2ZW50LkVudGVyU3VjY2VzcykgewogICAgICAgICAgICBzZWxmLm9uRW50ZXJTdWNjZXNzKCk7CiAgICAgICAgfSBlbHNlIGlmIChldnQgaW5zdGFuY2VvZiBfX2V2ZW50LlN3aXRjaFZDb2RlcykgewogICAgICAgICAgICB2YXIgc3RyZWFtID0gZXZ0LnN0cmVhbTsKICAgICAgICAgICAgdmFyIHVzZVZDb2RlcyA9IGV2dC51c2VWQ29kZXM7CiAgICAgICAgICAgIHZhciB3ZWJydGMgPSBzdHJlYW0uX3dlYnJ0YzsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJSdGMgc3dpdGNoIFZDb2Rlcy4gIiwgc3RyZWFtLmlkLCB1c2VWQ29kZXMpOwoKICAgICAgICAgICAgaWYgKCF1c2VWQ29kZXMgfHwgdXNlVkNvZGVzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlJ0YyBzd2l0Y2ggVkNvZGVzLiBlcnJvciEgdXNlVkNvZGVzIGlzIGVtcHR5ICIsIHN0cmVhbS5pZCwgdXNlVkNvZGVzKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHdlYnJ0YyAmJiB3ZWJydGMub3B0aW1hbFZpZGVvQ29kZWNzKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdlYnJ0Yy5vcHRpbWFsVmlkZW9Db2RlY3MgPT09ICdzdHJpbmcnICYmIHdlYnJ0Yy5vcHRpbWFsVmlkZW9Db2RlY3MgPT0gdXNlVkNvZGVzWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJSdGMgc3dpdGNoIFZDb2Rlcy4gaWdyb25lIC4gdXNlVkNvZGVzID09IG9wdGltYWxWaWRlb0NvZGVjcyAiLCBzdHJlYW0uaWQsIHdlYnJ0Yy5fcnRjSWQsIHVzZVZDb2Rlcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKF91dGlsLmlzQXJyYXkod2VicnRjLm9wdGltYWxWaWRlb0NvZGVjcykgJiYgd2VicnRjLm9wdGltYWxWaWRlb0NvZGVjcy5sZW5ndGggPiAwICYmIHdlYnJ0Yy5vcHRpbWFsVmlkZW9Db2RlY3NbMF0gPT0gdXNlVkNvZGVzWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJSdGMgc3dpdGNoIFZDb2Rlcy4gaWdyb25lIGRkZCAuIHVzZVZDb2RlcyA9PSBvcHRpbWFsVmlkZW9Db2RlY3MgIiwgc3RyZWFtLmlkLCB3ZWJydGMuX3J0Y0lkLCB1c2VWQ29kZXMpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgc3RyZWFtLm9wdGltYWxWaWRlb0NvZGVjcyA9IHVzZVZDb2RlczsKCiAgICAgICAgICAgIHdlYnJ0YyAmJiBzZWxmLmNsb3NlV2VicnRjKHdlYnJ0Yy5nZXRSdGNJZCgpLCB0cnVlKTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzdHJlYW0uaWNlUmVidWlsZENvdW50ID0gMTsKICAgICAgICAgICAgICAgIHNlbGYuaWNlUmVidWlsZChzdHJlYW0pOwogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJSdGMgc3dpdGNoIFZDb2Rlcy4gaWNlUmVidWlsZCBlbmQuIiwgc3RyZWFtLmlkLCB1c2VWQ29kZXMpOwogICAgICAgICAgICB9LCAzMDApOwogICAgICAgIH0KICAgIH0sCgogICAgX29uUmVjdlJlc3BvbnNlOiBmdW5jdGlvbiBfb25SZWN2UmVzcG9uc2UoZXZ0KSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcmVxdWVzdCA9IGV2dC5yZXF1ZXN0OwogICAgICAgIHZhciByZXNwb25zZSA9IGV2dC5yZXNwb25zZTsKCiAgICAgICAgaWYgKHJlcXVlc3QgJiYgcmVzcG9uc2UgJiYgcmVxdWVzdC5vcCAhPT0gMjAwICYmIHJlcXVlc3Qub3AgIT09IDEwMDIgJiYgcmVzcG9uc2UucmVzdWx0ICE9PSAwKSB7CgogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlNlcnZlciByZWZ1c2UuIHdoZW4gcmVxdWVzdCA9ICIsIHJlcXVlc3QpOwoKICAgICAgICAgICAgdmFyIGZhaWxlZCA9IGV2dC5mYWlsZWQ7CiAgICAgICAgICAgIHN3aXRjaCAoZmFpbGVkKSB7CiAgICAgICAgICAgICAgICBjYXNlIC05NTI3OgogICAgICAgICAgICAgICAgY2FzZSAtOTUyNzA6CiAgICAgICAgICAgICAgICAgICAgLy9zZWxmLmNsb3NlKDQsIC05NTI3KTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgLTUwMDoKICAgICAgICAgICAgICAgIGNhc2UgLTUwMjoKICAgICAgICAgICAgICAgIGNhc2UgLTUwNDoKICAgICAgICAgICAgICAgIGNhc2UgLTUwODoKICAgICAgICAgICAgICAgIGNhc2UgLTUxMDoKICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKDQsIGZhaWxlZCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIC01MDY6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgxMSwgZmFpbGVkKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIC01MDE6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgxMSwgZmFpbGVkKTsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6IC8vIC01MDEg5byC5bi45byV6LW3IOW/veeVpQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBvblNlcnZlclJlZnVzZUVudGVyOiBmdW5jdGlvbiBvblNlcnZlclJlZnVzZUVudGVyKGV2dCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIGZhaWxlZCA9IGV2dC5mYWlsZWQ7CiAgICAgICAgc3dpdGNoIChmYWlsZWQpIHsKICAgICAgICAgICAgY2FzZSAtOTUyNzoKICAgICAgICAgICAgY2FzZSAtOTUyNzA6CiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKDQsIC05NTI3KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIC01MDA6CiAgICAgICAgICAgIGNhc2UgLTUwMjoKICAgICAgICAgICAgY2FzZSAtNTA0OgogICAgICAgICAgICBjYXNlIC01MDg6CiAgICAgICAgICAgIGNhc2UgLTUxMDoKICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoNCwgZmFpbGVkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIC01MDY6CiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKDExLCBmYWlsZWQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKDIpOwogICAgICAgIH0KICAgIH0sCgogICAgb25FbnRlckZhaWw6IGZ1bmN0aW9uIG9uRW50ZXJGYWlsKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKHNlbGYuX19nZXRDb3B5SW50ZXJ2YWwpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLl9fZ2V0Q29weUludGVydmFsKTsKICAgICAgICB9CiAgICB9LAoKICAgIG9uRW50ZXJTdWNjZXNzOiBmdW5jdGlvbiBvbkVudGVyU3VjY2VzcygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLl9mYWlsSWNlc1JlYnVpbGQoKTsKICAgICAgICB9LCAyMDApOwoKICAgICAgICBpZiAoc2VsZi5nZXRDb3B5SW50ZXJ2YWxNaWxsaXMgJiYgc2VsZi5nZXRDb3B5SW50ZXJ2YWxNaWxsaXMgPiAwKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiUnVuIGludGVydmFsIGdldCBjb3B5LiBpbnRlcnZhbCA9ICIsIHNlbGYuZ2V0Q29weUludGVydmFsTWlsbGlzKTsKCiAgICAgICAgICAgIGlmIChzZWxmLl9fZ2V0Q29weUludGVydmFsKSB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHNlbGYuX19nZXRDb3B5SW50ZXJ2YWwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZWxmLl9fZ2V0Q29weUludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKHNlbGYuX3Nlc3Npb24uY29ubmVjdGVkKCkpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLl9zeXNDb3B5LmFwcGx5KHNlbGYpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIldhcm4hIGNhbm5vdCBnZXQgY29weS4gY2F1c2Ugb2ZmbGluZS4iKTsKCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2dldENvcHlJbnRlcnZhbCAmJiBjbGVhckludGVydmFsKHNlbGYuX19nZXRDb3B5SW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBzZWxmLmdldENvcHlJbnRlcnZhbE1pbGxpcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2VsZi5nZXRNZWRpYU1ldGVySW50ZXJ2YWxNaWxsaXMgJiYgc2VsZi5nZXRNZWRpYU1ldGVySW50ZXJ2YWxNaWxsaXMgPiAwKSB7CiAgICAgICAgICAgIHNlbGYuX2ludGVydmFsR2V0TWVkaWFNZXRlcnMoKTsKICAgICAgICB9CiAgICB9LAoKICAgIF9pbnRlcnZhbEdldE1lZGlhTWV0ZXJzOiBmdW5jdGlvbiBfaW50ZXJ2YWxHZXRNZWRpYU1ldGVycygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGZ1bmN0aW9uIF9zdGFydCgpIHsKICAgICAgICAgICAgc2VsZi5fX2dldE1lZGlhTWV0ZXJzSW50ZXJ2YWxGbGFnICYmIGVtZWRpYS5jYW5jZWxBbmltYXRpb25GcmFtZShzZWxmLl9fZ2V0TWVkaWFNZXRlcnNJbnRlcnZhbEZsYWcpOwoKICAgICAgICAgICAgaWYgKCFzZWxmLmdldE1lZGlhTWV0ZXJJbnRlcnZhbE1pbGxpcykgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJPbnRhbGtpbmcgY2xvc2VkLiBwbGVhc2UgdXNlIGdldE1lZGlhTWV0ZXJJbnRlcnZhbE1pbGxpcyIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGYuX19nZXRNZWRpYU1ldGVyc0ludGVydmFsRmxhZyA9IGVtZWRpYS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKHRpbWUpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZW1lZGlhLkF1ZGlvQ29udGV4dCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZsdXNoTWVkaWFNZXRlcnNCeUF1ZGlvQ29udGV4dC5hcHBseShzZWxmKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAhKHNlbGYuY2xvc2VkICE9PSBmYWxzZSkgJiYgX3N0YXJ0KCk7CiAgICAgICAgICAgIH0sIHNlbGYuZ2V0TWVkaWFNZXRlckludGVydmFsTWlsbGlzKTsKICAgICAgICB9CiAgICAgICAgX3N0YXJ0KCk7CiAgICB9LAoKICAgIF9mbHVzaE1lZGlhTWV0ZXJzQnlBdWRpb0NvbnRleHQ6IGZ1bmN0aW9uIF9mbHVzaE1lZGlhTWV0ZXJzQnlBdWRpb0NvbnRleHQoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBfdXRpbC5mb3JFYWNoKHNlbGYuX2NhY2hlU3RyZWFtcywgZnVuY3Rpb24gKF9zaWQsIF9zdHJlYW0pIHsKICAgICAgICAgICAgaWYgKCFzZWxmLl9tb25pdFNvdW5kQ2hhbmFnZWRTdHJlYW1zIHx8IHNlbGYuX21vbml0U291bmRDaGFuYWdlZFN0cmVhbXNbX3NpZF0pIHsKICAgICAgICAgICAgICAgIF9zdHJlYW0uaWQgIT0gIjAiICYmIHNlbGYuX3VwZGF0ZU1ldGVyc09yTmV3T25lLmNhbGwoc2VsZiwgX3NpZCwgX3N0cmVhbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgdmFyIGRlbFN0cmVhbVNvdW5kTWV0ZXJzID0gW107CiAgICAgICAgX3V0aWwuZm9yRWFjaChzZWxmLl9tZWRpYU1ldGVycywgZnVuY3Rpb24gKF9zaWQsIHN0cmVhbVNvdW5kTWV0ZXIpIHsKICAgICAgICAgICAgdmFyIF9zdHJlYW0gPSBzZWxmLl9jYWNoZVN0cmVhbXNbX3NpZF07CiAgICAgICAgICAgIF9zdHJlYW0gJiYgc2VsZi5fdXBkYXRlTWV0ZXJzT3JOZXdPbmUuY2FsbChzZWxmLCBfc2lkLCBfc3RyZWFtKTsKICAgICAgICAgICAgX3N0cmVhbSB8fCBkZWxTdHJlYW1Tb3VuZE1ldGVycy5wdXNoKF9zaWQpOwogICAgICAgIH0pOwoKICAgICAgICBfdXRpbC5mb3JFYWNoKGRlbFN0cmVhbVNvdW5kTWV0ZXJzLCBmdW5jdGlvbiAoaW5kZXgsIF9zaWQpIHsKICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX21lZGlhTWV0ZXJzLCBfc2lkKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgX3VwZGF0ZU1ldGVyc09yTmV3T25lOiBmdW5jdGlvbiBfdXBkYXRlTWV0ZXJzT3JOZXdPbmUoX3NpZCwgX3N0cmVhbSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIG1ldGVyc0RhdGE7CgogICAgICAgIHZhciBzdHJlYW1Tb3VuZE1ldGVyID0gc2VsZi5fbWVkaWFNZXRlcnNbX3NpZF07CgogICAgICAgIGlmIChfc3RyZWFtLnR5cGUgPT09IDIgJiYgIV9zdHJlYW0ubG9jYXRlZCgpICYmICghX3N0cmVhbS5zdWJBcmdzIHx8ICFfc3RyZWFtLnN1YkFyZ3Muc3ViU0F1ZGlvKSkgewogICAgICAgICAgICB2YXIgcHViQXVkaW9NaXhlcnNTdHJlYW0gPSBzZWxmLl9vbmVBdWRpb01peGVycygpOwogICAgICAgICAgICBpZiAoIXB1YkF1ZGlvTWl4ZXJzU3RyZWFtIHx8IHN0cmVhbVNvdW5kTWV0ZXIgJiYgc3RyZWFtU291bmRNZXRlci5fd2VicnRjICYmIHB1YkF1ZGlvTWl4ZXJzU3RyZWFtLl93ZWJydGMuX19pZCAhPSBzdHJlYW1Tb3VuZE1ldGVyLl93ZWJydGMuX19pZCkgewogICAgICAgICAgICAgICAgc3RyZWFtU291bmRNZXRlciAmJiBzdHJlYW1Tb3VuZE1ldGVyLl9maW5hbGx5KCk7CiAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fbWVkaWFNZXRlcnMsIF9zaWQpOwogICAgICAgICAgICAgICAgc2VsZi5fb25Tb3VuZENoYW5hZ2UuY2FsbChzZWxmLCBfc3RyZWFtLm93bmVyLCBfc3RyZWFtKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChzdHJlYW1Tb3VuZE1ldGVyICYmIHN0cmVhbVNvdW5kTWV0ZXIuX3N0cmVhbUNyZWF0ZUlkID09PSBfc3RyZWFtLl9fY3JlYXRlX2lkICYmIHN0cmVhbVNvdW5kTWV0ZXIuX19tZWRpYVNvdW5kTWV0ZXIuX193b3JrZWQpIHsKCiAgICAgICAgICAgIHN0cmVhbVNvdW5kTWV0ZXIub25Tb3VuZE1ldGVycyhmdW5jdGlvbiAobWV0ZXJzRGF0YSkgewogICAgICAgICAgICAgICAgc2VsZi5fb25Tb3VuZENoYW5hZ2UuY2FsbChzZWxmLCBfc3RyZWFtLm93bmVyLCBfc3RyZWFtLCBtZXRlcnNEYXRhKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm4gc3RyZWFtU291bmRNZXRlcjsKICAgICAgICB9CgogICAgICAgIGlmIChzdHJlYW1Tb3VuZE1ldGVyICYmIChzdHJlYW1Tb3VuZE1ldGVyLl9zdHJlYW1DcmVhdGVJZCAhPT0gX3N0cmVhbS5fX2NyZWF0ZV9pZCB8fCBzdHJlYW1Tb3VuZE1ldGVyLl9fbWVkaWFTb3VuZE1ldGVyLl9fd29ya2VkKSkgewogICAgICAgICAgICBzdHJlYW1Tb3VuZE1ldGVyICYmIHN0cmVhbVNvdW5kTWV0ZXIuX2ZpbmFsbHkoKTsKICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX21lZGlhTWV0ZXJzLCBfc2lkKTsKICAgICAgICAgICAgc2VsZi5fb25Tb3VuZENoYW5hZ2UuY2FsbChzZWxmLCBfc3RyZWFtLm93bmVyLCBfc3RyZWFtKTsKICAgICAgICB9CgogICAgICAgIGlmIChfc3RyZWFtLmFvZmYpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgc3RyZWFtU291bmRNZXRlciA9IHNlbGYuX25ld01lZGlhTWV0ZXJzKF9zdHJlYW0pOwogICAgICAgIGlmIChzdHJlYW1Tb3VuZE1ldGVyKSB7CiAgICAgICAgICAgIHNlbGYuX21lZGlhTWV0ZXJzW19zaWRdICYmIHNlbGYuX21lZGlhTWV0ZXJzW19zaWRdLl9maW5hbGx5KCk7CiAgICAgICAgICAgIHNlbGYuX21lZGlhTWV0ZXJzW19zaWRdID0gc3RyZWFtU291bmRNZXRlcjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdHJlYW1Tb3VuZE1ldGVyOwogICAgfSwKCiAgICBfbmV3QXVkaW9Db250ZXh0OiBmdW5jdGlvbiBfbmV3QXVkaW9Db250ZXh0KCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFlbWVkaWEuX191c2luZ1dlYkF1ZGlvKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlbWVkaWEuX19hdWRpb0NvbnRleHQ7CiAgICB9LAoKICAgIF9uZXdNZWRpYU1ldGVyczogZnVuY3Rpb24gX25ld01lZGlhTWV0ZXJzKF9zdHJlYW0pIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBtZWRpYVN0cmVhbTsKICAgICAgICBpZiAoX3N0cmVhbS50eXBlID09PSAyICYmIF9zdHJlYW0uc3ViQXJncyAmJiBfc3RyZWFtLnN1YkFyZ3Muc3ViU0F1ZGlvICYmIF9zdHJlYW0uX3dlYnJ0YyAmJiBfc3RyZWFtLl93ZWJydGMuZ2V0UmVtb3RlU3RyZWFtKCkpIHsKICAgICAgICAgICAgdmFyIHNvdW5kTWV0ZXIgPSBuZXcgX3N0cmVhbS5TdHJlYW1Tb3VuZE1ldGVyKHsKICAgICAgICAgICAgICAgIF9zdHJlYW06IF9zdHJlYW0sCiAgICAgICAgICAgICAgICBfbWVkaWFTdHJlYW06IF9zdHJlYW0uX3dlYnJ0Yy5nZXRSZW1vdGVTdHJlYW0oKSwKICAgICAgICAgICAgICAgIF93ZWJydGM6IF9zdHJlYW0uX3dlYnJ0YywKICAgICAgICAgICAgICAgIF9fYXVkaW9Db250ZXh0OiBzZWxmLl9uZXdBdWRpb0NvbnRleHQoKQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBzb3VuZE1ldGVyOwogICAgICAgIH0KCiAgICAgICAgaWYgKF9zdHJlYW0udHlwZSA9PT0gMiAmJiBfc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICB2YXIgc291bmRNZXRlciA9IG5ldyBfc3RyZWFtLlN0cmVhbVNvdW5kTWV0ZXIoewogICAgICAgICAgICAgICAgX3N0cmVhbTogX3N0cmVhbSwKICAgICAgICAgICAgICAgIF9tZWRpYVN0cmVhbTogX3N0cmVhbS5fbG9jYWxNZWRpYVN0cmVhbSwKICAgICAgICAgICAgICAgIF9fYXVkaW9Db250ZXh0OiBzZWxmLl9uZXdBdWRpb0NvbnRleHQoKQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBzb3VuZE1ldGVyOwogICAgICAgIH0KCiAgICAgICAgaWYgKF9zdHJlYW0udHlwZSA9PT0gMiAmJiAhX3N0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgdmFyIHB1YkF1ZGlvTWl4ZXJzU3RyZWFtID0gc2VsZi5fb25lQXVkaW9NaXhlcnMoKTsKICAgICAgICAgICAgaWYgKCFwdWJBdWRpb01peGVyc1N0cmVhbSB8fCAhcHViQXVkaW9NaXhlcnNTdHJlYW0uX3dlYnJ0YyB8fCBwdWJBdWRpb01peGVyc1N0cmVhbS5fd2VicnRjLmNsb3NlZCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocHViQXVkaW9NaXhlcnNTdHJlYW0gJiYgKHB1YkF1ZGlvTWl4ZXJzU3RyZWFtLl9yZW1vdGVNZWRpYVNvdW5kTWV0ZXJzID09PSB1bmRlZmluZWQgfHwgIXB1YkF1ZGlvTWl4ZXJzU3RyZWFtLl9yZW1vdGVNZWRpYVNvdW5kTWV0ZXJzLl9fd29ya2VkKSAmJiBwdWJBdWRpb01peGVyc1N0cmVhbS5fd2VicnRjICYmIHB1YkF1ZGlvTWl4ZXJzU3RyZWFtLl93ZWJydGMuZ2V0UmVtb3RlU3RyZWFtKCkpIHsKICAgICAgICAgICAgICAgIHB1YkF1ZGlvTWl4ZXJzU3RyZWFtLl9yZW1vdGVNZWRpYVNvdW5kTWV0ZXJzID0gbmV3IHB1YkF1ZGlvTWl4ZXJzU3RyZWFtLk1lZGlhU291bmRNZXRlcih7CiAgICAgICAgICAgICAgICAgICAgX21lZGlhU3RyZWFtOiBwdWJBdWRpb01peGVyc1N0cmVhbS5fd2VicnRjLmdldFJlbW90ZVN0cmVhbSgpLAogICAgICAgICAgICAgICAgICAgIF9fYXVkaW9Db250ZXh0OiBzZWxmLl9uZXdBdWRpb0NvbnRleHQoKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghcHViQXVkaW9NaXhlcnNTdHJlYW0uX3JlbW90ZU1lZGlhU291bmRNZXRlcnMpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHNvdW5kTWV0ZXIgPSBuZXcgX3N0cmVhbS5TdHJlYW1Tb3VuZE1ldGVyKHsKICAgICAgICAgICAgICAgIF9zdHJlYW06IF9zdHJlYW0sCiAgICAgICAgICAgICAgICBfd2VicnRjOiBwdWJBdWRpb01peGVyc1N0cmVhbS5fd2VicnRjLAogICAgICAgICAgICAgICAgX19tZWRpYVNvdW5kTWV0ZXI6IHB1YkF1ZGlvTWl4ZXJzU3RyZWFtLl9yZW1vdGVNZWRpYVNvdW5kTWV0ZXJzCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuIHNvdW5kTWV0ZXI7CiAgICAgICAgfQoKICAgICAgICBpZiAoIV9zdHJlYW0uYW9mZiAmJiAobWVkaWFTdHJlYW0gPSBfc3RyZWFtLmdldE1lZGlhU3RyZWFtKCkpKSB7CiAgICAgICAgICAgIHZhciBzb3VuZE1ldGVyID0gbmV3IF9zdHJlYW0uU3RyZWFtU291bmRNZXRlcih7CiAgICAgICAgICAgICAgICBfc3RyZWFtOiBfc3RyZWFtLAogICAgICAgICAgICAgICAgX21lZGlhU3RyZWFtOiBtZWRpYVN0cmVhbSwKICAgICAgICAgICAgICAgIF9fYXVkaW9Db250ZXh0OiBzZWxmLl9uZXdBdWRpb0NvbnRleHQoKQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBzb3VuZE1ldGVyOwogICAgICAgIH0KICAgIH0sCgogICAgX29uZUF1ZGlvTWl4ZXJzOiBmdW5jdGlvbiBfb25lQXVkaW9NaXhlcnMoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgemVyb1N0cmVhbSA9IHNlbGYuX2NhY2hlU3RyZWFtc1siMCJdOwogICAgICAgIGlmICh6ZXJvU3RyZWFtICYmIHplcm9TdHJlYW0uX3dlYnJ0YyAmJiAhemVyb1N0cmVhbS5fd2VicnRjLmNsb3NlZCkgewogICAgICAgICAgICByZXR1cm4gemVyb1N0cmVhbTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIHNpZCBpbiBzZWxmLmF1ZGlvTWl4ZXJzKSB7CiAgICAgICAgICAgIHZhciBzdHJlYW0gPSBzZWxmLmF1ZGlvTWl4ZXJzW3NpZF07CiAgICAgICAgICAgIGlmIChzdHJlYW0ubG9jYXRlZCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBvbldTQ2xvc2U6IGZ1bmN0aW9uIG9uV1NDbG9zZSgpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgaWYgKHNlbGYuX19nZXRDb3B5SW50ZXJ2YWwpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLl9fZ2V0Q29weUludGVydmFsKTsKICAgICAgICB9CgogICAgICAgIF9sb2dnZXIuaW5mbygiV2Vic29ja2V0IGNsb3NlZC4iKTsKICAgIH0sCgogICAgb25JQ0VEaXNjb25uZWN0ZWQ6IGZ1bmN0aW9uIG9uSUNFRGlzY29ubmVjdGVkKHdlYnJ0YykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5fX25ldHdvcmtXZWFrSW50ZXJ2YWwgJiYgY2xlYXJUaW1lb3V0KHNlbGYuX19uZXR3b3JrV2Vha0ludGVydmFsKTsKICAgICAgICBzZWxmLl9fbmV0d29ya1dlYWtJbnRlcnZhbCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLm9uTmV0d29ya1dlYWsgJiYgc2VsZi5vbk5ldHdvcmtXZWFrKCk7CiAgICAgICAgfSwgMTAwMCk7CgogICAgICAgIF91dGlsLmZvckVhY2goc2VsZi5fbGlua2VkU3RyZWFtcywgZnVuY3Rpb24gKHNpZCwgc3RyZWFtKSB7CiAgICAgICAgICAgIGlmIChzdHJlYW0ucnRjSWQgPT0gd2VicnRjLmdldFJ0Y0lkKCkpIHsKICAgICAgICAgICAgICAgIHZhciBwcm9ibGVtU3RyZWFtOwogICAgICAgICAgICAgICAgaWYgKCEocHJvYmxlbVN0cmVhbSA9IHNlbGYuX21heWJlTm90RXhpc3RTdHJlYW1zW3NpZF0pKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvYmxlbVN0cmVhbSA9IHNlbGYuX21heWJlTm90RXhpc3RTdHJlYW1zW3NpZF0gPSBfdXRpbC5leHRlbmQoe30sIHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgcHJvYmxlbVN0cmVhbS5pY2VSZWJ1aWxkQ291bnQgPSAxOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiU3RyZWFtIG1heWJlIG5vdCBleGlzdC4gY2F1c2VkIGJ5IGRpc2Nvbm5lY3RlZCIsIHN0cmVhbS5pZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgb25JQ0VDb25uZWN0RmFpbDogZnVuY3Rpb24gb25JQ0VDb25uZWN0RmFpbCh3ZWJydGMpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGZvciAodmFyIHNpZCBpbiBzZWxmLl9saW5rZWRTdHJlYW1zKSB7CiAgICAgICAgICAgIHZhciBzdHJlYW0gPSBzZWxmLl9saW5rZWRTdHJlYW1zW3NpZF07CiAgICAgICAgICAgIGlmIChzdHJlYW0ucnRjSWQgPT0gd2VicnRjLmdldFJ0Y0lkKCkpIHsKICAgICAgICAgICAgICAgIGlmIChzdHJlYW0uX3dlYnJ0YyAmJiBzdHJlYW0uX3dlYnJ0Yy5fX2lkICE9PSB3ZWJydGMuX19pZCkgewogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiU3RyZWFtIHVzZSBvdGhlciB3ZWJydGMgcnRjSWQgPSAiLCBzdHJlYW0ucnRjSWQsICIsIGlkOiAiLCBzdHJlYW0uX3dlYnJ0Yy5fX2lkLCB3ZWJydGMuX19pZCk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHByb2JsZW1TdHJlYW07CiAgICAgICAgICAgICAgICBpZiAoIShwcm9ibGVtU3RyZWFtID0gc2VsZi5fbWF5YmVOb3RFeGlzdFN0cmVhbXNbc2lkXSkpIHsKICAgICAgICAgICAgICAgICAgICBwcm9ibGVtU3RyZWFtID0gc2VsZi5fbWF5YmVOb3RFeGlzdFN0cmVhbXNbc2lkXSA9IF91dGlsLmV4dGVuZCh7fSwgc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICBwcm9ibGVtU3RyZWFtLmljZVJlYnVpbGRDb3VudCA9IDE7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHByb2JsZW1TdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2V2dCA9IG5ldyBfX2V2ZW50LlN0cmVhbVN0YXRlKHsgc3RyZWFtOiBwcm9ibGVtU3RyZWFtIH0pOwogICAgICAgICAgICAgICAgICAgIF9ldnQuaWNlRmFpbCgpOwoKICAgICAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQoX2V2dCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJpY2UgZmFpbC4gd2VicnRjID0gIiwgd2VicnRjLmdldFJ0Y0lkKCksICIgcHJvYmxlbSBzdHJlYW0gaXMgIiwgcHJvYmxlbVN0cmVhbS5pY2VSZWJ1aWxkQ291bnQsIHByb2JsZW1TdHJlYW0uaWQpOwoKICAgICAgICAgICAgICAgIGlmIChwcm9ibGVtU3RyZWFtLmljZVJlYnVpbGRDb3VudCA+IGVtZWRpYS5jb25maWcuaWNlUmVidWlsZENvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJpY2UgZmFpbC4gd2VicnRjID0gIiwgd2VicnRjLmdldFJ0Y0lkKCksICIgcmVidWlsZCBmYWlsLiBwcm9ibGVtIHN0cmVhbSBpcyAiLCBwcm9ibGVtU3RyZWFtLmlkKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2JsZW1TdHJlYW0ubG9jYXRlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5QdXNoRmFpbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHN0cmVhbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdXNlOiAicHViIGljZSByZWJ1aWxkIGZhaWxlZC4iCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQobmV3IF9fZXZlbnQuU3ViRmFpbCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHN0cmVhbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdXNlOiAic3ViIGljZSByZWJ1aWxkIGZhaWxlZC4iCiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZVdlYnJ0Yyh3ZWJydGMuZ2V0UnRjSWQoKSwgZmFsc2UpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVjb3JkaW5nID0gc2VsZi5fcmVjb3Jkc1twcm9ibGVtU3RyZWFtLmlkXTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2JsZW1TdHJlYW0uX2xvY2FsTWVkaWFTdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJpY2UgZmFpbC4gd2VicnRjID0gIiwgd2VicnRjLmdldFJ0Y0lkKCksICIgd2lsbCByZWJ1aWxkLiByZW1haW4gbG9jYWwgc3RyZWFtLiAiLCBwcm9ibGVtU3RyZWFtLmlkKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLmluZm8oImljZSBmYWlsLiB3ZWJydGMgPSAiLCB3ZWJydGMuZ2V0UnRjSWQoKSwgIiB3aWxsIHJlYnVpbGQuIiwgcHJvYmxlbVN0cmVhbS5pZCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlV2VicnRjKHdlYnJ0Yy5nZXRSdGNJZCgpLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY29yZGluZykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZWNvcmRzW3Byb2JsZW1TdHJlYW0uaWRdID0gcmVjb3JkaW5nOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChwcm9ibGVtU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pY2VSZWJ1aWxkKHByb2JsZW1TdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9LCBlbWVkaWEuY29uZmlnLmljZVJlYnVpbGRJbnRlcnZhbE1pbGxpcyk7CiAgICAgICAgICAgICAgICAgICAgfSkocHJvYmxlbVN0cmVhbSk7CgogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiaWNlIGZhaWwuIHdlYnJ0YyA9ICIsIHdlYnJ0Yy5nZXRSdGNJZCgpLCAiIHdpbGwgcmVidWlsZGluZy4gcHJvYmxlbSBzdHJlYW0gaXMgIiwgcHJvYmxlbVN0cmVhbS5pZCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHN0cmVhbS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuYXVkaW9NaXhlcnMsIHN0cmVhbS5pZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAoKICAgIG9uSUNFQ2xvc2VkOiBmdW5jdGlvbiBvbklDRUNsb3NlZCh3ZWJydGMpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmICh3ZWJydGMuY2xvc2VkKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2FybigiV2VicnRjIHdpbGwgYmUgcmVtb3ZlZC4gYnkgX19pZCA9ICIsIHdlYnJ0Yy5fX2lkLCAiLCBydGNJZCA9ICIsIHdlYnJ0Yy5nZXRSdGNJZCgpKTsKICAgICAgICAgICAgdmFyIHJlbW92ZWRXZWJydGMgPSBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5faWNlcywgd2VicnRjLl9faWQpOwogICAgICAgICAgICBpZiAocmVtb3ZlZFdlYnJ0YykgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJXZWJydGMgcmVtb3ZlZC4gYnkgaWQgPSAiLCByZW1vdmVkV2VicnRjLl9faWQsICIsIHJ0Y0lkID0gIiwgcmVtb3ZlZFdlYnJ0Yy5nZXRSdGNJZCgpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiV2VicnRjIHJlbW92ZWQuIGJ5IGlkID0gIiwgd2VicnRjLl9faWQsICIsIHJ0Y0lkID0gIiwgd2VicnRjLmdldFJ0Y0lkKCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgd2VicnRjMjIgPSBzZWxmLl9pY2VzW3dlYnJ0Yy5nZXRSdGNJZCgpXTsKICAgICAgICAgICAgaWYgKHdlYnJ0YzIyICYmIHdlYnJ0YzIyLl9faWQgPT09IHJlbW92ZWRXZWJydGMuX19pZCkgewogICAgICAgICAgICAgICAgcmVtb3ZlZFdlYnJ0YyA9IF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzZWxmLl9pY2VzLCB3ZWJydGMuZ2V0UnRjSWQoKSk7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIldlYnJ0YyByZW1vdmVkLiBieSBydGNJZCA9ICIsIHJlbW92ZWRXZWJydGMuZ2V0UnRjSWQoKSwgIiwgX19pZCA9ICIsIHJlbW92ZWRXZWJydGMuX19pZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfbG9nZ2VyLmluZm8oIklDRSBzZWxmIGNsb3NlZC4gbm90IGFsbG93LiB3aWxsIHJlYnVpbGQiLCB3ZWJydGMuZ2V0UnRjSWQoKSk7CiAgICAgICAgICAgIHNlbGYub25JQ0VDb25uZWN0RmFpbCh3ZWJydGMpOwogICAgICAgIH0KICAgIH0sCgogICAgb25JQ0VDb25uZWN0ZWQ6IGZ1bmN0aW9uIG9uSUNFQ29ubmVjdGVkKHdlYnJ0YykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZVN0cmVhbXMsIGZ1bmN0aW9uIChzaWQsIHN0cmVhbSkgewogICAgICAgICAgICBpZiAoc3RyZWFtLnJ0Y0lkID09IHdlYnJ0Yy5nZXRSdGNJZCgpKSB7CiAgICAgICAgICAgICAgICBzdHJlYW0uZmluYWxWQ29kZUNob2ljZXMgPSB3ZWJydGMuZmluYWxWQ29kZUNob2ljZXM7CgogICAgICAgICAgICAgICAgaWYgKHNlbGYuX21heWJlTm90RXhpc3RTdHJlYW1zW3NpZF0pIHsKICAgICAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fbWF5YmVOb3RFeGlzdFN0cmVhbXMsIHN0cmVhbS5pZCk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGlua2VkU3RyZWFtc1tzaWRdID0gc3RyZWFtOwoKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLmluZm8oImljZSByZWNvbm5lY3RlZC4gd2VicnRjID0gIiwgd2VicnRjLmdldFJ0Y0lkKCksICJ3aWxsIHVwZGF0ZSBzdHJlYW0gPSAiLCBzdHJlYW0uaWQpOwogICAgICAgICAgICAgICAgICAgIC8vc3RyZWFtLmxvY2F0ZWQoKSAmJiBzZWxmLm9uVXBkYXRlU3RyZWFtKHNlbGYuX2xpbmtlZFN0cmVhbXNbc3RyZWFtLmlkXSk7CiAgICAgICAgICAgICAgICAgICAgLy9zZWxmLm9uVXBkYXRlU3RyZWFtKHNlbGYuX2xpbmtlZFN0cmVhbXNbc3RyZWFtLmlkXSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBfcmVjb3JkU3RyZWFtID0gc2VsZi5fcmVjb3Jkc1tzdHJlYW0uaWRdOwogICAgICAgICAgICAgICAgICAgIGlmIChfcmVjb3JkU3RyZWFtICYmIF9yZWNvcmRTdHJlYW0ucnRjSWQgIT09IHN0cmVhbS5ydGNJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAvL+WcqOmHjei/nuWQju+8jOaBouWkjeW9leWItgogICAgICAgICAgICAgICAgICAgICAgICAvL3NlbGYuc3RvcFJlY29yZChfcmVjb3JkU3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFydFJlY29yZChzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlJlIHJlY29yZC4gZm9yICIsIHN0cmVhbS5pZCwgIiwgYWZ0ZXIgcmVidWlsZCBpY2UuIiwgX3JlY29yZFN0cmVhbS5ydGNJZCwgIi0+Iiwgc3RyZWFtLnJ0Y0lkKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiaWNlIGNvbm5lY3RlZC4gd2VicnRjID0gIiwgd2VicnRjLmdldFJ0Y0lkKCksIHN0cmVhbS5pZCk7CgogICAgICAgICAgICAgICAgICAgIHN0cmVhbS5sb2NhdGVkKCkgJiYgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlB1c2hTdWNjZXNzKHsgc3RyZWFtOiBzdHJlYW0gfSkpOwogICAgICAgICAgICAgICAgICAgIHN0cmVhbS5sb2NhdGVkKCkgfHwgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlN1YlN1Y2Nlc3MoeyBzdHJlYW06IHN0cmVhbSB9KSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHN0cmVhbS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5hdWRpb01peGVyc1tzdHJlYW0uaWRdID0gc3RyZWFtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAoKICAgIG9uSUNFUmVtb3RlTWVkaWFTdHJlYW06IGZ1bmN0aW9uIG9uSUNFUmVtb3RlTWVkaWFTdHJlYW0od2VicnRjKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgc3RyZWFtcyA9IFtdOwogICAgICAgIF91dGlsLmZvckVhY2goc2VsZi5fY2FjaGVTdHJlYW1zLCBmdW5jdGlvbiAoc2lkLCBfc3RyZWFtKSB7CiAgICAgICAgICAgIGlmIChfc3RyZWFtLnJ0Y0lkID09IHdlYnJ0Yy5nZXRSdGNJZCgpICYmICghX3N0cmVhbS5sb2NhdGVkKCkgfHwgX3N0cmVhbS50eXBlID09PSAyKSkgewogICAgICAgICAgICAgICAgdmFyIG1lZGlhU3RyZWFtID0gd2VicnRjLmdldFJlbW90ZVN0cmVhbSgpOwogICAgICAgICAgICAgICAgc2VsZi5fdXBkYXRlUmVtb3RlU3RyZWFtKF9zdHJlYW0sIG1lZGlhU3RyZWFtKTsKCiAgICAgICAgICAgICAgICBpZiAoX3N0cmVhbS5vbkdvdFJlbW90ZU1lZGlhU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgX3N0cmVhbS5vbkdvdFJlbW90ZU1lZGlhU3RyZWFtLmNhbGwoX3N0cmVhbSwgbWVkaWFTdHJlYW0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3N0cmVhbSA9IHNlbGYubmV3U3RyZWFtKF9zdHJlYW0pOwogICAgICAgICAgICAgICAgICAgIF9zdHJlYW0ubWVkaWFTdHJlYW0gPSB3ZWJydGMuZ2V0UmVtb3RlU3RyZWFtKCk7CgogICAgICAgICAgICAgICAgICAgIHNlbGYub25VcGRhdGVTdHJlYW0oX3N0cmVhbSwgbmV3IF9zdHJlYW0uVXBkYXRlKHsgbWVkaWFTdHJlYW06IF9zdHJlYW0ubWVkaWFTdHJlYW0gfSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAoKICAgIF9mYWlsSWNlc1JlYnVpbGQ6IGZ1bmN0aW9uIF9mYWlsSWNlc1JlYnVpbGQoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgY291bnQgPSAxOwogICAgICAgIF91dGlsLmZvckVhY2goc2VsZi5fbWF5YmVOb3RFeGlzdFN0cmVhbXMsIGZ1bmN0aW9uIChzdHJlYW1JZCwgc3RyZWFtKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgc2VsZi5pY2VSZWJ1aWxkKHN0cmVhbSk7CiAgICAgICAgICAgIH0sIGNvdW50ICogMTAwKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgaWNlUmVidWlsZDogZnVuY3Rpb24gaWNlUmVidWlsZChzdHJlYW0pIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmICghc2VsZi5jb25uZWN0ZWQoKSkgewogICAgICAgICAgICBzdHJlYW0uaWNlUmVidWlsZENvdW50ID0gMTsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJXZWJzb2NrZXQgZGlzY29ubmVjdC4gd2FpdGluZy4gcmVidWlsZCBjb3VudCByZXNldCIsIHN0cmVhbS5pY2VSZWJ1aWxkQ291bnQsIHN0cmVhbS5pZCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFzZWxmLl9saW5rZWRTdHJlYW1zW3N0cmVhbS5pZF0gfHwgIXNlbGYuX2NhY2hlU3RyZWFtc1tzdHJlYW0uaWRdKSB7CiAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiaWNlIHJlYnVpbGQgZmFpbC4gaXQgeWV0IGNsb3NlZC4gc3RyZWFtIGlzICIsIHN0cmVhbS5pZCwgc3RyZWFtLnJ0Y0lkKTsKICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX21heWJlTm90RXhpc3RTdHJlYW1zLCBzdHJlYW0uaWQpOwogICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fbGlua2VkU3RyZWFtcywgc3RyZWFtLmlkKTsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJpY2VSZWJ1aWxkLCByZW12b2UgZnJvbSBfbGlua2VkU3RyZWFtcyIsIHN0cmVhbS5pZCk7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RyZWFtLmljZVJlYnVpbGRDb3VudCA+IGVtZWRpYS5jb25maWcuaWNlUmVidWlsZENvdW50KSB7CiAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiaWNlIHJlYnVpbGQgZmFpbC4gY291bnQgdG9vIG1hbnkuIHN0cmVhbSBpcyAiLCBzdHJlYW0uaWQpOwoKICAgICAgICAgICAgaWYgKHN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5QdXNoRmFpbCh7CiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiBzdHJlYW0sCiAgICAgICAgICAgICAgICAgICAgY2F1c2U6ICJwdWIgaWNlIHJlYnVpbGQgZmFpbGVkLiIKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5TdWJGYWlsKHsKICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHN0cmVhbSwKICAgICAgICAgICAgICAgICAgICBjYXVzZTogInN1YiBpY2UgcmVidWlsZCBmYWlsZWQuIgogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChzZWxmLmNvbm5lY3RlZCgpKSB7CiAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiaWNlIHRyeSByZWJ1aWxkLiBjb3VudCIsIHN0cmVhbS5pY2VSZWJ1aWxkQ291bnQsICIuIHN0cmVhbSBpcyAiLCBzdHJlYW0uaWQpOwogICAgICAgICAgICBzZWxmLnJlYnVpbGRJY2Uoc3RyZWFtKTsKCiAgICAgICAgICAgIHN0cmVhbS5pY2VSZWJ1aWxkQ291bnQrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oImljZSByZWJ1aWxkLiBzdG9wLiBjYXVzZSBieSBub3Qgd2Vic29ja2V0IGRpc2Nvbm5lY3QiLCBzdHJlYW0uaWQpOwogICAgICAgIH0KICAgIH0sCgogICAgcmVidWlsZEljZTogZnVuY3Rpb24gcmVidWlsZEljZShzdHJlYW0pIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmICghc2VsZi5fY2FjaGVTdHJlYW1zW3N0cmVhbS5pZF0pIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJCZWdpbiByZWJ1aWxkIGljZS4gbm90IGZvdW5kIHN0cmVhbSBhdCBsb2NhbCIsIHN0cmVhbS5pY2VSZWJ1aWxkQ291bnQsIHN0cmVhbS5pZCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgX2xvZ2dlci53YXJuKCJCZWdpbiByZWJ1aWxkIGljZSAiLCBzdHJlYW0uaWNlUmVidWlsZENvdW50LCBzdHJlYW0uaWQpOwoKICAgICAgICBpZiAoc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBzdHJlYW0uaXNSZXB1Ymxpc2hlZCA9IHRydWU7CiAgICAgICAgICAgIHNlbGYucHVzaChzdHJlYW0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZWxmLmNyZWF0ZVdlYnJ0Y0FuZFN1YnNjcmliZVN0cmVhbShzdHJlYW0uaWQpOwogICAgICAgIH0KICAgICAgICBfbG9nZ2VyLndhcm4oIkZpbmlzaCByZWJ1aWxkIGljZSAiLCBzdHJlYW0uaWNlUmVidWlsZENvdW50LCBzdHJlYW0uaWQsIHNlbGYuX2NhY2hlU3RyZWFtc1tzdHJlYW0uaWRdLnJ0Y0lkKTsKICAgIH0sCgogICAgX3N5c0NvcHk6IGZ1bmN0aW9uIF9zeXNDb3B5KCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIGNvcHlNZXNzYWdlID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoMTAwMCkuc2V0Q3ZlcihzZWxmLl9jdmVyIHx8IDApOwoKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKGNvcHlNZXNzYWdlLCBmdW5jdGlvbiAocnNwKSB7CiAgICAgICAgICAgIGlmIChyc3AucmVzdWx0ICE9IDApIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiR2V0IGNvcHkgZmFpbC4gcmVzdWx0ID0gIiwgcnNwLnJlc3VsdCk7CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoKHNlbGYuX2N2ZXIgfHwgMCkgPCByc3AuY3ZlcikgewogICAgICAgICAgICAgICAgc2VsZi5fY3ZlciA9IHJzcC5jdmVyOwoKICAgICAgICAgICAgICAgIHNlbGYub25NZW1iZXJzKHJzcC5jdmVyLCByc3AubWVtcyB8fCB7fSk7CiAgICAgICAgICAgICAgICBzZWxmLm9uU3RyZWFtcyhyc3AuY3ZlciwgcnNwLnN0cmVhbXMgfHwge30pOwoKICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiR290IGNvcHkgc3VjY2Vzcy4iKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQp9KTsKCm1vZHVsZS5leHBvcnRzID0gSGFuZGxlcjsKCi8qKiovIH0pLAovKiAyOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoKdmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CnZhciBfbG9nZ2VyID0gX3V0aWwudGFnTG9nZ2VyKCJEZXNrdG9wIik7Cgp2YXIgX19ldmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpOwoKd2luZG93Ll9fc2hhcmVEZXNrdG9wTWVzc2FnZUNvdW50X18gPSAwOwoKbW9kdWxlLmV4cG9ydHMgPSBfdXRpbC5wcm90b3R5cGVFeHRlbmQoewoKICAgIF9fUlRDX1BBR0VfTVNHX1RZUEVfXzogJ1JUQy1TRC1QQUdFJywKICAgIF9fUlRDX0VYVF9NU0dfVFlQRV9fOiAnUlRDLVNELUVYVCcsCgogICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5fX2V4dExvYWRlZCA9IHNlbGYucnNkRXh0TG9hZGVkKCk7CiAgICAgICAgaWYgKHNlbGYuX19leHRMb2FkZWQpIHsKICAgICAgICAgICAgc2VsZi5fX29uUnNkRXh0TG9hZCgpOwogICAgICAgIH0KCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgaWYgKHNlbGYuX19leHRMb2FkZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGV4aXN0ID0gc2VsZi5yc2RFeHRMb2FkZWQoKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2V4aXN0PScsIGV4aXN0LCAnLCBldjRkZXRlY3Q9JywgZXY0ZGV0ZWN0KTsKCiAgICAgICAgICAgIHNlbGYuX19leHRMb2FkZWQgPSBleGlzdDsKICAgICAgICB9KTsKCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgaWYgKCFldmVudC5kYXRhKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhOwogICAgICAgICAgICBpZiAoIW1zZy50eXBlIHx8IG1zZy50eXBlICE9PSBzZWxmLl9fUlRDX0VYVF9NU0dfVFlQRV9fIHx8ICFtc2cuZXZuYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCdnb3QgZXh0LW1zZzogJywgbXNnKTsKCiAgICAgICAgICAgIGlmIChtc2cuZXZuYW1lID09PSAnZXh0TG9hZGVkJykgewogICAgICAgICAgICAgICAgaWYgKCFzZWxmLl9fZXh0TG9hZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2V4dExvYWRlZCA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoc2VsZi5fX29uUnNkRXh0TG9hZCgpLCA1MCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZWxmLl9fb25NZXNzYWdlKG1zZyk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIHJzZEV4dExvYWRlZDogZnVuY3Rpb24gcnNkRXh0TG9hZGVkKCkgewogICAgICAgIHZhciBleGlzdGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdSVEMtU2hhcmUtRGVza3RvLWluc3RhbGxlZC1lbGUtcmF0MWFicnInKTsKICAgICAgICByZXR1cm4gZW1lZGlhLmlzRWxlY3Ryb24gfHwgZXhpc3RlbGUgPyB0cnVlIDogZmFsc2U7CiAgICB9LAoKICAgIF9fc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIF9fc2VuZE1lc3NhZ2UobXNnLCBjYWxsYmFjaykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHRzeElkID0gJ3RzeF8nICsgX19zaGFyZURlc2t0b3BNZXNzYWdlQ291bnRfXysrICsgJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDQpOwoKICAgICAgICBpZiAoIXNlbGYuX19leHRMb2FkZWQpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiUnRjIHNoYXJlIGRlc2t0b3Agbm90IGxvYWRlZCIpOwogICAgICAgICAgICB0aHJvdyAiUnRjIHNoYXJlIGRlc2t0b3Agbm90IGxvYWRlZCI7CiAgICAgICAgfQoKICAgICAgICBtc2cudHN4SWQgPSB0c3hJZDsKCiAgICAgICAgc2VsZlsib25fIiArIHRzeElkXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2suYXBwbHkoc2VsZiwgYXJndW1lbnRzKTsKCiAgICAgICAgICAgIC8vZGVsZXRlIHNlbGZbIm9uXyIgKyB0c3hJZF07CiAgICAgICAgICAgIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShzZWxmLCAib25fIiArIHRzeElkKTsKICAgICAgICB9OwoKICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UgJiYgd2luZG93LnBvc3RNZXNzYWdlKG1zZywgJyonKTsKICAgIH0sCgogICAgX19vbk1lc3NhZ2U6IGZ1bmN0aW9uIF9fb25NZXNzYWdlKG1zZykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHRzeElkID0gbXNnLnRzeElkOwoKICAgICAgICBzZWxmWyJvbl8iICsgdHN4SWRdICYmIHNlbGZbIm9uXyIgKyB0c3hJZF0obXNnKTsKICAgICAgICAvL3NlbGZbIm9uXyIgKyB0c3hJZF0gfHwgX2xvZ2dlci5pbmZvKG1zZyk7CiAgICB9LAoKICAgIF9fb25Sc2RFeHRMb2FkOiBmdW5jdGlvbiBfX29uUnNkRXh0TG9hZCgpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYub25FeHRMb2FkZWQgJiYgc2VsZi5vbkV4dExvYWRlZCgpOwogICAgfSwKCiAgICBvcGVuRGVza3RvcE1lZGlhOiBmdW5jdGlvbiBvcGVuRGVza3RvcE1lZGlhKHNjcmVlbk9wdGlvbnMsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoZW1lZGlhLmlzRWxlY3Ryb24pIHsKICAgICAgICAgICAgc2VsZi5vcGVuRGVza3RvcE1lZGlhSW5FbGVjdHJvbihzY3JlZW5PcHRpb25zLCBjYWxsYmFjayk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghc2VsZi5fX2V4dExvYWRlZCB8fCAhc2VsZi5yc2RFeHRMb2FkZWQoKSkgewogICAgICAgICAgICBjYWxsYmFjayhuZXcgX19ldmVudC5TaGFyZURlc2t0b3BFeHRlbnNpb25Ob3RGb3VuZCgpKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIG1zZyA9IHsgdHlwZTogc2VsZi5fX1JUQ19QQUdFX01TR19UWVBFX18sIGV2bmFtZTogJ2Nob29zZURlc2t0b3BNZWRpYScsIHNjcmVlbk9wdGlvbnM6IHNjcmVlbk9wdGlvbnMgfTsKICAgICAgICBzZWxmLl9fc2VuZE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAobSkgewogICAgICAgICAgICBpZiAobS5ldm5hbWUgPT09ICdvbkFjY2Vzc0FwcHJvdmVkJyAmJiBtLnN0cmVhbUlkKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgX19ldmVudC5PcGVuRGVza3RvcE1lZGlhKHsgZGVza3RvcFN0cmVhbUlkOiBtLnN0cmVhbUlkIH0pKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBfX2V2ZW50Lk9wZW5EZXNrdG9wTWVkaWFBY2Nlc3NEZW5pZWQoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgb3BlbkRlc2t0b3BNZWRpYUluRWxlY3Ryb246IGZ1bmN0aW9uIG9wZW5EZXNrdG9wTWVkaWFJbkVsZWN0cm9uKHNjcmVlbk9wdGlvbnMsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNjcmVlbk9wdGlvbnMpIHsKICAgICAgICAgICAgc2NyZWVuT3B0aW9ucyA9IFsnc2NyZWVuJywgJ3dpbmRvdyddOwogICAgICAgIH0KCiAgICAgICAgZW1lZGlhLmVsZWN0cm9uLmRlc2t0b3BDYXB0dXJlci5nZXRTb3VyY2VzKHsgdHlwZXM6IHNjcmVlbk9wdGlvbnMgfSwgZnVuY3Rpb24gKGVycm9yLCBzb3VyY2VzKSB7CiAgICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IF9fZXZlbnQuT3BlbkRlc2t0b3BNZWRpYUFjY2Vzc0RlbmllZCh7IGVycm9yOiBlcnJvciB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0eXBlb2YgZW1lZGlhLmNob29zZUVsZWN0cm9uRGVza3RvcE1lZGlhICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgX19ldmVudC5PcGVuRGVza3RvcE1lZGlhKHsgZGVza3RvcFN0cmVhbUlkOiBzb3VyY2VzWzBdLmlkIH0pKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJkZXNrdG9wIGNhcHR1cmVyLiAiLCBzb3VyY2VzW2ldKTsKICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldOwogICAgICAgICAgICAgICAgc291cmNlLmVhc2Vtb2JUaHVtYkRhdGFVUkwgPSBzb3VyY2UudGh1bWJuYWlsLnRvRGF0YVVSTCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBlbWVkaWEuY2hvb3NlRWxlY3Ryb25EZXNrdG9wTWVkaWEoc291cmNlcywgZnVuY3Rpb24gYWNjZXNzQXBwcm92ZWQoZGVza3RvcENhcHR1cmVyU291cmNlKSB7CiAgICAgICAgICAgICAgICB2YXIgc291cmNlSWQ7CiAgICAgICAgICAgICAgICBpZiAoZGVza3RvcENhcHR1cmVyU291cmNlICYmIGRlc2t0b3BDYXB0dXJlclNvdXJjZS5pZCkgewogICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkID0gZGVza3RvcENhcHR1cmVyU291cmNlLmlkOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzb3VyY2VJZCA9IGRlc2t0b3BDYXB0dXJlclNvdXJjZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgX19ldmVudC5PcGVuRGVza3RvcE1lZGlhKHsgZGVza3RvcFN0cmVhbUlkOiBzb3VyY2VJZCB9KSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIGFjY2Vzc0RlbmllZCgpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBfX2V2ZW50Lk9wZW5EZXNrdG9wTWVkaWFBY2Nlc3NEZW5pZWQoeyBtZXNzYWdlOiAiVXNlciBkZW5pZWQgYWNjZXNzIiB9KSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0pOwogICAgfQp9KTsKCi8qKiovIH0pLAovKiAzMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIkRlZmF1bHRUcmFjayIpOwoKdmFyIE1vdXNlVHJhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCmZ1bmN0aW9uIHpvb21DYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICB2YXIgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwoKICAgIHZhciBfd2lkdGggPSBjYW52YXMud2lkdGgsCiAgICAgICAgX2hlaWdodCA9IGNhbnZhcy5oZWlnaHQ7CgogICAgY2FudmFzQ29udGV4dC5zY2FsZShfd2lkdGggLyB3aWR0aCwgX2hlaWdodCAvIGhlaWdodCk7CiAgICBfbG9nZ2VyLndhcm4oIkNhbnZhcyBzY2FsZSIsIF93aWR0aCAvIHdpZHRoLCBfaGVpZ2h0IC8gaGVpZ2h0LCB3aWR0aCwgaGVpZ2h0KTsKICAgIHZhciBpbWFnZURhdGEgPSBjYW52YXNDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBfd2lkdGgsIF9oZWlnaHQpOwoKICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDsKCiAgICBjYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApOwp9CgpmdW5jdGlvbiBpbml0Q2FudmFzKF90YXJnZXQpIHsKICAgIHZhciBfY2FudmFzOwogICAgX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgX3RhcmdldC5hcHBlbmRDaGlsZChfY2FudmFzKTsKCiAgICBfY2FudmFzLnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246IGFic29sdXRlOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJSI7CgogICAgX2NhbnZhcy53aWR0aCA9IF90YXJnZXQub2Zmc2V0V2lkdGg7CiAgICBfY2FudmFzLmhlaWdodCA9IF90YXJnZXQub2Zmc2V0SGVpZ2h0OwogICAgX2xvZ2dlci53YXJuKCJDYW52YXMiLCBfY2FudmFzLndpZHRoLCBfY2FudmFzLmhlaWdodCk7CgogICAgLy8gaWYoaW5pdENhbnZhcy50aW1lb3V0SWQgPT09IHVuZGVmaW5lZCl7CiAgICAvLyAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSBfdGFyZ2V0Lm9ucmVzaXplID8gX3RhcmdldCA6IHdpbmRvdzsKICAgIC8vICAgICBfdXRpbC5hZGRFdmVudCh0YXJnZXRFbGVtZW50LCAicmVzaXplIiwgZnVuY3Rpb24gKCkgewogICAgLy8gICAgICAgICBpZihpbml0Q2FudmFzLnRpbWVvdXRJZCl7CiAgICAvLyAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaW5pdENhbnZhcy50aW1lb3V0SWQpOwogICAgLy8gICAgICAgICB9CiAgICAvLwogICAgLy8gICAgICAgICBpbml0Q2FudmFzLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgLy8gICAgICAgICAgICAgaW5pdENhbnZhcygpOwogICAgLy8gICAgICAgICAgICAgaW5pdENhbnZhcy50aW1lb3V0SWQgPSBudWxsOwogICAgLy8gICAgICAgICB9LCA1MDApOwogICAgLy8gICAgIH0pOwogICAgLy8gfQoKICAgIHJldHVybiBfY2FudmFzOwp9Cgp2YXIgRGVmYXVsdE1vdXNlVHJhY2s7Cm1vZHVsZS5leHBvcnRzID0gRGVmYXVsdE1vdXNlVHJhY2sgPSBNb3VzZVRyYWNrLmV4dGVuZCh7CiAgICBfX2luaXRfXzogZnVuY3Rpb24gX19pbml0X18oKSB7CiAgICAgICAgdGhpcy5fY2FudmFzIHx8ICh0aGlzLl9jYW52YXMgPSBpbml0Q2FudmFzKHRoaXMuX3RhcmdldCkpOwogICAgICAgIHRoaXMuX2NhbnZhc0NvbnRleHQgfHwgKHRoaXMuX2NhbnZhc0NvbnRleHQgPSB0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgiMmQiKSk7CiAgICB9LAoKICAgIHJlc2l6ZUNhbnZhczogZnVuY3Rpb24gcmVzaXplQ2FudmFzKCkge30sCgogICAgX2NhbFBvc2l0aW9uOiBmdW5jdGlvbiBfY2FsUG9zaXRpb24oKSB7CiAgICAgICAgdmFyIHh5ID0gTW91c2VUcmFjay5wcm90b3R5cGUuX2NhbFBvc2l0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgeHkueCA9IE1hdGguZmxvb3IoeHkueCAqIHRoaXMuX2NhbnZhcy53aWR0aCAvIHh5LndpZHRoKTsKICAgICAgICB4eS55ID0gTWF0aC5mbG9vcih4eS55ICogdGhpcy5fY2FudmFzLmhlaWdodCAvIHh5LmhlaWdodCk7CgogICAgICAgIHJldHVybiB4eTsKICAgIH0sCgogICAgX2RyYXc6IGZ1bmN0aW9uIF9kcmF3KHBvc2l0aW9uLCBwaXhlbENvdW50LCByLCBnLCBiLCBhbHBoYSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAvL19sb2dnZXIud2FybihzZWxmLl9jYW52YXMud2lkdGgsIHNlbGYuX2NhbnZhcy5oZWlnaHQpOwoKICAgICAgICB2YXIgY2FudmFzQ29udGV4dCA9IHNlbGYuX2NhbnZhc0NvbnRleHQ7CgogICAgICAgIGlmICghcGl4ZWxDb3VudCB8fCBwaXhlbENvdW50IDw9IDEpIHsKICAgICAgICAgICAgcGl4ZWxDb3VudCA9IDI7CiAgICAgICAgfQoKICAgICAgICB2YXIgcGl4ZWwgPSBjYW52YXNDb250ZXh0LmdldEltYWdlRGF0YShwb3NpdGlvbi54IC0gcGl4ZWxDb3VudCAvIDIsIHBvc2l0aW9uLnkgLSBwaXhlbENvdW50IC8gMiwgcGl4ZWxDb3VudCwgcGl4ZWxDb3VudCk7CiAgICAgICAgdmFyIGNvbG9yID0gZnVuY3Rpb24gY29sb3IoaW1hZ2VEYXRhLCByLCBnLCBiLCBhbHBoYSkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgZGF0YSA9IGltYWdlRGF0YS5kYXRhOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkgewogICAgICAgICAgICAgICAgdmFyIHJnYiA9IHsKICAgICAgICAgICAgICAgICAgICByOiByID09PSB1bmRlZmluZWQgPyBkYXRhW2ldIDogciwKICAgICAgICAgICAgICAgICAgICBnOiBnID09PSB1bmRlZmluZWQgPyBkYXRhW2kgKyAxXSA6IGcsCiAgICAgICAgICAgICAgICAgICAgYjogYiA9PT0gdW5kZWZpbmVkID8gZGF0YVtpICsgMl0gOiBiLAogICAgICAgICAgICAgICAgICAgIGFscGhhOiBhbHBoYSA9PT0gdW5kZWZpbmVkID8gZGF0YVtpICsgM10gOiBhbHBoYSB9OwoKICAgICAgICAgICAgICAgIGRhdGFbaV0gPSByZ2IucjsgLy8gcmVkCiAgICAgICAgICAgICAgICBkYXRhW2kgKyAxXSA9IHJnYi5nOyAvLyBncmVlbgogICAgICAgICAgICAgICAgZGF0YVtpICsgMl0gPSByZ2IuYjsgLy8gYmx1ZQogICAgICAgICAgICAgICAgZGF0YVtpICsgM10gPSByZ2IuYWxwaGE7CgogICAgICAgICAgICAgICAgLy9fbG9nZ2VyLmRlYnVnKHJnYik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHBpeGVsICYmIGNvbG9yKHBpeGVsLCByLCBnLCBiLCBhbHBoYSk7CgogICAgICAgIGNhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKHBpeGVsLCBwb3NpdGlvbi54LCBwb3NpdGlvbi55KTsKICAgIH0sCgogICAgcmVkcmF3OiBmdW5jdGlvbiByZWRyYXcoeCwgeSwgciwgZywgYiwgYWxwaGEpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIGRyYXcgPSBEZWZhdWx0TW91c2VUcmFjay5wcm90b3R5cGUuX2RyYXcuYmluZChzZWxmKTsKICAgICAgICBkcmF3KHsgeDogeCwgeTogeSB9LCAyKTsKICAgIH0sCgogICAgb25Nb3VzZVRyaWdnZXI6IGZ1bmN0aW9uIG9uTW91c2VUcmlnZ2VyKHRyaWdnZXIsIF9sYXN0VHJpZ2dlcikgewogICAgICAgIHRyaWdnZXIuaXNMZWZ0S2V5KCkgJiYgdGhpcy5fZHJhdyh0cmlnZ2VyLnh5LCA4LCAxODksIDU2LCA1MSwgMjU1KTsKICAgICAgICB0cmlnZ2VyLmlzUmlnaHRLZXkoKSAmJiB0aGlzLl9kcmF3KHRyaWdnZXIueHksIDgsIDQ1LCAyMywgMTg5LCAyNTUpOwogICAgICAgIHRyaWdnZXIuaXNXaGVlbEtleSgpICYmIHRoaXMuX2RyYXcodHJpZ2dlci54eSwgOCwgNTgsIDE4OSwgNzYsIDI1NSk7CiAgICB9LAoKICAgIG9uTW91c2VUcmFjazogZnVuY3Rpb24gb25Nb3VzZVRyYWNrKHBvc2l0aW9uLCBsYXN0UG9zaXRpb24sIGxhc3RUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5fZHJhdyhwb3NpdGlvbiwgMiwgMjI3LCAxOCwgMjQ3LCAyNTUpOwogICAgfQoKICAgIC8vIG9uTW91c2VUcmFjazI6IGZ1bmN0aW9uIChwb3NpdGlvbiwgbGFzdFBvc2l0aW9uLCBsYXN0VHJpZ2dlcikgewogICAgLy8gICAgIHZhciBzZWxmID0gdGhpczsKICAgIC8vICAgICAvL19sb2dnZXIud2FybihzZWxmLl9jYW52YXMud2lkdGgsIHNlbGYuX2NhbnZhcy5oZWlnaHQpOwogICAgLy8KICAgIC8vICAgICBzZWxmLl9jYW52YXNDb250ZXh0IHx8IChzZWxmLl9jYW52YXNDb250ZXh0ID0gc2VsZi5fY2FudmFzLmdldENvbnRleHQoIjJkIikpOwogICAgLy8KICAgIC8vICAgICB2YXIgY2FudmFzQ29udGV4dCA9IHNlbGYuX2NhbnZhc0NvbnRleHQ7CiAgICAvLwogICAgLy8gICAgIHZhciBwaXhlbCA9IGNhbnZhc0NvbnRleHQuZ2V0SW1hZ2VEYXRhKHBvc2l0aW9uLnggLSAxLCBwb3NpdGlvbi55IC0gMSwgMywgMyk7CiAgICAvLyAgICAgdmFyIHJnYjsKICAgIC8vICAgICB2YXIgY29sb3IgPSBmdW5jdGlvbihpbWFnZURhdGEsIHIsIGcsIGIsIGFscGhhKSB7CiAgICAvLyAgICAgICAgIHJnYiA9IHtyOiByLCBnOiBnLCBiOiBiLCBhbHBoYTogYWxwaGF9OwogICAgLy8gICAgICAgICBmb3IgKHZhciBpID0gMCwgZGF0YSA9IGltYWdlRGF0YS5kYXRhOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkgewogICAgLy8gICAgICAgICAgICAgZGF0YVtpXSAgICAgPSByID09PSB1bmRlZmluZWQgPyAwIDogcjsgLy8gcmVkCiAgICAvLyAgICAgICAgICAgICBkYXRhW2kgKyAxXSA9IGcgPT09IHVuZGVmaW5lZCA/IDAgOiBnOyAvLyBncmVlbgogICAgLy8gICAgICAgICAgICAgZGF0YVtpICsgMl0gPSBiID09PSB1bmRlZmluZWQgPyAwIDogYjsgLy8gYmx1ZQogICAgLy8gICAgICAgICAgICAgZGF0YVtpICsgM10gPSBhbHBoYSA9PT0gdW5kZWZpbmVkID8gMjU1IDogYWxwaGE7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICB9OwogICAgLy8gICAgIHBpeGVsICYmIGNvbG9yKHBpeGVsLCAxODksIDU2LCA1MSk7CiAgICAvLyAgICAgbGFzdFRyaWdnZXIuaXNSaWdodEtleSgpICYmIHBpeGVsICYmIGNvbG9yKHBpeGVsLCA0NSwgMjMsIDE4OSk7CiAgICAvLyAgICAgbGFzdFRyaWdnZXIuaXNXaGVlbEtleSgpICYmIHBpeGVsICYmIGNvbG9yKHBpeGVsLCA1OCwgMTg5LCA3Nik7CiAgICAvLwogICAgLy8gICAgIGlmKCFsYXN0UG9zaXRpb24pewogICAgLy8gICAgICAgICBjYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YShwaXhlbCwgcG9zaXRpb24ueCwgcG9zaXRpb24ueSk7CiAgICAvLyAgICAgfQogICAgLy8KICAgIC8vCiAgICAvLyAgICAgZnVuY3Rpb24gbGluZSgpIHsKICAgIC8vICAgICAgICAgY2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAyOwogICAgLy8gICAgICAgICBjYW52YXNDb250ZXh0LmJlZ2luUGF0aCgpOwogICAgLy8gICAgICAgICBjYW52YXNDb250ZXh0LnN0cm9rZVN0eWxlID0gX3V0aWwubGlzdCgncmdiKCcsIHJnYi5yLCAiLCIsIHJnYi5nLCAiLCIsIHJnYi5iLCAiKSIpLmpvaW4oIiIpOwogICAgLy8gICAgICAgICBjYW52YXNDb250ZXh0Lm1vdmVUbyhsYXN0UG9zaXRpb24gPyBsYXN0UG9zaXRpb24ueCA6IHBvc2l0aW9uLngsIGxhc3RQb3NpdGlvbiA/IGxhc3RQb3NpdGlvbi55IDogcG9zaXRpb24ueSk7CiAgICAvLyAgICAgICAgIGNhbnZhc0NvbnRleHQubGluZVRvKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpOwogICAgLy8KICAgIC8vICAgICAgICAgY2FudmFzQ29udGV4dC5zdHJva2UoKTsKICAgIC8vICAgICAgICAgY2FudmFzQ29udGV4dC5jbG9zZVBhdGgoKTsKICAgIC8vICAgICB9CiAgICAvLwogICAgLy8gICAgIGlmKGxhc3RQb3NpdGlvbil7CiAgICAvLyAgICAgICAgIGxpbmUoKTsKICAgIC8vICAgICB9CiAgICAvLyB9Cn0pOwoKLyoqKi8gfSksCi8qIDMxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwp2YXIgX2xvZ2dlciA9IF91dGlsLnRhZ0xvZ2dlcigiTW91c2VUcmFjayIpOwoKdmFyIE1vdXNlVHJpZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpOwoKbW9kdWxlLmV4cG9ydHMgPSBfdXRpbC5wcm90b3R5cGVFeHRlbmQoewogICAgX3NjYWxlOiAxLAogICAgLy9fdGFyZ2V0CiAgICAvL19yZWZlcmVuY2VWaWRlbwoKICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB9LAoKICAgIGdldFRhcmdldFBhZ2VYWTogZnVuY3Rpb24gZ2V0VGFyZ2V0UGFnZVhZKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICByZXR1cm4gc2VsZi5fdGFyZ2V0ICYmIF91dGlsLmV4dGVuZCh7fSwgX3V0aWwuZ2V0RG9tUGFnZVJlY3Qoc2VsZi5fdGFyZ2V0KSk7CiAgICB9LAoKICAgIG9uTW91c2VUcmFjazogZnVuY3Rpb24gb25Nb3VzZVRyYWNrKHBvc2l0aW9uLCBsYXN0UG9zaXRpb24sIGxhc3RUcmlnZ2VyKSB7CiAgICAgICAgLy9fbG9nZ2VyLndhcm4ocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7CiAgICB9LAoKICAgIG9uTW91c2VUcmlnZ2VyOiBmdW5jdGlvbiBvbk1vdXNlVHJpZ2dlcih0cmlnZ2VyLCBfbGFzdFRyaWdnZXIpIHt9LAoKICAgIF9vbk1vdXNlVHJhY2s6IGZ1bmN0aW9uIF9vbk1vdXNlVHJhY2socG9zaXRpb24sIGxhc3RQb3NpdGlvbiwgX2xhc3RUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5vbk1vdXNlVHJhY2sgJiYgdGhpcy5vbk1vdXNlVHJhY2socG9zaXRpb24sIGxhc3RQb3NpdGlvbiwgX2xhc3RUcmlnZ2VyKTsKICAgIH0sCgogICAgX29uTW91c2VUcmlnZ2VyOiBmdW5jdGlvbiBfb25Nb3VzZVRyaWdnZXIodHJpZ2dlciwgX2xhc3RUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5vbk1vdXNlVHJpZ2dlciAmJiB0aGlzLm9uTW91c2VUcmlnZ2VyKHRyaWdnZXIsIF9sYXN0VHJpZ2dlcik7CiAgICB9LAoKICAgIHRyYWNrOiBmdW5jdGlvbiB0cmFjayhwb3MpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBwYWdlWFkgPSBwb3MgPSBfdXRpbC5leHRlbmQoe30sIHBvcyk7CgogICAgICAgIHZhciBfZWxlbWVudFBhZ2VYWSA9IHNlbGYuZ2V0VGFyZ2V0UGFnZVhZKCk7CiAgICAgICAgX2VsZW1lbnRQYWdlWFkgJiYgKHBvcyA9IHNlbGYuX2NhbFBvc2l0aW9uKHBvcyksIHBhZ2VYWSA9IHsKICAgICAgICAgICAgeDogcG9zLngsCiAgICAgICAgICAgIHk6IHBvcy55LAogICAgICAgICAgICBwYWdlWDogX2VsZW1lbnRQYWdlWFkueCArIHBvcy54LAogICAgICAgICAgICBwYWdlWTogX2VsZW1lbnRQYWdlWFkueSArIHBvcy55CiAgICAgICAgfSk7CgogICAgICAgIHNlbGYuX29uTW91c2VUcmFjayhwYWdlWFksIHNlbGYuX2xhc3RQYWdlWFksIHNlbGYuX2xhc3RUcmlnZ2VyKTsKICAgICAgICBzZWxmLl9sYXN0UGFnZVhZID0gcGFnZVhZOwogICAgfSwKCiAgICB0cmlnZ2VyOiBmdW5jdGlvbiB0cmlnZ2VyKF90cmlnZ2VyKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBfdHJpZ2dlciA9IG5ldyBNb3VzZVRyaWdnZXIoX3RyaWdnZXIpOwoKICAgICAgICB2YXIgX2VsZW1lbnRQYWdlWFkgPSBzZWxmLmdldFRhcmdldFBhZ2VYWSgpOwoKICAgICAgICB2YXIgcG9zOwogICAgICAgIF9lbGVtZW50UGFnZVhZICYmIChwb3MgPSBzZWxmLl9jYWxQb3NpdGlvbihfdHJpZ2dlci54eSksIF90cmlnZ2VyLnh5ID0gewogICAgICAgICAgICB4OiBwb3MueCwKICAgICAgICAgICAgeTogcG9zLnksCiAgICAgICAgICAgIHBhZ2VYOiBfZWxlbWVudFBhZ2VYWS54ICsgcG9zLngsCiAgICAgICAgICAgIHBhZ2VZOiBfZWxlbWVudFBhZ2VYWS55ICsgcG9zLnkKICAgICAgICB9KTsKICAgICAgICBfdHJpZ2dlci5fdGltZSB8fCAoX3RyaWdnZXIuX3RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7CgogICAgICAgIHNlbGYuX29uTW91c2VUcmlnZ2VyKF90cmlnZ2VyLCBzZWxmLl9sYXN0VHJpZ2dlcik7CiAgICAgICAgc2VsZi5fbGFzdFRyaWdnZXIgPSBfdHJpZ2dlcjsKICAgIH0sCgogICAgcmVsZWFzZVRyaWdnZXI6IGZ1bmN0aW9uIHJlbGVhc2VUcmlnZ2VyKCkgewogICAgICAgIHRoaXMuX2xhc3RUcmlnZ2VyID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMuX2xhc3RQYWdlWFkgPSB1bmRlZmluZWQ7CgogICAgICAgIHRoaXMub25SZWxlYXNlVHJpZ2dlciAmJiB0aGlzLm9uUmVsZWFzZVRyaWdnZXIodGhpcy5fbGFzdFRyaWdnZXIpOwogICAgfSwKCiAgICAvKioKICAgICAqCiAgICAgKgogICAgICogQHBhcmFtIG1vdXNlUG9zCiAgICAgKiBAcHJpdmF0ZQogICAgICovCiAgICBfY2FsUG9zaXRpb246IGZ1bmN0aW9uIF9jYWxQb3NpdGlvbihtb3VzZVBvcykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKHNlbGYuX3JlZmVyZW5jZVZpZGVvKSB7CiAgICAgICAgICAgIG1vdXNlUG9zID0gZW1lZGlhLlNlcnZpY2UucHJvdG90eXBlLmV2ZW50WFlBdFZpZGVvLmNhbGwobnVsbCwgbW91c2VQb3MsIHNlbGYuX3JlZmVyZW5jZVZpZGVvKTsKICAgICAgICB9CgogICAgICAgIHZhciBfZWxlbWVudFBhZ2VYWSA9IHNlbGYuZ2V0VGFyZ2V0UGFnZVhZKCk7CiAgICAgICAgaWYgKCFfZWxlbWVudFBhZ2VYWSkgewogICAgICAgICAgICByZXR1cm4gbW91c2VQb3M7CiAgICAgICAgfQoKICAgICAgICBpZiAoX3V0aWwuaXNGbG9hdChtb3VzZVBvcy54KSAmJiBtb3VzZVBvcy53aWR0aCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIC8v5q+U546HCiAgICAgICAgICAgIG1vdXNlUG9zLnggPSBtb3VzZVBvcy54ICogbW91c2VQb3Mud2lkdGggKiBzZWxmLl9zY2FsZSAqIChfZWxlbWVudFBhZ2VYWS53aWR0aCAvIG1vdXNlUG9zLndpZHRoKTsKICAgICAgICB9CiAgICAgICAgaWYgKF91dGlsLmlzRmxvYXQobW91c2VQb3MueSkgJiYgbW91c2VQb3MuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgLy/mr5TnjocKICAgICAgICAgICAgbW91c2VQb3MueSA9IG1vdXNlUG9zLnkgKiBtb3VzZVBvcy5oZWlnaHQgKiBzZWxmLl9zY2FsZSAqIChfZWxlbWVudFBhZ2VYWS5oZWlnaHQgLyBtb3VzZVBvcy5oZWlnaHQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKF91dGlsLmlzRmxvYXQobW91c2VQb3MueCkgJiYgbW91c2VQb3Mud2lkdGggPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAvL+avlOeOhwogICAgICAgICAgICBtb3VzZVBvcy54ID0gbW91c2VQb3MueCAqIHNlbGYuX3NjYWxlICogX2VsZW1lbnRQYWdlWFkud2lkdGg7CiAgICAgICAgfQogICAgICAgIGlmIChfdXRpbC5pc0Zsb2F0KG1vdXNlUG9zLnkpICYmIG1vdXNlUG9zLmhlaWdodCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIC8v5q+U546HCiAgICAgICAgICAgIG1vdXNlUG9zLnkgPSBtb3VzZVBvcy55ICogc2VsZi5fc2NhbGUgKiBfZWxlbWVudFBhZ2VYWS5oZWlnaHQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoX3V0aWwuaXNJbnQobW91c2VQb3MueCkgJiYgbW91c2VQb3Mud2lkdGggIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBtb3VzZVBvcy54ID0gbW91c2VQb3MueCAqIHNlbGYuX3NjYWxlICogKF9lbGVtZW50UGFnZVhZLndpZHRoIC8gbW91c2VQb3Mud2lkdGgpOwogICAgICAgIH0KICAgICAgICBpZiAoX3V0aWwuaXNJbnQobW91c2VQb3MueSkgJiYgbW91c2VQb3MuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgbW91c2VQb3MueSA9IG1vdXNlUG9zLnkgKiBzZWxmLl9zY2FsZSAqIChfZWxlbWVudFBhZ2VYWS5oZWlnaHQgLyBtb3VzZVBvcy5oZWlnaHQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKF91dGlsLmlzSW50KG1vdXNlUG9zLngpICYmIG1vdXNlUG9zLndpZHRoID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgbW91c2VQb3MueCA9IG1vdXNlUG9zLnggKiBzZWxmLl9zY2FsZTsKICAgICAgICB9CiAgICAgICAgaWYgKF91dGlsLmlzSW50KG1vdXNlUG9zLnkpICYmIG1vdXNlUG9zLmhlaWdodCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIG1vdXNlUG9zLnkgPSBtb3VzZVBvcy55ICogc2VsZi5fc2NhbGU7CiAgICAgICAgfQoKICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IobW91c2VQb3MueCk7CiAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKG1vdXNlUG9zLnkpOwoKICAgICAgICBpZiAoeCA8IDApIHsKICAgICAgICAgICAgeCA9IF9lbGVtZW50UGFnZVhZLndpZHRoICsgeDsKICAgICAgICB9CiAgICAgICAgaWYgKHkgPCAwKSB7CiAgICAgICAgICAgIHkgPSBfZWxlbWVudFBhZ2VYWS53aWR0aCArIHk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4geyB4OiB4LCB5OiB5LCB3aWR0aDogX2VsZW1lbnRQYWdlWFkud2lkdGgsIGhlaWdodDogX2VsZW1lbnRQYWdlWFkuaGVpZ2h0IH07CiAgICB9Cn0pOwoKLyoqKi8gfSksCi8qIDMyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwp2YXIgX2xvZ2dlciA9IF91dGlsLnRhZ0xvZ2dlcigiTW91c2VUcmlnZ2VyIik7Cgp2YXIgQlROID0gewogICAgTEVGVDogMSwKICAgIFdIRUVMOiAyLAogICAgUklHSFQ6IDQsCgogICAgV0hFRUxfUk9MTF9VUDogOCwKICAgIFdIRUVMX1JPTExfRE9XTjogMTYsCgogICAgS0VZX1VQOiAwLAogICAgS0VZX0RPV046IDEsCiAgICBNT1ZFOiAyLAoKICAgIEtFWUJPQVJEX0RPV046IDMsCiAgICBLRVlCT0FSRF9VUDogNAoKICAgIC8qKgogICAgICoKICAgICAqIHsKICAgICAqICB4eTogZXZlbnRYWSwKICAgICAqICBvcGVyOiBvcGVyLAogICAgICogIGJ0bjogYnV0dG9uLAogICAgICogIF90aW1lOiBfdGltZQogICAgICogfQogICAgICoKICAgICAqCiAgICAgKi8KfTttb2R1bGUuZXhwb3J0cyA9IF91dGlsLnByb3RvdHlwZUV4dGVuZCh7CiAgICBfdGltZW91dE1pbGxpczogNTAwLAogICAgX3RpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAoKICAgIGlzS2V5dXA6IGZ1bmN0aW9uIGlzS2V5dXAoKSB7CiAgICAgICAgcmV0dXJuIEJUTi5LRVlfVVAgPT0gdGhpcy5vcGVyOwogICAgfSwKICAgIGlzS2V5ZG93bjogZnVuY3Rpb24gaXNLZXlkb3duKCkgewogICAgICAgIHJldHVybiBCVE4uS0VZX0RPV04gPT0gdGhpcy5vcGVyOwogICAgfSwKICAgIGlzV2hlZWx1cDogZnVuY3Rpb24gaXNXaGVlbHVwKCkgewogICAgICAgIHJldHVybiBCVE4uV0hFRUxfUk9MTF9VUCA9PSB0aGlzLmJ0bjsKICAgIH0sCiAgICBpc1doZWVsZG93bjogZnVuY3Rpb24gaXNXaGVlbGRvd24oKSB7CiAgICAgICAgcmV0dXJuIEJUTi5XSEVFTF9ST0xMX0RPV04gPT0gdGhpcy5idG47CiAgICB9LAogICAgaXNMZWZ0S2V5OiBmdW5jdGlvbiBpc0xlZnRLZXkoKSB7CiAgICAgICAgcmV0dXJuIEJUTi5MRUZUID09IHRoaXMuYnRuOwogICAgfSwKICAgIGlzUmlnaHRLZXk6IGZ1bmN0aW9uIGlzUmlnaHRLZXkoKSB7CiAgICAgICAgcmV0dXJuIEJUTi5SSUdIVCA9PSB0aGlzLmJ0bjsKICAgIH0sCiAgICBpc1doZWVsS2V5OiBmdW5jdGlvbiBpc1doZWVsS2V5KCkgewogICAgICAgIHJldHVybiBCVE4uV0hFRUwgPT0gdGhpcy5idG47CiAgICB9LAogICAgaXNXaGVlbFJvbGw6IGZ1bmN0aW9uIGlzV2hlZWxSb2xsKCkgewogICAgICAgIHJldHVybiB0aGlzLmlzV2hlZWxkb3duKCkgfHwgdGhpcy5pc1doZWVsdXAoKTsKICAgIH0sCgogICAgdGltZW91dDogZnVuY3Rpb24gdGltZW91dCgpIHsKICAgICAgICB2YXIgY3VyID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgcmV0dXJuIGN1ciAtIHRoaXMuX3RpbWUgPj0gdGhpcy5fdGltZW91dE1pbGxpczsKICAgIH0sCgogICAgX3RvU3RyaW5nOiBmdW5jdGlvbiBfdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIF91dGlsLmxpc3QoImJ0bjoiLCB0aGlzLmJ0biwgIiwgb3BlcjoiLCB0aGlzLm9wZXIsICIsIHRpbWVvdXQ6IiwgdGhpcy50aW1lb3V0KCksICIsIGF0ICgiLCB0aGlzLnh5LngsICIsICIsIHRoaXMueHkueSwgIikiKS5qb2luKCIiKTsKICAgIH0KfSk7Cgptb2R1bGUuZXhwb3J0cy5CVE4gPSBCVE47CgovKioqLyB9KSwKLyogMzMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CnZhciBfbG9nZ2VyID0gX3V0aWwudGFnTG9nZ2VyKCJBZGRvbnNQMlAiKTsKCnZhciBfX2V2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7CgovKioKICoKICog5a+55LqO6KeG6aKR5rWB77yM5b6A5b6AIOS8muWHuueOsCDlpJrkuKrmtYEg5YWx55So5LiA5Liqd2VicnRj5oOF5Ya1CiAqCiAqCiAqIEB0eXBlIHt7fX0KICogQHByaXZhdGUKICovCgp2YXIgYWRkb25zU2Vzc2lvbiA9IGZ1bmN0aW9uIGFkZG9uc1Nlc3Npb24oU2Vzc2lvbikgewogICAgdmFyIE5ld1Nlc3Npb24gPSBTZXNzaW9uLmV4dGVuZCh7CgogICAgICAgIHBvc3RNZXNzYWdlOiBmdW5jdGlvbiBwb3N0TWVzc2FnZShtZXNzYWdlLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICB2YXIgdHN4SWQgPSBtZXNzYWdlLnRzeElkOwogICAgICAgICAgICBpZiAoIW1lc3NhZ2UudHN4SWQpIHsKICAgICAgICAgICAgICAgIHRzeElkID0gbWVzc2FnZS50c3hJZCA9ICJNU0ciICsgRGF0ZS5ub3coKSArICItIiArIGVtZWRpYS5fX3Nlc3Npb25fZ2xvYmFsQ291bnQrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU2Vzc2lvbi5wcm90b3R5cGUucG9zdE1lc3NhZ2UuY2FsbChzZWxmLCBtZXNzYWdlLCBjYWxsYmFjayk7CgogICAgICAgICAgICAoZnVuY3Rpb24gKHRzeElkKSB7CiAgICAgICAgICAgICAgICB2YXIgYXR0ZW5kZWUgPSBzZWxmLm93bmVyOwogICAgICAgICAgICAgICAgaWYgKGF0dGVuZGVlLmlzUDJQKCkgJiYgc2VsZi5fY2FsbGJhY2tzW3RzeElkXSkgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3NlbnRNZXNzYWdlID0gc2VsZi5fY2FsbGJhY2tzW3RzeElkXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9zZW50TWVzc2FnZSAmJiBfc2VudE1lc3NhZ2Uub3AgPT09IDEwMDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByc3AgPSBzZWxmLm5ld01lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAxMDAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzeElkOiBfc2VudE1lc3NhZ2UudHN4SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtSWQ6IF9zZW50TWVzc2FnZS5tZW1JZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiAiMzAwMG1zIG5vdCByZWN2IHJlc3BvbnNlLiB3aWxsIHN1Y2Nlc3MgY2FsbGJhY2suICIgKyBfc2VudE1lc3NhZ2UudHN4SWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbk1lc3NhZ2UocnNwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDMwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSh0c3hJZCk7CiAgICAgICAgfSwKCiAgICAgICAgX19tb2RpZnlNZXNzYWdlRm9yUG9zdDogZnVuY3Rpb24gX19tb2RpZnlNZXNzYWdlRm9yUG9zdChtZXNzYWdlKSB7CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICAgIG1lc3NhZ2UgPSBTZXNzaW9uLnByb3RvdHlwZS5fX21vZGlmeU1lc3NhZ2VGb3JQb3N0LmNhbGwoc2VsZiwgbWVzc2FnZSk7CgogICAgICAgICAgICB2YXIgYXR0ZW5kZWUgPSBzZWxmLm93bmVyOwogICAgICAgICAgICBpZiAoYXR0ZW5kZWUuaXNQMlAoKSkgewogICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uub3AgPT09IDEwMiB8fCBtZXNzYWdlLm9wID09PSAxMDUpIHsKICAgICAgICAgICAgICAgICAgICAvL+e8k+WtmCAg5Zue6LCD5o6o5rWB5oiQ5YqfCiAgICAgICAgICAgICAgICAgICAgdmFyIHJzcCA9IHNlbGYubmV3TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAxMDAxLAogICAgICAgICAgICAgICAgICAgICAgICB0c3hJZDogbWVzc2FnZS50c3hJZCwKICAgICAgICAgICAgICAgICAgICAgICAgbWVtSWQ6IG1lc3NhZ2UubWVtSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtSWQ6IG1lc3NhZ2UucnRjSWQgKyAoYXR0ZW5kZWUuaXNDYWxsZXIoKSA/ICJfX0NhbGxlciIgOiAiX19DYWxsZWUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgc3ZlcjogMQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbk1lc3NhZ2UocnNwKTsKICAgICAgICAgICAgICAgICAgICB9LCAxMDApOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2UuX2NhY2hlZF8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhY2hlTWVzc2FnZSA9IF91dGlsLmV4dGVuZCh7IF9jYWNoZWRfOiB0cnVlIH0sIG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoY2FjaGVNZXNzYWdlLCAidHN4SWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5vcCA9PT0gMTAyICYmIChhdHRlbmRlZS5fX2NhY2hlX1ttZXNzYWdlLnJ0Y0lkXSA9IFtdKS5wdXNoKGNhY2hlTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uub3AgPT09IDEwNSAmJiBhdHRlbmRlZS5fX2NhY2hlX1ttZXNzYWdlLnJ0Y0lkXSAmJiBhdHRlbmRlZS5fX2NhY2hlX1ttZXNzYWdlLnJ0Y0lkXS5wdXNoKGNhY2hlTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlLl9fY2FjaGVfW21lc3NhZ2UucnRjSWRdICYmIChhdHRlbmRlZS5fX2NhY2hlX1ttZXNzYWdlLnJ0Y0lkXS5zZWxmSWQgPSBhdHRlbmRlZS5nZXRNZW1iZXJJZCgpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKG1lc3NhZ2UsICJfY2FjaGVkXyIpOwoKICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lbUlkKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHAycE1lc3NhZ2UgPSBzZWxmLm5ld01lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICBvcDogMTAwNCwKICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc0lkOiBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUobWVzc2FnZSwgInNlc3NJZCIpLAogICAgICAgICAgICAgICAgICAgICAgICBtZW1JZDogX3V0aWwucmVtb3ZlQXR0cmlidXRlKG1lc3NhZ2UsICJtZW1JZCIpLAogICAgICAgICAgICAgICAgICAgICAgICB0c3hJZDogX3V0aWwucmVtb3ZlQXR0cmlidXRlKG1lc3NhZ2UsICJ0c3hJZCIpLAogICAgICAgICAgICAgICAgICAgICAgICBhcmc6IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBwMnBNZXNzYWdlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5vcCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMjA1OgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnNwID0gc2VsZi5uZXdNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAxMDAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHN4SWQ6IG1lc3NhZ2UudHN4SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IDAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25NZXNzYWdlKHJzcCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwMjoKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwNDoKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwNToKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwNjoKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwNzoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZW5kUmVhc29uID09PSAtMTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhc2UgMTAwMToKICAgICAgICAgICAgICAgICAgICBjYXNlIDQwMDoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAycE1lc3NhZ2UgPSBzZWxmLm5ld01lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IDEwMDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzSWQ6IF91dGlsLnJlbW92ZUF0dHJpYnV0ZShtZXNzYWdlLCAic2Vzc0lkIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0c3hJZDogX3V0aWwucmVtb3ZlQXR0cmlidXRlKG1lc3NhZ2UsICJ0c3hJZCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBKU09OLnN0cmluZ2lmeShtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBwMnBNZXNzYWdlOwoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMzAzOgogICAgICAgICAgICAgICAgICAgIGNhc2UgMjA2OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlOwogICAgICAgIH0sCgogICAgICAgIG9uUDJQTWVzc2FnZTogZnVuY3Rpb24gb25QMlBNZXNzYWdlKGV2dCkgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgIHZhciBhdHRlbmRlZSA9IHNlbGYub3duZXI7CgogICAgICAgICAgICBpZiAoc2VsZi5vd25lci5pc0NvbmZyKCkpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiUmVjdiBwMnAgY3RybCBtZXNzYWdlLiB3aGVuIENPTkZSLiBpZ25vcmUiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2dC5hcmcpOwogICAgICAgICAgICBtZXNzYWdlLm1lbUlkID0gZXZ0Lm1lbUlkOwogICAgICAgICAgICBtZXNzYWdlLnRzeElkID0gZXZ0LnRzeElkOwogICAgICAgICAgICBtZXNzYWdlLnNlc3NJZCA9IGV2dC5zZXNzSWQ7CgogICAgICAgICAgICBpZiAobWVzc2FnZS5vcCA9PT0gNDAwKSB7CiAgICAgICAgICAgICAgICBtZXNzYWdlLnN0cmVhbUlkID0gbWVzc2FnZS5ydGNJZCArIChzZWxmLm93bmVyLmlzQ2FsbGVyKCkgPyAiX19DYWxsZWUiIDogIl9fQ2FsbGVyIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChtZXNzYWdlLm9wICE9PSAxMDAxKSB7CiAgICAgICAgICAgICAgICB2YXIgcnNwID0gc2VsZi5uZXdNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICBvcDogMTAwMSwKICAgICAgICAgICAgICAgICAgICB0c3hJZDogZXZ0LnRzeElkLAogICAgICAgICAgICAgICAgICAgIG1lbUlkOiBldnQubWVtSWQsCiAgICAgICAgICAgICAgICAgICAgc2Vzc0lkOiBldnQuc2Vzc0lkLAogICAgICAgICAgICAgICAgICAgIHJlc3VsdDogMCwKICAgICAgICAgICAgICAgICAgICBtc2c6ICJXZWIgc2RrIHN1Y2Nlc3MgcmVjdiIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm9wID09PSAxMDIgfHwgbWVzc2FnZS5vcCA9PT0gMTA1KSB7CiAgICAgICAgICAgICAgICAgICAgX3V0aWwuZXh0ZW5kKHJzcCwgewogICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1JZDogbWVzc2FnZS5ydGNJZCArIChhdHRlbmRlZS5pc0NhbGxlcigpID8gIl9fQ2FsbGVlIiA6ICJfX0NhbGxlciIpLAogICAgICAgICAgICAgICAgICAgICAgICBzdmVyOiAxCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShyc3ApOwogICAgICAgICAgICB9CgogICAgICAgICAgICAoZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub25NZXNzYWdlKG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfSwgMTApOwogICAgICAgICAgICB9KShtZXNzYWdlKTsKICAgICAgICB9CiAgICB9KTsKCiAgICBfdXRpbC5leHRlbmQoTmV3U2Vzc2lvbi5wcm90b3R5cGUuX2V2ZW50cywgewogICAgICAgICcxMDA0JzogJ29uUDJQTWVzc2FnZScKICAgIH0pOwoKICAgIHJldHVybiBOZXdTZXNzaW9uOwp9OwoKdmFyIGFkZG9uc0F0dGVuZGVlID0gZnVuY3Rpb24gYWRkb25zQXR0ZW5kZWUoQXR0ZW5kZWUpIHsKICAgIHZhciBOZXdBdHRlbmRlZSA9IEF0dGVuZGVlLmV4dGVuZCh7CiAgICAgICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgIEF0dGVuZGVlLnByb3RvdHlwZS5fX2luaXRfXy5jYWxsKHNlbGYpOwoKICAgICAgICAgICAgc2VsZi5fX2NhY2hlXyA9IHt9OwoKICAgICAgICAgICAgdmFyIGV4dEljZVJlYnVpbGQgPSBzZWxmLmljZVJlYnVpbGQ7CiAgICAgICAgICAgIHNlbGYuaWNlUmVidWlsZCA9IGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICAgICAgICBpZiAoIXNlbGYuaXNQMlAoKSB8fCAhc3RyZWFtLnJ0Y0lkKSB7CiAgICAgICAgICAgICAgICAgICAgZXh0SWNlUmVidWlsZC5jYWxsKHNlbGYsIHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChzdHJlYW0uX3dlYnJ0YyAmJiBzdHJlYW0uX3dlYnJ0Yy5hbnN3ZXJXZWJydGMgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlN0cmVhbSBub3QgYXV0byBpY2VSZWJ1aWxkLiBjYXVzZWQgYnkgYW5zd2VyIHdlYnJ0Yy4gaXQgPSAiLCBzdHJlYW0uaWQsIHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8v6KKr5Y+rIHJ0Y0lkIOS4jeiHquWKqOmHjeW7uu+8m+aJgOacieeahOiuoumYhea1geS4jeiHquWKqOmHjeW7uu+8mwogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiU3RyZWFtIG5vdCBhdXRvIGljZVJlYnVpbGQuIGNhdXNlZCBieSBub3QgbG9jYXRlZC4gaXQgPSAiLCBzdHJlYW0uaWQsIHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIHN0cmVhbS5pc1JlcHVibGlzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIC8vIHNlbGYucHVzaChzdHJlYW0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlKTsKICAgICAgICAgICAgICAgIGV4dEljZVJlYnVpbGQuY2FsbChzZWxmLCBzdHJlYW0pOwogICAgICAgICAgICB9OwogICAgICAgIH0sCgogICAgICAgIG9uRW50ZXI6IGZ1bmN0aW9uIG9uRW50ZXIoY3ZlciwgbWVtKSB7CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEF0dGVuZGVlLnByb3RvdHlwZS5vbkVudGVyLmNhbGwoc2VsZiwgY3ZlciwgbWVtKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIGlmICghc2VsZi5pc1AyUCgpIHx8ICEobWVtID0gc2VsZi5fY2FjaGVNZW1iZXJzW21lbS5pZF0pKSB7CiAgICAgICAgICAgICAgICAgICAgLy/kuI3mmK9wMnAg5oiW6ICFIOayoeaciSBtZW1iZXIKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdXRpbC5mb3JFYWNoKHNlbGYuX19jYWNoZV8sIGZ1bmN0aW9uIChydGNJZCwgY2FjaGVNZXNzYWdlcykgewogICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZU1lc3NhZ2VzLmFuc3dlcmVkICE9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsLmZvckVhY2goY2FjaGVNZXNzYWdlcywgZnVuY3Rpb24gKGluZGV4LCBjYWNoZU1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoY2FjaGVNZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVNZXNzYWdlLm1lbUlkID0gbWVtLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoY2FjaGVNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKGNhY2hlTWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgcmVqZWN0QW5zd2VyOiBmdW5jdGlvbiByZWplY3RBbnN3ZXIobWVtSWQsIHJ0Y0lkLCBlbmRSZWFzb24sIHJzcEZhaWwpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIHRlcm1DID0gc2VsZi5uZXdNZXNzYWdlKCkuc2V0T3AoMTA3KS5zZXRSdGNJZChydGNJZCkuc2V0TWVtSWQobWVtSWQpLnNldEVuZFJlYXNvbihlbmRSZWFzb24pOwoKICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh0ZXJtQywgZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICAgICAgaWYgKHJzcC5yZXN1bHQgIT0gMCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub25FdmVudChuZXcgX19ldmVudC5Sc3BGYWlsKHsgcmVxdWVzdDogdGVybUMsIHJlc3BvbnNlOiByc3AgfSkpOwogICAgICAgICAgICAgICAgICAgIHJzcEZhaWwgJiYgcnNwRmFpbChuZXcgX19ldmVudC5Sc3BGYWlsKHsgcmVxdWVzdDogdGVybUMsIHJlc3BvbnNlOiByc3AgfSkpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIGNsb3NlV2VicnRjOiBmdW5jdGlvbiBjbG9zZVdlYnJ0YyhydGNJZCwgcmVtYWluTG9jYWxTdHJlYW0sIHNlcnZlckNsb3NlZCkgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICB2YXIgZmFpbGVkID0gZmFsc2U7CgogICAgICAgICAgICBpZiAoc2VsZi5pc1AyUCgpKSB7CiAgICAgICAgICAgICAgICB2YXIgX3dlYnJ0YyA9IHNlbGYuX2ljZXNbcnRjSWRdOwogICAgICAgICAgICAgICAgaWYgKF93ZWJydGMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSBfd2VicnRjLmljZUNvbm5lY3Rpb25TdGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIGZhaWxlZCA9IHN0YXRlID09PSAnZmFpbGVkJzsKICAgICAgICAgICAgICAgICAgICBmYWlsZWQgPSBmYWlsZWQgJiYgX3dlYnJ0Yy5fcmVidWlsZENvdW50IDwgZW1lZGlhLmNvbmZpZy5pY2VSZWJ1aWxkQ291bnQ7CgogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiV2VicnRjIHN0YXRlIGZhaWxlZC4gaXQgaXMgIiwgcnRjSWQsIF93ZWJydGMuX3JlYnVpbGRDb3VudCwgZW1lZGlhLmNvbmZpZy5pY2VSZWJ1aWxkQ291bnQsIF93ZWJydGMuX19pZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vcDJwIGZhaWxlZOiupOS4uuacjeWKoeerr+WFs+mXre+8jOS4jeWPkemAgSAxMDcuCiAgICAgICAgICAgIEF0dGVuZGVlLnByb3RvdHlwZS5jbG9zZVdlYnJ0Yy5jYWxsKHNlbGYsIHJ0Y0lkLCByZW1haW5Mb2NhbFN0cmVhbSwgc2VydmVyQ2xvc2VkIHx8IGZhaWxlZCk7CgogICAgICAgICAgICBpZiAoc2VsZi5pc1AyUCgpKSBpZiAoIXNlcnZlckNsb3NlZCAmJiBmYWlsZWQpIHsKICAgICAgICAgICAgICAgIC8vcDJwIGZhaWxlZCDpnIDopoHph43ov54g5omA5Lul6ZyA6KaB5bCGIHN0ZWFt6YeN5paw5re75Yqg5YiwX2xpbmtlZFN0cmVhbXPkuK0KICAgICAgICAgICAgICAgIC8v5o2i5Y+l6K+d6K+0IOmcgOimgemHjeW7ulJUQ+W/hemhuyBfbGlua2VkU3RyZWFtc+S4reacieWAvAogICAgICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChzZWxmLl9jYWNoZVN0cmVhbXMsIGZ1bmN0aW9uIChzaWQsIF9zdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX3N0cmVhbS5ydGNJZCA9PT0gcnRjSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbGlua2VkU3RyZWFtc1tzaWRdID0gX3N0cmVhbTsKICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJSZXB1dCBzdHJlYW0gdG8gX2xpbmtlZFN0cmVhbXMiLCBzaWQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBwMnDml7YgaWNlIGNsb3NlIOWPr+S7peiupOS4uiDmtYEg5bey57uP5YWz6Zet77yM56e76Zmk5rWBCiAgICAgICAgICAgIGlmIChzZWxmLmlzUDJQKCkgJiYgIXJlbWFpbkxvY2FsU3RyZWFtKSB7CiAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fX2NhY2hlXywgcnRjSWQpOwoKICAgICAgICAgICAgICAgIHZhciBfdG1wID0gX3V0aWwuZXh0ZW5kKHt9LCBzZWxmLl9jYWNoZVN0cmVhbXMpOwoKICAgICAgICAgICAgICAgIF91dGlsLmZvckVhY2goX3RtcCwgZnVuY3Rpb24gKHN0cmVhbUlkLCBzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAocnRjSWQgPT09IHN0cmVhbS5ydGNJZCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fbGlua2VkU3RyZWFtcywgc3RyZWFtLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJtU3RyZWFtID0gX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlbGYuX2NhY2hlU3RyZWFtcywgc3RyZWFtLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJQMlAgY2xvc2Ugd2VicnRjLiByZW1vdmUgc3RyZWFtIGZyb20gX2NhY2hlU3RyZWFtcy4gaXQgPSAiLCBzdHJlYW0uaWQsIHN0cmVhbSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocm1TdHJlYW0uX2xvY2FsTWVkaWFTdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3NlcnZpY2UuX3N0b3BUcmFja3Mocm1TdHJlYW0uX2xvY2FsTWVkaWFTdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5vblJlbW92ZVN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbSA9IHNlbGYubmV3U3RyZWFtKHN0cmVhbSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblJlbW92ZVN0cmVhbShzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBzdWJzY3JpYmVTdHJlYW06IGZ1bmN0aW9uIHN1YnNjcmliZVN0cmVhbShydGNJZCwgc3RyZWFtSWQsIHJzcEZhaWwsIHN1YkFyZ3MpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKCFzZWxmLmlzUDJQKCkpIHsKICAgICAgICAgICAgICAgIEF0dGVuZGVlLnByb3RvdHlwZS5zdWJzY3JpYmVTdHJlYW0uY2FsbChzZWxmLCBydGNJZCwgc3RyZWFtSWQsIHJzcEZhaWwsIHN1YkFyZ3MpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyB0aHJvdyAiUDJQIG5vdCBhbGxvdyBjYWxsIHN1YnNjcmliZVN0cmVhbSI7CiAgICAgICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLl9pY2VzW3J0Y0lkXTsKCiAgICAgICAgICAgIHZhciBzdWJTdHJlYW0gPSBzZWxmLl9jYWNoZVN0cmVhbXNbc3RyZWFtSWRdOwoKICAgICAgICAgICAgLy92YXIgc3RyZWFtID0gc2VsZi5uZXdTdHJlYW0oc3ViU3RyZWFtKTsKICAgICAgICAgICAgdmFyIHN0cmVhbSA9IHN1YlN0cmVhbTsKICAgICAgICAgICAgc3RyZWFtLl93ZWJydGMgPSB3ZWJydGM7CiAgICAgICAgICAgIHN0cmVhbS5ydGNJZCA9IHJ0Y0lkOwoKICAgICAgICAgICAgdmFyIHByZVN1YkFyZ3MgPSBzdHJlYW0uc3ViQXJnczsKCiAgICAgICAgICAgIHN1YkFyZ3MgPSBzdWJBcmdzIHx8IHsgc3ViU1ZpZGVvOiB0cnVlLCBzdWJTQXVkaW86IHRydWUgfTsKICAgICAgICAgICAgc3RyZWFtLnN1YkFyZ3MgPSBzdHJlYW0uc3ViQXJncyB8fCB7IHN1YlNWaWRlbzogdHJ1ZSwgc3ViU0F1ZGlvOiB0cnVlIH07CiAgICAgICAgICAgIHN0cmVhbS5fd2VicnRjICYmIChzdHJlYW0uX3dlYnJ0Yy5zdWJBcmdzID0gc3RyZWFtLl93ZWJydGMuc3ViQXJncyB8fCB7IHN1YlNWaWRlbzogdHJ1ZSwgc3ViU0F1ZGlvOiB0cnVlIH0pOwoKICAgICAgICAgICAgaWYgKCFzdHJlYW0uc3ViQXJncy5zdWJTVmlkZW8gJiYgc3ViQXJncy5zdWJTVmlkZW8gJiYgc3RyZWFtLnZvZmYpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIlN1YiBub3QgYWxsb3cuIHN0cmVhbSB2b2ZmIik7CiAgICAgICAgICAgICAgICB0aHJvdyAiU3ViIG5vdCBhbGxvdy4gc3RyZWFtIHZvZmYiOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXN0cmVhbS5zdWJBcmdzLnN1YlNBdWRpbyAmJiBzdWJBcmdzLnN1YlNBdWRpbyAmJiBzdHJlYW0uYW9mZikgewogICAgICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiU3ViIG5vdCBhbGxvdy4gc3RyZWFtIGFvZmYiKTsKICAgICAgICAgICAgICAgIHRocm93ICJTdWIgbm90IGFsbG93LiBzdHJlYW0gYW9mZiI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzdHJlYW0uc3ViQXJncy5zdWJTVmlkZW8gJiYgIXN1YkFyZ3Muc3ViU1ZpZGVvICYmICFzdHJlYW0udm9mZiAmJiBlbWVkaWEuaXNTYWZhcmkpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIlN1YiBub3QgYWxsb3cuIHNhZmFyaSBjbG9zZSBzdWIgdmlkZW8uIHdpbGwgZXJyb3IiKTsKICAgICAgICAgICAgICAgIHRocm93ICJTdWIgbm90IGFsbG93LiBzYWZhcmkgY2xvc2Ugc3ViIHZpZGVvLiB3aWxsIGVycm9yIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc3ViQXJncyAmJiBzdHJlYW0uX3dlYnJ0YyAmJiBzdHJlYW0uX3dlYnJ0Yy5zZXRTdWJBcmdzKHN1YkFyZ3MpOwogICAgICAgICAgICBzdWJBcmdzICYmIChzdHJlYW0uc3ViQXJncyA9IHN1YkFyZ3MpOwoKICAgICAgICAgICAgdmFyIGV2dCA9IG5ldyBfX2V2ZW50LlN1YlN1Y2Nlc3MoewogICAgICAgICAgICAgICAgc3RyZWFtOiBzdHJlYW0sCiAgICAgICAgICAgICAgICBoaWRkZW46IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHNlbGYuX3VwZGF0ZVJlbW90ZVN0cmVhbShzdHJlYW0sIHN0cmVhbS5fd2VicnRjLmdldFJlbW90ZVN0cmVhbSgpKTsKICAgICAgICAgICAgc2VsZi5vbkV2ZW50KGV2dCk7CiAgICAgICAgfSwKCiAgICAgICAgdW5zdWJzY3JpYmVTdHJlYW06IGZ1bmN0aW9uIHVuc3Vic2NyaWJlU3RyZWFtKHN0cmVhbUlkKSB7CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICAgIGlmICghc2VsZi5pc1AyUCgpKSB7CiAgICAgICAgICAgICAgICBBdHRlbmRlZS5wcm90b3R5cGUudW5zdWJzY3JpYmVTdHJlYW0uY2FsbChzZWxmLCBzdHJlYW1JZCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBvblB1YjogZnVuY3Rpb24gb25QdWIoY3ZlciwgbWVtSWQsIHB1YlMpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKCFzZWxmLmlzUDJQKCkpIHsKICAgICAgICAgICAgICAgIEF0dGVuZGVlLnByb3RvdHlwZS5vblB1Yi5jYWxsKHNlbGYsIGN2ZXIsIG1lbUlkLCBwdWJTKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHN0cmVhbSA9IEF0dGVuZGVlLnByb3RvdHlwZS5vblB1Yi5jYWxsKHNlbGYsIGN2ZXIsIG1lbUlkLCBwdWJTKTsKCiAgICAgICAgICAgIHJldHVybiBzdHJlYW07CiAgICAgICAgfSwKCiAgICAgICAgb25TdHJlYW1zOiBmdW5jdGlvbiBvblN0cmVhbXMoY3Zlciwgc3RyZWFtcykgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICBpZiAoIXNlbGYuaXNQMlAoKSkgewogICAgICAgICAgICAgICAgQXR0ZW5kZWUucHJvdG90eXBlLm9uU3RyZWFtcy5jYWxsKHNlbGYsIGN2ZXIsIHN0cmVhbXMpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlAyUCBpbmdyb25lIHRoZSBvblN0cmVhbXMiKTsKICAgICAgICB9LAoKICAgICAgICBfaG93RG9XZWJydGNXaGVuQ3J0RXhzaXRzV2VicnRjOiBmdW5jdGlvbiBfaG93RG9XZWJydGNXaGVuQ3J0RXhzaXRzV2VicnRjKHdlYnJ0YykgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICBpZiAoIXNlbGYuaXNQMlAoKSkgewogICAgICAgICAgICAgICAgQXR0ZW5kZWUucHJvdG90eXBlLl9ob3dEb1dlYnJ0Y1doZW5DcnRFeHNpdHNXZWJydGMuY2FsbChzZWxmLCB3ZWJydGMpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzZWxmLmNsb3NlV2VicnRjKHdlYnJ0Yy5nZXRSdGNJZCgpLCB0cnVlLCB0cnVlKTsKICAgICAgICB9LAoKICAgICAgICBjcmVhdGVXZWJydGNBbmRTdWJzY3JpYmVTdHJlYW06IGZ1bmN0aW9uIGNyZWF0ZVdlYnJ0Y0FuZFN1YnNjcmliZVN0cmVhbShzdHJlYW1JZCwgY2FsbGJhY2tzLCBpY2VTZXJ2ZXJDb25maWcsIHN1YkFyZ3MpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKCFzZWxmLmlzUDJQKCkpIHsKICAgICAgICAgICAgICAgIEF0dGVuZGVlLnByb3RvdHlwZS5jcmVhdGVXZWJydGNBbmRTdWJzY3JpYmVTdHJlYW0uY2FsbChzZWxmLCBzdHJlYW1JZCwgY2FsbGJhY2tzLCBpY2VTZXJ2ZXJDb25maWcsIHN1YkFyZ3MpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICBjYWxsYmFja3MgfHwgKGNhbGxiYWNrcyA9IHt9KTsKCiAgICAgICAgICAgIHZhciBzdWJTdHJlYW0gPSBzZWxmLl9jYWNoZVN0cmVhbXNbc3RyZWFtSWRdOwogICAgICAgICAgICB2YXIgc3ViTWVtYmVyID0gc2VsZi5fY2FjaGVNZW1iZXJzW3N1YlN0cmVhbS5vd25lci5pZF07CgogICAgICAgICAgICAvL3ZhciBzdHJlYW0gPSBzZWxmLm5ld1N0cmVhbShzdWJTdHJlYW0pOwogICAgICAgICAgICB2YXIgc3RyZWFtID0gc3ViU3RyZWFtOwogICAgICAgICAgICBzdWJBcmdzID0gc3ViQXJncyB8fCBzdHJlYW0uc3ViQXJncyB8fCB7IHN1YlNWaWRlbzogdHJ1ZSwgc3ViU0F1ZGlvOiB0cnVlIH07CgogICAgICAgICAgICBmdW5jdGlvbiBfb25TdWJGYWlsKGV2dCkgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJzdWIgc3RyZWFtIGVycm9yIiwgc3RyZWFtSWQsIGV2dCk7CgogICAgICAgICAgICAgICAgcHJlU3ViQXJncyAmJiBzdHJlYW0uX3dlYnJ0YyAmJiBzdHJlYW0uX3dlYnJ0Yy5zZXRTdWJBcmdzKHByZVN1YkFyZ3MpOwogICAgICAgICAgICAgICAgcHJlU3ViQXJncyAmJiAoc3RyZWFtLnN1YkFyZ3MgPSBwcmVTdWJBcmdzKTsKCiAgICAgICAgICAgICAgICBldnQgPSBuZXcgX19ldmVudC5TdWJGYWlsKHsKICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHN0cmVhbSwKICAgICAgICAgICAgICAgICAgICBoaWRkZW46IGV2dC5oaWRkZW4gPT09IHRydWUsCiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGV2dAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FsbGJhY2tzICYmIGNhbGxiYWNrcy5vbkV2ZW50ICYmIGNhbGxiYWNrcy5vbkV2ZW50KGV2dCk7CiAgICAgICAgICAgICAgICBzZWxmLm9uRXZlbnQgJiYgc2VsZi5vbkV2ZW50KGV2dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBwdWJTdHJlYW1WQ29kZXMgPSBzdWJTdHJlYW0udmNvZGVzOwogICAgICAgICAgICB2YXIgcHViTWVtYmVyU3VwcG9ydFZDb2RlcyA9IHN1Yk1lbWJlci52Y29kZXM7CiAgICAgICAgICAgIHZhciBzZWxmU3VwcG9ydFZDb2RlcyA9IHNlbGYuc3VwcG9ydFZDb2RlczsKCiAgICAgICAgICAgIHZhciBvcHRpbWFsVmlkZW9Db2RlY3MgPSBzZWxmLl9nZXRPcHRpbWFsVmlkZW9Db2RlY3NTdWJzZXQocHViU3RyZWFtVkNvZGVzLCBwdWJNZW1iZXJTdXBwb3J0VkNvZGVzLCBzZWxmU3VwcG9ydFZDb2Rlcyk7CgogICAgICAgICAgICBzdWJBcmdzID0gc3ViQXJncyB8fCBzdHJlYW0uc3ViQXJnczsKCiAgICAgICAgICAgIHZhciBwcmVTdWJBcmdzID0gc3RyZWFtLnN1YkFyZ3M7CgogICAgICAgICAgICB2YXIgd2l0aG91dFZpZGVvID0gIShzdHJlYW0udmNvZGVzICYmIHN0cmVhbS52Y29kZXMubGVuZ3RoID4gMCk7CiAgICAgICAgICAgIHZhciBvZmZlck9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLAogICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVWaWRlbzogc3ViQXJncy5zdWJTVmlkZW8gJiYgd2l0aG91dFZpZGVvCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAoIW9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvICYmICFvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbykgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJvZmZlclRvUmVjZWl2ZUF1ZGlvID09IGZhbHNlIGFuZCBvZmZlclRvUmVjZWl2ZVZpZGVvID09IGZhbHNlIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciB3ZWJydGMgPSBzZWxmLmNyZWF0ZVdlYnJ0Yyh7CiAgICAgICAgICAgICAgICBfcnRjSWQ6IHN0cmVhbS5ydGNJZCwKCiAgICAgICAgICAgICAgICBpY2VTZXJ2ZXJDb25maWc6IGljZVNlcnZlckNvbmZpZywKICAgICAgICAgICAgICAgIG9wdGltYWxWaWRlb0NvZGVjczogb3B0aW1hbFZpZGVvQ29kZWNzLAogICAgICAgICAgICAgICAgb2ZmZXJPcHRpb25zOiBvZmZlck9wdGlvbnMsCgogICAgICAgICAgICAgICAgb25Hb3RNZWRpYVN0cmVhbTogZnVuY3Rpb24gb25Hb3RNZWRpYVN0cmVhbShyZW1vdGVNZWRpYVN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgIHZhciBldnQgPSBuZXcgX19ldmVudC5TdWJTdWNjZXNzKHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiBzdHJlYW0sCiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3Mub25Hb3RSZW1vdGUgJiYgY2FsbGJhY2tzLm9uR290UmVtb3RlKHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50ICYmIHNlbGYub25FdmVudChldnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBzdHJlYW0uaWNlUmVidWlsZENvdW50KTsKICAgICAgICAgICAgdmFyIHJ0Y0lkID0gd2VicnRjLmdldFJ0Y0lkKCk7CgogICAgICAgICAgICBfbG9nZ2VyLndhcm4ocnRjSWQsICIgc3ViIHN0cmVhbSAiLCBzdHJlYW1JZCwgb3B0aW1hbFZpZGVvQ29kZWNzKTsKCiAgICAgICAgICAgIHZhciBwcmVXZWJydGMgPSBzdHJlYW0uX3dlYnJ0YzsKCiAgICAgICAgICAgIHN0cmVhbS5fd2VicnRjID0gd2VicnRjOwogICAgICAgICAgICBzdHJlYW0ucnRjSWQgPSBydGNJZDsKICAgICAgICAgICAgc3RyZWFtLm93bmVyID0gX3V0aWwuZXh0ZW5kKHt9LCBzdWJNZW1iZXIpOwogICAgICAgICAgICBzZWxmLl9pY2VzW3J0Y0lkXSA9IHdlYnJ0YzsKCiAgICAgICAgICAgIHdlYnJ0Yy5hbnN3ZXJXZWJydGMgPSB0cnVlOwoKICAgICAgICAgICAgc3ViQXJncyAmJiBzdHJlYW0uX3dlYnJ0YyAmJiBzdHJlYW0uX3dlYnJ0Yy5zZXRTdWJBcmdzKHN1YkFyZ3MpOwogICAgICAgICAgICBzdWJBcmdzICYmIChzdHJlYW0uc3ViQXJncyA9IHN1YkFyZ3MpOwoKICAgICAgICAgICAgZnVuY3Rpb24gY2hhbm5lbFNldChsb2NhbFN0cmVhbSkgewogICAgICAgICAgICAgICAgbG9jYWxTdHJlYW0gJiYgd2VicnRjLnNldExvY2FsU3RyZWFtKGxvY2FsU3RyZWFtKTsKICAgICAgICAgICAgICAgIHdlYnJ0Yy5zZXRSZW1vdGVEZXNjcmlwdGlvbihzdHJlYW0uc2RwKTsKICAgICAgICAgICAgICAgIHN0cmVhbS5jYW5kcyAmJiBzdHJlYW0uY2FuZHMubGVuZ3RoID4gMCAmJiB3ZWJydGMuYWRkSWNlQ2FuZGlkYXRlKHN0cmVhbS5jYW5kcyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChydGNJZCA9PT0gInJ0Yy0iICsgc2VsZi50aWNrZXQuY29uZnJJZCkgewogICAgICAgICAgICAgICAgdmFyIGxhc3RDYWxsZWVQdWIgPSBzZWxmLl9fbGFzdENhbGxlZVB1YjsKCiAgICAgICAgICAgICAgICB2YXIgY2FsbGVlUHViID0gc2VsZi5fY2FjaGVTdHJlYW1zW3J0Y0lkICsgKHNlbGYuaXNDYWxsZXIoKSA/ICJfX0NhbGxlciIgOiAiX19DYWxsZWUiKV07CiAgICAgICAgICAgICAgICB2YXIgY2FsbGVlUHViID0gbmV3IHNlbGYuX3NlcnZpY2UuQVZQdWJzdHJlYW0oY2FsbGVlUHViIHx8IHsKICAgICAgICAgICAgICAgICAgICBjb25zdGFpbnRzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiAhc3RyZWFtLmFvZmYsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiAhc3RyZWFtLnZvZmYKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBwcmVXZWJydGMgJiYgcHJlV2VicnRjLmdldExvY2FsU3RyZWFtKCkgJiYgc2VsZi5fc2VydmljZS5fc3RvcFRyYWNrcyhwcmVXZWJydGMuZ2V0TG9jYWxTdHJlYW0oKSk7CgogICAgICAgICAgICAgICAgc2VsZi5fc2VydmljZS5vcGVuVXNlck1lZGlhKGNhbGxlZVB1YikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbSA9IHNlbGYubmV3U3RyZWFtKGNhbGxlZVB1Yik7CgogICAgICAgICAgICAgICAgICAgIHN0cmVhbS5fbG9jYWxNZWRpYVN0cmVhbSA9IGNhbGxlZVB1Yi5sb2NhbFN0cmVhbTsKICAgICAgICAgICAgICAgICAgICBzdHJlYW0uX3dlYnJ0YyA9IHdlYnJ0YzsKICAgICAgICAgICAgICAgICAgICBzdHJlYW0ucnRjSWQgPSB3ZWJydGMuZ2V0UnRjSWQoKTsKICAgICAgICAgICAgICAgICAgICBzdHJlYW0uaWQgPSBydGNJZCArIChzZWxmLmlzQ2FsbGVyKCkgPyAiX19DYWxsZXIiIDogIl9fQ2FsbGVlIik7CiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLm93bmVyID0geyBpZDogc2VsZi5nZXRNZW1iZXJJZCgpLCBuaWNrTmFtZTogc2VsZi5uaWNrTmFtZSwgbmFtZTogc2VsZi5zeXNVc2VySWQsIGV4dDogc2VsZi5leHRPYmogfTsKCiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkV2ZW50KG5ldyBfX2V2ZW50LlB1c2hTdWNjZXNzKHsgc3RyZWFtOiBzdHJlYW0sIGhpZGRlbjogdHJ1ZSB9KSk7CgogICAgICAgICAgICAgICAgICAgIGNoYW5uZWxTZXQoY2FsbGVlUHViLmxvY2FsU3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLmFuc3dlckNhbGwocnRjSWQsIGNhbGxlZVB1YiwgX29uU3ViRmFpbCk7CiAgICAgICAgICAgICAgICB9LCBfb25TdWJGYWlsKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNoYW5uZWxTZXQoKTsKICAgICAgICAgICAgICAgIHNlbGYuYW5zd2VyKHJ0Y0lkLCBfb25TdWJGYWlsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBOZXdBdHRlbmRlZTsKfTsKCnZhciBhZGRvbnNTZXJ2aWNlID0gZnVuY3Rpb24gYWRkb25zU2VydmljZShTZXJ2aWNlLCBTZXNzaW9uLCBBdHRlbmRlZSkgewogICAgdmFyIE5ld1NlcnZpY2UgPSBTZXJ2aWNlLmV4dGVuZCh7CiAgICAgICAgU2Vzc2lvbjogU2Vzc2lvbiwKICAgICAgICBBdHRlbmRlZTogQXR0ZW5kZWUsCgogICAgICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICBTZXJ2aWNlLnByb3RvdHlwZS5fX2luaXRfXy5jYWxsKHNlbGYpOwoKICAgICAgICAgICAgaWYgKHNlbGYudXNlUlRDQ2ZnID09PSB1bmRlZmluZWQgfHwgc2VsZi51c2VSVENDZmcgPT09IGZhbHNlIHx8IHNlbGYudXNlUlRDQ2ZnID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICBzZWxmLnVzZVJUQ0NmZyA9IGVtZWRpYS5jb25maWcuZm9yY2VVc2VSVENDZmdJZlNlcnZlclJldHVybldoZW5QMlA7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBwdXNoOiBmdW5jdGlvbiBwdXNoKHB1YlMsIHB1c2hlZCwgb25QdXNoRXJyb3IpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKHNlbGYuY3VycmVudCAmJiBzZWxmLmN1cnJlbnQuaXNQMlAoKSkgewogICAgICAgICAgICAgICAgaWYgKHB1YlMudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIlAyUCBkbyBub3QgYWxsb3cgYXVkaW9fbWl4ZXIiKTsKICAgICAgICAgICAgICAgICAgICB0aHJvdyAiUDJQIGRvIG5vdCBhbGxvdyBhdWRpb19taXhlciI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHB1YlMgaW5zdGFuY2VvZiBzZWxmLkFWUHVic3RyZWFtICYmICFwdWJTLnJ0Y0lkKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5Li75Y+rIOWmguaenOayoeacieS4u1JUQywg5bCG5Yib5bu6CiAgICAgICAgICAgICAgICAgICAgdmFyIHAycEFWID0gc2VsZi5jdXJyZW50Ll9jYWNoZVN0cmVhbXNbInJ0Yy0iICsgc2VsZi5jdXJyZW50LnRpY2tldC5jb25mcklkICsgIl9fQ2FsbGVyIl0gfHwgc2VsZi5jdXJyZW50Ll9jYWNoZVN0cmVhbXNbInJ0Yy0iICsgc2VsZi5jdXJyZW50LnRpY2tldC5jb25mcklkICsgIl9fQ2FsbGVlIl07CgogICAgICAgICAgICAgICAgICAgIGlmICghcDJwQVYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHViUy5ydGNJZCA9ICJydGMtIiArIHNlbGYuY3VycmVudC50aWNrZXQuY29uZnJJZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFNlcnZpY2UucHJvdG90eXBlLnB1c2guY2FsbChzZWxmLCBwdWJTLCBwdXNoZWQsIG9uUHVzaEVycm9yKTsKICAgICAgICB9LAoKICAgICAgICBuZXdTZXNzaW9uOiBmdW5jdGlvbiBuZXdTZXNzaW9uKGF0dGVuZGVlLCB0aWNrZXQpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBTZXJ2aWNlLnByb3RvdHlwZS5uZXdTZXNzaW9uLmNhbGwoc2VsZiwgYXR0ZW5kZWUsIHRpY2tldCk7CiAgICAgICAgICAgIHZhciBwcmVPblRlcm1DID0gc2Vzc2lvbi5vblRlcm1DOwogICAgICAgICAgICB2YXIgcHJlT25BbnNDID0gc2Vzc2lvbi5vbkFuc0M7CgogICAgICAgICAgICByZXR1cm4gX3V0aWwuZXh0ZW5kKHNlc3Npb24sIHsKICAgICAgICAgICAgICAgIG9uSW5pdEM6IGZ1bmN0aW9uIG9uSW5pdEMobWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgIGlmICghYXR0ZW5kZWUuaXNQMlAoKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5ydGNJZCA9PT0gInJ0Yy0iICsgYXR0ZW5kZWUudGlja2V0LmNvbmZySWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/mlLbliLDkuLvlkbzlj6sKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbUlkID0gbWVzc2FnZS5ydGNJZCArIChhdHRlbmRlZS5pc0NhbGxlcigpID8gIl9fQ2FsbGVlIiA6ICJfX0NhbGxlciIpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3N0cmVhbSA9IGF0dGVuZGVlLl9jYWNoZVN0cmVhbXNbc3RyZWFtSWRdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3N0cmVhbSAmJiBfc3RyZWFtLm93bmVyICYmIF9zdHJlYW0ub3duZXIuaWQgIT09IG1lc3NhZ2UubWVtSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlLnJlamVjdEFuc3dlcihtZXNzYWdlLm1lbUlkLCBtZXNzYWdlLnJ0Y0lkLCAxMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZS5wb3N0TWVzc2FnZShhdHRlbmRlZS5uZXdNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogMTAwMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1JZDogbWVzc2FnZS5tZW1JZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0c3hJZDogbWVzc2FnZS50c3hJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IC01NTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiAiT3RoZXIgZGV2aWNlIGNhbGwgaXQuIHlvdSBuby4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvL+iupOS4uiDlj6rmnInkuIDkuKrpn7Pop4bpopHmtYHvvIzlpJrkuKrmoYzpnaLlhbHkuqvnmoTmtYEgIOmfs+inhumikea1geWPjOWQkeeahOOAggogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHViUy5zZHAgPSBtZXNzYWdlLnNkcDsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnB1YlMuY2FuZHMgPSBtZXNzYWdlLmNhbmRzOwogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHViUy5pZCA9IG1lc3NhZ2UucnRjSWQgKyAoYXR0ZW5kZWUuaXNDYWxsZXIoKSA/ICJfX0NhbGxlZSIgOiAiX19DYWxsZXIiKTsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnB1YlMuX2xvY2F0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnB1YlMubWVtSWQgPSBtZXNzYWdlLm1lbUlkOwogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucHViUy5ydGNJZCA9IG1lc3NhZ2UucnRjSWQ7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5wdWJTLnN2ZXIgPSAwOwoKICAgICAgICAgICAgICAgICAgICB2YXIgX3N0cmVhbSA9IGF0dGVuZGVlLl9jYWNoZVN0cmVhbXNbbWVzc2FnZS5wdWJTLmlkXTsKICAgICAgICAgICAgICAgICAgICBpZiAoX3N0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnB1YlMuc3ZlciA9IF9zdHJlYW0uc3ZlciArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIF91dGlsLnJlbW92ZUF0dHJpYnV0ZShhdHRlbmRlZS5fbWF5YmVOb3RFeGlzdFN0cmVhbXMsIG1lc3NhZ2UucHViUy5pZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uUHViLmNhbGwoYXR0ZW5kZWUsICsrYXR0ZW5kZWUuX2N2ZXIsIG1lc3NhZ2UubWVtSWQsIG1lc3NhZ2UucHViUyk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIG9uVGVybUM6IGZ1bmN0aW9uIG9uVGVybUMoZXZ0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdHRlbmRlZS5pc1AyUCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZU9uVGVybUMuY2FsbChhdHRlbmRlZSwgZXZ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGV2dC5lbmRSZWFzb24gPT09IC0yMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGVyUHViID0gYXR0ZW5kZWUuX2NhY2hlU3RyZWFtc1tldnQucnRjSWQgKyAiX19DYWxsZXIiXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiQmVnaW4gcmUtcHVibGlzaC4gMjAiLCBjYWxsZXJQdWIpOwogICAgICAgICAgICAgICAgICAgICAgICBjYWxsZXJQdWIgJiYgc2VsZi5fcmVwdWJsaXNoKGNhbGxlclB1Yik7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBtZW1JZCDkuI3nm7jnrYnor7TmmI4g5p2l6IeqIHAycOeahOWvueaWuQogICAgICAgICAgICAgICAgICAgIC8vIOaEj+aAneaYryBldnQubWVtSWQg5YWz6Zet5LqG5LiA5LiqIHJ0Y0lkCiAgICAgICAgICAgICAgICAgICAgaWYgKGV2dC5tZW1JZCAmJiBldnQubWVtSWQgIT09IGF0dGVuZGVlLmdldE1lbWJlcklkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g55Sx5LqO5rWB6ZuG5ZCI5Lit77yM5omA5pyJ55qE5Y+R5biD5rWB5Z2H5pyJ5Liq54m554K577yMY2FsbGVyIF9fQ2FsbGVy57uT5bC+77yMY2FsbGVlIF9fQ2FsbGVl57uT5bC+CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFs+mXrea1geaXtu+8jOWFiOWFs+mXreiuoumYhea1ge+8jOWcqOWFs+mXreWPkeW4g+a1gQogICAgICAgICAgICAgICAgICAgICAgICAvLyDmiYDku6XlgZrkuobkuIvmjpLluo8KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRlZFN0cmVhbXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChhdHRlbmRlZS5fY2FjaGVTdHJlYW1zLCBmdW5jdGlvbiAoc3RyZWFtSWQsIHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkU3RyZWFtcy5wdXNoKHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRTdHJlYW1zID0gc29ydGVkU3RyZWFtcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5pZCA+IGIuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbmRlZS5pc0NhbGxlZSgpID8gMCAtIHJlc3VsdCA6IHJlc3VsdDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBfdXRpbC5mb3JFYWNoKHNvcnRlZFN0cmVhbXMsIGZ1bmN0aW9uIChfaW5kZXgsIHN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXZ0Lm1lbUlkIOWFs+mXreeahCBldnQucnRjSWQg5omA5YWz6IGU55qE5rWBIOimgeWFs+mXrQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmVhbSAmJiBzdHJlYW0ub3duZXIgJiYgc3RyZWFtLm93bmVyLmlkID09PSBldnQubWVtSWQgJiYgZXZ0LnJ0Y0lkID09PSBzdHJlYW0ucnRjSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldnQuZW5kUmVhc29uICE9PSAtMTAgJiYgcHJlT25UZXJtQy5jYWxsKGF0dGVuZGVlLCBldnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0LnJ0Y0lkID09PSAicnRjLSIgKyBhdHRlbmRlZS50aWNrZXQuY29uZnJJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZS5vblVucHViKCsrYXR0ZW5kZWUuX2N2ZXIsIGV2dC5tZW1JZCwgc3RyZWFtLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldnQuZW5kUmVhc29uID09PSAxMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZS5vbkV2ZW50KG5ldyBfX2V2ZW50Lk90aGVyRGV2aWNlQW5zd2VyKHsgcnRjSWQ6IGV2dC5ydGNJZCwgc3RyZWFtOiBzdHJlYW0gfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtICYmIHN0cmVhbS5vd25lciAmJiBzdHJlYW0ub3duZXIuaWQgPT09IGF0dGVuZGVlLmdldE1lbWJlcklkKCkgJiYgZXZ0LnJ0Y0lkID09PSBzdHJlYW0ucnRjSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZS5jbG9zZVdlYnJ0YyhldnQucnRjSWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uVW5wdWIoKythdHRlbmRlZS5fY3Zlciwgc3RyZWFtLm93bmVyLmlkLCBzdHJlYW0uaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZXZ0LmVuZFJlYXNvbiAhPT0gLTEwICYmIHByZU9uVGVybUMuY2FsbChhdHRlbmRlZSwgZXZ0KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGV2dC5lbmRSZWFzb24gPT09IDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlLm9uRXZlbnQobmV3IF9fZXZlbnQuT3RoZXJEZXZpY2VBbnN3ZXIoeyBydGNJZDogZXZ0LnJ0Y0lkIH0pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIG9uQW5zQzogZnVuY3Rpb24gb25BbnNDKGV2dCkgewogICAgICAgICAgICAgICAgICAgIGlmICghYXR0ZW5kZWUuaXNQMlAoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBwcmVPbkFuc0MuY2FsbChhdHRlbmRlZSwgZXZ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdHRlbmRlZS5fX2NhY2hlX1tldnQucnRjSWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiV2VicnRjICIsIGV2dC5ydGNJZCwgIm5vdCBjcmVhdGVkLiBkcm9wIHRoZSBhbnN3ZXIiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChhdHRlbmRlZS5fX2NhY2hlX1tldnQucnRjSWRdLmFuc3dlcmVkID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiV2VicnRjICIsIGV2dC5ydGNJZCwgImhhZCBiZWVuIGFuc0MiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlLnJlamVjdEFuc3dlcihldnQubWVtSWQsIGV2dC5ydGNJZCwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZS5wb3N0TWVzc2FnZShhdHRlbmRlZS5uZXdNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAxMDAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtSWQ6IGV2dC5tZW1JZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzeElkOiBldnQudHN4SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IC01NTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6ICJPdGhlciBkZXZpY2Ugc3ViIGl0LiB5b3Ugbm8uIgogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0LnB1YlMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJlYW0gPSBhdHRlbmRlZS5uZXdTdHJlYW0oZXZ0LnB1YlMpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5fd2VicnRjID0gYXR0ZW5kZWUuX2ljZXNbZXZ0LnJ0Y0lkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5ydGNJZCA9IGV2dC5ydGNJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5pZCA9IGV2dC5ydGNJZCArIChhdHRlbmRlZS5pc0NhbGxlcigpID8gIl9fQ2FsbGVlIiA6ICJfX0NhbGxlciIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLm93bmVyID0gYXR0ZW5kZWUuX2NhY2hlTWVtYmVyc1tldnQubWVtSWRdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXR0ZW5kZWUuX2NhY2hlU3RyZWFtc1tzdHJlYW0uaWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWUub25QdWIuY2FsbChhdHRlbmRlZSwgKythdHRlbmRlZS5fY3ZlciwgZXZ0Lm1lbUlkLCBzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZS5fY2FjaGVTdHJlYW1zW3N0cmVhbS5pZF0gPSBzdHJlYW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWUub25FdmVudChuZXcgX19ldmVudC5TdWJTdWNjZXNzKHsgc3RyZWFtOiBzdHJlYW0sIGhpZGRlbjogdHJ1ZSB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnNDTWVtYmVyID0gYXR0ZW5kZWUuX2NhY2hlTWVtYmVyc1tldnQubWVtSWRdOwoKICAgICAgICAgICAgICAgICAgICAgICAgcHJlT25BbnNDLmNhbGwoYXR0ZW5kZWUsIGV2dCk7CgogICAgICAgICAgICAgICAgICAgICAgICBfdXRpbC5mb3JFYWNoKGF0dGVuZGVlLl9jYWNoZU1lbWJlcnMsIGZ1bmN0aW9uIChfbWVtYmVySWQsIF9tZW1iZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfbWVtYmVySWQgIT09IGV2dC5tZW1JZCAmJiBhbnNDTWVtYmVyLm1lbU5hbWUgPT09IF9tZW1iZXIubWVtTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlLnJlamVjdEFuc3dlcihfbWVtYmVySWQsIGV2dC5ydGNJZCwgMTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZS5fX2NhY2hlX1tldnQucnRjSWRdLmFuc3dlcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBOZXdTZXJ2aWNlOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU2VydmljZSkgewogICAgdmFyIF9TZXNzaW9uID0gU2VydmljZS5wcm90b3R5cGUuU2Vzc2lvbiB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKICAgIHZhciBTZXNzaW9uID0gYWRkb25zU2Vzc2lvbihfU2Vzc2lvbi5leHRlbmQoe30pKTsKCiAgICB2YXIgX0F0dGVuZGVlID0gU2VydmljZS5wcm90b3R5cGUuQXR0ZW5kZWUgfHwgX193ZWJwYWNrX3JlcXVpcmVfXygyMik7CiAgICB2YXIgQXR0ZW5kZWUgPSBhZGRvbnNBdHRlbmRlZShfQXR0ZW5kZWUuZXh0ZW5kKHt9KSk7CgogICAgcmV0dXJuIGFkZG9uc1NlcnZpY2UoU2VydmljZSwgU2Vzc2lvbiwgQXR0ZW5kZWUpOwp9OwoKLyoqKi8gfSksCi8qIDM0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJvdXRlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gb3V0ZXI7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX01hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdW5kZXJzY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB1bmRlcnNjb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4odW5kZXJzY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubih6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fKTsKCgoKCgp2YXIgX291dGVyID0ge307CgpfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5vbk1lbWJlckpvaW4gPSBmdW5jdGlvbiAobWVtYmVyLCBjb25mcklkKSB7CiAgICBlbWVkaWEuZGVjb2RlTWVtZWJlck5hbWUobWVtYmVyKTsKICAgIHRoaXMub25NZW1iZXJKb2luZWQobWVtYmVyLCBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5fY29uZnIoY29uZnJJZCkpOwp9OwpfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5vbk1lbWJlckxlYXZlID0gZnVuY3Rpb24gKG1lbWJlciwgcmVhc29uLCBjb25mcklkKSB7CiAgICBlbWVkaWEuZGVjb2RlTWVtZWJlck5hbWUobWVtYmVyKTsKICAgIHRoaXMub25NZW1iZXJFeGl0ZWQobWVtYmVyLCByZWFzb24sIF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLl9jb25mcihjb25mcklkKSk7Cn07Cl9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLl9vblJvbGVVcGRhdGVkID0gZnVuY3Rpb24gKHJvbGUsIGNvbmZySWQpIHsKICAgIHRoaXMub25Sb2xlQ2hhbmdlZChyb2xlLCBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5fY29uZnIoY29uZnJJZCkpOwp9OwpfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5fb25BZGRNZW1iZXJTdHJlYW0gPSBmdW5jdGlvbiAoc3RyZWFtLCBjb25mcklkKSB7CiAgICBzdHJlYW0gJiYgZW1lZGlhLmRlY29kZU1lbWViZXJOYW1lKHN0cmVhbS5vd25lcik7CiAgICB0aGlzLm9uU3RyZWFtQWRkZWQoc3RyZWFtLm93bmVyLCBzdHJlYW0sIF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLl9jb25mcihjb25mcklkKSk7Cn07Cl9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLl9vblJlbW92ZU1lbWJlclN0cmVhbSA9IGZ1bmN0aW9uIChzdHJlYW0sIGNvbmZySWQpIHsKICAgIHN0cmVhbSAmJiBlbWVkaWEuZGVjb2RlTWVtZWJlck5hbWUoc3RyZWFtLm93bmVyKTsKICAgIHRoaXMub25TdHJlYW1SZW1vdmVkKHN0cmVhbS5vd25lciwgc3RyZWFtLCBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5fY29uZnIoY29uZnJJZCkpOwp9OwpfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5fb25VcGRhdGVNZW1iZXJTdHJlYW0gPSBmdW5jdGlvbiAoc3RyZWFtLCBjb25zdGFpbnRzLCBjb25mcklkKSB7CiAgICBzdHJlYW0gJiYgZW1lZGlhLmRlY29kZU1lbWViZXJOYW1lKHN0cmVhbS5vd25lcik7CiAgICB0aGlzLm9uU3RyZWFtVXBkYXRlZCAmJiB0aGlzLm9uU3RyZWFtVXBkYXRlZChzdHJlYW0ub3duZXIsIHN0cmVhbSwgY29uc3RhaW50cywgX01hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic2luZ2xlIl0uX2NvbmZyKGNvbmZySWQpKTsKfTsKX01hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic2luZ2xlIl0ub25FeGl0ID0gZnVuY3Rpb24gKHJlYXNvbiwgZmFpbGVkLCBjb25mcklkKSB7CiAgICB0aGlzLm9uQ29uZmVyZW5jZUV4aXQocmVhc29uLCBmYWlsZWQsIF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLl9jb25mcihjb25mcklkKSk7Cn07Cgpfb3V0ZXIub25NZW1iZXJKb2luZWQgPSBmdW5jdGlvbiAobWVtYmVyKSB7fTsKX291dGVyLm9uTWVtYmVyRXhpdGVkID0gZnVuY3Rpb24gKG1lbWJlciwgcmVhc29uKSB7fTsKX291dGVyLm9uUm9sZUNoYW5nZWQgPSBmdW5jdGlvbiAocm9sZSkge307Cl9vdXRlci5vblN0cmVhbUFkZGVkID0gZnVuY3Rpb24gKG1lbWJlciwgc3RyZWFtKSB7fTsKX291dGVyLm9uU3RyZWFtUmVtb3ZlZCA9IGZ1bmN0aW9uIChtZW1iZXIsIHN0cmVhbSkge307Cl9vdXRlci5vbkNvbmZlcmVuY2VFeGl0ID0gZnVuY3Rpb24gKHJlYXNvbiwgZXJyb3IpIHt9OwoKLy8gUHJvbWlzZQpfb3V0ZXIuam9pbkNvbmZlcmVuY2VXaXRoVGlja2V0ID0gX01hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic2luZ2xlIl0uam9pblVzZVRpY2tldDsKX291dGVyLmpvaW5Db25mZXJlbmNlID0gX01hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic2luZ2xlIl0uam9pblVzZVBhc3N3b3JkOwpfb3V0ZXIuZ2V0Q29uZmVyZW5jZVRrdCA9IF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLnJlcVRrdDsKCl9vdXRlci5wdWJsaXNoID0gZnVuY3Rpb24gKGNvbnN0YWludHMsIHZpZGVvVGFnLCBleHQpIHsKICAgIHJldHVybiBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5zaGFyZVZpZGVvV2l0aEF1ZGlvKGNvbnN0YWludHMudmlkZW8sIGNvbnN0YWludHMuYXVkaW8sIHZpZGVvVGFnLCBleHQpOwp9Owpfb3V0ZXIudW5wdWJsaXNoID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgcmV0dXJuIF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLmh1bmd1cChzdHJlYW0pOwp9OwovL19vdXRlci5zdWJzY3JpYmUgPSBpbm5lci5zdWJzY3JpYmU7IC8vc3Vic2NyaWJlOiBmdW5jdGlvbiAobWVtYmVyLCBzdHJlYW0sIHN1YlNWaWRlbywgc3ViU0F1ZGlvLCB2aWRlb1RhZywgY29uZnJJZCkKX291dGVyLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN0cmVhbSkgewogICAgcmV0dXJuIF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLmh1bmd1cChzdHJlYW0pOwp9OwovL19vdXRlci5zd2l0Y2hDYW1lcmEgPSBpbm5lci5zd2l0Y2hDYW1lcmE7Cl9vdXRlci5leGl0Q29uZmVyZW5jZSA9IGZ1bmN0aW9uIChjbG9zZWRTZWxmQ29uZnIpIHsKICAgIHJldHVybiBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5leGl0KGNsb3NlZFNlbGZDb25mciB8fCBmYWxzZSk7Cn07Cgpfb3V0ZXIuZ2V0Q29uZmVyZW5jZUluZm8gPSBmdW5jdGlvbiAoY29uZnJJZCwgcGFzc3dvcmQpIHsKICAgIHJldHVybiBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5zZWxlY3RDb25mcihjb25mcklkLCBwYXNzd29yZCk7Cn07Cl9vdXRlci5jcmVhdGVDb25mZXJlbmNlID0gX01hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic2luZ2xlIl0uY3JlYXRlQ29uZnI7Cl9vdXRlci5ncmFudFJvbGUgPSBmdW5jdGlvbiAoY29uZnIsIG1lbWJlcnMsIHJvbGUpIHsKICAgIGVtZWRpYS5kZWNvZGVNZW1lYmVyTmFtZShtZW1iZXJzKTsKICAgIHJldHVybiBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5jaGFuYWdlUm9sZXMocm9sZSwgbWVtYmVycywgY29uZnIuaWQpOwp9Owpfb3V0ZXIua2lja01lbWJlcnNCeUlkID0gZnVuY3Rpb24gKGNvbmZyLCBtZW1iZXJzKSB7CiAgICBlbWVkaWEuZGVjb2RlTWVtZWJlck5hbWUobWVtYmVycyk7CiAgICByZXR1cm4gX01hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic2luZ2xlIl0ua2lja01lbWJlcihtZW1iZXJzLCBjb25mci5pZCk7Cn07Cl9vdXRlci5kZXN0cm95Q29uZmVyZW5jZSA9IGZ1bmN0aW9uIChjb25mcikgewogICAgcmV0dXJuIF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLmRpc2JhbmRDb25mcihjb25mciwgY29uZnIucm9sZVRva2VuKTsKfTsKCmVtZWRpYS5kZWNvZGVNZW1lYmVyTmFtZSA9IGZ1bmN0aW9uIChtZW1iZXIpIHsKICAgIGlmICh0eXBlb2YgZW1lZGlhLmRlY29kZU1lbWViZXJOYW1lU3RyaW5nICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgcmV0dXJuIG1lbWJlcjsKICAgIH0KCiAgICBpZiAodHlwZW9mIG1lbWJlciA9PT0gJ3N0cmluZycpIHsKICAgICAgICByZXR1cm4gZW1lZGlhLmRlY29kZU1lbWViZXJOYW1lU3RyaW5nKG1lbWJlcik7CiAgICB9CgogICAgaWYgKHVuZGVyc2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuaXNBcnJheShtZW1iZXIpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZW1iZXIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbWVtYmVyW2ldID0gZW1lZGlhLmRlY29kZU1lbWViZXJOYW1lKG1lbWJlcltpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBtZW1iZXI7CiAgICB9CgogICAgaWYgKG1lbWJlci5uYW1lKSB7CiAgICAgICAgbWVtYmVyLmdsb2JhbE5hbWUgPSBtZW1iZXIubmFtZTsKICAgICAgICBtZW1iZXIubWVtTmFtZSA9IG1lbWJlci5uYW1lID0gZW1lZGlhLmRlY29kZU1lbWViZXJOYW1lKG1lbWJlci5uYW1lKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKG1lbWJlci5tZW1OYW1lKSB7CiAgICAgICAgbWVtYmVyLmdsb2JhbE5hbWUgPSBtZW1iZXIubWVtTmFtZTsKICAgICAgICBtZW1iZXIubWVtTmFtZSA9IG1lbWJlci5uYW1lID0gZW1lZGlhLmRlY29kZU1lbWViZXJOYW1lKG1lbWJlci5tZW1OYW1lKTsKICAgICAgICByZXR1cm47CiAgICB9Cn07CgplbWVkaWEuQ29uZnJUeXBlID0gX01hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic2luZ2xlIl0uQ29uZnJUeXBlOwplbWVkaWEuUm9sZSA9IF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLlJvbGU7Cgp6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQoKShmdW5jdGlvbiAoKSB7CiAgICB2YXIgV2ViSU0gPSB3aW5kb3cuV2ViSU07CgogICAgaWYgKFdlYklNICYmIFdlYklNLmNvbm4gJiYgdHlwZW9mIFdlYklNLmNvbm4ub25PcGVuZWQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAvLyBub2luc3BlY3Rpb24gSlNBbm5vdGF0b3IKICAgICAgICB2YXIgdXNlSU0gPSBmdW5jdGlvbiB1c2VJTSgpIHsKICAgICAgICAgICAgZW1lZGlhLmRlY29kZU1lbWViZXJOYW1lU3RyaW5nID0gZnVuY3Rpb24gKG1lbWJlcikgewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZW1iZXIgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbWJlci5pbmRleE9mKFdlYklNLmNvbm4ub3JnTmFtZSkgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZW1iZXI7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgX2luZGV4ID0gbWVtYmVyLmluZGV4T2YoIl8iKTsKICAgICAgICAgICAgICAgICAgICBpZiAoX2luZGV4IDwgMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfaW5kZXggPSAwOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9pbmRleCsrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gbWVtYmVyLmluZGV4T2YoIkAiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZW5kSW5kZXggPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZEluZGV4ID0gbWVtYmVyLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBtZW1iZXIuc3Vic3RyaW5nKF9pbmRleCwgZW5kSW5kZXgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBtZW1iZXI7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5zZXRVcmxDcmVhdG9yKGZ1bmN0aW9uICh1cmwsIGFwaU5hbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBXZWJJTS5jb25uLmFwaVVybCArIHVybDsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfTWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJzaW5nbGUiXS5zZXRJZGVudGl0eShXZWJJTS5jb25uLm9yZ05hbWUgKyAiIyIgKyBXZWJJTS5jb25uLmFwcE5hbWUgKyAiXyIgKyBXZWJJTS5jb25uLnVzZXIgKyAiQCIgKyBXZWJJTS5jb25uLmRvbWFpbiwgV2ViSU0uY29ubi50b2tlbik7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIF9vbk9wZW5lZCA9IFdlYklNLmNvbm4ub25PcGVuZWQ7CiAgICAgICAgV2ViSU0uY29ubi5vbk9wZW5lZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX29uT3BlbmVkLmFwcGx5KFdlYklNLmNvbm4sIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIHVzZUlNKCk7CiAgICAgICAgfTsKCiAgICAgICAgaWYgKFdlYklNLmNvbm4udG9rZW4pIHsKICAgICAgICAgICAgdXNlSU0oKTsKICAgICAgICB9OwogICAgfQp9KTsKCnZhciBvdXRlciA9IHVuZGVyc2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0LmEuZXh0ZW5kKF9NYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNpbmdsZSJdLCBfb3V0ZXIpOwoKLyoqKi8gfSksCi8qIDM1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzaW5nbGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHNpbmdsZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdW5kZXJzY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB1bmRlcnNjb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4odW5kZXJzY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgcnhqc19vcGVyYXRvcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdHJlYW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N0cmVhbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9TdHJlYW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyk7CgoKCgoKCgoKCnZhciBfbG9nZ2VyID0gX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEudGFnTG9nZ2VyKCJtZ3IiKTsKCndpbmRvdy5lbWVkaWEgPSB3aW5kb3cuZW1lZGlhIHx8IHt9OwoKdmFyIHJlc3RBcGlzID0gewogICAgY3JlYXRlQ29uZnI6ICIvZWFzZW1vYi9ydGMvcmVxL3RpY2tldCIsCiAgICByZXFUa3Q6ICIvZWFzZW1vYi9ydGMvcmVxL3RpY2tldCIsCiAgICBjaGFuYWdlUm9sZXM6ICIvZWFzZW1vYi9ydGMvY2hhbmFnZS9yb2xlcyIsCiAgICBkaXNiYW5kQ29uZnI6ICIvZWFzZW1vYi9ydGMvZGlzYmFuZC9jb25mZXJlbmNlIiwKICAgIGtpY2tNZW1iZXI6ICIvZWFzZW1vYi9ydGMva2ljay9tZW1iZXIiLAogICAgc2VsZWN0Q29uZnI6ICIvZWFzZW1vYi9ydGMvc2VsZWN0L2NvbmZyIgp9OwoKZnVuY3Rpb24gTWFuYWdlcigpIHsKICAgIHRoaXMuX2NvbmZycyA9IHt9OwogICAgdGhpcy5fc2VydmljZXMgPSB7fTsKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwogICAgdGhpcy5fdmlkZW9zID0ge307Cn0KCk1hbmFnZXIucHJvdG90eXBlLkNvbmZyVHlwZSA9IHsKICAgIENPTU1VTklDQVRJT046IDEwLAogICAgQ09NTVVOSUNBVElPTl9NSVg6IDExLAogICAgTElWRTogMTIsCiAgICBQMlA6IDEzLAogICAgSU5URVJDT01NOiAxNAp9OwoKTWFuYWdlci5wcm90b3R5cGUuUm9sZSA9IHsKICAgIEFETUlOOiA3LAogICAgVEFMS0VSOiAzLAogICAgQVVESUVOQ0U6IDEKfTsKCnZhciBfYWpheCA9IGZ1bmN0aW9uIF9hamF4KGFqYXhVcmwsIGNvbmZyQXJncykgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5hamF4KHsKICAgICAgICAgICAgdHlwZTogJ1BPU1QnLAogICAgICAgICAgICB1cmw6IGFqYXhVcmwsCiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGNvbmZyQXJncyksCiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSwgc3RhdHVzLCB4aHIpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoIlJFU1Q6ICIsIGRhdGEsICIgLT4gIiwgY29uZnJBcmdzLCBhamF4VXJsKTsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEucmVtb3ZlQXR0cmlidXRlKGRhdGEsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmV4dGVuZChkYXRhLCB7IGVycm9yVHlwZTogInNlcnZlcl9yZWZ1c2UiIH0pOwogICAgICAgICAgICAgICAgICAgIHJlamVjdChkYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKHhociwgZXJyb3JUeXBlLCBfZXJyb3IpIHsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIGVycm9yVHlwZTogImh0dHBfZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIGVycm9yOiB4aHIuc3RhdHVzLAogICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogX2Vycm9yCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygiUkVTVDogIiwgZGF0YSwgIiAtPiAiLCBjb25mckFyZ3MsIGFqYXhVcmwpOwoKICAgICAgICAgICAgICAgIHJlamVjdCh7CiAgICAgICAgICAgICAgICAgICAgZXJyb3JUeXBlOiAiaHR0cF9lcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHhoci5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBfZXJyb3IKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKfTsKCnZhciBfYWpheDIgPSBmdW5jdGlvbiBfYWpheDIoYWpheFVybCwgY29uZnJBcmdzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gb25TdWJzY3JpcHRpb24ob2JzZXJ2ZXIpIHsKICAgICAgICB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQuYS5hamF4KHsKICAgICAgICAgICAgdHlwZTogJ1BPU1QnLAogICAgICAgICAgICB1cmw6IGFqYXhVcmwsCiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGNvbmZyQXJncyksCiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSwgc3RhdHVzLCB4aHIpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoIlJFU1Q6ICIsIGRhdGEsICIgLT4gIiwgY29uZnJBcmdzLCBhamF4VXJsKTsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEucmVtb3ZlQXR0cmlidXRlKGRhdGEsICJlcnJvciIpOwogICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQoZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuZXh0ZW5kKGRhdGEsIHsgZXJyb3JUeXBlOiAic2VydmVyX3JlZnVzZSIgfSk7CiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcih4aHIsIGVycm9yVHlwZSwgX2Vycm9yMikgewogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3JUeXBlOiAiaHR0cF9lcnJvciIsCiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHhoci5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBfZXJyb3IyCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygiUkVTVDogIiwgZGF0YSwgIiAtPiAiLCBjb25mckFyZ3MsIGFqYXhVcmwpOwoKICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgICAgICBlcnJvclR5cGU6ICJodHRwX2Vycm9yIiwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogeGhyLnN0YXR1cywKICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IF9lcnJvcjIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9Owp9OwoKKGZ1bmN0aW9uIGxvYWRBcGkoX3VybHMpIHsKICAgIF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmZvckVhY2goX3VybHMsIGZ1bmN0aW9uIChhcGksIHVybCkgewogICAgICAgIE1hbmFnZXIucHJvdG90eXBlW2FwaV0gPSBmdW5jdGlvbiAoYXBpQXJncykgewogICAgICAgICAgICByZXR1cm4gX2FqYXgyKHRoaXMuY3JlYXRlVXJsKHVybCwgYXBpKSwgYXBpQXJncyk7CiAgICAgICAgfTsKICAgIH0pOwp9KShyZXN0QXBpcyk7CgpNYW5hZ2VyLnByb3RvdHlwZS5jcmVhdGVVcmwgPSBmdW5jdGlvbiAodXJsLCBhcGkpIHsKICAgIHJldHVybiB1cmw7Cn07CgpNYW5hZ2VyLnByb3RvdHlwZS5zZXRVcmxDcmVhdG9yID0gZnVuY3Rpb24gKGNyZWF0b3IpIHsKICAgIHRoaXMuY3JlYXRlVXJsID0gY3JlYXRvci5iaW5kKHRoaXMpOwp9OwoKTWFuYWdlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHt9OwoKTWFuYWdlci5wcm90b3R5cGUuWmVyb1N0cmVhbSA9IF9TdHJlYW1fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX19kZWZhdWx0LmEuZXh0ZW5kKHsKICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYudHlwZSA9IDI7CiAgICAgICAgc2VsZi5pZCA9ICIwIjsKICAgICAgICBzZWxmLl9sb2NhdGVkID0gZmFsc2U7CgogICAgICAgIHNlbGYubXV0ZWRNdXRlZCA9IGZhbHNlOwogICAgfSwKCiAgICBvbkdvdFJlbW90ZU1lZGlhU3RyZWFtOiBmdW5jdGlvbiBvbkdvdFJlbW90ZU1lZGlhU3RyZWFtKHJlbW90ZU1lZGlhU3RyZWFtKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYucmVtb3RlUGxheUF1ZGlvT2JqZWN0KSB7CiAgICAgICAgICAgIHZhciBfYXVkaW9JZCA9ICJfX29fcmVtb3RlX3BsYXlfYXVkaW9fIiArIHNlbGYuaWQ7CgogICAgICAgICAgICB2YXIgYXVkaW9PYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpOwogICAgICAgICAgICBhdWRpb09iamVjdC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICBhdWRpb09iamVjdC5pZCA9ICJfX29fcmVtb3RlX3BsYXlfYXVkaW9fIiArIHNlbGYuaWQ7CiAgICAgICAgICAgIGF1ZGlvT2JqZWN0LmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgICAgICAgYXVkaW9PYmplY3QucGxheXNpbmxpbmUgPSB0cnVlOwoKICAgICAgICAgICAgLy9tb25pdG9yRXZlbnRzICYmIG1vbml0b3JFdmVudHMoYXVkaW9PYmplY3QpOwoKICAgICAgICAgICAgc2VsZi5yZW1vdGVQbGF5QXVkaW9PYmplY3QgPSBhdWRpb09iamVjdDsKCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYXVkaW9PYmplY3QpOwogICAgICAgIH0KCiAgICAgICAgLy8gc2VsZi5yZW1vdGVQbGF5QXVkaW9PYmplY3QuYXV0b3BsYXkgPSB0cnVlOwogICAgICAgIC8vIHNlbGYucmVtb3RlUGxheUF1ZGlvT2JqZWN0LnBsYXlzaW5saW5lID0gdHJ1ZTsKICAgICAgICBzZWxmLnJlbW90ZVBsYXlBdWRpb09iamVjdC5zcmNPYmplY3QgPSByZW1vdGVNZWRpYVN0cmVhbTsKCiAgICAgICAgLy93aW5kb3cuX18kX3JlbW90ZU1lZGlhU3RyZWFtID0gcmVtb3RlTWVkaWFTdHJlYW07CiAgICB9Cn0pOwoKTWFuYWdlci5wcm90b3R5cGUuc2V0SWRlbnRpdHkgPSBmdW5jdGlvbiAoaWRlbnRpdHlOYW1lLCBpZGVudGl0eVRva2VuLCBleHRJbmZvKSB7CiAgICB0aGlzLmlkZW50aXR5TmFtZSA9IGlkZW50aXR5TmFtZTsKICAgIHRoaXMuaWRlbnRpdHlUb2tlbiA9IGlkZW50aXR5VG9rZW47CiAgICB0aGlzLmV4dCA9IGV4dEluZm87CgogICAgdGhpcy5fdGVybWluYWxJbmZvID0gewogICAgICAgICJicm93c2VyIjogZW1lZGlhLmJyb3dzZXIsCiAgICAgICAgImJyb3dzZXJWZXJzaW9uIjogZW1lZGlhLmJyb3dzZXJWZXJzaW9uLAogICAgICAgICJ2ZXJzaW9uIjogZW1lZGlhLmNvbmZpZy52ZXJzaW9uLAogICAgICAgICJ1c2VyQWdlbnQiOiBlbWVkaWEuY29uZmlnLnVzZXJBZ2VudAogICAgfTsKCiAgICBfbG9nZ2VyLmluZm8oInNldCBpZGVudGl0eTogIiwgaWRlbnRpdHlOYW1lLCBpZGVudGl0eVRva2VuKTsKICAgIHRoaXMuZGVzdHJveSgpOwoKICAgIGVtZWRpYS5jb25maWcoewogICAgICAgIGF1dG9TdWI6IGZhbHNlLAogICAgICAgIG9ubHlFbnRlcjogdHJ1ZQogICAgfSk7Cn07CgpNYW5hZ2VyLnByb3RvdHlwZS5FdmVudHNPYnNlcnZhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMzUpLmRlZmF1bHQ7Cgp2YXIgZXJyb3JIYW5kbGVyID0gT2JqZWN0KHJ4anNfb3BlcmF0b3JzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImNhdGNoRXJyb3IiXSkoZnVuY3Rpb24gKGVyciwgY2F1Z2h0KSB7CiAgICBfbG9nZ2VyLmVycm9yKGVycik7CiAgICB0aHJvdyBlcnI7Cn0pOwoKZnVuY3Rpb24gcnhDcmVhdGVDb25mcihjb25mclR5cGUsIHBhc3N3b3JkKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgaWYgKHR5cGVvZiBjb25mclR5cGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgY29uZnJUeXBlID0gcGFyc2VJbnQoY29uZnJUeXBlKTsKICAgIH0KCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKE1hbmFnZXIucHJvdG90eXBlLmNyZWF0ZUNvbmZyLmNhbGwoc2VsZiwgewogICAgICAgIHVpZDogc2VsZi5pZGVudGl0eU5hbWUsCiAgICAgICAgdG9rZW46IHNlbGYuaWRlbnRpdHlUb2tlbiwKICAgICAgICBjb25mclR5cGU6IGNvbmZyVHlwZSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgICAgdGVybWluYWw6IHNlbGYuX3Rlcm1pbmFsSW5mbwogICAgfSkpLnBpcGUoT2JqZWN0KHJ4anNfb3BlcmF0b3JzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIm1hcCJdKShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXNwb25zZS5taXhlZCA9IHJlc3BvbnNlLnR5cGUgPT09IDExIHx8IHJlc3BvbnNlLnR5cGUgPT09IDEyOwogICAgICAgIHJlc3BvbnNlLmlkID0gcmVzcG9uc2Uuc2VydmVyQ29uZnJJZCA9IHJlc3BvbnNlLmNvbmZySWQ7CiAgICAgICAgc2VsZi5fY29uZnJzW3Jlc3BvbnNlLmNvbmZySWRdID0gdW5kZXJzY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQuYS5leHRlbmQoe30sIHJlc3BvbnNlKTsKCiAgICAgICAgLy9fdXRpbC5yZW1vdmVBdHRyaWJ1dGUocmVzcG9uc2UsICJ0aWNrZXQiKTsKICAgICAgICAvL191dGlsLnJlbW92ZUF0dHJpYnV0ZShyZXNwb25zZSwgInJvbGVUb2tlbiIpOwogICAgICAgIF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLnJlbW92ZUF0dHJpYnV0ZShyZXNwb25zZSwgInJ0Y0NmZyIpOwoKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICB9KSwgZXJyb3JIYW5kbGVyKTsKfQoKZnVuY3Rpb24gcnhSZXFUa3QoY29uZnJJZCwgcGFzc3dvcmQpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICB2YXIgYXBpQXJncyA9IHsKICAgICAgICB1aWQ6IHNlbGYuaWRlbnRpdHlOYW1lLAogICAgICAgIHRva2VuOiBzZWxmLmlkZW50aXR5VG9rZW4sCiAgICAgICAgY29uZnJJZDogY29uZnJJZCwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgICAgdGVybWluYWw6IHNlbGYuX3Rlcm1pbmFsSW5mbwogICAgfTsKCiAgICBzZWxmLl9jb25mcnNbY29uZnJJZF0gJiYgKGFwaUFyZ3Mucm9sZVRva2VuID0gc2VsZi5fY29uZnJzW2NvbmZySWRdLnJvbGVUb2tlbik7CiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKE1hbmFnZXIucHJvdG90eXBlLnJlcVRrdC5jYWxsKHNlbGYsIGFwaUFyZ3MpKS5waXBlKE9iamVjdChyeGpzX29wZXJhdG9yc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJtYXAiXSkoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmVzcG9uc2UubWl4ZWQgPSByZXNwb25zZS50eXBlID09PSAxMSB8fCByZXNwb25zZS50eXBlID09PSAxMjsKICAgICAgICByZXNwb25zZS5pZCA9IHJlc3BvbnNlLnNlcnZlckNvbmZySWQgPSByZXNwb25zZS5jb25mcklkID0gY29uZnJJZDsKICAgICAgICBzZWxmLl9jb25mcnNbY29uZnJJZF0gPSBfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5leHRlbmQoc2VsZi5fY29uZnJzW2NvbmZySWRdIHx8IHt9LCByZXNwb25zZSk7CgogICAgICAgIC8vX3V0aWwucmVtb3ZlQXR0cmlidXRlKHJlc3BvbnNlLCAidGlja2V0Iik7CiAgICAgICAgLy9fdXRpbC5yZW1vdmVBdHRyaWJ1dGUocmVzcG9uc2UsICJyb2xlVG9rZW4iKTsKICAgICAgICBfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5yZW1vdmVBdHRyaWJ1dGUocmVzcG9uc2UsICJydGNDZmciKTsKCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfSksIGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4Q2hhbmFnZVJvbGVzKHJvbGUsIHVpZHMsIGNvbmZySWQpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICB2YXIgYXBpQXJncyA9IHsKICAgICAgICB1aWRzOiB1aWRzLAogICAgICAgIHJvbGU6IHJvbGUsCiAgICAgICAgcm9sZVRva2VuOiBjb25mci5yb2xlVG9rZW4KICAgIH07CgogICAgcmV0dXJuIHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT2JzZXJ2YWJsZSJdLmNyZWF0ZShNYW5hZ2VyLnByb3RvdHlwZS5jaGFuYWdlUm9sZXMuY2FsbChzZWxmLCBhcGlBcmdzKSkucGlwZShPYmplY3Qocnhqc19vcGVyYXRvcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1sibWFwIl0pKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHNlcnZpY2UgJiYgc2VydmljZS5jdXJyZW50ICYmIHNlcnZpY2UuY3VycmVudC5fc3lzQ29weSgpOwogICAgICAgIC8vcmV0dXJuIHJlc3BvbnNlLmVycm9yID09PSAwOwogICAgICAgIHJldHVybiBjb25mci5pZDsKICAgIH0pLCBlcnJvckhhbmRsZXIpOwp9CgpmdW5jdGlvbiByeERpc2JhbmRDb25mcihjb25mcklkLCByb2xlVG9rZW4pIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgIHZhciBhcGlBcmdzID0gewogICAgICAgIHJvbGVUb2tlbjogY29uZnIgJiYgY29uZnIucm9sZVRva2VuIHx8IHJvbGVUb2tlbgogICAgfTsKCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKE1hbmFnZXIucHJvdG90eXBlLmRpc2JhbmRDb25mci5jYWxsKHNlbGYsIGFwaUFyZ3MpKS5waXBlKE9iamVjdChyeGpzX29wZXJhdG9yc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJtYXAiXSkoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEucmVtb3ZlQXR0cmlidXRlKHNlbGYuX2NvbmZycywgY29uZnJJZCk7CiAgICAgICAgcmV0dXJuIGNvbmZyLmlkOwogICAgfSksIGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4S2lja01lbWJlcih1aWRzLCBjb25mcklkKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgdmFyIGNvbmZyID0gc2VsZi5fY29uZnIoY29uZnJJZCk7CiAgICB2YXIgYXBpQXJncyA9IHsKICAgICAgICB1aWRzOiB1aWRzLAogICAgICAgIHJvbGVUb2tlbjogY29uZnIucm9sZVRva2VuCiAgICB9OwoKICAgIHJldHVybiByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk9ic2VydmFibGUiXS5jcmVhdGUoTWFuYWdlci5wcm90b3R5cGUua2lja01lbWJlci5jYWxsKHNlbGYsIGFwaUFyZ3MpKS5waXBlKE9iamVjdChyeGpzX29wZXJhdG9yc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJtYXAiXSkoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy9yZXR1cm4gcmVzcG9uc2UuZXJyb3IgPT09IDA7CiAgICAgICAgcmV0dXJuIGNvbmZyLmlkOwogICAgfSksIGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4U2VsZWN0Q29uZnIoY29uZnJJZCwgcGFzc3dvcmQpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKCiAgICB2YXIgYXBpQXJncyA9IHsKICAgICAgICB1aWQ6IHNlbGYuaWRlbnRpdHlOYW1lLAogICAgICAgIHRva2VuOiBzZWxmLmlkZW50aXR5VG9rZW4sCiAgICAgICAgY29uZnJJZDogY29uZnJJZCwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgIH07CgogICAgaWYgKGNvbmZyKSB7CiAgICAgICAgYXBpQXJncy5wYXNzd29yZCA9IHBhc3N3b3JkIHx8IGNvbmZyLnBhc3N3b3JkOwogICAgICAgIGFwaUFyZ3Mucm9sZVRva2VuID0gY29uZnIucm9sZVRva2VuOwogICAgfQoKICAgIHJldHVybiByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk9ic2VydmFibGUiXS5jcmVhdGUoTWFuYWdlci5wcm90b3R5cGUuc2VsZWN0Q29uZnIuY2FsbChzZWxmLCBhcGlBcmdzKSkucGlwZShlcnJvckhhbmRsZXIpOwp9CgpmdW5jdGlvbiBvblJlbW90ZVN0cmVhbShjb25mcklkLCBzdHJlYW0pIHt9CgpmdW5jdGlvbiByeEFmdGVySm9pbmVkQ29uZnIoY29uZnJJZCwgam9pbk1lbWJlcklkKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICBzd2l0Y2ggKGNvbmZyLnR5cGUpIHsKICAgICAgICBjYXNlIDA6IC8vQ09ORlIKICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAvL0NPTU1VTklDQVRJT04KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgLy9DT01NVU5JQ0FUSU9OX01JWCAgQXVkaW86TWl4ZWQKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgLy9MSVZFICBBdWRpbzpNaXhlZD0KICAgICAgICAgICAgdmFyIHplcm9TdHJlYW0gPSBuZXcgc2VsZi5aZXJvU3RyZWFtKCk7CiAgICAgICAgICAgIHNlcnZpY2UuY3VycmVudC5fY2FjaGVTdHJlYW1zW3plcm9TdHJlYW0uaWRdID0gemVyb1N0cmVhbTsKICAgICAgICAgICAgaWYgKHNlcnZpY2UuY3VycmVudC5yb2xlID09IHNpbmdsZS5Sb2xlLkFVRElFTkNFKSB7CiAgICAgICAgICAgICAgICAvL+inguS8lyDorqLpmIUwCiAgICAgICAgICAgICAgICByZXR1cm4gcnhTdWJzY3JpYmUuY2FsbChzZWxmLCBjb25mcklkLCB6ZXJvU3RyZWFtLCBmYWxzZSwgdHJ1ZSkucGlwZShPYmplY3Qocnhqc19vcGVyYXRvcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siY29uY2F0TWFwIl0pKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0KHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sib2YiXSkoX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuZXh0ZW5kKHt9LCBzZWxmLl9jb25mcnNbY29uZnJJZF0pKTs7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxMzogLy9QMlAKICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAvL0lOVEVSQ09NTQogICAgICAgICAgICByZXR1cm4gT2JqZWN0KHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sidGhyb3dFcnJvciJdKSgibm90IHN1cHBvcnQgY29uZiB0eXBlOiAiICsgY29uZnIudHlwZSk7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIE9iamVjdChyeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bInRocm93RXJyb3IiXSkoIm5vdCBzdXBwb3J0IGNvbmYgdHlwZTogIiArIGNvbmZyLnR5cGUpOwogICAgfQoKICAgIHJldHVybiBPYmplY3Qocnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJvZiJdKShfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5leHRlbmQoe30sIHNlbGYuX2NvbmZyc1tjb25mcklkXSkpOzsKfQoKZnVuY3Rpb24gcnhTdXBwb3J0UmVtb3RlQ29udHJvbChjb25mcklkLCBqb2luTWVtYmVySWQsIHNlcnZpY2UpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIGVtZWRpYS5jdHJsLnN1cHBvcnQoc2VydmljZSwgZnVuY3Rpb24gb25IYXNSZW1vdGVDb250cm9sKHN0cmVhbSwgY29udHJvbGVyLCBjb250cm9sUmVxdWVzdCkgewogICAgICAgIHNlbGYub25IYXNSZW1vdGVDb250cm9sKHN0cmVhbSwgY29udHJvbGVyLCBjb250cm9sUmVxdWVzdCwgY29uZnJJZCk7CiAgICB9LCBmdW5jdGlvbiBvblJlbW90ZUZyZWVDb250cm9sKHN0cmVhbSwgY29udHJvbGVyLCBjSWQpIHsKICAgICAgICBzZWxmLm9uUmVtb3RlRnJlZUNvbnRyb2woc3RyZWFtLCBjb250cm9sZXIsIGNJZCwgY29uZnJJZCk7CiAgICB9KTsKICAgIF9sb2dnZXIuaW5mbygic3VwcG9ydCByZW1vdGUgY29udHJvbC4gIiwgY29uZnJJZCwgam9pbk1lbWJlcklkKTsKCiAgICByZXR1cm4gT2JqZWN0KHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sib2YiXSkoX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuZXh0ZW5kKHt9LCBzZWxmLl9jb25mcnNbY29uZnJJZF0pKTsKfQoKZnVuY3Rpb24gcnhKb2luVXNlVGlja2V0KGNvbmZySWQsIHRpY2tldCwgZXh0KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgaWYgKHNlbGYuam9pbmVkKGNvbmZySWQpKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChyeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bInRocm93RXJyb3IiXSkoImhhZCBqb2luZWQgY29uZnIgIiArIGNvbmZySWQgKyAiLCBpZiB5b3Ugd2FudCBqb2luIGFnYWluLCBwbGVhc2UgY2FsbCBleGl0Q29uZmVyZW5jZSIpOwogICAgfQoKICAgIHZhciBldmVudHMgPSBzZWxmLl9ldmVudHNbY29uZnJJZF0gPSBuZXcgc2VsZi5FdmVudHNPYnNlcnZhYmxlKHNlbGYsIGNvbmZySWQsIGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICBvblJlbW90ZVN0cmVhbS5jYWxsKHNlbGYsIGNvbmZySWQsIHN0cmVhbSk7CiAgICB9KTsKCiAgICBzZWxmLmNvbmZyRXZlbnRzT2JzZXJ2ZXIgJiYgZXZlbnRzLnN1YnNjcmliZShzZWxmLmNvbmZyRXZlbnRzT2JzZXJ2ZXIpOwoKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKICAgIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlc1tjb25mcklkXSA9IG5ldyBlbWVkaWEuWFNlcnZpY2UoewogICAgICAgIGxpc3RlbmVyczogZXZlbnRzCiAgICB9KTsKCiAgICBzZXJ2aWNlLnNldHVwKHRpY2tldCwgZXh0KTsKCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgc2VydmljZS5qb2luKGZ1bmN0aW9uIChtZW1JZCkgewogICAgICAgICAgICBzZWxmLl9fY3VycmVudF9jb25mcklkID0gY29uZnJJZDsKICAgICAgICAgICAgc2VsZi5fY29uZnJzW2NvbmZySWRdLmpvaW5JZCA9IG1lbUlkOwogICAgICAgICAgICBzZWxmLl9jb25mcnNbY29uZnJJZF0ucm9sZSA9IHNlcnZpY2UuY3VycmVudCAmJiBzZXJ2aWNlLmN1cnJlbnQucm9sZTsKCiAgICAgICAgICAgIG9ic2VydmVyLm5leHQoc2VsZi5fY29uZnJzW2NvbmZySWRdKTsKICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTsKICAgICAgICB9LCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgc2VydmljZS5leGl0KCk7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgIGVycm9yVHlwZTogImpvaW5fZmFpbCIsCiAgICAgICAgICAgICAgICBlcnJvcjogLTIwMCwKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXZlbnQubWVzc2FnZSgpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSkucGlwZShPYmplY3Qocnhqc19vcGVyYXRvcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siY29uY2F0TWFwIl0pKGZ1bmN0aW9uIChqb2luTWVtYmVySWQsIF9pbmRleCkgewogICAgICAgIHJldHVybiByeFN1cHBvcnRSZW1vdGVDb250cm9sLmNhbGwoc2VsZiwgY29uZnJJZCwgam9pbk1lbWJlcklkLCBzZXJ2aWNlKTsKICAgIH0pLCBPYmplY3Qocnhqc19vcGVyYXRvcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siY29uY2F0TWFwIl0pKGZ1bmN0aW9uIChqb2luTWVtYmVySWQsIF9pbmRleCkgewogICAgICAgIHJldHVybiByeEFmdGVySm9pbmVkQ29uZnIuY2FsbChzZWxmLCBjb25mcklkLCBqb2luTWVtYmVySWQpOwogICAgfSksIGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4Sm9pblVzZVBhc3N3b3JkKGNvbmZySWQsIHBhc3N3b3JkLCBleHQpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICByZXR1cm4gcnhSZXFUa3QuY2FsbChzZWxmLCBjb25mcklkLCBwYXNzd29yZCwgZXh0KS5waXBlKE9iamVjdChyeGpzX29wZXJhdG9yc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJjb25jYXRNYXAiXSkoZnVuY3Rpb24gKF9jb25mciwgX2luZGV4KSB7CiAgICAgICAgcmV0dXJuIHJ4Sm9pblVzZVRpY2tldC5jYWxsKHNlbGYsIGNvbmZySWQsIF9jb25mci50aWNrZXQsIGV4dCk7CiAgICB9KSk7Cn0KCmZ1bmN0aW9uIHJ4Sm9pbkV4aXN0Q29uZnJVc2VQYXNzd29yZChjb25mcklkLCBwYXNzd29yZCwgZXh0KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICByZXR1cm4gcnhTZWxlY3RDb25mci5jYWxsKHNlbGYsIGNvbmZySWQsIHBhc3N3b3JkLCBleHQpLnBpcGUoT2JqZWN0KHJ4anNfb3BlcmF0b3JzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImNvbmNhdE1hcCJdKShmdW5jdGlvbiAoX2NvbmZyLCBfaW5kZXgpIHsKICAgICAgICByZXR1cm4gcnhKb2luVXNlUGFzc3dvcmQuY2FsbChzZWxmLCBjb25mcklkLCBwYXNzd29yZCwgZXh0KTsKICAgIH0pKTsKfQoKZnVuY3Rpb24gb3BlblVzZXJNZWRpYShjb25mcklkLCBvcGVuaW5nU3RyZWFtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgc2VydmljZSA9IHNlbGYuX3NlcnZpY2UoY29uZnJJZCk7CgogICAgcmV0dXJuIHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT2JzZXJ2YWJsZSJdLmNyZWF0ZShmdW5jdGlvbiBvblN1YnNjcmlwdGlvbihvYnNlcnZlcikgewogICAgICAgIHNlcnZpY2Uub3BlblVzZXJNZWRpYShvcGVuaW5nU3RyZWFtKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChvcGVuaW5nU3RyZWFtKTsKICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTsKICAgICAgICB9LCBmdW5jdGlvbiBmYWlsKGV2dCkgewogICAgICAgICAgICBvYnNlcnZlci5lcnJvcih7CiAgICAgICAgICAgICAgICBlcnJvclR5cGU6ICJvcGVuX3VzZXJfbWVkaWFfZmFpbCIsCiAgICAgICAgICAgICAgICBlcnJvcjogLTIwMSwKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXZ0Lm1lc3NhZ2UoKQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0pLnBpcGUoZXJyb3JIYW5kbGVyKTsKfQoKZnVuY3Rpb24gcnhQdWJsaXNoKGNvbmZySWQsIHVzZXJTdHJlYW0pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgc2VydmljZS5wdXNoKHVzZXJTdHJlYW0sIGZ1bmN0aW9uIChwdXNoZWRTdHJlYW0pIHsKICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChwdXNoZWRTdHJlYW0pOwogICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpOwogICAgICAgIH0sIGZ1bmN0aW9uIGZhaWwoZXZ0KSB7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgIGVycm9yVHlwZTogInB1c2hfZmFpbCIsCiAgICAgICAgICAgICAgICBlcnJvcjogLTIwMywKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXZ0Lm1lc3NhZ2UoKQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0pLnBpcGUoZXJyb3JIYW5kbGVyKTsKfQoKZnVuY3Rpb24gcnhSZXN1bWVQYXVzZVZpZGVvKHB1YlMsIHZpZGVvQ29uc3RhaW50cywgY29uZnJJZCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIGNvbmZyID0gc2VsZi5fY29uZnIoY29uZnJJZCk7CiAgICB2YXIgc2VydmljZSA9IHNlbGYuX3NlcnZpY2UoY29uZnJJZCk7CgogICAgaWYgKHR5cGVvZiBwdWJTID09PSAnc3RyaW5nJykgewogICAgICAgIHB1YlMgPSBzZXJ2aWNlLmdldFN0cmVhbUJ5SWQocHViUyk7CiAgICB9IGVsc2UgewogICAgICAgIHB1YlMgPSBzZXJ2aWNlLmdldFN0cmVhbUJ5SWQocHViUy5pZCk7CiAgICB9CiAgICBpZiAoIXB1YlMpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sidGhyb3dFcnJvciJdKSgicHViIHN0cmVhbSBub3QgZXhzaXRzLiBpdCBpcyAiICsgcHViUyk7CiAgICB9CgogICAgaWYgKHR5cGVvZiB2aWRlb0NvbnN0YWludHMgIT09ICdib29sZWFuJyAmJiBwdWJTLmNvbnN0YWludHMgJiYgdW5kZXJzY29yZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQuYS5pc0VxdWFsKHZpZGVvQ29uc3RhaW50cywgcHViUy5jb25zdGFpbnRzLnZpZGVvKSB8fCB2aWRlb0NvbnN0YWludHMgPT0gIXB1YlMudm9mZikgewogICAgICAgIHJldHVybiBPYmplY3Qocnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJvZiJdKSh1bmRlcnNjb3JlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdC5hLmV4dGVuZCh7fSwgY29uZnIuYXYpKTsKICAgIH0KCiAgICByZXR1cm4gcnhWb2ZmLmNhbGwoc2VsZiwgY29uZnJJZCwgcHViUywgdmlkZW9Db25zdGFpbnRzKTsKfQoKZnVuY3Rpb24gcnhWb2ZmKGNvbmZySWQsIHB1YlMsIHZpZGVvQ29uc3RhaW50cykgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwoKICAgIHJldHVybiByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk9ic2VydmFibGUiXS5jcmVhdGUoZnVuY3Rpb24gb25TdWJzY3JpcHRpb24ob2JzZXJ2ZXIpIHsKICAgICAgICBzZXJ2aWNlLl9yZXB1Ymxpc2hCeVZpZGVvQ29uc3RhaW50cyhwdWJTLCB2aWRlb0NvbnN0YWludHMsIGZ1bmN0aW9uIGZhaWwoZXZ0KSB7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgIGVycm9yVHlwZTogInZvZmZfZmFpbCIsCiAgICAgICAgICAgICAgICBlcnJvcjogLTIwMywKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXZ0Lm1lc3NhZ2UoKQogICAgICAgICAgICB9KTsKICAgICAgICB9LCBmdW5jdGlvbiBzdWNjZXNzKCkgewogICAgICAgICAgICBvYnNlcnZlci5uZXh0KHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChwdWJTLmlkKSk7CiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfSk7CiAgICB9KS5waXBlKGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4UmVzdW1lUGF1c2VBdWRpbyhwdWJTLCBhb2ZmLCBjb25mcklkKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICBpZiAodHlwZW9mIHB1YlMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgcHViUyA9IHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChwdWJTKTsKICAgIH0gZWxzZSB7CiAgICAgICAgcHViUyA9IHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChwdWJTLmlkKTsKICAgIH0KICAgIGlmICghcHViUykgewogICAgICAgIHJldHVybiBPYmplY3Qocnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJ0aHJvd0Vycm9yIl0pKCJwdWIgc3RyZWFtIG5vdCBleHNpdHMuIGl0IGlzICIgKyBwdWJTKTsKICAgIH0KCiAgICBpZiAoY29uZnIudHlwZSA9PT0gc2VsZi5Db25mclR5cGUuQ09NTVVOSUNBVElPTl9NSVggfHwgY29uZnIudHlwZSA9PT0gc2VsZi5Db25mclR5cGUuTElWRSkgewogICAgICAgIC8v5re36Z+z5pe277yM5YWx5Lqr5qGM6Z2i5bim5aOw6Z+z77yM5Lya6YCg5oiQIOacjeWKoeerr+mUmeivr+OAggogICAgICAgIGlmIChwdWJTLnR5cGUgPT09IDEgJiYgIWFvZmYpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJjb25mciBtaXguIG5vdCBhbGxvdyBkZXNrdG9wIHdpdGggYXVkaW8uIik7CiAgICAgICAgICAgIHJldHVybiBPYmplY3Qocnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJ0aHJvd0Vycm9yIl0pKCJjb25mciBtaXguIG5vdCBhbGxvdyBkZXNrdG9wIHdpdGggYXVkaW8uIik7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiByeEFvZmYuY2FsbChzZWxmLCBjb25mcklkLCBwdWJTLCBhb2ZmKTsKfQoKZnVuY3Rpb24gcnhBb2ZmKGNvbmZySWQsIHB1YlMsIGFvZmYpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgc2VydmljZS5hb2ZmKHB1YlMsIGFvZmYsIGZ1bmN0aW9uIGZhaWwoZXZ0KSB7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgIGVycm9yVHlwZTogImFvZmZfZmFpbCIsCiAgICAgICAgICAgICAgICBlcnJvcjogLTIwMywKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXZ0Lm1lc3NhZ2UoKQogICAgICAgICAgICB9KTsKICAgICAgICB9LCBmdW5jdGlvbiBzdWNjZXNzKCkgewogICAgICAgICAgICBvYnNlcnZlci5uZXh0KHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChwdWJTLmlkKSk7CiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfSk7CiAgICB9KS5waXBlKGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4UHVibGlzaE1lZGlhKGNvbmZySWQsIGNvbnN0YWludHMsIHZpZGVvVGFnLCBleHQpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICBpZiAoc2VydmljZS5jdXJyZW50LnJvbGUgPT0gc2VsZi5Sb2xlLkFVRElFTkNFKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChyeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bInRocm93RXJyb3IiXSkoIkF1ZGllbmNlIG5vdCBhbGxvdyBwdWJsaXNoIik7CiAgICB9CiAgICBpZiAoY29uZnIuYXYpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sidGhyb3dFcnJvciJdKSgiQXVkaW8gYW5kIHZpZGVvIHN0cmVhbSBoYXMgYmVlbiBwdWJsaXNoZWQuIG5vdCBhbGxvdyByZXBlYXQgcHVibGlzaC4iKTsKICAgIH0KCiAgICB2YXIgU3RyZWFtID0gY29uZnIubWl4ZWQgPyBzZXJ2aWNlLkF1ZGlvTWl4ZXJQdWJzdHJlYW0gOiBzZXJ2aWNlLkFWUHVic3RyZWFtOwogICAgdmFyIHN0cmVhbSA9IGNvbmZyLmF2ID0gbmV3IFN0cmVhbSh7CiAgICAgICAgY29uc3RhaW50czogY29uc3RhaW50cywKICAgICAgICBhb2ZmOiAwLAogICAgICAgIHZvZmY6IDAsCiAgICAgICAgZXh0OiBleHQKICAgIH0pOwoKICAgIHJldHVybiBvcGVuVXNlck1lZGlhLmNhbGwoc2VsZiwgY29uZnIuaWQsIHN0cmVhbSkucGlwZShPYmplY3Qocnhqc19vcGVyYXRvcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siY29uY2F0TWFwIl0pKGZ1bmN0aW9uICh1c2VyU3RyZWFtKSB7CiAgICAgICAgdmlkZW9UYWcgJiYgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEudGFyZ2V0RE9NKHZpZGVvVGFnKSAmJiBhdHRhY2hNZWRpYVN0cmVhbSh2aWRlb1RhZywgdXNlclN0cmVhbS5sb2NhbFN0cmVhbSk7CiAgICAgICAgcmV0dXJuIHJ4UHVibGlzaC5jYWxsKHNlbGYsIGNvbmZyLmlkLCB1c2VyU3RyZWFtLCBleHQpOwogICAgfSksIE9iamVjdChyeGpzX29wZXJhdG9yc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJtYXAiXSkoZnVuY3Rpb24gKHB1c2hlZFN0cmVhbSkgewogICAgICAgIGNvbmZyLmF2ID0gcHVzaGVkU3RyZWFtOwogICAgICAgIHZpZGVvVGFnICYmIHNlbGYuc3RyZWFtQmluZFZpZGVvKGNvbmZyLmF2LCB2aWRlb1RhZyk7CiAgICAgICAgY29uZnIudHlwZSA9PSBzZWxmLkNvbmZyVHlwZS5MSVZFICYmIHNlbGYuaHVuZ3VwKDApOwogICAgICAgIHJldHVybiBfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5leHRlbmQoe30sIHB1c2hlZFN0cmVhbSk7CiAgICB9KSwgT2JqZWN0KHJ4anNfb3BlcmF0b3JzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImNhdGNoRXJyb3IiXSkoZnVuY3Rpb24gKGVyciwgY2F1Z2h0KSB7CiAgICAgICAgY29uZnIuYXYgJiYgc2VsZi5odW5ndXAoY29uZnIuYXYpOwogICAgICAgIGNvbmZyLmF2ID0gdW5kZWZpbmVkOwoKICAgICAgICBfbG9nZ2VyLmVycm9yKGVycik7CiAgICAgICAgdGhyb3cgZXJyOwogICAgfSkpOwp9CgpmdW5jdGlvbiByeENoYW5hZ2VDYW1lcmEoY29uZnJJZCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIHZhciBjb25mciA9IHNlbGYuX2NvbmZyKGNvbmZySWQpOwogICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwoKICAgIGlmIChzZXJ2aWNlLmN1cnJlbnQucm9sZSA9PSBzZWxmLlJvbGUuQVVESUVOQ0UpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sidGhyb3dFcnJvciJdKSgiQXVkaWVuY2Ugbm90IGFsbG93IHB1Ymxpc2giKTsKICAgIH0KCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgc2VydmljZS5jaGFuYWdlQ2FtZXJhKGNvbmZyLmF2LCBmdW5jdGlvbiBmYWlsKGV2dCkgewogICAgICAgICAgICBvYnNlcnZlci5lcnJvcih7CiAgICAgICAgICAgICAgICBlcnJvclR5cGU6ICJzd2l0Y2hfY2FtZXJhX2ZhaWwiLAogICAgICAgICAgICAgICAgZXJyb3I6IC0yMDMsCiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGV2dC5tZXNzYWdlKCkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgZnVuY3Rpb24gc3VjY2VzcygpIHsKICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTsKICAgICAgICB9KTsKICAgIH0pLnBpcGUoZXJyb3JIYW5kbGVyKTsKfQoKZnVuY3Rpb24gcnhTaGFyZURlc2t0b3AoY29uZnJJZCwgY29uc3RhaW50cywgdmlkZW9UYWcsIGV4dCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIHZhciBjb25mciA9IHNlbGYuX2NvbmZyKGNvbmZySWQpOwogICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwoKICAgIGlmIChzZXJ2aWNlLmN1cnJlbnQucm9sZSA9PSBzZWxmLlJvbGUuQVVESUVOQ0UpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sidGhyb3dFcnJvciJdKSgiQXVkaWVuY2Ugbm90IGFsbG93IHB1Ymxpc2giKTsKICAgIH0KICAgIGlmIChjb25mci5kZXNrdG9wKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChyeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bInRocm93RXJyb3IiXSkoImRlc2t0b3Agc3RyZWFtIGhhcyBiZWVuIHB1Ymxpc2hlZC4gbm90IGFsbG93IHJlcGVhdCBwdWJsaXNoLiIpOwogICAgfQoKICAgIGlmIChjb25mci50eXBlID09PSBzZWxmLkNvbmZyVHlwZS5DT01NVU5JQ0FUSU9OX01JWCB8fCBjb25mci50eXBlID09PSBzZWxmLkNvbmZyVHlwZS5MSVZFKSB7CiAgICAgICAgLy/mt7fpn7Pml7bvvIzlhbHkuqvmoYzpnaLluKblo7Dpn7PvvIzkvJrpgKDmiJAg5pyN5Yqh56uv6ZSZ6K+v44CCCiAgICAgICAgaWYgKGNvbnN0YWludHMuYXVkaW8pIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJjb25mciBtaXguIG5vdCBhbGxvdyBkZXNrdG9wIHdpdGggYXVkaW8uIik7CiAgICAgICAgICAgIHJldHVybiBPYmplY3Qocnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJ0aHJvd0Vycm9yIl0pKCJjb25mciBtaXguIG5vdCBhbGxvdyBkZXNrdG9wIHdpdGggYXVkaW8uIik7CiAgICAgICAgfQogICAgfQoKICAgIGlmICghY29uc3RhaW50cy5hdWRpbyAmJiBjb25mci5hdiAmJiAhY29uZnIuYXYuYW9mZikgewogICAgICAgIF9sb2dnZXIud2FybigicmVwZWF0IGF1ZGlvLiBkZXNrdG9wIGFuZCBhdiIpOwogICAgfQoKICAgIHZhciBzdHJlYW0gPSBjb25mci5kZXNrdG9wID0gbmV3IHNlcnZpY2UuU2hhcmVEZXNrdG9wUHVic3RyZWFtKHsKICAgICAgICBzY3JlZW5PcHRpb25zOiBjb25zdGFpbnRzLnZpZGVvICYmIGNvbnN0YWludHMudmlkZW8uc2NyZWVuT3B0aW9ucyB8fCBbJ3NjcmVlbicsICd3aW5kb3cnLCAndGFiJ10sCiAgICAgICAgbWFuZGF0b3J5OiBjb25zdGFpbnRzLnZpZGVvICYmIGNvbnN0YWludHMudmlkZW8ubWFuZGF0b3J5IHx8IHt9LAogICAgICAgIHZiaXRyYXRlOiBjb25zdGFpbnRzLnZpZGVvICYmIGNvbnN0YWludHMudmlkZW8uYml0cmF0ZSwKICAgICAgICBhYml0cmF0ZTogY29uc3RhaW50cy5hdWRpbyAmJiBjb25zdGFpbnRzLmF1ZGlvLmJpdHJhdGUsCiAgICAgICAgYW9mZjogISFjb25zdGFpbnRzLmF1ZGlvID8gMCA6IDEsCiAgICAgICAgZXh0OiBleHQKICAgIH0pOwoKICAgIHJldHVybiBvcGVuVXNlck1lZGlhLmNhbGwoc2VsZiwgY29uZnIuaWQsIHN0cmVhbSkucGlwZShPYmplY3Qocnhqc19vcGVyYXRvcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siY29uY2F0TWFwIl0pKGZ1bmN0aW9uICh1c2VyU3RyZWFtKSB7CiAgICAgICAgdmlkZW9UYWcgJiYgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEudGFyZ2V0RE9NKHZpZGVvVGFnKSAmJiBhdHRhY2hNZWRpYVN0cmVhbSh2aWRlb1RhZywgdXNlclN0cmVhbS5sb2NhbFN0cmVhbSk7CiAgICAgICAgcmV0dXJuIHJ4UHVibGlzaC5jYWxsKHNlbGYsIGNvbmZyLmlkLCB1c2VyU3RyZWFtLCBleHQpOwogICAgfSksIE9iamVjdChyeGpzX29wZXJhdG9yc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJtYXAiXSkoZnVuY3Rpb24gKHB1c2hlZFN0cmVhbSkgewogICAgICAgIGNvbmZyLmRlc2t0b3AgPSBwdXNoZWRTdHJlYW07CiAgICAgICAgdmlkZW9UYWcgJiYgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEudGFyZ2V0RE9NKHZpZGVvVGFnKSAmJiBzZWxmLnN0cmVhbUJpbmRWaWRlbyhjb25mci5kZXNrdG9wLCB2aWRlb1RhZyk7CiAgICAgICAgcmV0dXJuIF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmV4dGVuZCh7fSwgcHVzaGVkU3RyZWFtKTsKICAgIH0pLCBPYmplY3Qocnhqc19vcGVyYXRvcnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siY2F0Y2hFcnJvciJdKShmdW5jdGlvbiAoZXJyLCBjYXVnaHQpIHsKICAgICAgICBjb25mci5kZXNrdG9wID0gdW5kZWZpbmVkOwogICAgICAgIF9sb2dnZXIuZXJyb3IoZXJyKTsKICAgICAgICB0aHJvdyBlcnI7CiAgICB9KSk7Cn0KCmZ1bmN0aW9uIHJ4U3Vic2NyaWJlKGNvbmZySWQsIHN0cmVhbSwgc3ViU1ZpZGVvLCBzdWJTQXVkaW8sIHZpZGVvVGFnKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgc3RyZWFtSWQgPSB0eXBlb2Ygc3RyZWFtID09PSAic3RyaW5nIiA/IHN0cmVhbSA6IHN0cmVhbS5pZDsKCiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICBpZiAoc3RyZWFtLnR5cGUgPT09IDIgJiYgc3ViU0F1ZGlvID09IHRydWUgJiYgc3RyZWFtLmlkICE9IDApIHsKICAgICAgICAvL3JldHVybiB0aHJvd0Vycm9yKCJNaXhlZCBhdWRpbyBzdHJlYW0uIG5vdCBhbGxvdyByZXBlYXQgc3ViIGF1ZGlvIik7CiAgICAgICAgc3ViU0F1ZGlvID0gZmFsc2U7CiAgICAgICAgX2xvZ2dlci53YXJuKCJNaXhlZCBhdWRpbyBzdHJlYW0uIG5vdCBhbGxvdyByZXBlYXQgc3ViIGF1ZGlvLiBmb3JjZSByZXNldCBzdWJTQXVkaW8gPSBmYWxzZSIpOwogICAgfQoKICAgIHZpZGVvVGFnICYmIF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLnRhcmdldERPTSh2aWRlb1RhZykgJiYgc2VsZi5zdHJlYW1CaW5kVmlkZW8oc3RyZWFtSWQsIHZpZGVvVGFnKTsKCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgc2VydmljZS5zdWJzY3JpYmUoc3RyZWFtSWQsIGZ1bmN0aW9uIChyZW1vdGVNZWRpYVN0cmVhbSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKHN0cmVhbUlkICE9ICIwIikgewogICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZVN0cmVhbSA9IHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChzdHJlYW1JZCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnN0YWludHMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiBjYWNoZVN0cmVhbS5zdWJBcmdzID8gY2FjaGVTdHJlYW0uc3ViQXJncy5zdWJTVmlkZW8gOiAhY2FjaGVTdHJlYW0udm9mZiwKICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IGNhY2hlU3RyZWFtLnN1YkFyZ3MgPyBjYWNoZVN0cmVhbS5zdWJBcmdzLnN1YlNBdWRpbyA6ICFjYWNoZVN0cmVhbS5hb2ZmCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVTdHJlYW0udHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdGFpbnRzLmF1ZGlvID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb25NZW1iZXJNZWRpYUNoYW5hZ2VkKGNhY2hlU3RyZWFtLm93bmVyLCBjYWNoZVN0cmVhbSwgY29uc3RhaW50cywgY29uZnIuY29uZnJJZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHJlbW90ZU1lZGlhU3RyZWFtKTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgIGVycm9yVHlwZTogInN1Yl9mYWlsIiwKICAgICAgICAgICAgICAgIGVycm9yOiAtMjAzLAogICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBldnQubWVzc2FnZSgpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sIHsgc3ViU1ZpZGVvOiBzdWJTVmlkZW8sIHN1YlNBdWRpbzogc3ViU0F1ZGlvIH0pOwogICAgfSkucGlwZShlcnJvckhhbmRsZXIpOwp9CgpmdW5jdGlvbiBfc3RyZWFtQmluZFZpZGVvKHN0cmVhbSwgX3ZpZGVvVGFnLCBjb25mcklkKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwogICAgc3RyZWFtID0gc2VydmljZS5jdXJyZW50Ll9jYWNoZVN0cmVhbXNbdHlwZW9mIHN0cmVhbSA9PT0gInN0cmluZyIgPyBzdHJlYW0gOiBzdHJlYW0uaWRdOwoKICAgIHZhciB2aWRlb1RhZyA9IF92aWRlb1RhZyB8fCBzZWxmLmNydEFuZFJldHVyblZpZGVvKHN0cmVhbS5vd25lciwgc3RyZWFtKTsKICAgIGlmICghdmlkZW9UYWcpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBzZWxmLl92aWRlb3Nbc3RyZWFtLmlkXSA9IHZpZGVvVGFnOwoKICAgIHZpZGVvVGFnLnNldEF0dHJpYnV0ZSgiYXV0b3BsYXkiLCAiYXV0b3BsYXkiKTsKICAgIHZpZGVvVGFnLnNldEF0dHJpYnV0ZSgicGxheXNpbmxpbmUiLCAicGxheXNpbmxpbmUiKTsKICAgIHZpZGVvVGFnLnNldEF0dHJpYnV0ZSgiZWFzZW1vYl9zdHJlYW0iLCBzdHJlYW0uaWQpOwoKICAgIHN0cmVhbS5hb2ZmID8gdmlkZW9UYWcuc2V0QXR0cmlidXRlKCJhb2ZmIiwgImFvZmYiKSA6IHZpZGVvVGFnLnJlbW92ZUF0dHJpYnV0ZSgiYW9mZiIpOwogICAgc3RyZWFtLnZvZmYgPyB2aWRlb1RhZy5zZXRBdHRyaWJ1dGUoInZvZmYiLCAidm9mZiIpIDogdmlkZW9UYWcucmVtb3ZlQXR0cmlidXRlKCJ2b2ZmIik7CgogICAgc3RyZWFtLmlmTWVkaWFTdHJlYW0oZnVuY3Rpb24gKG1lZGlhU3RyZWFtKSB7CiAgICAgICAgdmlkZW9UYWcgJiYgYXR0YWNoTWVkaWFTdHJlYW0odmlkZW9UYWcsIG1lZGlhU3RyZWFtKTsKCiAgICAgICAgaWYgKHZpZGVvVGFnLmhhc0F0dHJpYnV0ZSgiZmxvdyIpKSB7CiAgICAgICAgICAgIHNlbGYub25NZWRpYVRyYW5zbWlzc2lvbih2aWRlb1RhZywgZnVuY3Rpb24gY2IodHJhY2tJZCwgdHlwZSwgc3VidHlwZSwgZGF0YSkgewogICAgICAgICAgICAgICAgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkodmlkZW9UYWcpLnRyaWdnZXIoIm9uTWVkaWFUcmFuc21pc3Npb24iLCBbdHJhY2tJZCwgdHlwZSwgc3VidHlwZSwgZGF0YV0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9KTsKCiAgICB2YXIgJHZpZGVvID0gemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkodmlkZW9UYWcpOwogICAgJHZpZGVvLm9mZigiaHVuZ3VwIik7CiAgICAkdmlkZW8ub24oImh1bmd1cCIsIGZ1bmN0aW9uIChlLCBmYWlsLCBzdWNjZXNzKSB7CiAgICAgICAgc2VsZi5odW5ndXAoc3RyZWFtLCBjb25mcklkKTsKICAgICAgICBzdWNjZXNzICYmIHN1Y2Nlc3MoKTsKICAgIH0pOwoKICAgICR2aWRlby5vZmYoInN1YnNjcmliZSIpOwogICAgJHZpZGVvLm9uKCJzdWJzY3JpYmUiLCBmdW5jdGlvbiAoZSwgc3ViU1ZpZGVvLCBzdWJTQXVkaW8sIGZhaWwsIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBmYWlsICYmIGZhaWwoImxvY2FsIHN0cmVhbSBub3QgYWxsb3cgc3ViIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3ViU1ZpZGVvID0gc3RyZWFtLnN1YkFyZ3MgJiYgc3RyZWFtLnN1YkFyZ3Muc3ViU1ZpZGVvIHx8IHRydWU7CiAgICAgICAgICAgIHN1YlNBdWRpbyA9IHN0cmVhbS5zdWJBcmdzICYmIHN0cmVhbS5zdWJBcmdzLnN1YlNBdWRpbyB8fCB0cnVlOwogICAgICAgICAgICBzZWxmLnN1YnNjcmliZShzdHJlYW0ub3duZXIsIHN0cmVhbSwgc3ViU1ZpZGVvLCBzdWJTQXVkaW8sIGNvbmZySWQpLnRoZW4oc3VjY2VzcykuY2F0Y2goZmFpbCk7CiAgICAgICAgfQogICAgfSk7CgogICAgJHZpZGVvLm9mZigicGF1c2VWaWRlbyIpOwogICAgJHZpZGVvLm9uKCJwYXVzZVZpZGVvIiwgZnVuY3Rpb24gKGUsIGZhaWwsIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBzZWxmLnBhdXNlVmlkZW8oc3RyZWFtLCBjb25mcklkKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGZhaWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYuc3Vic2NyaWJlKHN0cmVhbS5vd25lciwgc3RyZWFtLCBmYWxzZSwgc3RyZWFtLnN1YkFyZ3MgJiYgc3RyZWFtLnN1YkFyZ3Muc3ViU0F1ZGlvIHx8ICFzdHJlYW0uYW9mZiwgY29uZnJJZCkudGhlbihzdWNjZXNzKS5jYXRjaChmYWlsKTsKICAgICAgICB9CiAgICB9KTsKCiAgICAkdmlkZW8ub2ZmKCJyZXN1bWVWaWRlbyIpOwogICAgJHZpZGVvLm9uKCJyZXN1bWVWaWRlbyIsIGZ1bmN0aW9uIChlLCBmYWlsLCBzdWNjZXNzKSB7CiAgICAgICAgaWYgKHN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgc2VsZi5yZXN1bWVWaWRlbyhzdHJlYW0sIHRydWUsIGNvbmZySWQpLnRoZW4oc3VjY2VzcykuY2F0Y2goZmFpbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VsZi5zdWJzY3JpYmUoc3RyZWFtLm93bmVyLCBzdHJlYW0sIHRydWUsIHN0cmVhbS5zdWJBcmdzICYmIHN0cmVhbS5zdWJBcmdzLnN1YlNWaWRlbyB8fCAhc3RyZWFtLnZvZmYsIGNvbmZySWQpLnRoZW4oc3VjY2VzcykuY2F0Y2goZmFpbCk7CiAgICAgICAgfQogICAgfSk7CgogICAgJHZpZGVvLm9mZigicGF1c2VBdWRpbyIpOwogICAgJHZpZGVvLm9uKCJwYXVzZUF1ZGlvIiwgZnVuY3Rpb24gKGUsIGZhaWwsIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBzZWxmLnBhdXNlQXVkaW8oc3RyZWFtLCBjb25mcklkKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGZhaWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYuc3Vic2NyaWJlKHN0cmVhbS5vd25lciwgc3RyZWFtLCBzdHJlYW0uc3ViQXJncy5zdWJTVmlkZW8sIGZhbHNlLCBjb25mcklkKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGZhaWwpOwogICAgICAgIH0KICAgIH0pOwoKICAgICR2aWRlby5vZmYoInJlc3VtZUF1ZGlvIik7CiAgICAkdmlkZW8ub24oInJlc3VtZUF1ZGlvIiwgZnVuY3Rpb24gKGUsIGZhaWwsIHN1Y2Nlc3MpIHsKICAgICAgICBpZiAoc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICBzZWxmLnJlc3VtZUF1ZGlvKHN0cmVhbSwgY29uZnJJZCkudGhlbihzdWNjZXNzKS5jYXRjaChmYWlsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZWxmLnN1YnNjcmliZShzdHJlYW0ub3duZXIsIHN0cmVhbSwgc3RyZWFtLnN1YkFyZ3Muc3ViU1ZpZGVvLCB0cnVlLCBjb25mcklkKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGZhaWwpOwogICAgICAgIH0KICAgIH0pOwoKICAgICR2aWRlby5vZmYoInJlbW90ZUNvbnRyb2wiKTsKICAgICR2aWRlby5vbigicmVtb3RlQ29udHJvbCIsIGZ1bmN0aW9uIChlLCBtaXJyb3IsIG9uRGlzQ29udHJvbGxlZCwgb25BY2NlcHQsIG9uTm90QWxsb3dSZW1vdGVDb250cm9sLCBvblJlbW90ZUNvbnRyb2xUaW1lb3V0LCBvblJlamVjdCwgb25CdXN5KSB7CiAgICAgICAgaWYgKHN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigibm90IGFsbG93IHJlbW90ZSBjb250cm9sIGF0IGxvY2FsIik7CiAgICAgICAgICAgIHRocm93ICJub3QgYWxsb3cgcmVtb3RlIGNvbnRyb2wgYXQgbG9jYWwiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYucmVtb3RlQ29udHJvbChzdHJlYW0sIHZpZGVvVGFnLCB2aWRlb1RhZywgbWlycm9yLCBvbkRpc0NvbnRyb2xsZWQsIG9uQWNjZXB0LCBvbk5vdEFsbG93UmVtb3RlQ29udHJvbCwgb25SZW1vdGVDb250cm9sVGltZW91dCwgb25SZWplY3QsIG9uQnVzeSwgY29uZnJJZCk7CiAgICAgICAgfQogICAgfSk7CgogICAgJHZpZGVvLm9mZigiY2hhbmFnZUNhbWVyYSIpOwogICAgJHZpZGVvLm9uKCJjaGFuYWdlQ2FtZXJhIiwgZnVuY3Rpb24gKGUsIGZhaWwsIHN1Y2Nlc3MpIHsKICAgICAgICBzZWxmLmNoYW5hZ2VDYW1lcmEoY29uZnJJZCkudGhlbihzdWNjZXNzKS5jYXRjaChmYWlsKTsKICAgIH0pOwoKICAgICR2aWRlby5vZmYoImNhcHR1cmVWaWRlbyIpOwogICAgJHZpZGVvLm9uKCJjYXB0dXJlVmlkZW8iLCBmdW5jdGlvbiAoZSwgc3VjY2Vzcywgc3RvcmVMb2NhbCwgZmlsZW5hbWUpIHsKICAgICAgICB2YXIgYmFzZTY0ID0gc2VsZi5jYXB0dXJlVmlkZW8odmlkZW9UYWcsIHN0b3JlTG9jYWwsIGZpbGVuYW1lLCBjb25mcklkKTsKICAgICAgICBzdWNjZXNzICYmIHN1Y2Nlc3MoYmFzZTY0KTsKICAgIH0pOwoKICAgICR2aWRlby5vZmYoImNhcHR1cmVQaWN0dXJlUmVtb3RlIik7CiAgICAkdmlkZW8ub24oImNhcHR1cmVQaWN0dXJlUmVtb3RlIiwgZnVuY3Rpb24gKGUsIGZhaWwsIHN1Y2Nlc3MpIHsKICAgICAgICBzZWxmLmNhcHR1cmVQaWN0dXJlUmVtb3RlKHN0cmVhbSwgZmFsc2UsIGNvbmZySWQpLnRoZW4oc3VjY2VzcykuY2F0Y2goZmFpbCk7CiAgICB9KTsKCiAgICAkdmlkZW8ub2ZmKCJmcmVlemVGcmFtZVJlbW90ZSIpOwogICAgJHZpZGVvLm9uKCJmcmVlemVGcmFtZVJlbW90ZSIsIGZ1bmN0aW9uIChlLCBmYWlsLCBzdWNjZXNzKSB7CiAgICAgICAgc2VsZi5mcmVlemVGcmFtZVJlbW90ZShzdHJlYW0sIGNvbmZySWQpLnRoZW4oc3VjY2VzcykuY2F0Y2goZmFpbCk7CiAgICB9KTsKCiAgICAkdmlkZW8ub2ZmKCJ6b29tUmVtb3RlIik7CiAgICAkdmlkZW8ub24oInpvb21SZW1vdGUiLCBmdW5jdGlvbiAoZSwgbXVsdGlwbGVzLCBmYWlsLCBzdWNjZXNzKSB7CiAgICAgICAgc2VsZi56b29tUmVtb3RlKHN0cmVhbSwgbXVsdGlwbGVzLCBjb25mcklkKS50aGVuKHN1Y2Nlc3MpLmNhdGNoKGZhaWwpOwogICAgfSk7CgogICAgJHZpZGVvLm9mZigidG9yY2hSZW1vdGUiKTsKICAgICR2aWRlby5vbigidG9yY2hSZW1vdGUiLCBmdW5jdGlvbiAoZSwgdG9yY2gsIGZhaWwsIHN1Y2Nlc3MpIHsKICAgICAgICBzZWxmLnRvcmNoUmVtb3RlKHN0cmVhbSwgdG9yY2gsIGNvbmZySWQpLnRoZW4oc3VjY2VzcykuY2F0Y2goZmFpbCk7CiAgICB9KTsKCiAgICAkdmlkZW8ub2ZmKCJmcmVlUmVtb3RlQ29udHJvbCIpOwogICAgJHZpZGVvLm9uKCdmcmVlUmVtb3RlQ29udHJvbCcsIGZ1bmN0aW9uIChlLCBmYWlsLCBzdWNjZXNzKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc2VsZi5mcmVlUmVtb3RlQ29udHJvbChzdHJlYW0sIGNvbmZySWQpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2VzcygpOwogICAgICAgIH0KICAgIH0pOwoKICAgIHZhciBjb25zdGFpbnRzID0geyB2aWRlbzogIXN0cmVhbS52b2ZmLCBhdWRpbzogIXN0cmVhbS5hb2ZmLCB2b2ZmOiBzdHJlYW0udm9mZiwgYW9mZjogc3RyZWFtLmFvZmYgfTsKICAgIGlmICghc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgIGNvbnN0YWludHMgPSB7CiAgICAgICAgICAgIHZpZGVvOiBzdHJlYW0uc3ViQXJncyA/IHN0cmVhbS5zdWJBcmdzLnN1YlNWaWRlbyA6ICFzdHJlYW0udm9mZiwKICAgICAgICAgICAgYXVkaW86IHN0cmVhbS5zdWJBcmdzID8gc3RyZWFtLnN1YkFyZ3Muc3ViU0F1ZGlvIDogIXN0cmVhbS5hb2ZmLAogICAgICAgICAgICB2b2ZmOiBzdHJlYW0udm9mZiwKICAgICAgICAgICAgYW9mZjogc3RyZWFtLmFvZmYKICAgICAgICB9OwogICAgfQogICAgJHZpZGVvLnRyaWdnZXIoIm9uTWVkaWFDaGFuYWdlZCIsIFtjb25zdGFpbnRzLCBzdHJlYW0sIHN0cmVhbS5vd25lciwgY29uZnJJZF0pOwoKICAgIGlmICh2aWRlb1RhZy5nZXRBdHRyaWJ1dGUoInNvdW5kIikpIHsKICAgICAgICBzZXJ2aWNlLmN1cnJlbnQuX21vbml0U291bmRDaGFuYWdlZFN0cmVhbXMgPSBzZXJ2aWNlLmN1cnJlbnQuX21vbml0U291bmRDaGFuYWdlZFN0cmVhbXMgfHwge307CiAgICAgICAgc2VydmljZS5jdXJyZW50Ll9tb25pdFNvdW5kQ2hhbmFnZWRTdHJlYW1zW3N0cmVhbS5pZF0gPSBzdHJlYW0uaWQ7CiAgICB9Cn0KCmZ1bmN0aW9uIHJ4Rm9jdXNFeHBvUmVtb3RlKGNvbmZySWQsIHN0cmVhbUlkLCB2aWRlb1RhZywgY2xpY2tFdmVudCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIGlmICh0eXBlb2Ygc3RyZWFtSWQgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgc3RyZWFtSWQgPSBzdHJlYW1JZC5pZDsKICAgIH0KCiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgc2VydmljZS5mb2N1c0V4cG9SZW1vdGUoc3RyZWFtSWQsIHZpZGVvVGFnLCBjbGlja0V2ZW50LCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgIGVycm9yVHlwZTogImZvY3VzZXhwb19yZW1vdGVfZmFpbCIsCiAgICAgICAgICAgICAgICBlcnJvcjogLTIwMywKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXZ0Lm1lc3NhZ2UoKQogICAgICAgICAgICB9KTsKICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfSk7CiAgICB9KS5waXBlKGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4Q2FwdHVyZVBpY3R1cmVSZW1vdGUoY29uZnJJZCwgc3RyZWFtSWQsIHJzcEJhc2U2NFBpYykgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIGlmICh0eXBlb2Ygc3RyZWFtSWQgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgc3RyZWFtSWQgPSBzdHJlYW1JZC5pZDsKICAgIH0KCiAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgc2VydmljZS5jYXB0dXJlUGljdHVyZVJlbW90ZShzdHJlYW1JZCwgcnNwQmFzZTY0UGljLCBmdW5jdGlvbiAoYmFzZTY0KSB7CiAgICAgICAgICAgIG9ic2VydmVyLm5leHQoYmFzZTY0KTsKICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTsKICAgICAgICB9LCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgIGVycm9yVHlwZTogImNhcHR1cmVfcmVtb3RlX2ZhaWwiLAogICAgICAgICAgICAgICAgZXJyb3I6IC0yMDMsCiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGV2dC5tZXNzYWdlKCkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9KS5waXBlKGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4Wm9vbVJlbW90ZShjb25mcklkLCBzdHJlYW1JZCwgbXVsdGlwbGVzKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgaWYgKHR5cGVvZiBzdHJlYW1JZCAhPT0gJ3N0cmluZycpIHsKICAgICAgICBzdHJlYW1JZCA9IHN0cmVhbUlkLmlkOwogICAgfQoKICAgIHZhciBjb25mciA9IHNlbGYuX2NvbmZyKGNvbmZySWQpOwogICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwoKICAgIHJldHVybiByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk9ic2VydmFibGUiXS5jcmVhdGUoZnVuY3Rpb24gb25TdWJzY3JpcHRpb24ob2JzZXJ2ZXIpIHsKICAgICAgICBzZXJ2aWNlLnpvb21SZW1vdGUoc3RyZWFtSWQsIG11bHRpcGxlcywgZnVuY3Rpb24gZmFpbChldnQpIHsKICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoewogICAgICAgICAgICAgICAgZXJyb3JUeXBlOiAiY2FwdHVyZV9yZW1vdGVfZmFpbCIsCiAgICAgICAgICAgICAgICBlcnJvcjogLTIwMywKICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXZ0Lm1lc3NhZ2UoKQogICAgICAgICAgICB9KTsKICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfSk7CiAgICB9KS5waXBlKGVycm9ySGFuZGxlcik7Cn0KCmZ1bmN0aW9uIHJ4VG9yY2hSZW1vdGUoY29uZnJJZCwgc3RyZWFtSWQsIHRvcmNoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgaWYgKHR5cGVvZiBzdHJlYW1JZCAhPT0gJ3N0cmluZycpIHsKICAgICAgICBzdHJlYW1JZCA9IHN0cmVhbUlkLmlkOwogICAgfQoKICAgIHZhciBjb25mciA9IHNlbGYuX2NvbmZyKGNvbmZySWQpOwogICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwoKICAgIHJldHVybiByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk9ic2VydmFibGUiXS5jcmVhdGUoZnVuY3Rpb24gb25TdWJzY3JpcHRpb24ob2JzZXJ2ZXIpIHsKICAgICAgICBzZXJ2aWNlLnRvcmNoUmVtb3RlKHN0cmVhbUlkLCB0b3JjaCwgZnVuY3Rpb24gKHRvcmNoKSB7CiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodG9yY2gpOwogICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpOwogICAgICAgIH0sIGZ1bmN0aW9uIGZhaWwoZXZ0KSB7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHsKICAgICAgICAgICAgICAgIGVycm9yVHlwZTogInRvcmNoX3JlbW90ZV9mYWlsIiwKICAgICAgICAgICAgICAgIGVycm9yOiAtMjAzLAogICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBldnQubWVzc2FnZSgpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSkucGlwZShlcnJvckhhbmRsZXIpOwp9CgpmdW5jdGlvbiByeEZyZWV6ZUZyYW1lUmVtb3RlKGNvbmZySWQsIHN0cmVhbUlkKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgaWYgKHR5cGVvZiBzdHJlYW1JZCAhPT0gJ3N0cmluZycpIHsKICAgICAgICBzdHJlYW1JZCA9IHN0cmVhbUlkLmlkOwogICAgfQoKICAgIHZhciBjb25mciA9IHNlbGYuX2NvbmZyKGNvbmZySWQpOwogICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwoKICAgIHJldHVybiByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk9ic2VydmFibGUiXS5jcmVhdGUoZnVuY3Rpb24gb25TdWJzY3JpcHRpb24ob2JzZXJ2ZXIpIHsKICAgICAgICBzZXJ2aWNlLmZyZWV6ZUZyYW1lUmVtb3RlKHN0cmVhbUlkLCBmdW5jdGlvbiAoZnJlZXplRnJhbWUpIHsKICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChmcmVlemVGcmFtZSk7CiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfSwgZnVuY3Rpb24gZmFpbChldnQpIHsKICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoewogICAgICAgICAgICAgICAgZXJyb3JUeXBlOiAiZnJlZXplX3JlbW90ZV9mYWlsIiwKICAgICAgICAgICAgICAgIGVycm9yOiAtMjAzLAogICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBldnQubWVzc2FnZSgpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSkucGlwZShlcnJvckhhbmRsZXIpOwp9Cgp2YXIgX3NpbmdsZSA9IF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmV4dGVuZChuZXcgTWFuYWdlcigpLCB7CiAgICBfY29uZnI6IGZ1bmN0aW9uIF9jb25mcihjb25mcklkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIGNvbmZySWQgfHwgKGNvbmZySWQgPSBzZWxmLl9fY3VycmVudF9jb25mcklkKTsKICAgICAgICByZXR1cm4gc2VsZi5fY29uZnJzW2NvbmZySWRdOwogICAgfSwKICAgIF9zZXJ2aWNlOiBmdW5jdGlvbiBfc2VydmljZShjb25mcklkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIGNvbmZySWQgfHwgKGNvbmZySWQgPSBzZWxmLl9fY3VycmVudF9jb25mcklkKTsKICAgICAgICByZXR1cm4gdGhpcy5fc2VydmljZXNbY29uZnJJZF07CiAgICB9LAoKICAgIGdldFN0cmVhbUJ5SWQ6IGZ1bmN0aW9uIGdldFN0cmVhbUJ5SWQoc3RyZWFtSWQsIGNvbmZySWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwogICAgICAgIHJldHVybiBzZXJ2aWNlICYmIHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChzdHJlYW1JZCk7CiAgICB9LAogICAgZ2V0TWVtYmVyQnlJZDogZnVuY3Rpb24gZ2V0TWVtYmVyQnlJZChtZW1JZCwgY29uZnJJZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICB2YXIgc2VydmljZSA9IHNlbGYuX3NlcnZpY2UoY29uZnJJZCk7CiAgICAgICAgcmV0dXJuIHNlcnZpY2UgJiYgc2VydmljZS5nZXRNZW1iZXJCeUlkKG1lbUlkKTsKICAgIH0sCgogICAgc3RyZWFtQmluZFZpZGVvOiBmdW5jdGlvbiBzdHJlYW1CaW5kVmlkZW8oc3RyZWFtLCB2aWRlb1RhZywgY29uZnJJZCkgewogICAgICAgIF9zdHJlYW1CaW5kVmlkZW8uY2FsbCh0aGlzLCBzdHJlYW0sIHZpZGVvVGFnLCBjb25mcklkKTsKICAgIH0sCiAgICBnZXRCaW5kVmlkZW9CeTogZnVuY3Rpb24gZ2V0QmluZFZpZGVvQnkoc3RyZWFtKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIGlmICh0eXBlb2Ygc3RyZWFtICE9PSAic3RyaW5nIiAmJiBzdHJlYW0gJiYgc3RyZWFtLmlkKSB7CiAgICAgICAgICAgIHN0cmVhbSA9IHN0cmVhbS5pZDsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiBzdHJlYW0gIT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoIkJhZCBzdHJlYW0gIiwgc3RyZWFtKTsKICAgICAgICAgICAgdGhyb3cgIkJhZCBzdHJlYW0gIiArIHN0cmVhbTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNlbGYuX3ZpZGVvc1tzdHJlYW1dOwogICAgfSwKICAgIGNyZWF0ZUNvbmZyOiBmdW5jdGlvbiBjcmVhdGVDb25mcihjb25mclR5cGUsIHBhc3N3b3JkKSB7CiAgICAgICAgcmV0dXJuIHJ4Q3JlYXRlQ29uZnIuYXBwbHkodGhpcywgYXJndW1lbnRzKS50b1Byb21pc2UoKTsKICAgIH0sCgogICAgcmVxVGt0OiBmdW5jdGlvbiByZXFUa3QoY29uZnJJZCwgcGFzc3dvcmQpIHsKICAgICAgICByZXR1cm4gcnhSZXFUa3QuYXBwbHkodGhpcywgYXJndW1lbnRzKS50b1Byb21pc2UoKTsKICAgIH0sCgogICAgY2hhbmFnZVJvbGVzOiBmdW5jdGlvbiBjaGFuYWdlUm9sZXMocm9sZSwgdWlkcywgY29uZnJJZCkgewogICAgICAgIHJldHVybiByeENoYW5hZ2VSb2xlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRvUHJvbWlzZSgpOwogICAgfSwKCiAgICBkaXNiYW5kQ29uZnI6IGZ1bmN0aW9uIGRpc2JhbmRDb25mcihjb25mcklkLCByb2xlVG9rZW4pIHsKICAgICAgICByZXR1cm4gcnhEaXNiYW5kQ29uZnIuYXBwbHkodGhpcywgYXJndW1lbnRzKS50b1Byb21pc2UoKTsKICAgIH0sCgogICAga2lja01lbWJlcjogZnVuY3Rpb24ga2lja01lbWJlcih1aWRzLCBjb25mcklkKSB7CiAgICAgICAgcmV0dXJuIHJ4S2lja01lbWJlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRvUHJvbWlzZSgpOwogICAgfSwKCiAgICBzZWxlY3RDb25mcjogZnVuY3Rpb24gc2VsZWN0Q29uZnIoY29uZnJJZCwgcGFzc3dvcmQpIHsKICAgICAgICByZXR1cm4gcnhTZWxlY3RDb25mci5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRvUHJvbWlzZSgpOwogICAgfSwKCiAgICBqb2luVXNlUGFzc3dvcmQ6IGZ1bmN0aW9uIGpvaW5Vc2VQYXNzd29yZChjb25mcklkLCBwYXNzd29yZCwgZXh0KSB7CiAgICAgICAgcmV0dXJuIHJ4Sm9pbkV4aXN0Q29uZnJVc2VQYXNzd29yZC5jYWxsKHRoaXMsIGNvbmZySWQsIHBhc3N3b3JkLCBleHQpLnRvUHJvbWlzZSgpOwogICAgfSwKICAgIGpvaW5Vc2VUaWNrZXQ6IGZ1bmN0aW9uIGpvaW5Vc2VUaWNrZXQoY29uZnJJZCwgdGlja2V0LCBleHQpIHsKICAgICAgICByZXR1cm4gcnhKb2luVXNlVGlja2V0LmNhbGwodGhpcywgY29uZnJJZCwgdGlja2V0LCBleHQpLnRvUHJvbWlzZSgpOwogICAgfSwKICAgIGpvaW5lZDogZnVuY3Rpb24gam9pbmVkKGNvbmZySWQpIHsKICAgICAgICByZXR1cm4gY29uZnJJZCAmJiB0aGlzLl9jb25mcnNbY29uZnJJZF0gJiYgdGhpcy5fY29uZnJzW2NvbmZySWRdLmpvaW5JZCB8fCB0aGlzLl9fY3VycmVudF9jb25mcklkICYmIHRoaXMuam9pbmVkKHRoaXMuX19jdXJyZW50X2NvbmZySWQpOwogICAgfSwKCiAgICBzaGFyZURlc2t0b3BXaXRoQXVkaW86IGZ1bmN0aW9uIHNoYXJlRGVza3RvcFdpdGhBdWRpbyh2aWRlb0NvbnN0YWludHMsIHdpdGhBdWRpbywgdmlkZW9UYWcsIGV4dCwgY29uZnJJZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS50YXJnZXRET00odmlkZW9UYWcpKSB7CiAgICAgICAgICAgIGNvbmZySWQgPSBleHQ7CiAgICAgICAgICAgIGV4dCA9IHZpZGVvVGFnOwogICAgICAgICAgICB2aWRlb1RhZyA9IHVuZGVmaW5lZDsKICAgICAgICB9CgogICAgICAgIHZhciBjb25zdGFpbnRzID0gewogICAgICAgICAgICB2aWRlbzogdmlkZW9Db25zdGFpbnRzLAogICAgICAgICAgICBhdWRpbzogd2l0aEF1ZGlvCiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIHJ4U2hhcmVEZXNrdG9wLmNhbGwoc2VsZiwgY29uZnJJZCwgY29uc3RhaW50cywgdmlkZW9UYWcsIGV4dCkudG9Qcm9taXNlKCk7CiAgICB9LAogICAgY2hhbmFnZUNhbWVyYTogZnVuY3Rpb24gY2hhbmFnZUNhbWVyYShjb25mcklkKSB7CiAgICAgICAgcmV0dXJuIHJ4Q2hhbmFnZUNhbWVyYS5jYWxsKHRoaXMsIGNvbmZySWQpLnRvUHJvbWlzZSgpOwogICAgfSwKICAgIHN3aXRjaENhbWVyYTogZnVuY3Rpb24gc3dpdGNoQ2FtZXJhKGNvbmZySWQpIHsKICAgICAgICByZXR1cm4gcnhDaGFuYWdlQ2FtZXJhLmNhbGwodGhpcywgY29uZnJJZCkudG9Qcm9taXNlKCk7CiAgICB9LAogICAgc2hhcmVWaWRlb1dpdGhBdWRpbzogZnVuY3Rpb24gc2hhcmVWaWRlb1dpdGhBdWRpbyh2aWRlb0NvbnN0YWludHMsIHdpdGhBdWRpbywgdmlkZW9UYWcsIGV4dCwgY29uZnJJZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKCFfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS50YXJnZXRET00odmlkZW9UYWcpKSB7CiAgICAgICAgICAgIGNvbmZySWQgPSBleHQ7CiAgICAgICAgICAgIGV4dCA9IHZpZGVvVGFnOwogICAgICAgICAgICB2aWRlb1RhZyA9IHVuZGVmaW5lZDsKICAgICAgICB9CgogICAgICAgIHZhciBjb25zdGFpbnRzID0gewogICAgICAgICAgICB2aWRlbzogdmlkZW9Db25zdGFpbnRzLAogICAgICAgICAgICBhdWRpbzogd2l0aEF1ZGlvCiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIHJ4UHVibGlzaE1lZGlhLmNhbGwoc2VsZiwgY29uZnJJZCwgY29uc3RhaW50cywgdmlkZW9UYWcsIGV4dCkudG9Qcm9taXNlKCk7CiAgICB9LAogICAgY2FwdHVyZVZpZGVvOiBmdW5jdGlvbiBjYXB0dXJlVmlkZW8odmlkZW9PYmosIHN0b3JlTG9jYWwsIGZpbGVuYW1lLCBjb25mcklkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKICAgICAgICByZXR1cm4gc2VydmljZS5jYXB0dXJlVmlkZW8odmlkZW9PYmosIHN0b3JlTG9jYWwsIGZpbGVuYW1lKTsKICAgIH0sCgogICAgb3BlblVzZXJNZWRpYTogZnVuY3Rpb24gb3BlblVzZXJNZWRpYShjb25zdGFpbnRzLCBjb25mcklkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKCiAgICAgICAgcmV0dXJuIHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT2JzZXJ2YWJsZSJdLmNyZWF0ZShmdW5jdGlvbiBvblN1YnNjcmlwdGlvbihvYnNlcnZlcikgewogICAgICAgICAgICBzZXJ2aWNlLl9fZ2V0VXNlck1lZGlhKGNvbnN0YWludHMsIGZ1bmN0aW9uIChhdHRlbmRlZSwgc3RyZWFtKSB7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHN0cmVhbSk7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpOwogICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkucGlwZShlcnJvckhhbmRsZXIpLnRvUHJvbWlzZSgpOwogICAgfSwKCiAgICBtZWRpYURldmljZXM6IGZ1bmN0aW9uIG1lZGlhRGV2aWNlcyhraW5kKSB7CiAgICAgICAgaWYgKHR5cGVvZiBraW5kID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGtpbmQgPSB1bmRlZmluZWQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24gKGRldmljZUluZm9zKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0RGV2aWNlSW5mb3MgPSBbXTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSAhPT0gZGV2aWNlSW5mb3MubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGV2aWNlSW5mbyA9IGRldmljZUluZm9zW2ldOwogICAgICAgICAgICAgICAgICAgIHZhciBkZXZpY2VJZCA9IGRldmljZUluZm8uZGV2aWNlSWQ7CgogICAgICAgICAgICAgICAgICAgIGlmICgha2luZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHREZXZpY2VJbmZvcy5wdXNoKGRldmljZUluZm8pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGtpbmQgJiYga2luZCA9PT0gZGV2aWNlSW5mby5raW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdERldmljZUluZm9zLnB1c2goZGV2aWNlSW5mbyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXZpY2VJbmZvLmtpbmQgPT09ICdhdWRpb2lucHV0Jykge30gZWxzZSBpZiAoZGV2aWNlSW5mby5raW5kID09PSAnYXVkaW9vdXRwdXQnKSB7fSBlbHNlIGlmIChkZXZpY2VJbmZvLmtpbmQgPT09ICd2aWRlb2lucHV0Jykge30gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygnU29tZSBvdGhlciBraW5kIG9mIHNvdXJjZS9kZXZpY2U6ICcsIGRldmljZUluZm8pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHJlc3VsdERldmljZUluZm9zKTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oJ25hdmlnYXRvci5nZXRVc2VyTWVkaWEgZXJyb3I6ICcsIGVycm9yKTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkucGlwZShlcnJvckhhbmRsZXIpLnRvUHJvbWlzZSgpOwogICAgfSwKICAgIHJlc3VtZVZpZGVvOiBmdW5jdGlvbiByZXN1bWVWaWRlbyhwdWJTLCB2aWRlb0NvbnN0YWludHMsIGNvbmZySWQpIHsKICAgICAgICByZXR1cm4gcnhSZXN1bWVQYXVzZVZpZGVvLmNhbGwodGhpcywgcHViUywgdmlkZW9Db25zdGFpbnRzIHx8IHRydWUsIGNvbmZySWQpLnRvUHJvbWlzZSgpOwogICAgfSwKICAgIHBhdXNlVmlkZW86IGZ1bmN0aW9uIHBhdXNlVmlkZW8ocHViUywgY29uZnJJZCkgewogICAgICAgIHJldHVybiByeFJlc3VtZVBhdXNlVmlkZW8uY2FsbCh0aGlzLCBwdWJTLCBmYWxzZSwgY29uZnJJZCkudG9Qcm9taXNlKCk7CiAgICB9LAoKICAgIHJlc3VtZUF1ZGlvOiBmdW5jdGlvbiByZXN1bWVBdWRpbyhwdWJTLCBjb25mcklkKSB7CiAgICAgICAgcmV0dXJuIHJ4UmVzdW1lUGF1c2VBdWRpby5jYWxsKHRoaXMsIHB1YlMsIGZhbHNlLCBjb25mcklkKS50b1Byb21pc2UoKTsKICAgIH0sCiAgICBwYXVzZUF1ZGlvOiBmdW5jdGlvbiBwYXVzZUF1ZGlvKHB1YlMsIGNvbmZySWQpIHsKICAgICAgICByZXR1cm4gcnhSZXN1bWVQYXVzZUF1ZGlvLmNhbGwodGhpcywgcHViUywgdHJ1ZSwgY29uZnJJZCkudG9Qcm9taXNlKCk7CiAgICB9LAoKICAgIGZyZWV6ZUZyYW1lUmVtb3RlOiBmdW5jdGlvbiBmcmVlemVGcmFtZVJlbW90ZShzdHJlYW0sIGNvbmZySWQpIHsKICAgICAgICByZXR1cm4gcnhGcmVlemVGcmFtZVJlbW90ZS5jYWxsKHRoaXMsIGNvbmZySWQsIHN0cmVhbSkudG9Qcm9taXNlKCk7CiAgICB9LAogICAgdG9yY2hSZW1vdGU6IGZ1bmN0aW9uIHRvcmNoUmVtb3RlKHN0cmVhbSwgdG9yY2gsIGNvbmZySWQpIHsKICAgICAgICByZXR1cm4gcnhUb3JjaFJlbW90ZS5jYWxsKHRoaXMsIGNvbmZySWQsIHN0cmVhbSwgdG9yY2gpLnRvUHJvbWlzZSgpOwogICAgfSwKICAgIHpvb21SZW1vdGU6IGZ1bmN0aW9uIHpvb21SZW1vdGUoc3RyZWFtLCBtdWx0aXBsZXMsIGNvbmZySWQpIHsKICAgICAgICByZXR1cm4gcnhab29tUmVtb3RlLmNhbGwodGhpcywgY29uZnJJZCwgc3RyZWFtLCBtdWx0aXBsZXMpLnRvUHJvbWlzZSgpOwogICAgfSwKICAgIGNhcHR1cmVQaWN0dXJlUmVtb3RlOiBmdW5jdGlvbiBjYXB0dXJlUGljdHVyZVJlbW90ZShzdHJlYW1JZCwgY29uZnJJZCkgewogICAgICAgIHJldHVybiByeENhcHR1cmVQaWN0dXJlUmVtb3RlLmNhbGwodGhpcywgY29uZnJJZCwgc3RyZWFtSWQsIGZhbHNlKS50b1Byb21pc2UoKTsKICAgIH0sCgogICAgZm9jdXNFeHBvUmVtb3RlOiBmdW5jdGlvbiBmb2N1c0V4cG9SZW1vdGUoc3RyZWFtLCB2aWRlb1RhZywgY2xpY2tFdmVudCwgY29uZnJJZCkgewogICAgICAgIHJldHVybiByeEZvY3VzRXhwb1JlbW90ZS5jYWxsKHRoaXMsIGNvbmZySWQsIHN0cmVhbSwgdmlkZW9UYWcsIGNsaWNrRXZlbnQpLnRvUHJvbWlzZSgpOwogICAgfSwKCiAgICBvbkZvY3VzRXhwb1JlbW90ZVdoZW5DbGlja1ZpZGVvOiBmdW5jdGlvbiBvbkZvY3VzRXhwb1JlbW90ZVdoZW5DbGlja1ZpZGVvKHRhZywgZXZlbnQsIGZhaWwsIHN1Y2Nlc3MpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgc3VjY2VzcyA9IGZhaWw7CiAgICAgICAgICAgIGZhaWwgPSBldmVudDsKICAgICAgICAgICAgZXZlbnQgPSB1bmRlZmluZWQ7CiAgICAgICAgfQoKICAgICAgICB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh0YWcpLm9mZihldmVudCB8fCAnY2xpY2snKTsKICAgICAgICB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh0YWcpLm9uKGV2ZW50IHx8ICdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBzdHJlYW1JZCA9IHRhZy5nZXRBdHRyaWJ1dGUoImVhc2Vtb2Jfc3RyZWFtIik7CiAgICAgICAgICAgIHNlbGYuZm9jdXNFeHBvUmVtb3RlKHN0cmVhbUlkLCB0YWcsIGUpLnRoZW4oc3VjY2VzcykuY2F0Y2goZmFpbCk7CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiBldmVudDsKICAgIH0sCiAgICBvZmZFdmVudEF0VGFnOiBmdW5jdGlvbiBvZmZFdmVudEF0VGFnKHRhZywgZXZlbnQpIHsKICAgICAgICBldmVudCAmJiB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh0YWcpLm9mZihldmVudCk7CiAgICB9LAoKICAgIGh1bmd1cDogZnVuY3Rpb24gaHVuZ3VwKHN0cmVhbSwgY29uZnJJZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHN0cmVhbUlkOwogICAgICAgIGlmICh0eXBlb2Ygc3RyZWFtID09PSAic3RyaW5nIikgewogICAgICAgICAgICBzdHJlYW1JZCA9IHN0cmVhbTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdHJlYW1JZCA9IHN0cmVhbS5pZCB8fCBzdHJlYW0gKyAiIjsKICAgICAgICB9CgogICAgICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKICAgICAgICB2YXIgY29uZnIgPSBzZWxmLl9jb25mcihjb25mcklkKTsKICAgICAgICBpZiAoIWNvbmZyIHx8ICFzZXJ2aWNlKSB7CiAgICAgICAgICAgIF9sb2dnZXIud2Fybigid2hlbiBodW5ndXAgc3RyZWFtLiBub3QgZm91bmQgY29uZnIgYW5kIHNlcnZpY2UuIiwgc3RyZWFtKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgc2VydmljZS5odW5ndXAoc3RyZWFtSWQpOwoKICAgICAgICB2YXIgaHVuZ2VBdiA9IGZhbHNlOwogICAgICAgIGNvbmZyLmF2ICYmIChodW5nZUF2ID0gY29uZnIuYXYuaWQgPT09IHN0cmVhbUlkKSAmJiAoY29uZnIuYXYgPSB1bmRlZmluZWQpOwogICAgICAgIGNvbmZyLmRlc2t0b3AgJiYgY29uZnIuZGVza3RvcC5pZCA9PT0gc3RyZWFtSWQgJiYgKGNvbmZyLmRlc2t0b3AgPSB1bmRlZmluZWQpOwoKICAgICAgICBpZiAoaHVuZ2VBdiAmJiBjb25mci50eXBlID09IHNlbGYuQ29uZnJUeXBlLkxJVkUgJiYgc2VydmljZS5jdXJyZW50LnJvbGUgPT0gc2luZ2xlLlJvbGUuQVVESUVOQ0UpIHsKICAgICAgICAgICAgLy/op4LkvJcg6K6i6ZiFMCAgJiYgc2VydmljZS5jdXJyZW50LnJvbGUgPT0gc2luZ2xlLlJvbGUuQVVESUVOQ0UKICAgICAgICAgICAgdmFyIHplcm9TdHJlYW0gPSBzZXJ2aWNlLmN1cnJlbnQgJiYgc2VydmljZS5jdXJyZW50Ll9jYWNoZVN0cmVhbXNbIjAiXTsKICAgICAgICAgICAgc2VsZi5zdWJzY3JpYmUoc2VydmljZS5jdXJyZW50LCB6ZXJvU3RyZWFtLCBmYWxzZSwgdHJ1ZSwgY29uZnJJZCk7CiAgICAgICAgfQogICAgfSwKCiAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShtZW1iZXIsIHN0cmVhbSwgc3ViU1ZpZGVvLCBzdWJTQXVkaW8sIHZpZGVvVGFnLCBjb25mcklkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIGlmICghX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEudGFyZ2V0RE9NKHZpZGVvVGFnKSkgewogICAgICAgICAgICBjb25mcklkID0gdmlkZW9UYWc7CiAgICAgICAgICAgIHZpZGVvVGFnID0gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcnhTdWJzY3JpYmUuY2FsbChzZWxmLCBjb25mcklkLCBzdHJlYW0sIHN1YlNWaWRlbywgc3ViU0F1ZGlvLCB2aWRlb1RhZykudG9Qcm9taXNlKCk7CiAgICB9LAoKICAgIGV4aXQ6IGZ1bmN0aW9uIGV4aXQoY2xvc2VNeUNvbmZySWZJQ3J0Q29uZnIsIGNvbmZySWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBzZXJ2aWNlID0gc2VsZi5fc2VydmljZShjb25mcklkKTsKICAgICAgICBpZiAoIXNlcnZpY2UpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJ3aGVuIGV4aXQuIG5vdCBmb3VuZCBzZXJ2aWNlLiIsIGNvbmZySWQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzZXJ2aWNlLmV4aXQoY2xvc2VNeUNvbmZySWZJQ3J0Q29uZnIpOwogICAgfSwKCiAgICBfb25FeGl0OiBmdW5jdGlvbiBfb25FeGl0KGNvbmZySWQsIHJlYXNvbiwgZmFpbGVkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNlbGYuX19jdXJyZW50X2NvbmZySWQgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIHNlbGYub25FeGl0KHJlYXNvbiwgZmFpbGVkLCBjb25mcklkKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5yZW1vdmVBdHRyaWJ1dGUoc2VsZi5fY29uZnJzLCBjb25mcklkKTsKICAgICAgICAgICAgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEucmVtb3ZlQXR0cmlidXRlKHNlbGYuX3NlcnZpY2VzLCBjb25mcklkKTsKICAgICAgICAgICAgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEucmVtb3ZlQXR0cmlidXRlKHNlbGYuX3ZpZGVvcywgY29uZnJJZCk7CiAgICAgICAgICAgIF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLnJlbW92ZUF0dHJpYnV0ZShzZWxmLl9ldmVudHMsIGNvbmZySWQpOwogICAgICAgIH0KICAgIH0sCiAgICBvbkV4aXQ6IGZ1bmN0aW9uIG9uRXhpdChyZWFzb24sIGZhaWxlZCwgY29uZnJJZCkge30sCiAgICBfb25Sb2xlVXBkYXRlZDogZnVuY3Rpb24gX29uUm9sZVVwZGF0ZWQocm9sZSwgY29uZnJJZCkge30sCgogICAgb25NZW1iZXJKb2luOiBmdW5jdGlvbiBvbk1lbWJlckpvaW4obWVtYmVyLCBjb25mcklkKSB7fSwKICAgIG9uTWVtYmVyTGVhdmU6IGZ1bmN0aW9uIG9uTWVtYmVyTGVhdmUobWVtYmVyLCByZWFzb24sIGNvbmZySWQpIHt9LAogICAgX29uUmVjdlJlbW90ZU1lc3NhZ2U6IGZ1bmN0aW9uIF9vblJlY3ZSZW1vdGVNZXNzYWdlKGZyb21NZW1iZXIsIGFyZ3NPYmplY3QsIGNvbmZySWQpIHt9LAoKICAgIGNydEFuZFJldHVyblZpZGVvOiBmdW5jdGlvbiBjcnRBbmRSZXR1cm5WaWRlbyhtZW1iZXIsIHN0cmVhbSwgY29uZnJJZCkgewogICAgICAgIC8vdGhyb3cgIlBsZWFzZSBzZXQgY3J0QW5kUmV0dXJuVmlkZW8iOwogICAgfSwKICAgIHVubG9hZFZpZGVvOiBmdW5jdGlvbiB1bmxvYWRWaWRlbyhtZW1iZXIsIHN0cmVhbSwgdmlkZW8sIGNvbmZySWQpIHsKICAgICAgICAvL3Rocm93ICJQbGVhc2Ugc2V0IHVubG9hZFZpZGVvIjsKICAgIH0sCgogICAgcmVtb3RlQ29udHJvbDogZnVuY3Rpb24gcmVtb3RlQ29udHJvbChzdHJlYW0sIHZpZGVvT2JqLCB0YXJnZXREaXYsIG1pcnJvciwgb25EaXNDb250cm9sbGVkLCBvbkFjY2VwdCwgb25Ob3RBbGxvd1JlbW90ZUNvbnRyb2wsIG9uUmVtb3RlQ29udHJvbFRpbWVvdXQsIG9uUmVqZWN0LCBvbkJ1c3ksIGNvbmZySWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwoKICAgICAgICBtaXJyb3IgPSAhIW1pcnJvcjsKCiAgICAgICAgdmFyIHN0cmVhbUlkID0gdHlwZW9mIHN0cmVhbSA9PT0gInN0cmluZyIgPyBzdHJlYW0gOiBzdHJlYW0uaWQ7CgogICAgICAgIGlmIChtaXJyb3IpIHsKICAgICAgICAgICAgZW1lZGlhLmN0cmwubWlycm9yQ29udHJvbGxlZChzZXJ2aWNlLCBzdHJlYW1JZCwgdmlkZW9PYmosIHRhcmdldERpdiwgb25EaXNDb250cm9sbGVkLCBvbkFjY2VwdCwgb25Ob3RBbGxvd1JlbW90ZUNvbnRyb2wsIG9uUmVtb3RlQ29udHJvbFRpbWVvdXQsIG9uUmVqZWN0LCBvbkJ1c3kpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVtZWRpYS5jdHJsLmNvbnRyb2xsZWQoc2VydmljZSwgc3RyZWFtSWQsIHZpZGVvT2JqLCB0YXJnZXREaXYsIG9uRGlzQ29udHJvbGxlZCwgb25BY2NlcHQsIG9uTm90QWxsb3dSZW1vdGVDb250cm9sLCBvblJlbW90ZUNvbnRyb2xUaW1lb3V0LCBvblJlamVjdCwgb25CdXN5KTsKICAgICAgICB9CiAgICB9LAoKICAgIGZyZWVSZW1vdGVDb250cm9sOiBmdW5jdGlvbiBmcmVlUmVtb3RlQ29udHJvbChzdHJlYW0sIGNvbmZySWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIHNlcnZpY2UgPSBzZWxmLl9zZXJ2aWNlKGNvbmZySWQpOwogICAgICAgIHZhciBzdHJlYW1JZCA9IHR5cGVvZiBzdHJlYW0gPT09ICJzdHJpbmciID8gc3RyZWFtIDogc3RyZWFtLmlkOwogICAgICAgIGVtZWRpYS5jdHJsLmRpc0NvbnRyb2xsZWQoc2VydmljZSwgc3RyZWFtSWQpOwogICAgfSwKCiAgICB6ZXB0b1RyaWdnZXI6IGZ1bmN0aW9uIHplcHRvVHJpZ2dlcih0YWcsIGV2ZW50KSB7CiAgICAgICAgLy96ZXB0byh0YWcpLnRyaWdnZXIoZXZlbnQsIFtmYWlsLCBzdWNjZXNzXSk7CiAgICAgICAgcmV0dXJuIHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT2JzZXJ2YWJsZSJdLmNyZWF0ZShmdW5jdGlvbiBvblN1YnNjcmlwdGlvbihvYnNlcnZlcikgewogICAgICAgICAgICB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh0YWcpLnRyaWdnZXIoZXZlbnQsIFtmdW5jdGlvbiBmYWlsKCkgewogICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IuYXBwbHkob2JzZXJ2ZXIsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0LmFwcGx5KG9ic2VydmVyLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTsKICAgICAgICAgICAgfV0pOwogICAgICAgIH0pLnBpcGUoZXJyb3JIYW5kbGVyKS50b1Byb21pc2UoKTsKICAgIH0sCiAgICBfb25BZGRNZW1iZXJTdHJlYW06IGZ1bmN0aW9uIF9vbkFkZE1lbWJlclN0cmVhbShzdHJlYW0sIGNvbmZySWQpIHt9LAogICAgX29uUmVtb3ZlTWVtYmVyU3RyZWFtOiBmdW5jdGlvbiBfb25SZW1vdmVNZW1iZXJTdHJlYW0oc3RyZWFtLCBjb25mcklkKSB7fSwKICAgIF9vblVwZGF0ZU1lbWJlclN0cmVhbTogZnVuY3Rpb24gX29uVXBkYXRlTWVtYmVyU3RyZWFtKHN0cmVhbSwgY29uc3RhaW50cywgY29uZnJJZCkge30sCiAgICBfb25NZW1iZXJNZWRpYUNoYW5hZ2VkOiBmdW5jdGlvbiBfb25NZW1iZXJNZWRpYUNoYW5hZ2VkKG1lbWJlciwgc3RyZWFtLCBjb25zdGFpbnRzLCBjb25mcklkKSB7CiAgICAgICAgdmFyIHRhZyA9IHRoaXMuX3ZpZGVvc1tzdHJlYW0uaWRdOwogICAgICAgIGNvbnN0YWludHMgJiYgKGNvbnN0YWludHMudm9mZiA9IHN0cmVhbS52b2ZmLCBjb25zdGFpbnRzLmFvZmYgPSBzdHJlYW0uYW9mZik7CiAgICAgICAgdGFnICYmIHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKHRhZykudHJpZ2dlcigib25NZWRpYUNoYW5hZ2VkIiwgW2NvbnN0YWludHMsIHN0cmVhbSwgbWVtYmVyLCBjb25mcklkXSk7CiAgICB9LAogICAgb25NZWRpYUNoYW5hZ2VkOiBmdW5jdGlvbiBvbk1lZGlhQ2hhbmFnZWQodGFnLCBjYikgewogICAgICAgIC8vIGNiIHZpZGVvIGF1ZGlvCiAgICAgICAgdGhpcy5hZGRWaWRlb0V2ZW50TGlzdGVuZXIodGFnLCAib25NZWRpYUNoYW5hZ2VkIiwgY2IpOwogICAgfSwKCiAgICBfb25NZW1iZXJTb3VuZENoYW5hZ2VkOiBmdW5jdGlvbiBfb25NZW1iZXJTb3VuZENoYW5hZ2VkKG1lbWJlciwgc3RyZWFtLCBtZXRlckRhdGEsIGNvbmZySWQpIHsKICAgICAgICB2YXIgdGFnID0gdGhpcy5fdmlkZW9zW3N0cmVhbS5pZF07CiAgICAgICAgdGFnICYmIHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKHRhZykudHJpZ2dlcigib25Tb3VuZENoYW5hZ2VkIiwgW21ldGVyRGF0YSwgc3RyZWFtLCBtZW1iZXIsIGNvbmZySWRdKTsKICAgIH0sCiAgICBvblNvdW5kQ2hhbmFnZWQ6IGZ1bmN0aW9uIG9uU291bmRDaGFuYWdlZCh0YWcsIGNiKSB7CiAgICAgICAgLy8gY2IgdmlkZW8gYXVkaW8KICAgICAgICBpZiAoIWVtZWRpYS5jb25maWcuZ2V0TWVkaWFNZXRlckludGVydmFsTWlsbGlzIHx8IGVtZWRpYS5jb25maWcuZ2V0TWVkaWFNZXRlckludGVydmFsTWlsbGlzIDw9IDApIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigibW9uaXQgc291bmQgY2hhbmFnZWQgbm90IGNvbmZpZy4gcGxlYXNlIGNvbmZpZyBnZXRNZWRpYU1ldGVySW50ZXJ2YWxNaWxsaXMiKTsKICAgICAgICAgICAgdGhyb3cgIm1vbml0IHNvdW5kIGNoYW5hZ2VkIG5vdCBjb25maWcuIHBsZWFzZSBjb25maWcgZ2V0TWVkaWFNZXRlckludGVydmFsTWlsbGlzIjsKICAgICAgICB9CgogICAgICAgIHRhZy5zZXRBdHRyaWJ1dGUoInNvdW5kIiwgInNvdW5kIik7CiAgICAgICAgdGhpcy5hZGRWaWRlb0V2ZW50TGlzdGVuZXIodGFnLCAib25Tb3VuZENoYW5hZ2VkIiwgY2IpOwogICAgfSwKCiAgICBvbk1lZGlhVHJhbnNtaXNzaW9uOiBmdW5jdGlvbiBvbk1lZGlhVHJhbnNtaXNzaW9uKHRhZywgY2IpIHsKICAgICAgICAvLyBjYiB2aWRlbyBhdWRpbwogICAgICAgIGlmICghZW1lZGlhLmhlbHBlciB8fCB0eXBlb2YgZW1lZGlhLmhlbHBlci5pbmJvdW5kVmlkZW8gIT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJwbGVhc2UgaW1wb3J0IGhlbHBlci4gPHNjcmlwdD4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHNlcnZpY2UgPSB0aGlzLl9zZXJ2aWNlKCk7CgogICAgICAgIHZhciBzdHJlYW1JZCA9IHRhZy5nZXRBdHRyaWJ1dGUoImVhc2Vtb2Jfc3RyZWFtIik7CiAgICAgICAgdmFyIHN0cmVhbSA9IHN0cmVhbUlkICYmIHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChzdHJlYW1JZCk7CiAgICAgICAgdmFyIGZsb3dXZWJydGMgPSB0YWcuZ2V0QXR0cmlidXRlKCJmbG93V2VicnRjIik7CgogICAgICAgIGlmIChzdHJlYW0gJiYgc3RyZWFtLl93ZWJydGMgJiYgZmxvd1dlYnJ0YyA9PSBzdHJlYW0uX3dlYnJ0Yy5fX2lkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0YWcuaGFzQXR0cmlidXRlKCJmbG93IikgJiYgc3RyZWFtICYmIHN0cmVhbS5fd2VicnRjKSB7CiAgICAgICAgICAgIC8v5byA5ZCv5rWB6YeP55uR5o6nCgogICAgICAgICAgICBpZiAoc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICAgICAgZW1lZGlhLmhlbHBlci5vdXRib3VuZFZpZGVvKHN0cmVhbSwgY2IsIDEwMDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW1lZGlhLmhlbHBlci5pbmJvdW5kVmlkZW8oc3RyZWFtLCBjYiwgMTAwMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRhZy5zZXRBdHRyaWJ1dGUoImZsb3dXZWJydGMiLCBzdHJlYW0uX3dlYnJ0Yy5fX2lkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmFkZFZpZGVvRXZlbnRMaXN0ZW5lcih0YWcsICJvbk1lZGlhVHJhbnNtaXNzaW9uIiwgY2IpOwogICAgICAgICAgICB0YWcuc2V0QXR0cmlidXRlKCJmbG93IiwgImZsb3ciKTsKICAgICAgICB9CiAgICB9LAoKICAgIF9vblRhbGtpbmc6IGZ1bmN0aW9uIF9vblRhbGtpbmcobWVtYmVyLCBzdHJlYW0sIG1ldGVyRGF0YSwgY29uZnJJZCkge30sCgogICAgX29uTm90U3VwcG9ydE1lbWJlclB1Ymxpc2hWaWRlb0NvZGVjczogZnVuY3Rpb24gX29uTm90U3VwcG9ydE1lbWJlclB1Ymxpc2hWaWRlb0NvZGVjcyhtZW1iZXIsIHN0cmVhbSwgY29uZnJJZCkgewogICAgICAgIHZhciB0YWcgPSB0aGlzLl92aWRlb3Nbc3RyZWFtLmlkXTsKICAgICAgICB0YWcgJiYgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkodGFnKS50cmlnZ2VyKCJvbk5vdFN1cHBvcnRWaWRlb0NvZGVjcyIsIFtzdHJlYW0sIG1lbWJlciwgY29uZnJJZF0pOwogICAgfSwKICAgIG9uTm90U3VwcG9ydFZpZGVvQ29kZWNzOiBmdW5jdGlvbiBvbk5vdFN1cHBvcnRWaWRlb0NvZGVjcyh0YWcsIGNiKSB7CiAgICAgICAgdGhpcy5hZGRWaWRlb0V2ZW50TGlzdGVuZXIodGFnLCAib25Ob3RTdXBwb3J0VmlkZW9Db2RlY3MiLCBjYik7CiAgICB9LAoKICAgIF9vblN0cmVhbUljZVN0YXRlQ2hhbmdlZDogZnVuY3Rpb24gX29uU3RyZWFtSWNlU3RhdGVDaGFuZ2VkKG1lbWJlciwgc3RyZWFtLCBzdGF0ZSwgY29uZnJJZCkgewogICAgICAgIHZhciB0YWcgPSB0aGlzLl92aWRlb3Nbc3RyZWFtLmlkXTsKICAgICAgICB0YWcgJiYgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkodGFnKS50cmlnZ2VyKCJvbkljZVN0YXRlQ2hhbmdlZCIsIFtzdGF0ZSwgc3RyZWFtLCBtZW1iZXIsIGNvbmZySWRdKTsKICAgIH0sCiAgICBvbkljZVN0YXRlQ2hhbmdlZDogZnVuY3Rpb24gb25JY2VTdGF0ZUNoYW5nZWQodGFnLCBjYikgewogICAgICAgIHRoaXMuYWRkVmlkZW9FdmVudExpc3RlbmVyKHRhZywgIm9uSWNlU3RhdGVDaGFuZ2VkIiwgY2IpOwogICAgfSwKCiAgICBvbkhhc1JlbW90ZUNvbnRyb2w6IGZ1bmN0aW9uIG9uSGFzUmVtb3RlQ29udHJvbChzdHJlYW0sIGNvbnRyb2xlciwgY29udHJvbFJlcXVlc3QsIGNvbmZySWQpIHsKICAgICAgICB2YXIgdGFnID0gdGhpcy5fdmlkZW9zW3N0cmVhbS5pZF07CiAgICAgICAgdGFnICYmIHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKHRhZykudHJpZ2dlcigib25SZW1vdGVDb250cm9sIiwgW2NvbnRyb2xlciwgY29udHJvbFJlcXVlc3QsIHN0cmVhbSwgY29uZnJJZF0pOwogICAgfSwKICAgIG9uUmVtb3RlQ29udHJvbDogZnVuY3Rpb24gb25SZW1vdGVDb250cm9sKHRhZywgY2IpIHsKICAgICAgICB0aGlzLmFkZFZpZGVvRXZlbnRMaXN0ZW5lcih0YWcsICJvblJlbW90ZUNvbnRyb2wiLCBjYik7CiAgICB9LAoKICAgIG9uUmVtb3RlRnJlZUNvbnRyb2w6IGZ1bmN0aW9uIG9uUmVtb3RlRnJlZUNvbnRyb2woc3RyZWFtLCBjb250cm9sZXIsIGNJZCwgY29uZnJJZCkgewogICAgICAgIHZhciB0YWcgPSB0aGlzLl92aWRlb3Nbc3RyZWFtLmlkXTsKICAgICAgICB0YWcgJiYgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkodGFnKS50cmlnZ2VyKCJvbkZyZWVDb250cm9sIiwgW2NvbnRyb2xlciwgY0lkLCBzdHJlYW0sIGNvbmZySWRdKTsKICAgIH0sCiAgICBvbkZyZWVDb250cm9sOiBmdW5jdGlvbiBvbkZyZWVDb250cm9sKHRhZywgY2IpIHsKICAgICAgICB0aGlzLmFkZFZpZGVvRXZlbnRMaXN0ZW5lcih0YWcsICJvbkZyZWVDb250cm9sIiwgY2IpOwogICAgfSwKCiAgICBhZGRWaWRlb0V2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uIGFkZFZpZGVvRXZlbnRMaXN0ZW5lcih0YWcsIGV2ZW50LCBjYWxsYmFjaykgewogICAgICAgIHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKHRhZykub2ZmKGV2ZW50KTsKICAgICAgICB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh0YWcpLm9uKGV2ZW50LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhcmdzID0gW107CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjay5hcHBseSh0YWcsIGFyZ3MpOwogICAgICAgIH0pOwogICAgfQp9KTsKCnVuZGVyc2NvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0LmEuZWFjaChbImh1bmd1cCIsICJzdWJzY3JpYmUiLCAicGF1c2VWaWRlbyIsICJyZXN1bWVWaWRlbyIsICJwYXVzZUF1ZGlvIiwgInJlc3VtZUF1ZGlvIiwgImNoYW5hZ2VDYW1lcmEiLCAiZnJlZVJlbW90ZUNvbnRyb2wiLCAiY2FwdHVyZVBpY3R1cmVSZW1vdGUiLCAiZnJlZXplRnJhbWVSZW1vdGUiXSwgZnVuY3Rpb24gKHZhbCwgaW5kZXgpIHsKICAgIHZhciBuYW1lID0gdmFsLnJlcGxhY2UoL1xiW2Etel0vZywgZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gcy50b1VwcGVyQ2FzZSgpOwogICAgfSk7CiAgICBfc2luZ2xlWyJ0cmlnZ2VyIiArIG5hbWVdID0gZnVuY3Rpb24gKHRhZykgewogICAgICAgIHJldHVybiBfc2luZ2xlLnplcHRvVHJpZ2dlcih0YWcsIHZhbCk7CiAgICB9Owp9KTsKCl9zaW5nbGUudHJpZ2dlclRvcmNoUmVtb3RlID0gZnVuY3Rpb24gKHRhZywgdG9yY2gpIHsKICAgIHJldHVybiByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk9ic2VydmFibGUiXS5jcmVhdGUoZnVuY3Rpb24gb25TdWJzY3JpcHRpb24ob2JzZXJ2ZXIpIHsKICAgICAgICB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh0YWcpLnRyaWdnZXIoInRvcmNoUmVtb3RlIiwgW3RvcmNoLCBmdW5jdGlvbiBmYWlsKCkgewogICAgICAgICAgICBvYnNlcnZlci5lcnJvci5hcHBseShvYnNlcnZlciwgYXJndW1lbnRzKTsKICAgICAgICB9LCBmdW5jdGlvbiBzdWNjZXNzKCkgewogICAgICAgICAgICBvYnNlcnZlci5uZXh0LmFwcGx5KG9ic2VydmVyLCBhcmd1bWVudHMpOwogICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpOwogICAgICAgIH1dKTsKICAgIH0pLnBpcGUoZXJyb3JIYW5kbGVyKS50b1Byb21pc2UoKTsKfTsKCl9zaW5nbGUudHJpZ2dlclpvb21SZW1vdGUgPSBmdW5jdGlvbiAodGFnLCBtdWx0aXBsZXMpIHsKICAgIHJldHVybiByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk9ic2VydmFibGUiXS5jcmVhdGUoZnVuY3Rpb24gb25TdWJzY3JpcHRpb24ob2JzZXJ2ZXIpIHsKICAgICAgICB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh0YWcpLnRyaWdnZXIoInpvb21SZW1vdGUiLCBbbXVsdGlwbGVzLCBmdW5jdGlvbiBmYWlsKCkgewogICAgICAgICAgICBvYnNlcnZlci5lcnJvci5hcHBseShvYnNlcnZlciwgYXJndW1lbnRzKTsKICAgICAgICB9LCBmdW5jdGlvbiBzdWNjZXNzKCkgewogICAgICAgICAgICBvYnNlcnZlci5uZXh0LmFwcGx5KG9ic2VydmVyLCBhcmd1bWVudHMpOwogICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpOwogICAgICAgIH1dKTsKICAgIH0pLnBpcGUoZXJyb3JIYW5kbGVyKS50b1Byb21pc2UoKTsKfTsKCl9zaW5nbGUudHJpZ2dlclN1YnNjcmliZSA9IGZ1bmN0aW9uICh0YWcsIHN1YlNWaWRlbywgc3ViU0F1ZGlvKSB7CiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkodGFnKS50cmlnZ2VyKCJzdWJzY3JpYmUiLCBbc3ViU1ZpZGVvLCBzdWJTQXVkaW8sIGZ1bmN0aW9uIGZhaWwoKSB7CiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yLmFwcGx5KG9ic2VydmVyLCBhcmd1bWVudHMpOwogICAgICAgIH0sIGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7CiAgICAgICAgICAgIG9ic2VydmVyLm5leHQuYXBwbHkob2JzZXJ2ZXIsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfV0pOwogICAgfSkucGlwZShlcnJvckhhbmRsZXIpLnRvUHJvbWlzZSgpOwp9OwoKX3NpbmdsZS50cmlnZ2VyUmVtb3RlQ29udHJvbCA9IGZ1bmN0aW9uICh0YWcsIG1pcnJvciwgb25EaXNDb250cm9sbGVkLCBvbkFjY2VwdCwgb25Ob3RBbGxvd1JlbW90ZUNvbnRyb2wsIG9uUmVtb3RlQ29udHJvbFRpbWVvdXQsIG9uUmVqZWN0LCBvbkJ1c3kpIHsKICAgIHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKHRhZykudHJpZ2dlcigicmVtb3RlQ29udHJvbCIsIFttaXJyb3IsIG9uRGlzQ29udHJvbGxlZCwgb25BY2NlcHQsIG9uTm90QWxsb3dSZW1vdGVDb250cm9sLCBvblJlbW90ZUNvbnRyb2xUaW1lb3V0LCBvblJlamVjdCwgb25CdXN5XSk7Cn07Cl9zaW5nbGUudHJpZ2dlckNhcHR1cmVWaWRlbyA9IGZ1bmN0aW9uICh0YWcsIHN0b3JlTG9jYWwsIGZpbGVuYW1lKSB7CiAgICByZXR1cm4gcnhqc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPYnNlcnZhYmxlIl0uY3JlYXRlKGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKG9ic2VydmVyKSB7CiAgICAgICAgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkodGFnKS50cmlnZ2VyKCJjYXB0dXJlVmlkZW8iLCBbZnVuY3Rpb24gc3VjY2VzcygpIHsKICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dC5hcHBseShvYnNlcnZlciwgYXJndW1lbnRzKTsKICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTsKICAgICAgICB9LCBzdG9yZUxvY2FsLCBmaWxlbmFtZV0pOwogICAgfSkucGlwZShlcnJvckhhbmRsZXIpLnRvUHJvbWlzZSgpOwp9OwoKdmFyIHNpbmdsZSA9IF9zaW5nbGU7CgovKioqLyB9KSwKLyogMzYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiT2JzZXJ2YWJsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9Db25uZWN0YWJsZU9ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfQ29ubmVjdGFibGVPYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkNvbm5lY3RhYmxlT2JzZXJ2YWJsZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2dyb3VwQnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjApOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkdyb3VwZWRPYnNlcnZhYmxlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2dyb3VwQnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siR3JvdXBlZE9ic2VydmFibGUiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3N5bWJvbF9vYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJvYnNlcnZhYmxlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfc3ltYm9sX29ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sib2JzZXJ2YWJsZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiU3ViamVjdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siU3ViamVjdCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfQmVoYXZpb3JTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJCZWhhdmlvclN1YmplY3QiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9CZWhhdmlvclN1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siQmVoYXZpb3JTdWJqZWN0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9SZXBsYXlTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJSZXBsYXlTdWJqZWN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfUmVwbGF5U3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fWyJSZXBsYXlTdWJqZWN0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9Bc3luY1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkFzeW5jU3ViamVjdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX0FzeW5jU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fWyJBc3luY1N1YmplY3QiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3NjaGVkdWxlcl9hc2FwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJhc2FwU2NoZWR1bGVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfc2NoZWR1bGVyX2FzYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1siYXNhcCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfc2NoZWR1bGVyX2FzeW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJhc3luY1NjaGVkdWxlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fWyJhc3luYyJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfc2NoZWR1bGVyX3F1ZXVlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Myk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicXVldWVTY2hlZHVsZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9zY2hlZHVsZXJfcXVldWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bInF1ZXVlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9zY2hlZHVsZXJfYW5pbWF0aW9uRnJhbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzExX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJhbmltYXRpb25GcmFtZVNjaGVkdWxlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX3NjaGVkdWxlcl9hbmltYXRpb25GcmFtZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTFfX1siYW5pbWF0aW9uRnJhbWUiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3NjaGVkdWxlcl9WaXJ0dWFsVGltZVNjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODgpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlZpcnR1YWxUaW1lU2NoZWR1bGVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfc2NoZWR1bGVyX1ZpcnR1YWxUaW1lU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMl9fWyJWaXJ0dWFsVGltZVNjaGVkdWxlciJdOyB9KTsKCi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiVmlydHVhbEFjdGlvbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX3NjaGVkdWxlcl9WaXJ0dWFsVGltZVNjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfX1siVmlydHVhbEFjdGlvbiJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiU2NoZWR1bGVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xM19fWyJTY2hlZHVsZXIiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlN1YnNjcmlwdGlvbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTRfX1siU3Vic2NyaXB0aW9uIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiU3Vic2NyaWJlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE1X19bIlN1YnNjcmliZXIiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX05vdGlmaWNhdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk5vdGlmaWNhdGlvbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX05vdGlmaWNhdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTZfX1siTm90aWZpY2F0aW9uIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF91dGlsX3BpcGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwaXBlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfdXRpbF9waXBlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xN19fWyJwaXBlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF91dGlsX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJub29wIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfdXRpbF9ub29wX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOF9fWyJub29wIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF91dGlsX2lkZW50aXR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaWRlbnRpdHkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF91dGlsX2lkZW50aXR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOV9fWyJpZGVudGl0eSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfdXRpbF9pc09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzIwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpc09ic2VydmFibGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF91dGlsX2lzT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjBfX1siaXNPYnNlcnZhYmxlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF91dGlsX0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF91dGlsX0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMV9fWyJBcmd1bWVudE91dE9mUmFuZ2VFcnJvciJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfdXRpbF9FbXB0eUVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiRW1wdHlFcnJvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX3V0aWxfRW1wdHlFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjJfX1siRW1wdHlFcnJvciJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjNfX1siT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3V0aWxfVW5zdWJzY3JpcHRpb25FcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlVuc3Vic2NyaXB0aW9uRXJyb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF91dGlsX1Vuc3Vic2NyaXB0aW9uRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI0X19bIlVuc3Vic2NyaXB0aW9uRXJyb3IiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3V0aWxfVGltZW91dEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiVGltZW91dEVycm9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfdXRpbF9UaW1lb3V0RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI1X19bIlRpbWVvdXRFcnJvciJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9iaW5kQ2FsbGJhY2tfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJiaW5kQ2FsbGJhY2siLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2JpbmRDYWxsYmFja19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjZfX1siYmluZENhbGxiYWNrIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2JpbmROb2RlQ2FsbGJhY2tfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJiaW5kTm9kZUNhbGxiYWNrIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9iaW5kTm9kZUNhbGxiYWNrX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yN19fWyJiaW5kTm9kZUNhbGxiYWNrIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2NvbWJpbmVMYXRlc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjb21iaW5lTGF0ZXN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9jb21iaW5lTGF0ZXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yOF9fWyJjb21iaW5lTGF0ZXN0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2NvbmNhdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjb25jYXQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2NvbmNhdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjlfX1siY29uY2F0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2RlZmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTgpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRlZmVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9kZWZlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzBfX1siZGVmZXIiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29ic2VydmFibGVfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMxX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJlbXB0eSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMxX19bImVtcHR5Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2ZvcmtKb2luX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTkpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZvcmtKb2luIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9mb3JrSm9pbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzJfX1siZm9ya0pvaW4iXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29ic2VydmFibGVfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJmcm9tIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9mcm9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zM19fWyJmcm9tIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2Zyb21FdmVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIwKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJmcm9tRXZlbnQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2Zyb21FdmVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzRfX1siZnJvbUV2ZW50Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2Zyb21FdmVudFBhdHRlcm5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZnJvbUV2ZW50UGF0dGVybiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfZnJvbUV2ZW50UGF0dGVybl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzVfX1siZnJvbUV2ZW50UGF0dGVybiJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9nZW5lcmF0ZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJnZW5lcmF0ZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfZ2VuZXJhdGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM2X19bImdlbmVyYXRlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2lpZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpaWYiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2lpZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzdfX1siaWlmIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX2ludGVydmFsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zOF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImludGVydmFsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9pbnRlcnZhbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzhfX1siaW50ZXJ2YWwiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29ic2VydmFibGVfbWVyZ2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibWVyZ2UiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX21lcmdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zOV9fWyJtZXJnZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9uZXZlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTI3KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJuZXZlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfbmV2ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQwX19bIm5ldmVyIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX29mX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80MV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAib2YiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX29mX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80MV9fWyJvZiJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9vbkVycm9yUmVzdW1lTmV4dF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTI4KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJvbkVycm9yUmVzdW1lTmV4dCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfb25FcnJvclJlc3VtZU5leHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQyX19bIm9uRXJyb3JSZXN1bWVOZXh0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX3BhaXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80M19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjkpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInBhaXJzIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9wYWlyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDNfX1sicGFpcnMiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29ic2VydmFibGVfcmFjZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJyYWNlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9yYWNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NF9fWyJyYWNlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX3JhbmdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzEpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJhbmdlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb2JzZXJ2YWJsZV9yYW5nZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDVfX1sicmFuZ2UiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29ic2VydmFibGVfdGhyb3dFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRocm93RXJyb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX3Rocm93RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ2X19bInRocm93RXJyb3IiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29ic2VydmFibGVfdGltZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGltZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX3RpbWVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80N19fWyJ0aW1lciJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb2JzZXJ2YWJsZV91c2luZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ1c2luZyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfdXNpbmdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ4X19bInVzaW5nIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vYnNlcnZhYmxlX3ppcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM0KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ6aXAiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vYnNlcnZhYmxlX3ppcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDlfX1siemlwIl07IH0pOwoKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJFTVBUWSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMxX19bIkVNUFRZIl07IH0pOwoKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJORVZFUiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29ic2VydmFibGVfbmV2ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQwX19bIk5FVkVSIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzUwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjb25maWciLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzUwX19bImNvbmZpZyJdOyB9KTsKCi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAKCgovKioqLyB9KSwKLyogMzcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk9ic2VydmFibGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIE9ic2VydmFibGU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfdG9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9zeW1ib2xfb2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9waXBlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX3RvU3Vic2NyaWJlcixfaW50ZXJuYWxfc3ltYm9sX29ic2VydmFibGUsX3V0aWxfcGlwZSxfY29uZmlnIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCnZhciBPYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmUpIHsKICAgICAgICB0aGlzLl9pc1NjYWxhciA9IGZhbHNlOwogICAgICAgIGlmIChzdWJzY3JpYmUpIHsKICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlOwogICAgICAgIH0KICAgIH0KICAgIE9ic2VydmFibGUucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHsKICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7CiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzOwogICAgICAgIG9ic2VydmFibGUub3BlcmF0b3IgPSBvcGVyYXRvcjsKICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTsKICAgIH07CiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkgewogICAgICAgIHZhciBvcGVyYXRvciA9IHRoaXMub3BlcmF0b3I7CiAgICAgICAgdmFyIHNpbmsgPSBPYmplY3QoX3V0aWxfdG9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInRvU3Vic2NyaWJlciJdKShvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTsKICAgICAgICBpZiAob3BlcmF0b3IpIHsKICAgICAgICAgICAgb3BlcmF0b3IuY2FsbChzaW5rLCB0aGlzLnNvdXJjZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBzaW5rLmFkZCh0aGlzLnNvdXJjZSB8fCAoX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJjb25maWciXS51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nICYmICFzaW5rLnN5bmNFcnJvclRocm93YWJsZSkgPwogICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlKHNpbmspIDoKICAgICAgICAgICAgICAgIHRoaXMuX3RyeVN1YnNjcmliZShzaW5rKSk7CiAgICAgICAgfQogICAgICAgIGlmIChfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImNvbmZpZyJdLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHsKICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7CiAgICAgICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3duKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gc2luazsKICAgIH07CiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHNpbmspIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKHNpbmspOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIGlmIChfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImNvbmZpZyJdLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHsKICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVmFsdWUgPSBlcnI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2luay5lcnJvcihlcnIpOwogICAgICAgIH0KICAgIH07CiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKG5leHQsIHByb21pc2VDdG9yKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTsKICAgICAgICByZXR1cm4gbmV3IHByb21pc2VDdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjsKICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBuZXh0KHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgcmVqZWN0LCByZXNvbHZlKTsKICAgICAgICB9KTsKICAgIH07CiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7CiAgICAgICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpOwogICAgfTsKICAgIE9ic2VydmFibGUucHJvdG90eXBlW19pbnRlcm5hbF9zeW1ib2xfb2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJvYnNlcnZhYmxlIl1dID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgfTsKICAgIE9ic2VydmFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG9wZXJhdGlvbnMgPSBbXTsKICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICBvcGVyYXRpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICAgICAgfQogICAgICAgIGlmIChvcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIE9iamVjdChfdXRpbF9waXBlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInBpcGVGcm9tQXJyYXkiXSkob3BlcmF0aW9ucykodGhpcyk7CiAgICB9OwogICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9Qcm9taXNlID0gZnVuY3Rpb24gKHByb21pc2VDdG9yKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTsKICAgICAgICByZXR1cm4gbmV3IHByb21pc2VDdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgdmFyIHZhbHVlOwogICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHZhbHVlID0geDsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9KTsKICAgICAgICB9KTsKICAgIH07CiAgICBPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmUpIHsKICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlKTsKICAgIH07CiAgICByZXR1cm4gT2JzZXJ2YWJsZTsKfSgpKTsKCmZ1bmN0aW9uIGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKSB7CiAgICBpZiAoIXByb21pc2VDdG9yKSB7CiAgICAgICAgcHJvbWlzZUN0b3IgPSBfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImNvbmZpZyJdLlByb21pc2UgfHwgUHJvbWlzZTsKICAgIH0KICAgIGlmICghcHJvbWlzZUN0b3IpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpOwogICAgfQogICAgcmV0dXJuIHByb21pc2VDdG9yOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDM4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0b1N1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRvU3Vic2NyaWJlcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3ltYm9sX3J4U3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyLF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9PYnNlcnZlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIHRvU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7CiAgICBpZiAobmV4dE9yT2JzZXJ2ZXIpIHsKICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgaW5zdGFuY2VvZiBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJTdWJzY3JpYmVyIl0pIHsKICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyOwogICAgICAgIH0KICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXJbX3N5bWJvbF9yeFN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1sicnhTdWJzY3JpYmVyIl1dKSB7CiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcltfc3ltYm9sX3J4U3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJyeFN1YnNjcmliZXIiXV0oKTsKICAgICAgICB9CiAgICB9CiAgICBpZiAoIW5leHRPck9ic2VydmVyICYmICFlcnJvciAmJiAhY29tcGxldGUpIHsKICAgICAgICByZXR1cm4gbmV3IF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIlN1YnNjcmliZXIiXShfT2JzZXJ2ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZW1wdHkiXSk7CiAgICB9CiAgICByZXR1cm4gbmV3IF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIlN1YnNjcmliZXIiXShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD10b1N1YnNjcmliZXIuanMubWFwCgoKLyoqKi8gfSksCi8qIDM5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJTdWJzY3JpYmVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTdWJzY3JpYmVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzRnVuY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3N5bWJvbF9yeFN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9ob3N0UmVwb3J0RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF91dGlsX2lzRnVuY3Rpb24sX09ic2VydmVyLF9TdWJzY3JpcHRpb24sX2ludGVybmFsX3N5bWJvbF9yeFN1YnNjcmliZXIsX2NvbmZpZyxfdXRpbF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKCgoKdmFyIFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU3Vic2NyaWJlcihkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5zeW5jRXJyb3JWYWx1ZSA9IG51bGw7CiAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3duID0gZmFsc2U7CiAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7CiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7CiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gX09ic2VydmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImVtcHR5Il07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgaWYgKCFkZXN0aW5hdGlvbk9yTmV4dCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gX09ic2VydmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImVtcHR5Il07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlc3RpbmF0aW9uT3JOZXh0ID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgIGlmIChpc1RydXN0ZWRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uT3JOZXh0KSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJ1c3RlZFN1YnNjcmliZXIgPSBkZXN0aW5hdGlvbk9yTmV4dFtfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJyeFN1YnNjcmliZXIiXV0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1c3RlZFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IHRydXN0ZWRTdWJzY3JpYmVyOwogICAgICAgICAgICAgICAgICAgICAgICB0cnVzdGVkU3Vic2NyaWJlci5hZGQoX3RoaXMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIoX3RoaXMsIGRlc3RpbmF0aW9uT3JOZXh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlOwogICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIoX3RoaXMsIGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFN1YnNjcmliZXIucHJvdG90eXBlW19pbnRlcm5hbF9zeW1ib2xfcnhTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bInJ4U3Vic2NyaWJlciJdXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07CiAgICBTdWJzY3JpYmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHsKICAgICAgICB2YXIgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7CiAgICAgICAgc3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTsKICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjsKICAgIH07CiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkgewogICAgICAgICAgICB0aGlzLl9uZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICB9OwogICAgU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkgewogICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7CiAgICAgICAgfQogICAgfTsKICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHsKICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlOwogICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpOwogICAgICAgIH0KICAgIH07CiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7CiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpOwogICAgfTsKICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTsKICAgIH07CiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgIH07CiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgIH07CiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzOwogICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7CiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7CiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7CiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50OwogICAgICAgIHRoaXMuX3BhcmVudHMgPSBfcGFyZW50czsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICByZXR1cm4gU3Vic2NyaWJlcjsKfShfU3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIlN1YnNjcmlwdGlvbiJdKSk7Cgp2YXIgU2FmZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShTYWZlU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNhZmVTdWJzY3JpYmVyKF9wYXJlbnRTdWJzY3JpYmVyLCBvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IF9wYXJlbnRTdWJzY3JpYmVyOwogICAgICAgIHZhciBuZXh0OwogICAgICAgIHZhciBjb250ZXh0ID0gX3RoaXM7CiAgICAgICAgaWYgKE9iamVjdChfdXRpbF9pc0Z1bmN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImlzRnVuY3Rpb24iXSkob2JzZXJ2ZXJPck5leHQpKSB7CiAgICAgICAgICAgIG5leHQgPSBvYnNlcnZlck9yTmV4dDsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAob2JzZXJ2ZXJPck5leHQpIHsKICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0Lm5leHQ7CiAgICAgICAgICAgIGVycm9yID0gb2JzZXJ2ZXJPck5leHQuZXJyb3I7CiAgICAgICAgICAgIGNvbXBsZXRlID0gb2JzZXJ2ZXJPck5leHQuY29tcGxldGU7CiAgICAgICAgICAgIGlmIChvYnNlcnZlck9yTmV4dCAhPT0gX09ic2VydmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImVtcHR5Il0pIHsKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBPYmplY3QuY3JlYXRlKG9ic2VydmVyT3JOZXh0KTsKICAgICAgICAgICAgICAgIGlmIChPYmplY3QoX3V0aWxfaXNGdW5jdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJpc0Z1bmN0aW9uIl0pKGNvbnRleHQudW5zdWJzY3JpYmUpKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkKGNvbnRleHQudW5zdWJzY3JpYmUuYmluZChjb250ZXh0KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb250ZXh0LnVuc3Vic2NyaWJlID0gX3RoaXMudW5zdWJzY3JpYmUuYmluZChfdGhpcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgX3RoaXMuX2NvbnRleHQgPSBjb250ZXh0OwogICAgICAgIF90aGlzLl9uZXh0ID0gbmV4dDsKICAgICAgICBfdGhpcy5fZXJyb3IgPSBlcnJvcjsKICAgICAgICBfdGhpcy5fY29tcGxldGUgPSBjb21wbGV0ZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQgJiYgdGhpcy5fbmV4dCkgewogICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyOwogICAgICAgICAgICBpZiAoIV9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siY29uZmlnIl0udXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX25leHQsIHZhbHVlKSkgewogICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7CiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7CiAgICAgICAgICAgIHZhciB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nID0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fWyJjb25maWciXS51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nOwogICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpIHsKICAgICAgICAgICAgICAgIGlmICghdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fZXJyb3IsIGVycik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX2Vycm9yLCBlcnIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICghX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgICBpZiAodXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykgewogICAgICAgICAgICAgICAgICAgIHRocm93IGVycjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIE9iamVjdChfdXRpbF9ob3N0UmVwb3J0RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1siaG9zdFJlcG9ydEVycm9yIl0pKGVycik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykgewogICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlID0gZXJyOwogICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93biA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBPYmplY3QoX3V0aWxfaG9zdFJlcG9ydEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bImhvc3RSZXBvcnRFcnJvciJdKShlcnIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHsKICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjsKICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBsZXRlKSB7CiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZENvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2NvbXBsZXRlLmNhbGwoX3RoaXMuX2NvbnRleHQpOyB9OwogICAgICAgICAgICAgICAgaWYgKCFfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bImNvbmZpZyJdLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHdyYXBwZWRDb21wbGV0ZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHdyYXBwZWRDb21wbGV0ZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yVW5zdWIgPSBmdW5jdGlvbiAoZm4sIHZhbHVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgICAgICAgICBpZiAoX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fWyJjb25maWciXS51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBPYmplY3QoX3V0aWxfaG9zdFJlcG9ydEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bImhvc3RSZXBvcnRFcnJvciJdKShlcnIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yU2V0RXJyb3IgPSBmdW5jdGlvbiAocGFyZW50LCBmbiwgdmFsdWUpIHsKICAgICAgICBpZiAoIV9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siY29uZmlnIl0udXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBjYWxsJyk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIGlmIChfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bImNvbmZpZyJdLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHsKICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JWYWx1ZSA9IGVycjsKICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JUaHJvd24gPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBPYmplY3QoX3V0aWxfaG9zdFJlcG9ydEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bImhvc3RSZXBvcnRFcnJvciJdKShlcnIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjsKICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDsKICAgICAgICB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyID0gbnVsbDsKICAgICAgICBfcGFyZW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpOwogICAgfTsKICAgIHJldHVybiBTYWZlU3Vic2NyaWJlcjsKfShTdWJzY3JpYmVyKSk7CmZ1bmN0aW9uIGlzVHJ1c3RlZFN1YnNjcmliZXIob2JqKSB7CiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgU3Vic2NyaWJlciB8fCAoJ3N5bmNFcnJvclRocm93YWJsZScgaW4gb2JqICYmIG9ialtfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJyeFN1YnNjcmliZXIiXV0pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmliZXIuanMubWFwCgoKLyoqKi8gfSksCi8qIDQwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJfX2V4dGVuZHMiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fZXh0ZW5kczsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fYXNzaWduIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX2Fzc2lnbjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fcmVzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19yZXN0OyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiX19kZWNvcmF0ZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19kZWNvcmF0ZTsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fcGFyYW0iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fcGFyYW07IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJfX21ldGFkYXRhIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX21ldGFkYXRhOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiX19hd2FpdGVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX2F3YWl0ZXI7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJfX2dlbmVyYXRvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19nZW5lcmF0b3I7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJfX2V4cG9ydFN0YXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fZXhwb3J0U3RhcjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fdmFsdWVzIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX3ZhbHVlczsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fcmVhZCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19yZWFkOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiX19zcHJlYWQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fc3ByZWFkOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiX19hd2FpdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19hd2FpdDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fYXN5bmNHZW5lcmF0b3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9fYXN5bmNHZW5lcmF0b3I7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJfX2FzeW5jRGVsZWdhdG9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX2FzeW5jRGVsZWdhdG9yOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiX19hc3luY1ZhbHVlcyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19hc3luY1ZhbHVlczsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9fbWFrZVRlbXBsYXRlT2JqZWN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX21ha2VUZW1wbGF0ZU9iamVjdDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIl9faW1wb3J0U3RhciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX19pbXBvcnRTdGFyOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiX19pbXBvcnREZWZhdWx0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfX2ltcG9ydERlZmF1bHQ7IH0pOwovKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UKdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUKTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRApXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLApNRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULgoKU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zCmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8KLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi8KCnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikgewogICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwp9OwoKZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHsKICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKfQoKdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7CiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkgewogICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldOwogICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH0KICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfX3Jlc3QocywgZSkgewogICAgdmFyIHQgPSB7fTsKICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKQogICAgICAgIHRbcF0gPSBzW3BdOwogICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gImZ1bmN0aW9uIikKICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCkKICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07CiAgICByZXR1cm4gdDsKfQoKZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykgewogICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDsKICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09ICJmdW5jdGlvbiIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTsKICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7CiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByOwp9CgpmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9Cn0KCmZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHsKICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09ICJmdW5jdGlvbiIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTsKfQoKZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgewogICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfQogICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yWyJ0aHJvdyJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQogICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTsKICAgIH0pOwp9CgpmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7CiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnOwogICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksICJ0aHJvdyI6IHZlcmIoMSksICJyZXR1cm4iOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7CiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH0KICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHsKICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpOwogICAgICAgIHdoaWxlIChfKSB0cnkgewogICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5WyJyZXR1cm4iXSA6IG9wWzBdID8geVsidGhyb3ciXSB8fCAoKHQgPSB5WyJyZXR1cm4iXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7CiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTsKICAgICAgICAgICAgc3dpdGNoIChvcFswXSkgewogICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlOwogICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH0KICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfQogICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfQogICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH0KICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTsKICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9CiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07CiAgICB9Cn0KCmZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7CiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07Cn0KCmZ1bmN0aW9uIF9fdmFsdWVzKG8pIHsKICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwOwogICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CiAgICByZXR1cm4gewogICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwogICAgICAgIH0KICAgIH07Cn0KCmZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7CiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdOwogICAgaWYgKCFtKSByZXR1cm4gbzsKICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlOwogICAgdHJ5IHsKICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTsKICAgIH0KICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfQogICAgZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbInJldHVybiJdKSkgbS5jYWxsKGkpOwogICAgICAgIH0KICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH0KICAgIH0KICAgIHJldHVybiBhcjsKfQoKZnVuY3Rpb24gX19zcHJlYWQoKSB7CiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykKICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7CiAgICByZXR1cm4gYXI7Cn0KCmZ1bmN0aW9uIF9fYXdhaXQodikgewogICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7Cn0KCmZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7CiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107CiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKCJuZXh0IiksIHZlcmIoInRocm93IiksIHZlcmIoInJldHVybiIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7CiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH0KICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH0KICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfQogICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoIm5leHQiLCB2YWx1ZSk7IH0KICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoInRocm93IiwgdmFsdWUpOyB9CiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9Cn0KCmZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3IobykgewogICAgdmFyIGksIHA7CiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKCJuZXh0IiksIHZlcmIoInRocm93IiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoInJldHVybiIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpOwogICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gInJldHVybiIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH0KfQoKZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7CiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7CiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSAiZnVuY3Rpb24iID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKCJuZXh0IiksIHZlcmIoInRocm93IiksIHZlcmIoInJldHVybiIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpOwogICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfQogICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfQp9CgpmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykgewogICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCAicmF3IiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9CiAgICByZXR1cm4gY29va2VkOwp9OwoKZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkgewogICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDsKICAgIHZhciByZXN1bHQgPSB7fTsKICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107CiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDsKICAgIHJldHVybiByZXN1bHQ7Cn0KCmZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHsKICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07Cn0KCgovKioqLyB9KSwKLyogNDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlzRnVuY3Rpb24iLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzRnVuY3Rpb247IH0pOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovCmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkgewogICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwCgoKLyoqKi8gfSksCi8qIDQyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJlbXB0eSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZW1wdHk7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9ob3N0UmVwb3J0RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9jb25maWcsX3V0aWxfaG9zdFJlcG9ydEVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi8KCgp2YXIgZW1wdHkgPSB7CiAgICBjbG9zZWQ6IHRydWUsCiAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHsgfSwKICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgaWYgKF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siY29uZmlnIl0udXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykgewogICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBPYmplY3QoX3V0aWxfaG9zdFJlcG9ydEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImhvc3RSZXBvcnRFcnJvciJdKShlcnIpOwogICAgICAgIH0KICAgIH0sCiAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgeyB9Cn07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiA0MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY29uZmlnIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb25maWc7IH0pOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovCnZhciBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MgPSBmYWxzZTsKdmFyIGNvbmZpZyA9IHsKICAgIFByb21pc2U6IHVuZGVmaW5lZCwKICAgIHNldCB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKHZhbHVlKSB7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgIHZhciBlcnJvciA9IC8qQF9fUFVSRV9fKi8gbmV3IEVycm9yKCk7CiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS53YXJuKCdERVBSRUNBVEVEISBSeEpTIHdhcyBzZXQgdG8gdXNlIGRlcHJlY2F0ZWQgc3luY2hyb25vdXMgZXJyb3IgaGFuZGxpbmcgYmVoYXZpb3IgYnkgY29kZSBhdDogXG4nICsgZXJyb3Iuc3RhY2spOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MpIHsKICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmxvZygnUnhKUzogQmFjayB0byBhIGJldHRlciBlcnJvciBiZWhhdmlvci4gVGhhbmsgeW91LiA8MycpOwogICAgICAgIH0KICAgICAgICBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MgPSB2YWx1ZTsKICAgIH0sCiAgICBnZXQgdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZygpIHsKICAgICAgICByZXR1cm4gX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzOwogICAgfSwKfTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLmpzLm1hcAoKCi8qKiovIH0pLAovKiA0NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaG9zdFJlcG9ydEVycm9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBob3N0UmVwb3J0RXJyb3I7IH0pOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovCmZ1bmN0aW9uIGhvc3RSZXBvcnRFcnJvcihlcnIpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvc3RSZXBvcnRFcnJvci5qcy5tYXAKCgovKioqLyB9KSwKLyogNDUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlN1YnNjcmlwdGlvbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3Vic2NyaXB0aW9uOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNGdW5jdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9VbnN1YnNjcmlwdGlvbkVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF9pc0FycmF5LF91dGlsX2lzT2JqZWN0LF91dGlsX2lzRnVuY3Rpb24sX3V0aWxfdHJ5Q2F0Y2gsX3V0aWxfZXJyb3JPYmplY3QsX3V0aWxfVW5zdWJzY3JpcHRpb25FcnJvciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCnZhciBTdWJzY3JpcHRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpIHsKICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7CiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7CiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7CiAgICAgICAgaWYgKHVuc3Vic2NyaWJlKSB7CiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmU7CiAgICAgICAgfQogICAgfQogICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaGFzRXJyb3JzID0gZmFsc2U7CiAgICAgICAgdmFyIGVycm9yczsKICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cywgX3Vuc3Vic2NyaWJlID0gX2EuX3Vuc3Vic2NyaWJlLCBfc3Vic2NyaXB0aW9ucyA9IF9hLl9zdWJzY3JpcHRpb25zOwogICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTsKICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsOwogICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsOwogICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBudWxsOwogICAgICAgIHZhciBpbmRleCA9IC0xOwogICAgICAgIHZhciBsZW4gPSBfcGFyZW50cyA/IF9wYXJlbnRzLmxlbmd0aCA6IDA7CiAgICAgICAgd2hpbGUgKF9wYXJlbnQpIHsKICAgICAgICAgICAgX3BhcmVudC5yZW1vdmUodGhpcyk7CiAgICAgICAgICAgIF9wYXJlbnQgPSArK2luZGV4IDwgbGVuICYmIF9wYXJlbnRzW2luZGV4XSB8fCBudWxsOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0KF91dGlsX2lzRnVuY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siaXNGdW5jdGlvbiJdKShfdW5zdWJzY3JpYmUpKSB7CiAgICAgICAgICAgIHZhciB0cmlhbCA9IE9iamVjdChfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJ0cnlDYXRjaCJdKShfdW5zdWJzY3JpYmUpLmNhbGwodGhpcyk7CiAgICAgICAgICAgIGlmICh0cmlhbCA9PT0gX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siZXJyb3JPYmplY3QiXSkgewogICAgICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyB8fCAoX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siZXJyb3JPYmplY3QiXS5lIGluc3RhbmNlb2YgX3V0aWxfVW5zdWJzY3JpcHRpb25FcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fWyJVbnN1YnNjcmlwdGlvbkVycm9yIl0gPwogICAgICAgICAgICAgICAgICAgIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJlcnJvck9iamVjdCJdLmUuZXJyb3JzKSA6IFtfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJlcnJvck9iamVjdCJdLmVdKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0KF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siaXNBcnJheSJdKShfc3Vic2NyaXB0aW9ucykpIHsKICAgICAgICAgICAgaW5kZXggPSAtMTsKICAgICAgICAgICAgbGVuID0gX3N1YnNjcmlwdGlvbnMubGVuZ3RoOwogICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikgewogICAgICAgICAgICAgICAgdmFyIHN1YiA9IF9zdWJzY3JpcHRpb25zW2luZGV4XTsKICAgICAgICAgICAgICAgIGlmIChPYmplY3QoX3V0aWxfaXNPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siaXNPYmplY3QiXSkoc3ViKSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0cmlhbCA9IE9iamVjdChfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJ0cnlDYXRjaCJdKShzdWIudW5zdWJzY3JpYmUpLmNhbGwoc3ViKTsKICAgICAgICAgICAgICAgICAgICBpZiAodHJpYWwgPT09IF91dGlsX2Vycm9yT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImVycm9yT2JqZWN0Il0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siZXJyb3JPYmplY3QiXS5lOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgX3V0aWxfVW5zdWJzY3JpcHRpb25FcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fWyJVbnN1YnNjcmlwdGlvbkVycm9yIl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGVyci5lcnJvcnMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGhhc0Vycm9ycykgewogICAgICAgICAgICB0aHJvdyBuZXcgX3V0aWxfVW5zdWJzY3JpcHRpb25FcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fWyJVbnN1YnNjcmlwdGlvbkVycm9yIl0oZXJyb3JzKTsKICAgICAgICB9CiAgICB9OwogICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHsKICAgICAgICBpZiAoIXRlYXJkb3duIHx8ICh0ZWFyZG93biA9PT0gU3Vic2NyaXB0aW9uLkVNUFRZKSkgewogICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZOwogICAgICAgIH0KICAgICAgICBpZiAodGVhcmRvd24gPT09IHRoaXMpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0ZWFyZG93bjsKICAgICAgICBzd2l0Y2ggKHR5cGVvZiB0ZWFyZG93bikgewogICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6CiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRlYXJkb3duKTsKICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzoKICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uY2xvc2VkIHx8IHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN1YnNjcmlwdGlvbi5fYWRkUGFyZW50ICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IHN1YnNjcmlwdGlvbjsKICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLl9zdWJzY3JpcHRpb25zID0gW3RtcF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkIHRlYXJkb3duICcgKyB0ZWFyZG93biArICcgYWRkZWQgdG8gU3Vic2NyaXB0aW9uLicpOwogICAgICAgIH0KICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnMgfHwgKHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBbXSk7CiAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7CiAgICAgICAgc3Vic2NyaXB0aW9uLl9hZGRQYXJlbnQodGhpcyk7CiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjsKICAgIH07CiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHsKICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7CiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHsKICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbkluZGV4ID0gc3Vic2NyaXB0aW9ucy5pbmRleE9mKHN1YnNjcmlwdGlvbik7CiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25JbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKHN1YnNjcmlwdGlvbkluZGV4LCAxKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9hZGRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7CiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHM7CiAgICAgICAgaWYgKCFfcGFyZW50IHx8IF9wYXJlbnQgPT09IHBhcmVudCkgewogICAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKCFfcGFyZW50cykgewogICAgICAgICAgICB0aGlzLl9wYXJlbnRzID0gW3BhcmVudF07CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKF9wYXJlbnRzLmluZGV4T2YocGFyZW50KSA9PT0gLTEpIHsKICAgICAgICAgICAgX3BhcmVudHMucHVzaChwYXJlbnQpOwogICAgICAgIH0KICAgIH07CiAgICBTdWJzY3JpcHRpb24uRU1QVFkgPSAoZnVuY3Rpb24gKGVtcHR5KSB7CiAgICAgICAgZW1wdHkuY2xvc2VkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZW1wdHk7CiAgICB9KG5ldyBTdWJzY3JpcHRpb24oKSkpOwogICAgcmV0dXJuIFN1YnNjcmlwdGlvbjsKfSgpKTsKCmZ1bmN0aW9uIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvcnMpIHsKICAgIHJldHVybiBlcnJvcnMucmVkdWNlKGZ1bmN0aW9uIChlcnJzLCBlcnIpIHsgcmV0dXJuIGVycnMuY29uY2F0KChlcnIgaW5zdGFuY2VvZiBfdXRpbF9VbnN1YnNjcmlwdGlvbkVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bIlVuc3Vic2NyaXB0aW9uRXJyb3IiXSkgPyBlcnIuZXJyb3JzIDogZXJyKTsgfSwgW10pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmlwdGlvbi5qcy5tYXAKCgovKioqLyB9KSwKLyogNDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlzQXJyYXkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzQXJyYXk7IH0pOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovCnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggJiYgdHlwZW9mIHgubGVuZ3RoID09PSAnbnVtYmVyJzsgfSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXkuanMubWFwCgoKLyoqKi8gfSksCi8qIDQ3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpc09iamVjdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNPYmplY3Q7IH0pOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovCmZ1bmN0aW9uIGlzT2JqZWN0KHgpIHsKICAgIHJldHVybiB4ICE9IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzT2JqZWN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiA0OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidHJ5Q2F0Y2giLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRyeUNhdGNoOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX2Vycm9yT2JqZWN0IFBVUkVfSU1QT1JUU19FTkQgKi8KCnZhciB0cnlDYXRjaFRhcmdldDsKZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHsKICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIHRyeUNhdGNoVGFyZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgICBjYXRjaCAoZSkgewogICAgICAgIF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJlcnJvck9iamVjdCJdLmUgPSBlOwogICAgICAgIHJldHVybiBfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZXJyb3JPYmplY3QiXTsKICAgIH0KfQpmdW5jdGlvbiB0cnlDYXRjaChmbikgewogICAgdHJ5Q2F0Y2hUYXJnZXQgPSBmbjsKICAgIHJldHVybiB0cnlDYXRjaGVyOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyeUNhdGNoLmpzLm1hcAoKCi8qKiovIH0pLAovKiA0OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZXJyb3JPYmplY3QiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGVycm9yT2JqZWN0OyB9KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqLwp2YXIgZXJyb3JPYmplY3QgPSB7IGU6IHt9IH07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9yT2JqZWN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiA1MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiVW5zdWJzY3JpcHRpb25FcnJvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gVW5zdWJzY3JpcHRpb25FcnJvcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIgUFVSRV9JTVBPUlRTX0VORCAqLwoKdmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShVbnN1YnNjcmlwdGlvbkVycm9yLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVW5zdWJzY3JpcHRpb25FcnJvcihlcnJvcnMpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvcnMgPwogICAgICAgICAgICBlcnJvcnMubGVuZ3RoICsgIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxuICAiICsgZXJyb3JzLm1hcChmdW5jdGlvbiAoZXJyLCBpKSB7IHJldHVybiBpICsgMSArICIpICIgKyBlcnIudG9TdHJpbmcoKTsgfSkuam9pbignXG4gICcpIDogJycpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuZXJyb3JzID0gZXJyb3JzOwogICAgICAgIF90aGlzLm5hbWUgPSAnVW5zdWJzY3JpcHRpb25FcnJvcic7CiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBVbnN1YnNjcmlwdGlvbkVycm9yLnByb3RvdHlwZSk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgcmV0dXJuIFVuc3Vic2NyaXB0aW9uRXJyb3I7Cn0oRXJyb3IpKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuc3Vic2NyaXB0aW9uRXJyb3IuanMubWFwCgoKLyoqKi8gfSksCi8qIDUxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJyeFN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJ4U3Vic2NyaWJlcjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIiQkcnhTdWJzY3JpYmVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiAkJHJ4U3Vic2NyaWJlcjsgfSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KdmFyIHJ4U3Vic2NyaWJlciA9ICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nKQogICAgPyAvKkBfX1BVUkVfXyovIFN5bWJvbC5mb3IoJ3J4U3Vic2NyaWJlcicpCiAgICA6ICdAQHJ4U3Vic2NyaWJlcic7CnZhciAkJHJ4U3Vic2NyaWJlciA9IHJ4U3Vic2NyaWJlcjsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnhTdWJzY3JpYmVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiA1MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAib2JzZXJ2YWJsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gb2JzZXJ2YWJsZTsgfSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KdmFyIG9ic2VydmFibGUgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlIHx8ICdAQG9ic2VydmFibGUnOwovLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZhYmxlLmpzLm1hcAoKCi8qKiovIH0pLAovKiA1MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicGlwZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGlwZTsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInBpcGVGcm9tQXJyYXkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHBpcGVGcm9tQXJyYXk7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9ub29wIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIHBpcGUoKSB7CiAgICB2YXIgZm5zID0gW107CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIGZuc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgfQogICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkoZm5zKTsKfQpmdW5jdGlvbiBwaXBlRnJvbUFycmF5KGZucykgewogICAgaWYgKCFmbnMpIHsKICAgICAgICByZXR1cm4gX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm9vcCJdOwogICAgfQogICAgaWYgKGZucy5sZW5ndGggPT09IDEpIHsKICAgICAgICByZXR1cm4gZm5zWzBdOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIHBpcGVkKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIGZucy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGZuKSB7IHJldHVybiBmbihwcmV2KTsgfSwgaW5wdXQpOwogICAgfTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1waXBlLmpzLm1hcAoKCi8qKiovIH0pLAovKiA1NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibm9vcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9vcDsgfSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KZnVuY3Rpb24gbm9vcCgpIHsgfQovLyMgc291cmNlTWFwcGluZ1VSTD1ub29wLmpzLm1hcAoKCi8qKiovIH0pLAovKiA1NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQ29ubmVjdGFibGVPYnNlcnZhYmxlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBDb25uZWN0YWJsZU9ic2VydmFibGU7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjb25uZWN0YWJsZU9ic2VydmFibGVEZXNjcmlwdG9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb25uZWN0YWJsZU9ic2VydmFibGVEZXNjcmlwdG9yOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29wZXJhdG9yc19yZWZDb3VudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YmplY3QsX09ic2VydmFibGUsX1N1YnNjcmliZXIsX1N1YnNjcmlwdGlvbixfb3BlcmF0b3JzX3JlZkNvdW50IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgoKdmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKENvbm5lY3RhYmxlT2JzZXJ2YWJsZSwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIENvbm5lY3RhYmxlT2JzZXJ2YWJsZShzb3VyY2UsIHN1YmplY3RGYWN0b3J5KSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgX3RoaXMuc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0RmFjdG9yeTsKICAgICAgICBfdGhpcy5fcmVmQ291bnQgPSAwOwogICAgICAgIF90aGlzLl9pc0NvbXBsZXRlID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXRTdWJqZWN0KCkuc3Vic2NyaWJlKHN1YnNjcmliZXIpOwogICAgfTsKICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ2V0U3ViamVjdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuX3N1YmplY3Q7CiAgICAgICAgaWYgKCFzdWJqZWN0IHx8IHN1YmplY3QuaXNTdG9wcGVkKSB7CiAgICAgICAgICAgIHRoaXMuX3N1YmplY3QgPSB0aGlzLnN1YmplY3RGYWN0b3J5KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLl9zdWJqZWN0OwogICAgfTsKICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgY29ubmVjdGlvbiA9IHRoaXMuX2Nvbm5lY3Rpb247CiAgICAgICAgaWYgKCFjb25uZWN0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuX2lzQ29tcGxldGUgPSBmYWxzZTsKICAgICAgICAgICAgY29ubmVjdGlvbiA9IHRoaXMuX2Nvbm5lY3Rpb24gPSBuZXcgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJTdWJzY3JpcHRpb24iXSgpOwogICAgICAgICAgICBjb25uZWN0aW9uLmFkZCh0aGlzLnNvdXJjZQogICAgICAgICAgICAgICAgLnN1YnNjcmliZShuZXcgQ29ubmVjdGFibGVTdWJzY3JpYmVyKHRoaXMuZ2V0U3ViamVjdCgpLCB0aGlzKSkpOwogICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5jbG9zZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24gPSBudWxsOwogICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siU3Vic2NyaXB0aW9uIl0uRU1QVFk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uID0gY29ubmVjdGlvbjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gY29ubmVjdGlvbjsKICAgIH07CiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLnJlZkNvdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBPYmplY3QoX29wZXJhdG9yc19yZWZDb3VudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fWyJyZWZDb3VudCJdKSgpKHRoaXMpOwogICAgfTsKICAgIHJldHVybiBDb25uZWN0YWJsZU9ic2VydmFibGU7Cn0oX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siT2JzZXJ2YWJsZSJdKSk7Cgp2YXIgY29ubmVjdGFibGVQcm90byA9IENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGU7CnZhciBjb25uZWN0YWJsZU9ic2VydmFibGVEZXNjcmlwdG9yID0gewogICAgb3BlcmF0b3I6IHsgdmFsdWU6IG51bGwgfSwKICAgIF9yZWZDb3VudDogeyB2YWx1ZTogMCwgd3JpdGFibGU6IHRydWUgfSwKICAgIF9zdWJqZWN0OiB7IHZhbHVlOiBudWxsLCB3cml0YWJsZTogdHJ1ZSB9LAogICAgX2Nvbm5lY3Rpb246IHsgdmFsdWU6IG51bGwsIHdyaXRhYmxlOiB0cnVlIH0sCiAgICBfc3Vic2NyaWJlOiB7IHZhbHVlOiBjb25uZWN0YWJsZVByb3RvLl9zdWJzY3JpYmUgfSwKICAgIF9pc0NvbXBsZXRlOiB7IHZhbHVlOiBjb25uZWN0YWJsZVByb3RvLl9pc0NvbXBsZXRlLCB3cml0YWJsZTogdHJ1ZSB9LAogICAgZ2V0U3ViamVjdDogeyB2YWx1ZTogY29ubmVjdGFibGVQcm90by5nZXRTdWJqZWN0IH0sCiAgICBjb25uZWN0OiB7IHZhbHVlOiBjb25uZWN0YWJsZVByb3RvLmNvbm5lY3QgfSwKICAgIHJlZkNvdW50OiB7IHZhbHVlOiBjb25uZWN0YWJsZVByb3RvLnJlZkNvdW50IH0KfTsKdmFyIENvbm5lY3RhYmxlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKENvbm5lY3RhYmxlU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIENvbm5lY3RhYmxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY29ubmVjdGFibGUpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5jb25uZWN0YWJsZSA9IGNvbm5lY3RhYmxlOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIENvbm5lY3RhYmxlU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlKCk7CiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLCBlcnIpOwogICAgfTsKICAgIENvbm5lY3RhYmxlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuY29ubmVjdGFibGUuX2lzQ29tcGxldGUgPSB0cnVlOwogICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlKCk7CiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTsKICAgIH07CiAgICBDb25uZWN0YWJsZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgY29ubmVjdGFibGUgPSB0aGlzLmNvbm5lY3RhYmxlOwogICAgICAgIGlmIChjb25uZWN0YWJsZSkgewogICAgICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gbnVsbDsKICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSBjb25uZWN0YWJsZS5fY29ubmVjdGlvbjsKICAgICAgICAgICAgY29ubmVjdGFibGUuX3JlZkNvdW50ID0gMDsKICAgICAgICAgICAgY29ubmVjdGFibGUuX3N1YmplY3QgPSBudWxsOwogICAgICAgICAgICBjb25uZWN0YWJsZS5fY29ubmVjdGlvbiA9IG51bGw7CiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uKSB7CiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIENvbm5lY3RhYmxlU3Vic2NyaWJlcjsKfShfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJqZWN0U3Vic2NyaWJlciJdKSk7CnZhciBSZWZDb3VudE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gUmVmQ291bnRPcGVyYXRvcihjb25uZWN0YWJsZSkgewogICAgICAgIHRoaXMuY29ubmVjdGFibGUgPSBjb25uZWN0YWJsZTsKICAgIH0KICAgIFJlZkNvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5jb25uZWN0YWJsZTsKICAgICAgICBjb25uZWN0YWJsZS5fcmVmQ291bnQrKzsKICAgICAgICB2YXIgcmVmQ291bnRlciA9IG5ldyBSZWZDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgY29ubmVjdGFibGUpOwogICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBzb3VyY2Uuc3Vic2NyaWJlKHJlZkNvdW50ZXIpOwogICAgICAgIGlmICghcmVmQ291bnRlci5jbG9zZWQpIHsKICAgICAgICAgICAgcmVmQ291bnRlci5jb25uZWN0aW9uID0gY29ubmVjdGFibGUuY29ubmVjdCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOwogICAgfTsKICAgIHJldHVybiBSZWZDb3VudE9wZXJhdG9yOwp9KCkpOwp2YXIgUmVmQ291bnRTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oUmVmQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUmVmQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb25uZWN0YWJsZSkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5jb25uZWN0YWJsZTsKICAgICAgICBpZiAoIWNvbm5lY3RhYmxlKSB7CiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IG51bGw7CiAgICAgICAgdmFyIHJlZkNvdW50ID0gY29ubmVjdGFibGUuX3JlZkNvdW50OwogICAgICAgIGlmIChyZWZDb3VudCA8PSAwKSB7CiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29ubmVjdGFibGUuX3JlZkNvdW50ID0gcmVmQ291bnQgLSAxOwogICAgICAgIGlmIChyZWZDb3VudCA+IDEpIHsKICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjsKICAgICAgICB2YXIgc2hhcmVkQ29ubmVjdGlvbiA9IGNvbm5lY3RhYmxlLl9jb25uZWN0aW9uOwogICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7CiAgICAgICAgaWYgKHNoYXJlZENvbm5lY3Rpb24gJiYgKCFjb25uZWN0aW9uIHx8IHNoYXJlZENvbm5lY3Rpb24gPT09IGNvbm5lY3Rpb24pKSB7CiAgICAgICAgICAgIHNoYXJlZENvbm5lY3Rpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFJlZkNvdW50U3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ubmVjdGFibGVPYnNlcnZhYmxlLmpzLm1hcAoKCi8qKiovIH0pLAovKiA1NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiU3ViamVjdFN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1YmplY3RTdWJzY3JpYmVyOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiU3ViamVjdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU3ViamVjdDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkFub255bW91c1N1YmplY3QiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFub255bW91c1N1YmplY3Q7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3ViamVjdFN1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX09ic2VydmFibGUsX1N1YnNjcmliZXIsX1N1YnNjcmlwdGlvbixfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcixfU3ViamVjdFN1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCgp2YXIgU3ViamVjdFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShTdWJqZWN0U3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICByZXR1cm4gU3ViamVjdFN1YnNjcmliZXI7Cn0oX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siU3Vic2NyaWJlciJdKSk7Cgp2YXIgU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFN1YmplY3QsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTdWJqZWN0KCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMub2JzZXJ2ZXJzID0gW107CiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7CiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7CiAgICAgICAgX3RoaXMuaGFzRXJyb3IgPSBmYWxzZTsKICAgICAgICBfdGhpcy50aHJvd25FcnJvciA9IG51bGw7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU3ViamVjdC5wcm90b3R5cGVbX2ludGVybmFsX3N5bWJvbF9yeFN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1sicnhTdWJzY3JpYmVyIl1dID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuZXcgU3ViamVjdFN1YnNjcmliZXIodGhpcyk7CiAgICB9OwogICAgU3ViamVjdC5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikgewogICAgICAgIHZhciBzdWJqZWN0ID0gbmV3IEFub255bW91c1N1YmplY3QodGhpcywgdGhpcyk7CiAgICAgICAgc3ViamVjdC5vcGVyYXRvciA9IG9wZXJhdG9yOwogICAgICAgIHJldHVybiBzdWJqZWN0OwogICAgfTsKICAgIFN1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIl0oKTsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkgewogICAgICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7CiAgICAgICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoOwogICAgICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb3B5W2ldLm5leHQodmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFN1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIGlmICh0aGlzLmNsb3NlZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgX3V0aWxfT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IiXSgpOwogICAgICAgIH0KICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLnRocm93bkVycm9yID0gZXJyOwogICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTsKICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7CiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7CiAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIGNvcHlbaV0uZXJyb3IoZXJyKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDsKICAgIH07CiAgICBTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIl0oKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlOwogICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVyczsKICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDsKICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgY29weVtpXS5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwOwogICAgfTsKICAgIFN1YmplY3QucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7CiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsOwogICAgfTsKICAgIFN1YmplY3QucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIGlmICh0aGlzLmNsb3NlZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgX3V0aWxfT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IiXSgpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3RyeVN1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpOwogICAgICAgIH0KICAgIH07CiAgICBTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIl0oKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNFcnJvcikgewogICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHRoaXMudGhyb3duRXJyb3IpOwogICAgICAgICAgICByZXR1cm4gX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJTdWJzY3JpcHRpb24iXS5FTVBUWTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodGhpcy5pc1N0b3BwZWQpIHsKICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpOwogICAgICAgICAgICByZXR1cm4gX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJTdWJzY3JpcHRpb24iXS5FTVBUWTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc3Vic2NyaWJlcik7CiAgICAgICAgICAgIHJldHVybiBuZXcgX1N1YmplY3RTdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siU3ViamVjdFN1YnNjcmlwdGlvbiJdKHRoaXMsIHN1YnNjcmliZXIpOwogICAgICAgIH0KICAgIH07CiAgICBTdWJqZWN0LnByb3RvdHlwZS5hc09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT2JzZXJ2YWJsZSJdKCk7CiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzOwogICAgICAgIHJldHVybiBvYnNlcnZhYmxlOwogICAgfTsKICAgIFN1YmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gbmV3IEFub255bW91c1N1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSk7CiAgICB9OwogICAgcmV0dXJuIFN1YmplY3Q7Cn0oX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT2JzZXJ2YWJsZSJdKSk7Cgp2YXIgQW5vbnltb3VzU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEFub255bW91c1N1YmplY3QsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBBbm9ueW1vdXNTdWJqZWN0KGRlc3RpbmF0aW9uLCBzb3VyY2UpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247CiAgICAgICAgX3RoaXMuc291cmNlID0gc291cmNlOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uOwogICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5uZXh0KSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uOwogICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5lcnJvcikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICAgICAgfQogICAgfTsKICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLmNvbXBsZXRlKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgICAgICB9CiAgICB9OwogICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlOwogICAgICAgIGlmIChzb3VyY2UpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBfU3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIlN1YnNjcmlwdGlvbiJdLkVNUFRZOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gQW5vbnltb3VzU3ViamVjdDsKfShTdWJqZWN0KSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1TdWJqZWN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiA1NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYiBQVVJFX0lNUE9SVFNfRU5EICovCgp2YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShPYmplY3RVbnN1YnNjcmliZWRFcnJvciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdvYmplY3QgdW5zdWJzY3JpYmVkJykgfHwgdGhpczsKICAgICAgICBfdGhpcy5uYW1lID0gJ09iamVjdFVuc3Vic2NyaWJlZEVycm9yJzsKICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yLnByb3RvdHlwZSk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgcmV0dXJuIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yOwp9KEVycm9yKSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1PYmplY3RVbnN1YnNjcmliZWRFcnJvci5qcy5tYXAKCgovKioqLyB9KSwKLyogNTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlN1YmplY3RTdWJzY3JpcHRpb24iLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1YmplY3RTdWJzY3JpcHRpb247IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovCgoKdmFyIFN1YmplY3RTdWJzY3JpcHRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShTdWJqZWN0U3Vic2NyaXB0aW9uLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU3ViamVjdFN1YnNjcmlwdGlvbihzdWJqZWN0LCBzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5zdWJqZWN0ID0gc3ViamVjdDsKICAgICAgICBfdGhpcy5zdWJzY3JpYmVyID0gc3Vic2NyaWJlcjsKICAgICAgICBfdGhpcy5jbG9zZWQgPSBmYWxzZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTdWJqZWN0U3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7CiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7CiAgICAgICAgdmFyIG9ic2VydmVycyA9IHN1YmplY3Qub2JzZXJ2ZXJzOwogICAgICAgIHRoaXMuc3ViamVjdCA9IG51bGw7CiAgICAgICAgaWYgKCFvYnNlcnZlcnMgfHwgb2JzZXJ2ZXJzLmxlbmd0aCA9PT0gMCB8fCBzdWJqZWN0LmlzU3RvcHBlZCB8fCBzdWJqZWN0LmNsb3NlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBzdWJzY3JpYmVySW5kZXggPSBvYnNlcnZlcnMuaW5kZXhPZih0aGlzLnN1YnNjcmliZXIpOwogICAgICAgIGlmIChzdWJzY3JpYmVySW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgIG9ic2VydmVycy5zcGxpY2Uoc3Vic2NyaWJlckluZGV4LCAxKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFN1YmplY3RTdWJzY3JpcHRpb247Cn0oX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpcHRpb24iXSkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdFN1YnNjcmlwdGlvbi5qcy5tYXAKCgovKioqLyB9KSwKLyogNTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJlZkNvdW50IiwgZnVuY3Rpb24oKSB7IHJldHVybiByZWZDb3VudDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIHJlZkNvdW50KCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIHJlZkNvdW50T3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IFJlZkNvdW50T3BlcmF0b3Ioc291cmNlKSk7CiAgICB9Owp9CnZhciBSZWZDb3VudE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gUmVmQ291bnRPcGVyYXRvcihjb25uZWN0YWJsZSkgewogICAgICAgIHRoaXMuY29ubmVjdGFibGUgPSBjb25uZWN0YWJsZTsKICAgIH0KICAgIFJlZkNvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5jb25uZWN0YWJsZTsKICAgICAgICBjb25uZWN0YWJsZS5fcmVmQ291bnQrKzsKICAgICAgICB2YXIgcmVmQ291bnRlciA9IG5ldyBSZWZDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgY29ubmVjdGFibGUpOwogICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBzb3VyY2Uuc3Vic2NyaWJlKHJlZkNvdW50ZXIpOwogICAgICAgIGlmICghcmVmQ291bnRlci5jbG9zZWQpIHsKICAgICAgICAgICAgcmVmQ291bnRlci5jb25uZWN0aW9uID0gY29ubmVjdGFibGUuY29ubmVjdCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOwogICAgfTsKICAgIHJldHVybiBSZWZDb3VudE9wZXJhdG9yOwp9KCkpOwp2YXIgUmVmQ291bnRTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oUmVmQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUmVmQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb25uZWN0YWJsZSkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5jb25uZWN0YWJsZTsKICAgICAgICBpZiAoIWNvbm5lY3RhYmxlKSB7CiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IG51bGw7CiAgICAgICAgdmFyIHJlZkNvdW50ID0gY29ubmVjdGFibGUuX3JlZkNvdW50OwogICAgICAgIGlmIChyZWZDb3VudCA8PSAwKSB7CiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29ubmVjdGFibGUuX3JlZkNvdW50ID0gcmVmQ291bnQgLSAxOwogICAgICAgIGlmIChyZWZDb3VudCA+IDEpIHsKICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjsKICAgICAgICB2YXIgc2hhcmVkQ29ubmVjdGlvbiA9IGNvbm5lY3RhYmxlLl9jb25uZWN0aW9uOwogICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7CiAgICAgICAgaWYgKHNoYXJlZENvbm5lY3Rpb24gJiYgKCFjb25uZWN0aW9uIHx8IHNoYXJlZENvbm5lY3Rpb24gPT09IGNvbm5lY3Rpb24pKSB7CiAgICAgICAgICAgIHNoYXJlZENvbm5lY3Rpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFJlZkNvdW50U3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVmQ291bnQuanMubWFwCgoKLyoqKi8gfSksCi8qIDYwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJncm91cEJ5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBncm91cEJ5OyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiR3JvdXBlZE9ic2VydmFibGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEdyb3VwZWRPYnNlcnZhYmxlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyLF9TdWJzY3JpcHRpb24sX09ic2VydmFibGUsX1N1YmplY3QgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKCmZ1bmN0aW9uIGdyb3VwQnkoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3Rvciwgc3ViamVjdFNlbGVjdG9yKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgR3JvdXBCeU9wZXJhdG9yKGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IsIHN1YmplY3RTZWxlY3RvcikpOwogICAgfTsKfQp2YXIgR3JvdXBCeU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gR3JvdXBCeU9wZXJhdG9yKGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IsIHN1YmplY3RTZWxlY3RvcikgewogICAgICAgIHRoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjsKICAgICAgICB0aGlzLmVsZW1lbnRTZWxlY3RvciA9IGVsZW1lbnRTZWxlY3RvcjsKICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yOwogICAgICAgIHRoaXMuc3ViamVjdFNlbGVjdG9yID0gc3ViamVjdFNlbGVjdG9yOwogICAgfQogICAgR3JvdXBCeU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBHcm91cEJ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmtleVNlbGVjdG9yLCB0aGlzLmVsZW1lbnRTZWxlY3RvciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yLCB0aGlzLnN1YmplY3RTZWxlY3RvcikpOwogICAgfTsKICAgIHJldHVybiBHcm91cEJ5T3BlcmF0b3I7Cn0oKSk7CnZhciBHcm91cEJ5U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEdyb3VwQnlTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gR3JvdXBCeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IsIHN1YmplY3RTZWxlY3RvcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7CiAgICAgICAgX3RoaXMuZWxlbWVudFNlbGVjdG9yID0gZWxlbWVudFNlbGVjdG9yOwogICAgICAgIF90aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yOwogICAgICAgIF90aGlzLnN1YmplY3RTZWxlY3RvciA9IHN1YmplY3RTZWxlY3RvcjsKICAgICAgICBfdGhpcy5ncm91cHMgPSBudWxsOwogICAgICAgIF90aGlzLmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUgPSBmYWxzZTsKICAgICAgICBfdGhpcy5jb3VudCA9IDA7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIGtleTsKICAgICAgICB0cnkgewogICAgICAgICAgICBrZXkgPSB0aGlzLmtleVNlbGVjdG9yKHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLmVycm9yKGVycik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5fZ3JvdXAodmFsdWUsIGtleSk7CiAgICB9OwogICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9ncm91cCA9IGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICAgICAgdmFyIGdyb3VwcyA9IHRoaXMuZ3JvdXBzOwogICAgICAgIGlmICghZ3JvdXBzKSB7CiAgICAgICAgICAgIGdyb3VwcyA9IHRoaXMuZ3JvdXBzID0gbmV3IE1hcCgpOwogICAgICAgIH0KICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHMuZ2V0KGtleSk7CiAgICAgICAgdmFyIGVsZW1lbnQ7CiAgICAgICAgaWYgKHRoaXMuZWxlbWVudFNlbGVjdG9yKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5lbGVtZW50U2VsZWN0b3IodmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgZWxlbWVudCA9IHZhbHVlOwogICAgICAgIH0KICAgICAgICBpZiAoIWdyb3VwKSB7CiAgICAgICAgICAgIGdyb3VwID0gKHRoaXMuc3ViamVjdFNlbGVjdG9yID8gdGhpcy5zdWJqZWN0U2VsZWN0b3IoKSA6IG5ldyBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJTdWJqZWN0Il0oKSk7CiAgICAgICAgICAgIGdyb3Vwcy5zZXQoa2V5LCBncm91cCk7CiAgICAgICAgICAgIHZhciBncm91cGVkT2JzZXJ2YWJsZSA9IG5ldyBHcm91cGVkT2JzZXJ2YWJsZShrZXksIGdyb3VwLCB0aGlzKTsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGdyb3VwZWRPYnNlcnZhYmxlKTsKICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25TZWxlY3RvcikgewogICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gdm9pZCAwOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb25TZWxlY3RvcihuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmFkZChkdXJhdGlvbi5zdWJzY3JpYmUobmV3IEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHRoaXMpKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFncm91cC5jbG9zZWQpIHsKICAgICAgICAgICAgZ3JvdXAubmV4dChlbGVtZW50KTsKICAgICAgICB9CiAgICB9OwogICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7CiAgICAgICAgaWYgKGdyb3VwcykgewogICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGtleSkgewogICAgICAgICAgICAgICAgZ3JvdXAuZXJyb3IoZXJyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGdyb3Vwcy5jbGVhcigpOwogICAgICAgIH0KICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICB9OwogICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7CiAgICAgICAgaWYgKGdyb3VwcykgewogICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGtleSkgewogICAgICAgICAgICAgICAgZ3JvdXAuY29tcGxldGUoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGdyb3Vwcy5jbGVhcigpOwogICAgICAgIH0KICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICB9OwogICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLnJlbW92ZUdyb3VwID0gZnVuY3Rpb24gKGtleSkgewogICAgICAgIHRoaXMuZ3JvdXBzLmRlbGV0ZShrZXkpOwogICAgfTsKICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIXRoaXMuY2xvc2VkKSB7CiAgICAgICAgICAgIHRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSA9IHRydWU7CiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAwKSB7CiAgICAgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIEdyb3VwQnlTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwp2YXIgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShHcm91cER1cmF0aW9uU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHBhcmVudCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGdyb3VwKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmtleSA9IGtleTsKICAgICAgICBfdGhpcy5ncm91cCA9IGdyb3VwOwogICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLmNvbXBsZXRlKCk7CiAgICB9OwogICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLCBwYXJlbnQgPSBfYS5wYXJlbnQsIGtleSA9IF9hLmtleTsKICAgICAgICB0aGlzLmtleSA9IHRoaXMucGFyZW50ID0gbnVsbDsKICAgICAgICBpZiAocGFyZW50KSB7CiAgICAgICAgICAgIHBhcmVudC5yZW1vdmVHcm91cChrZXkpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gR3JvdXBEdXJhdGlvblN1YnNjcmliZXI7Cn0oX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3Vic2NyaWJlciJdKSk7CnZhciBHcm91cGVkT2JzZXJ2YWJsZSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEdyb3VwZWRPYnNlcnZhYmxlLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gR3JvdXBlZE9ic2VydmFibGUoa2V5LCBncm91cFN1YmplY3QsIHJlZkNvdW50U3Vic2NyaXB0aW9uKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5rZXkgPSBrZXk7CiAgICAgICAgX3RoaXMuZ3JvdXBTdWJqZWN0ID0gZ3JvdXBTdWJqZWN0OwogICAgICAgIF90aGlzLnJlZkNvdW50U3Vic2NyaXB0aW9uID0gcmVmQ291bnRTdWJzY3JpcHRpb247CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgR3JvdXBlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJTdWJzY3JpcHRpb24iXSgpOwogICAgICAgIHZhciBfYSA9IHRoaXMsIHJlZkNvdW50U3Vic2NyaXB0aW9uID0gX2EucmVmQ291bnRTdWJzY3JpcHRpb24sIGdyb3VwU3ViamVjdCA9IF9hLmdyb3VwU3ViamVjdDsKICAgICAgICBpZiAocmVmQ291bnRTdWJzY3JpcHRpb24gJiYgIXJlZkNvdW50U3Vic2NyaXB0aW9uLmNsb3NlZCkgewogICAgICAgICAgICBzdWJzY3JpcHRpb24uYWRkKG5ldyBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uKHJlZkNvdW50U3Vic2NyaXB0aW9uKSk7CiAgICAgICAgfQogICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoZ3JvdXBTdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKSk7CiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjsKICAgIH07CiAgICByZXR1cm4gR3JvdXBlZE9ic2VydmFibGU7Cn0oX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT2JzZXJ2YWJsZSJdKSk7Cgp2YXIgSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24sIF9zdXBlcik7CiAgICBmdW5jdGlvbiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uKHBhcmVudCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucGFyZW50ID0gcGFyZW50OwogICAgICAgIHBhcmVudC5jb3VudCsrOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudDsKICAgICAgICBpZiAoIXBhcmVudC5jbG9zZWQgJiYgIXRoaXMuY2xvc2VkKSB7CiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTsKICAgICAgICAgICAgcGFyZW50LmNvdW50IC09IDE7CiAgICAgICAgICAgIGlmIChwYXJlbnQuY291bnQgPT09IDAgJiYgcGFyZW50LmF0dGVtcHRlZFRvVW5zdWJzY3JpYmUpIHsKICAgICAgICAgICAgICAgIHBhcmVudC51bnN1YnNjcmliZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uOwp9KF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siU3Vic2NyaXB0aW9uIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3JvdXBCeS5qcy5tYXAKCgovKioqLyB9KSwKLyogNjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkJlaGF2aW9yU3ViamVjdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQmVoYXZpb3JTdWJqZWN0OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3ViamVjdCxfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCnZhciBCZWhhdmlvclN1YmplY3QgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShCZWhhdmlvclN1YmplY3QsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBCZWhhdmlvclN1YmplY3QoX3ZhbHVlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5fdmFsdWUgPSBfdmFsdWU7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUsICJ2YWx1ZSIsIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTsKICAgICAgICB9LAogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9KTsKICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpOwogICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgIXN1YnNjcmlwdGlvbi5jbG9zZWQpIHsKICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMuX3ZhbHVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjsKICAgIH07CiAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMudGhyb3duRXJyb3I7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHRoaXMuY2xvc2VkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJPYmplY3RVbnN1YnNjcmliZWRFcnJvciJdKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7CiAgICAgICAgfQogICAgfTsKICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIF9zdXBlci5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIHRoaXMuX3ZhbHVlID0gdmFsdWUpOwogICAgfTsKICAgIHJldHVybiBCZWhhdmlvclN1YmplY3Q7Cn0oX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3ViamVjdCJdKSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1CZWhhdmlvclN1YmplY3QuanMubWFwCgoKLyoqKi8gfSksCi8qIDYyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJSZXBsYXlTdWJqZWN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBSZXBsYXlTdWJqZWN0OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zY2hlZHVsZXJfcXVldWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb3BlcmF0b3JzX29ic2VydmVPbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3ViamVjdFN1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YmplY3QsX3NjaGVkdWxlcl9xdWV1ZSxfU3Vic2NyaXB0aW9uLF9vcGVyYXRvcnNfb2JzZXJ2ZU9uLF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yLF9TdWJqZWN0U3Vic2NyaXB0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgoKCnZhciBSZXBsYXlTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oUmVwbGF5U3ViamVjdCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFJlcGxheVN1YmplY3QoYnVmZmVyU2l6ZSwgd2luZG93VGltZSwgc2NoZWR1bGVyKSB7CiAgICAgICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkgewogICAgICAgICAgICBidWZmZXJTaXplID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOwogICAgICAgIH0KICAgICAgICBpZiAod2luZG93VGltZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIHdpbmRvd1RpbWUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICAgICAgfQogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgICAgIF90aGlzLl9ldmVudHMgPSBbXTsKICAgICAgICBfdGhpcy5faW5maW5pdGVUaW1lV2luZG93ID0gZmFsc2U7CiAgICAgICAgX3RoaXMuX2J1ZmZlclNpemUgPSBidWZmZXJTaXplIDwgMSA/IDEgOiBidWZmZXJTaXplOwogICAgICAgIF90aGlzLl93aW5kb3dUaW1lID0gd2luZG93VGltZSA8IDEgPyAxIDogd2luZG93VGltZTsKICAgICAgICBpZiAod2luZG93VGltZSA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7CiAgICAgICAgICAgIF90aGlzLl9pbmZpbml0ZVRpbWVXaW5kb3cgPSB0cnVlOwogICAgICAgICAgICBfdGhpcy5uZXh0ID0gX3RoaXMubmV4dEluZmluaXRlVGltZVdpbmRvdzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIF90aGlzLm5leHQgPSBfdGhpcy5uZXh0VGltZVdpbmRvdzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUubmV4dEluZmluaXRlVGltZVdpbmRvdyA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciBfZXZlbnRzID0gdGhpcy5fZXZlbnRzOwogICAgICAgIF9ldmVudHMucHVzaCh2YWx1ZSk7CiAgICAgICAgaWYgKF9ldmVudHMubGVuZ3RoID4gdGhpcy5fYnVmZmVyU2l6ZSkgewogICAgICAgICAgICBfZXZlbnRzLnNoaWZ0KCk7CiAgICAgICAgfQogICAgICAgIF9zdXBlci5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIHZhbHVlKTsKICAgIH07CiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5uZXh0VGltZVdpbmRvdyA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHRoaXMuX2V2ZW50cy5wdXNoKG5ldyBSZXBsYXlFdmVudCh0aGlzLl9nZXROb3coKSwgdmFsdWUpKTsKICAgICAgICB0aGlzLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cygpOwogICAgICAgIF9zdXBlci5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIHZhbHVlKTsKICAgIH07CiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICB2YXIgX2luZmluaXRlVGltZVdpbmRvdyA9IHRoaXMuX2luZmluaXRlVGltZVdpbmRvdzsKICAgICAgICB2YXIgX2V2ZW50cyA9IF9pbmZpbml0ZVRpbWVXaW5kb3cgPyB0aGlzLl9ldmVudHMgOiB0aGlzLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cygpOwogICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjsKICAgICAgICB2YXIgbGVuID0gX2V2ZW50cy5sZW5ndGg7CiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjsKICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIl0oKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodGhpcy5pc1N0b3BwZWQgfHwgdGhpcy5oYXNFcnJvcikgewogICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBfU3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIlN1YnNjcmlwdGlvbiJdLkVNUFRZOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzdWJzY3JpYmVyKTsKICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV3IF9TdWJqZWN0U3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bIlN1YmplY3RTdWJzY3JpcHRpb24iXSh0aGlzLCBzdWJzY3JpYmVyKTsKICAgICAgICB9CiAgICAgICAgaWYgKHNjaGVkdWxlcikgewogICAgICAgICAgICBzdWJzY3JpYmVyLmFkZChzdWJzY3JpYmVyID0gbmV3IF9vcGVyYXRvcnNfb2JzZXJ2ZU9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIk9ic2VydmVPblN1YnNjcmliZXIiXShzdWJzY3JpYmVyLCBzY2hlZHVsZXIpKTsKICAgICAgICB9CiAgICAgICAgaWYgKF9pbmZpbml0ZVRpbWVXaW5kb3cpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4gJiYgIXN1YnNjcmliZXIuY2xvc2VkOyBpKyspIHsKICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChfZXZlbnRzW2ldKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4gJiYgIXN1YnNjcmliZXIuY2xvc2VkOyBpKyspIHsKICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChfZXZlbnRzW2ldLnZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikgewogICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHRoaXMudGhyb3duRXJyb3IpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICh0aGlzLmlzU3RvcHBlZCkgewogICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247CiAgICB9OwogICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX2dldE5vdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKHRoaXMuc2NoZWR1bGVyIHx8IF9zY2hlZHVsZXJfcXVldWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sicXVldWUiXSkubm93KCk7CiAgICB9OwogICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBub3cgPSB0aGlzLl9nZXROb3coKTsKICAgICAgICB2YXIgX2J1ZmZlclNpemUgPSB0aGlzLl9idWZmZXJTaXplOwogICAgICAgIHZhciBfd2luZG93VGltZSA9IHRoaXMuX3dpbmRvd1RpbWU7CiAgICAgICAgdmFyIF9ldmVudHMgPSB0aGlzLl9ldmVudHM7CiAgICAgICAgdmFyIGV2ZW50c0NvdW50ID0gX2V2ZW50cy5sZW5ndGg7CiAgICAgICAgdmFyIHNwbGljZUNvdW50ID0gMDsKICAgICAgICB3aGlsZSAoc3BsaWNlQ291bnQgPCBldmVudHNDb3VudCkgewogICAgICAgICAgICBpZiAoKG5vdyAtIF9ldmVudHNbc3BsaWNlQ291bnRdLnRpbWUpIDwgX3dpbmRvd1RpbWUpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNwbGljZUNvdW50Kys7CiAgICAgICAgfQogICAgICAgIGlmIChldmVudHNDb3VudCA+IF9idWZmZXJTaXplKSB7CiAgICAgICAgICAgIHNwbGljZUNvdW50ID0gTWF0aC5tYXgoc3BsaWNlQ291bnQsIGV2ZW50c0NvdW50IC0gX2J1ZmZlclNpemUpOwogICAgICAgIH0KICAgICAgICBpZiAoc3BsaWNlQ291bnQgPiAwKSB7CiAgICAgICAgICAgIF9ldmVudHMuc3BsaWNlKDAsIHNwbGljZUNvdW50KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9ldmVudHM7CiAgICB9OwogICAgcmV0dXJuIFJlcGxheVN1YmplY3Q7Cn0oX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3ViamVjdCJdKSk7Cgp2YXIgUmVwbGF5RXZlbnQgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBSZXBsYXlFdmVudCh0aW1lLCB2YWx1ZSkgewogICAgICAgIHRoaXMudGltZSA9IHRpbWU7CiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgfQogICAgcmV0dXJuIFJlcGxheUV2ZW50Owp9KCkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1SZXBsYXlTdWJqZWN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiA2MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicXVldWUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHF1ZXVlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9RdWV1ZUFjdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfUXVldWVTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9RdWV1ZUFjdGlvbixfUXVldWVTY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCnZhciBxdWV1ZSA9IC8qQF9fUFVSRV9fKi8gbmV3IF9RdWV1ZVNjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJRdWV1ZVNjaGVkdWxlciJdKF9RdWV1ZUFjdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJRdWV1ZUFjdGlvbiJdKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUuanMubWFwCgoKLyoqKi8gfSksCi8qIDY0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJRdWV1ZUFjdGlvbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gUXVldWVBY3Rpb247IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX0FzeW5jQWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfQXN5bmNBY3Rpb24gUFVSRV9JTVBPUlRTX0VORCAqLwoKCnZhciBRdWV1ZUFjdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFF1ZXVlQWN0aW9uLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUXVldWVBY3Rpb24oc2NoZWR1bGVyLCB3b3JrKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2NoZWR1bGVyLCB3b3JrKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjsKICAgICAgICBfdGhpcy53b3JrID0gd29yazsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBRdWV1ZUFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7CiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsKICAgICAgICAgICAgZGVsYXkgPSAwOwogICAgICAgIH0KICAgICAgICBpZiAoZGVsYXkgPiAwKSB7CiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLnNjaGVkdWxlLmNhbGwodGhpcywgc3RhdGUsIGRlbGF5KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5OwogICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICAgICAgICB0aGlzLnNjaGVkdWxlci5mbHVzaCh0aGlzKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBRdWV1ZUFjdGlvbi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHsKICAgICAgICByZXR1cm4gKGRlbGF5ID4gMCB8fCB0aGlzLmNsb3NlZCkgPwogICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmV4ZWN1dGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpIDoKICAgICAgICAgICAgdGhpcy5fZXhlY3V0ZShzdGF0ZSwgZGVsYXkpOwogICAgfTsKICAgIFF1ZXVlQWN0aW9uLnByb3RvdHlwZS5yZXF1ZXN0QXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkgewogICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIGRlbGF5ID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKChkZWxheSAhPT0gbnVsbCAmJiBkZWxheSA+IDApIHx8IChkZWxheSA9PT0gbnVsbCAmJiB0aGlzLmRlbGF5ID4gMCkpIHsKICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIGlkLCBkZWxheSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzY2hlZHVsZXIuZmx1c2godGhpcyk7CiAgICB9OwogICAgcmV0dXJuIFF1ZXVlQWN0aW9uOwp9KF9Bc3luY0FjdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJBc3luY0FjdGlvbiJdKSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1RdWV1ZUFjdGlvbi5qcy5tYXAKCgovKioqLyB9KSwKLyogNjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkFzeW5jQWN0aW9uIiwgZnVuY3Rpb24oKSB7IHJldHVybiBBc3luY0FjdGlvbjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfQWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfQWN0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi8KCgp2YXIgQXN5bmNBY3Rpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShBc3luY0FjdGlvbiwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEFzeW5jQWN0aW9uKHNjaGVkdWxlciwgd29yaykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHNjaGVkdWxlciwgd29yaykgfHwgdGhpczsKICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgX3RoaXMud29yayA9IHdvcms7CiAgICAgICAgX3RoaXMucGVuZGluZyA9IGZhbHNlOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHsKICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgewogICAgICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmNsb3NlZCkgewogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgIHZhciBpZCA9IHRoaXMuaWQ7CiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyOwogICAgICAgIGlmIChpZCAhPSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMuaWQgPSB0aGlzLnJlY3ljbGVBc3luY0lkKHNjaGVkdWxlciwgaWQsIGRlbGF5KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7CiAgICAgICAgdGhpcy5pZCA9IHRoaXMuaWQgfHwgdGhpcy5yZXF1ZXN0QXN5bmNJZChzY2hlZHVsZXIsIHRoaXMuaWQsIGRlbGF5KTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBBc3luY0FjdGlvbi5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQgPSBmdW5jdGlvbiAoc2NoZWR1bGVyLCBpZCwgZGVsYXkpIHsKICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgewogICAgICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZXRJbnRlcnZhbChzY2hlZHVsZXIuZmx1c2guYmluZChzY2hlZHVsZXIsIHRoaXMpLCBkZWxheSk7CiAgICB9OwogICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLnJlY3ljbGVBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7CiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsKICAgICAgICAgICAgZGVsYXkgPSAwOwogICAgICAgIH0KICAgICAgICBpZiAoZGVsYXkgIT09IG51bGwgJiYgdGhpcy5kZWxheSA9PT0gZGVsYXkgJiYgdGhpcy5wZW5kaW5nID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gaWQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjbGVhckludGVydmFsKGlkKSAmJiB1bmRlZmluZWQgfHwgdW5kZWZpbmVkOwogICAgfTsKICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkgewogICAgICAgIGlmICh0aGlzLmNsb3NlZCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdleGVjdXRpbmcgYSBjYW5jZWxsZWQgYWN0aW9uJyk7CiAgICAgICAgfQogICAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlOwogICAgICAgIHZhciBlcnJvciA9IHRoaXMuX2V4ZWN1dGUoc3RhdGUsIGRlbGF5KTsKICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICh0aGlzLnBlbmRpbmcgPT09IGZhbHNlICYmIHRoaXMuaWQgIT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZCh0aGlzLnNjaGVkdWxlciwgdGhpcy5pZCwgbnVsbCk7CiAgICAgICAgfQogICAgfTsKICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5fZXhlY3V0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHsKICAgICAgICB2YXIgZXJyb3JlZCA9IGZhbHNlOwogICAgICAgIHZhciBlcnJvclZhbHVlID0gdW5kZWZpbmVkOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRoaXMud29yayhzdGF0ZSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIGVycm9yZWQgPSB0cnVlOwogICAgICAgICAgICBlcnJvclZhbHVlID0gISFlICYmIGUgfHwgbmV3IEVycm9yKGUpOwogICAgICAgIH0KICAgICAgICBpZiAoZXJyb3JlZCkgewogICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIHJldHVybiBlcnJvclZhbHVlOwogICAgICAgIH0KICAgIH07CiAgICBBc3luY0FjdGlvbi5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBpZCA9IHRoaXMuaWQ7CiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyOwogICAgICAgIHZhciBhY3Rpb25zID0gc2NoZWR1bGVyLmFjdGlvbnM7CiAgICAgICAgdmFyIGluZGV4ID0gYWN0aW9ucy5pbmRleE9mKHRoaXMpOwogICAgICAgIHRoaXMud29yayA9IG51bGw7CiAgICAgICAgdGhpcy5zdGF0ZSA9IG51bGw7CiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBudWxsOwogICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIH0KICAgICAgICBpZiAoaWQgIT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChzY2hlZHVsZXIsIGlkLCBudWxsKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kZWxheSA9IG51bGw7CiAgICB9OwogICAgcmV0dXJuIEFzeW5jQWN0aW9uOwp9KF9BY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siQWN0aW9uIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzeW5jQWN0aW9uLmpzLm1hcAoKCi8qKiovIH0pLAovKiA2NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQWN0aW9uIiwgZnVuY3Rpb24oKSB7IHJldHVybiBBY3Rpb247IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovCgoKdmFyIEFjdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEFjdGlvbiwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEFjdGlvbihzY2hlZHVsZXIsIHdvcmspIHsKICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgIH0KICAgIEFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7CiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsKICAgICAgICAgICAgZGVsYXkgPSAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICByZXR1cm4gQWN0aW9uOwp9KF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3Vic2NyaXB0aW9uIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFjdGlvbi5qcy5tYXAKCgovKioqLyB9KSwKLyogNjcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlF1ZXVlU2NoZWR1bGVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBRdWV1ZVNjaGVkdWxlcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfQXN5bmNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9Bc3luY1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKdmFyIFF1ZXVlU2NoZWR1bGVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oUXVldWVTY2hlZHVsZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBRdWV1ZVNjaGVkdWxlcigpIHsKICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICB9CiAgICByZXR1cm4gUXVldWVTY2hlZHVsZXI7Cn0oX0FzeW5jU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkFzeW5jU2NoZWR1bGVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXVlU2NoZWR1bGVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiA2OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQXN5bmNTY2hlZHVsZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFzeW5jU2NoZWR1bGVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCnZhciBBc3luY1NjaGVkdWxlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEFzeW5jU2NoZWR1bGVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gQXN5bmNTY2hlZHVsZXIoU2NoZWR1bGVyQWN0aW9uLCBub3cpIHsKICAgICAgICBpZiAobm93ID09PSB2b2lkIDApIHsKICAgICAgICAgICAgbm93ID0gX1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTY2hlZHVsZXIiXS5ub3c7CiAgICAgICAgfQogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFNjaGVkdWxlckFjdGlvbiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoQXN5bmNTY2hlZHVsZXIuZGVsZWdhdGUgJiYgQXN5bmNTY2hlZHVsZXIuZGVsZWdhdGUgIT09IF90aGlzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gQXN5bmNTY2hlZHVsZXIuZGVsZWdhdGUubm93KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbm93KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSB8fCB0aGlzOwogICAgICAgIF90aGlzLmFjdGlvbnMgPSBbXTsKICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTsKICAgICAgICBfdGhpcy5zY2hlZHVsZWQgPSB1bmRlZmluZWQ7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQXN5bmNTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHdvcmssIGRlbGF5LCBzdGF0ZSkgewogICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIGRlbGF5ID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKEFzeW5jU2NoZWR1bGVyLmRlbGVnYXRlICYmIEFzeW5jU2NoZWR1bGVyLmRlbGVnYXRlICE9PSB0aGlzKSB7CiAgICAgICAgICAgIHJldHVybiBBc3luY1NjaGVkdWxlci5kZWxlZ2F0ZS5zY2hlZHVsZSh3b3JrLCBkZWxheSwgc3RhdGUpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuc2NoZWR1bGUuY2FsbCh0aGlzLCB3b3JrLCBkZWxheSwgc3RhdGUpOwogICAgICAgIH0KICAgIH07CiAgICBBc3luY1NjaGVkdWxlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgdmFyIGFjdGlvbnMgPSB0aGlzLmFjdGlvbnM7CiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7CiAgICAgICAgICAgIGFjdGlvbnMucHVzaChhY3Rpb24pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBlcnJvcjsKICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7CiAgICAgICAgZG8gewogICAgICAgICAgICBpZiAoZXJyb3IgPSBhY3Rpb24uZXhlY3V0ZShhY3Rpb24uc3RhdGUsIGFjdGlvbi5kZWxheSkpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfSB3aGlsZSAoYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpKTsKICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlOwogICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICB3aGlsZSAoYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpKSB7CiAgICAgICAgICAgICAgICBhY3Rpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIEFzeW5jU2NoZWR1bGVyOwp9KF9TY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU2NoZWR1bGVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzeW5jU2NoZWR1bGVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiA2OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiU2NoZWR1bGVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTY2hlZHVsZXI7IH0pOwp2YXIgU2NoZWR1bGVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gU2NoZWR1bGVyKFNjaGVkdWxlckFjdGlvbiwgbm93KSB7CiAgICAgICAgaWYgKG5vdyA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIG5vdyA9IFNjaGVkdWxlci5ub3c7CiAgICAgICAgfQogICAgICAgIHRoaXMuU2NoZWR1bGVyQWN0aW9uID0gU2NoZWR1bGVyQWN0aW9uOwogICAgICAgIHRoaXMubm93ID0gbm93OwogICAgfQogICAgU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHsKICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgewogICAgICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgdGhpcy5TY2hlZHVsZXJBY3Rpb24odGhpcywgd29yaykuc2NoZWR1bGUoc3RhdGUsIGRlbGF5KTsKICAgIH07CiAgICBTY2hlZHVsZXIubm93ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gRGF0ZS5ub3coKTsgfTsKICAgIHJldHVybiBTY2hlZHVsZXI7Cn0oKSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1TY2hlZHVsZXIuanMubWFwCgoKLyoqKi8gfSksCi8qIDcwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJvYnNlcnZlT24iLCBmdW5jdGlvbigpIHsgcmV0dXJuIG9ic2VydmVPbjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk9ic2VydmVPbk9wZXJhdG9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBPYnNlcnZlT25PcGVyYXRvcjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk9ic2VydmVPblN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIE9ic2VydmVPblN1YnNjcmliZXI7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJPYnNlcnZlT25NZXNzYWdlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBPYnNlcnZlT25NZXNzYWdlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9Ob3RpZmljYXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyLF9Ob3RpZmljYXRpb24gUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiBvYnNlcnZlT24oc2NoZWR1bGVyLCBkZWxheSkgewogICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsKICAgICAgICBkZWxheSA9IDA7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gb2JzZXJ2ZU9uT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IE9ic2VydmVPbk9wZXJhdG9yKHNjaGVkdWxlciwgZGVsYXkpKTsKICAgIH07Cn0KdmFyIE9ic2VydmVPbk9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gT2JzZXJ2ZU9uT3BlcmF0b3Ioc2NoZWR1bGVyLCBkZWxheSkgewogICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIGRlbGF5ID0gMDsKICAgICAgICB9CiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5OwogICAgfQogICAgT2JzZXJ2ZU9uT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IE9ic2VydmVPblN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5zY2hlZHVsZXIsIHRoaXMuZGVsYXkpKTsKICAgIH07CiAgICByZXR1cm4gT2JzZXJ2ZU9uT3BlcmF0b3I7Cn0oKSk7Cgp2YXIgT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKE9ic2VydmVPblN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBPYnNlcnZlT25TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBzY2hlZHVsZXIsIGRlbGF5KSB7CiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsKICAgICAgICAgICAgZGVsYXkgPSAwOwogICAgICAgIH0KICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgX3RoaXMuZGVsYXkgPSBkZWxheTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykgewogICAgICAgIHZhciBub3RpZmljYXRpb24gPSBhcmcubm90aWZpY2F0aW9uLCBkZXN0aW5hdGlvbiA9IGFyZy5kZXN0aW5hdGlvbjsKICAgICAgICBub3RpZmljYXRpb24ub2JzZXJ2ZShkZXN0aW5hdGlvbik7CiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpOwogICAgfTsKICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLnNjaGVkdWxlTWVzc2FnZSA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHsKICAgICAgICB0aGlzLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShPYnNlcnZlT25TdWJzY3JpYmVyLmRpc3BhdGNoLCB0aGlzLmRlbGF5LCBuZXcgT2JzZXJ2ZU9uTWVzc2FnZShub3RpZmljYXRpb24sIHRoaXMuZGVzdGluYXRpb24pKSk7CiAgICB9OwogICAgT2JzZXJ2ZU9uU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLnNjaGVkdWxlTWVzc2FnZShfTm90aWZpY2F0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIk5vdGlmaWNhdGlvbiJdLmNyZWF0ZU5leHQodmFsdWUpKTsKICAgIH07CiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoX05vdGlmaWNhdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJOb3RpZmljYXRpb24iXS5jcmVhdGVFcnJvcihlcnIpKTsKICAgIH07CiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoX05vdGlmaWNhdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJOb3RpZmljYXRpb24iXS5jcmVhdGVDb21wbGV0ZSgpKTsKICAgIH07CiAgICByZXR1cm4gT2JzZXJ2ZU9uU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKCnZhciBPYnNlcnZlT25NZXNzYWdlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gT2JzZXJ2ZU9uTWVzc2FnZShub3RpZmljYXRpb24sIGRlc3RpbmF0aW9uKSB7CiAgICAgICAgdGhpcy5ub3RpZmljYXRpb24gPSBub3RpZmljYXRpb247CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uOwogICAgfQogICAgcmV0dXJuIE9ic2VydmVPbk1lc3NhZ2U7Cn0oKSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlT24uanMubWFwCgoKLyoqKi8gfSksCi8qIDcxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJOb3RpZmljYXRpb24iLCBmdW5jdGlvbigpIHsgcmV0dXJuIE5vdGlmaWNhdGlvbjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9vZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV90aHJvd0Vycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV9lbXB0eSxfb2JzZXJ2YWJsZV9vZixfb2JzZXJ2YWJsZV90aHJvd0Vycm9yIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKdmFyIE5vdGlmaWNhdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIE5vdGlmaWNhdGlvbihraW5kLCB2YWx1ZSwgZXJyb3IpIHsKICAgICAgICB0aGlzLmtpbmQgPSBraW5kOwogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7CiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGtpbmQgPT09ICdOJzsKICAgIH0KICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikgewogICAgICAgIHN3aXRjaCAodGhpcy5raW5kKSB7CiAgICAgICAgICAgIGNhc2UgJ04nOgogICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLm5leHQgJiYgb2JzZXJ2ZXIubmV4dCh0aGlzLnZhbHVlKTsKICAgICAgICAgICAgY2FzZSAnRSc6CiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IgJiYgb2JzZXJ2ZXIuZXJyb3IodGhpcy5lcnJvcik7CiAgICAgICAgICAgIGNhc2UgJ0MnOgogICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmNvbXBsZXRlICYmIG9ic2VydmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuZG8gPSBmdW5jdGlvbiAobmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7CiAgICAgICAgdmFyIGtpbmQgPSB0aGlzLmtpbmQ7CiAgICAgICAgc3dpdGNoIChraW5kKSB7CiAgICAgICAgICAgIGNhc2UgJ04nOgogICAgICAgICAgICAgICAgcmV0dXJuIG5leHQgJiYgbmV4dCh0aGlzLnZhbHVlKTsKICAgICAgICAgICAgY2FzZSAnRSc6CiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IgJiYgZXJyb3IodGhpcy5lcnJvcik7CiAgICAgICAgICAgIGNhc2UgJ0MnOgogICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlICYmIGNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHsKICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgJiYgdHlwZW9mIG5leHRPck9ic2VydmVyLm5leHQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZShuZXh0T3JPYnNlcnZlcik7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpcy5kbyhuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTsKICAgICAgICB9CiAgICB9OwogICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGtpbmQgPSB0aGlzLmtpbmQ7CiAgICAgICAgc3dpdGNoIChraW5kKSB7CiAgICAgICAgICAgIGNhc2UgJ04nOgogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdChfb2JzZXJ2YWJsZV9vZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJvZiJdKSh0aGlzLnZhbHVlKTsKICAgICAgICAgICAgY2FzZSAnRSc6CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0KF9vYnNlcnZhYmxlX3Rocm93RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sidGhyb3dFcnJvciJdKSh0aGlzLmVycm9yKTsKICAgICAgICAgICAgY2FzZSAnQyc6CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0KF9vYnNlcnZhYmxlX2VtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImVtcHR5Il0pKCk7CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCBub3RpZmljYXRpb24ga2luZCB2YWx1ZScpOwogICAgfTsKICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBOb3RpZmljYXRpb24oJ04nLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBOb3RpZmljYXRpb24udW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb247CiAgICB9OwogICAgTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdFJywgdW5kZWZpbmVkLCBlcnIpOwogICAgfTsKICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gTm90aWZpY2F0aW9uLmNvbXBsZXRlTm90aWZpY2F0aW9uOwogICAgfTsKICAgIE5vdGlmaWNhdGlvbi5jb21wbGV0ZU5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oJ0MnKTsKICAgIE5vdGlmaWNhdGlvbi51bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oJ04nLCB1bmRlZmluZWQpOwogICAgcmV0dXJuIE5vdGlmaWNhdGlvbjsKfSgpKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vdGlmaWNhdGlvbi5qcy5tYXAKCgovKioqLyB9KSwKLyogNzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkVNUFRZIiwgZnVuY3Rpb24oKSB7IHJldHVybiBFTVBUWTsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImVtcHR5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBlbXB0eTsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImVtcHR5U2NoZWR1bGVkIiwgZnVuY3Rpb24oKSB7IHJldHVybiBlbXB0eVNjaGVkdWxlZDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUgUFVSRV9JTVBPUlRTX0VORCAqLwoKdmFyIEVNUFRZID0gLypAX19QVVJFX18qLyBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7IHJldHVybiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7IH0pOwpmdW5jdGlvbiBlbXB0eShzY2hlZHVsZXIpIHsKICAgIHJldHVybiBzY2hlZHVsZXIgPyBlbXB0eVNjaGVkdWxlZChzY2hlZHVsZXIpIDogRU1QVFk7Cn0KZnVuY3Rpb24gZW1wdHlTY2hlZHVsZWQoc2NoZWR1bGVyKSB7CiAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgeyByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTsgfSk7IH0pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtcHR5LmpzLm1hcAoKCi8qKiovIH0pLAovKiA3MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAib2YiLCBmdW5jdGlvbigpIHsgcmV0dXJuIG9mOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9mcm9tQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zY2FsYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX2lzU2NoZWR1bGVyLF9mcm9tQXJyYXksX2VtcHR5LF9zY2FsYXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKZnVuY3Rpb24gb2YoKSB7CiAgICB2YXIgYXJncyA9IFtdOwogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CiAgICB2YXIgc2NoZWR1bGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdOwogICAgaWYgKE9iamVjdChfdXRpbF9pc1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJpc1NjaGVkdWxlciJdKShzY2hlZHVsZXIpKSB7CiAgICAgICAgYXJncy5wb3AoKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHNjaGVkdWxlciA9IHVuZGVmaW5lZDsKICAgIH0KICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJldHVybiBPYmplY3QoX2VtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImVtcHR5Il0pKHNjaGVkdWxlcik7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyID8gT2JqZWN0KF9mcm9tQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siZnJvbUFycmF5Il0pKGFyZ3MsIHNjaGVkdWxlcikgOiBPYmplY3QoX3NjYWxhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJzY2FsYXIiXSkoYXJnc1swXSk7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIE9iamVjdChfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImZyb21BcnJheSJdKShhcmdzLCBzY2hlZHVsZXIpOwogICAgfQp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPW9mLmpzLm1hcAoKCi8qKiovIH0pLAovKiA3NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaXNTY2hlZHVsZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzU2NoZWR1bGVyOyB9KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqLwpmdW5jdGlvbiBpc1NjaGVkdWxlcih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5zY2hlZHVsZSA9PT0gJ2Z1bmN0aW9uJzsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1pc1NjaGVkdWxlci5qcy5tYXAKCgovKioqLyB9KSwKLyogNzUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZyb21BcnJheSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZnJvbUFycmF5OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9BcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX1N1YnNjcmlwdGlvbixfdXRpbF9zdWJzY3JpYmVUb0FycmF5IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKZnVuY3Rpb24gZnJvbUFycmF5KGlucHV0LCBzY2hlZHVsZXIpIHsKICAgIGlmICghc2NoZWR1bGVyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJPYnNlcnZhYmxlIl0oT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9BcnJheSJdKShpbnB1dCkpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJPYnNlcnZhYmxlIl0oZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICAgICAgdmFyIHN1YiA9IG5ldyBfU3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmlwdGlvbiJdKCk7CiAgICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgICAgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKGkgPT09IGlucHV0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5wdXRbaSsrXSk7CiAgICAgICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7CiAgICAgICAgICAgICAgICAgICAgc3ViLmFkZCh0aGlzLnNjaGVkdWxlKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHJldHVybiBzdWI7CiAgICAgICAgfSk7CiAgICB9Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUFycmF5LmpzLm1hcAoKCi8qKiovIH0pLAovKiA3NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic3Vic2NyaWJlVG9BcnJheSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3Vic2NyaWJlVG9BcnJheTsgfSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KdmFyIHN1YnNjcmliZVRvQXJyYXkgPSBmdW5jdGlvbiAoYXJyYXkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW4gJiYgIXN1YnNjcmliZXIuY2xvc2VkOyBpKyspIHsKICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGFycmF5W2ldKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkgewogICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKfTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9BcnJheS5qcy5tYXAKCgovKioqLyB9KSwKLyogNzcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInNjYWxhciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2NhbGFyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovCgpmdW5jdGlvbiBzY2FsYXIodmFsdWUpIHsKICAgIHZhciByZXN1bHQgPSBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTsKICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICB9KTsKICAgIHJlc3VsdC5faXNTY2FsYXIgPSB0cnVlOwogICAgcmVzdWx0LnZhbHVlID0gdmFsdWU7CiAgICByZXR1cm4gcmVzdWx0Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjYWxhci5qcy5tYXAKCgovKioqLyB9KSwKLyogNzggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRocm93RXJyb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRocm93RXJyb3I7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIHRocm93RXJyb3IoZXJyb3IsIHNjaGVkdWxlcikgewogICAgaWYgKCFzY2hlZHVsZXIpIHsKICAgICAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgeyByZXR1cm4gc3Vic2NyaWJlci5lcnJvcihlcnJvcik7IH0pOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJPYnNlcnZhYmxlIl0oZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaCwgMCwgeyBlcnJvcjogZXJyb3IsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIgfSk7IH0pOwogICAgfQp9CmZ1bmN0aW9uIGRpc3BhdGNoKF9hKSB7CiAgICB2YXIgZXJyb3IgPSBfYS5lcnJvciwgc3Vic2NyaWJlciA9IF9hLnN1YnNjcmliZXI7CiAgICBzdWJzY3JpYmVyLmVycm9yKGVycm9yKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD10aHJvd0Vycm9yLmpzLm1hcAoKCi8qKiovIH0pLAovKiA3OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQXN5bmNTdWJqZWN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBBc3luY1N1YmplY3Q7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YmplY3QsX1N1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovCgoKCnZhciBBc3luY1N1YmplY3QgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShBc3luY1N1YmplY3QsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBBc3luY1N1YmplY3QoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMudmFsdWUgPSBudWxsOwogICAgICAgIF90aGlzLmhhc05leHQgPSBmYWxzZTsKICAgICAgICBfdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7CiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IodGhpcy50aHJvd25FcnJvcik7CiAgICAgICAgICAgIHJldHVybiBfU3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIlN1YnNjcmlwdGlvbiJdLkVNUFRZOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmhhc05leHQpIHsKICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHRoaXMudmFsdWUpOwogICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICAgICAgICAgIHJldHVybiBfU3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIlN1YnNjcmlwdGlvbiJdLkVNUFRZOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7CiAgICB9OwogICAgQXN5bmNTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKCF0aGlzLmhhc0NvbXBsZXRlZCkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgIHRoaXMuaGFzTmV4dCA9IHRydWU7CiAgICAgICAgfQogICAgfTsKICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBpZiAoIXRoaXMuaGFzQ29tcGxldGVkKSB7CiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLCBlcnJvcik7CiAgICAgICAgfQogICAgfTsKICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlOwogICAgICAgIGlmICh0aGlzLmhhc05leHQpIHsKICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcywgdGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIF9zdXBlci5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKTsKICAgIH07CiAgICByZXR1cm4gQXN5bmNTdWJqZWN0Owp9KF9TdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YmplY3QiXSkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNTdWJqZWN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiA4MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiYXNhcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYXNhcDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfQXNhcEFjdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfQXNhcFNjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX0FzYXBBY3Rpb24sX0FzYXBTY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCnZhciBhc2FwID0gLypAX19QVVJFX18qLyBuZXcgX0FzYXBTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siQXNhcFNjaGVkdWxlciJdKF9Bc2FwQWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIkFzYXBBY3Rpb24iXSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzYXAuanMubWFwCgoKLyoqKi8gfSksCi8qIDgxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJBc2FwQWN0aW9uIiwgZnVuY3Rpb24oKSB7IHJldHVybiBBc2FwQWN0aW9uOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX0ltbWVkaWF0ZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfQXN5bmNBY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF91dGlsX0ltbWVkaWF0ZSxfQXN5bmNBY3Rpb24gUFVSRV9JTVBPUlRTX0VORCAqLwoKCgp2YXIgQXNhcEFjdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEFzYXBBY3Rpb24sIF9zdXBlcik7CiAgICBmdW5jdGlvbiBBc2FwQWN0aW9uKHNjaGVkdWxlciwgd29yaykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHNjaGVkdWxlciwgd29yaykgfHwgdGhpczsKICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgX3RoaXMud29yayA9IHdvcms7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQXNhcEFjdGlvbi5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQgPSBmdW5jdGlvbiAoc2NoZWR1bGVyLCBpZCwgZGVsYXkpIHsKICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgewogICAgICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgfQogICAgICAgIGlmIChkZWxheSAhPT0gbnVsbCAmJiBkZWxheSA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIGlkLCBkZWxheSk7CiAgICAgICAgfQogICAgICAgIHNjaGVkdWxlci5hY3Rpb25zLnB1c2godGhpcyk7CiAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZWQgfHwgKHNjaGVkdWxlci5zY2hlZHVsZWQgPSBfdXRpbF9JbW1lZGlhdGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siSW1tZWRpYXRlIl0uc2V0SW1tZWRpYXRlKHNjaGVkdWxlci5mbHVzaC5iaW5kKHNjaGVkdWxlciwgbnVsbCkpKTsKICAgIH07CiAgICBBc2FwQWN0aW9uLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkgewogICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIGRlbGF5ID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKChkZWxheSAhPT0gbnVsbCAmJiBkZWxheSA+IDApIHx8IChkZWxheSA9PT0gbnVsbCAmJiB0aGlzLmRlbGF5ID4gMCkpIHsKICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUucmVjeWNsZUFzeW5jSWQuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIGlkLCBkZWxheSk7CiAgICAgICAgfQogICAgICAgIGlmIChzY2hlZHVsZXIuYWN0aW9ucy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgX3V0aWxfSW1tZWRpYXRlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkltbWVkaWF0ZSJdLmNsZWFySW1tZWRpYXRlKGlkKTsKICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlZCA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH07CiAgICByZXR1cm4gQXNhcEFjdGlvbjsKfShfQXN5bmNBY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siQXN5bmNBY3Rpb24iXSkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXNhcEFjdGlvbi5qcy5tYXAKCgovKioqLyB9KSwKLyogODIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkltbWVkaWF0ZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gSW1tZWRpYXRlOyB9KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqLwp2YXIgbmV4dEhhbmRsZSA9IDE7CnZhciB0YXNrc0J5SGFuZGxlID0ge307CmZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHsKICAgIHZhciBjYiA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTsKICAgIGlmIChjYikgewogICAgICAgIGNiKCk7CiAgICB9Cn0KdmFyIEltbWVkaWF0ZSA9IHsKICAgIHNldEltbWVkaWF0ZTogZnVuY3Rpb24gKGNiKSB7CiAgICAgICAgdmFyIGhhbmRsZSA9IG5leHRIYW5kbGUrKzsKICAgICAgICB0YXNrc0J5SGFuZGxlW2hhbmRsZV0gPSBjYjsKICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTsKICAgICAgICByZXR1cm4gaGFuZGxlOwogICAgfSwKICAgIGNsZWFySW1tZWRpYXRlOiBmdW5jdGlvbiAoaGFuZGxlKSB7CiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTsKICAgIH0sCn07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPUltbWVkaWF0ZS5qcy5tYXAKCgovKioqLyB9KSwKLyogODMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkFzYXBTY2hlZHVsZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFzYXBTY2hlZHVsZXI7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX0FzeW5jU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfQXN5bmNTY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCnZhciBBc2FwU2NoZWR1bGVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oQXNhcFNjaGVkdWxlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEFzYXBTY2hlZHVsZXIoKSB7CiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgfQogICAgQXNhcFNjaGVkdWxlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlOwogICAgICAgIHRoaXMuc2NoZWR1bGVkID0gdW5kZWZpbmVkOwogICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5hY3Rpb25zOwogICAgICAgIHZhciBlcnJvcjsKICAgICAgICB2YXIgaW5kZXggPSAtMTsKICAgICAgICB2YXIgY291bnQgPSBhY3Rpb25zLmxlbmd0aDsKICAgICAgICBhY3Rpb24gPSBhY3Rpb24gfHwgYWN0aW9ucy5zaGlmdCgpOwogICAgICAgIGRvIHsKICAgICAgICAgICAgaWYgKGVycm9yID0gYWN0aW9uLmV4ZWN1dGUoYWN0aW9uLnN0YXRlLCBhY3Rpb24uZGVsYXkpKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0gd2hpbGUgKCsraW5kZXggPCBjb3VudCAmJiAoYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpKSk7CiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTsKICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBjb3VudCAmJiAoYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpKSkgewogICAgICAgICAgICAgICAgYWN0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBBc2FwU2NoZWR1bGVyOwp9KF9Bc3luY1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJBc3luY1NjaGVkdWxlciJdKSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1Bc2FwU2NoZWR1bGVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiA4NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiYXN5bmMiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFzeW5jOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9Bc3luY0FjdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfQXN5bmNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9Bc3luY0FjdGlvbixfQXN5bmNTY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCnZhciBhc3luYyA9IC8qQF9fUFVSRV9fKi8gbmV3IF9Bc3luY1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJBc3luY1NjaGVkdWxlciJdKF9Bc3luY0FjdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJBc3luY0FjdGlvbiJdKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXN5bmMuanMubWFwCgoKLyoqKi8gfSksCi8qIDg1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJhbmltYXRpb25GcmFtZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYW5pbWF0aW9uRnJhbWU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX0FuaW1hdGlvbkZyYW1lQWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9BbmltYXRpb25GcmFtZVNjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nyk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX0FuaW1hdGlvbkZyYW1lQWN0aW9uLF9BbmltYXRpb25GcmFtZVNjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKdmFyIGFuaW1hdGlvbkZyYW1lID0gLypAX19QVVJFX18qLyBuZXcgX0FuaW1hdGlvbkZyYW1lU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyIl0oX0FuaW1hdGlvbkZyYW1lQWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIkFuaW1hdGlvbkZyYW1lQWN0aW9uIl0pOwovLyMgc291cmNlTWFwcGluZ1VSTD1hbmltYXRpb25GcmFtZS5qcy5tYXAKCgovKioqLyB9KSwKLyogODYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkFuaW1hdGlvbkZyYW1lQWN0aW9uIiwgZnVuY3Rpb24oKSB7IHJldHVybiBBbmltYXRpb25GcmFtZUFjdGlvbjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfQXN5bmNBY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9Bc3luY0FjdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovCgoKdmFyIEFuaW1hdGlvbkZyYW1lQWN0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oQW5pbWF0aW9uRnJhbWVBY3Rpb24sIF9zdXBlcik7CiAgICBmdW5jdGlvbiBBbmltYXRpb25GcmFtZUFjdGlvbihzY2hlZHVsZXIsIHdvcmspIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIHdvcmspIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgICAgIF90aGlzLndvcmsgPSB3b3JrOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEFuaW1hdGlvbkZyYW1lQWN0aW9uLnByb3RvdHlwZS5yZXF1ZXN0QXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkgewogICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIGRlbGF5ID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKGRlbGF5ICE9PSBudWxsICYmIGRlbGF5ID4gMCkgewogICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5yZXF1ZXN0QXN5bmNJZC5jYWxsKHRoaXMsIHNjaGVkdWxlciwgaWQsIGRlbGF5KTsKICAgICAgICB9CiAgICAgICAgc2NoZWR1bGVyLmFjdGlvbnMucHVzaCh0aGlzKTsKICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlZCB8fCAoc2NoZWR1bGVyLnNjaGVkdWxlZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7IHJldHVybiBzY2hlZHVsZXIuZmx1c2gobnVsbCk7IH0pKTsKICAgIH07CiAgICBBbmltYXRpb25GcmFtZUFjdGlvbi5wcm90b3R5cGUucmVjeWNsZUFzeW5jSWQgPSBmdW5jdGlvbiAoc2NoZWR1bGVyLCBpZCwgZGVsYXkpIHsKICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgewogICAgICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgfQogICAgICAgIGlmICgoZGVsYXkgIT09IG51bGwgJiYgZGVsYXkgPiAwKSB8fCAoZGVsYXkgPT09IG51bGwgJiYgdGhpcy5kZWxheSA+IDApKSB7CiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLnJlY3ljbGVBc3luY0lkLmNhbGwodGhpcywgc2NoZWR1bGVyLCBpZCwgZGVsYXkpOwogICAgICAgIH0KICAgICAgICBpZiAoc2NoZWR1bGVyLmFjdGlvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTsKICAgICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlZCA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH07CiAgICByZXR1cm4gQW5pbWF0aW9uRnJhbWVBY3Rpb247Cn0oX0FzeW5jQWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkFzeW5jQWN0aW9uIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFuaW1hdGlvbkZyYW1lQWN0aW9uLmpzLm1hcAoKCi8qKiovIH0pLAovKiA4NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9Bc3luY1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX0FzeW5jU2NoZWR1bGVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgp2YXIgQW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShBbmltYXRpb25GcmFtZVNjaGVkdWxlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyKCkgewogICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKICAgIH0KICAgIEFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7CiAgICAgICAgdGhpcy5zY2hlZHVsZWQgPSB1bmRlZmluZWQ7CiAgICAgICAgdmFyIGFjdGlvbnMgPSB0aGlzLmFjdGlvbnM7CiAgICAgICAgdmFyIGVycm9yOwogICAgICAgIHZhciBpbmRleCA9IC0xOwogICAgICAgIHZhciBjb3VudCA9IGFjdGlvbnMubGVuZ3RoOwogICAgICAgIGFjdGlvbiA9IGFjdGlvbiB8fCBhY3Rpb25zLnNoaWZ0KCk7CiAgICAgICAgZG8gewogICAgICAgICAgICBpZiAoZXJyb3IgPSBhY3Rpb24uZXhlY3V0ZShhY3Rpb24uc3RhdGUsIGFjdGlvbi5kZWxheSkpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfSB3aGlsZSAoKytpbmRleCA8IGNvdW50ICYmIChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkpKTsKICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlOwogICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGNvdW50ICYmIChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkpKSB7CiAgICAgICAgICAgICAgICBhY3Rpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIEFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyOwp9KF9Bc3luY1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJBc3luY1NjaGVkdWxlciJdKSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1BbmltYXRpb25GcmFtZVNjaGVkdWxlci5qcy5tYXAKCgovKioqLyB9KSwKLyogODggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlZpcnR1YWxUaW1lU2NoZWR1bGVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBWaXJ0dWFsVGltZVNjaGVkdWxlcjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlZpcnR1YWxBY3Rpb24iLCBmdW5jdGlvbigpIHsgcmV0dXJuIFZpcnR1YWxBY3Rpb247IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX0FzeW5jQWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9Bc3luY1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX0FzeW5jQWN0aW9uLF9Bc3luY1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCnZhciBWaXJ0dWFsVGltZVNjaGVkdWxlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFZpcnR1YWxUaW1lU2NoZWR1bGVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVmlydHVhbFRpbWVTY2hlZHVsZXIoU2NoZWR1bGVyQWN0aW9uLCBtYXhGcmFtZXMpIHsKICAgICAgICBpZiAoU2NoZWR1bGVyQWN0aW9uID09PSB2b2lkIDApIHsKICAgICAgICAgICAgU2NoZWR1bGVyQWN0aW9uID0gVmlydHVhbEFjdGlvbjsKICAgICAgICB9CiAgICAgICAgaWYgKG1heEZyYW1lcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIG1heEZyYW1lcyA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgICAgICB9CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgU2NoZWR1bGVyQWN0aW9uLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5mcmFtZTsgfSkgfHwgdGhpczsKICAgICAgICBfdGhpcy5tYXhGcmFtZXMgPSBtYXhGcmFtZXM7CiAgICAgICAgX3RoaXMuZnJhbWUgPSAwOwogICAgICAgIF90aGlzLmluZGV4ID0gLTE7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgVmlydHVhbFRpbWVTY2hlZHVsZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMsIGFjdGlvbnMgPSBfYS5hY3Rpb25zLCBtYXhGcmFtZXMgPSBfYS5tYXhGcmFtZXM7CiAgICAgICAgdmFyIGVycm9yLCBhY3Rpb247CiAgICAgICAgd2hpbGUgKChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkpICYmICh0aGlzLmZyYW1lID0gYWN0aW9uLmRlbGF5KSA8PSBtYXhGcmFtZXMpIHsKICAgICAgICAgICAgaWYgKGVycm9yID0gYWN0aW9uLmV4ZWN1dGUoYWN0aW9uLnN0YXRlLCBhY3Rpb24uZGVsYXkpKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgd2hpbGUgKGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKSkgewogICAgICAgICAgICAgICAgYWN0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgfQogICAgfTsKICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyLmZyYW1lVGltZUZhY3RvciA9IDEwOwogICAgcmV0dXJuIFZpcnR1YWxUaW1lU2NoZWR1bGVyOwp9KF9Bc3luY1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJBc3luY1NjaGVkdWxlciJdKSk7Cgp2YXIgVmlydHVhbEFjdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFZpcnR1YWxBY3Rpb24sIF9zdXBlcik7CiAgICBmdW5jdGlvbiBWaXJ0dWFsQWN0aW9uKHNjaGVkdWxlciwgd29yaywgaW5kZXgpIHsKICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgewogICAgICAgICAgICBpbmRleCA9IHNjaGVkdWxlci5pbmRleCArPSAxOwogICAgICAgIH0KICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIHdvcmspIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgICAgIF90aGlzLndvcmsgPSB3b3JrOwogICAgICAgIF90aGlzLmluZGV4ID0gaW5kZXg7CiAgICAgICAgX3RoaXMuYWN0aXZlID0gdHJ1ZTsKICAgICAgICBfdGhpcy5pbmRleCA9IHNjaGVkdWxlci5pbmRleCA9IGluZGV4OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFZpcnR1YWxBY3Rpb24ucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkgewogICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIGRlbGF5ID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLmlkKSB7CiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLnNjaGVkdWxlLmNhbGwodGhpcywgc3RhdGUsIGRlbGF5KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTsKICAgICAgICB2YXIgYWN0aW9uID0gbmV3IFZpcnR1YWxBY3Rpb24odGhpcy5zY2hlZHVsZXIsIHRoaXMud29yayk7CiAgICAgICAgdGhpcy5hZGQoYWN0aW9uKTsKICAgICAgICByZXR1cm4gYWN0aW9uLnNjaGVkdWxlKHN0YXRlLCBkZWxheSk7CiAgICB9OwogICAgVmlydHVhbEFjdGlvbi5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQgPSBmdW5jdGlvbiAoc2NoZWR1bGVyLCBpZCwgZGVsYXkpIHsKICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgewogICAgICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgfQogICAgICAgIHRoaXMuZGVsYXkgPSBzY2hlZHVsZXIuZnJhbWUgKyBkZWxheTsKICAgICAgICB2YXIgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zOwogICAgICAgIGFjdGlvbnMucHVzaCh0aGlzKTsKICAgICAgICBhY3Rpb25zLnNvcnQoVmlydHVhbEFjdGlvbi5zb3J0QWN0aW9ucyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgVmlydHVhbEFjdGlvbi5wcm90b3R5cGUucmVjeWNsZUFzeW5jSWQgPSBmdW5jdGlvbiAoc2NoZWR1bGVyLCBpZCwgZGVsYXkpIHsKICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgewogICAgICAgICAgICBkZWxheSA9IDA7CiAgICAgICAgfQogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9OwogICAgVmlydHVhbEFjdGlvbi5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7CiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl9leGVjdXRlLmNhbGwodGhpcywgc3RhdGUsIGRlbGF5KTsKICAgICAgICB9CiAgICB9OwogICAgVmlydHVhbEFjdGlvbi5zb3J0QWN0aW9ucyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgaWYgKGEuZGVsYXkgPT09IGIuZGVsYXkpIHsKICAgICAgICAgICAgaWYgKGEuaW5kZXggPT09IGIuaW5kZXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGEuaW5kZXggPiBiLmluZGV4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChhLmRlbGF5ID4gYi5kZWxheSkgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFZpcnR1YWxBY3Rpb247Cn0oX0FzeW5jQWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkFzeW5jQWN0aW9uIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpcnR1YWxUaW1lU2NoZWR1bGVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiA4OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaWRlbnRpdHkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlkZW50aXR5OyB9KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqLwpmdW5jdGlvbiBpZGVudGl0eSh4KSB7CiAgICByZXR1cm4geDsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1pZGVudGl0eS5qcy5tYXAKCgovKioqLyB9KSwKLyogOTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlzT2JzZXJ2YWJsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNPYnNlcnZhYmxlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovCgpmdW5jdGlvbiBpc09ic2VydmFibGUob2JqKSB7CiAgICByZXR1cm4gISFvYmogJiYgKG9iaiBpbnN0YW5jZW9mIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXSB8fCAodHlwZW9mIG9iai5saWZ0ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nKSk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNPYnNlcnZhYmxlLmpzLm1hcAoKCi8qKiovIH0pLAovKiA5MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYiBQVVJFX0lNUE9SVFNfRU5EICovCgp2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShBcmd1bWVudE91dE9mUmFuZ2VFcnJvciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdhcmd1bWVudCBvdXQgb2YgcmFuZ2UnKSB8fCB0aGlzOwogICAgICAgIF90aGlzLm5hbWUgPSAnQXJndW1lbnRPdXRPZlJhbmdlRXJyb3InOwogICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IucHJvdG90eXBlKTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICByZXR1cm4gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3I7Cn0oRXJyb3IpKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLmpzLm1hcAoKCi8qKiovIH0pLAovKiA5MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiRW1wdHlFcnJvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRW1wdHlFcnJvcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIgUFVSRV9JTVBPUlRTX0VORCAqLwoKdmFyIEVtcHR5RXJyb3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShFbXB0eUVycm9yLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gRW1wdHlFcnJvcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnbm8gZWxlbWVudHMgaW4gc2VxdWVuY2UnKSB8fCB0aGlzOwogICAgICAgIF90aGlzLm5hbWUgPSAnRW1wdHlFcnJvcic7CiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBFbXB0eUVycm9yLnByb3RvdHlwZSk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgcmV0dXJuIEVtcHR5RXJyb3I7Cn0oRXJyb3IpKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVtcHR5RXJyb3IuanMubWFwCgoKLyoqKi8gfSksCi8qIDkzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJUaW1lb3V0RXJyb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFRpbWVvdXRFcnJvcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIgUFVSRV9JTVBPUlRTX0VORCAqLwoKdmFyIFRpbWVvdXRFcnJvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFRpbWVvdXRFcnJvciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFRpbWVvdXRFcnJvcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnVGltZW91dCBoYXMgb2NjdXJyZWQnKSB8fCB0aGlzOwogICAgICAgIF90aGlzLm5hbWUgPSAnVGltZW91dEVycm9yJzsKICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoX3RoaXMsIFRpbWVvdXRFcnJvci5wcm90b3R5cGUpOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIHJldHVybiBUaW1lb3V0RXJyb3I7Cn0oRXJyb3IpKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbWVvdXRFcnJvci5qcy5tYXAKCgovKioqLyB9KSwKLyogOTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImJpbmRDYWxsYmFjayIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYmluZENhbGxiYWNrOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9Bc3luY1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29wZXJhdG9yc19tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX0FzeW5jU3ViamVjdCxfb3BlcmF0b3JzX21hcCxfdXRpbF9pc0FycmF5LF91dGlsX2lzU2NoZWR1bGVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgpmdW5jdGlvbiBiaW5kQ2FsbGJhY2soY2FsbGJhY2tGdW5jLCByZXN1bHRTZWxlY3Rvciwgc2NoZWR1bGVyKSB7CiAgICBpZiAocmVzdWx0U2VsZWN0b3IpIHsKICAgICAgICBpZiAoT2JqZWN0KF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImlzU2NoZWR1bGVyIl0pKHJlc3VsdFNlbGVjdG9yKSkgewogICAgICAgICAgICBzY2hlZHVsZXIgPSByZXN1bHRTZWxlY3RvcjsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gYmluZENhbGxiYWNrKGNhbGxiYWNrRnVuYywgc2NoZWR1bGVyKS5hcHBseSh2b2lkIDAsIGFyZ3MpLnBpcGUoT2JqZWN0KF9vcGVyYXRvcnNfbWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIm1hcCJdKShmdW5jdGlvbiAoYXJncykgeyByZXR1cm4gT2JqZWN0KF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siaXNBcnJheSJdKShhcmdzKSA/IHJlc3VsdFNlbGVjdG9yLmFwcGx5KHZvaWQgMCwgYXJncykgOiByZXN1bHRTZWxlY3RvcihhcmdzKTsgfSkpOwogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICAgICAgfQogICAgICAgIHZhciBjb250ZXh0ID0gdGhpczsKICAgICAgICB2YXIgc3ViamVjdDsKICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LAogICAgICAgICAgICBzdWJqZWN0OiBzdWJqZWN0LAogICAgICAgICAgICBjYWxsYmFja0Z1bmM6IGNhbGxiYWNrRnVuYywKICAgICAgICAgICAgc2NoZWR1bGVyOiBzY2hlZHVsZXIsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgICAgICBpZiAoIXNjaGVkdWxlcikgewogICAgICAgICAgICAgICAgaWYgKCFzdWJqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgc3ViamVjdCA9IG5ldyBfQXN5bmNTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkFzeW5jU3ViamVjdCJdKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChpbm5lckFyZ3MubGVuZ3RoIDw9IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja0Z1bmMuYXBwbHkoY29udGV4dCwgYXJncy5jb25jYXQoW2hhbmRsZXJdKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICAgICAgICAgICAgICBhcmdzOiBhcmdzLCBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLCBwYXJhbXM6IHBhcmFtcywKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoLCAwLCBzdGF0ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH07Cn0KZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgYXJncyA9IHN0YXRlLmFyZ3MsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBwYXJhbXMgPSBzdGF0ZS5wYXJhbXM7CiAgICB2YXIgY2FsbGJhY2tGdW5jID0gcGFyYW1zLmNhbGxiYWNrRnVuYywgY29udGV4dCA9IHBhcmFtcy5jb250ZXh0LCBzY2hlZHVsZXIgPSBwYXJhbXMuc2NoZWR1bGVyOwogICAgdmFyIHN1YmplY3QgPSBwYXJhbXMuc3ViamVjdDsKICAgIGlmICghc3ViamVjdCkgewogICAgICAgIHN1YmplY3QgPSBwYXJhbXMuc3ViamVjdCA9IG5ldyBfQXN5bmNTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkFzeW5jU3ViamVjdCJdKCk7CiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlubmVyQXJncy5sZW5ndGggPD0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJnczsKICAgICAgICAgICAgX3RoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIDAsIHsgdmFsdWU6IHZhbHVlLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTsKICAgICAgICB9OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNhbGxiYWNrRnVuYy5hcHBseShjb250ZXh0LCBhcmdzLmNvbmNhdChbaGFuZGxlcl0pKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICBzdWJqZWN0LmVycm9yKGVycik7CiAgICAgICAgfQogICAgfQogICAgdGhpcy5hZGQoc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcikpOwp9CmZ1bmN0aW9uIGRpc3BhdGNoTmV4dChzdGF0ZSkgewogICAgdmFyIHZhbHVlID0gc3RhdGUudmFsdWUsIHN1YmplY3QgPSBzdGF0ZS5zdWJqZWN0OwogICAgc3ViamVjdC5uZXh0KHZhbHVlKTsKICAgIHN1YmplY3QuY29tcGxldGUoKTsKfQpmdW5jdGlvbiBkaXNwYXRjaEVycm9yKHN0YXRlKSB7CiAgICB2YXIgZXJyID0gc3RhdGUuZXJyLCBzdWJqZWN0ID0gc3RhdGUuc3ViamVjdDsKICAgIHN1YmplY3QuZXJyb3IoZXJyKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kQ2FsbGJhY2suanMubWFwCgoKLyoqKi8gfSksCi8qIDk1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtYXAiLCBmdW5jdGlvbigpIHsgcmV0dXJuIG1hcDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk1hcE9wZXJhdG9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBNYXBPcGVyYXRvcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIG1hcChwcm9qZWN0LCB0aGlzQXJnKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gbWFwT3BlcmF0aW9uKHNvdXJjZSkgewogICAgICAgIGlmICh0eXBlb2YgcHJvamVjdCAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4gQXJlIHlvdSBsb29raW5nIGZvciBgbWFwVG8oKWA/Jyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgTWFwT3BlcmF0b3IocHJvamVjdCwgdGhpc0FyZykpOwogICAgfTsKfQp2YXIgTWFwT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSB7CiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDsKICAgICAgICB0aGlzLnRoaXNBcmcgPSB0aGlzQXJnOwogICAgfQogICAgTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IE1hcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLnRoaXNBcmcpKTsKICAgIH07CiAgICByZXR1cm4gTWFwT3BlcmF0b3I7Cn0oKSk7Cgp2YXIgTWFwU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKE1hcFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB0aGlzQXJnKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJvamVjdCA9IHByb2plY3Q7CiAgICAgICAgX3RoaXMuY291bnQgPSAwOwogICAgICAgIF90aGlzLnRoaXNBcmcgPSB0aGlzQXJnIHx8IF90aGlzOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuY2FsbCh0aGlzLnRoaXNBcmcsIHZhbHVlLCB0aGlzLmNvdW50KyspOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTsKICAgIH07CiAgICByZXR1cm4gTWFwU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcAoKCi8qKiovIH0pLAovKiA5NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiYmluZE5vZGVDYWxsYmFjayIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYmluZE5vZGVDYWxsYmFjazsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfQXN5bmNTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vcGVyYXRvcnNfbWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF9Bc3luY1N1YmplY3QsX29wZXJhdG9yc19tYXAsX3V0aWxfaXNTY2hlZHVsZXIsX3V0aWxfaXNBcnJheSBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gYmluZE5vZGVDYWxsYmFjayhjYWxsYmFja0Z1bmMsIHJlc3VsdFNlbGVjdG9yLCBzY2hlZHVsZXIpIHsKICAgIGlmIChyZXN1bHRTZWxlY3RvcikgewogICAgICAgIGlmIChPYmplY3QoX3V0aWxfaXNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siaXNTY2hlZHVsZXIiXSkocmVzdWx0U2VsZWN0b3IpKSB7CiAgICAgICAgICAgIHNjaGVkdWxlciA9IHJlc3VsdFNlbGVjdG9yOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBiaW5kTm9kZUNhbGxiYWNrKGNhbGxiYWNrRnVuYywgc2NoZWR1bGVyKS5hcHBseSh2b2lkIDAsIGFyZ3MpLnBpcGUoT2JqZWN0KF9vcGVyYXRvcnNfbWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIm1hcCJdKShmdW5jdGlvbiAoYXJncykgeyByZXR1cm4gT2JqZWN0KF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siaXNBcnJheSJdKShhcmdzKSA/IHJlc3VsdFNlbGVjdG9yLmFwcGx5KHZvaWQgMCwgYXJncykgOiByZXN1bHRTZWxlY3RvcihhcmdzKTsgfSkpOwogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICAgICAgfQogICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgIHN1YmplY3Q6IHVuZGVmaW5lZCwKICAgICAgICAgICAgYXJnczogYXJncywKICAgICAgICAgICAgY2FsbGJhY2tGdW5jOiBjYWxsYmFja0Z1bmMsCiAgICAgICAgICAgIHNjaGVkdWxlcjogc2NoZWR1bGVyLAogICAgICAgICAgICBjb250ZXh0OiB0aGlzLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJPYnNlcnZhYmxlIl0oZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBwYXJhbXMuY29udGV4dDsKICAgICAgICAgICAgdmFyIHN1YmplY3QgPSBwYXJhbXMuc3ViamVjdDsKICAgICAgICAgICAgaWYgKCFzY2hlZHVsZXIpIHsKICAgICAgICAgICAgICAgIGlmICghc3ViamVjdCkgewogICAgICAgICAgICAgICAgICAgIHN1YmplY3QgPSBwYXJhbXMuc3ViamVjdCA9IG5ldyBfQXN5bmNTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkFzeW5jU3ViamVjdCJdKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBpbm5lckFyZ3Muc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3QubmV4dChpbm5lckFyZ3MubGVuZ3RoIDw9IDEgPyBpbm5lckFyZ3NbMF0gOiBpbm5lckFyZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0LmNvbXBsZXRlKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja0Z1bmMuYXBwbHkoY29udGV4dCwgYXJncy5jb25jYXQoW2hhbmRsZXJdKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2gsIDAsIHsgcGFyYW1zOiBwYXJhbXMsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIsIGNvbnRleHQ6IGNvbnRleHQgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH07Cn0KZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB2YXIgcGFyYW1zID0gc3RhdGUucGFyYW1zLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgY29udGV4dCA9IHN0YXRlLmNvbnRleHQ7CiAgICB2YXIgY2FsbGJhY2tGdW5jID0gcGFyYW1zLmNhbGxiYWNrRnVuYywgYXJncyA9IHBhcmFtcy5hcmdzLCBzY2hlZHVsZXIgPSBwYXJhbXMuc2NoZWR1bGVyOwogICAgdmFyIHN1YmplY3QgPSBwYXJhbXMuc3ViamVjdDsKICAgIGlmICghc3ViamVjdCkgewogICAgICAgIHN1YmplY3QgPSBwYXJhbXMuc3ViamVjdCA9IG5ldyBfQXN5bmNTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIkFzeW5jU3ViamVjdCJdKCk7CiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBpbm5lckFyZ3MgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgIGlubmVyQXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlcnIgPSBpbm5lckFyZ3Muc2hpZnQoKTsKICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgX3RoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEVycm9yLCAwLCB7IGVycjogZXJyLCBzdWJqZWN0OiBzdWJqZWN0IH0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlubmVyQXJncy5sZW5ndGggPD0gMSA/IGlubmVyQXJnc1swXSA6IGlubmVyQXJnczsKICAgICAgICAgICAgICAgIF90aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hOZXh0LCAwLCB7IHZhbHVlOiB2YWx1ZSwgc3ViamVjdDogc3ViamVjdCB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNhbGxiYWNrRnVuYy5hcHBseShjb250ZXh0LCBhcmdzLmNvbmNhdChbaGFuZGxlcl0pKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hFcnJvciwgMCwgeyBlcnI6IGVyciwgc3ViamVjdDogc3ViamVjdCB9KSk7CiAgICAgICAgfQogICAgfQogICAgdGhpcy5hZGQoc3ViamVjdC5zdWJzY3JpYmUoc3Vic2NyaWJlcikpOwp9CmZ1bmN0aW9uIGRpc3BhdGNoTmV4dChhcmcpIHsKICAgIHZhciB2YWx1ZSA9IGFyZy52YWx1ZSwgc3ViamVjdCA9IGFyZy5zdWJqZWN0OwogICAgc3ViamVjdC5uZXh0KHZhbHVlKTsKICAgIHN1YmplY3QuY29tcGxldGUoKTsKfQpmdW5jdGlvbiBkaXNwYXRjaEVycm9yKGFyZykgewogICAgdmFyIGVyciA9IGFyZy5lcnIsIHN1YmplY3QgPSBhcmcuc3ViamVjdDsKICAgIHN1YmplY3QuZXJyb3IoZXJyKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kTm9kZUNhbGxiYWNrLmpzLm1hcAoKCi8qKiovIH0pLAovKiA5NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY29tYmluZUxhdGVzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY29tYmluZUxhdGVzdDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkNvbWJpbmVMYXRlc3RPcGVyYXRvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gQ29tYmluZUxhdGVzdE9wZXJhdG9yOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiQ29tYmluZUxhdGVzdFN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfdXRpbF9pc1NjaGVkdWxlcixfdXRpbF9pc0FycmF5LF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQsX2Zyb21BcnJheSBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCnZhciBOT05FID0ge307CmZ1bmN0aW9uIGNvbWJpbmVMYXRlc3QoKSB7CiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTsKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgb2JzZXJ2YWJsZXNbX2ldID0gYXJndW1lbnRzW19pXTsKICAgIH0KICAgIHZhciByZXN1bHRTZWxlY3RvciA9IG51bGw7CiAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDsKICAgIGlmIChPYmplY3QoX3V0aWxfaXNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siaXNTY2hlZHVsZXIiXSkob2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0pKSB7CiAgICAgICAgc2NoZWR1bGVyID0gb2JzZXJ2YWJsZXMucG9wKCk7CiAgICB9CiAgICBpZiAodHlwZW9mIG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSBvYnNlcnZhYmxlcy5wb3AoKTsKICAgIH0KICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgJiYgT2JqZWN0KF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siaXNBcnJheSJdKShvYnNlcnZhYmxlc1swXSkpIHsKICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdOwogICAgfQogICAgcmV0dXJuIE9iamVjdChfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bImZyb21BcnJheSJdKShvYnNlcnZhYmxlcywgc2NoZWR1bGVyKS5saWZ0KG5ldyBDb21iaW5lTGF0ZXN0T3BlcmF0b3IocmVzdWx0U2VsZWN0b3IpKTsKfQp2YXIgQ29tYmluZUxhdGVzdE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdE9wZXJhdG9yKHJlc3VsdFNlbGVjdG9yKSB7CiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yOwogICAgfQogICAgQ29tYmluZUxhdGVzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnJlc3VsdFNlbGVjdG9yKSk7CiAgICB9OwogICAgcmV0dXJuIENvbWJpbmVMYXRlc3RPcGVyYXRvcjsKfSgpKTsKCnZhciBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHJlc3VsdFNlbGVjdG9yKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjsKICAgICAgICBfdGhpcy5hY3RpdmUgPSAwOwogICAgICAgIF90aGlzLnZhbHVlcyA9IFtdOwogICAgICAgIF90aGlzLm9ic2VydmFibGVzID0gW107CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHsKICAgICAgICB0aGlzLnZhbHVlcy5wdXNoKE5PTkUpOwogICAgICAgIHRoaXMub2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlKTsKICAgIH07CiAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IHRoaXMub2JzZXJ2YWJsZXM7CiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmFibGVzLmxlbmd0aDsKICAgICAgICBpZiAobGVuID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gbGVuOwogICAgICAgICAgICB0aGlzLnRvUmVzcG9uZCA9IGxlbjsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBvYnNlcnZhYmxlc1tpXTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkKE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKSh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKHVudXNlZCkgewogICAgICAgIGlmICgodGhpcy5hY3RpdmUgLT0gMSkgPT09IDApIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgIH07CiAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKICAgICAgICB2YXIgb2xkVmFsID0gdmFsdWVzW291dGVySW5kZXhdOwogICAgICAgIHZhciB0b1Jlc3BvbmQgPSAhdGhpcy50b1Jlc3BvbmQKICAgICAgICAgICAgPyAwCiAgICAgICAgICAgIDogb2xkVmFsID09PSBOT05FID8gLS10aGlzLnRvUmVzcG9uZCA6IHRoaXMudG9SZXNwb25kOwogICAgICAgIHZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7CiAgICAgICAgaWYgKHRvUmVzcG9uZCA9PT0gMCkgewogICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3RvcikgewogICAgICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZXMuc2xpY2UoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgQ29tYmluZUxhdGVzdFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlSZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZXMpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3IuYXBwbHkodGhpcywgdmFsdWVzKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7CiAgICB9OwogICAgcmV0dXJuIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVMYXRlc3QuanMubWFwCgoKLyoqKi8gfSksCi8qIDk4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJPdXRlclN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIE91dGVyU3Vic2NyaWJlcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCnZhciBPdXRlclN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShPdXRlclN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBPdXRlclN1YnNjcmliZXIoKSB7CiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgfQogICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpOwogICAgfTsKICAgIE91dGVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvcik7CiAgICB9OwogICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgIH07CiAgICByZXR1cm4gT3V0ZXJTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3V0ZXJTdWJzY3JpYmVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiA5OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic3Vic2NyaWJlVG9SZXN1bHQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN1YnNjcmliZVRvUmVzdWx0OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9Jbm5lclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdWJzY3JpYmVUb19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9Jbm5lclN1YnNjcmliZXIsX3N1YnNjcmliZVRvIFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBzdWJzY3JpYmVUb1Jlc3VsdChvdXRlclN1YnNjcmliZXIsIHJlc3VsdCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkgewogICAgdmFyIGRlc3RpbmF0aW9uID0gbmV3IF9Jbm5lclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siSW5uZXJTdWJzY3JpYmVyIl0ob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KTsKICAgIHJldHVybiBPYmplY3QoX3N1YnNjcmliZVRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInN1YnNjcmliZVRvIl0pKHJlc3VsdCkoZGVzdGluYXRpb24pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvUmVzdWx0LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIklubmVyU3Vic2NyaWJlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gSW5uZXJTdWJzY3JpYmVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKdmFyIElubmVyU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKElubmVyU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIElubmVyU3Vic2NyaWJlcihwYXJlbnQsIG91dGVyVmFsdWUsIG91dGVySW5kZXgpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDsKICAgICAgICBfdGhpcy5vdXRlclZhbHVlID0gb3V0ZXJWYWx1ZTsKICAgICAgICBfdGhpcy5vdXRlckluZGV4ID0gb3V0ZXJJbmRleDsKICAgICAgICBfdGhpcy5pbmRleCA9IDA7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgSW5uZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeU5leHQodGhpcy5vdXRlclZhbHVlLCB2YWx1ZSwgdGhpcy5vdXRlckluZGV4LCB0aGlzLmluZGV4KyssIHRoaXMpOwogICAgfTsKICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5RXJyb3IoZXJyb3IsIHRoaXMpOwogICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgIH07CiAgICBJbm5lclN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlDb21wbGV0ZSh0aGlzKTsKICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7CiAgICB9OwogICAgcmV0dXJuIElubmVyU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlubmVyU3Vic2NyaWJlci5qcy5tYXAKCgovKioqLyB9KSwKLyogMTAxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzdWJzY3JpYmVUbyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3Vic2NyaWJlVG87IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N1YnNjcmliZVRvQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N1YnNjcmliZVRvUHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N1YnNjcmliZVRvSXRlcmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAzKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdWJzY3JpYmVUb09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pc0FycmF5TGlrZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2lzUHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2lzT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zeW1ib2xfaXRlcmF0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA0KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zeW1ib2xfb2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX3N1YnNjcmliZVRvQXJyYXksX3N1YnNjcmliZVRvUHJvbWlzZSxfc3Vic2NyaWJlVG9JdGVyYWJsZSxfc3Vic2NyaWJlVG9PYnNlcnZhYmxlLF9pc0FycmF5TGlrZSxfaXNQcm9taXNlLF9pc09iamVjdCxfc3ltYm9sX2l0ZXJhdG9yLF9zeW1ib2xfb2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCgoKCgp2YXIgc3Vic2NyaWJlVG8gPSBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgICAgIGlmIChyZXN1bHQuX2lzU2NhbGFyKSB7CiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzdWx0LnZhbHVlKTsKICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTsKICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShzdWJzY3JpYmVyKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9CiAgICBlbHNlIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtfc3ltYm9sX29ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1sib2JzZXJ2YWJsZSJdXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiBPYmplY3QoX3N1YnNjcmliZVRvT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJzdWJzY3JpYmVUb09ic2VydmFibGUiXSkocmVzdWx0KTsKICAgIH0KICAgIGVsc2UgaWYgKE9iamVjdChfaXNBcnJheUxpa2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siaXNBcnJheUxpa2UiXSkocmVzdWx0KSkgewogICAgICAgIHJldHVybiBPYmplY3QoX3N1YnNjcmliZVRvQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1sic3Vic2NyaWJlVG9BcnJheSJdKShyZXN1bHQpOwogICAgfQogICAgZWxzZSBpZiAoT2JqZWN0KF9pc1Byb21pc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1siaXNQcm9taXNlIl0pKHJlc3VsdCkpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KF9zdWJzY3JpYmVUb1Byb21pc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9Qcm9taXNlIl0pKHJlc3VsdCk7CiAgICB9CiAgICBlbHNlIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtfc3ltYm9sX2l0ZXJhdG9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bIml0ZXJhdG9yIl1dID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChfc3Vic2NyaWJlVG9JdGVyYWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJzdWJzY3JpYmVUb0l0ZXJhYmxlIl0pKHJlc3VsdCk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICB2YXIgdmFsdWUgPSBPYmplY3QoX2lzT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bImlzT2JqZWN0Il0pKHJlc3VsdCkgPyAnYW4gaW52YWxpZCBvYmplY3QnIDogIiciICsgcmVzdWx0ICsgIiciOwogICAgICAgIHZhciBtc2cgPSAiWW91IHByb3ZpZGVkICIgKyB2YWx1ZSArICIgd2hlcmUgYSBzdHJlYW0gd2FzIGV4cGVjdGVkLiIKICAgICAgICAgICAgKyAnIFlvdSBjYW4gcHJvdmlkZSBhbiBPYnNlcnZhYmxlLCBQcm9taXNlLCBBcnJheSwgb3IgSXRlcmFibGUuJzsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKG1zZyk7CiAgICB9Cn07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMDIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInN1YnNjcmliZVRvUHJvbWlzZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3Vic2NyaWJlVG9Qcm9taXNlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9ob3N0UmVwb3J0RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqLwoKdmFyIHN1YnNjcmliZVRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIGlmICghc3Vic2NyaWJlci5jbG9zZWQpIHsKICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7CiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBzdWJzY3JpYmVyLmVycm9yKGVycik7IH0pCiAgICAgICAgICAgIC50aGVuKG51bGwsIF9ob3N0UmVwb3J0RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siaG9zdFJlcG9ydEVycm9yIl0pOwogICAgICAgIHJldHVybiBzdWJzY3JpYmVyOwogICAgfTsKfTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9Qcm9taXNlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInN1YnNjcmliZVRvSXRlcmFibGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN1YnNjcmliZVRvSXRlcmFibGU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N5bWJvbF9pdGVyYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9zeW1ib2xfaXRlcmF0b3IgUFVSRV9JTVBPUlRTX0VORCAqLwoKdmFyIHN1YnNjcmliZVRvSXRlcmFibGUgPSBmdW5jdGlvbiAoaXRlcmFibGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhYmxlW19zeW1ib2xfaXRlcmF0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siaXRlcmF0b3IiXV0oKTsKICAgICAgICBkbyB7CiAgICAgICAgICAgIHZhciBpdGVtID0gaXRlcmF0b3IubmV4dCgpOwogICAgICAgICAgICBpZiAoaXRlbS5kb25lKSB7CiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoaXRlbS52YWx1ZSk7CiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9IHdoaWxlICh0cnVlKTsKICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yLnJldHVybiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBzdWJzY3JpYmVyLmFkZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlcmF0b3IucmV0dXJuKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjsKICAgIH07Cn07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvSXRlcmFibGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDEwNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZ2V0U3ltYm9sSXRlcmF0b3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldFN5bWJvbEl0ZXJhdG9yOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaXRlcmF0b3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGl0ZXJhdG9yOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiJCRpdGVyYXRvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gJCRpdGVyYXRvcjsgfSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KZnVuY3Rpb24gZ2V0U3ltYm9sSXRlcmF0b3IoKSB7CiAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ2Z1bmN0aW9uJyB8fCAhU3ltYm9sLml0ZXJhdG9yKSB7CiAgICAgICAgcmV0dXJuICdAQGl0ZXJhdG9yJzsKICAgIH0KICAgIHJldHVybiBTeW1ib2wuaXRlcmF0b3I7Cn0KdmFyIGl0ZXJhdG9yID0gLypAX19QVVJFX18qLyBnZXRTeW1ib2xJdGVyYXRvcigpOwp2YXIgJCRpdGVyYXRvciA9IGl0ZXJhdG9yOwovLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYXRvci5qcy5tYXAKCgovKioqLyB9KSwKLyogMTA1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzdWJzY3JpYmVUb09ic2VydmFibGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN1YnNjcmliZVRvT2JzZXJ2YWJsZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3ltYm9sX29ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9zeW1ib2xfb2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovCgp2YXIgc3Vic2NyaWJlVG9PYnNlcnZhYmxlID0gZnVuY3Rpb24gKG9iaikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIG9icyA9IG9ialtfc3ltYm9sX29ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sib2JzZXJ2YWJsZSJdXSgpOwogICAgICAgIGlmICh0eXBlb2Ygb2JzLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm92aWRlZCBvYmplY3QgZG9lcyBub3QgY29ycmVjdGx5IGltcGxlbWVudCBTeW1ib2wub2JzZXJ2YWJsZScpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG9icy5zdWJzY3JpYmUoc3Vic2NyaWJlcik7CiAgICAgICAgfQogICAgfTsKfTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9PYnNlcnZhYmxlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlzQXJyYXlMaWtlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpc0FycmF5TGlrZTsgfSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KdmFyIGlzQXJyYXlMaWtlID0gKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHggIT09ICdmdW5jdGlvbic7IH0pOwovLyMgc291cmNlTWFwcGluZ1VSTD1pc0FycmF5TGlrZS5qcy5tYXAKCgovKioqLyB9KSwKLyogMTA3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpc1Byb21pc2UiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzUHJvbWlzZTsgfSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KZnVuY3Rpb24gaXNQcm9taXNlKHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJzsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1pc1Byb21pc2UuanMubWFwCgoKLyoqKi8gfSksCi8qIDEwOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY29uY2F0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb25jYXQ7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29mX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9mcm9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb3BlcmF0b3JzX2NvbmNhdEFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX2lzU2NoZWR1bGVyLF9vZixfZnJvbSxfb3BlcmF0b3JzX2NvbmNhdEFsbCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgpmdW5jdGlvbiBjb25jYXQoKSB7CiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTsKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgb2JzZXJ2YWJsZXNbX2ldID0gYXJndW1lbnRzW19pXTsKICAgIH0KICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgfHwgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMiAmJiBPYmplY3QoX3V0aWxfaXNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siaXNTY2hlZHVsZXIiXSkob2JzZXJ2YWJsZXNbMV0pKSkgewogICAgICAgIHJldHVybiBPYmplY3QoX2Zyb21fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZnJvbSJdKShvYnNlcnZhYmxlc1swXSk7CiAgICB9CiAgICByZXR1cm4gT2JqZWN0KF9vcGVyYXRvcnNfY29uY2F0QWxsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImNvbmNhdEFsbCJdKSgpKF9vZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJvZiJdLmFwcGx5KHZvaWQgMCwgb2JzZXJ2YWJsZXMpKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwCgoKLyoqKi8gfSksCi8qIDEwOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZnJvbSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZnJvbTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc1Byb21pc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzQXJyYXlMaWtlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0ludGVyb3BPYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0l0ZXJhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9mcm9tUHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTIpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Zyb21JdGVyYWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTMpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Zyb21PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF91dGlsX2lzUHJvbWlzZSxfdXRpbF9pc0FycmF5TGlrZSxfdXRpbF9pc0ludGVyb3BPYnNlcnZhYmxlLF91dGlsX2lzSXRlcmFibGUsX2Zyb21BcnJheSxfZnJvbVByb21pc2UsX2Zyb21JdGVyYWJsZSxfZnJvbU9ic2VydmFibGUsX3V0aWxfc3Vic2NyaWJlVG8gUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKCgoKCgoKZnVuY3Rpb24gZnJvbShpbnB1dCwgc2NoZWR1bGVyKSB7CiAgICBpZiAoIXNjaGVkdWxlcikgewogICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXSkgewogICAgICAgICAgICByZXR1cm4gaW5wdXQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fWyJzdWJzY3JpYmVUbyJdKShpbnB1dCkpOwogICAgfQogICAgaWYgKGlucHV0ICE9IG51bGwpIHsKICAgICAgICBpZiAoT2JqZWN0KF91dGlsX2lzSW50ZXJvcE9ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siaXNJbnRlcm9wT2JzZXJ2YWJsZSJdKShpbnB1dCkpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdChfZnJvbU9ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1siZnJvbU9ic2VydmFibGUiXSkoaW5wdXQsIHNjaGVkdWxlcik7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKE9iamVjdChfdXRpbF9pc1Byb21pc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siaXNQcm9taXNlIl0pKGlucHV0KSkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KF9mcm9tUHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fWyJmcm9tUHJvbWlzZSJdKShpbnB1dCwgc2NoZWR1bGVyKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoT2JqZWN0KF91dGlsX2lzQXJyYXlMaWtlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImlzQXJyYXlMaWtlIl0pKGlucHV0KSkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KF9mcm9tQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siZnJvbUFycmF5Il0pKGlucHV0LCBzY2hlZHVsZXIpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChPYmplY3QoX3V0aWxfaXNJdGVyYWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJpc0l0ZXJhYmxlIl0pKGlucHV0KSB8fCB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QoX2Zyb21JdGVyYWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fWyJmcm9tSXRlcmFibGUiXSkoaW5wdXQsIHNjaGVkdWxlcik7CiAgICAgICAgfQogICAgfQogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigoaW5wdXQgIT09IG51bGwgJiYgdHlwZW9mIGlucHV0IHx8IGlucHV0KSArICcgaXMgbm90IG9ic2VydmFibGUnKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlzSW50ZXJvcE9ic2VydmFibGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzSW50ZXJvcE9ic2VydmFibGU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N5bWJvbF9vYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc3ltYm9sX29ic2VydmFibGUgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gaXNJbnRlcm9wT2JzZXJ2YWJsZShpbnB1dCkgewogICAgcmV0dXJuIGlucHV0ICYmIHR5cGVvZiBpbnB1dFtfc3ltYm9sX29ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sib2JzZXJ2YWJsZSJdXSA9PT0gJ2Z1bmN0aW9uJzsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1pc0ludGVyb3BPYnNlcnZhYmxlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlzSXRlcmFibGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzSXRlcmFibGU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N5bWJvbF9pdGVyYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9zeW1ib2xfaXRlcmF0b3IgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gaXNJdGVyYWJsZShpbnB1dCkgewogICAgcmV0dXJuIGlucHV0ICYmIHR5cGVvZiBpbnB1dFtfc3ltYm9sX2l0ZXJhdG9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIml0ZXJhdG9yIl1dID09PSAnZnVuY3Rpb24nOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzSXRlcmFibGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDExMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZnJvbVByb21pc2UiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZyb21Qcm9taXNlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9Qcm9taXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX1N1YnNjcmlwdGlvbixfdXRpbF9zdWJzY3JpYmVUb1Byb21pc2UgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiBmcm9tUHJvbWlzZShpbnB1dCwgc2NoZWR1bGVyKSB7CiAgICBpZiAoIXNjaGVkdWxlcikgewogICAgICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Byb21pc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9Qcm9taXNlIl0pKGlucHV0KSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgICAgICB2YXIgc3ViID0gbmV3IF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3Vic2NyaXB0aW9uIl0oKTsKICAgICAgICAgICAgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICBzdWIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7IHJldHVybiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7IH0pKTsKICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5lcnJvcihlcnIpOyB9KSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICByZXR1cm4gc3ViOwogICAgICAgIH0pOwogICAgfQp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21Qcm9taXNlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZyb21JdGVyYWJsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZnJvbUl0ZXJhYmxlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N5bWJvbF9pdGVyYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9JdGVyYWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDMpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF9TdWJzY3JpcHRpb24sX3N5bWJvbF9pdGVyYXRvcixfdXRpbF9zdWJzY3JpYmVUb0l0ZXJhYmxlIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCmZ1bmN0aW9uIGZyb21JdGVyYWJsZShpbnB1dCwgc2NoZWR1bGVyKSB7CiAgICBpZiAoIWlucHV0KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJdGVyYWJsZSBjYW5ub3QgYmUgbnVsbCcpOwogICAgfQogICAgaWYgKCFzY2hlZHVsZXIpIHsKICAgICAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9JdGVyYWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJzdWJzY3JpYmVUb0l0ZXJhYmxlIl0pKGlucHV0KSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgICAgICB2YXIgc3ViID0gbmV3IF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3Vic2NyaXB0aW9uIl0oKTsKICAgICAgICAgICAgdmFyIGl0ZXJhdG9yOwogICAgICAgICAgICBzdWIuYWRkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvciAmJiB0eXBlb2YgaXRlcmF0b3IucmV0dXJuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzdWIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpdGVyYXRvciA9IGlucHV0W19zeW1ib2xfaXRlcmF0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siaXRlcmF0b3IiXV0oKTsKICAgICAgICAgICAgICAgIHN1Yi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRvbmU7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZXN1bHQudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSByZXN1bHQuZG9uZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICByZXR1cm4gc3ViOwogICAgICAgIH0pOwogICAgfQp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyb21JdGVyYWJsZS5qcy5tYXAKCgovKioqLyB9KSwKLyogMTE0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJmcm9tT2JzZXJ2YWJsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZnJvbU9ic2VydmFibGU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3ltYm9sX29ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX1N1YnNjcmlwdGlvbixfc3ltYm9sX29ic2VydmFibGUsX3V0aWxfc3Vic2NyaWJlVG9PYnNlcnZhYmxlIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCmZ1bmN0aW9uIGZyb21PYnNlcnZhYmxlKGlucHV0LCBzY2hlZHVsZXIpIHsKICAgIGlmICghc2NoZWR1bGVyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJPYnNlcnZhYmxlIl0oT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJzdWJzY3JpYmVUb09ic2VydmFibGUiXSkoaW5wdXQpKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgICAgIHZhciBzdWIgPSBuZXcgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpcHRpb24iXSgpOwogICAgICAgICAgICBzdWIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IGlucHV0W19zeW1ib2xfb2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJvYnNlcnZhYmxlIl1dKCk7CiAgICAgICAgICAgICAgICBzdWIuYWRkKG9ic2VydmFibGUuc3Vic2NyaWJlKHsKICAgICAgICAgICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHsgc3ViLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5uZXh0KHZhbHVlKTsgfSkpOyB9LAogICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7IHN1Yi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmliZXIuZXJyb3IoZXJyKTsgfSkpOyB9LAogICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IHN1Yi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTsgfSkpOyB9LAogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHJldHVybiBzdWI7CiAgICAgICAgfSk7CiAgICB9Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbU9ic2VydmFibGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDExNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY29uY2F0QWxsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb25jYXRBbGw7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX21lcmdlQWxsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX21lcmdlQWxsIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIGNvbmNhdEFsbCgpIHsKICAgIHJldHVybiBPYmplY3QoX21lcmdlQWxsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm1lcmdlQWxsIl0pKDEpOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdEFsbC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTE2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtZXJnZUFsbCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWVyZ2VBbGw7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX21lcmdlTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pZGVudGl0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX21lcmdlTWFwLF91dGlsX2lkZW50aXR5IFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBtZXJnZUFsbChjb25jdXJyZW50KSB7CiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7CiAgICAgICAgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgIH0KICAgIHJldHVybiBPYmplY3QoX21lcmdlTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm1lcmdlTWFwIl0pKF91dGlsX2lkZW50aXR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImlkZW50aXR5Il0sIGNvbmN1cnJlbnQpOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlQWxsLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm1lcmdlTWFwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBtZXJnZU1hcDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk1lcmdlTWFwT3BlcmF0b3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIE1lcmdlTWFwT3BlcmF0b3I7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJNZXJnZU1hcFN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIE1lcmdlTWFwU3Vic2NyaWJlcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF91dGlsX3N1YnNjcmliZVRvUmVzdWx0LF9PdXRlclN1YnNjcmliZXIsX21hcCxfb2JzZXJ2YWJsZV9mcm9tIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgpmdW5jdGlvbiBtZXJnZU1hcChwcm9qZWN0LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkgewogICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgewogICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICB9CiAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5waXBlKG1lcmdlTWFwKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBPYmplY3QoX29ic2VydmFibGVfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJmcm9tIl0pKHByb2plY3QoYSwgaSkpLnBpcGUoT2JqZWN0KF9tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sibWFwIl0pKGZ1bmN0aW9uIChiLCBpaSkgeyByZXR1cm4gcmVzdWx0U2VsZWN0b3IoYSwgYiwgaSwgaWkpOyB9KSk7IH0sIGNvbmN1cnJlbnQpKTsgfTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ251bWJlcicpIHsKICAgICAgICBjb25jdXJyZW50ID0gcmVzdWx0U2VsZWN0b3I7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IE1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCkpOyB9Owp9CnZhciBNZXJnZU1hcE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCBjb25jdXJyZW50KSB7CiAgICAgICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgewogICAgICAgICAgICBjb25jdXJyZW50ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOwogICAgICAgIH0KICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0OwogICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7CiAgICB9CiAgICBNZXJnZU1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKG9ic2VydmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VNYXBTdWJzY3JpYmVyKG9ic2VydmVyLCB0aGlzLnByb2plY3QsIHRoaXMuY29uY3VycmVudCkpOwogICAgfTsKICAgIHJldHVybiBNZXJnZU1hcE9wZXJhdG9yOwp9KCkpOwoKdmFyIE1lcmdlTWFwU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKE1lcmdlTWFwU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIE1lcmdlTWFwU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgY29uY3VycmVudCkgewogICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHsKICAgICAgICAgICAgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgICAgICB9CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJvamVjdCA9IHByb2plY3Q7CiAgICAgICAgX3RoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7CiAgICAgICAgX3RoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7CiAgICAgICAgX3RoaXMuYnVmZmVyID0gW107CiAgICAgICAgX3RoaXMuYWN0aXZlID0gMDsKICAgICAgICBfdGhpcy5pbmRleCA9IDA7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLmFjdGl2ZSA8IHRoaXMuY29uY3VycmVudCkgewogICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuYWN0aXZlKys7CiAgICAgICAgdGhpcy5faW5uZXJTdWIocmVzdWx0LCB2YWx1ZSwgaW5kZXgpOwogICAgfTsKICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKGlzaCwgdmFsdWUsIGluZGV4KSB7CiAgICAgICAgdGhpcy5hZGQoT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHRoaXMsIGlzaCwgdmFsdWUsIGluZGV4KSk7CiAgICB9OwogICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlOwogICAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PT0gMCAmJiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgIH07CiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7CiAgICB9OwogICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjsKICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7CiAgICAgICAgdGhpcy5hY3RpdmUtLTsKICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIE1lcmdlTWFwU3Vic2NyaWJlcjsKfShfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIk91dGVyU3Vic2NyaWJlciJdKSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTE4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJkZWZlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVmZXI7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Zyb21fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX2Zyb20sX2VtcHR5IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKZnVuY3Rpb24gZGVmZXIob2JzZXJ2YWJsZUZhY3RvcnkpIHsKICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIGlucHV0OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlucHV0ID0gb2JzZXJ2YWJsZUZhY3RvcnkoKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7CiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIHZhciBzb3VyY2UgPSBpbnB1dCA/IE9iamVjdChfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJmcm9tIl0pKGlucHV0KSA6IE9iamVjdChfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZW1wdHkiXSkoKTsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTsKICAgIH0pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZvcmtKb2luIiwgZnVuY3Rpb24oKSB7IHJldHVybiBmb3JrSm9pbjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vcGVyYXRvcnNfbWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfT2JzZXJ2YWJsZSxfdXRpbF9pc0FycmF5LF9lbXB0eSxfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCxfT3V0ZXJTdWJzY3JpYmVyLF9vcGVyYXRvcnNfbWFwIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgoKCmZ1bmN0aW9uIGZvcmtKb2luKCkgewogICAgdmFyIHNvdXJjZXMgPSBbXTsKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgc291cmNlc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgfQogICAgdmFyIHJlc3VsdFNlbGVjdG9yOwogICAgaWYgKHR5cGVvZiBzb3VyY2VzW3NvdXJjZXMubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZXN1bHRTZWxlY3RvciA9IHNvdXJjZXMucG9wKCk7CiAgICB9CiAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDEgJiYgT2JqZWN0KF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siaXNBcnJheSJdKShzb3VyY2VzWzBdKSkgewogICAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdOwogICAgfQogICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIF9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJFTVBUWSJdOwogICAgfQogICAgaWYgKHJlc3VsdFNlbGVjdG9yKSB7CiAgICAgICAgcmV0dXJuIGZvcmtKb2luKHNvdXJjZXMpLnBpcGUoT2JqZWN0KF9vcGVyYXRvcnNfbWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bIm1hcCJdKShmdW5jdGlvbiAoYXJncykgeyByZXR1cm4gcmVzdWx0U2VsZWN0b3IuYXBwbHkodm9pZCAwLCBhcmdzKTsgfSkpOwogICAgfQogICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJPYnNlcnZhYmxlIl0oZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICByZXR1cm4gbmV3IEZvcmtKb2luU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBzb3VyY2VzKTsKICAgIH0pOwp9CnZhciBGb3JrSm9pblN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShGb3JrSm9pblN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBGb3JrSm9pblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNvdXJjZXMpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5zb3VyY2VzID0gc291cmNlczsKICAgICAgICBfdGhpcy5jb21wbGV0ZWQgPSAwOwogICAgICAgIF90aGlzLmhhdmVWYWx1ZXMgPSAwOwogICAgICAgIHZhciBsZW4gPSBzb3VyY2VzLmxlbmd0aDsKICAgICAgICBfdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldOwogICAgICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkoX3RoaXMsIHNvdXJjZSwgbnVsbCwgaSk7CiAgICAgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgX3RoaXMuYWRkKGlubmVyU3Vic2NyaXB0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBGb3JrSm9pblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHsKICAgICAgICB0aGlzLnZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7CiAgICAgICAgaWYgKCFpbm5lclN1Yi5faGFzVmFsdWUpIHsKICAgICAgICAgICAgaW5uZXJTdWIuX2hhc1ZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5oYXZlVmFsdWVzKys7CiAgICAgICAgfQogICAgfTsKICAgIEZvcmtKb2luU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uLCBoYXZlVmFsdWVzID0gX2EuaGF2ZVZhbHVlcywgdmFsdWVzID0gX2EudmFsdWVzOwogICAgICAgIHZhciBsZW4gPSB2YWx1ZXMubGVuZ3RoOwogICAgICAgIGlmICghaW5uZXJTdWIuX2hhc1ZhbHVlKSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb21wbGV0ZWQrKzsKICAgICAgICBpZiAodGhpcy5jb21wbGV0ZWQgIT09IGxlbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChoYXZlVmFsdWVzID09PSBsZW4pIHsKICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZXMpOwogICAgICAgIH0KICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgfTsKICAgIHJldHVybiBGb3JrSm9pblN1YnNjcmliZXI7Cn0oX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fWyJPdXRlclN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1mb3JrSm9pbi5qcy5tYXAKCgovKioqLyB9KSwKLyogMTIwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJmcm9tRXZlbnQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZyb21FdmVudDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzRnVuY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29wZXJhdG9yc19tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF91dGlsX2lzQXJyYXksX3V0aWxfaXNGdW5jdGlvbixfb3BlcmF0b3JzX21hcCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgp2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwpmdW5jdGlvbiBmcm9tRXZlbnQodGFyZ2V0LCBldmVudE5hbWUsIG9wdGlvbnMsIHJlc3VsdFNlbGVjdG9yKSB7CiAgICBpZiAoT2JqZWN0KF91dGlsX2lzRnVuY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siaXNGdW5jdGlvbiJdKShvcHRpb25zKSkgewogICAgICAgIHJlc3VsdFNlbGVjdG9yID0gb3B0aW9uczsKICAgICAgICBvcHRpb25zID0gdW5kZWZpbmVkOwogICAgfQogICAgaWYgKHJlc3VsdFNlbGVjdG9yKSB7CiAgICAgICAgcmV0dXJuIGZyb21FdmVudCh0YXJnZXQsIGV2ZW50TmFtZSwgb3B0aW9ucykucGlwZShPYmplY3QoX29wZXJhdG9yc19tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sibWFwIl0pKGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiBPYmplY3QoX3V0aWxfaXNBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJpc0FycmF5Il0pKGFyZ3MpID8gcmVzdWx0U2VsZWN0b3IuYXBwbHkodm9pZCAwLCBhcmdzKSA6IHJlc3VsdFNlbGVjdG9yKGFyZ3MpOyB9KSk7CiAgICB9CiAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoZSkgewogICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXR1cFN1YnNjcmlwdGlvbih0YXJnZXQsIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlciwgb3B0aW9ucyk7CiAgICB9KTsKfQpmdW5jdGlvbiBzZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmosIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlciwgb3B0aW9ucykgewogICAgdmFyIHVuc3Vic2NyaWJlOwogICAgaWYgKGlzRXZlbnRUYXJnZXQoc291cmNlT2JqKSkgewogICAgICAgIHZhciBzb3VyY2VfMSA9IHNvdXJjZU9iajsKICAgICAgICBzb3VyY2VPYmouYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpOwogICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlXzEucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpOyB9OwogICAgfQogICAgZWxzZSBpZiAoaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopKSB7CiAgICAgICAgdmFyIHNvdXJjZV8yID0gc291cmNlT2JqOwogICAgICAgIHNvdXJjZU9iai5vbihldmVudE5hbWUsIGhhbmRsZXIpOwogICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlXzIub2ZmKGV2ZW50TmFtZSwgaGFuZGxlcik7IH07CiAgICB9CiAgICBlbHNlIGlmIChpc05vZGVTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopKSB7CiAgICAgICAgdmFyIHNvdXJjZV8zID0gc291cmNlT2JqOwogICAgICAgIHNvdXJjZU9iai5hZGRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIpOwogICAgICAgIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc291cmNlXzMucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTsgfTsKICAgIH0KICAgIGVsc2UgaWYgKHNvdXJjZU9iaiAmJiBzb3VyY2VPYmoubGVuZ3RoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZU9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICBzZXR1cFN1YnNjcmlwdGlvbihzb3VyY2VPYmpbaV0sIGV2ZW50TmFtZSwgaGFuZGxlciwgc3Vic2NyaWJlciwgb3B0aW9ucyk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBldmVudCB0YXJnZXQnKTsKICAgIH0KICAgIHN1YnNjcmliZXIuYWRkKHVuc3Vic2NyaWJlKTsKfQpmdW5jdGlvbiBpc05vZGVTdHlsZUV2ZW50RW1pdHRlcihzb3VyY2VPYmopIHsKICAgIHJldHVybiBzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5hZGRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygc291cmNlT2JqLnJlbW92ZUxpc3RlbmVyID09PSAnZnVuY3Rpb24nOwp9CmZ1bmN0aW9uIGlzSlF1ZXJ5U3R5bGVFdmVudEVtaXR0ZXIoc291cmNlT2JqKSB7CiAgICByZXR1cm4gc291cmNlT2JqICYmIHR5cGVvZiBzb3VyY2VPYmoub24gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHNvdXJjZU9iai5vZmYgPT09ICdmdW5jdGlvbic7Cn0KZnVuY3Rpb24gaXNFdmVudFRhcmdldChzb3VyY2VPYmopIHsKICAgIHJldHVybiBzb3VyY2VPYmogJiYgdHlwZW9mIHNvdXJjZU9iai5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBzb3VyY2VPYmoucmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJzsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tRXZlbnQuanMubWFwCgoKLyoqKi8gfSksCi8qIDEyMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZnJvbUV2ZW50UGF0dGVybiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZnJvbUV2ZW50UGF0dGVybjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzRnVuY3Rpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29wZXJhdG9yc19tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF91dGlsX2lzQXJyYXksX3V0aWxfaXNGdW5jdGlvbixfb3BlcmF0b3JzX21hcCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgpmdW5jdGlvbiBmcm9tRXZlbnRQYXR0ZXJuKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHJlc3VsdFNlbGVjdG9yKSB7CiAgICBpZiAocmVzdWx0U2VsZWN0b3IpIHsKICAgICAgICByZXR1cm4gZnJvbUV2ZW50UGF0dGVybihhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyKS5waXBlKE9iamVjdChfb3BlcmF0b3JzX21hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJtYXAiXSkoZnVuY3Rpb24gKGFyZ3MpIHsgcmV0dXJuIE9iamVjdChfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImlzQXJyYXkiXSkoYXJncykgPyByZXN1bHRTZWxlY3Rvci5hcHBseSh2b2lkIDAsIGFyZ3MpIDogcmVzdWx0U2VsZWN0b3IoYXJncyk7IH0pKTsKICAgIH0KICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgICAgICBlW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmliZXIubmV4dChlLmxlbmd0aCA9PT0gMSA/IGVbMF0gOiBlKTsKICAgICAgICB9OwogICAgICAgIHZhciByZXRWYWx1ZTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXRWYWx1ZSA9IGFkZEhhbmRsZXIoaGFuZGxlcik7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpOwogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICBpZiAoIU9iamVjdChfdXRpbF9pc0Z1bmN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImlzRnVuY3Rpb24iXSkocmVtb3ZlSGFuZGxlcikpIHsKICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZUhhbmRsZXIoaGFuZGxlciwgcmV0VmFsdWUpOyB9OwogICAgfSk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUV2ZW50UGF0dGVybi5qcy5tYXAKCgovKioqLyB9KSwKLyogMTIyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJnZW5lcmF0ZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2VuZXJhdGU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaWRlbnRpdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF91dGlsX2lkZW50aXR5LF91dGlsX2lzU2NoZWR1bGVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKZnVuY3Rpb24gZ2VuZXJhdGUoaW5pdGlhbFN0YXRlT3JPcHRpb25zLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHsKICAgIHZhciByZXN1bHRTZWxlY3RvcjsKICAgIHZhciBpbml0aWFsU3RhdGU7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgdmFyIG9wdGlvbnMgPSBpbml0aWFsU3RhdGVPck9wdGlvbnM7CiAgICAgICAgaW5pdGlhbFN0YXRlID0gb3B0aW9ucy5pbml0aWFsU3RhdGU7CiAgICAgICAgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb247CiAgICAgICAgaXRlcmF0ZSA9IG9wdGlvbnMuaXRlcmF0ZTsKICAgICAgICByZXN1bHRTZWxlY3RvciA9IG9wdGlvbnMucmVzdWx0U2VsZWN0b3IgfHwgX3V0aWxfaWRlbnRpdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siaWRlbnRpdHkiXTsKICAgICAgICBzY2hlZHVsZXIgPSBvcHRpb25zLnNjaGVkdWxlcjsKICAgIH0KICAgIGVsc2UgaWYgKHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlID09PSB1bmRlZmluZWQgfHwgT2JqZWN0KF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImlzU2NoZWR1bGVyIl0pKHJlc3VsdFNlbGVjdG9yT3JPYnNlcnZhYmxlKSkgewogICAgICAgIGluaXRpYWxTdGF0ZSA9IGluaXRpYWxTdGF0ZU9yT3B0aW9uczsKICAgICAgICByZXN1bHRTZWxlY3RvciA9IF91dGlsX2lkZW50aXR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImlkZW50aXR5Il07CiAgICAgICAgc2NoZWR1bGVyID0gcmVzdWx0U2VsZWN0b3JPck9ic2VydmFibGU7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBpbml0aWFsU3RhdGUgPSBpbml0aWFsU3RhdGVPck9wdGlvbnM7CiAgICAgICAgcmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvck9yT2JzZXJ2YWJsZTsKICAgIH0KICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIHN0YXRlID0gaW5pdGlhbFN0YXRlOwogICAgICAgIGlmIChzY2hlZHVsZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaCwgMCwgewogICAgICAgICAgICAgICAgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwKICAgICAgICAgICAgICAgIGl0ZXJhdGU6IGl0ZXJhdGUsCiAgICAgICAgICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvbiwKICAgICAgICAgICAgICAgIHJlc3VsdFNlbGVjdG9yOiByZXN1bHRTZWxlY3RvciwKICAgICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZG8gewogICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7CiAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uUmVzdWx0ID0gdm9pZCAwOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25SZXN1bHQgPSBjb25kaXRpb24oc3RhdGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFjb25kaXRpb25SZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdmFsdWUgPSByZXN1bHRTZWxlY3RvcihzdGF0ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpOwogICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzdGF0ZSA9IGl0ZXJhdGUoc3RhdGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTsKICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICAgIH0KICAgICAgICB9IHdoaWxlICh0cnVlKTsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSk7Cn0KZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHsKICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgY29uZGl0aW9uID0gc3RhdGUuY29uZGl0aW9uOwogICAgaWYgKHN1YnNjcmliZXIuY2xvc2VkKSB7CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KICAgIGlmIChzdGF0ZS5uZWVkSXRlcmF0ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN0YXRlLnN0YXRlID0gc3RhdGUuaXRlcmF0ZShzdGF0ZS5zdGF0ZSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpOwogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH0KICAgIH0KICAgIGVsc2UgewogICAgICAgIHN0YXRlLm5lZWRJdGVyYXRlID0gdHJ1ZTsKICAgIH0KICAgIGlmIChjb25kaXRpb24pIHsKICAgICAgICB2YXIgY29uZGl0aW9uUmVzdWx0ID0gdm9pZCAwOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbmRpdGlvblJlc3VsdCA9IGNvbmRpdGlvbihzdGF0ZS5zdGF0ZSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpOwogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICBpZiAoIWNvbmRpdGlvblJlc3VsdCkgewogICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkgewogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH0KICAgIH0KICAgIHZhciB2YWx1ZTsKICAgIHRyeSB7CiAgICAgICAgdmFsdWUgPSBzdGF0ZS5yZXN1bHRTZWxlY3RvcihzdGF0ZS5zdGF0ZSk7CiAgICB9CiAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpOwogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CiAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTsKICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkgewogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zY2hlZHVsZShzdGF0ZSk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2VuZXJhdGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDEyMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaWlmIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpaWY7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2RlZmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9kZWZlcixfZW1wdHkgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIGlpZihjb25kaXRpb24sIHRydWVSZXN1bHQsIGZhbHNlUmVzdWx0KSB7CiAgICBpZiAodHJ1ZVJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHJ1ZVJlc3VsdCA9IF9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJFTVBUWSJdOwogICAgfQogICAgaWYgKGZhbHNlUmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICBmYWxzZVJlc3VsdCA9IF9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJFTVBUWSJdOwogICAgfQogICAgcmV0dXJuIE9iamVjdChfZGVmZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZGVmZXIiXSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gY29uZGl0aW9uKCkgPyB0cnVlUmVzdWx0IDogZmFsc2VSZXN1bHQ7IH0pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWlpZi5qcy5tYXAKCgovKioqLyB9KSwKLyogMTI0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpbnRlcnZhbCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaW50ZXJ2YWw7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc051bWVyaWNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSxfc2NoZWR1bGVyX2FzeW5jLF91dGlsX2lzTnVtZXJpYyBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIGludGVydmFsKHBlcmlvZCwgc2NoZWR1bGVyKSB7CiAgICBpZiAocGVyaW9kID09PSB2b2lkIDApIHsKICAgICAgICBwZXJpb2QgPSAwOwogICAgfQogICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgc2NoZWR1bGVyID0gX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJhc3luYyJdOwogICAgfQogICAgaWYgKCFPYmplY3QoX3V0aWxfaXNOdW1lcmljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImlzTnVtZXJpYyJdKShwZXJpb2QpIHx8IHBlcmlvZCA8IDApIHsKICAgICAgICBwZXJpb2QgPSAwOwogICAgfQogICAgaWYgKCFzY2hlZHVsZXIgfHwgdHlwZW9mIHNjaGVkdWxlci5zY2hlZHVsZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHNjaGVkdWxlciA9IF9zY2hlZHVsZXJfYXN5bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siYXN5bmMiXTsKICAgIH0KICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgc3Vic2NyaWJlci5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoLCBwZXJpb2QsIHsgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgY291bnRlcjogMCwgcGVyaW9kOiBwZXJpb2QgfSkpOwogICAgICAgIHJldHVybiBzdWJzY3JpYmVyOwogICAgfSk7Cn0KZnVuY3Rpb24gZGlzcGF0Y2goc3RhdGUpIHsKICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgY291bnRlciA9IHN0YXRlLmNvdW50ZXIsIHBlcmlvZCA9IHN0YXRlLnBlcmlvZDsKICAgIHN1YnNjcmliZXIubmV4dChjb3VudGVyKTsKICAgIHRoaXMuc2NoZWR1bGUoeyBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLCBjb3VudGVyOiBjb3VudGVyICsgMSwgcGVyaW9kOiBwZXJpb2QgfSwgcGVyaW9kKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnZhbC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTI1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpc051bWVyaWMiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGlzTnVtZXJpYzsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaXNBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX2lzQXJyYXkgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gaXNOdW1lcmljKHZhbCkgewogICAgcmV0dXJuICFPYmplY3QoX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siaXNBcnJheSJdKSh2YWwpICYmICh2YWwgLSBwYXJzZUZsb2F0KHZhbCkgKyAxKSA+PSAwOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzTnVtZXJpYy5qcy5tYXAKCgovKioqLyB9KSwKLyogMTI2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtZXJnZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWVyZ2U7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29wZXJhdG9yc19tZXJnZUFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Zyb21BcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX3V0aWxfaXNTY2hlZHVsZXIsX29wZXJhdG9yc19tZXJnZUFsbCxfZnJvbUFycmF5IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCmZ1bmN0aW9uIG1lcmdlKCkgewogICAgdmFyIG9ic2VydmFibGVzID0gW107CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIG9ic2VydmFibGVzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CiAgICB2YXIgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgIHZhciBzY2hlZHVsZXIgPSBudWxsOwogICAgdmFyIGxhc3QgPSBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXTsKICAgIGlmIChPYmplY3QoX3V0aWxfaXNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siaXNTY2hlZHVsZXIiXSkobGFzdCkpIHsKICAgICAgICBzY2hlZHVsZXIgPSBvYnNlcnZhYmxlcy5wb3AoKTsKICAgICAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID4gMSAmJiB0eXBlb2Ygb2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0gPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIGNvbmN1cnJlbnQgPSBvYnNlcnZhYmxlcy5wb3AoKTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlIGlmICh0eXBlb2YgbGFzdCA9PT0gJ251bWJlcicpIHsKICAgICAgICBjb25jdXJyZW50ID0gb2JzZXJ2YWJsZXMucG9wKCk7CiAgICB9CiAgICBpZiAoc2NoZWR1bGVyID09PSBudWxsICYmIG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBvYnNlcnZhYmxlc1swXSBpbnN0YW5jZW9mIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXSkgewogICAgICAgIHJldHVybiBvYnNlcnZhYmxlc1swXTsKICAgIH0KICAgIHJldHVybiBPYmplY3QoX29wZXJhdG9yc19tZXJnZUFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJtZXJnZUFsbCJdKShjb25jdXJyZW50KShPYmplY3QoX2Zyb21BcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJmcm9tQXJyYXkiXSkob2JzZXJ2YWJsZXMsIHNjaGVkdWxlcikpOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMjcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk5FVkVSIiwgZnVuY3Rpb24oKSB7IHJldHVybiBORVZFUjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm5ldmVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBuZXZlcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9ub29wX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSxfdXRpbF9ub29wIFBVUkVfSU1QT1JUU19FTkQgKi8KCgp2YXIgTkVWRVIgPSAvKkBfX1BVUkVfXyovIG5ldyBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJPYnNlcnZhYmxlIl0oX3V0aWxfbm9vcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJub29wIl0pOwpmdW5jdGlvbiBuZXZlcigpIHsKICAgIHJldHVybiBORVZFUjsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5qcy5tYXAKCgovKioqLyB9KSwKLyogMTI4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJvbkVycm9yUmVzdW1lTmV4dCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gb25FcnJvclJlc3VtZU5leHQ7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Zyb21fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSxfZnJvbSxfdXRpbF9pc0FycmF5LF9lbXB0eSBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgpmdW5jdGlvbiBvbkVycm9yUmVzdW1lTmV4dCgpIHsKICAgIHZhciBzb3VyY2VzID0gW107CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIHNvdXJjZXNbX2ldID0gYXJndW1lbnRzW19pXTsKICAgIH0KICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siRU1QVFkiXTsKICAgIH0KICAgIHZhciBmaXJzdCA9IHNvdXJjZXNbMF0sIHJlbWFpbmRlciA9IHNvdXJjZXMuc2xpY2UoMSk7CiAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDEgJiYgT2JqZWN0KF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siaXNBcnJheSJdKShmaXJzdCkpIHsKICAgICAgICByZXR1cm4gb25FcnJvclJlc3VtZU5leHQuYXBwbHkodm9pZCAwLCBmaXJzdCk7CiAgICB9CiAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIHZhciBzdWJOZXh0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5hZGQob25FcnJvclJlc3VtZU5leHQuYXBwbHkodm9pZCAwLCByZW1haW5kZXIpLnN1YnNjcmliZShzdWJzY3JpYmVyKSk7IH07CiAgICAgICAgcmV0dXJuIE9iamVjdChfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJmcm9tIl0pKGZpcnN0KS5zdWJzY3JpYmUoewogICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHsgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTsgfSwKICAgICAgICAgICAgZXJyb3I6IHN1Yk5leHQsCiAgICAgICAgICAgIGNvbXBsZXRlOiBzdWJOZXh0LAogICAgICAgIH0pOwogICAgfSk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9b25FcnJvclJlc3VtZU5leHQuanMubWFwCgoKLyoqKi8gfSksCi8qIDEyOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicGFpcnMiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHBhaXJzOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZGlzcGF0Y2giLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRpc3BhdGNoOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlLF9TdWJzY3JpcHRpb24gUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIHBhaXJzKG9iaiwgc2NoZWR1bGVyKSB7CiAgICBpZiAoIXNjaGVkdWxlcikgewogICAgICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aCAmJiAhc3Vic2NyaWJlci5jbG9zZWQ7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07CiAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoW2tleSwgb2JqW2tleV1dKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7CiAgICAgICAgfSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7CiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpcHRpb24iXSgpOwogICAgICAgICAgICBzdWJzY3JpcHRpb24uYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaCwgMCwgeyBrZXlzOiBrZXlzLCBpbmRleDogMCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sIG9iajogb2JqIH0pKTsKICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjsKICAgICAgICB9KTsKICAgIH0KfQpmdW5jdGlvbiBkaXNwYXRjaChzdGF0ZSkgewogICAgdmFyIGtleXMgPSBzdGF0ZS5rZXlzLCBpbmRleCA9IHN0YXRlLmluZGV4LCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlciwgc3Vic2NyaXB0aW9uID0gc3RhdGUuc3Vic2NyaXB0aW9uLCBvYmogPSBzdGF0ZS5vYmo7CiAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7CiAgICAgICAgaWYgKGluZGV4IDwga2V5cy5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaW5kZXhdOwogICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoW2tleSwgb2JqW2tleV1dKTsKICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZCh0aGlzLnNjaGVkdWxlKHsga2V5czoga2V5cywgaW5kZXg6IGluZGV4ICsgMSwgc3Vic2NyaWJlcjogc3Vic2NyaWJlciwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sIG9iajogb2JqIH0pKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTsKICAgICAgICB9CiAgICB9Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFpcnMuanMubWFwCgoKLyoqKi8gfSksCi8qIDEzMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmFjZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmFjZTsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIlJhY2VPcGVyYXRvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gUmFjZU9wZXJhdG9yOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiUmFjZVN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFJhY2VTdWJzY3JpYmVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Zyb21BcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfdXRpbF9pc0FycmF5LF9mcm9tQXJyYXksX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gcmFjZSgpIHsKICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdOwogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICBvYnNlcnZhYmxlc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgfQogICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSkgewogICAgICAgIGlmIChPYmplY3QoX3V0aWxfaXNBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJpc0FycmF5Il0pKG9ic2VydmFibGVzWzBdKSkgewogICAgICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG9ic2VydmFibGVzWzBdOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBPYmplY3QoX2Zyb21BcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJmcm9tQXJyYXkiXSkob2JzZXJ2YWJsZXMsIHVuZGVmaW5lZCkubGlmdChuZXcgUmFjZU9wZXJhdG9yKCkpOwp9CnZhciBSYWNlT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBSYWNlT3BlcmF0b3IoKSB7CiAgICB9CiAgICBSYWNlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFJhY2VTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTsKICAgIH07CiAgICByZXR1cm4gUmFjZU9wZXJhdG9yOwp9KCkpOwoKdmFyIFJhY2VTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oUmFjZVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBSYWNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhc0ZpcnN0ID0gZmFsc2U7CiAgICAgICAgX3RoaXMub2JzZXJ2YWJsZXMgPSBbXTsKICAgICAgICBfdGhpcy5zdWJzY3JpcHRpb25zID0gW107CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHsKICAgICAgICB0aGlzLm9ic2VydmFibGVzLnB1c2gob2JzZXJ2YWJsZSk7CiAgICB9OwogICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb2JzZXJ2YWJsZXMgPSB0aGlzLm9ic2VydmFibGVzOwogICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7CiAgICAgICAgaWYgKGxlbiA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbiAmJiAhdGhpcy5oYXNGaXJzdDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG9ic2VydmFibGVzW2ldOwogICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKSh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaXB0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLm9ic2VydmFibGVzID0gbnVsbDsKICAgICAgICB9CiAgICB9OwogICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHsKICAgICAgICBpZiAoIXRoaXMuaGFzRmlyc3QpIHsKICAgICAgICAgICAgdGhpcy5oYXNGaXJzdCA9IHRydWU7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gb3V0ZXJJbmRleCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmlwdGlvbnNbaV07CiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBudWxsOwogICAgICAgIH0KICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7CiAgICB9OwogICAgcmV0dXJuIFJhY2VTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhY2UuanMubWFwCgoKLyoqKi8gfSksCi8qIDEzMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmFuZ2UiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJhbmdlOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZGlzcGF0Y2giLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRpc3BhdGNoOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovCgpmdW5jdGlvbiByYW5nZShzdGFydCwgY291bnQsIHNjaGVkdWxlcikgewogICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsKICAgICAgICBzdGFydCA9IDA7CiAgICB9CiAgICBpZiAoY291bnQgPT09IHZvaWQgMCkgewogICAgICAgIGNvdW50ID0gMDsKICAgIH0KICAgIHJldHVybiBuZXcgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siT2JzZXJ2YWJsZSJdKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICB2YXIgY3VycmVudCA9IHN0YXJ0OwogICAgICAgIGlmIChzY2hlZHVsZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaCwgMCwgewogICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LCBjb3VudDogY291bnQsIHN0YXJ0OiBzdGFydCwgc3Vic2NyaWJlcjogc3Vic2NyaWJlcgogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIGlmIChpbmRleCsrID49IGNvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGN1cnJlbnQrKyk7CiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9KTsKfQpmdW5jdGlvbiBkaXNwYXRjaChzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUuc3RhcnQsIGluZGV4ID0gc3RhdGUuaW5kZXgsIGNvdW50ID0gc3RhdGUuY291bnQsIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyOwogICAgaWYgKGluZGV4ID49IGNvdW50KSB7CiAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIHN1YnNjcmliZXIubmV4dChzdGFydCk7CiAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBzdGF0ZS5pbmRleCA9IGluZGV4ICsgMTsKICAgIHN0YXRlLnN0YXJ0ID0gc3RhcnQgKyAxOwogICAgdGhpcy5zY2hlZHVsZShzdGF0ZSk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZ2UuanMubWFwCgoKLyoqKi8gfSksCi8qIDEzMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGltZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRpbWVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zY2hlZHVsZXJfYXN5bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODQpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNOdW1lcmljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX3NjaGVkdWxlcl9hc3luYyxfdXRpbF9pc051bWVyaWMsX3V0aWxfaXNTY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKZnVuY3Rpb24gdGltZXIoZHVlVGltZSwgcGVyaW9kT3JTY2hlZHVsZXIsIHNjaGVkdWxlcikgewogICAgaWYgKGR1ZVRpbWUgPT09IHZvaWQgMCkgewogICAgICAgIGR1ZVRpbWUgPSAwOwogICAgfQogICAgdmFyIHBlcmlvZCA9IC0xOwogICAgaWYgKE9iamVjdChfdXRpbF9pc051bWVyaWNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siaXNOdW1lcmljIl0pKHBlcmlvZE9yU2NoZWR1bGVyKSkgewogICAgICAgIHBlcmlvZCA9IE51bWJlcihwZXJpb2RPclNjaGVkdWxlcikgPCAxICYmIDEgfHwgTnVtYmVyKHBlcmlvZE9yU2NoZWR1bGVyKTsKICAgIH0KICAgIGVsc2UgaWYgKE9iamVjdChfdXRpbF9pc1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJpc1NjaGVkdWxlciJdKShwZXJpb2RPclNjaGVkdWxlcikpIHsKICAgICAgICBzY2hlZHVsZXIgPSBwZXJpb2RPclNjaGVkdWxlcjsKICAgIH0KICAgIGlmICghT2JqZWN0KF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImlzU2NoZWR1bGVyIl0pKHNjaGVkdWxlcikpIHsKICAgICAgICBzY2hlZHVsZXIgPSBfc2NoZWR1bGVyX2FzeW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImFzeW5jIl07CiAgICB9CiAgICByZXR1cm4gbmV3IF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIk9ic2VydmFibGUiXShmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIHZhciBkdWUgPSBPYmplY3QoX3V0aWxfaXNOdW1lcmljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImlzTnVtZXJpYyJdKShkdWVUaW1lKQogICAgICAgICAgICA/IGR1ZVRpbWUKICAgICAgICAgICAgOiAoK2R1ZVRpbWUgLSBzY2hlZHVsZXIubm93KCkpOwogICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2gsIGR1ZSwgewogICAgICAgICAgICBpbmRleDogMCwgcGVyaW9kOiBwZXJpb2QsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIKICAgICAgICB9KTsKICAgIH0pOwp9CmZ1bmN0aW9uIGRpc3BhdGNoKHN0YXRlKSB7CiAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCwgcGVyaW9kID0gc3RhdGUucGVyaW9kLCBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjsKICAgIHN1YnNjcmliZXIubmV4dChpbmRleCk7CiAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBlbHNlIGlmIChwZXJpb2QgPT09IC0xKSB7CiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTsKICAgIH0KICAgIHN0YXRlLmluZGV4ID0gaW5kZXggKyAxOwogICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgcGVyaW9kKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD10aW1lci5qcy5tYXAKCgovKioqLyB9KSwKLyogMTMzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ1c2luZyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdXNpbmc7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Zyb21fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX2Zyb20sX2VtcHR5IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKZnVuY3Rpb24gdXNpbmcocmVzb3VyY2VGYWN0b3J5LCBvYnNlcnZhYmxlRmFjdG9yeSkgewogICAgcmV0dXJuIG5ldyBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJPYnNlcnZhYmxlIl0oZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICB2YXIgcmVzb3VyY2U7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmVzb3VyY2UgPSByZXNvdXJjZUZhY3RvcnkoKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7CiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmVzdWx0ID0gb2JzZXJ2YWJsZUZhY3RvcnkocmVzb3VyY2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTsKICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgdmFyIHNvdXJjZSA9IHJlc3VsdCA/IE9iamVjdChfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJmcm9tIl0pKHJlc3VsdCkgOiBfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siRU1QVFkiXTsKICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgaWYgKHJlc291cmNlKSB7CiAgICAgICAgICAgICAgICByZXNvdXJjZS51bnN1YnNjcmliZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzaW5nLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInppcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gemlwOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiWmlwT3BlcmF0b3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFppcE9wZXJhdG9yOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiWmlwU3Vic2NyaWJlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gWmlwU3Vic2NyaWJlcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfc3ltYm9sX2l0ZXJhdG9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX2Zyb21BcnJheSxfdXRpbF9pc0FycmF5LF9TdWJzY3JpYmVyLF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQsXy4uX2ludGVybmFsX3N5bWJvbF9pdGVyYXRvciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCgpmdW5jdGlvbiB6aXAoKSB7CiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTsKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgb2JzZXJ2YWJsZXNbX2ldID0gYXJndW1lbnRzW19pXTsKICAgIH0KICAgIHZhciByZXN1bHRTZWxlY3RvciA9IG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdOwogICAgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIG9ic2VydmFibGVzLnBvcCgpOwogICAgfQogICAgcmV0dXJuIE9iamVjdChfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImZyb21BcnJheSJdKShvYnNlcnZhYmxlcywgdW5kZWZpbmVkKS5saWZ0KG5ldyBaaXBPcGVyYXRvcihyZXN1bHRTZWxlY3RvcikpOwp9CnZhciBaaXBPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFppcE9wZXJhdG9yKHJlc3VsdFNlbGVjdG9yKSB7CiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yOwogICAgfQogICAgWmlwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFppcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5yZXN1bHRTZWxlY3RvcikpOwogICAgfTsKICAgIHJldHVybiBaaXBPcGVyYXRvcjsKfSgpKTsKCnZhciBaaXBTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oWmlwU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFppcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHJlc3VsdFNlbGVjdG9yLCB2YWx1ZXMpIHsKICAgICAgICBpZiAodmFsdWVzID09PSB2b2lkIDApIHsKICAgICAgICAgICAgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICB9CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaXRlcmF0b3JzID0gW107CiAgICAgICAgX3RoaXMuYWN0aXZlID0gMDsKICAgICAgICBfdGhpcy5yZXN1bHRTZWxlY3RvciA9ICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdmdW5jdGlvbicpID8gcmVzdWx0U2VsZWN0b3IgOiBudWxsOwogICAgICAgIF90aGlzLnZhbHVlcyA9IHZhbHVlczsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9yczsKICAgICAgICBpZiAoT2JqZWN0KF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siaXNBcnJheSJdKSh2YWx1ZSkpIHsKICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFN0YXRpY0FycmF5SXRlcmF0b3IodmFsdWUpKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlW19pbnRlcm5hbF9zeW1ib2xfaXRlcmF0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1siaXRlcmF0b3IiXV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFN0YXRpY0l0ZXJhdG9yKHZhbHVlW19pbnRlcm5hbF9zeW1ib2xfaXRlcmF0b3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1siaXRlcmF0b3IiXV0oKSkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFppcEJ1ZmZlckl0ZXJhdG9yKHRoaXMuZGVzdGluYXRpb24sIHRoaXMsIHZhbHVlKSk7CiAgICAgICAgfQogICAgfTsKICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaXRlcmF0b3JzID0gdGhpcy5pdGVyYXRvcnM7CiAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7CiAgICAgICAgaWYgKGxlbiA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5hY3RpdmUgPSBsZW47CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07CiAgICAgICAgICAgIGlmIChpdGVyYXRvci5zdGlsbFVuc3Vic2NyaWJlZCkgewogICAgICAgICAgICAgICAgdGhpcy5hZGQoaXRlcmF0b3Iuc3Vic2NyaWJlKGl0ZXJhdG9yLCBpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZS0tOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuYWN0aXZlLS07CiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgICAgICB9CiAgICB9OwogICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuY2hlY2tJdGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGl0ZXJhdG9ycyA9IHRoaXMuaXRlcmF0b3JzOwogICAgICAgIHZhciBsZW4gPSBpdGVyYXRvcnMubGVuZ3RoOwogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07CiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IuaGFzVmFsdWUgPT09ICdmdW5jdGlvbicgJiYgIWl0ZXJhdG9yLmhhc1ZhbHVlKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgc2hvdWxkQ29tcGxldGUgPSBmYWxzZTsKICAgICAgICB2YXIgYXJncyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JzW2ldOwogICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpOwogICAgICAgICAgICBpZiAoaXRlcmF0b3IuaGFzQ29tcGxldGVkKCkpIHsKICAgICAgICAgICAgICAgIHNob3VsZENvbXBsZXRlID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHsKICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXJncy5wdXNoKHJlc3VsdC52YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7CiAgICAgICAgICAgIHRoaXMuX3RyeXJlc3VsdFNlbGVjdG9yKGFyZ3MpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChhcmdzKTsKICAgICAgICB9CiAgICAgICAgaWYgKHNob3VsZENvbXBsZXRlKSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlyZXN1bHRTZWxlY3RvciA9IGZ1bmN0aW9uIChhcmdzKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQocmVzdWx0KTsKICAgIH07CiAgICByZXR1cm4gWmlwU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJTdWJzY3JpYmVyIl0pKTsKCnZhciBTdGF0aWNJdGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFN0YXRpY0l0ZXJhdG9yKGl0ZXJhdG9yKSB7CiAgICAgICAgdGhpcy5pdGVyYXRvciA9IGl0ZXJhdG9yOwogICAgICAgIHRoaXMubmV4dFJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTsKICAgIH0KICAgIFN0YXRpY0l0ZXJhdG9yLnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgICBTdGF0aWNJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5uZXh0UmVzdWx0OwogICAgICAgIHRoaXMubmV4dFJlc3VsdCA9IHRoaXMuaXRlcmF0b3IubmV4dCgpOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9OwogICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLmhhc0NvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgbmV4dFJlc3VsdCA9IHRoaXMubmV4dFJlc3VsdDsKICAgICAgICByZXR1cm4gbmV4dFJlc3VsdCAmJiBuZXh0UmVzdWx0LmRvbmU7CiAgICB9OwogICAgcmV0dXJuIFN0YXRpY0l0ZXJhdG9yOwp9KCkpOwp2YXIgU3RhdGljQXJyYXlJdGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFN0YXRpY0FycmF5SXRlcmF0b3IoYXJyYXkpIHsKICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7CiAgICAgICAgdGhpcy5pbmRleCA9IDA7CiAgICAgICAgdGhpcy5sZW5ndGggPSAwOwogICAgICAgIHRoaXMubGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogICAgfQogICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGVbX2ludGVybmFsX3N5bWJvbF9pdGVyYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fWyJpdGVyYXRvciJdXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIGkgPSB0aGlzLmluZGV4Kys7CiAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheTsKICAgICAgICByZXR1cm4gaSA8IHRoaXMubGVuZ3RoID8geyB2YWx1ZTogYXJyYXlbaV0sIGRvbmU6IGZhbHNlIH0gOiB7IHZhbHVlOiBudWxsLCBkb25lOiB0cnVlIH07CiAgICB9OwogICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGUuaGFzVmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoID4gdGhpcy5pbmRleDsKICAgIH07CiAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXkubGVuZ3RoID09PSB0aGlzLmluZGV4OwogICAgfTsKICAgIHJldHVybiBTdGF0aWNBcnJheUl0ZXJhdG9yOwp9KCkpOwp2YXIgWmlwQnVmZmVySXRlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShaaXBCdWZmZXJJdGVyYXRvciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFppcEJ1ZmZlckl0ZXJhdG9yKGRlc3RpbmF0aW9uLCBwYXJlbnQsIG9ic2VydmFibGUpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7CiAgICAgICAgX3RoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7CiAgICAgICAgX3RoaXMuc3RpbGxVbnN1YnNjcmliZWQgPSB0cnVlOwogICAgICAgIF90aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgIF90aGlzLmlzQ29tcGxldGUgPSBmYWxzZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGVbX2ludGVybmFsX3N5bWJvbF9pdGVyYXRvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fWyJpdGVyYXRvciJdXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7CiAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDAgJiYgdGhpcy5pc0NvbXBsZXRlKSB7CiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBudWxsLCBkb25lOiB0cnVlIH07CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogYnVmZmVyLnNoaWZ0KCksIGRvbmU6IGZhbHNlIH07CiAgICAgICAgfQogICAgfTsKICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoID4gMDsKICAgIH07CiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUuaGFzQ29tcGxldGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDAgJiYgdGhpcy5pc0NvbXBsZXRlOwogICAgfTsKICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlJbmFjdGl2ZSgpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgIH07CiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHRoaXMuYnVmZmVyLnB1c2goaW5uZXJWYWx1ZSk7CiAgICAgICAgdGhpcy5wYXJlbnQuY2hlY2tJdGVyYXRvcnMoKTsKICAgIH07CiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIHJldHVybiBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkodGhpcywgdGhpcy5vYnNlcnZhYmxlLCB0aGlzLCBpbmRleCk7CiAgICB9OwogICAgcmV0dXJuIFppcEJ1ZmZlckl0ZXJhdG9yOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMzUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2F1ZGl0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiYXVkaXQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfYXVkaXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siYXVkaXQiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19hdWRpdFRpbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM3KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJhdWRpdFRpbWUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfYXVkaXRUaW1lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImF1ZGl0VGltZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2J1ZmZlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImJ1ZmZlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19idWZmZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siYnVmZmVyIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfYnVmZmVyQ291bnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM5KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJidWZmZXJDb3VudCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19idWZmZXJDb3VudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJidWZmZXJDb3VudCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2J1ZmZlclRpbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQwKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJidWZmZXJUaW1lIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2J1ZmZlclRpbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siYnVmZmVyVGltZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2J1ZmZlclRvZ2dsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDEpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImJ1ZmZlclRvZ2dsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19idWZmZXJUb2dnbGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siYnVmZmVyVG9nZ2xlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfYnVmZmVyV2hlbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImJ1ZmZlcldoZW4iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfYnVmZmVyV2hlbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fWyJidWZmZXJXaGVuIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfY2F0Y2hFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDMpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNhdGNoRXJyb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfY2F0Y2hFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fWyJjYXRjaEVycm9yIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfY29tYmluZUFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDQpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNvbWJpbmVBbGwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfY29tYmluZUFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fWyJjb21iaW5lQWxsIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfY29tYmluZUxhdGVzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNvbWJpbmVMYXRlc3QiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfY29tYmluZUxhdGVzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fWyJjb21iaW5lTGF0ZXN0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfY29uY2F0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNvbmNhdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19jb25jYXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bImNvbmNhdCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2NvbmNhdEFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE1KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjb25jYXRBbGwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfY29uY2F0QWxsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fWyJjb25jYXRBbGwiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19jb25jYXRNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nyk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY29uY2F0TWFwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2NvbmNhdE1hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfX1siY29uY2F0TWFwIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfY29uY2F0TWFwVG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY29uY2F0TWFwVG8iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfY29uY2F0TWFwVG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEzX19bImNvbmNhdE1hcFRvIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfY291bnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY291bnQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfY291bnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE0X19bImNvdW50Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfZGVib3VuY2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZGVib3VuY2UiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfZGVib3VuY2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE1X19bImRlYm91bmNlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfZGVib3VuY2VUaW1lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTEpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRlYm91bmNlVGltZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19kZWJvdW5jZVRpbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE2X19bImRlYm91bmNlVGltZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2RlZmF1bHRJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTIpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRlZmF1bHRJZkVtcHR5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2RlZmF1bHRJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xN19fWyJkZWZhdWx0SWZFbXB0eSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2RlbGF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTMpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRlbGF5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2RlbGF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOF9fWyJkZWxheSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2RlbGF5V2hlbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU1KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJkZWxheVdoZW4iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfZGVsYXlXaGVuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOV9fWyJkZWxheVdoZW4iXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19kZW1hdGVyaWFsaXplX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTYpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRlbWF0ZXJpYWxpemUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfZGVtYXRlcmlhbGl6ZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjBfX1siZGVtYXRlcmlhbGl6ZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2Rpc3RpbmN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTcpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRpc3RpbmN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2Rpc3RpbmN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMV9fWyJkaXN0aW5jdCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2Rpc3RpbmN0VW50aWxDaGFuZ2VkX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRpc3RpbmN0VW50aWxDaGFuZ2VkIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2Rpc3RpbmN0VW50aWxDaGFuZ2VkX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMl9fWyJkaXN0aW5jdFVudGlsQ2hhbmdlZCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2Rpc3RpbmN0VW50aWxLZXlDaGFuZ2VkX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTkpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2Rpc3RpbmN0VW50aWxLZXlDaGFuZ2VkX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yM19fWyJkaXN0aW5jdFVudGlsS2V5Q2hhbmdlZCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2VsZW1lbnRBdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYwKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJlbGVtZW50QXQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfZWxlbWVudEF0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNF9fWyJlbGVtZW50QXQiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19lbmRXaXRoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjUpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImVuZFdpdGgiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfZW5kV2l0aF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjVfX1siZW5kV2l0aCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2V2ZXJ5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjYpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImV2ZXJ5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2V2ZXJ5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNl9fWyJldmVyeSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2V4aGF1c3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nyk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZXhoYXVzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19leGhhdXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yN19fWyJleGhhdXN0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfZXhoYXVzdE1hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJleGhhdXN0TWFwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2V4aGF1c3RNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI4X19bImV4aGF1c3RNYXAiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19leHBhbmRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZXhwYW5kIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2V4cGFuZF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjlfX1siZXhwYW5kIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfZmlsdGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjEpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZpbHRlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19maWx0ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMwX19bImZpbHRlciJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2ZpbmFsaXplX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzApOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZpbmFsaXplIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2ZpbmFsaXplX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMV9fWyJmaW5hbGl6ZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2ZpbmRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZmluZCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19maW5kX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMl9fWyJmaW5kIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfZmluZEluZGV4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzIpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZpbmRJbmRleCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19maW5kSW5kZXhfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMzX19bImZpbmRJbmRleCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2ZpcnN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzMpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZpcnN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2ZpcnN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zNF9fWyJmaXJzdCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2dyb3VwQnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJncm91cEJ5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX2dyb3VwQnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM1X19bImdyb3VwQnkiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19pZ25vcmVFbGVtZW50c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc0KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpZ25vcmVFbGVtZW50cyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19pZ25vcmVFbGVtZW50c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzZfX1siaWdub3JlRWxlbWVudHMiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19pc0VtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzUpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlzRW1wdHkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfaXNFbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzdfX1siaXNFbXB0eSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX2xhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibGFzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19sYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zOF9fWyJsYXN0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfbWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibWFwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX21hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzlfX1sibWFwIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfbWFwVG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibWFwVG8iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfbWFwVG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQwX19bIm1hcFRvIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfbWF0ZXJpYWxpemVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQxX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibWF0ZXJpYWxpemUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfbWF0ZXJpYWxpemVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQxX19bIm1hdGVyaWFsaXplIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfbWF4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80Ml9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODApOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm1heCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19tYXhfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQyX19bIm1heCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX21lcmdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80M19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODMpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm1lcmdlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX21lcmdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80M19fWyJtZXJnZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX21lcmdlQWxsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTYpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm1lcmdlQWxsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX21lcmdlQWxsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NF9fWyJtZXJnZUFsbCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX21lcmdlTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm1lcmdlTWFwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX21lcmdlTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NV9fWyJtZXJnZU1hcCJdOyB9KTsKCi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZmxhdE1hcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19tZXJnZU1hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDVfX1sibWVyZ2VNYXAiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19tZXJnZU1hcFRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80Nl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODQpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm1lcmdlTWFwVG8iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfbWVyZ2VNYXBUb19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDZfX1sibWVyZ2VNYXBUbyJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX21lcmdlU2Nhbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTg1KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtZXJnZVNjYW4iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfbWVyZ2VTY2FuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80N19fWyJtZXJnZVNjYW4iXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19taW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibWluIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX21pbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDhfX1sibWluIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfbXVsdGljYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80OV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODcpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm11bHRpY2FzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19tdWx0aWNhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ5X19bIm11bHRpY2FzdCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX29ic2VydmVPbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm9ic2VydmVPbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19vYnNlcnZlT25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzUwX19bIm9ic2VydmVPbiJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX29uRXJyb3JSZXN1bWVOZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81MV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODgpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm9uRXJyb3JSZXN1bWVOZXh0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX29uRXJyb3JSZXN1bWVOZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81MV9fWyJvbkVycm9yUmVzdW1lTmV4dCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3BhaXJ3aXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81Ml9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODkpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInBhaXJ3aXNlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3BhaXJ3aXNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81Ml9fWyJwYWlyd2lzZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3BhcnRpdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkwKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwYXJ0aXRpb24iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfcGFydGl0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81M19fWyJwYXJ0aXRpb24iXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19wbHVja19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkyKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwbHVjayIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19wbHVja19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTRfX1sicGx1Y2siXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19wdWJsaXNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81NV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTMpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInB1Ymxpc2giLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfcHVibGlzaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTVfX1sicHVibGlzaCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3B1Ymxpc2hCZWhhdmlvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk0KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwdWJsaXNoQmVoYXZpb3IiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfcHVibGlzaEJlaGF2aW9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81Nl9fWyJwdWJsaXNoQmVoYXZpb3IiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19wdWJsaXNoTGFzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk1KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwdWJsaXNoTGFzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19wdWJsaXNoTGFzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTdfX1sicHVibGlzaExhc3QiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19wdWJsaXNoUmVwbGF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81OF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTYpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInB1Ymxpc2hSZXBsYXkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfcHVibGlzaFJlcGxheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNThfX1sicHVibGlzaFJlcGxheSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3JhY2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzU5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nyk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmFjZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19yYWNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81OV9fWyJyYWNlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfcmVkdWNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82MF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODEpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJlZHVjZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19yZWR1Y2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzYwX19bInJlZHVjZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3JlcGVhdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk4KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJyZXBlYXQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfcmVwZWF0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82MV9fWyJyZXBlYXQiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19yZXBlYXRXaGVuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82Ml9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTkpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJlcGVhdFdoZW4iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfcmVwZWF0V2hlbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjJfX1sicmVwZWF0V2hlbiJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3JldHJ5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82M19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDApOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJldHJ5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3JldHJ5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82M19fWyJyZXRyeSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3JldHJ5V2hlbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAxKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJyZXRyeVdoZW4iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfcmV0cnlXaGVuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82NF9fWyJyZXRyeVdoZW4iXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19yZWZDb3VudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJlZkNvdW50IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3JlZkNvdW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82NV9fWyJyZWZDb3VudCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3NhbXBsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjAyKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzYW1wbGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfc2FtcGxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82Nl9fWyJzYW1wbGUiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19zYW1wbGVUaW1lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82N19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDMpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInNhbXBsZVRpbWUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfc2FtcGxlVGltZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjdfX1sic2FtcGxlVGltZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3NjYW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzY4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Mik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic2NhbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19zY2FuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82OF9fWyJzY2FuIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfc2VxdWVuY2VFcXVhbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNjlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA0KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzZXF1ZW5jZUVxdWFsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3NlcXVlbmNlRXF1YWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzY5X19bInNlcXVlbmNlRXF1YWwiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19zaGFyZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA1KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzaGFyZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19zaGFyZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzBfX1sic2hhcmUiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19zaGFyZVJlcGxheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA2KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzaGFyZVJlcGxheSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19zaGFyZVJlcGxheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzFfX1sic2hhcmVSZXBsYXkiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19zaW5nbGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzcyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNyk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic2luZ2xlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3NpbmdsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzJfX1sic2luZ2xlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfc2tpcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA4KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJza2lwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3NraXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzczX19bInNraXAiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19za2lwTGFzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjA5KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJza2lwTGFzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19za2lwTGFzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzRfX1sic2tpcExhc3QiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19za2lwVW50aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic2tpcFVudGlsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3NraXBVbnRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzVfX1sic2tpcFVudGlsIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfc2tpcFdoaWxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83Nl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTEpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInNraXBXaGlsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19za2lwV2hpbGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc2X19bInNraXBXaGlsZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3N0YXJ0V2l0aF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEyKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzdGFydFdpdGgiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfc3RhcnRXaXRoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83N19fWyJzdGFydFdpdGgiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19zdWJzY3JpYmVPbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEzKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzdWJzY3JpYmVPbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19zdWJzY3JpYmVPbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzhfX1sic3Vic2NyaWJlT24iXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc19zd2l0Y2hBbGxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzc5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic3dpdGNoQWxsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3N3aXRjaEFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNzlfX1sic3dpdGNoQWxsIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfc3dpdGNoTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84MF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTYpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInN3aXRjaE1hcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc19zd2l0Y2hNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzgwX19bInN3aXRjaE1hcCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3N3aXRjaE1hcFRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84MV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTcpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInN3aXRjaE1hcFRvIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3N3aXRjaE1hcFRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84MV9fWyJzd2l0Y2hNYXBUbyJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3Rha2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzgyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGFrZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc190YWtlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84Ml9fWyJ0YWtlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGFrZUxhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzgzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nyk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGFrZUxhc3QiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGFrZUxhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzgzX19bInRha2VMYXN0Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGFrZVVudGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84NF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTgpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRha2VVbnRpbCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc190YWtlVW50aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzg0X19bInRha2VVbnRpbCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3Rha2VXaGlsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfODVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjE5KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0YWtlV2hpbGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGFrZVdoaWxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84NV9fWyJ0YWtlV2hpbGUiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc190YXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzg2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Myk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGFwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3RhcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfODZfX1sidGFwIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGhyb3R0bGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzg3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGhyb3R0bGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGhyb3R0bGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzg3X19bInRocm90dGxlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGhyb3R0bGVUaW1lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84OF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjEpOwovKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRocm90dGxlVGltZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc190aHJvdHRsZVRpbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzg4X19bInRocm90dGxlVGltZSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3Rocm93SWZFbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfODlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYyKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0aHJvd0lmRW1wdHkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGhyb3dJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84OV9fWyJ0aHJvd0lmRW1wdHkiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc190aW1lSW50ZXJ2YWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzkwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGltZUludGVydmFsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3RpbWVJbnRlcnZhbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTBfX1sidGltZUludGVydmFsIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfdGltZW91dF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIzKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0aW1lb3V0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3RpbWVvdXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzkxX19bInRpbWVvdXQiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc190aW1lb3V0V2l0aF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjI0KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0aW1lb3V0V2l0aCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX29wZXJhdG9yc190aW1lb3V0V2l0aF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTJfX1sidGltZW91dFdpdGgiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc190aW1lc3RhbXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzkzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNSk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGltZXN0YW1wIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3RpbWVzdGFtcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTNfX1sidGltZXN0YW1wIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfdG9BcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjI2KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0b0FycmF5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3RvQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzk0X19bInRvQXJyYXkiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc193aW5kb3dfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzk1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNyk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2luZG93IiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3dpbmRvd19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTVfX1sid2luZG93Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfd2luZG93Q291bnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzk2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyOCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2luZG93Q291bnQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfd2luZG93Q291bnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzk2X19bIndpbmRvd0NvdW50Il07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfd2luZG93VGltZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjI5KTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ3aW5kb3dUaW1lIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3dpbmRvd1RpbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzk3X19bIndpbmRvd1RpbWUiXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc193aW5kb3dUb2dnbGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzk4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2luZG93VG9nZ2xlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3dpbmRvd1RvZ2dsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOThfX1sid2luZG93VG9nZ2xlIl07IH0pOwoKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9vcGVyYXRvcnNfd2luZG93V2hlbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOTlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjMxKTsKLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ3aW5kb3dXaGVuIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3dpbmRvd1doZW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzk5X19bIndpbmRvd1doZW4iXTsgfSk7CgovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX29wZXJhdG9yc193aXRoTGF0ZXN0RnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTAwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMik7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2l0aExhdGVzdEZyb20iLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9vcGVyYXRvcnNfd2l0aExhdGVzdEZyb21fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwMF9fWyJ3aXRoTGF0ZXN0RnJvbSJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3ppcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTAxX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzMyk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiemlwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3ppcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTAxX19bInppcCJdOyB9KTsKCi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfb3BlcmF0b3JzX3ppcEFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTAyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzNCk7Ci8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiemlwQWxsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfb3BlcmF0b3JzX3ppcEFsbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTAyX19bInppcEFsbCJdOyB9KTsKCi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTM2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJhdWRpdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYXVkaXQ7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfdHJ5Q2F0Y2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfdHJ5Q2F0Y2gsX3V0aWxfZXJyb3JPYmplY3QsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gYXVkaXQoZHVyYXRpb25TZWxlY3RvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIGF1ZGl0T3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IEF1ZGl0T3BlcmF0b3IoZHVyYXRpb25TZWxlY3RvcikpOwogICAgfTsKfQp2YXIgQXVkaXRPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIEF1ZGl0T3BlcmF0b3IoZHVyYXRpb25TZWxlY3RvcikgewogICAgICAgIHRoaXMuZHVyYXRpb25TZWxlY3RvciA9IGR1cmF0aW9uU2VsZWN0b3I7CiAgICB9CiAgICBBdWRpdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBBdWRpdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvblNlbGVjdG9yKSk7CiAgICB9OwogICAgcmV0dXJuIEF1ZGl0T3BlcmF0b3I7Cn0oKSk7CnZhciBBdWRpdFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShBdWRpdFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBBdWRpdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1cmF0aW9uU2VsZWN0b3IpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjsKICAgICAgICBfdGhpcy5oYXNWYWx1ZSA9IGZhbHNlOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEF1ZGl0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7CiAgICAgICAgaWYgKCF0aGlzLnRocm90dGxlZCkgewogICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBPYmplY3QoX3V0aWxfdHJ5Q2F0Y2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1sidHJ5Q2F0Y2giXSkodGhpcy5kdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7CiAgICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZXJyb3JPYmplY3QiXSkgewogICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJlcnJvck9iamVjdCJdLmUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHRoaXMsIGR1cmF0aW9uKTsKICAgICAgICAgICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uY2xvc2VkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclRocm90dGxlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnRocm90dGxlZCA9IGlubmVyU3Vic2NyaXB0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBBdWRpdFN1YnNjcmliZXIucHJvdG90eXBlLmNsZWFyVGhyb3R0bGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9hID0gdGhpcywgdmFsdWUgPSBfYS52YWx1ZSwgaGFzVmFsdWUgPSBfYS5oYXNWYWx1ZSwgdGhyb3R0bGVkID0gX2EudGhyb3R0bGVkOwogICAgICAgIGlmICh0aHJvdHRsZWQpIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhyb3R0bGVkKTsKICAgICAgICAgICAgdGhpcy50aHJvdHRsZWQgPSBudWxsOwogICAgICAgICAgICB0aHJvdHRsZWQudW5zdWJzY3JpYmUoKTsKICAgICAgICB9CiAgICAgICAgaWYgKGhhc1ZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBudWxsOwogICAgICAgICAgICB0aGlzLmhhc1ZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7CiAgICAgICAgfQogICAgfTsKICAgIEF1ZGl0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4KSB7CiAgICAgICAgdGhpcy5jbGVhclRocm90dGxlKCk7CiAgICB9OwogICAgQXVkaXRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmNsZWFyVGhyb3R0bGUoKTsKICAgIH07CiAgICByZXR1cm4gQXVkaXRTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXVkaXQuanMubWFwCgoKLyoqKi8gfSksCi8qIDEzNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiYXVkaXRUaW1lIiwgZnVuY3Rpb24oKSB7IHJldHVybiBhdWRpdFRpbWU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYXVkaXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vYnNlcnZhYmxlX3RpbWVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3NjaGVkdWxlcl9hc3luYyxfYXVkaXQsX29ic2VydmFibGVfdGltZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiBhdWRpdFRpbWUoZHVyYXRpb24sIHNjaGVkdWxlcikgewogICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgc2NoZWR1bGVyID0gX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJhc3luYyJdOwogICAgfQogICAgcmV0dXJuIE9iamVjdChfYXVkaXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siYXVkaXQiXSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gT2JqZWN0KF9vYnNlcnZhYmxlX3RpbWVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInRpbWVyIl0pKGR1cmF0aW9uLCBzY2hlZHVsZXIpOyB9KTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1hdWRpdFRpbWUuanMubWFwCgoKLyoqKi8gfSksCi8qIDEzOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiYnVmZmVyIiwgZnVuY3Rpb24oKSB7IHJldHVybiBidWZmZXI7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIGJ1ZmZlcihjbG9zaW5nTm90aWZpZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiBidWZmZXJPcGVyYXRvckZ1bmN0aW9uKHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgQnVmZmVyT3BlcmF0b3IoY2xvc2luZ05vdGlmaWVyKSk7CiAgICB9Owp9CnZhciBCdWZmZXJPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIEJ1ZmZlck9wZXJhdG9yKGNsb3NpbmdOb3RpZmllcikgewogICAgICAgIHRoaXMuY2xvc2luZ05vdGlmaWVyID0gY2xvc2luZ05vdGlmaWVyOwogICAgfQogICAgQnVmZmVyT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IEJ1ZmZlclN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jbG9zaW5nTm90aWZpZXIpKTsKICAgIH07CiAgICByZXR1cm4gQnVmZmVyT3BlcmF0b3I7Cn0oKSk7CnZhciBCdWZmZXJTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oQnVmZmVyU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEJ1ZmZlclN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNsb3NpbmdOb3RpZmllcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgIF90aGlzLmFkZChPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkoX3RoaXMsIGNsb3NpbmdOb3RpZmllcikpOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEJ1ZmZlclN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7CiAgICB9OwogICAgQnVmZmVyU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjsKICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpOwogICAgfTsKICAgIHJldHVybiBCdWZmZXJTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVmZmVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxMzkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImJ1ZmZlckNvdW50IiwgZnVuY3Rpb24oKSB7IHJldHVybiBidWZmZXJDb3VudDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIGJ1ZmZlckNvdW50KGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpIHsKICAgIGlmIChzdGFydEJ1ZmZlckV2ZXJ5ID09PSB2b2lkIDApIHsKICAgICAgICBzdGFydEJ1ZmZlckV2ZXJ5ID0gbnVsbDsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiBidWZmZXJDb3VudE9wZXJhdG9yRnVuY3Rpb24oc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBCdWZmZXJDb3VudE9wZXJhdG9yKGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpKTsKICAgIH07Cn0KdmFyIEJ1ZmZlckNvdW50T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBCdWZmZXJDb3VudE9wZXJhdG9yKGJ1ZmZlclNpemUsIHN0YXJ0QnVmZmVyRXZlcnkpIHsKICAgICAgICB0aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplOwogICAgICAgIHRoaXMuc3RhcnRCdWZmZXJFdmVyeSA9IHN0YXJ0QnVmZmVyRXZlcnk7CiAgICAgICAgaWYgKCFzdGFydEJ1ZmZlckV2ZXJ5IHx8IGJ1ZmZlclNpemUgPT09IHN0YXJ0QnVmZmVyRXZlcnkpIHsKICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyQ2xhc3MgPSBCdWZmZXJDb3VudFN1YnNjcmliZXI7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJDbGFzcyA9IEJ1ZmZlclNraXBDb3VudFN1YnNjcmliZXI7CiAgICAgICAgfQogICAgfQogICAgQnVmZmVyQ291bnRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgdGhpcy5zdWJzY3JpYmVyQ2xhc3Moc3Vic2NyaWJlciwgdGhpcy5idWZmZXJTaXplLCB0aGlzLnN0YXJ0QnVmZmVyRXZlcnkpKTsKICAgIH07CiAgICByZXR1cm4gQnVmZmVyQ291bnRPcGVyYXRvcjsKfSgpKTsKdmFyIEJ1ZmZlckNvdW50U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEJ1ZmZlckNvdW50U3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEJ1ZmZlckNvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYnVmZmVyU2l6ZSkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmJ1ZmZlclNpemUgPSBidWZmZXJTaXplOwogICAgICAgIF90aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEJ1ZmZlckNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7CiAgICAgICAgYnVmZmVyLnB1c2godmFsdWUpOwogICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09IHRoaXMuYnVmZmVyU2l6ZSkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTsKICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsKICAgICAgICB9CiAgICB9OwogICAgQnVmZmVyQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyOwogICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTsKICAgICAgICB9CiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTsKICAgIH07CiAgICByZXR1cm4gQnVmZmVyQ291bnRTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwp2YXIgQnVmZmVyU2tpcENvdW50U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEJ1ZmZlclNraXBDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBCdWZmZXJTa2lwQ291bnRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBidWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5KSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemU7CiAgICAgICAgX3RoaXMuc3RhcnRCdWZmZXJFdmVyeSA9IHN0YXJ0QnVmZmVyRXZlcnk7CiAgICAgICAgX3RoaXMuYnVmZmVycyA9IFtdOwogICAgICAgIF90aGlzLmNvdW50ID0gMDsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBCdWZmZXJTa2lwQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciBfYSA9IHRoaXMsIGJ1ZmZlclNpemUgPSBfYS5idWZmZXJTaXplLCBzdGFydEJ1ZmZlckV2ZXJ5ID0gX2Euc3RhcnRCdWZmZXJFdmVyeSwgYnVmZmVycyA9IF9hLmJ1ZmZlcnMsIGNvdW50ID0gX2EuY291bnQ7CiAgICAgICAgdGhpcy5jb3VudCsrOwogICAgICAgIGlmIChjb3VudCAlIHN0YXJ0QnVmZmVyRXZlcnkgPT09IDApIHsKICAgICAgICAgICAgYnVmZmVycy5wdXNoKFtdKTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgaSA9IGJ1ZmZlcnMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgIHZhciBidWZmZXIgPSBidWZmZXJzW2ldOwogICAgICAgICAgICBidWZmZXIucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSBidWZmZXJTaXplKSB7CiAgICAgICAgICAgICAgICBidWZmZXJzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIEJ1ZmZlclNraXBDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLCBidWZmZXJzID0gX2EuYnVmZmVycywgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbjsKICAgICAgICB3aGlsZSAoYnVmZmVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciBidWZmZXIgPSBidWZmZXJzLnNoaWZ0KCk7CiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dChidWZmZXIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7CiAgICB9OwogICAgcmV0dXJuIEJ1ZmZlclNraXBDb3VudFN1YnNjcmliZXI7Cn0oX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlckNvdW50LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImJ1ZmZlclRpbWUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGJ1ZmZlclRpbWU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3NjaGVkdWxlcl9hc3luYyxfU3Vic2NyaWJlcixfdXRpbF9pc1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgpmdW5jdGlvbiBidWZmZXJUaW1lKGJ1ZmZlclRpbWVTcGFuKSB7CiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsKICAgIHZhciBzY2hlZHVsZXIgPSBfc2NoZWR1bGVyX2FzeW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImFzeW5jIl07CiAgICBpZiAoT2JqZWN0KF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImlzU2NoZWR1bGVyIl0pKGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV0pKSB7CiAgICAgICAgc2NoZWR1bGVyID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTsKICAgICAgICBsZW5ndGgtLTsKICAgIH0KICAgIHZhciBidWZmZXJDcmVhdGlvbkludGVydmFsID0gbnVsbDsKICAgIGlmIChsZW5ndGggPj0gMikgewogICAgICAgIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPSBhcmd1bWVudHNbMV07CiAgICB9CiAgICB2YXIgbWF4QnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgIGlmIChsZW5ndGggPj0gMykgewogICAgICAgIG1heEJ1ZmZlclNpemUgPSBhcmd1bWVudHNbMl07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gYnVmZmVyVGltZU9wZXJhdG9yRnVuY3Rpb24oc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBCdWZmZXJUaW1lT3BlcmF0b3IoYnVmZmVyVGltZVNwYW4sIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIG1heEJ1ZmZlclNpemUsIHNjaGVkdWxlcikpOwogICAgfTsKfQp2YXIgQnVmZmVyVGltZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gQnVmZmVyVGltZU9wZXJhdG9yKGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBtYXhCdWZmZXJTaXplLCBzY2hlZHVsZXIpIHsKICAgICAgICB0aGlzLmJ1ZmZlclRpbWVTcGFuID0gYnVmZmVyVGltZVNwYW47CiAgICAgICAgdGhpcy5idWZmZXJDcmVhdGlvbkludGVydmFsID0gYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDsKICAgICAgICB0aGlzLm1heEJ1ZmZlclNpemUgPSBtYXhCdWZmZXJTaXplOwogICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgfQogICAgQnVmZmVyVGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBCdWZmZXJUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmJ1ZmZlclRpbWVTcGFuLCB0aGlzLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsIHRoaXMubWF4QnVmZmVyU2l6ZSwgdGhpcy5zY2hlZHVsZXIpKTsKICAgIH07CiAgICByZXR1cm4gQnVmZmVyVGltZU9wZXJhdG9yOwp9KCkpOwp2YXIgQ29udGV4dCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIENvbnRleHQoKSB7CiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsKICAgIH0KICAgIHJldHVybiBDb250ZXh0Owp9KCkpOwp2YXIgQnVmZmVyVGltZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShCdWZmZXJUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEJ1ZmZlclRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBidWZmZXJUaW1lU3BhbiwgYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgbWF4QnVmZmVyU2l6ZSwgc2NoZWR1bGVyKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuYnVmZmVyVGltZVNwYW4gPSBidWZmZXJUaW1lU3BhbjsKICAgICAgICBfdGhpcy5idWZmZXJDcmVhdGlvbkludGVydmFsID0gYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDsKICAgICAgICBfdGhpcy5tYXhCdWZmZXJTaXplID0gbWF4QnVmZmVyU2l6ZTsKICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgX3RoaXMuY29udGV4dHMgPSBbXTsKICAgICAgICB2YXIgY29udGV4dCA9IF90aGlzLm9wZW5Db250ZXh0KCk7CiAgICAgICAgX3RoaXMudGltZXNwYW5Pbmx5ID0gYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCA9PSBudWxsIHx8IGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwgPCAwOwogICAgICAgIGlmIChfdGhpcy50aW1lc3Bhbk9ubHkpIHsKICAgICAgICAgICAgdmFyIHRpbWVTcGFuT25seVN0YXRlID0geyBzdWJzY3JpYmVyOiBfdGhpcywgY29udGV4dDogY29udGV4dCwgYnVmZmVyVGltZVNwYW46IGJ1ZmZlclRpbWVTcGFuIH07CiAgICAgICAgICAgIF90aGlzLmFkZChjb250ZXh0LmNsb3NlQWN0aW9uID0gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoQnVmZmVyVGltZVNwYW5Pbmx5LCBidWZmZXJUaW1lU3BhbiwgdGltZVNwYW5Pbmx5U3RhdGUpKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBjbG9zZVN0YXRlID0geyBzdWJzY3JpYmVyOiBfdGhpcywgY29udGV4dDogY29udGV4dCB9OwogICAgICAgICAgICB2YXIgY3JlYXRpb25TdGF0ZSA9IHsgYnVmZmVyVGltZVNwYW46IGJ1ZmZlclRpbWVTcGFuLCBidWZmZXJDcmVhdGlvbkludGVydmFsOiBidWZmZXJDcmVhdGlvbkludGVydmFsLCBzdWJzY3JpYmVyOiBfdGhpcywgc2NoZWR1bGVyOiBzY2hlZHVsZXIgfTsKICAgICAgICAgICAgX3RoaXMuYWRkKGNvbnRleHQuY2xvc2VBY3Rpb24gPSBzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hCdWZmZXJDbG9zZSwgYnVmZmVyVGltZVNwYW4sIGNsb3NlU3RhdGUpKTsKICAgICAgICAgICAgX3RoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlckNyZWF0aW9uLCBidWZmZXJDcmVhdGlvbkludGVydmFsLCBjcmVhdGlvblN0YXRlKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7CiAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDsKICAgICAgICB2YXIgZmlsbGVkQnVmZmVyQ29udGV4dDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBjb250ZXh0XzEgPSBjb250ZXh0c1tpXTsKICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGNvbnRleHRfMS5idWZmZXI7CiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT0gdGhpcy5tYXhCdWZmZXJTaXplKSB7CiAgICAgICAgICAgICAgICBmaWxsZWRCdWZmZXJDb250ZXh0ID0gY29udGV4dF8xOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChmaWxsZWRCdWZmZXJDb250ZXh0KSB7CiAgICAgICAgICAgIHRoaXMub25CdWZmZXJGdWxsKGZpbGxlZEJ1ZmZlckNvbnRleHQpOwogICAgICAgIH0KICAgIH07CiAgICBCdWZmZXJUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHRoaXMuY29udGV4dHMubGVuZ3RoID0gMDsKICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsIGVycik7CiAgICB9OwogICAgQnVmZmVyVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLCBjb250ZXh0cyA9IF9hLmNvbnRleHRzLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uOwogICAgICAgIHdoaWxlIChjb250ZXh0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciBjb250ZXh0XzIgPSBjb250ZXh0cy5zaGlmdCgpOwogICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGNvbnRleHRfMi5idWZmZXIpOwogICAgICAgIH0KICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpOwogICAgfTsKICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7CiAgICB9OwogICAgQnVmZmVyVGltZVN1YnNjcmliZXIucHJvdG90eXBlLm9uQnVmZmVyRnVsbCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICAgICAgdGhpcy5jbG9zZUNvbnRleHQoY29udGV4dCk7CiAgICAgICAgdmFyIGNsb3NlQWN0aW9uID0gY29udGV4dC5jbG9zZUFjdGlvbjsKICAgICAgICBjbG9zZUFjdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgIHRoaXMucmVtb3ZlKGNsb3NlQWN0aW9uKTsKICAgICAgICBpZiAoIXRoaXMuY2xvc2VkICYmIHRoaXMudGltZXNwYW5Pbmx5KSB7CiAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzLm9wZW5Db250ZXh0KCk7CiAgICAgICAgICAgIHZhciBidWZmZXJUaW1lU3BhbiA9IHRoaXMuYnVmZmVyVGltZVNwYW47CiAgICAgICAgICAgIHZhciB0aW1lU3Bhbk9ubHlTdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgY29udGV4dDogY29udGV4dCwgYnVmZmVyVGltZVNwYW46IGJ1ZmZlclRpbWVTcGFuIH07CiAgICAgICAgICAgIHRoaXMuYWRkKGNvbnRleHQuY2xvc2VBY3Rpb24gPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlclRpbWVTcGFuT25seSwgYnVmZmVyVGltZVNwYW4sIHRpbWVTcGFuT25seVN0YXRlKSk7CiAgICAgICAgfQogICAgfTsKICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5vcGVuQ29udGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KCk7CiAgICAgICAgdGhpcy5jb250ZXh0cy5wdXNoKGNvbnRleHQpOwogICAgICAgIHJldHVybiBjb250ZXh0OwogICAgfTsKICAgIEJ1ZmZlclRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUNvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkgewogICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChjb250ZXh0LmJ1ZmZlcik7CiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0czsKICAgICAgICB2YXIgc3BsaWNlSW5kZXggPSBjb250ZXh0cyA/IGNvbnRleHRzLmluZGV4T2YoY29udGV4dCkgOiAtMTsKICAgICAgICBpZiAoc3BsaWNlSW5kZXggPj0gMCkgewogICAgICAgICAgICBjb250ZXh0cy5zcGxpY2UoY29udGV4dHMuaW5kZXhPZihjb250ZXh0KSwgMSk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBCdWZmZXJUaW1lU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJTdWJzY3JpYmVyIl0pKTsKZnVuY3Rpb24gZGlzcGF0Y2hCdWZmZXJUaW1lU3Bhbk9ubHkoc3RhdGUpIHsKICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUuc3Vic2NyaWJlcjsKICAgIHZhciBwcmV2Q29udGV4dCA9IHN0YXRlLmNvbnRleHQ7CiAgICBpZiAocHJldkNvbnRleHQpIHsKICAgICAgICBzdWJzY3JpYmVyLmNsb3NlQ29udGV4dChwcmV2Q29udGV4dCk7CiAgICB9CiAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7CiAgICAgICAgc3RhdGUuY29udGV4dCA9IHN1YnNjcmliZXIub3BlbkNvbnRleHQoKTsKICAgICAgICBzdGF0ZS5jb250ZXh0LmNsb3NlQWN0aW9uID0gdGhpcy5zY2hlZHVsZShzdGF0ZSwgc3RhdGUuYnVmZmVyVGltZVNwYW4pOwogICAgfQp9CmZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyQ3JlYXRpb24oc3RhdGUpIHsKICAgIHZhciBidWZmZXJDcmVhdGlvbkludGVydmFsID0gc3RhdGUuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbCwgYnVmZmVyVGltZVNwYW4gPSBzdGF0ZS5idWZmZXJUaW1lU3Bhbiwgc3Vic2NyaWJlciA9IHN0YXRlLnN1YnNjcmliZXIsIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlcjsKICAgIHZhciBjb250ZXh0ID0gc3Vic2NyaWJlci5vcGVuQ29udGV4dCgpOwogICAgdmFyIGFjdGlvbiA9IHRoaXM7CiAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7CiAgICAgICAgc3Vic2NyaWJlci5hZGQoY29udGV4dC5jbG9zZUFjdGlvbiA9IHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaEJ1ZmZlckNsb3NlLCBidWZmZXJUaW1lU3BhbiwgeyBzdWJzY3JpYmVyOiBzdWJzY3JpYmVyLCBjb250ZXh0OiBjb250ZXh0IH0pKTsKICAgICAgICBhY3Rpb24uc2NoZWR1bGUoc3RhdGUsIGJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwpOwogICAgfQp9CmZ1bmN0aW9uIGRpc3BhdGNoQnVmZmVyQ2xvc2UoYXJnKSB7CiAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyLCBjb250ZXh0ID0gYXJnLmNvbnRleHQ7CiAgICBzdWJzY3JpYmVyLmNsb3NlQ29udGV4dChjb250ZXh0KTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUaW1lLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImJ1ZmZlclRvZ2dsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYnVmZmVyVG9nZ2xlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpcHRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmlwdGlvbixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCxfT3V0ZXJTdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCmZ1bmN0aW9uIGJ1ZmZlclRvZ2dsZShvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gYnVmZmVyVG9nZ2xlT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IEJ1ZmZlclRvZ2dsZU9wZXJhdG9yKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpKTsKICAgIH07Cn0KdmFyIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gQnVmZmVyVG9nZ2xlT3BlcmF0b3Iob3BlbmluZ3MsIGNsb3NpbmdTZWxlY3RvcikgewogICAgICAgIHRoaXMub3BlbmluZ3MgPSBvcGVuaW5nczsKICAgICAgICB0aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3RvcjsKICAgIH0KICAgIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub3BlbmluZ3MsIHRoaXMuY2xvc2luZ1NlbGVjdG9yKSk7CiAgICB9OwogICAgcmV0dXJuIEJ1ZmZlclRvZ2dsZU9wZXJhdG9yOwp9KCkpOwp2YXIgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvcGVuaW5ncywgY2xvc2luZ1NlbGVjdG9yKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMub3BlbmluZ3MgPSBvcGVuaW5nczsKICAgICAgICBfdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7CiAgICAgICAgX3RoaXMuY29udGV4dHMgPSBbXTsKICAgICAgICBfdGhpcy5hZGQoT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInN1YnNjcmliZVRvUmVzdWx0Il0pKF90aGlzLCBvcGVuaW5ncykpOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0czsKICAgICAgICB2YXIgbGVuID0gY29udGV4dHMubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgY29udGV4dHNbaV0uYnVmZmVyLnB1c2godmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0czsKICAgICAgICB3aGlsZSAoY29udGV4dHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICB2YXIgY29udGV4dF8xID0gY29udGV4dHMuc2hpZnQoKTsKICAgICAgICAgICAgY29udGV4dF8xLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgICAgICBjb250ZXh0XzEuYnVmZmVyID0gbnVsbDsKICAgICAgICAgICAgY29udGV4dF8xLnN1YnNjcmlwdGlvbiA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHRoaXMuY29udGV4dHMgPSBudWxsOwogICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcywgZXJyKTsKICAgIH07CiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0czsKICAgICAgICB3aGlsZSAoY29udGV4dHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICB2YXIgY29udGV4dF8yID0gY29udGV4dHMuc2hpZnQoKTsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGNvbnRleHRfMi5idWZmZXIpOwogICAgICAgICAgICBjb250ZXh0XzIuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIGNvbnRleHRfMi5idWZmZXIgPSBudWxsOwogICAgICAgICAgICBjb250ZXh0XzIuc3Vic2NyaXB0aW9uID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb250ZXh0cyA9IG51bGw7CiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTsKICAgIH07CiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7CiAgICAgICAgb3V0ZXJWYWx1ZSA/IHRoaXMuY2xvc2VCdWZmZXIob3V0ZXJWYWx1ZSkgOiB0aGlzLm9wZW5CdWZmZXIoaW5uZXJWYWx1ZSk7CiAgICB9OwogICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHsKICAgICAgICB0aGlzLmNsb3NlQnVmZmVyKGlubmVyU3ViLmNvbnRleHQpOwogICAgfTsKICAgIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5CdWZmZXIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgY2xvc2luZ1NlbGVjdG9yID0gdGhpcy5jbG9zaW5nU2VsZWN0b3I7CiAgICAgICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSBjbG9zaW5nU2VsZWN0b3IuY2FsbCh0aGlzLCB2YWx1ZSk7CiAgICAgICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIpIHsKICAgICAgICAgICAgICAgIHRoaXMudHJ5U3Vic2NyaWJlKGNsb3NpbmdOb3RpZmllcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpOwogICAgICAgIH0KICAgIH07CiAgICBCdWZmZXJUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZUJ1ZmZlciA9IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0czsKICAgICAgICBpZiAoY29udGV4dHMgJiYgY29udGV4dCkgewogICAgICAgICAgICB2YXIgYnVmZmVyID0gY29udGV4dC5idWZmZXIsIHN1YnNjcmlwdGlvbiA9IGNvbnRleHQuc3Vic2NyaXB0aW9uOwogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTsKICAgICAgICAgICAgY29udGV4dHMuc3BsaWNlKGNvbnRleHRzLmluZGV4T2YoY29udGV4dCksIDEpOwogICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pOwogICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICB9CiAgICB9OwogICAgQnVmZmVyVG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKGNsb3NpbmdOb3RpZmllcikgewogICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7CiAgICAgICAgdmFyIGJ1ZmZlciA9IFtdOwogICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpcHRpb24iXSgpOwogICAgICAgIHZhciBjb250ZXh0ID0geyBidWZmZXI6IGJ1ZmZlciwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24gfTsKICAgICAgICBjb250ZXh0cy5wdXNoKGNvbnRleHQpOwogICAgICAgIHZhciBpbm5lclN1YnNjcmlwdGlvbiA9IE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKSh0aGlzLCBjbG9zaW5nTm90aWZpZXIsIGNvbnRleHQpOwogICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uY2xvc2VkKSB7CiAgICAgICAgICAgIHRoaXMuY2xvc2VCdWZmZXIoY29udGV4dCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi5jb250ZXh0ID0gY29udGV4dDsKICAgICAgICAgICAgdGhpcy5hZGQoaW5uZXJTdWJzY3JpcHRpb24pOwogICAgICAgICAgICBzdWJzY3JpcHRpb24uYWRkKGlubmVyU3Vic2NyaXB0aW9uKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIEJ1ZmZlclRvZ2dsZVN1YnNjcmliZXI7Cn0oX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPdXRlclN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXJUb2dnbGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDE0MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiYnVmZmVyV2hlbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYnVmZmVyV2hlbjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX3RyeUNhdGNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2Vycm9yT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpcHRpb24sX3V0aWxfdHJ5Q2F0Y2gsX3V0aWxfZXJyb3JPYmplY3QsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCmZ1bmN0aW9uIGJ1ZmZlcldoZW4oY2xvc2luZ1NlbGVjdG9yKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgQnVmZmVyV2hlbk9wZXJhdG9yKGNsb3NpbmdTZWxlY3RvcikpOwogICAgfTsKfQp2YXIgQnVmZmVyV2hlbk9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gQnVmZmVyV2hlbk9wZXJhdG9yKGNsb3NpbmdTZWxlY3RvcikgewogICAgICAgIHRoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yOwogICAgfQogICAgQnVmZmVyV2hlbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBCdWZmZXJXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdTZWxlY3RvcikpOwogICAgfTsKICAgIHJldHVybiBCdWZmZXJXaGVuT3BlcmF0b3I7Cn0oKSk7CnZhciBCdWZmZXJXaGVuU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEJ1ZmZlcldoZW5TdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gQnVmZmVyV2hlblN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNsb3NpbmdTZWxlY3RvcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmNsb3NpbmdTZWxlY3RvciA9IGNsb3NpbmdTZWxlY3RvcjsKICAgICAgICBfdGhpcy5zdWJzY3JpYmluZyA9IGZhbHNlOwogICAgICAgIF90aGlzLm9wZW5CdWZmZXIoKTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTsKICAgIH07CiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjsKICAgICAgICBpZiAoYnVmZmVyKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChidWZmZXIpOwogICAgICAgIH0KICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpOwogICAgfTsKICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsOwogICAgICAgIHRoaXMuc3Vic2NyaWJpbmcgPSBmYWxzZTsKICAgIH07CiAgICBCdWZmZXJXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHRoaXMub3BlbkJ1ZmZlcigpOwogICAgfTsKICAgIEJ1ZmZlcldoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5zdWJzY3JpYmluZykgewogICAgICAgICAgICB0aGlzLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLm9wZW5CdWZmZXIoKTsKICAgICAgICB9CiAgICB9OwogICAgQnVmZmVyV2hlblN1YnNjcmliZXIucHJvdG90eXBlLm9wZW5CdWZmZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNsb3NpbmdTdWJzY3JpcHRpb24gPSB0aGlzLmNsb3NpbmdTdWJzY3JpcHRpb247CiAgICAgICAgaWYgKGNsb3NpbmdTdWJzY3JpcHRpb24pIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmUoY2xvc2luZ1N1YnNjcmlwdGlvbik7CiAgICAgICAgICAgIGNsb3NpbmdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICB9CiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyOwogICAgICAgIGlmICh0aGlzLmJ1ZmZlcikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYnVmZmVyKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsKICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gT2JqZWN0KF91dGlsX3RyeUNhdGNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInRyeUNhdGNoIl0pKHRoaXMuY2xvc2luZ1NlbGVjdG9yKSgpOwogICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIgPT09IF91dGlsX2Vycm9yT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImVycm9yT2JqZWN0Il0pIHsKICAgICAgICAgICAgdGhpcy5lcnJvcihfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJlcnJvck9iamVjdCJdLmUpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgY2xvc2luZ1N1YnNjcmlwdGlvbiA9IG5ldyBfU3Vic2NyaXB0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmlwdGlvbiJdKCk7CiAgICAgICAgICAgIHRoaXMuY2xvc2luZ1N1YnNjcmlwdGlvbiA9IGNsb3NpbmdTdWJzY3JpcHRpb247CiAgICAgICAgICAgIHRoaXMuYWRkKGNsb3NpbmdTdWJzY3JpcHRpb24pOwogICAgICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gdHJ1ZTsKICAgICAgICAgICAgY2xvc2luZ1N1YnNjcmlwdGlvbi5hZGQoT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHRoaXMsIGNsb3NpbmdOb3RpZmllcikpOwogICAgICAgICAgICB0aGlzLnN1YnNjcmliaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBCdWZmZXJXaGVuU3Vic2NyaWJlcjsKfShfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIk91dGVyU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1ZmZlcldoZW4uanMubWFwCgoKLyoqKi8gfSksCi8qIDE0MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY2F0Y2hFcnJvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY2F0Y2hFcnJvcjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfT3V0ZXJTdWJzY3JpYmVyLF91dGlsX3N1YnNjcmliZVRvUmVzdWx0IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKZnVuY3Rpb24gY2F0Y2hFcnJvcihzZWxlY3RvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIGNhdGNoRXJyb3JPcGVyYXRvckZ1bmN0aW9uKHNvdXJjZSkgewogICAgICAgIHZhciBvcGVyYXRvciA9IG5ldyBDYXRjaE9wZXJhdG9yKHNlbGVjdG9yKTsKICAgICAgICB2YXIgY2F1Z2h0ID0gc291cmNlLmxpZnQob3BlcmF0b3IpOwogICAgICAgIHJldHVybiAob3BlcmF0b3IuY2F1Z2h0ID0gY2F1Z2h0KTsKICAgIH07Cn0KdmFyIENhdGNoT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBDYXRjaE9wZXJhdG9yKHNlbGVjdG9yKSB7CiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yOwogICAgfQogICAgQ2F0Y2hPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgQ2F0Y2hTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuc2VsZWN0b3IsIHRoaXMuY2F1Z2h0KSk7CiAgICB9OwogICAgcmV0dXJuIENhdGNoT3BlcmF0b3I7Cn0oKSk7CnZhciBDYXRjaFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShDYXRjaFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBDYXRjaFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNlbGVjdG9yLCBjYXVnaHQpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yOwogICAgICAgIF90aGlzLmNhdWdodCA9IGNhdWdodDsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBDYXRjaFN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHZvaWQgMDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuc2VsZWN0b3IoZXJyLCB0aGlzLmNhdWdodCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGVycjIpIHsKICAgICAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLCBlcnIyKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZUFuZFJlY3ljbGUoKTsKICAgICAgICAgICAgdGhpcy5hZGQoT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHRoaXMsIHJlc3VsdCkpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gQ2F0Y2hTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2hFcnJvci5qcy5tYXAKCgovKioqLyB9KSwKLyogMTQ0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjb21iaW5lQWxsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb21iaW5lQWxsOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vYnNlcnZhYmxlX2NvbWJpbmVMYXRlc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTcpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9vYnNlcnZhYmxlX2NvbWJpbmVMYXRlc3QgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gY29tYmluZUFsbChwcm9qZWN0KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IF9vYnNlcnZhYmxlX2NvbWJpbmVMYXRlc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siQ29tYmluZUxhdGVzdE9wZXJhdG9yIl0ocHJvamVjdCkpOyB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbWJpbmVBbGwuanMubWFwCgoKLyoqKi8gfSksCi8qIDE0NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY29tYmluZUxhdGVzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY29tYmluZUxhdGVzdDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vYnNlcnZhYmxlX2NvbWJpbmVMYXRlc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX2lzQXJyYXksX29ic2VydmFibGVfY29tYmluZUxhdGVzdCxfb2JzZXJ2YWJsZV9mcm9tIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKdmFyIG5vbmUgPSB7fTsKZnVuY3Rpb24gY29tYmluZUxhdGVzdCgpIHsKICAgIHZhciBvYnNlcnZhYmxlcyA9IFtdOwogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICBvYnNlcnZhYmxlc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgfQogICAgdmFyIHByb2plY3QgPSBudWxsOwogICAgaWYgKHR5cGVvZiBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHByb2plY3QgPSBvYnNlcnZhYmxlcy5wb3AoKTsKICAgIH0KICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEgJiYgT2JqZWN0KF91dGlsX2lzQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siaXNBcnJheSJdKShvYnNlcnZhYmxlc1swXSkpIHsKICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdLnNsaWNlKCk7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQuY2FsbChPYmplY3QoX29ic2VydmFibGVfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJmcm9tIl0pKFtzb3VyY2VdLmNvbmNhdChvYnNlcnZhYmxlcykpLCBuZXcgX29ic2VydmFibGVfY29tYmluZUxhdGVzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJDb21iaW5lTGF0ZXN0T3BlcmF0b3IiXShwcm9qZWN0KSk7IH07Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tYmluZUxhdGVzdC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTQ2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJjb25jYXQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbmNhdDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9jb25jYXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV9jb25jYXQgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gY29uY2F0KCkgewogICAgdmFyIG9ic2VydmFibGVzID0gW107CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIG9ic2VydmFibGVzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQuY2FsbChfb2JzZXJ2YWJsZV9jb25jYXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siY29uY2F0Il0uYXBwbHkodm9pZCAwLCBbc291cmNlXS5jb25jYXQob2JzZXJ2YWJsZXMpKSk7IH07Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNDcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImNvbmNhdE1hcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY29uY2F0TWFwOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tZXJnZU1hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9tZXJnZU1hcCBQVVJFX0lNUE9SVFNfRU5EICovCgpmdW5jdGlvbiBjb25jYXRNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHsKICAgIHJldHVybiBPYmplY3QoX21lcmdlTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm1lcmdlTWFwIl0pKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCAxKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXRNYXAuanMubWFwCgoKLyoqKi8gfSksCi8qIDE0OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY29uY2F0TWFwVG8iLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbmNhdE1hcFRvOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb25jYXRNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ3KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfY29uY2F0TWFwIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIGNvbmNhdE1hcFRvKGlubmVyT2JzZXJ2YWJsZSwgcmVzdWx0U2VsZWN0b3IpIHsKICAgIHJldHVybiBPYmplY3QoX2NvbmNhdE1hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJjb25jYXRNYXAiXSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5uZXJPYnNlcnZhYmxlOyB9LCByZXN1bHRTZWxlY3Rvcik7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uY2F0TWFwVG8uanMubWFwCgoKLyoqKi8gfSksCi8qIDE0OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiY291bnQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNvdW50OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKZnVuY3Rpb24gY291bnQocHJlZGljYXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IENvdW50T3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UpKTsgfTsKfQp2YXIgQ291bnRPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIENvdW50T3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UpIHsKICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTsKICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgIH0KICAgIENvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IENvdW50U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5zb3VyY2UpKTsKICAgIH07CiAgICByZXR1cm4gQ291bnRPcGVyYXRvcjsKfSgpKTsKdmFyIENvdW50U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKENvdW50U3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIENvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlLCBzb3VyY2UpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7CiAgICAgICAgX3RoaXMuc291cmNlID0gc291cmNlOwogICAgICAgIF90aGlzLmNvdW50ID0gMDsKICAgICAgICBfdGhpcy5pbmRleCA9IDA7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLnByZWRpY2F0ZSkgewogICAgICAgICAgICB0aGlzLl90cnlQcmVkaWNhdGUodmFsdWUpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5jb3VudCsrOwogICAgICAgIH0KICAgIH07CiAgICBDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl90cnlQcmVkaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlKHZhbHVlLCB0aGlzLmluZGV4KyssIHRoaXMuc291cmNlKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgICB0aGlzLmNvdW50Kys7CiAgICAgICAgfQogICAgfTsKICAgIENvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmNvdW50KTsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICB9OwogICAgcmV0dXJuIENvdW50U3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y291bnQuanMubWFwCgoKLyoqKi8gfSksCi8qIDE1MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZGVib3VuY2UiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRlYm91bmNlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiBkZWJvdW5jZShkdXJhdGlvblNlbGVjdG9yKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IERlYm91bmNlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3RvcikpOyB9Owp9CnZhciBEZWJvdW5jZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRGVib3VuY2VPcGVyYXRvcihkdXJhdGlvblNlbGVjdG9yKSB7CiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjsKICAgIH0KICAgIERlYm91bmNlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IERlYm91bmNlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKTsKICAgIH07CiAgICByZXR1cm4gRGVib3VuY2VPcGVyYXRvcjsKfSgpKTsKdmFyIERlYm91bmNlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKERlYm91bmNlU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIERlYm91bmNlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb25TZWxlY3RvcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yOwogICAgICAgIF90aGlzLmhhc1ZhbHVlID0gZmFsc2U7CiAgICAgICAgX3RoaXMuZHVyYXRpb25TdWJzY3JpcHRpb24gPSBudWxsOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5kdXJhdGlvblNlbGVjdG9yLmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICB0aGlzLl90cnlOZXh0KHZhbHVlLCByZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgICAgIH0KICAgIH07CiAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpOwogICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgIH07CiAgICBEZWJvdW5jZVN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBkdXJhdGlvbikgewogICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uOwogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTsKICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgICAgICB0aGlzLnJlbW92ZShzdWJzY3JpcHRpb24pOwogICAgICAgIH0KICAgICAgICBzdWJzY3JpcHRpb24gPSBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkodGhpcywgZHVyYXRpb24pOwogICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgIXN1YnNjcmlwdGlvbi5jbG9zZWQpIHsKICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbik7CiAgICAgICAgfQogICAgfTsKICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7CiAgICB9OwogICAgRGVib3VuY2VTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmVtaXRWYWx1ZSgpOwogICAgfTsKICAgIERlYm91bmNlU3Vic2NyaWJlci5wcm90b3R5cGUuZW1pdFZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7CiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uOwogICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICB0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uID0gbnVsbDsKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlOwogICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gRGVib3VuY2VTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVib3VuY2UuanMubWFwCgoKLyoqKi8gfSksCi8qIDE1MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZGVib3VuY2VUaW1lIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkZWJvdW5jZVRpbWU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX3NjaGVkdWxlcl9hc3luYyBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIGRlYm91bmNlVGltZShkdWVUaW1lLCBzY2hlZHVsZXIpIHsKICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgewogICAgICAgIHNjaGVkdWxlciA9IF9zY2hlZHVsZXJfYXN5bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siYXN5bmMiXTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgRGVib3VuY2VUaW1lT3BlcmF0b3IoZHVlVGltZSwgc2NoZWR1bGVyKSk7IH07Cn0KdmFyIERlYm91bmNlVGltZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRGVib3VuY2VUaW1lT3BlcmF0b3IoZHVlVGltZSwgc2NoZWR1bGVyKSB7CiAgICAgICAgdGhpcy5kdWVUaW1lID0gZHVlVGltZTsKICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjsKICAgIH0KICAgIERlYm91bmNlVGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVlVGltZSwgdGhpcy5zY2hlZHVsZXIpKTsKICAgIH07CiAgICByZXR1cm4gRGVib3VuY2VUaW1lT3BlcmF0b3I7Cn0oKSk7CnZhciBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oRGVib3VuY2VUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIERlYm91bmNlVGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1ZVRpbWUsIHNjaGVkdWxlcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmR1ZVRpbWUgPSBkdWVUaW1lOwogICAgICAgIF90aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjsKICAgICAgICBfdGhpcy5kZWJvdW5jZWRTdWJzY3JpcHRpb24gPSBudWxsOwogICAgICAgIF90aGlzLmxhc3RWYWx1ZSA9IG51bGw7CiAgICAgICAgX3RoaXMuaGFzVmFsdWUgPSBmYWxzZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBEZWJvdW5jZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHRoaXMuY2xlYXJEZWJvdW5jZSgpOwogICAgICAgIHRoaXMubGFzdFZhbHVlID0gdmFsdWU7CiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7CiAgICAgICAgdGhpcy5hZGQodGhpcy5kZWJvdW5jZWRTdWJzY3JpcHRpb24gPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIHRoaXMuZHVlVGltZSwgdGhpcykpOwogICAgfTsKICAgIERlYm91bmNlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmRlYm91bmNlZE5leHQoKTsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICB9OwogICAgRGVib3VuY2VUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuZGVib3VuY2VkTmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmNsZWFyRGVib3VuY2UoKTsKICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkgewogICAgICAgICAgICB2YXIgbGFzdFZhbHVlID0gdGhpcy5sYXN0VmFsdWU7CiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQobGFzdFZhbHVlKTsKICAgICAgICB9CiAgICB9OwogICAgRGVib3VuY2VUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuY2xlYXJEZWJvdW5jZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZGVib3VuY2VkU3Vic2NyaXB0aW9uID0gdGhpcy5kZWJvdW5jZWRTdWJzY3JpcHRpb247CiAgICAgICAgaWYgKGRlYm91bmNlZFN1YnNjcmlwdGlvbiAhPT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLnJlbW92ZShkZWJvdW5jZWRTdWJzY3JpcHRpb24pOwogICAgICAgICAgICBkZWJvdW5jZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgdGhpcy5kZWJvdW5jZWRTdWJzY3JpcHRpb24gPSBudWxsOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gRGVib3VuY2VUaW1lU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKZnVuY3Rpb24gZGlzcGF0Y2hOZXh0KHN1YnNjcmliZXIpIHsKICAgIHN1YnNjcmliZXIuZGVib3VuY2VkTmV4dCgpOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlVGltZS5qcy5tYXAKCgovKioqLyB9KSwKLyogMTUyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJkZWZhdWx0SWZFbXB0eSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVmYXVsdElmRW1wdHk7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBkZWZhdWx0SWZFbXB0eShkZWZhdWx0VmFsdWUpIHsKICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHZvaWQgMCkgewogICAgICAgIGRlZmF1bHRWYWx1ZSA9IG51bGw7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IERlZmF1bHRJZkVtcHR5T3BlcmF0b3IoZGVmYXVsdFZhbHVlKSk7IH07Cn0KdmFyIERlZmF1bHRJZkVtcHR5T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBEZWZhdWx0SWZFbXB0eU9wZXJhdG9yKGRlZmF1bHRWYWx1ZSkgewogICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlOwogICAgfQogICAgRGVmYXVsdElmRW1wdHlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZGVmYXVsdFZhbHVlKSk7CiAgICB9OwogICAgcmV0dXJuIERlZmF1bHRJZkVtcHR5T3BlcmF0b3I7Cn0oKSk7CnZhciBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGRlZmF1bHRWYWx1ZSkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTsKICAgICAgICBfdGhpcy5pc0VtcHR5ID0gdHJ1ZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2U7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTsKICAgIH07CiAgICBEZWZhdWx0SWZFbXB0eVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5pc0VtcHR5KSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmRlZmF1bHRWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgIH07CiAgICByZXR1cm4gRGVmYXVsdElmRW1wdHlTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0SWZFbXB0eS5qcy5tYXAKCgovKioqLyB9KSwKLyogMTUzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJkZWxheSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVsYXk7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0RhdGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU0KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9Ob3RpZmljYXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9zY2hlZHVsZXJfYXN5bmMsX3V0aWxfaXNEYXRlLF9TdWJzY3JpYmVyLF9Ob3RpZmljYXRpb24gUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKCmZ1bmN0aW9uIGRlbGF5KGRlbGF5LCBzY2hlZHVsZXIpIHsKICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgewogICAgICAgIHNjaGVkdWxlciA9IF9zY2hlZHVsZXJfYXN5bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siYXN5bmMiXTsKICAgIH0KICAgIHZhciBhYnNvbHV0ZURlbGF5ID0gT2JqZWN0KF91dGlsX2lzRGF0ZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJpc0RhdGUiXSkoZGVsYXkpOwogICAgdmFyIGRlbGF5Rm9yID0gYWJzb2x1dGVEZWxheSA/ICgrZGVsYXkgLSBzY2hlZHVsZXIubm93KCkpIDogTWF0aC5hYnMoZGVsYXkpOwogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBEZWxheU9wZXJhdG9yKGRlbGF5Rm9yLCBzY2hlZHVsZXIpKTsgfTsKfQp2YXIgRGVsYXlPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIERlbGF5T3BlcmF0b3IoZGVsYXksIHNjaGVkdWxlcikgewogICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTsKICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjsKICAgIH0KICAgIERlbGF5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IERlbGF5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5LCB0aGlzLnNjaGVkdWxlcikpOwogICAgfTsKICAgIHJldHVybiBEZWxheU9wZXJhdG9yOwp9KCkpOwp2YXIgRGVsYXlTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oRGVsYXlTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gRGVsYXlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBkZWxheSwgc2NoZWR1bGVyKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuZGVsYXkgPSBkZWxheTsKICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgX3RoaXMucXVldWUgPSBbXTsKICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTsKICAgICAgICBfdGhpcy5lcnJvcmVkID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgRGVsYXlTdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICAgICAgdmFyIHNvdXJjZSA9IHN0YXRlLnNvdXJjZTsKICAgICAgICB2YXIgcXVldWUgPSBzb3VyY2UucXVldWU7CiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHN0YXRlLnNjaGVkdWxlcjsKICAgICAgICB2YXIgZGVzdGluYXRpb24gPSBzdGF0ZS5kZXN0aW5hdGlvbjsKICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCAmJiAocXVldWVbMF0udGltZSAtIHNjaGVkdWxlci5ub3coKSkgPD0gMCkgewogICAgICAgICAgICBxdWV1ZS5zaGlmdCgpLm5vdGlmaWNhdGlvbi5vYnNlcnZlKGRlc3RpbmF0aW9uKTsKICAgICAgICB9CiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIGRlbGF5XzEgPSBNYXRoLm1heCgwLCBxdWV1ZVswXS50aW1lIC0gc2NoZWR1bGVyLm5vdygpKTsKICAgICAgICAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSwgZGVsYXlfMSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIHNvdXJjZS5hY3RpdmUgPSBmYWxzZTsKICAgICAgICB9CiAgICB9OwogICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5fc2NoZWR1bGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7CiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlOwogICAgICAgIHRoaXMuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShEZWxheVN1YnNjcmliZXIuZGlzcGF0Y2gsIHRoaXMuZGVsYXksIHsKICAgICAgICAgICAgc291cmNlOiB0aGlzLCBkZXN0aW5hdGlvbjogdGhpcy5kZXN0aW5hdGlvbiwgc2NoZWR1bGVyOiBzY2hlZHVsZXIKICAgICAgICB9KSk7CiAgICB9OwogICAgRGVsYXlTdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHsKICAgICAgICBpZiAodGhpcy5lcnJvcmVkID09PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyOwogICAgICAgIHZhciBtZXNzYWdlID0gbmV3IERlbGF5TWVzc2FnZShzY2hlZHVsZXIubm93KCkgKyB0aGlzLmRlbGF5LCBub3RpZmljYXRpb24pOwogICAgICAgIHRoaXMucXVldWUucHVzaChtZXNzYWdlKTsKICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlKHNjaGVkdWxlcik7CiAgICAgICAgfQogICAgfTsKICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKF9Ob3RpZmljYXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siTm90aWZpY2F0aW9uIl0uY3JlYXRlTmV4dCh2YWx1ZSkpOwogICAgfTsKICAgIERlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHRoaXMuZXJyb3JlZCA9IHRydWU7CiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdOwogICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgIH07CiAgICBEZWxheVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnNjaGVkdWxlTm90aWZpY2F0aW9uKF9Ob3RpZmljYXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siTm90aWZpY2F0aW9uIl0uY3JlYXRlQ29tcGxldGUoKSk7CiAgICB9OwogICAgcmV0dXJuIERlbGF5U3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJTdWJzY3JpYmVyIl0pKTsKdmFyIERlbGF5TWVzc2FnZSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIERlbGF5TWVzc2FnZSh0aW1lLCBub3RpZmljYXRpb24pIHsKICAgICAgICB0aGlzLnRpbWUgPSB0aW1lOwogICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbm90aWZpY2F0aW9uOwogICAgfQogICAgcmV0dXJuIERlbGF5TWVzc2FnZTsKfSgpKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXkuanMubWFwCgoKLyoqKi8gfSksCi8qIDE1NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiaXNEYXRlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpc0RhdGU7IH0pOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovCmZ1bmN0aW9uIGlzRGF0ZSh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oK3ZhbHVlKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1pc0RhdGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDE1NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZGVsYXlXaGVuIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkZWxheVdoZW47IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX09ic2VydmFibGUsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gZGVsYXlXaGVuKGRlbGF5RHVyYXRpb25TZWxlY3Rvciwgc3Vic2NyaXB0aW9uRGVsYXkpIHsKICAgIGlmIChzdWJzY3JpcHRpb25EZWxheSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlKHNvdXJjZSwgc3Vic2NyaXB0aW9uRGVsYXkpCiAgICAgICAgICAgICAgICAubGlmdChuZXcgRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7CiAgICAgICAgfTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSk7IH07Cn0KdmFyIERlbGF5V2hlbk9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRGVsYXlXaGVuT3BlcmF0b3IoZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7CiAgICAgICAgdGhpcy5kZWxheUR1cmF0aW9uU2VsZWN0b3IgPSBkZWxheUR1cmF0aW9uU2VsZWN0b3I7CiAgICB9CiAgICBEZWxheVdoZW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgRGVsYXlXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvcikpOwogICAgfTsKICAgIHJldHVybiBEZWxheVdoZW5PcGVyYXRvcjsKfSgpKTsKdmFyIERlbGF5V2hlblN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShEZWxheVdoZW5TdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gRGVsYXlXaGVuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yOwogICAgICAgIF90aGlzLmNvbXBsZXRlZCA9IGZhbHNlOwogICAgICAgIF90aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zID0gW107CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChvdXRlclZhbHVlKTsKICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmlwdGlvbihpbm5lclN1Yik7CiAgICAgICAgdGhpcy50cnlDb21wbGV0ZSgpOwogICAgfTsKICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1YikgewogICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTsKICAgIH07CiAgICBEZWxheVdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKGlubmVyU3ViKTsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgdGhpcy50cnlDb21wbGV0ZSgpOwogICAgfTsKICAgIERlbGF5V2hlblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGRlbGF5Tm90aWZpZXIgPSB0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3Rvcih2YWx1ZSk7CiAgICAgICAgICAgIGlmIChkZWxheU5vdGlmaWVyKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRyeURlbGF5KGRlbGF5Tm90aWZpZXIsIHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICB9CiAgICB9OwogICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLnRyeUNvbXBsZXRlKCk7CiAgICB9OwogICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUucmVtb3ZlU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikgewogICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgIHZhciBzdWJzY3JpcHRpb25JZHggPSB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKTsKICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSWR4ICE9PSAtMSkgewogICAgICAgICAgICB0aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JZHgsIDEpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLm91dGVyVmFsdWU7CiAgICB9OwogICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RGVsYXkgPSBmdW5jdGlvbiAoZGVsYXlOb3RpZmllciwgdmFsdWUpIHsKICAgICAgICB2YXIgbm90aWZpZXJTdWJzY3JpcHRpb24gPSBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkodGhpcywgZGVsYXlOb3RpZmllciwgdmFsdWUpOwogICAgICAgIGlmIChub3RpZmllclN1YnNjcmlwdGlvbiAmJiAhbm90aWZpZXJTdWJzY3JpcHRpb24uY2xvc2VkKSB7CiAgICAgICAgICAgIHRoaXMuYWRkKG5vdGlmaWVyU3Vic2NyaXB0aW9uKTsKICAgICAgICAgICAgdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5wdXNoKG5vdGlmaWVyU3Vic2NyaXB0aW9uKTsKICAgICAgICB9CiAgICB9OwogICAgRGVsYXlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkICYmIHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIERlbGF5V2hlblN1YnNjcmliZXI7Cn0oX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPdXRlclN1YnNjcmliZXIiXSkpOwp2YXIgU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uRGVsYXlPYnNlcnZhYmxlKHNvdXJjZSwgc3Vic2NyaXB0aW9uRGVsYXkpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgICBfdGhpcy5zdWJzY3JpcHRpb25EZWxheSA9IHN1YnNjcmlwdGlvbkRlbGF5OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFN1YnNjcmlwdGlvbkRlbGF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25EZWxheS5zdWJzY3JpYmUobmV3IFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnNvdXJjZSkpOwogICAgfTsKICAgIHJldHVybiBTdWJzY3JpcHRpb25EZWxheU9ic2VydmFibGU7Cn0oX09ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siT2JzZXJ2YWJsZSJdKSk7CnZhciBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIocGFyZW50LCBzb3VyY2UpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDsKICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgX3RoaXMuc291cmNlU3Vic2NyaWJlZCA9IGZhbHNlOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodW51c2VkKSB7CiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1NvdXJjZSgpOwogICAgfTsKICAgIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgICAgICB0aGlzLnBhcmVudC5lcnJvcihlcnIpOwogICAgfTsKICAgIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Tb3VyY2UoKTsKICAgIH07CiAgICBTdWJzY3JpcHRpb25EZWxheVN1YnNjcmliZXIucHJvdG90eXBlLnN1YnNjcmliZVRvU291cmNlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghdGhpcy5zb3VyY2VTdWJzY3JpYmVkKSB7CiAgICAgICAgICAgIHRoaXMuc291cmNlU3Vic2NyaWJlZCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHRoaXMucGFyZW50KTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFN1YnNjcmlwdGlvbkRlbGF5U3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXlXaGVuLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRlbWF0ZXJpYWxpemUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRlbWF0ZXJpYWxpemU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBkZW1hdGVyaWFsaXplKCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIGRlbWF0ZXJpYWxpemVPcGVyYXRvckZ1bmN0aW9uKHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgRGVNYXRlcmlhbGl6ZU9wZXJhdG9yKCkpOwogICAgfTsKfQp2YXIgRGVNYXRlcmlhbGl6ZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRGVNYXRlcmlhbGl6ZU9wZXJhdG9yKCkgewogICAgfQogICAgRGVNYXRlcmlhbGl6ZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7CiAgICB9OwogICAgcmV0dXJuIERlTWF0ZXJpYWxpemVPcGVyYXRvcjsKfSgpKTsKdmFyIERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oRGVNYXRlcmlhbGl6ZVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBEZU1hdGVyaWFsaXplU3Vic2NyaWJlcihkZXN0aW5hdGlvbikgewogICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgIH0KICAgIERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhbHVlLm9ic2VydmUodGhpcy5kZXN0aW5hdGlvbik7CiAgICB9OwogICAgcmV0dXJuIERlTWF0ZXJpYWxpemVTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1kZW1hdGVyaWFsaXplLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRpc3RpbmN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBkaXN0aW5jdDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkRpc3RpbmN0U3Vic2NyaWJlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gRGlzdGluY3RTdWJzY3JpYmVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiBkaXN0aW5jdChrZXlTZWxlY3RvciwgZmx1c2hlcykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBEaXN0aW5jdE9wZXJhdG9yKGtleVNlbGVjdG9yLCBmbHVzaGVzKSk7IH07Cn0KdmFyIERpc3RpbmN0T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBEaXN0aW5jdE9wZXJhdG9yKGtleVNlbGVjdG9yLCBmbHVzaGVzKSB7CiAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yOwogICAgICAgIHRoaXMuZmx1c2hlcyA9IGZsdXNoZXM7CiAgICB9CiAgICBEaXN0aW5jdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBEaXN0aW5jdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5rZXlTZWxlY3RvciwgdGhpcy5mbHVzaGVzKSk7CiAgICB9OwogICAgcmV0dXJuIERpc3RpbmN0T3BlcmF0b3I7Cn0oKSk7CnZhciBEaXN0aW5jdFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShEaXN0aW5jdFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBEaXN0aW5jdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGtleVNlbGVjdG9yLCBmbHVzaGVzKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjsKICAgICAgICBfdGhpcy52YWx1ZXMgPSBuZXcgU2V0KCk7CiAgICAgICAgaWYgKGZsdXNoZXMpIHsKICAgICAgICAgICAgX3RoaXMuYWRkKE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKShfdGhpcywgZmx1c2hlcykpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBEaXN0aW5jdFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHsKICAgICAgICB0aGlzLnZhbHVlcy5jbGVhcigpOwogICAgfTsKICAgIERpc3RpbmN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIGlubmVyU3ViKSB7CiAgICAgICAgdGhpcy5fZXJyb3IoZXJyb3IpOwogICAgfTsKICAgIERpc3RpbmN0U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAodGhpcy5rZXlTZWxlY3RvcikgewogICAgICAgICAgICB0aGlzLl91c2VLZXlTZWxlY3Rvcih2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLl9maW5hbGl6ZU5leHQodmFsdWUsIHZhbHVlKTsKICAgICAgICB9CiAgICB9OwogICAgRGlzdGluY3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdXNlS2V5U2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIga2V5OwogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAga2V5ID0gdGhpcy5rZXlTZWxlY3Rvcih2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLl9maW5hbGl6ZU5leHQoa2V5LCB2YWx1ZSk7CiAgICB9OwogICAgRGlzdGluY3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fZmluYWxpemVOZXh0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy52YWx1ZXM7CiAgICAgICAgaWYgKCF2YWx1ZXMuaGFzKGtleSkpIHsKICAgICAgICAgICAgdmFsdWVzLmFkZChrZXkpOwogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gRGlzdGluY3RTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3RpbmN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImRpc3RpbmN0VW50aWxDaGFuZ2VkIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkaXN0aW5jdFVudGlsQ2hhbmdlZDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX3V0aWxfdHJ5Q2F0Y2gsX3V0aWxfZXJyb3JPYmplY3QgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKZnVuY3Rpb24gZGlzdGluY3RVbnRpbENoYW5nZWQoY29tcGFyZSwga2V5U2VsZWN0b3IpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvcihjb21wYXJlLCBrZXlTZWxlY3RvcikpOyB9Owp9CnZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvcihjb21wYXJlLCBrZXlTZWxlY3RvcikgewogICAgICAgIHRoaXMuY29tcGFyZSA9IGNvbXBhcmU7CiAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yOwogICAgfQogICAgRGlzdGluY3RVbnRpbENoYW5nZWRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY29tcGFyZSwgdGhpcy5rZXlTZWxlY3RvcikpOwogICAgfTsKICAgIHJldHVybiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9wZXJhdG9yOwp9KCkpOwp2YXIgRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb21wYXJlLCBrZXlTZWxlY3RvcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmtleVNlbGVjdG9yID0ga2V5U2VsZWN0b3I7CiAgICAgICAgX3RoaXMuaGFzS2V5ID0gZmFsc2U7CiAgICAgICAgaWYgKHR5cGVvZiBjb21wYXJlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIF90aGlzLmNvbXBhcmUgPSBjb21wYXJlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiAoeCwgeSkgewogICAgICAgIHJldHVybiB4ID09PSB5OwogICAgfTsKICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIga2V5U2VsZWN0b3IgPSB0aGlzLmtleVNlbGVjdG9yOwogICAgICAgIHZhciBrZXkgPSB2YWx1ZTsKICAgICAgICBpZiAoa2V5U2VsZWN0b3IpIHsKICAgICAgICAgICAga2V5ID0gT2JqZWN0KF91dGlsX3RyeUNhdGNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInRyeUNhdGNoIl0pKHRoaXMua2V5U2VsZWN0b3IpKHZhbHVlKTsKICAgICAgICAgICAgaWYgKGtleSA9PT0gX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siZXJyb3JPYmplY3QiXSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siZXJyb3JPYmplY3QiXS5lKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7CiAgICAgICAgaWYgKHRoaXMuaGFzS2V5KSB7CiAgICAgICAgICAgIHJlc3VsdCA9IE9iamVjdChfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJ0cnlDYXRjaCJdKSh0aGlzLmNvbXBhcmUpKHRoaXMua2V5LCBrZXkpOwogICAgICAgICAgICBpZiAocmVzdWx0ID09PSBfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJlcnJvck9iamVjdCJdKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJlcnJvck9iamVjdCJdLmUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLmhhc0tleSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChCb29sZWFuKHJlc3VsdCkgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRoaXMua2V5ID0ga2V5OwogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1kaXN0aW5jdFVudGlsQ2hhbmdlZC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTU5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJkaXN0aW5jdFVudGlsS2V5Q2hhbmdlZCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGlzdGluY3RVbnRpbEtleUNoYW5nZWQ7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2Rpc3RpbmN0VW50aWxDaGFuZ2VkX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX2Rpc3RpbmN0VW50aWxDaGFuZ2VkIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkKGtleSwgY29tcGFyZSkgewogICAgcmV0dXJuIE9iamVjdChfZGlzdGluY3RVbnRpbENoYW5nZWRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siZGlzdGluY3RVbnRpbENoYW5nZWQiXSkoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGNvbXBhcmUgPyBjb21wYXJlKHhba2V5XSwgeVtrZXldKSA6IHhba2V5XSA9PT0geVtrZXldOyB9KTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1kaXN0aW5jdFVudGlsS2V5Q2hhbmdlZC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTYwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJlbGVtZW50QXQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGVsZW1lbnRBdDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZmlsdGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdGhyb3dJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZGVmYXVsdElmRW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90YWtlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IsX2ZpbHRlcixfdGhyb3dJZkVtcHR5LF9kZWZhdWx0SWZFbXB0eSxfdGFrZSBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gZWxlbWVudEF0KGluZGV4LCBkZWZhdWx0VmFsdWUpIHsKICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgX3V0aWxfQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IiXSgpOwogICAgfQogICAgdmFyIGhhc0RlZmF1bHRWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMjsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5waXBlKE9iamVjdChfZmlsdGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImZpbHRlciJdKShmdW5jdGlvbiAodiwgaSkgeyByZXR1cm4gaSA9PT0gaW5kZXg7IH0pLCBPYmplY3QoX3Rha2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1sidGFrZSJdKSgxKSwgaGFzRGVmYXVsdFZhbHVlCiAgICAgICAgICAgID8gT2JqZWN0KF9kZWZhdWx0SWZFbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJkZWZhdWx0SWZFbXB0eSJdKShkZWZhdWx0VmFsdWUpCiAgICAgICAgICAgIDogT2JqZWN0KF90aHJvd0lmRW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sidGhyb3dJZkVtcHR5Il0pKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBfdXRpbF9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJBcmd1bWVudE91dE9mUmFuZ2VFcnJvciJdKCk7IH0pKTsKICAgIH07Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZWxlbWVudEF0LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImZpbHRlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZmlsdGVyOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKZnVuY3Rpb24gZmlsdGVyKHByZWRpY2F0ZSwgdGhpc0FyZykgewogICAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlck9wZXJhdG9yRnVuY3Rpb24oc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBGaWx0ZXJPcGVyYXRvcihwcmVkaWNhdGUsIHRoaXNBcmcpKTsKICAgIH07Cn0KdmFyIEZpbHRlck9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRmlsdGVyT3BlcmF0b3IocHJlZGljYXRlLCB0aGlzQXJnKSB7CiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7CiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZzsKICAgIH0KICAgIEZpbHRlck9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBGaWx0ZXJTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnRoaXNBcmcpKTsKICAgIH07CiAgICByZXR1cm4gRmlsdGVyT3BlcmF0b3I7Cn0oKSk7CnZhciBGaWx0ZXJTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oRmlsdGVyU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEZpbHRlclN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTsKICAgICAgICBfdGhpcy50aGlzQXJnID0gdGhpc0FyZzsKICAgICAgICBfdGhpcy5jb3VudCA9IDA7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgRmlsdGVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLCB2YWx1ZSwgdGhpcy5jb3VudCsrKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gRmlsdGVyU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRocm93SWZFbXB0eSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhyb3dJZkVtcHR5OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90YXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYzKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX0VtcHR5RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF90YXAsX3V0aWxfRW1wdHlFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovCgoKdmFyIHRocm93SWZFbXB0eSA9IGZ1bmN0aW9uIChlcnJvckZhY3RvcnkpIHsKICAgIGlmIChlcnJvckZhY3RvcnkgPT09IHZvaWQgMCkgewogICAgICAgIGVycm9yRmFjdG9yeSA9IGRlZmF1bHRFcnJvckZhY3Rvcnk7CiAgICB9CiAgICByZXR1cm4gT2JqZWN0KF90YXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sidGFwIl0pKHsKICAgICAgICBoYXNWYWx1ZTogZmFsc2UsCiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgeyB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTsgfSwKICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuaGFzVmFsdWUpIHsKICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7Cn07CmZ1bmN0aW9uIGRlZmF1bHRFcnJvckZhY3RvcnkoKSB7CiAgICByZXR1cm4gbmV3IF91dGlsX0VtcHR5RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siRW1wdHlFcnJvciJdKCk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3dJZkVtcHR5LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNjMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRhcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGFwOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNGdW5jdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX3V0aWxfbm9vcCxfdXRpbF9pc0Z1bmN0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCmZ1bmN0aW9uIHRhcChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gdGFwT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IERvT3BlcmF0b3IobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkpOwogICAgfTsKfQp2YXIgRG9PcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIERvT3BlcmF0b3IobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkgewogICAgICAgIHRoaXMubmV4dE9yT2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjsKICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7CiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlOwogICAgfQogICAgRG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVGFwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5leHRPck9ic2VydmVyLCB0aGlzLmVycm9yLCB0aGlzLmNvbXBsZXRlKSk7CiAgICB9OwogICAgcmV0dXJuIERvT3BlcmF0b3I7Cn0oKSk7CnZhciBUYXBTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oVGFwU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFRhcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5fdGFwTmV4dCA9IF91dGlsX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sibm9vcCJdOwogICAgICAgIF90aGlzLl90YXBFcnJvciA9IF91dGlsX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sibm9vcCJdOwogICAgICAgIF90aGlzLl90YXBDb21wbGV0ZSA9IF91dGlsX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sibm9vcCJdOwogICAgICAgIF90aGlzLl90YXBFcnJvciA9IGVycm9yIHx8IF91dGlsX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sibm9vcCJdOwogICAgICAgIF90aGlzLl90YXBDb21wbGV0ZSA9IGNvbXBsZXRlIHx8IF91dGlsX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sibm9vcCJdOwogICAgICAgIGlmIChPYmplY3QoX3V0aWxfaXNGdW5jdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJpc0Z1bmN0aW9uIl0pKG9ic2VydmVyT3JOZXh0KSkgewogICAgICAgICAgICBfdGhpcy5fY29udGV4dCA9IF90aGlzOwogICAgICAgICAgICBfdGhpcy5fdGFwTmV4dCA9IG9ic2VydmVyT3JOZXh0OwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChvYnNlcnZlck9yTmV4dCkgewogICAgICAgICAgICBfdGhpcy5fY29udGV4dCA9IG9ic2VydmVyT3JOZXh0OwogICAgICAgICAgICBfdGhpcy5fdGFwTmV4dCA9IG9ic2VydmVyT3JOZXh0Lm5leHQgfHwgX3V0aWxfbm9vcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJub29wIl07CiAgICAgICAgICAgIF90aGlzLl90YXBFcnJvciA9IG9ic2VydmVyT3JOZXh0LmVycm9yIHx8IF91dGlsX25vb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sibm9vcCJdOwogICAgICAgICAgICBfdGhpcy5fdGFwQ29tcGxldGUgPSBvYnNlcnZlck9yTmV4dC5jb21wbGV0ZSB8fCBfdXRpbF9ub29wX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIm5vb3AiXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgVGFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLl90YXBOZXh0LmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpOwogICAgfTsKICAgIFRhcFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLl90YXBFcnJvci5jYWxsKHRoaXMuX2NvbnRleHQsIGVycik7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgIH07CiAgICBUYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhpcy5fdGFwQ29tcGxldGUuY2FsbCh0aGlzLl9jb250ZXh0KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgIH07CiAgICByZXR1cm4gVGFwU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFwLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNjQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRha2UiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRha2U7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyLF91dGlsX0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLF9vYnNlcnZhYmxlX2VtcHR5IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCmZ1bmN0aW9uIHRha2UoY291bnQpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QoX29ic2VydmFibGVfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siZW1wdHkiXSkoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgVGFrZU9wZXJhdG9yKGNvdW50KSk7CiAgICAgICAgfQogICAgfTsKfQp2YXIgVGFrZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gVGFrZU9wZXJhdG9yKHRvdGFsKSB7CiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsOwogICAgICAgIGlmICh0aGlzLnRvdGFsIDwgMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgX3V0aWxfQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IiXTsKICAgICAgICB9CiAgICB9CiAgICBUYWtlT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudG90YWwpKTsKICAgIH07CiAgICByZXR1cm4gVGFrZU9wZXJhdG9yOwp9KCkpOwp2YXIgVGFrZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShUYWtlU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFRha2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB0b3RhbCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnRvdGFsID0gdG90YWw7CiAgICAgICAgX3RoaXMuY291bnQgPSAwOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFRha2VTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciB0b3RhbCA9IHRoaXMudG90YWw7CiAgICAgICAgdmFyIGNvdW50ID0gKyt0aGlzLmNvdW50OwogICAgICAgIGlmIChjb3VudCA8PSB0b3RhbCkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpOwogICAgICAgICAgICBpZiAoY291bnQgPT09IHRvdGFsKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFRha2VTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD10YWtlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImVuZFdpdGgiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGVuZFdpdGg7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vYnNlcnZhYmxlX3NjYWxhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9jb25jYXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV9mcm9tQXJyYXksX29ic2VydmFibGVfc2NhbGFyLF9vYnNlcnZhYmxlX2VtcHR5LF9vYnNlcnZhYmxlX2NvbmNhdCxfdXRpbF9pc1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gZW5kV2l0aCgpIHsKICAgIHZhciBhcnJheSA9IFtdOwogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICBhcnJheVtfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsKICAgICAgICB2YXIgc2NoZWR1bGVyID0gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07CiAgICAgICAgaWYgKE9iamVjdChfdXRpbF9pc1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJpc1NjaGVkdWxlciJdKShzY2hlZHVsZXIpKSB7CiAgICAgICAgICAgIGFycmF5LnBvcCgpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgc2NoZWR1bGVyID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgdmFyIGxlbiA9IGFycmF5Lmxlbmd0aDsKICAgICAgICBpZiAobGVuID09PSAxICYmICFzY2hlZHVsZXIpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdChfb2JzZXJ2YWJsZV9jb25jYXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siY29uY2F0Il0pKHNvdXJjZSwgT2JqZWN0KF9vYnNlcnZhYmxlX3NjYWxhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJzY2FsYXIiXSkoYXJyYXlbMF0pKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobGVuID4gMCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KF9vYnNlcnZhYmxlX2NvbmNhdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJjb25jYXQiXSkoc291cmNlLCBPYmplY3QoX29ic2VydmFibGVfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImZyb21BcnJheSJdKShhcnJheSwgc2NoZWR1bGVyKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KF9vYnNlcnZhYmxlX2NvbmNhdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJjb25jYXQiXSkoc291cmNlLCBPYmplY3QoX29ic2VydmFibGVfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZW1wdHkiXSkoc2NoZWR1bGVyKSk7CiAgICAgICAgfQogICAgfTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1lbmRXaXRoLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNjYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImV2ZXJ5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBldmVyeTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIGV2ZXJ5KHByZWRpY2F0ZSwgdGhpc0FyZykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBFdmVyeU9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZywgc291cmNlKSk7IH07Cn0KdmFyIEV2ZXJ5T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBFdmVyeU9wZXJhdG9yKHByZWRpY2F0ZSwgdGhpc0FyZywgc291cmNlKSB7CiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7CiAgICAgICAgdGhpcy50aGlzQXJnID0gdGhpc0FyZzsKICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgIH0KICAgIEV2ZXJ5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBFdmVyeVN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnRoaXNBcmcsIHRoaXMuc291cmNlKSk7CiAgICB9OwogICAgcmV0dXJuIEV2ZXJ5T3BlcmF0b3I7Cn0oKSk7CnZhciBFdmVyeVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShFdmVyeVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBFdmVyeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgdGhpc0FyZywgc291cmNlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJlZGljYXRlID0gcHJlZGljYXRlOwogICAgICAgIF90aGlzLnRoaXNBcmcgPSB0aGlzQXJnOwogICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgICBfdGhpcy5pbmRleCA9IDA7CiAgICAgICAgX3RoaXMudGhpc0FyZyA9IHRoaXNBcmcgfHwgX3RoaXM7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgRXZlcnlTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChldmVyeVZhbHVlTWF0Y2gpIHsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoZXZlcnlWYWx1ZU1hdGNoKTsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICB9OwogICAgRXZlcnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZS5jYWxsKHRoaXMudGhpc0FyZywgdmFsdWUsIHRoaXMuaW5kZXgrKywgdGhpcy5zb3VyY2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIXJlc3VsdCkgewogICAgICAgICAgICB0aGlzLm5vdGlmeUNvbXBsZXRlKGZhbHNlKTsKICAgICAgICB9CiAgICB9OwogICAgRXZlcnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5ub3RpZnlDb21wbGV0ZSh0cnVlKTsKICAgIH07CiAgICByZXR1cm4gRXZlcnlTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1ldmVyeS5qcy5tYXAKCgovKioqLyB9KSwKLyogMTY3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJleGhhdXN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBleGhhdXN0OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiBleGhhdXN0KCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBTd2l0Y2hGaXJzdE9wZXJhdG9yKCkpOyB9Owp9CnZhciBTd2l0Y2hGaXJzdE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gU3dpdGNoRmlyc3RPcGVyYXRvcigpIHsKICAgIH0KICAgIFN3aXRjaEZpcnN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFN3aXRjaEZpcnN0U3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7CiAgICB9OwogICAgcmV0dXJuIFN3aXRjaEZpcnN0T3BlcmF0b3I7Cn0oKSk7CnZhciBTd2l0Y2hGaXJzdFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShTd2l0Y2hGaXJzdFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTd2l0Y2hGaXJzdFN1YnNjcmliZXIoZGVzdGluYXRpb24pIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTsKICAgICAgICBfdGhpcy5oYXNTdWJzY3JpcHRpb24gPSBmYWxzZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTd2l0Y2hGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKCF0aGlzLmhhc1N1YnNjcmlwdGlvbikgewogICAgICAgICAgICB0aGlzLmhhc1N1YnNjcmlwdGlvbiA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuYWRkKE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKSh0aGlzLCB2YWx1ZSkpOwogICAgICAgIH0KICAgIH07CiAgICBTd2l0Y2hGaXJzdFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7CiAgICAgICAgaWYgKCF0aGlzLmhhc1N1YnNjcmlwdGlvbikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIFN3aXRjaEZpcnN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHsKICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7CiAgICAgICAgdGhpcy5oYXNTdWJzY3JpcHRpb24gPSBmYWxzZTsKICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZWQpIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gU3dpdGNoRmlyc3RTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhoYXVzdC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTY4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJleGhhdXN0TWFwIiwgZnVuY3Rpb24oKSB7IHJldHVybiBleGhhdXN0TWFwOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX21hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9mcm9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCxfbWFwLF9vYnNlcnZhYmxlX2Zyb20gUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKCmZ1bmN0aW9uIGV4aGF1c3RNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHsKICAgIGlmIChyZXN1bHRTZWxlY3RvcikgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UucGlwZShleGhhdXN0TWFwKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBPYmplY3QoX29ic2VydmFibGVfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJmcm9tIl0pKHByb2plY3QoYSwgaSkpLnBpcGUoT2JqZWN0KF9tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sibWFwIl0pKGZ1bmN0aW9uIChiLCBpaSkgeyByZXR1cm4gcmVzdWx0U2VsZWN0b3IoYSwgYiwgaSwgaWkpOyB9KSk7IH0pKTsgfTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBFeGhhdXNlTWFwT3BlcmF0b3IocHJvamVjdCkpOwogICAgfTsKfQp2YXIgRXhoYXVzZU1hcE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRXhoYXVzZU1hcE9wZXJhdG9yKHByb2plY3QpIHsKICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0OwogICAgfQogICAgRXhoYXVzZU1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBFeGhhdXN0TWFwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QpKTsKICAgIH07CiAgICByZXR1cm4gRXhoYXVzZU1hcE9wZXJhdG9yOwp9KCkpOwp2YXIgRXhoYXVzdE1hcFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShFeGhhdXN0TWFwU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEV4aGF1c3RNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0KSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJvamVjdCA9IHByb2plY3Q7CiAgICAgICAgX3RoaXMuaGFzU3Vic2NyaXB0aW9uID0gZmFsc2U7CiAgICAgICAgX3RoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7CiAgICAgICAgX3RoaXMuaW5kZXggPSAwOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEV4aGF1c3RNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICghdGhpcy5oYXNTdWJzY3JpcHRpb24pIHsKICAgICAgICAgICAgdGhpcy50cnlOZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICB9OwogICAgRXhoYXVzdE1hcFN1YnNjcmliZXIucHJvdG90eXBlLnRyeU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7CiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7CiAgICAgICAgICAgIHRoaXMuaGFzU3Vic2NyaXB0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5hZGQoT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHRoaXMsIHJlc3VsdCwgdmFsdWUsIGluZGV4KSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICB9CiAgICB9OwogICAgRXhoYXVzdE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7CiAgICAgICAgaWYgKCF0aGlzLmhhc1N1YnNjcmlwdGlvbikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIEV4aGF1c3RNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpOwogICAgfTsKICAgIEV4aGF1c3RNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICB9OwogICAgRXhoYXVzdE1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7CiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpOwogICAgICAgIHRoaXMuaGFzU3Vic2NyaXB0aW9uID0gZmFsc2U7CiAgICAgICAgaWYgKHRoaXMuaGFzQ29tcGxldGVkKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIEV4aGF1c3RNYXBTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhoYXVzdE1hcC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTY5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJleHBhbmQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGV4cGFuZDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkV4cGFuZE9wZXJhdG9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBFeHBhbmRPcGVyYXRvcjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkV4cGFuZFN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEV4cGFuZFN1YnNjcmliZXI7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfdHJ5Q2F0Y2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfdHJ5Q2F0Y2gsX3V0aWxfZXJyb3JPYmplY3QsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gZXhwYW5kKHByb2plY3QsIGNvbmN1cnJlbnQsIHNjaGVkdWxlcikgewogICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgewogICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICB9CiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsKICAgICAgICBzY2hlZHVsZXIgPSB1bmRlZmluZWQ7CiAgICB9CiAgICBjb25jdXJyZW50ID0gKGNvbmN1cnJlbnQgfHwgMCkgPCAxID8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIDogY29uY3VycmVudDsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgRXhwYW5kT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSk7IH07Cn0KdmFyIEV4cGFuZE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRXhwYW5kT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7CiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDsKICAgICAgICB0aGlzLmNvbmN1cnJlbnQgPSBjb25jdXJyZW50OwogICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgfQogICAgRXhwYW5kT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IEV4cGFuZFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0LCB0aGlzLmNvbmN1cnJlbnQsIHRoaXMuc2NoZWR1bGVyKSk7CiAgICB9OwogICAgcmV0dXJuIEV4cGFuZE9wZXJhdG9yOwp9KCkpOwoKdmFyIEV4cGFuZFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShFeHBhbmRTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gRXhwYW5kU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJvamVjdCwgY29uY3VycmVudCwgc2NoZWR1bGVyKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJvamVjdCA9IHByb2plY3Q7CiAgICAgICAgX3RoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7CiAgICAgICAgX3RoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgICAgIF90aGlzLmluZGV4ID0gMDsKICAgICAgICBfdGhpcy5hY3RpdmUgPSAwOwogICAgICAgIF90aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlOwogICAgICAgIGlmIChjb25jdXJyZW50IDwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7CiAgICAgICAgICAgIF90aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykgewogICAgICAgIHZhciBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXIsIHJlc3VsdCA9IGFyZy5yZXN1bHQsIHZhbHVlID0gYXJnLnZhbHVlLCBpbmRleCA9IGFyZy5pbmRleDsKICAgICAgICBzdWJzY3JpYmVyLnN1YnNjcmliZVRvUHJvamVjdGlvbihyZXN1bHQsIHZhbHVlLCBpbmRleCk7CiAgICB9OwogICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uOwogICAgICAgIGlmIChkZXN0aW5hdGlvbi5jbG9zZWQpIHsKICAgICAgICAgICAgdGhpcy5fY29tcGxldGUoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7CiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpOwogICAgICAgICAgICB2YXIgcmVzdWx0ID0gT2JqZWN0KF91dGlsX3RyeUNhdGNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInRyeUNhdGNoIl0pKHRoaXMucHJvamVjdCkodmFsdWUsIGluZGV4KTsKICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZXJyb3JPYmplY3QiXSkgewogICAgICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZXJyb3JPYmplY3QiXS5lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICghdGhpcy5zY2hlZHVsZXIpIHsKICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uKHJlc3VsdCwgdmFsdWUsIGluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHsgc3Vic2NyaWJlcjogdGhpcywgcmVzdWx0OiByZXN1bHQsIHZhbHVlOiB2YWx1ZSwgaW5kZXg6IGluZGV4IH07CiAgICAgICAgICAgICAgICB0aGlzLmFkZCh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShFeHBhbmRTdWJzY3JpYmVyLmRpc3BhdGNoLCAwLCBzdGF0ZSkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTsKICAgICAgICB9CiAgICB9OwogICAgRXhwYW5kU3Vic2NyaWJlci5wcm90b3R5cGUuc3Vic2NyaWJlVG9Qcm9qZWN0aW9uID0gZnVuY3Rpb24gKHJlc3VsdCwgdmFsdWUsIGluZGV4KSB7CiAgICAgICAgdGhpcy5hY3RpdmUrKzsKICAgICAgICB0aGlzLmFkZChPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkodGhpcywgcmVzdWx0LCB2YWx1ZSwgaW5kZXgpKTsKICAgIH07CiAgICBFeHBhbmRTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlOwogICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmFjdGl2ZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHsKICAgICAgICB0aGlzLl9uZXh0KGlubmVyVmFsdWUpOwogICAgfTsKICAgIEV4cGFuZFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7CiAgICAgICAgdmFyIGJ1ZmZlciA9IHRoaXMuYnVmZmVyOwogICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTsKICAgICAgICB0aGlzLmFjdGl2ZS0tOwogICAgICAgIGlmIChidWZmZXIgJiYgYnVmZmVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmhhc0NvbXBsZXRlZCAmJiB0aGlzLmFjdGl2ZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBFeHBhbmRTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cGFuZC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTcwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJmaW5hbGl6ZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZmluYWxpemU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX1N1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIGZpbmFsaXplKGNhbGxiYWNrKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IEZpbmFsbHlPcGVyYXRvcihjYWxsYmFjaykpOyB9Owp9CnZhciBGaW5hbGx5T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBGaW5hbGx5T3BlcmF0b3IoY2FsbGJhY2spIHsKICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICB9CiAgICBGaW5hbGx5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IEZpbmFsbHlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuY2FsbGJhY2spKTsKICAgIH07CiAgICByZXR1cm4gRmluYWxseU9wZXJhdG9yOwp9KCkpOwp2YXIgRmluYWxseVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShGaW5hbGx5U3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEZpbmFsbHlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjYWxsYmFjaykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmFkZChuZXcgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJTdWJzY3JpcHRpb24iXShjYWxsYmFjaykpOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIHJldHVybiBGaW5hbGx5U3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluYWxpemUuanMubWFwCgoKLyoqKi8gfSksCi8qIDE3MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZmluZCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZmluZDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkZpbmRWYWx1ZU9wZXJhdG9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBGaW5kVmFsdWVPcGVyYXRvcjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIkZpbmRWYWx1ZVN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIEZpbmRWYWx1ZVN1YnNjcmliZXI7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBmaW5kKHByZWRpY2F0ZSwgdGhpc0FyZykgewogICAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwcmVkaWNhdGUgaXMgbm90IGEgZnVuY3Rpb24nKTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgRmluZFZhbHVlT3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UsIGZhbHNlLCB0aGlzQXJnKSk7IH07Cn0KdmFyIEZpbmRWYWx1ZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRmluZFZhbHVlT3BlcmF0b3IocHJlZGljYXRlLCBzb3VyY2UsIHlpZWxkSW5kZXgsIHRoaXNBcmcpIHsKICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTsKICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgICB0aGlzLnlpZWxkSW5kZXggPSB5aWVsZEluZGV4OwogICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7CiAgICB9CiAgICBGaW5kVmFsdWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IEZpbmRWYWx1ZVN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJlZGljYXRlLCB0aGlzLnNvdXJjZSwgdGhpcy55aWVsZEluZGV4LCB0aGlzLnRoaXNBcmcpKTsKICAgIH07CiAgICByZXR1cm4gRmluZFZhbHVlT3BlcmF0b3I7Cn0oKSk7Cgp2YXIgRmluZFZhbHVlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKEZpbmRWYWx1ZVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBGaW5kVmFsdWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcmVkaWNhdGUsIHNvdXJjZSwgeWllbGRJbmRleCwgdGhpc0FyZykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTsKICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgX3RoaXMueWllbGRJbmRleCA9IHlpZWxkSW5kZXg7CiAgICAgICAgX3RoaXMudGhpc0FyZyA9IHRoaXNBcmc7CiAgICAgICAgX3RoaXMuaW5kZXggPSAwOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEZpbmRWYWx1ZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjsKICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTsKICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgfTsKICAgIEZpbmRWYWx1ZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIF9hID0gdGhpcywgcHJlZGljYXRlID0gX2EucHJlZGljYXRlLCB0aGlzQXJnID0gX2EudGhpc0FyZzsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHByZWRpY2F0ZS5jYWxsKHRoaXNBcmcgfHwgdGhpcywgdmFsdWUsIGluZGV4LCB0aGlzLnNvdXJjZSk7CiAgICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5Q29tcGxldGUodGhpcy55aWVsZEluZGV4ID8gaW5kZXggOiB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICAgICAgfQogICAgfTsKICAgIEZpbmRWYWx1ZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLm5vdGlmeUNvbXBsZXRlKHRoaXMueWllbGRJbmRleCA/IC0xIDogdW5kZWZpbmVkKTsKICAgIH07CiAgICByZXR1cm4gRmluZFZhbHVlU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmQuanMubWFwCgoKLyoqKi8gfSksCi8qIDE3MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZmluZEluZGV4IiwgZnVuY3Rpb24oKSB7IHJldHVybiBmaW5kSW5kZXg7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29wZXJhdG9yc19maW5kX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX29wZXJhdG9yc19maW5kIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIGZpbmRJbmRleChwcmVkaWNhdGUsIHRoaXNBcmcpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgX29wZXJhdG9yc19maW5kX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIkZpbmRWYWx1ZU9wZXJhdG9yIl0ocHJlZGljYXRlLCBzb3VyY2UsIHRydWUsIHRoaXNBcmcpKTsgfTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1maW5kSW5kZXguanMubWFwCgoKLyoqKi8gfSksCi8qIDE3MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZmlyc3QiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZpcnN0OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX0VtcHR5RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ZpbHRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjEpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3Rha2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY0KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9kZWZhdWx0SWZFbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTIpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3Rocm93SWZFbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjIpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaWRlbnRpdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX0VtcHR5RXJyb3IsX2ZpbHRlcixfdGFrZSxfZGVmYXVsdElmRW1wdHksX3Rocm93SWZFbXB0eSxfdXRpbF9pZGVudGl0eSBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCmZ1bmN0aW9uIGZpcnN0KHByZWRpY2F0ZSwgZGVmYXVsdFZhbHVlKSB7CiAgICB2YXIgaGFzRGVmYXVsdFZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+PSAyOwogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5waXBlKHByZWRpY2F0ZSA/IE9iamVjdChfZmlsdGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImZpbHRlciJdKShmdW5jdGlvbiAodiwgaSkgeyByZXR1cm4gcHJlZGljYXRlKHYsIGksIHNvdXJjZSk7IH0pIDogX3V0aWxfaWRlbnRpdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siaWRlbnRpdHkiXSwgT2JqZWN0KF90YWtlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInRha2UiXSkoMSksIGhhc0RlZmF1bHRWYWx1ZSA/IE9iamVjdChfZGVmYXVsdElmRW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siZGVmYXVsdElmRW1wdHkiXSkoZGVmYXVsdFZhbHVlKSA6IE9iamVjdChfdGhyb3dJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bInRocm93SWZFbXB0eSJdKShmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgX3V0aWxfRW1wdHlFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJFbXB0eUVycm9yIl0oKTsgfSkpOyB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpcnN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImlnbm9yZUVsZW1lbnRzIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpZ25vcmVFbGVtZW50czsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIGlnbm9yZUVsZW1lbnRzKCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIGlnbm9yZUVsZW1lbnRzT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IElnbm9yZUVsZW1lbnRzT3BlcmF0b3IoKSk7CiAgICB9Owp9CnZhciBJZ25vcmVFbGVtZW50c09wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gSWdub3JlRWxlbWVudHNPcGVyYXRvcigpIHsKICAgIH0KICAgIElnbm9yZUVsZW1lbnRzT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IElnbm9yZUVsZW1lbnRzU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7CiAgICB9OwogICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzT3BlcmF0b3I7Cn0oKSk7CnZhciBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBJZ25vcmVFbGVtZW50c1N1YnNjcmliZXIoKSB7CiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgfQogICAgSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh1bnVzZWQpIHsKICAgIH07CiAgICByZXR1cm4gSWdub3JlRWxlbWVudHNTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pZ25vcmVFbGVtZW50cy5qcy5tYXAKCgovKioqLyB9KSwKLyogMTc1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJpc0VtcHR5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBpc0VtcHR5OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKZnVuY3Rpb24gaXNFbXB0eSgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgSXNFbXB0eU9wZXJhdG9yKCkpOyB9Owp9CnZhciBJc0VtcHR5T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBJc0VtcHR5T3BlcmF0b3IoKSB7CiAgICB9CiAgICBJc0VtcHR5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBJc0VtcHR5U3Vic2NyaWJlcihvYnNlcnZlcikpOwogICAgfTsKICAgIHJldHVybiBJc0VtcHR5T3BlcmF0b3I7Cn0oKSk7CnZhciBJc0VtcHR5U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKElzRW1wdHlTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gSXNFbXB0eVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHsKICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICB9CiAgICBJc0VtcHR5U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaXNFbXB0eSkgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgZGVzdGluYXRpb24ubmV4dChpc0VtcHR5KTsKICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgfTsKICAgIElzRW1wdHlTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHRoaXMubm90aWZ5Q29tcGxldGUoZmFsc2UpOwogICAgfTsKICAgIElzRW1wdHlTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5ub3RpZnlDb21wbGV0ZSh0cnVlKTsKICAgIH07CiAgICByZXR1cm4gSXNFbXB0eVN1YnNjcmliZXI7Cn0oX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRW1wdHkuanMubWFwCgoKLyoqKi8gfSksCi8qIDE3NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibGFzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbGFzdDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9FbXB0eUVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9maWx0ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYxKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90YWtlTGFzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3Rocm93SWZFbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjIpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2RlZmF1bHRJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pZGVudGl0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfRW1wdHlFcnJvcixfZmlsdGVyLF90YWtlTGFzdCxfdGhyb3dJZkVtcHR5LF9kZWZhdWx0SWZFbXB0eSxfdXRpbF9pZGVudGl0eSBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCmZ1bmN0aW9uIGxhc3QocHJlZGljYXRlLCBkZWZhdWx0VmFsdWUpIHsKICAgIHZhciBoYXNEZWZhdWx0VmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID49IDI7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLnBpcGUocHJlZGljYXRlID8gT2JqZWN0KF9maWx0ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siZmlsdGVyIl0pKGZ1bmN0aW9uICh2LCBpKSB7IHJldHVybiBwcmVkaWNhdGUodiwgaSwgc291cmNlKTsgfSkgOiBfdXRpbF9pZGVudGl0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fWyJpZGVudGl0eSJdLCBPYmplY3QoX3Rha2VMYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInRha2VMYXN0Il0pKDEpLCBoYXNEZWZhdWx0VmFsdWUgPyBPYmplY3QoX2RlZmF1bHRJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImRlZmF1bHRJZkVtcHR5Il0pKGRlZmF1bHRWYWx1ZSkgOiBPYmplY3QoX3Rocm93SWZFbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJ0aHJvd0lmRW1wdHkiXSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IF91dGlsX0VtcHR5RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siRW1wdHlFcnJvciJdKCk7IH0pKTsgfTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1sYXN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxNzcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRha2VMYXN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiB0YWtlTGFzdDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX3V0aWxfQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IsX29ic2VydmFibGVfZW1wdHkgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKZnVuY3Rpb24gdGFrZUxhc3QoY291bnQpIHsKICAgIHJldHVybiBmdW5jdGlvbiB0YWtlTGFzdE9wZXJhdG9yRnVuY3Rpb24oc291cmNlKSB7CiAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QoX29ic2VydmFibGVfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siZW1wdHkiXSkoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgVGFrZUxhc3RPcGVyYXRvcihjb3VudCkpOwogICAgICAgIH0KICAgIH07Cn0KdmFyIFRha2VMYXN0T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBUYWtlTGFzdE9wZXJhdG9yKHRvdGFsKSB7CiAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsOwogICAgICAgIGlmICh0aGlzLnRvdGFsIDwgMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgX3V0aWxfQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IiXTsKICAgICAgICB9CiAgICB9CiAgICBUYWtlTGFzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlTGFzdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy50b3RhbCkpOwogICAgfTsKICAgIHJldHVybiBUYWtlTGFzdE9wZXJhdG9yOwp9KCkpOwp2YXIgVGFrZUxhc3RTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oVGFrZUxhc3RTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVGFrZUxhc3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCB0b3RhbCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnRvdGFsID0gdG90YWw7CiAgICAgICAgX3RoaXMucmluZyA9IG5ldyBBcnJheSgpOwogICAgICAgIF90aGlzLmNvdW50ID0gMDsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBUYWtlTGFzdFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIHJpbmcgPSB0aGlzLnJpbmc7CiAgICAgICAgdmFyIHRvdGFsID0gdGhpcy50b3RhbDsKICAgICAgICB2YXIgY291bnQgPSB0aGlzLmNvdW50Kys7CiAgICAgICAgaWYgKHJpbmcubGVuZ3RoIDwgdG90YWwpIHsKICAgICAgICAgICAgcmluZy5wdXNoKHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBpbmRleCA9IGNvdW50ICUgdG90YWw7CiAgICAgICAgICAgIHJpbmdbaW5kZXhdID0gdmFsdWU7CiAgICAgICAgfQogICAgfTsKICAgIFRha2VMYXN0U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5jb3VudDsKICAgICAgICBpZiAoY291bnQgPiAwKSB7CiAgICAgICAgICAgIHZhciB0b3RhbCA9IHRoaXMuY291bnQgPj0gdGhpcy50b3RhbCA/IHRoaXMudG90YWwgOiB0aGlzLmNvdW50OwogICAgICAgICAgICB2YXIgcmluZyA9IHRoaXMucmluZzsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gKGNvdW50KyspICUgdG90YWw7CiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHJpbmdbaWR4XSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgIH07CiAgICByZXR1cm4gVGFrZUxhc3RTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD10YWtlTGFzdC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTc4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtYXBUbyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWFwVG87IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBtYXBUbyh2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBNYXBUb09wZXJhdG9yKHZhbHVlKSk7IH07Cn0KdmFyIE1hcFRvT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBNYXBUb09wZXJhdG9yKHZhbHVlKSB7CiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgfQogICAgTWFwVG9PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgTWFwVG9TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMudmFsdWUpKTsKICAgIH07CiAgICByZXR1cm4gTWFwVG9PcGVyYXRvcjsKfSgpKTsKdmFyIE1hcFRvU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKE1hcFRvU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIE1hcFRvU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgdmFsdWUpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIE1hcFRvU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAoeCkgewogICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLnZhbHVlKTsKICAgIH07CiAgICByZXR1cm4gTWFwVG9TdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1tYXBUby5qcy5tYXAKCgovKioqLyB9KSwKLyogMTc5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtYXRlcmlhbGl6ZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWF0ZXJpYWxpemU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX05vdGlmaWNhdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX05vdGlmaWNhdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIG1hdGVyaWFsaXplKCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIG1hdGVyaWFsaXplT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IE1hdGVyaWFsaXplT3BlcmF0b3IoKSk7CiAgICB9Owp9CnZhciBNYXRlcmlhbGl6ZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVPcGVyYXRvcigpIHsKICAgIH0KICAgIE1hdGVyaWFsaXplT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IE1hdGVyaWFsaXplU3Vic2NyaWJlcihzdWJzY3JpYmVyKSk7CiAgICB9OwogICAgcmV0dXJuIE1hdGVyaWFsaXplT3BlcmF0b3I7Cn0oKSk7CnZhciBNYXRlcmlhbGl6ZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShNYXRlcmlhbGl6ZVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBNYXRlcmlhbGl6ZVN1YnNjcmliZXIoZGVzdGluYXRpb24pIHsKICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICB9CiAgICBNYXRlcmlhbGl6ZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KF9Ob3RpZmljYXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siTm90aWZpY2F0aW9uIl0uY3JlYXRlTmV4dCh2YWx1ZSkpOwogICAgfTsKICAgIE1hdGVyaWFsaXplU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgZGVzdGluYXRpb24ubmV4dChfTm90aWZpY2F0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIk5vdGlmaWNhdGlvbiJdLmNyZWF0ZUVycm9yKGVycikpOwogICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICB9OwogICAgTWF0ZXJpYWxpemVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjsKICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KF9Ob3RpZmljYXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siTm90aWZpY2F0aW9uIl0uY3JlYXRlQ29tcGxldGUoKSk7CiAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgIH07CiAgICByZXR1cm4gTWF0ZXJpYWxpemVTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1tYXRlcmlhbGl6ZS5qcy5tYXAKCgovKioqLyB9KSwKLyogMTgwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtYXgiLCBmdW5jdGlvbigpIHsgcmV0dXJuIG1heDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVkdWNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3JlZHVjZSBQVVJFX0lNUE9SVFNfRU5EICovCgpmdW5jdGlvbiBtYXgoY29tcGFyZXIpIHsKICAgIHZhciBtYXggPSAodHlwZW9mIGNvbXBhcmVyID09PSAnZnVuY3Rpb24nKQogICAgICAgID8gZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGNvbXBhcmVyKHgsIHkpID4gMCA/IHggOiB5OyB9CiAgICAgICAgOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCA+IHkgPyB4IDogeTsgfTsKICAgIHJldHVybiBPYmplY3QoX3JlZHVjZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJyZWR1Y2UiXSkobWF4KTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1tYXguanMubWFwCgoKLyoqKi8gfSksCi8qIDE4MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmVkdWNlIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZWR1Y2U7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjYW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgyKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90YWtlTGFzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzcpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2RlZmF1bHRJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9waXBlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc2NhbixfdGFrZUxhc3QsX2RlZmF1bHRJZkVtcHR5LF91dGlsX3BpcGUgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKZnVuY3Rpb24gcmVkdWNlKGFjY3VtdWxhdG9yLCBzZWVkKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlZHVjZU9wZXJhdG9yRnVuY3Rpb25XaXRoU2VlZChzb3VyY2UpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdChfdXRpbF9waXBlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bInBpcGUiXSkoT2JqZWN0KF9zY2FuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInNjYW4iXSkoYWNjdW11bGF0b3IsIHNlZWQpLCBPYmplY3QoX3Rha2VMYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInRha2VMYXN0Il0pKDEpLCBPYmplY3QoX2RlZmF1bHRJZkVtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImRlZmF1bHRJZkVtcHR5Il0pKHNlZWQpKShzb3VyY2UpOwogICAgICAgIH07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gcmVkdWNlT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KF91dGlsX3BpcGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sicGlwZSJdKShPYmplY3QoX3NjYW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic2NhbiJdKShmdW5jdGlvbiAoYWNjLCB2YWx1ZSwgaW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yKGFjYywgdmFsdWUsIGluZGV4ICsgMSk7CiAgICAgICAgfSksIE9iamVjdChfdGFrZUxhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1sidGFrZUxhc3QiXSkoMSkpKHNvdXJjZSk7CiAgICB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZHVjZS5qcy5tYXAKCgovKioqLyB9KSwKLyogMTgyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzY2FuIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzY2FuOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKZnVuY3Rpb24gc2NhbihhY2N1bXVsYXRvciwgc2VlZCkgewogICAgdmFyIGhhc1NlZWQgPSBmYWxzZTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDIpIHsKICAgICAgICBoYXNTZWVkID0gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiBzY2FuT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IFNjYW5PcGVyYXRvcihhY2N1bXVsYXRvciwgc2VlZCwgaGFzU2VlZCkpOwogICAgfTsKfQp2YXIgU2Nhbk9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gU2Nhbk9wZXJhdG9yKGFjY3VtdWxhdG9yLCBzZWVkLCBoYXNTZWVkKSB7CiAgICAgICAgaWYgKGhhc1NlZWQgPT09IHZvaWQgMCkgewogICAgICAgICAgICBoYXNTZWVkID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjsKICAgICAgICB0aGlzLnNlZWQgPSBzZWVkOwogICAgICAgIHRoaXMuaGFzU2VlZCA9IGhhc1NlZWQ7CiAgICB9CiAgICBTY2FuT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFNjYW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuYWNjdW11bGF0b3IsIHRoaXMuc2VlZCwgdGhpcy5oYXNTZWVkKSk7CiAgICB9OwogICAgcmV0dXJuIFNjYW5PcGVyYXRvcjsKfSgpKTsKdmFyIFNjYW5TdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oU2NhblN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTY2FuU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgYWNjdW11bGF0b3IsIF9zZWVkLCBoYXNTZWVkKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjsKICAgICAgICBfdGhpcy5fc2VlZCA9IF9zZWVkOwogICAgICAgIF90aGlzLmhhc1NlZWQgPSBoYXNTZWVkOwogICAgICAgIF90aGlzLmluZGV4ID0gMDsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2NhblN1YnNjcmliZXIucHJvdG90eXBlLCAic2VlZCIsIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlZWQ7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICB0aGlzLmhhc1NlZWQgPSB0cnVlOwogICAgICAgICAgICB0aGlzLl9zZWVkID0gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfSk7CiAgICBTY2FuU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAoIXRoaXMuaGFzU2VlZCkgewogICAgICAgICAgICB0aGlzLnNlZWQgPSB2YWx1ZTsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cnlOZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICB9OwogICAgU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl90cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrOwogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5hY2N1bXVsYXRvcih0aGlzLnNlZWQsIHZhbHVlLCBpbmRleCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgICAgIH0KICAgICAgICB0aGlzLnNlZWQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHJlc3VsdCk7CiAgICB9OwogICAgcmV0dXJuIFNjYW5TdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1zY2FuLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxODMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm1lcmdlIiwgZnVuY3Rpb24oKSB7IHJldHVybiBtZXJnZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9tZXJnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjYpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9vYnNlcnZhYmxlX21lcmdlIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIG1lcmdlKCkgewogICAgdmFyIG9ic2VydmFibGVzID0gW107CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIG9ic2VydmFibGVzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQuY2FsbChfb2JzZXJ2YWJsZV9tZXJnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJtZXJnZSJdLmFwcGx5KHZvaWQgMCwgW3NvdXJjZV0uY29uY2F0KG9ic2VydmFibGVzKSkpOyB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxODQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm1lcmdlTWFwVG8iLCBmdW5jdGlvbigpIHsgcmV0dXJuIG1lcmdlTWFwVG87IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX21lcmdlTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNyk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX21lcmdlTWFwIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIG1lcmdlTWFwVG8oaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCkgewogICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgewogICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICB9CiAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChfbWVyZ2VNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibWVyZ2VNYXAiXSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5uZXJPYnNlcnZhYmxlOyB9LCByZXN1bHRTZWxlY3RvciwgY29uY3VycmVudCk7CiAgICB9CiAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnbnVtYmVyJykgewogICAgICAgIGNvbmN1cnJlbnQgPSByZXN1bHRTZWxlY3RvcjsKICAgIH0KICAgIHJldHVybiBPYmplY3QoX21lcmdlTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm1lcmdlTWFwIl0pKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlubmVyT2JzZXJ2YWJsZTsgfSwgY29uY3VycmVudCk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VNYXBUby5qcy5tYXAKCgovKioqLyB9KSwKLyogMTg1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtZXJnZVNjYW4iLCBmdW5jdGlvbigpIHsgcmV0dXJuIG1lcmdlU2NhbjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk1lcmdlU2Nhbk9wZXJhdG9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBNZXJnZVNjYW5PcGVyYXRvcjsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIk1lcmdlU2NhblN1YnNjcmliZXIiLCBmdW5jdGlvbigpIHsgcmV0dXJuIE1lcmdlU2NhblN1YnNjcmliZXI7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfdHJ5Q2F0Y2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfdHJ5Q2F0Y2gsX3V0aWxfZXJyb3JPYmplY3QsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQsX091dGVyU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gbWVyZ2VTY2FuKGFjY3VtdWxhdG9yLCBzZWVkLCBjb25jdXJyZW50KSB7CiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7CiAgICAgICAgY29uY3VycmVudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgTWVyZ2VTY2FuT3BlcmF0b3IoYWNjdW11bGF0b3IsIHNlZWQsIGNvbmN1cnJlbnQpKTsgfTsKfQp2YXIgTWVyZ2VTY2FuT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBNZXJnZVNjYW5PcGVyYXRvcihhY2N1bXVsYXRvciwgc2VlZCwgY29uY3VycmVudCkgewogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjsKICAgICAgICB0aGlzLnNlZWQgPSBzZWVkOwogICAgICAgIHRoaXMuY29uY3VycmVudCA9IGNvbmN1cnJlbnQ7CiAgICB9CiAgICBNZXJnZVNjYW5PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VTY2FuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmFjY3VtdWxhdG9yLCB0aGlzLnNlZWQsIHRoaXMuY29uY3VycmVudCkpOwogICAgfTsKICAgIHJldHVybiBNZXJnZVNjYW5PcGVyYXRvcjsKfSgpKTsKCnZhciBNZXJnZVNjYW5TdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oTWVyZ2VTY2FuU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIE1lcmdlU2NhblN1YnNjcmliZXIoZGVzdGluYXRpb24sIGFjY3VtdWxhdG9yLCBhY2MsIGNvbmN1cnJlbnQpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5hY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yOwogICAgICAgIF90aGlzLmFjYyA9IGFjYzsKICAgICAgICBfdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDsKICAgICAgICBfdGhpcy5oYXNWYWx1ZSA9IGZhbHNlOwogICAgICAgIF90aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlOwogICAgICAgIF90aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgIF90aGlzLmFjdGl2ZSA9IDA7CiAgICAgICAgX3RoaXMuaW5kZXggPSAwOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIE1lcmdlU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKHRoaXMuYWN0aXZlIDwgdGhpcy5jb25jdXJyZW50KSB7CiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKzsKICAgICAgICAgICAgdmFyIGlzaCA9IE9iamVjdChfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJ0cnlDYXRjaCJdKSh0aGlzLmFjY3VtdWxhdG9yKSh0aGlzLmFjYywgdmFsdWUpOwogICAgICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uOwogICAgICAgICAgICBpZiAoaXNoID09PSBfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJlcnJvck9iamVjdCJdKSB7CiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJlcnJvck9iamVjdCJdLmUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUrKzsKICAgICAgICAgICAgICAgIHRoaXMuX2lubmVyU3ViKGlzaCwgdmFsdWUsIGluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7CiAgICAgICAgfQogICAgfTsKICAgIE1lcmdlU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl9pbm5lclN1YiA9IGZ1bmN0aW9uIChpc2gsIHZhbHVlLCBpbmRleCkgewogICAgICAgIHRoaXMuYWRkKE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKSh0aGlzLCBpc2gsIHZhbHVlLCBpbmRleCkpOwogICAgfTsKICAgIE1lcmdlU2NhblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7CiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmFjYyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgIH07CiAgICBNZXJnZVNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7CiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjsKICAgICAgICB0aGlzLmFjYyA9IGlubmVyVmFsdWU7CiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7CiAgICAgICAgZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTsKICAgIH07CiAgICBNZXJnZVNjYW5TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjsKICAgICAgICB0aGlzLnJlbW92ZShpbm5lclN1Yik7CiAgICAgICAgdGhpcy5hY3RpdmUtLTsKICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdGhpcy5fbmV4dChidWZmZXIuc2hpZnQoKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYWNjKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBNZXJnZVNjYW5TdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlU2Nhbi5qcy5tYXAKCgovKioqLyB9KSwKLyogMTg2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJtaW4iLCBmdW5jdGlvbigpIHsgcmV0dXJuIG1pbjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVkdWNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3JlZHVjZSBQVVJFX0lNUE9SVFNfRU5EICovCgpmdW5jdGlvbiBtaW4oY29tcGFyZXIpIHsKICAgIHZhciBtaW4gPSAodHlwZW9mIGNvbXBhcmVyID09PSAnZnVuY3Rpb24nKQogICAgICAgID8gZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGNvbXBhcmVyKHgsIHkpIDwgMCA/IHggOiB5OyB9CiAgICAgICAgOiBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCA8IHkgPyB4IDogeTsgfTsKICAgIHJldHVybiBPYmplY3QoX3JlZHVjZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJyZWR1Y2UiXSkobWluKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1taW4uanMubWFwCgoKLyoqKi8gfSksCi8qIDE4NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibXVsdGljYXN0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBtdWx0aWNhc3Q7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJNdWx0aWNhc3RPcGVyYXRvciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gTXVsdGljYXN0T3BlcmF0b3I7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfQ29ubmVjdGFibGVPYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV9Db25uZWN0YWJsZU9ic2VydmFibGUgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gbXVsdGljYXN0KHN1YmplY3RPclN1YmplY3RGYWN0b3J5LCBzZWxlY3RvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIG11bHRpY2FzdE9wZXJhdG9yRnVuY3Rpb24oc291cmNlKSB7CiAgICAgICAgdmFyIHN1YmplY3RGYWN0b3J5OwogICAgICAgIGlmICh0eXBlb2Ygc3ViamVjdE9yU3ViamVjdEZhY3RvcnkgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgc3ViamVjdEZhY3RvcnkgPSBzdWJqZWN0T3JTdWJqZWN0RmFjdG9yeTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHN1YmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gc3ViamVjdEZhY3RvcnkoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc3ViamVjdE9yU3ViamVjdEZhY3Rvcnk7CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBNdWx0aWNhc3RPcGVyYXRvcihzdWJqZWN0RmFjdG9yeSwgc2VsZWN0b3IpKTsKICAgICAgICB9CiAgICAgICAgdmFyIGNvbm5lY3RhYmxlID0gT2JqZWN0LmNyZWF0ZShzb3VyY2UsIF9vYnNlcnZhYmxlX0Nvbm5lY3RhYmxlT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJjb25uZWN0YWJsZU9ic2VydmFibGVEZXNjcmlwdG9yIl0pOwogICAgICAgIGNvbm5lY3RhYmxlLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgICBjb25uZWN0YWJsZS5zdWJqZWN0RmFjdG9yeSA9IHN1YmplY3RGYWN0b3J5OwogICAgICAgIHJldHVybiBjb25uZWN0YWJsZTsKICAgIH07Cn0KdmFyIE11bHRpY2FzdE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gTXVsdGljYXN0T3BlcmF0b3Ioc3ViamVjdEZhY3RvcnksIHNlbGVjdG9yKSB7CiAgICAgICAgdGhpcy5zdWJqZWN0RmFjdG9yeSA9IHN1YmplY3RGYWN0b3J5OwogICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjsKICAgIH0KICAgIE11bHRpY2FzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7CiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3RGYWN0b3J5KCk7CiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHNlbGVjdG9yKHN1YmplY3QpLnN1YnNjcmliZShzdWJzY3JpYmVyKTsKICAgICAgICBzdWJzY3JpcHRpb24uYWRkKHNvdXJjZS5zdWJzY3JpYmUoc3ViamVjdCkpOwogICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247CiAgICB9OwogICAgcmV0dXJuIE11bHRpY2FzdE9wZXJhdG9yOwp9KCkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9bXVsdGljYXN0LmpzLm1hcAoKCi8qKiovIH0pLAovKiAxODggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm9uRXJyb3JSZXN1bWVOZXh0IiwgZnVuY3Rpb24oKSB7IHJldHVybiBvbkVycm9yUmVzdW1lTmV4dDsgfSk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIm9uRXJyb3JSZXN1bWVOZXh0U3RhdGljIiwgZnVuY3Rpb24oKSB7IHJldHVybiBvbkVycm9yUmVzdW1lTmV4dFN0YXRpYzsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9mcm9tX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9vYnNlcnZhYmxlX2Zyb20sX3V0aWxfaXNBcnJheSxfT3V0ZXJTdWJzY3JpYmVyLF91dGlsX3N1YnNjcmliZVRvUmVzdWx0IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgpmdW5jdGlvbiBvbkVycm9yUmVzdW1lTmV4dCgpIHsKICAgIHZhciBuZXh0U291cmNlcyA9IFtdOwogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICBuZXh0U291cmNlc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgfQogICAgaWYgKG5leHRTb3VyY2VzLmxlbmd0aCA9PT0gMSAmJiBPYmplY3QoX3V0aWxfaXNBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJpc0FycmF5Il0pKG5leHRTb3VyY2VzWzBdKSkgewogICAgICAgIG5leHRTb3VyY2VzID0gbmV4dFNvdXJjZXNbMF07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IE9uRXJyb3JSZXN1bWVOZXh0T3BlcmF0b3IobmV4dFNvdXJjZXMpKTsgfTsKfQpmdW5jdGlvbiBvbkVycm9yUmVzdW1lTmV4dFN0YXRpYygpIHsKICAgIHZhciBuZXh0U291cmNlcyA9IFtdOwogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICBuZXh0U291cmNlc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgfQogICAgdmFyIHNvdXJjZSA9IG51bGw7CiAgICBpZiAobmV4dFNvdXJjZXMubGVuZ3RoID09PSAxICYmIE9iamVjdChfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImlzQXJyYXkiXSkobmV4dFNvdXJjZXNbMF0pKSB7CiAgICAgICAgbmV4dFNvdXJjZXMgPSBuZXh0U291cmNlc1swXTsKICAgIH0KICAgIHNvdXJjZSA9IG5leHRTb3VyY2VzLnNoaWZ0KCk7CiAgICByZXR1cm4gT2JqZWN0KF9vYnNlcnZhYmxlX2Zyb21fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siZnJvbSJdKShzb3VyY2UsIG51bGwpLmxpZnQobmV3IE9uRXJyb3JSZXN1bWVOZXh0T3BlcmF0b3IobmV4dFNvdXJjZXMpKTsKfQp2YXIgT25FcnJvclJlc3VtZU5leHRPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIE9uRXJyb3JSZXN1bWVOZXh0T3BlcmF0b3IobmV4dFNvdXJjZXMpIHsKICAgICAgICB0aGlzLm5leHRTb3VyY2VzID0gbmV4dFNvdXJjZXM7CiAgICB9CiAgICBPbkVycm9yUmVzdW1lTmV4dE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBPbkVycm9yUmVzdW1lTmV4dFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5uZXh0U291cmNlcykpOwogICAgfTsKICAgIHJldHVybiBPbkVycm9yUmVzdW1lTmV4dE9wZXJhdG9yOwp9KCkpOwp2YXIgT25FcnJvclJlc3VtZU5leHRTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oT25FcnJvclJlc3VtZU5leHRTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gT25FcnJvclJlc3VtZU5leHRTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBuZXh0U291cmNlcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247CiAgICAgICAgX3RoaXMubmV4dFNvdXJjZXMgPSBuZXh0U291cmNlczsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBPbkVycm9yUmVzdW1lTmV4dFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1YikgewogICAgICAgIHRoaXMuc3Vic2NyaWJlVG9OZXh0U291cmNlKCk7CiAgICB9OwogICAgT25FcnJvclJlc3VtZU5leHRTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIHRoaXMuc3Vic2NyaWJlVG9OZXh0U291cmNlKCk7CiAgICB9OwogICAgT25FcnJvclJlc3VtZU5leHRTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb05leHRTb3VyY2UoKTsKICAgIH07CiAgICBPbkVycm9yUmVzdW1lTmV4dFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnN1YnNjcmliZVRvTmV4dFNvdXJjZSgpOwogICAgfTsKICAgIE9uRXJyb3JSZXN1bWVOZXh0U3Vic2NyaWJlci5wcm90b3R5cGUuc3Vic2NyaWJlVG9OZXh0U291cmNlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBuZXh0ID0gdGhpcy5uZXh0U291cmNlcy5zaGlmdCgpOwogICAgICAgIGlmIChuZXh0KSB7CiAgICAgICAgICAgIHRoaXMuYWRkKE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKSh0aGlzLCBuZXh0KSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBPbkVycm9yUmVzdW1lTmV4dFN1YnNjcmliZXI7Cn0oX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJPdXRlclN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1vbkVycm9yUmVzdW1lTmV4dC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTg5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwYWlyd2lzZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGFpcndpc2U7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBwYWlyd2lzZSgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgUGFpcndpc2VPcGVyYXRvcigpKTsgfTsKfQp2YXIgUGFpcndpc2VPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFBhaXJ3aXNlT3BlcmF0b3IoKSB7CiAgICB9CiAgICBQYWlyd2lzZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBQYWlyd2lzZVN1YnNjcmliZXIoc3Vic2NyaWJlcikpOwogICAgfTsKICAgIHJldHVybiBQYWlyd2lzZU9wZXJhdG9yOwp9KCkpOwp2YXIgUGFpcndpc2VTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oUGFpcndpc2VTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUGFpcndpc2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFzUHJldiA9IGZhbHNlOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFBhaXJ3aXNlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAodGhpcy5oYXNQcmV2KSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChbdGhpcy5wcmV2LCB2YWx1ZV0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5oYXNQcmV2ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wcmV2ID0gdmFsdWU7CiAgICB9OwogICAgcmV0dXJuIFBhaXJ3aXNlU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFpcndpc2UuanMubWFwCgoKLyoqKi8gfSksCi8qIDE5MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicGFydGl0aW9uIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwYXJ0aXRpb247IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfbm90X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZmlsdGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfbm90LF9maWx0ZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIHBhcnRpdGlvbihwcmVkaWNhdGUsIHRoaXNBcmcpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgT2JqZWN0KF9maWx0ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siZmlsdGVyIl0pKHByZWRpY2F0ZSwgdGhpc0FyZykoc291cmNlKSwKICAgICAgICAgICAgT2JqZWN0KF9maWx0ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siZmlsdGVyIl0pKE9iamVjdChfdXRpbF9ub3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibm90Il0pKHByZWRpY2F0ZSwgdGhpc0FyZykpKHNvdXJjZSkKICAgICAgICBdOwogICAgfTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1wYXJ0aXRpb24uanMubWFwCgoKLyoqKi8gfSksCi8qIDE5MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAibm90IiwgZnVuY3Rpb24oKSB7IHJldHVybiBub3Q7IH0pOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovCmZ1bmN0aW9uIG5vdChwcmVkLCB0aGlzQXJnKSB7CiAgICBmdW5jdGlvbiBub3RQcmVkKCkgewogICAgICAgIHJldHVybiAhKG5vdFByZWQucHJlZC5hcHBseShub3RQcmVkLnRoaXNBcmcsIGFyZ3VtZW50cykpOwogICAgfQogICAgbm90UHJlZC5wcmVkID0gcHJlZDsKICAgIG5vdFByZWQudGhpc0FyZyA9IHRoaXNBcmc7CiAgICByZXR1cm4gbm90UHJlZDsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1ub3QuanMubWFwCgoKLyoqKi8gfSksCi8qIDE5MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicGx1Y2siLCBmdW5jdGlvbigpIHsgcmV0dXJuIHBsdWNrOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9tYXAgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gcGx1Y2soKSB7CiAgICB2YXIgcHJvcGVydGllcyA9IFtdOwogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICBwcm9wZXJ0aWVzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CiAgICB2YXIgbGVuZ3RoID0gcHJvcGVydGllcy5sZW5ndGg7CiAgICBpZiAobGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdsaXN0IG9mIHByb3BlcnRpZXMgY2Fubm90IGJlIGVtcHR5LicpOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIE9iamVjdChfbWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIm1hcCJdKShwbHVja2VyKHByb3BlcnRpZXMsIGxlbmd0aCkpKHNvdXJjZSk7IH07Cn0KZnVuY3Rpb24gcGx1Y2tlcihwcm9wcywgbGVuZ3RoKSB7CiAgICB2YXIgbWFwcGVyID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICB2YXIgY3VycmVudFByb3AgPSB4OwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHAgPSBjdXJyZW50UHJvcFtwcm9wc1tpXV07CiAgICAgICAgICAgIGlmICh0eXBlb2YgcCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9wID0gcDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9wOwogICAgfTsKICAgIHJldHVybiBtYXBwZXI7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGx1Y2suanMubWFwCgoKLyoqKi8gfSksCi8qIDE5MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicHVibGlzaCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcHVibGlzaDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbXVsdGljYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nyk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX1N1YmplY3QsX211bHRpY2FzdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKZnVuY3Rpb24gcHVibGlzaChzZWxlY3RvcikgewogICAgcmV0dXJuIHNlbGVjdG9yID8KICAgICAgICBPYmplY3QoX211bHRpY2FzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJtdWx0aWNhc3QiXSkoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IF9TdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIlN1YmplY3QiXSgpOyB9LCBzZWxlY3RvcikgOgogICAgICAgIE9iamVjdChfbXVsdGljYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIm11bHRpY2FzdCJdKShuZXcgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siU3ViamVjdCJdKCkpOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2guanMubWFwCgoKLyoqKi8gfSksCi8qIDE5NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicHVibGlzaEJlaGF2aW9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwdWJsaXNoQmVoYXZpb3I7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX0JlaGF2aW9yU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbXVsdGljYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nyk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX0JlaGF2aW9yU3ViamVjdCxfbXVsdGljYXN0IFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBwdWJsaXNoQmVoYXZpb3IodmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBPYmplY3QoX211bHRpY2FzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJtdWx0aWNhc3QiXSkobmV3IF9CZWhhdmlvclN1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siQmVoYXZpb3JTdWJqZWN0Il0odmFsdWUpKShzb3VyY2UpOyB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hCZWhhdmlvci5qcy5tYXAKCgovKioqLyB9KSwKLyogMTk1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwdWJsaXNoTGFzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcHVibGlzaExhc3Q7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX0FzeW5jU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbXVsdGljYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4Nyk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX0FzeW5jU3ViamVjdCxfbXVsdGljYXN0IFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBwdWJsaXNoTGFzdCgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBPYmplY3QoX211bHRpY2FzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJtdWx0aWNhc3QiXSkobmV3IF9Bc3luY1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siQXN5bmNTdWJqZWN0Il0oKSkoc291cmNlKTsgfTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoTGFzdC5qcy5tYXAKCgovKioqLyB9KSwKLyogMTk2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJwdWJsaXNoUmVwbGF5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBwdWJsaXNoUmVwbGF5OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9SZXBsYXlTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tdWx0aWNhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTg3KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfUmVwbGF5U3ViamVjdCxfbXVsdGljYXN0IFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBwdWJsaXNoUmVwbGF5KGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNlbGVjdG9yT3JTY2hlZHVsZXIsIHNjaGVkdWxlcikgewogICAgaWYgKHNlbGVjdG9yT3JTY2hlZHVsZXIgJiYgdHlwZW9mIHNlbGVjdG9yT3JTY2hlZHVsZXIgIT09ICdmdW5jdGlvbicpIHsKICAgICAgICBzY2hlZHVsZXIgPSBzZWxlY3Rvck9yU2NoZWR1bGVyOwogICAgfQogICAgdmFyIHNlbGVjdG9yID0gdHlwZW9mIHNlbGVjdG9yT3JTY2hlZHVsZXIgPT09ICdmdW5jdGlvbicgPyBzZWxlY3Rvck9yU2NoZWR1bGVyIDogdW5kZWZpbmVkOwogICAgdmFyIHN1YmplY3QgPSBuZXcgX1JlcGxheVN1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siUmVwbGF5U3ViamVjdCJdKGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcik7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gT2JqZWN0KF9tdWx0aWNhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1sibXVsdGljYXN0Il0pKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YmplY3Q7IH0sIHNlbGVjdG9yKShzb3VyY2UpOyB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXB1Ymxpc2hSZXBsYXkuanMubWFwCgoKLyoqKi8gfSksCi8qIDE5NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmFjZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmFjZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vYnNlcnZhYmxlX3JhY2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF9pc0FycmF5LF9vYnNlcnZhYmxlX3JhY2UgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIHJhY2UoKSB7CiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTsKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgb2JzZXJ2YWJsZXNbX2ldID0gYXJndW1lbnRzW19pXTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiByYWNlT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICBpZiAob2JzZXJ2YWJsZXMubGVuZ3RoID09PSAxICYmIE9iamVjdChfdXRpbF9pc0FycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImlzQXJyYXkiXSkob2JzZXJ2YWJsZXNbMF0pKSB7CiAgICAgICAgICAgIG9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXNbMF07CiAgICAgICAgfQogICAgICAgIHJldHVybiBzb3VyY2UubGlmdC5jYWxsKF9vYnNlcnZhYmxlX3JhY2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1sicmFjZSJdLmFwcGx5KHZvaWQgMCwgW3NvdXJjZV0uY29uY2F0KG9ic2VydmFibGVzKSkpOwogICAgfTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1yYWNlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAxOTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInJlcGVhdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVwZWF0OyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vYnNlcnZhYmxlX2VtcHR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlcixfb2JzZXJ2YWJsZV9lbXB0eSBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIHJlcGVhdChjb3VudCkgewogICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsKICAgICAgICBjb3VudCA9IC0xOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsKICAgICAgICBpZiAoY291bnQgPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdChfb2JzZXJ2YWJsZV9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJlbXB0eSJdKSgpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChjb3VudCA8IDApIHsKICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBSZXBlYXRPcGVyYXRvcigtMSwgc291cmNlKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IFJlcGVhdE9wZXJhdG9yKGNvdW50IC0gMSwgc291cmNlKSk7CiAgICAgICAgfQogICAgfTsKfQp2YXIgUmVwZWF0T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBSZXBlYXRPcGVyYXRvcihjb3VudCwgc291cmNlKSB7CiAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50OwogICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwogICAgfQogICAgUmVwZWF0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFJlcGVhdFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb3VudCwgdGhpcy5zb3VyY2UpKTsKICAgIH07CiAgICByZXR1cm4gUmVwZWF0T3BlcmF0b3I7Cn0oKSk7CnZhciBSZXBlYXRTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oUmVwZWF0U3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFJlcGVhdFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvdW50LCBzb3VyY2UpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5jb3VudCA9IGNvdW50OwogICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBSZXBlYXRTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7CiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMsIHNvdXJjZSA9IF9hLnNvdXJjZSwgY291bnQgPSBfYS5jb3VudDsKICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5jb21wbGV0ZS5jYWxsKHRoaXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGNvdW50ID4gLTEpIHsKICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBjb3VudCAtIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc291cmNlLnN1YnNjcmliZSh0aGlzLl91bnN1YnNjcmliZUFuZFJlY3ljbGUoKSk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBSZXBlYXRTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwCgoKLyoqKi8gfSksCi8qIDE5OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmVwZWF0V2hlbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVwZWF0V2hlbjsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3ViamVjdCxfdXRpbF90cnlDYXRjaCxfdXRpbF9lcnJvck9iamVjdCxfT3V0ZXJTdWJzY3JpYmVyLF91dGlsX3N1YnNjcmliZVRvUmVzdWx0IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgoKZnVuY3Rpb24gcmVwZWF0V2hlbihub3RpZmllcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBSZXBlYXRXaGVuT3BlcmF0b3Iobm90aWZpZXIpKTsgfTsKfQp2YXIgUmVwZWF0V2hlbk9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gUmVwZWF0V2hlbk9wZXJhdG9yKG5vdGlmaWVyKSB7CiAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyOwogICAgfQogICAgUmVwZWF0V2hlbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBSZXBlYXRXaGVuU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm5vdGlmaWVyLCBzb3VyY2UpKTsKICAgIH07CiAgICByZXR1cm4gUmVwZWF0V2hlbk9wZXJhdG9yOwp9KCkpOwp2YXIgUmVwZWF0V2hlblN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShSZXBlYXRXaGVuU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFJlcGVhdFdoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllciwgc291cmNlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMubm90aWZpZXIgPSBub3RpZmllcjsKICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgX3RoaXMuc291cmNlSXNCZWluZ1N1YnNjcmliZWRUbyA9IHRydWU7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmVwZWF0V2hlblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHsKICAgICAgICB0aGlzLnNvdXJjZUlzQmVpbmdTdWJzY3JpYmVkVG8gPSB0cnVlOwogICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzKTsKICAgIH07CiAgICBSZXBlYXRXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXJTdWIpIHsKICAgICAgICBpZiAodGhpcy5zb3VyY2VJc0JlaW5nU3Vic2NyaWJlZFRvID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5jb21wbGV0ZS5jYWxsKHRoaXMpOwogICAgICAgIH0KICAgIH07CiAgICBSZXBlYXRXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zb3VyY2VJc0JlaW5nU3Vic2NyaWJlZFRvID0gZmFsc2U7CiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkgewogICAgICAgICAgICBpZiAoIXRoaXMucmV0cmllcykgewogICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1JldHJpZXMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiB8fCB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24uY2xvc2VkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5jb21wbGV0ZS5jYWxsKHRoaXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSgpOwogICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMubmV4dCgpOwogICAgICAgIH0KICAgIH07CiAgICBSZXBlYXRXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMsIG5vdGlmaWNhdGlvbnMgPSBfYS5ub3RpZmljYXRpb25zLCByZXRyaWVzU3Vic2NyaXB0aW9uID0gX2EucmV0cmllc1N1YnNjcmlwdGlvbjsKICAgICAgICBpZiAobm90aWZpY2F0aW9ucykgewogICAgICAgICAgICBub3RpZmljYXRpb25zLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9ucyA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChyZXRyaWVzU3Vic2NyaXB0aW9uKSB7CiAgICAgICAgICAgIHJldHJpZXNTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgdGhpcy5yZXRyaWVzID0gbnVsbDsKICAgIH07CiAgICBSZXBlYXRXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3Vuc3Vic2NyaWJlID0gdGhpcy5fdW5zdWJzY3JpYmU7CiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUgPSBudWxsOwogICAgICAgIF9zdXBlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZS5jYWxsKHRoaXMpOwogICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlID0gX3Vuc3Vic2NyaWJlOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfTsKICAgIFJlcGVhdFdoZW5TdWJzY3JpYmVyLnByb3RvdHlwZS5zdWJzY3JpYmVUb1JldHJpZXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gbmV3IF9TdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YmplY3QiXSgpOwogICAgICAgIHZhciByZXRyaWVzID0gT2JqZWN0KF91dGlsX3RyeUNhdGNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInRyeUNhdGNoIl0pKHRoaXMubm90aWZpZXIpKHRoaXMubm90aWZpY2F0aW9ucyk7CiAgICAgICAgaWYgKHJldHJpZXMgPT09IF91dGlsX2Vycm9yT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImVycm9yT2JqZWN0Il0pIHsKICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuY29tcGxldGUuY2FsbCh0aGlzKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5yZXRyaWVzID0gcmV0cmllczsKICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkodGhpcywgcmV0cmllcyk7CiAgICB9OwogICAgcmV0dXJuIFJlcGVhdFdoZW5TdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwZWF0V2hlbi5qcy5tYXAKCgovKioqLyB9KSwKLyogMjAwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJyZXRyeSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmV0cnk7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiByZXRyeShjb3VudCkgewogICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHsKICAgICAgICBjb3VudCA9IC0xOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBSZXRyeU9wZXJhdG9yKGNvdW50LCBzb3VyY2UpKTsgfTsKfQp2YXIgUmV0cnlPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFJldHJ5T3BlcmF0b3IoY291bnQsIHNvdXJjZSkgewogICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgIH0KICAgIFJldHJ5T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFJldHJ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNvdW50LCB0aGlzLnNvdXJjZSkpOwogICAgfTsKICAgIHJldHVybiBSZXRyeU9wZXJhdG9yOwp9KCkpOwp2YXIgUmV0cnlTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oUmV0cnlTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUmV0cnlTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb3VudCwgc291cmNlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuY291bnQgPSBjb3VudDsKICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmV0cnlTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7CiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMsIHNvdXJjZSA9IF9hLnNvdXJjZSwgY291bnQgPSBfYS5jb3VudDsKICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsIGVycik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoY291bnQgPiAtMSkgewogICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50IC0gMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHRoaXMuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSgpKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFJldHJ5U3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnkuanMubWFwCgoKLyoqKi8gfSksCi8qIDIwMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAicmV0cnlXaGVuIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZXRyeVdoZW47IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfdHJ5Q2F0Y2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YmplY3QsX3V0aWxfdHJ5Q2F0Y2gsX3V0aWxfZXJyb3JPYmplY3QsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCmZ1bmN0aW9uIHJldHJ5V2hlbihub3RpZmllcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBSZXRyeVdoZW5PcGVyYXRvcihub3RpZmllciwgc291cmNlKSk7IH07Cn0KdmFyIFJldHJ5V2hlbk9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gUmV0cnlXaGVuT3BlcmF0b3Iobm90aWZpZXIsIHNvdXJjZSkgewogICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjsKICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgIH0KICAgIFJldHJ5V2hlbk9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBSZXRyeVdoZW5TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMubm90aWZpZXIsIHRoaXMuc291cmNlKSk7CiAgICB9OwogICAgcmV0dXJuIFJldHJ5V2hlbk9wZXJhdG9yOwp9KCkpOwp2YXIgUmV0cnlXaGVuU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFJldHJ5V2hlblN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBSZXRyeVdoZW5TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBub3RpZmllciwgc291cmNlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMubm90aWZpZXIgPSBub3RpZmllcjsKICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmV0cnlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkgewogICAgICAgICAgICB2YXIgZXJyb3JzID0gdGhpcy5lcnJvcnM7CiAgICAgICAgICAgIHZhciByZXRyaWVzID0gdGhpcy5yZXRyaWVzOwogICAgICAgICAgICB2YXIgcmV0cmllc1N1YnNjcmlwdGlvbiA9IHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbjsKICAgICAgICAgICAgaWYgKCFyZXRyaWVzKSB7CiAgICAgICAgICAgICAgICBlcnJvcnMgPSBuZXcgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3ViamVjdCJdKCk7CiAgICAgICAgICAgICAgICByZXRyaWVzID0gT2JqZWN0KF91dGlsX3RyeUNhdGNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInRyeUNhdGNoIl0pKHRoaXMubm90aWZpZXIpKGVycm9ycyk7CiAgICAgICAgICAgICAgICBpZiAocmV0cmllcyA9PT0gX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siZXJyb3JPYmplY3QiXSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcywgX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1siZXJyb3JPYmplY3QiXS5lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHJpZXNTdWJzY3JpcHRpb24gPSBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkodGhpcywgcmV0cmllcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9ycyA9IG51bGw7CiAgICAgICAgICAgICAgICB0aGlzLnJldHJpZXNTdWJzY3JpcHRpb24gPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSgpOwogICAgICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9yczsKICAgICAgICAgICAgdGhpcy5yZXRyaWVzID0gcmV0cmllczsKICAgICAgICAgICAgdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uID0gcmV0cmllc1N1YnNjcmlwdGlvbjsKICAgICAgICAgICAgZXJyb3JzLm5leHQoZXJyKTsKICAgICAgICB9CiAgICB9OwogICAgUmV0cnlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMsIGVycm9ycyA9IF9hLmVycm9ycywgcmV0cmllc1N1YnNjcmlwdGlvbiA9IF9hLnJldHJpZXNTdWJzY3JpcHRpb247CiAgICAgICAgaWYgKGVycm9ycykgewogICAgICAgICAgICBlcnJvcnMudW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBudWxsOwogICAgICAgIH0KICAgICAgICBpZiAocmV0cmllc1N1YnNjcmlwdGlvbikgewogICAgICAgICAgICByZXRyaWVzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbiA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHRoaXMucmV0cmllcyA9IG51bGw7CiAgICB9OwogICAgUmV0cnlXaGVuU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHZhciBfdW5zdWJzY3JpYmUgPSB0aGlzLl91bnN1YnNjcmliZTsKICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IG51bGw7CiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlKCk7CiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUgPSBfdW5zdWJzY3JpYmU7CiAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHRoaXMpOwogICAgfTsKICAgIHJldHVybiBSZXRyeVdoZW5TdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV0cnlXaGVuLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMDIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInNhbXBsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2FtcGxlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiBzYW1wbGUobm90aWZpZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgU2FtcGxlT3BlcmF0b3Iobm90aWZpZXIpKTsgfTsKfQp2YXIgU2FtcGxlT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBTYW1wbGVPcGVyYXRvcihub3RpZmllcikgewogICAgICAgIHRoaXMubm90aWZpZXIgPSBub3RpZmllcjsKICAgIH0KICAgIFNhbXBsZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHZhciBzYW1wbGVTdWJzY3JpYmVyID0gbmV3IFNhbXBsZVN1YnNjcmliZXIoc3Vic2NyaWJlcik7CiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5zdWJzY3JpYmUoc2FtcGxlU3Vic2NyaWJlcik7CiAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkoc2FtcGxlU3Vic2NyaWJlciwgdGhpcy5ub3RpZmllcikpOwogICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247CiAgICB9OwogICAgcmV0dXJuIFNhbXBsZU9wZXJhdG9yOwp9KCkpOwp2YXIgU2FtcGxlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFNhbXBsZVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTYW1wbGVTdWJzY3JpYmVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhc1ZhbHVlID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU2FtcGxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7CiAgICB9OwogICAgU2FtcGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHRoaXMuZW1pdFZhbHVlKCk7CiAgICB9OwogICAgU2FtcGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5lbWl0VmFsdWUoKTsKICAgIH07CiAgICBTYW1wbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5lbWl0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy52YWx1ZSk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBTYW1wbGVTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInNhbXBsZVRpbWUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHNhbXBsZVRpbWU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX3NjaGVkdWxlcl9hc3luYyBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIHNhbXBsZVRpbWUocGVyaW9kLCBzY2hlZHVsZXIpIHsKICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgewogICAgICAgIHNjaGVkdWxlciA9IF9zY2hlZHVsZXJfYXN5bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siYXN5bmMiXTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgU2FtcGxlVGltZU9wZXJhdG9yKHBlcmlvZCwgc2NoZWR1bGVyKSk7IH07Cn0KdmFyIFNhbXBsZVRpbWVPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFNhbXBsZVRpbWVPcGVyYXRvcihwZXJpb2QsIHNjaGVkdWxlcikgewogICAgICAgIHRoaXMucGVyaW9kID0gcGVyaW9kOwogICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgfQogICAgU2FtcGxlVGltZU9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBTYW1wbGVUaW1lU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnBlcmlvZCwgdGhpcy5zY2hlZHVsZXIpKTsKICAgIH07CiAgICByZXR1cm4gU2FtcGxlVGltZU9wZXJhdG9yOwp9KCkpOwp2YXIgU2FtcGxlVGltZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShTYW1wbGVUaW1lU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNhbXBsZVRpbWVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwZXJpb2QsIHNjaGVkdWxlcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLnBlcmlvZCA9IHBlcmlvZDsKICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgX3RoaXMuaGFzVmFsdWUgPSBmYWxzZTsKICAgICAgICBfdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoTm90aWZpY2F0aW9uLCBwZXJpb2QsIHsgc3Vic2NyaWJlcjogX3RoaXMsIHBlcmlvZDogcGVyaW9kIH0pKTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTYW1wbGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlOwogICAgICAgIHRoaXMuaGFzVmFsdWUgPSB0cnVlOwogICAgfTsKICAgIFNhbXBsZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMubGFzdFZhbHVlKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFNhbXBsZVRpbWVTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwpmdW5jdGlvbiBkaXNwYXRjaE5vdGlmaWNhdGlvbihzdGF0ZSkgewogICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBwZXJpb2QgPSBzdGF0ZS5wZXJpb2Q7CiAgICBzdWJzY3JpYmVyLm5vdGlmeU5leHQoKTsKICAgIHRoaXMuc2NoZWR1bGUoc3RhdGUsIHBlcmlvZCk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FtcGxlVGltZS5qcy5tYXAKCgovKioqLyB9KSwKLyogMjA0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzZXF1ZW5jZUVxdWFsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzZXF1ZW5jZUVxdWFsOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiU2VxdWVuY2VFcXVhbE9wZXJhdG9yIiwgZnVuY3Rpb24oKSB7IHJldHVybiBTZXF1ZW5jZUVxdWFsT3BlcmF0b3I7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJTZXF1ZW5jZUVxdWFsU3Vic2NyaWJlciIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gU2VxdWVuY2VFcXVhbFN1YnNjcmliZXI7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfdHJ5Q2F0Y2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyLF91dGlsX3RyeUNhdGNoLF91dGlsX2Vycm9yT2JqZWN0IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCmZ1bmN0aW9uIHNlcXVlbmNlRXF1YWwoY29tcGFyZVRvLCBjb21wYXJvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBTZXF1ZW5jZUVxdWFsT3BlcmF0b3IoY29tcGFyZVRvLCBjb21wYXJvcikpOyB9Owp9CnZhciBTZXF1ZW5jZUVxdWFsT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBTZXF1ZW5jZUVxdWFsT3BlcmF0b3IoY29tcGFyZVRvLCBjb21wYXJvcikgewogICAgICAgIHRoaXMuY29tcGFyZVRvID0gY29tcGFyZVRvOwogICAgICAgIHRoaXMuY29tcGFyb3IgPSBjb21wYXJvcjsKICAgIH0KICAgIFNlcXVlbmNlRXF1YWxPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgU2VxdWVuY2VFcXVhbFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5jb21wYXJlVG8sIHRoaXMuY29tcGFyb3IpKTsKICAgIH07CiAgICByZXR1cm4gU2VxdWVuY2VFcXVhbE9wZXJhdG9yOwp9KCkpOwoKdmFyIFNlcXVlbmNlRXF1YWxTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oU2VxdWVuY2VFcXVhbFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTZXF1ZW5jZUVxdWFsU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY29tcGFyZVRvLCBjb21wYXJvcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmNvbXBhcmVUbyA9IGNvbXBhcmVUbzsKICAgICAgICBfdGhpcy5jb21wYXJvciA9IGNvbXBhcm9yOwogICAgICAgIF90aGlzLl9hID0gW107CiAgICAgICAgX3RoaXMuX2IgPSBbXTsKICAgICAgICBfdGhpcy5fb25lQ29tcGxldGUgPSBmYWxzZTsKICAgICAgICBfdGhpcy5hZGQoY29tcGFyZVRvLnN1YnNjcmliZShuZXcgU2VxdWVuY2VFcXVhbENvbXBhcmVUb1N1YnNjcmliZXIoZGVzdGluYXRpb24sIF90aGlzKSkpOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFNlcXVlbmNlRXF1YWxTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLl9vbmVDb21wbGV0ZSAmJiB0aGlzLl9iLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmVtaXQoZmFsc2UpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fYS5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcygpOwogICAgICAgIH0KICAgIH07CiAgICBTZXF1ZW5jZUVxdWFsU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLl9vbmVDb21wbGV0ZSkgewogICAgICAgICAgICB0aGlzLmVtaXQodGhpcy5fYS5sZW5ndGggPT09IDAgJiYgdGhpcy5fYi5sZW5ndGggPT09IDApOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fb25lQ29tcGxldGUgPSB0cnVlOwogICAgICAgIH0KICAgIH07CiAgICBTZXF1ZW5jZUVxdWFsU3Vic2NyaWJlci5wcm90b3R5cGUuY2hlY2tWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9jID0gdGhpcywgX2EgPSBfYy5fYSwgX2IgPSBfYy5fYiwgY29tcGFyb3IgPSBfYy5jb21wYXJvcjsKICAgICAgICB3aGlsZSAoX2EubGVuZ3RoID4gMCAmJiBfYi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciBhID0gX2Euc2hpZnQoKTsKICAgICAgICAgICAgdmFyIGIgPSBfYi5zaGlmdCgpOwogICAgICAgICAgICB2YXIgYXJlRXF1YWwgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKGNvbXBhcm9yKSB7CiAgICAgICAgICAgICAgICBhcmVFcXVhbCA9IE9iamVjdChfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJ0cnlDYXRjaCJdKShjb21wYXJvcikoYSwgYik7CiAgICAgICAgICAgICAgICBpZiAoYXJlRXF1YWwgPT09IF91dGlsX2Vycm9yT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImVycm9yT2JqZWN0Il0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKF91dGlsX2Vycm9yT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImVycm9yT2JqZWN0Il0uZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBhcmVFcXVhbCA9IGEgPT09IGI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFhcmVFcXVhbCkgewogICAgICAgICAgICAgICAgdGhpcy5lbWl0KGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBTZXF1ZW5jZUVxdWFsU3Vic2NyaWJlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7CiAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgIH07CiAgICBTZXF1ZW5jZUVxdWFsU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dEIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAodGhpcy5fb25lQ29tcGxldGUgJiYgdGhpcy5fYS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdGhpcy5lbWl0KGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMuX2IucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMoKTsKICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIFNlcXVlbmNlRXF1YWxTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwoKdmFyIFNlcXVlbmNlRXF1YWxDb21wYXJlVG9TdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oU2VxdWVuY2VFcXVhbENvbXBhcmVUb1N1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTZXF1ZW5jZUVxdWFsQ29tcGFyZVRvU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcGFyZW50KSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucGFyZW50ID0gcGFyZW50OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFNlcXVlbmNlRXF1YWxDb21wYXJlVG9TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHRoaXMucGFyZW50Lm5leHRCKHZhbHVlKTsKICAgIH07CiAgICBTZXF1ZW5jZUVxdWFsQ29tcGFyZVRvU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikgewogICAgICAgIHRoaXMucGFyZW50LmVycm9yKGVycik7CiAgICB9OwogICAgU2VxdWVuY2VFcXVhbENvbXBhcmVUb1N1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnBhcmVudC5fY29tcGxldGUoKTsKICAgIH07CiAgICByZXR1cm4gU2VxdWVuY2VFcXVhbENvbXBhcmVUb1N1YnNjcmliZXI7Cn0oX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcXVlbmNlRXF1YWwuanMubWFwCgoKLyoqKi8gfSksCi8qIDIwNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic2hhcmUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHNoYXJlOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tdWx0aWNhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTg3KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZWZDb3VudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX211bHRpY2FzdCxfcmVmQ291bnQsX1N1YmplY3QgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiBzaGFyZVN1YmplY3RGYWN0b3J5KCkgewogICAgcmV0dXJuIG5ldyBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJTdWJqZWN0Il0oKTsKfQpmdW5jdGlvbiBzaGFyZSgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBPYmplY3QoX3JlZkNvdW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInJlZkNvdW50Il0pKCkoT2JqZWN0KF9tdWx0aWNhc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sibXVsdGljYXN0Il0pKHNoYXJlU3ViamVjdEZhY3RvcnkpKHNvdXJjZSkpOyB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXJlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInNoYXJlUmVwbGF5IiwgZnVuY3Rpb24oKSB7IHJldHVybiBzaGFyZVJlcGxheTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfUmVwbGF5U3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX1JlcGxheVN1YmplY3QgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gc2hhcmVSZXBsYXkoYnVmZmVyU2l6ZSwgd2luZG93VGltZSwgc2NoZWR1bGVyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQoc2hhcmVSZXBsYXlPcGVyYXRvcihidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpKTsgfTsKfQpmdW5jdGlvbiBzaGFyZVJlcGxheU9wZXJhdG9yKGJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikgewogICAgdmFyIHN1YmplY3Q7CiAgICB2YXIgcmVmQ291bnQgPSAwOwogICAgdmFyIHN1YnNjcmlwdGlvbjsKICAgIHZhciBoYXNFcnJvciA9IGZhbHNlOwogICAgdmFyIGlzQ29tcGxldGUgPSBmYWxzZTsKICAgIHJldHVybiBmdW5jdGlvbiBzaGFyZVJlcGxheU9wZXJhdGlvbihzb3VyY2UpIHsKICAgICAgICByZWZDb3VudCsrOwogICAgICAgIGlmICghc3ViamVjdCB8fCBoYXNFcnJvcikgewogICAgICAgICAgICBoYXNFcnJvciA9IGZhbHNlOwogICAgICAgICAgICBzdWJqZWN0ID0gbmV3IF9SZXBsYXlTdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIlJlcGxheVN1YmplY3QiXShidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpOwogICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBzb3VyY2Uuc3Vic2NyaWJlKHsKICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyBzdWJqZWN0Lm5leHQodmFsdWUpOyB9LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBoYXNFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5lcnJvcihlcnIpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaXNDb21wbGV0ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHZhciBpbm5lclN1YiA9IHN1YmplY3Quc3Vic2NyaWJlKHRoaXMpOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJlZkNvdW50LS07CiAgICAgICAgICAgIGlubmVyU3ViLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgcmVmQ291bnQgPT09IDAgJiYgaXNDb21wbGV0ZSkgewogICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZVJlcGxheS5qcy5tYXAKCgovKioqLyB9KSwKLyogMjA3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzaW5nbGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHNpbmdsZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9FbXB0eUVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlcixfdXRpbF9FbXB0eUVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKZnVuY3Rpb24gc2luZ2xlKHByZWRpY2F0ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBTaW5nbGVPcGVyYXRvcihwcmVkaWNhdGUsIHNvdXJjZSkpOyB9Owp9CnZhciBTaW5nbGVPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFNpbmdsZU9wZXJhdG9yKHByZWRpY2F0ZSwgc291cmNlKSB7CiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7CiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICB9CiAgICBTaW5nbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgU2luZ2xlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSwgdGhpcy5zb3VyY2UpKTsKICAgIH07CiAgICByZXR1cm4gU2luZ2xlT3BlcmF0b3I7Cn0oKSk7CnZhciBTaW5nbGVTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oU2luZ2xlU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNpbmdsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHByZWRpY2F0ZSwgc291cmNlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJlZGljYXRlID0gcHJlZGljYXRlOwogICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgICBfdGhpcy5zZWVuVmFsdWUgPSBmYWxzZTsKICAgICAgICBfdGhpcy5pbmRleCA9IDA7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU2luZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuYXBwbHlTaW5nbGVWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLnNlZW5WYWx1ZSkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKCdTZXF1ZW5jZSBjb250YWlucyBtb3JlIHRoYW4gb25lIGVsZW1lbnQnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc2VlblZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5zaW5nbGVWYWx1ZSA9IHZhbHVlOwogICAgICAgIH0KICAgIH07CiAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXgrKzsKICAgICAgICBpZiAodGhpcy5wcmVkaWNhdGUpIHsKICAgICAgICAgICAgdGhpcy50cnlOZXh0KHZhbHVlLCBpbmRleCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLmFwcGx5U2luZ2xlVmFsdWUodmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICBTaW5nbGVTdWJzY3JpYmVyLnByb3RvdHlwZS50cnlOZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIHRoaXMuc291cmNlKSkgewogICAgICAgICAgICAgICAgdGhpcy5hcHBseVNpbmdsZVZhbHVlKHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICB9CiAgICB9OwogICAgU2luZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgaWYgKHRoaXMuaW5kZXggPiAwKSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodGhpcy5zZWVuVmFsdWUgPyB0aGlzLnNpbmdsZVZhbHVlIDogdW5kZWZpbmVkKTsKICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKG5ldyBfdXRpbF9FbXB0eUVycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIkVtcHR5RXJyb3IiXSk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBTaW5nbGVTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1zaW5nbGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDIwOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic2tpcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2tpcDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIHNraXAoY291bnQpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgU2tpcE9wZXJhdG9yKGNvdW50KSk7IH07Cn0KdmFyIFNraXBPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFNraXBPcGVyYXRvcih0b3RhbCkgewogICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDsKICAgIH0KICAgIFNraXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgU2tpcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy50b3RhbCkpOwogICAgfTsKICAgIHJldHVybiBTa2lwT3BlcmF0b3I7Cn0oKSk7CnZhciBTa2lwU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFNraXBTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU2tpcFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRvdGFsKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMudG90YWwgPSB0b3RhbDsKICAgICAgICBfdGhpcy5jb3VudCA9IDA7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU2tpcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICBpZiAoKyt0aGlzLmNvdW50ID4gdGhpcy50b3RhbCkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoeCk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBTa2lwU3Vic2NyaWJlcjsKfShfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2tpcC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjA5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJza2lwTGFzdCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2tpcExhc3Q7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyLF91dGlsX0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKZnVuY3Rpb24gc2tpcExhc3QoY291bnQpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgU2tpcExhc3RPcGVyYXRvcihjb3VudCkpOyB9Owp9CnZhciBTa2lwTGFzdE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gU2tpcExhc3RPcGVyYXRvcihfc2tpcENvdW50KSB7CiAgICAgICAgdGhpcy5fc2tpcENvdW50ID0gX3NraXBDb3VudDsKICAgICAgICBpZiAodGhpcy5fc2tpcENvdW50IDwgMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgX3V0aWxfQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IiXTsKICAgICAgICB9CiAgICB9CiAgICBTa2lwTGFzdE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkgewogICAgICAgIGlmICh0aGlzLl9za2lwQ291bnQgPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXShzdWJzY3JpYmVyKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgU2tpcExhc3RTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuX3NraXBDb3VudCkpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gU2tpcExhc3RPcGVyYXRvcjsKfSgpKTsKdmFyIFNraXBMYXN0U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFNraXBMYXN0U3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNraXBMYXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgX3NraXBDb3VudCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLl9za2lwQ291bnQgPSBfc2tpcENvdW50OwogICAgICAgIF90aGlzLl9jb3VudCA9IDA7CiAgICAgICAgX3RoaXMuX3JpbmcgPSBuZXcgQXJyYXkoX3NraXBDb3VudCk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU2tpcExhc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciBza2lwQ291bnQgPSB0aGlzLl9za2lwQ291bnQ7CiAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5fY291bnQrKzsKICAgICAgICBpZiAoY291bnQgPCBza2lwQ291bnQpIHsKICAgICAgICAgICAgdGhpcy5fcmluZ1tjb3VudF0gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBjb3VudCAlIHNraXBDb3VudDsKICAgICAgICAgICAgdmFyIHJpbmcgPSB0aGlzLl9yaW5nOwogICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSByaW5nW2N1cnJlbnRJbmRleF07CiAgICAgICAgICAgIHJpbmdbY3VycmVudEluZGV4XSA9IHZhbHVlOwogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQob2xkVmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gU2tpcExhc3RTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1za2lwTGFzdC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjEwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJza2lwVW50aWwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHNraXBVbnRpbDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfT3V0ZXJTdWJzY3JpYmVyLF91dGlsX3N1YnNjcmliZVRvUmVzdWx0IFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKZnVuY3Rpb24gc2tpcFVudGlsKG5vdGlmaWVyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IFNraXBVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSk7IH07Cn0KdmFyIFNraXBVbnRpbE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gU2tpcFVudGlsT3BlcmF0b3Iobm90aWZpZXIpIHsKICAgICAgICB0aGlzLm5vdGlmaWVyID0gbm90aWZpZXI7CiAgICB9CiAgICBTa2lwVW50aWxPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbiwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBVbnRpbFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHRoaXMubm90aWZpZXIpKTsKICAgIH07CiAgICByZXR1cm4gU2tpcFVudGlsT3BlcmF0b3I7Cn0oKSk7CnZhciBTa2lwVW50aWxTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oU2tpcFVudGlsU3Vic2NyaWJlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNraXBVbnRpbFN1YnNjcmliZXIoZGVzdGluYXRpb24sIG5vdGlmaWVyKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFzVmFsdWUgPSBmYWxzZTsKICAgICAgICBfdGhpcy5hZGQoX3RoaXMuaW5uZXJTdWJzY3JpcHRpb24gPSBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkoX3RoaXMsIG5vdGlmaWVyKSk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU2tpcFVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSkgewogICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgIH0KICAgIH07CiAgICBTa2lwVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7CiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7CiAgICAgICAgaWYgKHRoaXMuaW5uZXJTdWJzY3JpcHRpb24pIHsKICAgICAgICAgICAgdGhpcy5pbm5lclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgIH0KICAgIH07CiAgICBTa2lwVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIH07CiAgICByZXR1cm4gU2tpcFVudGlsU3Vic2NyaWJlcjsKfShfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIk91dGVyU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXNraXBVbnRpbC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjExICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJza2lwV2hpbGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHNraXBXaGlsZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIHNraXBXaGlsZShwcmVkaWNhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgU2tpcFdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSk7IH07Cn0KdmFyIFNraXBXaGlsZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gU2tpcFdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSB7CiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7CiAgICB9CiAgICBTa2lwV2hpbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgU2tpcFdoaWxlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSkpOwogICAgfTsKICAgIHJldHVybiBTa2lwV2hpbGVPcGVyYXRvcjsKfSgpKTsKdmFyIFNraXBXaGlsZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShTa2lwV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU2tpcFdoaWxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJlZGljYXRlID0gcHJlZGljYXRlOwogICAgICAgIF90aGlzLnNraXBwaW5nID0gdHJ1ZTsKICAgICAgICBfdGhpcy5pbmRleCA9IDA7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU2tpcFdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uOwogICAgICAgIGlmICh0aGlzLnNraXBwaW5nKSB7CiAgICAgICAgICAgIHRoaXMudHJ5Q2FsbFByZWRpY2F0ZSh2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGlmICghdGhpcy5za2lwcGluZykgewogICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICB9OwogICAgU2tpcFdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5Q2FsbFByZWRpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrKTsKICAgICAgICAgICAgdGhpcy5za2lwcGluZyA9IEJvb2xlYW4ocmVzdWx0KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBTa2lwV2hpbGVTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1za2lwV2hpbGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDIxMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAic3RhcnRXaXRoIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzdGFydFdpdGg7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9vYnNlcnZhYmxlX3NjYWxhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9lbXB0eV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV9jb25jYXRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV9mcm9tQXJyYXksX29ic2VydmFibGVfc2NhbGFyLF9vYnNlcnZhYmxlX2VtcHR5LF9vYnNlcnZhYmxlX2NvbmNhdCxfdXRpbF9pc1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gc3RhcnRXaXRoKCkgewogICAgdmFyIGFycmF5ID0gW107CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIGFycmF5W19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgewogICAgICAgIHZhciBzY2hlZHVsZXIgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTsKICAgICAgICBpZiAoT2JqZWN0KF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImlzU2NoZWR1bGVyIl0pKHNjaGVkdWxlcikpIHsKICAgICAgICAgICAgYXJyYXkucG9wKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBzY2hlZHVsZXIgPSBudWxsOwogICAgICAgIH0KICAgICAgICB2YXIgbGVuID0gYXJyYXkubGVuZ3RoOwogICAgICAgIGlmIChsZW4gPT09IDEgJiYgIXNjaGVkdWxlcikgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KF9vYnNlcnZhYmxlX2NvbmNhdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJjb25jYXQiXSkoT2JqZWN0KF9vYnNlcnZhYmxlX3NjYWxhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJzY2FsYXIiXSkoYXJyYXlbMF0pLCBzb3VyY2UpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gPiAwKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QoX29ic2VydmFibGVfY29uY2F0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImNvbmNhdCJdKShPYmplY3QoX29ic2VydmFibGVfZnJvbUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImZyb21BcnJheSJdKShhcnJheSwgc2NoZWR1bGVyKSwgc291cmNlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QoX29ic2VydmFibGVfY29uY2F0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImNvbmNhdCJdKShPYmplY3QoX29ic2VydmFibGVfZW1wdHlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZW1wdHkiXSkoc2NoZWR1bGVyKSwgc291cmNlKTsKICAgICAgICB9CiAgICB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXJ0V2l0aC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjEzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzdWJzY3JpYmVPbiIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3Vic2NyaWJlT247IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfU3Vic2NyaWJlT25PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX29ic2VydmFibGVfU3Vic2NyaWJlT25PYnNlcnZhYmxlIFBVUkVfSU1QT1JUU19FTkQgKi8KCmZ1bmN0aW9uIHN1YnNjcmliZU9uKHNjaGVkdWxlciwgZGVsYXkpIHsKICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZGVsYXkgPSAwOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIHN1YnNjcmliZU9uT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IFN1YnNjcmliZU9uT3BlcmF0b3Ioc2NoZWR1bGVyLCBkZWxheSkpOwogICAgfTsKfQp2YXIgU3Vic2NyaWJlT25PcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFN1YnNjcmliZU9uT3BlcmF0b3Ioc2NoZWR1bGVyLCBkZWxheSkgewogICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTsKICAgIH0KICAgIFN1YnNjcmliZU9uT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBfb2JzZXJ2YWJsZV9TdWJzY3JpYmVPbk9ic2VydmFibGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siU3Vic2NyaWJlT25PYnNlcnZhYmxlIl0oc291cmNlLCB0aGlzLmRlbGF5LCB0aGlzLnNjaGVkdWxlcikuc3Vic2NyaWJlKHN1YnNjcmliZXIpOwogICAgfTsKICAgIHJldHVybiBTdWJzY3JpYmVPbk9wZXJhdG9yOwp9KCkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVPbi5qcy5tYXAKCgovKioqLyB9KSwKLyogMjE0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJTdWJzY3JpYmVPbk9ic2VydmFibGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFN1YnNjcmliZU9uT2JzZXJ2YWJsZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT2JzZXJ2YWJsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2NoZWR1bGVyX2FzYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNOdW1lcmljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX09ic2VydmFibGUsX3NjaGVkdWxlcl9hc2FwLF91dGlsX2lzTnVtZXJpYyBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgp2YXIgU3Vic2NyaWJlT25PYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oU3Vic2NyaWJlT25PYnNlcnZhYmxlLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU3Vic2NyaWJlT25PYnNlcnZhYmxlKHNvdXJjZSwgZGVsYXlUaW1lLCBzY2hlZHVsZXIpIHsKICAgICAgICBpZiAoZGVsYXlUaW1lID09PSB2b2lkIDApIHsKICAgICAgICAgICAgZGVsYXlUaW1lID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIHNjaGVkdWxlciA9IF9zY2hlZHVsZXJfYXNhcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJhc2FwIl07CiAgICAgICAgfQogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuc291cmNlID0gc291cmNlOwogICAgICAgIF90aGlzLmRlbGF5VGltZSA9IGRlbGF5VGltZTsKICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgaWYgKCFPYmplY3QoX3V0aWxfaXNOdW1lcmljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImlzTnVtZXJpYyJdKShkZWxheVRpbWUpIHx8IGRlbGF5VGltZSA8IDApIHsKICAgICAgICAgICAgX3RoaXMuZGVsYXlUaW1lID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKCFzY2hlZHVsZXIgfHwgdHlwZW9mIHNjaGVkdWxlci5zY2hlZHVsZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBfc2NoZWR1bGVyX2FzYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siYXNhcCJdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTdWJzY3JpYmVPbk9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHNvdXJjZSwgZGVsYXksIHNjaGVkdWxlcikgewogICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIGRlbGF5ID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKHNjaGVkdWxlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIHNjaGVkdWxlciA9IF9zY2hlZHVsZXJfYXNhcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJhc2FwIl07CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgU3Vic2NyaWJlT25PYnNlcnZhYmxlKHNvdXJjZSwgZGVsYXksIHNjaGVkdWxlcik7CiAgICB9OwogICAgU3Vic2NyaWJlT25PYnNlcnZhYmxlLmRpc3BhdGNoID0gZnVuY3Rpb24gKGFyZykgewogICAgICAgIHZhciBzb3VyY2UgPSBhcmcuc291cmNlLCBzdWJzY3JpYmVyID0gYXJnLnN1YnNjcmliZXI7CiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKHNvdXJjZS5zdWJzY3JpYmUoc3Vic2NyaWJlcikpOwogICAgfTsKICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7CiAgICAgICAgdmFyIGRlbGF5ID0gdGhpcy5kZWxheVRpbWU7CiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlOwogICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjsKICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5kaXNwYXRjaCwgZGVsYXksIHsKICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsIHN1YnNjcmliZXI6IHN1YnNjcmliZXIKICAgICAgICB9KTsKICAgIH07CiAgICByZXR1cm4gU3Vic2NyaWJlT25PYnNlcnZhYmxlOwp9KF9PYnNlcnZhYmxlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIk9ic2VydmFibGUiXSkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaWJlT25PYnNlcnZhYmxlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInN3aXRjaEFsbCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3dpdGNoQWxsOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zd2l0Y2hNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjE2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lkZW50aXR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc3dpdGNoTWFwLF91dGlsX2lkZW50aXR5IFBVUkVfSU1QT1JUU19FTkQgKi8KCgpmdW5jdGlvbiBzd2l0Y2hBbGwoKSB7CiAgICByZXR1cm4gT2JqZWN0KF9zd2l0Y2hNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic3dpdGNoTWFwIl0pKF91dGlsX2lkZW50aXR5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImlkZW50aXR5Il0pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaEFsbC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjE2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzd2l0Y2hNYXAiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHN3aXRjaE1hcDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQsX21hcCxfb2JzZXJ2YWJsZV9mcm9tIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCgpmdW5jdGlvbiBzd2l0Y2hNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IpIHsKICAgIGlmICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLnBpcGUoc3dpdGNoTWFwKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBPYmplY3QoX29ic2VydmFibGVfZnJvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJmcm9tIl0pKHByb2plY3QoYSwgaSkpLnBpcGUoT2JqZWN0KF9tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sibWFwIl0pKGZ1bmN0aW9uIChiLCBpaSkgeyByZXR1cm4gcmVzdWx0U2VsZWN0b3IoYSwgYiwgaSwgaWkpOyB9KSk7IH0pKTsgfTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgU3dpdGNoTWFwT3BlcmF0b3IocHJvamVjdCkpOyB9Owp9CnZhciBTd2l0Y2hNYXBPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFN3aXRjaE1hcE9wZXJhdG9yKHByb2plY3QpIHsKICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0OwogICAgfQogICAgU3dpdGNoTWFwT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFN3aXRjaE1hcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5wcm9qZWN0KSk7CiAgICB9OwogICAgcmV0dXJuIFN3aXRjaE1hcE9wZXJhdG9yOwp9KCkpOwp2YXIgU3dpdGNoTWFwU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFN3aXRjaE1hcFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTd2l0Y2hNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0KSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJvamVjdCA9IHByb2plY3Q7CiAgICAgICAgX3RoaXMuaW5kZXggPSAwOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4Kys7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnJvcikgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLl9pbm5lclN1YihyZXN1bHQsIHZhbHVlLCBpbmRleCk7CiAgICB9OwogICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKHJlc3VsdCwgdmFsdWUsIGluZGV4KSB7CiAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gdGhpcy5pbm5lclN1YnNjcmlwdGlvbjsKICAgICAgICBpZiAoaW5uZXJTdWJzY3JpcHRpb24pIHsKICAgICAgICAgICAgaW5uZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5hZGQodGhpcy5pbm5lclN1YnNjcmlwdGlvbiA9IE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKSh0aGlzLCByZXN1bHQsIHZhbHVlLCBpbmRleCkpOwogICAgfTsKICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSB0aGlzLmlubmVyU3Vic2NyaXB0aW9uOwogICAgICAgIGlmICghaW5uZXJTdWJzY3JpcHRpb24gfHwgaW5uZXJTdWJzY3JpcHRpb24uY2xvc2VkKSB7CiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk7CiAgICAgICAgfQogICAgfTsKICAgIFN3aXRjaE1hcFN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDsKICAgIH07CiAgICBTd2l0Y2hNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTsKICAgICAgICB0aGlzLmlubmVyU3Vic2NyaXB0aW9uID0gbnVsbDsKICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsKICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTsKICAgICAgICB9CiAgICB9OwogICAgU3dpdGNoTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTsKICAgIH07CiAgICByZXR1cm4gU3dpdGNoTWFwU3Vic2NyaWJlcjsKfShfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIk91dGVyU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXN3aXRjaE1hcC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjE3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJzd2l0Y2hNYXBUbyIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3dpdGNoTWFwVG87IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N3aXRjaE1hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTYpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9zd2l0Y2hNYXAgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gc3dpdGNoTWFwVG8oaW5uZXJPYnNlcnZhYmxlLCByZXN1bHRTZWxlY3RvcikgewogICAgcmV0dXJuIHJlc3VsdFNlbGVjdG9yID8gT2JqZWN0KF9zd2l0Y2hNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic3dpdGNoTWFwIl0pKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlubmVyT2JzZXJ2YWJsZTsgfSwgcmVzdWx0U2VsZWN0b3IpIDogT2JqZWN0KF9zd2l0Y2hNYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1sic3dpdGNoTWFwIl0pKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGlubmVyT2JzZXJ2YWJsZTsgfSk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3dpdGNoTWFwVG8uanMubWFwCgoKLyoqKi8gfSksCi8qIDIxOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAidGFrZVVudGlsIiwgZnVuY3Rpb24oKSB7IHJldHVybiB0YWtlVW50aWw7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCmZ1bmN0aW9uIHRha2VVbnRpbChub3RpZmllcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBUYWtlVW50aWxPcGVyYXRvcihub3RpZmllcikpOyB9Owp9CnZhciBUYWtlVW50aWxPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFRha2VVbnRpbE9wZXJhdG9yKG5vdGlmaWVyKSB7CiAgICAgICAgdGhpcy5ub3RpZmllciA9IG5vdGlmaWVyOwogICAgfQogICAgVGFrZVVudGlsT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgdmFyIHRha2VVbnRpbFN1YnNjcmliZXIgPSBuZXcgVGFrZVVudGlsU3Vic2NyaWJlcihzdWJzY3JpYmVyKTsKICAgICAgICB2YXIgbm90aWZpZXJTdWJzY3JpcHRpb24gPSBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkodGFrZVVudGlsU3Vic2NyaWJlciwgdGhpcy5ub3RpZmllcik7CiAgICAgICAgaWYgKG5vdGlmaWVyU3Vic2NyaXB0aW9uICYmICFub3RpZmllclN1YnNjcmlwdGlvbi5jbG9zZWQpIHsKICAgICAgICAgICAgdGFrZVVudGlsU3Vic2NyaWJlci5hZGQobm90aWZpZXJTdWJzY3JpcHRpb24pOwogICAgICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZSh0YWtlVW50aWxTdWJzY3JpYmVyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRha2VVbnRpbFN1YnNjcmliZXI7CiAgICB9OwogICAgcmV0dXJuIFRha2VVbnRpbE9wZXJhdG9yOwp9KCkpOwp2YXIgVGFrZVVudGlsU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFRha2VVbnRpbFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBUYWtlVW50aWxTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7CiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgfQogICAgVGFrZVVudGlsU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHRoaXMuY29tcGxldGUoKTsKICAgIH07CiAgICBUYWtlVW50aWxTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIH07CiAgICByZXR1cm4gVGFrZVVudGlsU3Vic2NyaWJlcjsKfShfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIk91dGVyU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2VVbnRpbC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjE5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0YWtlV2hpbGUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRha2VXaGlsZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIHRha2VXaGlsZShwcmVkaWNhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgVGFrZVdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSk7IH07Cn0KdmFyIFRha2VXaGlsZU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gVGFrZVdoaWxlT3BlcmF0b3IocHJlZGljYXRlKSB7CiAgICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7CiAgICB9CiAgICBUYWtlV2hpbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVGFrZVdoaWxlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByZWRpY2F0ZSkpOwogICAgfTsKICAgIHJldHVybiBUYWtlV2hpbGVPcGVyYXRvcjsKfSgpKTsKdmFyIFRha2VXaGlsZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShUYWtlV2hpbGVTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVGFrZVdoaWxlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcHJlZGljYXRlKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJlZGljYXRlID0gcHJlZGljYXRlOwogICAgICAgIF90aGlzLmluZGV4ID0gMDsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBUYWtlV2hpbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByZWRpY2F0ZSh2YWx1ZSwgdGhpcy5pbmRleCsrKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICBkZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMubmV4dE9yQ29tcGxldGUodmFsdWUsIHJlc3VsdCk7CiAgICB9OwogICAgVGFrZVdoaWxlU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dE9yQ29tcGxldGUgPSBmdW5jdGlvbiAodmFsdWUsIHByZWRpY2F0ZVJlc3VsdCkgewogICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247CiAgICAgICAgaWYgKEJvb2xlYW4ocHJlZGljYXRlUmVzdWx0KSkgewogICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBUYWtlV2hpbGVTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD10YWtlV2hpbGUuanMubWFwCgoKLyoqKi8gfSksCi8qIDIyMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiZGVmYXVsdFRocm90dGxlQ29uZmlnIiwgZnVuY3Rpb24oKSB7IHJldHVybiBkZWZhdWx0VGhyb3R0bGVDb25maWc7IH0pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0aHJvdHRsZSIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhyb3R0bGU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCnZhciBkZWZhdWx0VGhyb3R0bGVDb25maWcgPSB7CiAgICBsZWFkaW5nOiB0cnVlLAogICAgdHJhaWxpbmc6IGZhbHNlCn07CmZ1bmN0aW9uIHRocm90dGxlKGR1cmF0aW9uU2VsZWN0b3IsIGNvbmZpZykgewogICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7CiAgICAgICAgY29uZmlnID0gZGVmYXVsdFRocm90dGxlQ29uZmlnOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBUaHJvdHRsZU9wZXJhdG9yKGR1cmF0aW9uU2VsZWN0b3IsIGNvbmZpZy5sZWFkaW5nLCBjb25maWcudHJhaWxpbmcpKTsgfTsKfQp2YXIgVGhyb3R0bGVPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFRocm90dGxlT3BlcmF0b3IoZHVyYXRpb25TZWxlY3RvciwgbGVhZGluZywgdHJhaWxpbmcpIHsKICAgICAgICB0aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yOwogICAgICAgIHRoaXMubGVhZGluZyA9IGxlYWRpbmc7CiAgICAgICAgdGhpcy50cmFpbGluZyA9IHRyYWlsaW5nOwogICAgfQogICAgVGhyb3R0bGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVGhyb3R0bGVTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuZHVyYXRpb25TZWxlY3RvciwgdGhpcy5sZWFkaW5nLCB0aGlzLnRyYWlsaW5nKSk7CiAgICB9OwogICAgcmV0dXJuIFRocm90dGxlT3BlcmF0b3I7Cn0oKSk7CnZhciBUaHJvdHRsZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShUaHJvdHRsZVN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBUaHJvdHRsZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGR1cmF0aW9uU2VsZWN0b3IsIF9sZWFkaW5nLCBfdHJhaWxpbmcpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uOwogICAgICAgIF90aGlzLmR1cmF0aW9uU2VsZWN0b3IgPSBkdXJhdGlvblNlbGVjdG9yOwogICAgICAgIF90aGlzLl9sZWFkaW5nID0gX2xlYWRpbmc7CiAgICAgICAgX3RoaXMuX3RyYWlsaW5nID0gX3RyYWlsaW5nOwogICAgICAgIF90aGlzLl9oYXNWYWx1ZSA9IGZhbHNlOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLl9oYXNWYWx1ZSA9IHRydWU7CiAgICAgICAgdGhpcy5fc2VuZFZhbHVlID0gdmFsdWU7CiAgICAgICAgaWYgKCF0aGlzLl90aHJvdHRsZWQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuX2xlYWRpbmcpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2VuZCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy50aHJvdHRsZSh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMsIF9oYXNWYWx1ZSA9IF9hLl9oYXNWYWx1ZSwgX3NlbmRWYWx1ZSA9IF9hLl9zZW5kVmFsdWU7CiAgICAgICAgaWYgKF9oYXNWYWx1ZSkgewogICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoX3NlbmRWYWx1ZSk7CiAgICAgICAgICAgIHRoaXMudGhyb3R0bGUoX3NlbmRWYWx1ZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuX2hhc1ZhbHVlID0gZmFsc2U7CiAgICAgICAgdGhpcy5fc2VuZFZhbHVlID0gbnVsbDsKICAgIH07CiAgICBUaHJvdHRsZVN1YnNjcmliZXIucHJvdG90eXBlLnRocm90dGxlID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIGR1cmF0aW9uID0gdGhpcy50cnlEdXJhdGlvblNlbGVjdG9yKHZhbHVlKTsKICAgICAgICBpZiAoZHVyYXRpb24pIHsKICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5fdGhyb3R0bGVkID0gT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHRoaXMsIGR1cmF0aW9uKSk7CiAgICAgICAgfQogICAgfTsKICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUudHJ5RHVyYXRpb25TZWxlY3RvciA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmR1cmF0aW9uU2VsZWN0b3IodmFsdWUpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfTsKICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUudGhyb3R0bGluZ0RvbmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9hID0gdGhpcywgX3Rocm90dGxlZCA9IF9hLl90aHJvdHRsZWQsIF90cmFpbGluZyA9IF9hLl90cmFpbGluZzsKICAgICAgICBpZiAoX3Rocm90dGxlZCkgewogICAgICAgICAgICBfdGhyb3R0bGVkLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuX3Rocm90dGxlZCA9IG51bGw7CiAgICAgICAgaWYgKF90cmFpbGluZykgewogICAgICAgICAgICB0aGlzLnNlbmQoKTsKICAgICAgICB9CiAgICB9OwogICAgVGhyb3R0bGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7CiAgICAgICAgdGhpcy50aHJvdHRsaW5nRG9uZSgpOwogICAgfTsKICAgIFRocm90dGxlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy50aHJvdHRsaW5nRG9uZSgpOwogICAgfTsKICAgIHJldHVybiBUaHJvdHRsZVN1YnNjcmliZXI7Cn0oX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJPdXRlclN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD10aHJvdHRsZS5qcy5tYXAKCgovKioqLyB9KSwKLyogMjIxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ0aHJvdHRsZVRpbWUiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRocm90dGxlVGltZTsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2NoZWR1bGVyX2FzeW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90aHJvdHRsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMjApOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyLF9zY2hlZHVsZXJfYXN5bmMsX3Rocm90dGxlIFBVUkVfSU1QT1JUU19FTkQgKi8KCgoKCmZ1bmN0aW9uIHRocm90dGxlVGltZShkdXJhdGlvbiwgc2NoZWR1bGVyLCBjb25maWcpIHsKICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgewogICAgICAgIHNjaGVkdWxlciA9IF9zY2hlZHVsZXJfYXN5bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siYXN5bmMiXTsKICAgIH0KICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgewogICAgICAgIGNvbmZpZyA9IF90aHJvdHRsZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJkZWZhdWx0VGhyb3R0bGVDb25maWciXTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgVGhyb3R0bGVUaW1lT3BlcmF0b3IoZHVyYXRpb24sIHNjaGVkdWxlciwgY29uZmlnLmxlYWRpbmcsIGNvbmZpZy50cmFpbGluZykpOyB9Owp9CnZhciBUaHJvdHRsZVRpbWVPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFRocm90dGxlVGltZU9wZXJhdG9yKGR1cmF0aW9uLCBzY2hlZHVsZXIsIGxlYWRpbmcsIHRyYWlsaW5nKSB7CiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uOwogICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgICAgIHRoaXMubGVhZGluZyA9IGxlYWRpbmc7CiAgICAgICAgdGhpcy50cmFpbGluZyA9IHRyYWlsaW5nOwogICAgfQogICAgVGhyb3R0bGVUaW1lT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFRocm90dGxlVGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5kdXJhdGlvbiwgdGhpcy5zY2hlZHVsZXIsIHRoaXMubGVhZGluZywgdGhpcy50cmFpbGluZykpOwogICAgfTsKICAgIHJldHVybiBUaHJvdHRsZVRpbWVPcGVyYXRvcjsKfSgpKTsKdmFyIFRocm90dGxlVGltZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShUaHJvdHRsZVRpbWVTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVGhyb3R0bGVUaW1lU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgZHVyYXRpb24sIHNjaGVkdWxlciwgbGVhZGluZywgdHJhaWxpbmcpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uOwogICAgICAgIF90aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjsKICAgICAgICBfdGhpcy5sZWFkaW5nID0gbGVhZGluZzsKICAgICAgICBfdGhpcy50cmFpbGluZyA9IHRyYWlsaW5nOwogICAgICAgIF90aGlzLl9oYXNUcmFpbGluZ1ZhbHVlID0gZmFsc2U7CiAgICAgICAgX3RoaXMuX3RyYWlsaW5nVmFsdWUgPSBudWxsOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFRocm90dGxlVGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKHRoaXMudGhyb3R0bGVkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnRyYWlsaW5nKSB7CiAgICAgICAgICAgICAgICB0aGlzLl90cmFpbGluZ1ZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgICAgICB0aGlzLl9oYXNUcmFpbGluZ1ZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5hZGQodGhpcy50aHJvdHRsZWQgPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaE5leHQsIHRoaXMuZHVyYXRpb24sIHsgc3Vic2NyaWJlcjogdGhpcyB9KSk7CiAgICAgICAgICAgIGlmICh0aGlzLmxlYWRpbmcpIHsKICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgVGhyb3R0bGVUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLl9oYXNUcmFpbGluZ1ZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLl90cmFpbGluZ1ZhbHVlKTsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgIH07CiAgICBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbGVhclRocm90dGxlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0aHJvdHRsZWQgPSB0aGlzLnRocm90dGxlZDsKICAgICAgICBpZiAodGhyb3R0bGVkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnRyYWlsaW5nICYmIHRoaXMuX2hhc1RyYWlsaW5nVmFsdWUpIHsKICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLl90cmFpbGluZ1ZhbHVlKTsKICAgICAgICAgICAgICAgIHRoaXMuX3RyYWlsaW5nVmFsdWUgPSBudWxsOwogICAgICAgICAgICAgICAgdGhpcy5faGFzVHJhaWxpbmdWYWx1ZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm90dGxlZC51bnN1YnNjcmliZSgpOwogICAgICAgICAgICB0aGlzLnJlbW92ZSh0aHJvdHRsZWQpOwogICAgICAgICAgICB0aGlzLnRocm90dGxlZCA9IG51bGw7CiAgICAgICAgfQogICAgfTsKICAgIHJldHVybiBUaHJvdHRsZVRpbWVTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwpmdW5jdGlvbiBkaXNwYXRjaE5leHQoYXJnKSB7CiAgICB2YXIgc3Vic2NyaWJlciA9IGFyZy5zdWJzY3JpYmVyOwogICAgc3Vic2NyaWJlci5jbGVhclRocm90dGxlKCk7Cn0KLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGVUaW1lLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRpbWVJbnRlcnZhbCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGltZUludGVydmFsOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiVGltZUludGVydmFsIiwgZnVuY3Rpb24oKSB7IHJldHVybiBUaW1lSW50ZXJ2YWw7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2Nhbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODIpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX29ic2VydmFibGVfZGVmZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tYXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9zY2hlZHVsZXJfYXN5bmMsX3NjYW4sX29ic2VydmFibGVfZGVmZXIsX21hcCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgpmdW5jdGlvbiB0aW1lSW50ZXJ2YWwoc2NoZWR1bGVyKSB7CiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsKICAgICAgICBzY2hlZHVsZXIgPSBfc2NoZWR1bGVyX2FzeW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImFzeW5jIl07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgewogICAgICAgIHJldHVybiBPYmplY3QoX29ic2VydmFibGVfZGVmZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siZGVmZXIiXSkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gc291cmNlLnBpcGUoT2JqZWN0KF9zY2FuX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bInNjYW4iXSkoZnVuY3Rpb24gKF9hLCB2YWx1ZSkgewogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBfYS5jdXJyZW50OwogICAgICAgICAgICAgICAgcmV0dXJuICh7IHZhbHVlOiB2YWx1ZSwgY3VycmVudDogc2NoZWR1bGVyLm5vdygpLCBsYXN0OiBjdXJyZW50IH0pOwogICAgICAgICAgICB9LCB7IGN1cnJlbnQ6IHNjaGVkdWxlci5ub3coKSwgdmFsdWU6IHVuZGVmaW5lZCwgbGFzdDogdW5kZWZpbmVkIH0pLCBPYmplY3QoX21hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fWyJtYXAiXSkoZnVuY3Rpb24gKF9hKSB7CiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IF9hLmN1cnJlbnQsIGxhc3QgPSBfYS5sYXN0LCB2YWx1ZSA9IF9hLnZhbHVlOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lSW50ZXJ2YWwodmFsdWUsIGN1cnJlbnQgLSBsYXN0KTsKICAgICAgICAgICAgfSkpOwogICAgICAgIH0pOwogICAgfTsKfQp2YXIgVGltZUludGVydmFsID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gVGltZUludGVydmFsKHZhbHVlLCBpbnRlcnZhbCkgewogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgICB0aGlzLmludGVydmFsID0gaW50ZXJ2YWw7CiAgICB9CiAgICByZXR1cm4gVGltZUludGVydmFsOwp9KCkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZUludGVydmFsLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMjMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRpbWVvdXQiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRpbWVvdXQ7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9UaW1lb3V0RXJyb3JfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RpbWVvdXRXaXRoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV90aHJvd0Vycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc2NoZWR1bGVyX2FzeW5jLF91dGlsX1RpbWVvdXRFcnJvcixfdGltZW91dFdpdGgsX29ic2VydmFibGVfdGhyb3dFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgpmdW5jdGlvbiB0aW1lb3V0KGR1ZSwgc2NoZWR1bGVyKSB7CiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsKICAgICAgICBzY2hlZHVsZXIgPSBfc2NoZWR1bGVyX2FzeW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bImFzeW5jIl07CiAgICB9CiAgICByZXR1cm4gT2JqZWN0KF90aW1lb3V0V2l0aF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJ0aW1lb3V0V2l0aCJdKShkdWUsIE9iamVjdChfb2JzZXJ2YWJsZV90aHJvd0Vycm9yX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bInRocm93RXJyb3IiXSkobmV3IF91dGlsX1RpbWVvdXRFcnJvcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJUaW1lb3V0RXJyb3IiXSgpKSwgc2NoZWR1bGVyKTsKfQovLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0LmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMjQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRpbWVvdXRXaXRoIiwgZnVuY3Rpb24oKSB7IHJldHVybiB0aW1lb3V0V2l0aDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2NoZWR1bGVyX2FzeW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX2lzRGF0ZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTQpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3NjaGVkdWxlcl9hc3luYyxfdXRpbF9pc0RhdGUsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKZnVuY3Rpb24gdGltZW91dFdpdGgoZHVlLCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSB7CiAgICBpZiAoc2NoZWR1bGVyID09PSB2b2lkIDApIHsKICAgICAgICBzY2hlZHVsZXIgPSBfc2NoZWR1bGVyX2FzeW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bImFzeW5jIl07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgewogICAgICAgIHZhciBhYnNvbHV0ZVRpbWVvdXQgPSBPYmplY3QoX3V0aWxfaXNEYXRlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bImlzRGF0ZSJdKShkdWUpOwogICAgICAgIHZhciB3YWl0Rm9yID0gYWJzb2x1dGVUaW1lb3V0ID8gKCtkdWUgLSBzY2hlZHVsZXIubm93KCkpIDogTWF0aC5hYnMoZHVlKTsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQobmV3IFRpbWVvdXRXaXRoT3BlcmF0b3Iod2FpdEZvciwgYWJzb2x1dGVUaW1lb3V0LCB3aXRoT2JzZXJ2YWJsZSwgc2NoZWR1bGVyKSk7CiAgICB9Owp9CnZhciBUaW1lb3V0V2l0aE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gVGltZW91dFdpdGhPcGVyYXRvcih3YWl0Rm9yLCBhYnNvbHV0ZVRpbWVvdXQsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHsKICAgICAgICB0aGlzLndhaXRGb3IgPSB3YWl0Rm9yOwogICAgICAgIHRoaXMuYWJzb2x1dGVUaW1lb3V0ID0gYWJzb2x1dGVUaW1lb3V0OwogICAgICAgIHRoaXMud2l0aE9ic2VydmFibGUgPSB3aXRoT2JzZXJ2YWJsZTsKICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjsKICAgIH0KICAgIFRpbWVvdXRXaXRoT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFRpbWVvdXRXaXRoU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmFic29sdXRlVGltZW91dCwgdGhpcy53YWl0Rm9yLCB0aGlzLndpdGhPYnNlcnZhYmxlLCB0aGlzLnNjaGVkdWxlcikpOwogICAgfTsKICAgIHJldHVybiBUaW1lb3V0V2l0aE9wZXJhdG9yOwp9KCkpOwp2YXIgVGltZW91dFdpdGhTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oVGltZW91dFdpdGhTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVGltZW91dFdpdGhTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBhYnNvbHV0ZVRpbWVvdXQsIHdhaXRGb3IsIHdpdGhPYnNlcnZhYmxlLCBzY2hlZHVsZXIpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5hYnNvbHV0ZVRpbWVvdXQgPSBhYnNvbHV0ZVRpbWVvdXQ7CiAgICAgICAgX3RoaXMud2FpdEZvciA9IHdhaXRGb3I7CiAgICAgICAgX3RoaXMud2l0aE9ic2VydmFibGUgPSB3aXRoT2JzZXJ2YWJsZTsKICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7CiAgICAgICAgX3RoaXMuYWN0aW9uID0gbnVsbDsKICAgICAgICBfdGhpcy5zY2hlZHVsZVRpbWVvdXQoKTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIuZGlzcGF0Y2hUaW1lb3V0ID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICB2YXIgd2l0aE9ic2VydmFibGUgPSBzdWJzY3JpYmVyLndpdGhPYnNlcnZhYmxlOwogICAgICAgIHN1YnNjcmliZXIuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSgpOwogICAgICAgIHN1YnNjcmliZXIuYWRkKE9iamVjdChfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fWyJzdWJzY3JpYmVUb1Jlc3VsdCJdKShzdWJzY3JpYmVyLCB3aXRoT2JzZXJ2YWJsZSkpOwogICAgfTsKICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuc2NoZWR1bGVUaW1lb3V0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBhY3Rpb24gPSB0aGlzLmFjdGlvbjsKICAgICAgICBpZiAoYWN0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uLnNjaGVkdWxlKHRoaXMsIHRoaXMud2FpdEZvcik7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aGlzLmFkZCh0aGlzLmFjdGlvbiA9IHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKFRpbWVvdXRXaXRoU3Vic2NyaWJlci5kaXNwYXRjaFRpbWVvdXQsIHRoaXMud2FpdEZvciwgdGhpcykpOwogICAgICAgIH0KICAgIH07CiAgICBUaW1lb3V0V2l0aFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKCF0aGlzLmFic29sdXRlVGltZW91dCkgewogICAgICAgICAgICB0aGlzLnNjaGVkdWxlVGltZW91dCgpOwogICAgICAgIH0KICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9uZXh0LmNhbGwodGhpcywgdmFsdWUpOwogICAgfTsKICAgIFRpbWVvdXRXaXRoU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuYWN0aW9uID0gbnVsbDsKICAgICAgICB0aGlzLnNjaGVkdWxlciA9IG51bGw7CiAgICAgICAgdGhpcy53aXRoT2JzZXJ2YWJsZSA9IG51bGw7CiAgICB9OwogICAgcmV0dXJuIFRpbWVvdXRXaXRoU3Vic2NyaWJlcjsKfShfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIk91dGVyU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVvdXRXaXRoLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRpbWVzdGFtcCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGltZXN0YW1wOyB9KTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAiVGltZXN0YW1wIiwgZnVuY3Rpb24oKSB7IHJldHVybiBUaW1lc3RhbXA7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc2NoZWR1bGVyX2FzeW5jLF9tYXAgUFVSRV9JTVBPUlRTX0VORCAqLwoKCmZ1bmN0aW9uIHRpbWVzdGFtcChzY2hlZHVsZXIpIHsKICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkgewogICAgICAgIHNjaGVkdWxlciA9IF9zY2hlZHVsZXJfYXN5bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siYXN5bmMiXTsKICAgIH0KICAgIHJldHVybiBPYmplY3QoX21hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJtYXAiXSkoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBuZXcgVGltZXN0YW1wKHZhbHVlLCBzY2hlZHVsZXIubm93KCkpOyB9KTsKfQp2YXIgVGltZXN0YW1wID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gVGltZXN0YW1wKHZhbHVlLCB0aW1lc3RhbXApIHsKICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CiAgICB9CiAgICByZXR1cm4gVGltZXN0YW1wOwp9KCkpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZXN0YW1wLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMjYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgInRvQXJyYXkiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRvQXJyYXk7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlZHVjZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODEpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9yZWR1Y2UgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gdG9BcnJheVJlZHVjZXIoYXJyLCBpdGVtLCBpbmRleCkgewogICAgaWYgKGluZGV4ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFtpdGVtXTsKICAgIH0KICAgIGFyci5wdXNoKGl0ZW0pOwogICAgcmV0dXJuIGFycjsKfQpmdW5jdGlvbiB0b0FycmF5KCkgewogICAgcmV0dXJuIE9iamVjdChfcmVkdWNlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInJlZHVjZSJdKSh0b0FycmF5UmVkdWNlciwgW10pOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvQXJyYXkuanMubWFwCgoKLyoqKi8gfSksCi8qIDIyNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2luZG93IiwgZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3c7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YmplY3QsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgpmdW5jdGlvbiB3aW5kb3cod2luZG93Qm91bmRhcmllcykgewogICAgcmV0dXJuIGZ1bmN0aW9uIHdpbmRvd09wZXJhdG9yRnVuY3Rpb24oc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBXaW5kb3dPcGVyYXRvcih3aW5kb3dCb3VuZGFyaWVzKSk7CiAgICB9Owp9CnZhciBXaW5kb3dPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFdpbmRvd09wZXJhdG9yKHdpbmRvd0JvdW5kYXJpZXMpIHsKICAgICAgICB0aGlzLndpbmRvd0JvdW5kYXJpZXMgPSB3aW5kb3dCb3VuZGFyaWVzOwogICAgfQogICAgV2luZG93T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7CiAgICAgICAgdmFyIHdpbmRvd1N1YnNjcmliZXIgPSBuZXcgV2luZG93U3Vic2NyaWJlcihzdWJzY3JpYmVyKTsKICAgICAgICB2YXIgc291cmNlU3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZSh3aW5kb3dTdWJzY3JpYmVyKTsKICAgICAgICBpZiAoIXNvdXJjZVN1YnNjcmlwdGlvbi5jbG9zZWQpIHsKICAgICAgICAgICAgd2luZG93U3Vic2NyaWJlci5hZGQoT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHdpbmRvd1N1YnNjcmliZXIsIHRoaXMud2luZG93Qm91bmRhcmllcykpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc291cmNlU3Vic2NyaXB0aW9uOwogICAgfTsKICAgIHJldHVybiBXaW5kb3dPcGVyYXRvcjsKfSgpKTsKdmFyIFdpbmRvd1N1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShXaW5kb3dTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gV2luZG93U3Vic2NyaWJlcihkZXN0aW5hdGlvbikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLndpbmRvdyA9IG5ldyBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJqZWN0Il0oKTsKICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KF90aGlzLndpbmRvdyk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1YikgewogICAgICAgIHRoaXMub3BlbldpbmRvdygpOwogICAgfTsKICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1YikgewogICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTsKICAgIH07CiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7CiAgICB9OwogICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTsKICAgIH07CiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICB9OwogICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMud2luZG93LmNvbXBsZXRlKCk7CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpOwogICAgfTsKICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLndpbmRvdyA9IG51bGw7CiAgICB9OwogICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUub3BlbldpbmRvdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcHJldldpbmRvdyA9IHRoaXMud2luZG93OwogICAgICAgIGlmIChwcmV2V2luZG93KSB7CiAgICAgICAgICAgIHByZXZXaW5kb3cuY29tcGxldGUoKTsKICAgICAgICB9CiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjsKICAgICAgICB2YXIgbmV3V2luZG93ID0gdGhpcy53aW5kb3cgPSBuZXcgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3ViamVjdCJdKCk7CiAgICAgICAgZGVzdGluYXRpb24ubmV4dChuZXdXaW5kb3cpOwogICAgfTsKICAgIHJldHVybiBXaW5kb3dTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93LmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMjggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIndpbmRvd0NvdW50IiwgZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3dDb3VudDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX1N1YmplY3QgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiB3aW5kb3dDb3VudCh3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSB7CiAgICBpZiAoc3RhcnRXaW5kb3dFdmVyeSA9PT0gdm9pZCAwKSB7CiAgICAgICAgc3RhcnRXaW5kb3dFdmVyeSA9IDA7CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gd2luZG93Q291bnRPcGVyYXRvckZ1bmN0aW9uKHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgV2luZG93Q291bnRPcGVyYXRvcih3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSk7CiAgICB9Owp9CnZhciBXaW5kb3dDb3VudE9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gV2luZG93Q291bnRPcGVyYXRvcih3aW5kb3dTaXplLCBzdGFydFdpbmRvd0V2ZXJ5KSB7CiAgICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZTsKICAgICAgICB0aGlzLnN0YXJ0V2luZG93RXZlcnkgPSBzdGFydFdpbmRvd0V2ZXJ5OwogICAgfQogICAgV2luZG93Q291bnRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgV2luZG93Q291bnRTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMud2luZG93U2l6ZSwgdGhpcy5zdGFydFdpbmRvd0V2ZXJ5KSk7CiAgICB9OwogICAgcmV0dXJuIFdpbmRvd0NvdW50T3BlcmF0b3I7Cn0oKSk7CnZhciBXaW5kb3dDb3VudFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShXaW5kb3dDb3VudFN1YnNjcmliZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBXaW5kb3dDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIHdpbmRvd1NpemUsIHN0YXJ0V2luZG93RXZlcnkpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uOwogICAgICAgIF90aGlzLndpbmRvd1NpemUgPSB3aW5kb3dTaXplOwogICAgICAgIF90aGlzLnN0YXJ0V2luZG93RXZlcnkgPSBzdGFydFdpbmRvd0V2ZXJ5OwogICAgICAgIF90aGlzLndpbmRvd3MgPSBbbmV3IF9TdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bIlN1YmplY3QiXSgpXTsKICAgICAgICBfdGhpcy5jb3VudCA9IDA7CiAgICAgICAgZGVzdGluYXRpb24ubmV4dChfdGhpcy53aW5kb3dzWzBdKTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIHN0YXJ0V2luZG93RXZlcnkgPSAodGhpcy5zdGFydFdpbmRvd0V2ZXJ5ID4gMCkgPyB0aGlzLnN0YXJ0V2luZG93RXZlcnkgOiB0aGlzLndpbmRvd1NpemU7CiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjsKICAgICAgICB2YXIgd2luZG93U2l6ZSA9IHRoaXMud2luZG93U2l6ZTsKICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93czsKICAgICAgICB2YXIgbGVuID0gd2luZG93cy5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4gJiYgIXRoaXMuY2xvc2VkOyBpKyspIHsKICAgICAgICAgICAgd2luZG93c1tpXS5uZXh0KHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgdmFyIGMgPSB0aGlzLmNvdW50IC0gd2luZG93U2l6ZSArIDE7CiAgICAgICAgaWYgKGMgPj0gMCAmJiBjICUgc3RhcnRXaW5kb3dFdmVyeSA9PT0gMCAmJiAhdGhpcy5jbG9zZWQpIHsKICAgICAgICAgICAgd2luZG93cy5zaGlmdCgpLmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgICAgIGlmICgrK3RoaXMuY291bnQgJSBzdGFydFdpbmRvd0V2ZXJ5ID09PSAwICYmICF0aGlzLmNsb3NlZCkgewogICAgICAgICAgICB2YXIgd2luZG93XzEgPSBuZXcgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1siU3ViamVjdCJdKCk7CiAgICAgICAgICAgIHdpbmRvd3MucHVzaCh3aW5kb3dfMSk7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQod2luZG93XzEpOwogICAgICAgIH0KICAgIH07CiAgICBXaW5kb3dDb3VudFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93czsKICAgICAgICBpZiAod2luZG93cykgewogICAgICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwICYmICF0aGlzLmNsb3NlZCkgewogICAgICAgICAgICAgICAgd2luZG93cy5zaGlmdCgpLmVycm9yKGVycik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgfTsKICAgIFdpbmRvd0NvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB3aW5kb3dzID0gdGhpcy53aW5kb3dzOwogICAgICAgIGlmICh3aW5kb3dzKSB7CiAgICAgICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDAgJiYgIXRoaXMuY2xvc2VkKSB7CiAgICAgICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuY29tcGxldGUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICB9OwogICAgV2luZG93Q291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5jb3VudCA9IDA7CiAgICAgICAgdGhpcy53aW5kb3dzID0gbnVsbDsKICAgIH07CiAgICByZXR1cm4gV2luZG93Q291bnRTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD13aW5kb3dDb3VudC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjI5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ3aW5kb3dUaW1lIiwgZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3dUaW1lOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9TdWJqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zY2hlZHVsZXJfYXN5bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODQpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfaXNOdW1lcmljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9pc1NjaGVkdWxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YmplY3QsX3NjaGVkdWxlcl9hc3luYyxfU3Vic2NyaWJlcixfdXRpbF9pc051bWVyaWMsX3V0aWxfaXNTY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKCgpmdW5jdGlvbiB3aW5kb3dUaW1lKHdpbmRvd1RpbWVTcGFuKSB7CiAgICB2YXIgc2NoZWR1bGVyID0gX3NjaGVkdWxlcl9hc3luY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJhc3luYyJdOwogICAgdmFyIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSBudWxsOwogICAgdmFyIG1heFdpbmRvd1NpemUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICBpZiAoT2JqZWN0KF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bImlzU2NoZWR1bGVyIl0pKGFyZ3VtZW50c1szXSkpIHsKICAgICAgICBzY2hlZHVsZXIgPSBhcmd1bWVudHNbM107CiAgICB9CiAgICBpZiAoT2JqZWN0KF91dGlsX2lzU2NoZWR1bGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bImlzU2NoZWR1bGVyIl0pKGFyZ3VtZW50c1syXSkpIHsKICAgICAgICBzY2hlZHVsZXIgPSBhcmd1bWVudHNbMl07CiAgICB9CiAgICBlbHNlIGlmIChPYmplY3QoX3V0aWxfaXNOdW1lcmljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bImlzTnVtZXJpYyJdKShhcmd1bWVudHNbMl0pKSB7CiAgICAgICAgbWF4V2luZG93U2l6ZSA9IGFyZ3VtZW50c1syXTsKICAgIH0KICAgIGlmIChPYmplY3QoX3V0aWxfaXNTY2hlZHVsZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siaXNTY2hlZHVsZXIiXSkoYXJndW1lbnRzWzFdKSkgewogICAgICAgIHNjaGVkdWxlciA9IGFyZ3VtZW50c1sxXTsKICAgIH0KICAgIGVsc2UgaWYgKE9iamVjdChfdXRpbF9pc051bWVyaWNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siaXNOdW1lcmljIl0pKGFyZ3VtZW50c1sxXSkpIHsKICAgICAgICB3aW5kb3dDcmVhdGlvbkludGVydmFsID0gYXJndW1lbnRzWzFdOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIHdpbmRvd1RpbWVPcGVyYXRvckZ1bmN0aW9uKHNvdXJjZSkgewogICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgV2luZG93VGltZU9wZXJhdG9yKHdpbmRvd1RpbWVTcGFuLCB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBtYXhXaW5kb3dTaXplLCBzY2hlZHVsZXIpKTsKICAgIH07Cn0KdmFyIFdpbmRvd1RpbWVPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFdpbmRvd1RpbWVPcGVyYXRvcih3aW5kb3dUaW1lU3Bhbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgbWF4V2luZG93U2l6ZSwgc2NoZWR1bGVyKSB7CiAgICAgICAgdGhpcy53aW5kb3dUaW1lU3BhbiA9IHdpbmRvd1RpbWVTcGFuOwogICAgICAgIHRoaXMud2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWw7CiAgICAgICAgdGhpcy5tYXhXaW5kb3dTaXplID0gbWF4V2luZG93U2l6ZTsKICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjsKICAgIH0KICAgIFdpbmRvd1RpbWVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgV2luZG93VGltZVN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy53aW5kb3dUaW1lU3BhbiwgdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsLCB0aGlzLm1heFdpbmRvd1NpemUsIHRoaXMuc2NoZWR1bGVyKSk7CiAgICB9OwogICAgcmV0dXJuIFdpbmRvd1RpbWVPcGVyYXRvcjsKfSgpKTsKdmFyIENvdW50ZWRTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oQ291bnRlZFN1YmplY3QsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBDb3VudGVkU3ViamVjdCgpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKICAgICAgICBfdGhpcy5fbnVtYmVyT2ZOZXh0ZWRWYWx1ZXMgPSAwOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIENvdW50ZWRTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdGhpcy5fbnVtYmVyT2ZOZXh0ZWRWYWx1ZXMrKzsKICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLCB2YWx1ZSk7CiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvdW50ZWRTdWJqZWN0LnByb3RvdHlwZSwgIm51bWJlck9mTmV4dGVkVmFsdWVzIiwgewogICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fbnVtYmVyT2ZOZXh0ZWRWYWx1ZXM7CiAgICAgICAgfSwKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gQ291bnRlZFN1YmplY3Q7Cn0oX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1siU3ViamVjdCJdKSk7CnZhciBXaW5kb3dUaW1lU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIl9fZXh0ZW5kcyJdKFdpbmRvd1RpbWVTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gV2luZG93VGltZVN1YnNjcmliZXIoZGVzdGluYXRpb24sIHdpbmRvd1RpbWVTcGFuLCB3aW5kb3dDcmVhdGlvbkludGVydmFsLCBtYXhXaW5kb3dTaXplLCBzY2hlZHVsZXIpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpczsKICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uOwogICAgICAgIF90aGlzLndpbmRvd1RpbWVTcGFuID0gd2luZG93VGltZVNwYW47CiAgICAgICAgX3RoaXMud2luZG93Q3JlYXRpb25JbnRlcnZhbCA9IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWw7CiAgICAgICAgX3RoaXMubWF4V2luZG93U2l6ZSA9IG1heFdpbmRvd1NpemU7CiAgICAgICAgX3RoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyOwogICAgICAgIF90aGlzLndpbmRvd3MgPSBbXTsKICAgICAgICB2YXIgd2luZG93ID0gX3RoaXMub3BlbldpbmRvdygpOwogICAgICAgIGlmICh3aW5kb3dDcmVhdGlvbkludGVydmFsICE9PSBudWxsICYmIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPj0gMCkgewogICAgICAgICAgICB2YXIgY2xvc2VTdGF0ZSA9IHsgc3Vic2NyaWJlcjogX3RoaXMsIHdpbmRvdzogd2luZG93LCBjb250ZXh0OiBudWxsIH07CiAgICAgICAgICAgIHZhciBjcmVhdGlvblN0YXRlID0geyB3aW5kb3dUaW1lU3Bhbjogd2luZG93VGltZVNwYW4sIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWw6IHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwsIHN1YnNjcmliZXI6IF90aGlzLCBzY2hlZHVsZXI6IHNjaGVkdWxlciB9OwogICAgICAgICAgICBfdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93Q2xvc2UsIHdpbmRvd1RpbWVTcGFuLCBjbG9zZVN0YXRlKSk7CiAgICAgICAgICAgIF90aGlzLmFkZChzY2hlZHVsZXIuc2NoZWR1bGUoZGlzcGF0Y2hXaW5kb3dDcmVhdGlvbiwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCwgY3JlYXRpb25TdGF0ZSkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdmFyIHRpbWVTcGFuT25seVN0YXRlID0geyBzdWJzY3JpYmVyOiBfdGhpcywgd2luZG93OiB3aW5kb3csIHdpbmRvd1RpbWVTcGFuOiB3aW5kb3dUaW1lU3BhbiB9OwogICAgICAgICAgICBfdGhpcy5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoV2luZG93VGltZVNwYW5Pbmx5LCB3aW5kb3dUaW1lU3BhbiwgdGltZVNwYW5Pbmx5U3RhdGUpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgV2luZG93VGltZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7CiAgICAgICAgdmFyIGxlbiA9IHdpbmRvd3MubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgdmFyIHdpbmRvd18xID0gd2luZG93c1tpXTsKICAgICAgICAgICAgaWYgKCF3aW5kb3dfMS5jbG9zZWQpIHsKICAgICAgICAgICAgICAgIHdpbmRvd18xLm5leHQodmFsdWUpOwogICAgICAgICAgICAgICAgaWYgKHdpbmRvd18xLm51bWJlck9mTmV4dGVkVmFsdWVzID49IHRoaXMubWF4V2luZG93U2l6ZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VXaW5kb3cod2luZG93XzEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7CiAgICAgICAgd2hpbGUgKHdpbmRvd3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkuZXJyb3IoZXJyKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgfTsKICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHdpbmRvd3MgPSB0aGlzLndpbmRvd3M7CiAgICAgICAgd2hpbGUgKHdpbmRvd3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICB2YXIgd2luZG93XzIgPSB3aW5kb3dzLnNoaWZ0KCk7CiAgICAgICAgICAgIGlmICghd2luZG93XzIuY2xvc2VkKSB7CiAgICAgICAgICAgICAgICB3aW5kb3dfMi5jb21wbGV0ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTsKICAgIH07CiAgICBXaW5kb3dUaW1lU3Vic2NyaWJlci5wcm90b3R5cGUub3BlbldpbmRvdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgd2luZG93ID0gbmV3IENvdW50ZWRTdWJqZWN0KCk7CiAgICAgICAgdGhpcy53aW5kb3dzLnB1c2god2luZG93KTsKICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uOwogICAgICAgIGRlc3RpbmF0aW9uLm5leHQod2luZG93KTsKICAgICAgICByZXR1cm4gd2luZG93OwogICAgfTsKICAgIFdpbmRvd1RpbWVTdWJzY3JpYmVyLnByb3RvdHlwZS5jbG9zZVdpbmRvdyA9IGZ1bmN0aW9uICh3aW5kb3cpIHsKICAgICAgICB3aW5kb3cuY29tcGxldGUoKTsKICAgICAgICB2YXIgd2luZG93cyA9IHRoaXMud2luZG93czsKICAgICAgICB3aW5kb3dzLnNwbGljZSh3aW5kb3dzLmluZGV4T2Yod2luZG93KSwgMSk7CiAgICB9OwogICAgcmV0dXJuIFdpbmRvd1RpbWVTdWJzY3JpYmVyOwp9KF9TdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bIlN1YnNjcmliZXIiXSkpOwpmdW5jdGlvbiBkaXNwYXRjaFdpbmRvd1RpbWVTcGFuT25seShzdGF0ZSkgewogICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCB3aW5kb3dUaW1lU3BhbiA9IHN0YXRlLndpbmRvd1RpbWVTcGFuLCB3aW5kb3cgPSBzdGF0ZS53aW5kb3c7CiAgICBpZiAod2luZG93KSB7CiAgICAgICAgc3Vic2NyaWJlci5jbG9zZVdpbmRvdyh3aW5kb3cpOwogICAgfQogICAgc3RhdGUud2luZG93ID0gc3Vic2NyaWJlci5vcGVuV2luZG93KCk7CiAgICB0aGlzLnNjaGVkdWxlKHN0YXRlLCB3aW5kb3dUaW1lU3Bhbik7Cn0KZnVuY3Rpb24gZGlzcGF0Y2hXaW5kb3dDcmVhdGlvbihzdGF0ZSkgewogICAgdmFyIHdpbmRvd1RpbWVTcGFuID0gc3RhdGUud2luZG93VGltZVNwYW4sIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCBzY2hlZHVsZXIgPSBzdGF0ZS5zY2hlZHVsZXIsIHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWwgPSBzdGF0ZS53aW5kb3dDcmVhdGlvbkludGVydmFsOwogICAgdmFyIHdpbmRvdyA9IHN1YnNjcmliZXIub3BlbldpbmRvdygpOwogICAgdmFyIGFjdGlvbiA9IHRoaXM7CiAgICB2YXIgY29udGV4dCA9IHsgYWN0aW9uOiBhY3Rpb24sIHN1YnNjcmlwdGlvbjogbnVsbCB9OwogICAgdmFyIHRpbWVTcGFuU3RhdGUgPSB7IHN1YnNjcmliZXI6IHN1YnNjcmliZXIsIHdpbmRvdzogd2luZG93LCBjb250ZXh0OiBjb250ZXh0IH07CiAgICBjb250ZXh0LnN1YnNjcmlwdGlvbiA9IHNjaGVkdWxlci5zY2hlZHVsZShkaXNwYXRjaFdpbmRvd0Nsb3NlLCB3aW5kb3dUaW1lU3BhbiwgdGltZVNwYW5TdGF0ZSk7CiAgICBhY3Rpb24uYWRkKGNvbnRleHQuc3Vic2NyaXB0aW9uKTsKICAgIGFjdGlvbi5zY2hlZHVsZShzdGF0ZSwgd2luZG93Q3JlYXRpb25JbnRlcnZhbCk7Cn0KZnVuY3Rpb24gZGlzcGF0Y2hXaW5kb3dDbG9zZShzdGF0ZSkgewogICAgdmFyIHN1YnNjcmliZXIgPSBzdGF0ZS5zdWJzY3JpYmVyLCB3aW5kb3cgPSBzdGF0ZS53aW5kb3csIGNvbnRleHQgPSBzdGF0ZS5jb250ZXh0OwogICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5hY3Rpb24gJiYgY29udGV4dC5zdWJzY3JpcHRpb24pIHsKICAgICAgICBjb250ZXh0LmFjdGlvbi5yZW1vdmUoY29udGV4dC5zdWJzY3JpcHRpb24pOwogICAgfQogICAgc3Vic2NyaWJlci5jbG9zZVdpbmRvdyh3aW5kb3cpOwp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1RpbWUuanMubWFwCgoKLyoqKi8gfSksCi8qIDIzMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2luZG93VG9nZ2xlIiwgZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3dUb2dnbGU7IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF90cnlDYXRjaF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9lcnJvck9iamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3ViamVjdCxfU3Vic2NyaXB0aW9uLF91dGlsX3RyeUNhdGNoLF91dGlsX2Vycm9yT2JqZWN0LF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgoKCgoKZnVuY3Rpb24gd2luZG93VG9nZ2xlKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgV2luZG93VG9nZ2xlT3BlcmF0b3Iob3BlbmluZ3MsIGNsb3NpbmdTZWxlY3RvcikpOyB9Owp9CnZhciBXaW5kb3dUb2dnbGVPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFdpbmRvd1RvZ2dsZU9wZXJhdG9yKG9wZW5pbmdzLCBjbG9zaW5nU2VsZWN0b3IpIHsKICAgICAgICB0aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7CiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7CiAgICB9CiAgICBXaW5kb3dUb2dnbGVPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgV2luZG93VG9nZ2xlU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLm9wZW5pbmdzLCB0aGlzLmNsb3NpbmdTZWxlY3RvcikpOwogICAgfTsKICAgIHJldHVybiBXaW5kb3dUb2dnbGVPcGVyYXRvcjsKfSgpKTsKdmFyIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gV2luZG93VG9nZ2xlU3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgb3BlbmluZ3MsIGNsb3NpbmdTZWxlY3RvcikgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLm9wZW5pbmdzID0gb3BlbmluZ3M7CiAgICAgICAgX3RoaXMuY2xvc2luZ1NlbGVjdG9yID0gY2xvc2luZ1NlbGVjdG9yOwogICAgICAgIF90aGlzLmNvbnRleHRzID0gW107CiAgICAgICAgX3RoaXMuYWRkKF90aGlzLm9wZW5TdWJzY3JpcHRpb24gPSBPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkoX3RoaXMsIG9wZW5pbmdzLCBvcGVuaW5ncykpOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0czsKICAgICAgICBpZiAoY29udGV4dHMpIHsKICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgY29udGV4dHNbaV0ud2luZG93Lm5leHQodmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzOwogICAgICAgIHRoaXMuY29udGV4dHMgPSBudWxsOwogICAgICAgIGlmIChjb250ZXh0cykgewogICAgICAgICAgICB2YXIgbGVuID0gY29udGV4dHMubGVuZ3RoOwogICAgICAgICAgICB2YXIgaW5kZXggPSAtMTsKICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHsKICAgICAgICAgICAgICAgIHZhciBjb250ZXh0XzEgPSBjb250ZXh0c1tpbmRleF07CiAgICAgICAgICAgICAgICBjb250ZXh0XzEud2luZG93LmVycm9yKGVycik7CiAgICAgICAgICAgICAgICBjb250ZXh0XzEuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLCBlcnIpOwogICAgfTsKICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgY29udGV4dHMgPSB0aGlzLmNvbnRleHRzOwogICAgICAgIHRoaXMuY29udGV4dHMgPSBudWxsOwogICAgICAgIGlmIChjb250ZXh0cykgewogICAgICAgICAgICB2YXIgbGVuID0gY29udGV4dHMubGVuZ3RoOwogICAgICAgICAgICB2YXIgaW5kZXggPSAtMTsKICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHsKICAgICAgICAgICAgICAgIHZhciBjb250ZXh0XzIgPSBjb250ZXh0c1tpbmRleF07CiAgICAgICAgICAgICAgICBjb250ZXh0XzIud2luZG93LmNvbXBsZXRlKCk7CiAgICAgICAgICAgICAgICBjb250ZXh0XzIuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKTsKICAgIH07CiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNvbnRleHRzID0gdGhpcy5jb250ZXh0czsKICAgICAgICB0aGlzLmNvbnRleHRzID0gbnVsbDsKICAgICAgICBpZiAoY29udGV4dHMpIHsKICAgICAgICAgICAgdmFyIGxlbiA9IGNvbnRleHRzLmxlbmd0aDsKICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7CiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7CiAgICAgICAgICAgICAgICB2YXIgY29udGV4dF8zID0gY29udGV4dHNbaW5kZXhdOwogICAgICAgICAgICAgICAgY29udGV4dF8zLndpbmRvdy51bnN1YnNjcmliZSgpOwogICAgICAgICAgICAgICAgY29udGV4dF8zLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHsKICAgICAgICBpZiAob3V0ZXJWYWx1ZSA9PT0gdGhpcy5vcGVuaW5ncykgewogICAgICAgICAgICB2YXIgY2xvc2luZ1NlbGVjdG9yID0gdGhpcy5jbG9zaW5nU2VsZWN0b3I7CiAgICAgICAgICAgIHZhciBjbG9zaW5nTm90aWZpZXIgPSBPYmplY3QoX3V0aWxfdHJ5Q2F0Y2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1sidHJ5Q2F0Y2giXSkoY2xvc2luZ1NlbGVjdG9yKShpbm5lclZhbHVlKTsKICAgICAgICAgICAgaWYgKGNsb3NpbmdOb3RpZmllciA9PT0gX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siZXJyb3JPYmplY3QiXSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IoX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1siZXJyb3JPYmplY3QiXS5lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciB3aW5kb3dfMSA9IG5ldyBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJqZWN0Il0oKTsKICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgX1N1YnNjcmlwdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fWyJTdWJzY3JpcHRpb24iXSgpOwogICAgICAgICAgICAgICAgdmFyIGNvbnRleHRfNCA9IHsgd2luZG93OiB3aW5kb3dfMSwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24gfTsKICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dHMucHVzaChjb250ZXh0XzQpOwogICAgICAgICAgICAgICAgdmFyIGlubmVyU3Vic2NyaXB0aW9uID0gT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHRoaXMsIGNsb3NpbmdOb3RpZmllciwgY29udGV4dF80KTsKICAgICAgICAgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbi5jbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMubGVuZ3RoIC0gMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpbm5lclN1YnNjcmlwdGlvbi5jb250ZXh0ID0gY29udGV4dF80OwogICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoaW5uZXJTdWJzY3JpcHRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHdpbmRvd18xKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmluZGV4T2Yob3V0ZXJWYWx1ZSkpOwogICAgICAgIH0KICAgIH07CiAgICBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICB0aGlzLmVycm9yKGVycik7CiAgICB9OwogICAgV2luZG93VG9nZ2xlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoaW5uZXIpIHsKICAgICAgICBpZiAoaW5uZXIgIT09IHRoaXMub3BlblN1YnNjcmlwdGlvbikgewogICAgICAgICAgICB0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMuaW5kZXhPZihpbm5lci5jb250ZXh0KSk7CiAgICAgICAgfQogICAgfTsKICAgIFdpbmRvd1RvZ2dsZVN1YnNjcmliZXIucHJvdG90eXBlLmNsb3NlV2luZG93ID0gZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBjb250ZXh0cyA9IHRoaXMuY29udGV4dHM7CiAgICAgICAgdmFyIGNvbnRleHQgPSBjb250ZXh0c1tpbmRleF07CiAgICAgICAgdmFyIHdpbmRvdyA9IGNvbnRleHQud2luZG93LCBzdWJzY3JpcHRpb24gPSBjb250ZXh0LnN1YnNjcmlwdGlvbjsKICAgICAgICBjb250ZXh0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIHdpbmRvdy5jb21wbGV0ZSgpOwogICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgfTsKICAgIHJldHVybiBXaW5kb3dUb2dnbGVTdWJzY3JpYmVyOwp9KF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1siT3V0ZXJTdWJzY3JpYmVyIl0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2luZG93VG9nZ2xlLmpzLm1hcAoKCi8qKiovIH0pLAovKiAyMzEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwpfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7Ci8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgIndpbmRvd1doZW4iLCBmdW5jdGlvbigpIHsgcmV0dXJuIHdpbmRvd1doZW47IH0pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1N1YmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfdHJ5Q2F0Y2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfZXJyb3JPYmplY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSk7Ci8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YmplY3QsX3V0aWxfdHJ5Q2F0Y2gsX3V0aWxfZXJyb3JPYmplY3QsX091dGVyU3Vic2NyaWJlcixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCBQVVJFX0lNUE9SVFNfRU5EICovCgoKCgoKCmZ1bmN0aW9uIHdpbmRvd1doZW4oY2xvc2luZ1NlbGVjdG9yKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gd2luZG93V2hlbk9wZXJhdG9yRnVuY3Rpb24oc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBXaW5kb3dPcGVyYXRvcihjbG9zaW5nU2VsZWN0b3IpKTsKICAgIH07Cn0KdmFyIFdpbmRvd09wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gV2luZG93T3BlcmF0b3IoY2xvc2luZ1NlbGVjdG9yKSB7CiAgICAgICAgdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7CiAgICB9CiAgICBXaW5kb3dPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgV2luZG93U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLmNsb3NpbmdTZWxlY3RvcikpOwogICAgfTsKICAgIHJldHVybiBXaW5kb3dPcGVyYXRvcjsKfSgpKTsKdmFyIFdpbmRvd1N1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICB0c2xpYl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJfX2V4dGVuZHMiXShXaW5kb3dTdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gV2luZG93U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY2xvc2luZ1NlbGVjdG9yKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjsKICAgICAgICBfdGhpcy5jbG9zaW5nU2VsZWN0b3IgPSBjbG9zaW5nU2VsZWN0b3I7CiAgICAgICAgX3RoaXMub3BlbldpbmRvdygpOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHsKICAgICAgICB0aGlzLm9wZW5XaW5kb3coaW5uZXJTdWIpOwogICAgfTsKICAgIFdpbmRvd1N1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUVycm9yID0gZnVuY3Rpb24gKGVycm9yLCBpbm5lclN1YikgewogICAgICAgIHRoaXMuX2Vycm9yKGVycm9yKTsKICAgIH07CiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIHRoaXMub3BlbldpbmRvdyhpbm5lclN1Yik7CiAgICB9OwogICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICB0aGlzLndpbmRvdy5uZXh0KHZhbHVlKTsKICAgIH07CiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgdGhpcy53aW5kb3cuZXJyb3IoZXJyKTsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7CiAgICAgICAgdGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKTsKICAgIH07CiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy53aW5kb3cuY29tcGxldGUoKTsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7CiAgICAgICAgdGhpcy51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24oKTsKICAgIH07CiAgICBXaW5kb3dTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZUNsb3NpbmdOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMuY2xvc2luZ05vdGlmaWNhdGlvbikgewogICAgICAgICAgICB0aGlzLmNsb3NpbmdOb3RpZmljYXRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICB9CiAgICB9OwogICAgV2luZG93U3Vic2NyaWJlci5wcm90b3R5cGUub3BlbldpbmRvdyA9IGZ1bmN0aW9uIChpbm5lclN1YikgewogICAgICAgIGlmIChpbm5lclN1YiA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIGlubmVyU3ViID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKGlubmVyU3ViKSB7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGlubmVyU3ViKTsKICAgICAgICAgICAgaW5uZXJTdWIudW5zdWJzY3JpYmUoKTsKICAgICAgICB9CiAgICAgICAgdmFyIHByZXZXaW5kb3cgPSB0aGlzLndpbmRvdzsKICAgICAgICBpZiAocHJldldpbmRvdykgewogICAgICAgICAgICBwcmV2V2luZG93LmNvbXBsZXRlKCk7CiAgICAgICAgfQogICAgICAgIHZhciB3aW5kb3cgPSB0aGlzLndpbmRvdyA9IG5ldyBfU3ViamVjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJTdWJqZWN0Il0oKTsKICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQod2luZG93KTsKICAgICAgICB2YXIgY2xvc2luZ05vdGlmaWVyID0gT2JqZWN0KF91dGlsX3RyeUNhdGNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bInRyeUNhdGNoIl0pKHRoaXMuY2xvc2luZ1NlbGVjdG9yKSgpOwogICAgICAgIGlmIChjbG9zaW5nTm90aWZpZXIgPT09IF91dGlsX2Vycm9yT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImVycm9yT2JqZWN0Il0pIHsKICAgICAgICAgICAgdmFyIGVyciA9IF91dGlsX2Vycm9yT2JqZWN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bImVycm9yT2JqZWN0Il0uZTsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgICAgICAgICB0aGlzLndpbmRvdy5lcnJvcihlcnIpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5hZGQodGhpcy5jbG9zaW5nTm90aWZpY2F0aW9uID0gT2JqZWN0KF91dGlsX3N1YnNjcmliZVRvUmVzdWx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bInN1YnNjcmliZVRvUmVzdWx0Il0pKHRoaXMsIGNsb3NpbmdOb3RpZmllcikpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gV2luZG93U3Vic2NyaWJlcjsKfShfT3V0ZXJTdWJzY3JpYmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bIk91dGVyU3Vic2NyaWJlciJdKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpbmRvd1doZW4uanMubWFwCgoKLyoqKi8gfSksCi8qIDIzMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTsKLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCAid2l0aExhdGVzdEZyb20iLCBmdW5jdGlvbigpIHsgcmV0dXJuIHdpdGhMYXRlc3RGcm9tOyB9KTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHRzbGliX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9PdXRlclN1YnNjcmliZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpOwovKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQgUFVSRV9JTVBPUlRTX0VORCAqLwoKCgpmdW5jdGlvbiB3aXRoTGF0ZXN0RnJvbSgpIHsKICAgIHZhciBhcmdzID0gW107CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgdmFyIHByb2plY3Q7CiAgICAgICAgaWYgKHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgcHJvamVjdCA9IGFyZ3MucG9wKCk7CiAgICAgICAgfQogICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IGFyZ3M7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yKG9ic2VydmFibGVzLCBwcm9qZWN0KSk7CiAgICB9Owp9CnZhciBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21PcGVyYXRvcihvYnNlcnZhYmxlcywgcHJvamVjdCkgewogICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBvYnNlcnZhYmxlczsKICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0OwogICAgfQogICAgV2l0aExhdGVzdEZyb21PcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMub2JzZXJ2YWJsZXMsIHRoaXMucHJvamVjdCkpOwogICAgfTsKICAgIHJldHVybiBXaXRoTGF0ZXN0RnJvbU9wZXJhdG9yOwp9KCkpOwp2YXIgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgdHNsaWJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siX19leHRlbmRzIl0oV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvYnNlcnZhYmxlcywgcHJvamVjdCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzOwogICAgICAgIF90aGlzLm9ic2VydmFibGVzID0gb2JzZXJ2YWJsZXM7CiAgICAgICAgX3RoaXMucHJvamVjdCA9IHByb2plY3Q7CiAgICAgICAgX3RoaXMudG9SZXNwb25kID0gW107CiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmFibGVzLmxlbmd0aDsKICAgICAgICBfdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIF90aGlzLnRvUmVzcG9uZC5wdXNoKGkpOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07CiAgICAgICAgICAgIF90aGlzLmFkZChPYmplY3QoX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1sic3Vic2NyaWJlVG9SZXN1bHQiXSkoX3RoaXMsIG9ic2VydmFibGUsIG9ic2VydmFibGUsIGkpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7CiAgICAgICAgdGhpcy52YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlOwogICAgICAgIHZhciB0b1Jlc3BvbmQgPSB0aGlzLnRvUmVzcG9uZDsKICAgICAgICBpZiAodG9SZXNwb25kLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIGZvdW5kID0gdG9SZXNwb25kLmluZGV4T2Yob3V0ZXJJbmRleCk7CiAgICAgICAgICAgIGlmIChmb3VuZCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIHRvUmVzcG9uZC5zcGxpY2UoZm91bmQsIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFdpdGhMYXRlc3RGcm9tU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5Q29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwogICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh0aGlzLnRvUmVzcG9uZC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdmFyIGFyZ3MgPSBbdmFsdWVdLmNvbmNhdCh0aGlzLnZhbHVlcyk7CiAgICAgICAgICAgIGlmICh0aGlzLnByb2plY3QpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3RyeVByb2plY3QoYXJncyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoYXJncyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgV2l0aExhdGVzdEZyb21TdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UHJvamVjdCA9IGZ1bmN0aW9uIChhcmdzKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb2plY3QuYXBwbHkodGhpcywgYXJncyk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpOwogICAgfTsKICAgIHJldHVybiBXaXRoTGF0ZXN0RnJvbVN1YnNjcmliZXI7Cn0oX091dGVyU3Vic2NyaWJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fWyJPdXRlclN1YnNjcmliZXIiXSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD13aXRoTGF0ZXN0RnJvbS5qcy5tYXAKCgovKioqLyB9KSwKLyogMjMzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ6aXAiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHppcDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV96aXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM0KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV96aXAgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gemlwKCkgewogICAgdmFyIG9ic2VydmFibGVzID0gW107CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgIG9ic2VydmFibGVzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICB9CiAgICByZXR1cm4gZnVuY3Rpb24gemlwT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHsKICAgICAgICByZXR1cm4gc291cmNlLmxpZnQuY2FsbChfb2JzZXJ2YWJsZV96aXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siemlwIl0uYXBwbHkodm9pZCAwLCBbc291cmNlXS5jb25jYXQob2JzZXJ2YWJsZXMpKSk7CiAgICB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjM0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sICJ6aXBBbGwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHppcEFsbDsgfSk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfb2JzZXJ2YWJsZV96aXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM0KTsKLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV96aXAgUFVSRV9JTVBPUlRTX0VORCAqLwoKZnVuY3Rpb24gemlwQWxsKHByb2plY3QpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UubGlmdChuZXcgX29ic2VydmFibGVfemlwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIlppcE9wZXJhdG9yIl0ocHJvamVjdCkpOyB9Owp9Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXppcEFsbC5qcy5tYXAKCgovKioqLyB9KSwKLyogMjM1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTsKLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHJ4anNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgemVwdG9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB6ZXB0b19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18pOwoKCgoKCmZ1bmN0aW9uIEV2ZW50c09ic2VydmFibGUobWdyLCBjb25mcklkLCBvblJlbW90ZVN0cmVhbSkgewogICAgdGhpcy5tZ3IgPSBtZ3I7CiAgICB0aGlzLmNvbmZySWQgPSBjb25mcklkOwogICAgaW5pdC5hcHBseSh0aGlzKTsKICAgIHRoaXMuc3ViamVjdCA9IG5ldyByeGpzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bIlN1YmplY3QiXSgpOwogICAgdGhpcy5vblJlbW90ZVN0cmVhbSA9IG9uUmVtb3RlU3RyZWFtOwp9CgpmdW5jdGlvbiBpbml0KCkgewogICAgX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuZXh0ZW5kKHRoaXMsIHsKICAgICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1YmplY3Quc3Vic2NyaWJlKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpOwogICAgICAgIH0KICAgIH0sIHsgLy/ku6XkuIvnm5HlkKzvvIx0aGlzIG9iamVjdCA9PSBtZSA9PSBzZXJ2aWNlLmN1cnJlbnQKICAgICAgICBvbk1lRXhpdDogZnVuY3Rpb24gb25NZUV4aXQocmVhc29uLCBmYWlsZWQpIHsKICAgICAgICAgICAgdGhpcy5tZ3IuX29uRXhpdCh0aGlzLmNvbmZySWQsIHJlYXNvbiwgZmFpbGVkKTsKICAgICAgICB9LAoKICAgICAgICBvbkFkZE1lbWJlcjogZnVuY3Rpb24gb25BZGRNZW1iZXIobWVtYmVyKSB7CiAgICAgICAgICAgIHRoaXMubWdyLm9uTWVtYmVySm9pbihtZW1iZXIsIHRoaXMuY29uZnJJZCk7CiAgICAgICAgfSwKICAgICAgICBvblJlbW92ZU1lbWJlcjogZnVuY3Rpb24gb25SZW1vdmVNZW1iZXIobWVtYmVyLCByZWFzb24pIHsKICAgICAgICAgICAgdGhpcy5tZ3Iub25NZW1iZXJMZWF2ZShtZW1iZXIsIHJlYXNvbiwgdGhpcy5jb25mcklkKTsKICAgICAgICB9LAoKICAgICAgICBvbkFkZFN0cmVhbTogZnVuY3Rpb24gb25BZGRTdHJlYW0oc3RyZWFtKSB7CiAgICAgICAgICAgIGlmIChzdHJlYW0uaWQgPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghc3RyZWFtLmxvY2F0ZWQoKSkgewogICAgICAgICAgICAgICAgdGhpcy5vblJlbW90ZVN0cmVhbSAmJiB0aGlzLm9uUmVtb3RlU3RyZWFtKHN0cmVhbSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMubWdyLnN0cmVhbUJpbmRWaWRlbyhzdHJlYW0sIHVuZGVmaW5lZCwgdGhpcy5jb25mcklkKTsKICAgICAgICAgICAgdGhpcy5tZ3IuX29uQWRkTWVtYmVyU3RyZWFtKHN0cmVhbSwgdGhpcy5jb25mcklkKTsKICAgICAgICB9LAogICAgICAgIG9uUmVtb3ZlU3RyZWFtOiBmdW5jdGlvbiBvblJlbW92ZVN0cmVhbShzdHJlYW0pIHsKICAgICAgICAgICAgaWYgKHN0cmVhbS5pZCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBjb25mciA9IHRoaXMubWdyLl9jb25mcih0aGlzLmNvbmZySWQpOwogICAgICAgICAgICBpZiAoY29uZnIgJiYgc3RyZWFtICYmIHN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgICAgIGNvbmZyLmF2ICYmIGNvbmZyLmF2LmlkID09PSBzdHJlYW0uaWQgJiYgKGNvbmZyLmF2ID0gdW5kZWZpbmVkKTsKICAgICAgICAgICAgICAgIGNvbmZyLmRlc2t0b3AgJiYgY29uZnIuZGVza3RvcC5pZCA9PT0gc3RyZWFtLmlkICYmIChjb25mci5kZXNrdG9wID0gdW5kZWZpbmVkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHZpZGVvID0gX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEucmVtb3ZlQXR0cmlidXRlKHRoaXMubWdyLl92aWRlb3MsIHN0cmVhbS5pZCk7CiAgICAgICAgICAgIHRoaXMubWdyLl9vblJlbW92ZU1lbWJlclN0cmVhbShzdHJlYW0sIHRoaXMuY29uZnJJZCk7CiAgICAgICAgICAgIHZpZGVvICYmIHRoaXMubWdyLnVubG9hZFZpZGVvKHN0cmVhbS5vd25lciwgc3RyZWFtLCB2aWRlbyk7CiAgICAgICAgfSwKICAgICAgICBvblVwZGF0ZVN0cmVhbTogZnVuY3Rpb24gb25VcGRhdGVTdHJlYW0oc3RyZWFtLCB1cGRhdGUpIHsKICAgICAgICAgICAgaWYgKHN0cmVhbS5pZCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICAgIHZhciB2aWRlb1RhZyA9IHRoaXMubWdyLl92aWRlb3Nbc3RyZWFtLmlkXTsKICAgICAgICAgICAgaWYgKHZpZGVvVGFnKSB7CiAgICAgICAgICAgICAgICB1cGRhdGUgJiYgdXBkYXRlLmlmTWVkaWFTdHJlYW0oZnVuY3Rpb24gKG1lZGlhU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9UYWcgJiYgYXR0YWNoTWVkaWFTdHJlYW0odmlkZW9UYWcsIG1lZGlhU3RyZWFtKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHZpZGVvVGFnICYmIHZpZGVvVGFnLmhhc0F0dHJpYnV0ZSgiZmxvdyIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWdyLm9uTWVkaWFUcmFuc21pc3Npb24odmlkZW9UYWcsIGZ1bmN0aW9uIGNiKHRyYWNrSWQsIHR5cGUsIHN1YnR5cGUsIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHplcHRvX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCgpKHZpZGVvVGFnKS50cmlnZ2VyKCJvbk1lZGlhVHJhbnNtaXNzaW9uIiwgW3RyYWNrSWQsIHR5cGUsIHN1YnR5cGUsIGRhdGFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgc3RyZWFtLmFvZmYgPyB2aWRlb1RhZy5zZXRBdHRyaWJ1dGUoImFvZmYiLCAiYW9mZiIpIDogdmlkZW9UYWcucmVtb3ZlQXR0cmlidXRlKCJhb2ZmIik7CiAgICAgICAgICAgICAgICBzdHJlYW0udm9mZiA/IHZpZGVvVGFnLnNldEF0dHJpYnV0ZSgidm9mZiIsICJ2b2ZmIikgOiB2aWRlb1RhZy5yZW1vdmVBdHRyaWJ1dGUoInZvZmYiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGNvbnN0YWludHMgPSB7IHZpZGVvOiAhc3RyZWFtLnZvZmYsIGF1ZGlvOiAhc3RyZWFtLmFvZmYgfTsKICAgICAgICAgICAgdXBkYXRlICYmIHVwZGF0ZS5pZlZvZmYoZnVuY3Rpb24gKHZvZmYpIHsKICAgICAgICAgICAgICAgIGNvbnN0YWludHMgfHwgKGNvbnN0YWludHMgPSB7fSk7CiAgICAgICAgICAgICAgICBjb25zdGFpbnRzLnZpZGVvID0gIXZvZmY7CiAgICAgICAgICAgICAgICBpZiAoIXN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvL2NvbnN0YWludHMudmlkZW8gPSBjb25zdGFpbnRzLnZpZGVvICYmICghc3RyZWFtLnN1YkFyZ3MgfHwoc3RyZWFtLnN1YkFyZ3MgJiYgc3RyZWFtLnN1YkFyZ3Muc3ViU1ZpZGVvKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3RhaW50cy52aWRlbyA9IHN0cmVhbS5zdWJBcmdzID8gc3RyZWFtLnN1YkFyZ3Muc3ViU1ZpZGVvIDogIXN0cmVhbS52b2ZmOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdXBkYXRlICYmIHVwZGF0ZS5pZkFvZmYoZnVuY3Rpb24gKGFvZmYpIHsKICAgICAgICAgICAgICAgIGNvbnN0YWludHMgfHwgKGNvbnN0YWludHMgPSB7fSk7CiAgICAgICAgICAgICAgICBjb25zdGFpbnRzLmF1ZGlvID0gIWFvZmY7CiAgICAgICAgICAgICAgICBpZiAoIXN0cmVhbS5sb2NhdGVkKCkpIHsKICAgICAgICAgICAgICAgICAgICAvL2NvbnN0YWludHMuYXVkaW8gPSBjb25zdGFpbnRzLmF1ZGlvICYmICghc3RyZWFtLnN1YkFyZ3MgfHwoc3RyZWFtLnN1YkFyZ3MgJiYgc3RyZWFtLnN1YkFyZ3Muc3ViU0F1ZGlvKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3RhaW50cy5hdWRpbyA9IHN0cmVhbS5zdWJBcmdzID8gc3RyZWFtLnN1YkFyZ3Muc3ViU0F1ZGlvIDogIXN0cmVhbS5hb2ZmOwoKICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RhaW50cy5hdWRpbyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0YWludHMgJiYgdGhpcy5tZ3IuX29uTWVtYmVyTWVkaWFDaGFuYWdlZChzdHJlYW0ub3duZXIsIHN0cmVhbSwgY29uc3RhaW50cywgdGhpcy5jb25mcklkKTsKICAgICAgICAgICAgY29uc3RhaW50cyAmJiB0aGlzLm1nci5fb25VcGRhdGVNZW1iZXJTdHJlYW0oc3RyZWFtLCBjb25zdGFpbnRzLCB0aGlzLmNvbmZySWQpOwogICAgICAgIH0sCiAgICAgICAgb25OZXR3b3JrV2VhazogZnVuY3Rpb24gb25OZXR3b3JrV2VhaygpIHt9LAogICAgICAgIG9uTm90U3VwcG9ydFB1Ymxpc2hWaWRlb0NvZGVjczogZnVuY3Rpb24gb25Ob3RTdXBwb3J0UHVibGlzaFZpZGVvQ29kZWNzKHN0cmVhbSkgewogICAgICAgICAgICB0aGlzLm1nci5fb25Ob3RTdXBwb3J0TWVtYmVyUHVibGlzaFZpZGVvQ29kZWNzKHN0cmVhbSwgdGhpcy5jb25mcklkKTsKICAgICAgICB9LAogICAgICAgIG9uUmVjdlJlbW90ZU1lc3NhZ2U6IGZ1bmN0aW9uIG9uUmVjdlJlbW90ZU1lc3NhZ2UoZnJvbU1lbWJlciwgYXJnc09iamVjdCkgewogICAgICAgICAgICB0aGlzLm1nci5fb25SZWN2UmVtb3RlTWVzc2FnZShmcm9tTWVtYmVyLCBhcmdzT2JqZWN0LCB0aGlzLmNvbmZySWQpOwogICAgICAgIH0sCgogICAgICAgIG9uU291bmRDaGFuYWdlOiBmdW5jdGlvbiBvblNvdW5kQ2hhbmFnZShtZW1iZXIsIHN0cmVhbSwgbWV0ZXJEYXRhKSB7CiAgICAgICAgICAgIHRoaXMubWdyLl9vbk1lbWJlclNvdW5kQ2hhbmFnZWQobWVtYmVyLCBzdHJlYW0sIG1ldGVyRGF0YSwgdGhpcy5jb25mcklkKTsKICAgICAgICB9LAogICAgICAgIG9uVGFsa2luZzogZnVuY3Rpb24gb25UYWxraW5nKG1lbWJlciwgc3RyZWFtLCBtZXRlckRhdGEpIHsKICAgICAgICAgICAgdGhpcy5tZ3IuX29uVGFsa2luZyhtZW1iZXIsIHN0cmVhbSwgbWV0ZXJEYXRhLCB0aGlzLmNvbmZySWQpOwogICAgICAgIH0sCgogICAgICAgIG9uUm9sZVVwZGF0ZTogZnVuY3Rpb24gb25Sb2xlVXBkYXRlKHJvbGUsIHJvbGVUb2tlbikgewogICAgICAgICAgICB2YXIgY29uZnIgPSB0aGlzLm1nci5fY29uZnJzW3RoaXMuY29uZnJJZF07CiAgICAgICAgICAgIHJvbGVUb2tlbiAmJiAoY29uZnIucm9sZVRva2VuID0gcm9sZVRva2VuKTsKICAgICAgICAgICAgY29uZnIucm9sZSA9IHJvbGU7CgogICAgICAgICAgICBpZiAocm9sZSA9PSB0aGlzLm1nci5Sb2xlLkFVRElFTkNFKSB7CiAgICAgICAgICAgICAgICBjb25mci5hdiAmJiB0aGlzLm1nci5odW5ndXAoY29uZnIuYXYpOwogICAgICAgICAgICAgICAgY29uZnIuZGVza3RvcCAmJiB0aGlzLm1nci5odW5ndXAoY29uZnIuZGVza3RvcCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMubWdyLl9vblJvbGVVcGRhdGVkKHJvbGUsIHRoaXMuY29uZnJJZCk7CiAgICAgICAgfSwKCiAgICAgICAgb25Ob3RpZnlFdmVudDogZnVuY3Rpb24gb25Ob3RpZnlFdmVudChldnQpIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChldnQgaW5zdGFuY2VvZiBlbWVkaWEuZXZlbnQuSUNFQ2hhbmFnZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB3ZWJydGMgPSBldnQud2VicnRjOwogICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IGV2dC5zdGF0ZTsKICAgICAgICAgICAgICAgICAgICBfVXRpbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQuYS5mb3JFYWNoKHNlbGYuX2NhY2hlU3RyZWFtcywgZnVuY3Rpb24gKHNpZCwgc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJlYW0ucnRjSWQgPT0gd2VicnRjLmdldFJ0Y0lkKCkpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3N0cmVhbSA9IF9VdGlsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdC5hLmV4dGVuZCh7fSwgc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfbWVtYmVyID0gX1V0aWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0LmEuZXh0ZW5kKHt9LCBzdHJlYW0ub3duZXIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWdyLl9vblN0cmVhbUljZVN0YXRlQ2hhbmdlZChfbWVtYmVyLCBfc3RyZWFtLCBzdGF0ZSwgc2VsZi5jb25mcklkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgc2VsZi5zdWJqZWN0Lm5leHQoZXZ0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwp9CgovKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bImRlZmF1bHQiXSA9IChFdmVudHNPYnNlcnZhYmxlKTsKCi8qKiovIH0pLAovKiAyMzYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CnZhciBfbG9nZ2VyID0gX3V0aWwudGFnTG9nZ2VyKCJQYW5uZWxWaWRlbyIpOwoKdmFyIE1vdXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMzcpOwp2YXIgS2V5Ym9hcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzOCk7CnZhciBNb3VzZVRyYWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7CnZhciBNb3VzZVRyaWdnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTsKdmFyIFRvdGFsQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMzkpOwoKZnVuY3Rpb24gb3ZlcnJpZGVPblJlbW92ZU1lbWJlcihzZXJ2aWNlKSB7CiAgICBvdmVycmlkZU9uUmVtb3ZlTWVtYmVyLl9vdmVycmlkZUNvdW50Kys7CiAgICBpZiAob3ZlcnJpZGVPblJlbW92ZU1lbWJlci5vdmVycmlkZU9iaiA9PT0gc2VydmljZSkgewogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBvdmVycmlkZU9uUmVtb3ZlTWVtYmVyLm92ZXJyaWRlT2JqID0gc2VydmljZTsKICAgIG9uUmVtb3ZlTWVtYmVyLm92ZXJyaWRlID0gc2VydmljZS5saXN0ZW5lcnMub25SZW1vdmVNZW1iZXI7CiAgICBzZXJ2aWNlLmxpc3RlbmVycy5vblJlbW92ZU1lbWJlciA9IG9uUmVtb3ZlTWVtYmVyOwp9Cm92ZXJyaWRlT25SZW1vdmVNZW1iZXIuX292ZXJyaWRlQ291bnQgPSAwOwoKZnVuY3Rpb24gb25SZW1vdmVNZW1iZXIobWVtYmVyLCByZWFzb24pIHsKICAgIHRyeSB7CiAgICAgICAgdmFyIHJlbW90ZUNvbnRyb2xzID0gbWVtYmVyICYmIG1lbWJlci5pZCAmJiBzZWxlY3RSZW1vdGVDb250cm9sQnlNZW1JZCh0aGlzLl9zZXJ2aWNlLCBtZW1iZXIuaWQpOwoKICAgICAgICBpZiAocmVtb3RlQ29udHJvbHMgJiYgcmVtb3RlQ29udHJvbHMubGVuZ3RoKSB7CiAgICAgICAgICAgIF91dGlsLmZvckVhY2gocmVtb3RlQ29udHJvbHMsIGZ1bmN0aW9uIChfaW5kZXgsIGN0cmwpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIud2FybigiUmVtb3ZlIG1lbWJlci4gZnJlZSByZW1vdGUgY29udHJvbGxlci4gaXQgaXMgIiwgY3RybC5pZCwgY3RybC5fY3RybFN0cmVhbS5pZCwgY3RybC5fY29udHJvbGxlci5tZW1OYW1lLCBtZW1iZXIuaWQpOwoKICAgICAgICAgICAgICAgIGN0cmwuX2ZyZWUoKTsgLy/otoXml7bmuIXnqboKCiAgICAgICAgICAgICAgICBjdHJsLl9jYWxsYmFja3MgJiYgY3RybC5fY2FsbGJhY2tzLm9uUmVtb3RlRnJlZUNvbnRyb2wgJiYgY3RybC5fY2FsbGJhY2tzLm9uUmVtb3RlRnJlZUNvbnRyb2woY3RybC5fY3RybFN0cmVhbSwgY3RybC5fY29udHJvbGxlciwgY3RybC5fY0lkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSBmaW5hbGx5IHsKICAgICAgICBvblJlbW92ZU1lbWJlci5vdmVycmlkZSAmJiBvblJlbW92ZU1lbWJlci5vdmVycmlkZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQp9CgpmdW5jdGlvbiBvdmVycmlkZU9uUmVtb3ZlU3RyZWFtKHNlcnZpY2UpIHsKICAgIG92ZXJyaWRlT25SZW1vdmVTdHJlYW0uX292ZXJyaWRlQ291bnQrKzsKICAgIGlmIChvdmVycmlkZU9uUmVtb3ZlU3RyZWFtLm92ZXJyaWRlT2JqID09PSBzZXJ2aWNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIG92ZXJyaWRlT25SZW1vdmVTdHJlYW0ub3ZlcnJpZGVPYmogPSBzZXJ2aWNlOwogICAgb25SZW1vdmVTdHJlYW0ub3ZlcnJpZGUgPSBzZXJ2aWNlLmxpc3RlbmVycy5vblJlbW92ZVN0cmVhbTsKICAgIHNlcnZpY2UubGlzdGVuZXJzLm9uUmVtb3ZlU3RyZWFtID0gb25SZW1vdmVTdHJlYW07Cn0Kb3ZlcnJpZGVPblJlbW92ZVN0cmVhbS5fb3ZlcnJpZGVDb3VudCA9IDA7CgpmdW5jdGlvbiByZXNldE9uUmVtb3ZlU3RyZWFtKHNlcnZpY2UpIHsKICAgIC8vIG92ZXJyaWRlT25SZW1vdmVTdHJlYW0uX292ZXJyaWRlQ291bnQtLTsKICAgIC8vCiAgICAvLyBpZihvdmVycmlkZU9uUmVtb3ZlU3RyZWFtLl9vdmVycmlkZUNvdW50ID09PSAwKXsKICAgIC8vICAgICBzZXJ2aWNlLmN1cnJlbnQub25SZW1vdmVTdHJlYW0gPSBvblJlbW92ZVN0cmVhbS5vdmVycmlkZTsKICAgIC8vICAgICBvdmVycmlkZU9uUmVtb3ZlU3RyZWFtLm92ZXJyaWRlT2JqID0gdW5kZWZpbmVkOwogICAgLy8gfQp9CgpmdW5jdGlvbiBvblJlbW92ZVN0cmVhbShzdHJlYW0pIHsKICAgIGRvQ2xlYW5BZnRlclN0cmVhbUNsb3NlKHRoaXMuX3NlcnZpY2UsIHN0cmVhbSk7CgogICAgb25SZW1vdmVTdHJlYW0ub3ZlcnJpZGUgJiYgb25SZW1vdmVTdHJlYW0ub3ZlcnJpZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gZG9DbGVhbkFmdGVyU3RyZWFtQ2xvc2Uoc2VydmljZSwgc3RyZWFtKSB7CiAgICBkaXNDb250cm9sbGVkKHNlcnZpY2UsIHN0cmVhbS5pZCk7CgogICAgdmFyIGNvbnRyb2xzID0gZ2V0UmVtb3RlQ29udHJvbChzZXJ2aWNlLCBzdHJlYW0pOwogICAgY29udHJvbHMgJiYgX3V0aWwuZm9yRWFjaChjb250cm9scywgZnVuY3Rpb24gKF9pLCBjb250cm9sKSB7CiAgICAgICAgY29udHJvbC5fZnJlZSAmJiBjb250cm9sLl9mcmVlKCk7CiAgICB9KTsKCiAgICBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VydmljZS5jdXJyZW50Ll9fcmVtb3RlQ29udHJvbHMsIHN0cmVhbS5pZCk7Cn0KCmZ1bmN0aW9uIG92ZXJyaWRlT25IdW5ndXAoc2VydmljZSkgewogICAgb3ZlcnJpZGVPbkh1bmd1cC5fb3ZlcnJpZGVDb3VudCsrOwogICAgaWYgKG92ZXJyaWRlT25IdW5ndXAub3ZlcnJpZGVPYmogPT09IHNlcnZpY2UpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgb3ZlcnJpZGVPbkh1bmd1cC5vdmVycmlkZU9iaiA9IHNlcnZpY2U7CiAgICB2YXIgb3ZlcnJpZGUgPSBzZXJ2aWNlLm9uSHVuZ3VwOwoKICAgIHNlcnZpY2Uub25IdW5ndXAgPSBmdW5jdGlvbiBvbkh1bmd1cChzdHJlYW0pIHsKICAgICAgICBkb0NsZWFuQWZ0ZXJTdHJlYW1DbG9zZShzZXJ2aWNlLCBzdHJlYW0pOwogICAgICAgIG92ZXJyaWRlICYmIG92ZXJyaWRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9LmJpbmQoc2VydmljZSk7Cn0Kb3ZlcnJpZGVPbkh1bmd1cC5fb3ZlcnJpZGVDb3VudCA9IDA7CgpmdW5jdGlvbiBvdmVycmlkZU9uUmVtb3RlUGFubmVsQ29udHJvbChzZXJ2aWNlLCBjYWxsYmFja3MpIHsKICAgIG92ZXJyaWRlT25SZW1vdGVQYW5uZWxDb250cm9sLl9vdmVycmlkZUNvdW50Kys7CiAgICBpZiAob3ZlcnJpZGVPblJlbW90ZVBhbm5lbENvbnRyb2wub3ZlcnJpZGVPYmogPT09IHNlcnZpY2UpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgb3ZlcnJpZGVPblJlbW90ZVBhbm5lbENvbnRyb2wub3ZlcnJpZGVPYmogPSBzZXJ2aWNlOwogICAgdmFyIG92ZXJyaWRlID0gc2VydmljZS5fb25SZW1vdGVQYW5uZWxDb250cm9sOwoKICAgIHNlcnZpY2UuX29uUmVtb3RlUGFubmVsQ29udHJvbCA9IGZ1bmN0aW9uIF9vblJlbW90ZVBhbm5lbENvbnRyb2woZXZ0KSB7CiAgICAgICAgaGFuZGxlUGFubmVsUmVtb3RlTWVzc2FnZSh0aGlzLCBldnQsIGZhbHNlLCBjYWxsYmFja3MpOwogICAgICAgIG92ZXJyaWRlICYmIG92ZXJyaWRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9LmJpbmQoc2VydmljZSk7Cn0Kb3ZlcnJpZGVPblJlbW90ZVBhbm5lbENvbnRyb2wuX292ZXJyaWRlQ291bnQgPSAwOwoKZnVuY3Rpb24gcmVzZXRPblJlbW90ZVBhbm5lbENvbnRyb2woc2VydmljZSkgewogICAgLy8gb3ZlcnJpZGVPblJlbW90ZVBhbm5lbENvbnRyb2wuX292ZXJyaWRlQ291bnQtLTsKICAgIC8vCiAgICAvLyBpZihvdmVycmlkZU9uUmVtb3RlUGFubmVsQ29udHJvbC5fb3ZlcnJpZGVDb3VudCA9PT0gMCl7CiAgICAvLyAgICAgc2VydmljZS5fb25SZW1vdGVQYW5uZWxDb250cm9sID0gX29uUmVtb3RlUGFubmVsQ29udHJvbC5vdmVycmlkZTsKICAgIC8vICAgICBvdmVycmlkZU9uUmVtb3RlUGFubmVsQ29udHJvbC5vdmVycmlkZU9iaiA9IHVuZGVmaW5lZDsKICAgIC8vIH0KfQoKZnVuY3Rpb24gY29kZUN0cmxNZXNzYWdlKHNlcnZpY2UsIHN0cmVhbSwgY3RybCkgewogICAgdmFyIGFjdGlvbnMgPSBbXTsKCiAgICBjdHJsICYmIF91dGlsLmZvckVhY2goY3RybC5hY3Rpb25zLCBmdW5jdGlvbiAoaSwgbSkgewogICAgICAgIG0ueHkgJiYgYWN0aW9ucy5wdXNoKHsKICAgICAgICAgICAgeDogTWF0aC5yb3VuZChtLnh5LnggKiAxMDAwMCksCiAgICAgICAgICAgIHk6IE1hdGgucm91bmQobS54eS55ICogMTAwMDApLAogICAgICAgICAgICBvcGVyOiBtLm9wZXIsCiAgICAgICAgICAgIGJ0bjogbS5idG4sCiAgICAgICAgICAgIHNuOiBtLnNuLAogICAgICAgICAgICBfdGltZTogbS5fdGltZQogICAgICAgIH0pOwoKICAgICAgICBtLnh5IHx8IGFjdGlvbnMucHVzaCh7CiAgICAgICAgICAgIG9wZXI6IG0ub3BlciwKICAgICAgICAgICAgYnRuOiBtLmJ0biwKICAgICAgICAgICAgc246IG0uc24sCiAgICAgICAgICAgIF90aW1lOiBtLl90aW1lCiAgICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgYXJnID0gewogICAgICAgIG9wMjogMzAsCiAgICAgICAgZXZ0OiAwLAogICAgICAgIHN0cmVhbUlkOiBzdHJlYW0uaWQsCiAgICAgICAgYWN0aW9uczogYWN0aW9ucywKICAgICAgICBjSWQ6IGN0cmwuY0lkCiAgICB9OwoKICAgIHJldHVybiBzZXJ2aWNlLmN1cnJlbnQubmV3TWVzc2FnZSh7CiAgICAgICAgb3A6IDEwMDIsCiAgICAgICAgbWVtSWQ6IHN0cmVhbS5vd25lci5pZCwKICAgICAgICBhcmc6IEpTT04uc3RyaW5naWZ5KGFyZyksCiAgICAgICAgX3JlcU9wczogWzEwMDIzMF0KICAgIH0pOwp9CgpmdW5jdGlvbiBkZWNvZGVDdHJsTWVzc2FnZShldnQpIHsKICAgIGlmICh0eXBlb2YgZXZ0LmFyZyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBldnQuYXJnID0gSlNPTi5wYXJzZShldnQuYXJnKTsKICAgIH0KCiAgICB2YXIgYXJnID0gZXZ0LmFyZzsKCiAgICB2YXIgbW91c2UgPSBbXSwKICAgICAgICBrZXlib2FyZCA9IFtdOwogICAgYXJnICYmIGFyZy5hY3Rpb25zICYmIF91dGlsLmZvckVhY2goYXJnLmFjdGlvbnMsIGZ1bmN0aW9uIChpLCBtKSB7CiAgICAgICAgbS54ICE9PSB1bmRlZmluZWQgJiYgbS55ICE9PSB1bmRlZmluZWQgJiYgbW91c2UucHVzaCh7CiAgICAgICAgICAgIHh5OiB7IHg6IG0ueCAvIDEwMDAwLCB5OiBtLnkgLyAxMDAwMCB9LAogICAgICAgICAgICBvcGVyOiBtLm9wZXIsCiAgICAgICAgICAgIGJ0bjogbS5idG4sCiAgICAgICAgICAgIHNuOiBtLnNuLAogICAgICAgICAgICBfdGltZTogbS5fdGltZQogICAgICAgIH0pOwoKICAgICAgICAobS54ID09PSB1bmRlZmluZWQgfHwgbS55ID09PSB1bmRlZmluZWQpICYmIGtleWJvYXJkLnB1c2goewogICAgICAgICAgICBvcGVyOiBtLm9wZXIsCiAgICAgICAgICAgIGJ0bjogbS5idG4sCiAgICAgICAgICAgIHNuOiBtLnNuLAogICAgICAgICAgICBfdGltZTogbS5fdGltZQogICAgICAgIH0pOwogICAgfSk7CgogICAgYXJnLm1vdXNlID0gbW91c2U7CiAgICBhcmcua2V5Ym9hcmQgPSBrZXlib2FyZDsKfQoKdmFyIHJlbW90ZUNvbnRyb2xTZXFubyA9IDA7CnZhciBSZW1vdGVDb250cm9sID0gX3V0aWwucHJvdG90eXBlRXh0ZW5kKHsKICAgIC8vaWQ6CiAgICAvL19zZXJ2aWNlOgogICAgLy9jb250cm9sbGVyOgogICAgLy9fY3RybFN0cmVhbToKICAgIC8vX2NJZDoKICAgIC8vX3JlcWV2dDoKICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICB0aGlzLmlkID0gcmVtb3RlQ29udHJvbFNlcW5vKys7CiAgICB9LAogICAgYWNjZXB0OiBmdW5jdGlvbiBhY2NlcHQobW91c2VUcmFjaywga2V5Ym9hcmQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIGlmIChzZWxmLmhhc090aGVyQ29udHJvbCgpKSB7CiAgICAgICAgICAgIHNlbGYuYnVzeSgpOwoKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiT3RoZXIgaGFzIGJlZW4gY29udHJvbGVkLiIpOwogICAgICAgICAgICB0aHJvdyAiT3RoZXIgaGFzIGJlZW4gY29udHJvbGVkLiI7CiAgICAgICAgfQoKICAgICAgICB2YXIgcHJlQWNwdCA9IGZhbHNlOwoKICAgICAgICB2YXIgcHJlUmVtb3RlQ29udHJvbHMgPSBnZXRSZW1vdGVDb250cm9sKHRoaXMuX3NlcnZpY2UsIHRoaXMuX2N0cmxTdHJlYW0sIHRoaXMuX2NvbnRyb2xsZXIpOyAvLyDojrflj5bmraTliY3nmoRyZW1vdGVjb250cm9sCiAgICAgICAgcHJlUmVtb3RlQ29udHJvbHMgJiYgX3V0aWwuZm9yRWFjaChwcmVSZW1vdGVDb250cm9scywgZnVuY3Rpb24gKF9pbmRleCwgcHJlUkMpIHsKICAgICAgICAgICAgaWYgKHByZVJDLmlkIDwgc2VsZi5pZCkgewogICAgICAgICAgICAgICAgcHJlUkMuX2ZyZWUoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHByZUFjcHQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmIChwcmVBY3B0KSB7CiAgICAgICAgICAgIC8v5bey57uP5ZCM5oSP5pyA5paw55qE5o6n5Yi244CC5b+955Wl6L+Z5LiqCiAgICAgICAgICAgIHNlbGYuX2ZyZWUoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlbW90ZUNvbnRyb2xzID0gdGhpcy5fc2VydmljZS5jdXJyZW50Ll9fcmVtb3RlQ29udHJvbHMgfHwgKHRoaXMuX3NlcnZpY2UuY3VycmVudC5fX3JlbW90ZUNvbnRyb2xzID0ge30pOwogICAgICAgIHJlbW90ZUNvbnRyb2xzW3NlbGYuaWRdID0gc2VsZjsKCiAgICAgICAgY29udHJvbGxpbmcodGhpcywgbW91c2VUcmFjaywga2V5Ym9hcmQpOwoKICAgICAgICByc3BSZW1vdGVDb250cm9sKHRoaXMuX3NlcnZpY2UsIHRoaXMuX3JlcWV2dCwgMCk7CiAgICB9LAoKICAgIGNvbnRyb2xsaW5nOiBmdW5jdGlvbiBjb250cm9sbGluZygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIC8v5a2Y5Zyo5ZCv5Yqo5Lq65o6n5Yi2CiAgICAgICAgdmFyIGNvbnRyb2xzID0gW107CiAgICAgICAgdmFyIHJlbW90ZUNvbnRyb2xzID0gZ2V0UmVtb3RlQ29udHJvbCh0aGlzLl9zZXJ2aWNlLCB0aGlzLl9jdHJsU3RyZWFtKTsKICAgICAgICByZW1vdGVDb250cm9scyAmJiBfdXRpbC5mb3JFYWNoKHJlbW90ZUNvbnRyb2xzLCBmdW5jdGlvbiAoX2luZGV4LCBvdGhlcikgewogICAgICAgICAgICBpZiAob3RoZXIuX2NvbnRyb2xsZXIubWVtTmFtZSA9PT0gc2VsZi5fY29udHJvbGxlci5tZW1OYW1lKSB7CiAgICAgICAgICAgICAgICBjb250cm9scy5wdXNoKG90aGVyKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gY29udHJvbHMgJiYgY29udHJvbHMubGVuZ3RoID8gY29udHJvbHMgOiB1bmRlZmluZWQ7CiAgICB9LAoKICAgIGhhc090aGVyQ29udHJvbDogZnVuY3Rpb24gaGFzT3RoZXJDb250cm9sKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgLy/lrZjlnKjlkK/liqjkurrmjqfliLYKICAgICAgICB2YXIgaGFzT3RoZXJDb250cm9sID0gZmFsc2U7CiAgICAgICAgdmFyIGNvbnRyb2xzID0gZ2V0UmVtb3RlQ29udHJvbCh0aGlzLl9zZXJ2aWNlLCB0aGlzLl9jdHJsU3RyZWFtKTsKICAgICAgICBjb250cm9scyAmJiBfdXRpbC5mb3JFYWNoKGNvbnRyb2xzLCBmdW5jdGlvbiAoX2luZGV4LCBvdGhlcikgewogICAgICAgICAgICBpZiAob3RoZXIuX2NvbnRyb2xsZXIubWVtTmFtZSAhPSBzZWxmLl9jb250cm9sbGVyLm1lbU5hbWUpIHsKICAgICAgICAgICAgICAgIGhhc090aGVyQ29udHJvbCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIGhhc090aGVyQ29udHJvbDsKICAgIH0sCgogICAgYnVzeTogZnVuY3Rpb24gYnVzeSgpIHsKICAgICAgICByc3BSZW1vdGVDb250cm9sKHRoaXMuX3NlcnZpY2UsIHRoaXMuX3JlcWV2dCwgLTQwMyk7CiAgICB9LAoKICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KCkgewogICAgICAgIHJzcFJlbW90ZUNvbnRyb2wodGhpcy5fc2VydmljZSwgdGhpcy5fcmVxZXZ0LCAtNDAyKTsKICAgIH0sCgogICAgX2ZyZWU6IGZ1bmN0aW9uIF9mcmVlKCkgewogICAgICAgIF91dGlsLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLl9zZXJ2aWNlLmN1cnJlbnQuX19yZW1vdGVDb250cm9scywgdGhpcy5pZCk7CiAgICB9LAoKICAgIGZvcmNlRGlzY29ubmVjdDogZnVuY3Rpb24gZm9yY2VEaXNjb25uZWN0KCkgewogICAgICAgIHZhciByZW1vdGVDb250cm9scyA9IGdldFJlbW90ZUNvbnRyb2wodGhpcy5fc2VydmljZSwgdGhpcy5fY3RybFN0cmVhbSk7CiAgICAgICAgaWYgKHJlbW90ZUNvbnRyb2xzKSB7CiAgICAgICAgICAgIF91dGlsLmZvckVhY2gocmVtb3RlQ29udHJvbHMsIGZ1bmN0aW9uIChfaW5kZXgsIHJlbW90ZUNvbnRyb2wpIHsKICAgICAgICAgICAgICAgIHJlbW90ZUNvbnRyb2wuX2ZyZWUgJiYgcmVtb3RlQ29udHJvbC5fZnJlZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgX2xvZ2dlci5pbmZvKCJyZW1vdGUgY29udHJvbCBmb3JjZSBkaXNjb25uZWN0Iik7CiAgICB9Cn0pOwoKZnVuY3Rpb24gcnNwUmVtb3RlQ29udHJvbChzZXJ2aWNlLCBldnQsIHJlc3VsdCkgewogICAgc2VydmljZS5jdXJyZW50Lm1lc3NhZ2UoewogICAgICAgIG9wOiAxMDAxLAogICAgICAgIHRzeElkOiBldnQudHN4SWQsCiAgICAgICAgbWVtSWQ6IGV2dC5tZW1JZCwKICAgICAgICBhcmc6IEpTT04uc3RyaW5naWZ5KHsgY0lkOiBldnQuYXJnLmNJZCB9KSwKICAgICAgICByZXN1bHQ6IHJlc3VsdAogICAgfSkucG9zdCgpOwp9CgpmdW5jdGlvbiBub3RBbGxvd0NvbnRyb2woc2VydmljZSwgZXZ0KSB7CiAgICByc3BSZW1vdGVDb250cm9sKHNlcnZpY2UsIGV2dCwgLTQwNSk7Cn0KCmZ1bmN0aW9uIHNlbGVjdFJlbW90ZUNvbnRyb2xCeU1lbUlkKHNlcnZpY2UsIGNvbnRyb2xsZXJNZW1JZCwgc3RyZWFtKSB7CiAgICB2YXIgcmVtb3RlQ29udHJvbHMgPSBbXTsKICAgIHNlcnZpY2UuY3VycmVudC5fX3JlbW90ZUNvbnRyb2xzICYmIF91dGlsLmZvckVhY2goc2VydmljZS5jdXJyZW50Ll9fcmVtb3RlQ29udHJvbHMsIGZ1bmN0aW9uIChfcmVtb3RlQ29udHJvbElkLCBfcmVtb3RlQ29udHJvbCkgewogICAgICAgIGlmICgoIXN0cmVhbSB8fCBfcmVtb3RlQ29udHJvbC5fY3RybFN0cmVhbS5pZCA9PT0gc3RyZWFtLmlkKSAmJiAoIWNvbnRyb2xsZXJNZW1JZCB8fCBfcmVtb3RlQ29udHJvbC5fY29udHJvbGxlci5pZCA9PT0gY29udHJvbGxlck1lbUlkKSkgewogICAgICAgICAgICByZW1vdGVDb250cm9scy5wdXNoKF9yZW1vdGVDb250cm9sKTsKICAgICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gcmVtb3RlQ29udHJvbHM7Cn0KCmZ1bmN0aW9uIGdldFJlbW90ZUNvbnRyb2woc2VydmljZSwgc3RyZWFtLCBjb250cm9sbGVyLCBjSWQpIHsKICAgIHZhciByZW1vdGVDb250cm9scyA9IFtdOwogICAgc2VydmljZS5jdXJyZW50Ll9fcmVtb3RlQ29udHJvbHMgJiYgX3V0aWwuZm9yRWFjaChzZXJ2aWNlLmN1cnJlbnQuX19yZW1vdGVDb250cm9scywgZnVuY3Rpb24gKF9yZW1vdGVDb250cm9sSWQsIF9yZW1vdGVDb250cm9sKSB7CiAgICAgICAgaWYgKCghc3RyZWFtIHx8IF9yZW1vdGVDb250cm9sLl9jdHJsU3RyZWFtLmlkID09PSBzdHJlYW0uaWQpICYmICghY29udHJvbGxlciB8fCBfcmVtb3RlQ29udHJvbC5fY29udHJvbGxlci5tZW1OYW1lID09PSBjb250cm9sbGVyLm1lbU5hbWUpICYmICghY0lkIHx8IF9yZW1vdGVDb250cm9sLl9jSWQgPT09IGNJZCkpIHsKICAgICAgICAgICAgcmVtb3RlQ29udHJvbHMucHVzaChfcmVtb3RlQ29udHJvbCk7CiAgICAgICAgfQogICAgfSk7CgogICAgcmV0dXJuIHJlbW90ZUNvbnRyb2xzOwp9CgpmdW5jdGlvbiBoYW5kbGVQYW5uZWxSZW1vdGVNZXNzYWdlKHNlcnZpY2UsIGV2dCwgbG9jYXRlZCwgY2FsbGJhY2tzKSB7CiAgICBkZWNvZGVDdHJsTWVzc2FnZShldnQpOwoKICAgIHZhciBhcmcgPSBldnQuYXJnOwogICAgdmFyIGNJZCA9IGFyZy5jSWQ7CgogICAgdmFyIHN0cmVhbUlkID0gYXJnLnN0cmVhbUlkOwoKICAgIHZhciBtZW1iZXIgPSBzZXJ2aWNlLmdldE1lbWJlckJ5SWQoZXZ0Lm1lbUlkKTsKICAgIHZhciBzdHJlYW0gPSBzZXJ2aWNlLmdldFN0cmVhbUJ5SWQoc3RyZWFtSWQpOwoKICAgIGZ1bmN0aW9uIHJlY3ZSZW1vdGVDb250cm9sKCkgewogICAgICAgIGlmICghbWVtYmVyIHx8ICFzdHJlYW0pIHsKICAgICAgICAgICAgbm90QWxsb3dDb250cm9sKHNlcnZpY2UsIGV2dCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFyZy5ldnQgPT09IDEpIHsKICAgICAgICAgICAgLy8g5o6n5Yi255Sz6K+3CiAgICAgICAgICAgIHZhciByZW1vdGVDb250cm9sID0gbmV3IFJlbW90ZUNvbnRyb2woewogICAgICAgICAgICAgICAgX3NlcnZpY2U6IHNlcnZpY2UsCiAgICAgICAgICAgICAgICBfY29udHJvbGxlcjogbWVtYmVyLAogICAgICAgICAgICAgICAgX2N0cmxTdHJlYW06IHN0cmVhbSwKICAgICAgICAgICAgICAgIF9jSWQ6IGNJZCwKICAgICAgICAgICAgICAgIF9yZXFldnQ6IGV2dCwKICAgICAgICAgICAgICAgIF9jYWxsYmFja3M6IGNhbGxiYWNrcwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChyZW1vdGVDb250cm9sLmhhc090aGVyQ29udHJvbCgpKSB7CiAgICAgICAgICAgICAgICByZW1vdGVDb250cm9sLmJ1c3koKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgY3RybHM7CiAgICAgICAgICAgIGlmIChjdHJscyA9IHJlbW90ZUNvbnRyb2wuY29udHJvbGxpbmcoKSkgewogICAgICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChjdHJscywgZnVuY3Rpb24gKF9pbmRleCwgY3RybCkgewogICAgICAgICAgICAgICAgICAgIGN0cmwuX2NJZCA9IGNJZDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJzcFJlbW90ZUNvbnRyb2woc2VydmljZSwgZXZ0LCAwKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjYWxsYmFja3MgJiYgY2FsbGJhY2tzLm9uSGFzUmVtb3RlQ29udHJvbCAmJiBjYWxsYmFja3Mub25IYXNSZW1vdGVDb250cm9sKHN0cmVhbSwgbWVtYmVyLCByZW1vdGVDb250cm9sKTsKCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFyZy5ldnQgPT09IDIpIHsKICAgICAgICAgICAgLy8g5o6n5Yi26YeK5pS+CiAgICAgICAgICAgIHZhciByZW1vdGVDb250cm9scyA9IGdldFJlbW90ZUNvbnRyb2woc2VydmljZSwgc3RyZWFtLCBtZW1iZXIsIGNJZCk7CiAgICAgICAgICAgIGlmIChyZW1vdGVDb250cm9scykgewogICAgICAgICAgICAgICAgX3V0aWwuZm9yRWFjaChyZW1vdGVDb250cm9scywgZnVuY3Rpb24gKF9pbmRleCwgcmVtb3RlQ29udHJvbCkgewogICAgICAgICAgICAgICAgICAgIHJlbW90ZUNvbnRyb2wuX2ZyZWUgJiYgcmVtb3RlQ29udHJvbC5fZnJlZSgpOwogICAgICAgICAgICAgICAgICAgIHJzcFJlbW90ZUNvbnRyb2woc2VydmljZSwgZXZ0LCAwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjYWxsYmFja3MgJiYgY2FsbGJhY2tzLm9uUmVtb3RlRnJlZUNvbnRyb2wgJiYgY2FsbGJhY2tzLm9uUmVtb3RlRnJlZUNvbnRyb2woc3RyZWFtLCBtZW1iZXIsIGNJZCk7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgaWYgKCFsb2NhdGVkICYmIHJlY3ZSZW1vdGVDb250cm9sKCkpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHJlbW90ZUNvbnRyb2xzID0gZ2V0UmVtb3RlQ29udHJvbChzZXJ2aWNlLCBzdHJlYW0sIG1lbWJlciwgY0lkKTsKICAgIGlmICghbG9jYXRlZCAmJiAoIXJlbW90ZUNvbnRyb2xzIHx8IHJlbW90ZUNvbnRyb2xzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICBub3RBbGxvd0NvbnRyb2woc2VydmljZSwgZXZ0KTsKICAgIH0KCiAgICByZW1vdGVDb250cm9scyAmJiBfdXRpbC5mb3JFYWNoKHJlbW90ZUNvbnRyb2xzLCBmdW5jdGlvbiAoX2luZGV4LCBfX2N0cmwpIHsKICAgICAgICBfX2N0cmwuX2xhc3RSZWN2VGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB9KTsKCiAgICBpZiAobG9jYXRlZCkgewogICAgICAgIHZhciByZW1vdGVDb250cm9sID0gc2VydmljZS5jdXJyZW50Ll9fcmVtb3RlQ29udHJvbHNbc3RyZWFtLmlkXTsKICAgICAgICByZW1vdGVDb250cm9scyA9IHJlbW90ZUNvbnRyb2xzIHx8IFtdOwoKICAgICAgICByZW1vdGVDb250cm9sICYmIHJlbW90ZUNvbnRyb2xzLnB1c2gocmVtb3RlQ29udHJvbCk7CiAgICB9CgogICAgX3V0aWwuZm9yRWFjaChyZW1vdGVDb250cm9scywgZnVuY3Rpb24gKF9pLCBjdHJsKSB7CiAgICAgICAgdmFyIG1heFNOID0gMDsKCiAgICAgICAgdmFyIHRyaWdnZXJzID0gYXJnLm1vdXNlOwogICAgICAgIGlmICh0cmlnZ2VycyAmJiB0cmlnZ2Vycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBfdXRpbC5mb3JFYWNoKHRyaWdnZXJzLCBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbS5zbiA+IG1heFNOKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1heFNOID0gZWxlbS5zbjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLm9wZXIgPT09IE1vdXNlVHJpZ2dlci5CVE4uTU9WRSkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHJsLm1vdXNlVHJhY2sgJiYgY3RybC5tb3VzZVRyYWNrLnRyYWNrKGVsZW0ueHkpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwubW91c2VUcmFjayAmJiBjdHJsLm1vdXNlVHJhY2sudHJpZ2dlcihuZXcgTW91c2VUcmlnZ2VyKGVsZW0pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgdHJpZ2dlcnMgPSBhcmcua2V5Ym9hcmQ7CiAgICAgICAgaWYgKHRyaWdnZXJzICYmIHRyaWdnZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF91dGlsLmZvckVhY2godHJpZ2dlcnMsIGZ1bmN0aW9uIChpbmRleCwgZWxlbSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLnNuID4gbWF4U04pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF4U04gPSBlbGVtLnNuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGN0cmwua2V5Ym9hcmQpIGlmIChlbGVtLm9wZXIgPT09IE1vdXNlVHJpZ2dlci5CVE4uS0VZQk9BUkRfRE9XTikgewogICAgICAgICAgICAgICAgICAgICAgICBjdHJsLmtleWJvYXJkLm9uS2V5RG93bihlbGVtLmJ0bik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtLm9wZXIgPT09IE1vdXNlVHJpZ2dlci5CVE4uS0VZQk9BUkRfVVApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5rZXlib2FyZC5vbktleVVwKGVsZW0uYnRuKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgX2xvZ2dlci53YXJuKGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobG9jYXRlZCA9PT0gdHJ1ZSkgewogICAgICAgICAgICAvL+iHquS4quWEvyDmsqHpgJrov4cgc2Vzc2lvbuWPkemAgQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByc3AoKSB7CiAgICAgICAgICAgIHNlcnZpY2UuY3VycmVudC5tZXNzYWdlKHsKICAgICAgICAgICAgICAgIG9wOiAxMDAxLAogICAgICAgICAgICAgICAgdHN4SWQ6IGV2dC50c3hJZCwKICAgICAgICAgICAgICAgIG1lbUlkOiBldnQubWVtSWQsCiAgICAgICAgICAgICAgICBhcmc6IEpTT04uc3RyaW5naWZ5KHsgc246IG1heFNOIH0pLAogICAgICAgICAgICAgICAgcmVzdWx0OiAwCiAgICAgICAgICAgIH0pLnBvc3QoZnVuY3Rpb24gKHJzcCkgewogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygiU2VuZCByZW1vdGUgY29udHJvbCByZXNwb25zZS4gdGhlIHJlc3VsdCA9ICIsIHJzcC5yZXN1bHQsIHJzcC5tc2cgfHwgIiIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJzcCgpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgX2xvZ2dlci53YXJuKGUpOwogICAgICAgIH0KICAgIH0pOwp9CgpmdW5jdGlvbiBfb25Nb3VzZUVudGVyMihzZXJ2aWNlLCBzdHJlYW1JZCwgdmlkZW9UYXJnZXQsIF9vbk1vdXNlRW50ZXIsIG9uQ2FsbGJhY2tzKSB7CiAgICBfb25Nb3VzZUVudGVyICYmIF9vbk1vdXNlRW50ZXIoKTsKfQoKZnVuY3Rpb24gX29uTW91c2VFeGl0MihzZXJ2aWNlLCBzdHJlYW1JZCwgdmlkZW9UYXJnZXQsIF9vbk1vdXNlRXhpdCwgb25DYWxsYmFja3MpIHsKICAgIF9vbk1vdXNlRXhpdCAmJiBfb25Nb3VzZUV4aXQoKTsKfQoKZnVuY3Rpb24gX29uTW91c2VNb3ZlMihzZXJ2aWNlLCBzdHJlYW1JZCwgdmlkZW9UYXJnZXQsIGV2ZW50WFksIGxhc3RUcmlnZ2VyLCBfb25Nb3VzZU1vdmUsIG9uQ2FsbGJhY2tzKSB7CiAgICB2YXIgcG9zID0gc2VydmljZS5ldmVudFhZQXRNZWRpYShldmVudFhZLCB2aWRlb1RhcmdldCk7CiAgICBpZiAoIXBvcykgewogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBwb3MgPSB7CiAgICAgICAgeDogcG9zLnggLyBwb3Mud2lkdGgsCiAgICAgICAgeTogcG9zLnkgLyBwb3MuaGVpZ2h0CiAgICB9OwoKICAgIC8vX2xvZ2dlci5pbmZvKHBvcy54LCBwb3MueSk7CgogICAgc2VuZFBhbm5lbE1lc3NhZ2Uoc2VydmljZSwgeyB4eTogcG9zLCBvcGVyOiBNb3VzZVRyaWdnZXIuQlROLk1PVkUsIHNpZDogc3RyZWFtSWQgfSwgb25DYWxsYmFja3MpOwogICAgX29uTW91c2VNb3ZlICYmIF9vbk1vdXNlTW92ZShwb3MsIGxhc3RUcmlnZ2VyKTsKfQoKZnVuY3Rpb24gX29uTW91c2VCdXR0b24yKHNlcnZpY2UsIHN0cmVhbUlkLCB2aWRlb1RhcmdldCwgdHJpZ2dlciwgbGFzdFRyaWdnZXIsIF9vbk1vdXNlQnV0dG9uLCBvbkNhbGxiYWNrcykgewogICAgdHJpZ2dlci54eSA9IHNlcnZpY2UuZXZlbnRYWUF0TWVkaWEodHJpZ2dlci54eSwgdmlkZW9UYXJnZXQpOwogICAgaWYgKCF0cmlnZ2VyLnh5KSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRyaWdnZXIueHkgPSB7CiAgICAgICAgeDogdHJpZ2dlci54eS54IC8gdHJpZ2dlci54eS53aWR0aCwKICAgICAgICB5OiB0cmlnZ2VyLnh5LnkgLyB0cmlnZ2VyLnh5LmhlaWdodAogICAgfTsKCiAgICBfdXRpbC5leHRlbmQodHJpZ2dlciwgeyBzaWQ6IHN0cmVhbUlkIH0pOwoKICAgIHNlbmRQYW5uZWxNZXNzYWdlKHNlcnZpY2UsIHRyaWdnZXIsIG9uQ2FsbGJhY2tzKTsKICAgIF9vbk1vdXNlQnV0dG9uICYmIF9vbk1vdXNlQnV0dG9uKHRyaWdnZXIsIGxhc3RUcmlnZ2VyKTsKfQoKZnVuY3Rpb24gb25LZXlib2FyZChzZXJ2aWNlLCBzdHJlYW1JZCwgb3BlciwgYnRuLCBfb25LZXlib2FyZCwgb25DYWxsYmFja3MpIHsKICAgIHNlbmRQYW5uZWxNZXNzYWdlKHNlcnZpY2UsIHsgb3Blcjogb3BlciwgYnRuOiBidG4sIHNpZDogc3RyZWFtSWQgfSwgb25DYWxsYmFja3MpOwogICAgX29uS2V5Ym9hcmQgJiYgX29uS2V5Ym9hcmQob3BlciwgYnRuKTsKfQoKZnVuY3Rpb24gbWFza1ZpZGVvKHZpZGVvVGFyZ2V0KSB7CiAgICB2YXIgbWFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgbWFza0Rpdi5zdHlsZSA9IHZpZGVvVGFyZ2V0LnN0eWxlOwogICAgbWFza0Rpdi5zdHlsZS5iYWNrZ3JvdW5kID0gInRyYW5zcGFyZW50IjsKCiAgICB2aWRlb1RhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG1hc2tEaXYpOwp9CgpmdW5jdGlvbiBzZW5kUGFubmVsTWVzc2FnZShzZXJ2aWNlLCB0cmlnZ2VyLCBvbkNhbGxiYWNrcykgewogICAgdmFyIHN0cmVhbUlkID0gdHJpZ2dlci5zaWQ7CgogICAgdmFyIHN0cmVhbSA9IHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChzdHJlYW1JZCk7CgogICAgdmFyIGN0cmw7CiAgICBpZiAoc2VydmljZS5jdXJyZW50Ll9fcmVtb3RlQ29udHJvbHMgJiYgKGN0cmwgPSBzZXJ2aWNlLmN1cnJlbnQuX19yZW1vdGVDb250cm9sc1tzdHJlYW1JZF0pKSB7CiAgICAgICAgaGFuZGxlUGFubmVsUmVtb3RlTWVzc2FnZShzZXJ2aWNlLCBjb2RlQ3RybE1lc3NhZ2Uoc2VydmljZSwgc3RyZWFtLCB7IGFjdGlvbnM6IFt0cmlnZ2VyXSB9KSwgdHJ1ZSk7CiAgICB9CgogICAgdmFyIF9idWZmZXIgPSBzZXJ2aWNlLmN1cnJlbnQuX19wYW5uZWxCdWZmZXJzW3N0cmVhbUlkXTsKCiAgICB2YXIgcHJlVW5jbGVhclNpemUgPSBfYnVmZmVyLmdldFVuY2xlYXJTaXplKCk7CiAgICBfYnVmZmVyLnB1dCh0cmlnZ2VyKTsKCiAgICBpZiAocHJlVW5jbGVhclNpemUgPCBlbWVkaWEuY29uZmlnLmFsbG93U2VuZFdoZW5MZXNzVGhhbikgewogICAgICAgIHZhciBfZ2V0QW5kU2VuZCA9IGZ1bmN0aW9uIF9nZXRBbmRTZW5kKCkgewogICAgICAgICAgICB2YXIgZXZ0cyA9IF9idWZmZXIuZ2V0VW5yZWFkKCk7CgogICAgICAgICAgICB2YXIgX21heFNOID0gMDsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGV2dHMgJiYgaSA8IGV2dHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBldnQgPSBldnRzW2ldOwogICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKGV2dCwgInNpZCIpOwoKICAgICAgICAgICAgICAgIF9tYXhTTiA8IGV2dC5zbiAmJiAoX21heFNOID0gZXZ0LnNuKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCFldnRzIHx8IGV2dHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoc3RyZWFtSWQsICJidWZmZXIgcmVtYWluOiIsIF9idWZmZXIuZ2V0VW5jbGVhclNpemUoKSwgIiwgc2VuZCBldnQ6IiwgZXZ0cy5sZW5ndGgpOwoKICAgICAgICAgICAgc2VydmljZS5jdXJyZW50LnBvc3RNZXNzYWdlKGNvZGVDdHJsTWVzc2FnZShzZXJ2aWNlLCBzdHJlYW0sIHsgYWN0aW9uczogZXZ0cywgY0lkOiBfYnVmZmVyLl9jSWQgfSksIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICAgICAgICAgIGlmIChyc3AucmVzdWx0ID09PSAtNDAyKSB7CiAgICAgICAgICAgICAgICAgICAgLy/lr7nmlrkg5ouS57ud5o6n5Yi2CiAgICAgICAgICAgICAgICAgICAgb25DYWxsYmFja3MgJiYgb25DYWxsYmFja3Mub25SZWplY3QgJiYgb25DYWxsYmFja3Mub25SZWplY3Qoc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocnNwLnJlc3VsdCA9PT0gLTQwMykgewogICAgICAgICAgICAgICAgICAgIC8v5a+55pa5IOato+iiq+aOp+WItu+8jOW/mQogICAgICAgICAgICAgICAgICAgIG9uQ2FsbGJhY2tzICYmIG9uQ2FsbGJhY2tzLm9uQnVzeSAmJiBvbkNhbGxiYWNrcy5vbkJ1c3koc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocnNwLnJlc3VsdCA9PT0gLTQwOCkgewogICAgICAgICAgICAgICAgICAgIC8v6LaF5pe2CiAgICAgICAgICAgICAgICAgICAgb25DYWxsYmFja3MgJiYgb25DYWxsYmFja3Mub25SZW1vdGVDb250cm9sVGltZW91dCAmJiBvbkNhbGxiYWNrcy5vblJlbW90ZUNvbnRyb2xUaW1lb3V0KHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJzcC5yZXN1bHQgPT09IC01MDcgfHwgcnNwLnJlc3VsdCA9PT0gLTQwNSkgewogICAgICAgICAgICAgICAgICAgIC8v5LiN6KKr5pSv5oyBCiAgICAgICAgICAgICAgICAgICAgX2J1ZmZlci5jbGVhclJlYWQoX21heFNOKTsKICAgICAgICAgICAgICAgICAgICBvbkNhbGxiYWNrcyAmJiBvbkNhbGxiYWNrcy5vbk5vdEFsbG93UmVtb3RlQ29udHJvbCAmJiBvbkNhbGxiYWNrcy5vbk5vdEFsbG93UmVtb3RlQ29udHJvbChzdHJlYW0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocnNwLnJlc3VsdCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIF9idWZmZXIuX2xhc3RSc3BUaW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgYXJnID0gcnNwLmFyZzsKICAgICAgICAgICAgICAgIGlmIChhcmcgJiYgKGFyZyA9IEpTT04ucGFyc2UoYXJnKSkgJiYgIV91dGlsLmlzSW50KGFyZy5zbikpIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oInJzcC5zbiBub3QgYSBOdW1iZXIuIiwgYXJnLnNuLCAiZm9yIHN0cmVhbUlkIiwgc3RyZWFtSWQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhcmcgJiYgYXJnLnNuICE9PSB1bmRlZmluZWQgJiYgX2J1ZmZlci5jbGVhclJlYWQoYXJnLnNuKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfZ2V0QW5kU2VuZCgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBfZ2V0QW5kU2VuZCgpOwogICAgfQp9CgpmdW5jdGlvbiBkaXNDb250cm9sbGVkKHNlcnZpY2UsIHN0cmVhbUlkKSB7CiAgICB2YXIgYnVmZmVyOwoKICAgIHZhciBtb3VzZSA9IHNlcnZpY2UuY3VycmVudC5fX3Bhbm5lbE1vdXNlcyAmJiBfdXRpbC5yZW1vdmVBdHRyaWJ1dGUoc2VydmljZS5jdXJyZW50Ll9fcGFubmVsTW91c2VzLCBzdHJlYW1JZCk7CiAgICB2YXIga2V5Ym9hcmQgPSBzZXJ2aWNlLmN1cnJlbnQuX19wYW5uZWxLZXlib2FyZHMgJiYgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlcnZpY2UuY3VycmVudC5fX3Bhbm5lbEtleWJvYXJkcywgc3RyZWFtSWQpOwogICAgc2VydmljZS5jdXJyZW50Ll9fcGFubmVsQnVmZmVycyAmJiAoYnVmZmVyID0gX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlcnZpY2UuY3VycmVudC5fX3Bhbm5lbEJ1ZmZlcnMsIHN0cmVhbUlkKSk7CgogICAgbW91c2UgJiYgbW91c2UudW5ncmFiKCk7CiAgICBrZXlib2FyZCAmJiBrZXlib2FyZC51bmdyYWIoKTsKCiAgICByZXNldE9uUmVtb3ZlU3RyZWFtKHNlcnZpY2UpOwoKICAgIGlmICghYnVmZmVyKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzdHJlYW0gPSBzZXJ2aWNlLmdldFN0cmVhbUJ5SWQoc3RyZWFtSWQpOwogICAgaWYgKGJ1ZmZlci5fY2FsbGJhY2tzICYmIGJ1ZmZlci5fY2FsbGJhY2tzLm9uRGlzQ29udHJvbGxlZCkgewogICAgICAgIGJ1ZmZlci5fY2FsbGJhY2tzLm9uRGlzQ29udHJvbGxlZChzdHJlYW0pOwogICAgfQoKICAgIGlmICghc3RyZWFtKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBtZXNzZ2UgPSBzZXJ2aWNlLmN1cnJlbnQubmV3TWVzc2FnZSh7CiAgICAgICAgb3A6IDEwMDIsCiAgICAgICAgbWVtSWQ6IHN0cmVhbS5vd25lci5pZCwKICAgICAgICBhcmc6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgb3AyOiAzMCwKICAgICAgICAgICAgc3RyZWFtSWQ6IHN0cmVhbS5pZCwKICAgICAgICAgICAgZXZ0OiAyLAogICAgICAgICAgICBjSWQ6IGJ1ZmZlci5fY0lkCiAgICAgICAgfSksCiAgICAgICAgX3JlcU9wczogWzEwMDIzMF0KICAgIH0pOwoKICAgIHNlcnZpY2UuY3VycmVudC5wb3N0TWVzc2FnZShtZXNzZ2UsIGZ1bmN0aW9uIChyc3ApIHsKICAgICAgICBpZiAocnNwLnJlc3VsdCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBfbG9nZ2VyLndhcm4oIlVua293biByZXN1bHTvvJoiLCByc3AucmVzdWx0KTsKICAgICAgICByZXR1cm47CiAgICB9KTsKfQoKZnVuY3Rpb24gbWlycm9yQ29udHJvbGxlZChzZXJ2aWNlLCBzdHJlYW1JZCwgdmlkZW9UYXJnZXQsIG1hc2tUYXJnZXQpIHsKICAgIHZhciBvbkNhbGxiYWNrcyA9IHt9OwogICAgX3V0aWwuZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uIChfaW5kZXgsIF9mdW5jKSB7CiAgICAgICAgaWYgKHR5cGVvZiBfZnVuYyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICBvbkNhbGxiYWNrc1tfZnVuYy5uYW1lXSA9IF9mdW5jOwogICAgICAgIH0KICAgIH0pOwoKICAgIHJlcUNvbnRyb2xsZWQoc2VydmljZSwgc3RyZWFtSWQsIHZpZGVvVGFyZ2V0LCB0cnVlLCBtYXNrVGFyZ2V0LCBvbkNhbGxiYWNrcyk7Cn0KCmZ1bmN0aW9uIGNvbnRyb2xsZWQoc2VydmljZSwgc3RyZWFtSWQsIHZpZGVvVGFyZ2V0LCBtYXNrVGFyZ2V0KSB7CiAgICB2YXIgb25DYWxsYmFja3MgPSB7fTsKICAgIF91dGlsLmZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbiAoX2luZGV4LCBfZnVuYykgewogICAgICAgIGlmICh0eXBlb2YgX2Z1bmMgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgb25DYWxsYmFja3NbX2Z1bmMubmFtZV0gPSBfZnVuYzsKICAgICAgICB9CiAgICB9KTsKCiAgICByZXFDb250cm9sbGVkKHNlcnZpY2UsIHN0cmVhbUlkLCB2aWRlb1RhcmdldCwgZmFsc2UsIG1hc2tUYXJnZXQsIG9uQ2FsbGJhY2tzKTsKfQoKZnVuY3Rpb24gcmVxQ29udHJvbGxlZChzZXJ2aWNlLCBzdHJlYW1JZCwgdmlkZW9UYXJnZXQsIG1pcnJvciwgbWFza1RhcmdldCwgb25DYWxsYmFja3MpIHsKICAgIHZhciBjSWQgPSBNYXRoLnV1aWRGYXN0KCk7CiAgICBjSWQgPSBjSWQuc3Vic3RyKGNJZC5sZW5ndGggLSA2LCA2KTsKCiAgICB2YXIgc3RyZWFtID0gc2VydmljZS5nZXRTdHJlYW1CeUlkKHN0cmVhbUlkKTsKCiAgICBpZiAoIXN0cmVhbS5fd2VicnRjKSB7CiAgICAgICAgLy90aHJvdyAiTm90IGFsbG93IGNvbnRyb2wuIGNhdXNlIGJ5IHRoZSBzdHJlYW0gbm90IHN1YiI7CiAgICAgICAgb25DYWxsYmFja3MgJiYgb25DYWxsYmFja3Mub25Ob3RBbGxvd1JlbW90ZUNvbnRyb2wgJiYgb25DYWxsYmFja3Mub25Ob3RBbGxvd1JlbW90ZUNvbnRyb2woc3RyZWFtKTsKCiAgICAgICAgX2xvZ2dlci5lcnJvcigiTm90IGFsbG93IGNvbnRyb2wuIGNhdXNlIGJ5IHRoZSBzdHJlYW0gbm90IHN1YiIpOwogICAgICAgIHRocm93ICJOb3QgYWxsb3cgY29udHJvbC4gY2F1c2UgYnkgdGhlIHN0cmVhbSBub3Qgc3ViIjsKICAgIH0KCiAgICB2YXIgYXJnID0gewogICAgICAgIG9wMjogMzAsCiAgICAgICAgc3RyZWFtSWQ6IHN0cmVhbS5pZCwKICAgICAgICBldnQ6IDEsCiAgICAgICAgY0lkOiBjSWQKICAgIH07CgogICAgdmFyIG1lc3NnZSA9IHNlcnZpY2UuY3VycmVudC5uZXdNZXNzYWdlKHsKICAgICAgICBvcDogMTAwMiwKICAgICAgICBtZW1JZDogc3RyZWFtLm93bmVyLmlkLAogICAgICAgIGFyZzogSlNPTi5zdHJpbmdpZnkoYXJnKSwKICAgICAgICBfcmVxT3BzOiBbMTAwMjMwXQogICAgfSk7CgogICAgc2VydmljZS5jdXJyZW50LnBvc3RNZXNzYWdlKG1lc3NnZSwgZnVuY3Rpb24gKHJzcCkgewogICAgICAgIGlmIChyc3AucmVzdWx0ID09PSAtNDAyKSB7CiAgICAgICAgICAgIC8v5a+55pa5IOaLkue7neaOp+WItgogICAgICAgICAgICBvbkNhbGxiYWNrcyAmJiBvbkNhbGxiYWNrcy5vblJlamVjdCAmJiBvbkNhbGxiYWNrcy5vblJlamVjdChzdHJlYW0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChyc3AucmVzdWx0ID09PSAtNDAzKSB7CiAgICAgICAgICAgIC8v5a+55pa5IOato+iiq+aOp+WItu+8jOW/mQogICAgICAgICAgICBvbkNhbGxiYWNrcyAmJiBvbkNhbGxiYWNrcy5vbkJ1c3kgJiYgb25DYWxsYmFja3Mub25CdXN5KHN0cmVhbSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHJzcC5yZXN1bHQgPT09IC00MDgpIHsKICAgICAgICAgICAgLy/otoXml7YKICAgICAgICAgICAgb25DYWxsYmFja3MgJiYgb25DYWxsYmFja3Mub25SZW1vdGVDb250cm9sVGltZW91dCAmJiBvbkNhbGxiYWNrcy5vblJlbW90ZUNvbnRyb2xUaW1lb3V0KHN0cmVhbSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHJzcC5yZXN1bHQgPT09IC01MDcgfHwgcnNwLnJlc3VsdCA9PT0gLTQwNSkgewogICAgICAgICAgICAvL+S4jeiiq+aUr+aMgQogICAgICAgICAgICBvbkNhbGxiYWNrcyAmJiBvbkNhbGxiYWNrcy5vbk5vdEFsbG93UmVtb3RlQ29udHJvbCAmJiBvbkNhbGxiYWNrcy5vbk5vdEFsbG93UmVtb3RlQ29udHJvbChzdHJlYW0pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAocnNwLnJlc3VsdCA9PT0gMCkgewogICAgICAgICAgICBfY29udHJvbGxlZChzZXJ2aWNlLCBzdHJlYW1JZCwgdmlkZW9UYXJnZXQsIG1pcnJvciwgbWFza1RhcmdldCwgb25DYWxsYmFja3MsIGNJZCwgdHJ1ZSk7CiAgICAgICAgICAgIG9uQ2FsbGJhY2tzICYmIG9uQ2FsbGJhY2tzLm9uQWNjZXB0ICYmIG9uQ2FsbGJhY2tzLm9uQWNjZXB0KHN0cmVhbSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF9sb2dnZXIud2FybigiVW5rb3duIHJlc3VsdO+8miIsIHJzcC5yZXN1bHQpOwoKICAgICAgICBvbkNhbGxiYWNrcyAmJiBvbkNhbGxiYWNrcy5vbk5vdEFsbG93UmVtb3RlQ29udHJvbCAmJiBvbkNhbGxiYWNrcy5vbk5vdEFsbG93UmVtb3RlQ29udHJvbChzdHJlYW0pOwogICAgICAgIHJldHVybjsKICAgIH0pOwp9CgpmdW5jdGlvbiBfY29udHJvbGxlZChzZXJ2aWNlLCBzdHJlYW1JZCwgdmlkZW9UYXJnZXQsIG1pcnJvciwgbWFza1RhcmdldCwgb25DYWxsYmFja3MsIGNJZCwgb3BlbktleWJvYXJkKSB7CiAgICBpZiAobWFza1RhcmdldCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbWFza1RhcmdldCA9IHZpZGVvVGFyZ2V0OwogICAgfQoKICAgIHZhciBzdHJlYW0gPSBzZXJ2aWNlLmdldFN0cmVhbUJ5SWQoc3RyZWFtSWQpOwoKICAgIHZhciBtb3VzZSA9IChzZXJ2aWNlLmN1cnJlbnQuX19wYW5uZWxNb3VzZXMgfHwgKHNlcnZpY2UuY3VycmVudC5fX3Bhbm5lbE1vdXNlcyA9IHt9KSlbc3RyZWFtSWRdOwogICAgaWYgKG1vdXNlKSB7CiAgICAgICAgZGlzQ29udHJvbGxlZChzZXJ2aWNlLCBzdHJlYW1JZCk7CiAgICB9CgogICAgaWYgKCFzdHJlYW0ubG9jYXRlZCgpICYmICFzdHJlYW0ub3duZXIuYWNwdE9wc1sxMDAzXSkgewogICAgICAgIF9sb2dnZXIuZXJyb3IoIndoaWNoIGRvIG5vdCByZWN2IHJlbW90ZSBtZXNzYWdlLCBpdCBpcyAiLCBzdHJlYW0ub3duZXIubWVtTmFtZSk7CiAgICAgICAgdGhyb3cgc3RyZWFtLm93bmVyLm1lbU5hbWUgKyAiIGRvIG5vdCByZWN2IHJlbW90ZSBtZXNzYWdlIjsKICAgIH0KCiAgICBtb3VzZSA9IG5ldyBNb3VzZSh7CiAgICAgICAgX3RhcmdldDogbWFza1RhcmdldCwKICAgICAgICBfZm9jdXNlZDogdHJ1ZSwKCiAgICAgICAgb25Nb3VzZUVudGVyOiBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7CiAgICAgICAgICAgIF9vbk1vdXNlRW50ZXIyLmNhbGwobW91c2UsIHNlcnZpY2UsIHN0cmVhbUlkLCB2aWRlb1RhcmdldCwgb25DYWxsYmFja3MgJiYgb25DYWxsYmFja3Mub25Nb3VzZUVudGVyLCBvbkNhbGxiYWNrcyk7CgogICAgICAgICAgICBrZXlib2FyZCAmJiBrZXlib2FyZC5ncmFiKCk7CiAgICAgICAgfSwKCiAgICAgICAgb25Nb3VzZUV4aXQ6IGZ1bmN0aW9uIG9uTW91c2VFeGl0KCkgewogICAgICAgICAgICBfb25Nb3VzZUV4aXQyLmNhbGwobW91c2UsIHNlcnZpY2UsIHN0cmVhbUlkLCB2aWRlb1RhcmdldCwgb25DYWxsYmFja3MgJiYgb25DYWxsYmFja3Mub25Nb3VzZUV4aXQsIG9uQ2FsbGJhY2tzKTsKCiAgICAgICAgICAgIGtleWJvYXJkICYmIGtleWJvYXJkLnVuZ3JhYigpOwogICAgICAgIH0sCgogICAgICAgIG9uTW91c2VCdXR0b246IGZ1bmN0aW9uIG9uTW91c2VCdXR0b24odHJpZ2dlciwgbGFzdFRyaWdnZXIpIHsKICAgICAgICAgICAgbWlycm9yID09PSB0cnVlICYmICh0cmlnZ2VyLnh5LnggPSAtdHJpZ2dlci54eS54KTsKICAgICAgICAgICAgX29uTW91c2VCdXR0b24yLmNhbGwobW91c2UsIHNlcnZpY2UsIHN0cmVhbUlkLCB2aWRlb1RhcmdldCwgdHJpZ2dlciwgbGFzdFRyaWdnZXIsIG9uQ2FsbGJhY2tzICYmIG9uQ2FsbGJhY2tzLm9uTW91c2VCdXR0b24sIG9uQ2FsbGJhY2tzKTsKICAgICAgICB9LAoKICAgICAgICBvbk1vdXNlTW92ZTogZnVuY3Rpb24gb25Nb3VzZU1vdmUocG9zLCBsYXN0VHJpZ2dlcikgewogICAgICAgICAgICAvL19sb2dnZXIuaW5mbyhwb3MueCwgcG9zLnkpOwoKICAgICAgICAgICAgaWYgKCFlbWVkaWEuY29uZmlnLmRpc2FibGVUcmFjaykgewogICAgICAgICAgICAgICAgbWlycm9yID09PSB0cnVlICYmIChwb3MueCA9IC1wb3MueCk7CiAgICAgICAgICAgICAgICBfb25Nb3VzZU1vdmUyLmNhbGwobW91c2UsIHNlcnZpY2UsIHN0cmVhbUlkLCB2aWRlb1RhcmdldCwgcG9zLCBsYXN0VHJpZ2dlciwgb25DYWxsYmFja3MgJiYgb25DYWxsYmFja3Mub25Nb3VzZU1vdmUsIG9uQ2FsbGJhY2tzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIHZhciBwYW5uZWxCdWZmZXJzID0gc2VydmljZS5jdXJyZW50Ll9fcGFubmVsQnVmZmVycyB8fCAoc2VydmljZS5jdXJyZW50Ll9fcGFubmVsQnVmZmVycyA9IHt9KTsKICAgIHZhciBfYnVmZmVyID0gcGFubmVsQnVmZmVyc1tzdHJlYW1JZF0gPSBuZXcgVG90YWxCdWZmZXIoewogICAgICAgIF9jSWQ6IGNJZCwKICAgICAgICBfY2FsbGJhY2tzOiBvbkNhbGxiYWNrcywKICAgICAgICB0cmFja0J1ZmZlclNpemU6IGVtZWRpYS5jb25maWcudHJhY2tCdWZmZXJTaXplIHx8IDEwMDAKICAgIH0pOwoKICAgIChzZXJ2aWNlLmN1cnJlbnQuX19wYW5uZWxNb3VzZXMgfHwgKHNlcnZpY2UuY3VycmVudC5fX3Bhbm5lbE1vdXNlcyA9IHt9KSlbc3RyZWFtSWRdID0gbW91c2U7CiAgICBtb3VzZS5ncmFiKCk7CgogICAgdmFyIGtleWJvYXJkOwogICAgaWYgKG9wZW5LZXlib2FyZCkgewogICAgICAgIGtleWJvYXJkID0gbmV3IEtleWJvYXJkKHsKICAgICAgICAgICAgX3RhcmdldDogZG9jdW1lbnQsCiAgICAgICAgICAgIF9mb2N1c2VkOiB0cnVlLAogICAgICAgICAgICBvbktleVByZXNzOiBmdW5jdGlvbiBvbktleVByZXNzKGtleVZhbHVlLCBpc1ByZXNzZWQpIHsKICAgICAgICAgICAgICAgIHZhciBvcGVyID0gaXNQcmVzc2VkID8gTW91c2VUcmlnZ2VyLkJUTi5LRVlCT0FSRF9ET1dOIDogTW91c2VUcmlnZ2VyLkJUTi5LRVlCT0FSRF9VUDsKICAgICAgICAgICAgICAgIHZhciBidG4gPSBrZXlWYWx1ZTsKCiAgICAgICAgICAgICAgICBvbktleWJvYXJkLmNhbGwoa2V5Ym9hcmQsIHNlcnZpY2UsIHN0cmVhbUlkLCBvcGVyLCBidG4sIG9uQ2FsbGJhY2tzICYmIG9uQ2FsbGJhY2tzLm9uS2V5Ym9hcmQsIG9uQ2FsbGJhY2tzKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAoc2VydmljZS5jdXJyZW50Ll9fcGFubmVsS2V5Ym9hcmRzIHx8IChzZXJ2aWNlLmN1cnJlbnQuX19wYW5uZWxLZXlib2FyZHMgPSB7fSkpW3N0cmVhbUlkXSA9IGtleWJvYXJkOwogICAgICAgIC8va2V5Ym9hcmQuZ3JhYigpOwogICAgfQoKICAgIC8vIG92ZXJyaWRlT25IdW5ndXAoc2VydmljZSk7CiAgICAvLyBvdmVycmlkZU9uUmVtb3ZlU3RyZWFtKHNlcnZpY2UpOwogICAgLy8gb3ZlcnJpZGVPblJlbW92ZU1lbWJlcihzZXJ2aWNlKTsKfQoKZnVuY3Rpb24gZ3JhZmZpdGkobWFza1RhZywgbW91c2VUcmFjaywgcmVmZXJlbmNlVmlkZW8sIG1pcnJvcikgewogICAgdmFyIG1vdXNlID0gbmV3IE1vdXNlKHsKICAgICAgICBfdGFyZ2V0OiBtYXNrVGFnLAogICAgICAgIF9mb2N1c2VkOiB0cnVlLAoKICAgICAgICBvbk1vdXNlRW50ZXI6IGZ1bmN0aW9uIG9uTW91c2VFbnRlcigpIHsKICAgICAgICAgICAgLy9tb3VzZS5ncmFiKCk7CiAgICAgICAgfSwKCiAgICAgICAgb25Nb3VzZUV4aXQ6IGZ1bmN0aW9uIG9uTW91c2VFeGl0KCkgewogICAgICAgICAgICBtb3VzZVRyYWNrLnJlbGVhc2VUcmlnZ2VyKCk7CiAgICAgICAgfSwKCiAgICAgICAgb25Nb3VzZUJ1dHRvbjogZnVuY3Rpb24gb25Nb3VzZUJ1dHRvbih0cmlnZ2VyLCBsYXN0VHJpZ2dlcikgewogICAgICAgICAgICB0cmlnZ2VyLnh5ID0gewogICAgICAgICAgICAgICAgeDogdHJpZ2dlci54eS54IC8gdHJpZ2dlci54eS53aWR0aCwKICAgICAgICAgICAgICAgIHk6IHRyaWdnZXIueHkueSAvIHRyaWdnZXIueHkuaGVpZ2h0CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtaXJyb3IgPT09IHRydWUgJiYgKHRyaWdnZXIueHkueCA9IC10cmlnZ2VyLnh5LngpOwogICAgICAgICAgICByZWZlcmVuY2VWaWRlbyAmJiAodHJpZ2dlci54eSA9IGVtZWRpYS5TZXJ2aWNlLnByb3RvdHlwZS5ldmVudFhZQXRNZWRpYS5jYWxsKG51bGwsIHRyaWdnZXIueHksIHJlZmVyZW5jZVZpZGVvKSk7CiAgICAgICAgICAgIHRyaWdnZXIueHkgJiYgbW91c2VUcmFjay50cmlnZ2VyKHRyaWdnZXIpOwogICAgICAgIH0sCgogICAgICAgIG9uTW91c2VNb3ZlOiBmdW5jdGlvbiBvbk1vdXNlTW92ZShwb3MsIGxhc3RUcmlnZ2VyKSB7CiAgICAgICAgICAgIHBvcyA9IHsKICAgICAgICAgICAgICAgIHg6IHBvcy54IC8gcG9zLndpZHRoLAogICAgICAgICAgICAgICAgeTogcG9zLnkgLyBwb3MuaGVpZ2h0CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBtaXJyb3IgPT09IHRydWUgJiYgKHBvcy54ID0gLXBvcy54KTsKICAgICAgICAgICAgcmVmZXJlbmNlVmlkZW8gJiYgKHBvcyA9IGVtZWRpYS5TZXJ2aWNlLnByb3RvdHlwZS5ldmVudFhZQXRNZWRpYS5jYWxsKG51bGwsIHBvcywgcmVmZXJlbmNlVmlkZW8pKTsKICAgICAgICAgICAgcG9zICYmIG1vdXNlVHJhY2sudHJhY2socG9zKTsKICAgICAgICB9CiAgICB9KTsKCiAgICBtb3VzZS5ncmFiKCk7CgogICAgcmV0dXJuIG1vdXNlOwp9CgpmdW5jdGlvbiBjb250cm9sbGluZyhjdHJsLCBtb3VzZVRyYWNrLCBrZXlib2FyZCkgewogICAgdmFyIF9fbW91c2VUcmFjayA9IG1vdXNlVHJhY2s7CgogICAgLy8gbW91c2VUcmFjayAmJiAoX19tb3VzZVRyYWNrID0gbmV3IE1vdXNlVHJhY2soewogICAgLy8gICAgIF9mb2N1c2VkOiB0cnVlLAogICAgLy8KICAgIC8vICAgICBvbk1vdXNlVHJhY2s6IGZ1bmN0aW9uIChwb3NpdGlvbiwgbGFzdFBvc2l0aW9uLCBsYXN0VHJpZ2dlcikgewogICAgLy8gICAgICAgICBtb3VzZVRyYWNrLnRyYWNrKHBvc2l0aW9uKTsKICAgIC8vICAgICB9LAogICAgLy8gICAgIG9uTW91c2VUcmlnZ2VyOiBmdW5jdGlvbiAodHJpZ2dlciwgX2xhc3RUcmlnZ2VyKSB7CiAgICAvLyAgICAgICAgIG1vdXNlVHJhY2sudHJpZ2dlcih0cmlnZ2VyKTsKICAgIC8vICAgICB9LAogICAgLy8gICAgIG9uUmVsZWFzZVRyaWdnZXI6IGZ1bmN0aW9uIChfbGFzdFRyaWdnZXIpIHsKICAgIC8vICAgICAgICAgbW91c2VUcmFjay5yZWxlYXNlVHJpZ2dlcigpOwogICAgLy8gICAgIH0KICAgIC8vIH0pKTsKCiAgICBfX21vdXNlVHJhY2sgJiYgKGN0cmwubW91c2VUcmFjayA9IF9fbW91c2VUcmFjayk7CiAgICBjdHJsLmtleWJvYXJkID0ga2V5Ym9hcmQ7Cn0KCmZ1bmN0aW9uIHN1cHBvcnQoc2VydmljZSkgewogICAgdmFyIG9uQ2FsbGJhY2tzID0ge307CiAgICBfdXRpbC5mb3JFYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24gKF9pbmRleCwgX2Z1bmMpIHsKICAgICAgICBpZiAoX2luZGV4ICE9IDAgJiYgdHlwZW9mIF9mdW5jID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIG9uQ2FsbGJhY2tzW19mdW5jLm5hbWVdID0gX2Z1bmM7CiAgICAgICAgfQogICAgfSk7CgogICAgb3ZlcnJpZGVPbkh1bmd1cChzZXJ2aWNlKTsKCiAgICBvdmVycmlkZU9uUmVtb3ZlU3RyZWFtKHNlcnZpY2UpOwogICAgb3ZlcnJpZGVPblJlbW92ZU1lbWJlcihzZXJ2aWNlKTsKICAgIG92ZXJyaWRlT25SZW1vdGVQYW5uZWxDb250cm9sKHNlcnZpY2UsIG9uQ2FsbGJhY2tzKTsKCiAgICBjaGVja1RpbWVvdXQoc2VydmljZSk7Cn0KCmZ1bmN0aW9uIGdldENvbnRyb2xsZXIoc2VydmljZSwgc3RyZWFtSWQpIHsKICAgIHZhciBzdHJlYW0gPSBzZXJ2aWNlLmdldFN0cmVhbUJ5SWQoc3RyZWFtSWQpOwoKICAgIHZhciBjb250cm9scyA9IGdldFJlbW90ZUNvbnRyb2woc2VydmljZSwgc3RyZWFtKTsKCiAgICBpZiAoIWNvbnRyb2xzIHx8IGNvbnRyb2xzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgIH0KCiAgICByZXR1cm4gY29udHJvbHNbMF0uX2NvbnRyb2xsZXIubWVtTmFtZTsKfQoKZnVuY3Rpb24gZWNob0NvbnRyb2woc2VydmljZSwgc3RyZWFtSWQsIG1vdXNlVHJhY2ssIGtleWJvYXJkKSB7CiAgICB2YXIgc3RyZWFtID0gc2VydmljZS5nZXRTdHJlYW1CeUlkKHN0cmVhbUlkKTsKCiAgICB2YXIgZWNob0NvbnRyb2wgPSB7IF9jdHJsU3RyZWFtOiBzdHJlYW0sIF9jb250cm9sbGVyOiBzdHJlYW0ub3duZXIsIF9zZXJ2aWNlOiBzZXJ2aWNlIH07CiAgICBjb250cm9sbGluZyhlY2hvQ29udHJvbCwgbW91c2VUcmFjaywga2V5Ym9hcmQpOwoKICAgIChzZXJ2aWNlLmN1cnJlbnQuX19yZW1vdGVDb250cm9scyB8fCAoc2VydmljZS5jdXJyZW50Ll9fcmVtb3RlQ29udHJvbHMgPSB7fSkpW3N0cmVhbUlkXSA9IGVjaG9Db250cm9sOwp9CgpmdW5jdGlvbiBkaXNFY2hvQ29udHJvbChzZXJ2aWNlLCBzdHJlYW1JZCkgewogICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHNlcnZpY2UuY3VycmVudC5fX3JlbW90ZUNvbnRyb2xzLCBzdHJlYW1JZCk7Cn0KCnZhciBjaGVja1RpbWVvdXQgPSBmdW5jdGlvbiBjaGVja1RpbWVvdXQoc2VydmljZSkgewogICAgaWYgKGNoZWNrVGltZW91dC50aW1lb3V0SWQpIHsKICAgICAgICBjbGVhclRpbWVvdXQoY2hlY2tUaW1lb3V0LnRpbWVvdXRJZCk7CiAgICB9CgogICAgY2hlY2tUaW1lb3V0LnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGNoZWNrVGltZW91dChzZXJ2aWNlKTsKICAgIH0sIGVtZWRpYS5jb25maWcuY3RybENoZWNrSW50ZXJ2YWxNaWxsaXMpOwoKICAgIGlmICghc2VydmljZS5jdXJyZW50KSB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBjb250cm9sczsKICAgIGlmIChjb250cm9scyA9IHNlcnZpY2UuY3VycmVudC5fX3JlbW90ZUNvbnRyb2xzKSB7CiAgICAgICAgLy/lj5fmjqfliLbnq6/vvIzmn6XnnIsgX2xhc3RSZWN2VGltZXN0YW1wCiAgICAgICAgLy9fbG9nZ2VyLmRlYnVnKCJXaWxsIGNoZWNrIHRpbWVvdXQgZm9yIHJlbW90ZSBjb250cm9sbGVyLiIpOwoKICAgICAgICBfdXRpbC5mb3JFYWNoKGNvbnRyb2xzLCBmdW5jdGlvbiAoY3RybElkLCBjdHJsKSB7CiAgICAgICAgICAgIGlmIChjdHJsLmlkICE9PSB1bmRlZmluZWQgJiYgY3RybElkID09IGN0cmwuaWQpIHsKICAgICAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgIGlmIChjdHJsLl9sYXN0UmVjdlRpbWVzdGFtcCAmJiBub3cgLSBjdHJsLl9sYXN0UmVjdlRpbWVzdGFtcCA+IGVtZWRpYS5jb25maWcuY3RybFRpbWVvdXRNaWxsaXMpIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLndhcm4oIlRpbWVvdXQgZm9yIHJlbW90ZSBjb250cm9sbGVyLiBpdCBpcyAiLCBjdHJsLmlkLCBjdHJsLl9jdHJsU3RyZWFtLmlkLCBjdHJsLl9jb250cm9sbGVyLm1lbU5hbWUpOwoKICAgICAgICAgICAgICAgICAgICBjdHJsLl9mcmVlKCk7IC8v6LaF5pe25riF56m6CgogICAgICAgICAgICAgICAgICAgIGN0cmwuX2NhbGxiYWNrcyAmJiBjdHJsLl9jYWxsYmFja3Mub25SZW1vdGVGcmVlQ29udHJvbCAmJiBjdHJsLl9jYWxsYmFja3Mub25SZW1vdGVGcmVlQ29udHJvbChjdHJsLl9jdHJsU3RyZWFtLCBjdHJsLl9jb250cm9sbGVyLCBjdHJsLl9jSWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgdmFyIGJ1ZmZlcnM7CiAgICBpZiAoYnVmZmVycyA9IHNlcnZpY2UuY3VycmVudC5fX3Bhbm5lbEJ1ZmZlcnMpIHsKICAgICAgICAvL+aOp+WItuerryDmoLnmja7mmK/lkKbov5jlrZjlnKgg6L+Z5Liq5Y+R5biD5rWB5Yik5pat77yM5aaC5p6cIOi/meS4qnB1Yua1geiiq+enu+mZpO+8jOaOp+WItiDlgZzmraLjgILmn6XnnIsgX2xhc3RSc3BUaW1lc3RhbXAKICAgICAgICBfdXRpbC5mb3JFYWNoKGJ1ZmZlcnMsIGZ1bmN0aW9uIChfc3RyZWFtSWQsIGJ1ZmZlcikgewogICAgICAgICAgICAvL+aOp+WItuerr+WPkemAgXBpbmcKICAgICAgICAgICAgdmFyIHN0cmVhbSA9IHNlcnZpY2UuZ2V0U3RyZWFtQnlJZChfc3RyZWFtSWQpOwogICAgICAgICAgICBpZiAoc3RyZWFtICYmICFzdHJlYW0ubG9jYXRlZCgpKSB7CiAgICAgICAgICAgICAgICBzZXJ2aWNlLmN1cnJlbnQubWVzc2FnZSh7IC8vIOWPkemAgXBpbmcKICAgICAgICAgICAgICAgICAgICBvcDogMTAwMiwKICAgICAgICAgICAgICAgICAgICBtZW1JZDogc3RyZWFtLm93bmVyLmlkLAogICAgICAgICAgICAgICAgICAgIGFyZzogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICAgICBvcDI6IDMwLAogICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1JZDogc3RyZWFtLmlkLAogICAgICAgICAgICAgICAgICAgICAgICBldnQ6IDMsCiAgICAgICAgICAgICAgICAgICAgICAgIGNJZDogYnVmZmVyLl9jSWQKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBfcmVxT3BzOiBbMTAwMjMwXQogICAgICAgICAgICAgICAgfSkucG9zdChmdW5jdGlvbiAocnNwKSB7fSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KfTsKCm1vZHVsZS5leHBvcnRzID0gewogICAgbWlycm9yQ29udHJvbGxlZDogbWlycm9yQ29udHJvbGxlZCwKICAgIGNvbnRyb2xsZWQ6IGNvbnRyb2xsZWQsCiAgICBkaXNDb250cm9sbGVkOiBkaXNDb250cm9sbGVkLAoKICAgIGNvbnRyb2xsaW5nOiBjb250cm9sbGluZywKCiAgICBncmFmZml0aTogZ3JhZmZpdGksCgogICAgZWNob0NvbnRyb2w6IGVjaG9Db250cm9sLAogICAgZGlzRWNob0NvbnRyb2w6IGRpc0VjaG9Db250cm9sLAoKICAgIHN1cHBvcnQ6IHN1cHBvcnQsCgogICAgZ2V0Q29udHJvbGxlcjogZ2V0Q29udHJvbGxlcgp9OwoKLyoqKi8gfSksCi8qIDIzNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIk1vdXNlIik7Cgp2YXIgTW91c2VUcmlnZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7CgovKioKICogeyB0YXJnZXQ6CiAqICAgb25Nb3VzZUJ1dHRvbjoKICogICBvbk1vdXNlTW92ZToKICogfQogKgogKi8KCm1vZHVsZS5leHBvcnRzID0gX3V0aWwucHJvdG90eXBlRXh0ZW5kKHsKICAgIF9faW5pdF9fOiBmdW5jdGlvbiBfX2luaXRfXygpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHRoaXMuX2hhbmRsZXJzID0gX3V0aWwuZXh0ZW5kKHsKICAgICAgICAgICAgbW91c2Vkb3duOiB0aGlzLl9oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKSwKICAgICAgICAgICAgbW91c2V1cDogdGhpcy5faGFuZGxlTW91c2VVcC5iaW5kKHRoaXMpLAogICAgICAgICAgICBtb3VzZW1vdmU6IHRoaXMuX2hhbmRsZU1vdXNlTW92ZS5iaW5kKHRoaXMpLAogICAgICAgICAgICBtb3VzZXdoZWVsOiB0aGlzLl9oYW5kbGVNb3VzZVdoZWVsLmJpbmQodGhpcyksCiAgICAgICAgICAgIG1vdXNlZGlzYWJsZTogdGhpcy5faGFuZGxlTW91c2VEaXNhYmxlLmJpbmQodGhpcyksCiAgICAgICAgICAgIG1vdXNlb3ZlcjogdGhpcy5faGFuZGxlTW91c2VPdmVyLmJpbmQodGhpcyksCiAgICAgICAgICAgIG1vdXNlb3V0OiB0aGlzLl9oYW5kbGVNb3VzZU91dC5iaW5kKHRoaXMpCiAgICAgICAgfSwgdGhpcy5faGFuZGxlcnMgfHwge30pOwogICAgfSwKCiAgICAvL3RhcmdldDogbiwKCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gcG9zWAogICAgICogQHBhcmFtIHBvc1kKICAgICAqIEBwYXJhbSBvcGVyIDHmjInkuIsgMHVwCiAgICAgKiBAcGFyYW0gYnV0dG9uIDHlt6bplK7ljZXlh7sgMua7mui9ruaMieS4iyA05Y+z6ZSuIDjmu5rova7lkJHlupXnq6/mu5EgMTbmu5rova7lkJHpobbnq6/mu5EKICAgICAqLwogICAgb25Nb3VzZUJ1dHRvbjogZnVuY3Rpb24gb25Nb3VzZUJ1dHRvbih0cmlnZ2VyLCBsYXN0VHJpZ2dlcikge30sCgogICAgb25Nb3VzZU1vdmU6IGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50WFksIGxhc3RUcmlnZ2VyKSB7fSwKCiAgICBvbk1vdXNlRW50ZXI6IGZ1bmN0aW9uIG9uTW91c2VFbnRlcigpIHt9LAoKICAgIG9uTW91c2VFeGl0OiBmdW5jdGlvbiBvbk1vdXNlRXhpdCgpIHt9LAoKICAgIF9vbk1vdXNlQnV0dG9uOiBmdW5jdGlvbiBfb25Nb3VzZUJ1dHRvbihldmVudFhZLCBvcGVyLCBidXR0b24pIHsKICAgICAgICB2YXIgX3RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICAgICAgdmFyIHRyaWdnZXIgPSBuZXcgTW91c2VUcmlnZ2VyKHsKICAgICAgICAgICAgeHk6IGV2ZW50WFksCiAgICAgICAgICAgIG9wZXI6IG9wZXIsCiAgICAgICAgICAgIGJ0bjogYnV0dG9uLAogICAgICAgICAgICBfdGltZTogX3RpbWUKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5vbk1vdXNlQnV0dG9uICYmIHRoaXMub25Nb3VzZUJ1dHRvbih0cmlnZ2VyLCB0aGlzLl9sYXN0VHJpZ2dlcik7CgogICAgICAgIHRoaXMuX2xhc3RUcmlnZ2VyID0gdHJpZ2dlcjsKICAgIH0sCgogICAgX29uTW91c2VNb3ZlOiBmdW5jdGlvbiBfb25Nb3VzZU1vdmUoZXZlbnRYWSkgewogICAgICAgIHRoaXMub25Nb3VzZU1vdmUgJiYgdGhpcy5vbk1vdXNlTW92ZShldmVudFhZLCB0aGlzLl9sYXN0VHJpZ2dlcik7CiAgICB9LAoKICAgIF9jYXB0dXJlTW91c2U6IGZ1bmN0aW9uIF9jYXB0dXJlTW91c2UoKSB7CiAgICAgICAgdGhpcy5fdGFyZ2V0LnNldENhcHR1cmUgJiYgdGhpcy5fdGFyZ2V0LnNldENhcHR1cmUoKTsKICAgICAgICB0aGlzLl9tb3VzZUNhcHR1cmVkID0gdHJ1ZTsKICAgIH0sCiAgICBfcmVsZWFzZU1vdXNlOiBmdW5jdGlvbiBfcmVsZWFzZU1vdXNlKCkgewogICAgICAgIHRoaXMuX3RhcmdldC5yZWxlYXNlQ2FwdHVyZSAmJiB0aGlzLl90YXJnZXQucmVsZWFzZUNhcHR1cmUoKTsKICAgICAgICB0aGlzLl9tb3VzZUNhcHR1cmVkID0gZmFsc2U7CiAgICB9LAogICAgX3Jlc2V0RG91YmxlQ2xpY2tUaW1lcjogZnVuY3Rpb24gX3Jlc2V0RG91YmxlQ2xpY2tUaW1lcigpIHsKICAgICAgICB0aGlzLl9kb3VibGVDbGlja1RpbWVyID0gbnVsbDsKICAgIH0sCgogICAgX2hhbmRsZU1vdXNlT3ZlcjogZnVuY3Rpb24gX2hhbmRsZU1vdXNlT3ZlcihldmVudCkgewogICAgICAgIGlmICh0aGlzLl9tb3VzZUV4aXQgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRoaXMuX21vdXNlRXhpdCA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLm9uTW91c2VFbnRlciAmJiB0aGlzLm9uTW91c2VFbnRlcigpOwogICAgICAgIH0KICAgIH0sCiAgICBfaGFuZGxlTW91c2VPdXQ6IGZ1bmN0aW9uIF9oYW5kbGVNb3VzZU91dChldmVudCkgewogICAgICAgIGlmICh0aGlzLl9tb3VzZUV4aXQgIT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5fbW91c2VFeGl0ID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5vbk1vdXNlRXhpdCAmJiB0aGlzLm9uTW91c2VFeGl0KCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9sYXN0VHJpZ2dlciA9IHVuZGVmaW5lZDsKICAgIH0sCiAgICBfaGFuZGxlTW91c2VEb3duOiBmdW5jdGlvbiBfaGFuZGxlTW91c2VEb3duKGV2ZW50KSB7CiAgICAgICAgdGhpcy5fY2FwdHVyZU1vdXNlKCk7CiAgICAgICAgdGhpcy5faGFuZGxlTW91c2VCdXR0b24oZXZlbnQsIE1vdXNlVHJpZ2dlci5CVE4uS0VZX0RPV04pOwogICAgfSwKICAgIF9oYW5kbGVNb3VzZVVwOiBmdW5jdGlvbiBfaGFuZGxlTW91c2VVcChldmVudCkgewogICAgICAgIHRoaXMuX21vdXNlQ2FwdHVyZWQgJiYgKHRoaXMuX2hhbmRsZU1vdXNlQnV0dG9uKGV2ZW50LCBNb3VzZVRyaWdnZXIuQlROLktFWV9VUCksIHRoaXMuX3JlbGVhc2VNb3VzZSgpKTsKICAgIH0sCgogICAgX2hhbmRsZU1vdXNlV2hlZWw6IGZ1bmN0aW9uIF9oYW5kbGVNb3VzZVdoZWVsKGV2ZW50KSB7CiAgICAgICAgaWYgKCF0aGlzLl9mb2N1c2VkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBldmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudCwKICAgICAgICAgICAgZXZlbnRYWSA9IF91dGlsLmdldEV2ZW50RWxlbWVudFhZKGV2ZW50LCB0aGlzLl90YXJnZXQsIHRoaXMuX3NjYWxlKTsKCiAgICAgICAgLy8gOHVwIDE2ZG93bgogICAgICAgIHZhciB3aGVlbCA9IChldmVudC5kZXRhaWwgPyAtMSAqIGV2ZW50LmRldGFpbCA6IGV2ZW50LndoZWVsRGVsdGEgLyA0MCkgPiAwID8gTW91c2VUcmlnZ2VyLkJUTi5XSEVFTF9ST0xMX1VQIDogTW91c2VUcmlnZ2VyLkJUTi5XSEVFTF9ST0xMX0RPV047CiAgICAgICAgdGhpcy5fb25Nb3VzZUJ1dHRvbihldmVudFhZLCBNb3VzZVRyaWdnZXIuQlROLktFWV9ET1dOLCB3aGVlbCk7CiAgICAgICAgX3V0aWwuc3RvcEV2ZW50KGV2ZW50KTsKICAgIH0sCgogICAgX2hhbmRsZU1vdXNlTW92ZTogZnVuY3Rpb24gX2hhbmRsZU1vdXNlTW92ZShldmVudCkgewogICAgICAgIGlmICghdGhpcy5fZm9jdXNlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQsCiAgICAgICAgICAgIGV2ZW50WFkgPSBfdXRpbC5nZXRFdmVudEVsZW1lbnRYWShldmVudCwgdGhpcy5fdGFyZ2V0LCB0aGlzLl9zY2FsZSk7CiAgICAgICAgdGhpcy5fb25Nb3VzZU1vdmUoZXZlbnRYWSk7CiAgICAgICAgX3V0aWwuc3RvcEV2ZW50KGV2ZW50KTsKICAgIH0sCgogICAgX2hhbmRsZU1vdXNlRGlzYWJsZTogZnVuY3Rpb24gX2hhbmRsZU1vdXNlRGlzYWJsZShldmVudCkgewogICAgICAgIGlmICghdGhpcy5fZm9jdXNlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQsCiAgICAgICAgICAgIGV2ZW50WFkgPSBfdXRpbC5nZXRFdmVudEVsZW1lbnRYWShldmVudCwgdGhpcy5fdGFyZ2V0LCB0aGlzLl9zY2FsZSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiAhKGV2ZW50WFkucmVhbFggPj0gMCAmJiBldmVudFhZLnJlYWxZID49IDAgJiYgZXZlbnRYWS5yZWFsWCA8IHRoaXMuX3RhcmdldC5vZmZzZXRXaWR0aCAmJiBldmVudFhZLnJlYWxZIDwgdGhpcy5fdGFyZ2V0Lm9mZnNldEhlaWdodCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX3V0aWwuc3RvcEV2ZW50KGV2ZW50KTsKICAgICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSBldmVudAogICAgICogQHBhcmFtIG9wZXIgMem8oOagh+aMieS4iwogICAgICogQHByaXZhdGUKICAgICAqLwogICAgX2hhbmRsZU1vdXNlQnV0dG9uOiBmdW5jdGlvbiBfaGFuZGxlTW91c2VCdXR0b24oZXZlbnQsIG9wZXIpIHsKICAgICAgICBpZiAoIXRoaXMuX2ZvY3VzZWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGJ1dHRvbiwKICAgICAgICAgICAgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQsCiAgICAgICAgICAgIGV2ZW50WFkgPSBfdXRpbC5nZXRFdmVudEVsZW1lbnRYWShldmVudCwgdGhpcy5fdGFyZ2V0LCB0aGlzLl9zY2FsZSk7CiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMgfHwgZXZlbnQuY2hhbmdlZFRvdWNoZXMpIHsKICAgICAgICAgICAgaWYgKG9wZXIgPT0gTW91c2VUcmlnZ2VyLkJUTi5LRVlfRE9XTikgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RvdWJsZUNsaWNrVGltZXIgPT09IG51bGwpIHRoaXMuX2xhc3RUb3VjaFBvcyA9IGV2ZW50WFk7ZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2RvdWJsZUNsaWNrVGltZXIpOwogICAgICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZVggPSB0aGlzLl9sYXN0VG91Y2hQb3MueCAtIGV2ZW50WFkueCwKICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VZID0gdGhpcy5fbGFzdFRvdWNoUG9zLnkgLSBldmVudFhZLnk7CiAgICAgICAgICAgICAgICAgICAgTWF0aC5zcXJ0KGRpc3RhbmNlWCAqIGRpc3RhbmNlWCArIGRpc3RhbmNlWSAqIGRpc3RhbmNlWSkgPCAyMCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICYmIChldmVudFhZID0gdGhpcy5fbGFzdFRvdWNoUG9zKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuX2RvdWJsZUNsaWNrVGltZXIgPSBzZXRUaW1lb3V0KHRoaXMuX3Jlc2V0RG91YmxlQ2xpY2tUaW1lci5iaW5kKHRoaXMpLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJ1dHRvbiA9IE1vdXNlVHJpZ2dlci5CVE4uTEVGVDsKICAgICAgICB9IGVsc2UgYnV0dG9uID0gZXZlbnQud2hpY2ggPyAxIDw8IGV2ZW50LmJ1dHRvbiA6ICgxICYgZXZlbnQuYnV0dG9uKSArIDIgKiAoMiAmIGV2ZW50LmJ1dHRvbikgKyAoNCAmIGV2ZW50LmJ1dHRvbikgLyAyOwoKICAgICAgICB0aGlzLl9vbk1vdXNlQnV0dG9uKGV2ZW50WFksIG9wZXIsIGJ1dHRvbik7CiAgICAgICAgX3V0aWwuc3RvcEV2ZW50KGV2ZW50KTsKICAgIH0sCgogICAgZ3JhYjogZnVuY3Rpb24gZ3JhYigpIHsKICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuX3RhcmdldDsKCiAgICAgICAgX3V0aWwuYWRkRXZlbnQoZWxlbWVudCwgIm1vdXNlb3ZlciIsIHRoaXMuX2hhbmRsZXJzLm1vdXNlb3Zlcik7CiAgICAgICAgX3V0aWwuYWRkRXZlbnQoZWxlbWVudCwgIm1vdXNlb3V0IiwgdGhpcy5faGFuZGxlcnMubW91c2VvdXQpOwoKICAgICAgICBfdXRpbC5hZGRFdmVudChlbGVtZW50LCAidG91Y2hzdGFydCIsIHRoaXMuX2hhbmRsZXJzLm1vdXNlZG93bik7CiAgICAgICAgLy9fdXRpbC5hZGRFdmVudCh3aW5kb3csICJ0b3VjaGVuZCIsIHRoaXMuX2hhbmRsZXJzLm1vdXNldXApOwogICAgICAgIF91dGlsLmFkZEV2ZW50KGVsZW1lbnQsICJ0b3VjaGVuZCIsIHRoaXMuX2hhbmRsZXJzLm1vdXNldXApOwogICAgICAgIF91dGlsLmFkZEV2ZW50KGVsZW1lbnQsICJ0b3VjaG1vdmUiLCB0aGlzLl9oYW5kbGVycy5tb3VzZW1vdmUpOwogICAgICAgIF91dGlsLmFkZEV2ZW50KGVsZW1lbnQsICJtb3VzZWRvd24iLCB0aGlzLl9oYW5kbGVycy5tb3VzZWRvd24pOwogICAgICAgIC8vX3V0aWwuYWRkRXZlbnQod2luZG93LCAibW91c2V1cCIsIHRoaXMuX2hhbmRsZXJzLm1vdXNldXApOwogICAgICAgIF91dGlsLmFkZEV2ZW50KGVsZW1lbnQsICJtb3VzZXVwIiwgdGhpcy5faGFuZGxlcnMubW91c2V1cCk7CiAgICAgICAgX3V0aWwuYWRkRXZlbnQoZWxlbWVudCwgIm1vdXNlbW92ZSIsIHRoaXMuX2hhbmRsZXJzLm1vdXNlbW92ZSk7CiAgICAgICAgX3V0aWwuYWRkRXZlbnQoZWxlbWVudCwgX3V0aWwubGF5b3V0RW5naW5lLmdlY2tvID8gIkRPTU1vdXNlU2Nyb2xsIiA6ICJtb3VzZXdoZWVsIiwgdGhpcy5faGFuZGxlcnMubW91c2V3aGVlbCk7CiAgICAgICAgX3V0aWwuYWRkRXZlbnQoZWxlbWVudCwgImNvbnRleHRtZW51IiwgdGhpcy5faGFuZGxlcnMubW91c2VkaXNhYmxlKTsKICAgICAgICAvL191dGlsLmFkZEV2ZW50KGRvY3VtZW50LCAiY2xpY2siLCB0aGlzLl9oYW5kbGVycy5tb3VzZWRpc2FibGUpOwogICAgICAgIC8vX3V0aWwuYWRkRXZlbnQoZG9jdW1lbnQuYm9keSwgImNvbnRleHRtZW51IiwgdGhpcy5faGFuZGxlcnMubW91c2VkaXNhYmxlKTsKICAgIH0sCiAgICB1bmdyYWI6IGZ1bmN0aW9uIHVuZ3JhYigpIHsKICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuX3RhcmdldDsKCiAgICAgICAgX3V0aWwucmVtb3ZlRXZlbnQoZWxlbWVudCwgIm1vdXNlb3ZlciIsIHRoaXMuX2hhbmRsZXJzLm1vdXNlb3Zlcik7CiAgICAgICAgX3V0aWwucmVtb3ZlRXZlbnQoZWxlbWVudCwgIm1vdXNlb3V0IiwgdGhpcy5faGFuZGxlcnMubW91c2VvdXQpOwoKICAgICAgICBfdXRpbC5yZW1vdmVFdmVudChlbGVtZW50LCAidG91Y2hzdGFydCIsIHRoaXMuX2hhbmRsZXJzLm1vdXNlZG93bik7CiAgICAgICAgLy9fdXRpbC5yZW1vdmVFdmVudCh3aW5kb3csICJ0b3VjaGVuZCIsIHRoaXMuX2hhbmRsZXJzLm1vdXNldXApOwogICAgICAgIF91dGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsICJ0b3VjaGVuZCIsIHRoaXMuX2hhbmRsZXJzLm1vdXNldXApOwogICAgICAgIF91dGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsICJ0b3VjaG1vdmUiLCB0aGlzLl9oYW5kbGVycy5tb3VzZW1vdmUpOwogICAgICAgIF91dGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsICJtb3VzZWRvd24iLCB0aGlzLl9oYW5kbGVycy5tb3VzZWRvd24pOwogICAgICAgIC8vX3V0aWwucmVtb3ZlRXZlbnQod2luZG93LCAibW91c2V1cCIsIHRoaXMuX2hhbmRsZXJzLm1vdXNldXApOwogICAgICAgIF91dGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsICJtb3VzZXVwIiwgdGhpcy5faGFuZGxlcnMubW91c2V1cCk7CiAgICAgICAgX3V0aWwucmVtb3ZlRXZlbnQoZWxlbWVudCwgIm1vdXNlbW92ZSIsIHRoaXMuX2hhbmRsZXJzLm1vdXNlbW92ZSk7CiAgICAgICAgX3V0aWwucmVtb3ZlRXZlbnQoZWxlbWVudCwgX3V0aWwubGF5b3V0RW5naW5lLmdlY2tvID8gIkRPTU1vdXNlU2Nyb2xsIiA6ICJtb3VzZXdoZWVsIiwgdGhpcy5faGFuZGxlcnMubW91c2V3aGVlbCk7CiAgICAgICAgX3V0aWwucmVtb3ZlRXZlbnQoZWxlbWVudCwgImNvbnRleHRtZW51IiwgdGhpcy5faGFuZGxlcnMubW91c2VkaXNhYmxlKTsKICAgICAgICAvL191dGlsLnJlbW92ZUV2ZW50KGRvY3VtZW50LCAiY2xpY2siLCB0aGlzLl9oYW5kbGVycy5tb3VzZWRpc2FibGUpOwogICAgICAgIC8vX3V0aWwucmVtb3ZlRXZlbnQoZG9jdW1lbnQuYm9keSwgImNvbnRleHRtZW51IiwgdGhpcy5faGFuZGxlcnMubW91c2VkaXNhYmxlKTsKICAgIH0KfSk7CgovKioqLyB9KSwKLyogMjM4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwp2YXIgX2xvZ2dlciA9IF91dGlsLnRhZ0xvZ2dlcigiS2V5Ym9hcmQiKTsKCm1vZHVsZS5leHBvcnRzID0gX3V0aWwucHJvdG90eXBlRXh0ZW5kKHsKCiAgICBfX2luaXRfXzogZnVuY3Rpb24gX19pbml0X18oKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB0aGlzLl9ldmVudEhhbmRsZXJzID0gewogICAgICAgICAgICBrZXl1cDogdGhpcy5faGFuZGxlS2V5VXAuYmluZCh0aGlzKSwKICAgICAgICAgICAga2V5ZG93bjogdGhpcy5faGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpLAogICAgICAgICAgICBrZXlwcmVzczogdGhpcy5faGFuZGxlS2V5UHJlc3MuYmluZCh0aGlzKSwKICAgICAgICAgICAgYmx1cjogdGhpcy5fYWxsS2V5c1VwLmJpbmQodGhpcykKICAgICAgICB9OwogICAgfSwKCiAgICBnZXRLZXk6IGZ1bmN0aW9uIGdldEtleShldmVudCkgewogICAgICAgIHJldHVybiAia2V5Q29kZSIgaW4gZXZlbnQgJiYgImtleSIgaW4gZXZlbnQgPyBldmVudC5rZXkgKyAiOiIgKyBldmVudC5rZXlDb2RlIDogImtleUNvZGUiIGluIGV2ZW50ID8gZXZlbnQua2V5Q29kZSA6IGV2ZW50LmtleTsKICAgIH0sCgogICAgb25LZXlQcmVzczogZnVuY3Rpb24gb25LZXlQcmVzcyhrZXlWYWx1ZSwgaXNQcmVzc2VkKSB7fSwKCiAgICBfb25LZXlQcmVzczogZnVuY3Rpb24gX29uS2V5UHJlc3Moa2V5VmFsdWUsIGlzUHJlc3NlZCkgewogICAgICAgIHRoaXMub25LZXlQcmVzcyAmJiB0aGlzLm9uS2V5UHJlc3Moa2V5VmFsdWUsIGlzUHJlc3NlZCk7CiAgICB9LAoKICAgIF9oYW5kbGVSZmJFdmVudDogZnVuY3Rpb24gX2hhbmRsZVJmYkV2ZW50KGV2ZW50LCB0eXBlKSB7CiAgICAgICAgdmFyIHNoaWZ0ID0gZXZlbnQuc2hpZnRLZXksCiAgICAgICAgICAgIGN0cmwgPSBldmVudC5jdHJsS2V5LAogICAgICAgICAgICBhbHQgPSBldmVudC5hbHRLZXksCiAgICAgICAgICAgIGFzY2lpID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDsKCiAgICAgICAgdGhpcy5fb25LZXlQcmVzcyhhc2NpaSwgImtleWRvd24iID09IHR5cGUpOwogICAgfSwKCiAgICBfaGFuZGxlS2V5RG93bjogZnVuY3Rpb24gX2hhbmRsZUtleURvd24oZXZlbnQpIHsKICAgICAgICByZXR1cm4gIXRoaXMuX2ZvY3VzZWQgfHwgIXRoaXMuX2hhbmRsZVJmYkV2ZW50KGV2ZW50LCAia2V5ZG93biIpIHx8IChfdXRpbC5zdG9wRXZlbnQoZXZlbnQpLCBmYWxzZSk7CiAgICB9LAogICAgX2hhbmRsZUtleVByZXNzOiBmdW5jdGlvbiBfaGFuZGxlS2V5UHJlc3MoZXZlbnQpIHsKICAgICAgICByZXR1cm4gIXRoaXMuX2ZvY3VzZWQgfHwgKF91dGlsLnN0b3BFdmVudChldmVudCksIGZhbHNlKTsKICAgICAgICAvL3JldHVybiAhdGhpcy5fZm9jdXNlZCB8fCAhdGhpcy5faGFuZGxlUmZiRXZlbnQua2V5cHJlc3MoZXZlbnQpIHx8IChfdXRpbC5zdG9wRXZlbnQoZXZlbnQpLCBmYWxzZSk7CiAgICB9LAogICAgX2hhbmRsZUtleVVwOiBmdW5jdGlvbiBfaGFuZGxlS2V5VXAoZXZlbnQpIHsKICAgICAgICByZXR1cm4gIXRoaXMuX2ZvY3VzZWQgfHwgIXRoaXMuX2hhbmRsZVJmYkV2ZW50KGV2ZW50LCAia2V5dXAiKSB8fCAoX3V0aWwuc3RvcEV2ZW50KGV2ZW50KSwgZmFsc2UpOwogICAgfSwKCiAgICBfYWxsS2V5c1VwOiBmdW5jdGlvbiBfYWxsS2V5c1VwKCkge30sCiAgICBzeW5jOiBmdW5jdGlvbiBzeW5jKGUpIHt9LAoKICAgIGdyYWI6IGZ1bmN0aW9uIGdyYWIoKSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLl90YXJnZXQ7CgogICAgICAgIF91dGlsLmFkZEV2ZW50KGVsZW1lbnQsICJrZXlkb3duIiwgdGhpcy5fZXZlbnRIYW5kbGVycy5rZXlkb3duKTsKICAgICAgICBfdXRpbC5hZGRFdmVudChlbGVtZW50LCAia2V5dXAiLCB0aGlzLl9ldmVudEhhbmRsZXJzLmtleXVwKTsKICAgICAgICBfdXRpbC5hZGRFdmVudChlbGVtZW50LCAia2V5cHJlc3MiLCB0aGlzLl9ldmVudEhhbmRsZXJzLmtleXByZXNzKTsKICAgICAgICBfdXRpbC5hZGRFdmVudChlbGVtZW50LCAiYmx1ciIsIHRoaXMuX2V2ZW50SGFuZGxlcnMuYmx1cik7CiAgICAgICAgLy9fdXRpbC5hZGRFdmVudCh3aW5kb3csICJibHVyIiwgdGhpcy5fZXZlbnRIYW5kbGVycy5ibHVyKTsKCiAgICAgICAgX2xvZ2dlci5pbmZvKCJrZXlib2FyZCBncmFiIGF0IGVsZW1lbnQiKTsKICAgIH0sCiAgICB1bmdyYWI6IGZ1bmN0aW9uIHVuZ3JhYigpIHsKICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuX3RhcmdldDsKCiAgICAgICAgX3V0aWwucmVtb3ZlRXZlbnQoZWxlbWVudCwgImtleWRvd24iLCB0aGlzLl9ldmVudEhhbmRsZXJzLmtleWRvd24pOwogICAgICAgIF91dGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsICJrZXl1cCIsIHRoaXMuX2V2ZW50SGFuZGxlcnMua2V5dXApOwogICAgICAgIF91dGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsICJrZXlwcmVzcyIsIHRoaXMuX2V2ZW50SGFuZGxlcnMua2V5cHJlc3MpOwogICAgICAgIF91dGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsICJibHVyIiwgdGhpcy5fZXZlbnRIYW5kbGVycy5ibHVyKTsKICAgICAgICAvL191dGlsLnJlbW92ZUV2ZW50KHdpbmRvdywgImJsdXIiLCB0aGlzLl9ldmVudEhhbmRsZXJzLmJsdXIpOwoKICAgICAgICB0aGlzLl9hbGxLZXlzVXAoKTsKCiAgICAgICAgX2xvZ2dlci5pbmZvKCJrZXlib2FyZCB1cGdyYWIgYXQgZWxlbWVudCIpOwogICAgfQp9KTsKCi8qKiovIH0pLAovKiAyMzkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CnZhciBfbG9nZ2VyID0gX3V0aWwudGFnTG9nZ2VyKCJUb3RhbEJ1ZmZlciIpOwoKdmFyIEV2ZW50QnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNDApOwp2YXIgVHJhY2tCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0MSk7Cgp2YXIgTW91c2VUcmlnZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7Cgptb2R1bGUuZXhwb3J0cyA9IF91dGlsLnByb3RvdHlwZUV4dGVuZCh7CiAgICB0cmFja0J1ZmZlclNpemU6IDEwMCwKICAgIF90cmFja0J1ZmZlckNvbXBSYWRpbzogMC4yNSwKCiAgICBfc246IDEsCgogICAgX19pbml0X186IGZ1bmN0aW9uIF9faW5pdF9fKCkgewogICAgICAgIHRoaXMuX2V2ZW50QnVmZmVyID0gbmV3IEV2ZW50QnVmZmVyKHsKICAgICAgICAgICAgX25leHRzbjogdGhpcy5fbmV4dHNuLmJpbmQodGhpcykKICAgICAgICB9KTsKICAgICAgICB0aGlzLl90cmFja0J1ZmZlciA9IG5ldyBUcmFja0J1ZmZlcih7CiAgICAgICAgICAgIF9uZXh0c246IHRoaXMuX25leHRzbi5iaW5kKHRoaXMpLAogICAgICAgICAgICBfY29tcFJhZGlvOiB0aGlzLl90cmFja0J1ZmZlckNvbXBSYWRpbywKICAgICAgICAgICAgbW91c2VUcmFja0J1ZmZlclNpemU6IHRoaXMudHJhY2tCdWZmZXJTaXplCiAgICAgICAgfSk7CiAgICB9LAoKICAgIF9uZXh0c246IGZ1bmN0aW9uIF9uZXh0c24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3NuKys7CiAgICB9LAoKICAgIHB1dDogZnVuY3Rpb24gcHV0KGV2ZW50KSB7CiAgICAgICAgaWYgKCFldmVudCB8fCBldmVudC5vcGVyID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgZXZlbnQub3BlciA9PT0gTW91c2VUcmlnZ2VyLkJUTi5NT1ZFID8gdGhpcy5fdHJhY2tCdWZmZXIucHV0KGV2ZW50KSA6IHRoaXMuX2V2ZW50QnVmZmVyLnB1dChldmVudCk7CiAgICB9LAoKICAgIGdldFVucmVhZDE6IGZ1bmN0aW9uIGdldFVucmVhZDEobGVuZ3RoKSB7CiAgICAgICAgZnVuY3Rpb24gc29ydGJ5KGEsIGIpIHsKICAgICAgICAgICAgcmV0dXJuIGEuX3RpbWUgLSBiLnRpbWU7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIGlmICghbGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudEJ1ZmZlci5nZXRVbnJlYWQoKTsKICAgICAgICAgICAgdmFyIHRyYWNrcyA9IHRoaXMuX3RyYWNrQnVmZmVyLmdldFVucmVhZCgpOwoKICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZXZlbnRzLCB0cmFja3MpOwogICAgICAgICAgICByZXN1bHQgPSBldmVudHM7CgogICAgICAgICAgICByZXN1bHQuc29ydChzb3J0YnkpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0ID0gW107CgogICAgICAgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudEJ1ZmZlci5fZ2V0VW5yZWFkKGxlbmd0aCk7CiAgICAgICAgdmFyIHRyYWNrcyA9IHRoaXMuX3RyYWNrQnVmZmVyLl9nZXRVbnJlYWQobGVuZ3RoKTsKCiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBldmVudHMpOwogICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdCwgdHJhY2tzKTsKCiAgICAgICAgcmVzdWx0LnNvcnQoc29ydGJ5KTsKCiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsIGxlbmd0aCA+IHJlc3VsdC5sZW5ndGggPyByZXN1bHQubGVuZ3RoIDogbGVuZ3RoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAocmVzdWx0W2ldLm9wZXIgPT09IE1vdXNlVHJpZ2dlci5CVE4uTU9WRSkgewogICAgICAgICAgICAgICAgdGhpcy5fdHJhY2tCdWZmZXIuZ2V0VW5yZWFkKDEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRCdWZmZXIuZ2V0VW5yZWFkKDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKCiAgICBnZXRVbnJlYWQ6IGZ1bmN0aW9uIGdldFVucmVhZChsZW5ndGgpIHsKICAgICAgICBmdW5jdGlvbiBzb3J0YnkoYSwgYikgewogICAgICAgICAgICByZXR1cm4gYS5zbiAtIGIuc247CiAgICAgICAgfQoKICAgICAgICBpZiAoIWxlbmd0aCkgewogICAgICAgICAgICBsZW5ndGggPSB0aGlzLl9ldmVudEJ1ZmZlci5nZXRVbnJlYWRTaXplKCkgKyB0aGlzLl90cmFja0J1ZmZlci5nZXRVbnJlYWRTaXplKCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgd2hpbGUgKHJlc3VsdC5sZW5ndGggIT09IGxlbmd0aCkgewogICAgICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLl9ldmVudEJ1ZmZlci5fZ2V0VW5yZWFkKDEpOwogICAgICAgICAgICB2YXIgdHJhY2sgPSB0aGlzLl90cmFja0J1ZmZlci5fZ2V0VW5yZWFkKDEpOwoKICAgICAgICAgICAgaWYgKGV2ZW50ID09PSB1bmRlZmluZWQgJiYgdHJhY2spIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuX3RyYWNrQnVmZmVyLmdldFVucmVhZCgxKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhY2sgPT09IHVuZGVmaW5lZCAmJiBldmVudCkgewogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5fZXZlbnRCdWZmZXIuZ2V0VW5yZWFkKDEpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFjayA9PT0gdW5kZWZpbmVkICYmIGV2ZW50ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc24gPCB0cmFjay5zbikgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuX2V2ZW50QnVmZmVyLmdldFVucmVhZCgxKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuX3RyYWNrQnVmZmVyLmdldFVucmVhZCgxKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAoKICAgIGdldFVucmVhZFNpemU6IGZ1bmN0aW9uIGdldFVucmVhZFNpemUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYWNrQnVmZmVyLmdldFVucmVhZFNpemUoKSArIHRoaXMuX2V2ZW50QnVmZmVyLmdldFVucmVhZFNpemUoKTsKICAgIH0sCgogICAgZ2V0VW5jbGVhclNpemU6IGZ1bmN0aW9uIGdldFVuY2xlYXJTaXplKCkgewogICAgICAgIHJldHVybiB0aGlzLl90cmFja0J1ZmZlci5nZXRVbmNsZWFyU2l6ZSgpICsgdGhpcy5fZXZlbnRCdWZmZXIuZ2V0VW5jbGVhclNpemUoKTsKICAgIH0sCgogICAgY2xlYXJSZWFkOiBmdW5jdGlvbiBjbGVhclJlYWQobGltaXRTTikgewogICAgICAgIC8vIDw9CiAgICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50QnVmZmVyLmNsZWFyUmVhZChsaW1pdFNOKSArIHRoaXMuX3RyYWNrQnVmZmVyLmNsZWFyUmVhZChsaW1pdFNOKTsKICAgIH0KfSk7CgovKioqLyB9KSwKLyogMjQwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBfdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwp2YXIgX2xvZ2dlciA9IF91dGlsLnRhZ0xvZ2dlcigiRXZlbnRCdWZmZXIiKTsKCm1vZHVsZS5leHBvcnRzID0gX3V0aWwucHJvdG90eXBlRXh0ZW5kKHsKICAgIF9idWZmZXI6IFtdLAoKICAgIF9zbjogMSwKCiAgICBfYmVnaW5JbmRleDogMCwKICAgIF9yZWFkSW5kZXg6IDAsCiAgICBfZW5kSW5kZXg6IDAsCgogICAgX25leHRzbjogZnVuY3Rpb24gX25leHRzbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5fc24rKzsKICAgIH0sCgogICAgcHV0OiBmdW5jdGlvbiBwdXQoZXZlbnQpIHsKICAgICAgICBpZiAoIWV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGV2ZW50LnNuID0gdGhpcy5fbmV4dHNuKCk7CgogICAgICAgIHRoaXMuX2J1ZmZlci5wdXNoKGV2ZW50KTsKICAgICAgICB0aGlzLl9lbmRJbmRleCsrOwogICAgfSwKCiAgICBfZ2V0VW5yZWFkOiBmdW5jdGlvbiBfZ2V0VW5yZWFkKGxlbmd0aCkgewogICAgICAgIGlmICh0aGlzLl9yZWFkSW5kZXggPT09IHRoaXMuX2VuZEluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiBsZW5ndGggPT09IDEgPyB1bmRlZmluZWQgOiBbXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLl9idWZmZXJbdGhpcy5fcmVhZEluZGV4XTsKCiAgICAgICAgdmFyIGVuZCA9IHRoaXMuX3JlYWRJbmRleCArIChsZW5ndGggfHwgdGhpcy5fZW5kSW5kZXgpLAogICAgICAgICAgICBlbmQgPSBlbmQgPiB0aGlzLl9lbmRJbmRleCA/IHRoaXMuX2VuZEluZGV4IDogZW5kOwoKICAgICAgICByZXR1cm4gdGhpcy5fYnVmZmVyLnNsaWNlKHRoaXMuX3JlYWRJbmRleCwgZW5kKTsKICAgIH0sCgogICAgZ2V0VW5yZWFkOiBmdW5jdGlvbiBnZXRVbnJlYWQobGVuZ3RoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9nZXRVbnJlYWQobGVuZ3RoKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICByZXN1bHQgJiYgKHRoaXMuX3JlYWRJbmRleCArPSBsZW5ndGggPT09IDEgPyAxIDogcmVzdWx0Lmxlbmd0aCk7CiAgICAgICAgfQogICAgfSwKCiAgICBnZXRVbnJlYWRTaXplOiBmdW5jdGlvbiBnZXRVbnJlYWRTaXplKCkgewogICAgICAgIHJldHVybiB0aGlzLl9lbmRJbmRleCAtIHRoaXMuX3JlYWRJbmRleDsKICAgIH0sCgogICAgZ2V0VW5jbGVhclNpemU6IGZ1bmN0aW9uIGdldFVuY2xlYXJTaXplKCkgewogICAgICAgIHJldHVybiB0aGlzLl9yZWFkSW5kZXggLSB0aGlzLl9iZWdpbkluZGV4OwogICAgfSwKCiAgICBjbGVhclJlYWQ6IGZ1bmN0aW9uIGNsZWFyUmVhZChsaW1pdFNOKSB7CiAgICAgICAgLy8gPD0KICAgICAgICBpZiAodGhpcy5fcmVhZEluZGV4ID09PSB0aGlzLl9iZWdpbkluZGV4KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBjb3VudCA9IDA7CiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuX2JlZ2luSW5kZXg7IGkgPCB0aGlzLl9yZWFkSW5kZXg7IGkrKykgewogICAgICAgICAgICBpZiAodGhpcy5fYnVmZmVyW2ldLnNuIDw9IGxpbWl0U04pIHsKICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CiAgICAgICAgICAgIHRoaXMuX2J1ZmZlci5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fYmVnaW5JbmRleCA9IDA7CiAgICAgICAgdGhpcy5fcmVhZEluZGV4IC09IGNvdW50OwogICAgICAgIHRoaXMuX2VuZEluZGV4IC09IGNvdW50OwoKICAgICAgICByZXR1cm4gY291bnQ7CiAgICB9Cn0pOwoKLyoqKi8gfSksCi8qIDI0MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIlRyYWNrQnVmZmVyIik7Cgptb2R1bGUuZXhwb3J0cyA9IF91dGlsLnByb3RvdHlwZUV4dGVuZCh7CiAgICBtb3VzZVRyYWNrQnVmZmVyU2l6ZTogMTAwMCwKCiAgICBfc246IDEsCiAgICBfY29tcFJhZGlvOiAwLjI1LAoKICAgIF9iZWdpbkluZGV4OiAwLAogICAgX3JlYWRJbmRleDogMCwKICAgIF9lbmRJbmRleDogMCwgLy/kuI3ljIXlkKtlbmQKCiAgICBfX2luaXRfXzogZnVuY3Rpb24gX19pbml0X18oKSB7CiAgICAgICAgdGhpcy5fbW91c2VUcmFja0J1ZmZlciA9IG5ldyBBcnJheSh0aGlzLm1vdXNlVHJhY2tCdWZmZXJTaXplKTsKICAgIH0sCgogICAgX25leHRzbjogZnVuY3Rpb24gX25leHRzbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5fc24rKzsKICAgIH0sCgogICAgX2luZGV4OiBmdW5jdGlvbiBfaW5kZXgoX2luZGV4MikgewogICAgICAgIHJldHVybiBfaW5kZXgyICUgdGhpcy5tb3VzZVRyYWNrQnVmZmVyU2l6ZTsKICAgIH0sCgogICAgY29tcDE6IGZ1bmN0aW9uIGNvbXAxKGNvbXBSYWRpbykgewogICAgICAgIC8vY29tcFJhZGlvIOWOi+e8qeWOn+adpeeahGNvbXBSYWRpb++8jOWmgjAuMjXvvIzlsLHmmK/liKDpmaTlhbbkuK0wLjI15Liq5YWD57SgCiAgICAgICAgaWYgKGNvbXBSYWRpbyA+PSAxKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBzcGFuID0gTWF0aC5mbG9vcigxIC8gY29tcFJhZGlvKTsKCiAgICAgICAgdmFyIF9uZXh0SW5kZXggPSB0aGlzLl9iZWdpbkluZGV4OwogICAgICAgIHZhciBfY3VycmVudEluZGV4ID0gX25leHRJbmRleCArIDE7CgogICAgICAgIHdoaWxlIChfbmV4dEluZGV4IDwgdGhpcy5fZW5kSW5kZXgpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBzcGFuICYmIF9uZXh0SW5kZXggKyBpIDwgdGhpcy5fZW5kSW5kZXg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5fbW91c2VUcmFja0J1ZmZlclt0aGlzLl9pbmRleChfY3VycmVudEluZGV4KyspXSA9IHRoaXMuX21vdXNlVHJhY2tCdWZmZXJbdGhpcy5faW5kZXgoX25leHRJbmRleCArIGkpXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX25leHRJbmRleCArPSBzcGFuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fZW5kSW5kZXggPSBfY3VycmVudEluZGV4OwogICAgfSwKCiAgICBwdXQxOiBmdW5jdGlvbiBwdXQxKHRyYWNrKSB7CiAgICAgICAgaWYgKCF0cmFjaykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0cmFjay5zbiA9IHRoaXMuX25leHRzbigpOwoKICAgICAgICBpZiAodGhpcy5fZW5kSW5kZXggLSB0aGlzLl9yZWFkSW5kZXggPT09IHRoaXMubW91c2VUcmFja0J1ZmZlclNpemUpIHsKICAgICAgICAgICAgLy/mraTml7YgYmVnaW4gPSByZWFkLCBidWZmZXLvvInlsIbljp/mnInmlbDnu4Qo5pyq5Y+R6YCB6Zif5YiXKeWOi+e8qeS4uuWOn+WFiOeahDAuNzUKICAgICAgICAgICAgdGhpcy5jb21wMSh0aGlzLl9jb21wUmFkaW8pOwogICAgICAgICAgICB0aGlzLl9yZWFkSW5kZXggPSB0aGlzLl9iZWdpbkluZGV4OwogICAgICAgIH0KCiAgICAgICAgdmFyIGJlZ2luID0gdGhpcy5faW5kZXgodGhpcy5fYmVnaW5JbmRleCksCiAgICAgICAgICAgIHJlYWQgPSB0aGlzLl9pbmRleCh0aGlzLl9yZWFkSW5kZXgpLAogICAgICAgICAgICBlbmQgPSB0aGlzLl9pbmRleCh0aGlzLl9lbmRJbmRleCk7CgogICAgICAgIHZhciBuZXh0ID0gZW5kOwogICAgICAgIGlmIChuZXh0IDw9IGJlZ2luICYmIG5leHQgPj0gMCAmJiB0aGlzLl9lbmRJbmRleCA+IHRoaXMuX2JlZ2luSW5kZXgpIHsKICAgICAgICAgICAgLy8gYnVmZmVy5LiN6Laz5ZCO77yM6aaW5YWI6KaG55uW5bey57uP5Y+R6YCB55qECiAgICAgICAgICAgIHRoaXMuX2JlZ2luSW5kZXgrKzsKICAgICAgICB9CgogICAgICAgIHRoaXMuX21vdXNlVHJhY2tCdWZmZXJbbmV4dF0gPSB0cmFjazsKICAgICAgICB0aGlzLl9lbmRJbmRleCsrOwogICAgfSwKCiAgICBjb21wSGFsZk9mVW5yZWFkOiBmdW5jdGlvbiBjb21wSGFsZk9mVW5yZWFkKCkgewogICAgICAgIC8vY29tcFJhZGlvIOWOi+e8qeWOn+adpeeahGNvbXBSYWRpb++8jOWmgjAuMjXvvIzlsLHmmK/liKDpmaTlhbbkuK0wLjI15Liq5YWD57SgCiAgICAgICAgdmFyIF9uZXh0SW5kZXggPSB0aGlzLl9yZWFkSW5kZXggKyAyOwogICAgICAgIHZhciBfY3VycmVudEluZGV4ID0gdGhpcy5fcmVhZEluZGV4ICsgMTsKCiAgICAgICAgd2hpbGUgKF9uZXh0SW5kZXggPCB0aGlzLl9lbmRJbmRleCkgewogICAgICAgICAgICB0aGlzLl9tb3VzZVRyYWNrQnVmZmVyW3RoaXMuX2luZGV4KF9jdXJyZW50SW5kZXgrKyldID0gdGhpcy5fbW91c2VUcmFja0J1ZmZlclt0aGlzLl9pbmRleChfbmV4dEluZGV4KV07CgogICAgICAgICAgICBfbmV4dEluZGV4ICs9IDI7CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9lbmRJbmRleCA9IF9jdXJyZW50SW5kZXg7CiAgICB9LAoKICAgIHB1dDogZnVuY3Rpb24gcHV0KHRyYWNrKSB7CiAgICAgICAgaWYgKCF0cmFjaykgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0cmFjay5zbiA9IHRoaXMuX25leHRzbigpOwoKICAgICAgICBpZiAodGhpcy5fZW5kSW5kZXggLSB0aGlzLl9iZWdpbkluZGV4ID09PSB0aGlzLm1vdXNlVHJhY2tCdWZmZXJTaXplKSB7CiAgICAgICAgICAgIC8vIGJlZ2luLT5yZWFkIOW+hea4hemZpOWMuu+8jHJlYWQtPmVuZCDlvoXlj5HpgIHvvIzlpoLmnpzlvoXmuIXpmaTljLor5b6F5Y+R6YCB5Yy65ruh77yM5Y6L57yp5b6F5Y+R6YCB5Yy6CiAgICAgICAgICAgIHRoaXMuY29tcEhhbGZPZlVucmVhZCgpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGVuZCA9IHRoaXMuX2luZGV4KHRoaXMuX2VuZEluZGV4KTsKCiAgICAgICAgdGhpcy5fbW91c2VUcmFja0J1ZmZlcltlbmRdID0gdHJhY2s7CiAgICAgICAgdGhpcy5fZW5kSW5kZXgrKzsKICAgIH0sCgogICAgX2ludGVydmFsOiBmdW5jdGlvbiBfaW50ZXJ2YWwoc3RhcnRJbmRleCwgZW5kSW5kZXgpIHsKICAgICAgICB2YXIgcmVhZCA9IHRoaXMuX2luZGV4KHN0YXJ0SW5kZXgpLAogICAgICAgICAgICBlbmQgPSB0aGlzLl9pbmRleChlbmRJbmRleCk7CgogICAgICAgIGlmIChyZWFkIDwgZW5kKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb3VzZVRyYWNrQnVmZmVyLnNsaWNlKHJlYWQsIGVuZCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fbW91c2VUcmFja0J1ZmZlci5zbGljZShyZWFkKTsKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIHRoaXMuX21vdXNlVHJhY2tCdWZmZXIuc2xpY2UoMCwgZW5kKSk7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAoKICAgIF9nZXRVbnJlYWQ6IGZ1bmN0aW9uIF9nZXRVbnJlYWQobGVuZ3RoKSB7CiAgICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA9PT0gdGhpcy5fZW5kSW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIGxlbmd0aCA9PT0gMSA/IHVuZGVmaW5lZCA6IFtdOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXMuX21vdXNlVHJhY2tCdWZmZXJbdGhpcy5faW5kZXgodGhpcy5fcmVhZEluZGV4KV07CgogICAgICAgIHZhciBlbmQgPSB0aGlzLl9yZWFkSW5kZXggKyAobGVuZ3RoIHx8IHRoaXMuX2VuZEluZGV4KSwKICAgICAgICAgICAgZW5kID0gZW5kID4gdGhpcy5fZW5kSW5kZXggPyB0aGlzLl9lbmRJbmRleCA6IGVuZDsKCiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVydmFsKHRoaXMuX3JlYWRJbmRleCwgZW5kKTsKICAgIH0sCgogICAgZ2V0VW5yZWFkOiBmdW5jdGlvbiBnZXRVbnJlYWQobGVuZ3RoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9nZXRVbnJlYWQobGVuZ3RoKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICByZXN1bHQgJiYgKHRoaXMuX3JlYWRJbmRleCArPSBsZW5ndGggPT09IDEgPyAxIDogcmVzdWx0Lmxlbmd0aCk7CiAgICAgICAgfQogICAgfSwKCiAgICBnZXRVbnJlYWRTaXplOiBmdW5jdGlvbiBnZXRVbnJlYWRTaXplKCkgewogICAgICAgIHJldHVybiB0aGlzLl9lbmRJbmRleCAtIHRoaXMuX3JlYWRJbmRleDsKICAgIH0sCgogICAgZ2V0VW5jbGVhclNpemU6IGZ1bmN0aW9uIGdldFVuY2xlYXJTaXplKCkgewogICAgICAgIHJldHVybiB0aGlzLl9yZWFkSW5kZXggLSB0aGlzLl9iZWdpbkluZGV4OwogICAgfSwKCiAgICBjbGVhclJlYWQ6IGZ1bmN0aW9uIGNsZWFyUmVhZChsaW1pdFNOKSB7CiAgICAgICAgLy8gPD0KICAgICAgICBpZiAodGhpcy5fcmVhZEluZGV4ID09PSB0aGlzLl9iZWdpbkluZGV4KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBjb3VudCA9IDA7CgogICAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9iZWdpbkluZGV4OyBpIDwgdGhpcy5fcmVhZEluZGV4OyBpKyspIHsKICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5faW5kZXgoaSk7CgogICAgICAgICAgICBpZiAodGhpcy5fbW91c2VUcmFja0J1ZmZlcltpbmRleF0uc24gPD0gbGltaXRTTikgewogICAgICAgICAgICAgICAgdGhpcy5fYmVnaW5JbmRleCsrOwogICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY291bnQ7CiAgICB9Cn0pOwoKLyoqKi8gfSksCi8qIDI0MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIkNvbXBvc2l0ZUNhbnZhcyIpOwoKZnVuY3Rpb24gU2ltcGxlQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKCkge307Cgpmb3IgKHZhciBrZXkgaW4gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZSkgewogICAgKGZ1bmN0aW9uIChhdHRyKSB7CiAgICAgICAgU2ltcGxlQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZVthdHRyXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jYW52YXNDb250ZXh0W2F0dHJdID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9jYW52YXNDb250ZXh0W2F0dHJdLmFwcGx5KHRoaXMuX2NhbnZhc0NvbnRleHQsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzLmxlbmd0aCA+PSAxID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgaWYgKGFyZykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbnZhc0NvbnRleHRbYXR0cl0gPSBhcmc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW52YXNDb250ZXh0W2F0dHJdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0pKGtleSk7Cn0KCi8vaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRAoKdmFyIENvbXBvc2l0ZUNhbnZhcyA9IF91dGlsLnByb3RvdHlwZUV4dGVuZChTaW1wbGVDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHsKICAgIC8vY29tcG9zaXRlQ2FudmFzVGFnOgogICAgLy9fY29tcG9zaXRlT3BlcmF0aW9uOgogICAgLy9fZ2xvYmFsQWxwaGE6CiAgICBfX2luaXRfXzogZnVuY3Rpb24gX19pbml0X18oKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXNlbGYuY29tcG9zaXRlQ2FudmFzVGFnKSB7CiAgICAgICAgICAgIHNlbGYuY29tcG9zaXRlQ2FudmFzVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgfQoKICAgICAgICBzZWxmLl9jYW52YXNDb250ZXh0ID0gc2VsZi5jb21wb3NpdGVDYW52YXNUYWcuZ2V0Q29udGV4dCgiMmQiKTsKCiAgICAgICAgc2VsZi5fY2FudmFzQ29udGV4dC5nbG9iYWxBbHBoYSA9IHRoaXMuX2dsb2JhbEFscGhhICE9PSB1bmRlZmluZWQgPyB0aGlzLl9nbG9iYWxBbHBoYSA6IDE7CgogICAgICAgIHNlbGYuX2NvbXBvc2l0ZU9wZXJhdGlvbiA9IHNlbGYuX2NvbXBvc2l0ZU9wZXJhdGlvbiB8fCBvcGVyYXRpb24uc291cmNlX292ZXI7CiAgICAgICAgc2VsZi5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24oc2VsZi5fY29tcG9zaXRlT3BlcmF0aW9uKTsKICAgIH0sCgogICAgc2V0Q2FudmFzOiBmdW5jdGlvbiBzZXRDYW52YXMoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHZhciBzZXQ7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc2V0ID0gYXJndW1lbnRzW2ldOwoKICAgICAgICAgICAgdHlwZW9mIHNldCA9PT0gImZ1bmN0aW9uIiAmJiBzZXQodGhpcy5jb21wb3NpdGVDYW52YXNUYWcsIHRoaXMuX2NhbnZhc0NvbnRleHQpOwogICAgICAgICAgICB0eXBlb2Ygc2V0ICE9PSAiZnVuY3Rpb24iICYmIF91dGlsLmlzUGxhaW5PYmplY3Qoc2V0KSAmJiBfdXRpbC5mb3JFYWNoKHNldCwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoIkNhbnZhcyBzZXQgIiwga2V5LCAiID0gIiwgdmFsdWUpOwogICAgICAgICAgICAgICAgc2VsZi5jb21wb3NpdGVDYW52YXNUYWcuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzZWxmOwogICAgfSwKCiAgICBnZXRDYW52YXNJbWFnZURhdGE6IGZ1bmN0aW9uIGdldENhbnZhc0ltYWdlRGF0YShjYW52YXMsIGFscGhhKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsKICAgICAgICB9CgogICAgICAgIHZhciBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgICAgY2FudmFzQ29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhIHx8IDA7CiAgICAgICAgcmV0dXJuIGNhbnZhc0NvbnRleHQuZ2V0SW1hZ2VEYXRhLmFwcGx5KGNhbnZhc0NvbnRleHQsIGFyZ3MpOwogICAgfSwKCiAgICBfY29tcG9zaXRlOiBmdW5jdGlvbiBfY29tcG9zaXRlKGNvbXBvc2l0ZU9wZXJhdGlvbikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGVDYW52YXMoc2VsZiwgeyBfY29tcG9zaXRlT3BlcmF0aW9uOiBjb21wb3NpdGVPcGVyYXRpb24gfSk7CiAgICB9LAoKICAgIGNvbXBvc2l0ZTogZnVuY3Rpb24gY29tcG9zaXRlKGNvbXBvc2l0ZU9wZXJhdGlvbikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBzZWxmLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbihjb21wb3NpdGVPcGVyYXRpb24pOwoKICAgICAgICByZXR1cm4gc2VsZjsKICAgIH0sCgogICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lOiBmdW5jdGlvbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGltZSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5yZXF1ZXN0RnJhbWUoKTsKICAgICAgICBzZWxmLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVTdGFydCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKHRpbWUpIHsKICAgICAgICAgICAgc2VsZi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGltZSk7CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiBzZWxmOwogICAgfSwKCiAgICBjYW5jZWxBbmltYXRpb25GcmFtZTogZnVuY3Rpb24gY2FuY2VsQW5pbWF0aW9uRnJhbWUoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHNlbGYuX3JlcXVlc3RBbmltYXRpb25GcmFtZVN0YXJ0ICYmIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShzZWxmLl9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVTdGFydCk7CgogICAgICAgIHJldHVybiBzZWxmOwogICAgfSwKCiAgICByZXF1ZXN0RnJhbWU6IGZ1bmN0aW9uIHJlcXVlc3RGcmFtZShfZnJhbWVSYXRlKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIGlmICh0eXBlb2YgdGhpcy5yZXF1ZXN0T25lRnJhbWUgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgX2xvZ2dlci5lcnJvcigiUGxlYXMgaW1wbGVtZW50IHJlcXVlc3RPbmVGcmFtZSgpIik7CiAgICAgICAgICAgIHRocm93ICJQbGVhcyBpbXBsZW1lbnQgcmVxdWVzdE9uZUZyYW1lKCkiOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhpcy5yZXF1ZXN0T25lRnJhbWUoKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdGltZW91dE1pbGxpczsKICAgICAgICBpZiAoX2ZyYW1lUmF0ZSkgewogICAgICAgICAgICB0aW1lb3V0TWlsbGlzID0gTWF0aC5mbG9vcigxMDAwIC8gX2ZyYW1lUmF0ZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRpbWVvdXRNaWxsaXMpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGY7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVxdWVzdEZyYW1lID0gdGhpcy5yZXF1ZXN0RnJhbWUuYmluZCh0aGlzKTsKICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJlcXVlc3RGcmFtZShfZnJhbWVSYXRlKTsKICAgICAgICB9LCB0aW1lb3V0TWlsbGlzKTsKCiAgICAgICAgcmV0dXJuIHNlbGY7CiAgICB9LAogICAgc3RvcFJlcXVlc3RGcmFtZTogZnVuY3Rpb24gc3RvcFJlcXVlc3RGcmFtZSgpIHsKICAgICAgICB0aGlzLmludGVydmFsSWQgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8vIGdldEltYWdlRGF0YTogZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodCl7CiAgICAvLyAgICAgeCA9IHggfHwgMCwKICAgIC8vICAgICAgICAgeSA9IHkgfHwgMCwKICAgIC8vICAgICAgICAgd2lkdGggPSB3aWR0aCB8fCB0aGlzLmNvbXBvc2l0ZUNhbnZhc1RhZy53aWR0aCwKICAgIC8vICAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IHRoaXMuY29tcG9zaXRlQ2FudmFzVGFnLmhlaWdodDsKICAgIC8vCiAgICAvLyAgICAgdmFyIGltYWdlRGF0YSA9IHRoaXMuX2NhbnZhc0NvbnRleHQuZ2V0SW1hZ2VEYXRhKHgsIHksIHdpZHRoLCBoZWlnaHQpOwogICAgLy8gICAgIHJldHVybiBpbWFnZURhdGE7CiAgICAvLyB9LAoKICAgIC8qKgogICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC9wdXRJbWFnZURhdGEKICAgICAqCiAgICAgKiBAcGFyYW0gaW1hZ2VEYXRhIEltYWdlRGF0YSDvvIzljIXlkKvlg4/ntKDlgLznmoTmlbDnu4Tlr7nosaHjgIIKICAgICAqIEBwYXJhbSBkeCDmupDlm77lg4/mlbDmja7lnKjnm67moIfnlLvluIPkuK3nmoTkvY3nva7lgY/np7vph4/vvIh4IOi9tOaWueWQkeeahOWBj+enu+mHj++8ieOAggogICAgICogQHBhcmFtIGR5IOa6kOWbvuWDj+aVsOaNruWcqOebruagh+eUu+W4g+S4reeahOS9jee9ruWBj+enu+mHj++8iHkg6L205pa55ZCR55qE5YGP56e76YeP77yJ44CCCiAgICAgKiBAcGFyYW0gZGlydHlYIOWcqOa6kOWbvuWDj+aVsOaNruS4re+8jOefqeW9ouWMuuWfn+W3puS4iuinkueahOS9jee9ruOAgum7mOiupOaYr+aVtOS4quWbvuWDj+aVsOaNrueahOW3puS4iuinku+8iHgg5Z2Q5qCH77yJ44CCCiAgICAgKiBAcGFyYW0gZGlydHlZIOWcqOa6kOWbvuWDj+aVsOaNruS4re+8jOefqeW9ouWMuuWfn+W3puS4iuinkueahOS9jee9ruOAgum7mOiupOaYr+aVtOS4quWbvuWDj+aVsOaNrueahOW3puS4iuinku+8iHkg5Z2Q5qCH77yJ44CCCiAgICAgKiBAcGFyYW0gZGlydHlXaWR0aCDlnKjmupDlm77lg4/mlbDmja7kuK3vvIznn6nlvaLljLrln5/nmoTlrr3luqbjgILpu5jorqTmmK/lm77lg4/mlbDmja7nmoTlrr3luqbjgIIKICAgICAqIEBwYXJhbSBkaXJ0eUhlaWdodCDlnKjmupDlm77lg4/mlbDmja7kuK3vvIznn6nlvaLljLrln5/nmoTpq5jluqbjgILpu5jorqTmmK/lm77lg4/mlbDmja7nmoTpq5jluqbjgIIKICAgICAqIEByZXR1cm5zIHtDb21wb3NpdGVDYW52YXN9CiAgICAgKi8KICAgIC8vIHB1dEltYWdlRGF0YTogZnVuY3Rpb24oaW1hZ2VEYXRhLCBkeCwgZHksIGRpcnR5WCwgZGlydHlZLCBkaXJ0eVdpZHRoLCBkaXJ0eUhlaWdodCl7CiAgICAvLyAgICAgZHggPSBkeCB8fCAwLAogICAgLy8gICAgICAgICBkeSA9IGR5IHx8IDA7CiAgICAvLwogICAgLy8gICAgIGlmKGFyZ3VtZW50cy5sZW5ndGggPj0gNyl7CiAgICAvLyAgICAgICAgIHRoaXMuX2NhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgZHgsIGR5LCBkaXJ0eVgsIGRpcnR5WSwgZGlydHlXaWR0aCwgZGlydHlIZWlnaHQpOwogICAgLy8gICAgIH1lbHNlewogICAgLy8gICAgICAgICB0aGlzLl9jYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIGR4LCBkeSk7CiAgICAvLyAgICAgfQogICAgLy8KICAgIC8vICAgICByZXR1cm4gdGhpczsKICAgIC8vIH0sCgogICAgLyoqCiAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy96aC1DTi9kb2NzL1dlYi9BUEkvQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEL2RyYXdJbWFnZQogICAgICoKICAgICAqIEBwYXJhbSBpbWFnZSDnu5jliLbliLDkuIrkuIvmlofnmoTlhYPntKDjgILlhYHorrjku7vkvZXnmoQgY2FudmFzIOWbvuWDj+a6kChDYW52YXNJbWFnZVNvdXJjZSnvvIzkvovlpoLvvJpIVE1MSW1hZ2VFbGVtZW5077yMSFRNTFZpZGVvRWxlbWVudO+8jOaIluiAhSBIVE1MQ2FudmFzRWxlbWVudOOAggogICAgICogQHBhcmFtIGR4IOebruagh+eUu+W4g+eahOW3puS4iuinkuWcqOebruagh2NhbnZhc+S4iiBYIOi9tOeahOS9jee9ruOAggogICAgICogQHBhcmFtIGR5IOebruagh+eUu+W4g+eahOW3puS4iuinkuWcqOebruagh2NhbnZhc+S4iiBZIOi9tOeahOS9jee9ruOAggogICAgICogQHBhcmFtIGRXaWR0aCDlnKjnm67moIfnlLvluIPkuIrnu5jliLblm77lg4/nmoTlrr3luqbjgIIg5YWB6K645a+557uY5Yi255qE5Zu+5YOP6L+b6KGM57yp5pS+44CCIOWmguaenOS4jeivtOaYju+8jCDlnKjnu5jliLbml7blm77niYflrr3luqbkuI3kvJrnvKnmlL7jgIIKICAgICAqIEBwYXJhbSBkSGVpZ2h0IOWcqOebruagh+eUu+W4g+S4iue7mOWItuWbvuWDj+eahOmrmOW6puOAgiDlhYHorrjlr7nnu5jliLbnmoTlm77lg4/ov5vooYznvKnmlL7jgIIg5aaC5p6c5LiN6K+05piO77yMIOWcqOe7mOWItuaXtuWbvueJh+mrmOW6puS4jeS8mue8qeaUvuOAggogICAgICogQHBhcmFtIHN4IOmcgOimgee7mOWItuWIsOebruagh+S4iuS4i+aWh+S4reeahO+8jOa6kOWbvuWDj+eahOefqeW9oumAieaLqeahhueahOW3puS4iuinkiBYIOWdkOagh+OAggogICAgICogQHBhcmFtIHN5IOmcgOimgee7mOWItuWIsOebruagh+S4iuS4i+aWh+S4reeahO+8jOa6kOWbvuWDj+eahOefqeW9oumAieaLqeahhueahOW3puS4iuinkiBZIOWdkOagh+OAggogICAgICogQHBhcmFtIHNXaWR0aCDpnIDopoHnu5jliLbliLDnm67moIfkuIrkuIvmlofkuK3nmoTvvIzmupDlm77lg4/nmoTnn6nlvaLpgInmi6nmoYbnmoTlrr3luqbjgILlpoLmnpzkuI3or7TmmI7vvIzmlbTkuKrnn6nlvaLku47lnZDmoIfnmoRzeOWSjHN55byA5aeL77yM5Yiw5Zu+5YOP55qE5Y+z5LiL6KeS57uT5p2f44CCCiAgICAgKiBAcGFyYW0gc0hlaWdodCDpnIDopoHnu5jliLbliLDnm67moIfkuIrkuIvmlofkuK3nmoTvvIzmupDlm77lg4/nmoTnn6nlvaLpgInmi6nmoYbnmoTpq5jluqbjgIIKICAgICAqIEByZXR1cm5zIHtDb21wb3NpdGVDYW52YXN9CiAgICAgKi8KICAgIC8vIGRyYXdJbWFnZTogZnVuY3Rpb24oaW1hZ2UsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0LCBzeCwgc3ksIHNXaWR0aCwgc0hlaWdodCl7CiAgICAvLyAgICAgaWYoYXJndW1lbnRzLmxlbmd0aCA+PSA5KXsKICAgIC8vICAgICAgICAgdGhpcy5fY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIHN4LCBzeSwgc1dpZHRoLCBzSGVpZ2h0LCBkeCwgZHksIGRXaWR0aCwgZEhlaWdodCk7CiAgICAvLyAgICAgfWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCA+PSA1KXsKICAgIC8vICAgICAgICAgdGhpcy5fY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0KTsKICAgIC8vICAgICB9ZWxzZXsKICAgIC8vICAgICAgICAgZHggPSBkeCB8fCAwLCBkeSA9IGR5IHx8IDA7CiAgICAvLyAgICAgICAgIHRoaXMuX2NhbnZhc0NvbnRleHQuZHJhd0ltYWdlKGltYWdlLCBkeCwgZHkpOwogICAgLy8gICAgIH0KICAgIC8vCiAgICAvLyAgICAgcmV0dXJuIHRoaXM7CiAgICAvLyB9Cn0pOwoKQ29tcG9zaXRlQ2FudmFzLkNvbXBvc2l0ZU9wZXJhdGlvbiA9IFsnc291cmNlLWF0b3AnLCAnc291cmNlLWluJywgJ3NvdXJjZS1vdXQnLCAnc291cmNlLW92ZXInLCAnZGVzdGluYXRpb24tYXRvcCcsICdkZXN0aW5hdGlvbi1pbicsICdkZXN0aW5hdGlvbi1vdXQnLCAnZGVzdGluYXRpb24tb3ZlcicsICdsaWdodGVyJywgJ2RhcmtlcicsICd4b3InLCAnY29weSddOwoKdmFyIG9wZXJhdGlvbiA9IENvbXBvc2l0ZUNhbnZhcy5vcGVyYXRpb24gPSB7CiAgICBzb3VyY2VfYXRvcDogJ3NvdXJjZS1hdG9wJywKICAgIHNvdXJjZV9pbjogJ3NvdXJjZS1pbicsCiAgICBzb3VyY2Vfb3V0OiAnc291cmNlLW91dCcsCiAgICBzb3VyY2Vfb3ZlcjogJ3NvdXJjZS1vdmVyJywKICAgIGRlc3RpbmF0aW9uX2F0b3A6ICdkZXN0aW5hdGlvbi1hdG9wJywKICAgIGRlc3RpbmF0aW9uX2luOiAnZGVzdGluYXRpb24taW4nLAogICAgZGVzdGluYXRpb25fb3V0OiAnZGVzdGluYXRpb24tb3V0JywKICAgIGRlc3RpbmF0aW9uX292ZXI6ICdkZXN0aW5hdGlvbi1vdmVyJywKICAgIGxpZ2h0ZXI6ICdsaWdodGVyJywKICAgIGRhcmtlcjogJ2RhcmtlcicsCiAgICB4b3I6ICd4b3InLAogICAgY29weTogJ2NvcHknCn07CgpDb21wb3NpdGVDYW52YXMuY29tcG9zaXRlVmlkZW9PdmVyQ2FudmFzID0gZnVuY3Rpb24gKGNvbXBvc2l0ZUNhbnZhc1RhZywgdmlkZW8sIGNhbnZhcykgewogICAgdmFyIGNvbXBvc2l0ZUNhbnZhczsKICAgIGlmICghKGNvbXBvc2l0ZUNhbnZhcyA9IGNvbXBvc2l0ZUNhbnZhc1RhZy5jb21wb3NpdGVDYW52YXMpKSB7CiAgICAgICAgY29tcG9zaXRlQ2FudmFzID0gbmV3IENvbXBvc2l0ZUNhbnZhcyh7CiAgICAgICAgICAgIGNvbXBvc2l0ZUNhbnZhc1RhZzogY29tcG9zaXRlQ2FudmFzVGFnLAoKICAgICAgICAgICAgcmVxdWVzdE9uZUZyYW1lOiBmdW5jdGlvbiByZXF1ZXN0T25lRnJhbWUoKSB7CiAgICAgICAgICAgICAgICB2aWRlbyAmJiBjb21wb3NpdGVDYW52YXMuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCBjb21wb3NpdGVDYW52YXNUYWcud2lkdGgsIGNvbXBvc2l0ZUNhbnZhc1RhZy5oZWlnaHQpOwogICAgICAgICAgICAgICAgY2FudmFzICYmIGNvbXBvc2l0ZUNhbnZhcy5kcmF3SW1hZ2UoY2FudmFzLCAwLCAwLCBjb21wb3NpdGVDYW52YXNUYWcud2lkdGgsIGNvbXBvc2l0ZUNhbnZhc1RhZy5oZWlnaHQpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGNvbXBvc2l0ZUNhbnZhc1RhZy5jb21wb3NpdGVDYW52YXMgPSBjb21wb3NpdGVDYW52YXM7CiAgICB9CgogICAgcmV0dXJuIGNvbXBvc2l0ZUNhbnZhczsKfTsKCm1vZHVsZS5leHBvcnRzID0gQ29tcG9zaXRlQ2FudmFzOwoKLyoqKi8gfSksCi8qIDI0MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoIktleWJvYXJkIik7Cgptb2R1bGUuZXhwb3J0cyA9IF91dGlsLnByb3RvdHlwZUV4dGVuZCh7CiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihidG4pIHt9LAoKICAgIG9uS2V5VXA6IGZ1bmN0aW9uIG9uS2V5VXAoYnRuKSB7fQp9KTsKCi8qKiovIH0pLAovKiAyNDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIF91dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7CnZhciBfbG9nZ2VyID0gX3V0aWwudGFnTG9nZ2VyKCJQQ1N0YXRzIik7CgovKioKICogb3V0Ym91bmQtcnRwCiAqICBieXRlc1NlbnQKICogIHBhY2tldHNTZW50CiAqICBxcFN1bQogKiAgcGxpQ291bnQKICogaW5ib3VuZC1ydHAKICogIGJ5dGVzUmVjZWl2ZWQKICogIGZyYW1lc0RlY29kZWQKICogIHBhY2tldHNMb3N0CiAqICBwYWNrZXRzUmVjZWl2ZWQKICogIHBsaUNvdW50CiAqIHRyYWNrCiAqICBmcmFtZXNEZWNvZGVkCiAqICBmcmFtZXNSZWNlaXZlZAogKiAgZnJhbWVzRHJvcHBlZAogKiB0cmFuc3BvcnQKICogIGJ5dGVzUmVjZWl2ZWQKICogIGJ5dGVzU2VudAogKiBjYW5kaWRhdGUtcGFpcgogKiAgYnl0ZXNSZWNlaXZlZAogKiAgYnl0ZXNTZW50CiAqICB0b3RhbFJvdW5kVHJpcFRpbWUKICogIHJlcXVlc3RzUmVjZWl2ZWQKICogIHJlc3BvbnNlc1NlbnQKICogIHJlcXVlc3RzU2VudAogKiAgcmVzcG9uc2VzUmVjZWl2ZWQKICogbG9jYWwtY2FuZGlkYXRlCiAqICBuZXR3b3JrVHlwZQogKiAgcHJvdG9jb2wKICogIHBvcnQKICogcmVtb3RlLWNhbmRpZGF0ZQogKiAgaXAKICogY29kZWMKICogIGNsb2NrUmF0ZQogKiAgbWltZVR5cGUKICoKICoKICovCgp2YXIgUENTdGF0czsKbW9kdWxlLmV4cG9ydHMgPSBQQ1N0YXRzID0gX3V0aWwucHJvdG90eXBlRXh0ZW5kKHsKICAgIC8vX3dlYnJ0YzoKICAgIC8vX3N0cmVhbToKCiAgICBfX2luaXRfXzogZnVuY3Rpb24gX19pbml0X18oKSB7CiAgICAgICAgaWYgKCF0aGlzLl93ZWJydGMpIHsKICAgICAgICAgICAgdGhpcy5fc3RyZWFtICYmICh0aGlzLl93ZWJydGMgPSB0aGlzLl9zdHJlYW0uX3dlYnJ0Yyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnNhbXBsZXNEYXRhcyA9IHt9OwogICAgICAgIHRoaXMuZ2F0aGVyUmVzdWx0cyA9IHt9OwoKICAgICAgICB0aGlzLl9ieXNhbXBsZXMgPSB7fTsKICAgICAgICBpZiAodGhpcy5faW5ib3VuZF8gIT09IGZhbHNlKSB7CiAgICAgICAgICAgIC8vdGhpcy5fYnlzYW1wbGVzWyJpbmJvdW5kLXJ0cCJdID0gWyJieXRlc1JlY2VpdmVkIiwgImZyYW1lc0RlY29kZWQiLCAicGFja2V0c0xvc3QiLCAicGFja2V0c1JlY2VpdmVkIiwgInBsaUNvdW50IiwgInBhY2thZ2VMb3NzUmF0ZSJdOwogICAgICAgICAgICB0aGlzLl9ieXNhbXBsZXNbImluYm91bmQtcnRwIl0gPSBbImJ5dGVzUmVjZWl2ZWQiLCAicGFja2V0c0xvc3QiLCAicGFja2V0c1JlY2VpdmVkIiwgInBhY2thZ2VMb3NzUmF0ZSJdOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5fb3V0Ym91bmRfICE9PSBmYWxzZSkgewogICAgICAgICAgICAvL3RoaXMuX2J5c2FtcGxlc1sib3V0Ym91bmQtcnRwIl0gPSBbImJ5dGVzU2VudCIsICJwYWNrZXRzU2VudCIsICJxcFN1bSIsICJwbGlDb3VudCJdOwogICAgICAgICAgICB0aGlzLl9ieXNhbXBsZXNbIm91dGJvdW5kLXJ0cCJdID0gWyJieXRlc1NlbnQiXTsKICAgICAgICB9CiAgICB9LAoKICAgIG9uR2F0aGVyUmVzdWx0OiBmdW5jdGlvbiBvbkdhdGhlclJlc3VsdCh0cmFja0lkLCB0eXBlLCBzdWJ0eXBlLCBkYXRhKSB7CiAgICAgICAgX2xvZ2dlci5pbmZvKHRyYWNrSWQsIHR5cGUsIHN1YnR5cGUsIGRhdGEpOwogICAgfSwKCiAgICBzdGF0czogZnVuY3Rpb24gc3RhdHMoc2VsZWN0b3IpIHsKICAgICAgICBpZiAoIXRoaXMuX3dlYnJ0YyB8fCAhdGhpcy5fd2VicnRjLl9ydGNQZWVyQ29ubmVjdGlvbikgewogICAgICAgICAgICBfbG9nZ2VyLndhcm4oIm5vdCBmb3VuZCB3ZWJydGMgb3IgcGVlciBjb25uZWN0aW9uIikucmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXMuX3dlYnJ0Yy5fcnRjUGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMoc2VsZWN0b3IpOwogICAgfSwKCiAgICBzdGF0c09mVHJhY2s6IGZ1bmN0aW9uIHN0YXRzT2ZUcmFjayhzZWxlY3RvcikgewogICAgICAgIGlmICghc2VsZWN0b3IgaW5zdGFuY2VvZiB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjaykgewogICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCJzZWxlY3RvciBub3QgYSBNZWRpYVN0cmVhbVRyYWNrIik7CiAgICAgICAgICAgIHRocm93ICJzZWxlY3RvciBub3QgYSBNZWRpYVN0cmVhbVRyYWNrIjsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLnN0YXRzKHNlbGVjdG9yKTsKICAgIH0sCgogICAgYXVkaW9UcmFjazogZnVuY3Rpb24gYXVkaW9UcmFjayhtZWRpYVN0cmVhbSkgewogICAgICAgIHZhciB0cmFja3MgPSBtZWRpYVN0cmVhbSAmJiBtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpOwogICAgICAgIHJldHVybiB0cmFja3MgJiYgdHJhY2tzLmxlbmd0aCA/IHRyYWNrc1swXSA6IHVuZGVmaW5lZDsKICAgIH0sCgogICAgdmlkZW9UcmFjazogZnVuY3Rpb24gdmlkZW9UcmFjayhtZWRpYVN0cmVhbSkgewogICAgICAgIHZhciB0cmFja3MgPSBtZWRpYVN0cmVhbSAmJiBtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpOwogICAgICAgIHJldHVybiB0cmFja3MgJiYgdHJhY2tzLmxlbmd0aCA/IHRyYWNrc1swXSA6IHVuZGVmaW5lZDsKICAgIH0sCgogICAgLy8gc2FtcGxpbmdUcmFjazogZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAvLyAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgLy8KICAgIC8vICAgICB2YXIgdHJhY2tJZCA9IHRyYWNrLmlkOwogICAgLy8gICAgIHRoaXMuc3RhdHNPZlRyYWNrKHRyYWNrKS50aGVuKGZ1bmN0aW9uKF9zdGF0cyl7CiAgICAvLyAgICAgICAgIHNlbGYuX3RyYWNrU2FtcGxlc1t0cmFja0lkXSB8fCAoc2VsZi5fdHJhY2tTYW1wbGVzW3RyYWNrSWRdID0gW10pOwogICAgLy8KICAgIC8vICAgICAgICAgdmFyIHN0YXRzUGFybXMgPSBzZWxmLl90cmFja1NhbXBsZXNbdHJhY2tJZF07CiAgICAvLwogICAgLy8gICAgICAgICBfc3RhdHMuZm9yRWFjaChmdW5jdGlvbihfc3RhdCwgbmFtZSl7CiAgICAvLyAgICAgICAgICAgICB2YXIgc2FtcGxpbmdzID0gX2J5c2FtcGxlc1tfc3RhdC50eXBlXTsKICAgIC8vCiAgICAvLyAgICAgICAgICAgICB2YXIgdG1wOwogICAgLy8gICAgICAgICAgICAgaWYoc2FtcGxpbmdzICYmIHNhbXBsaW5ncy5sZW5ndGgpewogICAgLy8gICAgICAgICAgICAgICAgIHZhciBzdGF0UGFybXMgPSAodG1wIHx8ICh0bXAgPSB7fSkpW19zdGF0LnR5cGVdID0ge3R5cGU6X3N0YXQudHlwZSwgdGltZXN0YW1wOiBfc3RhdC50aW1lc3RhbXB9OwogICAgLy8KICAgIC8vICAgICAgICAgICAgICAgICBzYW1wbGluZ3MuZm9yRWFjaChmdW5jdGlvbihfcGFyYW0pewogICAgLy8gICAgICAgICAgICAgICAgICAgICBzdGF0UGFybXNbX3BhcmFtXSA9IF9zdGF0W19wYXJhbV07CiAgICAvLyAgICAgICAgICAgICAgICAgfSk7CiAgICAvLyAgICAgICAgICAgICB9CiAgICAvLyAgICAgICAgICAgICB0bXAgJiYgc3RhdHNQYXJtcy5wdXNoKHRtcCk7CiAgICAvLyAgICAgICAgIH0pOwogICAgLy8gICAgIH0pOwogICAgLy8gfSwKCiAgICBnYXRoZXJUcmFjazogZnVuY3Rpb24gZ2F0aGVyVHJhY2sodHJhY2ssIG1lZGlhVHlwZSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgbWVkaWFUeXBlID0gdHJhY2sua2luZCB8fCBtZWRpYVR5cGU7CiAgICAgICAgbWVkaWFUeXBlID0gbWVkaWFUeXBlICYmIG1lZGlhVHlwZS50b0xvd2VyQ2FzZSgpOwoKICAgICAgICB2YXIgdHJhY2tJZCA9IHRyYWNrLmlkOwogICAgICAgIHRoaXMuc3RhdHNPZlRyYWNrKHRyYWNrKS50aGVuKGZ1bmN0aW9uIChfc3RhdHMpIHsKICAgICAgICAgICAgc2VsZi5zYW1wbGVzRGF0YXNbdHJhY2tJZF0gfHwgKHNlbGYuc2FtcGxlc0RhdGFzW3RyYWNrSWRdID0ge30pOwoKICAgICAgICAgICAgdmFyIHN0YXRzUGFybXMgPSBzZWxmLnNhbXBsZXNEYXRhc1t0cmFja0lkXTsKCiAgICAgICAgICAgIF9zdGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChfc3RhdCwgbmFtZSkgewogICAgICAgICAgICAgICAgdmFyIHNhbXBsaW5ncyA9IHNlbGYuX2J5c2FtcGxlc1tfc3RhdC50eXBlXTsKCiAgICAgICAgICAgICAgICB2YXIgc3RhdE1lZGlhVHlwZSA9IF9zdGF0Lm1lZGlhVHlwZSB8fCBuYW1lLmluZGV4T2YoImlkZW8iKSA+PSAwICYmICJ2aWRlbyIgfHwgbmFtZS5pbmRleE9mKCJ1ZGlvIikgPj0gMCAmJiAiYXVkaW8iIHx8IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgICBpZiAoc2FtcGxpbmdzICYmIHNhbXBsaW5ncy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZW1lZGlhLmNvbmZpZy5fcHJpbnREZWJ1Z1N0YXRzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcobmFtZSwgX3N0YXQsIHRyYWNrLCBzdGF0TWVkaWFUeXBlLCBtZWRpYVR5cGUpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0TWVkaWFUeXBlIHx8IHN0YXRNZWRpYVR5cGUgPT09IG1lZGlhVHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gc3RhdHNQYXJtc1tfc3RhdC50eXBlXSB8fCAoc3RhdHNQYXJtc1tfc3RhdC50eXBlXSA9IHt9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChfcGFyYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IHRtcFtfcGFyYW1dIHx8ICh0bXBbX3BhcmFtXSA9IFtdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHsgdGltZXN0YW1wOiBfc3RhdC50aW1lc3RhbXAsIGtpbmQ6IF9zdGF0Lm1lZGlhVHlwZSB8fCB0cmFjay5raW5kIHx8IG1lZGlhVHlwZSB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJwYWNrYWdlTG9zc1JhdGUiID09PSBfcGFyYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtW19wYXJhbV0gPSB7IHBhY2tldHNMb3N0OiBfc3RhdFsicGFja2V0c0xvc3QiXSwgcGFja2V0c1JlY2VpdmVkOiBfc3RhdFsicGFja2V0c1JlY2VpdmVkIl0gfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVtfcGFyYW1dID0gX3N0YXRbX3BhcmFtXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKCiAgICBnYXRoZXJXZWJydGNNZWRpYVN0cmVhbTogZnVuY3Rpb24gZ2F0aGVyV2VicnRjTWVkaWFTdHJlYW0oX21lZGlhU3RyZWFtLCB0eXBlKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoIXR5cGUpIHsKICAgICAgICAgICAgX21lZGlhU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICBzZWxmLmdhdGhlclRyYWNrKHRyYWNrKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICgiYXVkaW8iID09PSB0eXBlLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgX21lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgIHNlbGYuZ2F0aGVyVHJhY2sodHJhY2ssIHRyYWNrLmtpbmQgfHwgdHlwZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICgidmlkZW8iID09PSB0eXBlLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgX21lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgICAgIHNlbGYuZ2F0aGVyVHJhY2sodHJhY2ssIHRyYWNrLmtpbmQgfHwgdHlwZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICB9LAoKICAgIGdhdGhlcldlYnJ0YzogZnVuY3Rpb24gZ2F0aGVyV2VicnRjKCkgewogICAgICAgIHRoaXMuX3dlYnJ0Yy5fbG9jYWxTdHJlYW0gJiYgdGhpcy5nYXRoZXJXZWJydGNNZWRpYVN0cmVhbSh0aGlzLl93ZWJydGMuX2xvY2FsU3RyZWFtKTsKICAgICAgICB0aGlzLl93ZWJydGMuX3JlbW90ZVN0cmVhbSAmJiB0aGlzLmdhdGhlcldlYnJ0Y01lZGlhU3RyZWFtKHRoaXMuX3dlYnJ0Yy5fcmVtb3RlU3RyZWFtKTsKICAgIH0sCgogICAgX2dhdGhlcl9pbmJvdW5kX3J0cF9wbGlDb3VudDogZnVuY3Rpb24gX2dhdGhlcl9pbmJvdW5kX3J0cF9wbGlDb3VudChkYXRhQXJyYXkpIHsKICAgICAgICB2YXIgZGF0YSA9IGRhdGFBcnJheS5zaGlmdCgpOwogICAgICAgIHJldHVybiBkYXRhICYmIGRhdGEucGxpQ291bnQgfHwgMDsKICAgIH0sCiAgICBfZ2F0aGVyX2luYm91bmRfcnRwX3BhY2tldHNMb3N0OiBmdW5jdGlvbiBfZ2F0aGVyX2luYm91bmRfcnRwX3BhY2tldHNMb3N0KGRhdGFBcnJheSkgewogICAgICAgIHZhciBkYXRhID0gZGF0YUFycmF5LnNoaWZ0KCk7CiAgICAgICAgcmV0dXJuIGRhdGEgJiYgZGF0YS5wYWNrZXRzTG9zdCB8fCAwOwogICAgfSwKICAgIF9nYXRoZXJfaW5ib3VuZF9ydHBfcGFja2V0c1JlY2VpdmVkOiBmdW5jdGlvbiBfZ2F0aGVyX2luYm91bmRfcnRwX3BhY2tldHNSZWNlaXZlZChkYXRhQXJyYXkpIHsKICAgICAgICB2YXIgZGF0YSA9IGRhdGFBcnJheS5zaGlmdCgpOwogICAgICAgIHJldHVybiBkYXRhICYmIGRhdGEucGFja2V0c1JlY2VpdmVkIHx8IDA7CiAgICB9LAogICAgX2dhdGhlcl9pbmJvdW5kX3J0cF9wYWNrYWdlTG9zc1JhdGU6IGZ1bmN0aW9uIF9nYXRoZXJfaW5ib3VuZF9ydHBfcGFja2FnZUxvc3NSYXRlKGRhdGFBcnJheSkgewogICAgICAgIGlmICghZGF0YUFycmF5IHx8IGRhdGFBcnJheS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IGRhdGFBcnJheVtkYXRhQXJyYXkubGVuZ3RoIC0gMV07CiAgICAgICAgdmFyIGZpcnN0RGF0YTsKICAgICAgICBpZiAoZGF0YUFycmF5Lmxlbmd0aCA8IGVtZWRpYS5jb25maWcuc3RhdHNTZWNvbmRzKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZpcnN0RGF0YSA9IGRhdGFBcnJheS5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIChkYXRhLnBhY2thZ2VMb3NzUmF0ZS5wYWNrZXRzTG9zdCAtIGZpcnN0RGF0YS5wYWNrYWdlTG9zc1JhdGUucGFja2V0c0xvc3QpIC8gKGRhdGEucGFja2FnZUxvc3NSYXRlLnBhY2tldHNSZWNlaXZlZCAtIGZpcnN0RGF0YS5wYWNrYWdlTG9zc1JhdGUucGFja2V0c1JlY2VpdmVkKTsKICAgIH0sCgogICAgX2dhdGhlcjogZnVuY3Rpb24gX2dhdGhlcih0eXBlLCBzdWJ0eXBlLCBkYXRhQXJyYXkpIHsKICAgICAgICB0eXBlID0gdHlwZS5yZXBsYWNlKC9bXlx3XS9nLCAiXyIpOwogICAgICAgIHN1YnR5cGUgPSBzdWJ0eXBlLnJlcGxhY2UoL1teXHddL2csICJfIik7CgogICAgICAgIHZhciBmdW5jID0gX3V0aWwubGlzdCgiX2dhdGhlciIsIHR5cGUsIHN1YnR5cGUpLmpvaW4oIl8iKTsKICAgICAgICBpZiAodHlwZW9mIHRoaXNbZnVuY10gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXNbZnVuY10oZGF0YUFycmF5KTsKICAgICAgICB9CgogICAgICAgIHZhciBjb3VudCA9IGVtZWRpYS5jb25maWcuc3RhdHNTZWNvbmRzOwogICAgICAgIGlmIChkYXRhQXJyYXkubGVuZ3RoIDwgY291bnQpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IGRhdGFBcnJheVtjb3VudCAtIDFdW3N1YnR5cGVdIC0gZGF0YUFycmF5WzBdW3N1YnR5cGVdOwogICAgICAgIHZhciB0aW1lID0gZGF0YUFycmF5W2NvdW50IC0gMV0udGltZXN0YW1wIC0gZGF0YUFycmF5WzBdLnRpbWVzdGFtcDsKCiAgICAgICAgZGF0YUFycmF5LnNoaWZ0KCk7CgogICAgICAgIHJldHVybiB0aW1lID09PSAwID8gMCA6IHBhcnNlRmxvYXQoZGF0YSAqIDEwMDAgLyB0aW1lKS50b0ZpeGVkKDIpOwogICAgfSwKCiAgICBfc3RhdHNDb3VudDogZnVuY3Rpb24gX3N0YXRzQ291bnQoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBmdW5jdGlvbiBnYXRoZXJCeVRyYWNrKCkgewogICAgICAgICAgICBfdXRpbC5mb3JFYWNoKHNlbGYuc2FtcGxlc0RhdGFzLCBmdW5jdGlvbiAodHJhY2tJZCwgX3NhbXBsZXMpIHsKICAgICAgICAgICAgICAgIHZhciB0cmFja0dhdGhlcnMgPSBzZWxmLmdhdGhlclJlc3VsdHNbdHJhY2tJZF0gPSBzZWxmLmdhdGhlclJlc3VsdHNbdHJhY2tJZF0gfHwge307CiAgICAgICAgICAgICAgICBnYXRoZXJCeVR5cGUodHJhY2tJZCwgdHJhY2tHYXRoZXJzLCBfc2FtcGxlcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2F0aGVyQnlUeXBlKHRyYWNrSWQsIHRyYWNrR2F0aGVycywgX3RyYWNrU2FtcGxlcykgewogICAgICAgICAgICBfdXRpbC5mb3JFYWNoKF90cmFja1NhbXBsZXMsIGZ1bmN0aW9uICh0eXBlLCBfZGF0YSkgewogICAgICAgICAgICAgICAgdmFyIHR5cGVHYXRoZXJzID0gdHJhY2tHYXRoZXJzW3R5cGVdIHx8ICh0cmFja0dhdGhlcnNbdHlwZV0gPSB7fSk7CiAgICAgICAgICAgICAgICBnYXRoZXJCeVN1YnR5cGUodHJhY2tJZCwgdHlwZUdhdGhlcnMsIHR5cGUsIF9kYXRhKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnYXRoZXJCeVN1YnR5cGUodHJhY2tJZCwgdHlwZUdhdGhlcnMsIHR5cGUsIF9kYXRhKSB7CiAgICAgICAgICAgIF91dGlsLmZvckVhY2goX2RhdGEsIGZ1bmN0aW9uIChzdWJ0eXBlLCBkYXRhQXJyYXkpIHsKICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0eXBlR2F0aGVyc1tzdWJ0eXBlXSA9IHNlbGYuX2dhdGhlcih0eXBlLCBzdWJ0eXBlLCBkYXRhQXJyYXkpOwogICAgICAgICAgICAgICAgc2VsZi5vbkdhdGhlclJlc3VsdCh0cmFja0lkLCB0eXBlLCBzdWJ0eXBlLCByZXN1bHQpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGdhdGhlckJ5VHJhY2soKTsKICAgIH0sCgogICAgZ2F0aGVyOiBmdW5jdGlvbiBnYXRoZXIoKSB7CiAgICAgICAgdGhpcy5nYXRoZXJXZWJydGMoKTsKICAgICAgICB0aGlzLl9zdGF0c0NvdW50KCk7CiAgICB9LAoKICAgIGludGVydmFsR2F0aGVyOiBmdW5jdGlvbiBpbnRlcnZhbEdhdGhlcihpbnRlcnZhbE1pbGxpcykgewogICAgICAgIHRoaXMuX2ludGVydmFsSWQgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbElkKTsKICAgICAgICB0aGlzLl9pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwodGhpcy5nYXRoZXIuYmluZCh0aGlzKSwgaW50ZXJ2YWxNaWxsaXMgfHwgMTAwMCk7CiAgICB9LAoKICAgIHN0b3BJbnRlcnZhbEdhdGhlcjogZnVuY3Rpb24gc3RvcEludGVydmFsR2F0aGVyKCkgewogICAgICAgIHRoaXMuX2ludGVydmFsSWQgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbElkKTsKICAgIH0KfSk7Cgp2YXIgc3RhdHNNYXAgPSB7fTsKdmFyIGVjaG8gPSBQQ1N0YXRzLmVjaG8gPSBmdW5jdGlvbiAoZWFzZW1vYlN0cmVhbXMpIHsKICAgIF91dGlsLmZvckVhY2goZWFzZW1vYlN0cmVhbXMsIGZ1bmN0aW9uIChfaywgX3N0cmVhbSkgewogICAgICAgIGlmICghc3RhdHNNYXBbX3N0cmVhbS5pZF0gJiYgX3N0cmVhbS5fd2VicnRjICYmICFfc3RyZWFtLl93ZWJydGMuY2xvc2VkICYmIF9zdHJlYW0uZ2V0TWVkaWFTdHJlYW0oKSkgewoKICAgICAgICAgICAgdmFyIHBjc3RhdHM7CiAgICAgICAgICAgIHN0YXRzTWFwW19zdHJlYW0uaWRdID0gcGNzdGF0cyA9IG5ldyBQQ1N0YXRzKHsgX3dlYnJ0YzogX3N0cmVhbS5fd2VicnRjIH0pOwogICAgICAgICAgICBwY3N0YXRzLl9tZWRpYVN0cmVhbSA9IF9zdHJlYW0uZ2V0TWVkaWFTdHJlYW0oKTsKICAgICAgICB9IGVsc2UgaWYgKHN0YXRzTWFwW19zdHJlYW0uaWRdICYmICghX3N0cmVhbS5fd2VicnRjIHx8IF9zdHJlYW0uX3dlYnJ0Yy5jbG9zZWQgfHwgIV9zdHJlYW0uZ2V0TWVkaWFTdHJlYW0oKSkpIHsKICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHN0YXRzTWFwLCBfc3RyZWFtLmlkKTsKICAgICAgICB9CiAgICB9KTsKCiAgICB2YXIgY2xlYXJTdGF0cyA9IFtdOwogICAgX3V0aWwuZm9yRWFjaChzdGF0c01hcCwgZnVuY3Rpb24gKF9zaWQsIHN0YXRzKSB7CiAgICAgICAgaWYgKCFlYXNlbW9iU3RyZWFtcyB8fCAhZWFzZW1vYlN0cmVhbXNbX3NpZF0pIHsKICAgICAgICAgICAgY2xlYXJTdGF0cy5wdXNoKF9zaWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXRzLmdhdGhlcldlYnJ0Y01lZGlhU3RyZWFtKHN0YXRzLl9tZWRpYVN0cmVhbSk7CiAgICAgICAgICAgIHN0YXRzLl9zdGF0c0NvdW50KCk7CiAgICAgICAgfQogICAgfSk7CgogICAgX3V0aWwuZm9yRWFjaChjbGVhclN0YXRzLCBmdW5jdGlvbiAoX2luZGV4LCBfc2lkKSB7CiAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKHN0YXRzTWFwLCBfc2lkKTsKICAgIH0pOwp9OwoKUENTdGF0cy5pbnRlcnZhbEVjaG8gPSBmdW5jdGlvbiAoZWFzZW1vYlN0cmVhbXMsIGludGVydmFsTWlsbGlzKSB7CiAgICByZXR1cm4gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIGVjaG8oZWFzZW1vYlN0cmVhbXMpOwogICAgfSwgaW50ZXJ2YWxNaWxsaXMpOwp9OwoKX3V0aWwuZm9yRWFjaChbImluYm91bmQiLCAib3V0Ym91bmQiXSwgZnVuY3Rpb24gKF90eXBlSW5kZXgsIGdhdGhlclR5cGUpIHsKICAgIF91dGlsLmZvckVhY2goWyJBdWRpbyIsICJWaWRlbyJdLCBmdW5jdGlvbiAoX3RyYWNrVHlwZUluZGV4LCB0cmFja1R5cGUpIHsKICAgICAgICAoZnVuY3Rpb24gZ2F0aGVyKGdhdGhlclR5cGUsIHRyYWNrVHlwZSkgewogICAgICAgICAgICB2YXIgX2dhdGhlclRyYWNrOwogICAgICAgICAgICBQQ1N0YXRzW2dhdGhlclR5cGUgKyB0cmFja1R5cGVdID0gX2dhdGhlclRyYWNrID0gZnVuY3Rpb24gZ2F0aGVyVHJhY2soZWFzZW1vYlN0cmVhbSwgb25Ob3RpZnksIGludGVydmFsTWlsbGlzKSB7CiAgICAgICAgICAgICAgICBfZ2F0aGVyVHJhY2suX19pbnRlcnZhbElkcyB8fCAoX2dhdGhlclRyYWNrLl9faW50ZXJ2YWxJZHMgPSB7fSk7CgogICAgICAgICAgICAgICAgdmFyIGludGVydmFsSWQgPSBfZ2F0aGVyVHJhY2suX19pbnRlcnZhbElkcyAmJiBfZ2F0aGVyVHJhY2suX19pbnRlcnZhbElkc1tlYXNlbW9iU3RyZWFtLmlkXTsKICAgICAgICAgICAgICAgIGludGVydmFsSWQgJiYgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKCiAgICAgICAgICAgICAgICBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwY3N0YXRzID0gX2dhdGhlclRyYWNrW2Vhc2Vtb2JTdHJlYW0uaWRdOwogICAgICAgICAgICAgICAgICAgIGlmICghcGNzdGF0cyAmJiBlYXNlbW9iU3RyZWFtICYmIGVhc2Vtb2JTdHJlYW0uX3dlYnJ0YyAmJiAhZWFzZW1vYlN0cmVhbS5fd2VicnRjLmNsb3NlZCAmJiBlYXNlbW9iU3RyZWFtLmdldE1lZGlhU3RyZWFtKCkpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIF9nYXRoZXJUcmFja1tlYXNlbW9iU3RyZWFtLmlkXSA9IHBjc3RhdHMgPSBuZXcgUENTdGF0cyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd2VicnRjOiBlYXNlbW9iU3RyZWFtLl93ZWJydGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW5ib3VuZF86IGdhdGhlclR5cGUgPT09ICJpbmJvdW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vdXRib3VuZF86IGdhdGhlclR5cGUgPT09ICJvdXRib3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9uTm90aWZ5ICYmIChwY3N0YXRzLm9uR2F0aGVyUmVzdWx0ID0gb25Ob3RpZnkpOwogICAgICAgICAgICAgICAgICAgICAgICBwY3N0YXRzLl9tZWRpYVN0cmVhbSA9IGVhc2Vtb2JTdHJlYW0uZ2V0TWVkaWFTdHJlYW0oKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBjc3RhdHMgJiYgKCFlYXNlbW9iU3RyZWFtIHx8ICFlYXNlbW9iU3RyZWFtLl93ZWJydGMgfHwgZWFzZW1vYlN0cmVhbS5fd2VicnRjLmNsb3NlZCB8fCBlYXNlbW9iU3RyZWFtLl93ZWJydGMuX19pZCAhPT0gcGNzdGF0cy5fd2VicnRjLl9faWQgfHwgIWVhc2Vtb2JTdHJlYW0uZ2V0TWVkaWFTdHJlYW0oKSB8fCAhcGNzdGF0cy5fbWVkaWFTdHJlYW0gfHwgcGNzdGF0cy5fbWVkaWFTdHJlYW0uaWQgIT09IGVhc2Vtb2JTdHJlYW0uZ2V0TWVkaWFTdHJlYW0oKS5pZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3V0aWwucmVtb3ZlQXR0cmlidXRlKF9nYXRoZXJUcmFjaywgZWFzZW1vYlN0cmVhbS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBjc3RhdHMgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFwY3N0YXRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZVN0cmVhbTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVhc2Vtb2JTdHJlYW0gJiYgZW1lZGlhLl9fZWFzZW1vYl9jdXJyZW50X21zZXJ2aWNlICYmIChjYWNoZVN0cmVhbSA9IGVtZWRpYS5fX2Vhc2Vtb2JfY3VycmVudF9tc2VydmljZS5nZXRTdHJlYW1CeUlkKGVhc2Vtb2JTdHJlYW0uaWQpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzZW1vYlN0cmVhbSA9IGNhY2hlU3RyZWFtOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxJZCAmJiBjbGVhckludGVydmFsKGludGVydmFsSWQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBwY3N0YXRzLmdhdGhlcldlYnJ0Y01lZGlhU3RyZWFtKHBjc3RhdHMuX21lZGlhU3RyZWFtLCB0cmFja1R5cGUpOwogICAgICAgICAgICAgICAgICAgIHBjc3RhdHMuX3N0YXRzQ291bnQoKTsKICAgICAgICAgICAgICAgIH0sIGludGVydmFsTWlsbGlzKTsKCiAgICAgICAgICAgICAgICBfZ2F0aGVyVHJhY2suX19pbnRlcnZhbElkc1tlYXNlbW9iU3RyZWFtLmlkXSA9IGludGVydmFsSWQ7CgogICAgICAgICAgICAgICAgcmV0dXJuIGludGVydmFsSWQ7CiAgICAgICAgICAgIH07CiAgICAgICAgfSkoZ2F0aGVyVHlwZSwgdHJhY2tUeXBlKTsKICAgIH0pOwp9KTsKCi8qKiovIH0pLAovKiAyNDUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKd2luZG93LmVtZWRpYSA9IHdpbmRvdy5lbWVkaWEgfHwge307Cgp2YXIgX3V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC50YWdMb2dnZXIoImVsZWN0cm9uIik7CgplbWVkaWEuZWxlY3Ryb24gPSB3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKTsKCmVtZWRpYS5jaG9vc2VFbGVjdHJvbkRlc2t0b3BNZWRpYSA9IGZ1bmN0aW9uIChzb3VyY2VzLCBhY2Nlc3NBcHByb3ZlZCwgYWNjZXNzRGVuaWVkKSB7CiAgICBfbG9nZ2VyLmluZm8oIkNob29zZSBkZXNrdG9wLiAiLCBzb3VyY2VzWzBdKTsKICAgIGFjY2Vzc0FwcHJvdmVkKHNvdXJjZXNbMF0pOwp9OwoKLyoqKi8gfSkKLyoqKioqKi8gXSk7Cn0pOwovLzIuMS4xX0dpdC4yOWYyMTg3CndpbmRvdy5fZW1lZGlhVmVyc2lvbiA9ICcyLjEuMV9HaXQuMjlmMjE4Nyc7IApjb25zb2xlICYmIGNvbnNvbGUud2FybignRU1lZGlhIHZlcnNpb24nLCAnMi4xLjFfR2l0LjI5ZjIxODcnKTsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbCh0aGlzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpKSkKCi8qKiovIH0pLAovKiA1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCnZhciBnOwoKLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGUKZyA9IChmdW5jdGlvbigpIHsKCXJldHVybiB0aGlzOwp9KSgpOwoKdHJ5IHsKCS8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKQoJZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Cn0gY2F0Y2ggKGUpIHsKCS8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlCglpZiAodHlwZW9mIHdpbmRvdyA9PT0gIm9iamVjdCIpIGcgPSB3aW5kb3c7Cn0KCi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi4KLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3MKLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufQoKbW9kdWxlLmV4cG9ydHMgPSBnOwoKCi8qKiovIH0pLAovKiA2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBVdGlsID0gKF9fd2VicGFja19yZXF1aXJlX18oMikuZGVmYXVsdCk7CnZhciBSVENJUUhhbmRsZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwp2YXIgQVBJID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKdmFyIFdlYlJUQyA9IChfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLmRlZmF1bHQpOwp2YXIgQ29tbW9uUGF0dGVybiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIFJvdXRlVG8gPSBBUEkuUm91dGVUbzsKdmFyIEFwaSA9IEFQSS5BcGk7CnZhciBfbG9nZ2VyID0gVXRpbC5sb2dnZXI7CgoKdmFyIF9DYWxsID0gewogICAgYXBpOiBudWxsLAogICAgY2FsbGVyOiAnJywKICAgIGNvbm5lY3Rpb246IG51bGwsCgogICAgcGF0dGVybjogbnVsbCwKCiAgICBsaXN0ZW5lcjogewogICAgICAgIG9uQWNjZXB0Q2FsbDogZnVuY3Rpb24gKGZyb20sIG9wdGlvbnMpIHsKICAgICAgICB9LAoKICAgICAgICBvblJpbmdpbmc6IGZ1bmN0aW9uIChjYWxsZXIpIHsKICAgICAgICB9LAoKICAgICAgICBvblRlcm1DYWxsOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgfSwKCiAgICAgICAgb25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2U6IGZ1bmN0aW9uIChpY2VTdGF0ZSkgewogICAgICAgIH0KICAgIH0sCgogICAgbWVkaWFTdHJlYW1Db25zdGFpbnRzOiB7CiAgICAgICAgYXVkaW86IHRydWUsCiAgICAgICAgdmlkZW86IHRydWUKICAgIH0sCgogICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbm5lY3Rpb24gPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHRocm93ICJDYWxsZXIgbmVlZCBhIGluc3RhbmNlIG9mIEVhc2Vtb2IuaW0uQ29ubmVjdGlvbiIKICAgICAgICB9CgogICAgICAgIHNlbGYuYXBpID0gc2VsZi5hcGkgfHwgbmV3IEFwaSh7CiAgICAgICAgICAgICAgICBpbUNvbm5lY3Rpb246IHNlbGYuY29ubmVjdGlvbiwKCiAgICAgICAgICAgICAgICBydGNIYW5kbGVyOiBuZXcgUlRDSVFIYW5kbGVyKHsKICAgICAgICAgICAgICAgICAgICBpbUNvbm5lY3Rpb246IHNlbGYuY29ubmVjdGlvbgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CgogICAgICAgIHNlbGYuYXBpLm9uSW5pdEMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHNlbGYuX29uSW5pdEMuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTsKICAgICAgICB9LAoKICAgICAgICBzZWxmLmFwaS5vbkludml0ZSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHNlbGYubGlzdGVuZXIub25JbnZpdGUuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTsKICAgICAgICB9LAoKICAgICAgICBzZWxmLmFwaS5vbkljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi5saXN0ZW5lci5vbkljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZS5hcHBseShzZWxmLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgIH0sCgogICAgY3JlYXRlQ29uZmVyZW5jZTogZnVuY3Rpb24ocHdkLCBfY2FsbGJhY2spewogICAgICAgIHZhciBydCA9IG5ldyBSb3V0ZVRvKHsKICAgICAgICAgICAgcnRLZXk6ICIiCiAgICAgICAgfSkKICAgICAgICB0aGlzLmFwaS5yZXFUa3QoCiAgICAgICAgICAgIHJ0LCAKICAgICAgICAgICAgdHJ1ZSwKICAgICAgICAgICAgdW5kZWZpbmVkLAogICAgICAgICAgICBwd2QsIAogICAgICAgICAgICBmdW5jdGlvbihmcm9tLCBydGNPcHRpb25zKXsKICAgICAgICAgICAgICAgIHZhciB0aWNrZXRTdHIgPSBydGNPcHRpb25zLnRpY2tldAogICAgICAgICAgICAgICAgcnRjT3B0aW9ucy5jb25mZXJlbmNlSWQgPSBydGNPcHRpb25zLmNvbmZySWQKICAgICAgICAgICAgICAgIF9jYWxsYmFjayAmJiBfY2FsbGJhY2soZnJvbSwgcnRjT3B0aW9ucykKICAgICAgICB9KQogICAgfSwKCiAgICBpbnZpdGVDb25mZXJlbmNlOiBmdW5jdGlvbihjb25mcklkLCBwd2QsIHRvLCBnaWQsIF9jYWxsYmFjayl7CiAgICAgICAgdmFyIHJ0ID0gbmV3IFJvdXRlVG8oewogICAgICAgICAgICB0bzogdG8sCiAgICAgICAgICAgIHJ0S2V5OiAiIiwKICAgICAgICAgICAgcnRmbGFnOiAwCiAgICAgICAgfSkKICAgICAgICB0aGlzLmFwaS5pbnZpdGUoCiAgICAgICAgICAgIHJ0LCAKICAgICAgICAgICAgY29uZnJJZCwgCiAgICAgICAgICAgIHB3ZCwgCiAgICAgICAgICAgIGdpZCwKICAgICAgICAgICAgZnVuY3Rpb24oZnJvbSwgcnRjT3B0aW9ucyl7CiAgICAgICAgICAgICAgICBfY2FsbGJhY2sgJiYgX2NhbGxiYWNrKGZyb20sIHJ0Y09wdGlvbnMpCiAgICAgICAgICAgIH0KICAgICAgICApOwogICAgfSwKCiAgICBnZXRDb25mZXJlbmNlVGt0OiBmdW5jdGlvbihjb25mcklkLCBwd2QsIF9jYWxsYmFjayl7CiAgICAgICAgdmFyIHJ0ID0gbmV3IFJvdXRlVG8oewogICAgICAgICAgICBydEtleTogIiIKICAgICAgICB9KTsKICAgICAgICB0aGlzLmFwaS5yZXFUa3QoCiAgICAgICAgICAgIHJ0LAogICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgY29uZnJJZCwKICAgICAgICAgICAgcHdkLAogICAgICAgICAgICBmdW5jdGlvbihmcm9tLCBydGNPcHRpb25zKXsKICAgICAgICAgICAgICAgIF9jYWxsYmFjayAmJiBfY2FsbGJhY2soZnJvbSwgcnRjT3B0aW9ucykKICAgICAgICAgICAgfQogICAgICAgICk7CiAgICB9LAoKICAgIG1ha2VWaWRlb0NhbGw6IGZ1bmN0aW9uIChjYWxsZWUsIGFjY2Vzc1NpZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIG1lZGlhU3RyZWFtQ29uc3RhaW50cyA9IHt9OwogICAgICAgIFV0aWwuZXh0ZW5kKG1lZGlhU3RyZWFtQ29uc3RhaW50cywgc2VsZi5tZWRpYVN0cmVhbUNvbnN0YWludHMpOwogICAgICAgIHNlbGYubWVkaWFTdHJlYW1Db25zdGFpbnRzLnZpZGVvID0gdHJ1ZTsKCiAgICAgICAgdGhpcy5jYWxsKGNhbGxlZSwgbWVkaWFTdHJlYW1Db25zdGFpbnRzLCBhY2Nlc3NTaWQpOwogICAgfSwKCiAgICBtYWtlVm9pY2VDYWxsOiBmdW5jdGlvbiAoY2FsbGVlLCBhY2Nlc3NTaWQpIHsKICAgICAgICBjb25zb2xlLmxvZygnU2NhcmVDcm93Jyk7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgbWVkaWFTdHJlYW1Db25zdGFpbnRzID0ge307CiAgICAgICAgVXRpbC5leHRlbmQobWVkaWFTdHJlYW1Db25zdGFpbnRzLCBzZWxmLm1lZGlhU3RyZWFtQ29uc3RhaW50cyk7CiAgICAgICAgc2VsZi5tZWRpYVN0cmVhbUNvbnN0YWludHMudmlkZW8gPSBmYWxzZTsKCiAgICAgICAgc2VsZi5jYWxsKGNhbGxlZSwgbWVkaWFTdHJlYW1Db25zdGFpbnRzLCBhY2Nlc3NTaWQpOwogICAgfSwKCiAgICBhY2NlcHRDYWxsOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHNlbGYucGF0dGVybi5hY2NlcHQoKTsKICAgIH0sCgogICAgZW5kQ2FsbDogZnVuY3Rpb24gKGNhbGxlZSkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBzZWxmLmNhbGxlciA9ICcnOwogICAgICAgIHNlbGYucGF0dGVybi50ZXJtQ2FsbCgpOwogICAgfSwKCiAgICBjYWxsOiBmdW5jdGlvbiAoY2FsbGVlLCBtZWRpYVN0cmVhbUNvbnN0YWludHMsIGFjY2Vzc1NpZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICB0aGlzLmNhbGxlZSA9IHRoaXMuYXBpLmppZChjYWxsZWUpOwoKICAgICAgICB2YXIgcnQgPSBuZXcgUm91dGVUbyh7CiAgICAgICAgICAgIHJ0S2V5OiAiIiwKICAgICAgICAgICAgc2lkOiBhY2Nlc3NTaWQsCgogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJpcSB0byBzZXJ2ZXIgc3VjY2VzcyIsIHJlc3VsdCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygiaXEgdG8gc2VydmVyIGVycm9yIiwgZXJyb3IpOwogICAgICAgICAgICAgICAgc2VsZi5vbkVycm9yKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB0aGlzLmFwaS5yZXFQMlAoCiAgICAgICAgICAgIHJ0LAogICAgICAgICAgICBtZWRpYVN0cmVhbUNvbnN0YWludHMudmlkZW8gPyAxIDogMCwKICAgICAgICAgICAgbWVkaWFTdHJlYW1Db25zdGFpbnRzLmF1ZGlvID8gMSA6IDAsCiAgICAgICAgICAgIHRoaXMuYXBpLmppZChjYWxsZWUpLAogICAgICAgICAgICBmdW5jdGlvbiAoZnJvbSwgcnRjT3B0aW9ucykgewogICAgICAgICAgICAgICAgaWYgKHJ0Y09wdGlvbnMub25saW5lID09ICIwIikgewogICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGVuZXIub25FcnJvcih7bWVzc2FnZTogImNhbGxlZSBpcyBub3Qgb25saW5lISJ9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZWxmLl9vbkdvdFNlcnZlclAyUENvbmZpZyhmcm9tLCBydGNPcHRpb25zKTsKICAgICAgICAgICAgICAgIHNlbGYucGF0dGVybi5pbml0QyhzZWxmLm1lZGlhU3RyZWFtQ29uc3RhaW50cywgYWNjZXNzU2lkKTsKICAgICAgICAgICAgfSk7CiAgICB9LAoKICAgIF9vbkluaXRDOiBmdW5jdGlvbiAoZnJvbSwgb3B0aW9ucywgcnRrZXksIHRzeElkLCBmcm9tU2lkKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLmNhbGxlZSA9IGZyb207CiAgICAgICAgc2VsZi5fcnRjQ2ZnID0gb3B0aW9ucy5ydGNDZmc7CiAgICAgICAgc2VsZi5fV2ViUlRDQ2ZnID0gb3B0aW9ucy5XZWJSVEM7CgogICAgICAgIHNlbGYuc2Vzc0lkID0gb3B0aW9ucy5zZXNzSWQ7CiAgICAgICAgc2VsZi5ydGNJZCA9IG9wdGlvbnMucnRjSWQ7CgogICAgICAgIHNlbGYuc3dpdGNoUGF0dGVybihvcHRpb25zLnN0cmVhbVR5cGUgPT0gIlZJREVPIiA/ICJWSURFTyIgOiAiVk9JQ0UiKTsKICAgICAgICBzZWxmLnBhdHRlcm4uX29uSW5pdEMoZnJvbSwgb3B0aW9ucywgcnRrZXksIHRzeElkLCBmcm9tU2lkKTsKICAgIH0sCgogICAgX29uSW52aXRlOiBmdW5jdGlvbigpewoKICAgIH0sCgogICAgX29uR290U2VydmVyUDJQQ29uZmlnOiBmdW5jdGlvbiAoZnJvbSwgcnRjT3B0aW9ucykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgaWYgKHJ0Y09wdGlvbnMucmVzdWx0ID09IDApIHsKICAgICAgICAgICAgc2VsZi5fcDJwQ29uZmlnID0gcnRjT3B0aW9uczsKICAgICAgICAgICAgc2VsZi5fcnRjQ2ZnID0gcnRjT3B0aW9ucy5ydGNDZmc7CiAgICAgICAgICAgIHNlbGYuX3J0Y0NmZzIgPSBydGNPcHRpb25zLnJ0Y0NmZzI7CgogICAgICAgICAgICBzZWxmLnNlc3NJZCA9IHJ0Y09wdGlvbnMuc2Vzc0lkOwogICAgICAgICAgICBzZWxmLnJ0Y0lkID0gIkNoYW5uZWxfd2ViSU0iOwoKICAgICAgICAgICAgc2VsZi5fcnRLZXkgPSBzZWxmLl9ydGtleSA9IHJ0Y09wdGlvbnMucnRLZXkgfHwgcnRjT3B0aW9ucy5ydGtleTsKICAgICAgICAgICAgc2VsZi5fcnRGbGFnID0gc2VsZi5fcnRmbGFnID0gcnRjT3B0aW9ucy5ydEZsYWcgfHwgcnRjT3B0aW9ucy5ydGZsYWc7CgogICAgICAgICAgICBzZWxmLl9XZWJSVENDZmcgPSBydGNPcHRpb25zLldlYlJUQzsKICAgICAgICAgICAgc2VsZi5hZG10b2sgPSBydGNPcHRpb25zLmFkbXRvazsKICAgICAgICAgICAgc2VsZi50a3QgPSBydGNPcHRpb25zLnRrdDsKCgogICAgICAgICAgICBzZWxmLnN3aXRjaFBhdHRlcm4oc2VsZi5tZWRpYVN0cmVhbUNvbnN0YWludHMuYXVkaW8gJiYgc2VsZi5tZWRpYVN0cmVhbUNvbnN0YWludHMudmlkZW8gPyAiVklERU8iIDogIlZPSUNFIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8KICAgICAgICB9CiAgICB9LAoKICAgIHN3aXRjaFBhdHRlcm46IGZ1bmN0aW9uIChzdHJlYW1UeXBlKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAoIXNlbGYuX1dlYlJUQ0NmZykgJiYgKHNlbGYucGF0dGVybiA9IG5ldyBDb21tb25QYXR0ZXJuKHsKICAgICAgICAgICAgY2FsbGVlOiBzZWxmLmNhbGxlZSwKCiAgICAgICAgICAgIF9wMnBDb25maWc6IHNlbGYuX3AycENvbmZpZywKICAgICAgICAgICAgX3J0Y0NmZzogc2VsZi5fcnRjQ2ZnLAogICAgICAgICAgICBfcnRjQ2ZnMjogc2VsZi5fcnRjQ2ZnMiwKCiAgICAgICAgICAgIF9ydEtleTogc2VsZi5fcnRLZXkgfHwgc2VsZi5fcnRrZXksCiAgICAgICAgICAgIF9ydEZsYWc6IHNlbGYuX3J0RmxhZyB8fCBzZWxmLl9ydGZsYWcsCgogICAgICAgICAgICBfc2Vzc0lkOiBzZWxmLnNlc3NJZCwKICAgICAgICAgICAgX3J0Y0lkOiBzZWxmLnJ0Y0lkLAoKICAgICAgICAgICAgd2ViUnRjOiBuZXcgV2ViUlRDKHsKICAgICAgICAgICAgICAgIHN0cmVhbVR5cGU6IHN0cmVhbVR5cGUsCiAgICAgICAgICAgICAgICBzdWJBcmdzOnsKICAgICAgICAgICAgICAgICAgICBzdWJTVmlkZW86ICJWSURFTyIgPT09IHN0cmVhbVR5cGUsCiAgICAgICAgICAgICAgICAgICAgc3ViU0F1ZGlvOiB0cnVlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb25Hb3RMb2NhbFN0cmVhbTogc2VsZi5saXN0ZW5lci5vbkdvdExvY2FsU3RyZWFtLAogICAgICAgICAgICAgICAgb25Hb3RSZW1vdGVTdHJlYW06IGZ1bmN0aW9uKHJlbW90ZVN0cmVhbSwgZXZlbnQpewogICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGVuZXIub25Hb3RSZW1vdGVTdHJlYW0ocmVtb3RlU3RyZWFtLCBzdHJlYW1UeXBlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbkVycm9yOiBzZWxmLmxpc3RlbmVyLm9uRXJyb3IKICAgICAgICAgICAgfSksCgogICAgICAgICAgICBhcGk6IHNlbGYuYXBpLAoKICAgICAgICAgICAgb25BY2NlcHRDYWxsOiAoc2VsZi5saXN0ZW5lciAmJiBzZWxmLmxpc3RlbmVyLm9uQWNjZXB0Q2FsbCkgfHwgZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25SaW5naW5nOiAoc2VsZi5saXN0ZW5lciAmJiBzZWxmLmxpc3RlbmVyLm9uUmluZ2luZykgfHwgZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25UZXJtQ2FsbDogKHNlbGYubGlzdGVuZXIgJiYgc2VsZi5saXN0ZW5lci5vblRlcm1DYWxsKSB8fCBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB9LAogICAgICAgICAgICBvbk90aGVyVXNlck9wZW5Wb2ljZTogKHNlbGYubGlzdGVuZXIgJiYgc2VsZi5saXN0ZW5lci5vbk90aGVyVXNlck9wZW5Wb2ljZSkgfHwgZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25PdGhlclVzZXJPcGVuVmlkZW86IChzZWxmLmxpc3RlbmVyICYmIHNlbGYubGlzdGVuZXIub25PdGhlclVzZXJPcGVuVmlkZW8pIHx8IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICB9Cn07CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoaW5pdENvbmZpZ3MpIHsKICAgIFV0aWwuZXh0ZW5kKHRydWUsIHRoaXMsIF9DYWxsLCBpbml0Q29uZmlncyB8fCB7fSk7CgogICAgdGhpcy5pbml0KCk7Cn07CgoKLyoqKi8gfSksCi8qIDcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyoqCiAqIElRIE1lc3NhZ2XvvIxJTSAtPiBDTVNlcnZlciAtLT4gSU0KICovCgp2YXIgX3V0aWwgPSAoX193ZWJwYWNrX3JlcXVpcmVfXygyKS5kZWZhdWx0KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC5sb2dnZXI7CnZhciBBUEkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwp2YXIgUm91dGVUbyA9IEFQSS5Sb3V0ZVRvOwoKdmFyIENPTkZFUkVOQ0VfWE1MTlMgPSAidXJuOnhtcHA6bWVkaWEtY29uZmVyZW5jZSI7CgoKdmFyIF9SdGNIYW5kbGVyID0gewogICAgX2FwaUNhbGxiYWNrczoge30sCgogICAgaW1Db25uZWN0aW9uOiBudWxsLAoKICAgIF9jb25uZWN0ZWRTaWQ6ICcnLAoKCiAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgX2Nvbm4gPSBzZWxmLmltQ29ubmVjdGlvbjsKCiAgICAgICAgX2Nvbm4ucmVnaXN0ZXJDb25mcklRSGFuZGxlciA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBoYW5kbGVDb25mZXJlbmNlSVEgPSBmdW5jdGlvbiAobXNnaW5mbykgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZVJ0Y01lc3NhZ2UobXNnaW5mbyk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIC8vdGhyb3cgZXJyb3I7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBfY29ubi5hZGRIYW5kbGVyKGhhbmRsZUNvbmZlcmVuY2VJUSwgQ09ORkVSRU5DRV9YTUxOUywgJ2lxJywgInNldCIpOwogICAgICAgICAgICBfY29ubi5hZGRIYW5kbGVyKGhhbmRsZUNvbmZlcmVuY2VJUSwgQ09ORkVSRU5DRV9YTUxOUywgJ2lxJywgImdldCIpOwoKICAgICAgICAgICAgX2xvZ2dlci53YXJuKCJDb25mZXJlbmNlIGlxIGhhbmRsZXIuIHJlZ2lzdGVyZWQuIik7CiAgICAgICAgfQogICAgfSwKCiAgICBoYW5kbGVSdGNNZXNzYWdlOiBmdW5jdGlvbiAobXNnaW5mbykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIGlkID0gbXNnaW5mby5nZXRBdHRyaWJ1dGUoJ2lkJyk7CiAgICAgICAgdmFyIGZyb20gPSBtc2dpbmZvLmdldEF0dHJpYnV0ZSgnZnJvbScpIHx8ICcnOwoKICAgICAgICAvLyByZW1vdmUgcmVzb3VyY2UKICAgICAgICBmcm9tLmxhc3RJbmRleE9mKCIvIikgPj0gMCAmJiAoZnJvbSA9IGZyb20uc3Vic3RyaW5nKDAsIGZyb20ubGFzdEluZGV4T2YoIi8iKSkpOwoKCiAgICAgICAgdmFyIHJ0a2V5ID0gbXNnaW5mby5nZXRFbGVtZW50c0J5VGFnTmFtZSgncnRrZXknKVswXS5pbm5lckhUTUw7CgogICAgICAgIHZhciBmcm9tU2Vzc2lvbklkID0gbXNnaW5mby5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2lkJylbMF0uaW5uZXJIVE1MOwoKICAgICAgICAoc2VsZi5fZnJvbVNlc3Npb25JRCB8fCAoc2VsZi5fZnJvbVNlc3Npb25JRCA9IHt9KSlbZnJvbV0gPSBmcm9tU2Vzc2lvbklkOwoKICAgICAgICB2YXIgY29udGVudFRhZ3MgPSBtc2dpbmZvLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjb250ZW50Jyk7CgoKCiAgICAgICAgdmFyIGNvbnRlbnRTdHJpbmcgPSBjb250ZW50VGFnc1swXS5pbm5lckhUTUw7CgogICAgICAgIHZhciBjb250ZW50ID0gX3V0aWwucGFyc2VKU09OKGNvbnRlbnRTdHJpbmcpOwoKICAgICAgICB2YXIgcnRjT3B0aW9ucyA9IGNvbnRlbnQ7CgogICAgICAgIHZhciBzdHJlYW1UeXBlID0gbXNnaW5mby5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3RyZWFtX3R5cGUnKVswXS5pbm5lckhUTUw7IC8vVk9JQ0UsIFZJREVPCgogICAgICAgIGlmKHN0cmVhbVR5cGUgPT0gIiIpewogICAgICAgICAgICBzdHJlYW1UeXBlID0gIlZPSUNFIjsKICAgICAgICB9CgogICAgICAgIHJ0Y09wdGlvbnMuc3RyZWFtVHlwZSA9IHN0cmVhbVR5cGU7CgogICAgICAgIGlmKHJ0Y09wdGlvbnMub3AgPT0gMTAyKXsKICAgICAgICAgICAgc2VsZi5zaW5nYWxTdHJlYW1UeXBlID0gc3RyZWFtVHlwZTsKICAgICAgICB9CgoKICAgICAgICB2YXIgdHN4SWQgPSBjb250ZW50LnRzeElkOwoKICAgICAgICBzZWxmLmN0eCA9IGNvbnRlbnQuY3R4OwoKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJSZWN2IFtvcCA9ICIgKyBydGNPcHRpb25zLm9wICsgIl0gW3RzeElkPSIgKyB0c3hJZCArICJdXHJcbiBqc29uIDoiLCBtc2dpbmZvKTsKCgogICAgICAgIC8vaWYgYS0+YiBhbHJlYWR5LCBjLT5hL2Igc2hvdWxkIGJlIHRlcm1pYXRlZCB3aXRoICdidXN5JyByZWFzb24KICAgICAgICBpZiAoZnJvbS5pbmRleE9mKCJAIikgPj0gMCkgewogICAgICAgICAgICBpZiAoc2VsZi5fY29ubmVjdGVkU2lkID09ICcnICYmIChydGNPcHRpb25zLm9wID09IDEwMiB8fCBydGNPcHRpb25zLm9wID09IDIwMikpIHsKICAgICAgICAgICAgICAgIHNlbGYuX2Nvbm5lY3RlZFNpZCA9IGZyb21TZXNzaW9uSWQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fY29ubmVjdGVkU2lkICE9IGZyb21TZXNzaW9uSWQpIHsKICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJFcnJvciByZWN2IFtvcCA9ICIgKyBydGNPcHRpb25zLm9wICsgIl0gW3RzeElkPSIgKyB0c3hJZCArICJdLiBjYXVzZWQgYnkgX2Nvbm5lY3RlZFNpZCAhPSBmcm9tU2Vzc2lvbklkIDoiLAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jb25uZWN0ZWRTaWQsIGZyb21TZXNzaW9uSWQpOwoKICAgICAgICAgICAgICAgICAgICAvL29uSW5pdEMKICAgICAgICAgICAgICAgICAgICBpZiAocnRjT3B0aW9ucy5vcCA9PSAxMDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ0ID0gbmV3IFJvdXRlVG8oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG86IGZyb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydEtleTogcnRrZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWQ6IGZyb21TZXNzaW9uSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZygiaXEgdG8gc2VydmVyIHN1Y2Nlc3MiLCByZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoImlxIHRvIHNlcnZlciBlcnJvciIsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uRXJyb3IoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAxMDcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc0lkOiBydGNPcHRpb25zLnNlc3NJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydGNJZDogcnRjT3B0aW9ucy5ydGNJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdidXN5JwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246ICdidXN5JwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbmRSdGNNZXNzYWdlKHJ0LCBvcHRpb25zKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vb25UZXJtQwogICAgICAgIGlmIChydGNPcHRpb25zLm9wID09IDEwNykgewogICAgICAgICAgICBzZWxmLl9jb25uZWN0ZWRTaWQgPSAnJzsKICAgICAgICAgICAgc2VsZi5fZnJvbVNlc3Npb25JRCA9IHt9OwoKICAgICAgICAgICAgdmFyIHJlYXNvbk9iaiA9IG1zZ2luZm8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3JlYXNvbicpOwogICAgICAgICAgICAvL3ZhciBlbmRSZWFzb24gPSBtc2dpbmZvLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdyZWFzb24nKVswXS5pbm5lckhUTUw7CiAgICAgICAgICAgIHJlYXNvbk9iaiAmJiByZWFzb25PYmoubGVuZ3RoID4gMCAmJiAocnRjT3B0aW9ucy5yZWFzb24gPSByZWFzb25PYmpbMF0uaW5uZXJIVE1MKTsKICAgICAgICB9CgogICAgICAgIGlmIChydGNPcHRpb25zLnNkcCkgewogICAgICAgICAgICBpZiAodHlwZW9mIHJ0Y09wdGlvbnMuc2RwID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgcnRjT3B0aW9ucy5zZHAgPSBfdXRpbC5wYXJzZUpTT04ocnRjT3B0aW9ucy5zZHApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJ0Y09wdGlvbnMuc2RwLnR5cGUgJiYgKHJ0Y09wdGlvbnMuc2RwLnR5cGUgPSBydGNPcHRpb25zLnNkcC50eXBlLnRvTG93ZXJDYXNlKCkpOwogICAgICAgIH0KICAgICAgICBpZiAocnRjT3B0aW9ucy5jYW5kcykgewogICAgICAgICAgICBpZiAodHlwZW9mIHJ0Y09wdGlvbnMuY2FuZHMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICBydGNPcHRpb25zLmNhbmRzID0gX3V0aWwucGFyc2VKU09OKHJ0Y09wdGlvbnMuY2FuZHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ0Y09wdGlvbnMuY2FuZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBydGNPcHRpb25zLmNhbmRzW2ldID09PSAnc3RyaW5nJyl7CiAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICBydGNPcHRpb25zLmNhbmRzW2ldID0gX3V0aWwucGFyc2VKU09OKHJ0Y09wdGlvbnMuY2FuZHNbaV0pOwogICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXsKICAgICAgICAgICAgICAgICAgICAgICAgcnRjT3B0aW9ucy5jYW5kc1tpXSA9IHtjYW5kaWRhdGU6IHJ0Y09wdGlvbnMuY2FuZHNbaV19CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJ0Y09wdGlvbnMuY2FuZHNbaV0uc2RwTUxpbmVJbmRleCA9IHJ0Y09wdGlvbnMuY2FuZHNbaV0uc2RwTUxpbmVJbmRleCAhPT0gdW5kZWZpbmVkID8KICAgICAgICAgICAgICAgICAgICBydGNPcHRpb25zLmNhbmRzW2ldLnNkcE1MaW5lSW5kZXggOiBydGNPcHRpb25zLmNhbmRzW2ldLm1saW5laW5kZXg7CiAgICAgICAgICAgICAgICBydGNPcHRpb25zLmNhbmRzW2ldLnNkcE1pZCA9IHJ0Y09wdGlvbnMuY2FuZHNbaV0uc2RwTWlkICE9PSB1bmRlZmluZWQgPwogICAgICAgICAgICAgICAgICAgIHJ0Y09wdGlvbnMuY2FuZHNbaV0uc2RwTWlkIDogcnRjT3B0aW9ucy5jYW5kc1tpXS5taWQ7CgogICAgICAgICAgICAgICAgZGVsZXRlIHJ0Y09wdGlvbnMuY2FuZHNbaV0ubWxpbmVpbmRleDsKICAgICAgICAgICAgICAgIGRlbGV0ZSBydGNPcHRpb25zLmNhbmRzW2ldLm1pZDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcnRjT3B0aW9ucy5ydGNDZmcgJiYgKHR5cGVvZiBydGNPcHRpb25zLnJ0Y0NmZyA9PT0gJ3N0cmluZycpICYmIChydGNPcHRpb25zLnJ0Y0NmZyA9IF91dGlsLnBhcnNlSlNPTihydGNPcHRpb25zLnJ0Y0NmZykpOwogICAgICAgIHJ0Y09wdGlvbnMucnRjQ2ZnMiAmJiAodHlwZW9mIHJ0Y09wdGlvbnMucnRjQ2ZnMiA9PT0gJ3N0cmluZycpICYmIChydGNPcHRpb25zLnJ0Y0NmZzIgPSBfdXRpbC5wYXJzZUpTT04ocnRjT3B0aW9ucy5ydGNDZmcyKSk7CiAgICAgICAgcnRjT3B0aW9ucy5XZWJSVEMgJiYgKHR5cGVvZiBydGNPcHRpb25zLldlYlJUQyA9PT0gJ3N0cmluZycpICYmIChydGNPcHRpb25zLldlYlJUQyA9IF91dGlsLnBhcnNlSlNPTihydGNPcHRpb25zLldlYlJUQykpOwogICAgICAgIHJ0Y09wdGlvbnMuY29uZnJJZCAmJiAocnRjT3B0aW9ucy5jb25mZXJlbmNlSWQgPSBydGNPcHRpb25zLmNvbmZySWQpCgogICAgICAgIGlmICh0c3hJZCAmJiBzZWxmLl9hcGlDYWxsYmFja3NbdHN4SWRdKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzZWxmLl9hcGlDYWxsYmFja3NbdHN4SWRdLmNhbGxiYWNrICYmIHNlbGYuX2FwaUNhbGxiYWNrc1t0c3hJZF0uY2FsbGJhY2soZnJvbSwgcnRjT3B0aW9ucyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgZGVsZXRlIHNlbGYuX2FwaUNhbGxiYWNrc1t0c3hJZF0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYub25SZWN2UnRjTWVzc2FnZShmcm9tLCBydGNPcHRpb25zLCBydGtleSwgdHN4SWQsIGZyb21TZXNzaW9uSWQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAoKCiAgICBvblJlY3ZSdGNNZXNzYWdlOiBmdW5jdGlvbiAoZnJvbSwgcnRjT3B0aW9ucywgcnRrZXksIHRzeElkLCBmcm9tU2Vzc2lvbklkKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnIGZvcm0gOiAnICsgZnJvbSArICIgXHJcbiBqc29uIDoiICsgX3V0aWwuc3RyaW5naWZ5SlNPTihydGNKU09OKSk7CiAgICB9LAoKICAgIGNvbnZlcnRSdGNPcHRpb25zOiBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICAgIHZhciBzZHAgPSBvcHRpb25zLmRhdGEuc2RwOwogICAgICAgIGlmIChzZHApIHsKICAgICAgICAgICAgdmFyIF9zZHAgPSB7CiAgICAgICAgICAgICAgICB0eXBlOiBzZHAudHlwZSwKICAgICAgICAgICAgICAgIHNkcDogc2RwLnNkcAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgc2RwID0gX3NkcDsKCiAgICAgICAgICAgIHNkcC50eXBlID0gc2RwLnR5cGUudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgc2RwID0gX3V0aWwuc3RyaW5naWZ5SlNPTihzZHApOwoKICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnNkcCA9IHNkcDsKICAgICAgICB9CgoKICAgICAgICB2YXIgY2FuZHMgPSBvcHRpb25zLmRhdGEuY2FuZHM7CgogICAgICAgIGlmIChjYW5kcykgewogICAgICAgICAgICBpZiAoX3V0aWwuaXNBcnJheShjYW5kcykpIHsKCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgX2NhbmRzID0gW107CiAgICAgICAgICAgICAgICBfY2FuZHMucHVzaChjYW5kcyk7CiAgICAgICAgICAgICAgICBjYW5kcyA9IF9jYW5kczsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBjYW5kcykgewogICAgICAgICAgICAgICAgdmFyIGNhbmQgPSBjYW5kc1tpXTsKCiAgICAgICAgICAgICAgICBpZiAoY2FuZC5jYW5kaWRhdGUgIT09IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgICAgICYmIGNhbmQuc2RwTUxpbmVJbmRleCAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgJiYgY2FuZC5zZHBNaWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfY2FuZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNhbmRpZGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZTogY2FuZC5jYW5kaWRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIG1saW5laW5kZXg6IGNhbmQuc2RwTUxpbmVJbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgbWlkOiBjYW5kLnNkcE1pZCwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VxOiBpCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgY2FuZHNbaV0gPSBfdXRpbC5zdHJpbmdpZnlKU09OKF9jYW5kKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmNhbmRzID0gY2FuZHM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gb3B0aW9ucy5kYXRhLmNhbmRzID0gW107CiAgICAgICAgfQoKICAgICAgICB2YXIgcnRjQ2ZnID0gb3B0aW9ucy5kYXRhLnJ0Y0NmZzsKICAgICAgICBpZiAocnRjQ2ZnKSB7CiAgICAgICAgICAgIHR5cGVvZiBydGNDZmcgIT09ICdzdHJpbmcnICYmIChvcHRpb25zLmRhdGEucnRjQ2ZnID0gX3V0aWwuc3RyaW5naWZ5SlNPTihydGNDZmcpKTsKICAgICAgICB9CgogICAgICAgIHZhciBfd2VicnRjID0gb3B0aW9ucy5kYXRhLldlYlJUQzsKICAgICAgICBpZiAoX3dlYnJ0YykgewogICAgICAgICAgICB0eXBlb2YgX3dlYnJ0YyAhPT0gJ3N0cmluZycgJiYgKG9wdGlvbnMuZGF0YS5XZWJSVEMgPSBfdXRpbC5zdHJpbmdpZnlKU09OKF93ZWJydGMpKTsKICAgICAgICB9CiAgICB9LAoKICAgIGdldFNob3J0SWQ6IGZ1bmN0aW9uIChqaWQpIHsKICAgICAgICB2YXIgYmVnaW47CiAgICAgICAgaWYoKGJlZ2luID0gKGppZC5pbmRleE9mKCdfJykgKyAxKSkgPCAxKXsKICAgICAgICAgICAgYmVnaW4gPSAwOwogICAgICAgIH0KCiAgICAgICAgdmFyIGVuZDsKICAgICAgICBpZigoZW5kID0gamlkLmluZGV4T2YoJ0AnLCAtMSkpIDwgMCl7CiAgICAgICAgICAgIGVuZCA9IGppZC5sZW5ndGg7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gamlkLnN1YnN0cmluZyhiZWdpbiwgZW5kKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBydDogeyBpZDogLCB0bzogLCBydEtleTogLCBydGZsYWc6ICwgc2lkOiAsIHRzeElkOiAsIHR5cGU6ICwgfQogICAgICoKICAgICAqIHJ0Y09wdGlvbnM6IHsgZGF0YSA6IHsgb3AgOiAncmVxUDJQJywgdmlkZW8gOiAxLCBhdWRpbyA6IDEsIHBlZXIgOgogICAgICogY3VyQ2hhdFVzZXJJZCwgLy9hcHBLZXkgKyAiXyIgKyBjdXJDaGF0VXNlcklkICsgIkAiICsgdGhpcy5kb21haW4sIH0gfQogICAgICoKICAgICAqLwogICAgc2VuZFJ0Y01lc3NhZ2U6IGZ1bmN0aW9uIChydCwgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBfY29ubiA9IHNlbGYuaW1Db25uZWN0aW9uOwoKICAgICAgICB2YXIgdHN4SWQgPSBydC50c3hJZCB8fCBfY29ubi5nZXRVbmlxdWVJZCgpOwoKICAgICAgICB2YXIgdG8gPSBydC50byB8fCBfY29ubi5kb21haW47CgogICAgICAgIHZhciBzaWQgPSBydC5zaWQgfHwgc2VsZi5fZnJvbVNlc3Npb25JRCAmJiBzZWxmLl9mcm9tU2Vzc2lvbklEW3RvXTsKICAgICAgICAvL3NpZCA9IHNpZCB8fCAoKHNlbGYuX2Zyb21TZXNzaW9uSUQgfHwgKHNlbGYuX2Zyb21TZXNzaW9uSUQgPSB7fSkpW3RvXSA9IF9jb25uLmdldFVuaXF1ZUlkKCJDT05GUl8iKSk7CiAgICAgICAgc2lkID0gc2lkIHx8IF9jb25uLmdldFVuaXF1ZUlkKCJDT05GUl8iKTsKICAgICAgICAoc2VsZi5fZnJvbVNlc3Npb25JRCB8fCAoc2VsZi5fZnJvbVNlc3Npb25JRCA9IHt9KSlbdG9dID0gc2lkOwoKICAgICAgICBpZiAodG8uaW5kZXhPZigiQCIpID49IDApIHsKICAgICAgICAgICAgaWYgKHNlbGYuX2Nvbm5lY3RlZFNpZCA9PSAnJyAmJiBvcHRpb25zLmRhdGEub3AgPT0gMTAyKSB7CiAgICAgICAgICAgICAgICBzZWxmLl9jb25uZWN0ZWRTaWQgPSBzaWQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIHJ0S2V5ID0gcnQucnRLZXkgfHwgcnQucnRrZXk7CiAgICAgICAgLy8gcnRLZXkgJiYgZGVsZXRlIHJ0LnJ0S2V5OwogICAgICAgIHJ0S2V5IHx8IChydEtleSA9ICIiKTsKCiAgICAgICAgdmFyIHJ0ZmxhZyA9IHJ0LnJ0ZmxhZzsKICAgICAgICAvLyBydGZsYWcgJiYgZGVsZXRlIHJ0LnJ0ZmxhZzsKICAgICAgICAhaXNOYU4ocnRmbGFnKSB8fCAocnRmbGFnID0gMSk7CgogICAgICAgIG9wdGlvbnMuZGF0YSB8fCAob3B0aW9ucy5kYXRhID0ge30pOwogICAgICAgIG9wdGlvbnMuZGF0YS50c3hJZCA9IHRzeElkOwoKICAgICAgICBzZWxmLmN0eCAmJiAob3B0aW9ucy5kYXRhLmN0eCA9IHNlbGYuY3R4KTsKICAgICAgICBzZWxmLmNvbnZlcnRSdGNPcHRpb25zKG9wdGlvbnMpOwoKICAgICAgICB2YXIgc3RyZWFtVHlwZSA9IG9wdGlvbnMuc3RyZWFtVHlwZSB8fCBzZWxmLnNpbmdhbFN0cmVhbVR5cGUgfHwgIlZJREVPIjsgLy8gIlZJREVPIjsgLy9WT0lDRSwgVklERU8KICAgICAgICBpZiAob3B0aW9ucy5kYXRhLm9wID09IDEwMikgewogICAgICAgICAgICBzZWxmLnNpbmdhbFN0cmVhbVR5cGUgPSBzdHJlYW1UeXBlOwogICAgICAgIH0KCgogICAgICAgIHZhciBpZCA9IHJ0LmlkIHx8IF9jb25uLmdldFVuaXF1ZUlkKCJDT05GUl8iKTsKICAgICAgICB2YXIgaXEgPSAkaXEoewogICAgICAgICAgICAvLyB4bWxuczogQ09ORkVSRU5DRV9YTUxOUywKICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICB0bzogdG8sCiAgICAgICAgICAgIGZyb206IF9jb25uLmNvbnRleHQuamlkLAogICAgICAgICAgICB0eXBlOiBydC50eXBlIHx8ICJnZXQiCiAgICAgICAgfSkuYygicXVlcnkiLCB7CiAgICAgICAgICAgIHhtbG5zOiBDT05GRVJFTkNFX1hNTE5TCiAgICAgICAgfSkuYygiTWVkaWFSZXFFeHQiKS5jKCdydGtleScpLnQocnRLZXkpCiAgICAgICAgICAgIC51cCgpLmMoJ3J0ZmxhZycpLnQocnRmbGFnKQogICAgICAgICAgICAudXAoKS5jKCdzdHJlYW1fdHlwZScpLnQoc3RyZWFtVHlwZSkKICAgICAgICAgICAgLnVwKCkuYygnc2lkJykudChzaWQpCiAgICAgICAgICAgIC51cCgpLmMoJ2NvbnRlbnQnKS50KF91dGlsLnN0cmluZ2lmeUpTT04ob3B0aW9ucy5kYXRhKSk7CgogICAgICAgIGlmIChvcHRpb25zLmRhdGEub3AgPT0gMTA3ICYmIG9wdGlvbnMucmVhc29uKSB7CiAgICAgICAgICAgIGlxLnVwKCkuYygncmVhc29uJykudChvcHRpb25zLnJlYXNvbik7CiAgICAgICAgfQogICAgICAgIF9sb2dnZXIuZGVidWcoIlNlbmQgW29wID0gIiArIG9wdGlvbnMuZGF0YS5vcCArICJdIDogXHJcbiIsIGlxLnRyZWUoKSk7CgoKICAgICAgICBjYWxsYmFjayAmJiAoCiAgICAgICAgICAgIHNlbGYuX2FwaUNhbGxiYWNrc1t0c3hJZF0gPSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sKICAgICAgICAgICAgfQogICAgICAgICk7CgogICAgICAgIHZhciBjb21wbGV0ZUZuID0gZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgcnQuc3VjY2VzcyhyZXN1bHQpOwogICAgICAgICAgICB9IHx8IGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoInNlbmQgcmVzdWx0LiBvcDoiICsgb3B0aW9ucy5kYXRhLm9wICsgIi4iLCByZXN1bHQpOwogICAgICAgICAgICB9OwoKICAgICAgICB2YXIgZXJyRm4gPSBmdW5jdGlvbiAoZWxlKSB7CiAgICAgICAgICAgICAgICBydC5mYWlsKGVsZSk7CiAgICAgICAgICAgIH0gfHwgZnVuY3Rpb24gKGVsZSkgewogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZyhlbGUpOwogICAgICAgICAgICB9OwoKICAgICAgICBpZihvcHRpb25zLmRhdGEub3AgIT0gMjAyKXsKICAgICAgICAgICAgX2Nvbm4uY29udGV4dC5zdHJvcGhlQ29ubi5zZW5kSVEoaXEudHJlZSgpLCBjb21wbGV0ZUZuLCBlcnJGbik7CiAgICAgICAgfQoKICAgICAgICAvL29uVGVybUMKICAgICAgICBpZiAob3B0aW9ucy5kYXRhLm9wID09IDEwNyAmJiBzZWxmLl9jb25uZWN0ZWRTaWQpIHsKICAgICAgICAgICAgaWYgKCFydC5zaWQgfHwgc2VsZi5fY29ubmVjdGVkU2lkID09IHJ0LnNpZCkgewogICAgICAgICAgICAgICAgc2VsZi5fY29ubmVjdGVkU2lkID0gJyc7CiAgICAgICAgICAgICAgICBzZWxmLl9mcm9tU2Vzc2lvbklEID0ge307CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChvcHRpb25zLmRhdGEub3AgPT0gMjAyKXsKICAgICAgICAgICAgdmFyIG1zZyA9IF91dGlsLmxpc3QoIkludml0ZSIsIHNlbGYuZ2V0U2hvcnRJZCh0byksICJqb2luIGNvbmZlcmVuY2U6Iiwgb3B0aW9ucy5kYXRhLmNvbmZySWQpLmpvaW4oIiAiKTsKICAgICAgICAgICAgdmFyIGlkID0gX2Nvbm4uZ2V0VW5pcXVlSWQoIkNPTkZSX0lOVklURSIpOyAgICAgICAgICAgICAgICAgLy8g55Sf5oiQ5pys5Zyw5raI5oGvaWQKICAgICAgICAgICAgdmFyIGludml0ZU1lc3NhZ2UgPSAkbXNnKHsKICAgICAgICAgICAgICAgIHhtbG5zOiAnamFiYmVyOmNsaWVudCcsCiAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAnY2hhdCcsCiAgICAgICAgICAgICAgICB0bzogdG8sCiAgICAgICAgICAgICAgICBmcm9tOiBfY29ubi5jb250ZXh0LmppZAogICAgICAgICAgICB9KS5jKCdib2R5JykudChKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICBkYXRhOiBtc2csCiAgICAgICAgICAgICAgICBib2RpZXM6WwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBtc2csCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ0eHQiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGV4dDogewogICAgICAgICAgICAgICAgICAgIGNvbmZlcmVuY2VJZDogb3B0aW9ucy5kYXRhLmNvbmZySWQsCiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IG9wdGlvbnMuZGF0YS5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICBtc2dfZXh0ZW5zaW9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX2lkOiBvcHRpb25zLmRhdGEuZ2lkLAogICAgICAgICAgICAgICAgICAgICAgICBpbnZpdGVyOiBzZWxmLmdldFNob3J0SWQoX2Nvbm4uY29udGV4dC5qaWQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZyb206IHNlbGYuZ2V0U2hvcnRJZChfY29ubi5jb250ZXh0LmppZCksCiAgICAgICAgICAgICAgICB0bzogc2VsZi5nZXRTaG9ydElkKHRvKQogICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBfY29ubi5zZW5kQ29tbWFuZChpbnZpdGVNZXNzYWdlLnRyZWUoKSwgaW52aXRlTWVzc2FnZS5pZCk7CiAgICAgICAgfQogICAgfQp9OwoKCnZhciBSVENJUUhhbmRsZXIgPSBmdW5jdGlvbiAoaW5pdENvbmZpZ3MpIHsKICAgIF91dGlsLmV4dGVuZCh0cnVlLCB0aGlzLCBfUnRjSGFuZGxlciwgaW5pdENvbmZpZ3MgfHwge30pOwoKICAgIHRoaXMuaW5pdCgpOwp9Owptb2R1bGUuZXhwb3J0cyA9IFJUQ0lRSGFuZGxlcjsKCgovKioqLyB9KSwKLyogOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovKioKICogQVBJCiAqLwp2YXIgX3V0aWwgPSAoX193ZWJwYWNrX3JlcXVpcmVfXygyKS5kZWZhdWx0KTsKdmFyIF9sb2dnZXIgPSBfdXRpbC5sb2dnZXI7CgoKdmFyIF9Sb3V0ZVRvID0gewogICAgLy8gdG8gOiBudWxsLAogICAgLy8gcnRLZXk6IG51bGwsCiAgICBydEZsYWc6IDEsCgogICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkgewoKICAgIH0sCiAgICBmYWlsOiBmdW5jdGlvbiAoZXJyb3IpIHsKCiAgICB9Cn07Cgp2YXIgUm91dGVUbyA9IGZ1bmN0aW9uIChleHRlbmRDZmcpIHsKICAgIGlmICh0aGlzIGluc3RhbmNlb2YgUm91dGVUbykgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICBfdXRpbC5leHRlbmQodHJ1ZSwgc2VsZiwgX1JvdXRlVG8sIGV4dGVuZENmZyB8fCB7fSk7CgogICAgfSBlbHNlIHsKICAgICAgICB2YXIgc3ViID0gZnVuY3Rpb24gKGV4dGVuZENmZykgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgIF91dGlsLmV4dGVuZCh0cnVlLCBzZWxmLCBleHRlbmRDZmcgfHwge30pOwogICAgICAgIH07CgogICAgICAgIF91dGlsLmV4dGVuZCh0cnVlLCBzdWIucHJvdG90eXBlLCBfUm91dGVUbywgZXh0ZW5kQ2ZnIHx8IHt9KTsKCiAgICAgICAgcmV0dXJuIHN1YjsKICAgIH0KfTsKZXhwb3J0cy5Sb3V0ZVRvID0gUm91dGVUbzsKCgp2YXIgX2NsYXp6ID0gewogICAgaW1Db25uZWN0aW9uOiBudWxsLAogICAgLy8gd2ViUnRjOiBudWxsLAoKICAgIHJ0Y0hhbmRsZXI6IG51bGwsCgogICAgZXZlbnRzOiB7CiAgICAgICAgJzAnOiAnb25SZXFQMlAnLAogICAgICAgICcxJzogJ29uTmV3Q2ZyJywKICAgICAgICAnMic6ICdvbkRlbENmcicsCiAgICAgICAgJzMnOiAnb25SZXFUa3QnLAoKICAgICAgICAnMTAwJzogJ29uUGluZycsCiAgICAgICAgJzEwMSc6ICdvblBvbmcnLAogICAgICAgICcxMDInOiAnb25Jbml0QycsCiAgICAgICAgJzEwMyc6ICdvblJlcUMnLAogICAgICAgICcxMDQnOiAnb25BY3B0QycsCiAgICAgICAgJzEwNSc6ICdvblRja2xDJywKICAgICAgICAnMTA2JzogJ29uQW5zQycsCiAgICAgICAgJzEwNyc6ICdvblRlcm1DJywKCiAgICAgICAgLy8gJzIwMCcgOiAnb25FbnRlcicsCiAgICAgICAgLy8gJzIwMScgOiAnb25FeGl0JywKICAgICAgICAnMjAyJyA6ICdvbkludml0ZScsCiAgICAgICAgLy8gJzIwMycgOiAnb25HZXRNZW1zJywKCiAgICAgICAgLy8gJzIwNScgOiAnb25TdWJDJywKICAgICAgICAvLyAnMjA2JyA6ICdvblVzdWJDJywKCiAgICAgICAgJzMwMCc6ICdvbkV2RW50ZXInLAogICAgICAgICczMDEnOiAnb25FdkV4aXQnLAogICAgICAgICczMDInOiAnb25FdlB1YicsCiAgICAgICAgJzMwMyc6ICdvbkV2VW5wdWInLAogICAgICAgICczMDQnOiAnb25Fdk1lbXMnLAogICAgICAgICcyMDQnOiAnb25FdkNsb3NlJywKICAgICAgICAnNDAwJzogJ29uU3RyZWFtQ29udHJvbCcsCiAgICAgICAgJzQwMSc6ICdvbkV2Sm9pbicsCgogICAgICAgICdvblNlcnZlckVycm9yJzogJ29uU2VydmVyRXJyb3InCiAgICB9LAoKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyID09PSAib2JqZWN0IikgewogICAgICAgICAgICBmb3IgKHZhciBldmVudCBpbiBsaXN0ZW5lcikgewogICAgICAgICAgICAgICAgdGhpcy5iaW5kKGV2ZW50LCBsaXN0ZW5lcltldmVudF0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBiaW5kOiBmdW5jdGlvbiAoZXZlbnQsIGZ1bmMpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBvbkZ1bmM7CiAgICAgICAgaWYgKChvbkZ1bmMgPSBzZWxmLmV2ZW50c1tldmVudF0pKSB7CiAgICAgICAgICAgIHNlbGZbb25GdW5jXSA9IGZ1bmM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb25GdW5jID0gc2VsZi5ldmVudHNbZXZlbnRdID0gJ29uXycgKyBldmVudDsKICAgICAgICAgICAgc2VsZltvbkZ1bmNdID0gZnVuYzsKICAgICAgICB9CiAgICB9LAoKICAgIGppZDogZnVuY3Rpb24gKHNob3J0VXNlck5hbWUpIHsKICAgICAgICBpZigvXi4rIy4rXy4rQC4rJC9nLnRlc3Qoc2hvcnRVc2VyTmFtZSkpewogICAgICAgICAgICByZXR1cm4gc2hvcnRVc2VyTmFtZTsKICAgICAgICB9CiAgICAgICAgLy8gaWYgKHNob3J0VXNlck5hbWUuaW5kZXhPZih0aGlzLmltQ29ubmVjdGlvbi5jb250ZXh0LmFwcEtleSkgPj0gMCkgewogICAgICAgIC8vICAgICByZXR1cm4gc2hvcnRVc2VyTmFtZTsKICAgICAgICAvLyB9CiAgICAgICAgcmV0dXJuIHRoaXMuaW1Db25uZWN0aW9uLmNvbnRleHQuYXBwS2V5ICsgIl8iICsgc2hvcnRVc2VyTmFtZSArICJAIiArIHRoaXMuaW1Db25uZWN0aW9uLmRvbWFpbjsKICAgIH0sCgogICAgLyoqCiAgICAgKiBSZXFQMlAgMAogICAgICoKICAgICAqIEBwYXJhbSBydAogICAgICogICAgICAgICAgICB7dG86ICwgcnRLZXk6ICwgcnRmbGFnOiAsIHN1Y2Nlc3MocmVzdWx0KSwgZmFpbChlcnJvcil9CiAgICAgKgogICAgICogQHBhcmFtIGNhbGxiYWNrKGZyb20sIHJ0Y09wdGlvbnMpCiAgICAgKgogICAgICoKICAgICAqIEBwYXJhbSB2aWRlbwogICAgICogICAgICAgICAgICAxIDAKICAgICAqIEBwYXJhbSBhdWRpbwogICAgICogICAgICAgICAgICAxIDAKICAgICAqIEBwYXJhbSBwZWVyCiAgICAgKgogICAgICovCiAgICByZXFQMlA6IGZ1bmN0aW9uIChydCwgdmlkZW8sIGF1ZGlvLCBwZWVyLCBjYWxsYmFjaykgewogICAgICAgIF9sb2dnZXIuZGVidWcoInJlcSBwMnAgLi4uIik7CgoKICAgICAgICB2YXIgcnRjT3B0aW9ucyA9IHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgb3A6IDAsCiAgICAgICAgICAgICAgICB2aWRlbzogdmlkZW8sCiAgICAgICAgICAgICAgICBhdWRpbzogYXVkaW8sCiAgICAgICAgICAgICAgICBwZWVyOiBwZWVyIC8vIGFwcEtleSArICJfIiArIGN1ckNoYXRVc2VySWQgKyAiQCIgKyB0aGlzLmRvbWFpbiwKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHRoaXMucnRjSGFuZGxlci5zZW5kUnRjTWVzc2FnZShydCwgcnRjT3B0aW9ucywgY2FsbGJhY2spOwogICAgfSwKCiAgICAvKioKICAgICAqIE5ld0NmciAxCiAgICAgKgogICAgICogQHBhcmFtIHJ0CiAgICAgKiAgICAgICAgICAgIHt0bzogLCBydEtleTogLCBydGZsYWc6ICwgc3VjY2VzcyhyZXN1bHQpLCBmYWlsKGVycm9yKX0KICAgICAqCiAgICAgKiBAcGFyYW0gY2FsbGJhY2soZnJvbSwgcnRjT3B0aW9ucykKICAgICAqCiAgICAgKgogICAgICogQHBhcmFtIHJlcVRrdAogICAgICogICAgICAgICAgICAxIG51bGwKICAgICAqIEBwYXJhbSBwYXNzd29yZAogICAgICogICAgICAgICAgICBzdHJpbmcgbnVsbAogICAgICoKICAgICAqLwogICAgbmV3Q2ZyOiBmdW5jdGlvbiAocnQsIHJlcVRrdCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygibmV3Q2ZyIC4uLiIpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNPcHRpb25zID0gewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBvcDogMQogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgcmVxVGt0ICYmIChydGNPcHRpb25zLmRhdGEucmVxVGt0ID0gcmVxVGt0KTsKICAgICAgICBwYXNzd29yZCAmJiAocnRjT3B0aW9ucy5kYXRhLnBhc3N3b3JkID0gcGFzc3dvcmQpOwoKICAgICAgICBzZWxmLnJ0Y0hhbmRsZXIuc2VuZFJ0Y01lc3NhZ2UocnQsIHJ0Y09wdGlvbnMsIGNhbGxiYWNrKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBFbnRlciAyMDAKICAgICAqCiAgICAgKiBAcGFyYW0gcnQKICAgICAqICAgICAgICAgICAge3RvOiAsIHJ0S2V5OiAsIHJ0ZmxhZzogLCBzdWNjZXNzKHJlc3VsdCksIGZhaWwoZXJyb3IpfQogICAgICoKICAgICAqIEBwYXJhbSBjYWxsYmFjayhmcm9tLCBydGNPcHRpb25zKQogICAgICoKICAgICAqCiAgICAgKiBAcGFyYW0gV2ViUlRDSWQKICAgICAqIEBwYXJhbSByZXFNZW1iZXJzICE9CiAgICAgKiAgICAgICAgICAgIDAgbWVtYmVycwogICAgICogQHBhcmFtIHRrdAogICAgICogQHBhcmFtIG5vbmNlCiAgICAgKiBAcGFyYW0gZGlnZXN0CiAgICAgKgogICAgICovCiAgICBlbnRlcjogZnVuY3Rpb24gKHJ0LCBXZWJSVENJZCwgcmVxTWVtYmVycywgdGt0LCBub25jZSwgZGlnZXN0LCBjYWxsYmFjaykgewogICAgICAgIF9sb2dnZXIuZGVidWcoImVudGVyIC4uLiIpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNPcHRpb25zID0gewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBvcDogMjAwCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBXZWJSVENJZCAmJiAocnRjT3B0aW9ucy5kYXRhLldlYlJUQ0lkID0gV2ViUlRDSWQpOwogICAgICAgIHJlcU1lbWJlcnMgJiYgKHJ0Y09wdGlvbnMuZGF0YS5yZXFNZW1iZXJzID0gcmVxTWVtYmVycyk7CiAgICAgICAgdGt0ICYmIChydGNPcHRpb25zLmRhdGEudGt0ID0gdGt0KTsKICAgICAgICBub25jZSAmJiAocnRjT3B0aW9ucy5kYXRhLm5vbmNlID0gbm9uY2UpOwogICAgICAgIGRpZ2VzdCAmJiAocnRjT3B0aW9ucy5kYXRhLmRpZ2VzdCA9IGRpZ2VzdCk7CgogICAgICAgIHNlbGYucnRjSGFuZGxlci5zZW5kUnRjTWVzc2FnZShydCwgcnRjT3B0aW9ucywgY2FsbGJhY2spOwogICAgfSwKCiAgICAvKioKICAgICAqIFBpbmcgMTAwCiAgICAgKgogICAgICogQHBhcmFtIHJ0CiAgICAgKiAgICAgICAgICAgIHt0bzogLCBydEtleTogLCBydGZsYWc6ICwgc3VjY2VzcyhyZXN1bHQpLCBmYWlsKGVycm9yKX0KICAgICAqCiAgICAgKiBAcGFyYW0gY2FsbGJhY2soZnJvbSwgcnRjT3B0aW9ucykKICAgICAqCiAgICAgKgogICAgICogQHBhcmFtIHNlc3NJZAogICAgICoKICAgICAqLwogICAgcGluZzogZnVuY3Rpb24gKHJ0LCBzZXNzSWQsIGNhbGxiYWNrKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygicGluZyAuLi4iKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcnRjT3B0aW9ucyA9IHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgb3A6IDEwMAogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgc2Vzc0lkICYmIChydGNPcHRpb25zLmRhdGEuc2Vzc0lkID0gc2Vzc0lkKTsKCiAgICAgICAgc2VsZi5ydGNIYW5kbGVyLnNlbmRSdGNNZXNzYWdlKHJ0LCBydGNPcHRpb25zLCBjYWxsYmFjayk7CiAgICB9LAoKICAgIC8qKgogICAgICog6YCa55+l5a+55pa5IOaIkeW3sue7j+WFs+mXrS/miZPlvIAg6bqm5Y2h77yM5pGE5YOP5aS0CiAgICAgKgogICAgICogUEFVU0VfVk9JQ0UoMCwgMCksIFJFU1VNRV9WT0lDRSgxLCAxKSwgUEFVU0VfVklERU8oMiwgMiksIFJFU1VNRV9WSURFTygzLCAzKQogICAgICoKICAgICAqCiAgICAgKiBAcGFyYW0gcnQKICAgICAqIEBwYXJhbSBzZXNzSWQKICAgICAqIEBwYXJhbSBydGNJZAogICAgICogQHBhcmFtIGNvbnRyb2xUeXBlCiAgICAgKiBAcGFyYW0gY2FsbGJhY2sKICAgICAqLwogICAgc3RyZWFtQ29udHJvbDogZnVuY3Rpb24gKHJ0LCBzZXNzSWQsIHJ0Y0lkLCBjb250cm9sVHlwZSwgY2FsbGJhY2spIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJzdHJlYW1Db250cm9sIC4uLiIpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNPcHRpb25zID0gewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBvcDogNDAwCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBzZXNzSWQgJiYgKHJ0Y09wdGlvbnMuZGF0YS5zZXNzSWQgPSBzZXNzSWQpOwogICAgICAgIHJ0Y0lkICYmIChydGNPcHRpb25zLmRhdGEucnRjSWQgPSBydGNJZCk7CiAgICAgICAgKHR5cGVvZiBjb250cm9sVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiYgIGNvbnRyb2xUeXBlICE9IG51bGwgKSAmJiAocnRjT3B0aW9ucy5kYXRhLmNvbnRyb2xUeXBlID0gY29udHJvbFR5cGUpOwoKICAgICAgICBzZWxmLnJ0Y0hhbmRsZXIuc2VuZFJ0Y01lc3NhZ2UocnQsIHJ0Y09wdGlvbnMsIGNhbGxiYWNrKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBSZXFUa3QgMwogICAgICoKICAgICAqIEBwYXJhbSBydAogICAgICogICAgICAgICAgICB7dG86ICwgcnRLZXk6ICwgcnRmbGFnOiAsIHN1Y2Nlc3MocmVzdWx0KSwgZmFpbChlcnJvcil9CiAgICAgKgogICAgICogQHBhcmFtIGNhbGxiYWNrKGZyb20sIHJ0Y09wdGlvbnMpCiAgICAgKgogICAgICoKICAgICAqIEBwYXJhbSBXZWJSVENJZAogICAgICogQHBhcmFtIHN1Y2Nlc3MoZnJvbSwKICAgICAqICAgICAgICAgICAgcnRjT3B0aW9ucykKICAgICAqCiAgICAgKi8KICAgIHJlcVRrdDogZnVuY3Rpb24gKHJ0LCBpc0NyZWF0ZSwgY29uZnJJZCwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygicmVxVGt0IC4uLiIpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNPcHRpb25zID0gewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBvcDogMwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgaXNDcmVhdGUgJiYgKHJ0Y09wdGlvbnMuZGF0YS5pc0NyZWF0ZSA9IGlzQ3JlYXRlKTsKICAgICAgICBjb25mcklkICYmIChydGNPcHRpb25zLmRhdGEuY29uZnJJZCA9IGNvbmZySWQpOwogICAgICAgIHR5cGVvZiBwYXNzd29yZCA9PT0gInN0cmluZyIgJiYgKHJ0Y09wdGlvbnMuZGF0YS5wYXNzd29yZCA9IHBhc3N3b3JkKTsKCiAgICAgICAgc2VsZi5ydGNIYW5kbGVyLnNlbmRSdGNNZXNzYWdlKHJ0LCBydGNPcHRpb25zLCBjYWxsYmFjayk7CiAgICB9LAoKICAgIGludml0ZTogZnVuY3Rpb24gKHJ0LCBjb25mcklkLCBwYXNzd29yZCwgZ2lkLCBjYWxsYmFjaykgewogICAgICAgIF9sb2dnZXIuZGVidWcoInJlcVRrdCAuLi4iKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcnRjT3B0aW9ucyA9IHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgb3A6ICAyMDIKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGNvbmZySWQgJiYgKHJ0Y09wdGlvbnMuZGF0YS5jb25mcklkID0gY29uZnJJZCk7IC8vIOagvOW8j+mcgOimgei3n+mbhea0geehruWumgogICAgICAgIHR5cGVvZiBwYXNzd29yZCA9PT0gInN0cmluZyIgJiYgKHJ0Y09wdGlvbnMuZGF0YS5wYXNzd29yZCA9IHBhc3N3b3JkKTsKICAgICAgICBnaWQgJiYgKHJ0Y09wdGlvbnMuZGF0YS5naWQgPSBnaWQpOwogICAgICAgIHNlbGYucnRjSGFuZGxlci5zZW5kUnRjTWVzc2FnZShydCwgcnRjT3B0aW9ucywgY2FsbGJhY2spOwogICAgfSwKCiAgICAvKioKICAgICAqIEluaXRDIDEwMgogICAgICoKICAgICAqIEBwYXJhbSBydAogICAgICogICAgICAgICAgICB7dG86ICwgcnRLZXk6ICwgcnRmbGFnOiAsIHN1Y2Nlc3MocmVzdWx0KSwgZmFpbChlcnJvcil9CiAgICAgKgogICAgICogQHBhcmFtIGNhbGxiYWNrKGZyb20sIHJ0Y09wdGlvbnMpCiAgICAgKgogICAgICoKICAgICAqIEBwYXJhbSBXZWJSVENJZAogICAgICogQHBhcmFtIHRrdAogICAgICogQHBhcmFtIHNlc3NJZAogICAgICogQHBhcmFtIHJ0Y0lkCiAgICAgKiBAcGFyYW0gcHViUwogICAgICogICAgICAgICAgICB7bmFtZTogc3RyZWFtTmFtZSwgdmlkZW86MSwgYXVkaW86MSwgdHlwZTogMH0KICAgICAqIEBwYXJhbSBzdWJTCiAgICAgKiAgICAgICAgICAgIHttZW1JZDogLCBydGNJZDogfQogICAgICogQHBhcmFtIHNkcAogICAgICogICAgICAgICAgICBzZHA6c2Rwc3RyaW5nCiAgICAgKiBAcGFyYW0gY2FuZHMgWyBdCiAgICAgKgogICAgICovCiAgICBpbml0QzogZnVuY3Rpb24gKHJ0LCBzdHJlYW1UeXBlLCBXZWJSVENJZCwgdGt0LCBzZXNzSWQsIHJ0Y0lkLCBwdWJTLCBzdWJTLCBzZHAsIGNhbmRzLCBydGNDZmcsIFdlYlJUQywgY2FsbGJhY2spIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJpbml0QyAuLi4iKTsKCgogICAgICAgIHZhciBydGNPcHRpb25zID0gewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBvcDogMTAyCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBydGNPcHRpb25zLnN0cmVhbVR5cGUgPSBzdHJlYW1UeXBlIHx8ICJWSURFTyI7CgogICAgICAgIFdlYlJUQ0lkICYmIChydGNPcHRpb25zLmRhdGEuV2ViUlRDSWQgPSBXZWJSVENJZCk7CiAgICAgICAgdGt0ICYmIChydGNPcHRpb25zLmRhdGEudGt0ID0gdGt0KTsKICAgICAgICBzZXNzSWQgJiYgKHJ0Y09wdGlvbnMuZGF0YS5zZXNzSWQgPSBzZXNzSWQpOwogICAgICAgIHJ0Y0lkICYmIChydGNPcHRpb25zLmRhdGEucnRjSWQgPSBydGNJZCk7CiAgICAgICAgcHViUyAmJiAocnRjT3B0aW9ucy5kYXRhLnB1YlMgPSBwdWJTKTsKICAgICAgICBzdWJTICYmIChydGNPcHRpb25zLmRhdGEuc3ViUyA9IHN1YlMpOwogICAgICAgIHNkcCAmJiAocnRjT3B0aW9ucy5kYXRhLnNkcCA9IHNkcCk7CiAgICAgICAgY2FuZHMgJiYgKHJ0Y09wdGlvbnMuZGF0YS5jYW5kcyA9IGNhbmRzKTsKICAgICAgICBydGNDZmcgJiYgKHJ0Y09wdGlvbnMuZGF0YS5ydGNDZmcgPSBydGNDZmcpOwogICAgICAgIFdlYlJUQyAmJiAocnRjT3B0aW9ucy5kYXRhLldlYlJUQyA9IFdlYlJUQyk7CgogICAgICAgIHJ0Y09wdGlvbnMuZGF0YS5leHByID0gIWVtZWRpYS5zdXBwb3J0UFJBbnN3ZXIgPyAwIDogMTsgLy9GaXJlZm94IOWSjCBFZGdl5LiN5biM5pybc2Rr5Zue5aSNIHByYW5zd2VyCgogICAgICAgIHRoaXMucnRjSGFuZGxlci5zZW5kUnRjTWVzc2FnZShydCwgcnRjT3B0aW9ucywgY2FsbGJhY2spOwogICAgfSwKCiAgICAvKioKICAgICAqIFRja2xDIDEwNQogICAgICoKICAgICAqIEBwYXJhbSBydAogICAgICogICAgICAgICAgICB7dG86ICwgcnRLZXk6ICwgcnRmbGFnOiAsIHN1Y2Nlc3MocmVzdWx0KSwgZmFpbChlcnJvcil9CiAgICAgKgogICAgICogQHBhcmFtIGNhbGxiYWNrKGZyb20sIHJ0Y09wdGlvbnMpCiAgICAgKgogICAgICoKICAgICAqIEBwYXJhbSBzZXNzSWQKICAgICAqIEBwYXJhbSBydGNJZAogICAgICogQHBhcmFtIGNhbmRzCiAgICAgKiBAcGFyYW0gc3VjY2Vzcyhmcm9tLAogICAgICogICAgICAgICAgICBydGNPcHRpb25zKQogICAgICoKICAgICAqLwogICAgdGNrbEM6IGZ1bmN0aW9uIChydCwgc2Vzc0lkLCBydGNJZCwgc2RwLCBjYW5kcywgY2FsbGJhY2spIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJ0Y2tsQyAuLi4iKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcnRjT3B0aW9ucyA9IHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgb3A6IDEwNQogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgc2Vzc0lkICYmIChydGNPcHRpb25zLmRhdGEuc2Vzc0lkID0gc2Vzc0lkKTsKICAgICAgICBydGNJZCAmJiAocnRjT3B0aW9ucy5kYXRhLnJ0Y0lkID0gcnRjSWQpOwogICAgICAgIHNkcCAmJiAocnRjT3B0aW9ucy5kYXRhLnNkcCA9IHNkcCk7CiAgICAgICAgY2FuZHMgJiYgKHJ0Y09wdGlvbnMuZGF0YS5jYW5kcyA9IGNhbmRzKTsKCiAgICAgICAgc2VsZi5ydGNIYW5kbGVyLnNlbmRSdGNNZXNzYWdlKHJ0LCBydGNPcHRpb25zLCBjYWxsYmFjayk7CiAgICB9LAoKICAgIC8qKgogICAgICogQW5zQyAxMDYKICAgICAqCiAgICAgKiBAcGFyYW0gcnQKICAgICAqICAgICAgICAgICAge3RvOiAsIHJ0S2V5OiAsIHJ0ZmxhZzogLCBzdWNjZXNzKHJlc3VsdCksIGZhaWwoZXJyb3IpfQogICAgICoKICAgICAqIEBwYXJhbSBjYWxsYmFjayhmcm9tLCBydGNPcHRpb25zKQogICAgICoKICAgICAqCiAgICAgKiBAcGFyYW0gc2Vzc0lkCiAgICAgKiBAcGFyYW0gcnRjSWQKICAgICAqIEBwYXJhbSBzZHAKICAgICAqIEBwYXJhbSBjYW5kcwogICAgICoKICAgICAqLwogICAgYW5zQzogZnVuY3Rpb24gKHJ0LCBzZXNzSWQsIHJ0Y0lkLCBzZHAsIGNhbmRzLCBjYWxsYmFjaywgZW5hYmxlVm9pY2UsIGVuYWJsZVZpZGVvKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygiYW5zQyAuLi4iKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcnRjT3B0aW9ucyA9IHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgb3A6IDEwNgogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgc2Vzc0lkICYmIChydGNPcHRpb25zLmRhdGEuc2Vzc0lkID0gc2Vzc0lkKTsKICAgICAgICBydGNJZCAmJiAocnRjT3B0aW9ucy5kYXRhLnJ0Y0lkID0gcnRjSWQpOwogICAgICAgIHNkcCAmJiAocnRjT3B0aW9ucy5kYXRhLnNkcCA9IHNkcCk7CiAgICAgICAgY2FuZHMgJiYgKHJ0Y09wdGlvbnMuZGF0YS5jYW5kcyA9IGNhbmRzKTsKCiAgICAgICAgZW5hYmxlVm9pY2UgPT09IGZhbHNlICYmIChydGNPcHRpb25zLmRhdGEuZW5hYmxlVm9pY2UgPSBlbmFibGVWb2ljZSk7CiAgICAgICAgZW5hYmxlVmlkZW8gPT09IGZhbHNlICYmIChydGNPcHRpb25zLmRhdGEuZW5hYmxlVmlkZW8gPSBlbmFibGVWaWRlbyk7CgoKCiAgICAgICAgLy8gcnRjT3B0aW9ucy5kYXRhLmVuYWJsZVZvaWNlID0gZmFsc2U7CiAgICAgICAgLy8gcnRjT3B0aW9ucy5kYXRhLmVuYWJsZVZpZGVvID0gZmFsc2U7CgogICAgICAgIHNlbGYucnRjSGFuZGxlci5zZW5kUnRjTWVzc2FnZShydCwgcnRjT3B0aW9ucywgY2FsbGJhY2spOwogICAgfSwKCiAgICAvKioKICAgICAqIEFjcHRDIDEwNAogICAgICoKICAgICAqIEBwYXJhbSBydAogICAgICogICAgICAgICAgICB7dG86ICwgcnRLZXk6ICwgcnRmbGFnOiAsIHN1Y2Nlc3MocmVzdWx0KSwgZmFpbChlcnJvcil9CiAgICAgKgogICAgICogQHBhcmFtIGNhbGxiYWNrKGZyb20sIHJ0Y09wdGlvbnMpCiAgICAgKgogICAgICoKICAgICAqIEBwYXJhbSBzZXNzSWQKICAgICAqIEBwYXJhbSBydGNJZAogICAgICogQHBhcmFtIHNkcAogICAgICogQHBhcmFtIGFucwogICAgICogICAgICAgICAgICAxCiAgICAgKgogICAgICovCiAgICBhY3B0QzogZnVuY3Rpb24gKHJ0LCBzZXNzSWQsIHJ0Y0lkLCBzZHAsIGNhbmRzLCBhbnMsIGNhbGxiYWNrLCBlbmFibGVWb2ljZSwgZW5hYmxlVmlkZW8pIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJhY3B0QyAuLi4iKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcnRjT3B0aW9ucyA9IHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgb3A6IDEwNAogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgc2Vzc0lkICYmIChydGNPcHRpb25zLmRhdGEuc2Vzc0lkID0gc2Vzc0lkKTsKICAgICAgICBydGNJZCAmJiAocnRjT3B0aW9ucy5kYXRhLnJ0Y0lkID0gcnRjSWQpOwogICAgICAgIHNkcCAmJiAocnRjT3B0aW9ucy5kYXRhLnNkcCA9IHNkcCk7CiAgICAgICAgY2FuZHMgJiYgKHJ0Y09wdGlvbnMuZGF0YS5jYW5kcyA9IGNhbmRzKTsKICAgICAgICBhbnMgJiYgKHJ0Y09wdGlvbnMuZGF0YS5hbnMgPSBhbnMpOwoKICAgICAgICBlbmFibGVWb2ljZSA9PT0gZmFsc2UgJiYgKHJ0Y09wdGlvbnMuZGF0YS5lbmFibGVWb2ljZSA9IGVuYWJsZVZvaWNlKTsKICAgICAgICBlbmFibGVWaWRlbyA9PT0gZmFsc2UgJiYgKHJ0Y09wdGlvbnMuZGF0YS5lbmFibGVWaWRlbyA9IGVuYWJsZVZpZGVvKTsKCiAgICAgICAgLy8gcnRjT3B0aW9ucy5kYXRhLmVuYWJsZVZvaWNlID0gZmFsc2U7CiAgICAgICAgLy8gcnRjT3B0aW9ucy5kYXRhLmVuYWJsZVZpZGVvID0gZmFsc2U7CgogICAgICAgIHNlbGYucnRjSGFuZGxlci5zZW5kUnRjTWVzc2FnZShydCwgcnRjT3B0aW9ucywgY2FsbGJhY2spOwogICAgfSwKCiAgICAvKioKICAgICAqIEdldE1lbXMgMjAzCiAgICAgKgogICAgICogQHBhcmFtIHJ0CiAgICAgKiAgICAgICAgICAgIHt0bzogLCBydEtleTogLCBydGZsYWc6ICwgc3VjY2VzcyhyZXN1bHQpLCBmYWlsKGVycm9yKX0KICAgICAqCiAgICAgKiBAcGFyYW0gY2FsbGJhY2soZnJvbSwgcnRjT3B0aW9ucykKICAgICAqCiAgICAgKgogICAgICogQHBhcmFtIFdlYlJUQ0lkCiAgICAgKiBAcGFyYW0gc2Vzc0lkCiAgICAgKiBAcGFyYW0gc3VjY2Vzcyhmcm9tLAogICAgICogICAgICAgICAgICBydGNPcHRpb25zKQogICAgICoKICAgICAqLwogICAgZ2V0TWVtczogZnVuY3Rpb24gKHJ0LCBXZWJSVENJZCwgc2Vzc0lkLCBjYWxsYmFjaykgewogICAgICAgIF9sb2dnZXIuZGVidWcoImdldE1lbXMgLi4uIik7CgogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHJ0Y09wdGlvbnMgPSB7CiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIG9wOiAyMDMKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIFdlYlJUQ0lkICYmIChydGNPcHRpb25zLmRhdGEuV2ViUlRDSWQgPSBXZWJSVENJZCk7CiAgICAgICAgc2Vzc0lkICYmIChydGNPcHRpb25zLmRhdGEuc2Vzc0lkID0gc2Vzc0lkKTsKCiAgICAgICAgc2VsZi5ydGNIYW5kbGVyLnNlbmRSdGNNZXNzYWdlKHJ0LCBydGNPcHRpb25zLCBjYWxsYmFjayk7CiAgICB9LAoKICAgIC8qKgogICAgICogU3ViQyAyMDUKICAgICAqCiAgICAgKiBAcGFyYW0gcnQKICAgICAqICAgICAgICAgICAge3RvOiAsIHJ0S2V5OiAsIHJ0ZmxhZzogLCBzdWNjZXNzKHJlc3VsdCksIGZhaWwoZXJyb3IpfQogICAgICoKICAgICAqIEBwYXJhbSBjYWxsYmFjayhmcm9tLCBydGNPcHRpb25zKQogICAgICoKICAgICAqCiAgICAgKiBAcGFyYW0gc2Vzc0lkCiAgICAgKiBAcGFyYW0gcnRjSWQKICAgICAqIEBwYXJhbSBzdWJTCiAgICAgKiAgICAgICAgICAgIHttZW1JZDptMDAxLCBydGNJZDpyMDAxfQogICAgICoKICAgICAqLwogICAgc3ViQzogZnVuY3Rpb24gKHJ0LCBzZXNzSWQsIHJ0Y0lkLCBzdWJTLCBjYWxsYmFjaykgewogICAgICAgIF9sb2dnZXIuZGVidWcoInN1YkMgLi4uIik7CgogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHJ0Y09wdGlvbnMgPSB7CiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIG9wOiAyMDUKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHNlc3NJZCAmJiAocnRjT3B0aW9ucy5kYXRhLnNlc3NJZCA9IHNlc3NJZCk7CiAgICAgICAgcnRjSWQgJiYgKHJ0Y09wdGlvbnMuZGF0YS5ydGNJZCA9IHJ0Y0lkKTsKICAgICAgICBzdWJTICYmIChydGNPcHRpb25zLmRhdGEuc3ViUyA9IHN1YlMpOwoKICAgICAgICBzZWxmLnJ0Y0hhbmRsZXIuc2VuZFJ0Y01lc3NhZ2UocnQsIHJ0Y09wdGlvbnMsIGNhbGxiYWNrKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBVc3ViQyAyMDYKICAgICAqCiAgICAgKiBAcGFyYW0gcnQKICAgICAqICAgICAgICAgICAge3RvOiAsIHJ0S2V5OiAsIHJ0ZmxhZzogLCBzdWNjZXNzKHJlc3VsdCksIGZhaWwoZXJyb3IpfQogICAgICoKICAgICAqIEBwYXJhbSBjYWxsYmFjayhmcm9tLCBydGNPcHRpb25zKQogICAgICoKICAgICAqCiAgICAgKiBAcGFyYW0gc2Vzc0lkCiAgICAgKiBAcGFyYW0gcnRjSWQKICAgICAqCiAgICAgKi8KICAgIHVzdWJDOiBmdW5jdGlvbiAocnQsIHNlc3NJZCwgcnRjSWQsIGNhbGxiYWNrKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygidXN1YkMgLi4uIik7CgogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgdmFyIHJ0Y09wdGlvbnMgPSB7CiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIG9wOiAyMDYKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHNlc3NJZCAmJiAocnRjT3B0aW9ucy5kYXRhLnNlc3NJZCA9IHNlc3NJZCk7CiAgICAgICAgcnRjSWQgJiYgKHJ0Y09wdGlvbnMuZGF0YS5ydGNJZCA9IHJ0Y0lkKTsKCiAgICAgICAgc2VsZi5ydGNIYW5kbGVyLnNlbmRSdGNNZXNzYWdlKHJ0LCBydGNPcHRpb25zLCBjYWxsYmFjayk7CiAgICB9LAoKICAgIC8qKgogICAgICogVGVybUMgMTA3CiAgICAgKgogICAgICogQHBhcmFtIHJ0CiAgICAgKiAgICAgICAgICAgIHt0bzogLCBydEtleTogLCBydGZsYWc6ICwgc3VjY2VzcyhyZXN1bHQpLCBmYWlsKGVycm9yKX0KICAgICAqCiAgICAgKiBAcGFyYW0gY2FsbGJhY2soZnJvbSwgcnRjT3B0aW9ucykKICAgICAqCiAgICAgKgogICAgICogQHBhcmFtIHNlc3NJZAogICAgICogQHBhcmFtIHJ0Y0lkCiAgICAgKiBAcGFyYW0gcmVhc29uCiAgICAgKiAgICAgICAgICAgICAgICJvayIgICAgICAtPiAnSEFOR1VQJyAgICAgInN1Y2Nlc3MiIC0+ICdIQU5HVVAnICAgInRpbWVvdXQiICAgICAgICAgIC0+ICdOT1JFU1BPTlNFJwogICAgICogICAgICAgICAgICAgICAiZGVjbGluZSIgLT4gJ1JFSkVDVCcgICAgICJidXN5IiAgICAtPiAnQlVTWScgICAgICJmYWlsZWQtdHJhbnNwb3J0IiAtPiAnRkFJTCcKICAgICAqCiAgICAgKi8KICAgIHRlcm1DOiBmdW5jdGlvbiAocnQsIHNlc3NJZCwgcnRjSWQsIHJlYXNvbiwgY2FsbGJhY2spIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJ0ZXJtQyAuLi4iKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcnRjT3B0aW9ucyA9IHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgb3A6IDEwNwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgc2Vzc0lkICYmIChydGNPcHRpb25zLmRhdGEuc2Vzc0lkID0gc2Vzc0lkKTsKICAgICAgICBydGNJZCAmJiAocnRjT3B0aW9ucy5kYXRhLnJ0Y0lkID0gcnRjSWQpOwogICAgICAgIHJlYXNvbiAmJiAocnRjT3B0aW9ucy5yZWFzb24gPSByZWFzb24pOwoKICAgICAgICBzZWxmLnJ0Y0hhbmRsZXIuc2VuZFJ0Y01lc3NhZ2UocnQsIHJ0Y09wdGlvbnMsIGNhbGxiYWNrKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBFeGl0IDIwMQogICAgICoKICAgICAqIEBwYXJhbSBydAogICAgICogICAgICAgICAgICB7dG86ICwgcnRLZXk6ICwgcnRmbGFnOiAsIHN1Y2Nlc3MocmVzdWx0KSwgZmFpbChlcnJvcil9CiAgICAgKgogICAgICogQHBhcmFtIGNhbGxiYWNrKGZyb20sIHJ0Y09wdGlvbnMpCiAgICAgKgogICAgICoKICAgICAqIEBwYXJhbSBXZWJSVENJZAogICAgICogQHBhcmFtIHNlc3NJZAogICAgICogQHBhcmFtIHN1Y2Nlc3MoZnJvbSwKICAgICAqICAgICAgICAgICAgcnRjT3B0aW9ucykKICAgICAqCiAgICAgKi8KICAgIGV4aXQ6IGZ1bmN0aW9uIChydCwgV2ViUlRDSWQsIHNlc3NJZCwgY2FsbGJhY2spIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJleGl0IC4uLiIpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNPcHRpb25zID0gewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBvcDogMjAxCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBXZWJSVENJZCAmJiAocnRjT3B0aW9ucy5kYXRhLldlYlJUQ0lkID0gV2ViUlRDSWQpOwogICAgICAgIHNlc3NJZCAmJiAocnRjT3B0aW9ucy5kYXRhLnNlc3NJZCA9IHNlc3NJZCk7CgogICAgICAgIHNlbGYucnRjSGFuZGxlci5zZW5kUnRjTWVzc2FnZShydCwgcnRjT3B0aW9ucywgY2FsbGJhY2spOwogICAgfSwKCiAgICAvKioKICAgICAqIERlbENmciAyCiAgICAgKgogICAgICogQHBhcmFtIHJ0CiAgICAgKiAgICAgICAgICAgIHt0bzogLCBydEtleTogLCBydGZsYWc6ICwgc3VjY2VzcyhyZXN1bHQpLCBmYWlsKGVycm9yKX0KICAgICAqCiAgICAgKiBAcGFyYW0gY2FsbGJhY2soZnJvbSwgcnRjT3B0aW9ucykKICAgICAqCiAgICAgKgogICAgICogQHBhcmFtIFdlYlJUQ0lkCiAgICAgKiBAcGFyYW0gYWRtdG9rCiAgICAgKiBAcGFyYW0gc3VjY2Vzcyhmcm9tLAogICAgICogICAgICAgICAgICBydGNPcHRpb25zKQogICAgICoKICAgICAqLwogICAgZGVsQ2ZyOiBmdW5jdGlvbiAocnQsIFdlYlJUQ0lkLCBhZG10b2ssIGNhbGxiYWNrKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygiZGVsQ2ZyIC4uLiIpOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydGNPcHRpb25zID0gewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBvcDogMgogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgV2ViUlRDSWQgJiYgKHJ0Y09wdGlvbnMuZGF0YS5XZWJSVENJZCA9IFdlYlJUQ0lkKTsKICAgICAgICBhZG10b2sgJiYgKHJ0Y09wdGlvbnMuZGF0YS5hZG10b2sgPSBhZG10b2spOwoKICAgICAgICBzZWxmLnJ0Y0hhbmRsZXIuc2VuZFJ0Y01lc3NhZ2UocnQsIHJ0Y09wdGlvbnMsIGNhbGxiYWNrKTsKICAgIH0KfTsKCmV4cG9ydHMuQXBpID0gZnVuY3Rpb24gKGluaXRDb25maWdzKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgX3V0aWwuZXh0ZW5kKHRydWUsIHRoaXMsIF9jbGF6eiwgaW5pdENvbmZpZ3MgfHwge30pOwoKCiAgICBmdW5jdGlvbiBfb25SZWN2UnRjTWVzc2FnZShmcm9tLCBydGNPcHRpb25zLCBydGtleSwgdHN4SWQsIGZyb21TZXNzaW9uSWQpIHsKICAgICAgICBpZiAocnRjT3B0aW9ucy5yZXN1bHQgIT0gMCAmJiBzZWxmWydvblNlcnZlckVycm9yJ10pIHsKICAgICAgICAgICAgc2VsZlsnb25TZXJ2ZXJFcnJvciddLmNhbGwoc2VsZiwgZnJvbSwgcnRjT3B0aW9ucywgcnRrZXksIHRzeElkLCBmcm9tU2Vzc2lvbklkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgb25GdW5jdGlvbjsKCiAgICAgICAgICAgIGlmIChzZWxmLmV2ZW50c1tydGNPcHRpb25zLm9wXSAmJiAob25GdW5jdGlvbiA9IHNlbGZbc2VsZi5ldmVudHNbcnRjT3B0aW9ucy5vcF1dKSkgewogICAgICAgICAgICAgICAgb25GdW5jdGlvbi5jYWxsKHNlbGYsIGZyb20sIHJ0Y09wdGlvbnMsIHJ0a2V5LCB0c3hJZCwgZnJvbVNlc3Npb25JZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmluZm8oImNhbiBub3QgaGFuZGxlKHJlY3ZSdGNNZXNzYWdlKSB0aGUgb3A6ICIgKyBydGNPcHRpb25zLm9wLCBydGNPcHRpb25zKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICB0aGlzLnJ0Y0hhbmRsZXIub25SZWN2UnRjTWVzc2FnZSA9IF9vblJlY3ZSdGNNZXNzYWdlOwp9OwoKCi8qKiovIH0pLAovKiA5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOwovKiBoYXJtb255IGltcG9ydCAqLyB2YXIgZWFzZW1vYl9lbWVkaWFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7Ci8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBlYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKGVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pOwoKCmVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIldlYnJ0YyJdLnByb3RvdHlwZS5BVlB1YnN0cmVhbSA9IGVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIlNlcnZpY2UiXS5wcm90b3R5cGUuQVZQdWJzdHJlYW07CgplYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJXZWJydGMiXS5wcm90b3R5cGUuX29wZW5DYW1lcmEgPSBmdW5jdGlvbigpewogICAgZWFzZW1vYl9lbWVkaWFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siU2VydmljZSJdLnByb3RvdHlwZS5fb3BlbkNhbWVyYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIldlYnJ0YyJdLnByb3RvdHlwZS5fX2dldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKCl7CiAgICBlYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJTZXJ2aWNlIl0ucHJvdG90eXBlLl9fZ2V0VXNlck1lZGlhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KZWFzZW1vYl9lbWVkaWFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siV2VicnRjIl0ucHJvdG90eXBlLl9fY29udHJvbFN0cmVhbSA9IGZ1bmN0aW9uKCl7CiAgICBlYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJTZXJ2aWNlIl0ucHJvdG90eXBlLl9fY29udHJvbFN0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIldlYnJ0YyJdLnByb3RvdHlwZS5fX3N5c0dldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKCl7CiAgICBlYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJTZXJ2aWNlIl0ucHJvdG90eXBlLl9fc3lzR2V0VXNlck1lZGlhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCi8vY2FsbGJhY2sgKHJ0Yywgc3RyZWFtKQplYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJXZWJydGMiXS5wcm90b3R5cGUuY3JlYXRlTWVkaWEgPSBmdW5jdGlvbihjb25zdGFpbnRzLCBjYWxsYmFjayl7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgdmFyIHB1YlMgPSBuZXcgc2VsZi5BVlB1YnN0cmVhbSh7CiAgICAgICAgY29uc3RhaW50czogY29uc3RhaW50cywKICAgICAgICBhb2ZmOiAwLAogICAgICAgIHZvZmY6IDAKICAgIH0pOwoKICAgIHZhciBvcGVuVXNlck1lZGlhID0gZWFzZW1vYl9lbWVkaWFfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1siU2VydmljZSJdLnByb3RvdHlwZS5vcGVuVXNlck1lZGlhLmJpbmQodGhpcyk7CiAgICBvcGVuVXNlck1lZGlhKHB1YlMpLnRoZW4oZnVuY3Rpb24gKF9zZXJ2aWNlLCBzdHJlYW0pIHsKICAgICAgICBXZWJJTS5fX2FscmVhZHlPcGVuTWVkaWFzLnB1c2goc3RyZWFtKTsKICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhzZWxmLCBzdHJlYW0pCiAgICB9LCBmdW5jdGlvbiBmYWlsKGV2dCkgewogICAgICAgIGVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInV0aWwiXS5sb2dnZXIuZGVidWcoJ1tXZWJSVEMtQVBJXSBnZXRVc2VyTWVkaWEoKSBlcnJvcjogJywgZXZ0KTsKICAgICAgICBzZWxmLm9uRXJyb3IoZXZ0KTsKICAgIH0pOwp9Cgp2YXIgY3JlYXRlTWVkaWE7CmVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIldlYnJ0YyJdLnByb3RvdHlwZS5jcmVhdGVNZWRpYSA9CiAgICBjcmVhdGVNZWRpYSA9IGZ1bmN0aW9uKGNvbnN0YWludHMsIGNhbGxiYWNrKXsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICB2YXIgbWVkaWFTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTsKCiAgICBmdW5jdGlvbiBfX2NhbGxiYWNrKCkgewogICAgICAgIGlmKC0tX19jYWxsYmFjay5jb3VudCA9PT0gMCl7CiAgICAgICAgICAgIFdlYklNLl9fYWxyZWFkeU9wZW5NZWRpYXMucHVzaChtZWRpYVN0cmVhbSk7CiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHNlbGYsIG1lZGlhU3RyZWFtKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gX19jbG9uZVRyYWNrKGRlc3RTdHJlYW0pIHsKICAgICAgICBkZXN0U3RyZWFtICYmIGRlc3RTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgICBtZWRpYVN0cmVhbS5hZGRUcmFjayh0cmFjayk7CiAgICAgICAgfSk7CiAgICB9CgogICAgdmFyIGF1ZGlvID0gIWNvbnN0YWludHMgfHwgY29uc3RhaW50cy5hdWRpbzsKICAgIHZhciB2aWRlbyA9ICFjb25zdGFpbnRzIHx8IGNvbnN0YWludHMudmlkZW87CgogICAgaWYoIWF1ZGlvICYmICF2aWRlbyl7CiAgICAgICAgX19jYWxsYmFjay5jb3VudCA9IDA7CiAgICAgICAgcmV0dXJuIF9fY2FsbGJhY2soKTsKICAgIH0KCiAgICBpZighIWF1ZGlvICYmICEhdmlkZW8peyAvL+S4pOS4qnRydWUKICAgICAgICBfX2NhbGxiYWNrLmNvdW50ID0gMjsKICAgICAgICBjcmVhdGVNZWRpYS5jYWxsKHRoaXMsIHt2aWRlbzogY29uc3RhaW50cy52aWRlbywgYXVkaW86IGZhbHNlfSwgZnVuY3Rpb24gKG9iaiwgc3RyZWFtKSB7CiAgICAgICAgICAgIF9fY2xvbmVUcmFjayhzdHJlYW0pOwogICAgICAgICAgICBfX2NhbGxiYWNrKCk7CiAgICAgICAgfSk7CiAgICAgICAgY3JlYXRlTWVkaWEuY2FsbCh0aGlzLCB7dmlkZW86IGZhbHNlLCBhdWRpbzogY29uc3RhaW50cy5hdWRpb30sIGZ1bmN0aW9uIChvYmosIHN0cmVhbSkgewogICAgICAgICAgICBfX2Nsb25lVHJhY2soc3RyZWFtKTsKICAgICAgICAgICAgX19jYWxsYmFjaygpOwogICAgICAgIH0pOwoKICAgICAgICByZXR1cm47CiAgICB9CgogICAgX19jYWxsYmFjay5jb3VudCA9IDE7CgogICAgdmFyIHB1YlMgPSBuZXcgc2VsZi5BVlB1YnN0cmVhbSh7CiAgICAgICAgY29uc3RhaW50czogY29uc3RhaW50cwogICAgfSk7CgogICAgdmFyIG9wZW5Vc2VyTWVkaWEgPSBlYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJTZXJ2aWNlIl0ucHJvdG90eXBlLm9wZW5Vc2VyTWVkaWEuYmluZCh0aGlzKTsKICAgIG9wZW5Vc2VyTWVkaWEocHViUykudGhlbihmdW5jdGlvbiAoX3NlcnZpY2UsIHN0cmVhbSkgewogICAgICAgIF9fY2xvbmVUcmFjayhzdHJlYW0pOwogICAgICAgIF9fY2FsbGJhY2soKTsKICAgIH0sIGZ1bmN0aW9uIGZhaWwoZXZ0KSB7CiAgICAgICAgX19jYWxsYmFjaygpOwogICAgICAgIGVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInV0aWwiXS5sb2dnZXIuZGVidWcoJ1tXZWJSVEMtQVBJXSBnZXRVc2VyTWVkaWEoKSBlcnJvcjogJywgZXZ0KTsKCiAgICAgICAgaWYodHlwZW9mIGV2dC5tZXNzYWdlID09PSAnZnVuY3Rpb24nKXsKICAgICAgICAgICAgZXZ0Lm1lc3NhZ2UgPSBldnQubWVzc2FnZSgpOwogICAgICAgIH1lbHNlIGlmKHR5cGVvZiBldnQubWVzc2FnZSA9PT0gJ3N0cmluZycgJiYgZXZ0Lm1lc3NhZ2UgIT09ICIiKXsKICAgICAgICAgICAgZXZ0Lm1lc3NhZ2UgPSBldnQubWVzc2FnZTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZXZ0Lm1lc3NhZ2UgPSAib3BlbiBtZWRpYSBlcnJvci4gIiArIGV2dC5uYW1lOwogICAgICAgIH0KCiAgICAgICAgZXZ0Lm1lc3NhZ2UgPSBldnQubWVzc2FnZSArICIgd2hlbiBnZXQgIiArICh2aWRlbyA/ICJjYXJtYSIgOiAibWljcm9waG9uZSIpOwoKICAgICAgICBzZWxmLm9uRXJyb3IoZXZ0KTsKICAgIH0pOwp9CgplYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJXZWJydGMiXS5wcm90b3R5cGUuc2V0TG9jYWxWaWRlb1NyY09iamVjdCA9IGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICBzZWxmLl9sb2NhbFN0cmVhbSA9IHN0cmVhbTsKCiAgICBzZWxmLm9uR290TG9jYWxTdHJlYW0oc3RyZWFtLCB0aGlzLnN0cmVhbVR5cGUpOwogICAgc2VsZi5zZXRMb2NhbFN0cmVhbShzdHJlYW0pOwoKICAgIGVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bInV0aWwiXS5sb2dnZXIuZGVidWcoJ1tXZWJSVEMtQVBJXSB5b3UgY2FuIHNlZSB5b3Vyc2VsZiAhJyk7Cn0KCnZhciBfc2V0UmVtb3RlRGVzY3JpcHRpb24gPSBlYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJXZWJydGMiXS5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247CmVhc2Vtb2JfZW1lZGlhX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bIldlYnJ0YyJdLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uIChkZXNjKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgaWYoc2VsZi5zdHJlYW1UeXBlID09PSAiVk9JQ0UiKXsgLy/lsIZyZW1vdGUgc2Rw5LitIHZpZGVv5Lit5pS55Li6IGE9bWlkOnZpZGVvIC3jgIsgYT1zZW5kcmVjdnxhPXNlbmRvbmx5LS1yZWN2b25seQogICAgICAgIGZ1bmN0aW9uIHZpZGVvU2VjdGlvblJlcGxhY2UocmVneCwgdXNlKSB7CiAgICAgICAgICAgIHZhciB2aWRlb1NlY3Rpb25JbmRleCA9IGRlc2Muc2RwLmluZGV4T2YoIm09dmlkZW8iKTsKICAgICAgICAgICAgdmFyIGF1ZGlvU2VjdGlvbkluZGV4ID0gZGVzYy5zZHAuaW5kZXhPZigibT1hdWRpbyIpOwogICAgICAgICAgICB2YXIgZW5kID0gYXVkaW9TZWN0aW9uSW5kZXggPiB2aWRlb1NlY3Rpb25JbmRleCA/IGF1ZGlvU2VjdGlvbkluZGV4IDogZGVzYy5zZHAubGVuZ3RoOwoKICAgICAgICAgICAgZGVzYy5zZHAgPSBkZXNjLnNkcC5yZXBsYWNlKHJlZ3gsIGZ1bmN0aW9uIChtYXRjaCwgb2Zmc2V0LCBzdHJpbmcpIHsKICAgICAgICAgICAgICAgIGlmKG9mZnNldCA+PSB2aWRlb1NlY3Rpb25JbmRleCAmJiBvZmZzZXQgPCBlbmQpewogICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2U7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmlkZW9TZWN0aW9uUmVwbGFjZSgvYT1zZW5kcmVjdnxhPXNlbmRvbmx5L2csICJhPWluYWN0aXZlIik7CiAgICB9CiAgICByZXR1cm4gX3NldFJlbW90ZURlc2NyaXB0aW9uLmNhbGwoc2VsZiwgZGVzYyk7Cn0KCgovKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bImRlZmF1bHQiXSA9IChlYXNlbW9iX2VtZWRpYV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fWyJXZWJydGMiXSk7CgovKioqLyB9KSwKLyogMTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyoqCiAqIFAyUAogKi8KdmFyIF91dGlsID0gKF9fd2VicGFja19yZXF1aXJlX18oMikuZGVmYXVsdCk7CnZhciBSb3V0ZVRvID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KS5Sb3V0ZVRvOwp2YXIgX2xvZ2dlciA9IF91dGlsLmxvZ2dlcjsKCgp2YXIgUDJQUm91dGVUbyA9IFJvdXRlVG8oewogICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIF9sb2dnZXIuZGVidWcoImlxIHRvIHNlcnZlciBzdWNjZXNzIiwgcmVzdWx0KTsKICAgIH0sCiAgICBmYWlsOiBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJpcSB0byBzZXJ2ZXIgZXJyb3IiLCBlcnJvcik7CiAgICB9Cn0pOwoKCnZhciBDb21tb25QYXR0ZXJuID0gewogICAgX3BpbmdJbnRlcnZhbElkOiBudWxsLAogICAgX3AycENvbmZpZzogbnVsbCwKICAgIF9ydGNDZmc6IG51bGwsCiAgICBfcnRjQ2ZnMjogbnVsbCwKICAgIF9ydEtleTogbnVsbCwKICAgIF9ydEZsYWc6IG51bGwsCgoKICAgIHdlYlJ0YzogbnVsbCwKICAgIGFwaTogbnVsbCwKCiAgICBjYWxsZWU6IG51bGwsCgoKICAgIGlzQ2FsbGVyOiBmYWxzZSwKICAgIGFjY2VwdGVkOiBmYWxzZSwKCiAgICBzZXRMb2NhbFNEUDogZmFsc2UsCiAgICBzZXRSZW1vdGVTRFA6IGZhbHNlLAoKICAgIGhhbmd1cDogZmFsc2UsCgoKICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHNlbGYuYXBpLm9uUGluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi5fb25QaW5nLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgICBzZWxmLmFwaS5vblRja2xDID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLl9vblRja2xDLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgICBzZWxmLmFwaS5vbkFjcHRDID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLl9vbkFjcHRDLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgICBzZWxmLmFwaS5vbkFuc0MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHNlbGYuX29uQW5zQy5hcHBseShzZWxmLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgICAgc2VsZi5hcGkub25UZXJtQyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi5fb25UZXJtQy5hcHBseShzZWxmLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgICAgc2VsZi5hcGkub25FdkpvaW4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fb25FdkpvaW4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICAgIHNlbGYuYXBpLm9uU3RyZWFtQ29udHJvbCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBzZWxmLl9vblN0cmVhbUNvbnRyb2wuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICAgIHNlbGYud2ViUnRjLm9uSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLl9vbkljZUNhbmRpZGF0ZS5hcHBseShzZWxmLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgICAgc2VsZi53ZWJSdGMub25JY2VTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi5fb25JY2VTdGF0ZUNoYW5nZS5hcHBseShzZWxmLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICB9LAoKICAgIF9waW5nOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgaW5kZXggPSAwOwoKICAgICAgICBmdW5jdGlvbiBwaW5nKCkgewogICAgICAgICAgICB2YXIgcnQgPSBuZXcgUDJQUm91dGVUbyh7CiAgICAgICAgICAgICAgICB0bzogc2VsZi5jYWxsZWUsCiAgICAgICAgICAgICAgICBydEtleTogc2VsZi5fcnRLZXkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzZWxmLmFwaS5waW5nKHJ0LCBzZWxmLl9zZXNzSWQsIGZ1bmN0aW9uIChmcm9tLCBydGNPcHRpb25zKSB7CiAgICAgICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJwaW5nIHJlc3VsdCIsIHJ0Y09wdGlvbnMpOwoKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIHNlbGYuYXBpLnN0cmVhbUNvbnRyb2wocnQsIHNlbGYuX3Nlc3NJZCwgInJ0Y0lkIiwgKGluZGV4KyspICUgNCwgZnVuY3Rpb24gKGZyb20sIHJ0Y09wdGlvbnMpIHsKICAgICAgICAgICAgLy8gICAgIF9sb2dnZXIuZGVidWcoInN0cmVhbUNvbnRyb2wgcmVzdWx0IiwgcnRjT3B0aW9ucyk7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIH0pOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5fcGluZ0ludGVydmFsSWQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwocGluZywgNTAwMDApOwogICAgfSwKCiAgICBfb25QaW5nOiBmdW5jdGlvbiAoZnJvbSwgb3B0aW9ucywgcnRrZXksIHRzeElkLCBmcm9tU2lkKSB7CiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnX29uUGluZyBmcm9tJywgZnJvbVNpZCk7CiAgICB9LAoKICAgIGluaXRDOiBmdW5jdGlvbiAobWVkaWFTdHJlYW1Db25zdGFpbnRzLCBhY2Nlc3NTaWQpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgc2VsZi5zaWQgPSBhY2Nlc3NTaWQ7CgogICAgICAgIHNlbGYuaXNDYWxsZXIgPSB0cnVlOwogICAgICAgIHNlbGYuYWNjZXB0ZWQgPSBmYWxzZTsKICAgICAgICBzZWxmLnNldExvY2FsU0RQID0gZmFsc2U7CiAgICAgICAgc2VsZi5zZXRSZW1vdGVTRFAgPSBmYWxzZTsKICAgICAgICBzZWxmLmhhbmd1cCA9IGZhbHNlOwoKICAgICAgICBzZWxmLnN0cmVhbVR5cGUgPSBtZWRpYVN0cmVhbUNvbnN0YWludHMuYXVkaW8gJiYgbWVkaWFTdHJlYW1Db25zdGFpbnRzLnZpZGVvID8gIlZJREVPIiA6ICJWT0lDRSI7CgogICAgICAgIHNlbGYuY3JlYXRlTG9jYWxNZWRpYShtZWRpYVN0cmVhbUNvbnN0YWludHMpOwogICAgfSwKCiAgICBjcmVhdGVMb2NhbE1lZGlhOiBmdW5jdGlvbiAobWVkaWFTdHJlYW1Db25zdGFpbnRzKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB0aGlzLndlYlJ0Yy5jcmVhdGVNZWRpYShtZWRpYVN0cmVhbUNvbnN0YWludHMsIGZ1bmN0aW9uICh3ZWJydGMsIHN0cmVhbSkgewogICAgICAgICAgICBzZWxmLndlYlJ0Yy5jcmVhdGVSdGNQZWVyQ29ubmVjdGlvbihzZWxmLl9ydGNDZmcpOwoKICAgICAgICAgICAgd2VicnRjLnNldExvY2FsVmlkZW9TcmNPYmplY3Qoc3RyZWFtKTsKCiAgICAgICAgICAgIHNlbGYud2ViUnRjLmNyZWF0ZU9mZmVyKGZ1bmN0aW9uIChvZmZlcikgewogICAgICAgICAgICAgICAgc2VsZi5fb25Hb3RXZWJSdGNPZmZlcihvZmZlcik7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKCiAgICBfb25Hb3RXZWJSdGNPZmZlcjogZnVuY3Rpb24gKG9mZmVyKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICB2YXIgcnQgPSBuZXcgUDJQUm91dGVUbyh7CiAgICAgICAgICAgIHNpZDogc2VsZi5zaWQsCiAgICAgICAgICAgIHRvOiBzZWxmLmNhbGxlZSwKICAgICAgICAgICAgcnRLZXk6IHNlbGYuX3J0S2V5CiAgICAgICAgfSk7CgogICAgICAgIHNlbGYuYXBpLmluaXRDKHJ0LCBzZWxmLnN0cmVhbVR5cGUsIG51bGwsIG51bGwsIHNlbGYuX3Nlc3NJZCwgc2VsZi5fcnRjSWQsIG51bGwsIG51bGwsIG9mZmVyLCBudWxsLCBzZWxmLl9ydGNDZmcyLCBudWxsLCBmdW5jdGlvbiAoZnJvbSwgcnRjT3B0aW9ucykgewogICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJpbml0YyByZXN1bHQiLCBydGNPcHRpb25zKTsKICAgICAgICB9KTsKCiAgICAgICAgc2VsZi5zZXRMb2NhbFNEUCA9IHRydWU7CgogICAgICAgIHNlbGYuX3BpbmcoKTsKICAgIH0sCgogICAgX29uQWNwdEM6IGZ1bmN0aW9uIChmcm9tLCBvcHRpb25zKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAob3B0aW9ucy5hbnMgJiYgb3B0aW9ucy5hbnMgPT0gMSkgewogICAgICAgICAgICBfbG9nZ2VyLmluZm8oIltXZWJSVEMtQVBJXSBfb25BY3B0QyA6IDEwNCwgYW5zID0gMSwgaXQgaXMgYSBhbnN3ZXIuIHdpbGwgb25BY2NlcHRDYWxsIik7CiAgICAgICAgICAgIHNlbGYub25BY2NlcHRDYWxsKGZyb20sIG9wdGlvbnMsIG9wdGlvbnMuZW5hYmxlVm9pY2UgIT09IGZhbHNlLCBvcHRpb25zLmVuYWJsZVZpZGVvICE9PSBmYWxzZSk7CiAgICAgICAgICAgIHNlbGYuX29uQW5zQyhmcm9tLCBvcHRpb25zKTsKICAgICAgICB9IGVsc2UgaWYgKCFXZWJJTS5XZWJSVEMuc3VwcG9ydFBSQW5zd2VyKSB7CiAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiW1dlYlJUQy1BUEldIF9vbkFjcHRDIDogbm90IHN1cHBvcnRlZCBwcmFuc3dlci4gZHJvcCBpdC4gd2lsbCBvbkFjY2VwdENhbGwiKTsKCiAgICAgICAgICAgIHNlbGYuc2V0UmVtb3RlU0RQID0gZmFsc2U7CiAgICAgICAgICAgIHNlbGYuX2hhbmRSZWN2Q2FuZHNPclNlbmQoZnJvbSwgb3B0aW9ucyk7CgogICAgICAgICAgICBzZWxmLm9uQWNjZXB0Q2FsbChmcm9tLCBvcHRpb25zLCBvcHRpb25zLmVuYWJsZVZvaWNlICE9PSBmYWxzZSwgb3B0aW9ucy5lbmFibGVWaWRlbyAhPT0gZmFsc2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiW1dlYlJUQy1BUEldIF9vbkFjcHRDIDogcmVjdiBwcmFuc3dlci4gIik7CgogICAgICAgICAgICBpZiAob3B0aW9ucy5zZHAgfHwgb3B0aW9ucy5jYW5kcykgewogICAgICAgICAgICAgICAgLy8gb3B0aW9ucy5zZHAgJiYgKG9wdGlvbnMuc2RwLnR5cGUgPSAicHJhbnN3ZXIiKTsKICAgICAgICAgICAgICAgIG9wdGlvbnMuc2RwICYmIHNlbGYud2ViUnRjLnNldFJlbW90ZURlc2NyaXB0aW9uKG9wdGlvbnMuc2RwKTsKCiAgICAgICAgICAgICAgICBzZWxmLnNldFJlbW90ZVNEUCA9IHRydWU7CiAgICAgICAgICAgICAgICBzZWxmLl9oYW5kUmVjdkNhbmRzT3JTZW5kKGZyb20sIG9wdGlvbnMpOwoKICAgICAgICAgICAgICAgIHNlbGYub25BY2NlcHRDYWxsKGZyb20sIG9wdGlvbnMsIG9wdGlvbnMuZW5hYmxlVm9pY2UgIT09IGZhbHNlLCBvcHRpb25zLmVuYWJsZVZpZGVvICE9PSBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAoKICAgIF9vbkV2Sm9pbjogZnVuY3Rpb24gKGZyb20sIG9wdGlvbnMsIHJ0a2V5LCB0c3hJZCwgZnJvbVNpZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnX29uRXZKb2luIGZyb20nLCBmcm9tU2lkLCBmcm9tKTsKCiAgICAgICAgc2VsZi5vbkFjY2VwdENhbGwoZnJvbSwgb3B0aW9ucywgb3B0aW9ucy5lbmFibGVWb2ljZSAhPT0gZmFsc2UsIG9wdGlvbnMuZW5hYmxlVmlkZW8gIT09IGZhbHNlKTsKICAgIH0sCgogICAgb25BY2NlcHRDYWxsOiBmdW5jdGlvbiAoZnJvbSwgb3B0aW9ucywgZW5hYmxlVm9pY2UsIGVuYWJsZVZpZGVvKSB7CgogICAgfSwKCiAgICBfX29uVm9pY2VPclZpZGVvOiBmdW5jdGlvbihmcm9tLCBvcHRpb25zLCBmcm9tU2lkKXsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIG9wdGlvbnMuZW5hYmxlVm9pY2UgPT09IGZhbHNlID8gKHNlbGYub25PdGhlclVzZXJPcGVuVm9pY2UoZnJvbSwgZmFsc2UpKSA6IChzZWxmLm9uT3RoZXJVc2VyT3BlblZvaWNlKGZyb20sIHRydWUpKTsKICAgICAgICBvcHRpb25zLmVuYWJsZVZpZGVvID09PSBmYWxzZSA/IChzZWxmLm9uT3RoZXJVc2VyT3BlblZpZGVvKGZyb20sIGZhbHNlKSkgOiAoc2VsZi5vbk90aGVyVXNlck9wZW5WaWRlbyhmcm9tLCB0cnVlKSk7CiAgICB9LAoKICAgIC8qCiAgICAgKiB7IHZlcmlzb24gOiBNU1lOQ19WMSwgY29tcHJlc3NfYWxnb3JpbXRoIDogMCwgY29tbWFuZCA6IFNZTkMsIHBheWxvYWQgOiB7IG1ldGEgOiB7IGlkIDogMjMyNiwgdG8gOiBlYXNlbW9iLWRlbW8jY2hhdGRlbW91aV94eWowMDJAZWFzZW1vYi5jb20sIG5zIDogQ09ORkVSRU5DRSwgcGF5bG9hZCA6IHsgc2Vzc2lvbl9pZCA6IHh5ajAwMTE0OTQzMjA1OTgwNTUsIG9wZXJhdGlvbiA6IE1FRElBX1JFUVVFU1QsIHBlZXJfbmFtZSA6IHh5ajAwMSwgcm91dGVfZmxhZyA6IDEsIHJvdXRlX2tleSA6IC0tWC0tLCBjb250ZW50IDogeyJvcCI6NDAwLCJjYWxsVmVyc2lvbiI6IjIuMC4wIiwic2Vzc0lkIjoiMTI4NTQyODI2OTA5NjY3MzI4IiwicnRjSWQiOiJDaGFubmVsMTQ5NDMyMDU5ODA1NiIsInRzeElkIjoiMTQ5NDMyMDYyMjg2Ni02IiwiY29udHJvbFR5cGUiOjB9LCBjb250cm9sX3R5cGUgOiBQQVVTRV9WT0lDRSB9IH0gfSB9CiAgICAgKiBQQVVTRV9WT0lDRSgwLCAwKSwgUkVTVU1FX1ZPSUNFKDEsIDEpLCBQQVVTRV9WSURFTygyLCAyKSwgUkVTVU1FX1ZJREVPKDMsIDMpCiAgICAgKgogICAgICovCiAgICBfb25TdHJlYW1Db250cm9sOiBmdW5jdGlvbiAoZnJvbSwgb3B0aW9ucywgcnRrZXksIHRzeElkLCBmcm9tU2lkKXsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdmFyIGNvbnRyb2xUeXBlID0gb3B0aW9ucy5jb250cm9sVHlwZTsKCiAgICAgICAgY29udHJvbFR5cGUgPT09IDAgJiYgKHNlbGYub25PdGhlclVzZXJPcGVuVm9pY2UoZnJvbSwgZmFsc2UpKTsKICAgICAgICBjb250cm9sVHlwZSA9PT0gMSAmJiAoc2VsZi5vbk90aGVyVXNlck9wZW5Wb2ljZShmcm9tLCB0cnVlKSk7CiAgICAgICAgY29udHJvbFR5cGUgPT09IDIgJiYgKHNlbGYub25PdGhlclVzZXJPcGVuVmlkZW8oZnJvbSwgZmFsc2UpKTsKICAgICAgICBjb250cm9sVHlwZSA9PT0gMyAmJiAoc2VsZi5vbk90aGVyVXNlck9wZW5WaWRlbyhmcm9tLCB0cnVlKSk7CgogICAgICAgIHNlbGYub25TdHJlYW1Db250cm9sKGZyb20sIG9wdGlvbnMsIHJ0a2V5LCB0c3hJZCwgZnJvbVNpZCk7CiAgICB9LAogICAgb25TdHJlYW1Db250cm9sOiBmdW5jdGlvbiAoZnJvbSwgb3B0aW9ucywgcnRrZXksIHRzeElkLCBmcm9tU2lkKXsKCiAgICB9LAoKICAgIG9uT3RoZXJVc2VyT3BlblZvaWNlOiBmdW5jdGlvbiAoZnJvbSwgb3BlbmVkKXsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJmcm9tIG9wZW46Iiwgb3BlbmVkLCAiIHZvaWNlIC4iLCBmcm9tKQogICAgfSwKICAgIG9uT3RoZXJVc2VyT3BlblZpZGVvOiBmdW5jdGlvbiAoZnJvbSwgb3BlbmVkKXsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJmcm9tIG9wZW46Iiwgb3BlbmVkLCAiIHZvaWRlbyAuIiwgZnJvbSkKICAgIH0sCgoKICAgIF9vbkFuc0M6IGZ1bmN0aW9uIChmcm9tLCBvcHRpb25zKSB7IC8vIGFuc3dlcgogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgX2xvZ2dlci5pbmZvKCJbV2ViUlRDLUFQSV0gX29uQW5zQyA6IHJlY3YgYW5zd2VyLiAiKTsKCiAgICAgICAgc2VsZi5hY2NlcHRlZCA9IHRydWU7CgogICAgICAgIG9wdGlvbnMuc2RwICYmIHNlbGYud2ViUnRjLnNldFJlbW90ZURlc2NyaXB0aW9uKG9wdGlvbnMuc2RwKTsKCiAgICAgICAgc2VsZi5zZXRSZW1vdGVTRFAgPSB0cnVlOwogICAgICAgIHNlbGYuX2hhbmRSZWN2Q2FuZHNPclNlbmQoZnJvbSwgb3B0aW9ucyk7CgoKICAgICAgICBzZWxmLl9fb25Wb2ljZU9yVmlkZW8oZnJvbSwgb3B0aW9ucyk7CiAgICB9LAoKCiAgICBfb25Jbml0QzogZnVuY3Rpb24gKGZyb20sIG9wdGlvbnMsIHJ0a2V5LCB0c3hJZCwgZnJvbVNpZCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5pc0NhbGxlciA9IGZhbHNlOwogICAgICAgIHNlbGYuYWNjZXB0ZWQgPSBmYWxzZTsKICAgICAgICBzZWxmLnNldExvY2FsU0RQID0gZmFsc2U7CiAgICAgICAgc2VsZi5zZXRSZW1vdGVTRFAgPSBmYWxzZTsKICAgICAgICBzZWxmLmhhbmd1cCA9IGZhbHNlOwoKICAgICAgICBzZWxmLmNhbGxlZSA9IGZyb207CiAgICAgICAgc2VsZi5fcnRjQ2ZnMiA9IG9wdGlvbnMucnRjQ2ZnOwogICAgICAgIHNlbGYuX3J0S2V5ID0gcnRrZXk7CiAgICAgICAgc2VsZi5fdHN4SWQgPSB0c3hJZDsKICAgICAgICBzZWxmLl9mcm9tU2lkID0gZnJvbVNpZDsKCiAgICAgICAgc2VsZi5fcnRjSWQgPSBvcHRpb25zLnJ0Y0lkOwogICAgICAgIHNlbGYuX3Nlc3NJZCA9IG9wdGlvbnMuc2Vzc0lkOwoKICAgICAgICBzZWxmLnN0cmVhbVR5cGUgPSBvcHRpb25zLnN0cmVhbVR5cGU7CgogICAgICAgIHNlbGYud2ViUnRjLmNyZWF0ZVJ0Y1BlZXJDb25uZWN0aW9uKHNlbGYuX3J0Y0NmZzIpOwoKICAgICAgICBzZWxmLmNhbGxlck5vdFByYW5zd2VyID0gKG9wdGlvbnMuZXhwciA9PT0gMCk7CiAgICAgICAgX2xvZ2dlci53YXJuKCJjYWxsZXIgbm90IHByYW5zd2VyICIsIHNlbGYuY2FsbGVyTm90UHJhbnN3ZXIpOwoKICAgICAgICBvcHRpb25zLnNkcCAmJiBfbG9nZ2VyLmRlYnVnKG9wdGlvbnMuc2RwLnNkcCk7CgogICAgICAgIG9wdGlvbnMuc2RwICYmIChzZWxmLndlYlJ0Yy5zZXRSZW1vdGVEZXNjcmlwdGlvbihvcHRpb25zLnNkcCkudGhlbihmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICBzZWxmLnNldFJlbW90ZVNEUCA9IHRydWU7CiAgICAgICAgICAgIHNlbGYuX2hhbmRSZWN2Q2FuZHNPclNlbmQoZnJvbSwgb3B0aW9ucyk7CgogICAgICAgICAgICAvKgogICAgICAgICAgICAgKiBjaHJvbWUg54mI5pysIOWkp+S6jiA1MOaXtu+8jOWPr+S7peS9v+eUqHByYW5zd2Vy44CCCiAgICAgICAgICAgICAqIOWwj+S6jjUwIOS4jeaUr+aMgXByYW5zd2Vy77yM5q2k5pe25aSE55CG6YC76L6R5piv77yM55u05o6l6L+b5YWl5oyv6ZOD54q25oCBCiAgICAgICAgICAgICAqCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBpZiAoV2ViSU0uV2ViUlRDLnN1cHBvcnRQUkFuc3dlcikgewogICAgICAgICAgICAgICAgc2VsZi53ZWJSdGMuY3JlYXRlUFJBbnN3ZXIoZnVuY3Rpb24gKHByQW5zd2VyKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb25Hb3RXZWJSdGNQUkFuc3dlcihwckFuc3dlcik7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyAvL+eUseS6jiBjaHJvbWUg5ZyoIHByYW5zd2Vy5pe277yMaWNl54q25oCB5Y+q5pivIGNoZWNraW5n77yM5bm25LiN6IO95YOPc2Rr6YKj5qC3IOacn+W+hSBjb25uZWN0ZWQg5oyv6ZOD77yb5omA5Lul55uu5YmN5pS55Li6IOWPkemAgeWujHByYW5zd2Vy5ZCO77yM55u05o6l5oyv6ZODCiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiW1dlYlJUQy1BUEldIG9uUmluZ2luZyA6IGFmdGVyIHNlbmQgcHJhbnN3ZXIuICIsIHNlbGYuY2FsbGVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblJpbmdpbmcoc2VsZi5jYWxsZWUsIHNlbGYuc3RyZWFtVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJbV2ViUlRDLUFQSV0gb25SaW5naW5nIDogQWZ0ZXIgaW5pQywgY2F1c2UgYnk6IG5vdCBzdXBwb3J0ZWQgcHJhbnN3ZXIuICIsIHNlbGYuY2FsbGVlKTsKICAgICAgICAgICAgICAgICAgICBzZWxmLm9uUmluZ2luZyhzZWxmLmNhbGxlZSwgc2VsZi5zdHJlYW1UeXBlKTsKICAgICAgICAgICAgICAgIH0sIDUwMCkKICAgICAgICAgICAgICAgIHNlbGYuX3BpbmcoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pKTsKICAgIH0sCgoKICAgIF9vbkdvdFdlYlJ0Y1BSQW5zd2VyOiBmdW5jdGlvbiAocHJBbnN3ZXIpIHsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHZhciBydCA9IG5ldyBQMlBSb3V0ZVRvKHsKICAgICAgICAgICAgLy90c3hJZDogc2VsZi5fdHN4SWQsCiAgICAgICAgICAgIHRvOiBzZWxmLmNhbGxlZSwKICAgICAgICAgICAgcnRLZXk6IHNlbGYuX3J0S2V5CiAgICAgICAgfSk7CgogICAgICAgIC8vc2VsZi5hcGkuYWNwdEMocnQsIHNlbGYuX3Nlc3NJZCwgc2VsZi5fcnRjSWQsIHByQW5zd2VyLCBudWxsLCAxKTsKICAgICAgICBzZWxmLmFwaS5hY3B0QyhydCwgc2VsZi5fc2Vzc0lkLCBzZWxmLl9ydGNJZCwgcHJBbnN3ZXIpOwoKICAgICAgICBzZWxmLnNldExvY2FsU0RQID0gdHJ1ZTsKICAgICAgICBzZWxmLl9oYW5kUmVjdkNhbmRzT3JTZW5kKCk7CgogICAgICAgIHNlbGYuX3BpbmcoKTsKICAgIH0sCgogICAgb25SaW5naW5nOiBmdW5jdGlvbiAoY2FsbGVyLCBzdHJlYW1UeXBlKSB7CiAgICB9LAoKICAgIGFjY2VwdDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQW5kU2VuZEFuc3dlcigpIHsKICAgICAgICAgICAgX2xvZ2dlci5pbmZvKCJjcmVhdGVBbmRTZW5kQW5zd2VyIDogLi4uLi4uICIpOwoKICAgICAgICAgICAgc2VsZi53ZWJSdGMuY3JlYXRlQW5zd2VyKGZ1bmN0aW9uIChhbnN3ZXIpIHsKICAgICAgICAgICAgICAgIHZhciBydCA9IG5ldyBQMlBSb3V0ZVRvKHsKICAgICAgICAgICAgICAgICAgICAvL3RzeElkOiBzZWxmLl90c3hJZCwKICAgICAgICAgICAgICAgICAgICB0bzogc2VsZi5jYWxsZWUsCiAgICAgICAgICAgICAgICAgICAgcnRLZXk6IHNlbGYuX3J0S2V5CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoV2ViSU0uV2ViUlRDLnN1cHBvcnRQUkFuc3dlcikgewogICAgICAgICAgICAgICAgICAgIGlmKHNlbGYud2ViUnRjLmlzQ29ubmVjdGVkKCkgfHwgc2VsZi5jYWxsZXJOb3RQcmFuc3dlcil7CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiW1dlYlJUQy1BUEldIGljZSBjb25uZWN0ZWQgb3IgY2FsbGVyIG5vdCBwcmFuc3dlciwgbWF5IHNlbmQgYW5zd2VyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXBpLmFuc0MocnQsIHNlbGYuX3Nlc3NJZCwgc2VsZi5fcnRjSWQsIGFuc3dlcik7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiW1dlYlJUQy1BUEldIGljZSBzdGF0ZSBub3QgY29ubmVjdGVkLCBzZW5kIGFuc3dlciB3YWl0aW5nLiIpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndlYlJ0Yy5faG9va1doZW5JQ0VSZWFkeSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dnZXIuaW5mbygiW1dlYlJUQy1BUEldIGljZSBjb25uZWN0ZWQsIHNlbmQgYW5zd2VyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFwaS5hbnNDKHJ0LCBzZWxmLl9zZXNzSWQsIHNlbGYuX3J0Y0lkLCBhbnN3ZXIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmFwaS5hY3B0QyhydCwgc2VsZi5fc2Vzc0lkLCBzZWxmLl9ydGNJZCwgYW5zd2VyLCBudWxsLCAxKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIVdlYklNLldlYlJUQy5zdXBwb3J0UFJBbnN3ZXIpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLnNldExvY2FsU0RQID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNlbGYuX2hhbmRSZWN2Q2FuZHNPclNlbmQoKTsKCiAgICAgICAgICAgICAgICBzZWxmLmFjY2VwdGVkID0gdHJ1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgY29uc3RhaW50cyA9IHsKICAgICAgICAgICAgYXVkaW86IHRydWUKICAgICAgICB9OwogICAgICAgIGlmKHNlbGYuc3RyZWFtVHlwZSA9PSAiVklERU8iKXsKICAgICAgICAgICAgY29uc3RhaW50cy52aWRlbyA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBzZWxmLndlYlJ0Yy5jcmVhdGVNZWRpYShjb25zdGFpbnRzLCBmdW5jdGlvbiAod2VicnRjLCBzdHJlYW0pIHsKICAgICAgICAgICAgd2VicnRjLnNldExvY2FsVmlkZW9TcmNPYmplY3Qoc3RyZWFtKTsKCiAgICAgICAgICAgIGNyZWF0ZUFuZFNlbmRBbnN3ZXIoKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgX2hhbmRSZWN2Q2FuZHNPclNlbmQ6IGZ1bmN0aW9uIChmcm9tLCBvcHRpb25zKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi5fb25UY2tsQyhmcm9tLCBvcHRpb25zKTsKICAgICAgICB9LCA1MCk7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLl9vbkljZUNhbmRpZGF0ZSgpOwogICAgICAgIH0sIDUwKTsKICAgIH0sCgogICAgX29uVGNrbEM6IGZ1bmN0aW9uIChmcm9tLCBvcHRpb25zKSB7IC8vIHNldFJlbW90ZVNEUO+8jOaJjeWPr+S7pea3u+WKoCDmt7vliqAg5a+55pa5IGNhbmRzCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICAvLyBvcHRpb25zLnNkcCAmJiBzZWxmLndlYlJ0Yy5zZXRSZW1vdGVEZXNjcmlwdGlvbihvcHRpb25zLnNkcCk7CgogICAgICAgIGlmIChzZWxmLnNldFJlbW90ZVNEUCkgewogICAgICAgICAgICBfbG9nZ2VyLmluZm8oIltXZWJSVEMtQVBJXSByZWN2IGFuZCBhZGQgY2FuZHMuIik7CgogICAgICAgICAgICBzZWxmLl9yZWN2Q2FuZHMgJiYgc2VsZi5fcmVjdkNhbmRzLmxlbmd0aCA+IDAgJiYgc2VsZi53ZWJSdGMuYWRkSWNlQ2FuZGlkYXRlKHNlbGYuX3JlY3ZDYW5kcyk7CiAgICAgICAgICAgIHNlbGYuX3JlY3ZDYW5kcyAmJiBzZWxmLl9yZWN2Q2FuZHMubGVuZ3RoID4gMCAmJiAoc2VsZi5fcmVjdkNhbmRzID0gW10pOwogICAgICAgICAgICBvcHRpb25zICYmIG9wdGlvbnMuY2FuZHMgJiYgc2VsZi53ZWJSdGMuYWRkSWNlQ2FuZGlkYXRlKG9wdGlvbnMuY2FuZHMpOwogICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNhbmRzICYmIG9wdGlvbnMuY2FuZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMuY2FuZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIChzZWxmLl9yZWN2Q2FuZHMgfHwgKHNlbGYuX3JlY3ZDYW5kcyA9IFtdKSkucHVzaChvcHRpb25zLmNhbmRzW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKCJbX29uVGNrbENdIHRlbXBvcmFyeSBtZW1vcnlbcmVjdl0gaWNlIGNhbmRpZGF0ZS4gdXRpbCBzZXRSZW1vdGVTRFAgPSB0cnVlIik7CiAgICAgICAgfQogICAgfSwKCiAgICBfb25JY2VTdGF0ZUNoYW5nZTogZnVuY3Rpb24gKGljZVN0YXRlKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIF9sb2dnZXIuZGVidWcoIltXZWJSVEMtQVBJXSBpY2Ugc3RhdGUgaXMgIiArIGljZVN0YXRlKTsKCiAgICAgICAgaWYoc2VsZi53ZWJSdGMuaXNDb25uZWN0ZWQoKSl7IC8v5Ye65Y+RaG9vawogICAgICAgICAgICBzZWxmLndlYlJ0Yy5faG9va1doZW5JQ0VSZWFkeSAmJiBzZWxmLndlYlJ0Yy5faG9va1doZW5JQ0VSZWFkeSgpOwogICAgICAgICAgICBzZWxmLndlYlJ0Yy5faG9va1doZW5JQ0VSZWFkeSA9IHVuZGVmaW5lZDsKICAgICAgICB9CgogICAgICAgIGlmKGljZVN0YXRlID09PSAiY2xvc2VkIil7CiAgICAgICAgICAgIHNlbGYuc2V0TG9jYWxTRFAgPSBmYWxzZTsKICAgICAgICAgICAgc2VsZi5zZXRSZW1vdGVTRFAgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHNlbGYuYXBpLm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlKGljZVN0YXRlKTsKICAgIH0sCgogICAgX29uSWNlQ2FuZGlkYXRlOiBmdW5jdGlvbiAoX2NhbmRpZGF0ZSkgeyAvL+WcqOacrOWcsHNkcCBzZXQg5Y+R6YCB5a6M5oiQ5ZCO77yM5Y+R6YCBIGNhbmRzCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBpZiAoc2VsZi5zZXRMb2NhbFNEUCkgewogICAgICAgICAgICBmdW5jdGlvbiBzZW5kSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSkgewogICAgICAgICAgICAgICAgX2xvZ2dlci5kZWJ1Zygic2VuZCBpY2UgY2FuZGlkYXRlLi4uIik7CgogICAgICAgICAgICAgICAgdmFyIHJ0ID0gbmV3IFAyUFJvdXRlVG8oewogICAgICAgICAgICAgICAgICAgIHRvOiBzZWxmLmNhbGxlZSwKICAgICAgICAgICAgICAgICAgICBydEtleTogc2VsZi5fcnRLZXkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGUpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmFwaS50Y2tsQyhydCwgc2VsZi5fc2Vzc0lkLCBzZWxmLl9ydGNJZCwgbnVsbCwgY2FuZGlkYXRlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHNlbGYuX2NhbmRzICYmIHNlbGYuX2NhbmRzLmxlbmd0aCA+IDApIHsKCiAgICAgICAgICAgICAgICBzZW5kSWNlQ2FuZGlkYXRlKHNlbGYuX2NhbmRzKTsKCiAgICAgICAgICAgICAgICBzZWxmLl9jYW5kcyA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jYW5kaWRhdGUgJiYgc2VuZEljZUNhbmRpZGF0ZShfY2FuZGlkYXRlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfY2FuZGlkYXRlICYmIChzZWxmLl9jYW5kcyB8fCAoc2VsZi5fY2FuZHMgPSBbXSkpLnB1c2goX2NhbmRpZGF0ZSk7CiAgICAgICAgICAgIF9sb2dnZXIuZGVidWcoIltfb25JY2VDYW5kaWRhdGVdIHRlbXBvcmFyeSBtZW1vcnlbc2VuZF0gaWNlIGNhbmRpZGF0ZS4gdXRpbCBzZXRMb2NhbFNEUCA9IHRydWUiKTsKICAgICAgICB9CiAgICB9LAoKCiAgICBfX3Rlcm1DYWxsMTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgc2VsZi5fcGluZ0ludGVydmFsSWQgJiYgd2luZG93LmNsZWFySW50ZXJ2YWwoc2VsZi5fcGluZ0ludGVydmFsSWQpOwoKICAgICAgICB2YXIgcnQgPSBuZXcgUDJQUm91dGVUbyh7CiAgICAgICAgICAgIHRvOiBzZWxmLmNhbGxlZSwKICAgICAgICAgICAgcnRLZXk6IHNlbGYuX3J0S2V5CiAgICAgICAgfSk7CgogICAgICAgIHZhciBzZW5kUmVhc29uOwogICAgICAgIHJlYXNvbiB8fCAoIXNlbGYuaXNDYWxsZXIgJiYgIXNlbGYuYWNjZXB0ZWQgJiYgKHNlbmRSZWFzb24gPSAnZGVjbGluZScpKSB8fCAoc2VuZFJlYXNvbiA9ICdzdWNjZXNzJyk7CgogICAgICAgIHNlbGYuaGFuZ3VwIHx8IHNlbGYuYXBpLnRlcm1DKHJ0LCBzZWxmLl9zZXNzSWQsIHNlbGYuX3J0Y0lkLCBzZW5kUmVhc29uKTsKCiAgICAgICAgc2VsZi53ZWJSdGMuY2xvc2UoKTsKCiAgICAgICAgc2VsZi5oYW5ndXAgPSB0cnVlOwoKICAgICAgICBzZWxmLnNldExvY2FsU0RQID0gZmFsc2U7CiAgICAgICAgc2VsZi5zZXRSZW1vdGVTRFAgPSBmYWxzZTsKCiAgICAgICAgc2VsZi5vblRlcm1DYWxsKHJlYXNvbik7CiAgICB9LAoKICAgIHRlcm1DYWxsOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHRyeXsKICAgICAgICAgICAgc2VsZi5fX3Rlcm1DYWxsMShyZWFzb24pOwogICAgICAgIH1maW5hbGx5ewogICAgICAgICAgICBpZihXZWJJTS5fX2FscmVhZHlPcGVuTWVkaWFzICYmIFdlYklNLl9fYWxyZWFkeU9wZW5NZWRpYXMubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICBmb3IodmFyIGluZGV4IGluIFdlYklNLl9fYWxyZWFkeU9wZW5NZWRpYXMpewogICAgICAgICAgICAgICAgICAgIHZhciBzdHJlYW0gPSBXZWJJTS5fX2FscmVhZHlPcGVuTWVkaWFzW2luZGV4XTsKICAgICAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgICAgIGVtZWRpYS5zdG9wVHJhY2tzKHN0cmVhbSk7CiAgICAgICAgICAgICAgICAgICAgfWNhdGNoKGUpewoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgV2ViSU0uX19hbHJlYWR5T3Blbk1lZGlhcyA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gZnJvbQogICAgICogQHBhcmFtIG9wdGlvbnMKICAgICAqIEBwYXJhbSBvcHRpb25zLnJlYXNvbgogICAgICogICAgICAgICAgICAgICAib2siICAgICAgLT4gJ0hBTkdVUCcgICAgICJzdWNjZXNzIiAtPiAnSEFOR1VQJyAgICJ0aW1lb3V0IiAgICAgICAgICAtPiAnTk9SRVNQT05TRScKICAgICAqICAgICAgICAgICAgICAgImRlY2xpbmUiIC0+ICdSRUpFQ1QnICAgICAiYnVzeSIgICAgLT4gJ0JVU1knICAgICAiZmFpbGVkLXRyYW5zcG9ydCIgLT4gJ0ZBSUwnCiAgICAgKiBAcHJpdmF0ZQogICAgICovCiAgICBfb25UZXJtQzogZnVuY3Rpb24gKGZyb20sIG9wdGlvbnMpIHsKICAgICAgICBfbG9nZ2VyLmRlYnVnKCJbX29uVGVybUNdIG9wdGlvbnMucmVhc29uID0gIiArIG9wdGlvbnMucmVhc29uKTsKCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBzZWxmLmhhbmd1cCA9IHRydWU7CgogICAgICAgIHNlbGYuc2V0TG9jYWxTRFAgPSBmYWxzZTsKICAgICAgICBzZWxmLnNldFJlbW90ZVNEUCA9IGZhbHNlOwoKICAgICAgICBzZWxmLnRlcm1DYWxsKG9wdGlvbnMucmVhc29uKTsKCiAgICB9LAoKICAgIG9uVGVybUNhbGw6IGZ1bmN0aW9uICgpIHsKICAgICAgICAvL3RvIGJlIG92ZXJ3cml0ZWQgYnkgY2FsbC5saXN0ZW5lci5vblRlcm1DYWxsCiAgICB9Cn07Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpbml0Q29uZmlncykgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIF91dGlsLmV4dGVuZCh0cnVlLCB0aGlzLCBDb21tb25QYXR0ZXJuLCBpbml0Q29uZmlncyB8fCB7fSk7CgogICAgc2VsZi5pbml0KCk7Cn07CgovKioKICogVE9ETzogQ29uZmVyZW5jZQogKi8KCgovKioqLyB9KQovKioqKioqLyBdKTs=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="6177062" offset="0" length="16384" />
          <PacketInfo time="6177421" offset="16384" length="16384" />
          <PacketInfo time="6177578" offset="32768" length="16384" />
          <PacketInfo time="6178375" offset="49152" length="16384" />
          <PacketInfo time="6178656" offset="65536" length="16384" />
          <PacketInfo time="6178796" offset="81920" length="16384" />
          <PacketInfo time="6178890" offset="98304" length="16384" />
          <PacketInfo time="6179109" offset="114688" length="16384" />
          <PacketInfo time="6179234" offset="131072" length="16384" />
          <PacketInfo time="6179296" offset="147456" length="16384" />
          <PacketInfo time="6180421" offset="163840" length="16384" />
          <PacketInfo time="6180484" offset="180224" length="16384" />
          <PacketInfo time="6180562" offset="196608" length="16384" />
          <PacketInfo time="6181437" offset="212992" length="16384" />
          <PacketInfo time="6181453" offset="229376" length="16384" />
          <PacketInfo time="6181468" offset="245760" length="16384" />
          <PacketInfo time="6181546" offset="262144" length="16384" />
          <PacketInfo time="6181609" offset="278528" length="16384" />
          <PacketInfo time="6181843" offset="294912" length="16384" />
          <PacketInfo time="6181890" offset="311296" length="16384" />
          <PacketInfo time="6182031" offset="327680" length="16384" />
          <PacketInfo time="6182031" offset="344064" length="16384" />
          <PacketInfo time="6182687" offset="360448" length="16384" />
          <PacketInfo time="6182750" offset="376832" length="16384" />
          <PacketInfo time="6182859" offset="393216" length="16384" />
          <PacketInfo time="6183546" offset="409600" length="16384" />
          <PacketInfo time="6183578" offset="425984" length="16384" />
          <PacketInfo time="6183593" offset="442368" length="16384" />
          <PacketInfo time="6183609" offset="458752" length="16384" />
          <PacketInfo time="6183609" offset="475136" length="16384" />
          <PacketInfo time="6183609" offset="491520" length="16384" />
          <PacketInfo time="6183625" offset="507904" length="16384" />
          <PacketInfo time="6183625" offset="524288" length="16384" />
          <PacketInfo time="6183656" offset="540672" length="16384" />
          <PacketInfo time="6183703" offset="557056" length="16384" />
          <PacketInfo time="6183765" offset="573440" length="16384" />
          <PacketInfo time="6183828" offset="589824" length="16384" />
          <PacketInfo time="6183906" offset="606208" length="16384" />
          <PacketInfo time="6184031" offset="622592" length="16384" />
          <PacketInfo time="6184078" offset="638976" length="16384" />
          <PacketInfo time="6184140" offset="655360" length="16384" />
          <PacketInfo time="6184218" offset="671744" length="16384" />
          <PacketInfo time="6184343" offset="688128" length="16384" />
          <PacketInfo time="6184390" offset="704512" length="16384" />
          <PacketInfo time="6184468" offset="720896" length="16384" />
          <PacketInfo time="6184531" offset="737280" length="16384" />
          <PacketInfo time="6184593" offset="753664" length="16384" />
          <PacketInfo time="6184640" offset="770048" length="16384" />
          <PacketInfo time="6184687" offset="786432" length="16384" />
          <PacketInfo time="6184843" offset="802816" length="16384" />
          <PacketInfo time="6184890" offset="819200" length="16384" />
          <PacketInfo time="6184937" offset="835584" length="16384" />
          <PacketInfo time="6185015" offset="851968" length="16384" />
          <PacketInfo time="6185093" offset="868352" length="16384" />
          <PacketInfo time="6185125" offset="884736" length="16384" />
          <PacketInfo time="6185171" offset="901120" length="16384" />
          <PacketInfo time="6185203" offset="917504" length="16384" />
          <PacketInfo time="6185234" offset="933888" length="16384" />
          <PacketInfo time="6185265" offset="950272" length="16384" />
          <PacketInfo time="6185296" offset="966656" length="16384" />
          <PacketInfo time="6185312" offset="983040" length="16384" />
          <PacketInfo time="6185328" offset="999424" length="16384" />
          <PacketInfo time="6185359" offset="1015808" length="16384" />
          <PacketInfo time="6185484" offset="1032192" length="16384" />
          <PacketInfo time="6185484" offset="1048576" length="16384" />
          <PacketInfo time="6185484" offset="1064960" length="16384" />
          <PacketInfo time="6185484" offset="1081344" length="16384" />
          <PacketInfo time="6185484" offset="1097728" length="16384" />
          <PacketInfo time="6185484" offset="1114112" length="16384" />
          <PacketInfo time="6185484" offset="1130496" length="16384" />
          <PacketInfo time="6185500" offset="1146880" length="16384" />
          <PacketInfo time="6185500" offset="1163264" length="16384" />
          <PacketInfo time="6185500" offset="1179648" length="16384" />
          <PacketInfo time="6185500" offset="1196032" length="16384" />
          <PacketInfo time="6185515" offset="1212416" length="16384" />
          <PacketInfo time="6185515" offset="1228800" length="16384" />
          <PacketInfo time="6185515" offset="1245184" length="16384" />
          <PacketInfo time="6185515" offset="1261568" length="16384" />
          <PacketInfo time="6185515" offset="1277952" length="16384" />
          <PacketInfo time="6185515" offset="1294336" length="16384" />
          <PacketInfo time="6185531" offset="1310720" length="16384" />
          <PacketInfo time="6185531" offset="1327104" length="16384" />
          <PacketInfo time="6185531" offset="1343488" length="16384" />
          <PacketInfo time="6185531" offset="1359872" length="16384" />
          <PacketInfo time="6185531" offset="1376256" length="16384" />
          <PacketInfo time="6185531" offset="1392640" length="16384" />
          <PacketInfo time="6185531" offset="1409024" length="16384" />
          <PacketInfo time="6185531" offset="1425408" length="16384" />
          <PacketInfo time="6185546" offset="1441792" length="16384" />
          <PacketInfo time="6185546" offset="1458176" length="4008" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="10676" hostname="center.t.dacube.cn" path="/static/js/chunk-elementUI.f028abeb.js" url="https://center.t.dacube.cn/static/js/chunk-elementUI.f028abeb.js" ip="139.9.5.231" port="443" connectionId="8" origin="HTML" frame="1" startDateTime="2019-04-16T14:14:16.926+08:00" startTime="6176156" endTime="6177421">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2VudGVyLnQuZGFjdWJlLmNu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2Mjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24v</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>emgtQ04semg7cT0wLjg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdGF0aWMvanMvY2h1bmstZWxlbWVudFVJLmYwMjhhYmViLmpzIEhUVFAvMS4xDQpIb3N0OiBjZW50ZXIudC5kYWN1YmUuY24NCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNTYuMC4yOTI0LjkwIFNhZmFyaS81MzcuMzYgMjM0NUV4cGxvcmVyLzkuNi4wLjE4NjI3DQpBY2NlcHQ6ICovKg0KUmVmZXJlcjogaHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24vDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IHpoLUNOLHpoO3E9MC44DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>695958</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xMi4y</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Njk1OTU4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjVjYWViMjRhLWE5ZTk2Ig==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuMTIuMg0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDY5NTk1OA0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KTGFzdC1Nb2RpZmllZDogVGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQNCkVUYWc6ICI1Y2FlYjI0YS1hOWU5NiINCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>KHdpbmRvdy53ZWJwYWNrSnNvbnA9d2luZG93LndlYnBhY2tKc29ucHx8W10pLnB1c2goW1siY2h1bmstZWxlbWVudFVJIl0seyIwNWMrIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwLGV4cG9ydHMuaXNEZWY9ZnVuY3Rpb24odmFsKXtyZXR1cm4gbnVsbCE9dmFsfSxleHBvcnRzLmlzS29yZWFuPWZ1bmN0aW9uKHRleHQpe3JldHVybi8oWyhcdUFDMDAtXHVEN0FGKXwoXHUzMTMwLVx1MzE4RildKSsvZ2kudGVzdCh0ZXh0KX19LCIwQkRIIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwLGV4cG9ydHMuZGVmYXVsdD17bWV0aG9kczp7ZGlzcGF0Y2g6ZnVuY3Rpb24oY29tcG9uZW50TmFtZSxldmVudE5hbWUscGFyYW1zKXtmb3IodmFyIHBhcmVudD10aGlzLiRwYXJlbnR8fHRoaXMuJHJvb3QsbmFtZT1wYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZTtwYXJlbnQmJighbmFtZXx8bmFtZSE9PWNvbXBvbmVudE5hbWUpOykocGFyZW50PXBhcmVudC4kcGFyZW50KSYmKG5hbWU9cGFyZW50LiRvcHRpb25zLmNvbXBvbmVudE5hbWUpO3BhcmVudCYmcGFyZW50LiRlbWl0LmFwcGx5KHBhcmVudCxbZXZlbnROYW1lXS5jb25jYXQocGFyYW1zKSl9LGJyb2FkY2FzdDpmdW5jdGlvbihjb21wb25lbnROYW1lLGV2ZW50TmFtZSxwYXJhbXMpeyhmdW5jdGlvbiBfYnJvYWRjYXN0KGNvbXBvbmVudE5hbWUsZXZlbnROYW1lLHBhcmFtcyl7dGhpcy4kY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCl7Y2hpbGQuJG9wdGlvbnMuY29tcG9uZW50TmFtZT09PWNvbXBvbmVudE5hbWU/Y2hpbGQuJGVtaXQuYXBwbHkoY2hpbGQsW2V2ZW50TmFtZV0uY29uY2F0KHBhcmFtcykpOl9icm9hZGNhc3QuYXBwbHkoY2hpbGQsW2NvbXBvbmVudE5hbWUsZXZlbnROYW1lXS5jb25jYXQoW3BhcmFtc10pKX0pfSkuY2FsbCh0aGlzLGNvbXBvbmVudE5hbWUsZXZlbnROYW1lLHBhcmFtcyl9fX19LCIxOUZTIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyFmdW5jdGlvbihtYWluKXt2YXIgZmVjaGE9e30sdG9rZW49L2R7MSw0fXxNezEsNH18eXkoPzp5eSk/fFN7MSwzfXxEb3xaWnwoW0hoTXNEbV0pXDE/fFthQV18IlteIl0qInwnW14nXSonL2csdHdvRGlnaXRzPS9cZFxkPy8sd29yZD0vWzAtOV0qWydhLXpcdTAwQTAtXHUwNUZGXHUwNzAwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSt8W1x1MDYwMC1cdTA2RkZcL10rKFxzKj9bXHUwNjAwLVx1MDZGRl0rKXsxLDJ9L2ksbm9vcD1mdW5jdGlvbigpe307ZnVuY3Rpb24gc2hvcnRlbihhcnIsc0xlbil7Zm9yKHZhciBuZXdBcnI9W10saT0wLGxlbj1hcnIubGVuZ3RoO2k8bGVuO2krKyluZXdBcnIucHVzaChhcnJbaV0uc3Vic3RyKDAsc0xlbikpO3JldHVybiBuZXdBcnJ9ZnVuY3Rpb24gbW9udGhVcGRhdGUoYXJyTmFtZSl7cmV0dXJuIGZ1bmN0aW9uKGQsdixpMThuKXt2YXIgaW5kZXg9aTE4blthcnJOYW1lXS5pbmRleE9mKHYuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdi5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKSk7fmluZGV4JiYoZC5tb250aD1pbmRleCl9fWZ1bmN0aW9uIHBhZCh2YWwsbGVuKXtmb3IodmFsPVN0cmluZyh2YWwpLGxlbj1sZW58fDI7dmFsLmxlbmd0aDxsZW47KXZhbD0iMCIrdmFsO3JldHVybiB2YWx9dmFyIGRheU5hbWVzPVsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSxtb250aE5hbWVzPVsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSxtb250aE5hbWVzU2hvcnQ9c2hvcnRlbihtb250aE5hbWVzLDMpLGRheU5hbWVzU2hvcnQ9c2hvcnRlbihkYXlOYW1lcywzKTtmZWNoYS5pMThuPXtkYXlOYW1lc1Nob3J0OmRheU5hbWVzU2hvcnQsZGF5TmFtZXM6ZGF5TmFtZXMsbW9udGhOYW1lc1Nob3J0Om1vbnRoTmFtZXNTaG9ydCxtb250aE5hbWVzOm1vbnRoTmFtZXMsYW1QbTpbImFtIiwicG0iXSxEb0ZuOmZ1bmN0aW9uKEQpe3JldHVybiBEK1sidGgiLCJzdCIsIm5kIiwicmQiXVszPEQlMTA/MDooRC1EJTEwIT0xMCkqRCUxMF19fTt2YXIgZm9ybWF0RmxhZ3M9e0Q6ZnVuY3Rpb24oZGF0ZU9iail7cmV0dXJuIGRhdGVPYmouZ2V0RGF5KCl9LEREOmZ1bmN0aW9uKGRhdGVPYmope3JldHVybiBwYWQoZGF0ZU9iai5nZXREYXkoKSl9LERvOmZ1bmN0aW9uKGRhdGVPYmosaTE4bil7cmV0dXJuIGkxOG4uRG9GbihkYXRlT2JqLmdldERhdGUoKSl9LGQ6ZnVuY3Rpb24oZGF0ZU9iail7cmV0dXJuIGRhdGVPYmouZ2V0RGF0ZSgpfSxkZDpmdW5jdGlvbihkYXRlT2JqKXtyZXR1cm4gcGFkKGRhdGVPYmouZ2V0RGF0ZSgpKX0sZGRkOmZ1bmN0aW9uKGRhdGVPYmosaTE4bil7cmV0dXJuIGkxOG4uZGF5TmFtZXNTaG9ydFtkYXRlT2JqLmdldERheSgpXX0sZGRkZDpmdW5jdGlvbihkYXRlT2JqLGkxOG4pe3JldHVybiBpMThuLmRheU5hbWVzW2RhdGVPYmouZ2V0RGF5KCldfSxNOmZ1bmN0aW9uKGRhdGVPYmope3JldHVybiBkYXRlT2JqLmdldE1vbnRoKCkrMX0sTU06ZnVuY3Rpb24oZGF0ZU9iail7cmV0dXJuIHBhZChkYXRlT2JqLmdldE1vbnRoKCkrMSl9LE1NTTpmdW5jdGlvbihkYXRlT2JqLGkxOG4pe3JldHVybiBpMThuLm1vbnRoTmFtZXNTaG9ydFtkYXRlT2JqLmdldE1vbnRoKCldfSxNTU1NOmZ1bmN0aW9uKGRhdGVPYmosaTE4bil7cmV0dXJuIGkxOG4ubW9udGhOYW1lc1tkYXRlT2JqLmdldE1vbnRoKCldfSx5eTpmdW5jdGlvbihkYXRlT2JqKXtyZXR1cm4gU3RyaW5nKGRhdGVPYmouZ2V0RnVsbFllYXIoKSkuc3Vic3RyKDIpfSx5eXl5OmZ1bmN0aW9uKGRhdGVPYmope3JldHVybiBkYXRlT2JqLmdldEZ1bGxZZWFyKCl9LGg6ZnVuY3Rpb24oZGF0ZU9iail7cmV0dXJuIGRhdGVPYmouZ2V0SG91cnMoKSUxMnx8MTJ9LGhoOmZ1bmN0aW9uKGRhdGVPYmope3JldHVybiBwYWQoZGF0ZU9iai5nZXRIb3VycygpJTEyfHwxMil9LEg6ZnVuY3Rpb24oZGF0ZU9iail7cmV0dXJuIGRhdGVPYmouZ2V0SG91cnMoKX0sSEg6ZnVuY3Rpb24oZGF0ZU9iail7cmV0dXJuIHBhZChkYXRlT2JqLmdldEhvdXJzKCkpfSxtOmZ1bmN0aW9uKGRhdGVPYmope3JldHVybiBkYXRlT2JqLmdldE1pbnV0ZXMoKX0sbW06ZnVuY3Rpb24oZGF0ZU9iail7cmV0dXJuIHBhZChkYXRlT2JqLmdldE1pbnV0ZXMoKSl9LHM6ZnVuY3Rpb24oZGF0ZU9iail7cmV0dXJuIGRhdGVPYmouZ2V0U2Vjb25kcygpfSxzczpmdW5jdGlvbihkYXRlT2JqKXtyZXR1cm4gcGFkKGRhdGVPYmouZ2V0U2Vjb25kcygpKX0sUzpmdW5jdGlvbihkYXRlT2JqKXtyZXR1cm4gTWF0aC5yb3VuZChkYXRlT2JqLmdldE1pbGxpc2Vjb25kcygpLzEwMCl9LFNTOmZ1bmN0aW9uKGRhdGVPYmope3JldHVybiBwYWQoTWF0aC5yb3VuZChkYXRlT2JqLmdldE1pbGxpc2Vjb25kcygpLzEwKSwyKX0sU1NTOmZ1bmN0aW9uKGRhdGVPYmope3JldHVybiBwYWQoZGF0ZU9iai5nZXRNaWxsaXNlY29uZHMoKSwzKX0sYTpmdW5jdGlvbihkYXRlT2JqLGkxOG4pe3JldHVybiBkYXRlT2JqLmdldEhvdXJzKCk8MTI/aTE4bi5hbVBtWzBdOmkxOG4uYW1QbVsxXX0sQTpmdW5jdGlvbihkYXRlT2JqLGkxOG4pe3JldHVybiBkYXRlT2JqLmdldEhvdXJzKCk8MTI/aTE4bi5hbVBtWzBdLnRvVXBwZXJDYXNlKCk6aTE4bi5hbVBtWzFdLnRvVXBwZXJDYXNlKCl9LFpaOmZ1bmN0aW9uKGRhdGVPYmope3ZhciBvPWRhdGVPYmouZ2V0VGltZXpvbmVPZmZzZXQoKTtyZXR1cm4oMDxvPyItIjoiKyIpK3BhZCgxMDAqTWF0aC5mbG9vcihNYXRoLmFicyhvKS82MCkrTWF0aC5hYnMobyklNjAsNCl9fSxwYXJzZUZsYWdzPXtkOlt0d29EaWdpdHMsZnVuY3Rpb24oZCx2KXtkLmRheT12fV0sTTpbdHdvRGlnaXRzLGZ1bmN0aW9uKGQsdil7ZC5tb250aD12LTF9XSx5eTpbdHdvRGlnaXRzLGZ1bmN0aW9uKGQsdil7dmFyIGNlbnQ9KygiIisobmV3IERhdGUpLmdldEZ1bGxZZWFyKCkpLnN1YnN0cigwLDIpO2QueWVhcj0iIisoNjg8dj9jZW50LTE6Y2VudCkrdn1dLGg6W3R3b0RpZ2l0cyxmdW5jdGlvbihkLHYpe2QuaG91cj12fV0sbTpbdHdvRGlnaXRzLGZ1bmN0aW9uKGQsdil7ZC5taW51dGU9dn1dLHM6W3R3b0RpZ2l0cyxmdW5jdGlvbihkLHYpe2Quc2Vjb25kPXZ9XSx5eXl5OlsvXGR7NH0vLGZ1bmN0aW9uKGQsdil7ZC55ZWFyPXZ9XSxTOlsvXGQvLGZ1bmN0aW9uKGQsdil7ZC5taWxsaXNlY29uZD0xMDAqdn1dLFNTOlsvXGR7Mn0vLGZ1bmN0aW9uKGQsdil7ZC5taWxsaXNlY29uZD0xMCp2fV0sU1NTOlsvXGR7M30vLGZ1bmN0aW9uKGQsdil7ZC5taWxsaXNlY29uZD12fV0sRDpbdHdvRGlnaXRzLG5vb3BdLGRkZDpbd29yZCxub29wXSxNTU06W3dvcmQsbW9udGhVcGRhdGUoIm1vbnRoTmFtZXNTaG9ydCIpXSxNTU1NOlt3b3JkLG1vbnRoVXBkYXRlKCJtb250aE5hbWVzIildLGE6W3dvcmQsZnVuY3Rpb24oZCx2LGkxOG4pe3ZhciB2YWw9di50b0xvd2VyQ2FzZSgpO3ZhbD09PWkxOG4uYW1QbVswXT9kLmlzUG09ITE6dmFsPT09aTE4bi5hbVBtWzFdJiYoZC5pc1BtPSEwKX1dLFpaOlsvW1wrXC1dXGRcZDo/XGRcZC8sZnVuY3Rpb24oZCx2KXt2YXIgbWludXRlcyxwYXJ0cz0odisiIikubWF0Y2goLyhbXCtcLV18XGRcZCkvZ2kpO3BhcnRzJiYobWludXRlcz02MCpwYXJ0c1sxXStwYXJzZUludChwYXJ0c1syXSwxMCksZC50aW1lem9uZU9mZnNldD0iKyI9PT1wYXJ0c1swXT9taW51dGVzOi1taW51dGVzKX1dfTtwYXJzZUZsYWdzLkREPXBhcnNlRmxhZ3MuRCxwYXJzZUZsYWdzLmRkZGQ9cGFyc2VGbGFncy5kZGQscGFyc2VGbGFncy5Ebz1wYXJzZUZsYWdzLmRkPXBhcnNlRmxhZ3MuZCxwYXJzZUZsYWdzLm1tPXBhcnNlRmxhZ3MubSxwYXJzZUZsYWdzLmhoPXBhcnNlRmxhZ3MuSD1wYXJzZUZsYWdzLkhIPXBhcnNlRmxhZ3MuaCxwYXJzZUZsYWdzLk1NPXBhcnNlRmxhZ3MuTSxwYXJzZUZsYWdzLnNzPXBhcnNlRmxhZ3MucyxwYXJzZUZsYWdzLkE9cGFyc2VGbGFncy5hLGZlY2hhLm1hc2tzPXtkZWZhdWx0OiJkZGQgTU1NIGRkIHl5eXkgSEg6bW06c3MiLHNob3J0RGF0ZToiTS9EL3l5IixtZWRpdW1EYXRlOiJNTU0gZCwgeXl5eSIsbG9uZ0RhdGU6Ik1NTU0gZCwgeXl5eSIsZnVsbERhdGU6ImRkZGQsIE1NTU0gZCwgeXl5eSIsc2hvcnRUaW1lOiJISDptbSIsbWVkaXVtVGltZToiSEg6bW06c3MiLGxvbmdUaW1lOiJISDptbTpzcy5TU1MifSxmZWNoYS5mb3JtYXQ9ZnVuY3Rpb24oZGF0ZU9iaixtYXNrLGkxOG5TZXR0aW5ncyl7dmFyIGkxOG49aTE4blNldHRpbmdzfHxmZWNoYS5pMThuO2lmKCJudW1iZXIiPT10eXBlb2YgZGF0ZU9iaiYmKGRhdGVPYmo9bmV3IERhdGUoZGF0ZU9iaikpLCJbb2JqZWN0IERhdGVdIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkYXRlT2JqKXx8aXNOYU4oZGF0ZU9iai5nZXRUaW1lKCkpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBEYXRlIGluIGZlY2hhLmZvcm1hdCIpO3JldHVybihtYXNrPWZlY2hhLm1hc2tzW21hc2tdfHxtYXNrfHxmZWNoYS5tYXNrcy5kZWZhdWx0KS5yZXBsYWNlKHRva2VuLGZ1bmN0aW9uKCQwKXtyZXR1cm4gJDAgaW4gZm9ybWF0RmxhZ3M/Zm9ybWF0RmxhZ3NbJDBdKGRhdGVPYmosaTE4bik6JDAuc2xpY2UoMSwkMC5sZW5ndGgtMSl9KX0sZmVjaGEucGFyc2U9ZnVuY3Rpb24oZGF0ZVN0cixmb3JtYXQsaTE4blNldHRpbmdzKXt2YXIgaTE4bj1pMThuU2V0dGluZ3N8fGZlY2hhLmkxOG47aWYoInN0cmluZyIhPXR5cGVvZiBmb3JtYXQpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGZvcm1hdCBpbiBmZWNoYS5wYXJzZSIpO2lmKGZvcm1hdD1mZWNoYS5tYXNrc1tmb3JtYXRdfHxmb3JtYXQsMWUzPGRhdGVTdHIubGVuZ3RoKXJldHVybiExO3ZhciBpc1ZhbGlkPSEwLGRhdGVJbmZvPXt9O2lmKGZvcm1hdC5yZXBsYWNlKHRva2VuLGZ1bmN0aW9uKCQwKXtpZihwYXJzZUZsYWdzWyQwXSl7dmFyIGluZm89cGFyc2VGbGFnc1skMF0saW5kZXg9ZGF0ZVN0ci5zZWFyY2goaW5mb1swXSk7fmluZGV4P2RhdGVTdHIucmVwbGFjZShpbmZvWzBdLGZ1bmN0aW9uKHJlc3VsdCl7cmV0dXJuIGluZm9bMV0oZGF0ZUluZm8scmVzdWx0LGkxOG4pLGRhdGVTdHI9ZGF0ZVN0ci5zdWJzdHIoaW5kZXgrcmVzdWx0Lmxlbmd0aCkscmVzdWx0fSk6aXNWYWxpZD0hMX1yZXR1cm4gcGFyc2VGbGFnc1skMF0/IiI6JDAuc2xpY2UoMSwkMC5sZW5ndGgtMSl9KSwhaXNWYWxpZClyZXR1cm4hMTt2YXIgdG9kYXk9bmV3IERhdGU7cmV0dXJuITA9PT1kYXRlSW5mby5pc1BtJiZudWxsIT1kYXRlSW5mby5ob3VyJiYxMiE9K2RhdGVJbmZvLmhvdXI/ZGF0ZUluZm8uaG91cj0rZGF0ZUluZm8uaG91cisxMjohMT09PWRhdGVJbmZvLmlzUG0mJjEyPT0rZGF0ZUluZm8uaG91ciYmKGRhdGVJbmZvLmhvdXI9MCksbnVsbCE9ZGF0ZUluZm8udGltZXpvbmVPZmZzZXQ/KGRhdGVJbmZvLm1pbnV0ZT0rKGRhdGVJbmZvLm1pbnV0ZXx8MCktK2RhdGVJbmZvLnRpbWV6b25lT2Zmc2V0LG5ldyBEYXRlKERhdGUuVVRDKGRhdGVJbmZvLnllYXJ8fHRvZGF5LmdldEZ1bGxZZWFyKCksZGF0ZUluZm8ubW9udGh8fDAsZGF0ZUluZm8uZGF5fHwxLGRhdGVJbmZvLmhvdXJ8fDAsZGF0ZUluZm8ubWludXRlfHwwLGRhdGVJbmZvLnNlY29uZHx8MCxkYXRlSW5mby5taWxsaXNlY29uZHx8MCkpKTpuZXcgRGF0ZShkYXRlSW5mby55ZWFyfHx0b2RheS5nZXRGdWxsWWVhcigpLGRhdGVJbmZvLm1vbnRofHwwLGRhdGVJbmZvLmRheXx8MSxkYXRlSW5mby5ob3VyfHwwLGRhdGVJbmZvLm1pbnV0ZXx8MCxkYXRlSW5mby5zZWNvbmR8fDAsZGF0ZUluZm8ubWlsbGlzZWNvbmR8fDApfSx2b2lkIDAhPT1tb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWZlY2hhOnZvaWQgMD09PShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXz1mdW5jdGlvbigpe3JldHVybiBmZWNoYX0uY2FsbChleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18sZXhwb3J0cyxtb2R1bGUpKXx8KG1vZHVsZS5leHBvcnRzPV9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKX0oKX0sIjNOd2QiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG1vZHVsZXMpe3ZhciBpbnN0YWxsZWRNb2R1bGVzPXt9O2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpe2lmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO3ZhciBtb2R1bGU9aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF09e2k6bW9kdWxlSWQsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cyxtb2R1bGUsbW9kdWxlLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksbW9kdWxlLmw9ITAsbW9kdWxlLmV4cG9ydHN9cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT1tb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uYz1pbnN0YWxsZWRNb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihleHBvcnRzLG5hbWUsZ2V0dGVyKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cyxuYW1lKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsbmFtZSx7ZW51bWVyYWJsZTohMCxnZXQ6Z2V0dGVyfSl9LF9fd2VicGFja19yZXF1aXJlX18ucj1mdW5jdGlvbihleHBvcnRzKXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnQ9ZnVuY3Rpb24odmFsdWUsbW9kZSl7aWYoMSZtb2RlJiYodmFsdWU9X193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSkpLDgmbW9kZSlyZXR1cm4gdmFsdWU7aWYoNCZtb2RlJiYib2JqZWN0Ij09dHlwZW9mIHZhbHVlJiZ2YWx1ZSYmdmFsdWUuX19lc01vZHVsZSlyZXR1cm4gdmFsdWU7dmFyIG5zPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnZhbHVlfSksMiZtb2RlJiYic3RyaW5nIiE9dHlwZW9mIHZhbHVlKWZvcih2YXIga2V5IGluIHZhbHVlKV9fd2VicGFja19yZXF1aXJlX18uZChucyxrZXksZnVuY3Rpb24oa2V5KXtyZXR1cm4gdmFsdWVba2V5XX0uYmluZChudWxsLGtleSkpO3JldHVybiBuc30sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKG1vZHVsZSl7dmFyIGdldHRlcj1tb2R1bGUmJm1vZHVsZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBtb2R1bGV9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCJhIixnZXR0ZXIpLGdldHRlcn0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKG9iamVjdCxwcm9wZXJ0eSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9Ii9kaXN0LyIsX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnM9NzcpfSh7MDpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50KHNjcmlwdEV4cG9ydHMscmVuZGVyLHN0YXRpY1JlbmRlckZucyxmdW5jdGlvbmFsVGVtcGxhdGUsaW5qZWN0U3R5bGVzLHNjb3BlSWQsbW9kdWxlSWRlbnRpZmllcixzaGFkb3dNb2RlKXt2YXIgaG9vayxvcHRpb25zPSJmdW5jdGlvbiI9PXR5cGVvZiBzY3JpcHRFeHBvcnRzP3NjcmlwdEV4cG9ydHMub3B0aW9uczpzY3JpcHRFeHBvcnRzO2lmKHJlbmRlciYmKG9wdGlvbnMucmVuZGVyPXJlbmRlcixvcHRpb25zLnN0YXRpY1JlbmRlckZucz1zdGF0aWNSZW5kZXJGbnMsb3B0aW9ucy5fY29tcGlsZWQ9ITApLGZ1bmN0aW9uYWxUZW1wbGF0ZSYmKG9wdGlvbnMuZnVuY3Rpb25hbD0hMCksc2NvcGVJZCYmKG9wdGlvbnMuX3Njb3BlSWQ9ImRhdGEtdi0iK3Njb3BlSWQpLG1vZHVsZUlkZW50aWZpZXI/KGhvb2s9ZnVuY3Rpb24oY29udGV4dCl7KGNvbnRleHQ9Y29udGV4dHx8dGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR8fHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC4kdm5vZGUmJnRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0KXx8InVuZGVmaW5lZCI9PXR5cGVvZiBfX1ZVRV9TU1JfQ09OVEVYVF9ffHwoY29udGV4dD1fX1ZVRV9TU1JfQ09OVEVYVF9fKSxpbmplY3RTdHlsZXMmJmluamVjdFN0eWxlcy5jYWxsKHRoaXMsY29udGV4dCksY29udGV4dCYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMmJmNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzLmFkZChtb2R1bGVJZGVudGlmaWVyKX0sb3B0aW9ucy5fc3NyUmVnaXN0ZXI9aG9vayk6aW5qZWN0U3R5bGVzJiYoaG9vaz1zaGFkb3dNb2RlP2Z1bmN0aW9uKCl7aW5qZWN0U3R5bGVzLmNhbGwodGhpcyx0aGlzLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpfTppbmplY3RTdHlsZXMpLGhvb2spaWYob3B0aW9ucy5mdW5jdGlvbmFsKXtvcHRpb25zLl9pbmplY3RTdHlsZXM9aG9vazt2YXIgb3JpZ2luYWxSZW5kZXI9b3B0aW9ucy5yZW5kZXI7b3B0aW9ucy5yZW5kZXI9ZnVuY3Rpb24oaCxjb250ZXh0KXtyZXR1cm4gaG9vay5jYWxsKGNvbnRleHQpLG9yaWdpbmFsUmVuZGVyKGgsY29udGV4dCl9fWVsc2V7dmFyIGV4aXN0aW5nPW9wdGlvbnMuYmVmb3JlQ3JlYXRlO29wdGlvbnMuYmVmb3JlQ3JlYXRlPWV4aXN0aW5nP1tdLmNvbmNhdChleGlzdGluZyxob29rKTpbaG9va119cmV0dXJue2V4cG9ydHM6c2NyaXB0RXhwb3J0cyxvcHRpb25zOm9wdGlvbnN9fV9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJhIixmdW5jdGlvbigpe3JldHVybiBub3JtYWxpemVDb21wb25lbnR9KX0sMzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiMEJESCIpfSw3NzpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO3ZhciByZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJsYWJlbCIse3N0YXRpY0NsYXNzOiJlbC1jaGVja2JveCIsY2xhc3M6W192bS5ib3JkZXImJl92bS5jaGVja2JveFNpemU/ImVsLWNoZWNrYm94LS0iK192bS5jaGVja2JveFNpemU6IiIseyJpcy1kaXNhYmxlZCI6X3ZtLmlzRGlzYWJsZWR9LHsiaXMtYm9yZGVyZWQiOl92bS5ib3JkZXJ9LHsiaXMtY2hlY2tlZCI6X3ZtLmlzQ2hlY2tlZH1dLGF0dHJzOntyb2xlOiJjaGVja2JveCIsImFyaWEtY2hlY2tlZCI6X3ZtLmluZGV0ZXJtaW5hdGU/Im1peGVkIjpfdm0uaXNDaGVja2VkLCJhcmlhLWRpc2FibGVkIjpfdm0uaXNEaXNhYmxlZCxpZDpfdm0uaWR9fSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtY2hlY2tib3hfX2lucHV0IixjbGFzczp7ImlzLWRpc2FibGVkIjpfdm0uaXNEaXNhYmxlZCwiaXMtY2hlY2tlZCI6X3ZtLmlzQ2hlY2tlZCwiaXMtaW5kZXRlcm1pbmF0ZSI6X3ZtLmluZGV0ZXJtaW5hdGUsImlzLWZvY3VzIjpfdm0uZm9jdXN9LGF0dHJzOnsiYXJpYS1jaGVja2VkIjoibWl4ZWQifX0sW19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWNoZWNrYm94X19pbm5lciJ9KSxfdm0udHJ1ZUxhYmVsfHxfdm0uZmFsc2VMYWJlbD9fYygiaW5wdXQiLHtkaXJlY3RpdmVzOlt7bmFtZToibW9kZWwiLHJhd05hbWU6InYtbW9kZWwiLHZhbHVlOl92bS5tb2RlbCxleHByZXNzaW9uOiJtb2RlbCJ9XSxzdGF0aWNDbGFzczoiZWwtY2hlY2tib3hfX29yaWdpbmFsIixhdHRyczp7dHlwZToiY2hlY2tib3giLCJhcmlhLWhpZGRlbiI6InRydWUiLG5hbWU6X3ZtLm5hbWUsZGlzYWJsZWQ6X3ZtLmlzRGlzYWJsZWQsInRydWUtdmFsdWUiOl92bS50cnVlTGFiZWwsImZhbHNlLXZhbHVlIjpfdm0uZmFsc2VMYWJlbH0sZG9tUHJvcHM6e2NoZWNrZWQ6QXJyYXkuaXNBcnJheShfdm0ubW9kZWwpPy0xPF92bS5faShfdm0ubW9kZWwsbnVsbCk6X3ZtLl9xKF92bS5tb2RlbCxfdm0udHJ1ZUxhYmVsKX0sb246e2NoYW5nZTpbZnVuY3Rpb24oJGV2ZW50KXt2YXIgJCRhPV92bS5tb2RlbCwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD9fdm0udHJ1ZUxhYmVsOl92bS5mYWxzZUxhYmVsO2lmKEFycmF5LmlzQXJyYXkoJCRhKSl7dmFyICQkaT1fdm0uX2koJCRhLG51bGwpOyQkZWwuY2hlY2tlZD8kJGk8MCYmKF92bS5tb2RlbD0kJGEuY29uY2F0KFtudWxsXSkpOi0xPCQkaSYmKF92bS5tb2RlbD0kJGEuc2xpY2UoMCwkJGkpLmNvbmNhdCgkJGEuc2xpY2UoJCRpKzEpKSl9ZWxzZSBfdm0ubW9kZWw9JCRjfSxfdm0uaGFuZGxlQ2hhbmdlXSxmb2N1czpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1cz0hMH0sYmx1cjpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1cz0hMX19fSk6X2MoImlucHV0Iix7ZGlyZWN0aXZlczpbe25hbWU6Im1vZGVsIixyYXdOYW1lOiJ2LW1vZGVsIix2YWx1ZTpfdm0ubW9kZWwsZXhwcmVzc2lvbjoibW9kZWwifV0sc3RhdGljQ2xhc3M6ImVsLWNoZWNrYm94X19vcmlnaW5hbCIsYXR0cnM6e3R5cGU6ImNoZWNrYm94IiwiYXJpYS1oaWRkZW4iOiJ0cnVlIixkaXNhYmxlZDpfdm0uaXNEaXNhYmxlZCxuYW1lOl92bS5uYW1lfSxkb21Qcm9wczp7dmFsdWU6X3ZtLmxhYmVsLGNoZWNrZWQ6QXJyYXkuaXNBcnJheShfdm0ubW9kZWwpPy0xPF92bS5faShfdm0ubW9kZWwsX3ZtLmxhYmVsKTpfdm0ubW9kZWx9LG9uOntjaGFuZ2U6W2Z1bmN0aW9uKCRldmVudCl7dmFyICQkYT1fdm0ubW9kZWwsJCRlbD0kZXZlbnQudGFyZ2V0LCQkYz0hISQkZWwuY2hlY2tlZDtpZihBcnJheS5pc0FycmF5KCQkYSkpe3ZhciAkJHY9X3ZtLmxhYmVsLCQkaT1fdm0uX2koJCRhLCQkdik7JCRlbC5jaGVja2VkPyQkaTwwJiYoX3ZtLm1vZGVsPSQkYS5jb25jYXQoWyQkdl0pKTotMTwkJGkmJihfdm0ubW9kZWw9JCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkpfWVsc2UgX3ZtLm1vZGVsPSQkY30sX3ZtLmhhbmRsZUNoYW5nZV0sZm9jdXM6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uZm9jdXM9ITB9LGJsdXI6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uZm9jdXM9ITF9fX0pXSksX3ZtLiRzbG90cy5kZWZhdWx0fHxfdm0ubGFiZWw/X2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtY2hlY2tib3hfX2xhYmVsIn0sW192bS5fdCgiZGVmYXVsdCIpLF92bS4kc2xvdHMuZGVmYXVsdD9fdm0uX2UoKTpbX3ZtLl92KF92bS5fcyhfdm0ubGFiZWwpKV1dLDIpOl92bS5fZSgpXSl9O3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBlbWl0dGVyXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDMpLHNyY19jaGVja2JveHZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzXz17bmFtZToiRWxDaGVja2JveCIsbWl4aW5zOltfX3dlYnBhY2tfcmVxdWlyZV9fLm4oZW1pdHRlcl8pLmFdLGluamVjdDp7ZWxGb3JtOntkZWZhdWx0OiIifSxlbEZvcm1JdGVtOntkZWZhdWx0OiIifX0sY29tcG9uZW50TmFtZToiRWxDaGVja2JveCIsZGF0YTpmdW5jdGlvbigpe3JldHVybntzZWxmTW9kZWw6ITEsZm9jdXM6ITEsaXNMaW1pdEV4Y2VlZGVkOiExfX0sY29tcHV0ZWQ6e21vZGVsOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0dyb3VwP3RoaXMuc3RvcmU6dm9pZCAwIT09dGhpcy52YWx1ZT90aGlzLnZhbHVlOnRoaXMuc2VsZk1vZGVsfSxzZXQ6ZnVuY3Rpb24odmFsKXt0aGlzLmlzR3JvdXA/KHRoaXMuaXNMaW1pdEV4Y2VlZGVkPSExLHZvaWQgMCE9PXRoaXMuX2NoZWNrYm94R3JvdXAubWluJiZ2YWwubGVuZ3RoPHRoaXMuX2NoZWNrYm94R3JvdXAubWluJiYodGhpcy5pc0xpbWl0RXhjZWVkZWQ9ITApLHZvaWQgMCE9PXRoaXMuX2NoZWNrYm94R3JvdXAubWF4JiZ2YWwubGVuZ3RoPnRoaXMuX2NoZWNrYm94R3JvdXAubWF4JiYodGhpcy5pc0xpbWl0RXhjZWVkZWQ9ITApLCExPT09dGhpcy5pc0xpbWl0RXhjZWVkZWQmJnRoaXMuZGlzcGF0Y2goIkVsQ2hlY2tib3hHcm91cCIsImlucHV0IixbdmFsXSkpOih0aGlzLiRlbWl0KCJpbnB1dCIsdmFsKSx0aGlzLnNlbGZNb2RlbD12YWwpfX0saXNDaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgQm9vbGVhbl0iPT09e30udG9TdHJpbmcuY2FsbCh0aGlzLm1vZGVsKT90aGlzLm1vZGVsOkFycmF5LmlzQXJyYXkodGhpcy5tb2RlbCk/LTE8dGhpcy5tb2RlbC5pbmRleE9mKHRoaXMubGFiZWwpOm51bGwhPT10aGlzLm1vZGVsJiZ2b2lkIDAhPT10aGlzLm1vZGVsP3RoaXMubW9kZWw9PT10aGlzLnRydWVMYWJlbDp2b2lkIDB9LGlzR3JvdXA6ZnVuY3Rpb24oKXtmb3IodmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7cGFyZW50Oyl7aWYoIkVsQ2hlY2tib3hHcm91cCI9PT1wYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZSlyZXR1cm4gdGhpcy5fY2hlY2tib3hHcm91cD1wYXJlbnQsITA7cGFyZW50PXBhcmVudC4kcGFyZW50fXJldHVybiExfSxzdG9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja2JveEdyb3VwP3RoaXMuX2NoZWNrYm94R3JvdXAudmFsdWU6dGhpcy52YWx1ZX0saXNEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzR3JvdXA/dGhpcy5fY2hlY2tib3hHcm91cC5kaXNhYmxlZHx8dGhpcy5kaXNhYmxlZHx8KHRoaXMuZWxGb3JtfHx7fSkuZGlzYWJsZWQ6dGhpcy5kaXNhYmxlZHx8KHRoaXMuZWxGb3JtfHx7fSkuZGlzYWJsZWR9LF9lbEZvcm1JdGVtU2l6ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmVsRm9ybUl0ZW18fHt9KS5lbEZvcm1JdGVtU2l6ZX0sY2hlY2tib3hTaXplOmZ1bmN0aW9uKCl7dmFyIHRlbUNoZWNrYm94U2l6ZT10aGlzLnNpemV8fHRoaXMuX2VsRm9ybUl0ZW1TaXplfHwodGhpcy4kRUxFTUVOVHx8e30pLnNpemU7cmV0dXJuIHRoaXMuaXNHcm91cCYmdGhpcy5fY2hlY2tib3hHcm91cC5jaGVja2JveEdyb3VwU2l6ZXx8dGVtQ2hlY2tib3hTaXplfX0scHJvcHM6e3ZhbHVlOnt9LGxhYmVsOnt9LGluZGV0ZXJtaW5hdGU6Qm9vbGVhbixkaXNhYmxlZDpCb29sZWFuLGNoZWNrZWQ6Qm9vbGVhbixuYW1lOlN0cmluZyx0cnVlTGFiZWw6W1N0cmluZyxOdW1iZXJdLGZhbHNlTGFiZWw6W1N0cmluZyxOdW1iZXJdLGlkOlN0cmluZyxjb250cm9sczpTdHJpbmcsYm9yZGVyOkJvb2xlYW4sc2l6ZTpTdHJpbmd9LG1ldGhvZHM6e2FkZFRvU3RvcmU6ZnVuY3Rpb24oKXtBcnJheS5pc0FycmF5KHRoaXMubW9kZWwpJiYtMT09PXRoaXMubW9kZWwuaW5kZXhPZih0aGlzLmxhYmVsKT90aGlzLm1vZGVsLnB1c2godGhpcy5sYWJlbCk6dGhpcy5tb2RlbD10aGlzLnRydWVMYWJlbHx8ITB9LGhhbmRsZUNoYW5nZTpmdW5jdGlvbihldil7dmFyIF90aGlzPXRoaXM7aWYoIXRoaXMuaXNMaW1pdEV4Y2VlZGVkKXt2YXIgdmFsdWU9dm9pZCAwO3ZhbHVlPWV2LnRhcmdldC5jaGVja2VkP3ZvaWQgMD09PXRoaXMudHJ1ZUxhYmVsfHx0aGlzLnRydWVMYWJlbDp2b2lkIDAhPT10aGlzLmZhbHNlTGFiZWwmJnRoaXMuZmFsc2VMYWJlbCx0aGlzLiRlbWl0KCJjaGFuZ2UiLHZhbHVlLGV2KSx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzLmlzR3JvdXAmJl90aGlzLmRpc3BhdGNoKCJFbENoZWNrYm94R3JvdXAiLCJjaGFuZ2UiLFtfdGhpcy5fY2hlY2tib3hHcm91cC52YWx1ZV0pfSl9fX0sY3JlYXRlZDpmdW5jdGlvbigpe3RoaXMuY2hlY2tlZCYmdGhpcy5hZGRUb1N0b3JlKCl9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt0aGlzLmluZGV0ZXJtaW5hdGUmJnRoaXMuJGVsLnNldEF0dHJpYnV0ZSgiYXJpYS1jb250cm9scyIsdGhpcy5jb250cm9scyl9LHdhdGNoOnt2YWx1ZTpmdW5jdGlvbihfdmFsdWUpe3RoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmNoYW5nZSIsX3ZhbHVlKX19fSxjb21wb25lbnROb3JtYWxpemVyPV9fd2VicGFja19yZXF1aXJlX18oMCksY29tcG9uZW50PU9iamVjdChjb21wb25lbnROb3JtYWxpemVyLmEpKHNyY19jaGVja2JveHZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzXyxyZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvY2hlY2tib3gvc3JjL2NoZWNrYm94LnZ1ZSI7dmFyIHNyY19jaGVja2JveD1jb21wb25lbnQuZXhwb3J0cztzcmNfY2hlY2tib3guaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc3JjX2NoZWNrYm94Lm5hbWUsc3JjX2NoZWNrYm94KX07X193ZWJwYWNrX2V4cG9ydHNfXy5kZWZhdWx0PXNyY19jaGVja2JveH19KX0sIjUzSjEiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG1vZHVsZXMpe3ZhciBpbnN0YWxsZWRNb2R1bGVzPXt9O2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpe2lmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO3ZhciBtb2R1bGU9aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF09e2k6bW9kdWxlSWQsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cyxtb2R1bGUsbW9kdWxlLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksbW9kdWxlLmw9ITAsbW9kdWxlLmV4cG9ydHN9cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT1tb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uYz1pbnN0YWxsZWRNb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihleHBvcnRzLG5hbWUsZ2V0dGVyKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cyxuYW1lKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsbmFtZSx7ZW51bWVyYWJsZTohMCxnZXQ6Z2V0dGVyfSl9LF9fd2VicGFja19yZXF1aXJlX18ucj1mdW5jdGlvbihleHBvcnRzKXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnQ9ZnVuY3Rpb24odmFsdWUsbW9kZSl7aWYoMSZtb2RlJiYodmFsdWU9X193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSkpLDgmbW9kZSlyZXR1cm4gdmFsdWU7aWYoNCZtb2RlJiYib2JqZWN0Ij09dHlwZW9mIHZhbHVlJiZ2YWx1ZSYmdmFsdWUuX19lc01vZHVsZSlyZXR1cm4gdmFsdWU7dmFyIG5zPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnZhbHVlfSksMiZtb2RlJiYic3RyaW5nIiE9dHlwZW9mIHZhbHVlKWZvcih2YXIga2V5IGluIHZhbHVlKV9fd2VicGFja19yZXF1aXJlX18uZChucyxrZXksZnVuY3Rpb24oa2V5KXtyZXR1cm4gdmFsdWVba2V5XX0uYmluZChudWxsLGtleSkpO3JldHVybiBuc30sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKG1vZHVsZSl7dmFyIGdldHRlcj1tb2R1bGUmJm1vZHVsZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBtb2R1bGV9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCJhIixnZXR0ZXIpLGdldHRlcn0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKG9iamVjdCxwcm9wZXJ0eSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9Ii9kaXN0LyIsX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnM9NDYpfSh7MDpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50KHNjcmlwdEV4cG9ydHMscmVuZGVyLHN0YXRpY1JlbmRlckZucyxmdW5jdGlvbmFsVGVtcGxhdGUsaW5qZWN0U3R5bGVzLHNjb3BlSWQsbW9kdWxlSWRlbnRpZmllcixzaGFkb3dNb2RlKXt2YXIgaG9vayxvcHRpb25zPSJmdW5jdGlvbiI9PXR5cGVvZiBzY3JpcHRFeHBvcnRzP3NjcmlwdEV4cG9ydHMub3B0aW9uczpzY3JpcHRFeHBvcnRzO2lmKHJlbmRlciYmKG9wdGlvbnMucmVuZGVyPXJlbmRlcixvcHRpb25zLnN0YXRpY1JlbmRlckZucz1zdGF0aWNSZW5kZXJGbnMsb3B0aW9ucy5fY29tcGlsZWQ9ITApLGZ1bmN0aW9uYWxUZW1wbGF0ZSYmKG9wdGlvbnMuZnVuY3Rpb25hbD0hMCksc2NvcGVJZCYmKG9wdGlvbnMuX3Njb3BlSWQ9ImRhdGEtdi0iK3Njb3BlSWQpLG1vZHVsZUlkZW50aWZpZXI/KGhvb2s9ZnVuY3Rpb24oY29udGV4dCl7KGNvbnRleHQ9Y29udGV4dHx8dGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR8fHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC4kdm5vZGUmJnRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0KXx8InVuZGVmaW5lZCI9PXR5cGVvZiBfX1ZVRV9TU1JfQ09OVEVYVF9ffHwoY29udGV4dD1fX1ZVRV9TU1JfQ09OVEVYVF9fKSxpbmplY3RTdHlsZXMmJmluamVjdFN0eWxlcy5jYWxsKHRoaXMsY29udGV4dCksY29udGV4dCYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMmJmNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzLmFkZChtb2R1bGVJZGVudGlmaWVyKX0sb3B0aW9ucy5fc3NyUmVnaXN0ZXI9aG9vayk6aW5qZWN0U3R5bGVzJiYoaG9vaz1zaGFkb3dNb2RlP2Z1bmN0aW9uKCl7aW5qZWN0U3R5bGVzLmNhbGwodGhpcyx0aGlzLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpfTppbmplY3RTdHlsZXMpLGhvb2spaWYob3B0aW9ucy5mdW5jdGlvbmFsKXtvcHRpb25zLl9pbmplY3RTdHlsZXM9aG9vazt2YXIgb3JpZ2luYWxSZW5kZXI9b3B0aW9ucy5yZW5kZXI7b3B0aW9ucy5yZW5kZXI9ZnVuY3Rpb24oaCxjb250ZXh0KXtyZXR1cm4gaG9vay5jYWxsKGNvbnRleHQpLG9yaWdpbmFsUmVuZGVyKGgsY29udGV4dCl9fWVsc2V7dmFyIGV4aXN0aW5nPW9wdGlvbnMuYmVmb3JlQ3JlYXRlO29wdGlvbnMuYmVmb3JlQ3JlYXRlPWV4aXN0aW5nP1tdLmNvbmNhdChleGlzdGluZyxob29rKTpbaG9va119cmV0dXJue2V4cG9ydHM6c2NyaXB0RXhwb3J0cyxvcHRpb25zOm9wdGlvbnN9fV9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJhIixmdW5jdGlvbigpe3JldHVybiBub3JtYWxpemVDb21wb25lbnR9KX0sMjk6ZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciByZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJsaSIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS52aXNpYmxlLGV4cHJlc3Npb246InZpc2libGUifV0sc3RhdGljQ2xhc3M6ImVsLXNlbGVjdC1kcm9wZG93bl9faXRlbSIsY2xhc3M6e3NlbGVjdGVkOl92bS5pdGVtU2VsZWN0ZWQsImlzLWRpc2FibGVkIjpfdm0uZGlzYWJsZWR8fF92bS5ncm91cERpc2FibGVkfHxfdm0ubGltaXRSZWFjaGVkLGhvdmVyOl92bS5ob3Zlcn0sb246e21vdXNlZW50ZXI6X3ZtLmhvdmVySXRlbSxjbGljazpmdW5jdGlvbigkZXZlbnQpe3JldHVybiAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksX3ZtLnNlbGVjdE9wdGlvbkNsaWNrKCRldmVudCl9fX0sW192bS5fdCgiZGVmYXVsdCIsW19jKCJzcGFuIixbX3ZtLl92KF92bS5fcyhfdm0uY3VycmVudExhYmVsKSldKV0pXSwyKX07cmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGVtaXR0ZXJfPV9fd2VicGFja19yZXF1aXJlX18oMyksZW1pdHRlcl9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihlbWl0dGVyXyksdXRpbF89X193ZWJwYWNrX3JlcXVpcmVfXyg0KSxfdHlwZW9mPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmp9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBvYmp9LHNyY19vcHRpb252dWVfdHlwZV9zY3JpcHRfbGFuZ19qc189e21peGluczpbZW1pdHRlcl9kZWZhdWx0LmFdLG5hbWU6IkVsT3B0aW9uIixjb21wb25lbnROYW1lOiJFbE9wdGlvbiIsaW5qZWN0Olsic2VsZWN0Il0scHJvcHM6e3ZhbHVlOntyZXF1aXJlZDohMH0sbGFiZWw6W1N0cmluZyxOdW1iZXJdLGNyZWF0ZWQ6Qm9vbGVhbixkaXNhYmxlZDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2luZGV4Oi0xLGdyb3VwRGlzYWJsZWQ6ITEsdmlzaWJsZTohMCxoaXRTdGF0ZTohMSxob3ZlcjohMX19LGNvbXB1dGVkOntpc09iamVjdDpmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IG9iamVjdF0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMudmFsdWUpLnRvTG93ZXJDYXNlKCl9LGN1cnJlbnRMYWJlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhYmVsfHwodGhpcy5pc09iamVjdD8iIjp0aGlzLnZhbHVlKX0sY3VycmVudFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV8fHRoaXMubGFiZWx8fCIifSxpdGVtU2VsZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3QubXVsdGlwbGU/dGhpcy5jb250YWlucyh0aGlzLnNlbGVjdC52YWx1ZSx0aGlzLnZhbHVlKTp0aGlzLmlzRXF1YWwodGhpcy52YWx1ZSx0aGlzLnNlbGVjdC52YWx1ZSl9LGxpbWl0UmVhY2hlZDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5zZWxlY3QubXVsdGlwbGUmJighdGhpcy5pdGVtU2VsZWN0ZWQmJih0aGlzLnNlbGVjdC52YWx1ZXx8W10pLmxlbmd0aD49dGhpcy5zZWxlY3QubXVsdGlwbGVMaW1pdCYmMDx0aGlzLnNlbGVjdC5tdWx0aXBsZUxpbWl0KX19LHdhdGNoOntjdXJyZW50TGFiZWw6ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZWR8fHRoaXMuc2VsZWN0LnJlbW90ZXx8dGhpcy5kaXNwYXRjaCgiRWxTZWxlY3QiLCJzZXRTZWxlY3RlZCIpfSx2YWx1ZTpmdW5jdGlvbih2YWwsb2xkVmFsKXt2YXIgX3NlbGVjdD10aGlzLnNlbGVjdCxyZW1vdGU9X3NlbGVjdC5yZW1vdGUsdmFsdWVLZXk9X3NlbGVjdC52YWx1ZUtleTtpZighdGhpcy5jcmVhdGVkJiYhcmVtb3RlKXtpZih2YWx1ZUtleSYmIm9iamVjdCI9PT0odm9pZCAwPT09dmFsPyJ1bmRlZmluZWQiOl90eXBlb2YodmFsKSkmJiJvYmplY3QiPT09KHZvaWQgMD09PW9sZFZhbD8idW5kZWZpbmVkIjpfdHlwZW9mKG9sZFZhbCkpJiZ2YWxbdmFsdWVLZXldPT09b2xkVmFsW3ZhbHVlS2V5XSlyZXR1cm47dGhpcy5kaXNwYXRjaCgiRWxTZWxlY3QiLCJzZXRTZWxlY3RlZCIpfX19LG1ldGhvZHM6e2lzRXF1YWw6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmlzT2JqZWN0KXt2YXIgdmFsdWVLZXk9dGhpcy5zZWxlY3QudmFsdWVLZXk7cmV0dXJuIE9iamVjdCh1dGlsXy5nZXRWYWx1ZUJ5UGF0aCkoYSx2YWx1ZUtleSk9PT1PYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKGIsdmFsdWVLZXkpfXJldHVybiBhPT09Yn0sY29udGFpbnM6ZnVuY3Rpb24oKXt2YXIgYXJyPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXSx0YXJnZXQ9YXJndW1lbnRzWzFdO2lmKHRoaXMuaXNPYmplY3Qpe3ZhciB2YWx1ZUtleT10aGlzLnNlbGVjdC52YWx1ZUtleTtyZXR1cm4gYXJyLnNvbWUoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIE9iamVjdCh1dGlsXy5nZXRWYWx1ZUJ5UGF0aCkoaXRlbSx2YWx1ZUtleSk9PT1PYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKHRhcmdldCx2YWx1ZUtleSl9KX1yZXR1cm4tMTxhcnIuaW5kZXhPZih0YXJnZXQpfSxoYW5kbGVHcm91cERpc2FibGVkOmZ1bmN0aW9uKHZhbCl7dGhpcy5ncm91cERpc2FibGVkPXZhbH0saG92ZXJJdGVtOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZHx8dGhpcy5ncm91cERpc2FibGVkfHwodGhpcy5zZWxlY3QuaG92ZXJJbmRleD10aGlzLnNlbGVjdC5vcHRpb25zLmluZGV4T2YodGhpcykpfSxzZWxlY3RPcHRpb25DbGljazpmdW5jdGlvbigpeyEwIT09dGhpcy5kaXNhYmxlZCYmITAhPT10aGlzLmdyb3VwRGlzYWJsZWQmJnRoaXMuZGlzcGF0Y2goIkVsU2VsZWN0IiwiaGFuZGxlT3B0aW9uQ2xpY2siLFt0aGlzLCEwXSl9LHF1ZXJ5Q2hhbmdlOmZ1bmN0aW9uKHF1ZXJ5KXt0aGlzLnZpc2libGU9bmV3IFJlZ0V4cChPYmplY3QodXRpbF8uZXNjYXBlUmVnZXhwU3RyaW5nKShxdWVyeSksImkiKS50ZXN0KHRoaXMuY3VycmVudExhYmVsKXx8dGhpcy5jcmVhdGVkLHRoaXMudmlzaWJsZXx8dGhpcy5zZWxlY3QuZmlsdGVyZWRPcHRpb25zQ291bnQtLX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdC5vcHRpb25zLnB1c2godGhpcyksdGhpcy5zZWxlY3QuY2FjaGVkT3B0aW9ucy5wdXNoKHRoaXMpLHRoaXMuc2VsZWN0Lm9wdGlvbnNDb3VudCsrLHRoaXMuc2VsZWN0LmZpbHRlcmVkT3B0aW9uc0NvdW50KyssdGhpcy4kb24oInF1ZXJ5Q2hhbmdlIix0aGlzLnF1ZXJ5Q2hhbmdlKSx0aGlzLiRvbigiaGFuZGxlR3JvdXBEaXNhYmxlZCIsdGhpcy5oYW5kbGVHcm91cERpc2FibGVkKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0Lm9uT3B0aW9uRGVzdHJveSh0aGlzLnNlbGVjdC5vcHRpb25zLmluZGV4T2YodGhpcykpfX0sY29tcG9uZW50Tm9ybWFsaXplcj1fX3dlYnBhY2tfcmVxdWlyZV9fKDApLGNvbXBvbmVudD1PYmplY3QoY29tcG9uZW50Tm9ybWFsaXplci5hKShzcmNfb3B0aW9udnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfLHJlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9zZWxlY3Qvc3JjL29wdGlvbi52dWUiO19fd2VicGFja19leHBvcnRzX18uYT1jb21wb25lbnQuZXhwb3J0c30sMzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiMEJESCIpfSw0OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJnU0lRIil9LDQ2OmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7dmFyIF9zZWxlY3Rfc3JjX29wdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fPV9fd2VicGFja19yZXF1aXJlX18oMjkpO19zZWxlY3Rfc3JjX29wdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmEuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoX3NlbGVjdF9zcmNfb3B0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYS5uYW1lLF9zZWxlY3Rfc3JjX29wdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmEpfSxfX3dlYnBhY2tfZXhwb3J0c19fLmRlZmF1bHQ9X3NlbGVjdF9zcmNfb3B0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYX19KX0sIjVGQlIiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG1vZHVsZXMpe3ZhciBpbnN0YWxsZWRNb2R1bGVzPXt9O2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpe2lmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO3ZhciBtb2R1bGU9aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF09e2k6bW9kdWxlSWQsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cyxtb2R1bGUsbW9kdWxlLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksbW9kdWxlLmw9ITAsbW9kdWxlLmV4cG9ydHN9cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT1tb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uYz1pbnN0YWxsZWRNb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihleHBvcnRzLG5hbWUsZ2V0dGVyKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cyxuYW1lKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsbmFtZSx7ZW51bWVyYWJsZTohMCxnZXQ6Z2V0dGVyfSl9LF9fd2VicGFja19yZXF1aXJlX18ucj1mdW5jdGlvbihleHBvcnRzKXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnQ9ZnVuY3Rpb24odmFsdWUsbW9kZSl7aWYoMSZtb2RlJiYodmFsdWU9X193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSkpLDgmbW9kZSlyZXR1cm4gdmFsdWU7aWYoNCZtb2RlJiYib2JqZWN0Ij09dHlwZW9mIHZhbHVlJiZ2YWx1ZSYmdmFsdWUuX19lc01vZHVsZSlyZXR1cm4gdmFsdWU7dmFyIG5zPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnZhbHVlfSksMiZtb2RlJiYic3RyaW5nIiE9dHlwZW9mIHZhbHVlKWZvcih2YXIga2V5IGluIHZhbHVlKV9fd2VicGFja19yZXF1aXJlX18uZChucyxrZXksZnVuY3Rpb24oa2V5KXtyZXR1cm4gdmFsdWVba2V5XX0uYmluZChudWxsLGtleSkpO3JldHVybiBuc30sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKG1vZHVsZSl7dmFyIGdldHRlcj1tb2R1bGUmJm1vZHVsZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBtb2R1bGV9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCJhIixnZXR0ZXIpLGdldHRlcn0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKG9iamVjdCxwcm9wZXJ0eSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9Ii9kaXN0LyIsX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnM9NzMpfSh7MDpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50KHNjcmlwdEV4cG9ydHMscmVuZGVyLHN0YXRpY1JlbmRlckZucyxmdW5jdGlvbmFsVGVtcGxhdGUsaW5qZWN0U3R5bGVzLHNjb3BlSWQsbW9kdWxlSWRlbnRpZmllcixzaGFkb3dNb2RlKXt2YXIgaG9vayxvcHRpb25zPSJmdW5jdGlvbiI9PXR5cGVvZiBzY3JpcHRFeHBvcnRzP3NjcmlwdEV4cG9ydHMub3B0aW9uczpzY3JpcHRFeHBvcnRzO2lmKHJlbmRlciYmKG9wdGlvbnMucmVuZGVyPXJlbmRlcixvcHRpb25zLnN0YXRpY1JlbmRlckZucz1zdGF0aWNSZW5kZXJGbnMsb3B0aW9ucy5fY29tcGlsZWQ9ITApLGZ1bmN0aW9uYWxUZW1wbGF0ZSYmKG9wdGlvbnMuZnVuY3Rpb25hbD0hMCksc2NvcGVJZCYmKG9wdGlvbnMuX3Njb3BlSWQ9ImRhdGEtdi0iK3Njb3BlSWQpLG1vZHVsZUlkZW50aWZpZXI/KGhvb2s9ZnVuY3Rpb24oY29udGV4dCl7KGNvbnRleHQ9Y29udGV4dHx8dGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR8fHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC4kdm5vZGUmJnRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0KXx8InVuZGVmaW5lZCI9PXR5cGVvZiBfX1ZVRV9TU1JfQ09OVEVYVF9ffHwoY29udGV4dD1fX1ZVRV9TU1JfQ09OVEVYVF9fKSxpbmplY3RTdHlsZXMmJmluamVjdFN0eWxlcy5jYWxsKHRoaXMsY29udGV4dCksY29udGV4dCYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMmJmNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzLmFkZChtb2R1bGVJZGVudGlmaWVyKX0sb3B0aW9ucy5fc3NyUmVnaXN0ZXI9aG9vayk6aW5qZWN0U3R5bGVzJiYoaG9vaz1zaGFkb3dNb2RlP2Z1bmN0aW9uKCl7aW5qZWN0U3R5bGVzLmNhbGwodGhpcyx0aGlzLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpfTppbmplY3RTdHlsZXMpLGhvb2spaWYob3B0aW9ucy5mdW5jdGlvbmFsKXtvcHRpb25zLl9pbmplY3RTdHlsZXM9aG9vazt2YXIgb3JpZ2luYWxSZW5kZXI9b3B0aW9ucy5yZW5kZXI7b3B0aW9ucy5yZW5kZXI9ZnVuY3Rpb24oaCxjb250ZXh0KXtyZXR1cm4gaG9vay5jYWxsKGNvbnRleHQpLG9yaWdpbmFsUmVuZGVyKGgsY29udGV4dCl9fWVsc2V7dmFyIGV4aXN0aW5nPW9wdGlvbnMuYmVmb3JlQ3JlYXRlO29wdGlvbnMuYmVmb3JlQ3JlYXRlPWV4aXN0aW5nP1tdLmNvbmNhdChleGlzdGluZyxob29rKTpbaG9va119cmV0dXJue2V4cG9ydHM6c2NyaXB0RXhwb3J0cyxvcHRpb25zOm9wdGlvbnN9fV9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJhIixmdW5jdGlvbigpe3JldHVybiBub3JtYWxpemVDb21wb25lbnR9KX0sMjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiV1NUMSIpfSwyMTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiRXZJOSIpfSwyNTpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGVsZW1lbnRfdWlfc3JjX3V0aWxzX2RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fPV9fd2VicGFja19yZXF1aXJlX18oMik7X193ZWJwYWNrX2V4cG9ydHNfXy5hPXtiaW5kOmZ1bmN0aW9uKGVsLGJpbmRpbmcsdm5vZGUpe3ZhciBpbnRlcnZhbD1udWxsLHN0YXJ0VGltZT12b2lkIDAsaGFuZGxlcj1mdW5jdGlvbigpe3JldHVybiB2bm9kZS5jb250ZXh0W2JpbmRpbmcuZXhwcmVzc2lvbl0uYXBwbHkoKX0sY2xlYXI9ZnVuY3Rpb24oKXtuZXcgRGF0ZS1zdGFydFRpbWU8MTAwJiZoYW5kbGVyKCksY2xlYXJJbnRlcnZhbChpbnRlcnZhbCksaW50ZXJ2YWw9bnVsbH07T2JqZWN0KGVsZW1lbnRfdWlfc3JjX3V0aWxzX2RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLm9uKShlbCwibW91c2Vkb3duIixmdW5jdGlvbihlKXswPT09ZS5idXR0b24mJihzdGFydFRpbWU9bmV3IERhdGUsT2JqZWN0KGVsZW1lbnRfdWlfc3JjX3V0aWxzX2RvbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLm9uY2UpKGRvY3VtZW50LCJtb3VzZXVwIixjbGVhciksY2xlYXJJbnRlcnZhbChpbnRlcnZhbCksaW50ZXJ2YWw9c2V0SW50ZXJ2YWwoaGFuZGxlciwxMDApKX0pfX19LDczOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7dmFyIHJlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse2NsYXNzOlsiZWwtaW5wdXQtbnVtYmVyIixfdm0uaW5wdXROdW1iZXJTaXplPyJlbC1pbnB1dC1udW1iZXItLSIrX3ZtLmlucHV0TnVtYmVyU2l6ZToiIix7ImlzLWRpc2FibGVkIjpfdm0uaW5wdXROdW1iZXJEaXNhYmxlZH0seyJpcy13aXRob3V0LWNvbnRyb2xzIjohX3ZtLmNvbnRyb2xzfSx7ImlzLWNvbnRyb2xzLXJpZ2h0Ijpfdm0uY29udHJvbHNBdFJpZ2h0fV0sb246e2RyYWdzdGFydDpmdW5jdGlvbigkZXZlbnQpeyRldmVudC5wcmV2ZW50RGVmYXVsdCgpfX19LFtfdm0uY29udHJvbHM/X2MoInNwYW4iLHtkaXJlY3RpdmVzOlt7bmFtZToicmVwZWF0LWNsaWNrIixyYXdOYW1lOiJ2LXJlcGVhdC1jbGljayIsdmFsdWU6X3ZtLmRlY3JlYXNlLGV4cHJlc3Npb246ImRlY3JlYXNlIn1dLHN0YXRpY0NsYXNzOiJlbC1pbnB1dC1udW1iZXJfX2RlY3JlYXNlIixjbGFzczp7ImlzLWRpc2FibGVkIjpfdm0ubWluRGlzYWJsZWR9LGF0dHJzOntyb2xlOiJidXR0b24ifSxvbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJlbnRlciIsMTMsJGV2ZW50LmtleSwiRW50ZXIiKT9fdm0uZGVjcmVhc2UoJGV2ZW50KTpudWxsfX19LFtfYygiaSIse2NsYXNzOiJlbC1pY29uLSIrKF92bS5jb250cm9sc0F0UmlnaHQ/ImFycm93LWRvd24iOiJtaW51cyIpfSldKTpfdm0uX2UoKSxfdm0uY29udHJvbHM/X2MoInNwYW4iLHtkaXJlY3RpdmVzOlt7bmFtZToicmVwZWF0LWNsaWNrIixyYXdOYW1lOiJ2LXJlcGVhdC1jbGljayIsdmFsdWU6X3ZtLmluY3JlYXNlLGV4cHJlc3Npb246ImluY3JlYXNlIn1dLHN0YXRpY0NsYXNzOiJlbC1pbnB1dC1udW1iZXJfX2luY3JlYXNlIixjbGFzczp7ImlzLWRpc2FibGVkIjpfdm0ubWF4RGlzYWJsZWR9LGF0dHJzOntyb2xlOiJidXR0b24ifSxvbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJlbnRlciIsMTMsJGV2ZW50LmtleSwiRW50ZXIiKT9fdm0uaW5jcmVhc2UoJGV2ZW50KTpudWxsfX19LFtfYygiaSIse2NsYXNzOiJlbC1pY29uLSIrKF92bS5jb250cm9sc0F0UmlnaHQ/ImFycm93LXVwIjoicGx1cyIpfSldKTpfdm0uX2UoKSxfYygiZWwtaW5wdXQiLHtyZWY6ImlucHV0IixhdHRyczp7dmFsdWU6X3ZtLmRpc3BsYXlWYWx1ZSxwbGFjZWhvbGRlcjpfdm0ucGxhY2Vob2xkZXIsZGlzYWJsZWQ6X3ZtLmlucHV0TnVtYmVyRGlzYWJsZWQsc2l6ZTpfdm0uaW5wdXROdW1iZXJTaXplLG1heDpfdm0ubWF4LG1pbjpfdm0ubWluLG5hbWU6X3ZtLm5hbWUsbGFiZWw6X3ZtLmxhYmVsfSxvbjp7Ymx1cjpfdm0uaGFuZGxlQmx1cixmb2N1czpfdm0uaGFuZGxlRm9jdXMsaW5wdXQ6X3ZtLmhhbmRsZUlucHV0LGNoYW5nZTpfdm0uaGFuZGxlSW5wdXRDaGFuZ2V9LG5hdGl2ZU9uOntrZXlkb3duOltmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJ1cCIsMzgsJGV2ZW50LmtleSxbIlVwIiwiQXJyb3dVcCJdKT8oJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLmluY3JlYXNlKCRldmVudCkpOm51bGx9LGZ1bmN0aW9uKCRldmVudCl7cmV0dXJuImJ1dHRvbiJpbiAkZXZlbnR8fCFfdm0uX2soJGV2ZW50LmtleUNvZGUsImRvd24iLDQwLCRldmVudC5rZXksWyJEb3duIiwiQXJyb3dEb3duIl0pPygkZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0uZGVjcmVhc2UoJGV2ZW50KSk6bnVsbH1dfX0pXSwxKX07cmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGlucHV0Xz1fX3dlYnBhY2tfcmVxdWlyZV9fKDkpLGlucHV0X2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGlucHV0XyksZm9jdXNfPV9fd2VicGFja19yZXF1aXJlX18oMjEpLGZvY3VzX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGZvY3VzXykscmVwZWF0X2NsaWNrPV9fd2VicGFja19yZXF1aXJlX18oMjUpLHNyY19pbnB1dF9udW1iZXJ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc189e25hbWU6IkVsSW5wdXROdW1iZXIiLG1peGluczpbZm9jdXNfZGVmYXVsdCgpKCJpbnB1dCIpXSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn0sZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LGRpcmVjdGl2ZXM6e3JlcGVhdENsaWNrOnJlcGVhdF9jbGljay5hfSxjb21wb25lbnRzOntFbElucHV0OmlucHV0X2RlZmF1bHQuYX0scHJvcHM6e3N0ZXA6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MX0sbWF4Ont0eXBlOk51bWJlcixkZWZhdWx0OjEvMH0sbWluOnt0eXBlOk51bWJlcixkZWZhdWx0Oi0xLzB9LHZhbHVlOnt9LGRpc2FibGVkOkJvb2xlYW4sc2l6ZTpTdHJpbmcsY29udHJvbHM6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxjb250cm9sc1Bvc2l0aW9uOnt0eXBlOlN0cmluZyxkZWZhdWx0OiIifSxuYW1lOlN0cmluZyxsYWJlbDpTdHJpbmcscGxhY2Vob2xkZXI6U3RyaW5nLHByZWNpc2lvbjp7dHlwZTpOdW1iZXIsdmFsaWRhdG9yOmZ1bmN0aW9uKHZhbCl7cmV0dXJuIDA8PXZhbCYmdmFsPT09cGFyc2VJbnQodmFsLDEwKX19fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2N1cnJlbnRWYWx1ZTowLHVzZXJJbnB1dDpudWxsfX0sd2F0Y2g6e3ZhbHVlOntpbW1lZGlhdGU6ITAsaGFuZGxlcjpmdW5jdGlvbih2YWx1ZSl7dmFyIG5ld1ZhbD12b2lkIDA9PT12YWx1ZT92YWx1ZTpOdW1iZXIodmFsdWUpO2lmKHZvaWQgMCE9PW5ld1ZhbCl7aWYoaXNOYU4obmV3VmFsKSlyZXR1cm47dm9pZCAwIT09dGhpcy5wcmVjaXNpb24mJihuZXdWYWw9dGhpcy50b1ByZWNpc2lvbihuZXdWYWwsdGhpcy5wcmVjaXNpb24pKX1uZXdWYWw+PXRoaXMubWF4JiYobmV3VmFsPXRoaXMubWF4KSxuZXdWYWw8PXRoaXMubWluJiYobmV3VmFsPXRoaXMubWluKSx0aGlzLmN1cnJlbnRWYWx1ZT1uZXdWYWwsdGhpcy51c2VySW5wdXQ9bnVsbCx0aGlzLiRlbWl0KCJpbnB1dCIsbmV3VmFsKX19fSxjb21wdXRlZDp7bWluRGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVjcmVhc2UodGhpcy52YWx1ZSx0aGlzLnN0ZXApPHRoaXMubWlufSxtYXhEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbmNyZWFzZSh0aGlzLnZhbHVlLHRoaXMuc3RlcCk+dGhpcy5tYXh9LG51bVByZWNpc2lvbjpmdW5jdGlvbigpe3ZhciB2YWx1ZT10aGlzLnZhbHVlLHN0ZXA9dGhpcy5zdGVwLGdldFByZWNpc2lvbj10aGlzLmdldFByZWNpc2lvbixwcmVjaXNpb249dGhpcy5wcmVjaXNpb24sc3RlcFByZWNpc2lvbj1nZXRQcmVjaXNpb24oc3RlcCk7cmV0dXJuIHZvaWQgMCE9PXByZWNpc2lvbj8ocHJlY2lzaW9uPHN0ZXBQcmVjaXNpb24mJmNvbnNvbGUud2FybigiW0VsZW1lbnQgV2Fybl1bSW5wdXROdW1iZXJdcHJlY2lzaW9uIHNob3VsZCBub3QgYmUgbGVzcyB0aGFuIHRoZSBkZWNpbWFsIHBsYWNlcyBvZiBzdGVwIikscHJlY2lzaW9uKTpNYXRoLm1heChnZXRQcmVjaXNpb24odmFsdWUpLHN0ZXBQcmVjaXNpb24pfSxjb250cm9sc0F0UmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250cm9scyYmInJpZ2h0Ij09PXRoaXMuY29udHJvbHNQb3NpdGlvbn0sX2VsRm9ybUl0ZW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuZWxGb3JtSXRlbXx8e30pLmVsRm9ybUl0ZW1TaXplfSxpbnB1dE51bWJlclNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfHx0aGlzLl9lbEZvcm1JdGVtU2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfSxpbnB1dE51bWJlckRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfSxkaXNwbGF5VmFsdWU6ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy51c2VySW5wdXQpcmV0dXJuIHRoaXMudXNlcklucHV0O3ZhciBjdXJyZW50VmFsdWU9dGhpcy5jdXJyZW50VmFsdWU7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBjdXJyZW50VmFsdWUmJnZvaWQgMCE9PXRoaXMucHJlY2lzaW9uP2N1cnJlbnRWYWx1ZS50b0ZpeGVkKHRoaXMucHJlY2lzaW9uKTpjdXJyZW50VmFsdWV9fSxtZXRob2RzOnt0b1ByZWNpc2lvbjpmdW5jdGlvbihudW0scHJlY2lzaW9uKXtyZXR1cm4gdm9pZCAwPT09cHJlY2lzaW9uJiYocHJlY2lzaW9uPXRoaXMubnVtUHJlY2lzaW9uKSxwYXJzZUZsb2F0KE51bWJlcihudW0pLnRvRml4ZWQocHJlY2lzaW9uKSl9LGdldFByZWNpc2lvbjpmdW5jdGlvbih2YWx1ZSl7aWYodm9pZCAwPT09dmFsdWUpcmV0dXJuIDA7dmFyIHZhbHVlU3RyaW5nPXZhbHVlLnRvU3RyaW5nKCksZG90UG9zaXRpb249dmFsdWVTdHJpbmcuaW5kZXhPZigiLiIpLHByZWNpc2lvbj0wO3JldHVybi0xIT09ZG90UG9zaXRpb24mJihwcmVjaXNpb249dmFsdWVTdHJpbmcubGVuZ3RoLWRvdFBvc2l0aW9uLTEpLHByZWNpc2lvbn0sX2luY3JlYXNlOmZ1bmN0aW9uKHZhbCxzdGVwKXtpZigibnVtYmVyIiE9dHlwZW9mIHZhbCYmdm9pZCAwIT09dmFsKXJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTt2YXIgcHJlY2lzaW9uRmFjdG9yPU1hdGgucG93KDEwLHRoaXMubnVtUHJlY2lzaW9uKTtyZXR1cm4gdGhpcy50b1ByZWNpc2lvbigocHJlY2lzaW9uRmFjdG9yKnZhbCtwcmVjaXNpb25GYWN0b3Iqc3RlcCkvcHJlY2lzaW9uRmFjdG9yKX0sX2RlY3JlYXNlOmZ1bmN0aW9uKHZhbCxzdGVwKXtpZigibnVtYmVyIiE9dHlwZW9mIHZhbCYmdm9pZCAwIT09dmFsKXJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTt2YXIgcHJlY2lzaW9uRmFjdG9yPU1hdGgucG93KDEwLHRoaXMubnVtUHJlY2lzaW9uKTtyZXR1cm4gdGhpcy50b1ByZWNpc2lvbigocHJlY2lzaW9uRmFjdG9yKnZhbC1wcmVjaXNpb25GYWN0b3Iqc3RlcCkvcHJlY2lzaW9uRmFjdG9yKX0saW5jcmVhc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5pbnB1dE51bWJlckRpc2FibGVkJiYhdGhpcy5tYXhEaXNhYmxlZCl7dmFyIHZhbHVlPXRoaXMudmFsdWV8fDAsbmV3VmFsPXRoaXMuX2luY3JlYXNlKHZhbHVlLHRoaXMuc3RlcCk7dGhpcy5zZXRDdXJyZW50VmFsdWUobmV3VmFsKX19LGRlY3JlYXNlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaW5wdXROdW1iZXJEaXNhYmxlZCYmIXRoaXMubWluRGlzYWJsZWQpe3ZhciB2YWx1ZT10aGlzLnZhbHVlfHwwLG5ld1ZhbD10aGlzLl9kZWNyZWFzZSh2YWx1ZSx0aGlzLnN0ZXApO3RoaXMuc2V0Q3VycmVudFZhbHVlKG5ld1ZhbCl9fSxoYW5kbGVCbHVyOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLiRlbWl0KCJibHVyIixldmVudCl9LGhhbmRsZUZvY3VzOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLiRlbWl0KCJmb2N1cyIsZXZlbnQpfSxzZXRDdXJyZW50VmFsdWU6ZnVuY3Rpb24obmV3VmFsKXt2YXIgb2xkVmFsPXRoaXMuY3VycmVudFZhbHVlOyJudW1iZXIiPT10eXBlb2YgbmV3VmFsJiZ2b2lkIDAhPT10aGlzLnByZWNpc2lvbiYmKG5ld1ZhbD10aGlzLnRvUHJlY2lzaW9uKG5ld1ZhbCx0aGlzLnByZWNpc2lvbikpLG5ld1ZhbD49dGhpcy5tYXgmJihuZXdWYWw9dGhpcy5tYXgpLG5ld1ZhbDw9dGhpcy5taW4mJihuZXdWYWw9dGhpcy5taW4pLG9sZFZhbCE9PW5ld1ZhbCYmKHRoaXMudXNlcklucHV0PW51bGwsdGhpcy4kZW1pdCgiaW5wdXQiLG5ld1ZhbCksdGhpcy4kZW1pdCgiY2hhbmdlIixuZXdWYWwsb2xkVmFsKSx0aGlzLmN1cnJlbnRWYWx1ZT1uZXdWYWwpfSxoYW5kbGVJbnB1dDpmdW5jdGlvbih2YWx1ZSl7dGhpcy51c2VySW5wdXQ9dmFsdWV9LGhhbmRsZUlucHV0Q2hhbmdlOmZ1bmN0aW9uKHZhbHVlKXt2YXIgbmV3VmFsPSIiPT09dmFsdWU/dm9pZCAwOk51bWJlcih2YWx1ZSk7aXNOYU4obmV3VmFsKSYmIiIhPT12YWx1ZXx8dGhpcy5zZXRDdXJyZW50VmFsdWUobmV3VmFsKSx0aGlzLnVzZXJJbnB1dD1udWxsfSxzZWxlY3Q6ZnVuY3Rpb24oKXt0aGlzLiRyZWZzLmlucHV0LnNlbGVjdCgpfX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBpbm5lcklucHV0PXRoaXMuJHJlZnMuaW5wdXQuJHJlZnMuaW5wdXQ7aW5uZXJJbnB1dC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJzcGluYnV0dG9uIiksaW5uZXJJbnB1dC5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWVtYXgiLHRoaXMubWF4KSxpbm5lcklucHV0LnNldEF0dHJpYnV0ZSgiYXJpYS12YWx1ZW1pbiIsdGhpcy5taW4pLGlubmVySW5wdXQuc2V0QXR0cmlidXRlKCJhcmlhLXZhbHVlbm93Iix0aGlzLmN1cnJlbnRWYWx1ZSksaW5uZXJJbnB1dC5zZXRBdHRyaWJ1dGUoImFyaWEtZGlzYWJsZWQiLHRoaXMuaW5wdXROdW1iZXJEaXNhYmxlZCl9LHVwZGF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLiRyZWZzJiZ0aGlzLiRyZWZzLmlucHV0JiZ0aGlzLiRyZWZzLmlucHV0LiRyZWZzLmlucHV0LnNldEF0dHJpYnV0ZSgiYXJpYS12YWx1ZW5vdyIsdGhpcy5jdXJyZW50VmFsdWUpfX0sY29tcG9uZW50Tm9ybWFsaXplcj1fX3dlYnBhY2tfcmVxdWlyZV9fKDApLGNvbXBvbmVudD1PYmplY3QoY29tcG9uZW50Tm9ybWFsaXplci5hKShzcmNfaW5wdXRfbnVtYmVydnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfLHJlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9pbnB1dC1udW1iZXIvc3JjL2lucHV0LW51bWJlci52dWUiO3ZhciBpbnB1dF9udW1iZXI9Y29tcG9uZW50LmV4cG9ydHM7aW5wdXRfbnVtYmVyLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGlucHV0X251bWJlci5uYW1lLGlucHV0X251bWJlcil9O19fd2VicGFja19leHBvcnRzX18uZGVmYXVsdD1pbnB1dF9udW1iZXJ9LDk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIjg2MDYiKX19KX0sIjVGTEoiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITA7dmFyIGFyaWE9YXJpYXx8e307YXJpYS5VdGlscz1hcmlhLlV0aWxzfHx7fSxhcmlhLlV0aWxzLmZvY3VzRmlyc3REZXNjZW5kYW50PWZ1bmN0aW9uKGVsZW1lbnQpe2Zvcih2YXIgaT0wO2k8ZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDtpKyspe3ZhciBjaGlsZD1lbGVtZW50LmNoaWxkTm9kZXNbaV07aWYoYXJpYS5VdGlscy5hdHRlbXB0Rm9jdXMoY2hpbGQpfHxhcmlhLlV0aWxzLmZvY3VzRmlyc3REZXNjZW5kYW50KGNoaWxkKSlyZXR1cm4hMH1yZXR1cm4hMX0sYXJpYS5VdGlscy5mb2N1c0xhc3REZXNjZW5kYW50PWZ1bmN0aW9uKGVsZW1lbnQpe2Zvcih2YXIgaT1lbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoLTE7MDw9aTtpLS0pe3ZhciBjaGlsZD1lbGVtZW50LmNoaWxkTm9kZXNbaV07aWYoYXJpYS5VdGlscy5hdHRlbXB0Rm9jdXMoY2hpbGQpfHxhcmlhLlV0aWxzLmZvY3VzTGFzdERlc2NlbmRhbnQoY2hpbGQpKXJldHVybiEwfXJldHVybiExfSxhcmlhLlV0aWxzLmF0dGVtcHRGb2N1cz1mdW5jdGlvbihlbGVtZW50KXtpZighYXJpYS5VdGlscy5pc0ZvY3VzYWJsZShlbGVtZW50KSlyZXR1cm4hMTthcmlhLlV0aWxzLklnbm9yZVV0aWxGb2N1c0NoYW5nZXM9ITA7dHJ5e2VsZW1lbnQuZm9jdXMoKX1jYXRjaChlKXt9cmV0dXJuIGFyaWEuVXRpbHMuSWdub3JlVXRpbEZvY3VzQ2hhbmdlcz0hMSxkb2N1bWVudC5hY3RpdmVFbGVtZW50PT09ZWxlbWVudH0sYXJpYS5VdGlscy5pc0ZvY3VzYWJsZT1mdW5jdGlvbihlbGVtZW50KXtpZigwPGVsZW1lbnQudGFiSW5kZXh8fDA9PT1lbGVtZW50LnRhYkluZGV4JiZudWxsIT09ZWxlbWVudC5nZXRBdHRyaWJ1dGUoInRhYkluZGV4IikpcmV0dXJuITA7aWYoZWxlbWVudC5kaXNhYmxlZClyZXR1cm4hMTtzd2l0Y2goZWxlbWVudC5ub2RlTmFtZSl7Y2FzZSJBIjpyZXR1cm4hIWVsZW1lbnQuaHJlZiYmImlnbm9yZSIhPT1lbGVtZW50LnJlbDtjYXNlIklOUFVUIjpyZXR1cm4iaGlkZGVuIiE9PWVsZW1lbnQudHlwZSYmImZpbGUiIT09ZWxlbWVudC50eXBlO2Nhc2UiQlVUVE9OIjpjYXNlIlNFTEVDVCI6Y2FzZSJURVhUQVJFQSI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LGFyaWEuVXRpbHMudHJpZ2dlckV2ZW50PWZ1bmN0aW9uKGVsbSxuYW1lKXt2YXIgZXZlbnROYW1lPXZvaWQgMDtldmVudE5hbWU9L15tb3VzZXxjbGljay8udGVzdChuYW1lKT8iTW91c2VFdmVudHMiOi9ea2V5Ly50ZXN0KG5hbWUpPyJLZXlib2FyZEV2ZW50IjoiSFRNTEV2ZW50cyI7Zm9yKHZhciBldnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoZXZlbnROYW1lKSxfbGVuPWFyZ3VtZW50cy5sZW5ndGgsb3B0cz1BcnJheSgyPF9sZW4/X2xlbi0yOjApLF9rZXk9Mjtfa2V5PF9sZW47X2tleSsrKW9wdHNbX2tleS0yXT1hcmd1bWVudHNbX2tleV07cmV0dXJuIGV2dC5pbml0RXZlbnQuYXBwbHkoZXZ0LFtuYW1lXS5jb25jYXQob3B0cykpLGVsbS5kaXNwYXRjaEV2ZW50P2VsbS5kaXNwYXRjaEV2ZW50KGV2dCk6ZWxtLmZpcmVFdmVudCgib24iK25hbWUsZXZ0KSxlbG19LGFyaWEuVXRpbHMua2V5cz17dGFiOjksZW50ZXI6MTMsc3BhY2U6MzIsbGVmdDozNyx1cDozOCxyaWdodDozOSxkb3duOjQwfSxleHBvcnRzLmRlZmF1bHQ9YXJpYS5VdGlsc30sIjVpMWMiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITAsZXhwb3J0cy5kZWZhdWx0PWZ1bmN0aW9uKCl7aWYoX3Z1ZTIuZGVmYXVsdC5wcm90b3R5cGUuJGlzU2VydmVyKXJldHVybiAwO2lmKHZvaWQgMCE9PXNjcm9sbEJhcldpZHRoKXJldHVybiBzY3JvbGxCYXJXaWR0aDt2YXIgb3V0ZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7b3V0ZXIuY2xhc3NOYW1lPSJlbC1zY3JvbGxiYXJfX3dyYXAiLG91dGVyLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIsb3V0ZXIuc3R5bGUud2lkdGg9IjEwMHB4IixvdXRlci5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLG91dGVyLnN0eWxlLnRvcD0iLTk5OTlweCIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7dmFyIHdpZHRoTm9TY3JvbGw9b3V0ZXIub2Zmc2V0V2lkdGg7b3V0ZXIuc3R5bGUub3ZlcmZsb3c9InNjcm9sbCI7dmFyIGlubmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lubmVyLnN0eWxlLndpZHRoPSIxMDAlIixvdXRlci5hcHBlbmRDaGlsZChpbm5lcik7dmFyIHdpZHRoV2l0aFNjcm9sbD1pbm5lci5vZmZzZXRXaWR0aDtyZXR1cm4gb3V0ZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvdXRlciksc2Nyb2xsQmFyV2lkdGg9d2lkdGhOb1Njcm9sbC13aWR0aFdpdGhTY3JvbGx9O3ZhciBvYmosX3Z1ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLdzVyIiksX3Z1ZTI9KG9iaj1fdnVlKSYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07dmFyIHNjcm9sbEJhcldpZHRoPXZvaWQgMH0sIjZYVHgiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITA7dmFyIG9iaixfdnVlPV9fd2VicGFja19yZXF1aXJlX18oIkt3NXIiKSxfdnVlMj0ob2JqPV92dWUpJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfSxfcG9wdXA9X193ZWJwYWNrX3JlcXVpcmVfXygiVVNoUSIpO3ZhciBQb3BwZXJKUz1fdnVlMi5kZWZhdWx0LnByb3RvdHlwZS4kaXNTZXJ2ZXI/ZnVuY3Rpb24oKXt9Ol9fd2VicGFja19yZXF1aXJlX18oIllXZGkiKSxzdG9wPWZ1bmN0aW9uKGUpe3JldHVybiBlLnN0b3BQcm9wYWdhdGlvbigpfTtleHBvcnRzLmRlZmF1bHQ9e3Byb3BzOnt0cmFuc2Zvcm1PcmlnaW46e3R5cGU6W0Jvb2xlYW4sU3RyaW5nXSxkZWZhdWx0OiEwfSxwbGFjZW1lbnQ6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImJvdHRvbSJ9LGJvdW5kYXJpZXNQYWRkaW5nOnt0eXBlOk51bWJlcixkZWZhdWx0OjV9LHJlZmVyZW5jZTp7fSxwb3BwZXI6e30sb2Zmc2V0OntkZWZhdWx0OjB9LHZhbHVlOkJvb2xlYW4sdmlzaWJsZUFycm93OkJvb2xlYW4sYXJyb3dPZmZzZXQ6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MzV9LGFwcGVuZFRvQm9keTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LHBvcHBlck9wdGlvbnM6e3R5cGU6T2JqZWN0LGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm57Z3B1QWNjZWxlcmF0aW9uOiExfX19fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3Nob3dQb3BwZXI6ITEsY3VycmVudFBsYWNlbWVudDoiIn19LHdhdGNoOnt2YWx1ZTp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odmFsKXt0aGlzLnNob3dQb3BwZXI9dmFsLHRoaXMuJGVtaXQoImlucHV0Iix2YWwpfX0sc2hvd1BvcHBlcjpmdW5jdGlvbih2YWwpe3RoaXMuZGlzYWJsZWR8fCh2YWw/dGhpcy51cGRhdGVQb3BwZXIoKTp0aGlzLmRlc3Ryb3lQb3BwZXIoKSx0aGlzLiRlbWl0KCJpbnB1dCIsdmFsKSl9fSxtZXRob2RzOntjcmVhdGVQb3BwZXI6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpcztpZighdGhpcy4kaXNTZXJ2ZXImJih0aGlzLmN1cnJlbnRQbGFjZW1lbnQ9dGhpcy5jdXJyZW50UGxhY2VtZW50fHx0aGlzLnBsYWNlbWVudCwvXih0b3B8Ym90dG9tfGxlZnR8cmlnaHQpKC1zdGFydHwtZW5kKT8kL2cudGVzdCh0aGlzLmN1cnJlbnRQbGFjZW1lbnQpKSl7dmFyIG9wdGlvbnM9dGhpcy5wb3BwZXJPcHRpb25zLHBvcHBlcj10aGlzLnBvcHBlckVsbT10aGlzLnBvcHBlckVsbXx8dGhpcy5wb3BwZXJ8fHRoaXMuJHJlZnMucG9wcGVyLHJlZmVyZW5jZT10aGlzLnJlZmVyZW5jZUVsbT10aGlzLnJlZmVyZW5jZUVsbXx8dGhpcy5yZWZlcmVuY2V8fHRoaXMuJHJlZnMucmVmZXJlbmNlOyFyZWZlcmVuY2UmJnRoaXMuJHNsb3RzLnJlZmVyZW5jZSYmdGhpcy4kc2xvdHMucmVmZXJlbmNlWzBdJiYocmVmZXJlbmNlPXRoaXMucmVmZXJlbmNlRWxtPXRoaXMuJHNsb3RzLnJlZmVyZW5jZVswXS5lbG0pLHBvcHBlciYmcmVmZXJlbmNlJiYodGhpcy52aXNpYmxlQXJyb3cmJnRoaXMuYXBwZW5kQXJyb3cocG9wcGVyKSx0aGlzLmFwcGVuZFRvQm9keSYmZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnBvcHBlckVsbSksdGhpcy5wb3BwZXJKUyYmdGhpcy5wb3BwZXJKUy5kZXN0cm95JiZ0aGlzLnBvcHBlckpTLmRlc3Ryb3koKSxvcHRpb25zLnBsYWNlbWVudD10aGlzLmN1cnJlbnRQbGFjZW1lbnQsb3B0aW9ucy5vZmZzZXQ9dGhpcy5vZmZzZXQsb3B0aW9ucy5hcnJvd09mZnNldD10aGlzLmFycm93T2Zmc2V0LHRoaXMucG9wcGVySlM9bmV3IFBvcHBlckpTKHJlZmVyZW5jZSxwb3BwZXIsb3B0aW9ucyksdGhpcy5wb3BwZXJKUy5vbkNyZWF0ZShmdW5jdGlvbihfKXtfdGhpcy4kZW1pdCgiY3JlYXRlZCIsX3RoaXMpLF90aGlzLnJlc2V0VHJhbnNmb3JtT3JpZ2luKCksX3RoaXMuJG5leHRUaWNrKF90aGlzLnVwZGF0ZVBvcHBlcil9KSwiZnVuY3Rpb24iPT10eXBlb2Ygb3B0aW9ucy5vblVwZGF0ZSYmdGhpcy5wb3BwZXJKUy5vblVwZGF0ZShvcHRpb25zLm9uVXBkYXRlKSx0aGlzLnBvcHBlckpTLl9wb3BwZXIuc3R5bGUuekluZGV4PV9wb3B1cC5Qb3B1cE1hbmFnZXIubmV4dFpJbmRleCgpLHRoaXMucG9wcGVyRWxtLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixzdG9wKSl9fSx1cGRhdGVQb3BwZXI6ZnVuY3Rpb24oKXt2YXIgcG9wcGVySlM9dGhpcy5wb3BwZXJKUztwb3BwZXJKUz8ocG9wcGVySlMudXBkYXRlKCkscG9wcGVySlMuX3BvcHBlciYmKHBvcHBlckpTLl9wb3BwZXIuc3R5bGUuekluZGV4PV9wb3B1cC5Qb3B1cE1hbmFnZXIubmV4dFpJbmRleCgpKSk6dGhpcy5jcmVhdGVQb3BwZXIoKX0sZG9EZXN0cm95OmZ1bmN0aW9uKGZvcmNlRGVzdHJveSl7IXRoaXMucG9wcGVySlN8fHRoaXMuc2hvd1BvcHBlciYmIWZvcmNlRGVzdHJveXx8KHRoaXMucG9wcGVySlMuZGVzdHJveSgpLHRoaXMucG9wcGVySlM9bnVsbCl9LGRlc3Ryb3lQb3BwZXI6ZnVuY3Rpb24oKXt0aGlzLnBvcHBlckpTJiZ0aGlzLnJlc2V0VHJhbnNmb3JtT3JpZ2luKCl9LHJlc2V0VHJhbnNmb3JtT3JpZ2luOmZ1bmN0aW9uKCl7aWYodGhpcy50cmFuc2Zvcm1PcmlnaW4pe3ZhciBwbGFjZW1lbnQ9dGhpcy5wb3BwZXJKUy5fcG9wcGVyLmdldEF0dHJpYnV0ZSgieC1wbGFjZW1lbnQiKS5zcGxpdCgiLSIpWzBdLG9yaWdpbj17dG9wOiJib3R0b20iLGJvdHRvbToidG9wIixsZWZ0OiJyaWdodCIscmlnaHQ6ImxlZnQifVtwbGFjZW1lbnRdO3RoaXMucG9wcGVySlMuX3BvcHBlci5zdHlsZS50cmFuc2Zvcm1PcmlnaW49InN0cmluZyI9PXR5cGVvZiB0aGlzLnRyYW5zZm9ybU9yaWdpbj90aGlzLnRyYW5zZm9ybU9yaWdpbjotMTxbInRvcCIsImJvdHRvbSJdLmluZGV4T2YocGxhY2VtZW50KT8iY2VudGVyICIrb3JpZ2luOm9yaWdpbisiIGNlbnRlciJ9fSxhcHBlbmRBcnJvdzpmdW5jdGlvbihlbGVtZW50KXt2YXIgaGFzaD12b2lkIDA7aWYoIXRoaXMuYXBwZW5kZWQpe2Zvcih2YXIgaXRlbSBpbiB0aGlzLmFwcGVuZGVkPSEwLGVsZW1lbnQuYXR0cmlidXRlcylpZigvXl92LS8udGVzdChlbGVtZW50LmF0dHJpYnV0ZXNbaXRlbV0ubmFtZSkpe2hhc2g9ZWxlbWVudC5hdHRyaWJ1dGVzW2l0ZW1dLm5hbWU7YnJlYWt9dmFyIGFycm93PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2hhc2gmJmFycm93LnNldEF0dHJpYnV0ZShoYXNoLCIiKSxhcnJvdy5zZXRBdHRyaWJ1dGUoIngtYXJyb3ciLCIiKSxhcnJvdy5jbGFzc05hbWU9InBvcHBlcl9fYXJyb3ciLGVsZW1lbnQuYXBwZW5kQ2hpbGQoYXJyb3cpfX19LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRvRGVzdHJveSghMCksdGhpcy5wb3BwZXJFbG0mJnRoaXMucG9wcGVyRWxtLnBhcmVudE5vZGU9PT1kb2N1bWVudC5ib2R5JiYodGhpcy5wb3BwZXJFbG0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLHN0b3ApLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5wb3BwZXJFbG0pKX0sZGVhY3RpdmF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLiRvcHRpb25zLmJlZm9yZURlc3Ryb3lbMF0uY2FsbCh0aGlzKX19fSwiN3QvZyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obW9kdWxlcyl7dmFyIGluc3RhbGxlZE1vZHVsZXM9e307ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7dmFyIG1vZHVsZT1pbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXT17aTptb2R1bGVJZCxsOiExLGV4cG9ydHM6e319O3JldHVybiBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLG1vZHVsZSxtb2R1bGUuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxtb2R1bGUubD0hMCxtb2R1bGUuZXhwb3J0c31yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPW1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5jPWluc3RhbGxlZE1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGV4cG9ydHMsbmFtZSxnZXR0ZXIpe19fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLG5hbWUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxuYW1lLHtlbnVtZXJhYmxlOiEwLGdldDpnZXR0ZXJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5yPWZ1bmN0aW9uKGV4cG9ydHMpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LF9fd2VicGFja19yZXF1aXJlX18udD1mdW5jdGlvbih2YWx1ZSxtb2RlKXtpZigxJm1vZGUmJih2YWx1ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKSksOCZtb2RlKXJldHVybiB2YWx1ZTtpZig0Jm1vZGUmJiJvYmplY3QiPT10eXBlb2YgdmFsdWUmJnZhbHVlJiZ2YWx1ZS5fX2VzTW9kdWxlKXJldHVybiB2YWx1ZTt2YXIgbnM9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dmFsdWV9KSwyJm1vZGUmJiJzdHJpbmciIT10eXBlb2YgdmFsdWUpZm9yKHZhciBrZXkgaW4gdmFsdWUpX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLGtleSxmdW5jdGlvbihrZXkpe3JldHVybiB2YWx1ZVtrZXldfS5iaW5kKG51bGwsa2V5KSk7cmV0dXJuIG5zfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24obW9kdWxlKXt2YXIgZ2V0dGVyPW1vZHVsZSYmbW9kdWxlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZX07cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsImEiLGdldHRlciksZ2V0dGVyfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24ob2JqZWN0LHByb3BlcnR5KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iL2Rpc3QvIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz04Mil9KHswOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnQoc2NyaXB0RXhwb3J0cyxyZW5kZXIsc3RhdGljUmVuZGVyRm5zLGZ1bmN0aW9uYWxUZW1wbGF0ZSxpbmplY3RTdHlsZXMsc2NvcGVJZCxtb2R1bGVJZGVudGlmaWVyLHNoYWRvd01vZGUpe3ZhciBob29rLG9wdGlvbnM9ImZ1bmN0aW9uIj09dHlwZW9mIHNjcmlwdEV4cG9ydHM/c2NyaXB0RXhwb3J0cy5vcHRpb25zOnNjcmlwdEV4cG9ydHM7aWYocmVuZGVyJiYob3B0aW9ucy5yZW5kZXI9cmVuZGVyLG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zPXN0YXRpY1JlbmRlckZucyxvcHRpb25zLl9jb21waWxlZD0hMCksZnVuY3Rpb25hbFRlbXBsYXRlJiYob3B0aW9ucy5mdW5jdGlvbmFsPSEwKSxzY29wZUlkJiYob3B0aW9ucy5fc2NvcGVJZD0iZGF0YS12LSIrc2NvcGVJZCksbW9kdWxlSWRlbnRpZmllcj8oaG9vaz1mdW5jdGlvbihjb250ZXh0KXsoY29udGV4dD1jb250ZXh0fHx0aGlzLiR2bm9kZSYmdGhpcy4kdm5vZGUuc3NyQ29udGV4dHx8dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LiR2bm9kZSYmdGhpcy5wYXJlbnQuJHZub2RlLnNzckNvbnRleHQpfHwidW5kZWZpbmVkIj09dHlwZW9mIF9fVlVFX1NTUl9DT05URVhUX198fChjb250ZXh0PV9fVlVFX1NTUl9DT05URVhUX18pLGluamVjdFN0eWxlcyYmaW5qZWN0U3R5bGVzLmNhbGwodGhpcyxjb250ZXh0KSxjb250ZXh0JiZjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cyYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMuYWRkKG1vZHVsZUlkZW50aWZpZXIpfSxvcHRpb25zLl9zc3JSZWdpc3Rlcj1ob29rKTppbmplY3RTdHlsZXMmJihob29rPXNoYWRvd01vZGU/ZnVuY3Rpb24oKXtpbmplY3RTdHlsZXMuY2FsbCh0aGlzLHRoaXMuJHJvb3QuJG9wdGlvbnMuc2hhZG93Um9vdCl9OmluamVjdFN0eWxlcyksaG9vaylpZihvcHRpb25zLmZ1bmN0aW9uYWwpe29wdGlvbnMuX2luamVjdFN0eWxlcz1ob29rO3ZhciBvcmlnaW5hbFJlbmRlcj1vcHRpb25zLnJlbmRlcjtvcHRpb25zLnJlbmRlcj1mdW5jdGlvbihoLGNvbnRleHQpe3JldHVybiBob29rLmNhbGwoY29udGV4dCksb3JpZ2luYWxSZW5kZXIoaCxjb250ZXh0KX19ZWxzZXt2YXIgZXhpc3Rpbmc9b3B0aW9ucy5iZWZvcmVDcmVhdGU7b3B0aW9ucy5iZWZvcmVDcmVhdGU9ZXhpc3Rpbmc/W10uY29uY2F0KGV4aXN0aW5nLGhvb2spOltob29rXX1yZXR1cm57ZXhwb3J0czpzY3JpcHRFeHBvcnRzLG9wdGlvbnM6b3B0aW9uc319X193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImEiLGZ1bmN0aW9uKCl7cmV0dXJuIG5vcm1hbGl6ZUNvbXBvbmVudH0pfSw4MjpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO3ZhciByZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJidXR0b24iLHtzdGF0aWNDbGFzczoiZWwtYnV0dG9uIixjbGFzczpbX3ZtLnR5cGU/ImVsLWJ1dHRvbi0tIitfdm0udHlwZToiIixfdm0uYnV0dG9uU2l6ZT8iZWwtYnV0dG9uLS0iK192bS5idXR0b25TaXplOiIiLHsiaXMtZGlzYWJsZWQiOl92bS5idXR0b25EaXNhYmxlZCwiaXMtbG9hZGluZyI6X3ZtLmxvYWRpbmcsImlzLXBsYWluIjpfdm0ucGxhaW4sImlzLXJvdW5kIjpfdm0ucm91bmQsImlzLWNpcmNsZSI6X3ZtLmNpcmNsZX1dLGF0dHJzOntkaXNhYmxlZDpfdm0uYnV0dG9uRGlzYWJsZWR8fF92bS5sb2FkaW5nLGF1dG9mb2N1czpfdm0uYXV0b2ZvY3VzLHR5cGU6X3ZtLm5hdGl2ZVR5cGV9LG9uOntjbGljazpfdm0uaGFuZGxlQ2xpY2t9fSxbX3ZtLmxvYWRpbmc/X2MoImkiLHtzdGF0aWNDbGFzczoiZWwtaWNvbi1sb2FkaW5nIn0pOl92bS5fZSgpLF92bS5pY29uJiYhX3ZtLmxvYWRpbmc/X2MoImkiLHtjbGFzczpfdm0uaWNvbn0pOl92bS5fZSgpLF92bS4kc2xvdHMuZGVmYXVsdD9fYygic3BhbiIsW192bS5fdCgiZGVmYXVsdCIpXSwyKTpfdm0uX2UoKV0pfTtyZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgc3JjX2J1dHRvbnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzXz17bmFtZToiRWxCdXR0b24iLGluamVjdDp7ZWxGb3JtOntkZWZhdWx0OiIifSxlbEZvcm1JdGVtOntkZWZhdWx0OiIifX0scHJvcHM6e3R5cGU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImRlZmF1bHQifSxzaXplOlN0cmluZyxpY29uOnt0eXBlOlN0cmluZyxkZWZhdWx0OiIifSxuYXRpdmVUeXBlOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJidXR0b24ifSxsb2FkaW5nOkJvb2xlYW4sZGlzYWJsZWQ6Qm9vbGVhbixwbGFpbjpCb29sZWFuLGF1dG9mb2N1czpCb29sZWFuLHJvdW5kOkJvb2xlYW4sY2lyY2xlOkJvb2xlYW59LGNvbXB1dGVkOntfZWxGb3JtSXRlbVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5lbEZvcm1JdGVtfHx7fSkuZWxGb3JtSXRlbVNpemV9LGJ1dHRvblNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfHx0aGlzLl9lbEZvcm1JdGVtU2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfSxidXR0b25EaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGVkfHwodGhpcy5lbEZvcm18fHt9KS5kaXNhYmxlZH19LG1ldGhvZHM6e2hhbmRsZUNsaWNrOmZ1bmN0aW9uKGV2dCl7dGhpcy4kZW1pdCgiY2xpY2siLGV2dCl9fX0sY29tcG9uZW50Tm9ybWFsaXplcj1fX3dlYnBhY2tfcmVxdWlyZV9fKDApLGNvbXBvbmVudD1PYmplY3QoY29tcG9uZW50Tm9ybWFsaXplci5hKShzcmNfYnV0dG9udnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfLHJlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9idXR0b24vc3JjL2J1dHRvbi52dWUiO3ZhciBzcmNfYnV0dG9uPWNvbXBvbmVudC5leHBvcnRzO3NyY19idXR0b24uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc3JjX2J1dHRvbi5uYW1lLHNyY19idXR0b24pfTtfX3dlYnBhY2tfZXhwb3J0c19fLmRlZmF1bHQ9c3JjX2J1dHRvbn19KX0sODYwNjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihtb2R1bGVzKXt2YXIgaW5zdGFsbGVkTW9kdWxlcz17fTtmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKXtpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czt2YXIgbW9kdWxlPWluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdPXtpOm1vZHVsZUlkLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsbW9kdWxlLG1vZHVsZS5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLG1vZHVsZS5sPSEwLG1vZHVsZS5leHBvcnRzfXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLm09bW9kdWxlcyxfX3dlYnBhY2tfcmVxdWlyZV9fLmM9aW5zdGFsbGVkTW9kdWxlcyxfX3dlYnBhY2tfcmVxdWlyZV9fLmQ9ZnVuY3Rpb24oZXhwb3J0cyxuYW1lLGdldHRlcil7X193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsbmFtZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLG5hbWUse2VudW1lcmFibGU6ITAsZ2V0OmdldHRlcn0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnI9ZnVuY3Rpb24oZXhwb3J0cyl7InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy50PWZ1bmN0aW9uKHZhbHVlLG1vZGUpe2lmKDEmbW9kZSYmKHZhbHVlPV9fd2VicGFja19yZXF1aXJlX18odmFsdWUpKSw4Jm1vZGUpcmV0dXJuIHZhbHVlO2lmKDQmbW9kZSYmIm9iamVjdCI9PXR5cGVvZiB2YWx1ZSYmdmFsdWUmJnZhbHVlLl9fZXNNb2R1bGUpcmV0dXJuIHZhbHVlO3ZhciBucz1PYmplY3QuY3JlYXRlKG51bGwpO2lmKF9fd2VicGFja19yZXF1aXJlX18ucihucyksT2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCJkZWZhdWx0Iix7ZW51bWVyYWJsZTohMCx2YWx1ZTp2YWx1ZX0pLDImbW9kZSYmInN0cmluZyIhPXR5cGVvZiB2YWx1ZSlmb3IodmFyIGtleSBpbiB2YWx1ZSlfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsa2V5LGZ1bmN0aW9uKGtleSl7cmV0dXJuIHZhbHVlW2tleV19LmJpbmQobnVsbCxrZXkpKTtyZXR1cm4gbnN9LF9fd2VicGFja19yZXF1aXJlX18ubj1mdW5jdGlvbihtb2R1bGUpe3ZhciBnZXR0ZXI9bW9kdWxlJiZtb2R1bGUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBtb2R1bGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlfTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwiYSIsZ2V0dGVyKSxnZXR0ZXJ9LF9fd2VicGFja19yZXF1aXJlX18ubz1mdW5jdGlvbihvYmplY3QscHJvcGVydHkpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LHByb3BlcnR5KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5wPSIvZGlzdC8iLF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTYxKX0oezA6ZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG5vcm1hbGl6ZUNvbXBvbmVudChzY3JpcHRFeHBvcnRzLHJlbmRlcixzdGF0aWNSZW5kZXJGbnMsZnVuY3Rpb25hbFRlbXBsYXRlLGluamVjdFN0eWxlcyxzY29wZUlkLG1vZHVsZUlkZW50aWZpZXIsc2hhZG93TW9kZSl7dmFyIGhvb2ssb3B0aW9ucz0iZnVuY3Rpb24iPT10eXBlb2Ygc2NyaXB0RXhwb3J0cz9zY3JpcHRFeHBvcnRzLm9wdGlvbnM6c2NyaXB0RXhwb3J0cztpZihyZW5kZXImJihvcHRpb25zLnJlbmRlcj1yZW5kZXIsb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnM9c3RhdGljUmVuZGVyRm5zLG9wdGlvbnMuX2NvbXBpbGVkPSEwKSxmdW5jdGlvbmFsVGVtcGxhdGUmJihvcHRpb25zLmZ1bmN0aW9uYWw9ITApLHNjb3BlSWQmJihvcHRpb25zLl9zY29wZUlkPSJkYXRhLXYtIitzY29wZUlkKSxtb2R1bGVJZGVudGlmaWVyPyhob29rPWZ1bmN0aW9uKGNvbnRleHQpeyhjb250ZXh0PWNvbnRleHR8fHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fHx0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuJHZub2RlJiZ0aGlzLnBhcmVudC4kdm5vZGUuc3NyQ29udGV4dCl8fCJ1bmRlZmluZWQiPT10eXBlb2YgX19WVUVfU1NSX0NPTlRFWFRfX3x8KGNvbnRleHQ9X19WVUVfU1NSX0NPTlRFWFRfXyksaW5qZWN0U3R5bGVzJiZpbmplY3RTdHlsZXMuY2FsbCh0aGlzLGNvbnRleHQpLGNvbnRleHQmJmNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzJiZjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cy5hZGQobW9kdWxlSWRlbnRpZmllcil9LG9wdGlvbnMuX3NzclJlZ2lzdGVyPWhvb2spOmluamVjdFN0eWxlcyYmKGhvb2s9c2hhZG93TW9kZT9mdW5jdGlvbigpe2luamVjdFN0eWxlcy5jYWxsKHRoaXMsdGhpcy4kcm9vdC4kb3B0aW9ucy5zaGFkb3dSb290KX06aW5qZWN0U3R5bGVzKSxob29rKWlmKG9wdGlvbnMuZnVuY3Rpb25hbCl7b3B0aW9ucy5faW5qZWN0U3R5bGVzPWhvb2s7dmFyIG9yaWdpbmFsUmVuZGVyPW9wdGlvbnMucmVuZGVyO29wdGlvbnMucmVuZGVyPWZ1bmN0aW9uKGgsY29udGV4dCl7cmV0dXJuIGhvb2suY2FsbChjb250ZXh0KSxvcmlnaW5hbFJlbmRlcihoLGNvbnRleHQpfX1lbHNle3ZhciBleGlzdGluZz1vcHRpb25zLmJlZm9yZUNyZWF0ZTtvcHRpb25zLmJlZm9yZUNyZWF0ZT1leGlzdGluZz9bXS5jb25jYXQoZXhpc3RpbmcsaG9vayk6W2hvb2tdfXJldHVybntleHBvcnRzOnNjcmlwdEV4cG9ydHMsb3B0aW9uczpvcHRpb25zfX1fX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiYSIsZnVuY3Rpb24oKXtyZXR1cm4gbm9ybWFsaXplQ29tcG9uZW50fSl9LDEwOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLN1hSIil9LDM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIjBCREgiKX0sNjE6ZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO19fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTt2YXIgcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7Y2xhc3M6WyJ0ZXh0YXJlYSI9PT1fdm0udHlwZT8iZWwtdGV4dGFyZWEiOiJlbC1pbnB1dCIsX3ZtLmlucHV0U2l6ZT8iZWwtaW5wdXQtLSIrX3ZtLmlucHV0U2l6ZToiIix7ImlzLWRpc2FibGVkIjpfdm0uaW5wdXREaXNhYmxlZCwiZWwtaW5wdXQtZ3JvdXAiOl92bS4kc2xvdHMucHJlcGVuZHx8X3ZtLiRzbG90cy5hcHBlbmQsImVsLWlucHV0LWdyb3VwLS1hcHBlbmQiOl92bS4kc2xvdHMuYXBwZW5kLCJlbC1pbnB1dC1ncm91cC0tcHJlcGVuZCI6X3ZtLiRzbG90cy5wcmVwZW5kLCJlbC1pbnB1dC0tcHJlZml4Ijpfdm0uJHNsb3RzLnByZWZpeHx8X3ZtLnByZWZpeEljb24sImVsLWlucHV0LS1zdWZmaXgiOl92bS4kc2xvdHMuc3VmZml4fHxfdm0uc3VmZml4SWNvbnx8X3ZtLmNsZWFyYWJsZXx8X3ZtLnNob3dQYXNzd29yZH1dLG9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhvdmVyaW5nPSEwfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhvdmVyaW5nPSExfX19LFsidGV4dGFyZWEiIT09X3ZtLnR5cGU/W192bS4kc2xvdHMucHJlcGVuZD9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWlucHV0LWdyb3VwX19wcmVwZW5kIn0sW192bS5fdCgicHJlcGVuZCIpXSwyKTpfdm0uX2UoKSwidGV4dGFyZWEiIT09X3ZtLnR5cGU/X2MoImlucHV0Iixfdm0uX2Ioe3JlZjoiaW5wdXQiLHN0YXRpY0NsYXNzOiJlbC1pbnB1dF9faW5uZXIiLGF0dHJzOnt0YWJpbmRleDpfdm0udGFiaW5kZXgsdHlwZTpfdm0uc2hvd1Bhc3N3b3JkP192bS5wYXNzd29yZFZpc2libGU/InRleHQiOiJwYXNzd29yZCI6X3ZtLnR5cGUsZGlzYWJsZWQ6X3ZtLmlucHV0RGlzYWJsZWQscmVhZG9ubHk6X3ZtLnJlYWRvbmx5LGF1dG9jb21wbGV0ZTpfdm0uYXV0b0NvbXBsZXRlfHxfdm0uYXV0b2NvbXBsZXRlLCJhcmlhLWxhYmVsIjpfdm0ubGFiZWx9LGRvbVByb3BzOnt2YWx1ZTpfdm0ubmF0aXZlSW5wdXRWYWx1ZX0sb246e2NvbXBvc2l0aW9uc3RhcnQ6X3ZtLmhhbmRsZUNvbXBvc2l0aW9uLGNvbXBvc2l0aW9udXBkYXRlOl92bS5oYW5kbGVDb21wb3NpdGlvbixjb21wb3NpdGlvbmVuZDpfdm0uaGFuZGxlQ29tcG9zaXRpb24saW5wdXQ6X3ZtLmhhbmRsZUlucHV0LGZvY3VzOl92bS5oYW5kbGVGb2N1cyxibHVyOl92bS5oYW5kbGVCbHVyLGNoYW5nZTpfdm0uaGFuZGxlQ2hhbmdlfX0sImlucHV0Iixfdm0uJGF0dHJzLCExKSk6X3ZtLl9lKCksX3ZtLiRzbG90cy5wcmVmaXh8fF92bS5wcmVmaXhJY29uP19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWlucHV0X19wcmVmaXgifSxbX3ZtLl90KCJwcmVmaXgiKSxfdm0ucHJlZml4SWNvbj9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pbnB1dF9faWNvbiIsY2xhc3M6X3ZtLnByZWZpeEljb259KTpfdm0uX2UoKV0sMik6X3ZtLl9lKCksX3ZtLiRzbG90cy5zdWZmaXh8fF92bS5zdWZmaXhJY29ufHxfdm0uc2hvd0NsZWFyfHxfdm0uc2hvd1Bhc3N3b3JkfHxfdm0udmFsaWRhdGVTdGF0ZSYmX3ZtLm5lZWRTdGF0dXNJY29uP19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWlucHV0X19zdWZmaXgifSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtaW5wdXRfX3N1ZmZpeC1pbm5lciJ9LFtfdm0uc2hvd0NsZWFyJiZfdm0uc2hvd1B3ZFZpc2libGU/X3ZtLl9lKCk6W192bS5fdCgic3VmZml4IiksX3ZtLnN1ZmZpeEljb24/X2MoImkiLHtzdGF0aWNDbGFzczoiZWwtaW5wdXRfX2ljb24iLGNsYXNzOl92bS5zdWZmaXhJY29ufSk6X3ZtLl9lKCldLF92bS5zaG93Q2xlYXI/X2MoImkiLHtzdGF0aWNDbGFzczoiZWwtaW5wdXRfX2ljb24gZWwtaWNvbi1jaXJjbGUtY2xvc2UgZWwtaW5wdXRfX2NsZWFyIixvbjp7Y2xpY2s6X3ZtLmNsZWFyfX0pOl92bS5fZSgpLF92bS5zaG93UHdkVmlzaWJsZT9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pbnB1dF9faWNvbiBlbC1pY29uLXZpZXcgZWwtaW5wdXRfX2NsZWFyIixvbjp7Y2xpY2s6X3ZtLmhhbmRsZVBhc3N3b3JkVmlzaWJsZX19KTpfdm0uX2UoKV0sMiksX3ZtLnZhbGlkYXRlU3RhdGU/X2MoImkiLHtzdGF0aWNDbGFzczoiZWwtaW5wdXRfX2ljb24iLGNsYXNzOlsiZWwtaW5wdXRfX3ZhbGlkYXRlSWNvbiIsX3ZtLnZhbGlkYXRlSWNvbl19KTpfdm0uX2UoKV0pOl92bS5fZSgpLF92bS4kc2xvdHMuYXBwZW5kP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtaW5wdXQtZ3JvdXBfX2FwcGVuZCJ9LFtfdm0uX3QoImFwcGVuZCIpXSwyKTpfdm0uX2UoKV06X2MoInRleHRhcmVhIixfdm0uX2Ioe3JlZjoidGV4dGFyZWEiLHN0YXRpY0NsYXNzOiJlbC10ZXh0YXJlYV9faW5uZXIiLHN0eWxlOl92bS50ZXh0YXJlYVN0eWxlLGF0dHJzOnt0YWJpbmRleDpfdm0udGFiaW5kZXgsZGlzYWJsZWQ6X3ZtLmlucHV0RGlzYWJsZWQscmVhZG9ubHk6X3ZtLnJlYWRvbmx5LGF1dG9jb21wbGV0ZTpfdm0uYXV0b0NvbXBsZXRlfHxfdm0uYXV0b2NvbXBsZXRlLCJhcmlhLWxhYmVsIjpfdm0ubGFiZWx9LGRvbVByb3BzOnt2YWx1ZTpfdm0ubmF0aXZlSW5wdXRWYWx1ZX0sb246e2NvbXBvc2l0aW9uc3RhcnQ6X3ZtLmhhbmRsZUNvbXBvc2l0aW9uLGNvbXBvc2l0aW9udXBkYXRlOl92bS5oYW5kbGVDb21wb3NpdGlvbixjb21wb3NpdGlvbmVuZDpfdm0uaGFuZGxlQ29tcG9zaXRpb24saW5wdXQ6X3ZtLmhhbmRsZUlucHV0LGZvY3VzOl92bS5oYW5kbGVGb2N1cyxibHVyOl92bS5oYW5kbGVCbHVyLGNoYW5nZTpfdm0uaGFuZGxlQ2hhbmdlfX0sInRleHRhcmVhIixfdm0uJGF0dHJzLCExKSldLDIpfTtyZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgZW1pdHRlcl89X193ZWJwYWNrX3JlcXVpcmVfXygzKSxlbWl0dGVyX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGVtaXR0ZXJfKSxtaWdyYXRpbmdfPV9fd2VicGFja19yZXF1aXJlX18oMTApLG1pZ3JhdGluZ19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihtaWdyYXRpbmdfKSxoaWRkZW5UZXh0YXJlYT12b2lkIDAsQ09OVEVYVF9TVFlMRT1bImxldHRlci1zcGFjaW5nIiwibGluZS1oZWlnaHQiLCJwYWRkaW5nLXRvcCIsInBhZGRpbmctYm90dG9tIiwiZm9udC1mYW1pbHkiLCJmb250LXdlaWdodCIsImZvbnQtc2l6ZSIsInRleHQtcmVuZGVyaW5nIiwidGV4dC10cmFuc2Zvcm0iLCJ3aWR0aCIsInRleHQtaW5kZW50IiwicGFkZGluZy1sZWZ0IiwicGFkZGluZy1yaWdodCIsImJvcmRlci13aWR0aCIsImJveC1zaXppbmciXTtmdW5jdGlvbiBjYWxjVGV4dGFyZWFIZWlnaHQodGFyZ2V0RWxlbWVudCl7dmFyIG1pblJvd3M9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjEsbWF4Um93cz0yPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06bnVsbDtoaWRkZW5UZXh0YXJlYXx8KGhpZGRlblRleHRhcmVhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIiksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChoaWRkZW5UZXh0YXJlYSkpO3ZhciBfY2FsY3VsYXRlTm9kZVN0eWxpbmc9ZnVuY3Rpb24odGFyZ2V0RWxlbWVudCl7dmFyIHN0eWxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldEVsZW1lbnQpLGJveFNpemluZz1zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCJib3gtc2l6aW5nIikscGFkZGluZ1NpemU9cGFyc2VGbG9hdChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLWJvdHRvbSIpKStwYXJzZUZsb2F0KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctdG9wIikpLGJvcmRlclNpemU9cGFyc2VGbG9hdChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCJib3JkZXItYm90dG9tLXdpZHRoIikpK3BhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgiYm9yZGVyLXRvcC13aWR0aCIpKTtyZXR1cm57Y29udGV4dFN0eWxlOkNPTlRFWFRfU1RZTEUubWFwKGZ1bmN0aW9uKG5hbWUpe3JldHVybiBuYW1lKyI6IitzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpfSkuam9pbigiOyIpLHBhZGRpbmdTaXplOnBhZGRpbmdTaXplLGJvcmRlclNpemU6Ym9yZGVyU2l6ZSxib3hTaXppbmc6Ym94U2l6aW5nfX0odGFyZ2V0RWxlbWVudCkscGFkZGluZ1NpemU9X2NhbGN1bGF0ZU5vZGVTdHlsaW5nLnBhZGRpbmdTaXplLGJvcmRlclNpemU9X2NhbGN1bGF0ZU5vZGVTdHlsaW5nLmJvcmRlclNpemUsYm94U2l6aW5nPV9jYWxjdWxhdGVOb2RlU3R5bGluZy5ib3hTaXppbmcsY29udGV4dFN0eWxlPV9jYWxjdWxhdGVOb2RlU3R5bGluZy5jb250ZXh0U3R5bGU7aGlkZGVuVGV4dGFyZWEuc2V0QXR0cmlidXRlKCJzdHlsZSIsY29udGV4dFN0eWxlKyI7XG4gIGhlaWdodDowICFpbXBvcnRhbnQ7XG4gIHZpc2liaWxpdHk6aGlkZGVuICFpbXBvcnRhbnQ7XG4gIG92ZXJmbG93OmhpZGRlbiAhaW1wb3J0YW50O1xuICBwb3NpdGlvbjphYnNvbHV0ZSAhaW1wb3J0YW50O1xuICB6LWluZGV4Oi0xMDAwICFpbXBvcnRhbnQ7XG4gIHRvcDowICFpbXBvcnRhbnQ7XG4gIHJpZ2h0OjAgIWltcG9ydGFudFxuIiksaGlkZGVuVGV4dGFyZWEudmFsdWU9dGFyZ2V0RWxlbWVudC52YWx1ZXx8dGFyZ2V0RWxlbWVudC5wbGFjZWhvbGRlcnx8IiI7dmFyIGhlaWdodD1oaWRkZW5UZXh0YXJlYS5zY3JvbGxIZWlnaHQscmVzdWx0PXt9OyJib3JkZXItYm94Ij09PWJveFNpemluZz9oZWlnaHQrPWJvcmRlclNpemU6ImNvbnRlbnQtYm94Ij09PWJveFNpemluZyYmKGhlaWdodC09cGFkZGluZ1NpemUpLGhpZGRlblRleHRhcmVhLnZhbHVlPSIiO3ZhciBzaW5nbGVSb3dIZWlnaHQ9aGlkZGVuVGV4dGFyZWEuc2Nyb2xsSGVpZ2h0LXBhZGRpbmdTaXplO2lmKG51bGwhPT1taW5Sb3dzKXt2YXIgbWluSGVpZ2h0PXNpbmdsZVJvd0hlaWdodCptaW5Sb3dzOyJib3JkZXItYm94Ij09PWJveFNpemluZyYmKG1pbkhlaWdodD1taW5IZWlnaHQrcGFkZGluZ1NpemUrYm9yZGVyU2l6ZSksaGVpZ2h0PU1hdGgubWF4KG1pbkhlaWdodCxoZWlnaHQpLHJlc3VsdC5taW5IZWlnaHQ9bWluSGVpZ2h0KyJweCJ9aWYobnVsbCE9PW1heFJvd3Mpe3ZhciBtYXhIZWlnaHQ9c2luZ2xlUm93SGVpZ2h0Km1heFJvd3M7ImJvcmRlci1ib3giPT09Ym94U2l6aW5nJiYobWF4SGVpZ2h0PW1heEhlaWdodCtwYWRkaW5nU2l6ZStib3JkZXJTaXplKSxoZWlnaHQ9TWF0aC5taW4obWF4SGVpZ2h0LGhlaWdodCl9cmV0dXJuIHJlc3VsdC5oZWlnaHQ9aGVpZ2h0KyJweCIsaGlkZGVuVGV4dGFyZWEucGFyZW50Tm9kZSYmaGlkZGVuVGV4dGFyZWEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChoaWRkZW5UZXh0YXJlYSksaGlkZGVuVGV4dGFyZWE9bnVsbCxyZXN1bHR9dmFyIG1lcmdlXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDgpLG1lcmdlX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKG1lcmdlXyksc3JjX2lucHV0dnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfPXtuYW1lOiJFbElucHV0Iixjb21wb25lbnROYW1lOiJFbElucHV0IixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hLG1pZ3JhdGluZ19kZWZhdWx0LmFdLGluaGVyaXRBdHRyczohMSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn0sZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGV4dGFyZWFDYWxjU3R5bGU6e30saG92ZXJpbmc6ITEsZm9jdXNlZDohMSxpc09uQ29tcG9zaXRpb246ITEscGFzc3dvcmRWaXNpYmxlOiExfX0scHJvcHM6e3ZhbHVlOltTdHJpbmcsTnVtYmVyXSxzaXplOlN0cmluZyxyZXNpemU6U3RyaW5nLGZvcm06U3RyaW5nLGRpc2FibGVkOkJvb2xlYW4scmVhZG9ubHk6Qm9vbGVhbix0eXBlOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJ0ZXh0In0sYXV0b3NpemU6e3R5cGU6W0Jvb2xlYW4sT2JqZWN0XSxkZWZhdWx0OiExfSxhdXRvY29tcGxldGU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6Im9mZiJ9LGF1dG9Db21wbGV0ZTp7dHlwZTpTdHJpbmcsdmFsaWRhdG9yOmZ1bmN0aW9uKHZhbCl7cmV0dXJuITB9fSx2YWxpZGF0ZUV2ZW50Ont0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sc3VmZml4SWNvbjpTdHJpbmcscHJlZml4SWNvbjpTdHJpbmcsbGFiZWw6U3RyaW5nLGNsZWFyYWJsZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LHNob3dQYXNzd29yZDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LHRhYmluZGV4OlN0cmluZ30sY29tcHV0ZWQ6e19lbEZvcm1JdGVtU2l6ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmVsRm9ybUl0ZW18fHt9KS5lbEZvcm1JdGVtU2l6ZX0sdmFsaWRhdGVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsRm9ybUl0ZW0/dGhpcy5lbEZvcm1JdGVtLnZhbGlkYXRlU3RhdGU6IiJ9LG5lZWRTdGF0dXNJY29uOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmVsRm9ybSYmdGhpcy5lbEZvcm0uc3RhdHVzSWNvbn0sdmFsaWRhdGVJY29uOmZ1bmN0aW9uKCl7cmV0dXJue3ZhbGlkYXRpbmc6ImVsLWljb24tbG9hZGluZyIsc3VjY2VzczoiZWwtaWNvbi1jaXJjbGUtY2hlY2siLGVycm9yOiJlbC1pY29uLWNpcmNsZS1jbG9zZSJ9W3RoaXMudmFsaWRhdGVTdGF0ZV19LHRleHRhcmVhU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4gbWVyZ2VfZGVmYXVsdCgpKHt9LHRoaXMudGV4dGFyZWFDYWxjU3R5bGUse3Jlc2l6ZTp0aGlzLnJlc2l6ZX0pfSxpbnB1dFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfHx0aGlzLl9lbEZvcm1JdGVtU2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfSxpbnB1dERpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfSxuYXRpdmVJbnB1dFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnZhbHVlfHx2b2lkIDA9PT10aGlzLnZhbHVlPyIiOnRoaXMudmFsdWV9LHNob3dDbGVhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsZWFyYWJsZSYmIXRoaXMuaW5wdXREaXNhYmxlZCYmIXRoaXMucmVhZG9ubHkmJnRoaXMubmF0aXZlSW5wdXRWYWx1ZSYmKHRoaXMuZm9jdXNlZHx8dGhpcy5ob3ZlcmluZyl9LHNob3dQd2RWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hvd1Bhc3N3b3JkJiYhdGhpcy5pbnB1dERpc2FibGVkJiYhdGhpcy5yZWFkb25seSYmKCEhdGhpcy5uYXRpdmVJbnB1dFZhbHVlfHx0aGlzLmZvY3VzZWQpfX0sd2F0Y2g6e3ZhbHVlOmZ1bmN0aW9uKHZhbCl7dGhpcy4kbmV4dFRpY2sodGhpcy5yZXNpemVUZXh0YXJlYSksdGhpcy52YWxpZGF0ZUV2ZW50JiZ0aGlzLmRpc3BhdGNoKCJFbEZvcm1JdGVtIiwiZWwuZm9ybS5jaGFuZ2UiLFt2YWxdKX19LG1ldGhvZHM6e2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5nZXRJbnB1dCgpLmZvY3VzKCl9LGJsdXI6ZnVuY3Rpb24oKXt0aGlzLmdldElucHV0KCkuYmx1cigpfSxnZXRNaWdyYXRpbmdDb25maWc6ZnVuY3Rpb24oKXtyZXR1cm57cHJvcHM6e2ljb246Imljb24gaXMgcmVtb3ZlZCwgdXNlIHN1ZmZpeC1pY29uIC8gcHJlZml4LWljb24gaW5zdGVhZC4iLCJvbi1pY29uLWNsaWNrIjoib24taWNvbi1jbGljayBpcyByZW1vdmVkLiJ9LGV2ZW50czp7Y2xpY2s6ImNsaWNrIGlzIHJlbW92ZWQuIn19fSxoYW5kbGVCbHVyOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLmZvY3VzZWQ9ITEsdGhpcy4kZW1pdCgiYmx1ciIsZXZlbnQpLHRoaXMudmFsaWRhdGVFdmVudCYmdGhpcy5kaXNwYXRjaCgiRWxGb3JtSXRlbSIsImVsLmZvcm0uYmx1ciIsW3RoaXMudmFsdWVdKX0sc2VsZWN0OmZ1bmN0aW9uKCl7dGhpcy5nZXRJbnB1dCgpLnNlbGVjdCgpfSxyZXNpemVUZXh0YXJlYTpmdW5jdGlvbigpe2lmKCF0aGlzLiRpc1NlcnZlcil7dmFyIGF1dG9zaXplPXRoaXMuYXV0b3NpemU7aWYoInRleHRhcmVhIj09PXRoaXMudHlwZSlpZihhdXRvc2l6ZSl7dmFyIG1pblJvd3M9YXV0b3NpemUubWluUm93cyxtYXhSb3dzPWF1dG9zaXplLm1heFJvd3M7dGhpcy50ZXh0YXJlYUNhbGNTdHlsZT1jYWxjVGV4dGFyZWFIZWlnaHQodGhpcy4kcmVmcy50ZXh0YXJlYSxtaW5Sb3dzLG1heFJvd3MpfWVsc2UgdGhpcy50ZXh0YXJlYUNhbGNTdHlsZT17bWluSGVpZ2h0OmNhbGNUZXh0YXJlYUhlaWdodCh0aGlzLiRyZWZzLnRleHRhcmVhKS5taW5IZWlnaHR9fX0saGFuZGxlRm9jdXM6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuZm9jdXNlZD0hMCx0aGlzLiRlbWl0KCJmb2N1cyIsZXZlbnQpfSxoYW5kbGVDb21wb3NpdGlvbjpmdW5jdGlvbihldmVudCl7ImNvbXBvc2l0aW9uc3RhcnQiPT09ZXZlbnQudHlwZSYmKHRoaXMuaXNPbkNvbXBvc2l0aW9uPSEwKSwiY29tcG9zaXRpb25lbmQiPT09ZXZlbnQudHlwZSYmKHRoaXMuaXNPbkNvbXBvc2l0aW9uPSExLHRoaXMuaGFuZGxlSW5wdXQoZXZlbnQpKX0saGFuZGxlSW5wdXQ6ZnVuY3Rpb24oZXZlbnQpe3ZhciBfdGhpcz10aGlzO3RoaXMuaXNPbkNvbXBvc2l0aW9ufHxldmVudC50YXJnZXQudmFsdWUhPT10aGlzLm5hdGl2ZUlucHV0VmFsdWUmJih0aGlzLiRlbWl0KCJpbnB1dCIsZXZlbnQudGFyZ2V0LnZhbHVlKSx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzLmdldElucHV0KCkudmFsdWU9X3RoaXMudmFsdWV9KSl9LGhhbmRsZUNoYW5nZTpmdW5jdGlvbihldmVudCl7dGhpcy4kZW1pdCgiY2hhbmdlIixldmVudC50YXJnZXQudmFsdWUpfSxjYWxjSWNvbk9mZnNldDpmdW5jdGlvbihwbGFjZSl7dmFyIGVsTGlzdD1bXS5zbGljZS5jYWxsKHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIi5lbC1pbnB1dF9fIitwbGFjZSl8fFtdKTtpZihlbExpc3QubGVuZ3RoKXtmb3IodmFyIGVsPW51bGwsaT0wO2k8ZWxMaXN0Lmxlbmd0aDtpKyspaWYoZWxMaXN0W2ldLnBhcmVudE5vZGU9PT10aGlzLiRlbCl7ZWw9ZWxMaXN0W2ldO2JyZWFrfWlmKGVsKXt2YXIgcGVuZGFudD17c3VmZml4OiJhcHBlbmQiLHByZWZpeDoicHJlcGVuZCJ9W3BsYWNlXTt0aGlzLiRzbG90c1twZW5kYW50XT9lbC5zdHlsZS50cmFuc2Zvcm09InRyYW5zbGF0ZVgoIisoInN1ZmZpeCI9PT1wbGFjZT8iLSI6IiIpK3RoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoIi5lbC1pbnB1dC1ncm91cF9fIitwZW5kYW50KS5vZmZzZXRXaWR0aCsicHgpIjplbC5yZW1vdmVBdHRyaWJ1dGUoInN0eWxlIil9fX0sdXBkYXRlSWNvbk9mZnNldDpmdW5jdGlvbigpe3RoaXMuY2FsY0ljb25PZmZzZXQoInByZWZpeCIpLHRoaXMuY2FsY0ljb25PZmZzZXQoInN1ZmZpeCIpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuJGVtaXQoImlucHV0IiwiIiksdGhpcy4kZW1pdCgiY2hhbmdlIiwiIiksdGhpcy4kZW1pdCgiY2xlYXIiKX0saGFuZGxlUGFzc3dvcmRWaXNpYmxlOmZ1bmN0aW9uKCl7dGhpcy5wYXNzd29yZFZpc2libGU9IXRoaXMucGFzc3dvcmRWaXNpYmxlLHRoaXMuZm9jdXMoKX0sZ2V0SW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcmVmcy5pbnB1dHx8dGhpcy4kcmVmcy50ZXh0YXJlYX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLiRvbigiaW5wdXRTZWxlY3QiLHRoaXMuc2VsZWN0KX0sbW91bnRlZDpmdW5jdGlvbigpe3RoaXMucmVzaXplVGV4dGFyZWEoKSx0aGlzLnVwZGF0ZUljb25PZmZzZXQoKX0sdXBkYXRlZDpmdW5jdGlvbigpe3RoaXMuJG5leHRUaWNrKHRoaXMudXBkYXRlSWNvbk9mZnNldCl9fSxjb21wb25lbnROb3JtYWxpemVyPV9fd2VicGFja19yZXF1aXJlX18oMCksY29tcG9uZW50PU9iamVjdChjb21wb25lbnROb3JtYWxpemVyLmEpKHNyY19pbnB1dHZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzXyxyZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvaW5wdXQvc3JjL2lucHV0LnZ1ZSI7dmFyIGlucHV0PWNvbXBvbmVudC5leHBvcnRzO2lucHV0Lmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGlucHV0Lm5hbWUsaW5wdXQpfTtfX3dlYnBhY2tfZXhwb3J0c19fLmRlZmF1bHQ9aW5wdXR9LDg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oImYwM3oiKX19KX0sIjhOa1EiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITAsZXhwb3J0cy5kZWZhdWx0PXtlbDp7Y29sb3JwaWNrZXI6e2NvbmZpcm06IuehruWumiIsY2xlYXI6Iua4heepuiJ9LGRhdGVwaWNrZXI6e25vdzoi5q2k5Yi7Iix0b2RheToi5LuK5aSpIixjYW5jZWw6IuWPlua2iCIsY2xlYXI6Iua4heepuiIsY29uZmlybToi56Gu5a6aIixzZWxlY3REYXRlOiLpgInmi6nml6XmnJ8iLHNlbGVjdFRpbWU6IumAieaLqeaXtumXtCIsc3RhcnREYXRlOiLlvIDlp4vml6XmnJ8iLHN0YXJ0VGltZToi5byA5aeL5pe26Ze0IixlbmREYXRlOiLnu5PmnZ/ml6XmnJ8iLGVuZFRpbWU6Iue7k+adn+aXtumXtCIscHJldlllYXI6IuWJjeS4gOW5tCIsbmV4dFllYXI6IuWQjuS4gOW5tCIscHJldk1vbnRoOiLkuIrkuKrmnIgiLG5leHRNb250aDoi5LiL5Liq5pyIIix5ZWFyOiLlubQiLG1vbnRoMToiMSDmnIgiLG1vbnRoMjoiMiDmnIgiLG1vbnRoMzoiMyDmnIgiLG1vbnRoNDoiNCDmnIgiLG1vbnRoNToiNSDmnIgiLG1vbnRoNjoiNiDmnIgiLG1vbnRoNzoiNyDmnIgiLG1vbnRoODoiOCDmnIgiLG1vbnRoOToiOSDmnIgiLG1vbnRoMTA6IjEwIOaciCIsbW9udGgxMToiMTEg5pyIIixtb250aDEyOiIxMiDmnIgiLHdlZWtzOntzdW46IuaXpSIsbW9uOiLkuIAiLHR1ZToi5LqMIix3ZWQ6IuS4iSIsdGh1OiLlm5siLGZyaToi5LqUIixzYXQ6IuWFrSJ9LG1vbnRoczp7amFuOiLkuIDmnIgiLGZlYjoi5LqM5pyIIixtYXI6IuS4ieaciCIsYXByOiLlm5vmnIgiLG1heToi5LqU5pyIIixqdW46IuWFreaciCIsanVsOiLkuIPmnIgiLGF1Zzoi5YWr5pyIIixzZXA6IuS5neaciCIsb2N0OiLljYHmnIgiLG5vdjoi5Y2B5LiA5pyIIixkZWM6IuWNgeS6jOaciCJ9fSxzZWxlY3Q6e2xvYWRpbmc6IuWKoOi9veS4rSIsbm9NYXRjaDoi5peg5Yy56YWN5pWw5o2uIixub0RhdGE6IuaXoOaVsOaNriIscGxhY2Vob2xkZXI6Iuivt+mAieaLqSJ9LGNhc2NhZGVyOntub01hdGNoOiLml6DljLnphY3mlbDmja4iLGxvYWRpbmc6IuWKoOi9veS4rSIscGxhY2Vob2xkZXI6Iuivt+mAieaLqSJ9LHBhZ2luYXRpb246e2dvdG86IuWJjeW+gCIscGFnZXNpemU6IuadoS/pobUiLHRvdGFsOiLlhbEge3RvdGFsfSDmnaEiLHBhZ2VDbGFzc2lmaWVyOiLpobUifSxtZXNzYWdlYm94Ont0aXRsZToi5o+Q56S6Iixjb25maXJtOiLnoa7lrpoiLGNhbmNlbDoi5Y+W5raIIixlcnJvcjoi6L6T5YWl55qE5pWw5o2u5LiN5ZCI5rOVISJ9LHVwbG9hZDp7ZGVsZXRlVGlwOiLmjIkgZGVsZXRlIOmUruWPr+WIoOmZpCIsZGVsZXRlOiLliKDpmaQiLHByZXZpZXc6Iuafpeeci+WbvueJhyIsY29udGludWU6Iue7p+e7reS4iuS8oCJ9LHRhYmxlOntlbXB0eVRleHQ6IuaaguaXoOaVsOaNriIsY29uZmlybUZpbHRlcjoi562b6YCJIixyZXNldEZpbHRlcjoi6YeN572uIixjbGVhckZpbHRlcjoi5YWo6YOoIixzdW1UZXh0OiLlkIjorqEifSx0cmVlOntlbXB0eVRleHQ6IuaaguaXoOaVsOaNriJ9LHRyYW5zZmVyOntub01hdGNoOiLml6DljLnphY3mlbDmja4iLG5vRGF0YToi5peg5pWw5o2uIix0aXRsZXM6WyLliJfooaggMSIsIuWIl+ihqCAyIl0sZmlsdGVyUGxhY2Vob2xkZXI6Iuivt+i+k+WFpeaQnOe0ouWGheWuuSIsbm9DaGVja2VkRm9ybWF0OiLlhbEge3RvdGFsfSDpobkiLGhhc0NoZWNrZWRGb3JtYXQ6IuW3sumAiSB7Y2hlY2tlZH0ve3RvdGFsfSDpobkifX19fSxFdkk5OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITAsZXhwb3J0cy5kZWZhdWx0PWZ1bmN0aW9uKHJlZil7cmV0dXJue21ldGhvZHM6e2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy4kcmVmc1tyZWZdLmZvY3VzKCl9fX19fSxGT25VOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG1vZHVsZXMpe3ZhciBpbnN0YWxsZWRNb2R1bGVzPXt9O2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpe2lmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO3ZhciBtb2R1bGU9aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF09e2k6bW9kdWxlSWQsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cyxtb2R1bGUsbW9kdWxlLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksbW9kdWxlLmw9ITAsbW9kdWxlLmV4cG9ydHN9cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT1tb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uYz1pbnN0YWxsZWRNb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihleHBvcnRzLG5hbWUsZ2V0dGVyKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cyxuYW1lKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsbmFtZSx7ZW51bWVyYWJsZTohMCxnZXQ6Z2V0dGVyfSl9LF9fd2VicGFja19yZXF1aXJlX18ucj1mdW5jdGlvbihleHBvcnRzKXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnQ9ZnVuY3Rpb24odmFsdWUsbW9kZSl7aWYoMSZtb2RlJiYodmFsdWU9X193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSkpLDgmbW9kZSlyZXR1cm4gdmFsdWU7aWYoNCZtb2RlJiYib2JqZWN0Ij09dHlwZW9mIHZhbHVlJiZ2YWx1ZSYmdmFsdWUuX19lc01vZHVsZSlyZXR1cm4gdmFsdWU7dmFyIG5zPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnZhbHVlfSksMiZtb2RlJiYic3RyaW5nIiE9dHlwZW9mIHZhbHVlKWZvcih2YXIga2V5IGluIHZhbHVlKV9fd2VicGFja19yZXF1aXJlX18uZChucyxrZXksZnVuY3Rpb24oa2V5KXtyZXR1cm4gdmFsdWVba2V5XX0uYmluZChudWxsLGtleSkpO3JldHVybiBuc30sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKG1vZHVsZSl7dmFyIGdldHRlcj1tb2R1bGUmJm1vZHVsZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBtb2R1bGV9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCJhIixnZXR0ZXIpLGdldHRlcn0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKG9iamVjdCxwcm9wZXJ0eSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9Ii9kaXN0LyIsX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnM9MTEyKX0oezExMjpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO3ZhciByZXNpemVfZXZlbnRfPV9fd2VicGFja19yZXF1aXJlX18oMTUpLHNjcm9sbGJhcl93aWR0aF89X193ZWJwYWNrX3JlcXVpcmVfXygzNCksc2Nyb2xsYmFyX3dpZHRoX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKHNjcm9sbGJhcl93aWR0aF8pLHV0aWxfPV9fd2VicGFja19yZXF1aXJlX18oNCksZG9tXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDIpLEJBUl9NQVA9e3ZlcnRpY2FsOntvZmZzZXQ6Im9mZnNldEhlaWdodCIsc2Nyb2xsOiJzY3JvbGxUb3AiLHNjcm9sbFNpemU6InNjcm9sbEhlaWdodCIsc2l6ZToiaGVpZ2h0IixrZXk6InZlcnRpY2FsIixheGlzOiJZIixjbGllbnQ6ImNsaWVudFkiLGRpcmVjdGlvbjoidG9wIn0saG9yaXpvbnRhbDp7b2Zmc2V0OiJvZmZzZXRXaWR0aCIsc2Nyb2xsOiJzY3JvbGxMZWZ0IixzY3JvbGxTaXplOiJzY3JvbGxXaWR0aCIsc2l6ZToid2lkdGgiLGtleToiaG9yaXpvbnRhbCIsYXhpczoiWCIsY2xpZW50OiJjbGllbnRYIixkaXJlY3Rpb246ImxlZnQifX07dmFyIHNyY19iYXI9e25hbWU6IkJhciIscHJvcHM6e3ZlcnRpY2FsOkJvb2xlYW4sc2l6ZTpTdHJpbmcsbW92ZTpOdW1iZXJ9LGNvbXB1dGVkOntiYXI6ZnVuY3Rpb24oKXtyZXR1cm4gQkFSX01BUFt0aGlzLnZlcnRpY2FsPyJ2ZXJ0aWNhbCI6Imhvcml6b250YWwiXX0sd3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRwYXJlbnQud3JhcH19LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgc2l6ZT10aGlzLnNpemUsbW92ZT10aGlzLm1vdmUsYmFyPXRoaXMuYmFyO3JldHVybiBoKCJkaXYiLHtjbGFzczpbImVsLXNjcm9sbGJhcl9fYmFyIiwiaXMtIitiYXIua2V5XSxvbjp7bW91c2Vkb3duOnRoaXMuY2xpY2tUcmFja0hhbmRsZXJ9fSxbaCgiZGl2Iix7cmVmOiJ0aHVtYiIsY2xhc3M6ImVsLXNjcm9sbGJhcl9fdGh1bWIiLG9uOnttb3VzZWRvd246dGhpcy5jbGlja1RodW1iSGFuZGxlcn0sc3R5bGU6ZnVuY3Rpb24oX3JlZil7dmFyIG1vdmU9X3JlZi5tb3ZlLHNpemU9X3JlZi5zaXplLGJhcj1fcmVmLmJhcixzdHlsZT17fSx0cmFuc2xhdGU9InRyYW5zbGF0ZSIrYmFyLmF4aXMrIigiK21vdmUrIiUpIjtyZXR1cm4gc3R5bGVbYmFyLnNpemVdPXNpemUsc3R5bGUudHJhbnNmb3JtPXRyYW5zbGF0ZSxzdHlsZS5tc1RyYW5zZm9ybT10cmFuc2xhdGUsc3R5bGUud2Via2l0VHJhbnNmb3JtPXRyYW5zbGF0ZSxzdHlsZX0oe3NpemU6c2l6ZSxtb3ZlOm1vdmUsYmFyOmJhcn0pfSldKX0sbWV0aG9kczp7Y2xpY2tUaHVtYkhhbmRsZXI6ZnVuY3Rpb24oZSl7ZS5jdHJsS2V5fHwyPT09ZS5idXR0b258fCh0aGlzLnN0YXJ0RHJhZyhlKSx0aGlzW3RoaXMuYmFyLmF4aXNdPWUuY3VycmVudFRhcmdldFt0aGlzLmJhci5vZmZzZXRdLShlW3RoaXMuYmFyLmNsaWVudF0tZS5jdXJyZW50VGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuYmFyLmRpcmVjdGlvbl0pKX0sY2xpY2tUcmFja0hhbmRsZXI6ZnVuY3Rpb24oZSl7dmFyIHRodW1iUG9zaXRpb25QZXJjZW50YWdlPTEwMCooTWF0aC5hYnMoZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5iYXIuZGlyZWN0aW9uXS1lW3RoaXMuYmFyLmNsaWVudF0pLXRoaXMuJHJlZnMudGh1bWJbdGhpcy5iYXIub2Zmc2V0XS8yKS90aGlzLiRlbFt0aGlzLmJhci5vZmZzZXRdO3RoaXMud3JhcFt0aGlzLmJhci5zY3JvbGxdPXRodW1iUG9zaXRpb25QZXJjZW50YWdlKnRoaXMud3JhcFt0aGlzLmJhci5zY3JvbGxTaXplXS8xMDB9LHN0YXJ0RHJhZzpmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuY3Vyc29yRG93bj0hMCxPYmplY3QoZG9tXy5vbikoZG9jdW1lbnQsIm1vdXNlbW92ZSIsdGhpcy5tb3VzZU1vdmVEb2N1bWVudEhhbmRsZXIpLE9iamVjdChkb21fLm9uKShkb2N1bWVudCwibW91c2V1cCIsdGhpcy5tb3VzZVVwRG9jdW1lbnRIYW5kbGVyKSxkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuITF9fSxtb3VzZU1vdmVEb2N1bWVudEhhbmRsZXI6ZnVuY3Rpb24oZSl7aWYoITEhPT10aGlzLmN1cnNvckRvd24pe3ZhciBwcmV2UGFnZT10aGlzW3RoaXMuYmFyLmF4aXNdO2lmKHByZXZQYWdlKXt2YXIgdGh1bWJQb3NpdGlvblBlcmNlbnRhZ2U9MTAwKigtMSoodGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5iYXIuZGlyZWN0aW9uXS1lW3RoaXMuYmFyLmNsaWVudF0pLSh0aGlzLiRyZWZzLnRodW1iW3RoaXMuYmFyLm9mZnNldF0tcHJldlBhZ2UpKS90aGlzLiRlbFt0aGlzLmJhci5vZmZzZXRdO3RoaXMud3JhcFt0aGlzLmJhci5zY3JvbGxdPXRodW1iUG9zaXRpb25QZXJjZW50YWdlKnRoaXMud3JhcFt0aGlzLmJhci5zY3JvbGxTaXplXS8xMDB9fX0sbW91c2VVcERvY3VtZW50SGFuZGxlcjpmdW5jdGlvbihlKXt0aGlzLmN1cnNvckRvd249ITEsdGhpc1t0aGlzLmJhci5heGlzXT0wLE9iamVjdChkb21fLm9mZikoZG9jdW1lbnQsIm1vdXNlbW92ZSIsdGhpcy5tb3VzZU1vdmVEb2N1bWVudEhhbmRsZXIpLGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9bnVsbH19LGRlc3Ryb3llZDpmdW5jdGlvbigpe09iamVjdChkb21fLm9mZikoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMubW91c2VVcERvY3VtZW50SGFuZGxlcil9fSxtYWluPXtuYW1lOiJFbFNjcm9sbGJhciIsY29tcG9uZW50czp7QmFyOnNyY19iYXJ9LHByb3BzOntuYXRpdmU6Qm9vbGVhbix3cmFwU3R5bGU6e30sd3JhcENsYXNzOnt9LHZpZXdDbGFzczp7fSx2aWV3U3R5bGU6e30sbm9yZXNpemU6Qm9vbGVhbix0YWc6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImRpdiJ9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3NpemVXaWR0aDoiMCIsc2l6ZUhlaWdodDoiMCIsbW92ZVg6MCxtb3ZlWTowfX0sY29tcHV0ZWQ6e3dyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcmVmcy53cmFwfX0scmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciBndXR0ZXI9c2Nyb2xsYmFyX3dpZHRoX2RlZmF1bHQoKSgpLHN0eWxlPXRoaXMud3JhcFN0eWxlO2lmKGd1dHRlcil7dmFyIGd1dHRlcldpdGg9Ii0iK2d1dHRlcisicHgiLGd1dHRlclN0eWxlPSJtYXJnaW4tYm90dG9tOiAiK2d1dHRlcldpdGgrIjsgbWFyZ2luLXJpZ2h0OiAiK2d1dHRlcldpdGgrIjsiO0FycmF5LmlzQXJyYXkodGhpcy53cmFwU3R5bGUpPyhzdHlsZT1PYmplY3QodXRpbF8udG9PYmplY3QpKHRoaXMud3JhcFN0eWxlKSkubWFyZ2luUmlnaHQ9c3R5bGUubWFyZ2luQm90dG9tPWd1dHRlcldpdGg6InN0cmluZyI9PXR5cGVvZiB0aGlzLndyYXBTdHlsZT9zdHlsZSs9Z3V0dGVyU3R5bGU6c3R5bGU9Z3V0dGVyU3R5bGV9dmFyIHZpZXc9aCh0aGlzLnRhZyx7Y2xhc3M6WyJlbC1zY3JvbGxiYXJfX3ZpZXciLHRoaXMudmlld0NsYXNzXSxzdHlsZTp0aGlzLnZpZXdTdHlsZSxyZWY6InJlc2l6ZSJ9LHRoaXMuJHNsb3RzLmRlZmF1bHQpLHdyYXA9aCgiZGl2Iix7cmVmOiJ3cmFwIixzdHlsZTpzdHlsZSxvbjp7c2Nyb2xsOnRoaXMuaGFuZGxlU2Nyb2xsfSxjbGFzczpbdGhpcy53cmFwQ2xhc3MsImVsLXNjcm9sbGJhcl9fd3JhcCIsZ3V0dGVyPyIiOiJlbC1zY3JvbGxiYXJfX3dyYXAtLWhpZGRlbi1kZWZhdWx0Il19LFtbdmlld11dKTtyZXR1cm4gaCgiZGl2Iix7Y2xhc3M6ImVsLXNjcm9sbGJhciJ9LHRoaXMubmF0aXZlP1toKCJkaXYiLHtyZWY6IndyYXAiLGNsYXNzOlt0aGlzLndyYXBDbGFzcywiZWwtc2Nyb2xsYmFyX193cmFwIl0sc3R5bGU6c3R5bGV9LFtbdmlld11dKV06W3dyYXAsaChzcmNfYmFyLHthdHRyczp7bW92ZTp0aGlzLm1vdmVYLHNpemU6dGhpcy5zaXplV2lkdGh9fSksaChzcmNfYmFyLHthdHRyczp7dmVydGljYWw6ITAsbW92ZTp0aGlzLm1vdmVZLHNpemU6dGhpcy5zaXplSGVpZ2h0fX0pXSl9LG1ldGhvZHM6e2hhbmRsZVNjcm9sbDpmdW5jdGlvbigpe3ZhciB3cmFwPXRoaXMud3JhcDt0aGlzLm1vdmVZPTEwMCp3cmFwLnNjcm9sbFRvcC93cmFwLmNsaWVudEhlaWdodCx0aGlzLm1vdmVYPTEwMCp3cmFwLnNjcm9sbExlZnQvd3JhcC5jbGllbnRXaWR0aH0sdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGhlaWdodFBlcmNlbnRhZ2Usd2lkdGhQZXJjZW50YWdlLHdyYXA9dGhpcy53cmFwO3dyYXAmJihoZWlnaHRQZXJjZW50YWdlPTEwMCp3cmFwLmNsaWVudEhlaWdodC93cmFwLnNjcm9sbEhlaWdodCx3aWR0aFBlcmNlbnRhZ2U9MTAwKndyYXAuY2xpZW50V2lkdGgvd3JhcC5zY3JvbGxXaWR0aCx0aGlzLnNpemVIZWlnaHQ9aGVpZ2h0UGVyY2VudGFnZTwxMDA/aGVpZ2h0UGVyY2VudGFnZSsiJSI6IiIsdGhpcy5zaXplV2lkdGg9d2lkdGhQZXJjZW50YWdlPDEwMD93aWR0aFBlcmNlbnRhZ2UrIiUiOiIiKX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt0aGlzLm5hdGl2ZXx8KHRoaXMuJG5leHRUaWNrKHRoaXMudXBkYXRlKSwhdGhpcy5ub3Jlc2l6ZSYmT2JqZWN0KHJlc2l6ZV9ldmVudF8uYWRkUmVzaXplTGlzdGVuZXIpKHRoaXMuJHJlZnMucmVzaXplLHRoaXMudXBkYXRlKSl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm5hdGl2ZXx8IXRoaXMubm9yZXNpemUmJk9iamVjdChyZXNpemVfZXZlbnRfLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKSh0aGlzLiRyZWZzLnJlc2l6ZSx0aGlzLnVwZGF0ZSl9LGluc3RhbGw6ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KG1haW4ubmFtZSxtYWluKX19O19fd2VicGFja19leHBvcnRzX18uZGVmYXVsdD1tYWlufSwxNTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiUUJCbyIpfSwyOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXU1QxIil9LDM0OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1aTFjIil9LDQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oImdTSVEiKX19KX0sSzdYUjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwLGV4cG9ydHMuZGVmYXVsdD17bW91bnRlZDpmdW5jdGlvbigpe30sbWV0aG9kczp7Z2V0TWlncmF0aW5nQ29uZmlnOmZ1bmN0aW9uKCl7cmV0dXJue3Byb3BzOnt9LGV2ZW50czp7fX19fX19LEtaenI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obW9kdWxlcyl7dmFyIGluc3RhbGxlZE1vZHVsZXM9e307ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7dmFyIG1vZHVsZT1pbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXT17aTptb2R1bGVJZCxsOiExLGV4cG9ydHM6e319O3JldHVybiBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLG1vZHVsZSxtb2R1bGUuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxtb2R1bGUubD0hMCxtb2R1bGUuZXhwb3J0c31yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPW1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5jPWluc3RhbGxlZE1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGV4cG9ydHMsbmFtZSxnZXR0ZXIpe19fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLG5hbWUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxuYW1lLHtlbnVtZXJhYmxlOiEwLGdldDpnZXR0ZXJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5yPWZ1bmN0aW9uKGV4cG9ydHMpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LF9fd2VicGFja19yZXF1aXJlX18udD1mdW5jdGlvbih2YWx1ZSxtb2RlKXtpZigxJm1vZGUmJih2YWx1ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKSksOCZtb2RlKXJldHVybiB2YWx1ZTtpZig0Jm1vZGUmJiJvYmplY3QiPT10eXBlb2YgdmFsdWUmJnZhbHVlJiZ2YWx1ZS5fX2VzTW9kdWxlKXJldHVybiB2YWx1ZTt2YXIgbnM9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dmFsdWV9KSwyJm1vZGUmJiJzdHJpbmciIT10eXBlb2YgdmFsdWUpZm9yKHZhciBrZXkgaW4gdmFsdWUpX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLGtleSxmdW5jdGlvbihrZXkpe3JldHVybiB2YWx1ZVtrZXldfS5iaW5kKG51bGwsa2V5KSk7cmV0dXJuIG5zfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24obW9kdWxlKXt2YXIgZ2V0dGVyPW1vZHVsZSYmbW9kdWxlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZX07cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsImEiLGdldHRlciksZ2V0dGVyfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24ob2JqZWN0LHByb3BlcnR5KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iL2Rpc3QvIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0xMTQpfSh7MTE0OmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7dmFyIHZ1ZV9wb3BwZXJfPV9fd2VicGFja19yZXF1aXJlX18oNSksdnVlX3BvcHBlcl9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubih2dWVfcG9wcGVyXyksZGVib3VuY2VfPV9fd2VicGFja19yZXF1aXJlX18oMTQpLGRlYm91bmNlX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGRlYm91bmNlXyksZG9tXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDIpLHZkb21fPV9fd2VicGFja19yZXF1aXJlX18oMjApLHV0aWxfPV9fd2VicGFja19yZXF1aXJlX18oNCksZXh0ZXJuYWxfdnVlXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDYpLGV4dGVybmFsX3Z1ZV9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihleHRlcm5hbF92dWVfKSxtYWluPXtuYW1lOiJFbFRvb2x0aXAiLG1peGluczpbdnVlX3BvcHBlcl9kZWZhdWx0LmFdLHByb3BzOntvcGVuRGVsYXk6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MH0sZGlzYWJsZWQ6Qm9vbGVhbixtYW51YWw6Qm9vbGVhbixlZmZlY3Q6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImRhcmsifSxhcnJvd09mZnNldDp7dHlwZTpOdW1iZXIsZGVmYXVsdDowfSxwb3BwZXJDbGFzczpTdHJpbmcsY29udGVudDpTdHJpbmcsdmlzaWJsZUFycm93OntkZWZhdWx0OiEwfSx0cmFuc2l0aW9uOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJlbC1mYWRlLWluLWxpbmVhciJ9LHBvcHBlck9wdGlvbnM6e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm57Ym91bmRhcmllc1BhZGRpbmc6MTAsZ3B1QWNjZWxlcmF0aW9uOiExfX19LGVudGVyYWJsZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGhpZGVBZnRlcjp7dHlwZTpOdW1iZXIsZGVmYXVsdDowfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybnt0aW1lb3V0UGVuZGluZzpudWxsLGZvY3VzaW5nOiExfX0sY29tcHV0ZWQ6e3Rvb2x0aXBJZDpmdW5jdGlvbigpe3JldHVybiJlbC10b29sdGlwLSIrT2JqZWN0KHV0aWxfLmdlbmVyYXRlSWQpKCl9fSxiZWZvcmVDcmVhdGU6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLiRpc1NlcnZlcnx8KHRoaXMucG9wcGVyVk09bmV3IGV4dGVybmFsX3Z1ZV9kZWZhdWx0LmEoe2RhdGE6e25vZGU6IiJ9LHJlbmRlcjpmdW5jdGlvbihoKXtyZXR1cm4gdGhpcy5ub2RlfX0pLiRtb3VudCgpLHRoaXMuZGVib3VuY2VDbG9zZT1kZWJvdW5jZV9kZWZhdWx0KCkoMjAwLGZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzLmhhbmRsZUNsb3NlUG9wcGVyKCl9KSl9LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgX3RoaXMyPXRoaXM7aWYodGhpcy5wb3BwZXJWTSYmKHRoaXMucG9wcGVyVk0ubm9kZT1oKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6dGhpcy50cmFuc2l0aW9ufSxvbjp7YWZ0ZXJMZWF2ZTp0aGlzLmRvRGVzdHJveX19LFtoKCJkaXYiLHtvbjp7bW91c2VsZWF2ZTpmdW5jdGlvbigpe190aGlzMi5zZXRFeHBlY3RlZFN0YXRlKCExKSxfdGhpczIuZGVib3VuY2VDbG9zZSgpfSxtb3VzZWVudGVyOmZ1bmN0aW9uKCl7X3RoaXMyLnNldEV4cGVjdGVkU3RhdGUoITApfX0scmVmOiJwb3BwZXIiLGF0dHJzOntyb2xlOiJ0b29sdGlwIixpZDp0aGlzLnRvb2x0aXBJZCwiYXJpYS1oaWRkZW4iOnRoaXMuZGlzYWJsZWR8fCF0aGlzLnNob3dQb3BwZXI/InRydWUiOiJmYWxzZSJ9LGRpcmVjdGl2ZXM6W3tuYW1lOiJzaG93Iix2YWx1ZTohdGhpcy5kaXNhYmxlZCYmdGhpcy5zaG93UG9wcGVyfV0sY2xhc3M6WyJlbC10b29sdGlwX19wb3BwZXIiLCJpcy0iK3RoaXMuZWZmZWN0LHRoaXMucG9wcGVyQ2xhc3NdfSxbdGhpcy4kc2xvdHMuY29udGVudHx8dGhpcy5jb250ZW50XSldKSksIXRoaXMuJHNsb3RzLmRlZmF1bHR8fCF0aGlzLiRzbG90cy5kZWZhdWx0Lmxlbmd0aClyZXR1cm4gdGhpcy4kc2xvdHMuZGVmYXVsdDt2YXIgdm5vZGU9T2JqZWN0KHZkb21fLmdldEZpcnN0Q29tcG9uZW50Q2hpbGQpKHRoaXMuJHNsb3RzLmRlZmF1bHQpO2lmKCF2bm9kZSlyZXR1cm4gdm5vZGU7dmFyIGRhdGE9dm5vZGUuZGF0YT12bm9kZS5kYXRhfHx7fTtyZXR1cm4gZGF0YS5zdGF0aWNDbGFzcz10aGlzLmNvbmNhdENsYXNzKGRhdGEuc3RhdGljQ2xhc3MsImVsLXRvb2x0aXAiKSx2bm9kZX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczM9dGhpczt0aGlzLnJlZmVyZW5jZUVsbT10aGlzLiRlbCwxPT09dGhpcy4kZWwubm9kZVR5cGUmJih0aGlzLiRlbC5zZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiLHRoaXMudG9vbHRpcElkKSx0aGlzLiRlbC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwwKSxPYmplY3QoZG9tXy5vbikodGhpcy5yZWZlcmVuY2VFbG0sIm1vdXNlZW50ZXIiLHRoaXMuc2hvdyksT2JqZWN0KGRvbV8ub24pKHRoaXMucmVmZXJlbmNlRWxtLCJtb3VzZWxlYXZlIix0aGlzLmhpZGUpLE9iamVjdChkb21fLm9uKSh0aGlzLnJlZmVyZW5jZUVsbSwiZm9jdXMiLGZ1bmN0aW9uKCl7aWYoX3RoaXMzLiRzbG90cy5kZWZhdWx0JiZfdGhpczMuJHNsb3RzLmRlZmF1bHQubGVuZ3RoKXt2YXIgaW5zdGFuY2U9X3RoaXMzLiRzbG90cy5kZWZhdWx0WzBdLmNvbXBvbmVudEluc3RhbmNlO2luc3RhbmNlJiZpbnN0YW5jZS5mb2N1cz9pbnN0YW5jZS5mb2N1cygpOl90aGlzMy5oYW5kbGVGb2N1cygpfWVsc2UgX3RoaXMzLmhhbmRsZUZvY3VzKCl9KSxPYmplY3QoZG9tXy5vbikodGhpcy5yZWZlcmVuY2VFbG0sImJsdXIiLHRoaXMuaGFuZGxlQmx1ciksT2JqZWN0KGRvbV8ub24pKHRoaXMucmVmZXJlbmNlRWxtLCJjbGljayIsdGhpcy5yZW1vdmVGb2N1c2luZykpfSx3YXRjaDp7Zm9jdXNpbmc6ZnVuY3Rpb24odmFsKXt2YWw/T2JqZWN0KGRvbV8uYWRkQ2xhc3MpKHRoaXMucmVmZXJlbmNlRWxtLCJmb2N1c2luZyIpOk9iamVjdChkb21fLnJlbW92ZUNsYXNzKSh0aGlzLnJlZmVyZW5jZUVsbSwiZm9jdXNpbmciKX19LG1ldGhvZHM6e3Nob3c6ZnVuY3Rpb24oKXt0aGlzLnNldEV4cGVjdGVkU3RhdGUoITApLHRoaXMuaGFuZGxlU2hvd1BvcHBlcigpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5zZXRFeHBlY3RlZFN0YXRlKCExKSx0aGlzLmRlYm91bmNlQ2xvc2UoKX0saGFuZGxlRm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmZvY3VzaW5nPSEwLHRoaXMuc2hvdygpfSxoYW5kbGVCbHVyOmZ1bmN0aW9uKCl7dGhpcy5mb2N1c2luZz0hMSx0aGlzLmhpZGUoKX0scmVtb3ZlRm9jdXNpbmc6ZnVuY3Rpb24oKXt0aGlzLmZvY3VzaW5nPSExfSxjb25jYXRDbGFzczpmdW5jdGlvbihhLGIpe3JldHVybiBhJiYtMTxhLmluZGV4T2YoYik/YTphP2I/YSsiICIrYjphOmJ8fCIifSxoYW5kbGVTaG93UG9wcGVyOmZ1bmN0aW9uKCl7dmFyIF90aGlzND10aGlzO3RoaXMuZXhwZWN0ZWRTdGF0ZSYmIXRoaXMubWFudWFsJiYoY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCksdGhpcy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpczQuc2hvd1BvcHBlcj0hMH0sdGhpcy5vcGVuRGVsYXkpLDA8dGhpcy5oaWRlQWZ0ZXImJih0aGlzLnRpbWVvdXRQZW5kaW5nPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpczQuc2hvd1BvcHBlcj0hMX0sdGhpcy5oaWRlQWZ0ZXIpKSl9LGhhbmRsZUNsb3NlUG9wcGVyOmZ1bmN0aW9uKCl7dGhpcy5lbnRlcmFibGUmJnRoaXMuZXhwZWN0ZWRTdGF0ZXx8dGhpcy5tYW51YWx8fChjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLnRpbWVvdXRQZW5kaW5nJiZjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0UGVuZGluZyksdGhpcy5zaG93UG9wcGVyPSExLHRoaXMuZGlzYWJsZWQmJnRoaXMuZG9EZXN0cm95KCkpfSxzZXRFeHBlY3RlZFN0YXRlOmZ1bmN0aW9uKGV4cGVjdGVkU3RhdGUpeyExPT09ZXhwZWN0ZWRTdGF0ZSYmY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFBlbmRpbmcpLHRoaXMuZXhwZWN0ZWRTdGF0ZT1leHBlY3RlZFN0YXRlfX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMucG9wcGVyVk0mJnRoaXMucG9wcGVyVk0uJGRlc3Ryb3koKX0sZGVzdHJveWVkOmZ1bmN0aW9uKCl7dmFyIHJlZmVyZW5jZT10aGlzLnJlZmVyZW5jZUVsbTtPYmplY3QoZG9tXy5vZmYpKHJlZmVyZW5jZSwibW91c2VlbnRlciIsdGhpcy5zaG93KSxPYmplY3QoZG9tXy5vZmYpKHJlZmVyZW5jZSwibW91c2VsZWF2ZSIsdGhpcy5oaWRlKSxPYmplY3QoZG9tXy5vZmYpKHJlZmVyZW5jZSwiZm9jdXMiLHRoaXMuaGFuZGxlRm9jdXMpLE9iamVjdChkb21fLm9mZikocmVmZXJlbmNlLCJibHVyIix0aGlzLmhhbmRsZUJsdXIpLE9iamVjdChkb21fLm9mZikocmVmZXJlbmNlLCJjbGljayIsdGhpcy5yZW1vdmVGb2N1c2luZyl9LGluc3RhbGw6ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KG1haW4ubmFtZSxtYWluKX19O19fd2VicGFja19leHBvcnRzX18uZGVmYXVsdD1tYWlufSwxNDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiRGhWRCIpfSwyOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXU1QxIil9LDIwOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJRZmdtIil9LDQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oImdTSVEiKX0sNTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiNlhUeCIpfSw2OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLdzVyIil9fSl9LEtsNTU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2V4cG9ydHMuX19lc01vZHVsZT0hMCxleHBvcnRzLmRlZmF1bHQ9ZnVuY3Rpb24oY29udGFpbmVyLHNlbGVjdGVkKXtpZihfdnVlMi5kZWZhdWx0LnByb3RvdHlwZS4kaXNTZXJ2ZXIpcmV0dXJuO2lmKCFzZWxlY3RlZClyZXR1cm4gdm9pZChjb250YWluZXIuc2Nyb2xsVG9wPTApO3ZhciBvZmZzZXRQYXJlbnRzPVtdLHBvaW50ZXI9c2VsZWN0ZWQub2Zmc2V0UGFyZW50O2Zvcig7cG9pbnRlciYmY29udGFpbmVyIT09cG9pbnRlciYmY29udGFpbmVyLmNvbnRhaW5zKHBvaW50ZXIpOylvZmZzZXRQYXJlbnRzLnB1c2gocG9pbnRlcikscG9pbnRlcj1wb2ludGVyLm9mZnNldFBhcmVudDt2YXIgdG9wPXNlbGVjdGVkLm9mZnNldFRvcCtvZmZzZXRQYXJlbnRzLnJlZHVjZShmdW5jdGlvbihwcmV2LGN1cnIpe3JldHVybiBwcmV2K2N1cnIub2Zmc2V0VG9wfSwwKSxib3R0b209dG9wK3NlbGVjdGVkLm9mZnNldEhlaWdodCx2aWV3UmVjdFRvcD1jb250YWluZXIuc2Nyb2xsVG9wLHZpZXdSZWN0Qm90dG9tPXZpZXdSZWN0VG9wK2NvbnRhaW5lci5jbGllbnRIZWlnaHQ7dG9wPHZpZXdSZWN0VG9wP2NvbnRhaW5lci5zY3JvbGxUb3A9dG9wOnZpZXdSZWN0Qm90dG9tPGJvdHRvbSYmKGNvbnRhaW5lci5zY3JvbGxUb3A9Ym90dG9tLWNvbnRhaW5lci5jbGllbnRIZWlnaHQpfTt2YXIgb2JqLF92dWU9X193ZWJwYWNrX3JlcXVpcmVfXygiS3c1ciIpLF92dWUyPShvYmo9X3Z1ZSkmJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9fSxRQkJvOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITAsZXhwb3J0cy5yZW1vdmVSZXNpemVMaXN0ZW5lcj1leHBvcnRzLmFkZFJlc2l6ZUxpc3RlbmVyPXZvaWQgMDt2YXIgb2JqLF9yZXNpemVPYnNlcnZlclBvbHlmaWxsPV9fd2VicGFja19yZXF1aXJlX18oImJkZ0siKSxfcmVzaXplT2JzZXJ2ZXJQb2x5ZmlsbDI9KG9iaj1fcmVzaXplT2JzZXJ2ZXJQb2x5ZmlsbCkmJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O3ZhciBpc1NlcnZlcj0idW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdyxyZXNpemVIYW5kbGVyPWZ1bmN0aW9uKGVudHJpZXMpe3ZhciBfaXRlcmF0b3I9ZW50cmllcyxfaXNBcnJheT1BcnJheS5pc0FycmF5KF9pdGVyYXRvciksX2k9MDtmb3IoX2l0ZXJhdG9yPV9pc0FycmF5P19pdGVyYXRvcjpfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBfcmVmO2lmKF9pc0FycmF5KXtpZihfaT49X2l0ZXJhdG9yLmxlbmd0aClicmVhaztfcmVmPV9pdGVyYXRvcltfaSsrXX1lbHNle2lmKChfaT1faXRlcmF0b3IubmV4dCgpKS5kb25lKWJyZWFrO19yZWY9X2kudmFsdWV9dmFyIGxpc3RlbmVycz1fcmVmLnRhcmdldC5fX3Jlc2l6ZUxpc3RlbmVyc19ffHxbXTtsaXN0ZW5lcnMubGVuZ3RoJiZsaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihmbil7Zm4oKX0pfX07ZXhwb3J0cy5hZGRSZXNpemVMaXN0ZW5lcj1mdW5jdGlvbihlbGVtZW50LGZuKXtpc1NlcnZlcnx8KGVsZW1lbnQuX19yZXNpemVMaXN0ZW5lcnNfX3x8KGVsZW1lbnQuX19yZXNpemVMaXN0ZW5lcnNfXz1bXSxlbGVtZW50Ll9fcm9fXz1uZXcgX3Jlc2l6ZU9ic2VydmVyUG9seWZpbGwyLmRlZmF1bHQocmVzaXplSGFuZGxlciksZWxlbWVudC5fX3JvX18ub2JzZXJ2ZShlbGVtZW50KSksZWxlbWVudC5fX3Jlc2l6ZUxpc3RlbmVyc19fLnB1c2goZm4pKX0sZXhwb3J0cy5yZW1vdmVSZXNpemVMaXN0ZW5lcj1mdW5jdGlvbihlbGVtZW50LGZuKXtlbGVtZW50JiZlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18mJihlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18uc3BsaWNlKGVsZW1lbnQuX19yZXNpemVMaXN0ZW5lcnNfXy5pbmRleE9mKGZuKSwxKSxlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18ubGVuZ3RofHxlbGVtZW50Ll9fcm9fXy5kaXNjb25uZWN0KCkpfX0sIlFYL2IiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITA7dmFyIG9iaixfdnVlPV9fd2VicGFja19yZXF1aXJlX18oIkt3NXIiKSxfdnVlMj0ob2JqPV92dWUpJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfSxfZG9tPV9fd2VicGFja19yZXF1aXJlX18oIldTVDEiKTt2YXIgbm9kZUxpc3Q9W10sY3R4PSJAQGNsaWNrb3V0c2lkZUNvbnRleHQiLHN0YXJ0Q2xpY2s9dm9pZCAwLHNlZWQ9MDtmdW5jdGlvbiBjcmVhdGVEb2N1bWVudEhhbmRsZXIoZWwsYmluZGluZyx2bm9kZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG1vdXNldXA9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG1vdXNlZG93bj0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307ISh2bm9kZSYmdm5vZGUuY29udGV4dCYmbW91c2V1cC50YXJnZXQmJm1vdXNlZG93bi50YXJnZXQpfHxlbC5jb250YWlucyhtb3VzZXVwLnRhcmdldCl8fGVsLmNvbnRhaW5zKG1vdXNlZG93bi50YXJnZXQpfHxlbD09PW1vdXNldXAudGFyZ2V0fHx2bm9kZS5jb250ZXh0LnBvcHBlckVsbSYmKHZub2RlLmNvbnRleHQucG9wcGVyRWxtLmNvbnRhaW5zKG1vdXNldXAudGFyZ2V0KXx8dm5vZGUuY29udGV4dC5wb3BwZXJFbG0uY29udGFpbnMobW91c2Vkb3duLnRhcmdldCkpfHwoYmluZGluZy5leHByZXNzaW9uJiZlbFtjdHhdLm1ldGhvZE5hbWUmJnZub2RlLmNvbnRleHRbZWxbY3R4XS5tZXRob2ROYW1lXT92bm9kZS5jb250ZXh0W2VsW2N0eF0ubWV0aG9kTmFtZV0oKTplbFtjdHhdLmJpbmRpbmdGbiYmZWxbY3R4XS5iaW5kaW5nRm4oKSl9fSFfdnVlMi5kZWZhdWx0LnByb3RvdHlwZS4kaXNTZXJ2ZXImJigwLF9kb20ub24pKGRvY3VtZW50LCJtb3VzZWRvd24iLGZ1bmN0aW9uKGUpe3JldHVybiBzdGFydENsaWNrPWV9KSwhX3Z1ZTIuZGVmYXVsdC5wcm90b3R5cGUuJGlzU2VydmVyJiYoMCxfZG9tLm9uKShkb2N1bWVudCwibW91c2V1cCIsZnVuY3Rpb24oZSl7bm9kZUxpc3QuZm9yRWFjaChmdW5jdGlvbihub2RlKXtyZXR1cm4gbm9kZVtjdHhdLmRvY3VtZW50SGFuZGxlcihlLHN0YXJ0Q2xpY2spfSl9KSxleHBvcnRzLmRlZmF1bHQ9e2JpbmQ6ZnVuY3Rpb24oZWwsYmluZGluZyx2bm9kZSl7bm9kZUxpc3QucHVzaChlbCk7dmFyIGlkPXNlZWQrKztlbFtjdHhdPXtpZDppZCxkb2N1bWVudEhhbmRsZXI6Y3JlYXRlRG9jdW1lbnRIYW5kbGVyKGVsLGJpbmRpbmcsdm5vZGUpLG1ldGhvZE5hbWU6YmluZGluZy5leHByZXNzaW9uLGJpbmRpbmdGbjpiaW5kaW5nLnZhbHVlfX0sdXBkYXRlOmZ1bmN0aW9uKGVsLGJpbmRpbmcsdm5vZGUpe2VsW2N0eF0uZG9jdW1lbnRIYW5kbGVyPWNyZWF0ZURvY3VtZW50SGFuZGxlcihlbCxiaW5kaW5nLHZub2RlKSxlbFtjdHhdLm1ldGhvZE5hbWU9YmluZGluZy5leHByZXNzaW9uLGVsW2N0eF0uYmluZGluZ0ZuPWJpbmRpbmcudmFsdWV9LHVuYmluZDpmdW5jdGlvbihlbCl7Zm9yKHZhciBsZW49bm9kZUxpc3QubGVuZ3RoLGk9MDtpPGxlbjtpKyspaWYobm9kZUxpc3RbaV1bY3R4XS5pZD09PWVsW2N0eF0uaWQpe25vZGVMaXN0LnNwbGljZShpLDEpO2JyZWFrfWRlbGV0ZSBlbFtjdHhdfX19LFFmZ206ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2V4cG9ydHMuX19lc01vZHVsZT0hMDt2YXIgX3R5cGVvZj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqfTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2Ygb2JqfTtleHBvcnRzLmlzVk5vZGU9ZnVuY3Rpb24obm9kZSl7cmV0dXJuIG51bGwhPT1ub2RlJiYib2JqZWN0Ij09PSh2b2lkIDA9PT1ub2RlPyJ1bmRlZmluZWQiOl90eXBlb2Yobm9kZSkpJiYoMCxfdXRpbC5oYXNPd24pKG5vZGUsImNvbXBvbmVudE9wdGlvbnMiKX0sZXhwb3J0cy5nZXRGaXJzdENvbXBvbmVudENoaWxkPWZ1bmN0aW9uKGNoaWxkcmVuKXtyZXR1cm4gY2hpbGRyZW4mJmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbihjKXtyZXR1cm4gYyYmYy50YWd9KVswXX07dmFyIF91dGlsPV9fd2VicGFja19yZXF1aXJlX18oImdTSVEiKX0sU0pkVDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwLGV4cG9ydHMuaTE4bj1leHBvcnRzLnVzZT1leHBvcnRzLnQ9dm9pZCAwO3ZhciBfemhDTjI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKCI4TmtRIikpLF92dWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygiS3c1ciIpKSxfZGVlcG1lcmdlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oIlBFNEIiKSk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9fXZhciBmb3JtYXQ9KDAsX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKCJuWDZLIikpLmRlZmF1bHQpKF92dWUyLmRlZmF1bHQpLGxhbmc9X3poQ04yLmRlZmF1bHQsbWVyZ2VkPSExLGkxOG5IYW5kbGVyPWZ1bmN0aW9uKCl7dmFyIHZ1ZWkxOG49T2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXN8fF92dWUyLmRlZmF1bHQpLiR0O2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB2dWVpMThuJiZfdnVlMi5kZWZhdWx0LmxvY2FsZSlyZXR1cm4gbWVyZ2VkfHwobWVyZ2VkPSEwLF92dWUyLmRlZmF1bHQubG9jYWxlKF92dWUyLmRlZmF1bHQuY29uZmlnLmxhbmcsKDAsX2RlZXBtZXJnZTIuZGVmYXVsdCkobGFuZyxfdnVlMi5kZWZhdWx0LmxvY2FsZShfdnVlMi5kZWZhdWx0LmNvbmZpZy5sYW5nKXx8e30se2Nsb25lOiEwfSkpKSx2dWVpMThuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdD1leHBvcnRzLnQ9ZnVuY3Rpb24ocGF0aCxvcHRpb25zKXt2YXIgdmFsdWU9aTE4bkhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKG51bGwhPXZhbHVlKXJldHVybiB2YWx1ZTtmb3IodmFyIGFycmF5PXBhdGguc3BsaXQoIi4iKSxjdXJyZW50PWxhbmcsaT0wLGo9YXJyYXkubGVuZ3RoO2k8ajtpKyspe2lmKHZhbHVlPWN1cnJlbnRbYXJyYXlbaV1dLGk9PT1qLTEpcmV0dXJuIGZvcm1hdCh2YWx1ZSxvcHRpb25zKTtpZighdmFsdWUpcmV0dXJuIiI7Y3VycmVudD12YWx1ZX1yZXR1cm4iIn0sdXNlPWV4cG9ydHMudXNlPWZ1bmN0aW9uKGwpe2xhbmc9bHx8bGFuZ30saTE4bj1leHBvcnRzLmkxOG49ZnVuY3Rpb24oZm4pe2kxOG5IYW5kbGVyPWZufHxpMThuSGFuZGxlcn07ZXhwb3J0cy5kZWZhdWx0PXt1c2U6dXNlLHQ6dCxpMThuOmkxOG59fSxTeWFiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITA7dmFyIG9iaixfdnVlPV9fd2VicGFja19yZXF1aXJlX18oIkt3NXIiKSxfdnVlMj0ob2JqPV92dWUpJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfSxfZG9tPV9fd2VicGFja19yZXF1aXJlX18oIldTVDEiKTt2YXIgaGFzTW9kYWw9ITEsaGFzSW5pdFpJbmRleD0hMSx6SW5kZXg9MmUzLGdldE1vZGFsPWZ1bmN0aW9uKCl7aWYoIV92dWUyLmRlZmF1bHQucHJvdG90eXBlLiRpc1NlcnZlcil7dmFyIG1vZGFsRG9tPVBvcHVwTWFuYWdlci5tb2RhbERvbTtyZXR1cm4gbW9kYWxEb20/aGFzTW9kYWw9ITA6KGhhc01vZGFsPSExLG1vZGFsRG9tPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLChQb3B1cE1hbmFnZXIubW9kYWxEb209bW9kYWxEb20pLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCksZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9KSxtb2RhbERvbS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZnVuY3Rpb24oKXtQb3B1cE1hbmFnZXIuZG9Pbk1vZGFsQ2xpY2smJlBvcHVwTWFuYWdlci5kb09uTW9kYWxDbGljaygpfSkpLG1vZGFsRG9tfX0saW5zdGFuY2VzPXt9LFBvcHVwTWFuYWdlcj17bW9kYWxGYWRlOiEwLGdldEluc3RhbmNlOmZ1bmN0aW9uKGlkKXtyZXR1cm4gaW5zdGFuY2VzW2lkXX0scmVnaXN0ZXI6ZnVuY3Rpb24oaWQsaW5zdGFuY2Upe2lkJiZpbnN0YW5jZSYmKGluc3RhbmNlc1tpZF09aW5zdGFuY2UpfSxkZXJlZ2lzdGVyOmZ1bmN0aW9uKGlkKXtpZCYmKGluc3RhbmNlc1tpZF09bnVsbCxkZWxldGUgaW5zdGFuY2VzW2lkXSl9LG5leHRaSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gUG9wdXBNYW5hZ2VyLnpJbmRleCsrfSxtb2RhbFN0YWNrOltdLGRvT25Nb2RhbENsaWNrOmZ1bmN0aW9uKCl7dmFyIHRvcEl0ZW09UG9wdXBNYW5hZ2VyLm1vZGFsU3RhY2tbUG9wdXBNYW5hZ2VyLm1vZGFsU3RhY2subGVuZ3RoLTFdO2lmKHRvcEl0ZW0pe3ZhciBpbnN0YW5jZT1Qb3B1cE1hbmFnZXIuZ2V0SW5zdGFuY2UodG9wSXRlbS5pZCk7aW5zdGFuY2UmJmluc3RhbmNlLmNsb3NlT25DbGlja01vZGFsJiZpbnN0YW5jZS5jbG9zZSgpfX0sb3Blbk1vZGFsOmZ1bmN0aW9uKGlkLHpJbmRleCxkb20sbW9kYWxDbGFzcyxtb2RhbEZhZGUpe2lmKCFfdnVlMi5kZWZhdWx0LnByb3RvdHlwZS4kaXNTZXJ2ZXImJmlkJiZ2b2lkIDAhPT16SW5kZXgpe3RoaXMubW9kYWxGYWRlPW1vZGFsRmFkZTtmb3IodmFyIG1vZGFsU3RhY2s9dGhpcy5tb2RhbFN0YWNrLGk9MCxqPW1vZGFsU3RhY2subGVuZ3RoO2k8ajtpKyspe2lmKG1vZGFsU3RhY2tbaV0uaWQ9PT1pZClyZXR1cm59dmFyIG1vZGFsRG9tPWdldE1vZGFsKCk7aWYoKDAsX2RvbS5hZGRDbGFzcykobW9kYWxEb20sInYtbW9kYWwiKSx0aGlzLm1vZGFsRmFkZSYmIWhhc01vZGFsJiYoMCxfZG9tLmFkZENsYXNzKShtb2RhbERvbSwidi1tb2RhbC1lbnRlciIpLG1vZGFsQ2xhc3MpbW9kYWxDbGFzcy50cmltKCkuc3BsaXQoL1xzKy8pLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7cmV0dXJuKDAsX2RvbS5hZGRDbGFzcykobW9kYWxEb20saXRlbSl9KTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7KDAsX2RvbS5yZW1vdmVDbGFzcykobW9kYWxEb20sInYtbW9kYWwtZW50ZXIiKX0sMjAwKSxkb20mJmRvbS5wYXJlbnROb2RlJiYxMSE9PWRvbS5wYXJlbnROb2RlLm5vZGVUeXBlP2RvbS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG1vZGFsRG9tKTpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsRG9tKSx6SW5kZXgmJihtb2RhbERvbS5zdHlsZS56SW5kZXg9ekluZGV4KSxtb2RhbERvbS50YWJJbmRleD0wLG1vZGFsRG9tLnN0eWxlLmRpc3BsYXk9IiIsdGhpcy5tb2RhbFN0YWNrLnB1c2goe2lkOmlkLHpJbmRleDp6SW5kZXgsbW9kYWxDbGFzczptb2RhbENsYXNzfSl9fSxjbG9zZU1vZGFsOmZ1bmN0aW9uKGlkKXt2YXIgbW9kYWxTdGFjaz10aGlzLm1vZGFsU3RhY2ssbW9kYWxEb209Z2V0TW9kYWwoKTtpZigwPG1vZGFsU3RhY2subGVuZ3RoKXt2YXIgdG9wSXRlbT1tb2RhbFN0YWNrW21vZGFsU3RhY2subGVuZ3RoLTFdO2lmKHRvcEl0ZW0uaWQ9PT1pZCl7aWYodG9wSXRlbS5tb2RhbENsYXNzKXRvcEl0ZW0ubW9kYWxDbGFzcy50cmltKCkuc3BsaXQoL1xzKy8pLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7cmV0dXJuKDAsX2RvbS5yZW1vdmVDbGFzcykobW9kYWxEb20saXRlbSl9KTttb2RhbFN0YWNrLnBvcCgpLDA8bW9kYWxTdGFjay5sZW5ndGgmJihtb2RhbERvbS5zdHlsZS56SW5kZXg9bW9kYWxTdGFja1ttb2RhbFN0YWNrLmxlbmd0aC0xXS56SW5kZXgpfWVsc2UgZm9yKHZhciBpPW1vZGFsU3RhY2subGVuZ3RoLTE7MDw9aTtpLS0paWYobW9kYWxTdGFja1tpXS5pZD09PWlkKXttb2RhbFN0YWNrLnNwbGljZShpLDEpO2JyZWFrfX0wPT09bW9kYWxTdGFjay5sZW5ndGgmJih0aGlzLm1vZGFsRmFkZSYmKDAsX2RvbS5hZGRDbGFzcykobW9kYWxEb20sInYtbW9kYWwtbGVhdmUiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7MD09PW1vZGFsU3RhY2subGVuZ3RoJiYobW9kYWxEb20ucGFyZW50Tm9kZSYmbW9kYWxEb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtb2RhbERvbSksbW9kYWxEb20uc3R5bGUuZGlzcGxheT0ibm9uZSIsUG9wdXBNYW5hZ2VyLm1vZGFsRG9tPXZvaWQgMCksKDAsX2RvbS5yZW1vdmVDbGFzcykobW9kYWxEb20sInYtbW9kYWwtbGVhdmUiKX0sMjAwKSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9wdXBNYW5hZ2VyLCJ6SW5kZXgiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGhhc0luaXRaSW5kZXh8fCh6SW5kZXg9KF92dWUyLmRlZmF1bHQucHJvdG90eXBlLiRFTEVNRU5UfHx7fSkuekluZGV4fHx6SW5kZXgsaGFzSW5pdFpJbmRleD0hMCksekluZGV4fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe3pJbmRleD12YWx1ZX19KTtfdnVlMi5kZWZhdWx0LnByb3RvdHlwZS4kaXNTZXJ2ZXJ8fHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIixmdW5jdGlvbihldmVudCl7aWYoMjc9PT1ldmVudC5rZXlDb2RlKXt2YXIgdG9wUG9wdXA9ZnVuY3Rpb24oKXtpZighX3Z1ZTIuZGVmYXVsdC5wcm90b3R5cGUuJGlzU2VydmVyJiYwPFBvcHVwTWFuYWdlci5tb2RhbFN0YWNrLmxlbmd0aCl7dmFyIHRvcFBvcHVwPVBvcHVwTWFuYWdlci5tb2RhbFN0YWNrW1BvcHVwTWFuYWdlci5tb2RhbFN0YWNrLmxlbmd0aC0xXTtpZighdG9wUG9wdXApcmV0dXJuO3JldHVybiBQb3B1cE1hbmFnZXIuZ2V0SW5zdGFuY2UodG9wUG9wdXAuaWQpfX0oKTt0b3BQb3B1cCYmdG9wUG9wdXAuY2xvc2VPblByZXNzRXNjYXBlJiYodG9wUG9wdXAuaGFuZGxlQ2xvc2U/dG9wUG9wdXAuaGFuZGxlQ2xvc2UoKTp0b3BQb3B1cC5oYW5kbGVBY3Rpb24/dG9wUG9wdXAuaGFuZGxlQWN0aW9uKCJjYW5jZWwiKTp0b3BQb3B1cC5jbG9zZSgpKX19KSxleHBvcnRzLmRlZmF1bHQ9UG9wdXBNYW5hZ2VyfSxUa3VOOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG1vZHVsZXMpe3ZhciBpbnN0YWxsZWRNb2R1bGVzPXt9O2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpe2lmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO3ZhciBtb2R1bGU9aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF09e2k6bW9kdWxlSWQsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cyxtb2R1bGUsbW9kdWxlLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksbW9kdWxlLmw9ITAsbW9kdWxlLmV4cG9ydHN9cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT1tb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uYz1pbnN0YWxsZWRNb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihleHBvcnRzLG5hbWUsZ2V0dGVyKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cyxuYW1lKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsbmFtZSx7ZW51bWVyYWJsZTohMCxnZXQ6Z2V0dGVyfSl9LF9fd2VicGFja19yZXF1aXJlX18ucj1mdW5jdGlvbihleHBvcnRzKXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnQ9ZnVuY3Rpb24odmFsdWUsbW9kZSl7aWYoMSZtb2RlJiYodmFsdWU9X193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSkpLDgmbW9kZSlyZXR1cm4gdmFsdWU7aWYoNCZtb2RlJiYib2JqZWN0Ij09dHlwZW9mIHZhbHVlJiZ2YWx1ZSYmdmFsdWUuX19lc01vZHVsZSlyZXR1cm4gdmFsdWU7dmFyIG5zPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnZhbHVlfSksMiZtb2RlJiYic3RyaW5nIiE9dHlwZW9mIHZhbHVlKWZvcih2YXIga2V5IGluIHZhbHVlKV9fd2VicGFja19yZXF1aXJlX18uZChucyxrZXksZnVuY3Rpb24oa2V5KXtyZXR1cm4gdmFsdWVba2V5XX0uYmluZChudWxsLGtleSkpO3JldHVybiBuc30sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKG1vZHVsZSl7dmFyIGdldHRlcj1tb2R1bGUmJm1vZHVsZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBtb2R1bGV9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCJhIixnZXR0ZXIpLGdldHRlcn0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKG9iamVjdCxwcm9wZXJ0eSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9Ii9kaXN0LyIsX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnM9NTIpfShbZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG5vcm1hbGl6ZUNvbXBvbmVudChzY3JpcHRFeHBvcnRzLHJlbmRlcixzdGF0aWNSZW5kZXJGbnMsZnVuY3Rpb25hbFRlbXBsYXRlLGluamVjdFN0eWxlcyxzY29wZUlkLG1vZHVsZUlkZW50aWZpZXIsc2hhZG93TW9kZSl7dmFyIGhvb2ssb3B0aW9ucz0iZnVuY3Rpb24iPT10eXBlb2Ygc2NyaXB0RXhwb3J0cz9zY3JpcHRFeHBvcnRzLm9wdGlvbnM6c2NyaXB0RXhwb3J0cztpZihyZW5kZXImJihvcHRpb25zLnJlbmRlcj1yZW5kZXIsb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnM9c3RhdGljUmVuZGVyRm5zLG9wdGlvbnMuX2NvbXBpbGVkPSEwKSxmdW5jdGlvbmFsVGVtcGxhdGUmJihvcHRpb25zLmZ1bmN0aW9uYWw9ITApLHNjb3BlSWQmJihvcHRpb25zLl9zY29wZUlkPSJkYXRhLXYtIitzY29wZUlkKSxtb2R1bGVJZGVudGlmaWVyPyhob29rPWZ1bmN0aW9uKGNvbnRleHQpeyhjb250ZXh0PWNvbnRleHR8fHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fHx0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuJHZub2RlJiZ0aGlzLnBhcmVudC4kdm5vZGUuc3NyQ29udGV4dCl8fCJ1bmRlZmluZWQiPT10eXBlb2YgX19WVUVfU1NSX0NPTlRFWFRfX3x8KGNvbnRleHQ9X19WVUVfU1NSX0NPTlRFWFRfXyksaW5qZWN0U3R5bGVzJiZpbmplY3RTdHlsZXMuY2FsbCh0aGlzLGNvbnRleHQpLGNvbnRleHQmJmNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzJiZjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cy5hZGQobW9kdWxlSWRlbnRpZmllcil9LG9wdGlvbnMuX3NzclJlZ2lzdGVyPWhvb2spOmluamVjdFN0eWxlcyYmKGhvb2s9c2hhZG93TW9kZT9mdW5jdGlvbigpe2luamVjdFN0eWxlcy5jYWxsKHRoaXMsdGhpcy4kcm9vdC4kb3B0aW9ucy5zaGFkb3dSb290KX06aW5qZWN0U3R5bGVzKSxob29rKWlmKG9wdGlvbnMuZnVuY3Rpb25hbCl7b3B0aW9ucy5faW5qZWN0U3R5bGVzPWhvb2s7dmFyIG9yaWdpbmFsUmVuZGVyPW9wdGlvbnMucmVuZGVyO29wdGlvbnMucmVuZGVyPWZ1bmN0aW9uKGgsY29udGV4dCl7cmV0dXJuIGhvb2suY2FsbChjb250ZXh0KSxvcmlnaW5hbFJlbmRlcihoLGNvbnRleHQpfX1lbHNle3ZhciBleGlzdGluZz1vcHRpb25zLmJlZm9yZUNyZWF0ZTtvcHRpb25zLmJlZm9yZUNyZWF0ZT1leGlzdGluZz9bXS5jb25jYXQoZXhpc3RpbmcsaG9vayk6W2hvb2tdfXJldHVybntleHBvcnRzOnNjcmlwdEV4cG9ydHMsb3B0aW9uczpvcHRpb25zfX1fX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiYSIsZnVuY3Rpb24oKXtyZXR1cm4gbm9ybWFsaXplQ29tcG9uZW50fSl9LCwsZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIjBCREgiKX0sZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oImdTSVEiKX0sZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIjZYVHgiKX0sLGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhM3pvIil9LCxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiODYwNiIpfSwsZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIlFYL2IiKX0sZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIlNKZFQiKX0sLGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJEaFZEIil9LGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJRQkJvIil9LCwsLGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJGT25VIil9LCxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiRXZJOSIpfSwsLCwsZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oImk3d0UiKX0sZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIktsNTUiKX0sLGZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygibGkiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0udmlzaWJsZSxleHByZXNzaW9uOiJ2aXNpYmxlIn1dLHN0YXRpY0NsYXNzOiJlbC1zZWxlY3QtZHJvcGRvd25fX2l0ZW0iLGNsYXNzOntzZWxlY3RlZDpfdm0uaXRlbVNlbGVjdGVkLCJpcy1kaXNhYmxlZCI6X3ZtLmRpc2FibGVkfHxfdm0uZ3JvdXBEaXNhYmxlZHx8X3ZtLmxpbWl0UmVhY2hlZCxob3Zlcjpfdm0uaG92ZXJ9LG9uOnttb3VzZWVudGVyOl92bS5ob3Zlckl0ZW0sY2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLF92bS5zZWxlY3RPcHRpb25DbGljaygkZXZlbnQpfX19LFtfdm0uX3QoImRlZmF1bHQiLFtfYygic3BhbiIsW192bS5fdihfdm0uX3MoX3ZtLmN1cnJlbnRMYWJlbCkpXSldKV0sMil9O3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBlbWl0dGVyXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDMpLGVtaXR0ZXJfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oZW1pdHRlcl8pLHV0aWxfPV9fd2VicGFja19yZXF1aXJlX18oNCksX3R5cGVvZj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqfTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2Ygb2JqfSxzcmNfb3B0aW9udnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfPXttaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hXSxuYW1lOiJFbE9wdGlvbiIsY29tcG9uZW50TmFtZToiRWxPcHRpb24iLGluamVjdDpbInNlbGVjdCJdLHByb3BzOnt2YWx1ZTp7cmVxdWlyZWQ6ITB9LGxhYmVsOltTdHJpbmcsTnVtYmVyXSxjcmVhdGVkOkJvb2xlYW4sZGlzYWJsZWQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntpbmRleDotMSxncm91cERpc2FibGVkOiExLHZpc2libGU6ITAsaGl0U3RhdGU6ITEsaG92ZXI6ITF9fSxjb21wdXRlZDp7aXNPYmplY3Q6ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBvYmplY3RdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzLnZhbHVlKS50b0xvd2VyQ2FzZSgpfSxjdXJyZW50TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbHx8KHRoaXMuaXNPYmplY3Q/IiI6dGhpcy52YWx1ZSl9LGN1cnJlbnRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlfHx0aGlzLmxhYmVsfHwiIn0saXRlbVNlbGVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0Lm11bHRpcGxlP3RoaXMuY29udGFpbnModGhpcy5zZWxlY3QudmFsdWUsdGhpcy52YWx1ZSk6dGhpcy5pc0VxdWFsKHRoaXMudmFsdWUsdGhpcy5zZWxlY3QudmFsdWUpfSxsaW1pdFJlYWNoZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuc2VsZWN0Lm11bHRpcGxlJiYoIXRoaXMuaXRlbVNlbGVjdGVkJiYodGhpcy5zZWxlY3QudmFsdWV8fFtdKS5sZW5ndGg+PXRoaXMuc2VsZWN0Lm11bHRpcGxlTGltaXQmJjA8dGhpcy5zZWxlY3QubXVsdGlwbGVMaW1pdCl9fSx3YXRjaDp7Y3VycmVudExhYmVsOmZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVkfHx0aGlzLnNlbGVjdC5yZW1vdGV8fHRoaXMuZGlzcGF0Y2goIkVsU2VsZWN0Iiwic2V0U2VsZWN0ZWQiKX0sdmFsdWU6ZnVuY3Rpb24odmFsLG9sZFZhbCl7dmFyIF9zZWxlY3Q9dGhpcy5zZWxlY3QscmVtb3RlPV9zZWxlY3QucmVtb3RlLHZhbHVlS2V5PV9zZWxlY3QudmFsdWVLZXk7aWYoIXRoaXMuY3JlYXRlZCYmIXJlbW90ZSl7aWYodmFsdWVLZXkmJiJvYmplY3QiPT09KHZvaWQgMD09PXZhbD8idW5kZWZpbmVkIjpfdHlwZW9mKHZhbCkpJiYib2JqZWN0Ij09PSh2b2lkIDA9PT1vbGRWYWw/InVuZGVmaW5lZCI6X3R5cGVvZihvbGRWYWwpKSYmdmFsW3ZhbHVlS2V5XT09PW9sZFZhbFt2YWx1ZUtleV0pcmV0dXJuO3RoaXMuZGlzcGF0Y2goIkVsU2VsZWN0Iiwic2V0U2VsZWN0ZWQiKX19fSxtZXRob2RzOntpc0VxdWFsOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5pc09iamVjdCl7dmFyIHZhbHVlS2V5PXRoaXMuc2VsZWN0LnZhbHVlS2V5O3JldHVybiBPYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKGEsdmFsdWVLZXkpPT09T2JqZWN0KHV0aWxfLmdldFZhbHVlQnlQYXRoKShiLHZhbHVlS2V5KX1yZXR1cm4gYT09PWJ9LGNvbnRhaW5zOmZ1bmN0aW9uKCl7dmFyIGFycj0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W10sdGFyZ2V0PWFyZ3VtZW50c1sxXTtpZih0aGlzLmlzT2JqZWN0KXt2YXIgdmFsdWVLZXk9dGhpcy5zZWxlY3QudmFsdWVLZXk7cmV0dXJuIGFyci5zb21lKGZ1bmN0aW9uKGl0ZW0pe3JldHVybiBPYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKGl0ZW0sdmFsdWVLZXkpPT09T2JqZWN0KHV0aWxfLmdldFZhbHVlQnlQYXRoKSh0YXJnZXQsdmFsdWVLZXkpfSl9cmV0dXJuLTE8YXJyLmluZGV4T2YodGFyZ2V0KX0saGFuZGxlR3JvdXBEaXNhYmxlZDpmdW5jdGlvbih2YWwpe3RoaXMuZ3JvdXBEaXNhYmxlZD12YWx9LGhvdmVySXRlbTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWR8fHRoaXMuZ3JvdXBEaXNhYmxlZHx8KHRoaXMuc2VsZWN0LmhvdmVySW5kZXg9dGhpcy5zZWxlY3Qub3B0aW9ucy5pbmRleE9mKHRoaXMpKX0sc2VsZWN0T3B0aW9uQ2xpY2s6ZnVuY3Rpb24oKXshMCE9PXRoaXMuZGlzYWJsZWQmJiEwIT09dGhpcy5ncm91cERpc2FibGVkJiZ0aGlzLmRpc3BhdGNoKCJFbFNlbGVjdCIsImhhbmRsZU9wdGlvbkNsaWNrIixbdGhpcywhMF0pfSxxdWVyeUNoYW5nZTpmdW5jdGlvbihxdWVyeSl7dGhpcy52aXNpYmxlPW5ldyBSZWdFeHAoT2JqZWN0KHV0aWxfLmVzY2FwZVJlZ2V4cFN0cmluZykocXVlcnkpLCJpIikudGVzdCh0aGlzLmN1cnJlbnRMYWJlbCl8fHRoaXMuY3JlYXRlZCx0aGlzLnZpc2libGV8fHRoaXMuc2VsZWN0LmZpbHRlcmVkT3B0aW9uc0NvdW50LS19fSxjcmVhdGVkOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Qub3B0aW9ucy5wdXNoKHRoaXMpLHRoaXMuc2VsZWN0LmNhY2hlZE9wdGlvbnMucHVzaCh0aGlzKSx0aGlzLnNlbGVjdC5vcHRpb25zQ291bnQrKyx0aGlzLnNlbGVjdC5maWx0ZXJlZE9wdGlvbnNDb3VudCsrLHRoaXMuJG9uKCJxdWVyeUNoYW5nZSIsdGhpcy5xdWVyeUNoYW5nZSksdGhpcy4kb24oImhhbmRsZUdyb3VwRGlzYWJsZWQiLHRoaXMuaGFuZGxlR3JvdXBEaXNhYmxlZCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdC5vbk9wdGlvbkRlc3Ryb3kodGhpcy5zZWxlY3Qub3B0aW9ucy5pbmRleE9mKHRoaXMpKX19LGNvbXBvbmVudE5vcm1hbGl6ZXI9X193ZWJwYWNrX3JlcXVpcmVfXygwKSxjb21wb25lbnQ9T2JqZWN0KGNvbXBvbmVudE5vcm1hbGl6ZXIuYSkoc3JjX29wdGlvbnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzXyxyZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvc2VsZWN0L3NyYy9vcHRpb24udnVlIjtfX3dlYnBhY2tfZXhwb3J0c19fLmE9Y29tcG9uZW50LmV4cG9ydHN9LCwsLGZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwNWMrIil9LCwsLCwsLCwsLCwsLCwsLCwsLGZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7dmFyIHJlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJjbGlja291dHNpZGUiLHJhd05hbWU6InYtY2xpY2tvdXRzaWRlIix2YWx1ZTpfdm0uaGFuZGxlQ2xvc2UsZXhwcmVzc2lvbjoiaGFuZGxlQ2xvc2UifV0sc3RhdGljQ2xhc3M6ImVsLXNlbGVjdCIsY2xhc3M6W192bS5zZWxlY3RTaXplPyJlbC1zZWxlY3QtLSIrX3ZtLnNlbGVjdFNpemU6IiJdLG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe3JldHVybiAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksX3ZtLnRvZ2dsZU1lbnUoJGV2ZW50KX19fSxbX3ZtLm11bHRpcGxlP19jKCJkaXYiLHtyZWY6InRhZ3MiLHN0YXRpY0NsYXNzOiJlbC1zZWxlY3RfX3RhZ3MiLHN0eWxlOnsibWF4LXdpZHRoIjpfdm0uaW5wdXRXaWR0aC0zMisicHgiLHdpZHRoOiIxMDAlIn19LFtfdm0uY29sbGFwc2VUYWdzJiZfdm0uc2VsZWN0ZWQubGVuZ3RoP19jKCJzcGFuIixbX2MoImVsLXRhZyIse2F0dHJzOntjbG9zYWJsZTohX3ZtLnNlbGVjdERpc2FibGVkLHNpemU6X3ZtLmNvbGxhcHNlVGFnU2l6ZSxoaXQ6X3ZtLnNlbGVjdGVkWzBdLmhpdFN0YXRlLHR5cGU6ImluZm8iLCJkaXNhYmxlLXRyYW5zaXRpb25zIjoiIn0sb246e2Nsb3NlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmRlbGV0ZVRhZygkZXZlbnQsX3ZtLnNlbGVjdGVkWzBdKX19fSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtc2VsZWN0X190YWdzLXRleHQifSxbX3ZtLl92KF92bS5fcyhfdm0uc2VsZWN0ZWRbMF0uY3VycmVudExhYmVsKSldKV0pLDE8X3ZtLnNlbGVjdGVkLmxlbmd0aD9fYygiZWwtdGFnIix7YXR0cnM6e2Nsb3NhYmxlOiExLHNpemU6X3ZtLmNvbGxhcHNlVGFnU2l6ZSx0eXBlOiJpbmZvIiwiZGlzYWJsZS10cmFuc2l0aW9ucyI6IiJ9fSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtc2VsZWN0X190YWdzLXRleHQifSxbX3ZtLl92KCIrICIrX3ZtLl9zKF92bS5zZWxlY3RlZC5sZW5ndGgtMSkpXSldKTpfdm0uX2UoKV0sMSk6X3ZtLl9lKCksX3ZtLmNvbGxhcHNlVGFncz9fdm0uX2UoKTpfYygidHJhbnNpdGlvbi1ncm91cCIse29uOnsiYWZ0ZXItbGVhdmUiOl92bS5yZXNldElucHV0SGVpZ2h0fX0sX3ZtLl9sKF92bS5zZWxlY3RlZCxmdW5jdGlvbihpdGVtKXtyZXR1cm4gX2MoImVsLXRhZyIse2tleTpfdm0uZ2V0VmFsdWVLZXkoaXRlbSksYXR0cnM6e2Nsb3NhYmxlOiFfdm0uc2VsZWN0RGlzYWJsZWQsc2l6ZTpfdm0uY29sbGFwc2VUYWdTaXplLGhpdDppdGVtLmhpdFN0YXRlLHR5cGU6ImluZm8iLCJkaXNhYmxlLXRyYW5zaXRpb25zIjoiIn0sb246e2Nsb3NlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmRlbGV0ZVRhZygkZXZlbnQsaXRlbSl9fX0sW19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXNlbGVjdF9fdGFncy10ZXh0In0sW192bS5fdihfdm0uX3MoaXRlbS5jdXJyZW50TGFiZWwpKV0pXSl9KSwxKSxfdm0uZmlsdGVyYWJsZT9fYygiaW5wdXQiLHtkaXJlY3RpdmVzOlt7bmFtZToibW9kZWwiLHJhd05hbWU6InYtbW9kZWwiLHZhbHVlOl92bS5xdWVyeSxleHByZXNzaW9uOiJxdWVyeSJ9XSxyZWY6ImlucHV0IixzdGF0aWNDbGFzczoiZWwtc2VsZWN0X19pbnB1dCIsY2xhc3M6W192bS5zZWxlY3RTaXplPyJpcy0iK192bS5zZWxlY3RTaXplOiIiXSxzdHlsZTp7ImZsZXgtZ3JvdyI6IjEiLHdpZHRoOl92bS5pbnB1dExlbmd0aC8oX3ZtLmlucHV0V2lkdGgtMzIpKyIlIiwibWF4LXdpZHRoIjpfdm0uaW5wdXRXaWR0aC00MisicHgifSxhdHRyczp7dHlwZToidGV4dCIsZGlzYWJsZWQ6X3ZtLnNlbGVjdERpc2FibGVkLGF1dG9jb21wbGV0ZTpfdm0uYXV0b0NvbXBsZXRlfHxfdm0uYXV0b2NvbXBsZXRlfSxkb21Qcm9wczp7dmFsdWU6X3ZtLnF1ZXJ5fSxvbjp7Zm9jdXM6X3ZtLmhhbmRsZUZvY3VzLGJsdXI6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc29mdEZvY3VzPSExfSxjbGljazpmdW5jdGlvbigkZXZlbnQpeyRldmVudC5zdG9wUHJvcGFnYXRpb24oKX0sa2V5dXA6X3ZtLm1hbmFnZVBsYWNlaG9sZGVyLGtleWRvd246W192bS5yZXNldElucHV0U3RhdGUsZnVuY3Rpb24oJGV2ZW50KXtpZighKCJidXR0b24iaW4gJGV2ZW50KSYmX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJkb3duIiw0MCwkZXZlbnQua2V5LFsiRG93biIsIkFycm93RG93biJdKSlyZXR1cm4gbnVsbDskZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0ubmF2aWdhdGVPcHRpb25zKCJuZXh0Iil9LGZ1bmN0aW9uKCRldmVudCl7aWYoISgiYnV0dG9uImluICRldmVudCkmJl92bS5faygkZXZlbnQua2V5Q29kZSwidXAiLDM4LCRldmVudC5rZXksWyJVcCIsIkFycm93VXAiXSkpcmV0dXJuIG51bGw7JGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLm5hdmlnYXRlT3B0aW9ucygicHJldiIpfSxmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJlbnRlciIsMTMsJGV2ZW50LmtleSwiRW50ZXIiKT8oJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLnNlbGVjdE9wdGlvbigkZXZlbnQpKTpudWxsfSxmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsImVzYyIsMjcsJGV2ZW50LmtleSxbIkVzYyIsIkVzY2FwZSJdKSlyZXR1cm4gbnVsbDskZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLnZpc2libGU9ITF9LGZ1bmN0aW9uKCRldmVudCl7cmV0dXJuImJ1dHRvbiJpbiAkZXZlbnR8fCFfdm0uX2soJGV2ZW50LmtleUNvZGUsImRlbGV0ZSIsWzgsNDZdLCRldmVudC5rZXksWyJCYWNrc3BhY2UiLCJEZWxldGUiLCJEZWwiXSk/X3ZtLmRlbGV0ZVByZXZUYWcoJGV2ZW50KTpudWxsfV0sY29tcG9zaXRpb25zdGFydDpfdm0uaGFuZGxlQ29tcG9zaXRpb24sY29tcG9zaXRpb251cGRhdGU6X3ZtLmhhbmRsZUNvbXBvc2l0aW9uLGNvbXBvc2l0aW9uZW5kOl92bS5oYW5kbGVDb21wb3NpdGlvbixpbnB1dDpbZnVuY3Rpb24oJGV2ZW50KXskZXZlbnQudGFyZ2V0LmNvbXBvc2luZ3x8KF92bS5xdWVyeT0kZXZlbnQudGFyZ2V0LnZhbHVlKX0sX3ZtLmRlYm91bmNlZFF1ZXJ5Q2hhbmdlXX19KTpfdm0uX2UoKV0sMSk6X3ZtLl9lKCksX2MoImVsLWlucHV0Iix7cmVmOiJyZWZlcmVuY2UiLGNsYXNzOnsiaXMtZm9jdXMiOl92bS52aXNpYmxlfSxhdHRyczp7dHlwZToidGV4dCIscGxhY2Vob2xkZXI6X3ZtLmN1cnJlbnRQbGFjZWhvbGRlcixuYW1lOl92bS5uYW1lLGlkOl92bS5pZCxhdXRvY29tcGxldGU6X3ZtLmF1dG9Db21wbGV0ZXx8X3ZtLmF1dG9jb21wbGV0ZSxzaXplOl92bS5zZWxlY3RTaXplLGRpc2FibGVkOl92bS5zZWxlY3REaXNhYmxlZCxyZWFkb25seTpfdm0ucmVhZG9ubHksInZhbGlkYXRlLWV2ZW50IjohMX0sb246e2ZvY3VzOl92bS5oYW5kbGVGb2N1cyxibHVyOl92bS5oYW5kbGVCbHVyfSxuYXRpdmVPbjp7a2V5dXA6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLmRlYm91bmNlZE9uSW5wdXRDaGFuZ2UoJGV2ZW50KX0sa2V5ZG93bjpbZnVuY3Rpb24oJGV2ZW50KXtpZighKCJidXR0b24iaW4gJGV2ZW50KSYmX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJkb3duIiw0MCwkZXZlbnQua2V5LFsiRG93biIsIkFycm93RG93biJdKSlyZXR1cm4gbnVsbDskZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLm5hdmlnYXRlT3B0aW9ucygibmV4dCIpfSxmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsInVwIiwzOCwkZXZlbnQua2V5LFsiVXAiLCJBcnJvd1VwIl0pKXJldHVybiBudWxsOyRldmVudC5zdG9wUHJvcGFnYXRpb24oKSwkZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0ubmF2aWdhdGVPcHRpb25zKCJwcmV2Iil9LGZ1bmN0aW9uKCRldmVudCl7cmV0dXJuImJ1dHRvbiJpbiAkZXZlbnR8fCFfdm0uX2soJGV2ZW50LmtleUNvZGUsImVudGVyIiwxMywkZXZlbnQua2V5LCJFbnRlciIpPygkZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0uc2VsZWN0T3B0aW9uKCRldmVudCkpOm51bGx9LGZ1bmN0aW9uKCRldmVudCl7aWYoISgiYnV0dG9uImluICRldmVudCkmJl92bS5faygkZXZlbnQua2V5Q29kZSwiZXNjIiwyNywkZXZlbnQua2V5LFsiRXNjIiwiRXNjYXBlIl0pKXJldHVybiBudWxsOyRldmVudC5zdG9wUHJvcGFnYXRpb24oKSwkZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0udmlzaWJsZT0hMX0sZnVuY3Rpb24oJGV2ZW50KXtpZighKCJidXR0b24iaW4gJGV2ZW50KSYmX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJ0YWIiLDksJGV2ZW50LmtleSwiVGFiIikpcmV0dXJuIG51bGw7X3ZtLnZpc2libGU9ITF9XSxwYXN0ZTpmdW5jdGlvbigkZXZlbnQpe3JldHVybiBfdm0uZGVib3VuY2VkT25JbnB1dENoYW5nZSgkZXZlbnQpfSxtb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmlucHV0SG92ZXJpbmc9ITB9LG1vdXNlbGVhdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaW5wdXRIb3ZlcmluZz0hMX19LG1vZGVsOnt2YWx1ZTpfdm0uc2VsZWN0ZWRMYWJlbCxjYWxsYmFjazpmdW5jdGlvbigkJHYpe192bS5zZWxlY3RlZExhYmVsPSQkdn0sZXhwcmVzc2lvbjoic2VsZWN0ZWRMYWJlbCJ9fSxbX3ZtLiRzbG90cy5wcmVmaXg/X2MoInRlbXBsYXRlIix7c2xvdDoicHJlZml4In0sW192bS5fdCgicHJlZml4IildLDIpOl92bS5fZSgpLF9jKCJ0ZW1wbGF0ZSIse3Nsb3Q6InN1ZmZpeCJ9LFtfYygiaSIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOiFfdm0uc2hvd0Nsb3NlLGV4cHJlc3Npb246IiFzaG93Q2xvc2UifV0sY2xhc3M6WyJlbC1zZWxlY3RfX2NhcmV0IiwiZWwtaW5wdXRfX2ljb24iLCJlbC1pY29uLSIrX3ZtLmljb25DbGFzc119KSxfdm0uc2hvd0Nsb3NlP19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLXNlbGVjdF9fY2FyZXQgZWwtaW5wdXRfX2ljb24gZWwtaWNvbi1jaXJjbGUtY2xvc2UiLG9uOntjbGljazpfdm0uaGFuZGxlQ2xlYXJDbGlja319KTpfdm0uX2UoKV0pXSwyKSxfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJlbC16b29tLWluLXRvcCJ9LG9uOnsiYmVmb3JlLWVudGVyIjpfdm0uaGFuZGxlTWVudUVudGVyLCJhZnRlci1sZWF2ZSI6X3ZtLmRvRGVzdHJveX19LFtfYygiZWwtc2VsZWN0LW1lbnUiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0udmlzaWJsZSYmITEhPT1fdm0uZW1wdHlUZXh0LGV4cHJlc3Npb246InZpc2libGUgJiYgZW1wdHlUZXh0ICE9PSBmYWxzZSJ9XSxyZWY6InBvcHBlciIsYXR0cnM6eyJhcHBlbmQtdG8tYm9keSI6X3ZtLnBvcHBlckFwcGVuZFRvQm9keX19LFtfYygiZWwtc2Nyb2xsYmFyIix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6MDxfdm0ub3B0aW9ucy5sZW5ndGgmJiFfdm0ubG9hZGluZyxleHByZXNzaW9uOiJvcHRpb25zLmxlbmd0aCA+IDAgJiYgIWxvYWRpbmcifV0scmVmOiJzY3JvbGxiYXIiLGNsYXNzOnsiaXMtZW1wdHkiOiFfdm0uYWxsb3dDcmVhdGUmJl92bS5xdWVyeSYmMD09PV92bS5maWx0ZXJlZE9wdGlvbnNDb3VudH0sYXR0cnM6e3RhZzoidWwiLCJ3cmFwLWNsYXNzIjoiZWwtc2VsZWN0LWRyb3Bkb3duX193cmFwIiwidmlldy1jbGFzcyI6ImVsLXNlbGVjdC1kcm9wZG93bl9fbGlzdCJ9fSxbX3ZtLnNob3dOZXdPcHRpb24/X2MoImVsLW9wdGlvbiIse2F0dHJzOnt2YWx1ZTpfdm0ucXVlcnksY3JlYXRlZDoiIn19KTpfdm0uX2UoKSxfdm0uX3QoImRlZmF1bHQiKV0sMiksX3ZtLmVtcHR5VGV4dCYmKCFfdm0uYWxsb3dDcmVhdGV8fF92bS5sb2FkaW5nfHxfdm0uYWxsb3dDcmVhdGUmJjA9PT1fdm0ub3B0aW9ucy5sZW5ndGgpP1tfdm0uJHNsb3RzLmVtcHR5P192bS5fdCgiZW1wdHkiKTpfYygicCIse3N0YXRpY0NsYXNzOiJlbC1zZWxlY3QtZHJvcGRvd25fX2VtcHR5In0sW192bS5fdigiXG4gICAgICAgICAgIitfdm0uX3MoX3ZtLmVtcHR5VGV4dCkrIlxuICAgICAgICAiKV0pXTpfdm0uX2UoKV0sMildLDEpXSwxKX07cmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGVtaXR0ZXJfPV9fd2VicGFja19yZXF1aXJlX18oMyksZW1pdHRlcl9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihlbWl0dGVyXyksZm9jdXNfPV9fd2VicGFja19yZXF1aXJlX18oMjEpLGZvY3VzX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGZvY3VzXyksbG9jYWxlXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDcpLGxvY2FsZV9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihsb2NhbGVfKSxpbnB1dF89X193ZWJwYWNrX3JlcXVpcmVfXyg5KSxpbnB1dF9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihpbnB1dF8pLHNlbGVjdF9kcm9wZG93bnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzA2ODI4NzQ4X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1zZWxlY3QtZHJvcGRvd24gZWwtcG9wcGVyIixjbGFzczpbeyJpcy1tdWx0aXBsZSI6dGhpcy4kcGFyZW50Lm11bHRpcGxlfSx0aGlzLnBvcHBlckNsYXNzXSxzdHlsZTp7bWluV2lkdGg6dGhpcy5taW5XaWR0aH19LFt0aGlzLl90KCJkZWZhdWx0IildLDIpfTtzZWxlY3RfZHJvcGRvd252dWVfdHlwZV90ZW1wbGF0ZV9pZF8wNjgyODc0OF9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgdnVlX3BvcHBlcl89X193ZWJwYWNrX3JlcXVpcmVfXyg1KSxzcmNfc2VsZWN0X2Ryb3Bkb3dudnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfPXtuYW1lOiJFbFNlbGVjdERyb3Bkb3duIixjb21wb25lbnROYW1lOiJFbFNlbGVjdERyb3Bkb3duIixtaXhpbnM6W19fd2VicGFja19yZXF1aXJlX18ubih2dWVfcG9wcGVyXykuYV0scHJvcHM6e3BsYWNlbWVudDp7ZGVmYXVsdDoiYm90dG9tLXN0YXJ0In0sYm91bmRhcmllc1BhZGRpbmc6e2RlZmF1bHQ6MH0scG9wcGVyT3B0aW9uczp7ZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybntncHVBY2NlbGVyYXRpb246ITF9fX0sdmlzaWJsZUFycm93OntkZWZhdWx0OiEwfSxhcHBlbmRUb0JvZHk6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybnttaW5XaWR0aDoiIn19LGNvbXB1dGVkOntwb3BwZXJDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRwYXJlbnQucG9wcGVyQ2xhc3N9fSx3YXRjaDp7IiRwYXJlbnQuaW5wdXRXaWR0aCI6ZnVuY3Rpb24oKXt0aGlzLm1pbldpZHRoPXRoaXMuJHBhcmVudC4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgrInB4In19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLnJlZmVyZW5jZUVsbT10aGlzLiRwYXJlbnQuJHJlZnMucmVmZXJlbmNlLiRlbCx0aGlzLiRwYXJlbnQucG9wcGVyRWxtPXRoaXMucG9wcGVyRWxtPXRoaXMuJGVsLHRoaXMuJG9uKCJ1cGRhdGVQb3BwZXIiLGZ1bmN0aW9uKCl7X3RoaXMuJHBhcmVudC52aXNpYmxlJiZfdGhpcy51cGRhdGVQb3BwZXIoKX0pLHRoaXMuJG9uKCJkZXN0cm95UG9wcGVyIix0aGlzLmRlc3Ryb3lQb3BwZXIpfX0sY29tcG9uZW50Tm9ybWFsaXplcj1fX3dlYnBhY2tfcmVxdWlyZV9fKDApLGNvbXBvbmVudD1PYmplY3QoY29tcG9uZW50Tm9ybWFsaXplci5hKShzcmNfc2VsZWN0X2Ryb3Bkb3dudnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfLHNlbGVjdF9kcm9wZG93bnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzA2ODI4NzQ4X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9zZWxlY3Qvc3JjL3NlbGVjdC1kcm9wZG93bi52dWUiO3ZhciBzZWxlY3RfZHJvcGRvd249Y29tcG9uZW50LmV4cG9ydHMsc3JjX29wdGlvbj1fX3dlYnBhY2tfcmVxdWlyZV9fKDI5KSx0YWdfPV9fd2VicGFja19yZXF1aXJlX18oMjYpLHRhZ19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubih0YWdfKSxzY3JvbGxiYXJfPV9fd2VicGFja19yZXF1aXJlX18oMTkpLHNjcm9sbGJhcl9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihzY3JvbGxiYXJfKSxkZWJvdW5jZV89X193ZWJwYWNrX3JlcXVpcmVfXygxNCksZGVib3VuY2VfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oZGVib3VuY2VfKSxjbGlja291dHNpZGVfPV9fd2VicGFja19yZXF1aXJlX18oMTEpLGNsaWNrb3V0c2lkZV9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihjbGlja291dHNpZGVfKSxyZXNpemVfZXZlbnRfPV9fd2VicGFja19yZXF1aXJlX18oMTUpLGxpYl9sb2NhbGVfPV9fd2VicGFja19yZXF1aXJlX18oMTIpLHNjcm9sbF9pbnRvX3ZpZXdfPV9fd2VicGFja19yZXF1aXJlX18oMjcpLHNjcm9sbF9pbnRvX3ZpZXdfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oc2Nyb2xsX2ludG9fdmlld18pLHV0aWxfPV9fd2VicGFja19yZXF1aXJlX18oNCksc2hhcmVkXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDMzKSxzcmNfc2VsZWN0dnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfPXttaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hLGxvY2FsZV9kZWZhdWx0LmEsZm9jdXNfZGVmYXVsdCgpKCJyZWZlcmVuY2UiKSx7ZGF0YTpmdW5jdGlvbigpe3JldHVybntob3Zlck9wdGlvbjotMX19LGNvbXB1dGVkOntvcHRpb25zQWxsRGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmZpbHRlcihmdW5jdGlvbihvcHRpb24pe3JldHVybiBvcHRpb24udmlzaWJsZX0pLmV2ZXJ5KGZ1bmN0aW9uKG9wdGlvbil7cmV0dXJuIG9wdGlvbi5kaXNhYmxlZH0pfX0sd2F0Y2g6e2hvdmVySW5kZXg6ZnVuY3Rpb24odmFsKXt2YXIgX3RoaXM9dGhpczsibnVtYmVyIj09dHlwZW9mIHZhbCYmLTE8dmFsJiYodGhpcy5ob3Zlck9wdGlvbj10aGlzLm9wdGlvbnNbdmFsXXx8e30pLHRoaXMub3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG9wdGlvbil7b3B0aW9uLmhvdmVyPV90aGlzLmhvdmVyT3B0aW9uPT09b3B0aW9ufSl9fSxtZXRob2RzOntuYXZpZ2F0ZU9wdGlvbnM6ZnVuY3Rpb24oZGlyZWN0aW9uKXt2YXIgX3RoaXMyPXRoaXM7aWYodGhpcy52aXNpYmxlKXtpZigwIT09dGhpcy5vcHRpb25zLmxlbmd0aCYmMCE9PXRoaXMuZmlsdGVyZWRPcHRpb25zQ291bnQmJiF0aGlzLm9wdGlvbnNBbGxEaXNhYmxlZCl7Im5leHQiPT09ZGlyZWN0aW9uPyh0aGlzLmhvdmVySW5kZXgrKyx0aGlzLmhvdmVySW5kZXg9PT10aGlzLm9wdGlvbnMubGVuZ3RoJiYodGhpcy5ob3ZlckluZGV4PTApKToicHJldiI9PT1kaXJlY3Rpb24mJih0aGlzLmhvdmVySW5kZXgtLSx0aGlzLmhvdmVySW5kZXg8MCYmKHRoaXMuaG92ZXJJbmRleD10aGlzLm9wdGlvbnMubGVuZ3RoLTEpKTt2YXIgb3B0aW9uPXRoaXMub3B0aW9uc1t0aGlzLmhvdmVySW5kZXhdOyEwIT09b3B0aW9uLmRpc2FibGVkJiYhMCE9PW9wdGlvbi5ncm91cERpc2FibGVkJiZvcHRpb24udmlzaWJsZXx8dGhpcy5uYXZpZ2F0ZU9wdGlvbnMoZGlyZWN0aW9uKSx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBfdGhpczIuc2Nyb2xsVG9PcHRpb24oX3RoaXMyLmhvdmVyT3B0aW9uKX0pfX1lbHNlIHRoaXMudmlzaWJsZT0hMH19fV0sbmFtZToiRWxTZWxlY3QiLGNvbXBvbmVudE5hbWU6IkVsU2VsZWN0IixpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn0sZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LHByb3ZpZGU6ZnVuY3Rpb24oKXtyZXR1cm57c2VsZWN0OnRoaXN9fSxjb21wdXRlZDp7X2VsRm9ybUl0ZW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuZWxGb3JtSXRlbXx8e30pLmVsRm9ybUl0ZW1TaXplfSxyZWFkb25seTpmdW5jdGlvbigpe3JldHVybiF0aGlzLmZpbHRlcmFibGV8fHRoaXMubXVsdGlwbGV8fCFPYmplY3QodXRpbF8uaXNJRSkoKSYmIU9iamVjdCh1dGlsXy5pc0VkZ2UpKCkmJiF0aGlzLnZpc2libGV9LHNob3dDbG9zZTpmdW5jdGlvbigpe3ZhciBoYXNWYWx1ZT10aGlzLm11bHRpcGxlP0FycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkmJjA8dGhpcy52YWx1ZS5sZW5ndGg6dm9pZCAwIT09dGhpcy52YWx1ZSYmbnVsbCE9PXRoaXMudmFsdWUmJiIiIT09dGhpcy52YWx1ZTtyZXR1cm4gdGhpcy5jbGVhcmFibGUmJiF0aGlzLnNlbGVjdERpc2FibGVkJiZ0aGlzLmlucHV0SG92ZXJpbmcmJmhhc1ZhbHVlfSxpY29uQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdGUmJnRoaXMuZmlsdGVyYWJsZT8iIjp0aGlzLnZpc2libGU/ImFycm93LXVwIGlzLXJldmVyc2UiOiJhcnJvdy11cCJ9LGRlYm91bmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3RlPzMwMDowfSxlbXB0eVRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2FkaW5nP3RoaXMubG9hZGluZ1RleHR8fHRoaXMudCgiZWwuc2VsZWN0LmxvYWRpbmciKTooIXRoaXMucmVtb3RlfHwiIiE9PXRoaXMucXVlcnl8fDAhPT10aGlzLm9wdGlvbnMubGVuZ3RoKSYmKHRoaXMuZmlsdGVyYWJsZSYmdGhpcy5xdWVyeSYmMDx0aGlzLm9wdGlvbnMubGVuZ3RoJiYwPT09dGhpcy5maWx0ZXJlZE9wdGlvbnNDb3VudD90aGlzLm5vTWF0Y2hUZXh0fHx0aGlzLnQoImVsLnNlbGVjdC5ub01hdGNoIik6MD09PXRoaXMub3B0aW9ucy5sZW5ndGg/dGhpcy5ub0RhdGFUZXh0fHx0aGlzLnQoImVsLnNlbGVjdC5ub0RhdGEiKTpudWxsKX0sc2hvd05ld09wdGlvbjpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzLGhhc0V4aXN0aW5nT3B0aW9uPXRoaXMub3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24ob3B0aW9uKXtyZXR1cm4hb3B0aW9uLmNyZWF0ZWR9KS5zb21lKGZ1bmN0aW9uKG9wdGlvbil7cmV0dXJuIG9wdGlvbi5jdXJyZW50TGFiZWw9PT1fdGhpcy5xdWVyeX0pO3JldHVybiB0aGlzLmZpbHRlcmFibGUmJnRoaXMuYWxsb3dDcmVhdGUmJiIiIT09dGhpcy5xdWVyeSYmIWhhc0V4aXN0aW5nT3B0aW9ufSxzZWxlY3RTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZXx8dGhpcy5fZWxGb3JtSXRlbVNpemV8fCh0aGlzLiRFTEVNRU5UfHx7fSkuc2l6ZX0sc2VsZWN0RGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNhYmxlZHx8KHRoaXMuZWxGb3JtfHx7fSkuZGlzYWJsZWR9LGNvbGxhcHNlVGFnU2l6ZTpmdW5jdGlvbigpe3JldHVybi0xPFsic21hbGwiLCJtaW5pIl0uaW5kZXhPZih0aGlzLnNlbGVjdFNpemUpPyJtaW5pIjoic21hbGwifX0sY29tcG9uZW50czp7RWxJbnB1dDppbnB1dF9kZWZhdWx0LmEsRWxTZWxlY3RNZW51OnNlbGVjdF9kcm9wZG93bixFbE9wdGlvbjpzcmNfb3B0aW9uLmEsRWxUYWc6dGFnX2RlZmF1bHQuYSxFbFNjcm9sbGJhcjpzY3JvbGxiYXJfZGVmYXVsdC5hfSxkaXJlY3RpdmVzOntDbGlja291dHNpZGU6Y2xpY2tvdXRzaWRlX2RlZmF1bHQuYX0scHJvcHM6e25hbWU6U3RyaW5nLGlkOlN0cmluZyx2YWx1ZTp7cmVxdWlyZWQ6ITB9LGF1dG9jb21wbGV0ZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoib2ZmIn0sYXV0b0NvbXBsZXRlOnt0eXBlOlN0cmluZyx2YWxpZGF0b3I6ZnVuY3Rpb24odmFsKXtyZXR1cm4hMH19LGF1dG9tYXRpY0Ryb3Bkb3duOkJvb2xlYW4sc2l6ZTpTdHJpbmcsZGlzYWJsZWQ6Qm9vbGVhbixjbGVhcmFibGU6Qm9vbGVhbixmaWx0ZXJhYmxlOkJvb2xlYW4sYWxsb3dDcmVhdGU6Qm9vbGVhbixsb2FkaW5nOkJvb2xlYW4scG9wcGVyQ2xhc3M6U3RyaW5nLHJlbW90ZTpCb29sZWFuLGxvYWRpbmdUZXh0OlN0cmluZyxub01hdGNoVGV4dDpTdHJpbmcsbm9EYXRhVGV4dDpTdHJpbmcscmVtb3RlTWV0aG9kOkZ1bmN0aW9uLGZpbHRlck1ldGhvZDpGdW5jdGlvbixtdWx0aXBsZTpCb29sZWFuLG11bHRpcGxlTGltaXQ6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MH0scGxhY2Vob2xkZXI6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0KGxpYl9sb2NhbGVfLnQpKCJlbC5zZWxlY3QucGxhY2Vob2xkZXIiKX19LGRlZmF1bHRGaXJzdE9wdGlvbjpCb29sZWFuLHJlc2VydmVLZXl3b3JkOkJvb2xlYW4sdmFsdWVLZXk6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6InZhbHVlIn0sY29sbGFwc2VUYWdzOkJvb2xlYW4scG9wcGVyQXBwZW5kVG9Cb2R5Ont0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57b3B0aW9uczpbXSxjYWNoZWRPcHRpb25zOltdLGNyZWF0ZWRMYWJlbDpudWxsLGNyZWF0ZWRTZWxlY3RlZDohMSxzZWxlY3RlZDp0aGlzLm11bHRpcGxlP1tdOnt9LGlucHV0TGVuZ3RoOjIwLGlucHV0V2lkdGg6MCxpbml0aWFsSW5wdXRIZWlnaHQ6MCxjYWNoZWRQbGFjZUhvbGRlcjoiIixvcHRpb25zQ291bnQ6MCxmaWx0ZXJlZE9wdGlvbnNDb3VudDowLHZpc2libGU6ITEsc29mdEZvY3VzOiExLHNlbGVjdGVkTGFiZWw6IiIsaG92ZXJJbmRleDotMSxxdWVyeToiIixwcmV2aW91c1F1ZXJ5Om51bGwsaW5wdXRIb3ZlcmluZzohMSxjdXJyZW50UGxhY2Vob2xkZXI6IiIsbWVudVZpc2libGVPbkZvY3VzOiExLGlzT25Db21wb3NpdGlvbjohMSxpc1NpbGVudEJsdXI6ITF9fSx3YXRjaDp7c2VsZWN0RGlzYWJsZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXM7dGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczIucmVzZXRJbnB1dEhlaWdodCgpfSl9LHBsYWNlaG9sZGVyOmZ1bmN0aW9uKHZhbCl7dGhpcy5jYWNoZWRQbGFjZUhvbGRlcj10aGlzLmN1cnJlbnRQbGFjZWhvbGRlcj12YWx9LHZhbHVlOmZ1bmN0aW9uKHZhbCxvbGRWYWwpe3RoaXMubXVsdGlwbGUmJih0aGlzLnJlc2V0SW5wdXRIZWlnaHQoKSwwPHZhbC5sZW5ndGh8fHRoaXMuJHJlZnMuaW5wdXQmJiIiIT09dGhpcy5xdWVyeT90aGlzLmN1cnJlbnRQbGFjZWhvbGRlcj0iIjp0aGlzLmN1cnJlbnRQbGFjZWhvbGRlcj10aGlzLmNhY2hlZFBsYWNlSG9sZGVyLHRoaXMuZmlsdGVyYWJsZSYmIXRoaXMucmVzZXJ2ZUtleXdvcmQmJih0aGlzLnF1ZXJ5PSIiLHRoaXMuaGFuZGxlUXVlcnlDaGFuZ2UodGhpcy5xdWVyeSkpKSx0aGlzLnNldFNlbGVjdGVkKCksdGhpcy5maWx0ZXJhYmxlJiYhdGhpcy5tdWx0aXBsZSYmKHRoaXMuaW5wdXRMZW5ndGg9MjApLE9iamVjdCh1dGlsXy52YWx1ZUVxdWFscykodmFsLG9sZFZhbCl8fHRoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmNoYW5nZSIsdmFsKX0sdmlzaWJsZTpmdW5jdGlvbih2YWwpe3ZhciBfdGhpczM9dGhpczt2YWw/KHRoaXMuYnJvYWRjYXN0KCJFbFNlbGVjdERyb3Bkb3duIiwidXBkYXRlUG9wcGVyIiksdGhpcy5maWx0ZXJhYmxlJiYodGhpcy5xdWVyeT10aGlzLnJlbW90ZT8iIjp0aGlzLnNlbGVjdGVkTGFiZWwsdGhpcy5oYW5kbGVRdWVyeUNoYW5nZSh0aGlzLnF1ZXJ5KSx0aGlzLm11bHRpcGxlP3RoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKToodGhpcy5yZW1vdGV8fCh0aGlzLmJyb2FkY2FzdCgiRWxPcHRpb24iLCJxdWVyeUNoYW5nZSIsIiIpLHRoaXMuYnJvYWRjYXN0KCJFbE9wdGlvbkdyb3VwIiwicXVlcnlDaGFuZ2UiKSksdGhpcy5icm9hZGNhc3QoIkVsSW5wdXQiLCJpbnB1dFNlbGVjdCIpKSkpOih0aGlzLmJyb2FkY2FzdCgiRWxTZWxlY3REcm9wZG93biIsImRlc3Ryb3lQb3BwZXIiKSx0aGlzLiRyZWZzLmlucHV0JiZ0aGlzLiRyZWZzLmlucHV0LmJsdXIoKSx0aGlzLnF1ZXJ5PSIiLHRoaXMucHJldmlvdXNRdWVyeT1udWxsLHRoaXMuc2VsZWN0ZWRMYWJlbD0iIix0aGlzLmlucHV0TGVuZ3RoPTIwLHRoaXMubWVudVZpc2libGVPbkZvY3VzPSExLHRoaXMucmVzZXRIb3ZlckluZGV4KCksdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczMuJHJlZnMuaW5wdXQmJiIiPT09X3RoaXMzLiRyZWZzLmlucHV0LnZhbHVlJiYwPT09X3RoaXMzLnNlbGVjdGVkLmxlbmd0aCYmKF90aGlzMy5jdXJyZW50UGxhY2Vob2xkZXI9X3RoaXMzLmNhY2hlZFBsYWNlSG9sZGVyKX0pLHRoaXMubXVsdGlwbGV8fHRoaXMuc2VsZWN0ZWQmJih0aGlzLmZpbHRlcmFibGUmJnRoaXMuYWxsb3dDcmVhdGUmJnRoaXMuY3JlYXRlZFNlbGVjdGVkJiZ0aGlzLmNyZWF0ZWRMYWJlbD90aGlzLnNlbGVjdGVkTGFiZWw9dGhpcy5jcmVhdGVkTGFiZWw6dGhpcy5zZWxlY3RlZExhYmVsPXRoaXMuc2VsZWN0ZWQuY3VycmVudExhYmVsLHRoaXMuZmlsdGVyYWJsZSYmKHRoaXMucXVlcnk9dGhpcy5zZWxlY3RlZExhYmVsKSkpLHRoaXMuJGVtaXQoInZpc2libGUtY2hhbmdlIix2YWwpfSxvcHRpb25zOmZ1bmN0aW9uKCl7dmFyIF90aGlzND10aGlzO2lmKCF0aGlzLiRpc1NlcnZlcil7dGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczQuYnJvYWRjYXN0KCJFbFNlbGVjdERyb3Bkb3duIiwidXBkYXRlUG9wcGVyIil9KSx0aGlzLm11bHRpcGxlJiZ0aGlzLnJlc2V0SW5wdXRIZWlnaHQoKTt2YXIgaW5wdXRzPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0Iik7LTE9PT1bXS5pbmRleE9mLmNhbGwoaW5wdXRzLGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpJiZ0aGlzLnNldFNlbGVjdGVkKCksdGhpcy5kZWZhdWx0Rmlyc3RPcHRpb24mJih0aGlzLmZpbHRlcmFibGV8fHRoaXMucmVtb3RlKSYmdGhpcy5maWx0ZXJlZE9wdGlvbnNDb3VudCYmdGhpcy5jaGVja0RlZmF1bHRGaXJzdE9wdGlvbigpfX19LG1ldGhvZHM6e2hhbmRsZUNvbXBvc2l0aW9uOmZ1bmN0aW9uKGV2ZW50KXt2YXIgdGV4dD1ldmVudC50YXJnZXQudmFsdWU7aWYoImNvbXBvc2l0aW9uZW5kIj09PWV2ZW50LnR5cGUpdGhpcy5pc09uQ29tcG9zaXRpb249ITEsdGhpcy5oYW5kbGVRdWVyeUNoYW5nZSh0ZXh0KTtlbHNle3ZhciBsYXN0Q2hhcmFjdGVyPXRleHRbdGV4dC5sZW5ndGgtMV18fCIiO3RoaXMuaXNPbkNvbXBvc2l0aW9uPSFPYmplY3Qoc2hhcmVkXy5pc0tvcmVhbikobGFzdENoYXJhY3Rlcil9fSxoYW5kbGVRdWVyeUNoYW5nZTpmdW5jdGlvbih2YWwpe3ZhciBfdGhpczU9dGhpcztpZih0aGlzLnByZXZpb3VzUXVlcnkhPT12YWwmJiF0aGlzLmlzT25Db21wb3NpdGlvbilpZihudWxsIT09dGhpcy5wcmV2aW91c1F1ZXJ5fHwiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5maWx0ZXJNZXRob2QmJiJmdW5jdGlvbiIhPXR5cGVvZiB0aGlzLnJlbW90ZU1ldGhvZCl7aWYodGhpcy5wcmV2aW91c1F1ZXJ5PXZhbCx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzNS52aXNpYmxlJiZfdGhpczUuYnJvYWRjYXN0KCJFbFNlbGVjdERyb3Bkb3duIiwidXBkYXRlUG9wcGVyIil9KSx0aGlzLmhvdmVySW5kZXg9LTEsdGhpcy5tdWx0aXBsZSYmdGhpcy5maWx0ZXJhYmxlKXt2YXIgbGVuZ3RoPTE1KnRoaXMuJHJlZnMuaW5wdXQudmFsdWUubGVuZ3RoKzIwO3RoaXMuaW5wdXRMZW5ndGg9dGhpcy5jb2xsYXBzZVRhZ3M/TWF0aC5taW4oNTAsbGVuZ3RoKTpsZW5ndGgsdGhpcy5tYW5hZ2VQbGFjZWhvbGRlcigpLHRoaXMucmVzZXRJbnB1dEhlaWdodCgpfXRoaXMucmVtb3RlJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZW1vdGVNZXRob2Q/KHRoaXMuaG92ZXJJbmRleD0tMSx0aGlzLnJlbW90ZU1ldGhvZCh2YWwpKTooImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuZmlsdGVyTWV0aG9kP3RoaXMuZmlsdGVyTWV0aG9kKHZhbCk6KHRoaXMuZmlsdGVyZWRPcHRpb25zQ291bnQ9dGhpcy5vcHRpb25zQ291bnQsdGhpcy5icm9hZGNhc3QoIkVsT3B0aW9uIiwicXVlcnlDaGFuZ2UiLHZhbCkpLHRoaXMuYnJvYWRjYXN0KCJFbE9wdGlvbkdyb3VwIiwicXVlcnlDaGFuZ2UiKSksdGhpcy5kZWZhdWx0Rmlyc3RPcHRpb24mJih0aGlzLmZpbHRlcmFibGV8fHRoaXMucmVtb3RlKSYmdGhpcy5maWx0ZXJlZE9wdGlvbnNDb3VudCYmdGhpcy5jaGVja0RlZmF1bHRGaXJzdE9wdGlvbigpfWVsc2UgdGhpcy5wcmV2aW91c1F1ZXJ5PXZhbH0sc2Nyb2xsVG9PcHRpb246ZnVuY3Rpb24ob3B0aW9uKXt2YXIgdGFyZ2V0PUFycmF5LmlzQXJyYXkob3B0aW9uKSYmb3B0aW9uWzBdP29wdGlvblswXS4kZWw6b3B0aW9uLiRlbDtpZih0aGlzLiRyZWZzLnBvcHBlciYmdGFyZ2V0KXt2YXIgbWVudT10aGlzLiRyZWZzLnBvcHBlci4kZWwucXVlcnlTZWxlY3RvcigiLmVsLXNlbGVjdC1kcm9wZG93bl9fd3JhcCIpO3Njcm9sbF9pbnRvX3ZpZXdfZGVmYXVsdCgpKG1lbnUsdGFyZ2V0KX10aGlzLiRyZWZzLnNjcm9sbGJhciYmdGhpcy4kcmVmcy5zY3JvbGxiYXIuaGFuZGxlU2Nyb2xsKCl9LGhhbmRsZU1lbnVFbnRlcjpmdW5jdGlvbigpe3ZhciBfdGhpczY9dGhpczt0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBfdGhpczYuc2Nyb2xsVG9PcHRpb24oX3RoaXM2LnNlbGVjdGVkKX0pfSxlbWl0Q2hhbmdlOmZ1bmN0aW9uKHZhbCl7T2JqZWN0KHV0aWxfLnZhbHVlRXF1YWxzKSh0aGlzLnZhbHVlLHZhbCl8fHRoaXMuJGVtaXQoImNoYW5nZSIsdmFsKX0sZ2V0T3B0aW9uOmZ1bmN0aW9uKHZhbHVlKXtmb3IodmFyIG9wdGlvbj12b2lkIDAsaXNPYmplY3Q9IltvYmplY3Qgb2JqZWN0XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnRvTG93ZXJDYXNlKCksaXNOdWxsPSJbb2JqZWN0IG51bGxdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkudG9Mb3dlckNhc2UoKSxpPXRoaXMuY2FjaGVkT3B0aW9ucy5sZW5ndGgtMTswPD1pO2ktLSl7dmFyIGNhY2hlZE9wdGlvbj10aGlzLmNhY2hlZE9wdGlvbnNbaV07aWYoaXNPYmplY3Q/T2JqZWN0KHV0aWxfLmdldFZhbHVlQnlQYXRoKShjYWNoZWRPcHRpb24udmFsdWUsdGhpcy52YWx1ZUtleSk9PT1PYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKHZhbHVlLHRoaXMudmFsdWVLZXkpOmNhY2hlZE9wdGlvbi52YWx1ZT09PXZhbHVlKXtvcHRpb249Y2FjaGVkT3B0aW9uO2JyZWFrfX1pZihvcHRpb24pcmV0dXJuIG9wdGlvbjt2YXIgbmV3T3B0aW9uPXt2YWx1ZTp2YWx1ZSxjdXJyZW50TGFiZWw6aXNPYmplY3R8fGlzTnVsbD8iIjp2YWx1ZX07cmV0dXJuIHRoaXMubXVsdGlwbGUmJihuZXdPcHRpb24uaGl0U3RhdGU9ITEpLG5ld09wdGlvbn0sc2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM3PXRoaXM7aWYoIXRoaXMubXVsdGlwbGUpe3ZhciBvcHRpb249dGhpcy5nZXRPcHRpb24odGhpcy52YWx1ZSk7cmV0dXJuIG9wdGlvbi5jcmVhdGVkPyh0aGlzLmNyZWF0ZWRMYWJlbD1vcHRpb24uY3VycmVudExhYmVsLHRoaXMuY3JlYXRlZFNlbGVjdGVkPSEwKTp0aGlzLmNyZWF0ZWRTZWxlY3RlZD0hMSx0aGlzLnNlbGVjdGVkTGFiZWw9b3B0aW9uLmN1cnJlbnRMYWJlbCx0aGlzLnNlbGVjdGVkPW9wdGlvbix2b2lkKHRoaXMuZmlsdGVyYWJsZSYmKHRoaXMucXVlcnk9dGhpcy5zZWxlY3RlZExhYmVsKSl9dmFyIHJlc3VsdD1bXTtBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpJiZ0aGlzLnZhbHVlLmZvckVhY2goZnVuY3Rpb24odmFsdWUpe3Jlc3VsdC5wdXNoKF90aGlzNy5nZXRPcHRpb24odmFsdWUpKX0pLHRoaXMuc2VsZWN0ZWQ9cmVzdWx0LHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7X3RoaXM3LnJlc2V0SW5wdXRIZWlnaHQoKX0pfSxoYW5kbGVGb2N1czpmdW5jdGlvbihldmVudCl7dGhpcy5zb2Z0Rm9jdXM/dGhpcy5zb2Z0Rm9jdXM9ITE6KCh0aGlzLmF1dG9tYXRpY0Ryb3Bkb3dufHx0aGlzLmZpbHRlcmFibGUpJiYodGhpcy52aXNpYmxlPSEwLHRoaXMubWVudVZpc2libGVPbkZvY3VzPSEwKSx0aGlzLiRlbWl0KCJmb2N1cyIsZXZlbnQpKX0sYmx1cjpmdW5jdGlvbigpe3RoaXMudmlzaWJsZT0hMSx0aGlzLiRyZWZzLnJlZmVyZW5jZS5ibHVyKCl9LGhhbmRsZUJsdXI6ZnVuY3Rpb24oZXZlbnQpe3ZhciBfdGhpczg9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXM4LmlzU2lsZW50Qmx1cj9fdGhpczguaXNTaWxlbnRCbHVyPSExOl90aGlzOC4kZW1pdCgiYmx1ciIsZXZlbnQpfSw1MCksdGhpcy5zb2Z0Rm9jdXM9ITF9LGhhbmRsZUNsZWFyQ2xpY2s6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuZGVsZXRlU2VsZWN0ZWQoZXZlbnQpfSxkb0Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLiRyZWZzLnBvcHBlciYmdGhpcy4kcmVmcy5wb3BwZXIuZG9EZXN0cm95KCl9LGhhbmRsZUNsb3NlOmZ1bmN0aW9uKCl7dGhpcy52aXNpYmxlPSExfSx0b2dnbGVMYXN0T3B0aW9uSGl0U3RhdGU6ZnVuY3Rpb24oaGl0KXtpZihBcnJheS5pc0FycmF5KHRoaXMuc2VsZWN0ZWQpKXt2YXIgb3B0aW9uPXRoaXMuc2VsZWN0ZWRbdGhpcy5zZWxlY3RlZC5sZW5ndGgtMV07aWYob3B0aW9uKXJldHVybiEwPT09aGl0fHwhMT09PWhpdD9vcHRpb24uaGl0U3RhdGU9aGl0OihvcHRpb24uaGl0U3RhdGU9IW9wdGlvbi5oaXRTdGF0ZSxvcHRpb24uaGl0U3RhdGUpfX0sZGVsZXRlUHJldlRhZzpmdW5jdGlvbihlKXtpZihlLnRhcmdldC52YWx1ZS5sZW5ndGg8PTAmJiF0aGlzLnRvZ2dsZUxhc3RPcHRpb25IaXRTdGF0ZSgpKXt2YXIgdmFsdWU9dGhpcy52YWx1ZS5zbGljZSgpO3ZhbHVlLnBvcCgpLHRoaXMuJGVtaXQoImlucHV0Iix2YWx1ZSksdGhpcy5lbWl0Q2hhbmdlKHZhbHVlKX19LG1hbmFnZVBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7IiIhPT10aGlzLmN1cnJlbnRQbGFjZWhvbGRlciYmKHRoaXMuY3VycmVudFBsYWNlaG9sZGVyPXRoaXMuJHJlZnMuaW5wdXQudmFsdWU/IiI6dGhpcy5jYWNoZWRQbGFjZUhvbGRlcil9LHJlc2V0SW5wdXRTdGF0ZTpmdW5jdGlvbihlKXs4IT09ZS5rZXlDb2RlJiZ0aGlzLnRvZ2dsZUxhc3RPcHRpb25IaXRTdGF0ZSghMSksdGhpcy5pbnB1dExlbmd0aD0xNSp0aGlzLiRyZWZzLmlucHV0LnZhbHVlLmxlbmd0aCsyMCx0aGlzLnJlc2V0SW5wdXRIZWlnaHQoKX0scmVzZXRJbnB1dEhlaWdodDpmdW5jdGlvbigpe3ZhciBfdGhpczk9dGhpczt0aGlzLmNvbGxhcHNlVGFncyYmIXRoaXMuZmlsdGVyYWJsZXx8dGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtpZihfdGhpczkuJHJlZnMucmVmZXJlbmNlKXt2YXIgaW5wdXRDaGlsZE5vZGVzPV90aGlzOS4kcmVmcy5yZWZlcmVuY2UuJGVsLmNoaWxkTm9kZXMsaW5wdXQ9W10uZmlsdGVyLmNhbGwoaW5wdXRDaGlsZE5vZGVzLGZ1bmN0aW9uKGl0ZW0pe3JldHVybiJJTlBVVCI9PT1pdGVtLnRhZ05hbWV9KVswXSx0YWdzPV90aGlzOS4kcmVmcy50YWdzLHNpemVJbk1hcD1fdGhpczkuaW5pdGlhbElucHV0SGVpZ2h0fHw0MDtpbnB1dC5zdHlsZS5oZWlnaHQ9MD09PV90aGlzOS5zZWxlY3RlZC5sZW5ndGg/c2l6ZUluTWFwKyJweCI6TWF0aC5tYXgodGFncz90YWdzLmNsaWVudEhlaWdodCsodGFncy5jbGllbnRIZWlnaHQ+c2l6ZUluTWFwPzY6MCk6MCxzaXplSW5NYXApKyJweCIsX3RoaXM5LnZpc2libGUmJiExIT09X3RoaXM5LmVtcHR5VGV4dCYmX3RoaXM5LmJyb2FkY2FzdCgiRWxTZWxlY3REcm9wZG93biIsInVwZGF0ZVBvcHBlciIpfX0pfSxyZXNldEhvdmVySW5kZXg6ZnVuY3Rpb24oKXt2YXIgX3RoaXMxMD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpczEwLm11bHRpcGxlPzA8X3RoaXMxMC5zZWxlY3RlZC5sZW5ndGg/X3RoaXMxMC5ob3ZlckluZGV4PU1hdGgubWluLmFwcGx5KG51bGwsX3RoaXMxMC5zZWxlY3RlZC5tYXAoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIF90aGlzMTAub3B0aW9ucy5pbmRleE9mKGl0ZW0pfSkpOl90aGlzMTAuaG92ZXJJbmRleD0tMTpfdGhpczEwLmhvdmVySW5kZXg9X3RoaXMxMC5vcHRpb25zLmluZGV4T2YoX3RoaXMxMC5zZWxlY3RlZCl9LDMwMCl9LGhhbmRsZU9wdGlvblNlbGVjdDpmdW5jdGlvbihvcHRpb24sYnlDbGljayl7dmFyIF90aGlzMTE9dGhpcztpZih0aGlzLm11bHRpcGxlKXt2YXIgdmFsdWU9dGhpcy52YWx1ZS5zbGljZSgpLG9wdGlvbkluZGV4PXRoaXMuZ2V0VmFsdWVJbmRleCh2YWx1ZSxvcHRpb24udmFsdWUpOy0xPG9wdGlvbkluZGV4P3ZhbHVlLnNwbGljZShvcHRpb25JbmRleCwxKToodGhpcy5tdWx0aXBsZUxpbWl0PD0wfHx2YWx1ZS5sZW5ndGg8dGhpcy5tdWx0aXBsZUxpbWl0KSYmdmFsdWUucHVzaChvcHRpb24udmFsdWUpLHRoaXMuJGVtaXQoImlucHV0Iix2YWx1ZSksdGhpcy5lbWl0Q2hhbmdlKHZhbHVlKSxvcHRpb24uY3JlYXRlZCYmKHRoaXMucXVlcnk9IiIsdGhpcy5oYW5kbGVRdWVyeUNoYW5nZSgiIiksdGhpcy5pbnB1dExlbmd0aD0yMCksdGhpcy5maWx0ZXJhYmxlJiZ0aGlzLiRyZWZzLmlucHV0LmZvY3VzKCl9ZWxzZSB0aGlzLiRlbWl0KCJpbnB1dCIsb3B0aW9uLnZhbHVlKSx0aGlzLmVtaXRDaGFuZ2Uob3B0aW9uLnZhbHVlKSx0aGlzLnZpc2libGU9ITE7dGhpcy5pc1NpbGVudEJsdXI9YnlDbGljayx0aGlzLnNldFNvZnRGb2N1cygpLHRoaXMudmlzaWJsZXx8dGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczExLnNjcm9sbFRvT3B0aW9uKG9wdGlvbil9KX0sc2V0U29mdEZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5zb2Z0Rm9jdXM9ITA7dmFyIGlucHV0PXRoaXMuJHJlZnMuaW5wdXR8fHRoaXMuJHJlZnMucmVmZXJlbmNlO2lucHV0JiZpbnB1dC5mb2N1cygpfSxnZXRWYWx1ZUluZGV4OmZ1bmN0aW9uKCl7dmFyIGFycj0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W10sdmFsdWU9YXJndW1lbnRzWzFdO2lmKCJbb2JqZWN0IG9iamVjdF0iIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS50b0xvd2VyQ2FzZSgpKXJldHVybiBhcnIuaW5kZXhPZih2YWx1ZSk7dmFyIHZhbHVlS2V5PXRoaXMudmFsdWVLZXksaW5kZXg9LTE7cmV0dXJuIGFyci5zb21lKGZ1bmN0aW9uKGl0ZW0saSl7cmV0dXJuIE9iamVjdCh1dGlsXy5nZXRWYWx1ZUJ5UGF0aCkoaXRlbSx2YWx1ZUtleSk9PT1PYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKHZhbHVlLHZhbHVlS2V5KSYmKGluZGV4PWksITApfSksaW5kZXh9LHRvZ2dsZU1lbnU6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdERpc2FibGVkfHwodGhpcy5tZW51VmlzaWJsZU9uRm9jdXM/dGhpcy5tZW51VmlzaWJsZU9uRm9jdXM9ITE6dGhpcy52aXNpYmxlPSF0aGlzLnZpc2libGUsdGhpcy52aXNpYmxlJiYodGhpcy4kcmVmcy5pbnB1dHx8dGhpcy4kcmVmcy5yZWZlcmVuY2UpLmZvY3VzKCkpfSxzZWxlY3RPcHRpb246ZnVuY3Rpb24oKXt0aGlzLnZpc2libGU/dGhpcy5vcHRpb25zW3RoaXMuaG92ZXJJbmRleF0mJnRoaXMuaGFuZGxlT3B0aW9uU2VsZWN0KHRoaXMub3B0aW9uc1t0aGlzLmhvdmVySW5kZXhdKTp0aGlzLnRvZ2dsZU1lbnUoKX0sZGVsZXRlU2VsZWN0ZWQ6ZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO3ZhciB2YWx1ZT10aGlzLm11bHRpcGxlP1tdOiIiO3RoaXMuJGVtaXQoImlucHV0Iix2YWx1ZSksdGhpcy5lbWl0Q2hhbmdlKHZhbHVlKSx0aGlzLnZpc2libGU9ITEsdGhpcy4kZW1pdCgiY2xlYXIiKX0sZGVsZXRlVGFnOmZ1bmN0aW9uKGV2ZW50LHRhZyl7dmFyIGluZGV4PXRoaXMuc2VsZWN0ZWQuaW5kZXhPZih0YWcpO2lmKC0xPGluZGV4JiYhdGhpcy5zZWxlY3REaXNhYmxlZCl7dmFyIHZhbHVlPXRoaXMudmFsdWUuc2xpY2UoKTt2YWx1ZS5zcGxpY2UoaW5kZXgsMSksdGhpcy4kZW1pdCgiaW5wdXQiLHZhbHVlKSx0aGlzLmVtaXRDaGFuZ2UodmFsdWUpLHRoaXMuJGVtaXQoInJlbW92ZS10YWciLHRhZy52YWx1ZSl9ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9LG9uSW5wdXRDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmZpbHRlcmFibGUmJnRoaXMucXVlcnkhPT10aGlzLnNlbGVjdGVkTGFiZWwmJih0aGlzLnF1ZXJ5PXRoaXMuc2VsZWN0ZWRMYWJlbCx0aGlzLmhhbmRsZVF1ZXJ5Q2hhbmdlKHRoaXMucXVlcnkpKX0sb25PcHRpb25EZXN0cm95OmZ1bmN0aW9uKGluZGV4KXstMTxpbmRleCYmKHRoaXMub3B0aW9uc0NvdW50LS0sdGhpcy5maWx0ZXJlZE9wdGlvbnNDb3VudC0tLHRoaXMub3B0aW9ucy5zcGxpY2UoaW5kZXgsMSkpfSxyZXNldElucHV0V2lkdGg6ZnVuY3Rpb24oKXt0aGlzLmlucHV0V2lkdGg9dGhpcy4kcmVmcy5yZWZlcmVuY2UuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRofSxoYW5kbGVSZXNpemU6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0SW5wdXRXaWR0aCgpLHRoaXMubXVsdGlwbGUmJnRoaXMucmVzZXRJbnB1dEhlaWdodCgpfSxjaGVja0RlZmF1bHRGaXJzdE9wdGlvbjpmdW5jdGlvbigpe2Zvcih2YXIgaGFzQ3JlYXRlZD0hKHRoaXMuaG92ZXJJbmRleD0tMSksaT10aGlzLm9wdGlvbnMubGVuZ3RoLTE7MDw9aTtpLS0paWYodGhpcy5vcHRpb25zW2ldLmNyZWF0ZWQpe2hhc0NyZWF0ZWQ9ITAsdGhpcy5ob3ZlckluZGV4PWk7YnJlYWt9aWYoIWhhc0NyZWF0ZWQpZm9yKHZhciBfaT0wO19pIT09dGhpcy5vcHRpb25zLmxlbmd0aDsrK19pKXt2YXIgb3B0aW9uPXRoaXMub3B0aW9uc1tfaV07aWYodGhpcy5xdWVyeSl7aWYoIW9wdGlvbi5kaXNhYmxlZCYmIW9wdGlvbi5ncm91cERpc2FibGVkJiZvcHRpb24udmlzaWJsZSl7dGhpcy5ob3ZlckluZGV4PV9pO2JyZWFrfX1lbHNlIGlmKG9wdGlvbi5pdGVtU2VsZWN0ZWQpe3RoaXMuaG92ZXJJbmRleD1faTticmVha319fSxnZXRWYWx1ZUtleTpmdW5jdGlvbihpdGVtKXtyZXR1cm4iW29iamVjdCBvYmplY3RdIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVtLnZhbHVlKS50b0xvd2VyQ2FzZSgpP2l0ZW0udmFsdWU6T2JqZWN0KHV0aWxfLmdldFZhbHVlQnlQYXRoKShpdGVtLnZhbHVlLHRoaXMudmFsdWVLZXkpfX0sY3JlYXRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczEyPXRoaXM7dGhpcy5jYWNoZWRQbGFjZUhvbGRlcj10aGlzLmN1cnJlbnRQbGFjZWhvbGRlcj10aGlzLnBsYWNlaG9sZGVyLHRoaXMubXVsdGlwbGUmJiFBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpJiZ0aGlzLiRlbWl0KCJpbnB1dCIsW10pLCF0aGlzLm11bHRpcGxlJiZBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpJiZ0aGlzLiRlbWl0KCJpbnB1dCIsIiIpLHRoaXMuZGVib3VuY2VkT25JbnB1dENoYW5nZT1kZWJvdW5jZV9kZWZhdWx0KCkodGhpcy5kZWJvdW5jZSxmdW5jdGlvbigpe190aGlzMTIub25JbnB1dENoYW5nZSgpfSksdGhpcy5kZWJvdW5jZWRRdWVyeUNoYW5nZT1kZWJvdW5jZV9kZWZhdWx0KCkodGhpcy5kZWJvdW5jZSxmdW5jdGlvbihlKXtfdGhpczEyLmhhbmRsZVF1ZXJ5Q2hhbmdlKGUudGFyZ2V0LnZhbHVlKX0pLHRoaXMuJG9uKCJoYW5kbGVPcHRpb25DbGljayIsdGhpcy5oYW5kbGVPcHRpb25TZWxlY3QpLHRoaXMuJG9uKCJzZXRTZWxlY3RlZCIsdGhpcy5zZXRTZWxlY3RlZCl9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXMxMz10aGlzO3RoaXMubXVsdGlwbGUmJkFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkmJjA8dGhpcy52YWx1ZS5sZW5ndGgmJih0aGlzLmN1cnJlbnRQbGFjZWhvbGRlcj0iIiksT2JqZWN0KHJlc2l6ZV9ldmVudF8uYWRkUmVzaXplTGlzdGVuZXIpKHRoaXMuJGVsLHRoaXMuaGFuZGxlUmVzaXplKTt2YXIgcmVmZXJlbmNlPXRoaXMuJHJlZnMucmVmZXJlbmNlO2lmKHJlZmVyZW5jZSYmcmVmZXJlbmNlLiRlbCl7dGhpcy5pbml0aWFsSW5wdXRIZWlnaHQ9cmVmZXJlbmNlLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHR8fHttZWRpdW06MzYsc21hbGw6MzIsbWluaToyOH1bdGhpcy5zZWxlY3RTaXplXX10aGlzLnJlbW90ZSYmdGhpcy5tdWx0aXBsZSYmdGhpcy5yZXNldElucHV0SGVpZ2h0KCksdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtyZWZlcmVuY2UmJnJlZmVyZW5jZS4kZWwmJihfdGhpczEzLmlucHV0V2lkdGg9cmVmZXJlbmNlLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCl9KSx0aGlzLnNldFNlbGVjdGVkKCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLiRlbCYmdGhpcy5oYW5kbGVSZXNpemUmJk9iamVjdChyZXNpemVfZXZlbnRfLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKSh0aGlzLiRlbCx0aGlzLmhhbmRsZVJlc2l6ZSl9fSxzZWxlY3RfY29tcG9uZW50PU9iamVjdChjb21wb25lbnROb3JtYWxpemVyLmEpKHNyY19zZWxlY3R2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc18scmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtzZWxlY3RfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9zZWxlY3Qvc3JjL3NlbGVjdC52dWUiO3ZhciBzcmNfc2VsZWN0PXNlbGVjdF9jb21wb25lbnQuZXhwb3J0cztzcmNfc2VsZWN0Lmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHNyY19zZWxlY3QubmFtZSxzcmNfc2VsZWN0KX07X193ZWJwYWNrX2V4cG9ydHNfXy5kZWZhdWx0PXNyY19zZWxlY3R9XSl9LFVTaFE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2V4cG9ydHMuX19lc01vZHVsZT0hMCxleHBvcnRzLlBvcHVwTWFuYWdlcj12b2lkIDA7dmFyIF92dWUyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygiS3c1ciIpKSxfbWVyZ2UyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygiZjAzeiIpKSxfcG9wdXBNYW5hZ2VyMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oIlN5YWIiKSksX3Njcm9sbGJhcldpZHRoMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oIjVpMWMiKSksX2RvbT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXU1QxIik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9fXZhciBpZFNlZWQ9MSxzY3JvbGxCYXJXaWR0aD12b2lkIDA7ZXhwb3J0cy5kZWZhdWx0PXtwcm9wczp7dmlzaWJsZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LG9wZW5EZWxheTp7fSxjbG9zZURlbGF5Ont9LHpJbmRleDp7fSxtb2RhbDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LG1vZGFsRmFkZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LG1vZGFsQ2xhc3M6e30sbW9kYWxBcHBlbmRUb0JvZHk6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxsb2NrU2Nyb2xsOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sY2xvc2VPblByZXNzRXNjYXBlOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX0sY2xvc2VPbkNsaWNrTW9kYWw6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfX0sYmVmb3JlTW91bnQ6ZnVuY3Rpb24oKXt0aGlzLl9wb3B1cElkPSJwb3B1cC0iK2lkU2VlZCsrLF9wb3B1cE1hbmFnZXIyLmRlZmF1bHQucmVnaXN0ZXIodGhpcy5fcG9wdXBJZCx0aGlzKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe19wb3B1cE1hbmFnZXIyLmRlZmF1bHQuZGVyZWdpc3Rlcih0aGlzLl9wb3B1cElkKSxfcG9wdXBNYW5hZ2VyMi5kZWZhdWx0LmNsb3NlTW9kYWwodGhpcy5fcG9wdXBJZCksdGhpcy5yZXN0b3JlQm9keVN0eWxlKCl9LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57b3BlbmVkOiExLGJvZHlQYWRkaW5nUmlnaHQ6bnVsbCxjb21wdXRlZEJvZHlQYWRkaW5nUmlnaHQ6MCx3aXRob3V0SGlkZGVuQ2xhc3M6ITAscmVuZGVyZWQ6ITF9fSx3YXRjaDp7dmlzaWJsZTpmdW5jdGlvbih2YWwpe3ZhciBfdGhpcz10aGlzO2lmKHZhbCl7aWYodGhpcy5fb3BlbmluZylyZXR1cm47dGhpcy5yZW5kZXJlZD90aGlzLm9wZW4oKToodGhpcy5yZW5kZXJlZD0hMCxfdnVlMi5kZWZhdWx0Lm5leHRUaWNrKGZ1bmN0aW9uKCl7X3RoaXMub3BlbigpfSkpfWVsc2UgdGhpcy5jbG9zZSgpfX0sbWV0aG9kczp7b3BlbjpmdW5jdGlvbihvcHRpb25zKXt2YXIgX3RoaXMyPXRoaXM7dGhpcy5yZW5kZXJlZHx8KHRoaXMucmVuZGVyZWQ9ITApO3ZhciBwcm9wcz0oMCxfbWVyZ2UyLmRlZmF1bHQpKHt9LHRoaXMuJHByb3BzfHx0aGlzLG9wdGlvbnMpO3RoaXMuX2Nsb3NlVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5fY2xvc2VUaW1lciksdGhpcy5fY2xvc2VUaW1lcj1udWxsKSxjbGVhclRpbWVvdXQodGhpcy5fb3BlblRpbWVyKTt2YXIgb3BlbkRlbGF5PU51bWJlcihwcm9wcy5vcGVuRGVsYXkpOzA8b3BlbkRlbGF5P3RoaXMuX29wZW5UaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMyLl9vcGVuVGltZXI9bnVsbCxfdGhpczIuZG9PcGVuKHByb3BzKX0sb3BlbkRlbGF5KTp0aGlzLmRvT3Blbihwcm9wcyl9LGRvT3BlbjpmdW5jdGlvbihwcm9wcyl7aWYoIXRoaXMuJGlzU2VydmVyJiYoIXRoaXMud2lsbE9wZW58fHRoaXMud2lsbE9wZW4oKSkmJiF0aGlzLm9wZW5lZCl7dGhpcy5fb3BlbmluZz0hMDt2YXIgZG9tPXRoaXMuJGVsLG1vZGFsPXByb3BzLm1vZGFsLHpJbmRleD1wcm9wcy56SW5kZXg7aWYoekluZGV4JiYoX3BvcHVwTWFuYWdlcjIuZGVmYXVsdC56SW5kZXg9ekluZGV4KSxtb2RhbCYmKHRoaXMuX2Nsb3NpbmcmJihfcG9wdXBNYW5hZ2VyMi5kZWZhdWx0LmNsb3NlTW9kYWwodGhpcy5fcG9wdXBJZCksdGhpcy5fY2xvc2luZz0hMSksX3BvcHVwTWFuYWdlcjIuZGVmYXVsdC5vcGVuTW9kYWwodGhpcy5fcG9wdXBJZCxfcG9wdXBNYW5hZ2VyMi5kZWZhdWx0Lm5leHRaSW5kZXgoKSx0aGlzLm1vZGFsQXBwZW5kVG9Cb2R5P3ZvaWQgMDpkb20scHJvcHMubW9kYWxDbGFzcyxwcm9wcy5tb2RhbEZhZGUpLHByb3BzLmxvY2tTY3JvbGwpKXt0aGlzLndpdGhvdXRIaWRkZW5DbGFzcz0hKDAsX2RvbS5oYXNDbGFzcykoZG9jdW1lbnQuYm9keSwiZWwtcG9wdXAtcGFyZW50LS1oaWRkZW4iKSx0aGlzLndpdGhvdXRIaWRkZW5DbGFzcyYmKHRoaXMuYm9keVBhZGRpbmdSaWdodD1kb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCx0aGlzLmNvbXB1dGVkQm9keVBhZGRpbmdSaWdodD1wYXJzZUludCgoMCxfZG9tLmdldFN0eWxlKShkb2N1bWVudC5ib2R5LCJwYWRkaW5nUmlnaHQiKSwxMCkpLHNjcm9sbEJhcldpZHRoPSgwLF9zY3JvbGxiYXJXaWR0aDIuZGVmYXVsdCkoKTt2YXIgYm9keUhhc092ZXJmbG93PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ8ZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsYm9keU92ZXJmbG93WT0oMCxfZG9tLmdldFN0eWxlKShkb2N1bWVudC5ib2R5LCJvdmVyZmxvd1kiKTswPHNjcm9sbEJhcldpZHRoJiYoYm9keUhhc092ZXJmbG93fHwic2Nyb2xsIj09PWJvZHlPdmVyZmxvd1kpJiZ0aGlzLndpdGhvdXRIaWRkZW5DbGFzcyYmKGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0PXRoaXMuY29tcHV0ZWRCb2R5UGFkZGluZ1JpZ2h0K3Njcm9sbEJhcldpZHRoKyJweCIpLCgwLF9kb20uYWRkQ2xhc3MpKGRvY3VtZW50LmJvZHksImVsLXBvcHVwLXBhcmVudC0taGlkZGVuIil9InN0YXRpYyI9PT1nZXRDb21wdXRlZFN0eWxlKGRvbSkucG9zaXRpb24mJihkb20uc3R5bGUucG9zaXRpb249ImFic29sdXRlIiksZG9tLnN0eWxlLnpJbmRleD1fcG9wdXBNYW5hZ2VyMi5kZWZhdWx0Lm5leHRaSW5kZXgoKSx0aGlzLm9wZW5lZD0hMCx0aGlzLm9uT3BlbiYmdGhpcy5vbk9wZW4oKSx0aGlzLmRvQWZ0ZXJPcGVuKCl9fSxkb0FmdGVyT3BlbjpmdW5jdGlvbigpe3RoaXMuX29wZW5pbmc9ITF9LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIF90aGlzMz10aGlzO2lmKCF0aGlzLndpbGxDbG9zZXx8dGhpcy53aWxsQ2xvc2UoKSl7bnVsbCE9PXRoaXMuX29wZW5UaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLl9vcGVuVGltZXIpLHRoaXMuX29wZW5UaW1lcj1udWxsKSxjbGVhclRpbWVvdXQodGhpcy5fY2xvc2VUaW1lcik7dmFyIGNsb3NlRGVsYXk9TnVtYmVyKHRoaXMuY2xvc2VEZWxheSk7MDxjbG9zZURlbGF5P3RoaXMuX2Nsb3NlVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe190aGlzMy5fY2xvc2VUaW1lcj1udWxsLF90aGlzMy5kb0Nsb3NlKCl9LGNsb3NlRGVsYXkpOnRoaXMuZG9DbG9zZSgpfX0sZG9DbG9zZTpmdW5jdGlvbigpe3RoaXMuX2Nsb3Npbmc9ITAsdGhpcy5vbkNsb3NlJiZ0aGlzLm9uQ2xvc2UoKSx0aGlzLmxvY2tTY3JvbGwmJnNldFRpbWVvdXQodGhpcy5yZXN0b3JlQm9keVN0eWxlLDIwMCksdGhpcy5vcGVuZWQ9ITEsdGhpcy5kb0FmdGVyQ2xvc2UoKX0sZG9BZnRlckNsb3NlOmZ1bmN0aW9uKCl7X3BvcHVwTWFuYWdlcjIuZGVmYXVsdC5jbG9zZU1vZGFsKHRoaXMuX3BvcHVwSWQpLHRoaXMuX2Nsb3Npbmc9ITF9LHJlc3RvcmVCb2R5U3R5bGU6ZnVuY3Rpb24oKXt0aGlzLm1vZGFsJiZ0aGlzLndpdGhvdXRIaWRkZW5DbGFzcyYmKGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0PXRoaXMuYm9keVBhZGRpbmdSaWdodCwoMCxfZG9tLnJlbW92ZUNsYXNzKShkb2N1bWVudC5ib2R5LCJlbC1wb3B1cC1wYXJlbnQtLWhpZGRlbiIpKSx0aGlzLndpdGhvdXRIaWRkZW5DbGFzcz0hMH19fSxleHBvcnRzLlBvcHVwTWFuYWdlcj1fcG9wdXBNYW5hZ2VyMi5kZWZhdWx0fSxWSWlSOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITA7dmFyIF9kb209X193ZWJwYWNrX3JlcXVpcmVfXygiV1NUMSIpO3ZhciBUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gVHJhbnNpdGlvbigpeyFmdW5jdGlvbihpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX0odGhpcyxUcmFuc2l0aW9uKX1yZXR1cm4gVHJhbnNpdGlvbi5wcm90b3R5cGUuYmVmb3JlRW50ZXI9ZnVuY3Rpb24oZWwpeygwLF9kb20uYWRkQ2xhc3MpKGVsLCJjb2xsYXBzZS10cmFuc2l0aW9uIiksZWwuZGF0YXNldHx8KGVsLmRhdGFzZXQ9e30pLGVsLmRhdGFzZXQub2xkUGFkZGluZ1RvcD1lbC5zdHlsZS5wYWRkaW5nVG9wLGVsLmRhdGFzZXQub2xkUGFkZGluZ0JvdHRvbT1lbC5zdHlsZS5wYWRkaW5nQm90dG9tLGVsLnN0eWxlLmhlaWdodD0iMCIsZWwuc3R5bGUucGFkZGluZ1RvcD0wLGVsLnN0eWxlLnBhZGRpbmdCb3R0b209MH0sVHJhbnNpdGlvbi5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24oZWwpe2VsLmRhdGFzZXQub2xkT3ZlcmZsb3c9ZWwuc3R5bGUub3ZlcmZsb3csMCE9PWVsLnNjcm9sbEhlaWdodD9lbC5zdHlsZS5oZWlnaHQ9ZWwuc2Nyb2xsSGVpZ2h0KyJweCI6ZWwuc3R5bGUuaGVpZ2h0PSIiLGVsLnN0eWxlLnBhZGRpbmdUb3A9ZWwuZGF0YXNldC5vbGRQYWRkaW5nVG9wLGVsLnN0eWxlLnBhZGRpbmdCb3R0b209ZWwuZGF0YXNldC5vbGRQYWRkaW5nQm90dG9tLGVsLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4ifSxUcmFuc2l0aW9uLnByb3RvdHlwZS5hZnRlckVudGVyPWZ1bmN0aW9uKGVsKXsoMCxfZG9tLnJlbW92ZUNsYXNzKShlbCwiY29sbGFwc2UtdHJhbnNpdGlvbiIpLGVsLnN0eWxlLmhlaWdodD0iIixlbC5zdHlsZS5vdmVyZmxvdz1lbC5kYXRhc2V0Lm9sZE92ZXJmbG93fSxUcmFuc2l0aW9uLnByb3RvdHlwZS5iZWZvcmVMZWF2ZT1mdW5jdGlvbihlbCl7ZWwuZGF0YXNldHx8KGVsLmRhdGFzZXQ9e30pLGVsLmRhdGFzZXQub2xkUGFkZGluZ1RvcD1lbC5zdHlsZS5wYWRkaW5nVG9wLGVsLmRhdGFzZXQub2xkUGFkZGluZ0JvdHRvbT1lbC5zdHlsZS5wYWRkaW5nQm90dG9tLGVsLmRhdGFzZXQub2xkT3ZlcmZsb3c9ZWwuc3R5bGUub3ZlcmZsb3csZWwuc3R5bGUuaGVpZ2h0PWVsLnNjcm9sbEhlaWdodCsicHgiLGVsLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4ifSxUcmFuc2l0aW9uLnByb3RvdHlwZS5sZWF2ZT1mdW5jdGlvbihlbCl7MCE9PWVsLnNjcm9sbEhlaWdodCYmKCgwLF9kb20uYWRkQ2xhc3MpKGVsLCJjb2xsYXBzZS10cmFuc2l0aW9uIiksZWwuc3R5bGUuaGVpZ2h0PTAsZWwuc3R5bGUucGFkZGluZ1RvcD0wLGVsLnN0eWxlLnBhZGRpbmdCb3R0b209MCl9LFRyYW5zaXRpb24ucHJvdG90eXBlLmFmdGVyTGVhdmU9ZnVuY3Rpb24oZWwpeygwLF9kb20ucmVtb3ZlQ2xhc3MpKGVsLCJjb2xsYXBzZS10cmFuc2l0aW9uIiksZWwuc3R5bGUuaGVpZ2h0PSIiLGVsLnN0eWxlLm92ZXJmbG93PWVsLmRhdGFzZXQub2xkT3ZlcmZsb3csZWwuc3R5bGUucGFkZGluZ1RvcD1lbC5kYXRhc2V0Lm9sZFBhZGRpbmdUb3AsZWwuc3R5bGUucGFkZGluZ0JvdHRvbT1lbC5kYXRhc2V0Lm9sZFBhZGRpbmdCb3R0b219LFRyYW5zaXRpb259KCk7ZXhwb3J0cy5kZWZhdWx0PXtuYW1lOiJFbENvbGxhcHNlVHJhbnNpdGlvbiIsZnVuY3Rpb25hbDohMCxyZW5kZXI6ZnVuY3Rpb24oaCxfcmVmKXt2YXIgY2hpbGRyZW49X3JlZi5jaGlsZHJlbjtyZXR1cm4gaCgidHJhbnNpdGlvbiIse29uOm5ldyBUcmFuc2l0aW9ufSxjaGlsZHJlbil9fX0sV1NUMTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwLGV4cG9ydHMuZ2V0U3R5bGU9ZXhwb3J0cy5vbmNlPWV4cG9ydHMub2ZmPWV4cG9ydHMub249dm9pZCAwO3ZhciBfdHlwZW9mPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmp9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBvYmp9O2V4cG9ydHMuaGFzQ2xhc3M9aGFzQ2xhc3MsZXhwb3J0cy5hZGRDbGFzcz1mdW5jdGlvbihlbCxjbHMpe2lmKCFlbClyZXR1cm47Zm9yKHZhciBjdXJDbGFzcz1lbC5jbGFzc05hbWUsY2xhc3Nlcz0oY2xzfHwiIikuc3BsaXQoIiAiKSxpPTAsaj1jbGFzc2VzLmxlbmd0aDtpPGo7aSsrKXt2YXIgY2xzTmFtZT1jbGFzc2VzW2ldO2Nsc05hbWUmJihlbC5jbGFzc0xpc3Q/ZWwuY2xhc3NMaXN0LmFkZChjbHNOYW1lKTpoYXNDbGFzcyhlbCxjbHNOYW1lKXx8KGN1ckNsYXNzKz0iICIrY2xzTmFtZSkpfWVsLmNsYXNzTGlzdHx8KGVsLmNsYXNzTmFtZT1jdXJDbGFzcyl9LGV4cG9ydHMucmVtb3ZlQ2xhc3M9ZnVuY3Rpb24oZWwsY2xzKXtpZighZWx8fCFjbHMpcmV0dXJuO2Zvcih2YXIgY2xhc3Nlcz1jbHMuc3BsaXQoIiAiKSxjdXJDbGFzcz0iICIrZWwuY2xhc3NOYW1lKyIgIixpPTAsaj1jbGFzc2VzLmxlbmd0aDtpPGo7aSsrKXt2YXIgY2xzTmFtZT1jbGFzc2VzW2ldO2Nsc05hbWUmJihlbC5jbGFzc0xpc3Q/ZWwuY2xhc3NMaXN0LnJlbW92ZShjbHNOYW1lKTpoYXNDbGFzcyhlbCxjbHNOYW1lKSYmKGN1ckNsYXNzPWN1ckNsYXNzLnJlcGxhY2UoIiAiK2Nsc05hbWUrIiAiLCIgIikpKX1lbC5jbGFzc0xpc3R8fChlbC5jbGFzc05hbWU9dHJpbShjdXJDbGFzcykpfSxleHBvcnRzLnNldFN0eWxlPWZ1bmN0aW9uIHNldFN0eWxlKGVsZW1lbnQsc3R5bGVOYW1lLHZhbHVlKXtpZighZWxlbWVudHx8IXN0eWxlTmFtZSlyZXR1cm47aWYoIm9iamVjdCI9PT0odm9pZCAwPT09c3R5bGVOYW1lPyJ1bmRlZmluZWQiOl90eXBlb2Yoc3R5bGVOYW1lKSkpZm9yKHZhciBwcm9wIGluIHN0eWxlTmFtZSlzdHlsZU5hbWUuaGFzT3duUHJvcGVydHkocHJvcCkmJnNldFN0eWxlKGVsZW1lbnQscHJvcCxzdHlsZU5hbWVbcHJvcF0pO2Vsc2Uib3BhY2l0eSI9PT0oc3R5bGVOYW1lPWNhbWVsQ2FzZShzdHlsZU5hbWUpKSYmaWVWZXJzaW9uPDk/ZWxlbWVudC5zdHlsZS5maWx0ZXI9aXNOYU4odmFsdWUpPyIiOiJhbHBoYShvcGFjaXR5PSIrMTAwKnZhbHVlKyIpIjplbGVtZW50LnN0eWxlW3N0eWxlTmFtZV09dmFsdWV9O3ZhciBvYmosX3Z1ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLdzVyIik7dmFyIGlzU2VydmVyPSgob2JqPV92dWUpJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfSkuZGVmYXVsdC5wcm90b3R5cGUuJGlzU2VydmVyLFNQRUNJQUxfQ0hBUlNfUkVHRVhQPS8oW1w6XC1cX10rKC4pKS9nLE1PWl9IQUNLX1JFR0VYUD0vXm1veihbQS1aXSkvLGllVmVyc2lvbj1pc1NlcnZlcj8wOk51bWJlcihkb2N1bWVudC5kb2N1bWVudE1vZGUpLHRyaW09ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4oc3RyaW5nfHwiIikucmVwbGFjZSgvXltcc1x1RkVGRl0rfFtcc1x1RkVGRl0rJC9nLCIiKX0sY2FtZWxDYXNlPWZ1bmN0aW9uKG5hbWUpe3JldHVybiBuYW1lLnJlcGxhY2UoU1BFQ0lBTF9DSEFSU19SRUdFWFAsZnVuY3Rpb24oXyxzZXBhcmF0b3IsbGV0dGVyLG9mZnNldCl7cmV0dXJuIG9mZnNldD9sZXR0ZXIudG9VcHBlckNhc2UoKTpsZXR0ZXJ9KS5yZXBsYWNlKE1PWl9IQUNLX1JFR0VYUCwiTW96JDEiKX0sb249ZXhwb3J0cy5vbj0haXNTZXJ2ZXImJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oZWxlbWVudCxldmVudCxoYW5kbGVyKXtlbGVtZW50JiZldmVudCYmaGFuZGxlciYmZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LGhhbmRsZXIsITEpfTpmdW5jdGlvbihlbGVtZW50LGV2ZW50LGhhbmRsZXIpe2VsZW1lbnQmJmV2ZW50JiZoYW5kbGVyJiZlbGVtZW50LmF0dGFjaEV2ZW50KCJvbiIrZXZlbnQsaGFuZGxlcil9LG9mZj1leHBvcnRzLm9mZj0haXNTZXJ2ZXImJmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oZWxlbWVudCxldmVudCxoYW5kbGVyKXtlbGVtZW50JiZldmVudCYmZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LGhhbmRsZXIsITEpfTpmdW5jdGlvbihlbGVtZW50LGV2ZW50LGhhbmRsZXIpe2VsZW1lbnQmJmV2ZW50JiZlbGVtZW50LmRldGFjaEV2ZW50KCJvbiIrZXZlbnQsaGFuZGxlcil9O2V4cG9ydHMub25jZT1mdW5jdGlvbihlbCxldmVudCxmbil7b24oZWwsZXZlbnQsZnVuY3Rpb24gbGlzdGVuZXIoKXtmbiYmZm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLG9mZihlbCxldmVudCxsaXN0ZW5lcil9KX07ZnVuY3Rpb24gaGFzQ2xhc3MoZWwsY2xzKXtpZighZWx8fCFjbHMpcmV0dXJuITE7aWYoLTEhPT1jbHMuaW5kZXhPZigiICIpKXRocm93IG5ldyBFcnJvcigiY2xhc3NOYW1lIHNob3VsZCBub3QgY29udGFpbiBzcGFjZS4iKTtyZXR1cm4gZWwuY2xhc3NMaXN0P2VsLmNsYXNzTGlzdC5jb250YWlucyhjbHMpOi0xPCgiICIrZWwuY2xhc3NOYW1lKyIgIikuaW5kZXhPZigiICIrY2xzKyIgIil9ZXhwb3J0cy5nZXRTdHlsZT1pZVZlcnNpb248OT9mdW5jdGlvbihlbGVtZW50LHN0eWxlTmFtZSl7aWYoIWlzU2VydmVyKXtpZighZWxlbWVudHx8IXN0eWxlTmFtZSlyZXR1cm4gbnVsbDsiZmxvYXQiPT09KHN0eWxlTmFtZT1jYW1lbENhc2Uoc3R5bGVOYW1lKSkmJihzdHlsZU5hbWU9InN0eWxlRmxvYXQiKTt0cnl7c3dpdGNoKHN0eWxlTmFtZSl7Y2FzZSJvcGFjaXR5Ijp0cnl7cmV0dXJuIGVsZW1lbnQuZmlsdGVycy5pdGVtKCJhbHBoYSIpLm9wYWNpdHkvMTAwfWNhdGNoKGUpe3JldHVybiAxfWRlZmF1bHQ6cmV0dXJuIGVsZW1lbnQuc3R5bGVbc3R5bGVOYW1lXXx8ZWxlbWVudC5jdXJyZW50U3R5bGU/ZWxlbWVudC5jdXJyZW50U3R5bGVbc3R5bGVOYW1lXTpudWxsfX1jYXRjaChlKXtyZXR1cm4gZWxlbWVudC5zdHlsZVtzdHlsZU5hbWVdfX19OmZ1bmN0aW9uKGVsZW1lbnQsc3R5bGVOYW1lKXtpZighaXNTZXJ2ZXIpe2lmKCFlbGVtZW50fHwhc3R5bGVOYW1lKXJldHVybiBudWxsOyJmbG9hdCI9PT0oc3R5bGVOYW1lPWNhbWVsQ2FzZShzdHlsZU5hbWUpKSYmKHN0eWxlTmFtZT0iY3NzRmxvYXQiKTt0cnl7dmFyIGNvbXB1dGVkPWRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwiIik7cmV0dXJuIGVsZW1lbnQuc3R5bGVbc3R5bGVOYW1lXXx8Y29tcHV0ZWQ/Y29tcHV0ZWRbc3R5bGVOYW1lXTpudWxsfWNhdGNoKGUpe3JldHVybiBlbGVtZW50LnN0eWxlW3N0eWxlTmFtZV19fX19LFhKWVQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obW9kdWxlcyl7dmFyIGluc3RhbGxlZE1vZHVsZXM9e307ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7dmFyIG1vZHVsZT1pbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXT17aTptb2R1bGVJZCxsOiExLGV4cG9ydHM6e319O3JldHVybiBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLG1vZHVsZSxtb2R1bGUuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxtb2R1bGUubD0hMCxtb2R1bGUuZXhwb3J0c31yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPW1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5jPWluc3RhbGxlZE1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGV4cG9ydHMsbmFtZSxnZXR0ZXIpe19fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLG5hbWUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxuYW1lLHtlbnVtZXJhYmxlOiEwLGdldDpnZXR0ZXJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5yPWZ1bmN0aW9uKGV4cG9ydHMpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LF9fd2VicGFja19yZXF1aXJlX18udD1mdW5jdGlvbih2YWx1ZSxtb2RlKXtpZigxJm1vZGUmJih2YWx1ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKSksOCZtb2RlKXJldHVybiB2YWx1ZTtpZig0Jm1vZGUmJiJvYmplY3QiPT10eXBlb2YgdmFsdWUmJnZhbHVlJiZ2YWx1ZS5fX2VzTW9kdWxlKXJldHVybiB2YWx1ZTt2YXIgbnM9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dmFsdWV9KSwyJm1vZGUmJiJzdHJpbmciIT10eXBlb2YgdmFsdWUpZm9yKHZhciBrZXkgaW4gdmFsdWUpX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLGtleSxmdW5jdGlvbihrZXkpe3JldHVybiB2YWx1ZVtrZXldfS5iaW5kKG51bGwsa2V5KSk7cmV0dXJuIG5zfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24obW9kdWxlKXt2YXIgZ2V0dGVyPW1vZHVsZSYmbW9kdWxlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZX07cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsImEiLGdldHRlciksZ2V0dGVyfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24ob2JqZWN0LHByb3BlcnR5KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iL2Rpc3QvIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0zOCl9KFtmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiV1NUMSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiZ1NJUSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiMEJESCIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiS3c1ciIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiNlhUeCIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiYTN6byIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiZjAzeiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiODYwNiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiSzdYUiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiU0pkVCIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiUVgvYiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiVVNoUSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiRGhWRCIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiUUJCbyIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiM053ZCIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiN3QvZyIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiUWZnbSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiVklpUiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiRk9uVSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiRXZJOSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiS1p6ciIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiaTd3RSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiS2w1NSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygia3ZybiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiMTlGUyIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiMDVjKyIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiNWkxYyIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiZjhIbiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygieFdxdCIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygid29RdiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiV1gvVSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiVGt1TiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiNTNKMSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiaEYrMSIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygid0ppSiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiY2k5ZyIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygib1Y1YiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiNUZCUiIpfSxmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKDM5KX0sZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO19fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTt2YXIgcGFnZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF83Mjc0ZjI2N19yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJ1bCIse3N0YXRpY0NsYXNzOiJlbC1wYWdlciIsb246e2NsaWNrOl92bS5vblBhZ2VyQ2xpY2t9fSxbMDxfdm0ucGFnZUNvdW50P19jKCJsaSIse3N0YXRpY0NsYXNzOiJudW1iZXIiLGNsYXNzOnthY3RpdmU6MT09PV92bS5jdXJyZW50UGFnZSxkaXNhYmxlZDpfdm0uZGlzYWJsZWR9fSxbX3ZtLl92KCIxIildKTpfdm0uX2UoKSxfdm0uc2hvd1ByZXZNb3JlP19jKCJsaSIse3N0YXRpY0NsYXNzOiJlbC1pY29uIG1vcmUgYnRuLXF1aWNrcHJldiIsY2xhc3M6W192bS5xdWlja3ByZXZJY29uQ2xhc3Mse2Rpc2FibGVkOl92bS5kaXNhYmxlZH1dLG9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLm9uTW91c2VlbnRlcigibGVmdCIpfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLnF1aWNrcHJldkljb25DbGFzcz0iZWwtaWNvbi1tb3JlIn19fSk6X3ZtLl9lKCksX3ZtLl9sKF92bS5wYWdlcnMsZnVuY3Rpb24ocGFnZXIpe3JldHVybiBfYygibGkiLHtrZXk6cGFnZXIsc3RhdGljQ2xhc3M6Im51bWJlciIsY2xhc3M6e2FjdGl2ZTpfdm0uY3VycmVudFBhZ2U9PT1wYWdlcixkaXNhYmxlZDpfdm0uZGlzYWJsZWR9fSxbX3ZtLl92KF92bS5fcyhwYWdlcikpXSl9KSxfdm0uc2hvd05leHRNb3JlP19jKCJsaSIse3N0YXRpY0NsYXNzOiJlbC1pY29uIG1vcmUgYnRuLXF1aWNrbmV4dCIsY2xhc3M6W192bS5xdWlja25leHRJY29uQ2xhc3Mse2Rpc2FibGVkOl92bS5kaXNhYmxlZH1dLG9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLm9uTW91c2VlbnRlcigicmlnaHQiKX0sbW91c2VsZWF2ZTpmdW5jdGlvbigkZXZlbnQpe192bS5xdWlja25leHRJY29uQ2xhc3M9ImVsLWljb24tbW9yZSJ9fX0pOl92bS5fZSgpLDE8X3ZtLnBhZ2VDb3VudD9fYygibGkiLHtzdGF0aWNDbGFzczoibnVtYmVyIixjbGFzczp7YWN0aXZlOl92bS5jdXJyZW50UGFnZT09PV92bS5wYWdlQ291bnQsZGlzYWJsZWQ6X3ZtLmRpc2FibGVkfX0sW192bS5fdihfdm0uX3MoX3ZtLnBhZ2VDb3VudCkpXSk6X3ZtLl9lKCldLDIpfTtmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnQoc2NyaXB0RXhwb3J0cyxyZW5kZXIsc3RhdGljUmVuZGVyRm5zLGZ1bmN0aW9uYWxUZW1wbGF0ZSxpbmplY3RTdHlsZXMsc2NvcGVJZCxtb2R1bGVJZGVudGlmaWVyLHNoYWRvd01vZGUpe3ZhciBob29rLG9wdGlvbnM9ImZ1bmN0aW9uIj09dHlwZW9mIHNjcmlwdEV4cG9ydHM/c2NyaXB0RXhwb3J0cy5vcHRpb25zOnNjcmlwdEV4cG9ydHM7aWYocmVuZGVyJiYob3B0aW9ucy5yZW5kZXI9cmVuZGVyLG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zPXN0YXRpY1JlbmRlckZucyxvcHRpb25zLl9jb21waWxlZD0hMCksZnVuY3Rpb25hbFRlbXBsYXRlJiYob3B0aW9ucy5mdW5jdGlvbmFsPSEwKSxzY29wZUlkJiYob3B0aW9ucy5fc2NvcGVJZD0iZGF0YS12LSIrc2NvcGVJZCksbW9kdWxlSWRlbnRpZmllcj8oaG9vaz1mdW5jdGlvbihjb250ZXh0KXsoY29udGV4dD1jb250ZXh0fHx0aGlzLiR2bm9kZSYmdGhpcy4kdm5vZGUuc3NyQ29udGV4dHx8dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LiR2bm9kZSYmdGhpcy5wYXJlbnQuJHZub2RlLnNzckNvbnRleHQpfHwidW5kZWZpbmVkIj09dHlwZW9mIF9fVlVFX1NTUl9DT05URVhUX198fChjb250ZXh0PV9fVlVFX1NTUl9DT05URVhUX18pLGluamVjdFN0eWxlcyYmaW5qZWN0U3R5bGVzLmNhbGwodGhpcyxjb250ZXh0KSxjb250ZXh0JiZjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cyYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMuYWRkKG1vZHVsZUlkZW50aWZpZXIpfSxvcHRpb25zLl9zc3JSZWdpc3Rlcj1ob29rKTppbmplY3RTdHlsZXMmJihob29rPXNoYWRvd01vZGU/ZnVuY3Rpb24oKXtpbmplY3RTdHlsZXMuY2FsbCh0aGlzLHRoaXMuJHJvb3QuJG9wdGlvbnMuc2hhZG93Um9vdCl9OmluamVjdFN0eWxlcyksaG9vaylpZihvcHRpb25zLmZ1bmN0aW9uYWwpe29wdGlvbnMuX2luamVjdFN0eWxlcz1ob29rO3ZhciBvcmlnaW5hbFJlbmRlcj1vcHRpb25zLnJlbmRlcjtvcHRpb25zLnJlbmRlcj1mdW5jdGlvbihoLGNvbnRleHQpe3JldHVybiBob29rLmNhbGwoY29udGV4dCksb3JpZ2luYWxSZW5kZXIoaCxjb250ZXh0KX19ZWxzZXt2YXIgZXhpc3Rpbmc9b3B0aW9ucy5iZWZvcmVDcmVhdGU7b3B0aW9ucy5iZWZvcmVDcmVhdGU9ZXhpc3Rpbmc/W10uY29uY2F0KGV4aXN0aW5nLGhvb2spOltob29rXX1yZXR1cm57ZXhwb3J0czpzY3JpcHRFeHBvcnRzLG9wdGlvbnM6b3B0aW9uc319cGFnZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF83Mjc0ZjI2N19yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxQYWdlciIscHJvcHM6e2N1cnJlbnRQYWdlOk51bWJlcixwYWdlQ291bnQ6TnVtYmVyLHBhZ2VyQ291bnQ6TnVtYmVyLGRpc2FibGVkOkJvb2xlYW59LHdhdGNoOntzaG93UHJldk1vcmU6ZnVuY3Rpb24odmFsKXt2YWx8fCh0aGlzLnF1aWNrcHJldkljb25DbGFzcz0iZWwtaWNvbi1tb3JlIil9LHNob3dOZXh0TW9yZTpmdW5jdGlvbih2YWwpe3ZhbHx8KHRoaXMucXVpY2tuZXh0SWNvbkNsYXNzPSJlbC1pY29uLW1vcmUiKX19LG1ldGhvZHM6e29uUGFnZXJDbGljazpmdW5jdGlvbihldmVudCl7dmFyIHRhcmdldD1ldmVudC50YXJnZXQ7aWYoIlVMIiE9PXRhcmdldC50YWdOYW1lJiYhdGhpcy5kaXNhYmxlZCl7dmFyIG5ld1BhZ2U9TnVtYmVyKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudCkscGFnZUNvdW50PXRoaXMucGFnZUNvdW50LGN1cnJlbnRQYWdlPXRoaXMuY3VycmVudFBhZ2UscGFnZXJDb3VudE9mZnNldD10aGlzLnBhZ2VyQ291bnQtMjstMSE9PXRhcmdldC5jbGFzc05hbWUuaW5kZXhPZigibW9yZSIpJiYoLTEhPT10YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoInF1aWNrcHJldiIpP25ld1BhZ2U9Y3VycmVudFBhZ2UtcGFnZXJDb3VudE9mZnNldDotMSE9PXRhcmdldC5jbGFzc05hbWUuaW5kZXhPZigicXVpY2tuZXh0IikmJihuZXdQYWdlPWN1cnJlbnRQYWdlK3BhZ2VyQ291bnRPZmZzZXQpKSxpc05hTihuZXdQYWdlKXx8KG5ld1BhZ2U8MSYmKG5ld1BhZ2U9MSkscGFnZUNvdW50PG5ld1BhZ2UmJihuZXdQYWdlPXBhZ2VDb3VudCkpLG5ld1BhZ2UhPT1jdXJyZW50UGFnZSYmdGhpcy4kZW1pdCgiY2hhbmdlIixuZXdQYWdlKX19LG9uTW91c2VlbnRlcjpmdW5jdGlvbihkaXJlY3Rpb24pe3RoaXMuZGlzYWJsZWR8fCgibGVmdCI9PT1kaXJlY3Rpb24/dGhpcy5xdWlja3ByZXZJY29uQ2xhc3M9ImVsLWljb24tZC1hcnJvdy1sZWZ0Ijp0aGlzLnF1aWNrbmV4dEljb25DbGFzcz0iZWwtaWNvbi1kLWFycm93LXJpZ2h0Iil9fSxjb21wdXRlZDp7cGFnZXJzOmZ1bmN0aW9uKCl7dmFyIHBhZ2VyQ291bnQ9dGhpcy5wYWdlckNvdW50LGhhbGZQYWdlckNvdW50PShwYWdlckNvdW50LTEpLzIsY3VycmVudFBhZ2U9TnVtYmVyKHRoaXMuY3VycmVudFBhZ2UpLHBhZ2VDb3VudD1OdW1iZXIodGhpcy5wYWdlQ291bnQpLHNob3dQcmV2TW9yZT0hMSxzaG93TmV4dE1vcmU9ITE7cGFnZXJDb3VudDxwYWdlQ291bnQmJihwYWdlckNvdW50LWhhbGZQYWdlckNvdW50PGN1cnJlbnRQYWdlJiYoc2hvd1ByZXZNb3JlPSEwKSxjdXJyZW50UGFnZTxwYWdlQ291bnQtaGFsZlBhZ2VyQ291bnQmJihzaG93TmV4dE1vcmU9ITApKTt2YXIgYXJyYXk9W107aWYoc2hvd1ByZXZNb3JlJiYhc2hvd05leHRNb3JlKWZvcih2YXIgaT1wYWdlQ291bnQtKHBhZ2VyQ291bnQtMik7aTxwYWdlQ291bnQ7aSsrKWFycmF5LnB1c2goaSk7ZWxzZSBpZighc2hvd1ByZXZNb3JlJiZzaG93TmV4dE1vcmUpZm9yKHZhciBfaT0yO19pPHBhZ2VyQ291bnQ7X2krKylhcnJheS5wdXNoKF9pKTtlbHNlIGlmKHNob3dQcmV2TW9yZSYmc2hvd05leHRNb3JlKWZvcih2YXIgb2Zmc2V0PU1hdGguZmxvb3IocGFnZXJDb3VudC8yKS0xLF9pMj1jdXJyZW50UGFnZS1vZmZzZXQ7X2kyPD1jdXJyZW50UGFnZStvZmZzZXQ7X2kyKyspYXJyYXkucHVzaChfaTIpO2Vsc2UgZm9yKHZhciBfaTM9MjtfaTM8cGFnZUNvdW50O19pMysrKWFycmF5LnB1c2goX2kzKTtyZXR1cm4gdGhpcy5zaG93UHJldk1vcmU9c2hvd1ByZXZNb3JlLHRoaXMuc2hvd05leHRNb3JlPXNob3dOZXh0TW9yZSxhcnJheX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57Y3VycmVudDpudWxsLHNob3dQcmV2TW9yZTohMSxzaG93TmV4dE1vcmU6ITEscXVpY2tuZXh0SWNvbkNsYXNzOiJlbC1pY29uLW1vcmUiLHF1aWNrcHJldkljb25DbGFzczoiZWwtaWNvbi1tb3JlIn19fSxwYWdlcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzcyNzRmMjY3X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9wYWdpbmF0aW9uL3NyYy9wYWdlci52dWUiO3ZhciBwYWdlcj1jb21wb25lbnQuZXhwb3J0cyxzZWxlY3RfPV9fd2VicGFja19yZXF1aXJlX18oMzEpLHNlbGVjdF9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihzZWxlY3RfKSxvcHRpb25fPV9fd2VicGFja19yZXF1aXJlX18oMzIpLG9wdGlvbl9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihvcHRpb25fKSxpbnB1dF89X193ZWJwYWNrX3JlcXVpcmVfXyg3KSxpbnB1dF9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihpbnB1dF8pLGxvY2FsZV89X193ZWJwYWNrX3JlcXVpcmVfXyg1KSxsb2NhbGVfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4obG9jYWxlXyksdXRpbF89X193ZWJwYWNrX3JlcXVpcmVfXygxKSxwYWdpbmF0aW9uPXtuYW1lOiJFbFBhZ2luYXRpb24iLHByb3BzOntwYWdlU2l6ZTp7dHlwZTpOdW1iZXIsZGVmYXVsdDoxMH0sc21hbGw6Qm9vbGVhbix0b3RhbDpOdW1iZXIscGFnZUNvdW50Ok51bWJlcixwYWdlckNvdW50Ont0eXBlOk51bWJlcix2YWxpZGF0b3I6ZnVuY3Rpb24odmFsdWUpe3JldHVybigwfHZhbHVlKT09PXZhbHVlJiY0PHZhbHVlJiZ2YWx1ZTwyMiYmdmFsdWUlMj09MX0sZGVmYXVsdDo3fSxjdXJyZW50UGFnZTp7dHlwZTpOdW1iZXIsZGVmYXVsdDoxfSxsYXlvdXQ6e2RlZmF1bHQ6InByZXYsIHBhZ2VyLCBuZXh0LCBqdW1wZXIsIC0+LCB0b3RhbCJ9LHBhZ2VTaXplczp7dHlwZTpBcnJheSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuWzEwLDIwLDMwLDQwLDUwLDEwMF19fSxwb3BwZXJDbGFzczpTdHJpbmcscHJldlRleHQ6U3RyaW5nLG5leHRUZXh0OlN0cmluZyxiYWNrZ3JvdW5kOkJvb2xlYW4sZGlzYWJsZWQ6Qm9vbGVhbn0sZGF0YTpmdW5jdGlvbigpe3JldHVybntpbnRlcm5hbEN1cnJlbnRQYWdlOjEsaW50ZXJuYWxQYWdlU2l6ZTowLGxhc3RFbWl0dGVkUGFnZTotMSx1c2VyQ2hhbmdlUGFnZVNpemU6ITF9fSxyZW5kZXI6ZnVuY3Rpb24oaCl7dmFyIHRlbXBsYXRlPWgoImRpdiIse2NsYXNzOlsiZWwtcGFnaW5hdGlvbiIseyJpcy1iYWNrZ3JvdW5kIjp0aGlzLmJhY2tncm91bmQsImVsLXBhZ2luYXRpb24tLXNtYWxsIjp0aGlzLnNtYWxsfV19KSxsYXlvdXQ9dGhpcy5sYXlvdXR8fCIiO2lmKGxheW91dCl7dmFyIFRFTVBMQVRFX01BUD17cHJldjpoKCJwcmV2IiksanVtcGVyOmgoImp1bXBlciIpLHBhZ2VyOmgoInBhZ2VyIix7YXR0cnM6e2N1cnJlbnRQYWdlOnRoaXMuaW50ZXJuYWxDdXJyZW50UGFnZSxwYWdlQ291bnQ6dGhpcy5pbnRlcm5hbFBhZ2VDb3VudCxwYWdlckNvdW50OnRoaXMucGFnZXJDb3VudCxkaXNhYmxlZDp0aGlzLmRpc2FibGVkfSxvbjp7Y2hhbmdlOnRoaXMuaGFuZGxlQ3VycmVudENoYW5nZX19KSxuZXh0OmgoIm5leHQiKSxzaXplczpoKCJzaXplcyIse2F0dHJzOntwYWdlU2l6ZXM6dGhpcy5wYWdlU2l6ZXN9fSksc2xvdDpoKCJteS1zbG90IiksdG90YWw6aCgidG90YWwiKX0sY29tcG9uZW50cz1sYXlvdXQuc3BsaXQoIiwiKS5tYXAoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0udHJpbSgpfSkscmlnaHRXcmFwcGVyPWgoImRpdiIse2NsYXNzOiJlbC1wYWdpbmF0aW9uX19yaWdodHdyYXBwZXIifSksaGF2ZVJpZ2h0V3JhcHBlcj0hMTtyZXR1cm4gdGVtcGxhdGUuY2hpbGRyZW49dGVtcGxhdGUuY2hpbGRyZW58fFtdLHJpZ2h0V3JhcHBlci5jaGlsZHJlbj1yaWdodFdyYXBwZXIuY2hpbGRyZW58fFtdLGNvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbihjb21wbyl7Ii0+IiE9PWNvbXBvP2hhdmVSaWdodFdyYXBwZXI/cmlnaHRXcmFwcGVyLmNoaWxkcmVuLnB1c2goVEVNUExBVEVfTUFQW2NvbXBvXSk6dGVtcGxhdGUuY2hpbGRyZW4ucHVzaChURU1QTEFURV9NQVBbY29tcG9dKTpoYXZlUmlnaHRXcmFwcGVyPSEwfSksaGF2ZVJpZ2h0V3JhcHBlciYmdGVtcGxhdGUuY2hpbGRyZW4udW5zaGlmdChyaWdodFdyYXBwZXIpLHRlbXBsYXRlfX0sY29tcG9uZW50czp7TXlTbG90OntyZW5kZXI6ZnVuY3Rpb24oaCl7cmV0dXJuIHRoaXMuJHBhcmVudC4kc2xvdHMuZGVmYXVsdD90aGlzLiRwYXJlbnQuJHNsb3RzLmRlZmF1bHRbMF06IiJ9fSxQcmV2OntyZW5kZXI6ZnVuY3Rpb24oaCl7cmV0dXJuIGgoImJ1dHRvbiIse2F0dHJzOnt0eXBlOiJidXR0b24iLGRpc2FibGVkOnRoaXMuJHBhcmVudC5kaXNhYmxlZHx8dGhpcy4kcGFyZW50LmludGVybmFsQ3VycmVudFBhZ2U8PTF9LGNsYXNzOiJidG4tcHJldiIsb246e2NsaWNrOnRoaXMuJHBhcmVudC5wcmV2fX0sW3RoaXMuJHBhcmVudC5wcmV2VGV4dD9oKCJzcGFuIixbdGhpcy4kcGFyZW50LnByZXZUZXh0XSk6aCgiaSIse2NsYXNzOiJlbC1pY29uIGVsLWljb24tYXJyb3ctbGVmdCJ9KV0pfX0sTmV4dDp7cmVuZGVyOmZ1bmN0aW9uKGgpe3JldHVybiBoKCJidXR0b24iLHthdHRyczp7dHlwZToiYnV0dG9uIixkaXNhYmxlZDp0aGlzLiRwYXJlbnQuZGlzYWJsZWR8fHRoaXMuJHBhcmVudC5pbnRlcm5hbEN1cnJlbnRQYWdlPT09dGhpcy4kcGFyZW50LmludGVybmFsUGFnZUNvdW50fHwwPT09dGhpcy4kcGFyZW50LmludGVybmFsUGFnZUNvdW50fSxjbGFzczoiYnRuLW5leHQiLG9uOntjbGljazp0aGlzLiRwYXJlbnQubmV4dH19LFt0aGlzLiRwYXJlbnQubmV4dFRleHQ/aCgic3BhbiIsW3RoaXMuJHBhcmVudC5uZXh0VGV4dF0pOmgoImkiLHtjbGFzczoiZWwtaWNvbiBlbC1pY29uLWFycm93LXJpZ2h0In0pXSl9fSxTaXplczp7bWl4aW5zOltsb2NhbGVfZGVmYXVsdC5hXSxwcm9wczp7cGFnZVNpemVzOkFycmF5fSx3YXRjaDp7cGFnZVNpemVzOntpbW1lZGlhdGU6ITAsaGFuZGxlcjpmdW5jdGlvbihuZXdWYWwsb2xkVmFsKXtPYmplY3QodXRpbF8udmFsdWVFcXVhbHMpKG5ld1ZhbCxvbGRWYWwpfHxBcnJheS5pc0FycmF5KG5ld1ZhbCkmJih0aGlzLiRwYXJlbnQuaW50ZXJuYWxQYWdlU2l6ZT0tMTxuZXdWYWwuaW5kZXhPZih0aGlzLiRwYXJlbnQucGFnZVNpemUpP3RoaXMuJHBhcmVudC5wYWdlU2l6ZTp0aGlzLnBhZ2VTaXplc1swXSl9fX0scmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciBfdGhpcz10aGlzO3JldHVybiBoKCJzcGFuIix7Y2xhc3M6ImVsLXBhZ2luYXRpb25fX3NpemVzIn0sW2goImVsLXNlbGVjdCIse2F0dHJzOnt2YWx1ZTp0aGlzLiRwYXJlbnQuaW50ZXJuYWxQYWdlU2l6ZSxwb3BwZXJDbGFzczp0aGlzLiRwYXJlbnQucG9wcGVyQ2xhc3N8fCIiLHNpemU6Im1pbmkiLGRpc2FibGVkOnRoaXMuJHBhcmVudC5kaXNhYmxlZH0sb246e2lucHV0OnRoaXMuaGFuZGxlQ2hhbmdlfX0sW3RoaXMucGFnZVNpemVzLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gaCgiZWwtb3B0aW9uIix7YXR0cnM6e3ZhbHVlOml0ZW0sbGFiZWw6aXRlbStfdGhpcy50KCJlbC5wYWdpbmF0aW9uLnBhZ2VzaXplIil9fSl9KV0pXSl9LGNvbXBvbmVudHM6e0VsU2VsZWN0OnNlbGVjdF9kZWZhdWx0LmEsRWxPcHRpb246b3B0aW9uX2RlZmF1bHQuYX0sbWV0aG9kczp7aGFuZGxlQ2hhbmdlOmZ1bmN0aW9uKHZhbCl7dmFsIT09dGhpcy4kcGFyZW50LmludGVybmFsUGFnZVNpemUmJih0aGlzLiRwYXJlbnQuaW50ZXJuYWxQYWdlU2l6ZT12YWw9cGFyc2VJbnQodmFsLDEwKSx0aGlzLiRwYXJlbnQudXNlckNoYW5nZVBhZ2VTaXplPSEwLHRoaXMuJHBhcmVudC4kZW1pdCgidXBkYXRlOnBhZ2VTaXplIix2YWwpLHRoaXMuJHBhcmVudC4kZW1pdCgic2l6ZS1jaGFuZ2UiLHZhbCkpfX19LEp1bXBlcjp7bWl4aW5zOltsb2NhbGVfZGVmYXVsdC5hXSxjb21wb25lbnRzOntFbElucHV0OmlucHV0X2RlZmF1bHQuYX0sZGF0YTpmdW5jdGlvbigpe3JldHVybnt1c2VySW5wdXQ6bnVsbH19LHdhdGNoOnsiJHBhcmVudC5pbnRlcm5hbEN1cnJlbnRQYWdlIjpmdW5jdGlvbigpe3RoaXMudXNlcklucHV0PW51bGx9fSxtZXRob2RzOntoYW5kbGVLZXl1cDpmdW5jdGlvbihfcmVmKXt2YXIga2V5Q29kZT1fcmVmLmtleUNvZGUsdGFyZ2V0PV9yZWYudGFyZ2V0OzEzPT09a2V5Q29kZSYmdGhpcy5oYW5kbGVDaGFuZ2UodGFyZ2V0LnZhbHVlKX0saGFuZGxlSW5wdXQ6ZnVuY3Rpb24odmFsdWUpe3RoaXMudXNlcklucHV0PXZhbHVlfSxoYW5kbGVDaGFuZ2U6ZnVuY3Rpb24odmFsdWUpe3RoaXMuJHBhcmVudC5pbnRlcm5hbEN1cnJlbnRQYWdlPXRoaXMuJHBhcmVudC5nZXRWYWxpZEN1cnJlbnRQYWdlKHZhbHVlKSx0aGlzLiRwYXJlbnQuZW1pdENoYW5nZSgpLHRoaXMudXNlcklucHV0PW51bGx9fSxyZW5kZXI6ZnVuY3Rpb24oaCl7cmV0dXJuIGgoInNwYW4iLHtjbGFzczoiZWwtcGFnaW5hdGlvbl9fanVtcCJ9LFt0aGlzLnQoImVsLnBhZ2luYXRpb24uZ290byIpLGgoImVsLWlucHV0Iix7Y2xhc3M6ImVsLXBhZ2luYXRpb25fX2VkaXRvciBpcy1pbi1wYWdpbmF0aW9uIixhdHRyczp7bWluOjEsbWF4OnRoaXMuJHBhcmVudC5pbnRlcm5hbFBhZ2VDb3VudCx2YWx1ZTpudWxsIT09dGhpcy51c2VySW5wdXQ/dGhpcy51c2VySW5wdXQ6dGhpcy4kcGFyZW50LmludGVybmFsQ3VycmVudFBhZ2UsdHlwZToibnVtYmVyIixkaXNhYmxlZDp0aGlzLiRwYXJlbnQuZGlzYWJsZWR9LG5hdGl2ZU9uOntrZXl1cDp0aGlzLmhhbmRsZUtleXVwfSxvbjp7aW5wdXQ6dGhpcy5oYW5kbGVJbnB1dCxjaGFuZ2U6dGhpcy5oYW5kbGVDaGFuZ2V9fSksdGhpcy50KCJlbC5wYWdpbmF0aW9uLnBhZ2VDbGFzc2lmaWVyIildKX19LFRvdGFsOnttaXhpbnM6W2xvY2FsZV9kZWZhdWx0LmFdLHJlbmRlcjpmdW5jdGlvbihoKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHRoaXMuJHBhcmVudC50b3RhbD9oKCJzcGFuIix7Y2xhc3M6ImVsLXBhZ2luYXRpb25fX3RvdGFsIn0sW3RoaXMudCgiZWwucGFnaW5hdGlvbi50b3RhbCIse3RvdGFsOnRoaXMuJHBhcmVudC50b3RhbH0pXSk6IiJ9fSxQYWdlcjpwYWdlcn0sbWV0aG9kczp7aGFuZGxlQ3VycmVudENoYW5nZTpmdW5jdGlvbih2YWwpe3RoaXMuaW50ZXJuYWxDdXJyZW50UGFnZT10aGlzLmdldFZhbGlkQ3VycmVudFBhZ2UodmFsKSx0aGlzLnVzZXJDaGFuZ2VQYWdlU2l6ZT0hMCx0aGlzLmVtaXRDaGFuZ2UoKX0scHJldjpmdW5jdGlvbigpe2lmKCF0aGlzLmRpc2FibGVkKXt2YXIgbmV3VmFsPXRoaXMuaW50ZXJuYWxDdXJyZW50UGFnZS0xO3RoaXMuaW50ZXJuYWxDdXJyZW50UGFnZT10aGlzLmdldFZhbGlkQ3VycmVudFBhZ2UobmV3VmFsKSx0aGlzLiRlbWl0KCJwcmV2LWNsaWNrIix0aGlzLmludGVybmFsQ3VycmVudFBhZ2UpLHRoaXMuZW1pdENoYW5nZSgpfX0sbmV4dDpmdW5jdGlvbigpe2lmKCF0aGlzLmRpc2FibGVkKXt2YXIgbmV3VmFsPXRoaXMuaW50ZXJuYWxDdXJyZW50UGFnZSsxO3RoaXMuaW50ZXJuYWxDdXJyZW50UGFnZT10aGlzLmdldFZhbGlkQ3VycmVudFBhZ2UobmV3VmFsKSx0aGlzLiRlbWl0KCJuZXh0LWNsaWNrIix0aGlzLmludGVybmFsQ3VycmVudFBhZ2UpLHRoaXMuZW1pdENoYW5nZSgpfX0sZ2V0VmFsaWRDdXJyZW50UGFnZTpmdW5jdGlvbih2YWx1ZSl7dmFsdWU9cGFyc2VJbnQodmFsdWUsMTApO3ZhciByZXNldFZhbHVlPXZvaWQgMDtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHRoaXMuaW50ZXJuYWxQYWdlQ291bnQ/dmFsdWU8MT9yZXNldFZhbHVlPTE6dmFsdWU+dGhpcy5pbnRlcm5hbFBhZ2VDb3VudCYmKHJlc2V0VmFsdWU9dGhpcy5pbnRlcm5hbFBhZ2VDb3VudCk6KGlzTmFOKHZhbHVlKXx8dmFsdWU8MSkmJihyZXNldFZhbHVlPTEpLHZvaWQgMD09PXJlc2V0VmFsdWUmJmlzTmFOKHZhbHVlKT9yZXNldFZhbHVlPTE6MD09PXJlc2V0VmFsdWUmJihyZXNldFZhbHVlPTEpLHZvaWQgMD09PXJlc2V0VmFsdWU/dmFsdWU6cmVzZXRWYWx1ZX0sZW1pdENoYW5nZTpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpczt0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpeyhfdGhpczIuaW50ZXJuYWxDdXJyZW50UGFnZSE9PV90aGlzMi5sYXN0RW1pdHRlZFBhZ2V8fF90aGlzMi51c2VyQ2hhbmdlUGFnZVNpemUpJiYoX3RoaXMyLiRlbWl0KCJjdXJyZW50LWNoYW5nZSIsX3RoaXMyLmludGVybmFsQ3VycmVudFBhZ2UpLF90aGlzMi5sYXN0RW1pdHRlZFBhZ2U9X3RoaXMyLmludGVybmFsQ3VycmVudFBhZ2UsX3RoaXMyLnVzZXJDaGFuZ2VQYWdlU2l6ZT0hMSl9KX19LGNvbXB1dGVkOntpbnRlcm5hbFBhZ2VDb3VudDpmdW5jdGlvbigpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdGhpcy50b3RhbD9NYXRoLm1heCgxLE1hdGguY2VpbCh0aGlzLnRvdGFsL3RoaXMuaW50ZXJuYWxQYWdlU2l6ZSkpOiJudW1iZXIiPT10eXBlb2YgdGhpcy5wYWdlQ291bnQ/TWF0aC5tYXgoMSx0aGlzLnBhZ2VDb3VudCk6bnVsbH19LHdhdGNoOntjdXJyZW50UGFnZTp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odmFsKXt0aGlzLmludGVybmFsQ3VycmVudFBhZ2U9dGhpcy5nZXRWYWxpZEN1cnJlbnRQYWdlKHZhbCl9fSxwYWdlU2l6ZTp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odmFsKXt0aGlzLmludGVybmFsUGFnZVNpemU9aXNOYU4odmFsKT8xMDp2YWx9fSxpbnRlcm5hbEN1cnJlbnRQYWdlOntpbW1lZGlhdGU6ITAsaGFuZGxlcjpmdW5jdGlvbihuZXdWYWwpe3RoaXMuJGVtaXQoInVwZGF0ZTpjdXJyZW50UGFnZSIsbmV3VmFsKSx0aGlzLmxhc3RFbWl0dGVkUGFnZT0tMX19LGludGVybmFsUGFnZUNvdW50OmZ1bmN0aW9uKG5ld1ZhbCl7dmFyIG9sZFBhZ2U9dGhpcy5pbnRlcm5hbEN1cnJlbnRQYWdlOzA8bmV3VmFsJiYwPT09b2xkUGFnZT90aGlzLmludGVybmFsQ3VycmVudFBhZ2U9MTpuZXdWYWw8b2xkUGFnZSYmKHRoaXMuaW50ZXJuYWxDdXJyZW50UGFnZT0wPT09bmV3VmFsPzE6bmV3VmFsLHRoaXMudXNlckNoYW5nZVBhZ2VTaXplJiZ0aGlzLmVtaXRDaGFuZ2UoKSksdGhpcy51c2VyQ2hhbmdlUGFnZVNpemU9ITF9fSxpbnN0YWxsOmZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChwYWdpbmF0aW9uLm5hbWUscGFnaW5hdGlvbil9fSxwYWNrYWdlc19wYWdpbmF0aW9uPXBhZ2luYXRpb24sY29tcG9uZW50dnVlX3R5cGVfdGVtcGxhdGVfaWRfNjAxNDBlNjJfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJkaWFsb2ctZmFkZSJ9LG9uOnsiYWZ0ZXItZW50ZXIiOl92bS5hZnRlckVudGVyLCJhZnRlci1sZWF2ZSI6X3ZtLmFmdGVyTGVhdmV9fSxbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS52aXNpYmxlLGV4cHJlc3Npb246InZpc2libGUifV0sc3RhdGljQ2xhc3M6ImVsLWRpYWxvZ19fd3JhcHBlciIsb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuICRldmVudC50YXJnZXQhPT0kZXZlbnQuY3VycmVudFRhcmdldD9udWxsOl92bS5oYW5kbGVXcmFwcGVyQ2xpY2soJGV2ZW50KX19fSxbX2MoImRpdiIse3JlZjoiZGlhbG9nIixzdGF0aWNDbGFzczoiZWwtZGlhbG9nIixjbGFzczpbeyJpcy1mdWxsc2NyZWVuIjpfdm0uZnVsbHNjcmVlbiwiZWwtZGlhbG9nLS1jZW50ZXIiOl92bS5jZW50ZXJ9LF92bS5jdXN0b21DbGFzc10sc3R5bGU6X3ZtLnN0eWxlLGF0dHJzOntyb2xlOiJkaWFsb2ciLCJhcmlhLW1vZGFsIjoidHJ1ZSIsImFyaWEtbGFiZWwiOl92bS50aXRsZXx8ImRpYWxvZyJ9fSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1kaWFsb2dfX2hlYWRlciJ9LFtfdm0uX3QoInRpdGxlIixbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtZGlhbG9nX190aXRsZSJ9LFtfdm0uX3YoX3ZtLl9zKF92bS50aXRsZSkpXSldKSxfdm0uc2hvd0Nsb3NlP19jKCJidXR0b24iLHtzdGF0aWNDbGFzczoiZWwtZGlhbG9nX19oZWFkZXJidG4iLGF0dHJzOnt0eXBlOiJidXR0b24iLCJhcmlhLWxhYmVsIjoiQ2xvc2UifSxvbjp7Y2xpY2s6X3ZtLmhhbmRsZUNsb3NlfX0sW19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWRpYWxvZ19fY2xvc2UgZWwtaWNvbiBlbC1pY29uLWNsb3NlIn0pXSk6X3ZtLl9lKCldLDIpLF92bS5yZW5kZXJlZD9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWRpYWxvZ19fYm9keSJ9LFtfdm0uX3QoImRlZmF1bHQiKV0sMik6X3ZtLl9lKCksX3ZtLiRzbG90cy5mb290ZXI/X2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1kaWFsb2dfX2Zvb3RlciJ9LFtfdm0uX3QoImZvb3RlciIpXSwyKTpfdm0uX2UoKV0pXSldKX07Y29tcG9uZW50dnVlX3R5cGVfdGVtcGxhdGVfaWRfNjAxNDBlNjJfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHBvcHVwXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDExKSxwb3B1cF9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihwb3B1cF8pLG1pZ3JhdGluZ189X193ZWJwYWNrX3JlcXVpcmVfXyg4KSxtaWdyYXRpbmdfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4obWlncmF0aW5nXyksZW1pdHRlcl89X193ZWJwYWNrX3JlcXVpcmVfXygyKSxlbWl0dGVyX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGVtaXR0ZXJfKSxjb21wb25lbnRfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxEaWFsb2ciLG1peGluczpbcG9wdXBfZGVmYXVsdC5hLGVtaXR0ZXJfZGVmYXVsdC5hLG1pZ3JhdGluZ19kZWZhdWx0LmFdLHByb3BzOnt0aXRsZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn0sbW9kYWw6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxtb2RhbEFwcGVuZFRvQm9keTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGFwcGVuZFRvQm9keTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LGxvY2tTY3JvbGw6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxjbG9zZU9uQ2xpY2tNb2RhbDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGNsb3NlT25QcmVzc0VzY2FwZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LHNob3dDbG9zZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LHdpZHRoOlN0cmluZyxmdWxsc2NyZWVuOkJvb2xlYW4sY3VzdG9tQ2xhc3M6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiJ9LHRvcDp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiMTV2aCJ9LGJlZm9yZUNsb3NlOkZ1bmN0aW9uLGNlbnRlcjp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2Nsb3NlZDohMX19LHdhdGNoOnt2aXNpYmxlOmZ1bmN0aW9uKHZhbCl7dmFyIF90aGlzPXRoaXM7dmFsPyh0aGlzLmNsb3NlZD0hMSx0aGlzLiRlbWl0KCJvcGVuIiksdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIix0aGlzLnVwZGF0ZVBvcHBlciksdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpcy4kcmVmcy5kaWFsb2cuc2Nyb2xsVG9wPTB9KSx0aGlzLmFwcGVuZFRvQm9keSYmZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLiRlbCkpOih0aGlzLiRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLHRoaXMudXBkYXRlUG9wcGVyKSx0aGlzLmNsb3NlZHx8dGhpcy4kZW1pdCgiY2xvc2UiKSl9fSxjb21wdXRlZDp7c3R5bGU6ZnVuY3Rpb24oKXt2YXIgc3R5bGU9e307cmV0dXJuIHRoaXMuZnVsbHNjcmVlbnx8KHN0eWxlLm1hcmdpblRvcD10aGlzLnRvcCx0aGlzLndpZHRoJiYoc3R5bGUud2lkdGg9dGhpcy53aWR0aCkpLHN0eWxlfX0sbWV0aG9kczp7Z2V0TWlncmF0aW5nQ29uZmlnOmZ1bmN0aW9uKCl7cmV0dXJue3Byb3BzOntzaXplOiJzaXplIGlzIHJlbW92ZWQuIn19fSxoYW5kbGVXcmFwcGVyQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlT25DbGlja01vZGFsJiZ0aGlzLmhhbmRsZUNsb3NlKCl9LGhhbmRsZUNsb3NlOmZ1bmN0aW9uKCl7ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuYmVmb3JlQ2xvc2U/dGhpcy5iZWZvcmVDbG9zZSh0aGlzLmhpZGUpOnRoaXMuaGlkZSgpfSxoaWRlOmZ1bmN0aW9uKGNhbmNlbCl7ITEhPT1jYW5jZWwmJih0aGlzLiRlbWl0KCJ1cGRhdGU6dmlzaWJsZSIsITEpLHRoaXMuJGVtaXQoImNsb3NlIiksdGhpcy5jbG9zZWQ9ITApfSx1cGRhdGVQb3BwZXI6ZnVuY3Rpb24oKXt0aGlzLmJyb2FkY2FzdCgiRWxTZWxlY3REcm9wZG93biIsInVwZGF0ZVBvcHBlciIpLHRoaXMuYnJvYWRjYXN0KCJFbERyb3Bkb3duTWVudSIsInVwZGF0ZVBvcHBlciIpfSxhZnRlckVudGVyOmZ1bmN0aW9uKCl7dGhpcy4kZW1pdCgib3BlbmVkIil9LGFmdGVyTGVhdmU6ZnVuY3Rpb24oKXt0aGlzLiRlbWl0KCJjbG9zZWQiKX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt0aGlzLnZpc2libGUmJih0aGlzLnJlbmRlcmVkPSEwLHRoaXMub3BlbigpLHRoaXMuYXBwZW5kVG9Cb2R5JiZkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuJGVsKSl9LGRlc3Ryb3llZDpmdW5jdGlvbigpe3RoaXMuYXBwZW5kVG9Cb2R5JiZ0aGlzLiRlbCYmdGhpcy4kZWwucGFyZW50Tm9kZSYmdGhpcy4kZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLiRlbCl9fSxjb21wb25lbnR2dWVfdHlwZV90ZW1wbGF0ZV9pZF82MDE0MGU2Ml9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2NvbXBvbmVudF9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2RpYWxvZy9zcmMvY29tcG9uZW50LnZ1ZSI7dmFyIHNyY19jb21wb25lbnQ9Y29tcG9uZW50X2NvbXBvbmVudC5leHBvcnRzO3NyY19jb21wb25lbnQuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc3JjX2NvbXBvbmVudC5uYW1lLHNyY19jb21wb25lbnQpfTt2YXIgZGlhbG9nPXNyY19jb21wb25lbnQsYXV0b2NvbXBsZXRldnVlX3R5cGVfdGVtcGxhdGVfaWRfMTUyZjJlZTZfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6ImNsaWNrb3V0c2lkZSIscmF3TmFtZToidi1jbGlja291dHNpZGUiLHZhbHVlOl92bS5jbG9zZSxleHByZXNzaW9uOiJjbG9zZSJ9XSxzdGF0aWNDbGFzczoiZWwtYXV0b2NvbXBsZXRlIixhdHRyczp7ImFyaWEtaGFzcG9wdXAiOiJsaXN0Ym94Iixyb2xlOiJjb21ib2JveCIsImFyaWEtZXhwYW5kZWQiOl92bS5zdWdnZXN0aW9uVmlzaWJsZSwiYXJpYS1vd25zIjpfdm0uaWR9fSxbX2MoImVsLWlucHV0Iixfdm0uX2Ioe3JlZjoiaW5wdXQiLG9uOntpbnB1dDpfdm0uaGFuZGxlQ2hhbmdlLGZvY3VzOl92bS5oYW5kbGVGb2N1cyxibHVyOl92bS5oYW5kbGVCbHVyLGNsZWFyOl92bS5oYW5kbGVDbGVhcn0sbmF0aXZlT246e2tleWRvd246W2Z1bmN0aW9uKCRldmVudCl7aWYoISgiYnV0dG9uImluICRldmVudCkmJl92bS5faygkZXZlbnQua2V5Q29kZSwidXAiLDM4LCRldmVudC5rZXksWyJVcCIsIkFycm93VXAiXSkpcmV0dXJuIG51bGw7JGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLmhpZ2hsaWdodChfdm0uaGlnaGxpZ2h0ZWRJbmRleC0xKX0sZnVuY3Rpb24oJGV2ZW50KXtpZighKCJidXR0b24iaW4gJGV2ZW50KSYmX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJkb3duIiw0MCwkZXZlbnQua2V5LFsiRG93biIsIkFycm93RG93biJdKSlyZXR1cm4gbnVsbDskZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0uaGlnaGxpZ2h0KF92bS5oaWdobGlnaHRlZEluZGV4KzEpfSxmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJlbnRlciIsMTMsJGV2ZW50LmtleSwiRW50ZXIiKT9fdm0uaGFuZGxlS2V5RW50ZXIoJGV2ZW50KTpudWxsfSxmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJ0YWIiLDksJGV2ZW50LmtleSwiVGFiIik/X3ZtLmNsb3NlKCRldmVudCk6bnVsbH1dfX0sImVsLWlucHV0IixbX3ZtLiRwcm9wcyxfdm0uJGF0dHJzXSwhMSksW192bS4kc2xvdHMucHJlcGVuZD9fYygidGVtcGxhdGUiLHtzbG90OiJwcmVwZW5kIn0sW192bS5fdCgicHJlcGVuZCIpXSwyKTpfdm0uX2UoKSxfdm0uJHNsb3RzLmFwcGVuZD9fYygidGVtcGxhdGUiLHtzbG90OiJhcHBlbmQifSxbX3ZtLl90KCJhcHBlbmQiKV0sMik6X3ZtLl9lKCksX3ZtLiRzbG90cy5wcmVmaXg/X2MoInRlbXBsYXRlIix7c2xvdDoicHJlZml4In0sW192bS5fdCgicHJlZml4IildLDIpOl92bS5fZSgpLF92bS4kc2xvdHMuc3VmZml4P19jKCJ0ZW1wbGF0ZSIse3Nsb3Q6InN1ZmZpeCJ9LFtfdm0uX3QoInN1ZmZpeCIpXSwyKTpfdm0uX2UoKV0sMiksX2MoImVsLWF1dG9jb21wbGV0ZS1zdWdnZXN0aW9ucyIse3JlZjoic3VnZ2VzdGlvbnMiLGNsYXNzOltfdm0ucG9wcGVyQ2xhc3M/X3ZtLnBvcHBlckNsYXNzOiIiXSxhdHRyczp7InZpc2libGUtYXJyb3ciOiIiLCJwb3BwZXItb3B0aW9ucyI6X3ZtLnBvcHBlck9wdGlvbnMsImFwcGVuZC10by1ib2R5Ijpfdm0ucG9wcGVyQXBwZW5kVG9Cb2R5LHBsYWNlbWVudDpfdm0ucGxhY2VtZW50LGlkOl92bS5pZH19LF92bS5fbChfdm0uc3VnZ2VzdGlvbnMsZnVuY3Rpb24oaXRlbSxpbmRleCl7cmV0dXJuIF9jKCJsaSIse2tleTppbmRleCxjbGFzczp7aGlnaGxpZ2h0ZWQ6X3ZtLmhpZ2hsaWdodGVkSW5kZXg9PT1pbmRleH0sYXR0cnM6e2lkOl92bS5pZCsiLWl0ZW0tIitpbmRleCxyb2xlOiJvcHRpb24iLCJhcmlhLXNlbGVjdGVkIjpfdm0uaGlnaGxpZ2h0ZWRJbmRleD09PWluZGV4fSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc2VsZWN0KGl0ZW0pfX19LFtfdm0uX3QoImRlZmF1bHQiLFtfdm0uX3YoIlxuICAgICAgICAiK192bS5fcyhpdGVtW192bS52YWx1ZUtleV0pKyJcbiAgICAgICIpXSx7aXRlbTppdGVtfSldLDIpfSksMCldLDEpfTthdXRvY29tcGxldGV2dWVfdHlwZV90ZW1wbGF0ZV9pZF8xNTJmMmVlNl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgZGVib3VuY2VfPV9fd2VicGFja19yZXF1aXJlX18oMTIpLGRlYm91bmNlX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGRlYm91bmNlXyksY2xpY2tvdXRzaWRlXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDEwKSxjbGlja291dHNpZGVfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oY2xpY2tvdXRzaWRlXyksYXV0b2NvbXBsZXRlX3N1Z2dlc3Rpb25zdnVlX3R5cGVfdGVtcGxhdGVfaWRfY2QxMGRjZjBfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJlbC16b29tLWluLXRvcCJ9LG9uOnsiYWZ0ZXItbGVhdmUiOl92bS5kb0Rlc3Ryb3l9fSxbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS5zaG93UG9wcGVyLGV4cHJlc3Npb246InNob3dQb3BwZXIifV0sc3RhdGljQ2xhc3M6ImVsLWF1dG9jb21wbGV0ZS1zdWdnZXN0aW9uIGVsLXBvcHBlciIsY2xhc3M6eyJpcy1sb2FkaW5nIjohX3ZtLnBhcmVudC5oaWRlTG9hZGluZyYmX3ZtLnBhcmVudC5sb2FkaW5nfSxzdHlsZTp7d2lkdGg6X3ZtLmRyb3Bkb3duV2lkdGh9LGF0dHJzOntyb2xlOiJyZWdpb24ifX0sW19jKCJlbC1zY3JvbGxiYXIiLHthdHRyczp7dGFnOiJ1bCIsIndyYXAtY2xhc3MiOiJlbC1hdXRvY29tcGxldGUtc3VnZ2VzdGlvbl9fd3JhcCIsInZpZXctY2xhc3MiOiJlbC1hdXRvY29tcGxldGUtc3VnZ2VzdGlvbl9fbGlzdCJ9fSxbIV92bS5wYXJlbnQuaGlkZUxvYWRpbmcmJl92bS5wYXJlbnQubG9hZGluZz9fYygibGkiLFtfYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pY29uLWxvYWRpbmcifSldKTpfdm0uX3QoImRlZmF1bHQiKV0sMildLDEpXSl9O2F1dG9jb21wbGV0ZV9zdWdnZXN0aW9uc3Z1ZV90eXBlX3RlbXBsYXRlX2lkX2NkMTBkY2YwX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciB2dWVfcG9wcGVyXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDQpLHZ1ZV9wb3BwZXJfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4odnVlX3BvcHBlcl8pLHNjcm9sbGJhcl89X193ZWJwYWNrX3JlcXVpcmVfXygxOCksc2Nyb2xsYmFyX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKHNjcm9sbGJhcl8pLGF1dG9jb21wbGV0ZV9zdWdnZXN0aW9uc19jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtjb21wb25lbnRzOntFbFNjcm9sbGJhcjpzY3JvbGxiYXJfZGVmYXVsdC5hfSxtaXhpbnM6W3Z1ZV9wb3BwZXJfZGVmYXVsdC5hLGVtaXR0ZXJfZGVmYXVsdC5hXSxjb21wb25lbnROYW1lOiJFbEF1dG9jb21wbGV0ZVN1Z2dlc3Rpb25zIixkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3BhcmVudDp0aGlzLiRwYXJlbnQsZHJvcGRvd25XaWR0aDoiIn19LHByb3BzOntvcHRpb25zOntkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJue2dwdUFjY2VsZXJhdGlvbjohMX19fSxpZDpTdHJpbmd9LG1ldGhvZHM6e3NlbGVjdDpmdW5jdGlvbihpdGVtKXt0aGlzLmRpc3BhdGNoKCJFbEF1dG9jb21wbGV0ZSIsIml0ZW0tY2xpY2siLGl0ZW0pfX0sdXBkYXRlZDpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzO3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKF8pe190aGlzLnBvcHBlckpTJiZfdGhpcy51cGRhdGVQb3BwZXIoKX0pfSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy4kcGFyZW50LnBvcHBlckVsbT10aGlzLnBvcHBlckVsbT10aGlzLiRlbCx0aGlzLnJlZmVyZW5jZUVsbT10aGlzLiRwYXJlbnQuJHJlZnMuaW5wdXQuJHJlZnMuaW5wdXQsdGhpcy5yZWZlcmVuY2VMaXN0PXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoIi5lbC1hdXRvY29tcGxldGUtc3VnZ2VzdGlvbl9fbGlzdCIpLHRoaXMucmVmZXJlbmNlTGlzdC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJsaXN0Ym94IiksdGhpcy5yZWZlcmVuY2VMaXN0LnNldEF0dHJpYnV0ZSgiaWQiLHRoaXMuaWQpfSxjcmVhdGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzMj10aGlzO3RoaXMuJG9uKCJ2aXNpYmxlIixmdW5jdGlvbih2YWwsaW5wdXRXaWR0aCl7X3RoaXMyLmRyb3Bkb3duV2lkdGg9aW5wdXRXaWR0aCsicHgiLF90aGlzMi5zaG93UG9wcGVyPXZhbH0pfX0sYXV0b2NvbXBsZXRlX3N1Z2dlc3Rpb25zdnVlX3R5cGVfdGVtcGxhdGVfaWRfY2QxMGRjZjBfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTthdXRvY29tcGxldGVfc3VnZ2VzdGlvbnNfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9hdXRvY29tcGxldGUvc3JjL2F1dG9jb21wbGV0ZS1zdWdnZXN0aW9ucy52dWUiO3ZhciBhdXRvY29tcGxldGVfc3VnZ2VzdGlvbnM9YXV0b2NvbXBsZXRlX3N1Z2dlc3Rpb25zX2NvbXBvbmVudC5leHBvcnRzLGZvY3VzXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSxmb2N1c19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihmb2N1c18pLGF1dG9jb21wbGV0ZV9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbEF1dG9jb21wbGV0ZSIsbWl4aW5zOltlbWl0dGVyX2RlZmF1bHQuYSxmb2N1c19kZWZhdWx0KCkoImlucHV0IiksbWlncmF0aW5nX2RlZmF1bHQuYV0saW5oZXJpdEF0dHJzOiExLGNvbXBvbmVudE5hbWU6IkVsQXV0b2NvbXBsZXRlIixjb21wb25lbnRzOntFbElucHV0OmlucHV0X2RlZmF1bHQuYSxFbEF1dG9jb21wbGV0ZVN1Z2dlc3Rpb25zOmF1dG9jb21wbGV0ZV9zdWdnZXN0aW9uc30sZGlyZWN0aXZlczp7Q2xpY2tvdXRzaWRlOmNsaWNrb3V0c2lkZV9kZWZhdWx0LmF9LHByb3BzOnt2YWx1ZUtleTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoidmFsdWUifSxwb3BwZXJDbGFzczpTdHJpbmcscG9wcGVyT3B0aW9uczpPYmplY3QscGxhY2Vob2xkZXI6U3RyaW5nLGNsZWFyYWJsZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LGRpc2FibGVkOkJvb2xlYW4sbmFtZTpTdHJpbmcsc2l6ZTpTdHJpbmcsdmFsdWU6U3RyaW5nLG1heGxlbmd0aDpOdW1iZXIsbWlubGVuZ3RoOk51bWJlcixhdXRvZm9jdXM6Qm9vbGVhbixmZXRjaFN1Z2dlc3Rpb25zOkZ1bmN0aW9uLHRyaWdnZXJPbkZvY3VzOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sY3VzdG9tSXRlbTpTdHJpbmcsc2VsZWN0V2hlblVubWF0Y2hlZDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LHByZWZpeEljb246U3RyaW5nLHN1ZmZpeEljb246U3RyaW5nLGxhYmVsOlN0cmluZyxkZWJvdW5jZTp7dHlwZTpOdW1iZXIsZGVmYXVsdDozMDB9LHBsYWNlbWVudDp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiYm90dG9tLXN0YXJ0In0saGlkZUxvYWRpbmc6Qm9vbGVhbixwb3BwZXJBcHBlbmRUb0JvZHk6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxoaWdobGlnaHRGaXJzdEl0ZW06e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybnthY3RpdmF0ZWQ6ITEsc3VnZ2VzdGlvbnM6W10sbG9hZGluZzohMSxoaWdobGlnaHRlZEluZGV4Oi0xLHN1Z2dlc3Rpb25EaXNhYmxlZDohMX19LGNvbXB1dGVkOntzdWdnZXN0aW9uVmlzaWJsZTpmdW5jdGlvbigpe3ZhciBzdWdnZXN0aW9ucz10aGlzLnN1Z2dlc3Rpb25zO3JldHVybihBcnJheS5pc0FycmF5KHN1Z2dlc3Rpb25zKSYmMDxzdWdnZXN0aW9ucy5sZW5ndGh8fHRoaXMubG9hZGluZykmJnRoaXMuYWN0aXZhdGVkfSxpZDpmdW5jdGlvbigpe3JldHVybiJlbC1hdXRvY29tcGxldGUtIitPYmplY3QodXRpbF8uZ2VuZXJhdGVJZCkoKX19LHdhdGNoOntzdWdnZXN0aW9uVmlzaWJsZTpmdW5jdGlvbih2YWwpe3ZhciAkaW5wdXQ9dGhpcy5nZXRJbnB1dCgpOyRpbnB1dCYmdGhpcy5icm9hZGNhc3QoIkVsQXV0b2NvbXBsZXRlU3VnZ2VzdGlvbnMiLCJ2aXNpYmxlIixbdmFsLCRpbnB1dC5vZmZzZXRXaWR0aF0pfX0sbWV0aG9kczp7Z2V0TWlncmF0aW5nQ29uZmlnOmZ1bmN0aW9uKCl7cmV0dXJue3Byb3BzOnsiY3VzdG9tLWl0ZW0iOiJjdXN0b20taXRlbSBpcyByZW1vdmVkLCB1c2Ugc2NvcGVkIHNsb3QgaW5zdGVhZC4iLHByb3BzOiJwcm9wcyBpcyByZW1vdmVkLCB1c2UgdmFsdWUta2V5IGluc3RlYWQuIn19fSxnZXREYXRhOmZ1bmN0aW9uKHF1ZXJ5U3RyaW5nKXt2YXIgX3RoaXM9dGhpczt0aGlzLnN1Z2dlc3Rpb25EaXNhYmxlZHx8KHRoaXMubG9hZGluZz0hMCx0aGlzLmZldGNoU3VnZ2VzdGlvbnMocXVlcnlTdHJpbmcsZnVuY3Rpb24oc3VnZ2VzdGlvbnMpe190aGlzLmxvYWRpbmc9ITEsX3RoaXMuc3VnZ2VzdGlvbkRpc2FibGVkfHwoQXJyYXkuaXNBcnJheShzdWdnZXN0aW9ucyk/KF90aGlzLnN1Z2dlc3Rpb25zPXN1Z2dlc3Rpb25zLF90aGlzLmhpZ2hsaWdodGVkSW5kZXg9X3RoaXMuaGlnaGxpZ2h0Rmlyc3RJdGVtPzA6LTEpOmNvbnNvbGUuZXJyb3IoIltFbGVtZW50IEVycm9yXVtBdXRvY29tcGxldGVdYXV0b2NvbXBsZXRlIHN1Z2dlc3Rpb25zIG11c3QgYmUgYW4gYXJyYXkiKSl9KSl9LGhhbmRsZUNoYW5nZTpmdW5jdGlvbih2YWx1ZSl7aWYodGhpcy4kZW1pdCgiaW5wdXQiLHZhbHVlKSx0aGlzLnN1Z2dlc3Rpb25EaXNhYmxlZD0hMSwhdGhpcy50cmlnZ2VyT25Gb2N1cyYmIXZhbHVlKXJldHVybiB0aGlzLnN1Z2dlc3Rpb25EaXNhYmxlZD0hMCx2b2lkKHRoaXMuc3VnZ2VzdGlvbnM9W10pO3RoaXMuZGVib3VuY2VkR2V0RGF0YSh2YWx1ZSl9LGhhbmRsZUZvY3VzOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLmFjdGl2YXRlZD0hMCx0aGlzLiRlbWl0KCJmb2N1cyIsZXZlbnQpLHRoaXMudHJpZ2dlck9uRm9jdXMmJnRoaXMuZGVib3VuY2VkR2V0RGF0YSh0aGlzLnZhbHVlKX0saGFuZGxlQmx1cjpmdW5jdGlvbihldmVudCl7dGhpcy4kZW1pdCgiYmx1ciIsZXZlbnQpfSxoYW5kbGVDbGVhcjpmdW5jdGlvbigpe3RoaXMuYWN0aXZhdGVkPSExLHRoaXMuJGVtaXQoImNsZWFyIil9LGNsb3NlOmZ1bmN0aW9uKGUpe3RoaXMuYWN0aXZhdGVkPSExfSxoYW5kbGVLZXlFbnRlcjpmdW5jdGlvbihlKXt2YXIgX3RoaXMyPXRoaXM7dGhpcy5zdWdnZXN0aW9uVmlzaWJsZSYmMDw9dGhpcy5oaWdobGlnaHRlZEluZGV4JiZ0aGlzLmhpZ2hsaWdodGVkSW5kZXg8dGhpcy5zdWdnZXN0aW9ucy5sZW5ndGg/KGUucHJldmVudERlZmF1bHQoKSx0aGlzLnNlbGVjdCh0aGlzLnN1Z2dlc3Rpb25zW3RoaXMuaGlnaGxpZ2h0ZWRJbmRleF0pKTp0aGlzLnNlbGVjdFdoZW5Vbm1hdGNoZWQmJih0aGlzLiRlbWl0KCJzZWxlY3QiLHt2YWx1ZTp0aGlzLnZhbHVlfSksdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oXyl7X3RoaXMyLnN1Z2dlc3Rpb25zPVtdLF90aGlzMi5oaWdobGlnaHRlZEluZGV4PS0xfSkpfSxzZWxlY3Q6ZnVuY3Rpb24oaXRlbSl7dmFyIF90aGlzMz10aGlzO3RoaXMuJGVtaXQoImlucHV0IixpdGVtW3RoaXMudmFsdWVLZXldKSx0aGlzLiRlbWl0KCJzZWxlY3QiLGl0ZW0pLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKF8pe190aGlzMy5zdWdnZXN0aW9ucz1bXSxfdGhpczMuaGlnaGxpZ2h0ZWRJbmRleD0tMX0pfSxoaWdobGlnaHQ6ZnVuY3Rpb24oaW5kZXgpe2lmKHRoaXMuc3VnZ2VzdGlvblZpc2libGUmJiF0aGlzLmxvYWRpbmcpaWYoaW5kZXg8MCl0aGlzLmhpZ2hsaWdodGVkSW5kZXg9LTE7ZWxzZXtpbmRleD49dGhpcy5zdWdnZXN0aW9ucy5sZW5ndGgmJihpbmRleD10aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aC0xKTt2YXIgc3VnZ2VzdGlvbj10aGlzLiRyZWZzLnN1Z2dlc3Rpb25zLiRlbC5xdWVyeVNlbGVjdG9yKCIuZWwtYXV0b2NvbXBsZXRlLXN1Z2dlc3Rpb25fX3dyYXAiKSxoaWdobGlnaHRJdGVtPXN1Z2dlc3Rpb24ucXVlcnlTZWxlY3RvckFsbCgiLmVsLWF1dG9jb21wbGV0ZS1zdWdnZXN0aW9uX19saXN0IGxpIilbaW5kZXhdLHNjcm9sbFRvcD1zdWdnZXN0aW9uLnNjcm9sbFRvcCxvZmZzZXRUb3A9aGlnaGxpZ2h0SXRlbS5vZmZzZXRUb3A7b2Zmc2V0VG9wK2hpZ2hsaWdodEl0ZW0uc2Nyb2xsSGVpZ2h0PnNjcm9sbFRvcCtzdWdnZXN0aW9uLmNsaWVudEhlaWdodCYmKHN1Z2dlc3Rpb24uc2Nyb2xsVG9wKz1oaWdobGlnaHRJdGVtLnNjcm9sbEhlaWdodCksb2Zmc2V0VG9wPHNjcm9sbFRvcCYmKHN1Z2dlc3Rpb24uc2Nyb2xsVG9wLT1oaWdobGlnaHRJdGVtLnNjcm9sbEhlaWdodCksdGhpcy5oaWdobGlnaHRlZEluZGV4PWluZGV4LHRoaXMuZ2V0SW5wdXQoKS5zZXRBdHRyaWJ1dGUoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIsdGhpcy5pZCsiLWl0ZW0tIit0aGlzLmhpZ2hsaWdodGVkSW5kZXgpfX0sZ2V0SW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcmVmcy5pbnB1dC5nZXRJbnB1dCgpfX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczQ9dGhpczt0aGlzLmRlYm91bmNlZEdldERhdGE9ZGVib3VuY2VfZGVmYXVsdCgpKHRoaXMuZGVib3VuY2UsdGhpcy5nZXREYXRhKSx0aGlzLiRvbigiaXRlbS1jbGljayIsZnVuY3Rpb24oaXRlbSl7X3RoaXM0LnNlbGVjdChpdGVtKX0pO3ZhciAkaW5wdXQ9dGhpcy5nZXRJbnB1dCgpOyRpbnB1dC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJ0ZXh0Ym94IiksJGlucHV0LnNldEF0dHJpYnV0ZSgiYXJpYS1hdXRvY29tcGxldGUiLCJsaXN0IiksJGlucHV0LnNldEF0dHJpYnV0ZSgiYXJpYS1jb250cm9scyIsImlkIiksJGlucHV0LnNldEF0dHJpYnV0ZSgiYXJpYS1hY3RpdmVkZXNjZW5kYW50Iix0aGlzLmlkKyItaXRlbS0iK3RoaXMuaGlnaGxpZ2h0ZWRJbmRleCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLiRyZWZzLnN1Z2dlc3Rpb25zLiRkZXN0cm95KCl9fSxhdXRvY29tcGxldGV2dWVfdHlwZV90ZW1wbGF0ZV9pZF8xNTJmMmVlNl9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2F1dG9jb21wbGV0ZV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2F1dG9jb21wbGV0ZS9zcmMvYXV0b2NvbXBsZXRlLnZ1ZSI7dmFyIGF1dG9jb21wbGV0ZT1hdXRvY29tcGxldGVfY29tcG9uZW50LmV4cG9ydHM7YXV0b2NvbXBsZXRlLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGF1dG9jb21wbGV0ZS5uYW1lLGF1dG9jb21wbGV0ZSl9O3ZhciBwYWNrYWdlc19hdXRvY29tcGxldGU9YXV0b2NvbXBsZXRlLGJ1dHRvbl89X193ZWJwYWNrX3JlcXVpcmVfXygxNSksYnV0dG9uX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGJ1dHRvbl8pLGJ1dHRvbl9ncm91cF89X193ZWJwYWNrX3JlcXVpcmVfXygzMyksYnV0dG9uX2dyb3VwX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGJ1dHRvbl9ncm91cF8pLGRyb3Bkb3duX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsRHJvcGRvd24iLGNvbXBvbmVudE5hbWU6IkVsRHJvcGRvd24iLG1peGluczpbZW1pdHRlcl9kZWZhdWx0LmEsbWlncmF0aW5nX2RlZmF1bHQuYV0sZGlyZWN0aXZlczp7Q2xpY2tvdXRzaWRlOmNsaWNrb3V0c2lkZV9kZWZhdWx0LmF9LGNvbXBvbmVudHM6e0VsQnV0dG9uOmJ1dHRvbl9kZWZhdWx0LmEsRWxCdXR0b25Hcm91cDpidXR0b25fZ3JvdXBfZGVmYXVsdC5hfSxwcm92aWRlOmZ1bmN0aW9uKCl7cmV0dXJue2Ryb3Bkb3duOnRoaXN9fSxwcm9wczp7dHJpZ2dlcjp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiaG92ZXIifSx0eXBlOlN0cmluZyxzaXplOnt0eXBlOlN0cmluZyxkZWZhdWx0OiIifSxzcGxpdEJ1dHRvbjpCb29sZWFuLGhpZGVPbkNsaWNrOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0scGxhY2VtZW50Ont0eXBlOlN0cmluZyxkZWZhdWx0OiJib3R0b20tZW5kIn0sdmlzaWJsZUFycm93OntkZWZhdWx0OiEwfSxzaG93VGltZW91dDp7dHlwZTpOdW1iZXIsZGVmYXVsdDoyNTB9LGhpZGVUaW1lb3V0Ont0eXBlOk51bWJlcixkZWZhdWx0OjE1MH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGltZW91dDpudWxsLHZpc2libGU6ITEsdHJpZ2dlckVsbTpudWxsLG1lbnVJdGVtczpudWxsLG1lbnVJdGVtc0FycmF5Om51bGwsZHJvcGRvd25FbG06bnVsbCxmb2N1c2luZzohMSxsaXN0SWQ6ImRyb3Bkb3duLW1lbnUtIitPYmplY3QodXRpbF8uZ2VuZXJhdGVJZCkoKX19LGNvbXB1dGVkOntkcm9wZG93blNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfHwodGhpcy4kRUxFTUVOVHx8e30pLnNpemV9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy4kb24oIm1lbnUtaXRlbS1jbGljayIsdGhpcy5oYW5kbGVNZW51SXRlbUNsaWNrKSx0aGlzLmluaXRFdmVudCgpLHRoaXMuaW5pdEFyaWEoKX0sd2F0Y2g6e3Zpc2libGU6ZnVuY3Rpb24odmFsKXt0aGlzLmJyb2FkY2FzdCgiRWxEcm9wZG93bk1lbnUiLCJ2aXNpYmxlIix2YWwpLHRoaXMuJGVtaXQoInZpc2libGUtY2hhbmdlIix2YWwpfSxmb2N1c2luZzpmdW5jdGlvbih2YWwpe3ZhciBzZWxmRGVmaW5lPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoIi5lbC1kcm9wZG93bi1zZWxmZGVmaW5lIik7c2VsZkRlZmluZSYmKHZhbD9zZWxmRGVmaW5lLmNsYXNzTmFtZSs9IiBmb2N1c2luZyI6c2VsZkRlZmluZS5jbGFzc05hbWU9c2VsZkRlZmluZS5jbGFzc05hbWUucmVwbGFjZSgiZm9jdXNpbmciLCIiKSl9fSxtZXRob2RzOntnZXRNaWdyYXRpbmdDb25maWc6ZnVuY3Rpb24oKXtyZXR1cm57cHJvcHM6eyJtZW51LWFsaWduIjoibWVudS1hbGlnbiBpcyByZW5hbWVkIHRvIHBsYWNlbWVudC4ifX19LHNob3c6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLnRyaWdnZXJFbG0uZGlzYWJsZWR8fChjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe190aGlzLnZpc2libGU9ITB9LCJjbGljayI9PT10aGlzLnRyaWdnZXI/MDp0aGlzLnNob3dUaW1lb3V0KSl9LGhpZGU6ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXM7dGhpcy50cmlnZ2VyRWxtLmRpc2FibGVkfHwodGhpcy5yZW1vdmVUYWJpbmRleCgpLHRoaXMucmVzZXRUYWJpbmRleCh0aGlzLnRyaWdnZXJFbG0pLGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMyLnZpc2libGU9ITF9LCJjbGljayI9PT10aGlzLnRyaWdnZXI/MDp0aGlzLmhpZGVUaW1lb3V0KSl9LGhhbmRsZUNsaWNrOmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyRWxtLmRpc2FibGVkfHwodGhpcy52aXNpYmxlP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpKX0saGFuZGxlVHJpZ2dlcktleURvd246ZnVuY3Rpb24oZXYpe3ZhciBrZXlDb2RlPWV2LmtleUNvZGU7LTE8WzM4LDQwXS5pbmRleE9mKGtleUNvZGUpPyh0aGlzLnJlbW92ZVRhYmluZGV4KCksdGhpcy5yZXNldFRhYmluZGV4KHRoaXMubWVudUl0ZW1zWzBdKSx0aGlzLm1lbnVJdGVtc1swXS5mb2N1cygpLGV2LnByZXZlbnREZWZhdWx0KCksZXYuc3RvcFByb3BhZ2F0aW9uKCkpOjEzPT09a2V5Q29kZT90aGlzLmhhbmRsZUNsaWNrKCk6LTE8WzksMjddLmluZGV4T2Yoa2V5Q29kZSkmJnRoaXMuaGlkZSgpfSxoYW5kbGVJdGVtS2V5RG93bjpmdW5jdGlvbihldil7dmFyIGtleUNvZGU9ZXYua2V5Q29kZSx0YXJnZXQ9ZXYudGFyZ2V0LGN1cnJlbnRJbmRleD10aGlzLm1lbnVJdGVtc0FycmF5LmluZGV4T2YodGFyZ2V0KSxtYXg9dGhpcy5tZW51SXRlbXNBcnJheS5sZW5ndGgtMSxuZXh0SW5kZXg9dm9pZCAwOy0xPFszOCw0MF0uaW5kZXhPZihrZXlDb2RlKT8obmV4dEluZGV4PTM4PT09a2V5Q29kZT8wIT09Y3VycmVudEluZGV4P2N1cnJlbnRJbmRleC0xOjA6Y3VycmVudEluZGV4PG1heD9jdXJyZW50SW5kZXgrMTptYXgsdGhpcy5yZW1vdmVUYWJpbmRleCgpLHRoaXMucmVzZXRUYWJpbmRleCh0aGlzLm1lbnVJdGVtc1tuZXh0SW5kZXhdKSx0aGlzLm1lbnVJdGVtc1tuZXh0SW5kZXhdLmZvY3VzKCksZXYucHJldmVudERlZmF1bHQoKSxldi5zdG9wUHJvcGFnYXRpb24oKSk6MTM9PT1rZXlDb2RlPyh0aGlzLnRyaWdnZXJFbG0uZm9jdXMoKSx0YXJnZXQuY2xpY2soKSx0aGlzLmhpZGVPbkNsaWNrJiYodGhpcy52aXNpYmxlPSExKSk6LTE8WzksMjddLmluZGV4T2Yoa2V5Q29kZSkmJih0aGlzLmhpZGUoKSx0aGlzLnRyaWdnZXJFbG0uZm9jdXMoKSl9LHJlc2V0VGFiaW5kZXg6ZnVuY3Rpb24oZWxlKXt0aGlzLnJlbW92ZVRhYmluZGV4KCksZWxlLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCIwIil9LHJlbW92ZVRhYmluZGV4OmZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyRWxtLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCItMSIpLHRoaXMubWVudUl0ZW1zQXJyYXkuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtpdGVtLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCItMSIpfSl9LGluaXRBcmlhOmZ1bmN0aW9uKCl7dGhpcy5kcm9wZG93bkVsbS5zZXRBdHRyaWJ1dGUoImlkIix0aGlzLmxpc3RJZCksdGhpcy50cmlnZ2VyRWxtLnNldEF0dHJpYnV0ZSgiYXJpYS1oYXNwb3B1cCIsImxpc3QiKSx0aGlzLnRyaWdnZXJFbG0uc2V0QXR0cmlidXRlKCJhcmlhLWNvbnRyb2xzIix0aGlzLmxpc3RJZCksdGhpcy5tZW51SXRlbXM9dGhpcy5kcm9wZG93bkVsbS5xdWVyeVNlbGVjdG9yQWxsKCJbdGFiaW5kZXg9Jy0xJ10iKSx0aGlzLm1lbnVJdGVtc0FycmF5PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMubWVudUl0ZW1zKSx0aGlzLnNwbGl0QnV0dG9ufHwodGhpcy50cmlnZ2VyRWxtLnNldEF0dHJpYnV0ZSgicm9sZSIsImJ1dHRvbiIpLHRoaXMudHJpZ2dlckVsbS5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwiMCIpLHRoaXMudHJpZ2dlckVsbS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwodGhpcy50cmlnZ2VyRWxtLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgZWwtZHJvcGRvd24tc2VsZmRlZmluZSIpKX0saW5pdEV2ZW50OmZ1bmN0aW9uKCl7dmFyIF90aGlzMz10aGlzLHRyaWdnZXI9dGhpcy50cmlnZ2VyLHNob3c9dGhpcy5zaG93LGhpZGU9dGhpcy5oaWRlLGhhbmRsZUNsaWNrPXRoaXMuaGFuZGxlQ2xpY2ssc3BsaXRCdXR0b249dGhpcy5zcGxpdEJ1dHRvbixoYW5kbGVUcmlnZ2VyS2V5RG93bj10aGlzLmhhbmRsZVRyaWdnZXJLZXlEb3duLGhhbmRsZUl0ZW1LZXlEb3duPXRoaXMuaGFuZGxlSXRlbUtleURvd247dGhpcy50cmlnZ2VyRWxtPXNwbGl0QnV0dG9uP3RoaXMuJHJlZnMudHJpZ2dlci4kZWw6dGhpcy4kc2xvdHMuZGVmYXVsdFswXS5lbG07dmFyIGRyb3Bkb3duRWxtPXRoaXMuZHJvcGRvd25FbG09dGhpcy4kc2xvdHMuZHJvcGRvd25bMF0uZWxtO3RoaXMudHJpZ2dlckVsbS5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIixoYW5kbGVUcmlnZ2VyS2V5RG93biksZHJvcGRvd25FbG0uYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsaGFuZGxlSXRlbUtleURvd24sITApLHNwbGl0QnV0dG9ufHwodGhpcy50cmlnZ2VyRWxtLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIixmdW5jdGlvbigpe190aGlzMy5mb2N1c2luZz0hMH0pLHRoaXMudHJpZ2dlckVsbS5hZGRFdmVudExpc3RlbmVyKCJibHVyIixmdW5jdGlvbigpe190aGlzMy5mb2N1c2luZz0hMX0pLHRoaXMudHJpZ2dlckVsbS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZnVuY3Rpb24oKXtfdGhpczMuZm9jdXNpbmc9ITF9KSksImhvdmVyIj09PXRyaWdnZXI/KHRoaXMudHJpZ2dlckVsbS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIixzaG93KSx0aGlzLnRyaWdnZXJFbG0uYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsaGlkZSksZHJvcGRvd25FbG0uYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsc2hvdyksZHJvcGRvd25FbG0uYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsaGlkZSkpOiJjbGljayI9PT10cmlnZ2VyJiZ0aGlzLnRyaWdnZXJFbG0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGhhbmRsZUNsaWNrKX0saGFuZGxlTWVudUl0ZW1DbGljazpmdW5jdGlvbihjb21tYW5kLGluc3RhbmNlKXt0aGlzLmhpZGVPbkNsaWNrJiYodGhpcy52aXNpYmxlPSExKSx0aGlzLiRlbWl0KCJjb21tYW5kIixjb21tYW5kLGluc3RhbmNlKX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXJFbG0uZm9jdXMmJnRoaXMudHJpZ2dlckVsbS5mb2N1cygpfX0scmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciBfdGhpczQ9dGhpcyxoaWRlPXRoaXMuaGlkZSxzcGxpdEJ1dHRvbj10aGlzLnNwbGl0QnV0dG9uLHR5cGU9dGhpcy50eXBlLGRyb3Bkb3duU2l6ZT10aGlzLmRyb3Bkb3duU2l6ZSx0cmlnZ2VyRWxtPXNwbGl0QnV0dG9uP2goImVsLWJ1dHRvbi1ncm91cCIsW2goImVsLWJ1dHRvbiIse2F0dHJzOnt0eXBlOnR5cGUsc2l6ZTpkcm9wZG93blNpemV9LG5hdGl2ZU9uOntjbGljazpmdW5jdGlvbihldmVudCl7X3RoaXM0LiRlbWl0KCJjbGljayIsZXZlbnQpLGhpZGUoKX19fSxbdGhpcy4kc2xvdHMuZGVmYXVsdF0pLGgoImVsLWJ1dHRvbiIse3JlZjoidHJpZ2dlciIsYXR0cnM6e3R5cGU6dHlwZSxzaXplOmRyb3Bkb3duU2l6ZX0sY2xhc3M6ImVsLWRyb3Bkb3duX19jYXJldC1idXR0b24ifSxbaCgiaSIse2NsYXNzOiJlbC1kcm9wZG93bl9faWNvbiBlbC1pY29uLWFycm93LWRvd24ifSldKV0pOnRoaXMuJHNsb3RzLmRlZmF1bHQ7cmV0dXJuIGgoImRpdiIse2NsYXNzOiJlbC1kcm9wZG93biIsZGlyZWN0aXZlczpbe25hbWU6ImNsaWNrb3V0c2lkZSIsdmFsdWU6aGlkZX1dfSxbdHJpZ2dlckVsbSx0aGlzLiRzbG90cy5kcm9wZG93bl0pfX0sdm9pZCAwLHZvaWQgMCwhMSxudWxsLG51bGwsbnVsbCk7ZHJvcGRvd25fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9kcm9wZG93bi9zcmMvZHJvcGRvd24udnVlIjt2YXIgZHJvcGRvd249ZHJvcGRvd25fY29tcG9uZW50LmV4cG9ydHM7ZHJvcGRvd24uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoZHJvcGRvd24ubmFtZSxkcm9wZG93bil9O3ZhciBwYWNrYWdlc19kcm9wZG93bj1kcm9wZG93bixkcm9wZG93bl9tZW51dnVlX3R5cGVfdGVtcGxhdGVfaWRfMGRhNmI3MTRfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF9oPXRoaXMuJGNyZWF0ZUVsZW1lbnQsX2M9dGhpcy5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6ImVsLXpvb20taW4tdG9wIn0sb246eyJhZnRlci1sZWF2ZSI6dGhpcy5kb0Rlc3Ryb3l9fSxbX2MoInVsIix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6dGhpcy5zaG93UG9wcGVyLGV4cHJlc3Npb246InNob3dQb3BwZXIifV0sc3RhdGljQ2xhc3M6ImVsLWRyb3Bkb3duLW1lbnUgZWwtcG9wcGVyIixjbGFzczpbdGhpcy5zaXplJiYiZWwtZHJvcGRvd24tbWVudS0tIit0aGlzLnNpemVdfSxbdGhpcy5fdCgiZGVmYXVsdCIpXSwyKV0pfTtkcm9wZG93bl9tZW51dnVlX3R5cGVfdGVtcGxhdGVfaWRfMGRhNmI3MTRfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGRyb3Bkb3duX21lbnVfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxEcm9wZG93bk1lbnUiLGNvbXBvbmVudE5hbWU6IkVsRHJvcGRvd25NZW51IixtaXhpbnM6W3Z1ZV9wb3BwZXJfZGVmYXVsdC5hXSxwcm9wczp7dmlzaWJsZUFycm93Ont0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sYXJyb3dPZmZzZXQ6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57c2l6ZTp0aGlzLmRyb3Bkb3duLmRyb3Bkb3duU2l6ZX19LGluamVjdDpbImRyb3Bkb3duIl0sY3JlYXRlZDpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzO3RoaXMuJG9uKCJ1cGRhdGVQb3BwZXIiLGZ1bmN0aW9uKCl7X3RoaXMuc2hvd1BvcHBlciYmX3RoaXMudXBkYXRlUG9wcGVyKCl9KSx0aGlzLiRvbigidmlzaWJsZSIsZnVuY3Rpb24odmFsKXtfdGhpcy5zaG93UG9wcGVyPXZhbH0pfSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy4kcGFyZW50LnBvcHBlckVsbT10aGlzLnBvcHBlckVsbT10aGlzLiRlbCx0aGlzLnJlZmVyZW5jZUVsbT10aGlzLiRwYXJlbnQuJGVsfSx3YXRjaDp7ImRyb3Bkb3duLnBsYWNlbWVudCI6e2ltbWVkaWF0ZTohMCxoYW5kbGVyOmZ1bmN0aW9uKHZhbCl7dGhpcy5jdXJyZW50UGxhY2VtZW50PXZhbH19fX0sZHJvcGRvd25fbWVudXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzBkYTZiNzE0X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7ZHJvcGRvd25fbWVudV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2Ryb3Bkb3duL3NyYy9kcm9wZG93bi1tZW51LnZ1ZSI7dmFyIGRyb3Bkb3duX21lbnU9ZHJvcGRvd25fbWVudV9jb21wb25lbnQuZXhwb3J0cztkcm9wZG93bl9tZW51Lmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGRyb3Bkb3duX21lbnUubmFtZSxkcm9wZG93bl9tZW51KX07dmFyIHBhY2thZ2VzX2Ryb3Bkb3duX21lbnU9ZHJvcGRvd25fbWVudSxkcm9wZG93bl9pdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfNjM1OTEwMmFfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygibGkiLHtzdGF0aWNDbGFzczoiZWwtZHJvcGRvd24tbWVudV9faXRlbSIsY2xhc3M6eyJpcy1kaXNhYmxlZCI6X3ZtLmRpc2FibGVkLCJlbC1kcm9wZG93bi1tZW51X19pdGVtLS1kaXZpZGVkIjpfdm0uZGl2aWRlZH0sYXR0cnM6eyJhcmlhLWRpc2FibGVkIjpfdm0uZGlzYWJsZWQsdGFiaW5kZXg6X3ZtLmRpc2FibGVkP251bGw6LTF9LG9uOntjbGljazpfdm0uaGFuZGxlQ2xpY2t9fSxbX3ZtLmljb24/X2MoImkiLHtjbGFzczpfdm0uaWNvbn0pOl92bS5fZSgpLF92bS5fdCgiZGVmYXVsdCIpXSwyKX07ZHJvcGRvd25faXRlbXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzYzNTkxMDJhX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBkcm9wZG93bl9pdGVtX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsRHJvcGRvd25JdGVtIixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hXSxwcm9wczp7Y29tbWFuZDp7fSxkaXNhYmxlZDpCb29sZWFuLGRpdmlkZWQ6Qm9vbGVhbixpY29uOlN0cmluZ30sbWV0aG9kczp7aGFuZGxlQ2xpY2s6ZnVuY3Rpb24oZSl7dGhpcy5kaXNwYXRjaCgiRWxEcm9wZG93biIsIm1lbnUtaXRlbS1jbGljayIsW3RoaXMuY29tbWFuZCx0aGlzXSl9fX0sZHJvcGRvd25faXRlbXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzYzNTkxMDJhX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7ZHJvcGRvd25faXRlbV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2Ryb3Bkb3duL3NyYy9kcm9wZG93bi1pdGVtLnZ1ZSI7dmFyIGRyb3Bkb3duX2l0ZW09ZHJvcGRvd25faXRlbV9jb21wb25lbnQuZXhwb3J0cztkcm9wZG93bl9pdGVtLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGRyb3Bkb3duX2l0ZW0ubmFtZSxkcm9wZG93bl9pdGVtKX07dmFyIHBhY2thZ2VzX2Ryb3Bkb3duX2l0ZW09ZHJvcGRvd25faXRlbSxhcmlhPWFyaWF8fHt9O2FyaWEuVXRpbHM9YXJpYS5VdGlsc3x8e30sYXJpYS5VdGlscy5mb2N1c0ZpcnN0RGVzY2VuZGFudD1mdW5jdGlvbihlbGVtZW50KXtmb3IodmFyIGk9MDtpPGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXt2YXIgY2hpbGQ9ZWxlbWVudC5jaGlsZE5vZGVzW2ldO2lmKGFyaWEuVXRpbHMuYXR0ZW1wdEZvY3VzKGNoaWxkKXx8YXJpYS5VdGlscy5mb2N1c0ZpcnN0RGVzY2VuZGFudChjaGlsZCkpcmV0dXJuITB9cmV0dXJuITF9LGFyaWEuVXRpbHMuZm9jdXNMYXN0RGVzY2VuZGFudD1mdW5jdGlvbihlbGVtZW50KXtmb3IodmFyIGk9ZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aC0xOzA8PWk7aS0tKXt2YXIgY2hpbGQ9ZWxlbWVudC5jaGlsZE5vZGVzW2ldO2lmKGFyaWEuVXRpbHMuYXR0ZW1wdEZvY3VzKGNoaWxkKXx8YXJpYS5VdGlscy5mb2N1c0xhc3REZXNjZW5kYW50KGNoaWxkKSlyZXR1cm4hMH1yZXR1cm4hMX0sYXJpYS5VdGlscy5hdHRlbXB0Rm9jdXM9ZnVuY3Rpb24oZWxlbWVudCl7aWYoIWFyaWEuVXRpbHMuaXNGb2N1c2FibGUoZWxlbWVudCkpcmV0dXJuITE7YXJpYS5VdGlscy5JZ25vcmVVdGlsRm9jdXNDaGFuZ2VzPSEwO3RyeXtlbGVtZW50LmZvY3VzKCl9Y2F0Y2goZSl7fXJldHVybiBhcmlhLlV0aWxzLklnbm9yZVV0aWxGb2N1c0NoYW5nZXM9ITEsZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09PWVsZW1lbnR9LGFyaWEuVXRpbHMuaXNGb2N1c2FibGU9ZnVuY3Rpb24oZWxlbWVudCl7aWYoMDxlbGVtZW50LnRhYkluZGV4fHwwPT09ZWxlbWVudC50YWJJbmRleCYmbnVsbCE9PWVsZW1lbnQuZ2V0QXR0cmlidXRlKCJ0YWJJbmRleCIpKXJldHVybiEwO2lmKGVsZW1lbnQuZGlzYWJsZWQpcmV0dXJuITE7c3dpdGNoKGVsZW1lbnQubm9kZU5hbWUpe2Nhc2UiQSI6cmV0dXJuISFlbGVtZW50LmhyZWYmJiJpZ25vcmUiIT09ZWxlbWVudC5yZWw7Y2FzZSJJTlBVVCI6cmV0dXJuImhpZGRlbiIhPT1lbGVtZW50LnR5cGUmJiJmaWxlIiE9PWVsZW1lbnQudHlwZTtjYXNlIkJVVFRPTiI6Y2FzZSJTRUxFQ1QiOmNhc2UiVEVYVEFSRUEiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxhcmlhLlV0aWxzLnRyaWdnZXJFdmVudD1mdW5jdGlvbihlbG0sbmFtZSl7dmFyIGV2ZW50TmFtZT12b2lkIDA7ZXZlbnROYW1lPS9ebW91c2V8Y2xpY2svLnRlc3QobmFtZSk/Ik1vdXNlRXZlbnRzIjovXmtleS8udGVzdChuYW1lKT8iS2V5Ym9hcmRFdmVudCI6IkhUTUxFdmVudHMiO2Zvcih2YXIgZXZ0PWRvY3VtZW50LmNyZWF0ZUV2ZW50KGV2ZW50TmFtZSksX2xlbj1hcmd1bWVudHMubGVuZ3RoLG9wdHM9QXJyYXkoMjxfbGVuP19sZW4tMjowKSxfa2V5PTI7X2tleTxfbGVuO19rZXkrKylvcHRzW19rZXktMl09YXJndW1lbnRzW19rZXldO3JldHVybiBldnQuaW5pdEV2ZW50LmFwcGx5KGV2dCxbbmFtZV0uY29uY2F0KG9wdHMpKSxlbG0uZGlzcGF0Y2hFdmVudD9lbG0uZGlzcGF0Y2hFdmVudChldnQpOmVsbS5maXJlRXZlbnQoIm9uIituYW1lLGV2dCksZWxtfSxhcmlhLlV0aWxzLmtleXM9e3RhYjo5LGVudGVyOjEzLHNwYWNlOjMyLGxlZnQ6MzcsdXA6MzgscmlnaHQ6MzksZG93bjo0MH07dmFyIGFyaWFfdXRpbHM9YXJpYS5VdGlscyxTdWJNZW51PWZ1bmN0aW9uKHBhcmVudCxkb21Ob2RlKXt0aGlzLmRvbU5vZGU9ZG9tTm9kZSx0aGlzLnBhcmVudD1wYXJlbnQsdGhpcy5zdWJNZW51SXRlbXM9W10sdGhpcy5zdWJJbmRleD0wLHRoaXMuaW5pdCgpfTtTdWJNZW51LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5zdWJNZW51SXRlbXM9dGhpcy5kb21Ob2RlLnF1ZXJ5U2VsZWN0b3JBbGwoImxpIiksdGhpcy5hZGRMaXN0ZW5lcnMoKX0sU3ViTWVudS5wcm90b3R5cGUuZ290b1N1YkluZGV4PWZ1bmN0aW9uKGlkeCl7aWR4PT09dGhpcy5zdWJNZW51SXRlbXMubGVuZ3RoP2lkeD0wOmlkeDwwJiYoaWR4PXRoaXMuc3ViTWVudUl0ZW1zLmxlbmd0aC0xKSx0aGlzLnN1Yk1lbnVJdGVtc1tpZHhdLmZvY3VzKCksdGhpcy5zdWJJbmRleD1pZHh9LFN1Yk1lbnUucHJvdG90eXBlLmFkZExpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzLGtleXM9YXJpYV91dGlscy5rZXlzLHBhcmVudE5vZGU9dGhpcy5wYXJlbnQuZG9tTm9kZTtBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuc3ViTWVudUl0ZW1zLGZ1bmN0aW9uKGVsKXtlbC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIixmdW5jdGlvbihldmVudCl7dmFyIHByZXZEZWY9ITE7c3dpdGNoKGV2ZW50LmtleUNvZGUpe2Nhc2Uga2V5cy5kb3duOl90aGlzLmdvdG9TdWJJbmRleChfdGhpcy5zdWJJbmRleCsxKSxwcmV2RGVmPSEwO2JyZWFrO2Nhc2Uga2V5cy51cDpfdGhpcy5nb3RvU3ViSW5kZXgoX3RoaXMuc3ViSW5kZXgtMSkscHJldkRlZj0hMDticmVhaztjYXNlIGtleXMudGFiOmFyaWFfdXRpbHMudHJpZ2dlckV2ZW50KHBhcmVudE5vZGUsIm1vdXNlbGVhdmUiKTticmVhaztjYXNlIGtleXMuZW50ZXI6Y2FzZSBrZXlzLnNwYWNlOnByZXZEZWY9ITAsZXZlbnQuY3VycmVudFRhcmdldC5jbGljaygpfXJldHVybiBwcmV2RGVmJiYoZXZlbnQucHJldmVudERlZmF1bHQoKSxldmVudC5zdG9wUHJvcGFnYXRpb24oKSksITF9KX0pfTt2YXIgYXJpYV9zdWJtZW51PVN1Yk1lbnUsTWVudUl0ZW09ZnVuY3Rpb24oZG9tTm9kZSl7dGhpcy5kb21Ob2RlPWRvbU5vZGUsdGhpcy5zdWJtZW51PW51bGwsdGhpcy5pbml0KCl9O01lbnVJdGVtLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5kb21Ob2RlLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCIwIik7dmFyIG1lbnVDaGlsZD10aGlzLmRvbU5vZGUucXVlcnlTZWxlY3RvcigiLmVsLW1lbnUiKTttZW51Q2hpbGQmJih0aGlzLnN1Ym1lbnU9bmV3IGFyaWFfc3VibWVudSh0aGlzLG1lbnVDaGlsZCkpLHRoaXMuYWRkTGlzdGVuZXJzKCl9LE1lbnVJdGVtLnByb3RvdHlwZS5hZGRMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpcyxrZXlzPWFyaWFfdXRpbHMua2V5czt0aGlzLmRvbU5vZGUuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsZnVuY3Rpb24oZXZlbnQpe3ZhciBwcmV2RGVmPSExO3N3aXRjaChldmVudC5rZXlDb2RlKXtjYXNlIGtleXMuZG93bjphcmlhX3V0aWxzLnRyaWdnZXJFdmVudChldmVudC5jdXJyZW50VGFyZ2V0LCJtb3VzZWVudGVyIiksX3RoaXMuc3VibWVudSYmX3RoaXMuc3VibWVudS5nb3RvU3ViSW5kZXgoMCkscHJldkRlZj0hMDticmVhaztjYXNlIGtleXMudXA6YXJpYV91dGlscy50cmlnZ2VyRXZlbnQoZXZlbnQuY3VycmVudFRhcmdldCwibW91c2VlbnRlciIpLF90aGlzLnN1Ym1lbnUmJl90aGlzLnN1Ym1lbnUuZ290b1N1YkluZGV4KF90aGlzLnN1Ym1lbnUuc3ViTWVudUl0ZW1zLmxlbmd0aC0xKSxwcmV2RGVmPSEwO2JyZWFrO2Nhc2Uga2V5cy50YWI6YXJpYV91dGlscy50cmlnZ2VyRXZlbnQoZXZlbnQuY3VycmVudFRhcmdldCwibW91c2VsZWF2ZSIpO2JyZWFrO2Nhc2Uga2V5cy5lbnRlcjpjYXNlIGtleXMuc3BhY2U6cHJldkRlZj0hMCxldmVudC5jdXJyZW50VGFyZ2V0LmNsaWNrKCl9cHJldkRlZiYmZXZlbnQucHJldmVudERlZmF1bHQoKX0pfTt2YXIgYXJpYV9tZW51aXRlbT1NZW51SXRlbSxNZW51PWZ1bmN0aW9uKGRvbU5vZGUpe3RoaXMuZG9tTm9kZT1kb21Ob2RlLHRoaXMuaW5pdCgpfTtNZW51LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dmFyIG1lbnVDaGlsZHJlbj10aGlzLmRvbU5vZGUuY2hpbGROb2RlcztbXS5maWx0ZXIuY2FsbChtZW51Q2hpbGRyZW4sZnVuY3Rpb24oY2hpbGQpe3JldHVybiAxPT09Y2hpbGQubm9kZVR5cGV9KS5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKXtuZXcgYXJpYV9tZW51aXRlbShjaGlsZCl9KX07dmFyIGFyaWFfbWVudWJhcj1NZW51LGRvbV89X193ZWJwYWNrX3JlcXVpcmVfXygwKSxtZW51X2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsTWVudSIscmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciBjb21wb25lbnQ9aCgidWwiLHthdHRyczp7cm9sZToibWVudWJhciJ9LGtleTordGhpcy5jb2xsYXBzZSxzdHlsZTp7YmFja2dyb3VuZENvbG9yOnRoaXMuYmFja2dyb3VuZENvbG9yfHwiIn0sY2xhc3M6eyJlbC1tZW51LS1ob3Jpem9udGFsIjoiaG9yaXpvbnRhbCI9PT10aGlzLm1vZGUsImVsLW1lbnUtLWNvbGxhcHNlIjp0aGlzLmNvbGxhcHNlLCJlbC1tZW51IjohMH19LFt0aGlzLiRzbG90cy5kZWZhdWx0XSk7cmV0dXJuIHRoaXMuY29sbGFwc2VUcmFuc2l0aW9uP2goImVsLW1lbnUtY29sbGFwc2UtdHJhbnNpdGlvbiIsW2NvbXBvbmVudF0pOmNvbXBvbmVudH0sY29tcG9uZW50TmFtZToiRWxNZW51IixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hLG1pZ3JhdGluZ19kZWZhdWx0LmFdLHByb3ZpZGU6ZnVuY3Rpb24oKXtyZXR1cm57cm9vdE1lbnU6dGhpc319LGNvbXBvbmVudHM6eyJlbC1tZW51LWNvbGxhcHNlLXRyYW5zaXRpb24iOntmdW5jdGlvbmFsOiEwLHJlbmRlcjpmdW5jdGlvbihjcmVhdGVFbGVtZW50LGNvbnRleHQpe3JldHVybiBjcmVhdGVFbGVtZW50KCJ0cmFuc2l0aW9uIix7cHJvcHM6e21vZGU6Im91dC1pbiJ9LG9uOntiZWZvcmVFbnRlcjpmdW5jdGlvbihlbCl7ZWwuc3R5bGUub3BhY2l0eT0uMn0sZW50ZXI6ZnVuY3Rpb24oZWwpe09iamVjdChkb21fLmFkZENsYXNzKShlbCwiZWwtb3BhY2l0eS10cmFuc2l0aW9uIiksZWwuc3R5bGUub3BhY2l0eT0xfSxhZnRlckVudGVyOmZ1bmN0aW9uKGVsKXtPYmplY3QoZG9tXy5yZW1vdmVDbGFzcykoZWwsImVsLW9wYWNpdHktdHJhbnNpdGlvbiIpLGVsLnN0eWxlLm9wYWNpdHk9IiJ9LGJlZm9yZUxlYXZlOmZ1bmN0aW9uKGVsKXtlbC5kYXRhc2V0fHwoZWwuZGF0YXNldD17fSksT2JqZWN0KGRvbV8uaGFzQ2xhc3MpKGVsLCJlbC1tZW51LS1jb2xsYXBzZSIpPyhPYmplY3QoZG9tXy5yZW1vdmVDbGFzcykoZWwsImVsLW1lbnUtLWNvbGxhcHNlIiksZWwuZGF0YXNldC5vbGRPdmVyZmxvdz1lbC5zdHlsZS5vdmVyZmxvdyxlbC5kYXRhc2V0LnNjcm9sbFdpZHRoPWVsLmNsaWVudFdpZHRoLE9iamVjdChkb21fLmFkZENsYXNzKShlbCwiZWwtbWVudS0tY29sbGFwc2UiKSk6KE9iamVjdChkb21fLmFkZENsYXNzKShlbCwiZWwtbWVudS0tY29sbGFwc2UiKSxlbC5kYXRhc2V0Lm9sZE92ZXJmbG93PWVsLnN0eWxlLm92ZXJmbG93LGVsLmRhdGFzZXQuc2Nyb2xsV2lkdGg9ZWwuY2xpZW50V2lkdGgsT2JqZWN0KGRvbV8ucmVtb3ZlQ2xhc3MpKGVsLCJlbC1tZW51LS1jb2xsYXBzZSIpKSxlbC5zdHlsZS53aWR0aD1lbC5zY3JvbGxXaWR0aCsicHgiLGVsLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4ifSxsZWF2ZTpmdW5jdGlvbihlbCl7T2JqZWN0KGRvbV8uYWRkQ2xhc3MpKGVsLCJob3Jpem9udGFsLWNvbGxhcHNlLXRyYW5zaXRpb24iKSxlbC5zdHlsZS53aWR0aD1lbC5kYXRhc2V0LnNjcm9sbFdpZHRoKyJweCJ9fX0sY29udGV4dC5jaGlsZHJlbil9fX0scHJvcHM6e21vZGU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6InZlcnRpY2FsIn0sZGVmYXVsdEFjdGl2ZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn0sZGVmYXVsdE9wZW5lZHM6QXJyYXksdW5pcXVlT3BlbmVkOkJvb2xlYW4scm91dGVyOkJvb2xlYW4sbWVudVRyaWdnZXI6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImhvdmVyIn0sY29sbGFwc2U6Qm9vbGVhbixiYWNrZ3JvdW5kQ29sb3I6U3RyaW5nLHRleHRDb2xvcjpTdHJpbmcsYWN0aXZlVGV4dENvbG9yOlN0cmluZyxjb2xsYXBzZVRyYW5zaXRpb246e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybnthY3RpdmVJbmRleDp0aGlzLmRlZmF1bHRBY3RpdmUsb3BlbmVkTWVudXM6dGhpcy5kZWZhdWx0T3BlbmVkcyYmIXRoaXMuY29sbGFwc2U/dGhpcy5kZWZhdWx0T3BlbmVkcy5zbGljZSgwKTpbXSxpdGVtczp7fSxzdWJtZW51czp7fX19LGNvbXB1dGVkOntob3ZlckJhY2tncm91bmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iYWNrZ3JvdW5kQ29sb3I/dGhpcy5taXhDb2xvcih0aGlzLmJhY2tncm91bmRDb2xvciwuMik6IiJ9LGlzTWVudVBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuImhvcml6b250YWwiPT09dGhpcy5tb2RlfHwidmVydGljYWwiPT09dGhpcy5tb2RlJiZ0aGlzLmNvbGxhcHNlfX0sd2F0Y2g6e2RlZmF1bHRBY3RpdmU6InVwZGF0ZUFjdGl2ZUluZGV4IixkZWZhdWx0T3BlbmVkczpmdW5jdGlvbih2YWx1ZSl7dGhpcy5jb2xsYXBzZXx8KHRoaXMub3BlbmVkTWVudXM9dmFsdWUpfSxjb2xsYXBzZTpmdW5jdGlvbih2YWx1ZSl7dmFsdWUmJih0aGlzLm9wZW5lZE1lbnVzPVtdKSx0aGlzLmJyb2FkY2FzdCgiRWxTdWJtZW51IiwidG9nZ2xlLWNvbGxhcHNlIix2YWx1ZSl9fSxtZXRob2RzOnt1cGRhdGVBY3RpdmVJbmRleDpmdW5jdGlvbih2YWwpe3ZhciBpdGVtPXRoaXMuaXRlbXNbdmFsXXx8dGhpcy5pdGVtc1t0aGlzLmFjdGl2ZUluZGV4XXx8dGhpcy5pdGVtc1t0aGlzLmRlZmF1bHRBY3RpdmVdO2l0ZW0/KHRoaXMuYWN0aXZlSW5kZXg9aXRlbS5pbmRleCx0aGlzLmluaXRPcGVuZWRNZW51KCkpOnRoaXMuYWN0aXZlSW5kZXg9bnVsbH0sZ2V0TWlncmF0aW5nQ29uZmlnOmZ1bmN0aW9uKCl7cmV0dXJue3Byb3BzOnt0aGVtZToidGhlbWUgaXMgcmVtb3ZlZC4ifX19LGdldENvbG9yQ2hhbm5lbHM6ZnVuY3Rpb24oY29sb3Ipe2lmKGNvbG9yPWNvbG9yLnJlcGxhY2UoIiMiLCIiKSwvXlswLTlhLWZBLUZdezN9JC8udGVzdChjb2xvcikpe2NvbG9yPWNvbG9yLnNwbGl0KCIiKTtmb3IodmFyIGk9MjswPD1pO2ktLSljb2xvci5zcGxpY2UoaSwwLGNvbG9yW2ldKTtjb2xvcj1jb2xvci5qb2luKCIiKX1yZXR1cm4vXlswLTlhLWZBLUZdezZ9JC8udGVzdChjb2xvcik/e3JlZDpwYXJzZUludChjb2xvci5zbGljZSgwLDIpLDE2KSxncmVlbjpwYXJzZUludChjb2xvci5zbGljZSgyLDQpLDE2KSxibHVlOnBhcnNlSW50KGNvbG9yLnNsaWNlKDQsNiksMTYpfTp7cmVkOjI1NSxncmVlbjoyNTUsYmx1ZToyNTV9fSxtaXhDb2xvcjpmdW5jdGlvbihjb2xvcixwZXJjZW50KXt2YXIgX2dldENvbG9yQ2hhbm5lbHM9dGhpcy5nZXRDb2xvckNoYW5uZWxzKGNvbG9yKSxyZWQ9X2dldENvbG9yQ2hhbm5lbHMucmVkLGdyZWVuPV9nZXRDb2xvckNoYW5uZWxzLmdyZWVuLGJsdWU9X2dldENvbG9yQ2hhbm5lbHMuYmx1ZTtyZXR1cm4gMDxwZXJjZW50PyhyZWQqPTEtcGVyY2VudCxncmVlbio9MS1wZXJjZW50LGJsdWUqPTEtcGVyY2VudCk6KHJlZCs9KDI1NS1yZWQpKnBlcmNlbnQsZ3JlZW4rPSgyNTUtZ3JlZW4pKnBlcmNlbnQsYmx1ZSs9KDI1NS1ibHVlKSpwZXJjZW50KSwicmdiKCIrTWF0aC5yb3VuZChyZWQpKyIsICIrTWF0aC5yb3VuZChncmVlbikrIiwgIitNYXRoLnJvdW5kKGJsdWUpKyIpIn0sYWRkSXRlbTpmdW5jdGlvbihpdGVtKXt0aGlzLiRzZXQodGhpcy5pdGVtcyxpdGVtLmluZGV4LGl0ZW0pfSxyZW1vdmVJdGVtOmZ1bmN0aW9uKGl0ZW0pe2RlbGV0ZSB0aGlzLml0ZW1zW2l0ZW0uaW5kZXhdfSxhZGRTdWJtZW51OmZ1bmN0aW9uKGl0ZW0pe3RoaXMuJHNldCh0aGlzLnN1Ym1lbnVzLGl0ZW0uaW5kZXgsaXRlbSl9LHJlbW92ZVN1Ym1lbnU6ZnVuY3Rpb24oaXRlbSl7ZGVsZXRlIHRoaXMuc3VibWVudXNbaXRlbS5pbmRleF19LG9wZW5NZW51OmZ1bmN0aW9uKGluZGV4LGluZGV4UGF0aCl7dmFyIG9wZW5lZE1lbnVzPXRoaXMub3BlbmVkTWVudXM7LTE9PT1vcGVuZWRNZW51cy5pbmRleE9mKGluZGV4KSYmKHRoaXMudW5pcXVlT3BlbmVkJiYodGhpcy5vcGVuZWRNZW51cz1vcGVuZWRNZW51cy5maWx0ZXIoZnVuY3Rpb24oaW5kZXgpe3JldHVybi0xIT09aW5kZXhQYXRoLmluZGV4T2YoaW5kZXgpfSkpLHRoaXMub3BlbmVkTWVudXMucHVzaChpbmRleCkpfSxjbG9zZU1lbnU6ZnVuY3Rpb24oaW5kZXgpe3ZhciBpPXRoaXMub3BlbmVkTWVudXMuaW5kZXhPZihpbmRleCk7LTEhPT1pJiZ0aGlzLm9wZW5lZE1lbnVzLnNwbGljZShpLDEpfSxoYW5kbGVTdWJtZW51Q2xpY2s6ZnVuY3Rpb24oc3VibWVudSl7dmFyIGluZGV4PXN1Ym1lbnUuaW5kZXgsaW5kZXhQYXRoPXN1Ym1lbnUuaW5kZXhQYXRoOy0xIT09dGhpcy5vcGVuZWRNZW51cy5pbmRleE9mKGluZGV4KT8odGhpcy5jbG9zZU1lbnUoaW5kZXgpLHRoaXMuJGVtaXQoImNsb3NlIixpbmRleCxpbmRleFBhdGgpKToodGhpcy5vcGVuTWVudShpbmRleCxpbmRleFBhdGgpLHRoaXMuJGVtaXQoIm9wZW4iLGluZGV4LGluZGV4UGF0aCkpfSxoYW5kbGVJdGVtQ2xpY2s6ZnVuY3Rpb24oaXRlbSl7dmFyIF90aGlzPXRoaXMsaW5kZXg9aXRlbS5pbmRleCxpbmRleFBhdGg9aXRlbS5pbmRleFBhdGgsb2xkQWN0aXZlSW5kZXg9dGhpcy5hY3RpdmVJbmRleCxoYXNJbmRleD1udWxsIT09aXRlbS5pbmRleDtoYXNJbmRleCYmKHRoaXMuYWN0aXZlSW5kZXg9aXRlbS5pbmRleCksdGhpcy4kZW1pdCgic2VsZWN0IixpbmRleCxpbmRleFBhdGgsaXRlbSksKCJob3Jpem9udGFsIj09PXRoaXMubW9kZXx8dGhpcy5jb2xsYXBzZSkmJih0aGlzLm9wZW5lZE1lbnVzPVtdKSx0aGlzLnJvdXRlciYmaGFzSW5kZXgmJnRoaXMucm91dGVUb0l0ZW0oaXRlbSxmdW5jdGlvbihlcnJvcil7X3RoaXMuYWN0aXZlSW5kZXg9b2xkQWN0aXZlSW5kZXgsZXJyb3ImJmNvbnNvbGUuZXJyb3IoZXJyb3IpfSl9LGluaXRPcGVuZWRNZW51OmZ1bmN0aW9uKCl7dmFyIF90aGlzMj10aGlzLGluZGV4PXRoaXMuYWN0aXZlSW5kZXgsYWN0aXZlSXRlbT10aGlzLml0ZW1zW2luZGV4XTthY3RpdmVJdGVtJiYiaG9yaXpvbnRhbCIhPT10aGlzLm1vZGUmJiF0aGlzLmNvbGxhcHNlJiZhY3RpdmVJdGVtLmluZGV4UGF0aC5mb3JFYWNoKGZ1bmN0aW9uKGluZGV4KXt2YXIgc3VibWVudT1fdGhpczIuc3VibWVudXNbaW5kZXhdO3N1Ym1lbnUmJl90aGlzMi5vcGVuTWVudShpbmRleCxzdWJtZW51LmluZGV4UGF0aCl9KX0scm91dGVUb0l0ZW06ZnVuY3Rpb24oaXRlbSxvbkVycm9yKXt2YXIgcm91dGU9aXRlbS5yb3V0ZXx8aXRlbS5pbmRleDt0cnl7dGhpcy4kcm91dGVyLnB1c2gocm91dGUsZnVuY3Rpb24oKXt9LG9uRXJyb3IpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9fSxvcGVuOmZ1bmN0aW9uKGluZGV4KXt2YXIgX3RoaXMzPXRoaXMsaW5kZXhQYXRoPXRoaXMuc3VibWVudXNbaW5kZXgudG9TdHJpbmcoKV0uaW5kZXhQYXRoO2luZGV4UGF0aC5mb3JFYWNoKGZ1bmN0aW9uKGkpe3JldHVybiBfdGhpczMub3Blbk1lbnUoaSxpbmRleFBhdGgpfSl9LGNsb3NlOmZ1bmN0aW9uKGluZGV4KXt0aGlzLmNsb3NlTWVudShpbmRleCl9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy5pbml0T3BlbmVkTWVudSgpLHRoaXMuJG9uKCJpdGVtLWNsaWNrIix0aGlzLmhhbmRsZUl0ZW1DbGljayksdGhpcy4kb24oInN1Ym1lbnUtY2xpY2siLHRoaXMuaGFuZGxlU3VibWVudUNsaWNrKSwiaG9yaXpvbnRhbCI9PT10aGlzLm1vZGUmJm5ldyBhcmlhX21lbnViYXIodGhpcy4kZWwpLHRoaXMuJHdhdGNoKCJpdGVtcyIsdGhpcy51cGRhdGVBY3RpdmVJbmRleCl9fSx2b2lkIDAsdm9pZCAwLCExLG51bGwsbnVsbCxudWxsKTttZW51X2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvbWVudS9zcmMvbWVudS52dWUiO3ZhciBzcmNfbWVudT1tZW51X2NvbXBvbmVudC5leHBvcnRzO3NyY19tZW51Lmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHNyY19tZW51Lm5hbWUsc3JjX21lbnUpfTt2YXIgcGFja2FnZXNfbWVudT1zcmNfbWVudSxjb2xsYXBzZV90cmFuc2l0aW9uXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDE3KSxjb2xsYXBzZV90cmFuc2l0aW9uX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGNvbGxhcHNlX3RyYW5zaXRpb25fKSxtZW51X21peGluPXtpbmplY3Q6WyJyb290TWVudSJdLGNvbXB1dGVkOntpbmRleFBhdGg6ZnVuY3Rpb24oKXtmb3IodmFyIHBhdGg9W3RoaXMuaW5kZXhdLHBhcmVudD10aGlzLiRwYXJlbnQ7IkVsTWVudSIhPT1wYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZTspcGFyZW50LmluZGV4JiZwYXRoLnVuc2hpZnQocGFyZW50LmluZGV4KSxwYXJlbnQ9cGFyZW50LiRwYXJlbnQ7cmV0dXJuIHBhdGh9LHBhcmVudE1lbnU6ZnVuY3Rpb24oKXtmb3IodmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7cGFyZW50JiYtMT09PVsiRWxNZW51IiwiRWxTdWJtZW51Il0uaW5kZXhPZihwYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZSk7KXBhcmVudD1wYXJlbnQuJHBhcmVudDtyZXR1cm4gcGFyZW50fSxwYWRkaW5nU3R5bGU6ZnVuY3Rpb24oKXtpZigidmVydGljYWwiIT09dGhpcy5yb290TWVudS5tb2RlKXJldHVybnt9O3ZhciBwYWRkaW5nPTIwLHBhcmVudD10aGlzLiRwYXJlbnQ7aWYodGhpcy5yb290TWVudS5jb2xsYXBzZSlwYWRkaW5nPTIwO2Vsc2UgZm9yKDtwYXJlbnQmJiJFbE1lbnUiIT09cGFyZW50LiRvcHRpb25zLmNvbXBvbmVudE5hbWU7KSJFbFN1Ym1lbnUiPT09cGFyZW50LiRvcHRpb25zLmNvbXBvbmVudE5hbWUmJihwYWRkaW5nKz0yMCkscGFyZW50PXBhcmVudC4kcGFyZW50O3JldHVybntwYWRkaW5nTGVmdDpwYWRkaW5nKyJweCJ9fX19LHBvcGVyTWl4aW5zPXtwcm9wczp7dHJhbnNmb3JtT3JpZ2luOnt0eXBlOltCb29sZWFuLFN0cmluZ10sZGVmYXVsdDohMX0sb2Zmc2V0OnZ1ZV9wb3BwZXJfZGVmYXVsdC5hLnByb3BzLm9mZnNldCxib3VuZGFyaWVzUGFkZGluZzp2dWVfcG9wcGVyX2RlZmF1bHQuYS5wcm9wcy5ib3VuZGFyaWVzUGFkZGluZyxwb3BwZXJPcHRpb25zOnZ1ZV9wb3BwZXJfZGVmYXVsdC5hLnByb3BzLnBvcHBlck9wdGlvbnN9LGRhdGE6dnVlX3BvcHBlcl9kZWZhdWx0LmEuZGF0YSxtZXRob2RzOnZ1ZV9wb3BwZXJfZGVmYXVsdC5hLm1ldGhvZHMsYmVmb3JlRGVzdHJveTp2dWVfcG9wcGVyX2RlZmF1bHQuYS5iZWZvcmVEZXN0cm95LGRlYWN0aXZhdGVkOnZ1ZV9wb3BwZXJfZGVmYXVsdC5hLmRlYWN0aXZhdGVkfSxzdWJtZW51X2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsU3VibWVudSIsY29tcG9uZW50TmFtZToiRWxTdWJtZW51IixtaXhpbnM6W21lbnVfbWl4aW4sZW1pdHRlcl9kZWZhdWx0LmEscG9wZXJNaXhpbnNdLGNvbXBvbmVudHM6e0VsQ29sbGFwc2VUcmFuc2l0aW9uOmNvbGxhcHNlX3RyYW5zaXRpb25fZGVmYXVsdC5hfSxwcm9wczp7aW5kZXg6e3R5cGU6U3RyaW5nLHJlcXVpcmVkOiEwfSxzaG93VGltZW91dDp7dHlwZTpOdW1iZXIsZGVmYXVsdDozMDB9LGhpZGVUaW1lb3V0Ont0eXBlOk51bWJlcixkZWZhdWx0OjMwMH0scG9wcGVyQ2xhc3M6U3RyaW5nLGRpc2FibGVkOkJvb2xlYW4scG9wcGVyQXBwZW5kVG9Cb2R5Ont0eXBlOkJvb2xlYW4sZGVmYXVsdDp2b2lkIDB9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3BvcHBlckpTOm51bGwsdGltZW91dDpudWxsLGl0ZW1zOnt9LHN1Ym1lbnVzOnt9LG1vdXNlSW5DaGlsZDohMX19LHdhdGNoOntvcGVuZWQ6ZnVuY3Rpb24odmFsKXt2YXIgX3RoaXM9dGhpczt0aGlzLmlzTWVudVBvcHVwJiZ0aGlzLiRuZXh0VGljayhmdW5jdGlvbihfKXtfdGhpcy51cGRhdGVQb3BwZXIoKX0pfX0sY29tcHV0ZWQ6e2FwcGVuZFRvQm9keTpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLnBvcHBlckFwcGVuZFRvQm9keT90aGlzLmlzRmlyc3RMZXZlbDp0aGlzLnBvcHBlckFwcGVuZFRvQm9keX0sbWVudVRyYW5zaXRpb25OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE1lbnUuY29sbGFwc2U/ImVsLXpvb20taW4tbGVmdCI6ImVsLXpvb20taW4tdG9wIn0sb3BlbmVkOmZ1bmN0aW9uKCl7cmV0dXJuLTE8dGhpcy5yb290TWVudS5vcGVuZWRNZW51cy5pbmRleE9mKHRoaXMuaW5kZXgpfSxhY3RpdmU6ZnVuY3Rpb24oKXt2YXIgaXNBY3RpdmU9ITEsc3VibWVudXM9dGhpcy5zdWJtZW51cyxpdGVtcz10aGlzLml0ZW1zO3JldHVybiBPYmplY3Qua2V5cyhpdGVtcykuZm9yRWFjaChmdW5jdGlvbihpbmRleCl7aXRlbXNbaW5kZXhdLmFjdGl2ZSYmKGlzQWN0aXZlPSEwKX0pLE9iamVjdC5rZXlzKHN1Ym1lbnVzKS5mb3JFYWNoKGZ1bmN0aW9uKGluZGV4KXtzdWJtZW51c1tpbmRleF0uYWN0aXZlJiYoaXNBY3RpdmU9ITApfSksaXNBY3RpdmV9LGhvdmVyQmFja2dyb3VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3RNZW51LmhvdmVyQmFja2dyb3VuZH0sYmFja2dyb3VuZENvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE1lbnUuYmFja2dyb3VuZENvbG9yfHwiIn0sYWN0aXZlVGV4dENvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE1lbnUuYWN0aXZlVGV4dENvbG9yfHwiIn0sdGV4dENvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE1lbnUudGV4dENvbG9yfHwiIn0sbW9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3RNZW51Lm1vZGV9LGlzTWVudVBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE1lbnUuaXNNZW51UG9wdXB9LHRpdGxlU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4iaG9yaXpvbnRhbCIhPT10aGlzLm1vZGU/e2NvbG9yOnRoaXMudGV4dENvbG9yfTp7Ym9yZGVyQm90dG9tQ29sb3I6dGhpcy5hY3RpdmU/dGhpcy5yb290TWVudS5hY3RpdmVUZXh0Q29sb3I/dGhpcy5hY3RpdmVUZXh0Q29sb3I6IiI6InRyYW5zcGFyZW50Iixjb2xvcjp0aGlzLmFjdGl2ZT90aGlzLmFjdGl2ZVRleHRDb2xvcjp0aGlzLnRleHRDb2xvcn19LGlzRmlyc3RMZXZlbDpmdW5jdGlvbigpe2Zvcih2YXIgaXNGaXJzdExldmVsPSEwLHBhcmVudD10aGlzLiRwYXJlbnQ7cGFyZW50JiZwYXJlbnQhPT10aGlzLnJvb3RNZW51Oyl7aWYoLTE8WyJFbFN1Ym1lbnUiLCJFbE1lbnVJdGVtR3JvdXAiXS5pbmRleE9mKHBhcmVudC4kb3B0aW9ucy5jb21wb25lbnROYW1lKSl7aXNGaXJzdExldmVsPSExO2JyZWFrfXBhcmVudD1wYXJlbnQuJHBhcmVudH1yZXR1cm4gaXNGaXJzdExldmVsfX0sbWV0aG9kczp7aGFuZGxlQ29sbGFwc2VUb2dnbGU6ZnVuY3Rpb24odmFsdWUpe3ZhbHVlP3RoaXMuaW5pdFBvcHBlcigpOnRoaXMuZG9EZXN0cm95KCl9LGFkZEl0ZW06ZnVuY3Rpb24oaXRlbSl7dGhpcy4kc2V0KHRoaXMuaXRlbXMsaXRlbS5pbmRleCxpdGVtKX0scmVtb3ZlSXRlbTpmdW5jdGlvbihpdGVtKXtkZWxldGUgdGhpcy5pdGVtc1tpdGVtLmluZGV4XX0sYWRkU3VibWVudTpmdW5jdGlvbihpdGVtKXt0aGlzLiRzZXQodGhpcy5zdWJtZW51cyxpdGVtLmluZGV4LGl0ZW0pfSxyZW1vdmVTdWJtZW51OmZ1bmN0aW9uKGl0ZW0pe2RlbGV0ZSB0aGlzLnN1Ym1lbnVzW2l0ZW0uaW5kZXhdfSxoYW5kbGVDbGljazpmdW5jdGlvbigpe3ZhciByb290TWVudT10aGlzLnJvb3RNZW51LGRpc2FibGVkPXRoaXMuZGlzYWJsZWQ7ImhvdmVyIj09PXJvb3RNZW51Lm1lbnVUcmlnZ2VyJiYiaG9yaXpvbnRhbCI9PT1yb290TWVudS5tb2RlfHxyb290TWVudS5jb2xsYXBzZSYmInZlcnRpY2FsIj09PXJvb3RNZW51Lm1vZGV8fGRpc2FibGVkfHx0aGlzLmRpc3BhdGNoKCJFbE1lbnUiLCJzdWJtZW51LWNsaWNrIix0aGlzKX0saGFuZGxlTW91c2VlbnRlcjpmdW5jdGlvbihldmVudCl7dmFyIF90aGlzMj10aGlzO2lmKCJBY3RpdmVYT2JqZWN0ImluIHdpbmRvd3x8ImZvY3VzIiE9PWV2ZW50LnR5cGV8fGV2ZW50LnJlbGF0ZWRUYXJnZXQpe3ZhciByb290TWVudT10aGlzLnJvb3RNZW51LGRpc2FibGVkPXRoaXMuZGlzYWJsZWQ7ImNsaWNrIj09PXJvb3RNZW51Lm1lbnVUcmlnZ2VyJiYiaG9yaXpvbnRhbCI9PT1yb290TWVudS5tb2RlfHwhcm9vdE1lbnUuY29sbGFwc2UmJiJ2ZXJ0aWNhbCI9PT1yb290TWVudS5tb2RlfHxkaXNhYmxlZHx8KHRoaXMuZGlzcGF0Y2goIkVsU3VibWVudSIsIm1vdXNlLWVudGVyLWNoaWxkIiksY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCksdGhpcy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpczIucm9vdE1lbnUub3Blbk1lbnUoX3RoaXMyLmluZGV4LF90aGlzMi5pbmRleFBhdGgpfSx0aGlzLnNob3dUaW1lb3V0KSl9fSxoYW5kbGVNb3VzZWxlYXZlOmZ1bmN0aW9uKCl7dmFyIF90aGlzMz10aGlzLHJvb3RNZW51PXRoaXMucm9vdE1lbnU7ImNsaWNrIj09PXJvb3RNZW51Lm1lbnVUcmlnZ2VyJiYiaG9yaXpvbnRhbCI9PT1yb290TWVudS5tb2RlfHwhcm9vdE1lbnUuY29sbGFwc2UmJiJ2ZXJ0aWNhbCI9PT1yb290TWVudS5tb2RlfHwodGhpcy5kaXNwYXRjaCgiRWxTdWJtZW51IiwibW91c2UtbGVhdmUtY2hpbGQiKSxjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpeyFfdGhpczMubW91c2VJbkNoaWxkJiZfdGhpczMucm9vdE1lbnUuY2xvc2VNZW51KF90aGlzMy5pbmRleCl9LHRoaXMuaGlkZVRpbWVvdXQpKX0saGFuZGxlVGl0bGVNb3VzZWVudGVyOmZ1bmN0aW9uKCl7aWYoImhvcml6b250YWwiIT09dGhpcy5tb2RlfHx0aGlzLnJvb3RNZW51LmJhY2tncm91bmRDb2xvcil7dmFyIHRpdGxlPXRoaXMuJHJlZnNbInN1Ym1lbnUtdGl0bGUiXTt0aXRsZSYmKHRpdGxlLnN0eWxlLmJhY2tncm91bmRDb2xvcj10aGlzLnJvb3RNZW51LmhvdmVyQmFja2dyb3VuZCl9fSxoYW5kbGVUaXRsZU1vdXNlbGVhdmU6ZnVuY3Rpb24oKXtpZigiaG9yaXpvbnRhbCIhPT10aGlzLm1vZGV8fHRoaXMucm9vdE1lbnUuYmFja2dyb3VuZENvbG9yKXt2YXIgdGl0bGU9dGhpcy4kcmVmc1sic3VibWVudS10aXRsZSJdO3RpdGxlJiYodGl0bGUuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMucm9vdE1lbnUuYmFja2dyb3VuZENvbG9yfHwiIil9fSx1cGRhdGVQbGFjZW1lbnQ6ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRQbGFjZW1lbnQ9Imhvcml6b250YWwiPT09dGhpcy5tb2RlJiZ0aGlzLmlzRmlyc3RMZXZlbD8iYm90dG9tLXN0YXJ0IjoicmlnaHQtc3RhcnQifSxpbml0UG9wcGVyOmZ1bmN0aW9uKCl7dGhpcy5yZWZlcmVuY2VFbG09dGhpcy4kZWwsdGhpcy5wb3BwZXJFbG09dGhpcy4kcmVmcy5tZW51LHRoaXMudXBkYXRlUGxhY2VtZW50KCl9fSxjcmVhdGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzND10aGlzO3RoaXMuJG9uKCJ0b2dnbGUtY29sbGFwc2UiLHRoaXMuaGFuZGxlQ29sbGFwc2VUb2dnbGUpLHRoaXMuJG9uKCJtb3VzZS1lbnRlci1jaGlsZCIsZnVuY3Rpb24oKXtfdGhpczQubW91c2VJbkNoaWxkPSEwLGNsZWFyVGltZW91dChfdGhpczQudGltZW91dCl9KSx0aGlzLiRvbigibW91c2UtbGVhdmUtY2hpbGQiLGZ1bmN0aW9uKCl7X3RoaXM0Lm1vdXNlSW5DaGlsZD0hMSxjbGVhclRpbWVvdXQoX3RoaXM0LnRpbWVvdXQpfSl9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmVudE1lbnUuYWRkU3VibWVudSh0aGlzKSx0aGlzLnJvb3RNZW51LmFkZFN1Ym1lbnUodGhpcyksdGhpcy5pbml0UG9wcGVyKCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBhcmVudE1lbnUucmVtb3ZlU3VibWVudSh0aGlzKSx0aGlzLnJvb3RNZW51LnJlbW92ZVN1Ym1lbnUodGhpcyl9LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgYWN0aXZlPXRoaXMuYWN0aXZlLG9wZW5lZD10aGlzLm9wZW5lZCxwYWRkaW5nU3R5bGU9dGhpcy5wYWRkaW5nU3R5bGUsdGl0bGVTdHlsZT10aGlzLnRpdGxlU3R5bGUsYmFja2dyb3VuZENvbG9yPXRoaXMuYmFja2dyb3VuZENvbG9yLHJvb3RNZW51PXRoaXMucm9vdE1lbnUsY3VycmVudFBsYWNlbWVudD10aGlzLmN1cnJlbnRQbGFjZW1lbnQsbWVudVRyYW5zaXRpb25OYW1lPXRoaXMubWVudVRyYW5zaXRpb25OYW1lLG1vZGU9dGhpcy5tb2RlLGRpc2FibGVkPXRoaXMuZGlzYWJsZWQscG9wcGVyQ2xhc3M9dGhpcy5wb3BwZXJDbGFzcywkc2xvdHM9dGhpcy4kc2xvdHMsaXNGaXJzdExldmVsPXRoaXMuaXNGaXJzdExldmVsLHBvcHVwTWVudT1oKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6bWVudVRyYW5zaXRpb25OYW1lfX0sW2goImRpdiIse3JlZjoibWVudSIsZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHZhbHVlOm9wZW5lZH1dLGNsYXNzOlsiZWwtbWVudS0tIittb2RlLHBvcHBlckNsYXNzXSxvbjp7bW91c2VlbnRlcjp0aGlzLmhhbmRsZU1vdXNlZW50ZXIsbW91c2VsZWF2ZTp0aGlzLmhhbmRsZU1vdXNlbGVhdmUsZm9jdXM6dGhpcy5oYW5kbGVNb3VzZWVudGVyfX0sW2goInVsIix7YXR0cnM6e3JvbGU6Im1lbnUifSxjbGFzczpbImVsLW1lbnUgZWwtbWVudS0tcG9wdXAiLCJlbC1tZW51LS1wb3B1cC0iK2N1cnJlbnRQbGFjZW1lbnRdLHN0eWxlOntiYWNrZ3JvdW5kQ29sb3I6cm9vdE1lbnUuYmFja2dyb3VuZENvbG9yfHwiIn19LFskc2xvdHMuZGVmYXVsdF0pXSldKSxpbmxpbmVNZW51PWgoImVsLWNvbGxhcHNlLXRyYW5zaXRpb24iLFtoKCJ1bCIse2F0dHJzOntyb2xlOiJtZW51In0sY2xhc3M6ImVsLW1lbnUgZWwtbWVudS0taW5saW5lIixkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIsdmFsdWU6b3BlbmVkfV0sc3R5bGU6e2JhY2tncm91bmRDb2xvcjpyb290TWVudS5iYWNrZ3JvdW5kQ29sb3J8fCIifX0sWyRzbG90cy5kZWZhdWx0XSldKSxzdWJtZW51VGl0bGVJY29uPSJob3Jpem9udGFsIj09PXJvb3RNZW51Lm1vZGUmJmlzRmlyc3RMZXZlbHx8InZlcnRpY2FsIj09PXJvb3RNZW51Lm1vZGUmJiFyb290TWVudS5jb2xsYXBzZT8iZWwtaWNvbi1hcnJvdy1kb3duIjoiZWwtaWNvbi1hcnJvdy1yaWdodCI7cmV0dXJuIGgoImxpIix7Y2xhc3M6eyJlbC1zdWJtZW51IjohMCwiaXMtYWN0aXZlIjphY3RpdmUsImlzLW9wZW5lZCI6b3BlbmVkLCJpcy1kaXNhYmxlZCI6ZGlzYWJsZWR9LGF0dHJzOntyb2xlOiJtZW51aXRlbSIsImFyaWEtaGFzcG9wdXAiOiJ0cnVlIiwiYXJpYS1leHBhbmRlZCI6b3BlbmVkfSxvbjp7bW91c2VlbnRlcjp0aGlzLmhhbmRsZU1vdXNlZW50ZXIsbW91c2VsZWF2ZTp0aGlzLmhhbmRsZU1vdXNlbGVhdmUsZm9jdXM6dGhpcy5oYW5kbGVNb3VzZWVudGVyfX0sW2goImRpdiIse2NsYXNzOiJlbC1zdWJtZW51X190aXRsZSIscmVmOiJzdWJtZW51LXRpdGxlIixvbjp7Y2xpY2s6dGhpcy5oYW5kbGVDbGljayxtb3VzZWVudGVyOnRoaXMuaGFuZGxlVGl0bGVNb3VzZWVudGVyLG1vdXNlbGVhdmU6dGhpcy5oYW5kbGVUaXRsZU1vdXNlbGVhdmV9LHN0eWxlOltwYWRkaW5nU3R5bGUsdGl0bGVTdHlsZSx7YmFja2dyb3VuZENvbG9yOmJhY2tncm91bmRDb2xvcn1dfSxbJHNsb3RzLnRpdGxlLGgoImkiLHtjbGFzczpbImVsLXN1Ym1lbnVfX2ljb24tYXJyb3ciLHN1Ym1lbnVUaXRsZUljb25dfSldKSx0aGlzLmlzTWVudVBvcHVwP3BvcHVwTWVudTppbmxpbmVNZW51XSl9fSx2b2lkIDAsdm9pZCAwLCExLG51bGwsbnVsbCxudWxsKTtzdWJtZW51X2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvbWVudS9zcmMvc3VibWVudS52dWUiO3ZhciBzdWJtZW51PXN1Ym1lbnVfY29tcG9uZW50LmV4cG9ydHM7c3VibWVudS5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChzdWJtZW51Lm5hbWUsc3VibWVudSl9O3ZhciBwYWNrYWdlc19zdWJtZW51PXN1Ym1lbnUsbWVudV9pdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfMmE1ZGJmZWFfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygibGkiLHtzdGF0aWNDbGFzczoiZWwtbWVudS1pdGVtIixjbGFzczp7ImlzLWFjdGl2ZSI6X3ZtLmFjdGl2ZSwiaXMtZGlzYWJsZWQiOl92bS5kaXNhYmxlZH0sc3R5bGU6W192bS5wYWRkaW5nU3R5bGUsX3ZtLml0ZW1TdHlsZSx7YmFja2dyb3VuZENvbG9yOl92bS5iYWNrZ3JvdW5kQ29sb3J9XSxhdHRyczp7cm9sZToibWVudWl0ZW0iLHRhYmluZGV4OiItMSJ9LG9uOntjbGljazpfdm0uaGFuZGxlQ2xpY2ssbW91c2VlbnRlcjpfdm0ub25Nb3VzZUVudGVyLGZvY3VzOl92bS5vbk1vdXNlRW50ZXIsYmx1cjpfdm0ub25Nb3VzZUxlYXZlLG1vdXNlbGVhdmU6X3ZtLm9uTW91c2VMZWF2ZX19LFsiRWxNZW51Ij09PV92bS5wYXJlbnRNZW51LiRvcHRpb25zLmNvbXBvbmVudE5hbWUmJl92bS5yb290TWVudS5jb2xsYXBzZSYmX3ZtLiRzbG90cy50aXRsZT9fYygiZWwtdG9vbHRpcCIse2F0dHJzOntlZmZlY3Q6ImRhcmsiLHBsYWNlbWVudDoicmlnaHQifX0sW19jKCJkaXYiLHthdHRyczp7c2xvdDoiY29udGVudCJ9LHNsb3Q6ImNvbnRlbnQifSxbX3ZtLl90KCJ0aXRsZSIpXSwyKSxfYygiZGl2Iix7c3RhdGljU3R5bGU6e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDoiMCIsdG9wOiIwIixoZWlnaHQ6IjEwMCUiLHdpZHRoOiIxMDAlIixkaXNwbGF5OiJpbmxpbmUtYmxvY2siLCJib3gtc2l6aW5nIjoiYm9yZGVyLWJveCIscGFkZGluZzoiMCAyMHB4In19LFtfdm0uX3QoImRlZmF1bHQiKV0sMildKTpbX3ZtLl90KCJkZWZhdWx0IiksX3ZtLl90KCJ0aXRsZSIpXV0sMil9O21lbnVfaXRlbXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzJhNWRiZmVhX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciB0b29sdGlwXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDIwKSx0b29sdGlwX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKHRvb2x0aXBfKSxtZW51X2l0ZW1fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxNZW51SXRlbSIsY29tcG9uZW50TmFtZToiRWxNZW51SXRlbSIsbWl4aW5zOlttZW51X21peGluLGVtaXR0ZXJfZGVmYXVsdC5hXSxjb21wb25lbnRzOntFbFRvb2x0aXA6dG9vbHRpcF9kZWZhdWx0LmF9LHByb3BzOntpbmRleDp7ZGVmYXVsdDpudWxsLHZhbGlkYXRvcjpmdW5jdGlvbih2YWwpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdmFsfHxudWxsPT09dmFsfX0scm91dGU6W1N0cmluZyxPYmplY3RdLGRpc2FibGVkOkJvb2xlYW59LGNvbXB1dGVkOnthY3RpdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleD09PXRoaXMucm9vdE1lbnUuYWN0aXZlSW5kZXh9LGhvdmVyQmFja2dyb3VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3RNZW51LmhvdmVyQmFja2dyb3VuZH0sYmFja2dyb3VuZENvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE1lbnUuYmFja2dyb3VuZENvbG9yfHwiIn0sYWN0aXZlVGV4dENvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE1lbnUuYWN0aXZlVGV4dENvbG9yfHwiIn0sdGV4dENvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE1lbnUudGV4dENvbG9yfHwiIn0sbW9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3RNZW51Lm1vZGV9LGl0ZW1TdHlsZTpmdW5jdGlvbigpe3ZhciBzdHlsZT17Y29sb3I6dGhpcy5hY3RpdmU/dGhpcy5hY3RpdmVUZXh0Q29sb3I6dGhpcy50ZXh0Q29sb3J9O3JldHVybiJob3Jpem9udGFsIiE9PXRoaXMubW9kZXx8dGhpcy5pc05lc3RlZHx8KHN0eWxlLmJvcmRlckJvdHRvbUNvbG9yPXRoaXMuYWN0aXZlP3RoaXMucm9vdE1lbnUuYWN0aXZlVGV4dENvbG9yP3RoaXMuYWN0aXZlVGV4dENvbG9yOiIiOiJ0cmFuc3BhcmVudCIpLHN0eWxlfSxpc05lc3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudE1lbnUhPT10aGlzLnJvb3RNZW51fX0sbWV0aG9kczp7b25Nb3VzZUVudGVyOmZ1bmN0aW9uKCl7KCJob3Jpem9udGFsIiE9PXRoaXMubW9kZXx8dGhpcy5yb290TWVudS5iYWNrZ3JvdW5kQ29sb3IpJiYodGhpcy4kZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuaG92ZXJCYWNrZ3JvdW5kKX0sb25Nb3VzZUxlYXZlOmZ1bmN0aW9uKCl7KCJob3Jpem9udGFsIiE9PXRoaXMubW9kZXx8dGhpcy5yb290TWVudS5iYWNrZ3JvdW5kQ29sb3IpJiYodGhpcy4kZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuYmFja2dyb3VuZENvbG9yKX0saGFuZGxlQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkfHwodGhpcy5kaXNwYXRjaCgiRWxNZW51IiwiaXRlbS1jbGljayIsdGhpcyksdGhpcy4kZW1pdCgiY2xpY2siLHRoaXMpKX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt0aGlzLnBhcmVudE1lbnUuYWRkSXRlbSh0aGlzKSx0aGlzLnJvb3RNZW51LmFkZEl0ZW0odGhpcyl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBhcmVudE1lbnUucmVtb3ZlSXRlbSh0aGlzKSx0aGlzLnJvb3RNZW51LnJlbW92ZUl0ZW0odGhpcyl9fSxtZW51X2l0ZW12dWVfdHlwZV90ZW1wbGF0ZV9pZF8yYTVkYmZlYV9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO21lbnVfaXRlbV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL21lbnUvc3JjL21lbnUtaXRlbS52dWUiO3ZhciBtZW51X2l0ZW09bWVudV9pdGVtX2NvbXBvbmVudC5leHBvcnRzO21lbnVfaXRlbS5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChtZW51X2l0ZW0ubmFtZSxtZW51X2l0ZW0pfTt2YXIgcGFja2FnZXNfbWVudV9pdGVtPW1lbnVfaXRlbSxtZW51X2l0ZW1fZ3JvdXB2dWVfdHlwZV90ZW1wbGF0ZV9pZF81NDNiN2JkY19yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudCxfYz10aGlzLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImxpIix7c3RhdGljQ2xhc3M6ImVsLW1lbnUtaXRlbS1ncm91cCJ9LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLW1lbnUtaXRlbS1ncm91cF9fdGl0bGUiLHN0eWxlOntwYWRkaW5nTGVmdDp0aGlzLmxldmVsUGFkZGluZysicHgifX0sW3RoaXMuJHNsb3RzLnRpdGxlP3RoaXMuX3QoInRpdGxlIik6W3RoaXMuX3YodGhpcy5fcyh0aGlzLnRpdGxlKSldXSwyKSxfYygidWwiLFt0aGlzLl90KCJkZWZhdWx0IildLDIpXSl9O21lbnVfaXRlbV9ncm91cHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzU0M2I3YmRjX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBtZW51X2l0ZW1fZ3JvdXBfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxNZW51SXRlbUdyb3VwIixjb21wb25lbnROYW1lOiJFbE1lbnVJdGVtR3JvdXAiLGluamVjdDpbInJvb3RNZW51Il0scHJvcHM6e3RpdGxlOnt0eXBlOlN0cmluZ319LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cGFkZGluZ0xlZnQ6MjB9fSxjb21wdXRlZDp7bGV2ZWxQYWRkaW5nOmZ1bmN0aW9uKCl7dmFyIHBhZGRpbmc9MjAscGFyZW50PXRoaXMuJHBhcmVudDtpZih0aGlzLnJvb3RNZW51LmNvbGxhcHNlKXJldHVybiAyMDtmb3IoO3BhcmVudCYmIkVsTWVudSIhPT1wYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZTspIkVsU3VibWVudSI9PT1wYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZSYmKHBhZGRpbmcrPTIwKSxwYXJlbnQ9cGFyZW50LiRwYXJlbnQ7cmV0dXJuIHBhZGRpbmd9fX0sbWVudV9pdGVtX2dyb3VwdnVlX3R5cGVfdGVtcGxhdGVfaWRfNTQzYjdiZGNfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTttZW51X2l0ZW1fZ3JvdXBfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9tZW51L3NyYy9tZW51LWl0ZW0tZ3JvdXAudnVlIjt2YXIgbWVudV9pdGVtX2dyb3VwPW1lbnVfaXRlbV9ncm91cF9jb21wb25lbnQuZXhwb3J0czttZW51X2l0ZW1fZ3JvdXAuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQobWVudV9pdGVtX2dyb3VwLm5hbWUsbWVudV9pdGVtX2dyb3VwKX07dmFyIHBhY2thZ2VzX21lbnVfaXRlbV9ncm91cD1tZW51X2l0ZW1fZ3JvdXAsaW5wdXR2dWVfdHlwZV90ZW1wbGF0ZV9pZF8zNDNkZDc3NF9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtjbGFzczpbInRleHRhcmVhIj09PV92bS50eXBlPyJlbC10ZXh0YXJlYSI6ImVsLWlucHV0Iixfdm0uaW5wdXRTaXplPyJlbC1pbnB1dC0tIitfdm0uaW5wdXRTaXplOiIiLHsiaXMtZGlzYWJsZWQiOl92bS5pbnB1dERpc2FibGVkLCJlbC1pbnB1dC1ncm91cCI6X3ZtLiRzbG90cy5wcmVwZW5kfHxfdm0uJHNsb3RzLmFwcGVuZCwiZWwtaW5wdXQtZ3JvdXAtLWFwcGVuZCI6X3ZtLiRzbG90cy5hcHBlbmQsImVsLWlucHV0LWdyb3VwLS1wcmVwZW5kIjpfdm0uJHNsb3RzLnByZXBlbmQsImVsLWlucHV0LS1wcmVmaXgiOl92bS4kc2xvdHMucHJlZml4fHxfdm0ucHJlZml4SWNvbiwiZWwtaW5wdXQtLXN1ZmZpeCI6X3ZtLiRzbG90cy5zdWZmaXh8fF92bS5zdWZmaXhJY29ufHxfdm0uY2xlYXJhYmxlfHxfdm0uc2hvd1Bhc3N3b3JkfV0sb246e21vdXNlZW50ZXI6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaG92ZXJpbmc9ITB9LG1vdXNlbGVhdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaG92ZXJpbmc9ITF9fX0sWyJ0ZXh0YXJlYSIhPT1fdm0udHlwZT9bX3ZtLiRzbG90cy5wcmVwZW5kP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtaW5wdXQtZ3JvdXBfX3ByZXBlbmQifSxbX3ZtLl90KCJwcmVwZW5kIildLDIpOl92bS5fZSgpLCJ0ZXh0YXJlYSIhPT1fdm0udHlwZT9fYygiaW5wdXQiLF92bS5fYih7cmVmOiJpbnB1dCIsc3RhdGljQ2xhc3M6ImVsLWlucHV0X19pbm5lciIsYXR0cnM6e3RhYmluZGV4Ol92bS50YWJpbmRleCx0eXBlOl92bS5zaG93UGFzc3dvcmQ/X3ZtLnBhc3N3b3JkVmlzaWJsZT8idGV4dCI6InBhc3N3b3JkIjpfdm0udHlwZSxkaXNhYmxlZDpfdm0uaW5wdXREaXNhYmxlZCxyZWFkb25seTpfdm0ucmVhZG9ubHksYXV0b2NvbXBsZXRlOl92bS5hdXRvQ29tcGxldGV8fF92bS5hdXRvY29tcGxldGUsImFyaWEtbGFiZWwiOl92bS5sYWJlbH0sZG9tUHJvcHM6e3ZhbHVlOl92bS5uYXRpdmVJbnB1dFZhbHVlfSxvbjp7Y29tcG9zaXRpb25zdGFydDpfdm0uaGFuZGxlQ29tcG9zaXRpb24sY29tcG9zaXRpb251cGRhdGU6X3ZtLmhhbmRsZUNvbXBvc2l0aW9uLGNvbXBvc2l0aW9uZW5kOl92bS5oYW5kbGVDb21wb3NpdGlvbixpbnB1dDpfdm0uaGFuZGxlSW5wdXQsZm9jdXM6X3ZtLmhhbmRsZUZvY3VzLGJsdXI6X3ZtLmhhbmRsZUJsdXIsY2hhbmdlOl92bS5oYW5kbGVDaGFuZ2V9fSwiaW5wdXQiLF92bS4kYXR0cnMsITEpKTpfdm0uX2UoKSxfdm0uJHNsb3RzLnByZWZpeHx8X3ZtLnByZWZpeEljb24/X2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtaW5wdXRfX3ByZWZpeCJ9LFtfdm0uX3QoInByZWZpeCIpLF92bS5wcmVmaXhJY29uP19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWlucHV0X19pY29uIixjbGFzczpfdm0ucHJlZml4SWNvbn0pOl92bS5fZSgpXSwyKTpfdm0uX2UoKSxfdm0uJHNsb3RzLnN1ZmZpeHx8X3ZtLnN1ZmZpeEljb258fF92bS5zaG93Q2xlYXJ8fF92bS5zaG93UGFzc3dvcmR8fF92bS52YWxpZGF0ZVN0YXRlJiZfdm0ubmVlZFN0YXR1c0ljb24/X2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtaW5wdXRfX3N1ZmZpeCJ9LFtfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1pbnB1dF9fc3VmZml4LWlubmVyIn0sW192bS5zaG93Q2xlYXImJl92bS5zaG93UHdkVmlzaWJsZT9fdm0uX2UoKTpbX3ZtLl90KCJzdWZmaXgiKSxfdm0uc3VmZml4SWNvbj9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pbnB1dF9faWNvbiIsY2xhc3M6X3ZtLnN1ZmZpeEljb259KTpfdm0uX2UoKV0sX3ZtLnNob3dDbGVhcj9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pbnB1dF9faWNvbiBlbC1pY29uLWNpcmNsZS1jbG9zZSBlbC1pbnB1dF9fY2xlYXIiLG9uOntjbGljazpfdm0uY2xlYXJ9fSk6X3ZtLl9lKCksX3ZtLnNob3dQd2RWaXNpYmxlP19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWlucHV0X19pY29uIGVsLWljb24tdmlldyBlbC1pbnB1dF9fY2xlYXIiLG9uOntjbGljazpfdm0uaGFuZGxlUGFzc3dvcmRWaXNpYmxlfX0pOl92bS5fZSgpXSwyKSxfdm0udmFsaWRhdGVTdGF0ZT9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pbnB1dF9faWNvbiIsY2xhc3M6WyJlbC1pbnB1dF9fdmFsaWRhdGVJY29uIixfdm0udmFsaWRhdGVJY29uXX0pOl92bS5fZSgpXSk6X3ZtLl9lKCksX3ZtLiRzbG90cy5hcHBlbmQ/X2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1pbnB1dC1ncm91cF9fYXBwZW5kIn0sW192bS5fdCgiYXBwZW5kIildLDIpOl92bS5fZSgpXTpfYygidGV4dGFyZWEiLF92bS5fYih7cmVmOiJ0ZXh0YXJlYSIsc3RhdGljQ2xhc3M6ImVsLXRleHRhcmVhX19pbm5lciIsc3R5bGU6X3ZtLnRleHRhcmVhU3R5bGUsYXR0cnM6e3RhYmluZGV4Ol92bS50YWJpbmRleCxkaXNhYmxlZDpfdm0uaW5wdXREaXNhYmxlZCxyZWFkb25seTpfdm0ucmVhZG9ubHksYXV0b2NvbXBsZXRlOl92bS5hdXRvQ29tcGxldGV8fF92bS5hdXRvY29tcGxldGUsImFyaWEtbGFiZWwiOl92bS5sYWJlbH0sZG9tUHJvcHM6e3ZhbHVlOl92bS5uYXRpdmVJbnB1dFZhbHVlfSxvbjp7Y29tcG9zaXRpb25zdGFydDpfdm0uaGFuZGxlQ29tcG9zaXRpb24sY29tcG9zaXRpb251cGRhdGU6X3ZtLmhhbmRsZUNvbXBvc2l0aW9uLGNvbXBvc2l0aW9uZW5kOl92bS5oYW5kbGVDb21wb3NpdGlvbixpbnB1dDpfdm0uaGFuZGxlSW5wdXQsZm9jdXM6X3ZtLmhhbmRsZUZvY3VzLGJsdXI6X3ZtLmhhbmRsZUJsdXIsY2hhbmdlOl92bS5oYW5kbGVDaGFuZ2V9fSwidGV4dGFyZWEiLF92bS4kYXR0cnMsITEpKV0sMil9O2lucHV0dnVlX3R5cGVfdGVtcGxhdGVfaWRfMzQzZGQ3NzRfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGhpZGRlblRleHRhcmVhPXZvaWQgMCxDT05URVhUX1NUWUxFPVsibGV0dGVyLXNwYWNpbmciLCJsaW5lLWhlaWdodCIsInBhZGRpbmctdG9wIiwicGFkZGluZy1ib3R0b20iLCJmb250LWZhbWlseSIsImZvbnQtd2VpZ2h0IiwiZm9udC1zaXplIiwidGV4dC1yZW5kZXJpbmciLCJ0ZXh0LXRyYW5zZm9ybSIsIndpZHRoIiwidGV4dC1pbmRlbnQiLCJwYWRkaW5nLWxlZnQiLCJwYWRkaW5nLXJpZ2h0IiwiYm9yZGVyLXdpZHRoIiwiYm94LXNpemluZyJdO2Z1bmN0aW9uIGNhbGNUZXh0YXJlYUhlaWdodCh0YXJnZXRFbGVtZW50KXt2YXIgbWluUm93cz0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MSxtYXhSb3dzPTI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpudWxsO2hpZGRlblRleHRhcmVhfHwoaGlkZGVuVGV4dGFyZWE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGhpZGRlblRleHRhcmVhKSk7dmFyIF9jYWxjdWxhdGVOb2RlU3R5bGluZz1mdW5jdGlvbih0YXJnZXRFbGVtZW50KXt2YXIgc3R5bGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0RWxlbWVudCksYm94U2l6aW5nPXN0eWxlLmdldFByb3BlcnR5VmFsdWUoImJveC1zaXppbmciKSxwYWRkaW5nU2l6ZT1wYXJzZUZsb2F0KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctYm90dG9tIikpK3BhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy10b3AiKSksYm9yZGVyU2l6ZT1wYXJzZUZsb2F0KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoImJvcmRlci1ib3R0b20td2lkdGgiKSkrcGFyc2VGbG9hdChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCJib3JkZXItdG9wLXdpZHRoIikpO3JldHVybntjb250ZXh0U3R5bGU6Q09OVEVYVF9TVFlMRS5tYXAoZnVuY3Rpb24obmFtZSl7cmV0dXJuIG5hbWUrIjoiK3N0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSl9KS5qb2luKCI7IikscGFkZGluZ1NpemU6cGFkZGluZ1NpemUsYm9yZGVyU2l6ZTpib3JkZXJTaXplLGJveFNpemluZzpib3hTaXppbmd9fSh0YXJnZXRFbGVtZW50KSxwYWRkaW5nU2l6ZT1fY2FsY3VsYXRlTm9kZVN0eWxpbmcucGFkZGluZ1NpemUsYm9yZGVyU2l6ZT1fY2FsY3VsYXRlTm9kZVN0eWxpbmcuYm9yZGVyU2l6ZSxib3hTaXppbmc9X2NhbGN1bGF0ZU5vZGVTdHlsaW5nLmJveFNpemluZyxjb250ZXh0U3R5bGU9X2NhbGN1bGF0ZU5vZGVTdHlsaW5nLmNvbnRleHRTdHlsZTtoaWRkZW5UZXh0YXJlYS5zZXRBdHRyaWJ1dGUoInN0eWxlIixjb250ZXh0U3R5bGUrIjtcbiAgaGVpZ2h0OjAgIWltcG9ydGFudDtcbiAgdmlzaWJpbGl0eTpoaWRkZW4gIWltcG9ydGFudDtcbiAgb3ZlcmZsb3c6aGlkZGVuICFpbXBvcnRhbnQ7XG4gIHBvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7XG4gIHotaW5kZXg6LTEwMDAgIWltcG9ydGFudDtcbiAgdG9wOjAgIWltcG9ydGFudDtcbiAgcmlnaHQ6MCAhaW1wb3J0YW50XG4iKSxoaWRkZW5UZXh0YXJlYS52YWx1ZT10YXJnZXRFbGVtZW50LnZhbHVlfHx0YXJnZXRFbGVtZW50LnBsYWNlaG9sZGVyfHwiIjt2YXIgaGVpZ2h0PWhpZGRlblRleHRhcmVhLnNjcm9sbEhlaWdodCxyZXN1bHQ9e307ImJvcmRlci1ib3giPT09Ym94U2l6aW5nP2hlaWdodCs9Ym9yZGVyU2l6ZToiY29udGVudC1ib3giPT09Ym94U2l6aW5nJiYoaGVpZ2h0LT1wYWRkaW5nU2l6ZSksaGlkZGVuVGV4dGFyZWEudmFsdWU9IiI7dmFyIHNpbmdsZVJvd0hlaWdodD1oaWRkZW5UZXh0YXJlYS5zY3JvbGxIZWlnaHQtcGFkZGluZ1NpemU7aWYobnVsbCE9PW1pblJvd3Mpe3ZhciBtaW5IZWlnaHQ9c2luZ2xlUm93SGVpZ2h0Km1pblJvd3M7ImJvcmRlci1ib3giPT09Ym94U2l6aW5nJiYobWluSGVpZ2h0PW1pbkhlaWdodCtwYWRkaW5nU2l6ZStib3JkZXJTaXplKSxoZWlnaHQ9TWF0aC5tYXgobWluSGVpZ2h0LGhlaWdodCkscmVzdWx0Lm1pbkhlaWdodD1taW5IZWlnaHQrInB4In1pZihudWxsIT09bWF4Um93cyl7dmFyIG1heEhlaWdodD1zaW5nbGVSb3dIZWlnaHQqbWF4Um93czsiYm9yZGVyLWJveCI9PT1ib3hTaXppbmcmJihtYXhIZWlnaHQ9bWF4SGVpZ2h0K3BhZGRpbmdTaXplK2JvcmRlclNpemUpLGhlaWdodD1NYXRoLm1pbihtYXhIZWlnaHQsaGVpZ2h0KX1yZXR1cm4gcmVzdWx0LmhlaWdodD1oZWlnaHQrInB4IixoaWRkZW5UZXh0YXJlYS5wYXJlbnROb2RlJiZoaWRkZW5UZXh0YXJlYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGhpZGRlblRleHRhcmVhKSxoaWRkZW5UZXh0YXJlYT1udWxsLHJlc3VsdH12YXIgbWVyZ2VfPV9fd2VicGFja19yZXF1aXJlX18oNiksbWVyZ2VfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4obWVyZ2VfKSxpbnB1dF9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbElucHV0Iixjb21wb25lbnROYW1lOiJFbElucHV0IixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hLG1pZ3JhdGluZ19kZWZhdWx0LmFdLGluaGVyaXRBdHRyczohMSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn0sZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGV4dGFyZWFDYWxjU3R5bGU6e30saG92ZXJpbmc6ITEsZm9jdXNlZDohMSxpc09uQ29tcG9zaXRpb246ITEscGFzc3dvcmRWaXNpYmxlOiExfX0scHJvcHM6e3ZhbHVlOltTdHJpbmcsTnVtYmVyXSxzaXplOlN0cmluZyxyZXNpemU6U3RyaW5nLGZvcm06U3RyaW5nLGRpc2FibGVkOkJvb2xlYW4scmVhZG9ubHk6Qm9vbGVhbix0eXBlOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJ0ZXh0In0sYXV0b3NpemU6e3R5cGU6W0Jvb2xlYW4sT2JqZWN0XSxkZWZhdWx0OiExfSxhdXRvY29tcGxldGU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6Im9mZiJ9LGF1dG9Db21wbGV0ZTp7dHlwZTpTdHJpbmcsdmFsaWRhdG9yOmZ1bmN0aW9uKHZhbCl7cmV0dXJuITB9fSx2YWxpZGF0ZUV2ZW50Ont0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sc3VmZml4SWNvbjpTdHJpbmcscHJlZml4SWNvbjpTdHJpbmcsbGFiZWw6U3RyaW5nLGNsZWFyYWJsZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LHNob3dQYXNzd29yZDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LHRhYmluZGV4OlN0cmluZ30sY29tcHV0ZWQ6e19lbEZvcm1JdGVtU2l6ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmVsRm9ybUl0ZW18fHt9KS5lbEZvcm1JdGVtU2l6ZX0sdmFsaWRhdGVTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsRm9ybUl0ZW0/dGhpcy5lbEZvcm1JdGVtLnZhbGlkYXRlU3RhdGU6IiJ9LG5lZWRTdGF0dXNJY29uOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmVsRm9ybSYmdGhpcy5lbEZvcm0uc3RhdHVzSWNvbn0sdmFsaWRhdGVJY29uOmZ1bmN0aW9uKCl7cmV0dXJue3ZhbGlkYXRpbmc6ImVsLWljb24tbG9hZGluZyIsc3VjY2VzczoiZWwtaWNvbi1jaXJjbGUtY2hlY2siLGVycm9yOiJlbC1pY29uLWNpcmNsZS1jbG9zZSJ9W3RoaXMudmFsaWRhdGVTdGF0ZV19LHRleHRhcmVhU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4gbWVyZ2VfZGVmYXVsdCgpKHt9LHRoaXMudGV4dGFyZWFDYWxjU3R5bGUse3Jlc2l6ZTp0aGlzLnJlc2l6ZX0pfSxpbnB1dFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfHx0aGlzLl9lbEZvcm1JdGVtU2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfSxpbnB1dERpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfSxuYXRpdmVJbnB1dFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnZhbHVlfHx2b2lkIDA9PT10aGlzLnZhbHVlPyIiOnRoaXMudmFsdWV9LHNob3dDbGVhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsZWFyYWJsZSYmIXRoaXMuaW5wdXREaXNhYmxlZCYmIXRoaXMucmVhZG9ubHkmJnRoaXMubmF0aXZlSW5wdXRWYWx1ZSYmKHRoaXMuZm9jdXNlZHx8dGhpcy5ob3ZlcmluZyl9LHNob3dQd2RWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hvd1Bhc3N3b3JkJiYhdGhpcy5pbnB1dERpc2FibGVkJiYhdGhpcy5yZWFkb25seSYmKCEhdGhpcy5uYXRpdmVJbnB1dFZhbHVlfHx0aGlzLmZvY3VzZWQpfX0sd2F0Y2g6e3ZhbHVlOmZ1bmN0aW9uKHZhbCl7dGhpcy4kbmV4dFRpY2sodGhpcy5yZXNpemVUZXh0YXJlYSksdGhpcy52YWxpZGF0ZUV2ZW50JiZ0aGlzLmRpc3BhdGNoKCJFbEZvcm1JdGVtIiwiZWwuZm9ybS5jaGFuZ2UiLFt2YWxdKX19LG1ldGhvZHM6e2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5nZXRJbnB1dCgpLmZvY3VzKCl9LGJsdXI6ZnVuY3Rpb24oKXt0aGlzLmdldElucHV0KCkuYmx1cigpfSxnZXRNaWdyYXRpbmdDb25maWc6ZnVuY3Rpb24oKXtyZXR1cm57cHJvcHM6e2ljb246Imljb24gaXMgcmVtb3ZlZCwgdXNlIHN1ZmZpeC1pY29uIC8gcHJlZml4LWljb24gaW5zdGVhZC4iLCJvbi1pY29uLWNsaWNrIjoib24taWNvbi1jbGljayBpcyByZW1vdmVkLiJ9LGV2ZW50czp7Y2xpY2s6ImNsaWNrIGlzIHJlbW92ZWQuIn19fSxoYW5kbGVCbHVyOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLmZvY3VzZWQ9ITEsdGhpcy4kZW1pdCgiYmx1ciIsZXZlbnQpLHRoaXMudmFsaWRhdGVFdmVudCYmdGhpcy5kaXNwYXRjaCgiRWxGb3JtSXRlbSIsImVsLmZvcm0uYmx1ciIsW3RoaXMudmFsdWVdKX0sc2VsZWN0OmZ1bmN0aW9uKCl7dGhpcy5nZXRJbnB1dCgpLnNlbGVjdCgpfSxyZXNpemVUZXh0YXJlYTpmdW5jdGlvbigpe2lmKCF0aGlzLiRpc1NlcnZlcil7dmFyIGF1dG9zaXplPXRoaXMuYXV0b3NpemU7aWYoInRleHRhcmVhIj09PXRoaXMudHlwZSlpZihhdXRvc2l6ZSl7dmFyIG1pblJvd3M9YXV0b3NpemUubWluUm93cyxtYXhSb3dzPWF1dG9zaXplLm1heFJvd3M7dGhpcy50ZXh0YXJlYUNhbGNTdHlsZT1jYWxjVGV4dGFyZWFIZWlnaHQodGhpcy4kcmVmcy50ZXh0YXJlYSxtaW5Sb3dzLG1heFJvd3MpfWVsc2UgdGhpcy50ZXh0YXJlYUNhbGNTdHlsZT17bWluSGVpZ2h0OmNhbGNUZXh0YXJlYUhlaWdodCh0aGlzLiRyZWZzLnRleHRhcmVhKS5taW5IZWlnaHR9fX0saGFuZGxlRm9jdXM6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuZm9jdXNlZD0hMCx0aGlzLiRlbWl0KCJmb2N1cyIsZXZlbnQpfSxoYW5kbGVDb21wb3NpdGlvbjpmdW5jdGlvbihldmVudCl7ImNvbXBvc2l0aW9uc3RhcnQiPT09ZXZlbnQudHlwZSYmKHRoaXMuaXNPbkNvbXBvc2l0aW9uPSEwKSwiY29tcG9zaXRpb25lbmQiPT09ZXZlbnQudHlwZSYmKHRoaXMuaXNPbkNvbXBvc2l0aW9uPSExLHRoaXMuaGFuZGxlSW5wdXQoZXZlbnQpKX0saGFuZGxlSW5wdXQ6ZnVuY3Rpb24oZXZlbnQpe3ZhciBfdGhpcz10aGlzO3RoaXMuaXNPbkNvbXBvc2l0aW9ufHxldmVudC50YXJnZXQudmFsdWUhPT10aGlzLm5hdGl2ZUlucHV0VmFsdWUmJih0aGlzLiRlbWl0KCJpbnB1dCIsZXZlbnQudGFyZ2V0LnZhbHVlKSx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzLmdldElucHV0KCkudmFsdWU9X3RoaXMudmFsdWV9KSl9LGhhbmRsZUNoYW5nZTpmdW5jdGlvbihldmVudCl7dGhpcy4kZW1pdCgiY2hhbmdlIixldmVudC50YXJnZXQudmFsdWUpfSxjYWxjSWNvbk9mZnNldDpmdW5jdGlvbihwbGFjZSl7dmFyIGVsTGlzdD1bXS5zbGljZS5jYWxsKHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIi5lbC1pbnB1dF9fIitwbGFjZSl8fFtdKTtpZihlbExpc3QubGVuZ3RoKXtmb3IodmFyIGVsPW51bGwsaT0wO2k8ZWxMaXN0Lmxlbmd0aDtpKyspaWYoZWxMaXN0W2ldLnBhcmVudE5vZGU9PT10aGlzLiRlbCl7ZWw9ZWxMaXN0W2ldO2JyZWFrfWlmKGVsKXt2YXIgcGVuZGFudD17c3VmZml4OiJhcHBlbmQiLHByZWZpeDoicHJlcGVuZCJ9W3BsYWNlXTt0aGlzLiRzbG90c1twZW5kYW50XT9lbC5zdHlsZS50cmFuc2Zvcm09InRyYW5zbGF0ZVgoIisoInN1ZmZpeCI9PT1wbGFjZT8iLSI6IiIpK3RoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoIi5lbC1pbnB1dC1ncm91cF9fIitwZW5kYW50KS5vZmZzZXRXaWR0aCsicHgpIjplbC5yZW1vdmVBdHRyaWJ1dGUoInN0eWxlIil9fX0sdXBkYXRlSWNvbk9mZnNldDpmdW5jdGlvbigpe3RoaXMuY2FsY0ljb25PZmZzZXQoInByZWZpeCIpLHRoaXMuY2FsY0ljb25PZmZzZXQoInN1ZmZpeCIpfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuJGVtaXQoImlucHV0IiwiIiksdGhpcy4kZW1pdCgiY2hhbmdlIiwiIiksdGhpcy4kZW1pdCgiY2xlYXIiKX0saGFuZGxlUGFzc3dvcmRWaXNpYmxlOmZ1bmN0aW9uKCl7dGhpcy5wYXNzd29yZFZpc2libGU9IXRoaXMucGFzc3dvcmRWaXNpYmxlLHRoaXMuZm9jdXMoKX0sZ2V0SW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcmVmcy5pbnB1dHx8dGhpcy4kcmVmcy50ZXh0YXJlYX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLiRvbigiaW5wdXRTZWxlY3QiLHRoaXMuc2VsZWN0KX0sbW91bnRlZDpmdW5jdGlvbigpe3RoaXMucmVzaXplVGV4dGFyZWEoKSx0aGlzLnVwZGF0ZUljb25PZmZzZXQoKX0sdXBkYXRlZDpmdW5jdGlvbigpe3RoaXMuJG5leHRUaWNrKHRoaXMudXBkYXRlSWNvbk9mZnNldCl9fSxpbnB1dHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzM0M2RkNzc0X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7aW5wdXRfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9pbnB1dC9zcmMvaW5wdXQudnVlIjt2YXIgaW5wdXQ9aW5wdXRfY29tcG9uZW50LmV4cG9ydHM7aW5wdXQuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoaW5wdXQubmFtZSxpbnB1dCl9O3ZhciBwYWNrYWdlc19pbnB1dD1pbnB1dCxpbnB1dF9udW1iZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF80MmY4Y2Y2Nl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtjbGFzczpbImVsLWlucHV0LW51bWJlciIsX3ZtLmlucHV0TnVtYmVyU2l6ZT8iZWwtaW5wdXQtbnVtYmVyLS0iK192bS5pbnB1dE51bWJlclNpemU6IiIseyJpcy1kaXNhYmxlZCI6X3ZtLmlucHV0TnVtYmVyRGlzYWJsZWR9LHsiaXMtd2l0aG91dC1jb250cm9scyI6IV92bS5jb250cm9sc30seyJpcy1jb250cm9scy1yaWdodCI6X3ZtLmNvbnRyb2xzQXRSaWdodH1dLG9uOntkcmFnc3RhcnQ6ZnVuY3Rpb24oJGV2ZW50KXskZXZlbnQucHJldmVudERlZmF1bHQoKX19fSxbX3ZtLmNvbnRyb2xzP19jKCJzcGFuIix7ZGlyZWN0aXZlczpbe25hbWU6InJlcGVhdC1jbGljayIscmF3TmFtZToidi1yZXBlYXQtY2xpY2siLHZhbHVlOl92bS5kZWNyZWFzZSxleHByZXNzaW9uOiJkZWNyZWFzZSJ9XSxzdGF0aWNDbGFzczoiZWwtaW5wdXQtbnVtYmVyX19kZWNyZWFzZSIsY2xhc3M6eyJpcy1kaXNhYmxlZCI6X3ZtLm1pbkRpc2FibGVkfSxhdHRyczp7cm9sZToiYnV0dG9uIn0sb246e2tleWRvd246ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4iYnV0dG9uImluICRldmVudHx8IV92bS5faygkZXZlbnQua2V5Q29kZSwiZW50ZXIiLDEzLCRldmVudC5rZXksIkVudGVyIik/X3ZtLmRlY3JlYXNlKCRldmVudCk6bnVsbH19fSxbX2MoImkiLHtjbGFzczoiZWwtaWNvbi0iKyhfdm0uY29udHJvbHNBdFJpZ2h0PyJhcnJvdy1kb3duIjoibWludXMiKX0pXSk6X3ZtLl9lKCksX3ZtLmNvbnRyb2xzP19jKCJzcGFuIix7ZGlyZWN0aXZlczpbe25hbWU6InJlcGVhdC1jbGljayIscmF3TmFtZToidi1yZXBlYXQtY2xpY2siLHZhbHVlOl92bS5pbmNyZWFzZSxleHByZXNzaW9uOiJpbmNyZWFzZSJ9XSxzdGF0aWNDbGFzczoiZWwtaW5wdXQtbnVtYmVyX19pbmNyZWFzZSIsY2xhc3M6eyJpcy1kaXNhYmxlZCI6X3ZtLm1heERpc2FibGVkfSxhdHRyczp7cm9sZToiYnV0dG9uIn0sb246e2tleWRvd246ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4iYnV0dG9uImluICRldmVudHx8IV92bS5faygkZXZlbnQua2V5Q29kZSwiZW50ZXIiLDEzLCRldmVudC5rZXksIkVudGVyIik/X3ZtLmluY3JlYXNlKCRldmVudCk6bnVsbH19fSxbX2MoImkiLHtjbGFzczoiZWwtaWNvbi0iKyhfdm0uY29udHJvbHNBdFJpZ2h0PyJhcnJvdy11cCI6InBsdXMiKX0pXSk6X3ZtLl9lKCksX2MoImVsLWlucHV0Iix7cmVmOiJpbnB1dCIsYXR0cnM6e3ZhbHVlOl92bS5kaXNwbGF5VmFsdWUscGxhY2Vob2xkZXI6X3ZtLnBsYWNlaG9sZGVyLGRpc2FibGVkOl92bS5pbnB1dE51bWJlckRpc2FibGVkLHNpemU6X3ZtLmlucHV0TnVtYmVyU2l6ZSxtYXg6X3ZtLm1heCxtaW46X3ZtLm1pbixuYW1lOl92bS5uYW1lLGxhYmVsOl92bS5sYWJlbH0sb246e2JsdXI6X3ZtLmhhbmRsZUJsdXIsZm9jdXM6X3ZtLmhhbmRsZUZvY3VzLGlucHV0Ol92bS5oYW5kbGVJbnB1dCxjaGFuZ2U6X3ZtLmhhbmRsZUlucHV0Q2hhbmdlfSxuYXRpdmVPbjp7a2V5ZG93bjpbZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4iYnV0dG9uImluICRldmVudHx8IV92bS5faygkZXZlbnQua2V5Q29kZSwidXAiLDM4LCRldmVudC5rZXksWyJVcCIsIkFycm93VXAiXSk/KCRldmVudC5wcmV2ZW50RGVmYXVsdCgpLF92bS5pbmNyZWFzZSgkZXZlbnQpKTpudWxsfSxmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJkb3duIiw0MCwkZXZlbnQua2V5LFsiRG93biIsIkFycm93RG93biJdKT8oJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLmRlY3JlYXNlKCRldmVudCkpOm51bGx9XX19KV0sMSl9O2lucHV0X251bWJlcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzQyZjhjZjY2X3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciByZXBlYXRfY2xpY2s9e2JpbmQ6ZnVuY3Rpb24oZWwsYmluZGluZyx2bm9kZSl7dmFyIGludGVydmFsPW51bGwsc3RhcnRUaW1lPXZvaWQgMCxoYW5kbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHZub2RlLmNvbnRleHRbYmluZGluZy5leHByZXNzaW9uXS5hcHBseSgpfSxjbGVhcj1mdW5jdGlvbigpe25ldyBEYXRlLXN0YXJ0VGltZTwxMDAmJmhhbmRsZXIoKSxjbGVhckludGVydmFsKGludGVydmFsKSxpbnRlcnZhbD1udWxsfTtPYmplY3QoZG9tXy5vbikoZWwsIm1vdXNlZG93biIsZnVuY3Rpb24oZSl7MD09PWUuYnV0dG9uJiYoc3RhcnRUaW1lPW5ldyBEYXRlLE9iamVjdChkb21fLm9uY2UpKGRvY3VtZW50LCJtb3VzZXVwIixjbGVhciksY2xlYXJJbnRlcnZhbChpbnRlcnZhbCksaW50ZXJ2YWw9c2V0SW50ZXJ2YWwoaGFuZGxlciwxMDApKX0pfX0saW5wdXRfbnVtYmVyX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsSW5wdXROdW1iZXIiLG1peGluczpbZm9jdXNfZGVmYXVsdCgpKCJpbnB1dCIpXSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn0sZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LGRpcmVjdGl2ZXM6e3JlcGVhdENsaWNrOnJlcGVhdF9jbGlja30sY29tcG9uZW50czp7RWxJbnB1dDppbnB1dF9kZWZhdWx0LmF9LHByb3BzOntzdGVwOnt0eXBlOk51bWJlcixkZWZhdWx0OjF9LG1heDp7dHlwZTpOdW1iZXIsZGVmYXVsdDoxLzB9LG1pbjp7dHlwZTpOdW1iZXIsZGVmYXVsdDotMS8wfSx2YWx1ZTp7fSxkaXNhYmxlZDpCb29sZWFuLHNpemU6U3RyaW5nLGNvbnRyb2xzOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sY29udHJvbHNQb3NpdGlvbjp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn0sbmFtZTpTdHJpbmcsbGFiZWw6U3RyaW5nLHBsYWNlaG9sZGVyOlN0cmluZyxwcmVjaXNpb246e3R5cGU6TnVtYmVyLHZhbGlkYXRvcjpmdW5jdGlvbih2YWwpe3JldHVybiAwPD12YWwmJnZhbD09PXBhcnNlSW50KHZhbCwxMCl9fX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntjdXJyZW50VmFsdWU6MCx1c2VySW5wdXQ6bnVsbH19LHdhdGNoOnt2YWx1ZTp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odmFsdWUpe3ZhciBuZXdWYWw9dm9pZCAwPT09dmFsdWU/dmFsdWU6TnVtYmVyKHZhbHVlKTtpZih2b2lkIDAhPT1uZXdWYWwpe2lmKGlzTmFOKG5ld1ZhbCkpcmV0dXJuO3ZvaWQgMCE9PXRoaXMucHJlY2lzaW9uJiYobmV3VmFsPXRoaXMudG9QcmVjaXNpb24obmV3VmFsLHRoaXMucHJlY2lzaW9uKSl9bmV3VmFsPj10aGlzLm1heCYmKG5ld1ZhbD10aGlzLm1heCksbmV3VmFsPD10aGlzLm1pbiYmKG5ld1ZhbD10aGlzLm1pbiksdGhpcy5jdXJyZW50VmFsdWU9bmV3VmFsLHRoaXMudXNlcklucHV0PW51bGwsdGhpcy4kZW1pdCgiaW5wdXQiLG5ld1ZhbCl9fX0sY29tcHV0ZWQ6e21pbkRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlY3JlYXNlKHRoaXMudmFsdWUsdGhpcy5zdGVwKTx0aGlzLm1pbn0sbWF4RGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5jcmVhc2UodGhpcy52YWx1ZSx0aGlzLnN0ZXApPnRoaXMubWF4fSxudW1QcmVjaXNpb246ZnVuY3Rpb24oKXt2YXIgdmFsdWU9dGhpcy52YWx1ZSxzdGVwPXRoaXMuc3RlcCxnZXRQcmVjaXNpb249dGhpcy5nZXRQcmVjaXNpb24scHJlY2lzaW9uPXRoaXMucHJlY2lzaW9uLHN0ZXBQcmVjaXNpb249Z2V0UHJlY2lzaW9uKHN0ZXApO3JldHVybiB2b2lkIDAhPT1wcmVjaXNpb24/KHByZWNpc2lvbjxzdGVwUHJlY2lzaW9uJiZjb25zb2xlLndhcm4oIltFbGVtZW50IFdhcm5dW0lucHV0TnVtYmVyXXByZWNpc2lvbiBzaG91bGQgbm90IGJlIGxlc3MgdGhhbiB0aGUgZGVjaW1hbCBwbGFjZXMgb2Ygc3RlcCIpLHByZWNpc2lvbik6TWF0aC5tYXgoZ2V0UHJlY2lzaW9uKHZhbHVlKSxzdGVwUHJlY2lzaW9uKX0sY29udHJvbHNBdFJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udHJvbHMmJiJyaWdodCI9PT10aGlzLmNvbnRyb2xzUG9zaXRpb259LF9lbEZvcm1JdGVtU2l6ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmVsRm9ybUl0ZW18fHt9KS5lbEZvcm1JdGVtU2l6ZX0saW5wdXROdW1iZXJTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZXx8dGhpcy5fZWxGb3JtSXRlbVNpemV8fCh0aGlzLiRFTEVNRU5UfHx7fSkuc2l6ZX0saW5wdXROdW1iZXJEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGVkfHwodGhpcy5lbEZvcm18fHt9KS5kaXNhYmxlZH0sZGlzcGxheVZhbHVlOmZ1bmN0aW9uKCl7aWYobnVsbCE9PXRoaXMudXNlcklucHV0KXJldHVybiB0aGlzLnVzZXJJbnB1dDt2YXIgY3VycmVudFZhbHVlPXRoaXMuY3VycmVudFZhbHVlO3JldHVybiJudW1iZXIiPT10eXBlb2YgY3VycmVudFZhbHVlJiZ2b2lkIDAhPT10aGlzLnByZWNpc2lvbj9jdXJyZW50VmFsdWUudG9GaXhlZCh0aGlzLnByZWNpc2lvbik6Y3VycmVudFZhbHVlfX0sbWV0aG9kczp7dG9QcmVjaXNpb246ZnVuY3Rpb24obnVtLHByZWNpc2lvbil7cmV0dXJuIHZvaWQgMD09PXByZWNpc2lvbiYmKHByZWNpc2lvbj10aGlzLm51bVByZWNpc2lvbikscGFyc2VGbG9hdChOdW1iZXIobnVtKS50b0ZpeGVkKHByZWNpc2lvbikpfSxnZXRQcmVjaXNpb246ZnVuY3Rpb24odmFsdWUpe2lmKHZvaWQgMD09PXZhbHVlKXJldHVybiAwO3ZhciB2YWx1ZVN0cmluZz12YWx1ZS50b1N0cmluZygpLGRvdFBvc2l0aW9uPXZhbHVlU3RyaW5nLmluZGV4T2YoIi4iKSxwcmVjaXNpb249MDtyZXR1cm4tMSE9PWRvdFBvc2l0aW9uJiYocHJlY2lzaW9uPXZhbHVlU3RyaW5nLmxlbmd0aC1kb3RQb3NpdGlvbi0xKSxwcmVjaXNpb259LF9pbmNyZWFzZTpmdW5jdGlvbih2YWwsc3RlcCl7aWYoIm51bWJlciIhPXR5cGVvZiB2YWwmJnZvaWQgMCE9PXZhbClyZXR1cm4gdGhpcy5jdXJyZW50VmFsdWU7dmFyIHByZWNpc2lvbkZhY3Rvcj1NYXRoLnBvdygxMCx0aGlzLm51bVByZWNpc2lvbik7cmV0dXJuIHRoaXMudG9QcmVjaXNpb24oKHByZWNpc2lvbkZhY3Rvcip2YWwrcHJlY2lzaW9uRmFjdG9yKnN0ZXApL3ByZWNpc2lvbkZhY3Rvcil9LF9kZWNyZWFzZTpmdW5jdGlvbih2YWwsc3RlcCl7aWYoIm51bWJlciIhPXR5cGVvZiB2YWwmJnZvaWQgMCE9PXZhbClyZXR1cm4gdGhpcy5jdXJyZW50VmFsdWU7dmFyIHByZWNpc2lvbkZhY3Rvcj1NYXRoLnBvdygxMCx0aGlzLm51bVByZWNpc2lvbik7cmV0dXJuIHRoaXMudG9QcmVjaXNpb24oKHByZWNpc2lvbkZhY3Rvcip2YWwtcHJlY2lzaW9uRmFjdG9yKnN0ZXApL3ByZWNpc2lvbkZhY3Rvcil9LGluY3JlYXNlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaW5wdXROdW1iZXJEaXNhYmxlZCYmIXRoaXMubWF4RGlzYWJsZWQpe3ZhciB2YWx1ZT10aGlzLnZhbHVlfHwwLG5ld1ZhbD10aGlzLl9pbmNyZWFzZSh2YWx1ZSx0aGlzLnN0ZXApO3RoaXMuc2V0Q3VycmVudFZhbHVlKG5ld1ZhbCl9fSxkZWNyZWFzZTpmdW5jdGlvbigpe2lmKCF0aGlzLmlucHV0TnVtYmVyRGlzYWJsZWQmJiF0aGlzLm1pbkRpc2FibGVkKXt2YXIgdmFsdWU9dGhpcy52YWx1ZXx8MCxuZXdWYWw9dGhpcy5fZGVjcmVhc2UodmFsdWUsdGhpcy5zdGVwKTt0aGlzLnNldEN1cnJlbnRWYWx1ZShuZXdWYWwpfX0saGFuZGxlQmx1cjpmdW5jdGlvbihldmVudCl7dGhpcy4kZW1pdCgiYmx1ciIsZXZlbnQpfSxoYW5kbGVGb2N1czpmdW5jdGlvbihldmVudCl7dGhpcy4kZW1pdCgiZm9jdXMiLGV2ZW50KX0sc2V0Q3VycmVudFZhbHVlOmZ1bmN0aW9uKG5ld1ZhbCl7dmFyIG9sZFZhbD10aGlzLmN1cnJlbnRWYWx1ZTsibnVtYmVyIj09dHlwZW9mIG5ld1ZhbCYmdm9pZCAwIT09dGhpcy5wcmVjaXNpb24mJihuZXdWYWw9dGhpcy50b1ByZWNpc2lvbihuZXdWYWwsdGhpcy5wcmVjaXNpb24pKSxuZXdWYWw+PXRoaXMubWF4JiYobmV3VmFsPXRoaXMubWF4KSxuZXdWYWw8PXRoaXMubWluJiYobmV3VmFsPXRoaXMubWluKSxvbGRWYWwhPT1uZXdWYWwmJih0aGlzLnVzZXJJbnB1dD1udWxsLHRoaXMuJGVtaXQoImlucHV0IixuZXdWYWwpLHRoaXMuJGVtaXQoImNoYW5nZSIsbmV3VmFsLG9sZFZhbCksdGhpcy5jdXJyZW50VmFsdWU9bmV3VmFsKX0saGFuZGxlSW5wdXQ6ZnVuY3Rpb24odmFsdWUpe3RoaXMudXNlcklucHV0PXZhbHVlfSxoYW5kbGVJbnB1dENoYW5nZTpmdW5jdGlvbih2YWx1ZSl7dmFyIG5ld1ZhbD0iIj09PXZhbHVlP3ZvaWQgMDpOdW1iZXIodmFsdWUpO2lzTmFOKG5ld1ZhbCkmJiIiIT09dmFsdWV8fHRoaXMuc2V0Q3VycmVudFZhbHVlKG5ld1ZhbCksdGhpcy51c2VySW5wdXQ9bnVsbH0sc2VsZWN0OmZ1bmN0aW9uKCl7dGhpcy4kcmVmcy5pbnB1dC5zZWxlY3QoKX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgaW5uZXJJbnB1dD10aGlzLiRyZWZzLmlucHV0LiRyZWZzLmlucHV0O2lubmVySW5wdXQuc2V0QXR0cmlidXRlKCJyb2xlIiwic3BpbmJ1dHRvbiIpLGlubmVySW5wdXQuc2V0QXR0cmlidXRlKCJhcmlhLXZhbHVlbWF4Iix0aGlzLm1heCksaW5uZXJJbnB1dC5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWVtaW4iLHRoaXMubWluKSxpbm5lcklucHV0LnNldEF0dHJpYnV0ZSgiYXJpYS12YWx1ZW5vdyIsdGhpcy5jdXJyZW50VmFsdWUpLGlubmVySW5wdXQuc2V0QXR0cmlidXRlKCJhcmlhLWRpc2FibGVkIix0aGlzLmlucHV0TnVtYmVyRGlzYWJsZWQpfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dGhpcy4kcmVmcyYmdGhpcy4kcmVmcy5pbnB1dCYmdGhpcy4kcmVmcy5pbnB1dC4kcmVmcy5pbnB1dC5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWVub3ciLHRoaXMuY3VycmVudFZhbHVlKX19LGlucHV0X251bWJlcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzQyZjhjZjY2X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7aW5wdXRfbnVtYmVyX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvaW5wdXQtbnVtYmVyL3NyYy9pbnB1dC1udW1iZXIudnVlIjt2YXIgaW5wdXRfbnVtYmVyPWlucHV0X251bWJlcl9jb21wb25lbnQuZXhwb3J0cztpbnB1dF9udW1iZXIuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoaW5wdXRfbnVtYmVyLm5hbWUsaW5wdXRfbnVtYmVyKX07dmFyIHBhY2thZ2VzX2lucHV0X251bWJlcj1pbnB1dF9udW1iZXIscmFkaW92dWVfdHlwZV90ZW1wbGF0ZV9pZF82OWNkNjI2OF9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJsYWJlbCIse3N0YXRpY0NsYXNzOiJlbC1yYWRpbyIsY2xhc3M6W192bS5ib3JkZXImJl92bS5yYWRpb1NpemU/ImVsLXJhZGlvLS0iK192bS5yYWRpb1NpemU6IiIseyJpcy1kaXNhYmxlZCI6X3ZtLmlzRGlzYWJsZWR9LHsiaXMtZm9jdXMiOl92bS5mb2N1c30seyJpcy1ib3JkZXJlZCI6X3ZtLmJvcmRlcn0seyJpcy1jaGVja2VkIjpfdm0ubW9kZWw9PT1fdm0ubGFiZWx9XSxhdHRyczp7cm9sZToicmFkaW8iLCJhcmlhLWNoZWNrZWQiOl92bS5tb2RlbD09PV92bS5sYWJlbCwiYXJpYS1kaXNhYmxlZCI6X3ZtLmlzRGlzYWJsZWQsdGFiaW5kZXg6X3ZtLnRhYkluZGV4fSxvbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsInNwYWNlIiwzMiwkZXZlbnQua2V5LFsiICIsIlNwYWNlYmFyIl0pKXJldHVybiBudWxsOyRldmVudC5zdG9wUHJvcGFnYXRpb24oKSwkZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0ubW9kZWw9X3ZtLmlzRGlzYWJsZWQ/X3ZtLm1vZGVsOl92bS5sYWJlbH19fSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtcmFkaW9fX2lucHV0IixjbGFzczp7ImlzLWRpc2FibGVkIjpfdm0uaXNEaXNhYmxlZCwiaXMtY2hlY2tlZCI6X3ZtLm1vZGVsPT09X3ZtLmxhYmVsfX0sW19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXJhZGlvX19pbm5lciJ9KSxfYygiaW5wdXQiLHtkaXJlY3RpdmVzOlt7bmFtZToibW9kZWwiLHJhd05hbWU6InYtbW9kZWwiLHZhbHVlOl92bS5tb2RlbCxleHByZXNzaW9uOiJtb2RlbCJ9XSxzdGF0aWNDbGFzczoiZWwtcmFkaW9fX29yaWdpbmFsIixhdHRyczp7dHlwZToicmFkaW8iLCJhcmlhLWhpZGRlbiI6InRydWUiLG5hbWU6X3ZtLm5hbWUsZGlzYWJsZWQ6X3ZtLmlzRGlzYWJsZWQsdGFiaW5kZXg6Ii0xIn0sZG9tUHJvcHM6e3ZhbHVlOl92bS5sYWJlbCxjaGVja2VkOl92bS5fcShfdm0ubW9kZWwsX3ZtLmxhYmVsKX0sb246e2ZvY3VzOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmZvY3VzPSEwfSxibHVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmZvY3VzPSExfSxjaGFuZ2U6W2Z1bmN0aW9uKCRldmVudCl7X3ZtLm1vZGVsPV92bS5sYWJlbH0sX3ZtLmhhbmRsZUNoYW5nZV19fSldKSxfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1yYWRpb19fbGFiZWwiLG9uOntrZXlkb3duOmZ1bmN0aW9uKCRldmVudCl7JGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpfX19LFtfdm0uX3QoImRlZmF1bHQiKSxfdm0uJHNsb3RzLmRlZmF1bHQ/X3ZtLl9lKCk6W192bS5fdihfdm0uX3MoX3ZtLmxhYmVsKSldXSwyKV0pfTtyYWRpb3Z1ZV90eXBlX3RlbXBsYXRlX2lkXzY5Y2Q2MjY4X3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciByYWRpb19jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFJhZGlvIixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hXSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn0sZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LGNvbXBvbmVudE5hbWU6IkVsUmFkaW8iLHByb3BzOnt2YWx1ZTp7fSxsYWJlbDp7fSxkaXNhYmxlZDpCb29sZWFuLG5hbWU6U3RyaW5nLGJvcmRlcjpCb29sZWFuLHNpemU6U3RyaW5nfSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2ZvY3VzOiExfX0sY29tcHV0ZWQ6e2lzR3JvdXA6ZnVuY3Rpb24oKXtmb3IodmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7cGFyZW50Oyl7aWYoIkVsUmFkaW9Hcm91cCI9PT1wYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZSlyZXR1cm4gdGhpcy5fcmFkaW9Hcm91cD1wYXJlbnQsITA7cGFyZW50PXBhcmVudC4kcGFyZW50fXJldHVybiExfSxtb2RlbDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNHcm91cD90aGlzLl9yYWRpb0dyb3VwLnZhbHVlOnRoaXMudmFsdWV9LHNldDpmdW5jdGlvbih2YWwpe3RoaXMuaXNHcm91cD90aGlzLmRpc3BhdGNoKCJFbFJhZGlvR3JvdXAiLCJpbnB1dCIsW3ZhbF0pOnRoaXMuJGVtaXQoImlucHV0Iix2YWwpfX0sX2VsRm9ybUl0ZW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuZWxGb3JtSXRlbXx8e30pLmVsRm9ybUl0ZW1TaXplfSxyYWRpb1NpemU6ZnVuY3Rpb24oKXt2YXIgdGVtUmFkaW9TaXplPXRoaXMuc2l6ZXx8dGhpcy5fZWxGb3JtSXRlbVNpemV8fCh0aGlzLiRFTEVNRU5UfHx7fSkuc2l6ZTtyZXR1cm4gdGhpcy5pc0dyb3VwJiZ0aGlzLl9yYWRpb0dyb3VwLnJhZGlvR3JvdXBTaXplfHx0ZW1SYWRpb1NpemV9LGlzRGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0dyb3VwP3RoaXMuX3JhZGlvR3JvdXAuZGlzYWJsZWR8fHRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkOnRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfSx0YWJJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzYWJsZWR8fHRoaXMuaXNHcm91cCYmdGhpcy5tb2RlbCE9PXRoaXMubGFiZWw/LTE6MH19LG1ldGhvZHM6e2hhbmRsZUNoYW5nZTpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzO3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7X3RoaXMuJGVtaXQoImNoYW5nZSIsX3RoaXMubW9kZWwpLF90aGlzLmlzR3JvdXAmJl90aGlzLmRpc3BhdGNoKCJFbFJhZGlvR3JvdXAiLCJoYW5kbGVDaGFuZ2UiLF90aGlzLm1vZGVsKX0pfX19LHJhZGlvdnVlX3R5cGVfdGVtcGxhdGVfaWRfNjljZDYyNjhfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtyYWRpb19jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3JhZGlvL3NyYy9yYWRpby52dWUiO3ZhciBzcmNfcmFkaW89cmFkaW9fY29tcG9uZW50LmV4cG9ydHM7c3JjX3JhZGlvLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHNyY19yYWRpby5uYW1lLHNyY19yYWRpbyl9O3ZhciBwYWNrYWdlc19yYWRpbz1zcmNfcmFkaW8scmFkaW9fZ3JvdXB2dWVfdHlwZV90ZW1wbGF0ZV9pZF84MThhNzA0Y19yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudDtyZXR1cm4odGhpcy5fc2VsZi5fY3x8X2gpKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcmFkaW8tZ3JvdXAiLGF0dHJzOntyb2xlOiJyYWRpb2dyb3VwIn0sb246e2tleWRvd246dGhpcy5oYW5kbGVLZXlkb3dufX0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMil9O3JhZGlvX2dyb3VwdnVlX3R5cGVfdGVtcGxhdGVfaWRfODE4YTcwNGNfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGtleUNvZGU9T2JqZWN0LmZyZWV6ZSh7TEVGVDozNyxVUDozOCxSSUdIVDozOSxET1dOOjQwfSkscmFkaW9fZ3JvdXBfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxSYWRpb0dyb3VwIixjb21wb25lbnROYW1lOiJFbFJhZGlvR3JvdXAiLGluamVjdDp7ZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LG1peGluczpbZW1pdHRlcl9kZWZhdWx0LmFdLHByb3BzOnt2YWx1ZTp7fSxzaXplOlN0cmluZyxmaWxsOlN0cmluZyx0ZXh0Q29sb3I6U3RyaW5nLGRpc2FibGVkOkJvb2xlYW59LGNvbXB1dGVkOntfZWxGb3JtSXRlbVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5lbEZvcm1JdGVtfHx7fSkuZWxGb3JtSXRlbVNpemV9LHJhZGlvR3JvdXBTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZXx8dGhpcy5fZWxGb3JtSXRlbVNpemV8fCh0aGlzLiRFTEVNRU5UfHx7fSkuc2l6ZX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLiRvbigiaGFuZGxlQ2hhbmdlIixmdW5jdGlvbih2YWx1ZSl7X3RoaXMuJGVtaXQoImNoYW5nZSIsdmFsdWUpfSl9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgcmFkaW9zPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0eXBlPXJhZGlvXSIpLGZpcnN0TGFiZWw9dGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgiW3JvbGU9cmFkaW9dIilbMF07IVtdLnNvbWUuY2FsbChyYWRpb3MsZnVuY3Rpb24ocmFkaW8pe3JldHVybiByYWRpby5jaGVja2VkfSkmJmZpcnN0TGFiZWwmJihmaXJzdExhYmVsLnRhYkluZGV4PTApfSxtZXRob2RzOntoYW5kbGVLZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0YXJnZXQ9ZS50YXJnZXQsY2xhc3NOYW1lPSJJTlBVVCI9PT10YXJnZXQubm9kZU5hbWU/Ilt0eXBlPXJhZGlvXSI6Iltyb2xlPXJhZGlvXSIscmFkaW9zPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoY2xhc3NOYW1lKSxsZW5ndGg9cmFkaW9zLmxlbmd0aCxpbmRleD1bXS5pbmRleE9mLmNhbGwocmFkaW9zLHRhcmdldCkscm9sZVJhZGlvcz10aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCJbcm9sZT1yYWRpb10iKTtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGtleUNvZGUuTEVGVDpjYXNlIGtleUNvZGUuVVA6ZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksMD09PWluZGV4Pyhyb2xlUmFkaW9zW2xlbmd0aC0xXS5jbGljaygpLHJvbGVSYWRpb3NbbGVuZ3RoLTFdLmZvY3VzKCkpOihyb2xlUmFkaW9zW2luZGV4LTFdLmNsaWNrKCkscm9sZVJhZGlvc1tpbmRleC0xXS5mb2N1cygpKTticmVhaztjYXNlIGtleUNvZGUuUklHSFQ6Y2FzZSBrZXlDb2RlLkRPV046aW5kZXg9PT1sZW5ndGgtMT8oZS5zdG9wUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCkscm9sZVJhZGlvc1swXS5jbGljaygpLHJvbGVSYWRpb3NbMF0uZm9jdXMoKSk6KHJvbGVSYWRpb3NbaW5kZXgrMV0uY2xpY2soKSxyb2xlUmFkaW9zW2luZGV4KzFdLmZvY3VzKCkpfX19LHdhdGNoOnt2YWx1ZTpmdW5jdGlvbihfdmFsdWUpe3RoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmNoYW5nZSIsW3RoaXMudmFsdWVdKX19fSxyYWRpb19ncm91cHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzgxOGE3MDRjX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7cmFkaW9fZ3JvdXBfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9yYWRpby9zcmMvcmFkaW8tZ3JvdXAudnVlIjt2YXIgcmFkaW9fZ3JvdXA9cmFkaW9fZ3JvdXBfY29tcG9uZW50LmV4cG9ydHM7cmFkaW9fZ3JvdXAuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQocmFkaW9fZ3JvdXAubmFtZSxyYWRpb19ncm91cCl9O3ZhciBwYWNrYWdlc19yYWRpb19ncm91cD1yYWRpb19ncm91cCxyYWRpb19idXR0b252dWVfdHlwZV90ZW1wbGF0ZV9pZF8xOGE3N2EzMl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJsYWJlbCIse3N0YXRpY0NsYXNzOiJlbC1yYWRpby1idXR0b24iLGNsYXNzOltfdm0uc2l6ZT8iZWwtcmFkaW8tYnV0dG9uLS0iK192bS5zaXplOiIiLHsiaXMtYWN0aXZlIjpfdm0udmFsdWU9PT1fdm0ubGFiZWx9LHsiaXMtZGlzYWJsZWQiOl92bS5pc0Rpc2FibGVkfSx7ImlzLWZvY3VzIjpfdm0uZm9jdXN9XSxhdHRyczp7cm9sZToicmFkaW8iLCJhcmlhLWNoZWNrZWQiOl92bS52YWx1ZT09PV92bS5sYWJlbCwiYXJpYS1kaXNhYmxlZCI6X3ZtLmlzRGlzYWJsZWQsdGFiaW5kZXg6X3ZtLnRhYkluZGV4fSxvbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsInNwYWNlIiwzMiwkZXZlbnQua2V5LFsiICIsIlNwYWNlYmFyIl0pKXJldHVybiBudWxsOyRldmVudC5zdG9wUHJvcGFnYXRpb24oKSwkZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0udmFsdWU9X3ZtLmlzRGlzYWJsZWQ/X3ZtLnZhbHVlOl92bS5sYWJlbH19fSxbX2MoImlucHV0Iix7ZGlyZWN0aXZlczpbe25hbWU6Im1vZGVsIixyYXdOYW1lOiJ2LW1vZGVsIix2YWx1ZTpfdm0udmFsdWUsZXhwcmVzc2lvbjoidmFsdWUifV0sc3RhdGljQ2xhc3M6ImVsLXJhZGlvLWJ1dHRvbl9fb3JpZy1yYWRpbyIsYXR0cnM6e3R5cGU6InJhZGlvIixuYW1lOl92bS5uYW1lLGRpc2FibGVkOl92bS5pc0Rpc2FibGVkLHRhYmluZGV4OiItMSJ9LGRvbVByb3BzOnt2YWx1ZTpfdm0ubGFiZWwsY2hlY2tlZDpfdm0uX3EoX3ZtLnZhbHVlLF92bS5sYWJlbCl9LG9uOntjaGFuZ2U6W2Z1bmN0aW9uKCRldmVudCl7X3ZtLnZhbHVlPV92bS5sYWJlbH0sX3ZtLmhhbmRsZUNoYW5nZV0sZm9jdXM6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uZm9jdXM9ITB9LGJsdXI6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uZm9jdXM9ITF9fX0pLF9jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXJhZGlvLWJ1dHRvbl9faW5uZXIiLHN0eWxlOl92bS52YWx1ZT09PV92bS5sYWJlbD9fdm0uYWN0aXZlU3R5bGU6bnVsbCxvbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpeyRldmVudC5zdG9wUHJvcGFnYXRpb24oKX19fSxbX3ZtLl90KCJkZWZhdWx0IiksX3ZtLiRzbG90cy5kZWZhdWx0P192bS5fZSgpOltfdm0uX3YoX3ZtLl9zKF92bS5sYWJlbCkpXV0sMildKX07cmFkaW9fYnV0dG9udnVlX3R5cGVfdGVtcGxhdGVfaWRfMThhNzdhMzJfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHJhZGlvX2J1dHRvbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFJhZGlvQnV0dG9uIixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hXSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn0sZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LHByb3BzOntsYWJlbDp7fSxkaXNhYmxlZDpCb29sZWFuLG5hbWU6U3RyaW5nfSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2ZvY3VzOiExfX0sY29tcHV0ZWQ6e3ZhbHVlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmFkaW9Hcm91cC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHZhbHVlKXt0aGlzLl9yYWRpb0dyb3VwLiRlbWl0KCJpbnB1dCIsdmFsdWUpfX0sX3JhZGlvR3JvdXA6ZnVuY3Rpb24oKXtmb3IodmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7cGFyZW50Oyl7aWYoIkVsUmFkaW9Hcm91cCI9PT1wYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZSlyZXR1cm4gcGFyZW50O3BhcmVudD1wYXJlbnQuJHBhcmVudH1yZXR1cm4hMX0sYWN0aXZlU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm57YmFja2dyb3VuZENvbG9yOnRoaXMuX3JhZGlvR3JvdXAuZmlsbHx8IiIsYm9yZGVyQ29sb3I6dGhpcy5fcmFkaW9Hcm91cC5maWxsfHwiIixib3hTaGFkb3c6dGhpcy5fcmFkaW9Hcm91cC5maWxsPyItMXB4IDAgMCAwICIrdGhpcy5fcmFkaW9Hcm91cC5maWxsOiIiLGNvbG9yOnRoaXMuX3JhZGlvR3JvdXAudGV4dENvbG9yfHwiIn19LF9lbEZvcm1JdGVtU2l6ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmVsRm9ybUl0ZW18fHt9KS5lbEZvcm1JdGVtU2l6ZX0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yYWRpb0dyb3VwLnJhZGlvR3JvdXBTaXplfHx0aGlzLl9lbEZvcm1JdGVtU2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfSxpc0Rpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzYWJsZWR8fHRoaXMuX3JhZGlvR3JvdXAuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfSx0YWJJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRGlzYWJsZWR8fHRoaXMuX3JhZGlvR3JvdXAmJnRoaXMudmFsdWUhPT10aGlzLmxhYmVsPy0xOjB9fSxtZXRob2RzOntoYW5kbGVDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzLmRpc3BhdGNoKCJFbFJhZGlvR3JvdXAiLCJoYW5kbGVDaGFuZ2UiLF90aGlzLnZhbHVlKX0pfX19LHJhZGlvX2J1dHRvbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzE4YTc3YTMyX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7cmFkaW9fYnV0dG9uX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvcmFkaW8vc3JjL3JhZGlvLWJ1dHRvbi52dWUiO3ZhciByYWRpb19idXR0b249cmFkaW9fYnV0dG9uX2NvbXBvbmVudC5leHBvcnRzO3JhZGlvX2J1dHRvbi5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChyYWRpb19idXR0b24ubmFtZSxyYWRpb19idXR0b24pfTt2YXIgcGFja2FnZXNfcmFkaW9fYnV0dG9uPXJhZGlvX2J1dHRvbixjaGVja2JveHZ1ZV90eXBlX3RlbXBsYXRlX2lkX2QwMzg3MDc0X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImxhYmVsIix7c3RhdGljQ2xhc3M6ImVsLWNoZWNrYm94IixjbGFzczpbX3ZtLmJvcmRlciYmX3ZtLmNoZWNrYm94U2l6ZT8iZWwtY2hlY2tib3gtLSIrX3ZtLmNoZWNrYm94U2l6ZToiIix7ImlzLWRpc2FibGVkIjpfdm0uaXNEaXNhYmxlZH0seyJpcy1ib3JkZXJlZCI6X3ZtLmJvcmRlcn0seyJpcy1jaGVja2VkIjpfdm0uaXNDaGVja2VkfV0sYXR0cnM6e3JvbGU6ImNoZWNrYm94IiwiYXJpYS1jaGVja2VkIjpfdm0uaW5kZXRlcm1pbmF0ZT8ibWl4ZWQiOl92bS5pc0NoZWNrZWQsImFyaWEtZGlzYWJsZWQiOl92bS5pc0Rpc2FibGVkLGlkOl92bS5pZH19LFtfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1jaGVja2JveF9faW5wdXQiLGNsYXNzOnsiaXMtZGlzYWJsZWQiOl92bS5pc0Rpc2FibGVkLCJpcy1jaGVja2VkIjpfdm0uaXNDaGVja2VkLCJpcy1pbmRldGVybWluYXRlIjpfdm0uaW5kZXRlcm1pbmF0ZSwiaXMtZm9jdXMiOl92bS5mb2N1c30sYXR0cnM6eyJhcmlhLWNoZWNrZWQiOiJtaXhlZCJ9fSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtY2hlY2tib3hfX2lubmVyIn0pLF92bS50cnVlTGFiZWx8fF92bS5mYWxzZUxhYmVsP19jKCJpbnB1dCIse2RpcmVjdGl2ZXM6W3tuYW1lOiJtb2RlbCIscmF3TmFtZToidi1tb2RlbCIsdmFsdWU6X3ZtLm1vZGVsLGV4cHJlc3Npb246Im1vZGVsIn1dLHN0YXRpY0NsYXNzOiJlbC1jaGVja2JveF9fb3JpZ2luYWwiLGF0dHJzOnt0eXBlOiJjaGVja2JveCIsImFyaWEtaGlkZGVuIjoidHJ1ZSIsbmFtZTpfdm0ubmFtZSxkaXNhYmxlZDpfdm0uaXNEaXNhYmxlZCwidHJ1ZS12YWx1ZSI6X3ZtLnRydWVMYWJlbCwiZmFsc2UtdmFsdWUiOl92bS5mYWxzZUxhYmVsfSxkb21Qcm9wczp7Y2hlY2tlZDpBcnJheS5pc0FycmF5KF92bS5tb2RlbCk/LTE8X3ZtLl9pKF92bS5tb2RlbCxudWxsKTpfdm0uX3EoX3ZtLm1vZGVsLF92bS50cnVlTGFiZWwpfSxvbjp7Y2hhbmdlOltmdW5jdGlvbigkZXZlbnQpe3ZhciAkJGE9X3ZtLm1vZGVsLCQkZWw9JGV2ZW50LnRhcmdldCwkJGM9JCRlbC5jaGVja2VkP192bS50cnVlTGFiZWw6X3ZtLmZhbHNlTGFiZWw7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCRpPV92bS5faSgkJGEsbnVsbCk7JCRlbC5jaGVja2VkPyQkaTwwJiYoX3ZtLm1vZGVsPSQkYS5jb25jYXQoW251bGxdKSk6LTE8JCRpJiYoX3ZtLm1vZGVsPSQkYS5zbGljZSgwLCQkaSkuY29uY2F0KCQkYS5zbGljZSgkJGkrMSkpKX1lbHNlIF92bS5tb2RlbD0kJGN9LF92bS5oYW5kbGVDaGFuZ2VdLGZvY3VzOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmZvY3VzPSEwfSxibHVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmZvY3VzPSExfX19KTpfYygiaW5wdXQiLHtkaXJlY3RpdmVzOlt7bmFtZToibW9kZWwiLHJhd05hbWU6InYtbW9kZWwiLHZhbHVlOl92bS5tb2RlbCxleHByZXNzaW9uOiJtb2RlbCJ9XSxzdGF0aWNDbGFzczoiZWwtY2hlY2tib3hfX29yaWdpbmFsIixhdHRyczp7dHlwZToiY2hlY2tib3giLCJhcmlhLWhpZGRlbiI6InRydWUiLGRpc2FibGVkOl92bS5pc0Rpc2FibGVkLG5hbWU6X3ZtLm5hbWV9LGRvbVByb3BzOnt2YWx1ZTpfdm0ubGFiZWwsY2hlY2tlZDpBcnJheS5pc0FycmF5KF92bS5tb2RlbCk/LTE8X3ZtLl9pKF92bS5tb2RlbCxfdm0ubGFiZWwpOl92bS5tb2RlbH0sb246e2NoYW5nZTpbZnVuY3Rpb24oJGV2ZW50KXt2YXIgJCRhPV92bS5tb2RlbCwkJGVsPSRldmVudC50YXJnZXQsJCRjPSEhJCRlbC5jaGVja2VkO2lmKEFycmF5LmlzQXJyYXkoJCRhKSl7dmFyICQkdj1fdm0ubGFiZWwsJCRpPV92bS5faSgkJGEsJCR2KTskJGVsLmNoZWNrZWQ/JCRpPDAmJihfdm0ubW9kZWw9JCRhLmNvbmNhdChbJCR2XSkpOi0xPCQkaSYmKF92bS5tb2RlbD0kJGEuc2xpY2UoMCwkJGkpLmNvbmNhdCgkJGEuc2xpY2UoJCRpKzEpKSl9ZWxzZSBfdm0ubW9kZWw9JCRjfSxfdm0uaGFuZGxlQ2hhbmdlXSxmb2N1czpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1cz0hMH0sYmx1cjpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1cz0hMX19fSldKSxfdm0uJHNsb3RzLmRlZmF1bHR8fF92bS5sYWJlbD9fYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1jaGVja2JveF9fbGFiZWwifSxbX3ZtLl90KCJkZWZhdWx0IiksX3ZtLiRzbG90cy5kZWZhdWx0P192bS5fZSgpOltfdm0uX3YoX3ZtLl9zKF92bS5sYWJlbCkpXV0sMik6X3ZtLl9lKCldKX07Y2hlY2tib3h2dWVfdHlwZV90ZW1wbGF0ZV9pZF9kMDM4NzA3NF9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgY2hlY2tib3hfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxDaGVja2JveCIsbWl4aW5zOltlbWl0dGVyX2RlZmF1bHQuYV0saW5qZWN0OntlbEZvcm06e2RlZmF1bHQ6IiJ9LGVsRm9ybUl0ZW06e2RlZmF1bHQ6IiJ9fSxjb21wb25lbnROYW1lOiJFbENoZWNrYm94IixkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3NlbGZNb2RlbDohMSxmb2N1czohMSxpc0xpbWl0RXhjZWVkZWQ6ITF9fSxjb21wdXRlZDp7bW9kZWw6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzR3JvdXA/dGhpcy5zdG9yZTp2b2lkIDAhPT10aGlzLnZhbHVlP3RoaXMudmFsdWU6dGhpcy5zZWxmTW9kZWx9LHNldDpmdW5jdGlvbih2YWwpe3RoaXMuaXNHcm91cD8odGhpcy5pc0xpbWl0RXhjZWVkZWQ9ITEsdm9pZCAwIT09dGhpcy5fY2hlY2tib3hHcm91cC5taW4mJnZhbC5sZW5ndGg8dGhpcy5fY2hlY2tib3hHcm91cC5taW4mJih0aGlzLmlzTGltaXRFeGNlZWRlZD0hMCksdm9pZCAwIT09dGhpcy5fY2hlY2tib3hHcm91cC5tYXgmJnZhbC5sZW5ndGg+dGhpcy5fY2hlY2tib3hHcm91cC5tYXgmJih0aGlzLmlzTGltaXRFeGNlZWRlZD0hMCksITE9PT10aGlzLmlzTGltaXRFeGNlZWRlZCYmdGhpcy5kaXNwYXRjaCgiRWxDaGVja2JveEdyb3VwIiwiaW5wdXQiLFt2YWxdKSk6KHRoaXMuJGVtaXQoImlucHV0Iix2YWwpLHRoaXMuc2VsZk1vZGVsPXZhbCl9fSxpc0NoZWNrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBCb29sZWFuXSI9PT17fS50b1N0cmluZy5jYWxsKHRoaXMubW9kZWwpP3RoaXMubW9kZWw6QXJyYXkuaXNBcnJheSh0aGlzLm1vZGVsKT8tMTx0aGlzLm1vZGVsLmluZGV4T2YodGhpcy5sYWJlbCk6bnVsbCE9PXRoaXMubW9kZWwmJnZvaWQgMCE9PXRoaXMubW9kZWw/dGhpcy5tb2RlbD09PXRoaXMudHJ1ZUxhYmVsOnZvaWQgMH0saXNHcm91cDpmdW5jdGlvbigpe2Zvcih2YXIgcGFyZW50PXRoaXMuJHBhcmVudDtwYXJlbnQ7KXtpZigiRWxDaGVja2JveEdyb3VwIj09PXBhcmVudC4kb3B0aW9ucy5jb21wb25lbnROYW1lKXJldHVybiB0aGlzLl9jaGVja2JveEdyb3VwPXBhcmVudCwhMDtwYXJlbnQ9cGFyZW50LiRwYXJlbnR9cmV0dXJuITF9LHN0b3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrYm94R3JvdXA/dGhpcy5fY2hlY2tib3hHcm91cC52YWx1ZTp0aGlzLnZhbHVlfSxpc0Rpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNHcm91cD90aGlzLl9jaGVja2JveEdyb3VwLmRpc2FibGVkfHx0aGlzLmRpc2FibGVkfHwodGhpcy5lbEZvcm18fHt9KS5kaXNhYmxlZDp0aGlzLmRpc2FibGVkfHwodGhpcy5lbEZvcm18fHt9KS5kaXNhYmxlZH0sX2VsRm9ybUl0ZW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuZWxGb3JtSXRlbXx8e30pLmVsRm9ybUl0ZW1TaXplfSxjaGVja2JveFNpemU6ZnVuY3Rpb24oKXt2YXIgdGVtQ2hlY2tib3hTaXplPXRoaXMuc2l6ZXx8dGhpcy5fZWxGb3JtSXRlbVNpemV8fCh0aGlzLiRFTEVNRU5UfHx7fSkuc2l6ZTtyZXR1cm4gdGhpcy5pc0dyb3VwJiZ0aGlzLl9jaGVja2JveEdyb3VwLmNoZWNrYm94R3JvdXBTaXplfHx0ZW1DaGVja2JveFNpemV9fSxwcm9wczp7dmFsdWU6e30sbGFiZWw6e30saW5kZXRlcm1pbmF0ZTpCb29sZWFuLGRpc2FibGVkOkJvb2xlYW4sY2hlY2tlZDpCb29sZWFuLG5hbWU6U3RyaW5nLHRydWVMYWJlbDpbU3RyaW5nLE51bWJlcl0sZmFsc2VMYWJlbDpbU3RyaW5nLE51bWJlcl0saWQ6U3RyaW5nLGNvbnRyb2xzOlN0cmluZyxib3JkZXI6Qm9vbGVhbixzaXplOlN0cmluZ30sbWV0aG9kczp7YWRkVG9TdG9yZTpmdW5jdGlvbigpe0FycmF5LmlzQXJyYXkodGhpcy5tb2RlbCkmJi0xPT09dGhpcy5tb2RlbC5pbmRleE9mKHRoaXMubGFiZWwpP3RoaXMubW9kZWwucHVzaCh0aGlzLmxhYmVsKTp0aGlzLm1vZGVsPXRoaXMudHJ1ZUxhYmVsfHwhMH0saGFuZGxlQ2hhbmdlOmZ1bmN0aW9uKGV2KXt2YXIgX3RoaXM9dGhpcztpZighdGhpcy5pc0xpbWl0RXhjZWVkZWQpe3ZhciB2YWx1ZT12b2lkIDA7dmFsdWU9ZXYudGFyZ2V0LmNoZWNrZWQ/dm9pZCAwPT09dGhpcy50cnVlTGFiZWx8fHRoaXMudHJ1ZUxhYmVsOnZvaWQgMCE9PXRoaXMuZmFsc2VMYWJlbCYmdGhpcy5mYWxzZUxhYmVsLHRoaXMuJGVtaXQoImNoYW5nZSIsdmFsdWUsZXYpLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7X3RoaXMuaXNHcm91cCYmX3RoaXMuZGlzcGF0Y2goIkVsQ2hlY2tib3hHcm91cCIsImNoYW5nZSIsW190aGlzLl9jaGVja2JveEdyb3VwLnZhbHVlXSl9KX19fSxjcmVhdGVkOmZ1bmN0aW9uKCl7dGhpcy5jaGVja2VkJiZ0aGlzLmFkZFRvU3RvcmUoKX0sbW91bnRlZDpmdW5jdGlvbigpe3RoaXMuaW5kZXRlcm1pbmF0ZSYmdGhpcy4kZWwuc2V0QXR0cmlidXRlKCJhcmlhLWNvbnRyb2xzIix0aGlzLmNvbnRyb2xzKX0sd2F0Y2g6e3ZhbHVlOmZ1bmN0aW9uKF92YWx1ZSl7dGhpcy5kaXNwYXRjaCgiRWxGb3JtSXRlbSIsImVsLmZvcm0uY2hhbmdlIixfdmFsdWUpfX19LGNoZWNrYm94dnVlX3R5cGVfdGVtcGxhdGVfaWRfZDAzODcwNzRfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtjaGVja2JveF9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2NoZWNrYm94L3NyYy9jaGVja2JveC52dWUiO3ZhciBzcmNfY2hlY2tib3g9Y2hlY2tib3hfY29tcG9uZW50LmV4cG9ydHM7c3JjX2NoZWNrYm94Lmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHNyY19jaGVja2JveC5uYW1lLHNyY19jaGVja2JveCl9O3ZhciBwYWNrYWdlc19jaGVja2JveD1zcmNfY2hlY2tib3gsY2hlY2tib3hfYnV0dG9udnVlX3R5cGVfdGVtcGxhdGVfaWRfNDc4ZTkwNmVfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygibGFiZWwiLHtzdGF0aWNDbGFzczoiZWwtY2hlY2tib3gtYnV0dG9uIixjbGFzczpbX3ZtLnNpemU/ImVsLWNoZWNrYm94LWJ1dHRvbi0tIitfdm0uc2l6ZToiIix7ImlzLWRpc2FibGVkIjpfdm0uaXNEaXNhYmxlZH0seyJpcy1jaGVja2VkIjpfdm0uaXNDaGVja2VkfSx7ImlzLWZvY3VzIjpfdm0uZm9jdXN9XSxhdHRyczp7cm9sZToiY2hlY2tib3giLCJhcmlhLWNoZWNrZWQiOl92bS5pc0NoZWNrZWQsImFyaWEtZGlzYWJsZWQiOl92bS5pc0Rpc2FibGVkfX0sW192bS50cnVlTGFiZWx8fF92bS5mYWxzZUxhYmVsP19jKCJpbnB1dCIse2RpcmVjdGl2ZXM6W3tuYW1lOiJtb2RlbCIscmF3TmFtZToidi1tb2RlbCIsdmFsdWU6X3ZtLm1vZGVsLGV4cHJlc3Npb246Im1vZGVsIn1dLHN0YXRpY0NsYXNzOiJlbC1jaGVja2JveC1idXR0b25fX29yaWdpbmFsIixhdHRyczp7dHlwZToiY2hlY2tib3giLG5hbWU6X3ZtLm5hbWUsZGlzYWJsZWQ6X3ZtLmlzRGlzYWJsZWQsInRydWUtdmFsdWUiOl92bS50cnVlTGFiZWwsImZhbHNlLXZhbHVlIjpfdm0uZmFsc2VMYWJlbH0sZG9tUHJvcHM6e2NoZWNrZWQ6QXJyYXkuaXNBcnJheShfdm0ubW9kZWwpPy0xPF92bS5faShfdm0ubW9kZWwsbnVsbCk6X3ZtLl9xKF92bS5tb2RlbCxfdm0udHJ1ZUxhYmVsKX0sb246e2NoYW5nZTpbZnVuY3Rpb24oJGV2ZW50KXt2YXIgJCRhPV92bS5tb2RlbCwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD9fdm0udHJ1ZUxhYmVsOl92bS5mYWxzZUxhYmVsO2lmKEFycmF5LmlzQXJyYXkoJCRhKSl7dmFyICQkaT1fdm0uX2koJCRhLG51bGwpOyQkZWwuY2hlY2tlZD8kJGk8MCYmKF92bS5tb2RlbD0kJGEuY29uY2F0KFtudWxsXSkpOi0xPCQkaSYmKF92bS5tb2RlbD0kJGEuc2xpY2UoMCwkJGkpLmNvbmNhdCgkJGEuc2xpY2UoJCRpKzEpKSl9ZWxzZSBfdm0ubW9kZWw9JCRjfSxfdm0uaGFuZGxlQ2hhbmdlXSxmb2N1czpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1cz0hMH0sYmx1cjpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1cz0hMX19fSk6X2MoImlucHV0Iix7ZGlyZWN0aXZlczpbe25hbWU6Im1vZGVsIixyYXdOYW1lOiJ2LW1vZGVsIix2YWx1ZTpfdm0ubW9kZWwsZXhwcmVzc2lvbjoibW9kZWwifV0sc3RhdGljQ2xhc3M6ImVsLWNoZWNrYm94LWJ1dHRvbl9fb3JpZ2luYWwiLGF0dHJzOnt0eXBlOiJjaGVja2JveCIsbmFtZTpfdm0ubmFtZSxkaXNhYmxlZDpfdm0uaXNEaXNhYmxlZH0sZG9tUHJvcHM6e3ZhbHVlOl92bS5sYWJlbCxjaGVja2VkOkFycmF5LmlzQXJyYXkoX3ZtLm1vZGVsKT8tMTxfdm0uX2koX3ZtLm1vZGVsLF92bS5sYWJlbCk6X3ZtLm1vZGVsfSxvbjp7Y2hhbmdlOltmdW5jdGlvbigkZXZlbnQpe3ZhciAkJGE9X3ZtLm1vZGVsLCQkZWw9JGV2ZW50LnRhcmdldCwkJGM9ISEkJGVsLmNoZWNrZWQ7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PV92bS5sYWJlbCwkJGk9X3ZtLl9pKCQkYSwkJHYpOyQkZWwuY2hlY2tlZD8kJGk8MCYmKF92bS5tb2RlbD0kJGEuY29uY2F0KFskJHZdKSk6LTE8JCRpJiYoX3ZtLm1vZGVsPSQkYS5zbGljZSgwLCQkaSkuY29uY2F0KCQkYS5zbGljZSgkJGkrMSkpKX1lbHNlIF92bS5tb2RlbD0kJGN9LF92bS5oYW5kbGVDaGFuZ2VdLGZvY3VzOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmZvY3VzPSEwfSxibHVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmZvY3VzPSExfX19KSxfdm0uJHNsb3RzLmRlZmF1bHR8fF92bS5sYWJlbD9fYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1jaGVja2JveC1idXR0b25fX2lubmVyIixzdHlsZTpfdm0uaXNDaGVja2VkP192bS5hY3RpdmVTdHlsZTpudWxsfSxbX3ZtLl90KCJkZWZhdWx0IixbX3ZtLl92KF92bS5fcyhfdm0ubGFiZWwpKV0pXSwyKTpfdm0uX2UoKV0pfTtjaGVja2JveF9idXR0b252dWVfdHlwZV90ZW1wbGF0ZV9pZF80NzhlOTA2ZV9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgY2hlY2tib3hfYnV0dG9uX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsQ2hlY2tib3hCdXR0b24iLG1peGluczpbZW1pdHRlcl9kZWZhdWx0LmFdLGluamVjdDp7ZWxGb3JtOntkZWZhdWx0OiIifSxlbEZvcm1JdGVtOntkZWZhdWx0OiIifX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntzZWxmTW9kZWw6ITEsZm9jdXM6ITEsaXNMaW1pdEV4Y2VlZGVkOiExfX0scHJvcHM6e3ZhbHVlOnt9LGxhYmVsOnt9LGRpc2FibGVkOkJvb2xlYW4sY2hlY2tlZDpCb29sZWFuLG5hbWU6U3RyaW5nLHRydWVMYWJlbDpbU3RyaW5nLE51bWJlcl0sZmFsc2VMYWJlbDpbU3RyaW5nLE51bWJlcl19LGNvbXB1dGVkOnttb2RlbDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrYm94R3JvdXA/dGhpcy5zdG9yZTp2b2lkIDAhPT10aGlzLnZhbHVlP3RoaXMudmFsdWU6dGhpcy5zZWxmTW9kZWx9LHNldDpmdW5jdGlvbih2YWwpe3RoaXMuX2NoZWNrYm94R3JvdXA/KHRoaXMuaXNMaW1pdEV4Y2VlZGVkPSExLHZvaWQgMCE9PXRoaXMuX2NoZWNrYm94R3JvdXAubWluJiZ2YWwubGVuZ3RoPHRoaXMuX2NoZWNrYm94R3JvdXAubWluJiYodGhpcy5pc0xpbWl0RXhjZWVkZWQ9ITApLHZvaWQgMCE9PXRoaXMuX2NoZWNrYm94R3JvdXAubWF4JiZ2YWwubGVuZ3RoPnRoaXMuX2NoZWNrYm94R3JvdXAubWF4JiYodGhpcy5pc0xpbWl0RXhjZWVkZWQ9ITApLCExPT09dGhpcy5pc0xpbWl0RXhjZWVkZWQmJnRoaXMuZGlzcGF0Y2goIkVsQ2hlY2tib3hHcm91cCIsImlucHV0IixbdmFsXSkpOnZvaWQgMCE9PXRoaXMudmFsdWU/dGhpcy4kZW1pdCgiaW5wdXQiLHZhbCk6dGhpcy5zZWxmTW9kZWw9dmFsfX0saXNDaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgQm9vbGVhbl0iPT09e30udG9TdHJpbmcuY2FsbCh0aGlzLm1vZGVsKT90aGlzLm1vZGVsOkFycmF5LmlzQXJyYXkodGhpcy5tb2RlbCk/LTE8dGhpcy5tb2RlbC5pbmRleE9mKHRoaXMubGFiZWwpOm51bGwhPT10aGlzLm1vZGVsJiZ2b2lkIDAhPT10aGlzLm1vZGVsP3RoaXMubW9kZWw9PT10aGlzLnRydWVMYWJlbDp2b2lkIDB9LF9jaGVja2JveEdyb3VwOmZ1bmN0aW9uKCl7Zm9yKHZhciBwYXJlbnQ9dGhpcy4kcGFyZW50O3BhcmVudDspe2lmKCJFbENoZWNrYm94R3JvdXAiPT09cGFyZW50LiRvcHRpb25zLmNvbXBvbmVudE5hbWUpcmV0dXJuIHBhcmVudDtwYXJlbnQ9cGFyZW50LiRwYXJlbnR9cmV0dXJuITF9LHN0b3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrYm94R3JvdXA/dGhpcy5fY2hlY2tib3hHcm91cC52YWx1ZTp0aGlzLnZhbHVlfSxhY3RpdmVTdHlsZTpmdW5jdGlvbigpe3JldHVybntiYWNrZ3JvdW5kQ29sb3I6dGhpcy5fY2hlY2tib3hHcm91cC5maWxsfHwiIixib3JkZXJDb2xvcjp0aGlzLl9jaGVja2JveEdyb3VwLmZpbGx8fCIiLGNvbG9yOnRoaXMuX2NoZWNrYm94R3JvdXAudGV4dENvbG9yfHwiIiwiYm94LXNoYWRvdyI6Ii0xcHggMCAwIDAgIit0aGlzLl9jaGVja2JveEdyb3VwLmZpbGx9fSxfZWxGb3JtSXRlbVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5lbEZvcm1JdGVtfHx7fSkuZWxGb3JtSXRlbVNpemV9LHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tib3hHcm91cC5jaGVja2JveEdyb3VwU2l6ZXx8dGhpcy5fZWxGb3JtSXRlbVNpemV8fCh0aGlzLiRFTEVNRU5UfHx7fSkuc2l6ZX0saXNEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja2JveEdyb3VwP3RoaXMuX2NoZWNrYm94R3JvdXAuZGlzYWJsZWR8fHRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkOnRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfX0sbWV0aG9kczp7YWRkVG9TdG9yZTpmdW5jdGlvbigpe0FycmF5LmlzQXJyYXkodGhpcy5tb2RlbCkmJi0xPT09dGhpcy5tb2RlbC5pbmRleE9mKHRoaXMubGFiZWwpP3RoaXMubW9kZWwucHVzaCh0aGlzLmxhYmVsKTp0aGlzLm1vZGVsPXRoaXMudHJ1ZUxhYmVsfHwhMH0saGFuZGxlQ2hhbmdlOmZ1bmN0aW9uKGV2KXt2YXIgX3RoaXM9dGhpcztpZighdGhpcy5pc0xpbWl0RXhjZWVkZWQpe3ZhciB2YWx1ZT12b2lkIDA7dmFsdWU9ZXYudGFyZ2V0LmNoZWNrZWQ/dm9pZCAwPT09dGhpcy50cnVlTGFiZWx8fHRoaXMudHJ1ZUxhYmVsOnZvaWQgMCE9PXRoaXMuZmFsc2VMYWJlbCYmdGhpcy5mYWxzZUxhYmVsLHRoaXMuJGVtaXQoImNoYW5nZSIsdmFsdWUsZXYpLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7X3RoaXMuX2NoZWNrYm94R3JvdXAmJl90aGlzLmRpc3BhdGNoKCJFbENoZWNrYm94R3JvdXAiLCJjaGFuZ2UiLFtfdGhpcy5fY2hlY2tib3hHcm91cC52YWx1ZV0pfSl9fX0sY3JlYXRlZDpmdW5jdGlvbigpe3RoaXMuY2hlY2tlZCYmdGhpcy5hZGRUb1N0b3JlKCl9fSxjaGVja2JveF9idXR0b252dWVfdHlwZV90ZW1wbGF0ZV9pZF80NzhlOTA2ZV9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2NoZWNrYm94X2J1dHRvbl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2NoZWNrYm94L3NyYy9jaGVja2JveC1idXR0b24udnVlIjt2YXIgY2hlY2tib3hfYnV0dG9uPWNoZWNrYm94X2J1dHRvbl9jb21wb25lbnQuZXhwb3J0cztjaGVja2JveF9idXR0b24uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoY2hlY2tib3hfYnV0dG9uLm5hbWUsY2hlY2tib3hfYnV0dG9uKX07dmFyIHBhY2thZ2VzX2NoZWNrYm94X2J1dHRvbj1jaGVja2JveF9idXR0b24sY2hlY2tib3hfZ3JvdXB2dWVfdHlwZV90ZW1wbGF0ZV9pZF83Mjg5YTI5MF9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudDtyZXR1cm4odGhpcy5fc2VsZi5fY3x8X2gpKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtY2hlY2tib3gtZ3JvdXAiLGF0dHJzOntyb2xlOiJncm91cCIsImFyaWEtbGFiZWwiOiJjaGVja2JveC1ncm91cCJ9fSxbdGhpcy5fdCgiZGVmYXVsdCIpXSwyKX07Y2hlY2tib3hfZ3JvdXB2dWVfdHlwZV90ZW1wbGF0ZV9pZF83Mjg5YTI5MF9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgY2hlY2tib3hfZ3JvdXBfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxDaGVja2JveEdyb3VwIixjb21wb25lbnROYW1lOiJFbENoZWNrYm94R3JvdXAiLG1peGluczpbZW1pdHRlcl9kZWZhdWx0LmFdLGluamVjdDp7ZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LHByb3BzOnt2YWx1ZTp7fSxkaXNhYmxlZDpCb29sZWFuLG1pbjpOdW1iZXIsbWF4Ok51bWJlcixzaXplOlN0cmluZyxmaWxsOlN0cmluZyx0ZXh0Q29sb3I6U3RyaW5nfSxjb21wdXRlZDp7X2VsRm9ybUl0ZW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuZWxGb3JtSXRlbXx8e30pLmVsRm9ybUl0ZW1TaXplfSxjaGVja2JveEdyb3VwU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV8fHRoaXMuX2VsRm9ybUl0ZW1TaXplfHwodGhpcy4kRUxFTUVOVHx8e30pLnNpemV9fSx3YXRjaDp7dmFsdWU6ZnVuY3Rpb24oX3ZhbHVlKXt0aGlzLmRpc3BhdGNoKCJFbEZvcm1JdGVtIiwiZWwuZm9ybS5jaGFuZ2UiLFtfdmFsdWVdKX19fSxjaGVja2JveF9ncm91cHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzcyODlhMjkwX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y2hlY2tib3hfZ3JvdXBfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9jaGVja2JveC9zcmMvY2hlY2tib3gtZ3JvdXAudnVlIjt2YXIgY2hlY2tib3hfZ3JvdXA9Y2hlY2tib3hfZ3JvdXBfY29tcG9uZW50LmV4cG9ydHM7Y2hlY2tib3hfZ3JvdXAuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoY2hlY2tib3hfZ3JvdXAubmFtZSxjaGVja2JveF9ncm91cCl9O3ZhciBwYWNrYWdlc19jaGVja2JveF9ncm91cD1jaGVja2JveF9ncm91cCxjb21wb25lbnR2dWVfdHlwZV90ZW1wbGF0ZV9pZF8yZGNkOGZiYl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtc3dpdGNoIixjbGFzczp7ImlzLWRpc2FibGVkIjpfdm0uc3dpdGNoRGlzYWJsZWQsImlzLWNoZWNrZWQiOl92bS5jaGVja2VkfSxhdHRyczp7cm9sZToic3dpdGNoIiwiYXJpYS1jaGVja2VkIjpfdm0uY2hlY2tlZCwiYXJpYS1kaXNhYmxlZCI6X3ZtLnN3aXRjaERpc2FibGVkfSxvbjp7Y2xpY2s6X3ZtLnN3aXRjaFZhbHVlfX0sW19jKCJpbnB1dCIse3JlZjoiaW5wdXQiLHN0YXRpY0NsYXNzOiJlbC1zd2l0Y2hfX2lucHV0IixhdHRyczp7dHlwZToiY2hlY2tib3giLGlkOl92bS5pZCxuYW1lOl92bS5uYW1lLCJ0cnVlLXZhbHVlIjpfdm0uYWN0aXZlVmFsdWUsImZhbHNlLXZhbHVlIjpfdm0uaW5hY3RpdmVWYWx1ZSxkaXNhYmxlZDpfdm0uc3dpdGNoRGlzYWJsZWR9LG9uOntjaGFuZ2U6X3ZtLmhhbmRsZUNoYW5nZSxrZXlkb3duOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuImJ1dHRvbiJpbiAkZXZlbnR8fCFfdm0uX2soJGV2ZW50LmtleUNvZGUsImVudGVyIiwxMywkZXZlbnQua2V5LCJFbnRlciIpP192bS5zd2l0Y2hWYWx1ZSgkZXZlbnQpOm51bGx9fX0pLF92bS5pbmFjdGl2ZUljb25DbGFzc3x8X3ZtLmluYWN0aXZlVGV4dD9fYygic3BhbiIse2NsYXNzOlsiZWwtc3dpdGNoX19sYWJlbCIsImVsLXN3aXRjaF9fbGFiZWwtLWxlZnQiLF92bS5jaGVja2VkPyIiOiJpcy1hY3RpdmUiXX0sW192bS5pbmFjdGl2ZUljb25DbGFzcz9fYygiaSIse2NsYXNzOltfdm0uaW5hY3RpdmVJY29uQ2xhc3NdfSk6X3ZtLl9lKCksIV92bS5pbmFjdGl2ZUljb25DbGFzcyYmX3ZtLmluYWN0aXZlVGV4dD9fYygic3BhbiIse2F0dHJzOnsiYXJpYS1oaWRkZW4iOl92bS5jaGVja2VkfX0sW192bS5fdihfdm0uX3MoX3ZtLmluYWN0aXZlVGV4dCkpXSk6X3ZtLl9lKCldKTpfdm0uX2UoKSxfYygic3BhbiIse3JlZjoiY29yZSIsc3RhdGljQ2xhc3M6ImVsLXN3aXRjaF9fY29yZSIsc3R5bGU6e3dpZHRoOl92bS5jb3JlV2lkdGgrInB4In19KSxfdm0uYWN0aXZlSWNvbkNsYXNzfHxfdm0uYWN0aXZlVGV4dD9fYygic3BhbiIse2NsYXNzOlsiZWwtc3dpdGNoX19sYWJlbCIsImVsLXN3aXRjaF9fbGFiZWwtLXJpZ2h0Iixfdm0uY2hlY2tlZD8iaXMtYWN0aXZlIjoiIl19LFtfdm0uYWN0aXZlSWNvbkNsYXNzP19jKCJpIix7Y2xhc3M6W192bS5hY3RpdmVJY29uQ2xhc3NdfSk6X3ZtLl9lKCksIV92bS5hY3RpdmVJY29uQ2xhc3MmJl92bS5hY3RpdmVUZXh0P19jKCJzcGFuIix7YXR0cnM6eyJhcmlhLWhpZGRlbiI6IV92bS5jaGVja2VkfX0sW192bS5fdihfdm0uX3MoX3ZtLmFjdGl2ZVRleHQpKV0pOl92bS5fZSgpXSk6X3ZtLl9lKCldKX07Y29tcG9uZW50dnVlX3R5cGVfdGVtcGxhdGVfaWRfMmRjZDhmYmJfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHNyY19jb21wb25lbnRfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxTd2l0Y2giLG1peGluczpbZm9jdXNfZGVmYXVsdCgpKCJpbnB1dCIpLG1pZ3JhdGluZ19kZWZhdWx0LmEsZW1pdHRlcl9kZWZhdWx0LmFdLGluamVjdDp7ZWxGb3JtOntkZWZhdWx0OiIifX0scHJvcHM6e3ZhbHVlOnt0eXBlOltCb29sZWFuLFN0cmluZyxOdW1iZXJdLGRlZmF1bHQ6ITF9LGRpc2FibGVkOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX0sd2lkdGg6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6NDB9LGFjdGl2ZUljb25DbGFzczp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn0saW5hY3RpdmVJY29uQ2xhc3M6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiJ9LGFjdGl2ZVRleHQ6U3RyaW5nLGluYWN0aXZlVGV4dDpTdHJpbmcsYWN0aXZlQ29sb3I6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiJ9LGluYWN0aXZlQ29sb3I6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiJ9LGFjdGl2ZVZhbHVlOnt0eXBlOltCb29sZWFuLFN0cmluZyxOdW1iZXJdLGRlZmF1bHQ6ITB9LGluYWN0aXZlVmFsdWU6e3R5cGU6W0Jvb2xlYW4sU3RyaW5nLE51bWJlcl0sZGVmYXVsdDohMX0sbmFtZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn0sdmFsaWRhdGVFdmVudDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGlkOlN0cmluZ30sZGF0YTpmdW5jdGlvbigpe3JldHVybntjb3JlV2lkdGg6dGhpcy53aWR0aH19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt+W3RoaXMuYWN0aXZlVmFsdWUsdGhpcy5pbmFjdGl2ZVZhbHVlXS5pbmRleE9mKHRoaXMudmFsdWUpfHx0aGlzLiRlbWl0KCJpbnB1dCIsdGhpcy5pbmFjdGl2ZVZhbHVlKX0sY29tcHV0ZWQ6e2NoZWNrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZT09PXRoaXMuYWN0aXZlVmFsdWV9LHN3aXRjaERpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfX0sd2F0Y2g6e2NoZWNrZWQ6ZnVuY3Rpb24oKXt0aGlzLiRyZWZzLmlucHV0LmNoZWNrZWQ9dGhpcy5jaGVja2VkLCh0aGlzLmFjdGl2ZUNvbG9yfHx0aGlzLmluYWN0aXZlQ29sb3IpJiZ0aGlzLnNldEJhY2tncm91bmRDb2xvcigpLHRoaXMudmFsaWRhdGVFdmVudCYmdGhpcy5kaXNwYXRjaCgiRWxGb3JtSXRlbSIsImVsLmZvcm0uY2hhbmdlIixbdGhpcy52YWx1ZV0pfX0sbWV0aG9kczp7aGFuZGxlQ2hhbmdlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgX3RoaXM9dGhpcyx2YWw9dGhpcy5jaGVja2VkP3RoaXMuaW5hY3RpdmVWYWx1ZTp0aGlzLmFjdGl2ZVZhbHVlO3RoaXMuJGVtaXQoImlucHV0Iix2YWwpLHRoaXMuJGVtaXQoImNoYW5nZSIsdmFsKSx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzLiRyZWZzLmlucHV0LmNoZWNrZWQ9X3RoaXMuY2hlY2tlZH0pfSxzZXRCYWNrZ3JvdW5kQ29sb3I6ZnVuY3Rpb24oKXt2YXIgbmV3Q29sb3I9dGhpcy5jaGVja2VkP3RoaXMuYWN0aXZlQ29sb3I6dGhpcy5pbmFjdGl2ZUNvbG9yO3RoaXMuJHJlZnMuY29yZS5zdHlsZS5ib3JkZXJDb2xvcj1uZXdDb2xvcix0aGlzLiRyZWZzLmNvcmUuc3R5bGUuYmFja2dyb3VuZENvbG9yPW5ld0NvbG9yfSxzd2l0Y2hWYWx1ZTpmdW5jdGlvbigpeyF0aGlzLnN3aXRjaERpc2FibGVkJiZ0aGlzLmhhbmRsZUNoYW5nZSgpfSxnZXRNaWdyYXRpbmdDb25maWc6ZnVuY3Rpb24oKXtyZXR1cm57cHJvcHM6eyJvbi1jb2xvciI6Im9uLWNvbG9yIGlzIHJlbmFtZWQgdG8gYWN0aXZlLWNvbG9yLiIsIm9mZi1jb2xvciI6Im9mZi1jb2xvciBpcyByZW5hbWVkIHRvIGluYWN0aXZlLWNvbG9yLiIsIm9uLXRleHQiOiJvbi10ZXh0IGlzIHJlbmFtZWQgdG8gYWN0aXZlLXRleHQuIiwib2ZmLXRleHQiOiJvZmYtdGV4dCBpcyByZW5hbWVkIHRvIGluYWN0aXZlLXRleHQuIiwib24tdmFsdWUiOiJvbi12YWx1ZSBpcyByZW5hbWVkIHRvIGFjdGl2ZS12YWx1ZS4iLCJvZmYtdmFsdWUiOiJvZmYtdmFsdWUgaXMgcmVuYW1lZCB0byBpbmFjdGl2ZS12YWx1ZS4iLCJvbi1pY29uLWNsYXNzIjoib24taWNvbi1jbGFzcyBpcyByZW5hbWVkIHRvIGFjdGl2ZS1pY29uLWNsYXNzLiIsIm9mZi1pY29uLWNsYXNzIjoib2ZmLWljb24tY2xhc3MgaXMgcmVuYW1lZCB0byBpbmFjdGl2ZS1pY29uLWNsYXNzLiJ9fX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNvcmVXaWR0aD10aGlzLndpZHRofHw0MCwodGhpcy5hY3RpdmVDb2xvcnx8dGhpcy5pbmFjdGl2ZUNvbG9yKSYmdGhpcy5zZXRCYWNrZ3JvdW5kQ29sb3IoKSx0aGlzLiRyZWZzLmlucHV0LmNoZWNrZWQ9dGhpcy5jaGVja2VkfX0sY29tcG9uZW50dnVlX3R5cGVfdGVtcGxhdGVfaWRfMmRjZDhmYmJfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtzcmNfY29tcG9uZW50X2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvc3dpdGNoL3NyYy9jb21wb25lbnQudnVlIjt2YXIgc3dpdGNoX3NyY19jb21wb25lbnQ9c3JjX2NvbXBvbmVudF9jb21wb25lbnQuZXhwb3J0cztzd2l0Y2hfc3JjX2NvbXBvbmVudC5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChzd2l0Y2hfc3JjX2NvbXBvbmVudC5uYW1lLHN3aXRjaF9zcmNfY29tcG9uZW50KX07dmFyIHBhY2thZ2VzX3N3aXRjaD1zd2l0Y2hfc3JjX2NvbXBvbmVudCxzZWxlY3R2dWVfdHlwZV90ZW1wbGF0ZV9pZF8wZTRhYWRlNl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToiY2xpY2tvdXRzaWRlIixyYXdOYW1lOiJ2LWNsaWNrb3V0c2lkZSIsdmFsdWU6X3ZtLmhhbmRsZUNsb3NlLGV4cHJlc3Npb246ImhhbmRsZUNsb3NlIn1dLHN0YXRpY0NsYXNzOiJlbC1zZWxlY3QiLGNsYXNzOltfdm0uc2VsZWN0U2l6ZT8iZWwtc2VsZWN0LS0iK192bS5zZWxlY3RTaXplOiIiXSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLF92bS50b2dnbGVNZW51KCRldmVudCl9fX0sW192bS5tdWx0aXBsZT9fYygiZGl2Iix7cmVmOiJ0YWdzIixzdGF0aWNDbGFzczoiZWwtc2VsZWN0X190YWdzIixzdHlsZTp7Im1heC13aWR0aCI6X3ZtLmlucHV0V2lkdGgtMzIrInB4Iix3aWR0aDoiMTAwJSJ9fSxbX3ZtLmNvbGxhcHNlVGFncyYmX3ZtLnNlbGVjdGVkLmxlbmd0aD9fYygic3BhbiIsW19jKCJlbC10YWciLHthdHRyczp7Y2xvc2FibGU6IV92bS5zZWxlY3REaXNhYmxlZCxzaXplOl92bS5jb2xsYXBzZVRhZ1NpemUsaGl0Ol92bS5zZWxlY3RlZFswXS5oaXRTdGF0ZSx0eXBlOiJpbmZvIiwiZGlzYWJsZS10cmFuc2l0aW9ucyI6IiJ9LG9uOntjbG9zZTpmdW5jdGlvbigkZXZlbnQpe192bS5kZWxldGVUYWcoJGV2ZW50LF92bS5zZWxlY3RlZFswXSl9fX0sW19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXNlbGVjdF9fdGFncy10ZXh0In0sW192bS5fdihfdm0uX3MoX3ZtLnNlbGVjdGVkWzBdLmN1cnJlbnRMYWJlbCkpXSldKSwxPF92bS5zZWxlY3RlZC5sZW5ndGg/X2MoImVsLXRhZyIse2F0dHJzOntjbG9zYWJsZTohMSxzaXplOl92bS5jb2xsYXBzZVRhZ1NpemUsdHlwZToiaW5mbyIsImRpc2FibGUtdHJhbnNpdGlvbnMiOiIifX0sW19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXNlbGVjdF9fdGFncy10ZXh0In0sW192bS5fdigiKyAiK192bS5fcyhfdm0uc2VsZWN0ZWQubGVuZ3RoLTEpKV0pXSk6X3ZtLl9lKCldLDEpOl92bS5fZSgpLF92bS5jb2xsYXBzZVRhZ3M/X3ZtLl9lKCk6X2MoInRyYW5zaXRpb24tZ3JvdXAiLHtvbjp7ImFmdGVyLWxlYXZlIjpfdm0ucmVzZXRJbnB1dEhlaWdodH19LF92bS5fbChfdm0uc2VsZWN0ZWQsZnVuY3Rpb24oaXRlbSl7cmV0dXJuIF9jKCJlbC10YWciLHtrZXk6X3ZtLmdldFZhbHVlS2V5KGl0ZW0pLGF0dHJzOntjbG9zYWJsZTohX3ZtLnNlbGVjdERpc2FibGVkLHNpemU6X3ZtLmNvbGxhcHNlVGFnU2l6ZSxoaXQ6aXRlbS5oaXRTdGF0ZSx0eXBlOiJpbmZvIiwiZGlzYWJsZS10cmFuc2l0aW9ucyI6IiJ9LG9uOntjbG9zZTpmdW5jdGlvbigkZXZlbnQpe192bS5kZWxldGVUYWcoJGV2ZW50LGl0ZW0pfX19LFtfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1zZWxlY3RfX3RhZ3MtdGV4dCJ9LFtfdm0uX3YoX3ZtLl9zKGl0ZW0uY3VycmVudExhYmVsKSldKV0pfSksMSksX3ZtLmZpbHRlcmFibGU/X2MoImlucHV0Iix7ZGlyZWN0aXZlczpbe25hbWU6Im1vZGVsIixyYXdOYW1lOiJ2LW1vZGVsIix2YWx1ZTpfdm0ucXVlcnksZXhwcmVzc2lvbjoicXVlcnkifV0scmVmOiJpbnB1dCIsc3RhdGljQ2xhc3M6ImVsLXNlbGVjdF9faW5wdXQiLGNsYXNzOltfdm0uc2VsZWN0U2l6ZT8iaXMtIitfdm0uc2VsZWN0U2l6ZToiIl0sc3R5bGU6eyJmbGV4LWdyb3ciOiIxIix3aWR0aDpfdm0uaW5wdXRMZW5ndGgvKF92bS5pbnB1dFdpZHRoLTMyKSsiJSIsIm1heC13aWR0aCI6X3ZtLmlucHV0V2lkdGgtNDIrInB4In0sYXR0cnM6e3R5cGU6InRleHQiLGRpc2FibGVkOl92bS5zZWxlY3REaXNhYmxlZCxhdXRvY29tcGxldGU6X3ZtLmF1dG9Db21wbGV0ZXx8X3ZtLmF1dG9jb21wbGV0ZX0sZG9tUHJvcHM6e3ZhbHVlOl92bS5xdWVyeX0sb246e2ZvY3VzOl92bS5oYW5kbGVGb2N1cyxibHVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLnNvZnRGb2N1cz0hMX0sY2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXskZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9LGtleXVwOl92bS5tYW5hZ2VQbGFjZWhvbGRlcixrZXlkb3duOltfdm0ucmVzZXRJbnB1dFN0YXRlLGZ1bmN0aW9uKCRldmVudCl7aWYoISgiYnV0dG9uImluICRldmVudCkmJl92bS5faygkZXZlbnQua2V5Q29kZSwiZG93biIsNDAsJGV2ZW50LmtleSxbIkRvd24iLCJBcnJvd0Rvd24iXSkpcmV0dXJuIG51bGw7JGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLm5hdmlnYXRlT3B0aW9ucygibmV4dCIpfSxmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsInVwIiwzOCwkZXZlbnQua2V5LFsiVXAiLCJBcnJvd1VwIl0pKXJldHVybiBudWxsOyRldmVudC5wcmV2ZW50RGVmYXVsdCgpLF92bS5uYXZpZ2F0ZU9wdGlvbnMoInByZXYiKX0sZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4iYnV0dG9uImluICRldmVudHx8IV92bS5faygkZXZlbnQua2V5Q29kZSwiZW50ZXIiLDEzLCRldmVudC5rZXksIkVudGVyIik/KCRldmVudC5wcmV2ZW50RGVmYXVsdCgpLF92bS5zZWxlY3RPcHRpb24oJGV2ZW50KSk6bnVsbH0sZnVuY3Rpb24oJGV2ZW50KXtpZighKCJidXR0b24iaW4gJGV2ZW50KSYmX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJlc2MiLDI3LCRldmVudC5rZXksWyJFc2MiLCJFc2NhcGUiXSkpcmV0dXJuIG51bGw7JGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLCRldmVudC5wcmV2ZW50RGVmYXVsdCgpLF92bS52aXNpYmxlPSExfSxmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJkZWxldGUiLFs4LDQ2XSwkZXZlbnQua2V5LFsiQmFja3NwYWNlIiwiRGVsZXRlIiwiRGVsIl0pP192bS5kZWxldGVQcmV2VGFnKCRldmVudCk6bnVsbH1dLGNvbXBvc2l0aW9uc3RhcnQ6X3ZtLmhhbmRsZUNvbXBvc2l0aW9uLGNvbXBvc2l0aW9udXBkYXRlOl92bS5oYW5kbGVDb21wb3NpdGlvbixjb21wb3NpdGlvbmVuZDpfdm0uaGFuZGxlQ29tcG9zaXRpb24saW5wdXQ6W2Z1bmN0aW9uKCRldmVudCl7JGV2ZW50LnRhcmdldC5jb21wb3Npbmd8fChfdm0ucXVlcnk9JGV2ZW50LnRhcmdldC52YWx1ZSl9LF92bS5kZWJvdW5jZWRRdWVyeUNoYW5nZV19fSk6X3ZtLl9lKCldLDEpOl92bS5fZSgpLF9jKCJlbC1pbnB1dCIse3JlZjoicmVmZXJlbmNlIixjbGFzczp7ImlzLWZvY3VzIjpfdm0udmlzaWJsZX0sYXR0cnM6e3R5cGU6InRleHQiLHBsYWNlaG9sZGVyOl92bS5jdXJyZW50UGxhY2Vob2xkZXIsbmFtZTpfdm0ubmFtZSxpZDpfdm0uaWQsYXV0b2NvbXBsZXRlOl92bS5hdXRvQ29tcGxldGV8fF92bS5hdXRvY29tcGxldGUsc2l6ZTpfdm0uc2VsZWN0U2l6ZSxkaXNhYmxlZDpfdm0uc2VsZWN0RGlzYWJsZWQscmVhZG9ubHk6X3ZtLnJlYWRvbmx5LCJ2YWxpZGF0ZS1ldmVudCI6ITF9LG9uOntmb2N1czpfdm0uaGFuZGxlRm9jdXMsYmx1cjpfdm0uaGFuZGxlQmx1cn0sbmF0aXZlT246e2tleXVwOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF92bS5kZWJvdW5jZWRPbklucHV0Q2hhbmdlKCRldmVudCl9LGtleWRvd246W2Z1bmN0aW9uKCRldmVudCl7aWYoISgiYnV0dG9uImluICRldmVudCkmJl92bS5faygkZXZlbnQua2V5Q29kZSwiZG93biIsNDAsJGV2ZW50LmtleSxbIkRvd24iLCJBcnJvd0Rvd24iXSkpcmV0dXJuIG51bGw7JGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLCRldmVudC5wcmV2ZW50RGVmYXVsdCgpLF92bS5uYXZpZ2F0ZU9wdGlvbnMoIm5leHQiKX0sZnVuY3Rpb24oJGV2ZW50KXtpZighKCJidXR0b24iaW4gJGV2ZW50KSYmX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJ1cCIsMzgsJGV2ZW50LmtleSxbIlVwIiwiQXJyb3dVcCJdKSlyZXR1cm4gbnVsbDskZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLm5hdmlnYXRlT3B0aW9ucygicHJldiIpfSxmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJlbnRlciIsMTMsJGV2ZW50LmtleSwiRW50ZXIiKT8oJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLnNlbGVjdE9wdGlvbigkZXZlbnQpKTpudWxsfSxmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsImVzYyIsMjcsJGV2ZW50LmtleSxbIkVzYyIsIkVzY2FwZSJdKSlyZXR1cm4gbnVsbDskZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLnZpc2libGU9ITF9LGZ1bmN0aW9uKCRldmVudCl7aWYoISgiYnV0dG9uImluICRldmVudCkmJl92bS5faygkZXZlbnQua2V5Q29kZSwidGFiIiw5LCRldmVudC5rZXksIlRhYiIpKXJldHVybiBudWxsO192bS52aXNpYmxlPSExfV0scGFzdGU6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLmRlYm91bmNlZE9uSW5wdXRDaGFuZ2UoJGV2ZW50KX0sbW91c2VlbnRlcjpmdW5jdGlvbigkZXZlbnQpe192bS5pbnB1dEhvdmVyaW5nPSEwfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmlucHV0SG92ZXJpbmc9ITF9fSxtb2RlbDp7dmFsdWU6X3ZtLnNlbGVjdGVkTGFiZWwsY2FsbGJhY2s6ZnVuY3Rpb24oJCR2KXtfdm0uc2VsZWN0ZWRMYWJlbD0kJHZ9LGV4cHJlc3Npb246InNlbGVjdGVkTGFiZWwifX0sW192bS4kc2xvdHMucHJlZml4P19jKCJ0ZW1wbGF0ZSIse3Nsb3Q6InByZWZpeCJ9LFtfdm0uX3QoInByZWZpeCIpXSwyKTpfdm0uX2UoKSxfYygidGVtcGxhdGUiLHtzbG90OiJzdWZmaXgifSxbX2MoImkiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTohX3ZtLnNob3dDbG9zZSxleHByZXNzaW9uOiIhc2hvd0Nsb3NlIn1dLGNsYXNzOlsiZWwtc2VsZWN0X19jYXJldCIsImVsLWlucHV0X19pY29uIiwiZWwtaWNvbi0iK192bS5pY29uQ2xhc3NdfSksX3ZtLnNob3dDbG9zZT9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1zZWxlY3RfX2NhcmV0IGVsLWlucHV0X19pY29uIGVsLWljb24tY2lyY2xlLWNsb3NlIixvbjp7Y2xpY2s6X3ZtLmhhbmRsZUNsZWFyQ2xpY2t9fSk6X3ZtLl9lKCldKV0sMiksX2MoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToiZWwtem9vbS1pbi10b3AifSxvbjp7ImJlZm9yZS1lbnRlciI6X3ZtLmhhbmRsZU1lbnVFbnRlciwiYWZ0ZXItbGVhdmUiOl92bS5kb0Rlc3Ryb3l9fSxbX2MoImVsLXNlbGVjdC1tZW51Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLnZpc2libGUmJiExIT09X3ZtLmVtcHR5VGV4dCxleHByZXNzaW9uOiJ2aXNpYmxlICYmIGVtcHR5VGV4dCAhPT0gZmFsc2UifV0scmVmOiJwb3BwZXIiLGF0dHJzOnsiYXBwZW5kLXRvLWJvZHkiOl92bS5wb3BwZXJBcHBlbmRUb0JvZHl9fSxbX2MoImVsLXNjcm9sbGJhciIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOjA8X3ZtLm9wdGlvbnMubGVuZ3RoJiYhX3ZtLmxvYWRpbmcsZXhwcmVzc2lvbjoib3B0aW9ucy5sZW5ndGggPiAwICYmICFsb2FkaW5nIn1dLHJlZjoic2Nyb2xsYmFyIixjbGFzczp7ImlzLWVtcHR5IjohX3ZtLmFsbG93Q3JlYXRlJiZfdm0ucXVlcnkmJjA9PT1fdm0uZmlsdGVyZWRPcHRpb25zQ291bnR9LGF0dHJzOnt0YWc6InVsIiwid3JhcC1jbGFzcyI6ImVsLXNlbGVjdC1kcm9wZG93bl9fd3JhcCIsInZpZXctY2xhc3MiOiJlbC1zZWxlY3QtZHJvcGRvd25fX2xpc3QifX0sW192bS5zaG93TmV3T3B0aW9uP19jKCJlbC1vcHRpb24iLHthdHRyczp7dmFsdWU6X3ZtLnF1ZXJ5LGNyZWF0ZWQ6IiJ9fSk6X3ZtLl9lKCksX3ZtLl90KCJkZWZhdWx0IildLDIpLF92bS5lbXB0eVRleHQmJighX3ZtLmFsbG93Q3JlYXRlfHxfdm0ubG9hZGluZ3x8X3ZtLmFsbG93Q3JlYXRlJiYwPT09X3ZtLm9wdGlvbnMubGVuZ3RoKT9bX3ZtLiRzbG90cy5lbXB0eT9fdm0uX3QoImVtcHR5Iik6X2MoInAiLHtzdGF0aWNDbGFzczoiZWwtc2VsZWN0LWRyb3Bkb3duX19lbXB0eSJ9LFtfdm0uX3YoIlxuICAgICAgICAgICIrX3ZtLl9zKF92bS5lbXB0eVRleHQpKyJcbiAgICAgICAgIildKV06X3ZtLl9lKCldLDIpXSwxKV0sMSl9LHNlbGVjdF9kcm9wZG93bnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzA2ODI4NzQ4X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1zZWxlY3QtZHJvcGRvd24gZWwtcG9wcGVyIixjbGFzczpbeyJpcy1tdWx0aXBsZSI6dGhpcy4kcGFyZW50Lm11bHRpcGxlfSx0aGlzLnBvcHBlckNsYXNzXSxzdHlsZTp7bWluV2lkdGg6dGhpcy5taW5XaWR0aH19LFt0aGlzLl90KCJkZWZhdWx0IildLDIpfTtzZWxlY3RfZHJvcGRvd252dWVfdHlwZV90ZW1wbGF0ZV9pZF8wNjgyODc0OF9yZW5kZXIuX3dpdGhTdHJpcHBlZD1zZWxlY3R2dWVfdHlwZV90ZW1wbGF0ZV9pZF8wZTRhYWRlNl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgc2VsZWN0X2Ryb3Bkb3duX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsU2VsZWN0RHJvcGRvd24iLGNvbXBvbmVudE5hbWU6IkVsU2VsZWN0RHJvcGRvd24iLG1peGluczpbdnVlX3BvcHBlcl9kZWZhdWx0LmFdLHByb3BzOntwbGFjZW1lbnQ6e2RlZmF1bHQ6ImJvdHRvbS1zdGFydCJ9LGJvdW5kYXJpZXNQYWRkaW5nOntkZWZhdWx0OjB9LHBvcHBlck9wdGlvbnM6e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm57Z3B1QWNjZWxlcmF0aW9uOiExfX19LHZpc2libGVBcnJvdzp7ZGVmYXVsdDohMH0sYXBwZW5kVG9Cb2R5Ont0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57bWluV2lkdGg6IiJ9fSxjb21wdXRlZDp7cG9wcGVyQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcGFyZW50LnBvcHBlckNsYXNzfX0sd2F0Y2g6eyIkcGFyZW50LmlucHV0V2lkdGgiOmZ1bmN0aW9uKCl7dGhpcy5taW5XaWR0aD10aGlzLiRwYXJlbnQuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKyJweCJ9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXM7dGhpcy5yZWZlcmVuY2VFbG09dGhpcy4kcGFyZW50LiRyZWZzLnJlZmVyZW5jZS4kZWwsdGhpcy4kcGFyZW50LnBvcHBlckVsbT10aGlzLnBvcHBlckVsbT10aGlzLiRlbCx0aGlzLiRvbigidXBkYXRlUG9wcGVyIixmdW5jdGlvbigpe190aGlzLiRwYXJlbnQudmlzaWJsZSYmX3RoaXMudXBkYXRlUG9wcGVyKCl9KSx0aGlzLiRvbigiZGVzdHJveVBvcHBlciIsdGhpcy5kZXN0cm95UG9wcGVyKX19LHNlbGVjdF9kcm9wZG93bnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzA2ODI4NzQ4X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7c2VsZWN0X2Ryb3Bkb3duX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvc2VsZWN0L3NyYy9zZWxlY3QtZHJvcGRvd24udnVlIjt2YXIgc2VsZWN0X2Ryb3Bkb3duPXNlbGVjdF9kcm9wZG93bl9jb21wb25lbnQuZXhwb3J0cyxvcHRpb252dWVfdHlwZV90ZW1wbGF0ZV9pZF83YTQ0YzY0Ml9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJsaSIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS52aXNpYmxlLGV4cHJlc3Npb246InZpc2libGUifV0sc3RhdGljQ2xhc3M6ImVsLXNlbGVjdC1kcm9wZG93bl9faXRlbSIsY2xhc3M6e3NlbGVjdGVkOl92bS5pdGVtU2VsZWN0ZWQsImlzLWRpc2FibGVkIjpfdm0uZGlzYWJsZWR8fF92bS5ncm91cERpc2FibGVkfHxfdm0ubGltaXRSZWFjaGVkLGhvdmVyOl92bS5ob3Zlcn0sb246e21vdXNlZW50ZXI6X3ZtLmhvdmVySXRlbSxjbGljazpmdW5jdGlvbigkZXZlbnQpe3JldHVybiAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksX3ZtLnNlbGVjdE9wdGlvbkNsaWNrKCRldmVudCl9fX0sW192bS5fdCgiZGVmYXVsdCIsW19jKCJzcGFuIixbX3ZtLl92KF92bS5fcyhfdm0uY3VycmVudExhYmVsKSldKV0pXSwyKX07b3B0aW9udnVlX3R5cGVfdGVtcGxhdGVfaWRfN2E0NGM2NDJfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIF90eXBlb2Y9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9ian06ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIG9ian0sb3B0aW9uX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe21peGluczpbZW1pdHRlcl9kZWZhdWx0LmFdLG5hbWU6IkVsT3B0aW9uIixjb21wb25lbnROYW1lOiJFbE9wdGlvbiIsaW5qZWN0Olsic2VsZWN0Il0scHJvcHM6e3ZhbHVlOntyZXF1aXJlZDohMH0sbGFiZWw6W1N0cmluZyxOdW1iZXJdLGNyZWF0ZWQ6Qm9vbGVhbixkaXNhYmxlZDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2luZGV4Oi0xLGdyb3VwRGlzYWJsZWQ6ITEsdmlzaWJsZTohMCxoaXRTdGF0ZTohMSxob3ZlcjohMX19LGNvbXB1dGVkOntpc09iamVjdDpmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IG9iamVjdF0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMudmFsdWUpLnRvTG93ZXJDYXNlKCl9LGN1cnJlbnRMYWJlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhYmVsfHwodGhpcy5pc09iamVjdD8iIjp0aGlzLnZhbHVlKX0sY3VycmVudFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV8fHRoaXMubGFiZWx8fCIifSxpdGVtU2VsZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3QubXVsdGlwbGU/dGhpcy5jb250YWlucyh0aGlzLnNlbGVjdC52YWx1ZSx0aGlzLnZhbHVlKTp0aGlzLmlzRXF1YWwodGhpcy52YWx1ZSx0aGlzLnNlbGVjdC52YWx1ZSl9LGxpbWl0UmVhY2hlZDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5zZWxlY3QubXVsdGlwbGUmJighdGhpcy5pdGVtU2VsZWN0ZWQmJih0aGlzLnNlbGVjdC52YWx1ZXx8W10pLmxlbmd0aD49dGhpcy5zZWxlY3QubXVsdGlwbGVMaW1pdCYmMDx0aGlzLnNlbGVjdC5tdWx0aXBsZUxpbWl0KX19LHdhdGNoOntjdXJyZW50TGFiZWw6ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZWR8fHRoaXMuc2VsZWN0LnJlbW90ZXx8dGhpcy5kaXNwYXRjaCgiRWxTZWxlY3QiLCJzZXRTZWxlY3RlZCIpfSx2YWx1ZTpmdW5jdGlvbih2YWwsb2xkVmFsKXt2YXIgX3NlbGVjdD10aGlzLnNlbGVjdCxyZW1vdGU9X3NlbGVjdC5yZW1vdGUsdmFsdWVLZXk9X3NlbGVjdC52YWx1ZUtleTtpZighdGhpcy5jcmVhdGVkJiYhcmVtb3RlKXtpZih2YWx1ZUtleSYmIm9iamVjdCI9PT0odm9pZCAwPT09dmFsPyJ1bmRlZmluZWQiOl90eXBlb2YodmFsKSkmJiJvYmplY3QiPT09KHZvaWQgMD09PW9sZFZhbD8idW5kZWZpbmVkIjpfdHlwZW9mKG9sZFZhbCkpJiZ2YWxbdmFsdWVLZXldPT09b2xkVmFsW3ZhbHVlS2V5XSlyZXR1cm47dGhpcy5kaXNwYXRjaCgiRWxTZWxlY3QiLCJzZXRTZWxlY3RlZCIpfX19LG1ldGhvZHM6e2lzRXF1YWw6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmlzT2JqZWN0KXt2YXIgdmFsdWVLZXk9dGhpcy5zZWxlY3QudmFsdWVLZXk7cmV0dXJuIE9iamVjdCh1dGlsXy5nZXRWYWx1ZUJ5UGF0aCkoYSx2YWx1ZUtleSk9PT1PYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKGIsdmFsdWVLZXkpfXJldHVybiBhPT09Yn0sY29udGFpbnM6ZnVuY3Rpb24oKXt2YXIgYXJyPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXSx0YXJnZXQ9YXJndW1lbnRzWzFdO2lmKHRoaXMuaXNPYmplY3Qpe3ZhciB2YWx1ZUtleT10aGlzLnNlbGVjdC52YWx1ZUtleTtyZXR1cm4gYXJyLnNvbWUoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIE9iamVjdCh1dGlsXy5nZXRWYWx1ZUJ5UGF0aCkoaXRlbSx2YWx1ZUtleSk9PT1PYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKHRhcmdldCx2YWx1ZUtleSl9KX1yZXR1cm4tMTxhcnIuaW5kZXhPZih0YXJnZXQpfSxoYW5kbGVHcm91cERpc2FibGVkOmZ1bmN0aW9uKHZhbCl7dGhpcy5ncm91cERpc2FibGVkPXZhbH0saG92ZXJJdGVtOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZHx8dGhpcy5ncm91cERpc2FibGVkfHwodGhpcy5zZWxlY3QuaG92ZXJJbmRleD10aGlzLnNlbGVjdC5vcHRpb25zLmluZGV4T2YodGhpcykpfSxzZWxlY3RPcHRpb25DbGljazpmdW5jdGlvbigpeyEwIT09dGhpcy5kaXNhYmxlZCYmITAhPT10aGlzLmdyb3VwRGlzYWJsZWQmJnRoaXMuZGlzcGF0Y2goIkVsU2VsZWN0IiwiaGFuZGxlT3B0aW9uQ2xpY2siLFt0aGlzLCEwXSl9LHF1ZXJ5Q2hhbmdlOmZ1bmN0aW9uKHF1ZXJ5KXt0aGlzLnZpc2libGU9bmV3IFJlZ0V4cChPYmplY3QodXRpbF8uZXNjYXBlUmVnZXhwU3RyaW5nKShxdWVyeSksImkiKS50ZXN0KHRoaXMuY3VycmVudExhYmVsKXx8dGhpcy5jcmVhdGVkLHRoaXMudmlzaWJsZXx8dGhpcy5zZWxlY3QuZmlsdGVyZWRPcHRpb25zQ291bnQtLX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdC5vcHRpb25zLnB1c2godGhpcyksdGhpcy5zZWxlY3QuY2FjaGVkT3B0aW9ucy5wdXNoKHRoaXMpLHRoaXMuc2VsZWN0Lm9wdGlvbnNDb3VudCsrLHRoaXMuc2VsZWN0LmZpbHRlcmVkT3B0aW9uc0NvdW50KyssdGhpcy4kb24oInF1ZXJ5Q2hhbmdlIix0aGlzLnF1ZXJ5Q2hhbmdlKSx0aGlzLiRvbigiaGFuZGxlR3JvdXBEaXNhYmxlZCIsdGhpcy5oYW5kbGVHcm91cERpc2FibGVkKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0Lm9uT3B0aW9uRGVzdHJveSh0aGlzLnNlbGVjdC5vcHRpb25zLmluZGV4T2YodGhpcykpfX0sb3B0aW9udnVlX3R5cGVfdGVtcGxhdGVfaWRfN2E0NGM2NDJfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtvcHRpb25fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9zZWxlY3Qvc3JjL29wdGlvbi52dWUiO3ZhciBzcmNfb3B0aW9uPW9wdGlvbl9jb21wb25lbnQuZXhwb3J0cyx0YWdfPV9fd2VicGFja19yZXF1aXJlX18oMjEpLHRhZ19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubih0YWdfKSxyZXNpemVfZXZlbnRfPV9fd2VicGFja19yZXF1aXJlX18oMTMpLGxpYl9sb2NhbGVfPV9fd2VicGFja19yZXF1aXJlX18oOSksbGliX2xvY2FsZV9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihsaWJfbG9jYWxlXyksc2Nyb2xsX2ludG9fdmlld189X193ZWJwYWNrX3JlcXVpcmVfXygyMiksc2Nyb2xsX2ludG9fdmlld19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihzY3JvbGxfaW50b192aWV3Xyksc2hhcmVkXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDI1KSxzZWxlY3RfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bWl4aW5zOltlbWl0dGVyX2RlZmF1bHQuYSxsb2NhbGVfZGVmYXVsdC5hLGZvY3VzX2RlZmF1bHQoKSgicmVmZXJlbmNlIikse2RhdGE6ZnVuY3Rpb24oKXtyZXR1cm57aG92ZXJPcHRpb246LTF9fSxjb21wdXRlZDp7b3B0aW9uc0FsbERpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24ob3B0aW9uKXtyZXR1cm4gb3B0aW9uLnZpc2libGV9KS5ldmVyeShmdW5jdGlvbihvcHRpb24pe3JldHVybiBvcHRpb24uZGlzYWJsZWR9KX19LHdhdGNoOntob3ZlckluZGV4OmZ1bmN0aW9uKHZhbCl7dmFyIF90aGlzPXRoaXM7Im51bWJlciI9PXR5cGVvZiB2YWwmJi0xPHZhbCYmKHRoaXMuaG92ZXJPcHRpb249dGhpcy5vcHRpb25zW3ZhbF18fHt9KSx0aGlzLm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbihvcHRpb24pe29wdGlvbi5ob3Zlcj1fdGhpcy5ob3Zlck9wdGlvbj09PW9wdGlvbn0pfX0sbWV0aG9kczp7bmF2aWdhdGVPcHRpb25zOmZ1bmN0aW9uKGRpcmVjdGlvbil7dmFyIF90aGlzMj10aGlzO2lmKHRoaXMudmlzaWJsZSl7aWYoMCE9PXRoaXMub3B0aW9ucy5sZW5ndGgmJjAhPT10aGlzLmZpbHRlcmVkT3B0aW9uc0NvdW50JiYhdGhpcy5vcHRpb25zQWxsRGlzYWJsZWQpeyJuZXh0Ij09PWRpcmVjdGlvbj8odGhpcy5ob3ZlckluZGV4KyssdGhpcy5ob3ZlckluZGV4PT09dGhpcy5vcHRpb25zLmxlbmd0aCYmKHRoaXMuaG92ZXJJbmRleD0wKSk6InByZXYiPT09ZGlyZWN0aW9uJiYodGhpcy5ob3ZlckluZGV4LS0sdGhpcy5ob3ZlckluZGV4PDAmJih0aGlzLmhvdmVySW5kZXg9dGhpcy5vcHRpb25zLmxlbmd0aC0xKSk7dmFyIG9wdGlvbj10aGlzLm9wdGlvbnNbdGhpcy5ob3ZlckluZGV4XTshMCE9PW9wdGlvbi5kaXNhYmxlZCYmITAhPT1vcHRpb24uZ3JvdXBEaXNhYmxlZCYmb3B0aW9uLnZpc2libGV8fHRoaXMubmF2aWdhdGVPcHRpb25zKGRpcmVjdGlvbiksdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMyLnNjcm9sbFRvT3B0aW9uKF90aGlzMi5ob3Zlck9wdGlvbil9KX19ZWxzZSB0aGlzLnZpc2libGU9ITB9fX1dLG5hbWU6IkVsU2VsZWN0Iixjb21wb25lbnROYW1lOiJFbFNlbGVjdCIsaW5qZWN0OntlbEZvcm06e2RlZmF1bHQ6IiJ9LGVsRm9ybUl0ZW06e2RlZmF1bHQ6IiJ9fSxwcm92aWRlOmZ1bmN0aW9uKCl7cmV0dXJue3NlbGVjdDp0aGlzfX0sY29tcHV0ZWQ6e19lbEZvcm1JdGVtU2l6ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmVsRm9ybUl0ZW18fHt9KS5lbEZvcm1JdGVtU2l6ZX0scmVhZG9ubHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5maWx0ZXJhYmxlfHx0aGlzLm11bHRpcGxlfHwhT2JqZWN0KHV0aWxfLmlzSUUpKCkmJiFPYmplY3QodXRpbF8uaXNFZGdlKSgpJiYhdGhpcy52aXNpYmxlfSxzaG93Q2xvc2U6ZnVuY3Rpb24oKXt2YXIgaGFzVmFsdWU9dGhpcy5tdWx0aXBsZT9BcnJheS5pc0FycmF5KHRoaXMudmFsdWUpJiYwPHRoaXMudmFsdWUubGVuZ3RoOnZvaWQgMCE9PXRoaXMudmFsdWUmJm51bGwhPT10aGlzLnZhbHVlJiYiIiE9PXRoaXMudmFsdWU7cmV0dXJuIHRoaXMuY2xlYXJhYmxlJiYhdGhpcy5zZWxlY3REaXNhYmxlZCYmdGhpcy5pbnB1dEhvdmVyaW5nJiZoYXNWYWx1ZX0saWNvbkNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3RlJiZ0aGlzLmZpbHRlcmFibGU/IiI6dGhpcy52aXNpYmxlPyJhcnJvdy11cCBpcy1yZXZlcnNlIjoiYXJyb3ctdXAifSxkZWJvdW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW90ZT8zMDA6MH0sZW1wdHlUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9hZGluZz90aGlzLmxvYWRpbmdUZXh0fHx0aGlzLnQoImVsLnNlbGVjdC5sb2FkaW5nIik6KCF0aGlzLnJlbW90ZXx8IiIhPT10aGlzLnF1ZXJ5fHwwIT09dGhpcy5vcHRpb25zLmxlbmd0aCkmJih0aGlzLmZpbHRlcmFibGUmJnRoaXMucXVlcnkmJjA8dGhpcy5vcHRpb25zLmxlbmd0aCYmMD09PXRoaXMuZmlsdGVyZWRPcHRpb25zQ291bnQ/dGhpcy5ub01hdGNoVGV4dHx8dGhpcy50KCJlbC5zZWxlY3Qubm9NYXRjaCIpOjA9PT10aGlzLm9wdGlvbnMubGVuZ3RoP3RoaXMubm9EYXRhVGV4dHx8dGhpcy50KCJlbC5zZWxlY3Qubm9EYXRhIik6bnVsbCl9LHNob3dOZXdPcHRpb246ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpcyxoYXNFeGlzdGluZ09wdGlvbj10aGlzLm9wdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKG9wdGlvbil7cmV0dXJuIW9wdGlvbi5jcmVhdGVkfSkuc29tZShmdW5jdGlvbihvcHRpb24pe3JldHVybiBvcHRpb24uY3VycmVudExhYmVsPT09X3RoaXMucXVlcnl9KTtyZXR1cm4gdGhpcy5maWx0ZXJhYmxlJiZ0aGlzLmFsbG93Q3JlYXRlJiYiIiE9PXRoaXMucXVlcnkmJiFoYXNFeGlzdGluZ09wdGlvbn0sc2VsZWN0U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV8fHRoaXMuX2VsRm9ybUl0ZW1TaXplfHwodGhpcy4kRUxFTUVOVHx8e30pLnNpemV9LHNlbGVjdERpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfSxjb2xsYXBzZVRhZ1NpemU6ZnVuY3Rpb24oKXtyZXR1cm4tMTxbInNtYWxsIiwibWluaSJdLmluZGV4T2YodGhpcy5zZWxlY3RTaXplKT8ibWluaSI6InNtYWxsIn19LGNvbXBvbmVudHM6e0VsSW5wdXQ6aW5wdXRfZGVmYXVsdC5hLEVsU2VsZWN0TWVudTpzZWxlY3RfZHJvcGRvd24sRWxPcHRpb246c3JjX29wdGlvbixFbFRhZzp0YWdfZGVmYXVsdC5hLEVsU2Nyb2xsYmFyOnNjcm9sbGJhcl9kZWZhdWx0LmF9LGRpcmVjdGl2ZXM6e0NsaWNrb3V0c2lkZTpjbGlja291dHNpZGVfZGVmYXVsdC5hfSxwcm9wczp7bmFtZTpTdHJpbmcsaWQ6U3RyaW5nLHZhbHVlOntyZXF1aXJlZDohMH0sYXV0b2NvbXBsZXRlOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJvZmYifSxhdXRvQ29tcGxldGU6e3R5cGU6U3RyaW5nLHZhbGlkYXRvcjpmdW5jdGlvbih2YWwpe3JldHVybiEwfX0sYXV0b21hdGljRHJvcGRvd246Qm9vbGVhbixzaXplOlN0cmluZyxkaXNhYmxlZDpCb29sZWFuLGNsZWFyYWJsZTpCb29sZWFuLGZpbHRlcmFibGU6Qm9vbGVhbixhbGxvd0NyZWF0ZTpCb29sZWFuLGxvYWRpbmc6Qm9vbGVhbixwb3BwZXJDbGFzczpTdHJpbmcscmVtb3RlOkJvb2xlYW4sbG9hZGluZ1RleHQ6U3RyaW5nLG5vTWF0Y2hUZXh0OlN0cmluZyxub0RhdGFUZXh0OlN0cmluZyxyZW1vdGVNZXRob2Q6RnVuY3Rpb24sZmlsdGVyTWV0aG9kOkZ1bmN0aW9uLG11bHRpcGxlOkJvb2xlYW4sbXVsdGlwbGVMaW1pdDp7dHlwZTpOdW1iZXIsZGVmYXVsdDowfSxwbGFjZWhvbGRlcjp7dHlwZTpTdHJpbmcsZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBPYmplY3QobGliX2xvY2FsZV8udCkoImVsLnNlbGVjdC5wbGFjZWhvbGRlciIpfX0sZGVmYXVsdEZpcnN0T3B0aW9uOkJvb2xlYW4scmVzZXJ2ZUtleXdvcmQ6Qm9vbGVhbix2YWx1ZUtleTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoidmFsdWUifSxjb2xsYXBzZVRhZ3M6Qm9vbGVhbixwb3BwZXJBcHBlbmRUb0JvZHk6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntvcHRpb25zOltdLGNhY2hlZE9wdGlvbnM6W10sY3JlYXRlZExhYmVsOm51bGwsY3JlYXRlZFNlbGVjdGVkOiExLHNlbGVjdGVkOnRoaXMubXVsdGlwbGU/W106e30saW5wdXRMZW5ndGg6MjAsaW5wdXRXaWR0aDowLGluaXRpYWxJbnB1dEhlaWdodDowLGNhY2hlZFBsYWNlSG9sZGVyOiIiLG9wdGlvbnNDb3VudDowLGZpbHRlcmVkT3B0aW9uc0NvdW50OjAsdmlzaWJsZTohMSxzb2Z0Rm9jdXM6ITEsc2VsZWN0ZWRMYWJlbDoiIixob3ZlckluZGV4Oi0xLHF1ZXJ5OiIiLHByZXZpb3VzUXVlcnk6bnVsbCxpbnB1dEhvdmVyaW5nOiExLGN1cnJlbnRQbGFjZWhvbGRlcjoiIixtZW51VmlzaWJsZU9uRm9jdXM6ITEsaXNPbkNvbXBvc2l0aW9uOiExLGlzU2lsZW50Qmx1cjohMX19LHdhdGNoOntzZWxlY3REaXNhYmxlZDpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpczt0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzMi5yZXNldElucHV0SGVpZ2h0KCl9KX0scGxhY2Vob2xkZXI6ZnVuY3Rpb24odmFsKXt0aGlzLmNhY2hlZFBsYWNlSG9sZGVyPXRoaXMuY3VycmVudFBsYWNlaG9sZGVyPXZhbH0sdmFsdWU6ZnVuY3Rpb24odmFsLG9sZFZhbCl7dGhpcy5tdWx0aXBsZSYmKHRoaXMucmVzZXRJbnB1dEhlaWdodCgpLDA8dmFsLmxlbmd0aHx8dGhpcy4kcmVmcy5pbnB1dCYmIiIhPT10aGlzLnF1ZXJ5P3RoaXMuY3VycmVudFBsYWNlaG9sZGVyPSIiOnRoaXMuY3VycmVudFBsYWNlaG9sZGVyPXRoaXMuY2FjaGVkUGxhY2VIb2xkZXIsdGhpcy5maWx0ZXJhYmxlJiYhdGhpcy5yZXNlcnZlS2V5d29yZCYmKHRoaXMucXVlcnk9IiIsdGhpcy5oYW5kbGVRdWVyeUNoYW5nZSh0aGlzLnF1ZXJ5KSkpLHRoaXMuc2V0U2VsZWN0ZWQoKSx0aGlzLmZpbHRlcmFibGUmJiF0aGlzLm11bHRpcGxlJiYodGhpcy5pbnB1dExlbmd0aD0yMCksT2JqZWN0KHV0aWxfLnZhbHVlRXF1YWxzKSh2YWwsb2xkVmFsKXx8dGhpcy5kaXNwYXRjaCgiRWxGb3JtSXRlbSIsImVsLmZvcm0uY2hhbmdlIix2YWwpfSx2aXNpYmxlOmZ1bmN0aW9uKHZhbCl7dmFyIF90aGlzMz10aGlzO3ZhbD8odGhpcy5icm9hZGNhc3QoIkVsU2VsZWN0RHJvcGRvd24iLCJ1cGRhdGVQb3BwZXIiKSx0aGlzLmZpbHRlcmFibGUmJih0aGlzLnF1ZXJ5PXRoaXMucmVtb3RlPyIiOnRoaXMuc2VsZWN0ZWRMYWJlbCx0aGlzLmhhbmRsZVF1ZXJ5Q2hhbmdlKHRoaXMucXVlcnkpLHRoaXMubXVsdGlwbGU/dGhpcy4kcmVmcy5pbnB1dC5mb2N1cygpOih0aGlzLnJlbW90ZXx8KHRoaXMuYnJvYWRjYXN0KCJFbE9wdGlvbiIsInF1ZXJ5Q2hhbmdlIiwiIiksdGhpcy5icm9hZGNhc3QoIkVsT3B0aW9uR3JvdXAiLCJxdWVyeUNoYW5nZSIpKSx0aGlzLmJyb2FkY2FzdCgiRWxJbnB1dCIsImlucHV0U2VsZWN0IikpKSk6KHRoaXMuYnJvYWRjYXN0KCJFbFNlbGVjdERyb3Bkb3duIiwiZGVzdHJveVBvcHBlciIpLHRoaXMuJHJlZnMuaW5wdXQmJnRoaXMuJHJlZnMuaW5wdXQuYmx1cigpLHRoaXMucXVlcnk9IiIsdGhpcy5wcmV2aW91c1F1ZXJ5PW51bGwsdGhpcy5zZWxlY3RlZExhYmVsPSIiLHRoaXMuaW5wdXRMZW5ndGg9MjAsdGhpcy5tZW51VmlzaWJsZU9uRm9jdXM9ITEsdGhpcy5yZXNldEhvdmVySW5kZXgoKSx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzMy4kcmVmcy5pbnB1dCYmIiI9PT1fdGhpczMuJHJlZnMuaW5wdXQudmFsdWUmJjA9PT1fdGhpczMuc2VsZWN0ZWQubGVuZ3RoJiYoX3RoaXMzLmN1cnJlbnRQbGFjZWhvbGRlcj1fdGhpczMuY2FjaGVkUGxhY2VIb2xkZXIpfSksdGhpcy5tdWx0aXBsZXx8dGhpcy5zZWxlY3RlZCYmKHRoaXMuZmlsdGVyYWJsZSYmdGhpcy5hbGxvd0NyZWF0ZSYmdGhpcy5jcmVhdGVkU2VsZWN0ZWQmJnRoaXMuY3JlYXRlZExhYmVsP3RoaXMuc2VsZWN0ZWRMYWJlbD10aGlzLmNyZWF0ZWRMYWJlbDp0aGlzLnNlbGVjdGVkTGFiZWw9dGhpcy5zZWxlY3RlZC5jdXJyZW50TGFiZWwsdGhpcy5maWx0ZXJhYmxlJiYodGhpcy5xdWVyeT10aGlzLnNlbGVjdGVkTGFiZWwpKSksdGhpcy4kZW1pdCgidmlzaWJsZS1jaGFuZ2UiLHZhbCl9LG9wdGlvbnM6ZnVuY3Rpb24oKXt2YXIgX3RoaXM0PXRoaXM7aWYoIXRoaXMuJGlzU2VydmVyKXt0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzNC5icm9hZGNhc3QoIkVsU2VsZWN0RHJvcGRvd24iLCJ1cGRhdGVQb3BwZXIiKX0pLHRoaXMubXVsdGlwbGUmJnRoaXMucmVzZXRJbnB1dEhlaWdodCgpO3ZhciBpbnB1dHM9dGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQiKTstMT09PVtdLmluZGV4T2YuY2FsbChpbnB1dHMsZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkmJnRoaXMuc2V0U2VsZWN0ZWQoKSx0aGlzLmRlZmF1bHRGaXJzdE9wdGlvbiYmKHRoaXMuZmlsdGVyYWJsZXx8dGhpcy5yZW1vdGUpJiZ0aGlzLmZpbHRlcmVkT3B0aW9uc0NvdW50JiZ0aGlzLmNoZWNrRGVmYXVsdEZpcnN0T3B0aW9uKCl9fX0sbWV0aG9kczp7aGFuZGxlQ29tcG9zaXRpb246ZnVuY3Rpb24oZXZlbnQpe3ZhciB0ZXh0PWV2ZW50LnRhcmdldC52YWx1ZTtpZigiY29tcG9zaXRpb25lbmQiPT09ZXZlbnQudHlwZSl0aGlzLmlzT25Db21wb3NpdGlvbj0hMSx0aGlzLmhhbmRsZVF1ZXJ5Q2hhbmdlKHRleHQpO2Vsc2V7dmFyIGxhc3RDaGFyYWN0ZXI9dGV4dFt0ZXh0Lmxlbmd0aC0xXXx8IiI7dGhpcy5pc09uQ29tcG9zaXRpb249IU9iamVjdChzaGFyZWRfLmlzS29yZWFuKShsYXN0Q2hhcmFjdGVyKX19LGhhbmRsZVF1ZXJ5Q2hhbmdlOmZ1bmN0aW9uKHZhbCl7dmFyIF90aGlzNT10aGlzO2lmKHRoaXMucHJldmlvdXNRdWVyeSE9PXZhbCYmIXRoaXMuaXNPbkNvbXBvc2l0aW9uKWlmKG51bGwhPT10aGlzLnByZXZpb3VzUXVlcnl8fCJmdW5jdGlvbiIhPXR5cGVvZiB0aGlzLmZpbHRlck1ldGhvZCYmImZ1bmN0aW9uIiE9dHlwZW9mIHRoaXMucmVtb3RlTWV0aG9kKXtpZih0aGlzLnByZXZpb3VzUXVlcnk9dmFsLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7X3RoaXM1LnZpc2libGUmJl90aGlzNS5icm9hZGNhc3QoIkVsU2VsZWN0RHJvcGRvd24iLCJ1cGRhdGVQb3BwZXIiKX0pLHRoaXMuaG92ZXJJbmRleD0tMSx0aGlzLm11bHRpcGxlJiZ0aGlzLmZpbHRlcmFibGUpe3ZhciBsZW5ndGg9MTUqdGhpcy4kcmVmcy5pbnB1dC52YWx1ZS5sZW5ndGgrMjA7dGhpcy5pbnB1dExlbmd0aD10aGlzLmNvbGxhcHNlVGFncz9NYXRoLm1pbig1MCxsZW5ndGgpOmxlbmd0aCx0aGlzLm1hbmFnZVBsYWNlaG9sZGVyKCksdGhpcy5yZXNldElucHV0SGVpZ2h0KCl9dGhpcy5yZW1vdGUmJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlbW90ZU1ldGhvZD8odGhpcy5ob3ZlckluZGV4PS0xLHRoaXMucmVtb3RlTWV0aG9kKHZhbCkpOigiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5maWx0ZXJNZXRob2Q/dGhpcy5maWx0ZXJNZXRob2QodmFsKToodGhpcy5maWx0ZXJlZE9wdGlvbnNDb3VudD10aGlzLm9wdGlvbnNDb3VudCx0aGlzLmJyb2FkY2FzdCgiRWxPcHRpb24iLCJxdWVyeUNoYW5nZSIsdmFsKSksdGhpcy5icm9hZGNhc3QoIkVsT3B0aW9uR3JvdXAiLCJxdWVyeUNoYW5nZSIpKSx0aGlzLmRlZmF1bHRGaXJzdE9wdGlvbiYmKHRoaXMuZmlsdGVyYWJsZXx8dGhpcy5yZW1vdGUpJiZ0aGlzLmZpbHRlcmVkT3B0aW9uc0NvdW50JiZ0aGlzLmNoZWNrRGVmYXVsdEZpcnN0T3B0aW9uKCl9ZWxzZSB0aGlzLnByZXZpb3VzUXVlcnk9dmFsfSxzY3JvbGxUb09wdGlvbjpmdW5jdGlvbihvcHRpb24pe3ZhciB0YXJnZXQ9QXJyYXkuaXNBcnJheShvcHRpb24pJiZvcHRpb25bMF0/b3B0aW9uWzBdLiRlbDpvcHRpb24uJGVsO2lmKHRoaXMuJHJlZnMucG9wcGVyJiZ0YXJnZXQpe3ZhciBtZW51PXRoaXMuJHJlZnMucG9wcGVyLiRlbC5xdWVyeVNlbGVjdG9yKCIuZWwtc2VsZWN0LWRyb3Bkb3duX193cmFwIik7c2Nyb2xsX2ludG9fdmlld19kZWZhdWx0KCkobWVudSx0YXJnZXQpfXRoaXMuJHJlZnMuc2Nyb2xsYmFyJiZ0aGlzLiRyZWZzLnNjcm9sbGJhci5oYW5kbGVTY3JvbGwoKX0saGFuZGxlTWVudUVudGVyOmZ1bmN0aW9uKCl7dmFyIF90aGlzNj10aGlzO3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzNi5zY3JvbGxUb09wdGlvbihfdGhpczYuc2VsZWN0ZWQpfSl9LGVtaXRDaGFuZ2U6ZnVuY3Rpb24odmFsKXtPYmplY3QodXRpbF8udmFsdWVFcXVhbHMpKHRoaXMudmFsdWUsdmFsKXx8dGhpcy4kZW1pdCgiY2hhbmdlIix2YWwpfSxnZXRPcHRpb246ZnVuY3Rpb24odmFsdWUpe2Zvcih2YXIgb3B0aW9uPXZvaWQgMCxpc09iamVjdD0iW29iamVjdCBvYmplY3RdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkudG9Mb3dlckNhc2UoKSxpc051bGw9IltvYmplY3QgbnVsbF0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS50b0xvd2VyQ2FzZSgpLGk9dGhpcy5jYWNoZWRPcHRpb25zLmxlbmd0aC0xOzA8PWk7aS0tKXt2YXIgY2FjaGVkT3B0aW9uPXRoaXMuY2FjaGVkT3B0aW9uc1tpXTtpZihpc09iamVjdD9PYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKGNhY2hlZE9wdGlvbi52YWx1ZSx0aGlzLnZhbHVlS2V5KT09PU9iamVjdCh1dGlsXy5nZXRWYWx1ZUJ5UGF0aCkodmFsdWUsdGhpcy52YWx1ZUtleSk6Y2FjaGVkT3B0aW9uLnZhbHVlPT09dmFsdWUpe29wdGlvbj1jYWNoZWRPcHRpb247YnJlYWt9fWlmKG9wdGlvbilyZXR1cm4gb3B0aW9uO3ZhciBuZXdPcHRpb249e3ZhbHVlOnZhbHVlLGN1cnJlbnRMYWJlbDppc09iamVjdHx8aXNOdWxsPyIiOnZhbHVlfTtyZXR1cm4gdGhpcy5tdWx0aXBsZSYmKG5ld09wdGlvbi5oaXRTdGF0ZT0hMSksbmV3T3B0aW9ufSxzZXRTZWxlY3RlZDpmdW5jdGlvbigpe3ZhciBfdGhpczc9dGhpcztpZighdGhpcy5tdWx0aXBsZSl7dmFyIG9wdGlvbj10aGlzLmdldE9wdGlvbih0aGlzLnZhbHVlKTtyZXR1cm4gb3B0aW9uLmNyZWF0ZWQ/KHRoaXMuY3JlYXRlZExhYmVsPW9wdGlvbi5jdXJyZW50TGFiZWwsdGhpcy5jcmVhdGVkU2VsZWN0ZWQ9ITApOnRoaXMuY3JlYXRlZFNlbGVjdGVkPSExLHRoaXMuc2VsZWN0ZWRMYWJlbD1vcHRpb24uY3VycmVudExhYmVsLHRoaXMuc2VsZWN0ZWQ9b3B0aW9uLHZvaWQodGhpcy5maWx0ZXJhYmxlJiYodGhpcy5xdWVyeT10aGlzLnNlbGVjdGVkTGFiZWwpKX12YXIgcmVzdWx0PVtdO0FycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkmJnRoaXMudmFsdWUuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSl7cmVzdWx0LnB1c2goX3RoaXM3LmdldE9wdGlvbih2YWx1ZSkpfSksdGhpcy5zZWxlY3RlZD1yZXN1bHQsdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczcucmVzZXRJbnB1dEhlaWdodCgpfSl9LGhhbmRsZUZvY3VzOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLnNvZnRGb2N1cz90aGlzLnNvZnRGb2N1cz0hMTooKHRoaXMuYXV0b21hdGljRHJvcGRvd258fHRoaXMuZmlsdGVyYWJsZSkmJih0aGlzLnZpc2libGU9ITAsdGhpcy5tZW51VmlzaWJsZU9uRm9jdXM9ITApLHRoaXMuJGVtaXQoImZvY3VzIixldmVudCkpfSxibHVyOmZ1bmN0aW9uKCl7dGhpcy52aXNpYmxlPSExLHRoaXMuJHJlZnMucmVmZXJlbmNlLmJsdXIoKX0saGFuZGxlQmx1cjpmdW5jdGlvbihldmVudCl7dmFyIF90aGlzOD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpczguaXNTaWxlbnRCbHVyP190aGlzOC5pc1NpbGVudEJsdXI9ITE6X3RoaXM4LiRlbWl0KCJibHVyIixldmVudCl9LDUwKSx0aGlzLnNvZnRGb2N1cz0hMX0saGFuZGxlQ2xlYXJDbGljazpmdW5jdGlvbihldmVudCl7dGhpcy5kZWxldGVTZWxlY3RlZChldmVudCl9LGRvRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuJHJlZnMucG9wcGVyJiZ0aGlzLiRyZWZzLnBvcHBlci5kb0Rlc3Ryb3koKX0saGFuZGxlQ2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnZpc2libGU9ITF9LHRvZ2dsZUxhc3RPcHRpb25IaXRTdGF0ZTpmdW5jdGlvbihoaXQpe2lmKEFycmF5LmlzQXJyYXkodGhpcy5zZWxlY3RlZCkpe3ZhciBvcHRpb249dGhpcy5zZWxlY3RlZFt0aGlzLnNlbGVjdGVkLmxlbmd0aC0xXTtpZihvcHRpb24pcmV0dXJuITA9PT1oaXR8fCExPT09aGl0P29wdGlvbi5oaXRTdGF0ZT1oaXQ6KG9wdGlvbi5oaXRTdGF0ZT0hb3B0aW9uLmhpdFN0YXRlLG9wdGlvbi5oaXRTdGF0ZSl9fSxkZWxldGVQcmV2VGFnOmZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnZhbHVlLmxlbmd0aDw9MCYmIXRoaXMudG9nZ2xlTGFzdE9wdGlvbkhpdFN0YXRlKCkpe3ZhciB2YWx1ZT10aGlzLnZhbHVlLnNsaWNlKCk7dmFsdWUucG9wKCksdGhpcy4kZW1pdCgiaW5wdXQiLHZhbHVlKSx0aGlzLmVtaXRDaGFuZ2UodmFsdWUpfX0sbWFuYWdlUGxhY2Vob2xkZXI6ZnVuY3Rpb24oKXsiIiE9PXRoaXMuY3VycmVudFBsYWNlaG9sZGVyJiYodGhpcy5jdXJyZW50UGxhY2Vob2xkZXI9dGhpcy4kcmVmcy5pbnB1dC52YWx1ZT8iIjp0aGlzLmNhY2hlZFBsYWNlSG9sZGVyKX0scmVzZXRJbnB1dFN0YXRlOmZ1bmN0aW9uKGUpezghPT1lLmtleUNvZGUmJnRoaXMudG9nZ2xlTGFzdE9wdGlvbkhpdFN0YXRlKCExKSx0aGlzLmlucHV0TGVuZ3RoPTE1KnRoaXMuJHJlZnMuaW5wdXQudmFsdWUubGVuZ3RoKzIwLHRoaXMucmVzZXRJbnB1dEhlaWdodCgpfSxyZXNldElucHV0SGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIF90aGlzOT10aGlzO3RoaXMuY29sbGFwc2VUYWdzJiYhdGhpcy5maWx0ZXJhYmxlfHx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe2lmKF90aGlzOS4kcmVmcy5yZWZlcmVuY2Upe3ZhciBpbnB1dENoaWxkTm9kZXM9X3RoaXM5LiRyZWZzLnJlZmVyZW5jZS4kZWwuY2hpbGROb2RlcyxpbnB1dD1bXS5maWx0ZXIuY2FsbChpbnB1dENoaWxkTm9kZXMsZnVuY3Rpb24oaXRlbSl7cmV0dXJuIklOUFVUIj09PWl0ZW0udGFnTmFtZX0pWzBdLHRhZ3M9X3RoaXM5LiRyZWZzLnRhZ3Msc2l6ZUluTWFwPV90aGlzOS5pbml0aWFsSW5wdXRIZWlnaHR8fDQwO2lucHV0LnN0eWxlLmhlaWdodD0wPT09X3RoaXM5LnNlbGVjdGVkLmxlbmd0aD9zaXplSW5NYXArInB4IjpNYXRoLm1heCh0YWdzP3RhZ3MuY2xpZW50SGVpZ2h0Kyh0YWdzLmNsaWVudEhlaWdodD5zaXplSW5NYXA/NjowKTowLHNpemVJbk1hcCkrInB4IixfdGhpczkudmlzaWJsZSYmITEhPT1fdGhpczkuZW1wdHlUZXh0JiZfdGhpczkuYnJvYWRjYXN0KCJFbFNlbGVjdERyb3Bkb3duIiwidXBkYXRlUG9wcGVyIil9fSl9LHJlc2V0SG92ZXJJbmRleDpmdW5jdGlvbigpe3ZhciBfdGhpczEwPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe190aGlzMTAubXVsdGlwbGU/MDxfdGhpczEwLnNlbGVjdGVkLmxlbmd0aD9fdGhpczEwLmhvdmVySW5kZXg9TWF0aC5taW4uYXBwbHkobnVsbCxfdGhpczEwLnNlbGVjdGVkLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gX3RoaXMxMC5vcHRpb25zLmluZGV4T2YoaXRlbSl9KSk6X3RoaXMxMC5ob3ZlckluZGV4PS0xOl90aGlzMTAuaG92ZXJJbmRleD1fdGhpczEwLm9wdGlvbnMuaW5kZXhPZihfdGhpczEwLnNlbGVjdGVkKX0sMzAwKX0saGFuZGxlT3B0aW9uU2VsZWN0OmZ1bmN0aW9uKG9wdGlvbixieUNsaWNrKXt2YXIgX3RoaXMxMT10aGlzO2lmKHRoaXMubXVsdGlwbGUpe3ZhciB2YWx1ZT10aGlzLnZhbHVlLnNsaWNlKCksb3B0aW9uSW5kZXg9dGhpcy5nZXRWYWx1ZUluZGV4KHZhbHVlLG9wdGlvbi52YWx1ZSk7LTE8b3B0aW9uSW5kZXg/dmFsdWUuc3BsaWNlKG9wdGlvbkluZGV4LDEpOih0aGlzLm11bHRpcGxlTGltaXQ8PTB8fHZhbHVlLmxlbmd0aDx0aGlzLm11bHRpcGxlTGltaXQpJiZ2YWx1ZS5wdXNoKG9wdGlvbi52YWx1ZSksdGhpcy4kZW1pdCgiaW5wdXQiLHZhbHVlKSx0aGlzLmVtaXRDaGFuZ2UodmFsdWUpLG9wdGlvbi5jcmVhdGVkJiYodGhpcy5xdWVyeT0iIix0aGlzLmhhbmRsZVF1ZXJ5Q2hhbmdlKCIiKSx0aGlzLmlucHV0TGVuZ3RoPTIwKSx0aGlzLmZpbHRlcmFibGUmJnRoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKX1lbHNlIHRoaXMuJGVtaXQoImlucHV0IixvcHRpb24udmFsdWUpLHRoaXMuZW1pdENoYW5nZShvcHRpb24udmFsdWUpLHRoaXMudmlzaWJsZT0hMTt0aGlzLmlzU2lsZW50Qmx1cj1ieUNsaWNrLHRoaXMuc2V0U29mdEZvY3VzKCksdGhpcy52aXNpYmxlfHx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzMTEuc2Nyb2xsVG9PcHRpb24ob3B0aW9uKX0pfSxzZXRTb2Z0Rm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnNvZnRGb2N1cz0hMDt2YXIgaW5wdXQ9dGhpcy4kcmVmcy5pbnB1dHx8dGhpcy4kcmVmcy5yZWZlcmVuY2U7aW5wdXQmJmlucHV0LmZvY3VzKCl9LGdldFZhbHVlSW5kZXg6ZnVuY3Rpb24oKXt2YXIgYXJyPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXSx2YWx1ZT1hcmd1bWVudHNbMV07aWYoIltvYmplY3Qgb2JqZWN0XSIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLnRvTG93ZXJDYXNlKCkpcmV0dXJuIGFyci5pbmRleE9mKHZhbHVlKTt2YXIgdmFsdWVLZXk9dGhpcy52YWx1ZUtleSxpbmRleD0tMTtyZXR1cm4gYXJyLnNvbWUoZnVuY3Rpb24oaXRlbSxpKXtyZXR1cm4gT2JqZWN0KHV0aWxfLmdldFZhbHVlQnlQYXRoKShpdGVtLHZhbHVlS2V5KT09PU9iamVjdCh1dGlsXy5nZXRWYWx1ZUJ5UGF0aCkodmFsdWUsdmFsdWVLZXkpJiYoaW5kZXg9aSwhMCl9KSxpbmRleH0sdG9nZ2xlTWVudTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0RGlzYWJsZWR8fCh0aGlzLm1lbnVWaXNpYmxlT25Gb2N1cz90aGlzLm1lbnVWaXNpYmxlT25Gb2N1cz0hMTp0aGlzLnZpc2libGU9IXRoaXMudmlzaWJsZSx0aGlzLnZpc2libGUmJih0aGlzLiRyZWZzLmlucHV0fHx0aGlzLiRyZWZzLnJlZmVyZW5jZSkuZm9jdXMoKSl9LHNlbGVjdE9wdGlvbjpmdW5jdGlvbigpe3RoaXMudmlzaWJsZT90aGlzLm9wdGlvbnNbdGhpcy5ob3ZlckluZGV4XSYmdGhpcy5oYW5kbGVPcHRpb25TZWxlY3QodGhpcy5vcHRpb25zW3RoaXMuaG92ZXJJbmRleF0pOnRoaXMudG9nZ2xlTWVudSgpfSxkZWxldGVTZWxlY3RlZDpmdW5jdGlvbihldmVudCl7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIHZhbHVlPXRoaXMubXVsdGlwbGU/W106IiI7dGhpcy4kZW1pdCgiaW5wdXQiLHZhbHVlKSx0aGlzLmVtaXRDaGFuZ2UodmFsdWUpLHRoaXMudmlzaWJsZT0hMSx0aGlzLiRlbWl0KCJjbGVhciIpfSxkZWxldGVUYWc6ZnVuY3Rpb24oZXZlbnQsdGFnKXt2YXIgaW5kZXg9dGhpcy5zZWxlY3RlZC5pbmRleE9mKHRhZyk7aWYoLTE8aW5kZXgmJiF0aGlzLnNlbGVjdERpc2FibGVkKXt2YXIgdmFsdWU9dGhpcy52YWx1ZS5zbGljZSgpO3ZhbHVlLnNwbGljZShpbmRleCwxKSx0aGlzLiRlbWl0KCJpbnB1dCIsdmFsdWUpLHRoaXMuZW1pdENoYW5nZSh2YWx1ZSksdGhpcy4kZW1pdCgicmVtb3ZlLXRhZyIsdGFnLnZhbHVlKX1ldmVudC5zdG9wUHJvcGFnYXRpb24oKX0sb25JbnB1dENoYW5nZTpmdW5jdGlvbigpe3RoaXMuZmlsdGVyYWJsZSYmdGhpcy5xdWVyeSE9PXRoaXMuc2VsZWN0ZWRMYWJlbCYmKHRoaXMucXVlcnk9dGhpcy5zZWxlY3RlZExhYmVsLHRoaXMuaGFuZGxlUXVlcnlDaGFuZ2UodGhpcy5xdWVyeSkpfSxvbk9wdGlvbkRlc3Ryb3k6ZnVuY3Rpb24oaW5kZXgpey0xPGluZGV4JiYodGhpcy5vcHRpb25zQ291bnQtLSx0aGlzLmZpbHRlcmVkT3B0aW9uc0NvdW50LS0sdGhpcy5vcHRpb25zLnNwbGljZShpbmRleCwxKSl9LHJlc2V0SW5wdXRXaWR0aDpmdW5jdGlvbigpe3RoaXMuaW5wdXRXaWR0aD10aGlzLiRyZWZzLnJlZmVyZW5jZS4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGh9LGhhbmRsZVJlc2l6ZTpmdW5jdGlvbigpe3RoaXMucmVzZXRJbnB1dFdpZHRoKCksdGhpcy5tdWx0aXBsZSYmdGhpcy5yZXNldElucHV0SGVpZ2h0KCl9LGNoZWNrRGVmYXVsdEZpcnN0T3B0aW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciBoYXNDcmVhdGVkPSEodGhpcy5ob3ZlckluZGV4PS0xKSxpPXRoaXMub3B0aW9ucy5sZW5ndGgtMTswPD1pO2ktLSlpZih0aGlzLm9wdGlvbnNbaV0uY3JlYXRlZCl7aGFzQ3JlYXRlZD0hMCx0aGlzLmhvdmVySW5kZXg9aTticmVha31pZighaGFzQ3JlYXRlZClmb3IodmFyIF9pPTA7X2khPT10aGlzLm9wdGlvbnMubGVuZ3RoOysrX2kpe3ZhciBvcHRpb249dGhpcy5vcHRpb25zW19pXTtpZih0aGlzLnF1ZXJ5KXtpZighb3B0aW9uLmRpc2FibGVkJiYhb3B0aW9uLmdyb3VwRGlzYWJsZWQmJm9wdGlvbi52aXNpYmxlKXt0aGlzLmhvdmVySW5kZXg9X2k7YnJlYWt9fWVsc2UgaWYob3B0aW9uLml0ZW1TZWxlY3RlZCl7dGhpcy5ob3ZlckluZGV4PV9pO2JyZWFrfX19LGdldFZhbHVlS2V5OmZ1bmN0aW9uKGl0ZW0pe3JldHVybiJbb2JqZWN0IG9iamVjdF0iIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZW0udmFsdWUpLnRvTG93ZXJDYXNlKCk/aXRlbS52YWx1ZTpPYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKGl0ZW0udmFsdWUsdGhpcy52YWx1ZUtleSl9fSxjcmVhdGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzMTI9dGhpczt0aGlzLmNhY2hlZFBsYWNlSG9sZGVyPXRoaXMuY3VycmVudFBsYWNlaG9sZGVyPXRoaXMucGxhY2Vob2xkZXIsdGhpcy5tdWx0aXBsZSYmIUFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkmJnRoaXMuJGVtaXQoImlucHV0IixbXSksIXRoaXMubXVsdGlwbGUmJkFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkmJnRoaXMuJGVtaXQoImlucHV0IiwiIiksdGhpcy5kZWJvdW5jZWRPbklucHV0Q2hhbmdlPWRlYm91bmNlX2RlZmF1bHQoKSh0aGlzLmRlYm91bmNlLGZ1bmN0aW9uKCl7X3RoaXMxMi5vbklucHV0Q2hhbmdlKCl9KSx0aGlzLmRlYm91bmNlZFF1ZXJ5Q2hhbmdlPWRlYm91bmNlX2RlZmF1bHQoKSh0aGlzLmRlYm91bmNlLGZ1bmN0aW9uKGUpe190aGlzMTIuaGFuZGxlUXVlcnlDaGFuZ2UoZS50YXJnZXQudmFsdWUpfSksdGhpcy4kb24oImhhbmRsZU9wdGlvbkNsaWNrIix0aGlzLmhhbmRsZU9wdGlvblNlbGVjdCksdGhpcy4kb24oInNldFNlbGVjdGVkIix0aGlzLnNldFNlbGVjdGVkKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczEzPXRoaXM7dGhpcy5tdWx0aXBsZSYmQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSYmMDx0aGlzLnZhbHVlLmxlbmd0aCYmKHRoaXMuY3VycmVudFBsYWNlaG9sZGVyPSIiKSxPYmplY3QocmVzaXplX2V2ZW50Xy5hZGRSZXNpemVMaXN0ZW5lcikodGhpcy4kZWwsdGhpcy5oYW5kbGVSZXNpemUpO3ZhciByZWZlcmVuY2U9dGhpcy4kcmVmcy5yZWZlcmVuY2U7aWYocmVmZXJlbmNlJiZyZWZlcmVuY2UuJGVsKXt0aGlzLmluaXRpYWxJbnB1dEhlaWdodD1yZWZlcmVuY2UuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodHx8e21lZGl1bTozNixzbWFsbDozMixtaW5pOjI4fVt0aGlzLnNlbGVjdFNpemVdfXRoaXMucmVtb3RlJiZ0aGlzLm11bHRpcGxlJiZ0aGlzLnJlc2V0SW5wdXRIZWlnaHQoKSx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe3JlZmVyZW5jZSYmcmVmZXJlbmNlLiRlbCYmKF90aGlzMTMuaW5wdXRXaWR0aD1yZWZlcmVuY2UuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKX0pLHRoaXMuc2V0U2VsZWN0ZWQoKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuJGVsJiZ0aGlzLmhhbmRsZVJlc2l6ZSYmT2JqZWN0KHJlc2l6ZV9ldmVudF8ucmVtb3ZlUmVzaXplTGlzdGVuZXIpKHRoaXMuJGVsLHRoaXMuaGFuZGxlUmVzaXplKX19LHNlbGVjdHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzBlNGFhZGU2X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7c2VsZWN0X2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvc2VsZWN0L3NyYy9zZWxlY3QudnVlIjt2YXIgc3JjX3NlbGVjdD1zZWxlY3RfY29tcG9uZW50LmV4cG9ydHM7c3JjX3NlbGVjdC5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChzcmNfc2VsZWN0Lm5hbWUsc3JjX3NlbGVjdCl9O3ZhciBwYWNrYWdlc19zZWxlY3Q9c3JjX3NlbGVjdDtzcmNfb3B0aW9uLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHNyY19vcHRpb24ubmFtZSxzcmNfb3B0aW9uKX07dmFyIHBhY2thZ2VzX29wdGlvbj1zcmNfb3B0aW9uLG9wdGlvbl9ncm91cHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzY2ODVlNWRlX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50LF9jPXRoaXMuX3NlbGYuX2N8fF9oO3JldHVybiBfYygidWwiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTp0aGlzLnZpc2libGUsZXhwcmVzc2lvbjoidmlzaWJsZSJ9XSxzdGF0aWNDbGFzczoiZWwtc2VsZWN0LWdyb3VwX193cmFwIn0sW19jKCJsaSIse3N0YXRpY0NsYXNzOiJlbC1zZWxlY3QtZ3JvdXBfX3RpdGxlIn0sW3RoaXMuX3YodGhpcy5fcyh0aGlzLmxhYmVsKSldKSxfYygibGkiLFtfYygidWwiLHtzdGF0aWNDbGFzczoiZWwtc2VsZWN0LWdyb3VwIn0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMildKV0pfTtvcHRpb25fZ3JvdXB2dWVfdHlwZV90ZW1wbGF0ZV9pZF82Njg1ZTVkZV9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgb3B0aW9uX2dyb3VwX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe21peGluczpbZW1pdHRlcl9kZWZhdWx0LmFdLG5hbWU6IkVsT3B0aW9uR3JvdXAiLGNvbXBvbmVudE5hbWU6IkVsT3B0aW9uR3JvdXAiLHByb3BzOntsYWJlbDpTdHJpbmcsZGlzYWJsZWQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybnt2aXNpYmxlOiEwfX0sd2F0Y2g6e2Rpc2FibGVkOmZ1bmN0aW9uKHZhbCl7dGhpcy5icm9hZGNhc3QoIkVsT3B0aW9uIiwiaGFuZGxlR3JvdXBEaXNhYmxlZCIsdmFsKX19LG1ldGhvZHM6e3F1ZXJ5Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy52aXNpYmxlPXRoaXMuJGNoaWxkcmVuJiZBcnJheS5pc0FycmF5KHRoaXMuJGNoaWxkcmVuKSYmdGhpcy4kY2hpbGRyZW4uc29tZShmdW5jdGlvbihvcHRpb24pe3JldHVybiEwPT09b3B0aW9uLnZpc2libGV9KX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLiRvbigicXVlcnlDaGFuZ2UiLHRoaXMucXVlcnlDaGFuZ2UpfSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZCYmdGhpcy5icm9hZGNhc3QoIkVsT3B0aW9uIiwiaGFuZGxlR3JvdXBEaXNhYmxlZCIsdGhpcy5kaXNhYmxlZCl9fSxvcHRpb25fZ3JvdXB2dWVfdHlwZV90ZW1wbGF0ZV9pZF82Njg1ZTVkZV9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO29wdGlvbl9ncm91cF9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3NlbGVjdC9zcmMvb3B0aW9uLWdyb3VwLnZ1ZSI7dmFyIG9wdGlvbl9ncm91cD1vcHRpb25fZ3JvdXBfY29tcG9uZW50LmV4cG9ydHM7b3B0aW9uX2dyb3VwLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KG9wdGlvbl9ncm91cC5uYW1lLG9wdGlvbl9ncm91cCl9O3ZhciBwYWNrYWdlc19vcHRpb25fZ3JvdXA9b3B0aW9uX2dyb3VwLGJ1dHRvbnZ1ZV90eXBlX3RlbXBsYXRlX2lkX2NhODU5ZmI0X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJlbC1idXR0b24iLGNsYXNzOltfdm0udHlwZT8iZWwtYnV0dG9uLS0iK192bS50eXBlOiIiLF92bS5idXR0b25TaXplPyJlbC1idXR0b24tLSIrX3ZtLmJ1dHRvblNpemU6IiIseyJpcy1kaXNhYmxlZCI6X3ZtLmJ1dHRvbkRpc2FibGVkLCJpcy1sb2FkaW5nIjpfdm0ubG9hZGluZywiaXMtcGxhaW4iOl92bS5wbGFpbiwiaXMtcm91bmQiOl92bS5yb3VuZCwiaXMtY2lyY2xlIjpfdm0uY2lyY2xlfV0sYXR0cnM6e2Rpc2FibGVkOl92bS5idXR0b25EaXNhYmxlZHx8X3ZtLmxvYWRpbmcsYXV0b2ZvY3VzOl92bS5hdXRvZm9jdXMsdHlwZTpfdm0ubmF0aXZlVHlwZX0sb246e2NsaWNrOl92bS5oYW5kbGVDbGlja319LFtfdm0ubG9hZGluZz9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pY29uLWxvYWRpbmcifSk6X3ZtLl9lKCksX3ZtLmljb24mJiFfdm0ubG9hZGluZz9fYygiaSIse2NsYXNzOl92bS5pY29ufSk6X3ZtLl9lKCksX3ZtLiRzbG90cy5kZWZhdWx0P19jKCJzcGFuIixbX3ZtLl90KCJkZWZhdWx0IildLDIpOl92bS5fZSgpXSl9O2J1dHRvbnZ1ZV90eXBlX3RlbXBsYXRlX2lkX2NhODU5ZmI0X3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBidXR0b25fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxCdXR0b24iLGluamVjdDp7ZWxGb3JtOntkZWZhdWx0OiIifSxlbEZvcm1JdGVtOntkZWZhdWx0OiIifX0scHJvcHM6e3R5cGU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImRlZmF1bHQifSxzaXplOlN0cmluZyxpY29uOnt0eXBlOlN0cmluZyxkZWZhdWx0OiIifSxuYXRpdmVUeXBlOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJidXR0b24ifSxsb2FkaW5nOkJvb2xlYW4sZGlzYWJsZWQ6Qm9vbGVhbixwbGFpbjpCb29sZWFuLGF1dG9mb2N1czpCb29sZWFuLHJvdW5kOkJvb2xlYW4sY2lyY2xlOkJvb2xlYW59LGNvbXB1dGVkOntfZWxGb3JtSXRlbVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5lbEZvcm1JdGVtfHx7fSkuZWxGb3JtSXRlbVNpemV9LGJ1dHRvblNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfHx0aGlzLl9lbEZvcm1JdGVtU2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfSxidXR0b25EaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGVkfHwodGhpcy5lbEZvcm18fHt9KS5kaXNhYmxlZH19LG1ldGhvZHM6e2hhbmRsZUNsaWNrOmZ1bmN0aW9uKGV2dCl7dGhpcy4kZW1pdCgiY2xpY2siLGV2dCl9fX0sYnV0dG9udnVlX3R5cGVfdGVtcGxhdGVfaWRfY2E4NTlmYjRfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtidXR0b25fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9idXR0b24vc3JjL2J1dHRvbi52dWUiO3ZhciBzcmNfYnV0dG9uPWJ1dHRvbl9jb21wb25lbnQuZXhwb3J0cztzcmNfYnV0dG9uLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHNyY19idXR0b24ubmFtZSxzcmNfYnV0dG9uKX07dmFyIHBhY2thZ2VzX2J1dHRvbj1zcmNfYnV0dG9uLGJ1dHRvbl9ncm91cHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzNkODY2MWQwX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1idXR0b24tZ3JvdXAifSxbdGhpcy5fdCgiZGVmYXVsdCIpXSwyKX07YnV0dG9uX2dyb3VwdnVlX3R5cGVfdGVtcGxhdGVfaWRfM2Q4NjYxZDBfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGJ1dHRvbl9ncm91cF9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbEJ1dHRvbkdyb3VwIn0sYnV0dG9uX2dyb3VwdnVlX3R5cGVfdGVtcGxhdGVfaWRfM2Q4NjYxZDBfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtidXR0b25fZ3JvdXBfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9idXR0b24vc3JjL2J1dHRvbi1ncm91cC52dWUiO3ZhciBidXR0b25fZ3JvdXA9YnV0dG9uX2dyb3VwX2NvbXBvbmVudC5leHBvcnRzO2J1dHRvbl9ncm91cC5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChidXR0b25fZ3JvdXAubmFtZSxidXR0b25fZ3JvdXApfTt2YXIgcGFja2FnZXNfYnV0dG9uX2dyb3VwPWJ1dHRvbl9ncm91cCx0YWJsZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzQ5M2ZlMzRlX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10YWJsZSIsY2xhc3M6W3siZWwtdGFibGUtLWZpdCI6X3ZtLmZpdCwiZWwtdGFibGUtLXN0cmlwZWQiOl92bS5zdHJpcGUsImVsLXRhYmxlLS1ib3JkZXIiOl92bS5ib3JkZXJ8fF92bS5pc0dyb3VwLCJlbC10YWJsZS0taGlkZGVuIjpfdm0uaXNIaWRkZW4sImVsLXRhYmxlLS1ncm91cCI6X3ZtLmlzR3JvdXAsImVsLXRhYmxlLS1mbHVpZC1oZWlnaHQiOl92bS5tYXhIZWlnaHQsImVsLXRhYmxlLS1zY3JvbGxhYmxlLXgiOl92bS5sYXlvdXQuc2Nyb2xsWCwiZWwtdGFibGUtLXNjcm9sbGFibGUteSI6X3ZtLmxheW91dC5zY3JvbGxZLCJlbC10YWJsZS0tZW5hYmxlLXJvdy1ob3ZlciI6IV92bS5zdG9yZS5zdGF0ZXMuaXNDb21wbGV4LCJlbC10YWJsZS0tZW5hYmxlLXJvdy10cmFuc2l0aW9uIjowIT09KF92bS5zdG9yZS5zdGF0ZXMuZGF0YXx8W10pLmxlbmd0aCYmKF92bS5zdG9yZS5zdGF0ZXMuZGF0YXx8W10pLmxlbmd0aDwxMDB9LF92bS50YWJsZVNpemU/ImVsLXRhYmxlLS0iK192bS50YWJsZVNpemU6IiJdLG9uOnttb3VzZWxlYXZlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhhbmRsZU1vdXNlTGVhdmUoJGV2ZW50KX19fSxbX2MoImRpdiIse3JlZjoiaGlkZGVuQ29sdW1ucyIsc3RhdGljQ2xhc3M6ImhpZGRlbi1jb2x1bW5zIn0sW192bS5fdCgiZGVmYXVsdCIpXSwyKSxfdm0uc2hvd0hlYWRlcj9fYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6Im1vdXNld2hlZWwiLHJhd05hbWU6InYtbW91c2V3aGVlbCIsdmFsdWU6X3ZtLmhhbmRsZUhlYWRlckZvb3Rlck1vdXNld2hlZWwsZXhwcmVzc2lvbjoiaGFuZGxlSGVhZGVyRm9vdGVyTW91c2V3aGVlbCJ9XSxyZWY6ImhlYWRlcldyYXBwZXIiLHN0YXRpY0NsYXNzOiJlbC10YWJsZV9faGVhZGVyLXdyYXBwZXIifSxbX2MoInRhYmxlLWhlYWRlciIse3JlZjoidGFibGVIZWFkZXIiLHN0eWxlOnt3aWR0aDpfdm0ubGF5b3V0LmJvZHlXaWR0aD9fdm0ubGF5b3V0LmJvZHlXaWR0aCsicHgiOiIifSxhdHRyczp7c3RvcmU6X3ZtLnN0b3JlLGJvcmRlcjpfdm0uYm9yZGVyLCJkZWZhdWx0LXNvcnQiOl92bS5kZWZhdWx0U29ydH19KV0sMSk6X3ZtLl9lKCksX2MoImRpdiIse3JlZjoiYm9keVdyYXBwZXIiLHN0YXRpY0NsYXNzOiJlbC10YWJsZV9fYm9keS13cmFwcGVyIixjbGFzczpbX3ZtLmxheW91dC5zY3JvbGxYPyJpcy1zY3JvbGxpbmctIitfdm0uc2Nyb2xsUG9zaXRpb246ImlzLXNjcm9sbGluZy1ub25lIl0sc3R5bGU6W192bS5ib2R5SGVpZ2h0XX0sW19jKCJ0YWJsZS1ib2R5Iix7c3R5bGU6e3dpZHRoOl92bS5ib2R5V2lkdGh9LGF0dHJzOntjb250ZXh0Ol92bS5jb250ZXh0LHN0b3JlOl92bS5zdG9yZSxzdHJpcGU6X3ZtLnN0cmlwZSwicm93LWNsYXNzLW5hbWUiOl92bS5yb3dDbGFzc05hbWUsInJvdy1zdHlsZSI6X3ZtLnJvd1N0eWxlLGhpZ2hsaWdodDpfdm0uaGlnaGxpZ2h0Q3VycmVudFJvd319KSxfdm0uZGF0YSYmMCE9PV92bS5kYXRhLmxlbmd0aD9fdm0uX2UoKTpfYygiZGl2Iix7cmVmOiJlbXB0eUJsb2NrIixzdGF0aWNDbGFzczoiZWwtdGFibGVfX2VtcHR5LWJsb2NrIixzdHlsZTp7d2lkdGg6X3ZtLmJvZHlXaWR0aH19LFtfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC10YWJsZV9fZW1wdHktdGV4dCJ9LFtfdm0uX3QoImVtcHR5IixbX3ZtLl92KF92bS5fcyhfdm0uZW1wdHlUZXh0fHxfdm0udCgiZWwudGFibGUuZW1wdHlUZXh0IikpKV0pXSwyKV0pLF92bS4kc2xvdHMuYXBwZW5kP19jKCJkaXYiLHtyZWY6ImFwcGVuZFdyYXBwZXIiLHN0YXRpY0NsYXNzOiJlbC10YWJsZV9fYXBwZW5kLXdyYXBwZXIifSxbX3ZtLl90KCJhcHBlbmQiKV0sMik6X3ZtLl9lKCldLDEpLF92bS5zaG93U3VtbWFyeT9fYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLmRhdGEmJjA8X3ZtLmRhdGEubGVuZ3RoLGV4cHJlc3Npb246ImRhdGEgJiYgZGF0YS5sZW5ndGggPiAwIn0se25hbWU6Im1vdXNld2hlZWwiLHJhd05hbWU6InYtbW91c2V3aGVlbCIsdmFsdWU6X3ZtLmhhbmRsZUhlYWRlckZvb3Rlck1vdXNld2hlZWwsZXhwcmVzc2lvbjoiaGFuZGxlSGVhZGVyRm9vdGVyTW91c2V3aGVlbCJ9XSxyZWY6ImZvb3RlcldyYXBwZXIiLHN0YXRpY0NsYXNzOiJlbC10YWJsZV9fZm9vdGVyLXdyYXBwZXIifSxbX2MoInRhYmxlLWZvb3RlciIse3N0eWxlOnt3aWR0aDpfdm0ubGF5b3V0LmJvZHlXaWR0aD9fdm0ubGF5b3V0LmJvZHlXaWR0aCsicHgiOiIifSxhdHRyczp7c3RvcmU6X3ZtLnN0b3JlLGJvcmRlcjpfdm0uYm9yZGVyLCJzdW0tdGV4dCI6X3ZtLnN1bVRleHR8fF92bS50KCJlbC50YWJsZS5zdW1UZXh0IiksInN1bW1hcnktbWV0aG9kIjpfdm0uc3VtbWFyeU1ldGhvZCwiZGVmYXVsdC1zb3J0Ijpfdm0uZGVmYXVsdFNvcnR9fSldLDEpOl92bS5fZSgpLDA8X3ZtLmZpeGVkQ29sdW1ucy5sZW5ndGg/X2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJtb3VzZXdoZWVsIixyYXdOYW1lOiJ2LW1vdXNld2hlZWwiLHZhbHVlOl92bS5oYW5kbGVGaXhlZE1vdXNld2hlZWwsZXhwcmVzc2lvbjoiaGFuZGxlRml4ZWRNb3VzZXdoZWVsIn1dLHJlZjoiZml4ZWRXcmFwcGVyIixzdGF0aWNDbGFzczoiZWwtdGFibGVfX2ZpeGVkIixzdHlsZTpbe3dpZHRoOl92bS5sYXlvdXQuZml4ZWRXaWR0aD9fdm0ubGF5b3V0LmZpeGVkV2lkdGgrInB4IjoiIn0sX3ZtLmZpeGVkSGVpZ2h0XX0sW192bS5zaG93SGVhZGVyP19jKCJkaXYiLHtyZWY6ImZpeGVkSGVhZGVyV3JhcHBlciIsc3RhdGljQ2xhc3M6ImVsLXRhYmxlX19maXhlZC1oZWFkZXItd3JhcHBlciJ9LFtfYygidGFibGUtaGVhZGVyIix7cmVmOiJmaXhlZFRhYmxlSGVhZGVyIixzdHlsZTp7d2lkdGg6X3ZtLmJvZHlXaWR0aH0sYXR0cnM6e2ZpeGVkOiJsZWZ0Iixib3JkZXI6X3ZtLmJvcmRlcixzdG9yZTpfdm0uc3RvcmV9fSldLDEpOl92bS5fZSgpLF9jKCJkaXYiLHtyZWY6ImZpeGVkQm9keVdyYXBwZXIiLHN0YXRpY0NsYXNzOiJlbC10YWJsZV9fZml4ZWQtYm9keS13cmFwcGVyIixzdHlsZTpbe3RvcDpfdm0ubGF5b3V0LmhlYWRlckhlaWdodCsicHgifSxfdm0uZml4ZWRCb2R5SGVpZ2h0XX0sW19jKCJ0YWJsZS1ib2R5Iix7c3R5bGU6e3dpZHRoOl92bS5ib2R5V2lkdGh9LGF0dHJzOntmaXhlZDoibGVmdCIsc3RvcmU6X3ZtLnN0b3JlLHN0cmlwZTpfdm0uc3RyaXBlLGhpZ2hsaWdodDpfdm0uaGlnaGxpZ2h0Q3VycmVudFJvdywicm93LWNsYXNzLW5hbWUiOl92bS5yb3dDbGFzc05hbWUsInJvdy1zdHlsZSI6X3ZtLnJvd1N0eWxlfX0pLF92bS4kc2xvdHMuYXBwZW5kP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtdGFibGVfX2FwcGVuZC1ndXR0ZXIiLHN0eWxlOntoZWlnaHQ6X3ZtLmxheW91dC5hcHBlbmRIZWlnaHQrInB4In19KTpfdm0uX2UoKV0sMSksX3ZtLnNob3dTdW1tYXJ5P19jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0uZGF0YSYmMDxfdm0uZGF0YS5sZW5ndGgsZXhwcmVzc2lvbjoiZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDAifV0scmVmOiJmaXhlZEZvb3RlcldyYXBwZXIiLHN0YXRpY0NsYXNzOiJlbC10YWJsZV9fZml4ZWQtZm9vdGVyLXdyYXBwZXIifSxbX2MoInRhYmxlLWZvb3RlciIse3N0eWxlOnt3aWR0aDpfdm0uYm9keVdpZHRofSxhdHRyczp7Zml4ZWQ6ImxlZnQiLGJvcmRlcjpfdm0uYm9yZGVyLCJzdW0tdGV4dCI6X3ZtLnN1bVRleHR8fF92bS50KCJlbC50YWJsZS5zdW1UZXh0IiksInN1bW1hcnktbWV0aG9kIjpfdm0uc3VtbWFyeU1ldGhvZCxzdG9yZTpfdm0uc3RvcmV9fSldLDEpOl92bS5fZSgpXSk6X3ZtLl9lKCksMDxfdm0ucmlnaHRGaXhlZENvbHVtbnMubGVuZ3RoP19jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToibW91c2V3aGVlbCIscmF3TmFtZToidi1tb3VzZXdoZWVsIix2YWx1ZTpfdm0uaGFuZGxlRml4ZWRNb3VzZXdoZWVsLGV4cHJlc3Npb246ImhhbmRsZUZpeGVkTW91c2V3aGVlbCJ9XSxyZWY6InJpZ2h0Rml4ZWRXcmFwcGVyIixzdGF0aWNDbGFzczoiZWwtdGFibGVfX2ZpeGVkLXJpZ2h0IixzdHlsZTpbe3dpZHRoOl92bS5sYXlvdXQucmlnaHRGaXhlZFdpZHRoP192bS5sYXlvdXQucmlnaHRGaXhlZFdpZHRoKyJweCI6IiIscmlnaHQ6X3ZtLmxheW91dC5zY3JvbGxZPyhfdm0uYm9yZGVyP192bS5sYXlvdXQuZ3V0dGVyV2lkdGg6X3ZtLmxheW91dC5ndXR0ZXJXaWR0aHx8MCkrInB4IjoiIn0sX3ZtLmZpeGVkSGVpZ2h0XX0sW192bS5zaG93SGVhZGVyP19jKCJkaXYiLHtyZWY6InJpZ2h0Rml4ZWRIZWFkZXJXcmFwcGVyIixzdGF0aWNDbGFzczoiZWwtdGFibGVfX2ZpeGVkLWhlYWRlci13cmFwcGVyIn0sW19jKCJ0YWJsZS1oZWFkZXIiLHtyZWY6InJpZ2h0Rml4ZWRUYWJsZUhlYWRlciIsc3R5bGU6e3dpZHRoOl92bS5ib2R5V2lkdGh9LGF0dHJzOntmaXhlZDoicmlnaHQiLGJvcmRlcjpfdm0uYm9yZGVyLHN0b3JlOl92bS5zdG9yZX19KV0sMSk6X3ZtLl9lKCksX2MoImRpdiIse3JlZjoicmlnaHRGaXhlZEJvZHlXcmFwcGVyIixzdGF0aWNDbGFzczoiZWwtdGFibGVfX2ZpeGVkLWJvZHktd3JhcHBlciIsc3R5bGU6W3t0b3A6X3ZtLmxheW91dC5oZWFkZXJIZWlnaHQrInB4In0sX3ZtLmZpeGVkQm9keUhlaWdodF19LFtfYygidGFibGUtYm9keSIse3N0eWxlOnt3aWR0aDpfdm0uYm9keVdpZHRofSxhdHRyczp7Zml4ZWQ6InJpZ2h0IixzdG9yZTpfdm0uc3RvcmUsc3RyaXBlOl92bS5zdHJpcGUsInJvdy1jbGFzcy1uYW1lIjpfdm0ucm93Q2xhc3NOYW1lLCJyb3ctc3R5bGUiOl92bS5yb3dTdHlsZSxoaWdobGlnaHQ6X3ZtLmhpZ2hsaWdodEN1cnJlbnRSb3d9fSldLDEpLF92bS5zaG93U3VtbWFyeT9fYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLmRhdGEmJjA8X3ZtLmRhdGEubGVuZ3RoLGV4cHJlc3Npb246ImRhdGEgJiYgZGF0YS5sZW5ndGggPiAwIn1dLHJlZjoicmlnaHRGaXhlZEZvb3RlcldyYXBwZXIiLHN0YXRpY0NsYXNzOiJlbC10YWJsZV9fZml4ZWQtZm9vdGVyLXdyYXBwZXIifSxbX2MoInRhYmxlLWZvb3RlciIse3N0eWxlOnt3aWR0aDpfdm0uYm9keVdpZHRofSxhdHRyczp7Zml4ZWQ6InJpZ2h0Iixib3JkZXI6X3ZtLmJvcmRlciwic3VtLXRleHQiOl92bS5zdW1UZXh0fHxfdm0udCgiZWwudGFibGUuc3VtVGV4dCIpLCJzdW1tYXJ5LW1ldGhvZCI6X3ZtLnN1bW1hcnlNZXRob2Qsc3RvcmU6X3ZtLnN0b3JlfX0pXSwxKTpfdm0uX2UoKV0pOl92bS5fZSgpLDA8X3ZtLnJpZ2h0Rml4ZWRDb2x1bW5zLmxlbmd0aD9fYygiZGl2Iix7cmVmOiJyaWdodEZpeGVkUGF0Y2giLHN0YXRpY0NsYXNzOiJlbC10YWJsZV9fZml4ZWQtcmlnaHQtcGF0Y2giLHN0eWxlOnt3aWR0aDpfdm0ubGF5b3V0LnNjcm9sbFk/X3ZtLmxheW91dC5ndXR0ZXJXaWR0aCsicHgiOiIwIixoZWlnaHQ6X3ZtLmxheW91dC5oZWFkZXJIZWlnaHQrInB4In19KTpfdm0uX2UoKSxfYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLnJlc2l6ZVByb3h5VmlzaWJsZSxleHByZXNzaW9uOiJyZXNpemVQcm94eVZpc2libGUifV0scmVmOiJyZXNpemVQcm94eSIsc3RhdGljQ2xhc3M6ImVsLXRhYmxlX19jb2x1bW4tcmVzaXplLXByb3h5In0pXSl9O3RhYmxldnVlX3R5cGVfdGVtcGxhdGVfaWRfNDkzZmUzNGVfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGNoZWNrYm94Xz1fX3dlYnBhY2tfcmVxdWlyZV9fKDE0KSxjaGVja2JveF9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihjaGVja2JveF8pLGV4dGVybmFsX25vcm1hbGl6ZV93aGVlbF89X193ZWJwYWNrX3JlcXVpcmVfXygzNCksZXh0ZXJuYWxfbm9ybWFsaXplX3doZWVsX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGV4dGVybmFsX25vcm1hbGl6ZV93aGVlbF8pLGlzRmlyZWZveD0idW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmLTE8bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImZpcmVmb3giKSxkaXJlY3RpdmVzX21vdXNld2hlZWw9e2JpbmQ6ZnVuY3Rpb24oZWwsYmluZGluZyl7dmFyIGVsZW1lbnQsY2FsbGJhY2s7ZWxlbWVudD1lbCxjYWxsYmFjaz1iaW5kaW5nLnZhbHVlLGVsZW1lbnQmJmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciYmZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGlzRmlyZWZveD8iRE9NTW91c2VTY3JvbGwiOiJtb3VzZXdoZWVsIixmdW5jdGlvbihldmVudCl7dmFyIG5vcm1hbGl6ZWQ9ZXh0ZXJuYWxfbm9ybWFsaXplX3doZWVsX2RlZmF1bHQoKShldmVudCk7Y2FsbGJhY2smJmNhbGxiYWNrLmFwcGx5KHRoaXMsW2V2ZW50LG5vcm1hbGl6ZWRdKX0pfX0sZXh0ZXJuYWxfdnVlXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDMpLGV4dGVybmFsX3Z1ZV9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihleHRlcm5hbF92dWVfKSx1dGlsX3R5cGVvZj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqfTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2Ygb2JqfSxnZXRDZWxsPWZ1bmN0aW9uKGV2ZW50KXtmb3IodmFyIGNlbGw9ZXZlbnQudGFyZ2V0O2NlbGwmJiJIVE1MIiE9PWNlbGwudGFnTmFtZS50b1VwcGVyQ2FzZSgpOyl7aWYoIlREIj09PWNlbGwudGFnTmFtZS50b1VwcGVyQ2FzZSgpKXJldHVybiBjZWxsO2NlbGw9Y2VsbC5wYXJlbnROb2RlfXJldHVybiBudWxsfSx1dGlsX2lzT2JqZWN0PWZ1bmN0aW9uKG9iail7cmV0dXJuIG51bGwhPT1vYmomJiJvYmplY3QiPT09KHZvaWQgMD09PW9iaj8idW5kZWZpbmVkIjp1dGlsX3R5cGVvZihvYmopKX0sdXRpbF9vcmRlckJ5PWZ1bmN0aW9uKGFycmF5LHNvcnRLZXkscmV2ZXJzZSxzb3J0TWV0aG9kLHNvcnRCeSl7aWYoIXNvcnRLZXkmJiFzb3J0TWV0aG9kJiYoIXNvcnRCeXx8QXJyYXkuaXNBcnJheShzb3J0QnkpJiYhc29ydEJ5Lmxlbmd0aCkpcmV0dXJuIGFycmF5O3JldmVyc2U9InN0cmluZyI9PXR5cGVvZiByZXZlcnNlPyJkZXNjZW5kaW5nIj09PXJldmVyc2U/LTE6MTpyZXZlcnNlJiZyZXZlcnNlPDA/LTE6MTt2YXIgZ2V0S2V5PXNvcnRNZXRob2Q/bnVsbDpmdW5jdGlvbih2YWx1ZSxpbmRleCl7cmV0dXJuIHNvcnRCeT8oQXJyYXkuaXNBcnJheShzb3J0QnkpfHwoc29ydEJ5PVtzb3J0QnldKSxzb3J0QnkubWFwKGZ1bmN0aW9uKGJ5KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGJ5P09iamVjdCh1dGlsXy5nZXRWYWx1ZUJ5UGF0aCkodmFsdWUsYnkpOmJ5KHZhbHVlLGluZGV4LGFycmF5KX0pKTooIiRrZXkiIT09c29ydEtleSYmdXRpbF9pc09iamVjdCh2YWx1ZSkmJiIkdmFsdWUiaW4gdmFsdWUmJih2YWx1ZT12YWx1ZS4kdmFsdWUpLFt1dGlsX2lzT2JqZWN0KHZhbHVlKT9PYmplY3QodXRpbF8uZ2V0VmFsdWVCeVBhdGgpKHZhbHVlLHNvcnRLZXkpOnZhbHVlXSl9O3JldHVybiBhcnJheS5tYXAoZnVuY3Rpb24odmFsdWUsaW5kZXgpe3JldHVybnt2YWx1ZTp2YWx1ZSxpbmRleDppbmRleCxrZXk6Z2V0S2V5P2dldEtleSh2YWx1ZSxpbmRleCk6bnVsbH19KS5zb3J0KGZ1bmN0aW9uKGEsYil7dmFyIG9yZGVyPWZ1bmN0aW9uKGEsYil7aWYoc29ydE1ldGhvZClyZXR1cm4gc29ydE1ldGhvZChhLnZhbHVlLGIudmFsdWUpO2Zvcih2YXIgaT0wLGxlbj1hLmtleS5sZW5ndGg7aTxsZW47aSsrKXtpZihhLmtleVtpXTxiLmtleVtpXSlyZXR1cm4tMTtpZihhLmtleVtpXT5iLmtleVtpXSlyZXR1cm4gMX1yZXR1cm4gMH0oYSxiKTtyZXR1cm4gb3JkZXJ8fChvcmRlcj1hLmluZGV4LWIuaW5kZXgpLG9yZGVyKnJldmVyc2V9KS5tYXAoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0udmFsdWV9KX0sZ2V0Q29sdW1uQnlJZD1mdW5jdGlvbih0YWJsZSxjb2x1bW5JZCl7dmFyIGNvbHVtbj1udWxsO3JldHVybiB0YWJsZS5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7aXRlbS5pZD09PWNvbHVtbklkJiYoY29sdW1uPWl0ZW0pfSksY29sdW1ufSxnZXRDb2x1bW5CeUNlbGw9ZnVuY3Rpb24odGFibGUsY2VsbCl7dmFyIG1hdGNoZXM9KGNlbGwuY2xhc3NOYW1lfHwiIikubWF0Y2goL2VsLXRhYmxlX1teXHNdKy9nbSk7cmV0dXJuIG1hdGNoZXM/Z2V0Q29sdW1uQnlJZCh0YWJsZSxtYXRjaGVzWzBdKTpudWxsfSxnZXRSb3dJZGVudGl0eT1mdW5jdGlvbihyb3cscm93S2V5KXtpZighcm93KXRocm93IG5ldyBFcnJvcigicm93IGlzIHJlcXVpcmVkIHdoZW4gZ2V0IHJvdyBpZGVudGl0eSIpO2lmKCJzdHJpbmciPT10eXBlb2Ygcm93S2V5KXtpZihyb3dLZXkuaW5kZXhPZigiLiIpPDApcmV0dXJuIHJvd1tyb3dLZXldO2Zvcih2YXIga2V5PXJvd0tleS5zcGxpdCgiLiIpLGN1cnJlbnQ9cm93LGk9MDtpPGtleS5sZW5ndGg7aSsrKWN1cnJlbnQ9Y3VycmVudFtrZXlbaV1dO3JldHVybiBjdXJyZW50fWlmKCJmdW5jdGlvbiI9PXR5cGVvZiByb3dLZXkpcmV0dXJuIHJvd0tleS5jYWxsKG51bGwscm93KX0sdGFibGVfc3RvcmVfc29ydERhdGE9ZnVuY3Rpb24oZGF0YSxzdGF0ZXMpe3ZhciBzb3J0aW5nQ29sdW1uPXN0YXRlcy5zb3J0aW5nQ29sdW1uO3JldHVybiBzb3J0aW5nQ29sdW1uJiYic3RyaW5nIiE9dHlwZW9mIHNvcnRpbmdDb2x1bW4uc29ydGFibGU/dXRpbF9vcmRlckJ5KGRhdGEsc3RhdGVzLnNvcnRQcm9wLHN0YXRlcy5zb3J0T3JkZXIsc29ydGluZ0NvbHVtbi5zb3J0TWV0aG9kLHNvcnRpbmdDb2x1bW4uc29ydEJ5KTpkYXRhfSx0YWJsZV9zdG9yZV9nZXRLZXlzTWFwPWZ1bmN0aW9uKGFycmF5LHJvd0tleSl7dmFyIGFycmF5TWFwPXt9O3JldHVybihhcnJheXx8W10pLmZvckVhY2goZnVuY3Rpb24ocm93LGluZGV4KXthcnJheU1hcFtnZXRSb3dJZGVudGl0eShyb3cscm93S2V5KV09e3Jvdzpyb3csaW5kZXg6aW5kZXh9fSksYXJyYXlNYXB9LHRvZ2dsZVJvd1NlbGVjdGlvbj1mdW5jdGlvbihzdGF0ZXMscm93LHNlbGVjdGVkKXt2YXIgY2hhbmdlZD0hMSxzZWxlY3Rpb249c3RhdGVzLnNlbGVjdGlvbixpbmRleD1zZWxlY3Rpb24uaW5kZXhPZihyb3cpO3JldHVybiB2b2lkIDA9PT1zZWxlY3RlZD9jaGFuZ2VkPSgtMT09PWluZGV4P3NlbGVjdGlvbi5wdXNoKHJvdyk6c2VsZWN0aW9uLnNwbGljZShpbmRleCwxKSwhMCk6c2VsZWN0ZWQmJi0xPT09aW5kZXg/KHNlbGVjdGlvbi5wdXNoKHJvdyksY2hhbmdlZD0hMCk6IXNlbGVjdGVkJiYtMTxpbmRleCYmKHNlbGVjdGlvbi5zcGxpY2UoaW5kZXgsMSksY2hhbmdlZD0hMCksY2hhbmdlZH0sdGFibGVfc3RvcmVfVGFibGVTdG9yZT1mdW5jdGlvbih0YWJsZSl7dmFyIGluaXRpYWxTdGF0ZT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307aWYoIXRhYmxlKXRocm93IG5ldyBFcnJvcigiVGFibGUgaXMgcmVxdWlyZWQuIik7Zm9yKHZhciBwcm9wIGluIHRoaXMudGFibGU9dGFibGUsdGhpcy5zdGF0ZXM9e3Jvd0tleTpudWxsLF9jb2x1bW5zOltdLG9yaWdpbkNvbHVtbnM6W10sY29sdW1uczpbXSxmaXhlZENvbHVtbnM6W10scmlnaHRGaXhlZENvbHVtbnM6W10sbGVhZkNvbHVtbnM6W10sZml4ZWRMZWFmQ29sdW1uczpbXSxyaWdodEZpeGVkTGVhZkNvbHVtbnM6W10sbGVhZkNvbHVtbnNMZW5ndGg6MCxmaXhlZExlYWZDb2x1bW5zTGVuZ3RoOjAscmlnaHRGaXhlZExlYWZDb2x1bW5zTGVuZ3RoOjAsaXNDb21wbGV4OiExLGZpbHRlcmVkRGF0YTpudWxsLGRhdGE6bnVsbCxzb3J0aW5nQ29sdW1uOm51bGwsc29ydFByb3A6bnVsbCxzb3J0T3JkZXI6bnVsbCxpc0FsbFNlbGVjdGVkOiExLHNlbGVjdGlvbjpbXSxyZXNlcnZlU2VsZWN0aW9uOiExLHNlbGVjdGFibGU6bnVsbCxjdXJyZW50Um93Om51bGwsaG92ZXJSb3c6bnVsbCxmaWx0ZXJzOnt9LGV4cGFuZFJvd3M6W10sZGVmYXVsdEV4cGFuZEFsbDohMSxzZWxlY3RPbkluZGV0ZXJtaW5hdGU6ITF9LHRoaXMuX3RvZ2dsZUFsbFNlbGVjdGlvbj1kZWJvdW5jZV9kZWZhdWx0KCkoMTAsZnVuY3Rpb24oc3RhdGVzKXt2YXIgZGF0YT1zdGF0ZXMuZGF0YXx8W107aWYoMCE9PWRhdGEubGVuZ3RoKXt2YXIgc2VsZWN0aW9uPXRoaXMuc3RhdGVzLnNlbGVjdGlvbix2YWx1ZT1zdGF0ZXMuc2VsZWN0T25JbmRldGVybWluYXRlPyFzdGF0ZXMuaXNBbGxTZWxlY3RlZDohKHN0YXRlcy5pc0FsbFNlbGVjdGVkfHxzZWxlY3Rpb24ubGVuZ3RoKSxzZWxlY3Rpb25DaGFuZ2VkPSExO2RhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtLGluZGV4KXtzdGF0ZXMuc2VsZWN0YWJsZT9zdGF0ZXMuc2VsZWN0YWJsZS5jYWxsKG51bGwsaXRlbSxpbmRleCkmJnRvZ2dsZVJvd1NlbGVjdGlvbihzdGF0ZXMsaXRlbSx2YWx1ZSkmJihzZWxlY3Rpb25DaGFuZ2VkPSEwKTp0b2dnbGVSb3dTZWxlY3Rpb24oc3RhdGVzLGl0ZW0sdmFsdWUpJiYoc2VsZWN0aW9uQ2hhbmdlZD0hMCl9KTt2YXIgdGFibGU9dGhpcy50YWJsZTtzZWxlY3Rpb25DaGFuZ2VkJiZ0YWJsZS4kZW1pdCgic2VsZWN0aW9uLWNoYW5nZSIsc2VsZWN0aW9uP3NlbGVjdGlvbi5zbGljZSgpOltdKSx0YWJsZS4kZW1pdCgic2VsZWN0LWFsbCIsc2VsZWN0aW9uKSxzdGF0ZXMuaXNBbGxTZWxlY3RlZD12YWx1ZX19KSxpbml0aWFsU3RhdGUpaW5pdGlhbFN0YXRlLmhhc093blByb3BlcnR5KHByb3ApJiZ0aGlzLnN0YXRlcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSYmKHRoaXMuc3RhdGVzW3Byb3BdPWluaXRpYWxTdGF0ZVtwcm9wXSl9O3RhYmxlX3N0b3JlX1RhYmxlU3RvcmUucHJvdG90eXBlLm11dGF0aW9ucz17c2V0RGF0YTpmdW5jdGlvbihzdGF0ZXMsZGF0YSl7dmFyIF90aGlzPXRoaXMsZGF0YUluc3RhbmNlQ2hhbmdlZD1zdGF0ZXMuX2RhdGEhPT1kYXRhO3N0YXRlcy5fZGF0YT1kYXRhLE9iamVjdC5rZXlzKHN0YXRlcy5maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGNvbHVtbklkKXt2YXIgdmFsdWVzPXN0YXRlcy5maWx0ZXJzW2NvbHVtbklkXTtpZih2YWx1ZXMmJjAhPT12YWx1ZXMubGVuZ3RoKXt2YXIgY29sdW1uPWdldENvbHVtbkJ5SWQoX3RoaXMuc3RhdGVzLGNvbHVtbklkKTtjb2x1bW4mJmNvbHVtbi5maWx0ZXJNZXRob2QmJihkYXRhPWRhdGEuZmlsdGVyKGZ1bmN0aW9uKHJvdyl7cmV0dXJuIHZhbHVlcy5zb21lKGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gY29sdW1uLmZpbHRlck1ldGhvZC5jYWxsKG51bGwsdmFsdWUscm93LGNvbHVtbil9KX0pKX19KSxzdGF0ZXMuZmlsdGVyZWREYXRhPWRhdGEsc3RhdGVzLmRhdGE9dGFibGVfc3RvcmVfc29ydERhdGEoZGF0YXx8W10sc3RhdGVzKSx0aGlzLnVwZGF0ZUN1cnJlbnRSb3coKTt2YXIgcm93S2V5PXN0YXRlcy5yb3dLZXk7aWYoc3RhdGVzLnJlc2VydmVTZWxlY3Rpb24paWYocm93S2V5KXt2YXIgc2VsZWN0aW9uPXN0YXRlcy5zZWxlY3Rpb24sc2VsZWN0ZWRNYXA9dGFibGVfc3RvcmVfZ2V0S2V5c01hcChzZWxlY3Rpb24scm93S2V5KTtzdGF0ZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHJvdyl7dmFyIHJvd0lkPWdldFJvd0lkZW50aXR5KHJvdyxyb3dLZXkpLHJvd0luZm89c2VsZWN0ZWRNYXBbcm93SWRdO3Jvd0luZm8mJihzZWxlY3Rpb25bcm93SW5mby5pbmRleF09cm93KX0pLHRoaXMudXBkYXRlQWxsU2VsZWN0ZWQoKX1lbHNlIGNvbnNvbGUud2FybigiV0FSTjogcm93S2V5IGlzIHJlcXVpcmVkIHdoZW4gcmVzZXJ2ZS1zZWxlY3Rpb24gaXMgZW5hYmxlZC4iKTtlbHNlIGRhdGFJbnN0YW5jZUNoYW5nZWQ/dGhpcy5jbGVhclNlbGVjdGlvbigpOnRoaXMuY2xlYW5TZWxlY3Rpb24oKSx0aGlzLnVwZGF0ZUFsbFNlbGVjdGVkKCk7aWYoc3RhdGVzLmRlZmF1bHRFeHBhbmRBbGwpdGhpcy5zdGF0ZXMuZXhwYW5kUm93cz0oc3RhdGVzLmRhdGF8fFtdKS5zbGljZSgwKTtlbHNlIGlmKHJvd0tleSl7dmFyIGlkcz10YWJsZV9zdG9yZV9nZXRLZXlzTWFwKHRoaXMuc3RhdGVzLmV4cGFuZFJvd3Mscm93S2V5KSxleHBhbmRSb3dzPVtdLF9pdGVyYXRvcj1zdGF0ZXMuZGF0YSxfaXNBcnJheT1BcnJheS5pc0FycmF5KF9pdGVyYXRvciksX2k9MDtmb3IoX2l0ZXJhdG9yPV9pc0FycmF5P19pdGVyYXRvcjpfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBfcmVmO2lmKF9pc0FycmF5KXtpZihfaT49X2l0ZXJhdG9yLmxlbmd0aClicmVhaztfcmVmPV9pdGVyYXRvcltfaSsrXX1lbHNle2lmKChfaT1faXRlcmF0b3IubmV4dCgpKS5kb25lKWJyZWFrO19yZWY9X2kudmFsdWV9dmFyIHJvdz1fcmVmO2lkc1tnZXRSb3dJZGVudGl0eShyb3cscm93S2V5KV0mJmV4cGFuZFJvd3MucHVzaChyb3cpfXRoaXMuc3RhdGVzLmV4cGFuZFJvd3M9ZXhwYW5kUm93c31lbHNlIHRoaXMuc3RhdGVzLmV4cGFuZFJvd3M9W107ZXh0ZXJuYWxfdnVlX2RlZmF1bHQuYS5uZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBfdGhpcy50YWJsZS51cGRhdGVTY3JvbGxZKCl9KX0sY2hhbmdlU29ydENvbmRpdGlvbjpmdW5jdGlvbihzdGF0ZXMsb3B0aW9ucyl7dmFyIF90aGlzMj10aGlzO3N0YXRlcy5kYXRhPXRhYmxlX3N0b3JlX3NvcnREYXRhKHN0YXRlcy5maWx0ZXJlZERhdGF8fHN0YXRlcy5fZGF0YXx8W10sc3RhdGVzKSxvcHRpb25zJiZvcHRpb25zLnNpbGVudHx8dGhpcy50YWJsZS4kZW1pdCgic29ydC1jaGFuZ2UiLHtjb2x1bW46dGhpcy5zdGF0ZXMuc29ydGluZ0NvbHVtbixwcm9wOnRoaXMuc3RhdGVzLnNvcnRQcm9wLG9yZGVyOnRoaXMuc3RhdGVzLnNvcnRPcmRlcn0pLGV4dGVybmFsX3Z1ZV9kZWZhdWx0LmEubmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMyLnRhYmxlLnVwZGF0ZVNjcm9sbFkoKX0pfSxzb3J0OmZ1bmN0aW9uKHN0YXRlcyxvcHRpb25zKXt2YXIgX3RoaXMzPXRoaXMscHJvcD1vcHRpb25zLnByb3Asb3JkZXI9b3B0aW9ucy5vcmRlcjtwcm9wJiYoc3RhdGVzLnNvcnRQcm9wPXByb3Asc3RhdGVzLnNvcnRPcmRlcj1vcmRlcnx8ImFzY2VuZGluZyIsZXh0ZXJuYWxfdnVlX2RlZmF1bHQuYS5uZXh0VGljayhmdW5jdGlvbigpe2Zvcih2YXIgaT0wLGxlbmd0aD1zdGF0ZXMuY29sdW1ucy5sZW5ndGg7aTxsZW5ndGg7aSsrKXt2YXIgY29sdW1uPXN0YXRlcy5jb2x1bW5zW2ldO2lmKGNvbHVtbi5wcm9wZXJ0eT09PXN0YXRlcy5zb3J0UHJvcCl7Y29sdW1uLm9yZGVyPXN0YXRlcy5zb3J0T3JkZXIsc3RhdGVzLnNvcnRpbmdDb2x1bW49Y29sdW1uO2JyZWFrfX1zdGF0ZXMuc29ydGluZ0NvbHVtbiYmX3RoaXMzLmNvbW1pdCgiY2hhbmdlU29ydENvbmRpdGlvbiIpfSkpfSxmaWx0ZXJDaGFuZ2U6ZnVuY3Rpb24oc3RhdGVzLG9wdGlvbnMpe3ZhciBfdGhpczQ9dGhpcyxjb2x1bW49b3B0aW9ucy5jb2x1bW4sdmFsdWVzPW9wdGlvbnMudmFsdWVzLHNpbGVudD1vcHRpb25zLnNpbGVudCxtdWx0aT1vcHRpb25zLm11bHRpO3ZhbHVlcyYmIUFycmF5LmlzQXJyYXkodmFsdWVzKSYmKHZhbHVlcz1bdmFsdWVzXSk7dmFyIGZpbHRlcnM9e307bXVsdGk/Y29sdW1uLmZvckVhY2goZnVuY3Rpb24oY29sKXtzdGF0ZXMuZmlsdGVyc1tjb2wuaWRdPXZhbHVlcyxmaWx0ZXJzW2NvbC5jb2x1bW5LZXl8fGNvbC5pZF09dmFsdWVzfSk6Y29sdW1uLnByb3BlcnR5JiYoc3RhdGVzLmZpbHRlcnNbY29sdW1uLmlkXT12YWx1ZXMsZmlsdGVyc1tjb2x1bW4uY29sdW1uS2V5fHxjb2x1bW4uaWRdPXZhbHVlcyk7dmFyIGRhdGE9c3RhdGVzLl9kYXRhO09iamVjdC5rZXlzKHN0YXRlcy5maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGNvbHVtbklkKXt2YXIgdmFsdWVzPXN0YXRlcy5maWx0ZXJzW2NvbHVtbklkXTtpZih2YWx1ZXMmJjAhPT12YWx1ZXMubGVuZ3RoKXt2YXIgY29sdW1uPWdldENvbHVtbkJ5SWQoX3RoaXM0LnN0YXRlcyxjb2x1bW5JZCk7Y29sdW1uJiZjb2x1bW4uZmlsdGVyTWV0aG9kJiYoZGF0YT1kYXRhLmZpbHRlcihmdW5jdGlvbihyb3cpe3JldHVybiB2YWx1ZXMuc29tZShmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGNvbHVtbi5maWx0ZXJNZXRob2QuY2FsbChudWxsLHZhbHVlLHJvdyxjb2x1bW4pfSl9KSl9fSksc3RhdGVzLmZpbHRlcmVkRGF0YT1kYXRhLHN0YXRlcy5kYXRhPXRhYmxlX3N0b3JlX3NvcnREYXRhKGRhdGEsc3RhdGVzKSxzaWxlbnR8fHRoaXMudGFibGUuJGVtaXQoImZpbHRlci1jaGFuZ2UiLGZpbHRlcnMpLGV4dGVybmFsX3Z1ZV9kZWZhdWx0LmEubmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXM0LnRhYmxlLnVwZGF0ZVNjcm9sbFkoKX0pfSxpbnNlcnRDb2x1bW46ZnVuY3Rpb24oc3RhdGVzLGNvbHVtbixpbmRleCxwYXJlbnQpe3ZhciBhcnJheT1zdGF0ZXMuX2NvbHVtbnM7cGFyZW50JiYoKGFycmF5PXBhcmVudC5jaGlsZHJlbil8fChhcnJheT1wYXJlbnQuY2hpbGRyZW49W10pKSx2b2lkIDAhPT1pbmRleD9hcnJheS5zcGxpY2UoaW5kZXgsMCxjb2x1bW4pOmFycmF5LnB1c2goY29sdW1uKSwic2VsZWN0aW9uIj09PWNvbHVtbi50eXBlJiYoc3RhdGVzLnNlbGVjdGFibGU9Y29sdW1uLnNlbGVjdGFibGUsc3RhdGVzLnJlc2VydmVTZWxlY3Rpb249Y29sdW1uLnJlc2VydmVTZWxlY3Rpb24pLHRoaXMudGFibGUuJHJlYWR5JiYodGhpcy51cGRhdGVDb2x1bW5zKCksdGhpcy5zY2hlZHVsZUxheW91dCgpKX0scmVtb3ZlQ29sdW1uOmZ1bmN0aW9uKHN0YXRlcyxjb2x1bW4scGFyZW50KXt2YXIgYXJyYXk9c3RhdGVzLl9jb2x1bW5zO3BhcmVudCYmKChhcnJheT1wYXJlbnQuY2hpbGRyZW4pfHwoYXJyYXk9cGFyZW50LmNoaWxkcmVuPVtdKSksYXJyYXkmJmFycmF5LnNwbGljZShhcnJheS5pbmRleE9mKGNvbHVtbiksMSksdGhpcy50YWJsZS4kcmVhZHkmJih0aGlzLnVwZGF0ZUNvbHVtbnMoKSx0aGlzLnNjaGVkdWxlTGF5b3V0KCkpfSxzZXRIb3ZlclJvdzpmdW5jdGlvbihzdGF0ZXMscm93KXtzdGF0ZXMuaG92ZXJSb3c9cm93fSxzZXRDdXJyZW50Um93OmZ1bmN0aW9uKHN0YXRlcyxyb3cpe3ZhciBvbGRDdXJyZW50Um93PXN0YXRlcy5jdXJyZW50Um93O29sZEN1cnJlbnRSb3chPT0oc3RhdGVzLmN1cnJlbnRSb3c9cm93KSYmdGhpcy50YWJsZS4kZW1pdCgiY3VycmVudC1jaGFuZ2UiLHJvdyxvbGRDdXJyZW50Um93KX0scm93U2VsZWN0ZWRDaGFuZ2VkOmZ1bmN0aW9uKHN0YXRlcyxyb3cpe3ZhciBjaGFuZ2VkPXRvZ2dsZVJvd1NlbGVjdGlvbihzdGF0ZXMscm93KSxzZWxlY3Rpb249c3RhdGVzLnNlbGVjdGlvbjtpZihjaGFuZ2VkKXt2YXIgdGFibGU9dGhpcy50YWJsZTt0YWJsZS4kZW1pdCgic2VsZWN0aW9uLWNoYW5nZSIsc2VsZWN0aW9uP3NlbGVjdGlvbi5zbGljZSgpOltdKSx0YWJsZS4kZW1pdCgic2VsZWN0IixzZWxlY3Rpb24scm93KX10aGlzLnVwZGF0ZUFsbFNlbGVjdGVkKCl9LHRvZ2dsZUFsbFNlbGVjdGlvbjpmdW5jdGlvbihzdGF0ZSl7dGhpcy5fdG9nZ2xlQWxsU2VsZWN0aW9uKHN0YXRlKX19O3ZhciBkb0ZsYXR0ZW5Db2x1bW5zPWZ1bmN0aW9uIGRvRmxhdHRlbkNvbHVtbnMoY29sdW1ucyl7dmFyIHJlc3VsdD1bXTtyZXR1cm4gY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uKGNvbHVtbil7Y29sdW1uLmNoaWxkcmVuP3Jlc3VsdC5wdXNoLmFwcGx5KHJlc3VsdCxkb0ZsYXR0ZW5Db2x1bW5zKGNvbHVtbi5jaGlsZHJlbikpOnJlc3VsdC5wdXNoKGNvbHVtbil9KSxyZXN1bHR9O3RhYmxlX3N0b3JlX1RhYmxlU3RvcmUucHJvdG90eXBlLnVwZGF0ZUNvbHVtbnM9ZnVuY3Rpb24oKXt2YXIgc3RhdGVzPXRoaXMuc3RhdGVzLF9jb2x1bW5zPXN0YXRlcy5fY29sdW1uc3x8W107c3RhdGVzLmZpeGVkQ29sdW1ucz1fY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24oY29sdW1uKXtyZXR1cm4hMD09PWNvbHVtbi5maXhlZHx8ImxlZnQiPT09Y29sdW1uLmZpeGVkfSksc3RhdGVzLnJpZ2h0Rml4ZWRDb2x1bW5zPV9jb2x1bW5zLmZpbHRlcihmdW5jdGlvbihjb2x1bW4pe3JldHVybiJyaWdodCI9PT1jb2x1bW4uZml4ZWR9KSwwPHN0YXRlcy5maXhlZENvbHVtbnMubGVuZ3RoJiZfY29sdW1uc1swXSYmInNlbGVjdGlvbiI9PT1fY29sdW1uc1swXS50eXBlJiYhX2NvbHVtbnNbMF0uZml4ZWQmJihfY29sdW1uc1swXS5maXhlZD0hMCxzdGF0ZXMuZml4ZWRDb2x1bW5zLnVuc2hpZnQoX2NvbHVtbnNbMF0pKTt2YXIgbm90Rml4ZWRDb2x1bW5zPV9jb2x1bW5zLmZpbHRlcihmdW5jdGlvbihjb2x1bW4pe3JldHVybiFjb2x1bW4uZml4ZWR9KTtzdGF0ZXMub3JpZ2luQ29sdW1ucz1bXS5jb25jYXQoc3RhdGVzLmZpeGVkQ29sdW1ucykuY29uY2F0KG5vdEZpeGVkQ29sdW1ucykuY29uY2F0KHN0YXRlcy5yaWdodEZpeGVkQ29sdW1ucyk7dmFyIGxlYWZDb2x1bW5zPWRvRmxhdHRlbkNvbHVtbnMobm90Rml4ZWRDb2x1bW5zKSxmaXhlZExlYWZDb2x1bW5zPWRvRmxhdHRlbkNvbHVtbnMoc3RhdGVzLmZpeGVkQ29sdW1ucykscmlnaHRGaXhlZExlYWZDb2x1bW5zPWRvRmxhdHRlbkNvbHVtbnMoc3RhdGVzLnJpZ2h0Rml4ZWRDb2x1bW5zKTtzdGF0ZXMubGVhZkNvbHVtbnNMZW5ndGg9bGVhZkNvbHVtbnMubGVuZ3RoLHN0YXRlcy5maXhlZExlYWZDb2x1bW5zTGVuZ3RoPWZpeGVkTGVhZkNvbHVtbnMubGVuZ3RoLHN0YXRlcy5yaWdodEZpeGVkTGVhZkNvbHVtbnNMZW5ndGg9cmlnaHRGaXhlZExlYWZDb2x1bW5zLmxlbmd0aCxzdGF0ZXMuY29sdW1ucz1bXS5jb25jYXQoZml4ZWRMZWFmQ29sdW1ucykuY29uY2F0KGxlYWZDb2x1bW5zKS5jb25jYXQocmlnaHRGaXhlZExlYWZDb2x1bW5zKSxzdGF0ZXMuaXNDb21wbGV4PTA8c3RhdGVzLmZpeGVkQ29sdW1ucy5sZW5ndGh8fDA8c3RhdGVzLnJpZ2h0Rml4ZWRDb2x1bW5zLmxlbmd0aH0sdGFibGVfc3RvcmVfVGFibGVTdG9yZS5wcm90b3R5cGUuaXNTZWxlY3RlZD1mdW5jdGlvbihyb3cpe3JldHVybi0xPCh0aGlzLnN0YXRlcy5zZWxlY3Rpb258fFtdKS5pbmRleE9mKHJvdyl9LHRhYmxlX3N0b3JlX1RhYmxlU3RvcmUucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIHN0YXRlcz10aGlzLnN0YXRlcztzdGF0ZXMuaXNBbGxTZWxlY3RlZD0hMTt2YXIgb2xkU2VsZWN0aW9uPXN0YXRlcy5zZWxlY3Rpb247c3RhdGVzLnNlbGVjdGlvbi5sZW5ndGgmJihzdGF0ZXMuc2VsZWN0aW9uPVtdKSwwPG9sZFNlbGVjdGlvbi5sZW5ndGgmJnRoaXMudGFibGUuJGVtaXQoInNlbGVjdGlvbi1jaGFuZ2UiLHN0YXRlcy5zZWxlY3Rpb24/c3RhdGVzLnNlbGVjdGlvbi5zbGljZSgpOltdKX0sdGFibGVfc3RvcmVfVGFibGVTdG9yZS5wcm90b3R5cGUuc2V0RXhwYW5kUm93S2V5cz1mdW5jdGlvbihyb3dLZXlzKXt2YXIgZXhwYW5kUm93cz1bXSxkYXRhPXRoaXMuc3RhdGVzLmRhdGEscm93S2V5PXRoaXMuc3RhdGVzLnJvd0tleTtpZighcm93S2V5KXRocm93IG5ldyBFcnJvcigiW1RhYmxlXSBwcm9wIHJvdy1rZXkgc2hvdWxkIG5vdCBiZSBlbXB0eS4iKTt2YXIga2V5c01hcD10YWJsZV9zdG9yZV9nZXRLZXlzTWFwKGRhdGEscm93S2V5KTtyb3dLZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXt2YXIgaW5mbz1rZXlzTWFwW2tleV07aW5mbyYmZXhwYW5kUm93cy5wdXNoKGluZm8ucm93KX0pLHRoaXMuc3RhdGVzLmV4cGFuZFJvd3M9ZXhwYW5kUm93c30sdGFibGVfc3RvcmVfVGFibGVTdG9yZS5wcm90b3R5cGUudG9nZ2xlUm93U2VsZWN0aW9uPWZ1bmN0aW9uKHJvdyxzZWxlY3RlZCl7dG9nZ2xlUm93U2VsZWN0aW9uKHRoaXMuc3RhdGVzLHJvdyxzZWxlY3RlZCkmJnRoaXMudGFibGUuJGVtaXQoInNlbGVjdGlvbi1jaGFuZ2UiLHRoaXMuc3RhdGVzLnNlbGVjdGlvbj90aGlzLnN0YXRlcy5zZWxlY3Rpb24uc2xpY2UoKTpbXSl9LHRhYmxlX3N0b3JlX1RhYmxlU3RvcmUucHJvdG90eXBlLnRvZ2dsZVJvd0V4cGFuc2lvbj1mdW5jdGlvbihyb3csZXhwYW5kZWQpeyhmdW5jdGlvbihzdGF0ZXMscm93LGV4cGFuZGVkKXt2YXIgY2hhbmdlZD0hMSxleHBhbmRSb3dzPXN0YXRlcy5leHBhbmRSb3dzO2lmKHZvaWQgMCE9PWV4cGFuZGVkKXt2YXIgaW5kZXg9ZXhwYW5kUm93cy5pbmRleE9mKHJvdyk7ZXhwYW5kZWQ/LTE9PT1pbmRleCYmKGV4cGFuZFJvd3MucHVzaChyb3cpLGNoYW5nZWQ9ITApOi0xIT09aW5kZXgmJihleHBhbmRSb3dzLnNwbGljZShpbmRleCwxKSxjaGFuZ2VkPSEwKX1lbHNle3ZhciBfaW5kZXg9ZXhwYW5kUm93cy5pbmRleE9mKHJvdyk7LTE9PT1faW5kZXg/ZXhwYW5kUm93cy5wdXNoKHJvdyk6ZXhwYW5kUm93cy5zcGxpY2UoX2luZGV4LDEpLGNoYW5nZWQ9ITB9cmV0dXJuIGNoYW5nZWR9KSh0aGlzLnN0YXRlcyxyb3csZXhwYW5kZWQpJiYodGhpcy50YWJsZS4kZW1pdCgiZXhwYW5kLWNoYW5nZSIscm93LHRoaXMuc3RhdGVzLmV4cGFuZFJvd3MpLHRoaXMuc2NoZWR1bGVMYXlvdXQoKSl9LHRhYmxlX3N0b3JlX1RhYmxlU3RvcmUucHJvdG90eXBlLmlzUm93RXhwYW5kZWQ9ZnVuY3Rpb24ocm93KXt2YXIgX3N0YXRlcz10aGlzLnN0YXRlcyxfc3RhdGVzJGV4cGFuZFJvd3M9X3N0YXRlcy5leHBhbmRSb3dzLGV4cGFuZFJvd3M9dm9pZCAwPT09X3N0YXRlcyRleHBhbmRSb3dzP1tdOl9zdGF0ZXMkZXhwYW5kUm93cyxyb3dLZXk9X3N0YXRlcy5yb3dLZXk7cmV0dXJuIHJvd0tleT8hIXRhYmxlX3N0b3JlX2dldEtleXNNYXAoZXhwYW5kUm93cyxyb3dLZXkpW2dldFJvd0lkZW50aXR5KHJvdyxyb3dLZXkpXTotMSE9PWV4cGFuZFJvd3MuaW5kZXhPZihyb3cpfSx0YWJsZV9zdG9yZV9UYWJsZVN0b3JlLnByb3RvdHlwZS5jbGVhblNlbGVjdGlvbj1mdW5jdGlvbigpe3ZhciBzZWxlY3Rpb249dGhpcy5zdGF0ZXMuc2VsZWN0aW9ufHxbXSxkYXRhPXRoaXMuc3RhdGVzLmRhdGEscm93S2V5PXRoaXMuc3RhdGVzLnJvd0tleSxkZWxldGVkPXZvaWQgMDtpZihyb3dLZXkpe2RlbGV0ZWQ9W107dmFyIHNlbGVjdGVkTWFwPXRhYmxlX3N0b3JlX2dldEtleXNNYXAoc2VsZWN0aW9uLHJvd0tleSksZGF0YU1hcD10YWJsZV9zdG9yZV9nZXRLZXlzTWFwKGRhdGEscm93S2V5KTtmb3IodmFyIGtleSBpbiBzZWxlY3RlZE1hcClzZWxlY3RlZE1hcC5oYXNPd25Qcm9wZXJ0eShrZXkpJiYhZGF0YU1hcFtrZXldJiZkZWxldGVkLnB1c2goc2VsZWN0ZWRNYXBba2V5XS5yb3cpfWVsc2UgZGVsZXRlZD1zZWxlY3Rpb24uZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pe3JldHVybi0xPT09ZGF0YS5pbmRleE9mKGl0ZW0pfSk7ZGVsZXRlZC5mb3JFYWNoKGZ1bmN0aW9uKGRlbGV0ZWRJdGVtKXtzZWxlY3Rpb24uc3BsaWNlKHNlbGVjdGlvbi5pbmRleE9mKGRlbGV0ZWRJdGVtKSwxKX0pLGRlbGV0ZWQubGVuZ3RoJiZ0aGlzLnRhYmxlLiRlbWl0KCJzZWxlY3Rpb24tY2hhbmdlIixzZWxlY3Rpb24/c2VsZWN0aW9uLnNsaWNlKCk6W10pfSx0YWJsZV9zdG9yZV9UYWJsZVN0b3JlLnByb3RvdHlwZS5jbGVhckZpbHRlcj1mdW5jdGlvbihjb2x1bW5LZXlzKXt2YXIgc3RhdGVzPXRoaXMuc3RhdGVzLF90YWJsZSQkcmVmcz10aGlzLnRhYmxlLiRyZWZzLHRhYmxlSGVhZGVyPV90YWJsZSQkcmVmcy50YWJsZUhlYWRlcixmaXhlZFRhYmxlSGVhZGVyPV90YWJsZSQkcmVmcy5maXhlZFRhYmxlSGVhZGVyLHJpZ2h0Rml4ZWRUYWJsZUhlYWRlcj1fdGFibGUkJHJlZnMucmlnaHRGaXhlZFRhYmxlSGVhZGVyLHBhbmVscz17fTt0YWJsZUhlYWRlciYmKHBhbmVscz1tZXJnZV9kZWZhdWx0KCkocGFuZWxzLHRhYmxlSGVhZGVyLmZpbHRlclBhbmVscykpLGZpeGVkVGFibGVIZWFkZXImJihwYW5lbHM9bWVyZ2VfZGVmYXVsdCgpKHBhbmVscyxmaXhlZFRhYmxlSGVhZGVyLmZpbHRlclBhbmVscykpLHJpZ2h0Rml4ZWRUYWJsZUhlYWRlciYmKHBhbmVscz1tZXJnZV9kZWZhdWx0KCkocGFuZWxzLHJpZ2h0Rml4ZWRUYWJsZUhlYWRlci5maWx0ZXJQYW5lbHMpKTt2YXIga2V5cz1PYmplY3Qua2V5cyhwYW5lbHMpO2lmKGtleXMubGVuZ3RoKWlmKCJzdHJpbmciPT10eXBlb2YgY29sdW1uS2V5cyYmKGNvbHVtbktleXM9W2NvbHVtbktleXNdKSxBcnJheS5pc0FycmF5KGNvbHVtbktleXMpKXt2YXIgY29sdW1ucz1jb2x1bW5LZXlzLm1hcChmdW5jdGlvbihrZXkpe3JldHVybiBmdW5jdGlvbih0YWJsZSxjb2x1bW5LZXkpe2Zvcih2YXIgY29sdW1uPW51bGwsaT0wO2k8dGFibGUuY29sdW1ucy5sZW5ndGg7aSsrKXt2YXIgaXRlbT10YWJsZS5jb2x1bW5zW2ldO2lmKGl0ZW0uY29sdW1uS2V5PT09Y29sdW1uS2V5KXtjb2x1bW49aXRlbTticmVha319cmV0dXJuIGNvbHVtbn0oc3RhdGVzLGtleSl9KTtrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KXtjb2x1bW5zLmZpbmQoZnVuY3Rpb24oY29sKXtyZXR1cm4gY29sLmlkPT09a2V5fSkmJihwYW5lbHNba2V5XS5maWx0ZXJlZFZhbHVlPVtdKX0pLHRoaXMuY29tbWl0KCJmaWx0ZXJDaGFuZ2UiLHtjb2x1bW46Y29sdW1ucyx2YWx1ZTpbXSxzaWxlbnQ6ITAsbXVsdGk6ITB9KX1lbHNlIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe3BhbmVsc1trZXldLmZpbHRlcmVkVmFsdWU9W119KSxzdGF0ZXMuZmlsdGVycz17fSx0aGlzLmNvbW1pdCgiZmlsdGVyQ2hhbmdlIix7Y29sdW1uOnt9LHZhbHVlczpbXSxzaWxlbnQ6ITB9KX0sdGFibGVfc3RvcmVfVGFibGVTdG9yZS5wcm90b3R5cGUuY2xlYXJTb3J0PWZ1bmN0aW9uKCl7dmFyIHN0YXRlcz10aGlzLnN0YXRlcztzdGF0ZXMuc29ydGluZ0NvbHVtbiYmKHN0YXRlcy5zb3J0aW5nQ29sdW1uLm9yZGVyPW51bGwsc3RhdGVzLnNvcnRQcm9wPW51bGwsc3RhdGVzLnNvcnRPcmRlcj1udWxsLHRoaXMuY29tbWl0KCJjaGFuZ2VTb3J0Q29uZGl0aW9uIix7c2lsZW50OiEwfSkpfSx0YWJsZV9zdG9yZV9UYWJsZVN0b3JlLnByb3RvdHlwZS51cGRhdGVBbGxTZWxlY3RlZD1mdW5jdGlvbigpe3ZhciBzdGF0ZXM9dGhpcy5zdGF0ZXMsc2VsZWN0aW9uPXN0YXRlcy5zZWxlY3Rpb24scm93S2V5PXN0YXRlcy5yb3dLZXksc2VsZWN0YWJsZT1zdGF0ZXMuc2VsZWN0YWJsZSxkYXRhPXN0YXRlcy5kYXRhO2lmKGRhdGEmJjAhPT1kYXRhLmxlbmd0aCl7dmFyIHNlbGVjdGVkTWFwPXZvaWQgMDtyb3dLZXkmJihzZWxlY3RlZE1hcD10YWJsZV9zdG9yZV9nZXRLZXlzTWFwKHN0YXRlcy5zZWxlY3Rpb24scm93S2V5KSk7Zm9yKHZhciByb3csaXNBbGxTZWxlY3RlZD0hMCxzZWxlY3RlZENvdW50PTAsaT0wLGo9ZGF0YS5sZW5ndGg7aTxqO2krKyl7dmFyIGl0ZW09ZGF0YVtpXSxpc1Jvd1NlbGVjdGFibGU9c2VsZWN0YWJsZSYmc2VsZWN0YWJsZS5jYWxsKG51bGwsaXRlbSxpKTtpZihyb3c9aXRlbSxzZWxlY3RlZE1hcD9zZWxlY3RlZE1hcFtnZXRSb3dJZGVudGl0eShyb3cscm93S2V5KV06LTEhPT1zZWxlY3Rpb24uaW5kZXhPZihyb3cpKXNlbGVjdGVkQ291bnQrKztlbHNlIGlmKCFzZWxlY3RhYmxlfHxpc1Jvd1NlbGVjdGFibGUpe2lzQWxsU2VsZWN0ZWQ9ITE7YnJlYWt9fTA9PT1zZWxlY3RlZENvdW50JiYoaXNBbGxTZWxlY3RlZD0hMSksc3RhdGVzLmlzQWxsU2VsZWN0ZWQ9aXNBbGxTZWxlY3RlZH1lbHNlIHN0YXRlcy5pc0FsbFNlbGVjdGVkPSExfSx0YWJsZV9zdG9yZV9UYWJsZVN0b3JlLnByb3RvdHlwZS5zY2hlZHVsZUxheW91dD1mdW5jdGlvbih1cGRhdGVDb2x1bW5zKXt1cGRhdGVDb2x1bW5zJiZ0aGlzLnVwZGF0ZUNvbHVtbnMoKSx0aGlzLnRhYmxlLmRlYm91bmNlZFVwZGF0ZUxheW91dCgpfSx0YWJsZV9zdG9yZV9UYWJsZVN0b3JlLnByb3RvdHlwZS5zZXRDdXJyZW50Um93S2V5PWZ1bmN0aW9uKGtleSl7dmFyIHN0YXRlcz10aGlzLnN0YXRlcyxyb3dLZXk9c3RhdGVzLnJvd0tleTtpZighcm93S2V5KXRocm93IG5ldyBFcnJvcigiW1RhYmxlXSByb3cta2V5IHNob3VsZCBub3QgYmUgZW1wdHkuIik7dmFyIGRhdGE9c3RhdGVzLmRhdGF8fFtdLGluZm89dGFibGVfc3RvcmVfZ2V0S2V5c01hcChkYXRhLHJvd0tleSlba2V5XTtzdGF0ZXMuY3VycmVudFJvdz1pbmZvP2luZm8ucm93Om51bGx9LHRhYmxlX3N0b3JlX1RhYmxlU3RvcmUucHJvdG90eXBlLnVwZGF0ZUN1cnJlbnRSb3c9ZnVuY3Rpb24oKXt2YXIgc3RhdGVzPXRoaXMuc3RhdGVzLHRhYmxlPXRoaXMudGFibGUsZGF0YT1zdGF0ZXMuZGF0YXx8W10sb2xkQ3VycmVudFJvdz1zdGF0ZXMuY3VycmVudFJvdztpZigtMT09PWRhdGEuaW5kZXhPZihvbGRDdXJyZW50Um93KSl7aWYoc3RhdGVzLnJvd0tleSYmb2xkQ3VycmVudFJvdyl7Zm9yKHZhciBuZXdDdXJyZW50Um93PW51bGwsaT0wO2k8ZGF0YS5sZW5ndGg7aSsrKXt2YXIgaXRlbT1kYXRhW2ldO2lmKGl0ZW0mJml0ZW1bc3RhdGVzLnJvd0tleV09PT1vbGRDdXJyZW50Um93W3N0YXRlcy5yb3dLZXldKXtuZXdDdXJyZW50Um93PWl0ZW07YnJlYWt9fWlmKG5ld0N1cnJlbnRSb3cpcmV0dXJuIHZvaWQoc3RhdGVzLmN1cnJlbnRSb3c9bmV3Q3VycmVudFJvdyl9c3RhdGVzLmN1cnJlbnRSb3c9bnVsbCxzdGF0ZXMuY3VycmVudFJvdyE9PW9sZEN1cnJlbnRSb3cmJnRhYmxlLiRlbWl0KCJjdXJyZW50LWNoYW5nZSIsbnVsbCxvbGRDdXJyZW50Um93KX19LHRhYmxlX3N0b3JlX1RhYmxlU3RvcmUucHJvdG90eXBlLmNvbW1pdD1mdW5jdGlvbihuYW1lKXt2YXIgbXV0YXRpb25zPXRoaXMubXV0YXRpb25zO2lmKCFtdXRhdGlvbnNbbmFtZV0pdGhyb3cgbmV3IEVycm9yKCJBY3Rpb24gbm90IGZvdW5kOiAiK25hbWUpO2Zvcih2YXIgX2xlbj1hcmd1bWVudHMubGVuZ3RoLGFyZ3M9QXJyYXkoMTxfbGVuP19sZW4tMTowKSxfa2V5PTE7X2tleTxfbGVuO19rZXkrKylhcmdzW19rZXktMV09YXJndW1lbnRzW19rZXldO211dGF0aW9uc1tuYW1lXS5hcHBseSh0aGlzLFt0aGlzLnN0YXRlc10uY29uY2F0KGFyZ3MpKX07dmFyIHRhYmxlX3N0b3JlPXRhYmxlX3N0b3JlX1RhYmxlU3RvcmUsc2Nyb2xsYmFyX3dpZHRoXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDI2KSxzY3JvbGxiYXJfd2lkdGhfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oc2Nyb2xsYmFyX3dpZHRoXyk7dmFyIHRhYmxlX2xheW91dD1mdW5jdGlvbigpe2Z1bmN0aW9uIFRhYmxlTGF5b3V0KG9wdGlvbnMpe2Zvcih2YXIgbmFtZSBpbiBmdW5jdGlvbihpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX0odGhpcyxUYWJsZUxheW91dCksdGhpcy5vYnNlcnZlcnM9W10sdGhpcy50YWJsZT1udWxsLHRoaXMuc3RvcmU9bnVsbCx0aGlzLmNvbHVtbnM9bnVsbCx0aGlzLmZpdD0hMCx0aGlzLnNob3dIZWFkZXI9ITAsdGhpcy5oZWlnaHQ9bnVsbCx0aGlzLnNjcm9sbFg9ITEsdGhpcy5zY3JvbGxZPSExLHRoaXMuYm9keVdpZHRoPW51bGwsdGhpcy5maXhlZFdpZHRoPW51bGwsdGhpcy5yaWdodEZpeGVkV2lkdGg9bnVsbCx0aGlzLnRhYmxlSGVpZ2h0PW51bGwsdGhpcy5oZWFkZXJIZWlnaHQ9NDQsdGhpcy5hcHBlbmRIZWlnaHQ9MCx0aGlzLmZvb3RlckhlaWdodD00NCx0aGlzLnZpZXdwb3J0SGVpZ2h0PW51bGwsdGhpcy5ib2R5SGVpZ2h0PW51bGwsdGhpcy5maXhlZEJvZHlIZWlnaHQ9bnVsbCx0aGlzLmd1dHRlcldpZHRoPXNjcm9sbGJhcl93aWR0aF9kZWZhdWx0KCkoKSxvcHRpb25zKW9wdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkmJih0aGlzW25hbWVdPW9wdGlvbnNbbmFtZV0pO2lmKCF0aGlzLnRhYmxlKXRocm93IG5ldyBFcnJvcigidGFibGUgaXMgcmVxdWlyZWQgZm9yIFRhYmxlIExheW91dCIpO2lmKCF0aGlzLnN0b3JlKXRocm93IG5ldyBFcnJvcigic3RvcmUgaXMgcmVxdWlyZWQgZm9yIFRhYmxlIExheW91dCIpfXJldHVybiBUYWJsZUxheW91dC5wcm90b3R5cGUudXBkYXRlU2Nyb2xsWT1mdW5jdGlvbigpe3ZhciBoZWlnaHQ9dGhpcy5oZWlnaHQ7aWYoInN0cmluZyI9PXR5cGVvZiBoZWlnaHR8fCJudW1iZXIiPT10eXBlb2YgaGVpZ2h0KXt2YXIgYm9keVdyYXBwZXI9dGhpcy50YWJsZS5ib2R5V3JhcHBlcjtpZih0aGlzLnRhYmxlLiRlbCYmYm9keVdyYXBwZXIpe3ZhciBib2R5PWJvZHlXcmFwcGVyLnF1ZXJ5U2VsZWN0b3IoIi5lbC10YWJsZV9fYm9keSIpO3RoaXMuc2Nyb2xsWT1ib2R5Lm9mZnNldEhlaWdodD50aGlzLmJvZHlIZWlnaHR9fX0sVGFibGVMYXlvdXQucHJvdG90eXBlLnNldEhlaWdodD1mdW5jdGlvbih2YWx1ZSl7dmFyIF90aGlzPXRoaXMscHJvcD0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06ImhlaWdodCI7aWYoIWV4dGVybmFsX3Z1ZV9kZWZhdWx0LmEucHJvdG90eXBlLiRpc1NlcnZlcil7dmFyIGVsPXRoaXMudGFibGUuJGVsO2lmKCJzdHJpbmciPT10eXBlb2YgdmFsdWUmJi9eXGQrJC8udGVzdCh2YWx1ZSkmJih2YWx1ZT1OdW1iZXIodmFsdWUpKSx0aGlzLmhlaWdodD12YWx1ZSwhZWwmJih2YWx1ZXx8MD09PXZhbHVlKSlyZXR1cm4gZXh0ZXJuYWxfdnVlX2RlZmF1bHQuYS5uZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBfdGhpcy5zZXRIZWlnaHQodmFsdWUscHJvcCl9KTsibnVtYmVyIj09dHlwZW9mIHZhbHVlPyhlbC5zdHlsZVtwcm9wXT12YWx1ZSsicHgiLHRoaXMudXBkYXRlRWxzSGVpZ2h0KCkpOiJzdHJpbmciPT10eXBlb2YgdmFsdWUmJihlbC5zdHlsZVtwcm9wXT12YWx1ZSx0aGlzLnVwZGF0ZUVsc0hlaWdodCgpKX19LFRhYmxlTGF5b3V0LnByb3RvdHlwZS5zZXRNYXhIZWlnaHQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiB0aGlzLnNldEhlaWdodCh2YWx1ZSwibWF4LWhlaWdodCIpfSxUYWJsZUxheW91dC5wcm90b3R5cGUudXBkYXRlRWxzSGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIF90aGlzMj10aGlzO2lmKCF0aGlzLnRhYmxlLiRyZWFkeSlyZXR1cm4gZXh0ZXJuYWxfdnVlX2RlZmF1bHQuYS5uZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBfdGhpczIudXBkYXRlRWxzSGVpZ2h0KCl9KTt2YXIgX3RhYmxlJCRyZWZzPXRoaXMudGFibGUuJHJlZnMsaGVhZGVyV3JhcHBlcj1fdGFibGUkJHJlZnMuaGVhZGVyV3JhcHBlcixhcHBlbmRXcmFwcGVyPV90YWJsZSQkcmVmcy5hcHBlbmRXcmFwcGVyLGZvb3RlcldyYXBwZXI9X3RhYmxlJCRyZWZzLmZvb3RlcldyYXBwZXI7aWYodGhpcy5hcHBlbmRIZWlnaHQ9YXBwZW5kV3JhcHBlcj9hcHBlbmRXcmFwcGVyLm9mZnNldEhlaWdodDowLCF0aGlzLnNob3dIZWFkZXJ8fGhlYWRlcldyYXBwZXIpe3ZhciBoZWFkZXJIZWlnaHQ9dGhpcy5oZWFkZXJIZWlnaHQ9dGhpcy5zaG93SGVhZGVyP2hlYWRlcldyYXBwZXIub2Zmc2V0SGVpZ2h0OjA7aWYodGhpcy5zaG93SGVhZGVyJiYwPGhlYWRlcldyYXBwZXIub2Zmc2V0V2lkdGgmJjA8KHRoaXMudGFibGUuY29sdW1uc3x8W10pLmxlbmd0aCYmaGVhZGVySGVpZ2h0PDIpcmV0dXJuIGV4dGVybmFsX3Z1ZV9kZWZhdWx0LmEubmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMyLnVwZGF0ZUVsc0hlaWdodCgpfSk7dmFyIHRhYmxlSGVpZ2h0PXRoaXMudGFibGVIZWlnaHQ9dGhpcy50YWJsZS4kZWwuY2xpZW50SGVpZ2h0O2lmKG51bGwhPT10aGlzLmhlaWdodCYmKCFpc05hTih0aGlzLmhlaWdodCl8fCJzdHJpbmciPT10eXBlb2YgdGhpcy5oZWlnaHQpKXt2YXIgZm9vdGVySGVpZ2h0PXRoaXMuZm9vdGVySGVpZ2h0PWZvb3RlcldyYXBwZXI/Zm9vdGVyV3JhcHBlci5vZmZzZXRIZWlnaHQ6MDt0aGlzLmJvZHlIZWlnaHQ9dGFibGVIZWlnaHQtaGVhZGVySGVpZ2h0LWZvb3RlckhlaWdodCsoZm9vdGVyV3JhcHBlcj8xOjApfXRoaXMuZml4ZWRCb2R5SGVpZ2h0PXRoaXMuc2Nyb2xsWD90aGlzLmJvZHlIZWlnaHQtdGhpcy5ndXR0ZXJXaWR0aDp0aGlzLmJvZHlIZWlnaHQ7dmFyIG5vRGF0YT0hdGhpcy50YWJsZS5kYXRhfHwwPT09dGhpcy50YWJsZS5kYXRhLmxlbmd0aDt0aGlzLnZpZXdwb3J0SGVpZ2h0PXRoaXMuc2Nyb2xsWD90YWJsZUhlaWdodC0obm9EYXRhPzA6dGhpcy5ndXR0ZXJXaWR0aCk6dGFibGVIZWlnaHQsdGhpcy51cGRhdGVTY3JvbGxZKCksdGhpcy5ub3RpZnlPYnNlcnZlcnMoInNjcm9sbGFibGUiKX19LFRhYmxlTGF5b3V0LnByb3RvdHlwZS5nZXRGbGF0dGVuQ29sdW1ucz1mdW5jdGlvbigpe3ZhciBmbGF0dGVuQ29sdW1ucz1bXTtyZXR1cm4gdGhpcy50YWJsZS5jb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oY29sdW1uKXtjb2x1bW4uaXNDb2x1bW5Hcm91cD9mbGF0dGVuQ29sdW1ucy5wdXNoLmFwcGx5KGZsYXR0ZW5Db2x1bW5zLGNvbHVtbi5jb2x1bW5zKTpmbGF0dGVuQ29sdW1ucy5wdXNoKGNvbHVtbil9KSxmbGF0dGVuQ29sdW1uc30sVGFibGVMYXlvdXQucHJvdG90eXBlLnVwZGF0ZUNvbHVtbnNXaWR0aD1mdW5jdGlvbigpe2lmKCFleHRlcm5hbF92dWVfZGVmYXVsdC5hLnByb3RvdHlwZS4kaXNTZXJ2ZXIpe3ZhciBmaXQ9dGhpcy5maXQsYm9keVdpZHRoPXRoaXMudGFibGUuJGVsLmNsaWVudFdpZHRoLGJvZHlNaW5XaWR0aD0wLGZsYXR0ZW5Db2x1bW5zPXRoaXMuZ2V0RmxhdHRlbkNvbHVtbnMoKSxmbGV4Q29sdW1ucz1mbGF0dGVuQ29sdW1ucy5maWx0ZXIoZnVuY3Rpb24oY29sdW1uKXtyZXR1cm4ibnVtYmVyIiE9dHlwZW9mIGNvbHVtbi53aWR0aH0pO2lmKGZsYXR0ZW5Db2x1bW5zLmZvckVhY2goZnVuY3Rpb24oY29sdW1uKXsibnVtYmVyIj09dHlwZW9mIGNvbHVtbi53aWR0aCYmY29sdW1uLnJlYWxXaWR0aCYmKGNvbHVtbi5yZWFsV2lkdGg9bnVsbCl9KSwwPGZsZXhDb2x1bW5zLmxlbmd0aCYmZml0KXtmbGF0dGVuQ29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uKGNvbHVtbil7Ym9keU1pbldpZHRoKz1jb2x1bW4ud2lkdGh8fGNvbHVtbi5taW5XaWR0aHx8ODB9KTt2YXIgc2Nyb2xsWVdpZHRoPXRoaXMuc2Nyb2xsWT90aGlzLmd1dHRlcldpZHRoOjA7aWYoYm9keU1pbldpZHRoPD1ib2R5V2lkdGgtc2Nyb2xsWVdpZHRoKXt0aGlzLnNjcm9sbFg9ITE7dmFyIHRvdGFsRmxleFdpZHRoPWJvZHlXaWR0aC1zY3JvbGxZV2lkdGgtYm9keU1pbldpZHRoO2lmKDE9PT1mbGV4Q29sdW1ucy5sZW5ndGgpZmxleENvbHVtbnNbMF0ucmVhbFdpZHRoPShmbGV4Q29sdW1uc1swXS5taW5XaWR0aHx8ODApK3RvdGFsRmxleFdpZHRoO2Vsc2V7dmFyIGZsZXhXaWR0aFBlclBpeGVsPXRvdGFsRmxleFdpZHRoL2ZsZXhDb2x1bW5zLnJlZHVjZShmdW5jdGlvbihwcmV2LGNvbHVtbil7cmV0dXJuIHByZXYrKGNvbHVtbi5taW5XaWR0aHx8ODApfSwwKSxub25lRmlyc3RXaWR0aD0wO2ZsZXhDb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oY29sdW1uLGluZGV4KXtpZigwIT09aW5kZXgpe3ZhciBmbGV4V2lkdGg9TWF0aC5mbG9vcigoY29sdW1uLm1pbldpZHRofHw4MCkqZmxleFdpZHRoUGVyUGl4ZWwpO25vbmVGaXJzdFdpZHRoKz1mbGV4V2lkdGgsY29sdW1uLnJlYWxXaWR0aD0oY29sdW1uLm1pbldpZHRofHw4MCkrZmxleFdpZHRofX0pLGZsZXhDb2x1bW5zWzBdLnJlYWxXaWR0aD0oZmxleENvbHVtbnNbMF0ubWluV2lkdGh8fDgwKSt0b3RhbEZsZXhXaWR0aC1ub25lRmlyc3RXaWR0aH19ZWxzZSB0aGlzLnNjcm9sbFg9ITAsZmxleENvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihjb2x1bW4pe2NvbHVtbi5yZWFsV2lkdGg9Y29sdW1uLm1pbldpZHRofSk7dGhpcy5ib2R5V2lkdGg9TWF0aC5tYXgoYm9keU1pbldpZHRoLGJvZHlXaWR0aCksdGhpcy50YWJsZS5yZXNpemVTdGF0ZS53aWR0aD10aGlzLmJvZHlXaWR0aH1lbHNlIGZsYXR0ZW5Db2x1bW5zLmZvckVhY2goZnVuY3Rpb24oY29sdW1uKXtjb2x1bW4ud2lkdGh8fGNvbHVtbi5taW5XaWR0aD9jb2x1bW4ucmVhbFdpZHRoPWNvbHVtbi53aWR0aHx8Y29sdW1uLm1pbldpZHRoOmNvbHVtbi5yZWFsV2lkdGg9ODAsYm9keU1pbldpZHRoKz1jb2x1bW4ucmVhbFdpZHRofSksdGhpcy5zY3JvbGxYPWJvZHlXaWR0aDxib2R5TWluV2lkdGgsdGhpcy5ib2R5V2lkdGg9Ym9keU1pbldpZHRoO3ZhciBmaXhlZENvbHVtbnM9dGhpcy5zdG9yZS5zdGF0ZXMuZml4ZWRDb2x1bW5zO2lmKDA8Zml4ZWRDb2x1bW5zLmxlbmd0aCl7dmFyIGZpeGVkV2lkdGg9MDtmaXhlZENvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihjb2x1bW4pe2ZpeGVkV2lkdGgrPWNvbHVtbi5yZWFsV2lkdGh8fGNvbHVtbi53aWR0aH0pLHRoaXMuZml4ZWRXaWR0aD1maXhlZFdpZHRofXZhciByaWdodEZpeGVkQ29sdW1ucz10aGlzLnN0b3JlLnN0YXRlcy5yaWdodEZpeGVkQ29sdW1ucztpZigwPHJpZ2h0Rml4ZWRDb2x1bW5zLmxlbmd0aCl7dmFyIHJpZ2h0Rml4ZWRXaWR0aD0wO3JpZ2h0Rml4ZWRDb2x1bW5zLmZvckVhY2goZnVuY3Rpb24oY29sdW1uKXtyaWdodEZpeGVkV2lkdGgrPWNvbHVtbi5yZWFsV2lkdGh8fGNvbHVtbi53aWR0aH0pLHRoaXMucmlnaHRGaXhlZFdpZHRoPXJpZ2h0Rml4ZWRXaWR0aH10aGlzLm5vdGlmeU9ic2VydmVycygiY29sdW1ucyIpfX0sVGFibGVMYXlvdXQucHJvdG90eXBlLmFkZE9ic2VydmVyPWZ1bmN0aW9uKG9ic2VydmVyKXt0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKX0sVGFibGVMYXlvdXQucHJvdG90eXBlLnJlbW92ZU9ic2VydmVyPWZ1bmN0aW9uKG9ic2VydmVyKXt2YXIgaW5kZXg9dGhpcy5vYnNlcnZlcnMuaW5kZXhPZihvYnNlcnZlcik7LTEhPT1pbmRleCYmdGhpcy5vYnNlcnZlcnMuc3BsaWNlKGluZGV4LDEpfSxUYWJsZUxheW91dC5wcm90b3R5cGUubm90aWZ5T2JzZXJ2ZXJzPWZ1bmN0aW9uKGV2ZW50KXt2YXIgX3RoaXMzPXRoaXM7dGhpcy5vYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbihvYnNlcnZlcil7c3dpdGNoKGV2ZW50KXtjYXNlImNvbHVtbnMiOm9ic2VydmVyLm9uQ29sdW1uc0NoYW5nZShfdGhpczMpO2JyZWFrO2Nhc2Uic2Nyb2xsYWJsZSI6b2JzZXJ2ZXIub25TY3JvbGxhYmxlQ2hhbmdlKF90aGlzMyk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlRhYmxlIExheW91dCBkb24ndCBoYXZlIGV2ZW50ICIrZXZlbnQrIi4iKX19KX0sVGFibGVMYXlvdXR9KCksbGF5b3V0X29ic2VydmVyPXtjcmVhdGVkOmZ1bmN0aW9uKCl7dGhpcy50YWJsZUxheW91dC5hZGRPYnNlcnZlcih0aGlzKX0sZGVzdHJveWVkOmZ1bmN0aW9uKCl7dGhpcy50YWJsZUxheW91dC5yZW1vdmVPYnNlcnZlcih0aGlzKX0sY29tcHV0ZWQ6e3RhYmxlTGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGxheW91dD10aGlzLmxheW91dDtpZighbGF5b3V0JiZ0aGlzLnRhYmxlJiYobGF5b3V0PXRoaXMudGFibGUubGF5b3V0KSwhbGF5b3V0KXRocm93IG5ldyBFcnJvcigiQ2FuIG5vdCBmaW5kIHRhYmxlIGxheW91dC4iKTtyZXR1cm4gbGF5b3V0fX0sbW91bnRlZDpmdW5jdGlvbigpe3RoaXMub25Db2x1bW5zQ2hhbmdlKHRoaXMudGFibGVMYXlvdXQpLHRoaXMub25TY3JvbGxhYmxlQ2hhbmdlKHRoaXMudGFibGVMYXlvdXQpfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dGhpcy5fX3VwZGF0ZWRfX3x8KHRoaXMub25Db2x1bW5zQ2hhbmdlKHRoaXMudGFibGVMYXlvdXQpLHRoaXMub25TY3JvbGxhYmxlQ2hhbmdlKHRoaXMudGFibGVMYXlvdXQpLHRoaXMuX191cGRhdGVkX189ITApfSxtZXRob2RzOntvbkNvbHVtbnNDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgY29scz10aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCJjb2xncm91cCA+IGNvbCIpO2lmKGNvbHMubGVuZ3RoKXt2YXIgZmxhdHRlbkNvbHVtbnM9dGhpcy50YWJsZUxheW91dC5nZXRGbGF0dGVuQ29sdW1ucygpLGNvbHVtbnNNYXA9e307ZmxhdHRlbkNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihjb2x1bW4pe2NvbHVtbnNNYXBbY29sdW1uLmlkXT1jb2x1bW59KTtmb3IodmFyIGk9MCxqPWNvbHMubGVuZ3RoO2k8ajtpKyspe3ZhciBjb2w9Y29sc1tpXSxuYW1lPWNvbC5nZXRBdHRyaWJ1dGUoIm5hbWUiKSxjb2x1bW49Y29sdW1uc01hcFtuYW1lXTtjb2x1bW4mJmNvbC5zZXRBdHRyaWJ1dGUoIndpZHRoIixjb2x1bW4ucmVhbFdpZHRofHxjb2x1bW4ud2lkdGgpfX19LG9uU2Nyb2xsYWJsZUNoYW5nZTpmdW5jdGlvbihsYXlvdXQpe2Zvcih2YXIgY29scz10aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCJjb2xncm91cCA+IGNvbFtuYW1lPWd1dHRlcl0iKSxpPTAsaj1jb2xzLmxlbmd0aDtpPGo7aSsrKXtjb2xzW2ldLnNldEF0dHJpYnV0ZSgid2lkdGgiLGxheW91dC5zY3JvbGxZP2xheW91dC5ndXR0ZXJXaWR0aDoiMCIpfWZvcih2YXIgdGhzPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoInRoLmd1dHRlciIpLF9pPTAsX2o9dGhzLmxlbmd0aDtfaTxfajtfaSsrKXt2YXIgdGg9dGhzW19pXTt0aC5zdHlsZS53aWR0aD1sYXlvdXQuc2Nyb2xsWT9sYXlvdXQuZ3V0dGVyV2lkdGgrInB4IjoiMCIsdGguc3R5bGUuZGlzcGxheT1sYXlvdXQuc2Nyb2xsWT8iIjoibm9uZSJ9fX19LHRhYmxlX2JvZHlfdHlwZW9mPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmp9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBvYmp9LHRhYmxlX2JvZHk9e25hbWU6IkVsVGFibGVCb2R5IixtaXhpbnM6W2xheW91dF9vYnNlcnZlcl0sY29tcG9uZW50czp7RWxDaGVja2JveDpjaGVja2JveF9kZWZhdWx0LmEsRWxUb29sdGlwOnRvb2x0aXBfZGVmYXVsdC5hfSxwcm9wczp7c3RvcmU6e3JlcXVpcmVkOiEwfSxzdHJpcGU6Qm9vbGVhbixjb250ZXh0Ont9LHJvd0NsYXNzTmFtZTpbU3RyaW5nLEZ1bmN0aW9uXSxyb3dTdHlsZTpbT2JqZWN0LEZ1bmN0aW9uXSxmaXhlZDpTdHJpbmcsaGlnaGxpZ2h0OkJvb2xlYW59LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgX3RoaXM9dGhpcyxjb2x1bW5zSGlkZGVuPXRoaXMuY29sdW1ucy5tYXAoZnVuY3Rpb24oY29sdW1uLGluZGV4KXtyZXR1cm4gX3RoaXMuaXNDb2x1bW5IaWRkZW4oaW5kZXgpfSk7cmV0dXJuIGgoInRhYmxlIix7Y2xhc3M6ImVsLXRhYmxlX19ib2R5IixhdHRyczp7Y2VsbHNwYWNpbmc6IjAiLGNlbGxwYWRkaW5nOiIwIixib3JkZXI6IjAifX0sW2goImNvbGdyb3VwIixbdGhpcy5fbCh0aGlzLmNvbHVtbnMsZnVuY3Rpb24oY29sdW1uKXtyZXR1cm4gaCgiY29sIix7YXR0cnM6e25hbWU6Y29sdW1uLmlkfX0pfSldKSxoKCJ0Ym9keSIsW3RoaXMuX2wodGhpcy5kYXRhLGZ1bmN0aW9uKHJvdywkaW5kZXgpe3JldHVybltoKCJ0ciIse3N0eWxlOl90aGlzLnJvd1N0eWxlP190aGlzLmdldFJvd1N0eWxlKHJvdywkaW5kZXgpOm51bGwsa2V5Ol90aGlzLnRhYmxlLnJvd0tleT9fdGhpcy5nZXRLZXlPZlJvdyhyb3csJGluZGV4KTokaW5kZXgsb246e2RibGNsaWNrOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF90aGlzLmhhbmRsZURvdWJsZUNsaWNrKCRldmVudCxyb3cpfSxjbGljazpmdW5jdGlvbigkZXZlbnQpe3JldHVybiBfdGhpcy5oYW5kbGVDbGljaygkZXZlbnQscm93KX0sY29udGV4dG1lbnU6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3RoaXMuaGFuZGxlQ29udGV4dE1lbnUoJGV2ZW50LHJvdyl9LG1vdXNlZW50ZXI6ZnVuY3Rpb24oXyl7cmV0dXJuIF90aGlzLmhhbmRsZU1vdXNlRW50ZXIoJGluZGV4KX0sbW91c2VsZWF2ZTpmdW5jdGlvbihfKXtyZXR1cm4gX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSgpfX0sY2xhc3M6W190aGlzLmdldFJvd0NsYXNzKHJvdywkaW5kZXgpXX0sW190aGlzLl9sKF90aGlzLmNvbHVtbnMsZnVuY3Rpb24oY29sdW1uLGNlbGxJbmRleCl7dmFyIF9nZXRTcGFuPV90aGlzLmdldFNwYW4ocm93LGNvbHVtbiwkaW5kZXgsY2VsbEluZGV4KSxyb3dzcGFuPV9nZXRTcGFuLnJvd3NwYW4sY29sc3Bhbj1fZ2V0U3Bhbi5jb2xzcGFuO3JldHVybiByb3dzcGFuJiZjb2xzcGFuP2goInRkIix7c3R5bGU6X3RoaXMuZ2V0Q2VsbFN0eWxlKCRpbmRleCxjZWxsSW5kZXgscm93LGNvbHVtbiksY2xhc3M6X3RoaXMuZ2V0Q2VsbENsYXNzKCRpbmRleCxjZWxsSW5kZXgscm93LGNvbHVtbiksYXR0cnM6e3Jvd3NwYW46cm93c3Bhbixjb2xzcGFuOmNvbHNwYW59LG9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF90aGlzLmhhbmRsZUNlbGxNb3VzZUVudGVyKCRldmVudCxyb3cpfSxtb3VzZWxlYXZlOl90aGlzLmhhbmRsZUNlbGxNb3VzZUxlYXZlfX0sW2NvbHVtbi5yZW5kZXJDZWxsLmNhbGwoX3RoaXMuX3JlbmRlclByb3h5LGgse3Jvdzpyb3csY29sdW1uOmNvbHVtbiwkaW5kZXg6JGluZGV4LHN0b3JlOl90aGlzLnN0b3JlLF9zZWxmOl90aGlzLmNvbnRleHR8fF90aGlzLnRhYmxlLiR2bm9kZS5jb250ZXh0fSxjb2x1bW5zSGlkZGVuW2NlbGxJbmRleF0pXSk6IiJ9KV0pLF90aGlzLnN0b3JlLmlzUm93RXhwYW5kZWQocm93KT9oKCJ0ciIsW2goInRkIix7YXR0cnM6e2NvbHNwYW46X3RoaXMuY29sdW1ucy5sZW5ndGh9LGNsYXNzOiJlbC10YWJsZV9fZXhwYW5kZWQtY2VsbCJ9LFtfdGhpcy50YWJsZS5yZW5kZXJFeHBhbmRlZD9fdGhpcy50YWJsZS5yZW5kZXJFeHBhbmRlZChoLHtyb3c6cm93LCRpbmRleDokaW5kZXgsc3RvcmU6X3RoaXMuc3RvcmV9KToiIl0pXSk6IiJdfSkuY29uY2F0KGgoImVsLXRvb2x0aXAiLHthdHRyczp7ZWZmZWN0OnRoaXMudGFibGUudG9vbHRpcEVmZmVjdCxwbGFjZW1lbnQ6InRvcCIsY29udGVudDp0aGlzLnRvb2x0aXBDb250ZW50fSxyZWY6InRvb2x0aXAifSkpXSldKX0sY29tcHV0ZWQ6e3RhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHBhcmVudH0sZGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5kYXRhfSxjb2x1bW5zQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZS5zdGF0ZXMuY29sdW1ucy5sZW5ndGh9LGxlZnRGaXhlZExlYWZDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5maXhlZExlYWZDb2x1bW5zTGVuZ3RofSxyaWdodEZpeGVkTGVhZkNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLnJpZ2h0Rml4ZWRMZWFmQ29sdW1uc0xlbmd0aH0sbGVmdEZpeGVkQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZS5zdGF0ZXMuZml4ZWRDb2x1bW5zLmxlbmd0aH0scmlnaHRGaXhlZENvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLnJpZ2h0Rml4ZWRDb2x1bW5zLmxlbmd0aH0sY29sdW1uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5jb2x1bW5zfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybnt0b29sdGlwQ29udGVudDoiIn19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmFjdGl2YXRlVG9vbHRpcD1kZWJvdW5jZV9kZWZhdWx0KCkoNTAsZnVuY3Rpb24odG9vbHRpcCl7cmV0dXJuIHRvb2x0aXAuaGFuZGxlU2hvd1BvcHBlcigpfSl9LG1ldGhvZHM6e2dldEtleU9mUm93OmZ1bmN0aW9uKHJvdyxpbmRleCl7dmFyIHJvd0tleT10aGlzLnRhYmxlLnJvd0tleTtyZXR1cm4gcm93S2V5P2dldFJvd0lkZW50aXR5KHJvdyxyb3dLZXkpOmluZGV4fSxpc0NvbHVtbkhpZGRlbjpmdW5jdGlvbihpbmRleCl7cmV0dXJuITA9PT10aGlzLmZpeGVkfHwibGVmdCI9PT10aGlzLmZpeGVkP2luZGV4Pj10aGlzLmxlZnRGaXhlZExlYWZDb3VudDoicmlnaHQiPT09dGhpcy5maXhlZD9pbmRleDx0aGlzLmNvbHVtbnNDb3VudC10aGlzLnJpZ2h0Rml4ZWRMZWFmQ291bnQ6aW5kZXg8dGhpcy5sZWZ0Rml4ZWRMZWFmQ291bnR8fGluZGV4Pj10aGlzLmNvbHVtbnNDb3VudC10aGlzLnJpZ2h0Rml4ZWRMZWFmQ291bnR9LGdldFNwYW46ZnVuY3Rpb24ocm93LGNvbHVtbixyb3dJbmRleCxjb2x1bW5JbmRleCl7dmFyIHJvd3NwYW49MSxjb2xzcGFuPTEsZm49dGhpcy50YWJsZS5zcGFuTWV0aG9kO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBmbil7dmFyIHJlc3VsdD1mbih7cm93OnJvdyxjb2x1bW46Y29sdW1uLHJvd0luZGV4OnJvd0luZGV4LGNvbHVtbkluZGV4OmNvbHVtbkluZGV4fSk7QXJyYXkuaXNBcnJheShyZXN1bHQpPyhyb3dzcGFuPXJlc3VsdFswXSxjb2xzcGFuPXJlc3VsdFsxXSk6Im9iamVjdCI9PT0odm9pZCAwPT09cmVzdWx0PyJ1bmRlZmluZWQiOnRhYmxlX2JvZHlfdHlwZW9mKHJlc3VsdCkpJiYocm93c3Bhbj1yZXN1bHQucm93c3Bhbixjb2xzcGFuPXJlc3VsdC5jb2xzcGFuKX1yZXR1cm57cm93c3Bhbjpyb3dzcGFuLGNvbHNwYW46Y29sc3Bhbn19LGdldFJvd1N0eWxlOmZ1bmN0aW9uKHJvdyxyb3dJbmRleCl7dmFyIHJvd1N0eWxlPXRoaXMudGFibGUucm93U3R5bGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHJvd1N0eWxlP3Jvd1N0eWxlLmNhbGwobnVsbCx7cm93OnJvdyxyb3dJbmRleDpyb3dJbmRleH0pOnJvd1N0eWxlfSxnZXRSb3dDbGFzczpmdW5jdGlvbihyb3cscm93SW5kZXgpe3ZhciBjbGFzc2VzPVsiZWwtdGFibGVfX3JvdyJdO3RoaXMudGFibGUuaGlnaGxpZ2h0Q3VycmVudFJvdyYmcm93PT09dGhpcy5zdG9yZS5zdGF0ZXMuY3VycmVudFJvdyYmY2xhc3Nlcy5wdXNoKCJjdXJyZW50LXJvdyIpLHJvd0luZGV4PT09dGhpcy5zdG9yZS5zdGF0ZXMuaG92ZXJSb3cmJmNsYXNzZXMucHVzaCgiaG92ZXItcm93IiksdGhpcy5zdHJpcGUmJnJvd0luZGV4JTI9PTEmJmNsYXNzZXMucHVzaCgiZWwtdGFibGVfX3Jvdy0tc3RyaXBlZCIpO3ZhciByb3dDbGFzc05hbWU9dGhpcy50YWJsZS5yb3dDbGFzc05hbWU7cmV0dXJuInN0cmluZyI9PXR5cGVvZiByb3dDbGFzc05hbWU/Y2xhc3Nlcy5wdXNoKHJvd0NsYXNzTmFtZSk6ImZ1bmN0aW9uIj09dHlwZW9mIHJvd0NsYXNzTmFtZSYmY2xhc3Nlcy5wdXNoKHJvd0NsYXNzTmFtZS5jYWxsKG51bGwse3Jvdzpyb3cscm93SW5kZXg6cm93SW5kZXh9KSksLTE8dGhpcy5zdG9yZS5zdGF0ZXMuZXhwYW5kUm93cy5pbmRleE9mKHJvdykmJmNsYXNzZXMucHVzaCgiZXhwYW5kZWQiKSxjbGFzc2VzLmpvaW4oIiAiKX0sZ2V0Q2VsbFN0eWxlOmZ1bmN0aW9uKHJvd0luZGV4LGNvbHVtbkluZGV4LHJvdyxjb2x1bW4pe3ZhciBjZWxsU3R5bGU9dGhpcy50YWJsZS5jZWxsU3R5bGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGNlbGxTdHlsZT9jZWxsU3R5bGUuY2FsbChudWxsLHtyb3dJbmRleDpyb3dJbmRleCxjb2x1bW5JbmRleDpjb2x1bW5JbmRleCxyb3c6cm93LGNvbHVtbjpjb2x1bW59KTpjZWxsU3R5bGV9LGdldENlbGxDbGFzczpmdW5jdGlvbihyb3dJbmRleCxjb2x1bW5JbmRleCxyb3csY29sdW1uKXt2YXIgY2xhc3Nlcz1bY29sdW1uLmlkLGNvbHVtbi5hbGlnbixjb2x1bW4uY2xhc3NOYW1lXTt0aGlzLmlzQ29sdW1uSGlkZGVuKGNvbHVtbkluZGV4KSYmY2xhc3Nlcy5wdXNoKCJpcy1oaWRkZW4iKTt2YXIgY2VsbENsYXNzTmFtZT10aGlzLnRhYmxlLmNlbGxDbGFzc05hbWU7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBjZWxsQ2xhc3NOYW1lP2NsYXNzZXMucHVzaChjZWxsQ2xhc3NOYW1lKToiZnVuY3Rpb24iPT10eXBlb2YgY2VsbENsYXNzTmFtZSYmY2xhc3Nlcy5wdXNoKGNlbGxDbGFzc05hbWUuY2FsbChudWxsLHtyb3dJbmRleDpyb3dJbmRleCxjb2x1bW5JbmRleDpjb2x1bW5JbmRleCxyb3c6cm93LGNvbHVtbjpjb2x1bW59KSksY2xhc3Nlcy5qb2luKCIgIil9LGhhbmRsZUNlbGxNb3VzZUVudGVyOmZ1bmN0aW9uKGV2ZW50LHJvdyl7dmFyIHRhYmxlPXRoaXMudGFibGUsY2VsbD1nZXRDZWxsKGV2ZW50KTtpZihjZWxsKXt2YXIgY29sdW1uPWdldENvbHVtbkJ5Q2VsbCh0YWJsZSxjZWxsKSxob3ZlclN0YXRlPXRhYmxlLmhvdmVyU3RhdGU9e2NlbGw6Y2VsbCxjb2x1bW46Y29sdW1uLHJvdzpyb3d9O3RhYmxlLiRlbWl0KCJjZWxsLW1vdXNlLWVudGVyIixob3ZlclN0YXRlLnJvdyxob3ZlclN0YXRlLmNvbHVtbixob3ZlclN0YXRlLmNlbGwsZXZlbnQpfXZhciBjZWxsQ2hpbGQ9ZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoIi5jZWxsIik7aWYoT2JqZWN0KGRvbV8uaGFzQ2xhc3MpKGNlbGxDaGlsZCwiZWwtdG9vbHRpcCIpJiZjZWxsQ2hpbGQuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciByYW5nZT1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2lmKHJhbmdlLnNldFN0YXJ0KGNlbGxDaGlsZCwwKSxyYW5nZS5zZXRFbmQoY2VsbENoaWxkLGNlbGxDaGlsZC5jaGlsZE5vZGVzLmxlbmd0aCksKHJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKygocGFyc2VJbnQoT2JqZWN0KGRvbV8uZ2V0U3R5bGUpKGNlbGxDaGlsZCwicGFkZGluZ0xlZnQiKSwxMCl8fDApKyhwYXJzZUludChPYmplY3QoZG9tXy5nZXRTdHlsZSkoY2VsbENoaWxkLCJwYWRkaW5nUmlnaHQiKSwxMCl8fDApKT5jZWxsQ2hpbGQub2Zmc2V0V2lkdGh8fGNlbGxDaGlsZC5zY3JvbGxXaWR0aD5jZWxsQ2hpbGQub2Zmc2V0V2lkdGgpJiZ0aGlzLiRyZWZzLnRvb2x0aXApe3ZhciB0b29sdGlwPXRoaXMuJHJlZnMudG9vbHRpcDt0aGlzLnRvb2x0aXBDb250ZW50PWNlbGwuaW5uZXJUZXh0fHxjZWxsLnRleHRDb250ZW50LHRvb2x0aXAucmVmZXJlbmNlRWxtPWNlbGwsdG9vbHRpcC4kcmVmcy5wb3BwZXImJih0b29sdGlwLiRyZWZzLnBvcHBlci5zdHlsZS5kaXNwbGF5PSJub25lIiksdG9vbHRpcC5kb0Rlc3Ryb3koKSx0b29sdGlwLnNldEV4cGVjdGVkU3RhdGUoITApLHRoaXMuYWN0aXZhdGVUb29sdGlwKHRvb2x0aXApfX19LGhhbmRsZUNlbGxNb3VzZUxlYXZlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgdG9vbHRpcD10aGlzLiRyZWZzLnRvb2x0aXA7aWYodG9vbHRpcCYmKHRvb2x0aXAuc2V0RXhwZWN0ZWRTdGF0ZSghMSksdG9vbHRpcC5oYW5kbGVDbG9zZVBvcHBlcigpKSxnZXRDZWxsKGV2ZW50KSl7dmFyIG9sZEhvdmVyU3RhdGU9dGhpcy50YWJsZS5ob3ZlclN0YXRlfHx7fTt0aGlzLnRhYmxlLiRlbWl0KCJjZWxsLW1vdXNlLWxlYXZlIixvbGRIb3ZlclN0YXRlLnJvdyxvbGRIb3ZlclN0YXRlLmNvbHVtbixvbGRIb3ZlclN0YXRlLmNlbGwsZXZlbnQpfX0saGFuZGxlTW91c2VFbnRlcjpmdW5jdGlvbihpbmRleCl7dGhpcy5zdG9yZS5jb21taXQoInNldEhvdmVyUm93IixpbmRleCl9LGhhbmRsZU1vdXNlTGVhdmU6ZnVuY3Rpb24oKXt0aGlzLnN0b3JlLmNvbW1pdCgic2V0SG92ZXJSb3ciLG51bGwpfSxoYW5kbGVDb250ZXh0TWVudTpmdW5jdGlvbihldmVudCxyb3cpe3RoaXMuaGFuZGxlRXZlbnQoZXZlbnQscm93LCJjb250ZXh0bWVudSIpfSxoYW5kbGVEb3VibGVDbGljazpmdW5jdGlvbihldmVudCxyb3cpe3RoaXMuaGFuZGxlRXZlbnQoZXZlbnQscm93LCJkYmxjbGljayIpfSxoYW5kbGVDbGljazpmdW5jdGlvbihldmVudCxyb3cpe3RoaXMuc3RvcmUuY29tbWl0KCJzZXRDdXJyZW50Um93Iixyb3cpLHRoaXMuaGFuZGxlRXZlbnQoZXZlbnQscm93LCJjbGljayIpfSxoYW5kbGVFdmVudDpmdW5jdGlvbihldmVudCxyb3csbmFtZSl7dmFyIHRhYmxlPXRoaXMudGFibGUsY2VsbD1nZXRDZWxsKGV2ZW50KSxjb2x1bW49dm9pZCAwO2NlbGwmJihjb2x1bW49Z2V0Q29sdW1uQnlDZWxsKHRhYmxlLGNlbGwpKSYmdGFibGUuJGVtaXQoImNlbGwtIituYW1lLHJvdyxjb2x1bW4sY2VsbCxldmVudCksdGFibGUuJGVtaXQoInJvdy0iK25hbWUscm93LGNvbHVtbixldmVudCl9LGhhbmRsZUV4cGFuZENsaWNrOmZ1bmN0aW9uKHJvdyxlKXtlLnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuc3RvcmUudG9nZ2xlUm93RXhwYW5zaW9uKHJvdyl9fX0sZmlsdGVyX3BhbmVsdnVlX3R5cGVfdGVtcGxhdGVfaWRfN2YyYzkxOWZfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJlbC16b29tLWluLXRvcCJ9fSxbX3ZtLm11bHRpcGxlP19jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToiY2xpY2tvdXRzaWRlIixyYXdOYW1lOiJ2LWNsaWNrb3V0c2lkZSIsdmFsdWU6X3ZtLmhhbmRsZU91dHNpZGVDbGljayxleHByZXNzaW9uOiJoYW5kbGVPdXRzaWRlQ2xpY2sifSx7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0uc2hvd1BvcHBlcixleHByZXNzaW9uOiJzaG93UG9wcGVyIn1dLHN0YXRpY0NsYXNzOiJlbC10YWJsZS1maWx0ZXIifSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10YWJsZS1maWx0ZXJfX2NvbnRlbnQifSxbX2MoImVsLXNjcm9sbGJhciIse2F0dHJzOnsid3JhcC1jbGFzcyI6ImVsLXRhYmxlLWZpbHRlcl9fd3JhcCJ9fSxbX2MoImVsLWNoZWNrYm94LWdyb3VwIix7c3RhdGljQ2xhc3M6ImVsLXRhYmxlLWZpbHRlcl9fY2hlY2tib3gtZ3JvdXAiLG1vZGVsOnt2YWx1ZTpfdm0uZmlsdGVyZWRWYWx1ZSxjYWxsYmFjazpmdW5jdGlvbigkJHYpe192bS5maWx0ZXJlZFZhbHVlPSQkdn0sZXhwcmVzc2lvbjoiZmlsdGVyZWRWYWx1ZSJ9fSxfdm0uX2woX3ZtLmZpbHRlcnMsZnVuY3Rpb24oZmlsdGVyKXtyZXR1cm4gX2MoImVsLWNoZWNrYm94Iix7a2V5OmZpbHRlci52YWx1ZSxhdHRyczp7bGFiZWw6ZmlsdGVyLnZhbHVlfX0sW192bS5fdihfdm0uX3MoZmlsdGVyLnRleHQpKV0pfSksMSldLDEpXSwxKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRhYmxlLWZpbHRlcl9fYm90dG9tIn0sW19jKCJidXR0b24iLHtjbGFzczp7ImlzLWRpc2FibGVkIjowPT09X3ZtLmZpbHRlcmVkVmFsdWUubGVuZ3RofSxhdHRyczp7ZGlzYWJsZWQ6MD09PV92bS5maWx0ZXJlZFZhbHVlLmxlbmd0aH0sb246e2NsaWNrOl92bS5oYW5kbGVDb25maXJtfX0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLnRhYmxlLmNvbmZpcm1GaWx0ZXIiKSkpXSksX2MoImJ1dHRvbiIse29uOntjbGljazpfdm0uaGFuZGxlUmVzZXR9fSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwudGFibGUucmVzZXRGaWx0ZXIiKSkpXSldKV0pOl9jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToiY2xpY2tvdXRzaWRlIixyYXdOYW1lOiJ2LWNsaWNrb3V0c2lkZSIsdmFsdWU6X3ZtLmhhbmRsZU91dHNpZGVDbGljayxleHByZXNzaW9uOiJoYW5kbGVPdXRzaWRlQ2xpY2sifSx7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0uc2hvd1BvcHBlcixleHByZXNzaW9uOiJzaG93UG9wcGVyIn1dLHN0YXRpY0NsYXNzOiJlbC10YWJsZS1maWx0ZXIifSxbX2MoInVsIix7c3RhdGljQ2xhc3M6ImVsLXRhYmxlLWZpbHRlcl9fbGlzdCJ9LFtfYygibGkiLHtzdGF0aWNDbGFzczoiZWwtdGFibGUtZmlsdGVyX19saXN0LWl0ZW0iLGNsYXNzOnsiaXMtYWN0aXZlIjp2b2lkIDA9PT1fdm0uZmlsdGVyVmFsdWV8fG51bGw9PT1fdm0uZmlsdGVyVmFsdWV9LG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe192bS5oYW5kbGVTZWxlY3QobnVsbCl9fX0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLnRhYmxlLmNsZWFyRmlsdGVyIikpKV0pLF92bS5fbChfdm0uZmlsdGVycyxmdW5jdGlvbihmaWx0ZXIpe3JldHVybiBfYygibGkiLHtrZXk6ZmlsdGVyLnZhbHVlLHN0YXRpY0NsYXNzOiJlbC10YWJsZS1maWx0ZXJfX2xpc3QtaXRlbSIsY2xhc3M6eyJpcy1hY3RpdmUiOl92bS5pc0FjdGl2ZShmaWx0ZXIpfSxhdHRyczp7bGFiZWw6ZmlsdGVyLnZhbHVlfSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaGFuZGxlU2VsZWN0KGZpbHRlci52YWx1ZSl9fX0sW192bS5fdihfdm0uX3MoZmlsdGVyLnRleHQpKV0pfSldLDIpXSldKX07ZmlsdGVyX3BhbmVsdnVlX3R5cGVfdGVtcGxhdGVfaWRfN2YyYzkxOWZfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGRyb3Bkb3ducz1bXTshZXh0ZXJuYWxfdnVlX2RlZmF1bHQuYS5wcm90b3R5cGUuJGlzU2VydmVyJiZkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsZnVuY3Rpb24oZXZlbnQpe2Ryb3Bkb3ducy5mb3JFYWNoKGZ1bmN0aW9uKGRyb3Bkb3duKXt2YXIgdGFyZ2V0PWV2ZW50LnRhcmdldDtkcm9wZG93biYmZHJvcGRvd24uJGVsJiYodGFyZ2V0PT09ZHJvcGRvd24uJGVsfHxkcm9wZG93bi4kZWwuY29udGFpbnModGFyZ2V0KXx8ZHJvcGRvd24uaGFuZGxlT3V0c2lkZUNsaWNrJiZkcm9wZG93bi5oYW5kbGVPdXRzaWRlQ2xpY2soZXZlbnQpKX0pfSk7dmFyIHNyY19kcm9wZG93bl9vcGVuPWZ1bmN0aW9uKGluc3RhbmNlKXtpbnN0YW5jZSYmZHJvcGRvd25zLnB1c2goaW5zdGFuY2UpfSxzcmNfZHJvcGRvd25fY2xvc2U9ZnVuY3Rpb24oaW5zdGFuY2Upey0xIT09ZHJvcGRvd25zLmluZGV4T2YoaW5zdGFuY2UpJiZkcm9wZG93bnMuc3BsaWNlKGluc3RhbmNlLDEpfSxjaGVja2JveF9ncm91cF89X193ZWJwYWNrX3JlcXVpcmVfXygyNyksY2hlY2tib3hfZ3JvdXBfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oY2hlY2tib3hfZ3JvdXBfKSxmaWx0ZXJfcGFuZWxfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxUYWJsZUZpbHRlclBhbmVsIixtaXhpbnM6W3Z1ZV9wb3BwZXJfZGVmYXVsdC5hLGxvY2FsZV9kZWZhdWx0LmFdLGRpcmVjdGl2ZXM6e0NsaWNrb3V0c2lkZTpjbGlja291dHNpZGVfZGVmYXVsdC5hfSxjb21wb25lbnRzOntFbENoZWNrYm94OmNoZWNrYm94X2RlZmF1bHQuYSxFbENoZWNrYm94R3JvdXA6Y2hlY2tib3hfZ3JvdXBfZGVmYXVsdC5hfSxwcm9wczp7cGxhY2VtZW50Ont0eXBlOlN0cmluZyxkZWZhdWx0OiJib3R0b20tZW5kIn19LGN1c3RvbVJlbmRlcjpmdW5jdGlvbihoKXtyZXR1cm4gaCgiZGl2Iix7Y2xhc3M6ImVsLXRhYmxlLWZpbHRlciJ9LFtoKCJkaXYiLHtjbGFzczoiZWwtdGFibGUtZmlsdGVyX19jb250ZW50In0pLGgoImRpdiIse2NsYXNzOiJlbC10YWJsZS1maWx0ZXJfX2JvdHRvbSJ9LFtoKCJidXR0b24iLHtvbjp7Y2xpY2s6dGhpcy5oYW5kbGVDb25maXJtfX0sW3RoaXMudCgiZWwudGFibGUuY29uZmlybUZpbHRlciIpXSksaCgiYnV0dG9uIix7b246e2NsaWNrOnRoaXMuaGFuZGxlUmVzZXR9fSxbdGhpcy50KCJlbC50YWJsZS5yZXNldEZpbHRlciIpXSldKV0pfSxtZXRob2RzOntpc0FjdGl2ZTpmdW5jdGlvbihmaWx0ZXIpe3JldHVybiBmaWx0ZXIudmFsdWU9PT10aGlzLmZpbHRlclZhbHVlfSxoYW5kbGVPdXRzaWRlQ2xpY2s6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMuc2hvd1BvcHBlcj0hMX0sMTYpfSxoYW5kbGVDb25maXJtOmZ1bmN0aW9uKCl7dGhpcy5jb25maXJtRmlsdGVyKHRoaXMuZmlsdGVyZWRWYWx1ZSksdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2soKX0saGFuZGxlUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmZpbHRlcmVkVmFsdWU9W10sdGhpcy5jb25maXJtRmlsdGVyKHRoaXMuZmlsdGVyZWRWYWx1ZSksdGhpcy5oYW5kbGVPdXRzaWRlQ2xpY2soKX0saGFuZGxlU2VsZWN0OmZ1bmN0aW9uKGZpbHRlclZhbHVlKXtudWxsIT0odGhpcy5maWx0ZXJWYWx1ZT1maWx0ZXJWYWx1ZSk/dGhpcy5jb25maXJtRmlsdGVyKHRoaXMuZmlsdGVyZWRWYWx1ZSk6dGhpcy5jb25maXJtRmlsdGVyKFtdKSx0aGlzLmhhbmRsZU91dHNpZGVDbGljaygpfSxjb25maXJtRmlsdGVyOmZ1bmN0aW9uKGZpbHRlcmVkVmFsdWUpe3RoaXMudGFibGUuc3RvcmUuY29tbWl0KCJmaWx0ZXJDaGFuZ2UiLHtjb2x1bW46dGhpcy5jb2x1bW4sdmFsdWVzOmZpbHRlcmVkVmFsdWV9KSx0aGlzLnRhYmxlLnN0b3JlLnVwZGF0ZUFsbFNlbGVjdGVkKCl9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3RhYmxlOm51bGwsY2VsbDpudWxsLGNvbHVtbjpudWxsfX0sY29tcHV0ZWQ6e2ZpbHRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2x1bW4mJnRoaXMuY29sdW1uLmZpbHRlcnN9LGZpbHRlclZhbHVlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5jb2x1bW4uZmlsdGVyZWRWYWx1ZXx8W10pWzBdfSxzZXQ6ZnVuY3Rpb24odmFsdWUpe3RoaXMuZmlsdGVyZWRWYWx1ZSYmKG51bGwhPXZhbHVlP3RoaXMuZmlsdGVyZWRWYWx1ZS5zcGxpY2UoMCwxLHZhbHVlKTp0aGlzLmZpbHRlcmVkVmFsdWUuc3BsaWNlKDAsMSkpfX0sZmlsdGVyZWRWYWx1ZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29sdW1uJiZ0aGlzLmNvbHVtbi5maWx0ZXJlZFZhbHVlfHxbXX0sc2V0OmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmNvbHVtbiYmKHRoaXMuY29sdW1uLmZpbHRlcmVkVmFsdWU9dmFsdWUpfX0sbXVsdGlwbGU6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5jb2x1bW58fHRoaXMuY29sdW1uLmZpbHRlck11bHRpcGxlfX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpczt0aGlzLnBvcHBlckVsbT10aGlzLiRlbCx0aGlzLnJlZmVyZW5jZUVsbT10aGlzLmNlbGwsdGhpcy50YWJsZS5ib2R5V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLGZ1bmN0aW9uKCl7X3RoaXMyLnVwZGF0ZVBvcHBlcigpfSksdGhpcy4kd2F0Y2goInNob3dQb3BwZXIiLGZ1bmN0aW9uKHZhbHVlKXtfdGhpczIuY29sdW1uJiYoX3RoaXMyLmNvbHVtbi5maWx0ZXJPcGVuZWQ9dmFsdWUpLHZhbHVlP3NyY19kcm9wZG93bl9vcGVuKF90aGlzMik6c3JjX2Ryb3Bkb3duX2Nsb3NlKF90aGlzMil9KX0sd2F0Y2g6e3Nob3dQb3BwZXI6ZnVuY3Rpb24odmFsKXshMD09PXZhbCYmcGFyc2VJbnQodGhpcy5wb3BwZXJKUy5fcG9wcGVyLnN0eWxlLnpJbmRleCwxMCk8cG9wdXBfLlBvcHVwTWFuYWdlci56SW5kZXgmJih0aGlzLnBvcHBlckpTLl9wb3BwZXIuc3R5bGUuekluZGV4PXBvcHVwXy5Qb3B1cE1hbmFnZXIubmV4dFpJbmRleCgpKX19fSxmaWx0ZXJfcGFuZWx2dWVfdHlwZV90ZW1wbGF0ZV9pZF83ZjJjOTE5Zl9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2ZpbHRlcl9wYW5lbF9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3RhYmxlL3NyYy9maWx0ZXItcGFuZWwudnVlIjt2YXIgZmlsdGVyX3BhbmVsPWZpbHRlcl9wYW5lbF9jb21wb25lbnQuZXhwb3J0cyxjb252ZXJ0VG9Sb3dzPWZ1bmN0aW9uKG9yaWdpbkNvbHVtbnMpe3ZhciBtYXhMZXZlbD0xO29yaWdpbkNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihjb2x1bW4pe2NvbHVtbi5sZXZlbD0xLGZ1bmN0aW9uIHRyYXZlcnNlKGNvbHVtbixwYXJlbnQpe2lmKHBhcmVudCYmKGNvbHVtbi5sZXZlbD1wYXJlbnQubGV2ZWwrMSxtYXhMZXZlbDxjb2x1bW4ubGV2ZWwmJihtYXhMZXZlbD1jb2x1bW4ubGV2ZWwpKSxjb2x1bW4uY2hpbGRyZW4pe3ZhciBjb2xTcGFuPTA7Y29sdW1uLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oc3ViQ29sdW1uKXt0cmF2ZXJzZShzdWJDb2x1bW4sY29sdW1uKSxjb2xTcGFuKz1zdWJDb2x1bW4uY29sU3Bhbn0pLGNvbHVtbi5jb2xTcGFuPWNvbFNwYW59ZWxzZSBjb2x1bW4uY29sU3Bhbj0xfShjb2x1bW4pfSk7Zm9yKHZhciByb3dzPVtdLGk9MDtpPG1heExldmVsO2krKylyb3dzLnB1c2goW10pO3JldHVybiBmdW5jdGlvbiBnZXRBbGxDb2x1bW5zKGNvbHVtbnMpe3ZhciByZXN1bHQ9W107cmV0dXJuIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihjb2x1bW4pe2NvbHVtbi5jaGlsZHJlbj8ocmVzdWx0LnB1c2goY29sdW1uKSxyZXN1bHQucHVzaC5hcHBseShyZXN1bHQsZ2V0QWxsQ29sdW1ucyhjb2x1bW4uY2hpbGRyZW4pKSk6cmVzdWx0LnB1c2goY29sdW1uKX0pLHJlc3VsdH0ob3JpZ2luQ29sdW1ucykuZm9yRWFjaChmdW5jdGlvbihjb2x1bW4pe2NvbHVtbi5jaGlsZHJlbj9jb2x1bW4ucm93U3Bhbj0xOmNvbHVtbi5yb3dTcGFuPW1heExldmVsLWNvbHVtbi5sZXZlbCsxLHJvd3NbY29sdW1uLmxldmVsLTFdLnB1c2goY29sdW1uKX0pLHJvd3N9LHRhYmxlX2hlYWRlcj17bmFtZToiRWxUYWJsZUhlYWRlciIsbWl4aW5zOltsYXlvdXRfb2JzZXJ2ZXJdLHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgX3RoaXM9dGhpcyxvcmlnaW5Db2x1bW5zPXRoaXMuc3RvcmUuc3RhdGVzLm9yaWdpbkNvbHVtbnMsY29sdW1uUm93cz1jb252ZXJ0VG9Sb3dzKG9yaWdpbkNvbHVtbnMsdGhpcy5jb2x1bW5zKSxpc0dyb3VwPTE8Y29sdW1uUm93cy5sZW5ndGg7cmV0dXJuIGlzR3JvdXAmJih0aGlzLiRwYXJlbnQuaXNHcm91cD0hMCksaCgidGFibGUiLHtjbGFzczoiZWwtdGFibGVfX2hlYWRlciIsYXR0cnM6e2NlbGxzcGFjaW5nOiIwIixjZWxscGFkZGluZzoiMCIsYm9yZGVyOiIwIn19LFtoKCJjb2xncm91cCIsW3RoaXMuX2wodGhpcy5jb2x1bW5zLGZ1bmN0aW9uKGNvbHVtbil7cmV0dXJuIGgoImNvbCIse2F0dHJzOntuYW1lOmNvbHVtbi5pZH19KX0pLHRoaXMuaGFzR3V0dGVyP2goImNvbCIse2F0dHJzOntuYW1lOiJndXR0ZXIifX0pOiIiXSksaCgidGhlYWQiLHtjbGFzczpbeyJpcy1ncm91cCI6aXNHcm91cCwiaGFzLWd1dHRlciI6dGhpcy5oYXNHdXR0ZXJ9XX0sW3RoaXMuX2woY29sdW1uUm93cyxmdW5jdGlvbihjb2x1bW5zLHJvd0luZGV4KXtyZXR1cm4gaCgidHIiLHtzdHlsZTpfdGhpcy5nZXRIZWFkZXJSb3dTdHlsZShyb3dJbmRleCksY2xhc3M6X3RoaXMuZ2V0SGVhZGVyUm93Q2xhc3Mocm93SW5kZXgpfSxbX3RoaXMuX2woY29sdW1ucyxmdW5jdGlvbihjb2x1bW4sY2VsbEluZGV4KXtyZXR1cm4gaCgidGgiLHthdHRyczp7Y29sc3Bhbjpjb2x1bW4uY29sU3Bhbixyb3dzcGFuOmNvbHVtbi5yb3dTcGFufSxvbjp7bW91c2Vtb3ZlOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF90aGlzLmhhbmRsZU1vdXNlTW92ZSgkZXZlbnQsY29sdW1uKX0sbW91c2VvdXQ6X3RoaXMuaGFuZGxlTW91c2VPdXQsbW91c2Vkb3duOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF90aGlzLmhhbmRsZU1vdXNlRG93bigkZXZlbnQsY29sdW1uKX0sY2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3RoaXMuaGFuZGxlSGVhZGVyQ2xpY2soJGV2ZW50LGNvbHVtbil9LGNvbnRleHRtZW51OmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF90aGlzLmhhbmRsZUhlYWRlckNvbnRleHRNZW51KCRldmVudCxjb2x1bW4pfX0sc3R5bGU6X3RoaXMuZ2V0SGVhZGVyQ2VsbFN0eWxlKHJvd0luZGV4LGNlbGxJbmRleCxjb2x1bW5zLGNvbHVtbiksY2xhc3M6X3RoaXMuZ2V0SGVhZGVyQ2VsbENsYXNzKHJvd0luZGV4LGNlbGxJbmRleCxjb2x1bW5zLGNvbHVtbiksa2V5OmNvbHVtbi5pZH0sW2goImRpdiIse2NsYXNzOlsiY2VsbCIsY29sdW1uLmZpbHRlcmVkVmFsdWUmJjA8Y29sdW1uLmZpbHRlcmVkVmFsdWUubGVuZ3RoPyJoaWdobGlnaHQiOiIiLGNvbHVtbi5sYWJlbENsYXNzTmFtZV19LFtjb2x1bW4ucmVuZGVySGVhZGVyP2NvbHVtbi5yZW5kZXJIZWFkZXIuY2FsbChfdGhpcy5fcmVuZGVyUHJveHksaCx7Y29sdW1uOmNvbHVtbiwkaW5kZXg6Y2VsbEluZGV4LHN0b3JlOl90aGlzLnN0b3JlLF9zZWxmOl90aGlzLiRwYXJlbnQuJHZub2RlLmNvbnRleHR9KTpjb2x1bW4ubGFiZWwsY29sdW1uLnNvcnRhYmxlP2goInNwYW4iLHtjbGFzczoiY2FyZXQtd3JhcHBlciIsb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF90aGlzLmhhbmRsZVNvcnRDbGljaygkZXZlbnQsY29sdW1uKX19fSxbaCgiaSIse2NsYXNzOiJzb3J0LWNhcmV0IGFzY2VuZGluZyIsb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF90aGlzLmhhbmRsZVNvcnRDbGljaygkZXZlbnQsY29sdW1uLCJhc2NlbmRpbmciKX19fSksaCgiaSIse2NsYXNzOiJzb3J0LWNhcmV0IGRlc2NlbmRpbmciLG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe3JldHVybiBfdGhpcy5oYW5kbGVTb3J0Q2xpY2soJGV2ZW50LGNvbHVtbiwiZGVzY2VuZGluZyIpfX19KV0pOiIiLGNvbHVtbi5maWx0ZXJhYmxlP2goInNwYW4iLHtjbGFzczoiZWwtdGFibGVfX2NvbHVtbi1maWx0ZXItdHJpZ2dlciIsb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF90aGlzLmhhbmRsZUZpbHRlckNsaWNrKCRldmVudCxjb2x1bW4pfX19LFtoKCJpIix7Y2xhc3M6WyJlbC1pY29uLWFycm93LWRvd24iLGNvbHVtbi5maWx0ZXJPcGVuZWQ/ImVsLWljb24tYXJyb3ctdXAiOiIiXX0pXSk6IiJdKV0pfSksX3RoaXMuaGFzR3V0dGVyP2goInRoIix7Y2xhc3M6Imd1dHRlciJ9KToiIl0pfSldKV0pfSxwcm9wczp7Zml4ZWQ6U3RyaW5nLHN0b3JlOntyZXF1aXJlZDohMH0sYm9yZGVyOkJvb2xlYW4sZGVmYXVsdFNvcnQ6e3R5cGU6T2JqZWN0LGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm57cHJvcDoiIixvcmRlcjoiIn19fX0sY29tcG9uZW50czp7RWxDaGVja2JveDpjaGVja2JveF9kZWZhdWx0LmEsRWxUYWc6dGFnX2RlZmF1bHQuYX0sY29tcHV0ZWQ6e3RhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHBhcmVudH0saXNBbGxTZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5pc0FsbFNlbGVjdGVkfSxjb2x1bW5zQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZS5zdGF0ZXMuY29sdW1ucy5sZW5ndGh9LGxlZnRGaXhlZENvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLmZpeGVkQ29sdW1ucy5sZW5ndGh9LHJpZ2h0Rml4ZWRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5yaWdodEZpeGVkQ29sdW1ucy5sZW5ndGh9LGxlZnRGaXhlZExlYWZDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5maXhlZExlYWZDb2x1bW5zTGVuZ3RofSxyaWdodEZpeGVkTGVhZkNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLnJpZ2h0Rml4ZWRMZWFmQ29sdW1uc0xlbmd0aH0sY29sdW1uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5jb2x1bW5zfSxoYXNHdXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5maXhlZCYmdGhpcy50YWJsZUxheW91dC5ndXR0ZXJXaWR0aH19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmZpbHRlclBhbmVscz17fX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBfZGVmYXVsdFNvcnQ9dGhpcy5kZWZhdWx0U29ydCxwcm9wPV9kZWZhdWx0U29ydC5wcm9wLG9yZGVyPV9kZWZhdWx0U29ydC5vcmRlcjt0aGlzLnN0b3JlLmNvbW1pdCgic29ydCIse3Byb3A6cHJvcCxvcmRlcjpvcmRlcn0pfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHBhbmVscz10aGlzLmZpbHRlclBhbmVscztmb3IodmFyIHByb3AgaW4gcGFuZWxzKXBhbmVscy5oYXNPd25Qcm9wZXJ0eShwcm9wKSYmcGFuZWxzW3Byb3BdJiZwYW5lbHNbcHJvcF0uJGRlc3Ryb3koITApfSxtZXRob2RzOntpc0NlbGxIaWRkZW46ZnVuY3Rpb24oaW5kZXgsY29sdW1ucyl7Zm9yKHZhciBzdGFydD0wLGk9MDtpPGluZGV4O2krKylzdGFydCs9Y29sdW1uc1tpXS5jb2xTcGFuO3ZhciBhZnRlcj1zdGFydCtjb2x1bW5zW2luZGV4XS5jb2xTcGFuLTE7cmV0dXJuITA9PT10aGlzLmZpeGVkfHwibGVmdCI9PT10aGlzLmZpeGVkP2FmdGVyPj10aGlzLmxlZnRGaXhlZExlYWZDb3VudDoicmlnaHQiPT09dGhpcy5maXhlZD9zdGFydDx0aGlzLmNvbHVtbnNDb3VudC10aGlzLnJpZ2h0Rml4ZWRMZWFmQ291bnQ6YWZ0ZXI8dGhpcy5sZWZ0Rml4ZWRMZWFmQ291bnR8fHN0YXJ0Pj10aGlzLmNvbHVtbnNDb3VudC10aGlzLnJpZ2h0Rml4ZWRMZWFmQ291bnR9LGdldEhlYWRlclJvd1N0eWxlOmZ1bmN0aW9uKHJvd0luZGV4KXt2YXIgaGVhZGVyUm93U3R5bGU9dGhpcy50YWJsZS5oZWFkZXJSb3dTdHlsZTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgaGVhZGVyUm93U3R5bGU/aGVhZGVyUm93U3R5bGUuY2FsbChudWxsLHtyb3dJbmRleDpyb3dJbmRleH0pOmhlYWRlclJvd1N0eWxlfSxnZXRIZWFkZXJSb3dDbGFzczpmdW5jdGlvbihyb3dJbmRleCl7dmFyIGNsYXNzZXM9W10saGVhZGVyUm93Q2xhc3NOYW1lPXRoaXMudGFibGUuaGVhZGVyUm93Q2xhc3NOYW1lO3JldHVybiJzdHJpbmciPT10eXBlb2YgaGVhZGVyUm93Q2xhc3NOYW1lP2NsYXNzZXMucHVzaChoZWFkZXJSb3dDbGFzc05hbWUpOiJmdW5jdGlvbiI9PXR5cGVvZiBoZWFkZXJSb3dDbGFzc05hbWUmJmNsYXNzZXMucHVzaChoZWFkZXJSb3dDbGFzc05hbWUuY2FsbChudWxsLHtyb3dJbmRleDpyb3dJbmRleH0pKSxjbGFzc2VzLmpvaW4oIiAiKX0sZ2V0SGVhZGVyQ2VsbFN0eWxlOmZ1bmN0aW9uKHJvd0luZGV4LGNvbHVtbkluZGV4LHJvdyxjb2x1bW4pe3ZhciBoZWFkZXJDZWxsU3R5bGU9dGhpcy50YWJsZS5oZWFkZXJDZWxsU3R5bGU7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGhlYWRlckNlbGxTdHlsZT9oZWFkZXJDZWxsU3R5bGUuY2FsbChudWxsLHtyb3dJbmRleDpyb3dJbmRleCxjb2x1bW5JbmRleDpjb2x1bW5JbmRleCxyb3c6cm93LGNvbHVtbjpjb2x1bW59KTpoZWFkZXJDZWxsU3R5bGV9LGdldEhlYWRlckNlbGxDbGFzczpmdW5jdGlvbihyb3dJbmRleCxjb2x1bW5JbmRleCxyb3csY29sdW1uKXt2YXIgY2xhc3Nlcz1bY29sdW1uLmlkLGNvbHVtbi5vcmRlcixjb2x1bW4uaGVhZGVyQWxpZ24sY29sdW1uLmNsYXNzTmFtZSxjb2x1bW4ubGFiZWxDbGFzc05hbWVdOzA9PT1yb3dJbmRleCYmdGhpcy5pc0NlbGxIaWRkZW4oY29sdW1uSW5kZXgscm93KSYmY2xhc3Nlcy5wdXNoKCJpcy1oaWRkZW4iKSxjb2x1bW4uY2hpbGRyZW58fGNsYXNzZXMucHVzaCgiaXMtbGVhZiIpLGNvbHVtbi5zb3J0YWJsZSYmY2xhc3Nlcy5wdXNoKCJpcy1zb3J0YWJsZSIpO3ZhciBoZWFkZXJDZWxsQ2xhc3NOYW1lPXRoaXMudGFibGUuaGVhZGVyQ2VsbENsYXNzTmFtZTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGhlYWRlckNlbGxDbGFzc05hbWU/Y2xhc3Nlcy5wdXNoKGhlYWRlckNlbGxDbGFzc05hbWUpOiJmdW5jdGlvbiI9PXR5cGVvZiBoZWFkZXJDZWxsQ2xhc3NOYW1lJiZjbGFzc2VzLnB1c2goaGVhZGVyQ2VsbENsYXNzTmFtZS5jYWxsKG51bGwse3Jvd0luZGV4OnJvd0luZGV4LGNvbHVtbkluZGV4OmNvbHVtbkluZGV4LHJvdzpyb3csY29sdW1uOmNvbHVtbn0pKSxjbGFzc2VzLmpvaW4oIiAiKX0sdG9nZ2xlQWxsU2VsZWN0aW9uOmZ1bmN0aW9uKGV2ZW50KXtldmVudC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLnN0b3JlLmNvbW1pdCgidG9nZ2xlQWxsU2VsZWN0aW9uIil9LGhhbmRsZUZpbHRlckNsaWNrOmZ1bmN0aW9uKGV2ZW50LGNvbHVtbil7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIHRhcmdldD1ldmVudC50YXJnZXQsY2VsbD0iVEgiPT09dGFyZ2V0LnRhZ05hbWU/dGFyZ2V0OnRhcmdldC5wYXJlbnROb2RlO2NlbGw9Y2VsbC5xdWVyeVNlbGVjdG9yKCIuZWwtdGFibGVfX2NvbHVtbi1maWx0ZXItdHJpZ2dlciIpfHxjZWxsO3ZhciB0YWJsZT10aGlzLiRwYXJlbnQsZmlsdGVyUGFuZWw9dGhpcy5maWx0ZXJQYW5lbHNbY29sdW1uLmlkXTtmaWx0ZXJQYW5lbCYmY29sdW1uLmZpbHRlck9wZW5lZD9maWx0ZXJQYW5lbC5zaG93UG9wcGVyPSExOihmaWx0ZXJQYW5lbHx8KGZpbHRlclBhbmVsPW5ldyBleHRlcm5hbF92dWVfZGVmYXVsdC5hKGZpbHRlcl9wYW5lbCksdGhpcy5maWx0ZXJQYW5lbHNbY29sdW1uLmlkXT1maWx0ZXJQYW5lbCxjb2x1bW4uZmlsdGVyUGxhY2VtZW50JiYoZmlsdGVyUGFuZWwucGxhY2VtZW50PWNvbHVtbi5maWx0ZXJQbGFjZW1lbnQpLGZpbHRlclBhbmVsLnRhYmxlPXRhYmxlLGZpbHRlclBhbmVsLmNlbGw9Y2VsbCxmaWx0ZXJQYW5lbC5jb2x1bW49Y29sdW1uLCF0aGlzLiRpc1NlcnZlciYmZmlsdGVyUGFuZWwuJG1vdW50KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSksc2V0VGltZW91dChmdW5jdGlvbigpe2ZpbHRlclBhbmVsLnNob3dQb3BwZXI9ITB9LDE2KSl9LGhhbmRsZUhlYWRlckNsaWNrOmZ1bmN0aW9uKGV2ZW50LGNvbHVtbil7IWNvbHVtbi5maWx0ZXJzJiZjb2x1bW4uc29ydGFibGU/dGhpcy5oYW5kbGVTb3J0Q2xpY2soZXZlbnQsY29sdW1uKTpjb2x1bW4uZmlsdGVyYWJsZSYmIWNvbHVtbi5zb3J0YWJsZSYmdGhpcy5oYW5kbGVGaWx0ZXJDbGljayhldmVudCxjb2x1bW4pLHRoaXMuJHBhcmVudC4kZW1pdCgiaGVhZGVyLWNsaWNrIixjb2x1bW4sZXZlbnQpfSxoYW5kbGVIZWFkZXJDb250ZXh0TWVudTpmdW5jdGlvbihldmVudCxjb2x1bW4pe3RoaXMuJHBhcmVudC4kZW1pdCgiaGVhZGVyLWNvbnRleHRtZW51Iixjb2x1bW4sZXZlbnQpfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oZXZlbnQsY29sdW1uKXt2YXIgX3RoaXMyPXRoaXM7aWYoIXRoaXMuJGlzU2VydmVyJiYhKGNvbHVtbi5jaGlsZHJlbiYmMDxjb2x1bW4uY2hpbGRyZW4ubGVuZ3RoKSYmdGhpcy5kcmFnZ2luZ0NvbHVtbiYmdGhpcy5ib3JkZXIpe3RoaXMuZHJhZ2dpbmc9ITAsdGhpcy4kcGFyZW50LnJlc2l6ZVByb3h5VmlzaWJsZT0hMDt2YXIgdGFibGU9dGhpcy4kcGFyZW50LHRhYmxlTGVmdD10YWJsZS4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCxjb2x1bW5FbD10aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCJ0aC4iK2NvbHVtbi5pZCksY29sdW1uUmVjdD1jb2x1bW5FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxtaW5MZWZ0PWNvbHVtblJlY3QubGVmdC10YWJsZUxlZnQrMzA7T2JqZWN0KGRvbV8uYWRkQ2xhc3MpKGNvbHVtbkVsLCJub2NsaWNrIiksdGhpcy5kcmFnU3RhdGU9e3N0YXJ0TW91c2VMZWZ0OmV2ZW50LmNsaWVudFgsc3RhcnRMZWZ0OmNvbHVtblJlY3QucmlnaHQtdGFibGVMZWZ0LHN0YXJ0Q29sdW1uTGVmdDpjb2x1bW5SZWN0LmxlZnQtdGFibGVMZWZ0LHRhYmxlTGVmdDp0YWJsZUxlZnR9O3ZhciByZXNpemVQcm94eT10YWJsZS4kcmVmcy5yZXNpemVQcm94eTtyZXNpemVQcm94eS5zdHlsZS5sZWZ0PXRoaXMuZHJhZ1N0YXRlLnN0YXJ0TGVmdCsicHgiLGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZG9jdW1lbnQub25kcmFnc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX07dmFyIGhhbmRsZU1vdXNlTW92ZT1mdW5jdGlvbihldmVudCl7dmFyIGRlbHRhTGVmdD1ldmVudC5jbGllbnRYLV90aGlzMi5kcmFnU3RhdGUuc3RhcnRNb3VzZUxlZnQscHJveHlMZWZ0PV90aGlzMi5kcmFnU3RhdGUuc3RhcnRMZWZ0K2RlbHRhTGVmdDtyZXNpemVQcm94eS5zdHlsZS5sZWZ0PU1hdGgubWF4KG1pbkxlZnQscHJveHlMZWZ0KSsicHgifTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLGhhbmRsZU1vdXNlTW92ZSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsZnVuY3Rpb24gaGFuZGxlTW91c2VVcCgpe2lmKF90aGlzMi5kcmFnZ2luZyl7dmFyIF9kcmFnU3RhdGU9X3RoaXMyLmRyYWdTdGF0ZSxzdGFydENvbHVtbkxlZnQ9X2RyYWdTdGF0ZS5zdGFydENvbHVtbkxlZnQsc3RhcnRMZWZ0PV9kcmFnU3RhdGUuc3RhcnRMZWZ0LGNvbHVtbldpZHRoPXBhcnNlSW50KHJlc2l6ZVByb3h5LnN0eWxlLmxlZnQsMTApLXN0YXJ0Q29sdW1uTGVmdDtjb2x1bW4ud2lkdGg9Y29sdW1uLnJlYWxXaWR0aD1jb2x1bW5XaWR0aCx0YWJsZS4kZW1pdCgiaGVhZGVyLWRyYWdlbmQiLGNvbHVtbi53aWR0aCxzdGFydExlZnQtc3RhcnRDb2x1bW5MZWZ0LGNvbHVtbixldmVudCksX3RoaXMyLnN0b3JlLnNjaGVkdWxlTGF5b3V0KCksZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3I9IiIsX3RoaXMyLmRyYWdnaW5nPSExLF90aGlzMi5kcmFnZ2luZ0NvbHVtbj1udWxsLF90aGlzMi5kcmFnU3RhdGU9e30sdGFibGUucmVzaXplUHJveHlWaXNpYmxlPSExfWRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsaGFuZGxlTW91c2VNb3ZlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIixoYW5kbGVNb3VzZVVwKSxkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PW51bGwsZG9jdW1lbnQub25kcmFnc3RhcnQ9bnVsbCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7T2JqZWN0KGRvbV8ucmVtb3ZlQ2xhc3MpKGNvbHVtbkVsLCJub2NsaWNrIil9LDApfSl9fSxoYW5kbGVNb3VzZU1vdmU6ZnVuY3Rpb24oZXZlbnQsY29sdW1uKXtpZighKGNvbHVtbi5jaGlsZHJlbiYmMDxjb2x1bW4uY2hpbGRyZW4ubGVuZ3RoKSl7Zm9yKHZhciB0YXJnZXQ9ZXZlbnQudGFyZ2V0O3RhcmdldCYmIlRIIiE9PXRhcmdldC50YWdOYW1lOyl0YXJnZXQ9dGFyZ2V0LnBhcmVudE5vZGU7aWYoY29sdW1uJiZjb2x1bW4ucmVzaXphYmxlJiYhdGhpcy5kcmFnZ2luZyYmdGhpcy5ib3JkZXIpe3ZhciByZWN0PXRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxib2R5U3R5bGU9ZG9jdW1lbnQuYm9keS5zdHlsZTsxMjxyZWN0LndpZHRoJiZyZWN0LnJpZ2h0LWV2ZW50LnBhZ2VYPDg/KGJvZHlTdHlsZS5jdXJzb3I9ImNvbC1yZXNpemUiLE9iamVjdChkb21fLmhhc0NsYXNzKSh0YXJnZXQsImlzLXNvcnRhYmxlIikmJih0YXJnZXQuc3R5bGUuY3Vyc29yPSJjb2wtcmVzaXplIiksdGhpcy5kcmFnZ2luZ0NvbHVtbj1jb2x1bW4pOnRoaXMuZHJhZ2dpbmd8fChib2R5U3R5bGUuY3Vyc29yPSIiLE9iamVjdChkb21fLmhhc0NsYXNzKSh0YXJnZXQsImlzLXNvcnRhYmxlIikmJih0YXJnZXQuc3R5bGUuY3Vyc29yPSJwb2ludGVyIiksdGhpcy5kcmFnZ2luZ0NvbHVtbj1udWxsKX19fSxoYW5kbGVNb3VzZU91dDpmdW5jdGlvbigpe3RoaXMuJGlzU2VydmVyfHwoZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3I9IiIpfSx0b2dnbGVPcmRlcjpmdW5jdGlvbihfcmVmKXt2YXIgb3JkZXI9X3JlZi5vcmRlcixzb3J0T3JkZXJzPV9yZWYuc29ydE9yZGVycztpZigiIj09PW9yZGVyKXJldHVybiBzb3J0T3JkZXJzWzBdO3ZhciBpbmRleD1zb3J0T3JkZXJzLmluZGV4T2Yob3JkZXJ8fG51bGwpO3JldHVybiBzb3J0T3JkZXJzW2luZGV4PnNvcnRPcmRlcnMubGVuZ3RoLTI/MDppbmRleCsxXX0saGFuZGxlU29ydENsaWNrOmZ1bmN0aW9uKGV2ZW50LGNvbHVtbixnaXZlbk9yZGVyKXtldmVudC5zdG9wUHJvcGFnYXRpb24oKTtmb3IodmFyIG9yZGVyPWNvbHVtbi5vcmRlcj09PWdpdmVuT3JkZXI/bnVsbDpnaXZlbk9yZGVyfHx0aGlzLnRvZ2dsZU9yZGVyKGNvbHVtbiksdGFyZ2V0PWV2ZW50LnRhcmdldDt0YXJnZXQmJiJUSCIhPT10YXJnZXQudGFnTmFtZTspdGFyZ2V0PXRhcmdldC5wYXJlbnROb2RlO2lmKHRhcmdldCYmIlRIIj09PXRhcmdldC50YWdOYW1lJiZPYmplY3QoZG9tXy5oYXNDbGFzcykodGFyZ2V0LCJub2NsaWNrIikpT2JqZWN0KGRvbV8ucmVtb3ZlQ2xhc3MpKHRhcmdldCwibm9jbGljayIpO2Vsc2UgaWYoY29sdW1uLnNvcnRhYmxlKXt2YXIgc3RhdGVzPXRoaXMuc3RvcmUuc3RhdGVzLHNvcnRQcm9wPXN0YXRlcy5zb3J0UHJvcCxzb3J0T3JkZXI9dm9pZCAwLHNvcnRpbmdDb2x1bW49c3RhdGVzLnNvcnRpbmdDb2x1bW47KHNvcnRpbmdDb2x1bW4hPT1jb2x1bW58fHNvcnRpbmdDb2x1bW49PT1jb2x1bW4mJm51bGw9PT1zb3J0aW5nQ29sdW1uLm9yZGVyKSYmKHNvcnRpbmdDb2x1bW4mJihzb3J0aW5nQ29sdW1uLm9yZGVyPW51bGwpLHNvcnRQcm9wPShzdGF0ZXMuc29ydGluZ0NvbHVtbj1jb2x1bW4pLnByb3BlcnR5KSxvcmRlcj9zb3J0T3JkZXI9Y29sdW1uLm9yZGVyPW9yZGVyOihzb3J0T3JkZXI9Y29sdW1uLm9yZGVyPW51bGwsc29ydFByb3A9c3RhdGVzLnNvcnRpbmdDb2x1bW49bnVsbCksc3RhdGVzLnNvcnRQcm9wPXNvcnRQcm9wLHN0YXRlcy5zb3J0T3JkZXI9c29ydE9yZGVyLHRoaXMuc3RvcmUuY29tbWl0KCJjaGFuZ2VTb3J0Q29uZGl0aW9uIil9fX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntkcmFnZ2luZ0NvbHVtbjpudWxsLGRyYWdnaW5nOiExLGRyYWdTdGF0ZTp7fX19fSx0YWJsZV9mb290ZXI9e25hbWU6IkVsVGFibGVGb290ZXIiLG1peGluczpbbGF5b3V0X29ic2VydmVyXSxyZW5kZXI6ZnVuY3Rpb24oaCl7dmFyIF90aGlzPXRoaXMsc3Vtcz1bXTtyZXR1cm4gdGhpcy5zdW1tYXJ5TWV0aG9kP3N1bXM9dGhpcy5zdW1tYXJ5TWV0aG9kKHtjb2x1bW5zOnRoaXMuY29sdW1ucyxkYXRhOnRoaXMuc3RvcmUuc3RhdGVzLmRhdGF9KTp0aGlzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihjb2x1bW4saW5kZXgpe2lmKDAhPT1pbmRleCl7dmFyIHZhbHVlcz1fdGhpcy5zdG9yZS5zdGF0ZXMuZGF0YS5tYXAoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIE51bWJlcihpdGVtW2NvbHVtbi5wcm9wZXJ0eV0pfSkscHJlY2lzaW9ucz1bXSxub3ROdW1iZXI9ITA7dmFsdWVzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpe2lmKCFpc05hTih2YWx1ZSkpe25vdE51bWJlcj0hMTt2YXIgZGVjaW1hbD0oIiIrdmFsdWUpLnNwbGl0KCIuIilbMV07cHJlY2lzaW9ucy5wdXNoKGRlY2ltYWw/ZGVjaW1hbC5sZW5ndGg6MCl9fSk7dmFyIHByZWNpc2lvbj1NYXRoLm1heC5hcHBseShudWxsLHByZWNpc2lvbnMpO3N1bXNbaW5kZXhdPW5vdE51bWJlcj8iIjp2YWx1ZXMucmVkdWNlKGZ1bmN0aW9uKHByZXYsY3Vycil7dmFyIHZhbHVlPU51bWJlcihjdXJyKTtyZXR1cm4gaXNOYU4odmFsdWUpP3ByZXY6cGFyc2VGbG9hdCgocHJlditjdXJyKS50b0ZpeGVkKE1hdGgubWluKHByZWNpc2lvbiwyMCkpKX0sMCl9ZWxzZSBzdW1zW2luZGV4XT1fdGhpcy5zdW1UZXh0fSksaCgidGFibGUiLHtjbGFzczoiZWwtdGFibGVfX2Zvb3RlciIsYXR0cnM6e2NlbGxzcGFjaW5nOiIwIixjZWxscGFkZGluZzoiMCIsYm9yZGVyOiIwIn19LFtoKCJjb2xncm91cCIsW3RoaXMuX2wodGhpcy5jb2x1bW5zLGZ1bmN0aW9uKGNvbHVtbil7cmV0dXJuIGgoImNvbCIse2F0dHJzOntuYW1lOmNvbHVtbi5pZH19KX0pLHRoaXMuaGFzR3V0dGVyP2goImNvbCIse2F0dHJzOntuYW1lOiJndXR0ZXIifX0pOiIiXSksaCgidGJvZHkiLHtjbGFzczpbeyJoYXMtZ3V0dGVyIjp0aGlzLmhhc0d1dHRlcn1dfSxbaCgidHIiLFt0aGlzLl9sKHRoaXMuY29sdW1ucyxmdW5jdGlvbihjb2x1bW4sY2VsbEluZGV4KXtyZXR1cm4gaCgidGQiLHthdHRyczp7Y29sc3Bhbjpjb2x1bW4uY29sU3Bhbixyb3dzcGFuOmNvbHVtbi5yb3dTcGFufSxjbGFzczpbY29sdW1uLmlkLGNvbHVtbi5oZWFkZXJBbGlnbixjb2x1bW4uY2xhc3NOYW1lfHwiIixfdGhpcy5pc0NlbGxIaWRkZW4oY2VsbEluZGV4LF90aGlzLmNvbHVtbnMsY29sdW1uKT8iaXMtaGlkZGVuIjoiIixjb2x1bW4uY2hpbGRyZW4/IiI6ImlzLWxlYWYiLGNvbHVtbi5sYWJlbENsYXNzTmFtZV19LFtoKCJkaXYiLHtjbGFzczpbImNlbGwiLGNvbHVtbi5sYWJlbENsYXNzTmFtZV19LFtzdW1zW2NlbGxJbmRleF1dKV0pfSksdGhpcy5oYXNHdXR0ZXI/aCgidGgiLHtjbGFzczoiZ3V0dGVyIn0pOiIiXSldKV0pfSxwcm9wczp7Zml4ZWQ6U3RyaW5nLHN0b3JlOntyZXF1aXJlZDohMH0sc3VtbWFyeU1ldGhvZDpGdW5jdGlvbixzdW1UZXh0OlN0cmluZyxib3JkZXI6Qm9vbGVhbixkZWZhdWx0U29ydDp7dHlwZTpPYmplY3QsZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybntwcm9wOiIiLG9yZGVyOiIifX19fSxjb21wdXRlZDp7dGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcGFyZW50fSxpc0FsbFNlbGVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLmlzQWxsU2VsZWN0ZWR9LGNvbHVtbnNDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5jb2x1bW5zLmxlbmd0aH0sbGVmdEZpeGVkQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZS5zdGF0ZXMuZml4ZWRDb2x1bW5zLmxlbmd0aH0sbGVmdEZpeGVkTGVhZkNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLmZpeGVkTGVhZkNvbHVtbnNMZW5ndGh9LHJpZ2h0Rml4ZWRMZWFmQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZS5zdGF0ZXMucmlnaHRGaXhlZExlYWZDb2x1bW5zTGVuZ3RofSxyaWdodEZpeGVkQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZS5zdGF0ZXMucmlnaHRGaXhlZENvbHVtbnMubGVuZ3RofSxjb2x1bW5zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLmNvbHVtbnN9LGhhc0d1dHRlcjpmdW5jdGlvbigpe3JldHVybiF0aGlzLmZpeGVkJiZ0aGlzLnRhYmxlTGF5b3V0Lmd1dHRlcldpZHRofX0sbWV0aG9kczp7aXNDZWxsSGlkZGVuOmZ1bmN0aW9uKGluZGV4LGNvbHVtbnMsY29sdW1uKXtpZighMD09PXRoaXMuZml4ZWR8fCJsZWZ0Ij09PXRoaXMuZml4ZWQpcmV0dXJuIGluZGV4Pj10aGlzLmxlZnRGaXhlZExlYWZDb3VudDtpZigicmlnaHQiIT09dGhpcy5maXhlZClyZXR1cm4hKHRoaXMuZml4ZWR8fCFjb2x1bW4uZml4ZWQpfHwoaW5kZXg8dGhpcy5sZWZ0Rml4ZWRDb3VudHx8aW5kZXg+PXRoaXMuY29sdW1uc0NvdW50LXRoaXMucmlnaHRGaXhlZENvdW50KTtmb3IodmFyIGJlZm9yZT0wLGk9MDtpPGluZGV4O2krKyliZWZvcmUrPWNvbHVtbnNbaV0uY29sU3BhbjtyZXR1cm4gYmVmb3JlPHRoaXMuY29sdW1uc0NvdW50LXRoaXMucmlnaHRGaXhlZExlYWZDb3VudH19fSx0YWJsZUlkU2VlZD0xLHRhYmxlX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsVGFibGUiLG1peGluczpbbG9jYWxlX2RlZmF1bHQuYSxtaWdyYXRpbmdfZGVmYXVsdC5hXSxkaXJlY3RpdmVzOntNb3VzZXdoZWVsOmRpcmVjdGl2ZXNfbW91c2V3aGVlbH0scHJvcHM6e2RhdGE6e3R5cGU6QXJyYXksZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybltdfX0sc2l6ZTpTdHJpbmcsd2lkdGg6W1N0cmluZyxOdW1iZXJdLGhlaWdodDpbU3RyaW5nLE51bWJlcl0sbWF4SGVpZ2h0OltTdHJpbmcsTnVtYmVyXSxmaXQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxzdHJpcGU6Qm9vbGVhbixib3JkZXI6Qm9vbGVhbixyb3dLZXk6W1N0cmluZyxGdW5jdGlvbl0sY29udGV4dDp7fSxzaG93SGVhZGVyOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sc2hvd1N1bW1hcnk6Qm9vbGVhbixzdW1UZXh0OlN0cmluZyxzdW1tYXJ5TWV0aG9kOkZ1bmN0aW9uLHJvd0NsYXNzTmFtZTpbU3RyaW5nLEZ1bmN0aW9uXSxyb3dTdHlsZTpbT2JqZWN0LEZ1bmN0aW9uXSxjZWxsQ2xhc3NOYW1lOltTdHJpbmcsRnVuY3Rpb25dLGNlbGxTdHlsZTpbT2JqZWN0LEZ1bmN0aW9uXSxoZWFkZXJSb3dDbGFzc05hbWU6W1N0cmluZyxGdW5jdGlvbl0saGVhZGVyUm93U3R5bGU6W09iamVjdCxGdW5jdGlvbl0saGVhZGVyQ2VsbENsYXNzTmFtZTpbU3RyaW5nLEZ1bmN0aW9uXSxoZWFkZXJDZWxsU3R5bGU6W09iamVjdCxGdW5jdGlvbl0saGlnaGxpZ2h0Q3VycmVudFJvdzpCb29sZWFuLGN1cnJlbnRSb3dLZXk6W1N0cmluZyxOdW1iZXJdLGVtcHR5VGV4dDpTdHJpbmcsZXhwYW5kUm93S2V5czpBcnJheSxkZWZhdWx0RXhwYW5kQWxsOkJvb2xlYW4sZGVmYXVsdFNvcnQ6T2JqZWN0LHRvb2x0aXBFZmZlY3Q6U3RyaW5nLHNwYW5NZXRob2Q6RnVuY3Rpb24sc2VsZWN0T25JbmRldGVybWluYXRlOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH19LGNvbXBvbmVudHM6e1RhYmxlSGVhZGVyOnRhYmxlX2hlYWRlcixUYWJsZUZvb3Rlcjp0YWJsZV9mb290ZXIsVGFibGVCb2R5OnRhYmxlX2JvZHksRWxDaGVja2JveDpjaGVja2JveF9kZWZhdWx0LmF9LG1ldGhvZHM6e2dldE1pZ3JhdGluZ0NvbmZpZzpmdW5jdGlvbigpe3JldHVybntldmVudHM6e2V4cGFuZDoiZXhwYW5kIGlzIHJlbmFtZWQgdG8gZXhwYW5kLWNoYW5nZSJ9fX0sc2V0Q3VycmVudFJvdzpmdW5jdGlvbihyb3cpe3RoaXMuc3RvcmUuY29tbWl0KCJzZXRDdXJyZW50Um93Iixyb3cpfSx0b2dnbGVSb3dTZWxlY3Rpb246ZnVuY3Rpb24ocm93LHNlbGVjdGVkKXt0aGlzLnN0b3JlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csc2VsZWN0ZWQpLHRoaXMuc3RvcmUudXBkYXRlQWxsU2VsZWN0ZWQoKX0sdG9nZ2xlUm93RXhwYW5zaW9uOmZ1bmN0aW9uKHJvdyxleHBhbmRlZCl7dGhpcy5zdG9yZS50b2dnbGVSb3dFeHBhbnNpb24ocm93LGV4cGFuZGVkKX0sY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXt0aGlzLnN0b3JlLmNsZWFyU2VsZWN0aW9uKCl9LGNsZWFyRmlsdGVyOmZ1bmN0aW9uKGNvbHVtbktleXMpe3RoaXMuc3RvcmUuY2xlYXJGaWx0ZXIoY29sdW1uS2V5cyl9LGNsZWFyU29ydDpmdW5jdGlvbigpe3RoaXMuc3RvcmUuY2xlYXJTb3J0KCl9LGhhbmRsZU1vdXNlTGVhdmU6ZnVuY3Rpb24oKXt0aGlzLnN0b3JlLmNvbW1pdCgic2V0SG92ZXJSb3ciLG51bGwpLHRoaXMuaG92ZXJTdGF0ZSYmKHRoaXMuaG92ZXJTdGF0ZT1udWxsKX0sdXBkYXRlU2Nyb2xsWTpmdW5jdGlvbigpe3RoaXMubGF5b3V0LnVwZGF0ZVNjcm9sbFkoKSx0aGlzLmxheW91dC51cGRhdGVDb2x1bW5zV2lkdGgoKX0saGFuZGxlRml4ZWRNb3VzZXdoZWVsOmZ1bmN0aW9uKGV2ZW50LGRhdGEpe3ZhciBib2R5V3JhcHBlcj10aGlzLmJvZHlXcmFwcGVyO2lmKDA8TWF0aC5hYnMoZGF0YS5zcGluWSkpe3ZhciBjdXJyZW50U2Nyb2xsVG9wPWJvZHlXcmFwcGVyLnNjcm9sbFRvcDtkYXRhLnBpeGVsWTwwJiYwIT09Y3VycmVudFNjcm9sbFRvcCYmZXZlbnQucHJldmVudERlZmF1bHQoKSwwPGRhdGEucGl4ZWxZJiZib2R5V3JhcHBlci5zY3JvbGxIZWlnaHQtYm9keVdyYXBwZXIuY2xpZW50SGVpZ2h0PmN1cnJlbnRTY3JvbGxUb3AmJmV2ZW50LnByZXZlbnREZWZhdWx0KCksYm9keVdyYXBwZXIuc2Nyb2xsVG9wKz1NYXRoLmNlaWwoZGF0YS5waXhlbFkvNSl9ZWxzZSBib2R5V3JhcHBlci5zY3JvbGxMZWZ0Kz1NYXRoLmNlaWwoZGF0YS5waXhlbFgvNSl9LGhhbmRsZUhlYWRlckZvb3Rlck1vdXNld2hlZWw6ZnVuY3Rpb24oZXZlbnQsZGF0YSl7dmFyIHBpeGVsWD1kYXRhLnBpeGVsWCxwaXhlbFk9ZGF0YS5waXhlbFk7TWF0aC5hYnMocGl4ZWxYKT49TWF0aC5hYnMocGl4ZWxZKSYmKGV2ZW50LnByZXZlbnREZWZhdWx0KCksdGhpcy5ib2R5V3JhcHBlci5zY3JvbGxMZWZ0Kz1kYXRhLnBpeGVsWC81KX0sYmluZEV2ZW50czpmdW5jdGlvbigpe3ZhciBfJHJlZnM9dGhpcy4kcmVmcyxoZWFkZXJXcmFwcGVyPV8kcmVmcy5oZWFkZXJXcmFwcGVyLGZvb3RlcldyYXBwZXI9XyRyZWZzLmZvb3RlcldyYXBwZXIscmVmcz10aGlzLiRyZWZzLHNlbGY9dGhpczt0aGlzLmJvZHlXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsZnVuY3Rpb24oKXtoZWFkZXJXcmFwcGVyJiYoaGVhZGVyV3JhcHBlci5zY3JvbGxMZWZ0PXRoaXMuc2Nyb2xsTGVmdCksZm9vdGVyV3JhcHBlciYmKGZvb3RlcldyYXBwZXIuc2Nyb2xsTGVmdD10aGlzLnNjcm9sbExlZnQpLHJlZnMuZml4ZWRCb2R5V3JhcHBlciYmKHJlZnMuZml4ZWRCb2R5V3JhcHBlci5zY3JvbGxUb3A9dGhpcy5zY3JvbGxUb3ApLHJlZnMucmlnaHRGaXhlZEJvZHlXcmFwcGVyJiYocmVmcy5yaWdodEZpeGVkQm9keVdyYXBwZXIuc2Nyb2xsVG9wPXRoaXMuc2Nyb2xsVG9wKTt2YXIgbWF4U2Nyb2xsTGVmdFBvc2l0aW9uPXRoaXMuc2Nyb2xsV2lkdGgtdGhpcy5vZmZzZXRXaWR0aC0xLHNjcm9sbExlZnQ9dGhpcy5zY3JvbGxMZWZ0O3NlbGYuc2Nyb2xsUG9zaXRpb249bWF4U2Nyb2xsTGVmdFBvc2l0aW9uPD1zY3JvbGxMZWZ0PyJyaWdodCI6MD09PXNjcm9sbExlZnQ/ImxlZnQiOiJtaWRkbGUifSksdGhpcy5maXQmJk9iamVjdChyZXNpemVfZXZlbnRfLmFkZFJlc2l6ZUxpc3RlbmVyKSh0aGlzLiRlbCx0aGlzLnJlc2l6ZUxpc3RlbmVyKX0scmVzaXplTGlzdGVuZXI6ZnVuY3Rpb24oKXtpZih0aGlzLiRyZWFkeSl7dmFyIHNob3VsZFVwZGF0ZUxheW91dD0hMSxlbD10aGlzLiRlbCxfcmVzaXplU3RhdGU9dGhpcy5yZXNpemVTdGF0ZSxvbGRXaWR0aD1fcmVzaXplU3RhdGUud2lkdGgsb2xkSGVpZ2h0PV9yZXNpemVTdGF0ZS5oZWlnaHQsd2lkdGg9ZWwub2Zmc2V0V2lkdGg7b2xkV2lkdGghPT13aWR0aCYmKHNob3VsZFVwZGF0ZUxheW91dD0hMCk7dmFyIGhlaWdodD1lbC5vZmZzZXRIZWlnaHQ7KHRoaXMuaGVpZ2h0fHx0aGlzLnNob3VsZFVwZGF0ZUhlaWdodCkmJm9sZEhlaWdodCE9PWhlaWdodCYmKHNob3VsZFVwZGF0ZUxheW91dD0hMCksc2hvdWxkVXBkYXRlTGF5b3V0JiYodGhpcy5yZXNpemVTdGF0ZS53aWR0aD13aWR0aCx0aGlzLnJlc2l6ZVN0YXRlLmhlaWdodD1oZWlnaHQsdGhpcy5kb0xheW91dCgpKX19LGRvTGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy5sYXlvdXQudXBkYXRlQ29sdW1uc1dpZHRoKCksdGhpcy5zaG91bGRVcGRhdGVIZWlnaHQmJnRoaXMubGF5b3V0LnVwZGF0ZUVsc0hlaWdodCgpfSxzb3J0OmZ1bmN0aW9uKHByb3Asb3JkZXIpe3RoaXMuc3RvcmUuY29tbWl0KCJzb3J0Iix7cHJvcDpwcm9wLG9yZGVyOm9yZGVyfSl9LHRvZ2dsZUFsbFNlbGVjdGlvbjpmdW5jdGlvbigpe3RoaXMuc3RvcmUuY29tbWl0KCJ0b2dnbGVBbGxTZWxlY3Rpb24iKX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLnRhYmxlSWQ9ImVsLXRhYmxlXyIrdGFibGVJZFNlZWQrKyx0aGlzLmRlYm91bmNlZFVwZGF0ZUxheW91dD1kZWJvdW5jZV9kZWZhdWx0KCkoNTAsZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMuZG9MYXlvdXQoKX0pfSxjb21wdXRlZDp7dGFibGVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfSxib2R5V3JhcHBlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRyZWZzLmJvZHlXcmFwcGVyfSxzaG91bGRVcGRhdGVIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWlnaHR8fHRoaXMubWF4SGVpZ2h0fHwwPHRoaXMuZml4ZWRDb2x1bW5zLmxlbmd0aHx8MDx0aGlzLnJpZ2h0Rml4ZWRDb2x1bW5zLmxlbmd0aH0sc2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLnNlbGVjdGlvbn0sY29sdW1uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLnN0YXRlcy5jb2x1bW5zfSx0YWJsZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZS5zdGF0ZXMuZGF0YX0sZml4ZWRDb2x1bW5zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc3RhdGVzLmZpeGVkQ29sdW1uc30scmlnaHRGaXhlZENvbHVtbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZS5zdGF0ZXMucmlnaHRGaXhlZENvbHVtbnN9LGJvZHlXaWR0aDpmdW5jdGlvbigpe3ZhciBfbGF5b3V0PXRoaXMubGF5b3V0LGJvZHlXaWR0aD1fbGF5b3V0LmJvZHlXaWR0aCxzY3JvbGxZPV9sYXlvdXQuc2Nyb2xsWSxndXR0ZXJXaWR0aD1fbGF5b3V0Lmd1dHRlcldpZHRoO3JldHVybiBib2R5V2lkdGg/Ym9keVdpZHRoLShzY3JvbGxZP2d1dHRlcldpZHRoOjApKyJweCI6IiJ9LGJvZHlIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWlnaHQ/e2hlaWdodDp0aGlzLmxheW91dC5ib2R5SGVpZ2h0P3RoaXMubGF5b3V0LmJvZHlIZWlnaHQrInB4IjoiIn06dGhpcy5tYXhIZWlnaHQ/eyJtYXgtaGVpZ2h0IjoodGhpcy5zaG93SGVhZGVyP3RoaXMubWF4SGVpZ2h0LXRoaXMubGF5b3V0LmhlYWRlckhlaWdodC10aGlzLmxheW91dC5mb290ZXJIZWlnaHQ6dGhpcy5tYXhIZWlnaHQtdGhpcy5sYXlvdXQuZm9vdGVySGVpZ2h0KSsicHgifTp7fX0sZml4ZWRCb2R5SGVpZ2h0OmZ1bmN0aW9uKCl7aWYodGhpcy5oZWlnaHQpcmV0dXJue2hlaWdodDp0aGlzLmxheW91dC5maXhlZEJvZHlIZWlnaHQ/dGhpcy5sYXlvdXQuZml4ZWRCb2R5SGVpZ2h0KyJweCI6IiJ9O2lmKHRoaXMubWF4SGVpZ2h0KXt2YXIgbWF4SGVpZ2h0PXRoaXMubGF5b3V0LnNjcm9sbFg/dGhpcy5tYXhIZWlnaHQtdGhpcy5sYXlvdXQuZ3V0dGVyV2lkdGg6dGhpcy5tYXhIZWlnaHQ7cmV0dXJuIHRoaXMuc2hvd0hlYWRlciYmKG1heEhlaWdodC09dGhpcy5sYXlvdXQuaGVhZGVySGVpZ2h0KSx7Im1heC1oZWlnaHQiOihtYXhIZWlnaHQtPXRoaXMubGF5b3V0LmZvb3RlckhlaWdodCkrInB4In19cmV0dXJue319LGZpeGVkSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4SGVpZ2h0P3RoaXMuc2hvd1N1bW1hcnk/e2JvdHRvbTowfTp7Ym90dG9tOnRoaXMubGF5b3V0LnNjcm9sbFgmJnRoaXMuZGF0YS5sZW5ndGg/dGhpcy5sYXlvdXQuZ3V0dGVyV2lkdGgrInB4IjoiIn06dGhpcy5zaG93U3VtbWFyeT97aGVpZ2h0OnRoaXMubGF5b3V0LnRhYmxlSGVpZ2h0P3RoaXMubGF5b3V0LnRhYmxlSGVpZ2h0KyJweCI6IiJ9OntoZWlnaHQ6dGhpcy5sYXlvdXQudmlld3BvcnRIZWlnaHQ/dGhpcy5sYXlvdXQudmlld3BvcnRIZWlnaHQrInB4IjoiIn19fSx3YXRjaDp7aGVpZ2h0OntpbW1lZGlhdGU6ITAsaGFuZGxlcjpmdW5jdGlvbih2YWx1ZSl7dGhpcy5sYXlvdXQuc2V0SGVpZ2h0KHZhbHVlKX19LG1heEhlaWdodDp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odmFsdWUpe3RoaXMubGF5b3V0LnNldE1heEhlaWdodCh2YWx1ZSl9fSxjdXJyZW50Um93S2V5OmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5zdG9yZS5zZXRDdXJyZW50Um93S2V5KG5ld1ZhbCl9LGRhdGE6e2ltbWVkaWF0ZTohMCxoYW5kbGVyOmZ1bmN0aW9uKHZhbHVlKXt2YXIgX3RoaXMyPXRoaXM7dGhpcy5zdG9yZS5jb21taXQoInNldERhdGEiLHZhbHVlKSx0aGlzLiRyZWFkeSYmdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczIuZG9MYXlvdXQoKX0pfX0sZXhwYW5kUm93S2V5czp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24obmV3VmFsKXtuZXdWYWwmJnRoaXMuc3RvcmUuc2V0RXhwYW5kUm93S2V5cyhuZXdWYWwpfX19LGRlc3Ryb3llZDpmdW5jdGlvbigpe3RoaXMucmVzaXplTGlzdGVuZXImJk9iamVjdChyZXNpemVfZXZlbnRfLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKSh0aGlzLiRlbCx0aGlzLnJlc2l6ZUxpc3RlbmVyKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczM9dGhpczt0aGlzLmJpbmRFdmVudHMoKSx0aGlzLnN0b3JlLnVwZGF0ZUNvbHVtbnMoKSx0aGlzLmRvTGF5b3V0KCksdGhpcy5yZXNpemVTdGF0ZT17d2lkdGg6dGhpcy4kZWwub2Zmc2V0V2lkdGgsaGVpZ2h0OnRoaXMuJGVsLm9mZnNldEhlaWdodH0sdGhpcy5zdG9yZS5zdGF0ZXMuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uKGNvbHVtbil7Y29sdW1uLmZpbHRlcmVkVmFsdWUmJmNvbHVtbi5maWx0ZXJlZFZhbHVlLmxlbmd0aCYmX3RoaXMzLnN0b3JlLmNvbW1pdCgiZmlsdGVyQ2hhbmdlIix7Y29sdW1uOmNvbHVtbix2YWx1ZXM6Y29sdW1uLmZpbHRlcmVkVmFsdWUsc2lsZW50OiEwfSl9KSx0aGlzLiRyZWFkeT0hMH0sZGF0YTpmdW5jdGlvbigpe3ZhciBzdG9yZT1uZXcgdGFibGVfc3RvcmUodGhpcyx7cm93S2V5OnRoaXMucm93S2V5LGRlZmF1bHRFeHBhbmRBbGw6dGhpcy5kZWZhdWx0RXhwYW5kQWxsLHNlbGVjdE9uSW5kZXRlcm1pbmF0ZTp0aGlzLnNlbGVjdE9uSW5kZXRlcm1pbmF0ZX0pO3JldHVybntsYXlvdXQ6bmV3IHRhYmxlX2xheW91dCh7c3RvcmU6c3RvcmUsdGFibGU6dGhpcyxmaXQ6dGhpcy5maXQsc2hvd0hlYWRlcjp0aGlzLnNob3dIZWFkZXJ9KSxzdG9yZTpzdG9yZSxpc0hpZGRlbjohMSxyZW5kZXJFeHBhbmRlZDpudWxsLHJlc2l6ZVByb3h5VmlzaWJsZTohMSxyZXNpemVTdGF0ZTp7d2lkdGg6bnVsbCxoZWlnaHQ6bnVsbH0saXNHcm91cDohMSxzY3JvbGxQb3NpdGlvbjoibGVmdCJ9fX0sdGFibGV2dWVfdHlwZV90ZW1wbGF0ZV9pZF80OTNmZTM0ZV9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3RhYmxlX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvdGFibGUvc3JjL3RhYmxlLnZ1ZSI7dmFyIHNyY190YWJsZT10YWJsZV9jb21wb25lbnQuZXhwb3J0cztzcmNfdGFibGUuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc3JjX3RhYmxlLm5hbWUsc3JjX3RhYmxlKX07dmFyIHBhY2thZ2VzX3RhYmxlPXNyY190YWJsZSxjb2x1bW5JZFNlZWQ9MSxkZWZhdWx0cz17ZGVmYXVsdDp7b3JkZXI6IiJ9LHNlbGVjdGlvbjp7d2lkdGg6NDgsbWluV2lkdGg6NDgscmVhbFdpZHRoOjQ4LG9yZGVyOiIiLGNsYXNzTmFtZToiZWwtdGFibGUtY29sdW1uLS1zZWxlY3Rpb24ifSxleHBhbmQ6e3dpZHRoOjQ4LG1pbldpZHRoOjQ4LHJlYWxXaWR0aDo0OCxvcmRlcjoiIn0saW5kZXg6e3dpZHRoOjQ4LG1pbldpZHRoOjQ4LHJlYWxXaWR0aDo0OCxvcmRlcjoiIn19LGZvcmNlZD17c2VsZWN0aW9uOntyZW5kZXJIZWFkZXI6ZnVuY3Rpb24oaCxfcmVmKXt2YXIgc3RvcmU9X3JlZi5zdG9yZTtyZXR1cm4gaCgiZWwtY2hlY2tib3giLHthdHRyczp7ZGlzYWJsZWQ6c3RvcmUuc3RhdGVzLmRhdGEmJjA9PT1zdG9yZS5zdGF0ZXMuZGF0YS5sZW5ndGgsaW5kZXRlcm1pbmF0ZTowPHN0b3JlLnN0YXRlcy5zZWxlY3Rpb24ubGVuZ3RoJiYhdGhpcy5pc0FsbFNlbGVjdGVkLHZhbHVlOnRoaXMuaXNBbGxTZWxlY3RlZH0sbmF0aXZlT246e2NsaWNrOnRoaXMudG9nZ2xlQWxsU2VsZWN0aW9ufX0pfSxyZW5kZXJDZWxsOmZ1bmN0aW9uKGgsX3JlZjIpe3ZhciByb3c9X3JlZjIucm93LGNvbHVtbj1fcmVmMi5jb2x1bW4sc3RvcmU9X3JlZjIuc3RvcmUsJGluZGV4PV9yZWYyLiRpbmRleDtyZXR1cm4gaCgiZWwtY2hlY2tib3giLHtuYXRpdmVPbjp7Y2xpY2s6ZnVuY3Rpb24oZXZlbnQpe3JldHVybiBldmVudC5zdG9wUHJvcGFnYXRpb24oKX19LGF0dHJzOnt2YWx1ZTpzdG9yZS5pc1NlbGVjdGVkKHJvdyksZGlzYWJsZWQ6ISFjb2x1bW4uc2VsZWN0YWJsZSYmIWNvbHVtbi5zZWxlY3RhYmxlLmNhbGwobnVsbCxyb3csJGluZGV4KX0sb246e2lucHV0OmZ1bmN0aW9uKCl7c3RvcmUuY29tbWl0KCJyb3dTZWxlY3RlZENoYW5nZWQiLHJvdyl9fX0pfSxzb3J0YWJsZTohMSxyZXNpemFibGU6ITF9LGluZGV4OntyZW5kZXJIZWFkZXI6ZnVuY3Rpb24oaCxfcmVmMyl7cmV0dXJuIF9yZWYzLmNvbHVtbi5sYWJlbHx8IiMifSxyZW5kZXJDZWxsOmZ1bmN0aW9uKGgsX3JlZjQpe3ZhciAkaW5kZXg9X3JlZjQuJGluZGV4LGk9JGluZGV4KzEsaW5kZXg9X3JlZjQuY29sdW1uLmluZGV4O3JldHVybiJudW1iZXIiPT10eXBlb2YgaW5kZXg/aT0kaW5kZXgraW5kZXg6ImZ1bmN0aW9uIj09dHlwZW9mIGluZGV4JiYoaT1pbmRleCgkaW5kZXgpKSxoKCJkaXYiLFtpXSl9LHNvcnRhYmxlOiExfSxleHBhbmQ6e3JlbmRlckhlYWRlcjpmdW5jdGlvbihoLF9yZWY1KXtyZXR1cm4gX3JlZjUuY29sdW1uLmxhYmVsfHwiIn0scmVuZGVyQ2VsbDpmdW5jdGlvbihoLF9yZWY2LHByb3h5KXt2YXIgcm93PV9yZWY2LnJvdztyZXR1cm4gaCgiZGl2Iix7Y2xhc3M6ImVsLXRhYmxlX19leHBhbmQtaWNvbiAiKygtMTxfcmVmNi5zdG9yZS5zdGF0ZXMuZXhwYW5kUm93cy5pbmRleE9mKHJvdyk/ImVsLXRhYmxlX19leHBhbmQtaWNvbi0tZXhwYW5kZWQiOiIiKSxvbjp7Y2xpY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIHByb3h5LmhhbmRsZUV4cGFuZENsaWNrKHJvdyxlKX19fSxbaCgiaSIse2NsYXNzOiJlbC1pY29uIGVsLWljb24tYXJyb3ctcmlnaHQifSldKX0sc29ydGFibGU6ITEscmVzaXphYmxlOiExLGNsYXNzTmFtZToiZWwtdGFibGVfX2V4cGFuZC1jb2x1bW4ifX0sdGFibGVfY29sdW1uX0RFRkFVTFRfUkVOREVSX0NFTEw9ZnVuY3Rpb24oaCxfcmVmNyl7dmFyIHJvdz1fcmVmNy5yb3csY29sdW1uPV9yZWY3LmNvbHVtbiwkaW5kZXg9X3JlZjcuJGluZGV4LHByb3BlcnR5PWNvbHVtbi5wcm9wZXJ0eSx2YWx1ZT1wcm9wZXJ0eSYmT2JqZWN0KHV0aWxfLmdldFByb3BCeVBhdGgpKHJvdyxwcm9wZXJ0eSkudjtyZXR1cm4gY29sdW1uJiZjb2x1bW4uZm9ybWF0dGVyP2NvbHVtbi5mb3JtYXR0ZXIocm93LGNvbHVtbix2YWx1ZSwkaW5kZXgpOnZhbHVlfSxwYXJzZVdpZHRoPWZ1bmN0aW9uKHdpZHRoKXtyZXR1cm4gdm9pZCAwIT09d2lkdGgmJih3aWR0aD1wYXJzZUludCh3aWR0aCwxMCksaXNOYU4od2lkdGgpJiYod2lkdGg9bnVsbCkpLHdpZHRofSxwYXJzZU1pbldpZHRoPWZ1bmN0aW9uKG1pbldpZHRoKXtyZXR1cm4gdm9pZCAwIT09bWluV2lkdGgmJihtaW5XaWR0aD1wYXJzZUludChtaW5XaWR0aCwxMCksaXNOYU4obWluV2lkdGgpJiYobWluV2lkdGg9ODApKSxtaW5XaWR0aH0sdGFibGVfY29sdW1uPXtuYW1lOiJFbFRhYmxlQ29sdW1uIixwcm9wczp7dHlwZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiZGVmYXVsdCJ9LGxhYmVsOlN0cmluZyxjbGFzc05hbWU6U3RyaW5nLGxhYmVsQ2xhc3NOYW1lOlN0cmluZyxwcm9wZXJ0eTpTdHJpbmcscHJvcDpTdHJpbmcsd2lkdGg6e30sbWluV2lkdGg6e30scmVuZGVySGVhZGVyOkZ1bmN0aW9uLHNvcnRhYmxlOnt0eXBlOltTdHJpbmcsQm9vbGVhbl0sZGVmYXVsdDohMX0sc29ydE1ldGhvZDpGdW5jdGlvbixzb3J0Qnk6W1N0cmluZyxGdW5jdGlvbixBcnJheV0scmVzaXphYmxlOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sY29udGV4dDp7fSxjb2x1bW5LZXk6U3RyaW5nLGFsaWduOlN0cmluZyxoZWFkZXJBbGlnbjpTdHJpbmcsc2hvd1Rvb2x0aXBXaGVuT3ZlcmZsb3c6Qm9vbGVhbixzaG93T3ZlcmZsb3dUb29sdGlwOkJvb2xlYW4sZml4ZWQ6W0Jvb2xlYW4sU3RyaW5nXSxmb3JtYXR0ZXI6RnVuY3Rpb24sc2VsZWN0YWJsZTpGdW5jdGlvbixyZXNlcnZlU2VsZWN0aW9uOkJvb2xlYW4sZmlsdGVyTWV0aG9kOkZ1bmN0aW9uLGZpbHRlcmVkVmFsdWU6QXJyYXksZmlsdGVyczpBcnJheSxmaWx0ZXJQbGFjZW1lbnQ6U3RyaW5nLGZpbHRlck11bHRpcGxlOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0saW5kZXg6W051bWJlcixGdW5jdGlvbl0sc29ydE9yZGVyczp7dHlwZTpBcnJheSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuWyJhc2NlbmRpbmciLCJkZXNjZW5kaW5nIixudWxsXX0sdmFsaWRhdG9yOmZ1bmN0aW9uKHZhbCl7cmV0dXJuIHZhbC5ldmVyeShmdW5jdGlvbihvcmRlcil7cmV0dXJuLTE8WyJhc2NlbmRpbmciLCJkZXNjZW5kaW5nIixudWxsXS5pbmRleE9mKG9yZGVyKX0pfX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57aXNTdWJDb2x1bW46ITEsY29sdW1uczpbXX19LGJlZm9yZUNyZWF0ZTpmdW5jdGlvbigpe3RoaXMucm93PXt9LHRoaXMuY29sdW1uPXt9LHRoaXMuJGluZGV4PTB9LGNvbXBvbmVudHM6e0VsQ2hlY2tib3g6Y2hlY2tib3hfZGVmYXVsdC5hLEVsVGFnOnRhZ19kZWZhdWx0LmF9LGNvbXB1dGVkOntvd25lcjpmdW5jdGlvbigpe2Zvcih2YXIgcGFyZW50PXRoaXMuJHBhcmVudDtwYXJlbnQmJiFwYXJlbnQudGFibGVJZDspcGFyZW50PXBhcmVudC4kcGFyZW50O3JldHVybiBwYXJlbnR9LGNvbHVtbk9yVGFibGVQYXJlbnQ6ZnVuY3Rpb24oKXtmb3IodmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7cGFyZW50JiYhcGFyZW50LnRhYmxlSWQmJiFwYXJlbnQuY29sdW1uSWQ7KXBhcmVudD1wYXJlbnQuJHBhcmVudDtyZXR1cm4gcGFyZW50fX0sY3JlYXRlZDpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzO3RoaXMuJGNyZWF0ZUVsZW1lbnQ7dGhpcy5jdXN0b21SZW5kZXI9dGhpcy4kb3B0aW9ucy5yZW5kZXIsdGhpcy4kb3B0aW9ucy5yZW5kZXI9ZnVuY3Rpb24oaCl7cmV0dXJuIGgoImRpdiIsX3RoaXMuJHNsb3RzLmRlZmF1bHQpfTt2YXIgcGFyZW50PXRoaXMuY29sdW1uT3JUYWJsZVBhcmVudCxvd25lcj10aGlzLm93bmVyO3RoaXMuaXNTdWJDb2x1bW49b3duZXIhPT1wYXJlbnQsdGhpcy5jb2x1bW5JZD0ocGFyZW50LnRhYmxlSWR8fHBhcmVudC5jb2x1bW5JZCkrIl9jb2x1bW5fIitjb2x1bW5JZFNlZWQrKzt2YXIgdHlwZT10aGlzLnR5cGUsd2lkdGg9cGFyc2VXaWR0aCh0aGlzLndpZHRoKSxtaW5XaWR0aD1wYXJzZU1pbldpZHRoKHRoaXMubWluV2lkdGgpLGNvbHVtbj1mdW5jdGlvbih0eXBlLG9wdGlvbnMpe3ZhciBjb2x1bW49e307Zm9yKHZhciBuYW1lIGluIG1lcmdlX2RlZmF1bHQoKShjb2x1bW4sZGVmYXVsdHNbdHlwZXx8ImRlZmF1bHQiXSksb3B0aW9ucylpZihvcHRpb25zLmhhc093blByb3BlcnR5KG5hbWUpKXt2YXIgdmFsdWU9b3B0aW9uc1tuYW1lXTt2b2lkIDAhPT12YWx1ZSYmKGNvbHVtbltuYW1lXT12YWx1ZSl9cmV0dXJuIGNvbHVtbi5taW5XaWR0aHx8KGNvbHVtbi5taW5XaWR0aD04MCksY29sdW1uLnJlYWxXaWR0aD12b2lkIDA9PT1jb2x1bW4ud2lkdGg/Y29sdW1uLm1pbldpZHRoOmNvbHVtbi53aWR0aCxjb2x1bW59KHR5cGUse2lkOnRoaXMuY29sdW1uSWQsY29sdW1uS2V5OnRoaXMuY29sdW1uS2V5LGxhYmVsOnRoaXMubGFiZWwsY2xhc3NOYW1lOnRoaXMuY2xhc3NOYW1lLGxhYmVsQ2xhc3NOYW1lOnRoaXMubGFiZWxDbGFzc05hbWUscHJvcGVydHk6dGhpcy5wcm9wfHx0aGlzLnByb3BlcnR5LHR5cGU6dHlwZSxyZW5kZXJDZWxsOm51bGwscmVuZGVySGVhZGVyOnRoaXMucmVuZGVySGVhZGVyLG1pbldpZHRoOm1pbldpZHRoLHdpZHRoOndpZHRoLGlzQ29sdW1uR3JvdXA6ITEsY29udGV4dDp0aGlzLmNvbnRleHQsYWxpZ246dGhpcy5hbGlnbj8iaXMtIit0aGlzLmFsaWduOm51bGwsaGVhZGVyQWxpZ246dGhpcy5oZWFkZXJBbGlnbj8iaXMtIit0aGlzLmhlYWRlckFsaWduOnRoaXMuYWxpZ24/ImlzLSIrdGhpcy5hbGlnbjpudWxsLHNvcnRhYmxlOiIiPT09dGhpcy5zb3J0YWJsZXx8dGhpcy5zb3J0YWJsZSxzb3J0TWV0aG9kOnRoaXMuc29ydE1ldGhvZCxzb3J0Qnk6dGhpcy5zb3J0QnkscmVzaXphYmxlOnRoaXMucmVzaXphYmxlLHNob3dPdmVyZmxvd1Rvb2x0aXA6dGhpcy5zaG93T3ZlcmZsb3dUb29sdGlwfHx0aGlzLnNob3dUb29sdGlwV2hlbk92ZXJmbG93LGZvcm1hdHRlcjp0aGlzLmZvcm1hdHRlcixzZWxlY3RhYmxlOnRoaXMuc2VsZWN0YWJsZSxyZXNlcnZlU2VsZWN0aW9uOnRoaXMucmVzZXJ2ZVNlbGVjdGlvbixmaXhlZDoiIj09PXRoaXMuZml4ZWR8fHRoaXMuZml4ZWQsZmlsdGVyTWV0aG9kOnRoaXMuZmlsdGVyTWV0aG9kLGZpbHRlcnM6dGhpcy5maWx0ZXJzLGZpbHRlcmFibGU6dGhpcy5maWx0ZXJzfHx0aGlzLmZpbHRlck1ldGhvZCxmaWx0ZXJNdWx0aXBsZTp0aGlzLmZpbHRlck11bHRpcGxlLGZpbHRlck9wZW5lZDohMSxmaWx0ZXJlZFZhbHVlOnRoaXMuZmlsdGVyZWRWYWx1ZXx8W10sZmlsdGVyUGxhY2VtZW50OnRoaXMuZmlsdGVyUGxhY2VtZW50fHwiIixpbmRleDp0aGlzLmluZGV4LHNvcnRPcmRlcnM6dGhpcy5zb3J0T3JkZXJzfSksc291cmNlPWZvcmNlZFt0eXBlXXx8e307T2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uKHByb3Ape3ZhciB2YWx1ZT1zb3VyY2VbcHJvcF07dm9pZCAwIT09dmFsdWUmJigicmVuZGVySGVhZGVyIj09PXByb3AmJigic2VsZWN0aW9uIj09PXR5cGUmJmNvbHVtbltwcm9wXT9jb25zb2xlLndhcm4oIltFbGVtZW50IFdhcm5dW1RhYmxlQ29sdW1uXVNlbGVjdGlvbiBjb2x1bW4gZG9lc24ndCBhbGxvdyB0byBzZXQgcmVuZGVyLWhlYWRlciBmdW5jdGlvbi4iKTp2YWx1ZT1jb2x1bW5bcHJvcF18fHZhbHVlKSxjb2x1bW5bcHJvcF09ImNsYXNzTmFtZSI9PT1wcm9wP2NvbHVtbltwcm9wXSsiICIrdmFsdWU6dmFsdWUpfSksdGhpcy5yZW5kZXJIZWFkZXImJmNvbnNvbGUud2FybigiW0VsZW1lbnQgV2Fybl1bVGFibGVDb2x1bW5dQ29tcGFyaW5nIHRvIHJlbmRlci1oZWFkZXIsIHNjb3BlZC1zbG90IGhlYWRlciBpcyBlYXNpZXIgdG8gdXNlLiBXZSByZWNvbW1lbmQgdXNlcnMgdG8gdXNlIHNjb3BlZC1zbG90IGhlYWRlci4iKTt2YXIgcmVuZGVyQ2VsbD0odGhpcy5jb2x1bW5Db25maWc9Y29sdW1uKS5yZW5kZXJDZWxsLF9zZWxmPXRoaXM7aWYoImV4cGFuZCI9PT10eXBlKXJldHVybiBvd25lci5yZW5kZXJFeHBhbmRlZD1mdW5jdGlvbihoLGRhdGEpe3JldHVybiBfc2VsZi4kc2NvcGVkU2xvdHMuZGVmYXVsdD9fc2VsZi4kc2NvcGVkU2xvdHMuZGVmYXVsdChkYXRhKTpfc2VsZi4kc2xvdHMuZGVmYXVsdH0sdm9pZChjb2x1bW4ucmVuZGVyQ2VsbD1mdW5jdGlvbihoLGRhdGEpe3JldHVybiBoKCJkaXYiLHtjbGFzczoiY2VsbCJ9LFtyZW5kZXJDZWxsKGgsZGF0YSx0aGlzLl9yZW5kZXJQcm94eSldKX0pO2NvbHVtbi5yZW5kZXJDZWxsPWZ1bmN0aW9uKGgsZGF0YSl7cmV0dXJuIF9zZWxmLiRzY29wZWRTbG90cy5kZWZhdWx0JiYocmVuZGVyQ2VsbD1mdW5jdGlvbigpe3JldHVybiBfc2VsZi4kc2NvcGVkU2xvdHMuZGVmYXVsdChkYXRhKX0pLHJlbmRlckNlbGx8fChyZW5kZXJDZWxsPXRhYmxlX2NvbHVtbl9ERUZBVUxUX1JFTkRFUl9DRUxMKSxfc2VsZi5zaG93T3ZlcmZsb3dUb29sdGlwfHxfc2VsZi5zaG93VG9vbHRpcFdoZW5PdmVyZmxvdz9oKCJkaXYiLHtjbGFzczoiY2VsbCBlbC10b29sdGlwIixzdHlsZTp7d2lkdGg6KGRhdGEuY29sdW1uLnJlYWxXaWR0aHx8ZGF0YS5jb2x1bW4ud2lkdGgpLTErInB4In19LFtyZW5kZXJDZWxsKGgsZGF0YSldKTpoKCJkaXYiLHtjbGFzczoiY2VsbCJ9LFtyZW5kZXJDZWxsKGgsZGF0YSldKX19LGRlc3Ryb3llZDpmdW5jdGlvbigpe2lmKHRoaXMuJHBhcmVudCl7dmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7dGhpcy5vd25lci5zdG9yZS5jb21taXQoInJlbW92ZUNvbHVtbiIsdGhpcy5jb2x1bW5Db25maWcsdGhpcy5pc1N1YkNvbHVtbj9wYXJlbnQuY29sdW1uQ29uZmlnOm51bGwpfX0sd2F0Y2g6e2xhYmVsOmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5jb2x1bW5Db25maWcmJih0aGlzLmNvbHVtbkNvbmZpZy5sYWJlbD1uZXdWYWwpfSxwcm9wOmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5jb2x1bW5Db25maWcmJih0aGlzLmNvbHVtbkNvbmZpZy5wcm9wZXJ0eT1uZXdWYWwpfSxwcm9wZXJ0eTpmdW5jdGlvbihuZXdWYWwpe3RoaXMuY29sdW1uQ29uZmlnJiYodGhpcy5jb2x1bW5Db25maWcucHJvcGVydHk9bmV3VmFsKX0sZmlsdGVyczpmdW5jdGlvbihuZXdWYWwpe3RoaXMuY29sdW1uQ29uZmlnJiYodGhpcy5jb2x1bW5Db25maWcuZmlsdGVycz1uZXdWYWwpfSxmaWx0ZXJNdWx0aXBsZTpmdW5jdGlvbihuZXdWYWwpe3RoaXMuY29sdW1uQ29uZmlnJiYodGhpcy5jb2x1bW5Db25maWcuZmlsdGVyTXVsdGlwbGU9bmV3VmFsKX0sYWxpZ246ZnVuY3Rpb24obmV3VmFsKXt0aGlzLmNvbHVtbkNvbmZpZyYmKHRoaXMuY29sdW1uQ29uZmlnLmFsaWduPW5ld1ZhbD8iaXMtIituZXdWYWw6bnVsbCx0aGlzLmhlYWRlckFsaWdufHwodGhpcy5jb2x1bW5Db25maWcuaGVhZGVyQWxpZ249bmV3VmFsPyJpcy0iK25ld1ZhbDpudWxsKSl9LGhlYWRlckFsaWduOmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5jb2x1bW5Db25maWcmJih0aGlzLmNvbHVtbkNvbmZpZy5oZWFkZXJBbGlnbj0iaXMtIisobmV3VmFsfHx0aGlzLmFsaWduKSl9LHdpZHRoOmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5jb2x1bW5Db25maWcmJih0aGlzLmNvbHVtbkNvbmZpZy53aWR0aD1wYXJzZVdpZHRoKG5ld1ZhbCksdGhpcy5vd25lci5zdG9yZS5zY2hlZHVsZUxheW91dCgpKX0sbWluV2lkdGg6ZnVuY3Rpb24obmV3VmFsKXt0aGlzLmNvbHVtbkNvbmZpZyYmKHRoaXMuY29sdW1uQ29uZmlnLm1pbldpZHRoPXBhcnNlTWluV2lkdGgobmV3VmFsKSx0aGlzLm93bmVyLnN0b3JlLnNjaGVkdWxlTGF5b3V0KCkpfSxmaXhlZDpmdW5jdGlvbihuZXdWYWwpe3RoaXMuY29sdW1uQ29uZmlnJiYodGhpcy5jb2x1bW5Db25maWcuZml4ZWQ9bmV3VmFsLHRoaXMub3duZXIuc3RvcmUuc2NoZWR1bGVMYXlvdXQoITApKX0sc29ydGFibGU6ZnVuY3Rpb24obmV3VmFsKXt0aGlzLmNvbHVtbkNvbmZpZyYmKHRoaXMuY29sdW1uQ29uZmlnLnNvcnRhYmxlPW5ld1ZhbCl9LGluZGV4OmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5jb2x1bW5Db25maWcmJih0aGlzLmNvbHVtbkNvbmZpZy5pbmRleD1uZXdWYWwpfSxmb3JtYXR0ZXI6ZnVuY3Rpb24obmV3VmFsKXt0aGlzLmNvbHVtbkNvbmZpZyYmKHRoaXMuY29sdW1uQ29uZmlnLmZvcm1hdHRlcj1uZXdWYWwpfSxjbGFzc05hbWU6ZnVuY3Rpb24obmV3VmFsKXt0aGlzLmNvbHVtbkNvbmZpZyYmKHRoaXMuY29sdW1uQ29uZmlnLmNsYXNzTmFtZT1uZXdWYWwpfSxsYWJlbENsYXNzTmFtZTpmdW5jdGlvbihuZXdWYWwpe3RoaXMuY29sdW1uQ29uZmlnJiYodGhpcy5jb2x1bW5Db25maWcubGFiZWxDbGFzc05hbWU9bmV3VmFsKX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXMsb3duZXI9dGhpcy5vd25lcixwYXJlbnQ9dGhpcy5jb2x1bW5PclRhYmxlUGFyZW50LGNvbHVtbkluZGV4PXZvaWQgMDtjb2x1bW5JbmRleD10aGlzLmlzU3ViQ29sdW1uP1tdLmluZGV4T2YuY2FsbChwYXJlbnQuJGVsLmNoaWxkcmVuLHRoaXMuJGVsKTpbXS5pbmRleE9mLmNhbGwocGFyZW50LiRyZWZzLmhpZGRlbkNvbHVtbnMuY2hpbGRyZW4sdGhpcy4kZWwpLHRoaXMuJHNjb3BlZFNsb3RzLmhlYWRlciYmKCJzZWxlY3Rpb24iPT09dGhpcy50eXBlP2NvbnNvbGUud2FybigiW0VsZW1lbnQgV2Fybl1bVGFibGVDb2x1bW5dU2VsZWN0aW9uIGNvbHVtbiBkb2Vzbid0IGFsbG93IHRvIHNldCBzY29wZWQtc2xvdCBoZWFkZXIuIik6dGhpcy5jb2x1bW5Db25maWcucmVuZGVySGVhZGVyPWZ1bmN0aW9uKGgsc2NvcGUpe3JldHVybiBfdGhpczIuJHNjb3BlZFNsb3RzLmhlYWRlcihzY29wZSl9KSxvd25lci5zdG9yZS5jb21taXQoImluc2VydENvbHVtbiIsdGhpcy5jb2x1bW5Db25maWcsY29sdW1uSW5kZXgsdGhpcy5pc1N1YkNvbHVtbj9wYXJlbnQuY29sdW1uQ29uZmlnOm51bGwpfSxpbnN0YWxsOmZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudCh0YWJsZV9jb2x1bW4ubmFtZSx0YWJsZV9jb2x1bW4pfX0scGFja2FnZXNfdGFibGVfY29sdW1uPXRhYmxlX2NvbHVtbixwaWNrZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF83OWFlMDY5Zl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF92bS5yYW5nZWQ/X2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJjbGlja291dHNpZGUiLHJhd05hbWU6InYtY2xpY2tvdXRzaWRlIix2YWx1ZTpfdm0uaGFuZGxlQ2xvc2UsZXhwcmVzc2lvbjoiaGFuZGxlQ2xvc2UifV0scmVmOiJyZWZlcmVuY2UiLHN0YXRpY0NsYXNzOiJlbC1kYXRlLWVkaXRvciBlbC1yYW5nZS1lZGl0b3IgZWwtaW5wdXRfX2lubmVyIixjbGFzczpbImVsLWRhdGUtZWRpdG9yLS0iK192bS50eXBlLF92bS5waWNrZXJTaXplPyJlbC1yYW5nZS1lZGl0b3ItLSIrX3ZtLnBpY2tlclNpemU6IiIsX3ZtLnBpY2tlckRpc2FibGVkPyJpcy1kaXNhYmxlZCI6IiIsX3ZtLnBpY2tlclZpc2libGU/ImlzLWFjdGl2ZSI6IiJdLG9uOntjbGljazpfdm0uaGFuZGxlUmFuZ2VDbGljayxtb3VzZWVudGVyOl92bS5oYW5kbGVNb3VzZUVudGVyLG1vdXNlbGVhdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc2hvd0Nsb3NlPSExfSxrZXlkb3duOl92bS5oYW5kbGVLZXlkb3dufX0sW19jKCJpIix7Y2xhc3M6WyJlbC1pbnB1dF9faWNvbiIsImVsLXJhbmdlX19pY29uIixfdm0udHJpZ2dlckNsYXNzXX0pLF9jKCJpbnB1dCIsX3ZtLl9iKHtzdGF0aWNDbGFzczoiZWwtcmFuZ2UtaW5wdXQiLGF0dHJzOnthdXRvY29tcGxldGU6Im9mZiIscGxhY2Vob2xkZXI6X3ZtLnN0YXJ0UGxhY2Vob2xkZXIsZGlzYWJsZWQ6X3ZtLnBpY2tlckRpc2FibGVkLHJlYWRvbmx5OiFfdm0uZWRpdGFibGV8fF92bS5yZWFkb25seSxuYW1lOl92bS5uYW1lJiZfdm0ubmFtZVswXX0sZG9tUHJvcHM6e3ZhbHVlOl92bS5kaXNwbGF5VmFsdWUmJl92bS5kaXNwbGF5VmFsdWVbMF19LG9uOntpbnB1dDpfdm0uaGFuZGxlU3RhcnRJbnB1dCxjaGFuZ2U6X3ZtLmhhbmRsZVN0YXJ0Q2hhbmdlLGZvY3VzOl92bS5oYW5kbGVGb2N1c319LCJpbnB1dCIsX3ZtLmZpcnN0SW5wdXRJZCwhMSkpLF92bS5fdCgicmFuZ2Utc2VwYXJhdG9yIixbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtcmFuZ2Utc2VwYXJhdG9yIn0sW192bS5fdihfdm0uX3MoX3ZtLnJhbmdlU2VwYXJhdG9yKSldKV0pLF9jKCJpbnB1dCIsX3ZtLl9iKHtzdGF0aWNDbGFzczoiZWwtcmFuZ2UtaW5wdXQiLGF0dHJzOnthdXRvY29tcGxldGU6Im9mZiIscGxhY2Vob2xkZXI6X3ZtLmVuZFBsYWNlaG9sZGVyLGRpc2FibGVkOl92bS5waWNrZXJEaXNhYmxlZCxyZWFkb25seTohX3ZtLmVkaXRhYmxlfHxfdm0ucmVhZG9ubHksbmFtZTpfdm0ubmFtZSYmX3ZtLm5hbWVbMV19LGRvbVByb3BzOnt2YWx1ZTpfdm0uZGlzcGxheVZhbHVlJiZfdm0uZGlzcGxheVZhbHVlWzFdfSxvbjp7aW5wdXQ6X3ZtLmhhbmRsZUVuZElucHV0LGNoYW5nZTpfdm0uaGFuZGxlRW5kQ2hhbmdlLGZvY3VzOl92bS5oYW5kbGVGb2N1c319LCJpbnB1dCIsX3ZtLnNlY29uZElucHV0SWQsITEpKSxfdm0uaGF2ZVRyaWdnZXI/X2MoImkiLHtzdGF0aWNDbGFzczoiZWwtaW5wdXRfX2ljb24gZWwtcmFuZ2VfX2Nsb3NlLWljb24iLGNsYXNzOltfdm0uc2hvd0Nsb3NlPyIiK192bS5jbGVhckljb246IiJdLG9uOntjbGljazpfdm0uaGFuZGxlQ2xpY2tJY29ufX0pOl92bS5fZSgpXSwyKTpfYygiZWwtaW5wdXQiLF92bS5fYih7ZGlyZWN0aXZlczpbe25hbWU6ImNsaWNrb3V0c2lkZSIscmF3TmFtZToidi1jbGlja291dHNpZGUiLHZhbHVlOl92bS5oYW5kbGVDbG9zZSxleHByZXNzaW9uOiJoYW5kbGVDbG9zZSJ9XSxyZWY6InJlZmVyZW5jZSIsc3RhdGljQ2xhc3M6ImVsLWRhdGUtZWRpdG9yIixjbGFzczoiZWwtZGF0ZS1lZGl0b3ItLSIrX3ZtLnR5cGUsYXR0cnM6e3JlYWRvbmx5OiFfdm0uZWRpdGFibGV8fF92bS5yZWFkb25seXx8ImRhdGVzIj09PV92bS50eXBlLGRpc2FibGVkOl92bS5waWNrZXJEaXNhYmxlZCxzaXplOl92bS5waWNrZXJTaXplLG5hbWU6X3ZtLm5hbWUscGxhY2Vob2xkZXI6X3ZtLnBsYWNlaG9sZGVyLHZhbHVlOl92bS5kaXNwbGF5VmFsdWUsdmFsaWRhdGVFdmVudDohMX0sb246e2ZvY3VzOl92bS5oYW5kbGVGb2N1cyxpbnB1dDpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIF92bS51c2VySW5wdXQ9dmFsdWV9LGNoYW5nZTpfdm0uaGFuZGxlQ2hhbmdlfSxuYXRpdmVPbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe3JldHVybiBfdm0uaGFuZGxlS2V5ZG93bigkZXZlbnQpfSxtb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF92bS5oYW5kbGVNb3VzZUVudGVyKCRldmVudCl9LG1vdXNlbGVhdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc2hvd0Nsb3NlPSExfX19LCJlbC1pbnB1dCIsX3ZtLmZpcnN0SW5wdXRJZCwhMSksW19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWlucHV0X19pY29uIixjbGFzczpfdm0udHJpZ2dlckNsYXNzLGF0dHJzOntzbG90OiJwcmVmaXgifSxvbjp7Y2xpY2s6X3ZtLmhhbmRsZUZvY3VzfSxzbG90OiJwcmVmaXgifSksX3ZtLmhhdmVUcmlnZ2VyP19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWlucHV0X19pY29uIixjbGFzczpbX3ZtLnNob3dDbG9zZT8iIitfdm0uY2xlYXJJY29uOiIiXSxhdHRyczp7c2xvdDoic3VmZml4In0sb246e2NsaWNrOl92bS5oYW5kbGVDbGlja0ljb259LHNsb3Q6InN1ZmZpeCJ9KTpfdm0uX2UoKV0pfTtwaWNrZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF83OWFlMDY5Zl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgZGF0ZV89X193ZWJwYWNrX3JlcXVpcmVfXygyNCksZGF0ZV9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihkYXRlXyksd2Vla3M9WyJzdW4iLCJtb24iLCJ0dWUiLCJ3ZWQiLCJ0aHUiLCJmcmkiLCJzYXQiXSxtb250aHM9WyJqYW4iLCJmZWIiLCJtYXIiLCJhcHIiLCJtYXkiLCJqdW4iLCJqdWwiLCJhdWciLCJzZXAiLCJvY3QiLCJub3YiLCJkZWMiXSx1dGlsX2dldEkxOG5TZXR0aW5ncz1mdW5jdGlvbigpe3JldHVybntkYXlOYW1lc1Nob3J0OndlZWtzLm1hcChmdW5jdGlvbih3ZWVrKXtyZXR1cm4gT2JqZWN0KGxpYl9sb2NhbGVfLnQpKCJlbC5kYXRlcGlja2VyLndlZWtzLiIrd2Vlayl9KSxkYXlOYW1lczp3ZWVrcy5tYXAoZnVuY3Rpb24od2Vlayl7cmV0dXJuIE9iamVjdChsaWJfbG9jYWxlXy50KSgiZWwuZGF0ZXBpY2tlci53ZWVrcy4iK3dlZWspfSksbW9udGhOYW1lc1Nob3J0Om1vbnRocy5tYXAoZnVuY3Rpb24obW9udGgpe3JldHVybiBPYmplY3QobGliX2xvY2FsZV8udCkoImVsLmRhdGVwaWNrZXIubW9udGhzLiIrbW9udGgpfSksbW9udGhOYW1lczptb250aHMubWFwKGZ1bmN0aW9uKG1vbnRoLGluZGV4KXtyZXR1cm4gT2JqZWN0KGxpYl9sb2NhbGVfLnQpKCJlbC5kYXRlcGlja2VyLm1vbnRoIisoaW5kZXgrMSkpfSksYW1QbTpbImFtIiwicG0iXX19LGlzRGF0ZT1mdW5jdGlvbihkYXRlKXtyZXR1cm4gbnVsbCE9ZGF0ZSYmKCFpc05hTihuZXcgRGF0ZShkYXRlKS5nZXRUaW1lKCkpJiYhQXJyYXkuaXNBcnJheShkYXRlKSl9LGlzRGF0ZU9iamVjdD1mdW5jdGlvbih2YWwpe3JldHVybiB2YWwgaW5zdGFuY2VvZiBEYXRlfSx1dGlsX2Zvcm1hdERhdGU9ZnVuY3Rpb24oZGF0ZSxmb3JtYXQpe3JldHVybihkYXRlPWZ1bmN0aW9uKGRhdGUpe3JldHVybiBpc0RhdGUoZGF0ZSk/bmV3IERhdGUoZGF0ZSk6bnVsbH0oZGF0ZSkpP2RhdGVfZGVmYXVsdC5hLmZvcm1hdChkYXRlLGZvcm1hdHx8Inl5eXktTU0tZGQiLHV0aWxfZ2V0STE4blNldHRpbmdzKCkpOiIifSx1dGlsX3BhcnNlRGF0ZT1mdW5jdGlvbihzdHJpbmcsZm9ybWF0KXtyZXR1cm4gZGF0ZV9kZWZhdWx0LmEucGFyc2Uoc3RyaW5nLGZvcm1hdHx8Inl5eXktTU0tZGQiLHV0aWxfZ2V0STE4blNldHRpbmdzKCkpfSxnZXREYXlDb3VudE9mTW9udGg9ZnVuY3Rpb24oeWVhcixtb250aCl7cmV0dXJuIDM9PT1tb250aHx8NT09PW1vbnRofHw4PT09bW9udGh8fDEwPT09bW9udGg/MzA6MT09PW1vbnRoP3llYXIlND09MCYmeWVhciUxMDAhPTB8fHllYXIlNDAwPT0wPzI5OjI4OjMxfSxwcmV2RGF0ZT1mdW5jdGlvbihkYXRlKXt2YXIgYW1vdW50PTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxO3JldHVybiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksZGF0ZS5nZXRNb250aCgpLGRhdGUuZ2V0RGF0ZSgpLWFtb3VudCl9LG5leHREYXRlPWZ1bmN0aW9uKGRhdGUpe3ZhciBhbW91bnQ9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjE7cmV0dXJuIG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSxkYXRlLmdldE1vbnRoKCksZGF0ZS5nZXREYXRlKCkrYW1vdW50KX0sZ2V0V2Vla051bWJlcj1mdW5jdGlvbihzcmMpe2lmKCFpc0RhdGUoc3JjKSlyZXR1cm4gbnVsbDt2YXIgZGF0ZT1uZXcgRGF0ZShzcmMuZ2V0VGltZSgpKTtkYXRlLnNldEhvdXJzKDAsMCwwLDApLGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSszLShkYXRlLmdldERheSgpKzYpJTcpO3ZhciB3ZWVrMT1uZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksMCw0KTtyZXR1cm4gMStNYXRoLnJvdW5kKCgoZGF0ZS5nZXRUaW1lKCktd2VlazEuZ2V0VGltZSgpKS84NjRlNS0zKyh3ZWVrMS5nZXREYXkoKSs2KSU3KS83KX07ZnVuY3Rpb24gc2V0UmFuZ2VEYXRhKGFycixzdGFydCxlbmQsdmFsdWUpe2Zvcih2YXIgaT1zdGFydDtpPGVuZDtpKyspYXJyW2ldPXZhbHVlfXZhciB1dGlsX3JhbmdlPWZ1bmN0aW9uKG4pe3JldHVybiBBcnJheS5hcHBseShudWxsLHtsZW5ndGg6bn0pLm1hcChmdW5jdGlvbihfLG4pe3JldHVybiBufSl9LG1vZGlmeURhdGU9ZnVuY3Rpb24oZGF0ZSx5LG0sZCl7cmV0dXJuIG5ldyBEYXRlKHksbSxkLGRhdGUuZ2V0SG91cnMoKSxkYXRlLmdldE1pbnV0ZXMoKSxkYXRlLmdldFNlY29uZHMoKSxkYXRlLmdldE1pbGxpc2Vjb25kcygpKX0sbW9kaWZ5VGltZT1mdW5jdGlvbihkYXRlLGgsbSxzKXtyZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLGRhdGUuZ2V0TW9udGgoKSxkYXRlLmdldERhdGUoKSxoLG0scyxkYXRlLmdldE1pbGxpc2Vjb25kcygpKX0sbW9kaWZ5V2l0aFRpbWVTdHJpbmc9ZnVuY3Rpb24oZGF0ZSx0aW1lKXtyZXR1cm4gbnVsbCE9ZGF0ZSYmdGltZT8odGltZT11dGlsX3BhcnNlRGF0ZSh0aW1lLCJISDptbTpzcyIpLG1vZGlmeVRpbWUoZGF0ZSx0aW1lLmdldEhvdXJzKCksdGltZS5nZXRNaW51dGVzKCksdGltZS5nZXRTZWNvbmRzKCkpKTpkYXRlfSxjbGVhclRpbWU9ZnVuY3Rpb24oZGF0ZSl7cmV0dXJuIG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSxkYXRlLmdldE1vbnRoKCksZGF0ZS5nZXREYXRlKCkpfSxjbGVhck1pbGxpc2Vjb25kcz1mdW5jdGlvbihkYXRlKXtyZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLGRhdGUuZ2V0TW9udGgoKSxkYXRlLmdldERhdGUoKSxkYXRlLmdldEhvdXJzKCksZGF0ZS5nZXRNaW51dGVzKCksZGF0ZS5nZXRTZWNvbmRzKCksMCl9LHV0aWxfbGltaXRUaW1lUmFuZ2U9ZnVuY3Rpb24oZGF0ZSxyYW5nZXMpe3ZhciBmb3JtYXQ9Mjxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOiJISDptbTpzcyI7aWYoMD09PXJhbmdlcy5sZW5ndGgpcmV0dXJuIGRhdGU7dmFyIG5vcm1hbGl6ZURhdGU9ZnVuY3Rpb24oZGF0ZSl7cmV0dXJuIGRhdGVfZGVmYXVsdC5hLnBhcnNlKGRhdGVfZGVmYXVsdC5hLmZvcm1hdChkYXRlLGZvcm1hdCksZm9ybWF0KX0sbmRhdGU9bm9ybWFsaXplRGF0ZShkYXRlKSxucmFuZ2VzPXJhbmdlcy5tYXAoZnVuY3Rpb24ocmFuZ2Upe3JldHVybiByYW5nZS5tYXAobm9ybWFsaXplRGF0ZSl9KTtpZihucmFuZ2VzLnNvbWUoZnVuY3Rpb24obnJhbmdlKXtyZXR1cm4gbmRhdGU+PW5yYW5nZVswXSYmbmRhdGU8PW5yYW5nZVsxXX0pKXJldHVybiBkYXRlO3ZhciBtaW5EYXRlPW5yYW5nZXNbMF1bMF0sbWF4RGF0ZT1ucmFuZ2VzWzBdWzBdO3JldHVybiBucmFuZ2VzLmZvckVhY2goZnVuY3Rpb24obnJhbmdlKXttaW5EYXRlPW5ldyBEYXRlKE1hdGgubWluKG5yYW5nZVswXSxtaW5EYXRlKSksbWF4RGF0ZT1uZXcgRGF0ZShNYXRoLm1heChucmFuZ2VbMV0sbWluRGF0ZSkpfSksbW9kaWZ5RGF0ZShuZGF0ZTxtaW5EYXRlP21pbkRhdGU6bWF4RGF0ZSxkYXRlLmdldEZ1bGxZZWFyKCksZGF0ZS5nZXRNb250aCgpLGRhdGUuZ2V0RGF0ZSgpKX0sdGltZVdpdGhpblJhbmdlPWZ1bmN0aW9uKGRhdGUsc2VsZWN0YWJsZVJhbmdlLGZvcm1hdCl7cmV0dXJuIHV0aWxfbGltaXRUaW1lUmFuZ2UoZGF0ZSxzZWxlY3RhYmxlUmFuZ2UsZm9ybWF0KS5nZXRUaW1lKCk9PT1kYXRlLmdldFRpbWUoKX0sY2hhbmdlWWVhck1vbnRoQW5kQ2xhbXBEYXRlPWZ1bmN0aW9uKGRhdGUseWVhcixtb250aCl7dmFyIG1vbnRoRGF0ZT1NYXRoLm1pbihkYXRlLmdldERhdGUoKSxnZXREYXlDb3VudE9mTW9udGgoeWVhcixtb250aCkpO3JldHVybiBtb2RpZnlEYXRlKGRhdGUseWVhcixtb250aCxtb250aERhdGUpfSx1dGlsX3ByZXZNb250aD1mdW5jdGlvbihkYXRlKXt2YXIgeWVhcj1kYXRlLmdldEZ1bGxZZWFyKCksbW9udGg9ZGF0ZS5nZXRNb250aCgpO3JldHVybiAwPT09bW9udGg/Y2hhbmdlWWVhck1vbnRoQW5kQ2xhbXBEYXRlKGRhdGUseWVhci0xLDExKTpjaGFuZ2VZZWFyTW9udGhBbmRDbGFtcERhdGUoZGF0ZSx5ZWFyLG1vbnRoLTEpfSx1dGlsX25leHRNb250aD1mdW5jdGlvbihkYXRlKXt2YXIgeWVhcj1kYXRlLmdldEZ1bGxZZWFyKCksbW9udGg9ZGF0ZS5nZXRNb250aCgpO3JldHVybiAxMT09PW1vbnRoP2NoYW5nZVllYXJNb250aEFuZENsYW1wRGF0ZShkYXRlLHllYXIrMSwwKTpjaGFuZ2VZZWFyTW9udGhBbmRDbGFtcERhdGUoZGF0ZSx5ZWFyLG1vbnRoKzEpfSx1dGlsX3ByZXZZZWFyPWZ1bmN0aW9uKGRhdGUpe3ZhciBhbW91bnQ9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjEseWVhcj1kYXRlLmdldEZ1bGxZZWFyKCksbW9udGg9ZGF0ZS5nZXRNb250aCgpO3JldHVybiBjaGFuZ2VZZWFyTW9udGhBbmRDbGFtcERhdGUoZGF0ZSx5ZWFyLWFtb3VudCxtb250aCl9LHV0aWxfbmV4dFllYXI9ZnVuY3Rpb24oZGF0ZSl7dmFyIGFtb3VudD0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MSx5ZWFyPWRhdGUuZ2V0RnVsbFllYXIoKSxtb250aD1kYXRlLmdldE1vbnRoKCk7cmV0dXJuIGNoYW5nZVllYXJNb250aEFuZENsYW1wRGF0ZShkYXRlLHllYXIrYW1vdW50LG1vbnRoKX0sZXh0cmFjdERhdGVGb3JtYXQ9ZnVuY3Rpb24oZm9ybWF0KXtyZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xXP217MSwyfXxcVz9aWi9nLCIiKS5yZXBsYWNlKC9cVz9oezEsMn18XFc/c3sxLDN9fFxXP2EvZ2ksIiIpLnRyaW0oKX0sZXh0cmFjdFRpbWVGb3JtYXQ9ZnVuY3Rpb24oZm9ybWF0KXtyZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xXP0R7MSwyfXxcVz9Eb3xcVz9kezEsNH18XFc/TXsxLDR9fFxXP3l7Miw0fS9nLCIiKS50cmltKCl9LE5ld1BvcHBlcj17cHJvcHM6e2FwcGVuZFRvQm9keTp2dWVfcG9wcGVyX2RlZmF1bHQuYS5wcm9wcy5hcHBlbmRUb0JvZHksb2Zmc2V0OnZ1ZV9wb3BwZXJfZGVmYXVsdC5hLnByb3BzLm9mZnNldCxib3VuZGFyaWVzUGFkZGluZzp2dWVfcG9wcGVyX2RlZmF1bHQuYS5wcm9wcy5ib3VuZGFyaWVzUGFkZGluZyxhcnJvd09mZnNldDp2dWVfcG9wcGVyX2RlZmF1bHQuYS5wcm9wcy5hcnJvd09mZnNldH0sbWV0aG9kczp2dWVfcG9wcGVyX2RlZmF1bHQuYS5tZXRob2RzLGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gbWVyZ2VfZGVmYXVsdCgpKHt2aXNpYmxlQXJyb3c6ITB9LHZ1ZV9wb3BwZXJfZGVmYXVsdC5hLmRhdGEpfSxiZWZvcmVEZXN0cm95OnZ1ZV9wb3BwZXJfZGVmYXVsdC5hLmJlZm9yZURlc3Ryb3l9LERFRkFVTFRfRk9STUFUUz17ZGF0ZToieXl5eS1NTS1kZCIsbW9udGg6Inl5eXktTU0iLGRhdGV0aW1lOiJ5eXl5LU1NLWRkIEhIOm1tOnNzIix0aW1lOiJISDptbTpzcyIsd2VlazoieXl5eXdXVyIsdGltZXJhbmdlOiJISDptbTpzcyIsZGF0ZXJhbmdlOiJ5eXl5LU1NLWRkIixkYXRldGltZXJhbmdlOiJ5eXl5LU1NLWRkIEhIOm1tOnNzIix5ZWFyOiJ5eXl5In0sSEFWRV9UUklHR0VSX1RZUEVTPVsiZGF0ZSIsImRhdGV0aW1lIiwidGltZSIsInRpbWUtc2VsZWN0Iiwid2VlayIsIm1vbnRoIiwieWVhciIsImRhdGVyYW5nZSIsInRpbWVyYW5nZSIsImRhdGV0aW1lcmFuZ2UiLCJkYXRlcyJdLHBpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX0RBVEVfRk9STUFUVEVSPWZ1bmN0aW9uKHZhbHVlLGZvcm1hdCl7cmV0dXJuInRpbWVzdGFtcCI9PT1mb3JtYXQ/dmFsdWUuZ2V0VGltZSgpOnV0aWxfZm9ybWF0RGF0ZSh2YWx1ZSxmb3JtYXQpfSxwaWNrZXJ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19EQVRFX1BBUlNFUj1mdW5jdGlvbih0ZXh0LGZvcm1hdCl7cmV0dXJuInRpbWVzdGFtcCI9PT1mb3JtYXQ/bmV3IERhdGUoTnVtYmVyKHRleHQpKTp1dGlsX3BhcnNlRGF0ZSh0ZXh0LGZvcm1hdCl9LFJBTkdFX0ZPUk1BVFRFUj1mdW5jdGlvbih2YWx1ZSxmb3JtYXQpe2lmKEFycmF5LmlzQXJyYXkodmFsdWUpJiYyPT09dmFsdWUubGVuZ3RoKXt2YXIgc3RhcnQ9dmFsdWVbMF0sZW5kPXZhbHVlWzFdO2lmKHN0YXJ0JiZlbmQpcmV0dXJuW3BpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX0RBVEVfRk9STUFUVEVSKHN0YXJ0LGZvcm1hdCkscGlja2VydnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfREFURV9GT1JNQVRURVIoZW5kLGZvcm1hdCldfXJldHVybiIifSxSQU5HRV9QQVJTRVI9ZnVuY3Rpb24oYXJyYXksZm9ybWF0LHNlcGFyYXRvcil7aWYoQXJyYXkuaXNBcnJheShhcnJheSl8fChhcnJheT1hcnJheS5zcGxpdChzZXBhcmF0b3IpKSwyIT09YXJyYXkubGVuZ3RoKXJldHVybltdO3ZhciByYW5nZTE9YXJyYXlbMF0scmFuZ2UyPWFycmF5WzFdO3JldHVybltwaWNrZXJ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19EQVRFX1BBUlNFUihyYW5nZTEsZm9ybWF0KSxwaWNrZXJ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19EQVRFX1BBUlNFUihyYW5nZTIsZm9ybWF0KV19LFRZUEVfVkFMVUVfUkVTT0xWRVJfTUFQPXtkZWZhdWx0Ontmb3JtYXR0ZXI6ZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZT8iIit2YWx1ZToiIn0scGFyc2VyOmZ1bmN0aW9uKHRleHQpe3JldHVybiB2b2lkIDA9PT10ZXh0fHwiIj09PXRleHQ/bnVsbDp0ZXh0fX0sd2Vlazp7Zm9ybWF0dGVyOmZ1bmN0aW9uKHZhbHVlLGZvcm1hdCl7dmFyIHdlZWs9Z2V0V2Vla051bWJlcih2YWx1ZSksbW9udGg9dmFsdWUuZ2V0TW9udGgoKSx0cnVlRGF0ZT1uZXcgRGF0ZSh2YWx1ZSk7MT09PXdlZWsmJjExPT09bW9udGgmJih0cnVlRGF0ZS5zZXRIb3VycygwLDAsMCwwKSx0cnVlRGF0ZS5zZXREYXRlKHRydWVEYXRlLmdldERhdGUoKSszLSh0cnVlRGF0ZS5nZXREYXkoKSs2KSU3KSk7dmFyIGRhdGU9dXRpbF9mb3JtYXREYXRlKHRydWVEYXRlLGZvcm1hdCk7cmV0dXJuIGRhdGU9L1dXLy50ZXN0KGRhdGUpP2RhdGUucmVwbGFjZSgvV1cvLHdlZWs8MTA/IjAiK3dlZWs6d2Vlayk6ZGF0ZS5yZXBsYWNlKC9XLyx3ZWVrKX0scGFyc2VyOmZ1bmN0aW9uKHRleHQpe3ZhciBhcnJheT0odGV4dHx8IiIpLnNwbGl0KCJ3Iik7aWYoMj09PWFycmF5Lmxlbmd0aCl7dmFyIHllYXI9TnVtYmVyKGFycmF5WzBdKSxtb250aD1OdW1iZXIoYXJyYXlbMV0pO2lmKCFpc05hTih5ZWFyKSYmIWlzTmFOKG1vbnRoKSYmbW9udGg8NTQpcmV0dXJuIHRleHR9cmV0dXJuIG51bGx9fSxkYXRlOntmb3JtYXR0ZXI6cGlja2VydnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfREFURV9GT1JNQVRURVIscGFyc2VyOnBpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX0RBVEVfUEFSU0VSfSxkYXRldGltZTp7Zm9ybWF0dGVyOnBpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX0RBVEVfRk9STUFUVEVSLHBhcnNlcjpwaWNrZXJ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19EQVRFX1BBUlNFUn0sZGF0ZXJhbmdlOntmb3JtYXR0ZXI6UkFOR0VfRk9STUFUVEVSLHBhcnNlcjpSQU5HRV9QQVJTRVJ9LGRhdGV0aW1lcmFuZ2U6e2Zvcm1hdHRlcjpSQU5HRV9GT1JNQVRURVIscGFyc2VyOlJBTkdFX1BBUlNFUn0sdGltZXJhbmdlOntmb3JtYXR0ZXI6UkFOR0VfRk9STUFUVEVSLHBhcnNlcjpSQU5HRV9QQVJTRVJ9LHRpbWU6e2Zvcm1hdHRlcjpwaWNrZXJ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19EQVRFX0ZPUk1BVFRFUixwYXJzZXI6cGlja2VydnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfREFURV9QQVJTRVJ9LG1vbnRoOntmb3JtYXR0ZXI6cGlja2VydnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfREFURV9GT1JNQVRURVIscGFyc2VyOnBpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX0RBVEVfUEFSU0VSfSx5ZWFyOntmb3JtYXR0ZXI6cGlja2VydnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfREFURV9GT1JNQVRURVIscGFyc2VyOnBpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX0RBVEVfUEFSU0VSfSxudW1iZXI6e2Zvcm1hdHRlcjpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlPyIiK3ZhbHVlOiIifSxwYXJzZXI6ZnVuY3Rpb24odGV4dCl7dmFyIHJlc3VsdD1OdW1iZXIodGV4dCk7cmV0dXJuIGlzTmFOKHRleHQpP251bGw6cmVzdWx0fX0sZGF0ZXM6e2Zvcm1hdHRlcjpmdW5jdGlvbih2YWx1ZSxmb3JtYXQpe3JldHVybiB2YWx1ZS5tYXAoZnVuY3Rpb24oZGF0ZSl7cmV0dXJuIHBpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX0RBVEVfRk9STUFUVEVSKGRhdGUsZm9ybWF0KX0pfSxwYXJzZXI6ZnVuY3Rpb24odmFsdWUsZm9ybWF0KXtyZXR1cm4oInN0cmluZyI9PXR5cGVvZiB2YWx1ZT92YWx1ZS5zcGxpdCgiLCAiKTp2YWx1ZSkubWFwKGZ1bmN0aW9uKGRhdGUpe3JldHVybiBkYXRlIGluc3RhbmNlb2YgRGF0ZT9kYXRlOnBpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX0RBVEVfUEFSU0VSKGRhdGUsZm9ybWF0KX0pfX19LFBMQUNFTUVOVF9NQVA9e2xlZnQ6ImJvdHRvbS1zdGFydCIsY2VudGVyOiJib3R0b20iLHJpZ2h0OiJib3R0b20tZW5kIn0scGFyc2VBc0Zvcm1hdEFuZFR5cGU9ZnVuY3Rpb24odmFsdWUsY3VzdG9tRm9ybWF0LHR5cGUpe3ZhciByYW5nZVNlcGFyYXRvcj0zPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106Ii0iO3JldHVybiB2YWx1ZT8oMCwoVFlQRV9WQUxVRV9SRVNPTFZFUl9NQVBbdHlwZV18fFRZUEVfVkFMVUVfUkVTT0xWRVJfTUFQLmRlZmF1bHQpLnBhcnNlcikodmFsdWUsY3VzdG9tRm9ybWF0fHxERUZBVUxUX0ZPUk1BVFNbdHlwZV0scmFuZ2VTZXBhcmF0b3IpOm51bGx9LGZvcm1hdEFzRm9ybWF0QW5kVHlwZT1mdW5jdGlvbih2YWx1ZSxjdXN0b21Gb3JtYXQsdHlwZSl7cmV0dXJuIHZhbHVlPygwLChUWVBFX1ZBTFVFX1JFU09MVkVSX01BUFt0eXBlXXx8VFlQRV9WQUxVRV9SRVNPTFZFUl9NQVAuZGVmYXVsdCkuZm9ybWF0dGVyKSh2YWx1ZSxjdXN0b21Gb3JtYXR8fERFRkFVTFRfRk9STUFUU1t0eXBlXSk6bnVsbH0sdmFsdWVFcXVhbHM9ZnVuY3Rpb24oYSxiKXt2YXIgZGF0ZUVxdWFscz1mdW5jdGlvbihhLGIpe3ZhciBhSXNEYXRlPWEgaW5zdGFuY2VvZiBEYXRlLGJJc0RhdGU9YiBpbnN0YW5jZW9mIERhdGU7cmV0dXJuIGFJc0RhdGUmJmJJc0RhdGU/YS5nZXRUaW1lKCk9PT1iLmdldFRpbWUoKTohYUlzRGF0ZSYmIWJJc0RhdGUmJmE9PT1ifSxhSXNBcnJheT1hIGluc3RhbmNlb2YgQXJyYXksYklzQXJyYXk9YiBpbnN0YW5jZW9mIEFycmF5O3JldHVybiBhSXNBcnJheSYmYklzQXJyYXk/YS5sZW5ndGg9PT1iLmxlbmd0aCYmYS5ldmVyeShmdW5jdGlvbihpdGVtLGluZGV4KXtyZXR1cm4gZGF0ZUVxdWFscyhpdGVtLGJbaW5kZXhdKX0pOiFhSXNBcnJheSYmIWJJc0FycmF5JiZkYXRlRXF1YWxzKGEsYil9LGlzU3RyaW5nPWZ1bmN0aW9uKHZhbCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB2YWx8fHZhbCBpbnN0YW5jZW9mIFN0cmluZ30scGlja2VydnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfdmFsaWRhdG9yPWZ1bmN0aW9uKHZhbCl7cmV0dXJuIG51bGw9PXZhbHx8aXNTdHJpbmcodmFsKXx8QXJyYXkuaXNBcnJheSh2YWwpJiYyPT09dmFsLmxlbmd0aCYmdmFsLmV2ZXJ5KGlzU3RyaW5nKX0scGlja2VyX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe21peGluczpbZW1pdHRlcl9kZWZhdWx0LmEsTmV3UG9wcGVyXSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn0sZWxGb3JtSXRlbTp7ZGVmYXVsdDoiIn19LHByb3BzOntzaXplOlN0cmluZyxmb3JtYXQ6U3RyaW5nLHZhbHVlRm9ybWF0OlN0cmluZyxyZWFkb25seTpCb29sZWFuLHBsYWNlaG9sZGVyOlN0cmluZyxzdGFydFBsYWNlaG9sZGVyOlN0cmluZyxlbmRQbGFjZWhvbGRlcjpTdHJpbmcscHJlZml4SWNvbjpTdHJpbmcsY2xlYXJJY29uOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJlbC1pY29uLWNpcmNsZS1jbG9zZSJ9LG5hbWU6e2RlZmF1bHQ6IiIsdmFsaWRhdG9yOnBpY2tlcnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX3ZhbGlkYXRvcn0sZGlzYWJsZWQ6Qm9vbGVhbixjbGVhcmFibGU6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxpZDp7ZGVmYXVsdDoiIix2YWxpZGF0b3I6cGlja2VydnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfdmFsaWRhdG9yfSxwb3BwZXJDbGFzczpTdHJpbmcsZWRpdGFibGU6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxhbGlnbjp7dHlwZTpTdHJpbmcsZGVmYXVsdDoibGVmdCJ9LHZhbHVlOnt9LGRlZmF1bHRWYWx1ZTp7fSxkZWZhdWx0VGltZTp7fSxyYW5nZVNlcGFyYXRvcjp7ZGVmYXVsdDoiLSJ9LHBpY2tlck9wdGlvbnM6e30sdW5saW5rUGFuZWxzOkJvb2xlYW4sdmFsaWRhdGVFdmVudDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9fSxjb21wb25lbnRzOntFbElucHV0OmlucHV0X2RlZmF1bHQuYX0sZGlyZWN0aXZlczp7Q2xpY2tvdXRzaWRlOmNsaWNrb3V0c2lkZV9kZWZhdWx0LmF9LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cGlja2VyVmlzaWJsZTohMSxzaG93Q2xvc2U6ITEsdXNlcklucHV0Om51bGwsdmFsdWVPbk9wZW46bnVsbCx1bndhdGNoUGlja2VyT3B0aW9uczpudWxsfX0sd2F0Y2g6e3BpY2tlclZpc2libGU6ZnVuY3Rpb24odmFsKXt0aGlzLnJlYWRvbmx5fHx0aGlzLnBpY2tlckRpc2FibGVkfHwodmFsPyh0aGlzLnNob3dQaWNrZXIoKSx0aGlzLnZhbHVlT25PcGVuPUFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSk/W10uY29uY2F0KHRoaXMudmFsdWUpOnRoaXMudmFsdWUpOih0aGlzLmhpZGVQaWNrZXIoKSx0aGlzLmVtaXRDaGFuZ2UodGhpcy52YWx1ZSksdGhpcy51c2VySW5wdXQ9bnVsbCx0aGlzLnZhbGlkYXRlRXZlbnQmJnRoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmJsdXIiKSx0aGlzLiRlbWl0KCJibHVyIix0aGlzKSx0aGlzLmJsdXIoKSkpfSxwYXJzZWRWYWx1ZTp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odmFsKXt0aGlzLnBpY2tlciYmKHRoaXMucGlja2VyLnZhbHVlPXZhbCl9fSxkZWZhdWx0VmFsdWU6ZnVuY3Rpb24odmFsKXt0aGlzLnBpY2tlciYmKHRoaXMucGlja2VyLmRlZmF1bHRWYWx1ZT12YWwpfSx2YWx1ZTpmdW5jdGlvbih2YWwsb2xkVmFsKXt2YWx1ZUVxdWFscyh2YWwsb2xkVmFsKXx8dGhpcy5waWNrZXJWaXNpYmxlfHwhdGhpcy52YWxpZGF0ZUV2ZW50fHx0aGlzLmRpc3BhdGNoKCJFbEZvcm1JdGVtIiwiZWwuZm9ybS5jaGFuZ2UiLHZhbCl9fSxjb21wdXRlZDp7cmFuZ2VkOmZ1bmN0aW9uKCl7cmV0dXJuLTE8dGhpcy50eXBlLmluZGV4T2YoInJhbmdlIil9LHJlZmVyZW5jZTpmdW5jdGlvbigpe3ZhciByZWZlcmVuY2U9dGhpcy4kcmVmcy5yZWZlcmVuY2U7cmV0dXJuIHJlZmVyZW5jZS4kZWx8fHJlZmVyZW5jZX0scmVmSW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWZlcmVuY2U/W10uc2xpY2UuY2FsbCh0aGlzLnJlZmVyZW5jZS5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCIpKTpbXX0sdmFsdWVJc0VtcHR5OmZ1bmN0aW9uKCl7dmFyIHZhbD10aGlzLnZhbHVlO2lmKEFycmF5LmlzQXJyYXkodmFsKSl7Zm9yKHZhciBpPTAsbGVuPXZhbC5sZW5ndGg7aTxsZW47aSsrKWlmKHZhbFtpXSlyZXR1cm4hMX1lbHNlIGlmKHZhbClyZXR1cm4hMTtyZXR1cm4hMH0sdHJpZ2dlckNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJlZml4SWNvbnx8KC0xIT09dGhpcy50eXBlLmluZGV4T2YoInRpbWUiKT8iZWwtaWNvbi10aW1lIjoiZWwtaWNvbi1kYXRlIil9LHNlbGVjdGlvbk1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4id2VlayI9PT10aGlzLnR5cGU/IndlZWsiOiJtb250aCI9PT10aGlzLnR5cGU/Im1vbnRoIjoieWVhciI9PT10aGlzLnR5cGU/InllYXIiOiJkYXRlcyI9PT10aGlzLnR5cGU/ImRhdGVzIjoiZGF5In0saGF2ZVRyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5zaG93VHJpZ2dlcj90aGlzLnNob3dUcmlnZ2VyOi0xIT09SEFWRV9UUklHR0VSX1RZUEVTLmluZGV4T2YodGhpcy50eXBlKX0sZGlzcGxheVZhbHVlOmZ1bmN0aW9uKCl7dmFyIGZvcm1hdHRlZFZhbHVlPWZvcm1hdEFzRm9ybWF0QW5kVHlwZSh0aGlzLnBhcnNlZFZhbHVlLHRoaXMuZm9ybWF0LHRoaXMudHlwZSx0aGlzLnJhbmdlU2VwYXJhdG9yKTtyZXR1cm4gQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJJbnB1dCk/W3RoaXMudXNlcklucHV0WzBdfHxmb3JtYXR0ZWRWYWx1ZSYmZm9ybWF0dGVkVmFsdWVbMF18fCIiLHRoaXMudXNlcklucHV0WzFdfHxmb3JtYXR0ZWRWYWx1ZSYmZm9ybWF0dGVkVmFsdWVbMV18fCIiXTpudWxsIT09dGhpcy51c2VySW5wdXQ/dGhpcy51c2VySW5wdXQ6Zm9ybWF0dGVkVmFsdWU/ImRhdGVzIj09PXRoaXMudHlwZT9mb3JtYXR0ZWRWYWx1ZS5qb2luKCIsICIpOmZvcm1hdHRlZFZhbHVlOiIifSxwYXJzZWRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlPyJ0aW1lLXNlbGVjdCI9PT10aGlzLnR5cGU/dGhpcy52YWx1ZTppc0RhdGVPYmplY3QodGhpcy52YWx1ZSl8fEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkmJnRoaXMudmFsdWUuZXZlcnkoaXNEYXRlT2JqZWN0KT90aGlzLnZhbHVlOnRoaXMudmFsdWVGb3JtYXQ/cGFyc2VBc0Zvcm1hdEFuZFR5cGUodGhpcy52YWx1ZSx0aGlzLnZhbHVlRm9ybWF0LHRoaXMudHlwZSx0aGlzLnJhbmdlU2VwYXJhdG9yKXx8dGhpcy52YWx1ZTpBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpP3RoaXMudmFsdWUubWFwKGZ1bmN0aW9uKHZhbCl7cmV0dXJuIG5ldyBEYXRlKHZhbCl9KTpuZXcgRGF0ZSh0aGlzLnZhbHVlKTp0aGlzLnZhbHVlfSxfZWxGb3JtSXRlbVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5lbEZvcm1JdGVtfHx7fSkuZWxGb3JtSXRlbVNpemV9LHBpY2tlclNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfHx0aGlzLl9lbEZvcm1JdGVtU2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfSxwaWNrZXJEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGVkfHwodGhpcy5lbEZvcm18fHt9KS5kaXNhYmxlZH0sZmlyc3RJbnB1dElkOmZ1bmN0aW9uKCl7dmFyIG9iaj17fSxpZD12b2lkIDA7cmV0dXJuKGlkPXRoaXMucmFuZ2VkP3RoaXMuaWQmJnRoaXMuaWRbMF06dGhpcy5pZCkmJihvYmouaWQ9aWQpLG9ian0sc2Vjb25kSW5wdXRJZDpmdW5jdGlvbigpe3ZhciBvYmo9e30saWQ9dm9pZCAwO3JldHVybiB0aGlzLnJhbmdlZCYmKGlkPXRoaXMuaWQmJnRoaXMuaWRbMV0pLGlkJiYob2JqLmlkPWlkKSxvYmp9fSxjcmVhdGVkOmZ1bmN0aW9uKCl7dGhpcy5wb3BwZXJPcHRpb25zPXtib3VuZGFyaWVzUGFkZGluZzowLGdwdUFjY2VsZXJhdGlvbjohMX0sdGhpcy5wbGFjZW1lbnQ9UExBQ0VNRU5UX01BUFt0aGlzLmFsaWduXXx8UExBQ0VNRU5UX01BUC5sZWZ0LHRoaXMuJG9uKCJmaWVsZFJlc2V0Iix0aGlzLmhhbmRsZUZpZWxkUmVzZXQpfSxtZXRob2RzOntmb2N1czpmdW5jdGlvbigpe3RoaXMucmFuZ2VkP3RoaXMuaGFuZGxlRm9jdXMoKTp0aGlzLiRyZWZzLnJlZmVyZW5jZS5mb2N1cygpfSxibHVyOmZ1bmN0aW9uKCl7dGhpcy5yZWZJbnB1dC5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0KXtyZXR1cm4gaW5wdXQuYmx1cigpfSl9LHBhcnNlVmFsdWU6ZnVuY3Rpb24odmFsdWUpe3ZhciBpc1BhcnNlZD1pc0RhdGVPYmplY3QodmFsdWUpfHxBcnJheS5pc0FycmF5KHZhbHVlKSYmdmFsdWUuZXZlcnkoaXNEYXRlT2JqZWN0KTtyZXR1cm4gdGhpcy52YWx1ZUZvcm1hdCYmIWlzUGFyc2VkJiZwYXJzZUFzRm9ybWF0QW5kVHlwZSh2YWx1ZSx0aGlzLnZhbHVlRm9ybWF0LHRoaXMudHlwZSx0aGlzLnJhbmdlU2VwYXJhdG9yKXx8dmFsdWV9LGZvcm1hdFRvVmFsdWU6ZnVuY3Rpb24oZGF0ZSl7dmFyIGlzRm9ybWF0dGFibGU9aXNEYXRlT2JqZWN0KGRhdGUpfHxBcnJheS5pc0FycmF5KGRhdGUpJiZkYXRlLmV2ZXJ5KGlzRGF0ZU9iamVjdCk7cmV0dXJuIHRoaXMudmFsdWVGb3JtYXQmJmlzRm9ybWF0dGFibGU/Zm9ybWF0QXNGb3JtYXRBbmRUeXBlKGRhdGUsdGhpcy52YWx1ZUZvcm1hdCx0aGlzLnR5cGUsdGhpcy5yYW5nZVNlcGFyYXRvcik6ZGF0ZX0scGFyc2VTdHJpbmc6ZnVuY3Rpb24odmFsdWUpe3ZhciB0eXBlPUFycmF5LmlzQXJyYXkodmFsdWUpP3RoaXMudHlwZTp0aGlzLnR5cGUucmVwbGFjZSgicmFuZ2UiLCIiKTtyZXR1cm4gcGFyc2VBc0Zvcm1hdEFuZFR5cGUodmFsdWUsdGhpcy5mb3JtYXQsdHlwZSl9LGZvcm1hdFRvU3RyaW5nOmZ1bmN0aW9uKHZhbHVlKXt2YXIgdHlwZT1BcnJheS5pc0FycmF5KHZhbHVlKT90aGlzLnR5cGU6dGhpcy50eXBlLnJlcGxhY2UoInJhbmdlIiwiIik7cmV0dXJuIGZvcm1hdEFzRm9ybWF0QW5kVHlwZSh2YWx1ZSx0aGlzLmZvcm1hdCx0eXBlKX0saGFuZGxlTW91c2VFbnRlcjpmdW5jdGlvbigpe3RoaXMucmVhZG9ubHl8fHRoaXMucGlja2VyRGlzYWJsZWR8fCF0aGlzLnZhbHVlSXNFbXB0eSYmdGhpcy5jbGVhcmFibGUmJih0aGlzLnNob3dDbG9zZT0hMCl9LGhhbmRsZUNoYW5nZTpmdW5jdGlvbigpe2lmKHRoaXMudXNlcklucHV0KXt2YXIgdmFsdWU9dGhpcy5wYXJzZVN0cmluZyh0aGlzLmRpc3BsYXlWYWx1ZSk7dmFsdWUmJih0aGlzLnBpY2tlci52YWx1ZT12YWx1ZSx0aGlzLmlzVmFsaWRWYWx1ZSh2YWx1ZSkmJih0aGlzLmVtaXRJbnB1dCh2YWx1ZSksdGhpcy51c2VySW5wdXQ9bnVsbCkpfSIiPT09dGhpcy51c2VySW5wdXQmJih0aGlzLmVtaXRJbnB1dChudWxsKSx0aGlzLmVtaXRDaGFuZ2UobnVsbCksdGhpcy51c2VySW5wdXQ9bnVsbCl9LGhhbmRsZVN0YXJ0SW5wdXQ6ZnVuY3Rpb24oZXZlbnQpe3RoaXMudXNlcklucHV0P3RoaXMudXNlcklucHV0PVtldmVudC50YXJnZXQudmFsdWUsdGhpcy51c2VySW5wdXRbMV1dOnRoaXMudXNlcklucHV0PVtldmVudC50YXJnZXQudmFsdWUsbnVsbF19LGhhbmRsZUVuZElucHV0OmZ1bmN0aW9uKGV2ZW50KXt0aGlzLnVzZXJJbnB1dD90aGlzLnVzZXJJbnB1dD1bdGhpcy51c2VySW5wdXRbMF0sZXZlbnQudGFyZ2V0LnZhbHVlXTp0aGlzLnVzZXJJbnB1dD1bbnVsbCxldmVudC50YXJnZXQudmFsdWVdfSxoYW5kbGVTdGFydENoYW5nZTpmdW5jdGlvbihldmVudCl7dmFyIHZhbHVlPXRoaXMucGFyc2VTdHJpbmcodGhpcy51c2VySW5wdXQmJnRoaXMudXNlcklucHV0WzBdKTtpZih2YWx1ZSl7dGhpcy51c2VySW5wdXQ9W3RoaXMuZm9ybWF0VG9TdHJpbmcodmFsdWUpLHRoaXMuZGlzcGxheVZhbHVlWzFdXTt2YXIgbmV3VmFsdWU9W3ZhbHVlLHRoaXMucGlja2VyLnZhbHVlJiZ0aGlzLnBpY2tlci52YWx1ZVsxXV07dGhpcy5waWNrZXIudmFsdWU9bmV3VmFsdWUsdGhpcy5pc1ZhbGlkVmFsdWUobmV3VmFsdWUpJiYodGhpcy5lbWl0SW5wdXQobmV3VmFsdWUpLHRoaXMudXNlcklucHV0PW51bGwpfX0saGFuZGxlRW5kQ2hhbmdlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgdmFsdWU9dGhpcy5wYXJzZVN0cmluZyh0aGlzLnVzZXJJbnB1dCYmdGhpcy51c2VySW5wdXRbMV0pO2lmKHZhbHVlKXt0aGlzLnVzZXJJbnB1dD1bdGhpcy5kaXNwbGF5VmFsdWVbMF0sdGhpcy5mb3JtYXRUb1N0cmluZyh2YWx1ZSldO3ZhciBuZXdWYWx1ZT1bdGhpcy5waWNrZXIudmFsdWUmJnRoaXMucGlja2VyLnZhbHVlWzBdLHZhbHVlXTt0aGlzLnBpY2tlci52YWx1ZT1uZXdWYWx1ZSx0aGlzLmlzVmFsaWRWYWx1ZShuZXdWYWx1ZSkmJih0aGlzLmVtaXRJbnB1dChuZXdWYWx1ZSksdGhpcy51c2VySW5wdXQ9bnVsbCl9fSxoYW5kbGVDbGlja0ljb246ZnVuY3Rpb24oZXZlbnQpe3RoaXMucmVhZG9ubHl8fHRoaXMucGlja2VyRGlzYWJsZWR8fCh0aGlzLnNob3dDbG9zZT8odGhpcy52YWx1ZU9uT3Blbj10aGlzLnZhbHVlLGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuZW1pdElucHV0KG51bGwpLHRoaXMuZW1pdENoYW5nZShudWxsKSx0aGlzLnNob3dDbG9zZT0hMSx0aGlzLnBpY2tlciYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucGlja2VyLmhhbmRsZUNsZWFyJiZ0aGlzLnBpY2tlci5oYW5kbGVDbGVhcigpKTp0aGlzLnBpY2tlclZpc2libGU9IXRoaXMucGlja2VyVmlzaWJsZSl9LGhhbmRsZUNsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5waWNrZXJWaXNpYmxlJiYodGhpcy5waWNrZXJWaXNpYmxlPSExLCJkYXRlcyI9PT10aGlzLnR5cGUpKXt2YXIgb2xkVmFsdWU9cGFyc2VBc0Zvcm1hdEFuZFR5cGUodGhpcy52YWx1ZU9uT3Blbix0aGlzLnZhbHVlRm9ybWF0LHRoaXMudHlwZSx0aGlzLnJhbmdlU2VwYXJhdG9yKXx8dGhpcy52YWx1ZU9uT3Blbjt0aGlzLmVtaXRJbnB1dChvbGRWYWx1ZSl9fSxoYW5kbGVGaWVsZFJlc2V0OmZ1bmN0aW9uKGluaXRpYWxWYWx1ZSl7dGhpcy51c2VySW5wdXQ9IiI9PT1pbml0aWFsVmFsdWU/bnVsbDppbml0aWFsVmFsdWV9LGhhbmRsZUZvY3VzOmZ1bmN0aW9uKCl7dmFyIHR5cGU9dGhpcy50eXBlOy0xPT09SEFWRV9UUklHR0VSX1RZUEVTLmluZGV4T2YodHlwZSl8fHRoaXMucGlja2VyVmlzaWJsZXx8KHRoaXMucGlja2VyVmlzaWJsZT0hMCksdGhpcy4kZW1pdCgiZm9jdXMiLHRoaXMpfSxoYW5kbGVLZXlkb3duOmZ1bmN0aW9uKGV2ZW50KXt2YXIgX3RoaXM9dGhpcyxrZXlDb2RlPWV2ZW50LmtleUNvZGU7cmV0dXJuIDI3PT09a2V5Q29kZT8odGhpcy5waWNrZXJWaXNpYmxlPSExLHZvaWQgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkpOjkhPT1rZXlDb2RlPzEzPT09a2V5Q29kZT8oKCIiPT09dGhpcy51c2VySW5wdXR8fHRoaXMuaXNWYWxpZFZhbHVlKHRoaXMucGFyc2VTdHJpbmcodGhpcy5kaXNwbGF5VmFsdWUpKSkmJih0aGlzLmhhbmRsZUNoYW5nZSgpLHRoaXMucGlja2VyVmlzaWJsZT10aGlzLnBpY2tlci52aXNpYmxlPSExLHRoaXMuYmx1cigpKSx2b2lkIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpKTp2b2lkKHRoaXMudXNlcklucHV0P2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpOnRoaXMucGlja2VyJiZ0aGlzLnBpY2tlci5oYW5kbGVLZXlkb3duJiZ0aGlzLnBpY2tlci5oYW5kbGVLZXlkb3duKGV2ZW50KSk6dm9pZCh0aGlzLnJhbmdlZD9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7LTE9PT1fdGhpcy5yZWZJbnB1dC5pbmRleE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpJiYoX3RoaXMucGlja2VyVmlzaWJsZT0hMSxfdGhpcy5ibHVyKCksZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkpfSwwKToodGhpcy5oYW5kbGVDaGFuZ2UoKSx0aGlzLnBpY2tlclZpc2libGU9dGhpcy5waWNrZXIudmlzaWJsZT0hMSx0aGlzLmJsdXIoKSxldmVudC5zdG9wUHJvcGFnYXRpb24oKSkpfSxoYW5kbGVSYW5nZUNsaWNrOmZ1bmN0aW9uKCl7dmFyIHR5cGU9dGhpcy50eXBlOy0xPT09SEFWRV9UUklHR0VSX1RZUEVTLmluZGV4T2YodHlwZSl8fHRoaXMucGlja2VyVmlzaWJsZXx8KHRoaXMucGlja2VyVmlzaWJsZT0hMCksdGhpcy4kZW1pdCgiZm9jdXMiLHRoaXMpfSxoaWRlUGlja2VyOmZ1bmN0aW9uKCl7dGhpcy5waWNrZXImJih0aGlzLnBpY2tlci5yZXNldFZpZXcmJnRoaXMucGlja2VyLnJlc2V0VmlldygpLHRoaXMucGlja2VyVmlzaWJsZT10aGlzLnBpY2tlci52aXNpYmxlPSExLHRoaXMuZGVzdHJveVBvcHBlcigpKX0sc2hvd1BpY2tlcjpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpczt0aGlzLiRpc1NlcnZlcnx8KHRoaXMucGlja2VyfHx0aGlzLm1vdW50UGlja2VyKCksdGhpcy5waWNrZXJWaXNpYmxlPXRoaXMucGlja2VyLnZpc2libGU9ITAsdGhpcy51cGRhdGVQb3BwZXIoKSx0aGlzLnBpY2tlci52YWx1ZT10aGlzLnBhcnNlZFZhbHVlLHRoaXMucGlja2VyLnJlc2V0VmlldyYmdGhpcy5waWNrZXIucmVzZXRWaWV3KCksdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczIucGlja2VyLmFkanVzdFNwaW5uZXJzJiZfdGhpczIucGlja2VyLmFkanVzdFNwaW5uZXJzKCl9KSl9LG1vdW50UGlja2VyOmZ1bmN0aW9uKCl7dmFyIF90aGlzMz10aGlzO3RoaXMucGlja2VyPW5ldyBleHRlcm5hbF92dWVfZGVmYXVsdC5hKHRoaXMucGFuZWwpLiRtb3VudCgpLHRoaXMucGlja2VyLmRlZmF1bHRWYWx1ZT10aGlzLmRlZmF1bHRWYWx1ZSx0aGlzLnBpY2tlci5kZWZhdWx0VGltZT10aGlzLmRlZmF1bHRUaW1lLHRoaXMucGlja2VyLnBvcHBlckNsYXNzPXRoaXMucG9wcGVyQ2xhc3MsdGhpcy5wb3BwZXJFbG09dGhpcy5waWNrZXIuJGVsLHRoaXMucGlja2VyLndpZHRoPXRoaXMucmVmZXJlbmNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLHRoaXMucGlja2VyLnNob3dUaW1lPSJkYXRldGltZSI9PT10aGlzLnR5cGV8fCJkYXRldGltZXJhbmdlIj09PXRoaXMudHlwZSx0aGlzLnBpY2tlci5zZWxlY3Rpb25Nb2RlPXRoaXMuc2VsZWN0aW9uTW9kZSx0aGlzLnBpY2tlci51bmxpbmtQYW5lbHM9dGhpcy51bmxpbmtQYW5lbHMsdGhpcy5waWNrZXIuYXJyb3dDb250cm9sPXRoaXMuYXJyb3dDb250cm9sfHx0aGlzLnRpbWVBcnJvd0NvbnRyb2x8fCExLHRoaXMuJHdhdGNoKCJmb3JtYXQiLGZ1bmN0aW9uKGZvcm1hdCl7X3RoaXMzLnBpY2tlci5mb3JtYXQ9Zm9ybWF0fSk7dmFyIHVwZGF0ZU9wdGlvbnM9ZnVuY3Rpb24oKXt2YXIgb3B0aW9ucz1fdGhpczMucGlja2VyT3B0aW9ucztpZihvcHRpb25zJiZvcHRpb25zLnNlbGVjdGFibGVSYW5nZSl7dmFyIHJhbmdlcz1vcHRpb25zLnNlbGVjdGFibGVSYW5nZSxwYXJzZXI9VFlQRV9WQUxVRV9SRVNPTFZFUl9NQVAuZGF0ZXRpbWVyYW5nZS5wYXJzZXIsZm9ybWF0PURFRkFVTFRfRk9STUFUUy50aW1lcmFuZ2U7cmFuZ2VzPUFycmF5LmlzQXJyYXkocmFuZ2VzKT9yYW5nZXM6W3Jhbmdlc10sX3RoaXMzLnBpY2tlci5zZWxlY3RhYmxlUmFuZ2U9cmFuZ2VzLm1hcChmdW5jdGlvbihyYW5nZSl7cmV0dXJuIHBhcnNlcihyYW5nZSxmb3JtYXQsX3RoaXMzLnJhbmdlU2VwYXJhdG9yKX0pfWZvcih2YXIgb3B0aW9uIGluIG9wdGlvbnMpb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHRpb24pJiYic2VsZWN0YWJsZVJhbmdlIiE9PW9wdGlvbiYmKF90aGlzMy5waWNrZXJbb3B0aW9uXT1vcHRpb25zW29wdGlvbl0pO190aGlzMy5mb3JtYXQmJihfdGhpczMucGlja2VyLmZvcm1hdD1fdGhpczMuZm9ybWF0KX07dXBkYXRlT3B0aW9ucygpLHRoaXMudW53YXRjaFBpY2tlck9wdGlvbnM9dGhpcy4kd2F0Y2goInBpY2tlck9wdGlvbnMiLGZ1bmN0aW9uKCl7cmV0dXJuIHVwZGF0ZU9wdGlvbnMoKX0se2RlZXA6ITB9KSx0aGlzLiRlbC5hcHBlbmRDaGlsZCh0aGlzLnBpY2tlci4kZWwpLHRoaXMucGlja2VyLnJlc2V0VmlldyYmdGhpcy5waWNrZXIucmVzZXRWaWV3KCksdGhpcy5waWNrZXIuJG9uKCJkb2Rlc3Ryb3kiLHRoaXMuZG9EZXN0cm95KSx0aGlzLnBpY2tlci4kb24oInBpY2siLGZ1bmN0aW9uKCl7dmFyIGRhdGU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiIiLHZpc2libGU9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXTtfdGhpczMudXNlcklucHV0PW51bGwsX3RoaXMzLnBpY2tlclZpc2libGU9X3RoaXMzLnBpY2tlci52aXNpYmxlPXZpc2libGUsX3RoaXMzLmVtaXRJbnB1dChkYXRlKSxfdGhpczMucGlja2VyLnJlc2V0VmlldyYmX3RoaXMzLnBpY2tlci5yZXNldFZpZXcoKX0pLHRoaXMucGlja2VyLiRvbigic2VsZWN0LXJhbmdlIixmdW5jdGlvbihzdGFydCxlbmQscG9zKXswIT09X3RoaXMzLnJlZklucHV0Lmxlbmd0aCYmKHBvcyYmIm1pbiIhPT1wb3M/Im1heCI9PT1wb3MmJihfdGhpczMucmVmSW5wdXRbMV0uc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsZW5kKSxfdGhpczMucmVmSW5wdXRbMV0uZm9jdXMoKSk6KF90aGlzMy5yZWZJbnB1dFswXS5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCxlbmQpLF90aGlzMy5yZWZJbnB1dFswXS5mb2N1cygpKSl9KX0sdW5tb3VudFBpY2tlcjpmdW5jdGlvbigpe3RoaXMucGlja2VyJiYodGhpcy5waWNrZXIuJGRlc3Ryb3koKSx0aGlzLnBpY2tlci4kb2ZmKCksImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMudW53YXRjaFBpY2tlck9wdGlvbnMmJnRoaXMudW53YXRjaFBpY2tlck9wdGlvbnMoKSx0aGlzLnBpY2tlci4kZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBpY2tlci4kZWwpKX0sZW1pdENoYW5nZTpmdW5jdGlvbih2YWwpe3ZhbHVlRXF1YWxzKHZhbCx0aGlzLnZhbHVlT25PcGVuKXx8KHRoaXMuJGVtaXQoImNoYW5nZSIsdmFsKSx0aGlzLnZhbHVlT25PcGVuPXZhbCx0aGlzLnZhbGlkYXRlRXZlbnQmJnRoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmNoYW5nZSIsdmFsKSl9LGVtaXRJbnB1dDpmdW5jdGlvbih2YWwpe3ZhciBmb3JtYXR0ZWQ9dGhpcy5mb3JtYXRUb1ZhbHVlKHZhbCk7dmFsdWVFcXVhbHModGhpcy52YWx1ZSxmb3JtYXR0ZWQpfHx0aGlzLiRlbWl0KCJpbnB1dCIsZm9ybWF0dGVkKX0saXNWYWxpZFZhbHVlOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdGhpcy5waWNrZXJ8fHRoaXMubW91bnRQaWNrZXIoKSwhdGhpcy5waWNrZXIuaXNWYWxpZFZhbHVlfHx2YWx1ZSYmdGhpcy5waWNrZXIuaXNWYWxpZFZhbHVlKHZhbHVlKX19fSxwaWNrZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF83OWFlMDY5Zl9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3BpY2tlcl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2RhdGUtcGlja2VyL3NyYy9waWNrZXIudnVlIjt2YXIgcGlja2VyPXBpY2tlcl9jb21wb25lbnQuZXhwb3J0cyxkYXRldnVlX3R5cGVfdGVtcGxhdGVfaWRfMjQ0MGQ0ZWFfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJlbC16b29tLWluLXRvcCJ9LG9uOnsiYWZ0ZXItZW50ZXIiOl92bS5oYW5kbGVFbnRlciwiYWZ0ZXItbGVhdmUiOl92bS5oYW5kbGVMZWF2ZX19LFtfYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLnZpc2libGUsZXhwcmVzc2lvbjoidmlzaWJsZSJ9XSxzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsIGVsLWRhdGUtcGlja2VyIGVsLXBvcHBlciIsY2xhc3M6W3siaGFzLXNpZGViYXIiOl92bS4kc2xvdHMuc2lkZWJhcnx8X3ZtLnNob3J0Y3V0cywiaGFzLXRpbWUiOl92bS5zaG93VGltZX0sX3ZtLnBvcHBlckNsYXNzXX0sW19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsX19ib2R5LXdyYXBwZXIifSxbX3ZtLl90KCJzaWRlYmFyIiksX3ZtLnNob3J0Y3V0cz9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9fc2lkZWJhciJ9LF92bS5fbChfdm0uc2hvcnRjdXRzLGZ1bmN0aW9uKHNob3J0Y3V0LGtleSl7cmV0dXJuIF9jKCJidXR0b24iLHtrZXk6a2V5LHN0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX3Nob3J0Y3V0IixhdHRyczp7dHlwZToiYnV0dG9uIn0sb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhhbmRsZVNob3J0Y3V0Q2xpY2soc2hvcnRjdXQpfX19LFtfdm0uX3YoX3ZtLl9zKHNob3J0Y3V0LnRleHQpKV0pfSksMCk6X3ZtLl9lKCksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2JvZHkifSxbX3ZtLnNob3dUaW1lP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtZGF0ZS1waWNrZXJfX3RpbWUtaGVhZGVyIn0sW19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWRhdGUtcGlja2VyX19lZGl0b3Itd3JhcCJ9LFtfYygiZWwtaW5wdXQiLHthdHRyczp7cGxhY2Vob2xkZXI6X3ZtLnQoImVsLmRhdGVwaWNrZXIuc2VsZWN0RGF0ZSIpLHZhbHVlOl92bS52aXNpYmxlRGF0ZSxzaXplOiJzbWFsbCJ9LG9uOntpbnB1dDpmdW5jdGlvbih2YWwpe3JldHVybiBfdm0udXNlcklucHV0RGF0ZT12YWx9LGNoYW5nZTpfdm0uaGFuZGxlVmlzaWJsZURhdGVDaGFuZ2V9fSldLDEpLF9jKCJzcGFuIix7ZGlyZWN0aXZlczpbe25hbWU6ImNsaWNrb3V0c2lkZSIscmF3TmFtZToidi1jbGlja291dHNpZGUiLHZhbHVlOl92bS5oYW5kbGVUaW1lUGlja0Nsb3NlLGV4cHJlc3Npb246ImhhbmRsZVRpbWVQaWNrQ2xvc2UifV0sc3RhdGljQ2xhc3M6ImVsLWRhdGUtcGlja2VyX19lZGl0b3Itd3JhcCJ9LFtfYygiZWwtaW5wdXQiLHtyZWY6ImlucHV0IixhdHRyczp7cGxhY2Vob2xkZXI6X3ZtLnQoImVsLmRhdGVwaWNrZXIuc2VsZWN0VGltZSIpLHZhbHVlOl92bS52aXNpYmxlVGltZSxzaXplOiJzbWFsbCJ9LG9uOntmb2N1czpmdW5jdGlvbigkZXZlbnQpe192bS50aW1lUGlja2VyVmlzaWJsZT0hMH0saW5wdXQ6ZnVuY3Rpb24odmFsKXtyZXR1cm4gX3ZtLnVzZXJJbnB1dFRpbWU9dmFsfSxjaGFuZ2U6X3ZtLmhhbmRsZVZpc2libGVUaW1lQ2hhbmdlfX0pLF9jKCJ0aW1lLXBpY2tlciIse3JlZjoidGltZXBpY2tlciIsYXR0cnM6eyJ0aW1lLWFycm93LWNvbnRyb2wiOl92bS5hcnJvd0NvbnRyb2wsdmlzaWJsZTpfdm0udGltZVBpY2tlclZpc2libGV9LG9uOntwaWNrOl92bS5oYW5kbGVUaW1lUGljayxtb3VudGVkOl92bS5wcm94eVRpbWVQaWNrZXJEYXRhUHJvcGVydGllc319KV0sMSldKTpfdm0uX2UoKSxfYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6InRpbWUiIT09X3ZtLmN1cnJlbnRWaWV3LGV4cHJlc3Npb246ImN1cnJlbnRWaWV3ICE9PSAndGltZScifV0sc3RhdGljQ2xhc3M6ImVsLWRhdGUtcGlja2VyX19oZWFkZXIiLGNsYXNzOnsiZWwtZGF0ZS1waWNrZXJfX2hlYWRlci0tYm9yZGVyZWQiOiJ5ZWFyIj09PV92bS5jdXJyZW50Vmlld3x8Im1vbnRoIj09PV92bS5jdXJyZW50Vmlld319LFtfYygiYnV0dG9uIix7c3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9faWNvbi1idG4gZWwtZGF0ZS1waWNrZXJfX3ByZXYtYnRuIGVsLWljb24tZC1hcnJvdy1sZWZ0IixhdHRyczp7dHlwZToiYnV0dG9uIiwiYXJpYS1sYWJlbCI6X3ZtLnQoImVsLmRhdGVwaWNrZXIucHJldlllYXIiKX0sb246e2NsaWNrOl92bS5wcmV2WWVhcn19KSxfYygiYnV0dG9uIix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6ImRhdGUiPT09X3ZtLmN1cnJlbnRWaWV3LGV4cHJlc3Npb246ImN1cnJlbnRWaWV3ID09PSAnZGF0ZScifV0sc3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9faWNvbi1idG4gZWwtZGF0ZS1waWNrZXJfX3ByZXYtYnRuIGVsLWljb24tYXJyb3ctbGVmdCIsYXR0cnM6e3R5cGU6ImJ1dHRvbiIsImFyaWEtbGFiZWwiOl92bS50KCJlbC5kYXRlcGlja2VyLnByZXZNb250aCIpfSxvbjp7Y2xpY2s6X3ZtLnByZXZNb250aH19KSxfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1kYXRlLXBpY2tlcl9faGVhZGVyLWxhYmVsIixhdHRyczp7cm9sZToiYnV0dG9uIn0sb246e2NsaWNrOl92bS5zaG93WWVhclBpY2tlcn19LFtfdm0uX3YoX3ZtLl9zKF92bS55ZWFyTGFiZWwpKV0pLF9jKCJzcGFuIix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6ImRhdGUiPT09X3ZtLmN1cnJlbnRWaWV3LGV4cHJlc3Npb246ImN1cnJlbnRWaWV3ID09PSAnZGF0ZScifV0sc3RhdGljQ2xhc3M6ImVsLWRhdGUtcGlja2VyX19oZWFkZXItbGFiZWwiLGNsYXNzOnthY3RpdmU6Im1vbnRoIj09PV92bS5jdXJyZW50Vmlld30sYXR0cnM6e3JvbGU6ImJ1dHRvbiJ9LG9uOntjbGljazpfdm0uc2hvd01vbnRoUGlja2VyfX0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIubW9udGgiKyhfdm0ubW9udGgrMSkpKSldKSxfYygiYnV0dG9uIix7c3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9faWNvbi1idG4gZWwtZGF0ZS1waWNrZXJfX25leHQtYnRuIGVsLWljb24tZC1hcnJvdy1yaWdodCIsYXR0cnM6e3R5cGU6ImJ1dHRvbiIsImFyaWEtbGFiZWwiOl92bS50KCJlbC5kYXRlcGlja2VyLm5leHRZZWFyIil9LG9uOntjbGljazpfdm0ubmV4dFllYXJ9fSksX2MoImJ1dHRvbiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOiJkYXRlIj09PV92bS5jdXJyZW50VmlldyxleHByZXNzaW9uOiJjdXJyZW50VmlldyA9PT0gJ2RhdGUnIn1dLHN0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2ljb24tYnRuIGVsLWRhdGUtcGlja2VyX19uZXh0LWJ0biBlbC1pY29uLWFycm93LXJpZ2h0IixhdHRyczp7dHlwZToiYnV0dG9uIiwiYXJpYS1sYWJlbCI6X3ZtLnQoImVsLmRhdGVwaWNrZXIubmV4dE1vbnRoIil9LG9uOntjbGljazpfdm0ubmV4dE1vbnRofX0pXSksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2NvbnRlbnQifSxbX2MoImRhdGUtdGFibGUiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZToiZGF0ZSI9PT1fdm0uY3VycmVudFZpZXcsZXhwcmVzc2lvbjoiY3VycmVudFZpZXcgPT09ICdkYXRlJyJ9XSxhdHRyczp7InNlbGVjdGlvbi1tb2RlIjpfdm0uc2VsZWN0aW9uTW9kZSwiZmlyc3QtZGF5LW9mLXdlZWsiOl92bS5maXJzdERheU9mV2Vlayx2YWx1ZTpfdm0udmFsdWUsImRlZmF1bHQtdmFsdWUiOl92bS5kZWZhdWx0VmFsdWU/bmV3IERhdGUoX3ZtLmRlZmF1bHRWYWx1ZSk6bnVsbCxkYXRlOl92bS5kYXRlLCJkaXNhYmxlZC1kYXRlIjpfdm0uZGlzYWJsZWREYXRlfSxvbjp7cGljazpfdm0uaGFuZGxlRGF0ZVBpY2t9fSksX2MoInllYXItdGFibGUiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZToieWVhciI9PT1fdm0uY3VycmVudFZpZXcsZXhwcmVzc2lvbjoiY3VycmVudFZpZXcgPT09ICd5ZWFyJyJ9XSxhdHRyczp7dmFsdWU6X3ZtLnZhbHVlLCJkZWZhdWx0LXZhbHVlIjpfdm0uZGVmYXVsdFZhbHVlP25ldyBEYXRlKF92bS5kZWZhdWx0VmFsdWUpOm51bGwsZGF0ZTpfdm0uZGF0ZSwiZGlzYWJsZWQtZGF0ZSI6X3ZtLmRpc2FibGVkRGF0ZX0sb246e3BpY2s6X3ZtLmhhbmRsZVllYXJQaWNrfX0pLF9jKCJtb250aC10YWJsZSIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOiJtb250aCI9PT1fdm0uY3VycmVudFZpZXcsZXhwcmVzc2lvbjoiY3VycmVudFZpZXcgPT09ICdtb250aCcifV0sYXR0cnM6e3ZhbHVlOl92bS52YWx1ZSwiZGVmYXVsdC12YWx1ZSI6X3ZtLmRlZmF1bHRWYWx1ZT9uZXcgRGF0ZShfdm0uZGVmYXVsdFZhbHVlKTpudWxsLGRhdGU6X3ZtLmRhdGUsImRpc2FibGVkLWRhdGUiOl92bS5kaXNhYmxlZERhdGV9LG9uOntwaWNrOl92bS5oYW5kbGVNb250aFBpY2t9fSldLDEpXSldLDIpLF9jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0uZm9vdGVyVmlzaWJsZSYmImRhdGUiPT09X3ZtLmN1cnJlbnRWaWV3LGV4cHJlc3Npb246ImZvb3RlclZpc2libGUgJiYgY3VycmVudFZpZXcgPT09ICdkYXRlJyJ9XSxzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsX19mb290ZXIifSxbX2MoImVsLWJ1dHRvbiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOiJkYXRlcyIhPT1fdm0uc2VsZWN0aW9uTW9kZSxleHByZXNzaW9uOiJzZWxlY3Rpb25Nb2RlICE9PSAnZGF0ZXMnIn1dLHN0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2xpbmstYnRuIixhdHRyczp7c2l6ZToibWluaSIsdHlwZToidGV4dCJ9LG9uOntjbGljazpfdm0uY2hhbmdlVG9Ob3d9fSxbX3ZtLl92KCJcbiAgICAgICAgIitfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIubm93IikpKyJcbiAgICAgICIpXSksX2MoImVsLWJ1dHRvbiIse3N0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2xpbmstYnRuIixhdHRyczp7cGxhaW46IiIsc2l6ZToibWluaSJ9LG9uOntjbGljazpfdm0uY29uZmlybX19LFtfdm0uX3YoIlxuICAgICAgICAiK192bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5jb25maXJtIikpKyJcbiAgICAgICIpXSldLDEpXSldKX0sdGltZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzNkOTM5MDg5X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToiZWwtem9vbS1pbi10b3AifSxvbjp7ImFmdGVyLWxlYXZlIjpmdW5jdGlvbigkZXZlbnQpe192bS4kZW1pdCgiZG9kZXN0cm95Iil9fX0sW19jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0udmlzaWJsZSxleHByZXNzaW9uOiJ2aXNpYmxlIn1dLHN0YXRpY0NsYXNzOiJlbC10aW1lLXBhbmVsIGVsLXBvcHBlciIsY2xhc3M6X3ZtLnBvcHBlckNsYXNzfSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXBhbmVsX19jb250ZW50IixjbGFzczp7Imhhcy1zZWNvbmRzIjpfdm0uc2hvd1NlY29uZHN9fSxbX2MoInRpbWUtc3Bpbm5lciIse3JlZjoic3Bpbm5lciIsYXR0cnM6eyJhcnJvdy1jb250cm9sIjpfdm0udXNlQXJyb3csInNob3ctc2Vjb25kcyI6X3ZtLnNob3dTZWNvbmRzLCJhbS1wbS1tb2RlIjpfdm0uYW1QbU1vZGUsZGF0ZTpfdm0uZGF0ZX0sb246e2NoYW5nZTpfdm0uaGFuZGxlQ2hhbmdlLCJzZWxlY3QtcmFuZ2UiOl92bS5zZXRTZWxlY3Rpb25SYW5nZX19KV0sMSksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXBhbmVsX19mb290ZXIifSxbX2MoImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXBhbmVsX19idG4gY2FuY2VsIixhdHRyczp7dHlwZToiYnV0dG9uIn0sb246e2NsaWNrOl92bS5oYW5kbGVDYW5jZWx9fSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5jYW5jZWwiKSkpXSksX2MoImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXBhbmVsX19idG4iLGNsYXNzOntjb25maXJtOiFfdm0uZGlzYWJsZWR9LGF0dHJzOnt0eXBlOiJidXR0b24ifSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaGFuZGxlQ29uZmlybSgpfX19LFtfdm0uX3YoX3ZtLl9zKF92bS50KCJlbC5kYXRlcGlja2VyLmNvbmZpcm0iKSkpXSldKV0pXSl9LHRpbWVfc3Bpbm5lcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzFmYWNhZGViX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXNwaW5uZXIiLGNsYXNzOnsiaGFzLXNlY29uZHMiOl92bS5zaG93U2Vjb25kc319LFtfdm0uYXJyb3dDb250cm9sP192bS5fZSgpOltfYygiZWwtc2Nyb2xsYmFyIix7cmVmOiJob3VycyIsc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9fd3JhcHBlciIsYXR0cnM6eyJ3cmFwLXN0eWxlIjoibWF4LWhlaWdodDogaW5oZXJpdDsiLCJ2aWV3LWNsYXNzIjoiZWwtdGltZS1zcGlubmVyX19saXN0Iixub3Jlc2l6ZToiIix0YWc6InVsIn0sbmF0aXZlT246e21vdXNlZW50ZXI6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uZW1pdFNlbGVjdFJhbmdlKCJob3VycyIpfSxtb3VzZW1vdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uYWRqdXN0Q3VycmVudFNwaW5uZXIoImhvdXJzIil9fX0sX3ZtLl9sKF92bS5ob3Vyc0xpc3QsZnVuY3Rpb24oZGlzYWJsZWQsaG91cil7cmV0dXJuIF9jKCJsaSIse2tleTpob3VyLHN0YXRpY0NsYXNzOiJlbC10aW1lLXNwaW5uZXJfX2l0ZW0iLGNsYXNzOnthY3RpdmU6aG91cj09PV92bS5ob3VycyxkaXNhYmxlZDpkaXNhYmxlZH0sb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhhbmRsZUNsaWNrKCJob3VycyIse3ZhbHVlOmhvdXIsZGlzYWJsZWQ6ZGlzYWJsZWR9KX19fSxbX3ZtLl92KF92bS5fcygoIjAiKyhfdm0uYW1QbU1vZGU/aG91ciUxMnx8MTI6aG91cikpLnNsaWNlKC0yKSkrX3ZtLl9zKF92bS5hbVBtKGhvdXIpKSldKX0pLDApLF9jKCJlbC1zY3JvbGxiYXIiLHtyZWY6Im1pbnV0ZXMiLHN0YXRpY0NsYXNzOiJlbC10aW1lLXNwaW5uZXJfX3dyYXBwZXIiLGF0dHJzOnsid3JhcC1zdHlsZSI6Im1heC1oZWlnaHQ6IGluaGVyaXQ7Iiwidmlldy1jbGFzcyI6ImVsLXRpbWUtc3Bpbm5lcl9fbGlzdCIsbm9yZXNpemU6IiIsdGFnOiJ1bCJ9LG5hdGl2ZU9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmVtaXRTZWxlY3RSYW5nZSgibWludXRlcyIpfSxtb3VzZW1vdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uYWRqdXN0Q3VycmVudFNwaW5uZXIoIm1pbnV0ZXMiKX19fSxfdm0uX2woX3ZtLm1pbnV0ZXNMaXN0LGZ1bmN0aW9uKGVuYWJsZWQsa2V5KXtyZXR1cm4gX2MoImxpIix7a2V5OmtleSxzdGF0aWNDbGFzczoiZWwtdGltZS1zcGlubmVyX19pdGVtIixjbGFzczp7YWN0aXZlOmtleT09PV92bS5taW51dGVzLGRpc2FibGVkOiFlbmFibGVkfSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaGFuZGxlQ2xpY2soIm1pbnV0ZXMiLHt2YWx1ZTprZXksZGlzYWJsZWQ6ITF9KX19fSxbX3ZtLl92KF92bS5fcygoIjAiK2tleSkuc2xpY2UoLTIpKSldKX0pLDApLF9jKCJlbC1zY3JvbGxiYXIiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0uc2hvd1NlY29uZHMsZXhwcmVzc2lvbjoic2hvd1NlY29uZHMifV0scmVmOiJzZWNvbmRzIixzdGF0aWNDbGFzczoiZWwtdGltZS1zcGlubmVyX193cmFwcGVyIixhdHRyczp7IndyYXAtc3R5bGUiOiJtYXgtaGVpZ2h0OiBpbmhlcml0OyIsInZpZXctY2xhc3MiOiJlbC10aW1lLXNwaW5uZXJfX2xpc3QiLG5vcmVzaXplOiIiLHRhZzoidWwifSxuYXRpdmVPbjp7bW91c2VlbnRlcjpmdW5jdGlvbigkZXZlbnQpe192bS5lbWl0U2VsZWN0UmFuZ2UoInNlY29uZHMiKX0sbW91c2Vtb3ZlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmFkanVzdEN1cnJlbnRTcGlubmVyKCJzZWNvbmRzIil9fX0sX3ZtLl9sKDYwLGZ1bmN0aW9uKHNlY29uZCxrZXkpe3JldHVybiBfYygibGkiLHtrZXk6a2V5LHN0YXRpY0NsYXNzOiJlbC10aW1lLXNwaW5uZXJfX2l0ZW0iLGNsYXNzOnthY3RpdmU6a2V5PT09X3ZtLnNlY29uZHN9LG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe192bS5oYW5kbGVDbGljaygic2Vjb25kcyIse3ZhbHVlOmtleSxkaXNhYmxlZDohMX0pfX19LFtfdm0uX3YoX3ZtLl9zKCgiMCIra2V5KS5zbGljZSgtMikpKV0pfSksMCldLF92bS5hcnJvd0NvbnRyb2w/W19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtdGltZS1zcGlubmVyX193cmFwcGVyIGlzLWFycm93Iixvbjp7bW91c2VlbnRlcjpmdW5jdGlvbigkZXZlbnQpe192bS5lbWl0U2VsZWN0UmFuZ2UoImhvdXJzIil9fX0sW19jKCJpIix7ZGlyZWN0aXZlczpbe25hbWU6InJlcGVhdC1jbGljayIscmF3TmFtZToidi1yZXBlYXQtY2xpY2siLHZhbHVlOl92bS5kZWNyZWFzZSxleHByZXNzaW9uOiJkZWNyZWFzZSJ9XSxzdGF0aWNDbGFzczoiZWwtdGltZS1zcGlubmVyX19hcnJvdyBlbC1pY29uLWFycm93LXVwIn0pLF9jKCJpIix7ZGlyZWN0aXZlczpbe25hbWU6InJlcGVhdC1jbGljayIscmF3TmFtZToidi1yZXBlYXQtY2xpY2siLHZhbHVlOl92bS5pbmNyZWFzZSxleHByZXNzaW9uOiJpbmNyZWFzZSJ9XSxzdGF0aWNDbGFzczoiZWwtdGltZS1zcGlubmVyX19hcnJvdyBlbC1pY29uLWFycm93LWRvd24ifSksX2MoInVsIix7cmVmOiJob3VycyIsc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9fbGlzdCJ9LF92bS5fbChfdm0uYXJyb3dIb3VyTGlzdCxmdW5jdGlvbihob3VyLGtleSl7cmV0dXJuIF9jKCJsaSIse2tleTprZXksc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9faXRlbSIsY2xhc3M6e2FjdGl2ZTpob3VyPT09X3ZtLmhvdXJzLGRpc2FibGVkOl92bS5ob3Vyc0xpc3RbaG91cl19fSxbX3ZtLl92KF92bS5fcyh2b2lkIDA9PT1ob3VyPyIiOigiMCIrKF92bS5hbVBtTW9kZT9ob3VyJTEyfHwxMjpob3VyKSkuc2xpY2UoLTIpK192bS5hbVBtKGhvdXIpKSldKX0pLDApXSksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXNwaW5uZXJfX3dyYXBwZXIgaXMtYXJyb3ciLG9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmVtaXRTZWxlY3RSYW5nZSgibWludXRlcyIpfX19LFtfYygiaSIse2RpcmVjdGl2ZXM6W3tuYW1lOiJyZXBlYXQtY2xpY2siLHJhd05hbWU6InYtcmVwZWF0LWNsaWNrIix2YWx1ZTpfdm0uZGVjcmVhc2UsZXhwcmVzc2lvbjoiZGVjcmVhc2UifV0sc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9fYXJyb3cgZWwtaWNvbi1hcnJvdy11cCJ9KSxfYygiaSIse2RpcmVjdGl2ZXM6W3tuYW1lOiJyZXBlYXQtY2xpY2siLHJhd05hbWU6InYtcmVwZWF0LWNsaWNrIix2YWx1ZTpfdm0uaW5jcmVhc2UsZXhwcmVzc2lvbjoiaW5jcmVhc2UifV0sc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9fYXJyb3cgZWwtaWNvbi1hcnJvdy1kb3duIn0pLF9jKCJ1bCIse3JlZjoibWludXRlcyIsc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9fbGlzdCJ9LF92bS5fbChfdm0uYXJyb3dNaW51dGVMaXN0LGZ1bmN0aW9uKG1pbnV0ZSxrZXkpe3JldHVybiBfYygibGkiLHtrZXk6a2V5LHN0YXRpY0NsYXNzOiJlbC10aW1lLXNwaW5uZXJfX2l0ZW0iLGNsYXNzOnthY3RpdmU6bWludXRlPT09X3ZtLm1pbnV0ZXN9fSxbX3ZtLl92KCJcbiAgICAgICAgICAiK192bS5fcyh2b2lkIDA9PT1taW51dGU/IiI6KCIwIittaW51dGUpLnNsaWNlKC0yKSkrIlxuICAgICAgICAiKV0pfSksMCldKSxfdm0uc2hvd1NlY29uZHM/X2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXNwaW5uZXJfX3dyYXBwZXIgaXMtYXJyb3ciLG9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmVtaXRTZWxlY3RSYW5nZSgic2Vjb25kcyIpfX19LFtfYygiaSIse2RpcmVjdGl2ZXM6W3tuYW1lOiJyZXBlYXQtY2xpY2siLHJhd05hbWU6InYtcmVwZWF0LWNsaWNrIix2YWx1ZTpfdm0uZGVjcmVhc2UsZXhwcmVzc2lvbjoiZGVjcmVhc2UifV0sc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9fYXJyb3cgZWwtaWNvbi1hcnJvdy11cCJ9KSxfYygiaSIse2RpcmVjdGl2ZXM6W3tuYW1lOiJyZXBlYXQtY2xpY2siLHJhd05hbWU6InYtcmVwZWF0LWNsaWNrIix2YWx1ZTpfdm0uaW5jcmVhc2UsZXhwcmVzc2lvbjoiaW5jcmVhc2UifV0sc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9fYXJyb3cgZWwtaWNvbi1hcnJvdy1kb3duIn0pLF9jKCJ1bCIse3JlZjoic2Vjb25kcyIsc3RhdGljQ2xhc3M6ImVsLXRpbWUtc3Bpbm5lcl9fbGlzdCJ9LF92bS5fbChfdm0uYXJyb3dTZWNvbmRMaXN0LGZ1bmN0aW9uKHNlY29uZCxrZXkpe3JldHVybiBfYygibGkiLHtrZXk6a2V5LHN0YXRpY0NsYXNzOiJlbC10aW1lLXNwaW5uZXJfX2l0ZW0iLGNsYXNzOnthY3RpdmU6c2Vjb25kPT09X3ZtLnNlY29uZHN9fSxbX3ZtLl92KCJcbiAgICAgICAgICAiK192bS5fcyh2b2lkIDA9PT1zZWNvbmQ/IiI6KCIwIitzZWNvbmQpLnNsaWNlKC0yKSkrIlxuICAgICAgICAiKV0pfSksMCldKTpfdm0uX2UoKV06X3ZtLl9lKCldLDIpfTt0aW1lX3NwaW5uZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF8xZmFjYWRlYl9yZW5kZXIuX3dpdGhTdHJpcHBlZD10aW1ldnVlX3R5cGVfdGVtcGxhdGVfaWRfM2Q5MzkwODlfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ZGF0ZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzI0NDBkNGVhX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciB0aW1lX3NwaW5uZXJfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7Y29tcG9uZW50czp7RWxTY3JvbGxiYXI6c2Nyb2xsYmFyX2RlZmF1bHQuYX0sZGlyZWN0aXZlczp7cmVwZWF0Q2xpY2s6cmVwZWF0X2NsaWNrfSxwcm9wczp7ZGF0ZTp7fSxkZWZhdWx0VmFsdWU6e30sc2hvd1NlY29uZHM6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxhcnJvd0NvbnRyb2w6Qm9vbGVhbixhbVBtTW9kZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn19LGNvbXB1dGVkOntob3VyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGUuZ2V0SG91cnMoKX0sbWludXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGUuZ2V0TWludXRlcygpfSxzZWNvbmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0ZS5nZXRTZWNvbmRzKCl9LGhvdXJzTGlzdDpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihyYW5nZXMpe3ZhciBob3Vycz1bXSxkaXNhYmxlZEhvdXJzPVtdO2lmKChyYW5nZXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHJhbmdlKXt2YXIgdmFsdWU9cmFuZ2UubWFwKGZ1bmN0aW9uKGRhdGUpe3JldHVybiBkYXRlLmdldEhvdXJzKCl9KTtkaXNhYmxlZEhvdXJzPWRpc2FibGVkSG91cnMuY29uY2F0KGZ1bmN0aW9uKHN0YXJ0LGVuZCl7Zm9yKHZhciByZXN1bHQ9W10saT1zdGFydDtpPD1lbmQ7aSsrKXJlc3VsdC5wdXNoKGkpO3JldHVybiByZXN1bHR9KHZhbHVlWzBdLHZhbHVlWzFdKSl9KSxkaXNhYmxlZEhvdXJzLmxlbmd0aClmb3IodmFyIGk9MDtpPDI0O2krKylob3Vyc1tpXT0tMT09PWRpc2FibGVkSG91cnMuaW5kZXhPZihpKTtlbHNlIGZvcih2YXIgX2k9MDtfaTwyNDtfaSsrKWhvdXJzW19pXT0hMTtyZXR1cm4gaG91cnN9KHRoaXMuc2VsZWN0YWJsZVJhbmdlKX0sbWludXRlc0xpc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gcmFuZ2VzPXRoaXMuc2VsZWN0YWJsZVJhbmdlLGhvdXI9dGhpcy5ob3VycyxtaW51dGVzPW5ldyBBcnJheSg2MCksMDxyYW5nZXMubGVuZ3RoP3Jhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHJhbmdlKXt2YXIgc3RhcnQ9cmFuZ2VbMF0sZW5kPXJhbmdlWzFdLHN0YXJ0SG91cj1zdGFydC5nZXRIb3VycygpLHN0YXJ0TWludXRlPXN0YXJ0LmdldE1pbnV0ZXMoKSxlbmRIb3VyPWVuZC5nZXRIb3VycygpLGVuZE1pbnV0ZT1lbmQuZ2V0TWludXRlcygpO3N0YXJ0SG91cj09PWhvdXImJmVuZEhvdXIhPT1ob3VyP3NldFJhbmdlRGF0YShtaW51dGVzLHN0YXJ0TWludXRlLDYwLCEwKTpzdGFydEhvdXI9PT1ob3VyJiZlbmRIb3VyPT09aG91cj9zZXRSYW5nZURhdGEobWludXRlcyxzdGFydE1pbnV0ZSxlbmRNaW51dGUrMSwhMCk6c3RhcnRIb3VyIT09aG91ciYmZW5kSG91cj09PWhvdXI/c2V0UmFuZ2VEYXRhKG1pbnV0ZXMsMCxlbmRNaW51dGUrMSwhMCk6c3RhcnRIb3VyPGhvdXImJmhvdXI8ZW5kSG91ciYmc2V0UmFuZ2VEYXRhKG1pbnV0ZXMsMCw2MCwhMCl9KTpzZXRSYW5nZURhdGEobWludXRlcywwLDYwLCEwKSxtaW51dGVzO3ZhciByYW5nZXMsaG91cixtaW51dGVzfSxhcnJvd0hvdXJMaXN0OmZ1bmN0aW9uKCl7dmFyIGhvdXJzPXRoaXMuaG91cnM7cmV0dXJuWzA8aG91cnM/aG91cnMtMTp2b2lkIDAsaG91cnMsaG91cnM8MjM/aG91cnMrMTp2b2lkIDBdfSxhcnJvd01pbnV0ZUxpc3Q6ZnVuY3Rpb24oKXt2YXIgbWludXRlcz10aGlzLm1pbnV0ZXM7cmV0dXJuWzA8bWludXRlcz9taW51dGVzLTE6dm9pZCAwLG1pbnV0ZXMsbWludXRlczw1OT9taW51dGVzKzE6dm9pZCAwXX0sYXJyb3dTZWNvbmRMaXN0OmZ1bmN0aW9uKCl7dmFyIHNlY29uZHM9dGhpcy5zZWNvbmRzO3JldHVyblswPHNlY29uZHM/c2Vjb25kcy0xOnZvaWQgMCxzZWNvbmRzLHNlY29uZHM8NTk/c2Vjb25kcysxOnZvaWQgMF19fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3NlbGVjdGFibGVSYW5nZTpbXSxjdXJyZW50U2Nyb2xsYmFyOm51bGx9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXM7dGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXshX3RoaXMuYXJyb3dDb250cm9sJiZfdGhpcy5iaW5kU2Nyb2xsRXZlbnQoKX0pfSxtZXRob2RzOntpbmNyZWFzZTpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsRG93bigxKX0sZGVjcmVhc2U6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbERvd24oLTEpfSxtb2RpZnlEYXRlRmllbGQ6ZnVuY3Rpb24odHlwZSx2YWx1ZSl7c3dpdGNoKHR5cGUpe2Nhc2UiaG91cnMiOnRoaXMuJGVtaXQoImNoYW5nZSIsbW9kaWZ5VGltZSh0aGlzLmRhdGUsdmFsdWUsdGhpcy5taW51dGVzLHRoaXMuc2Vjb25kcykpO2JyZWFrO2Nhc2UibWludXRlcyI6dGhpcy4kZW1pdCgiY2hhbmdlIixtb2RpZnlUaW1lKHRoaXMuZGF0ZSx0aGlzLmhvdXJzLHZhbHVlLHRoaXMuc2Vjb25kcykpO2JyZWFrO2Nhc2Uic2Vjb25kcyI6dGhpcy4kZW1pdCgiY2hhbmdlIixtb2RpZnlUaW1lKHRoaXMuZGF0ZSx0aGlzLmhvdXJzLHRoaXMubWludXRlcyx2YWx1ZSkpfX0saGFuZGxlQ2xpY2s6ZnVuY3Rpb24odHlwZSxfcmVmKXt2YXIgdmFsdWU9X3JlZi52YWx1ZTtfcmVmLmRpc2FibGVkfHwodGhpcy5tb2RpZnlEYXRlRmllbGQodHlwZSx2YWx1ZSksdGhpcy5lbWl0U2VsZWN0UmFuZ2UodHlwZSksdGhpcy5hZGp1c3RTcGlubmVyKHR5cGUsdmFsdWUpKX0sZW1pdFNlbGVjdFJhbmdlOmZ1bmN0aW9uKHR5cGUpeyJob3VycyI9PT10eXBlP3RoaXMuJGVtaXQoInNlbGVjdC1yYW5nZSIsMCwyKToibWludXRlcyI9PT10eXBlP3RoaXMuJGVtaXQoInNlbGVjdC1yYW5nZSIsMyw1KToic2Vjb25kcyI9PT10eXBlJiZ0aGlzLiRlbWl0KCJzZWxlY3QtcmFuZ2UiLDYsOCksdGhpcy5jdXJyZW50U2Nyb2xsYmFyPXR5cGV9LGJpbmRTY3JvbGxFdmVudDpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpcyxiaW5kRnVudGlvbj1mdW5jdGlvbih0eXBlKXtfdGhpczIuJHJlZnNbdHlwZV0ud3JhcC5vbnNjcm9sbD1mdW5jdGlvbihlKXtfdGhpczIuaGFuZGxlU2Nyb2xsKHR5cGUsZSl9fTtiaW5kRnVudGlvbigiaG91cnMiKSxiaW5kRnVudGlvbigibWludXRlcyIpLGJpbmRGdW50aW9uKCJzZWNvbmRzIil9LGhhbmRsZVNjcm9sbDpmdW5jdGlvbih0eXBlKXt2YXIgdmFsdWU9TWF0aC5taW4oTWF0aC5mbG9vcigodGhpcy4kcmVmc1t0eXBlXS53cmFwLnNjcm9sbFRvcC0oLjUqdGhpcy5zY3JvbGxCYXJIZWlnaHQodHlwZSktMTApL3RoaXMudHlwZUl0ZW1IZWlnaHQodHlwZSkrMykvdGhpcy50eXBlSXRlbUhlaWdodCh0eXBlKSksImhvdXJzIj09PXR5cGU/MjM6NTkpO3RoaXMubW9kaWZ5RGF0ZUZpZWxkKHR5cGUsdmFsdWUpfSxhZGp1c3RTcGlubmVyczpmdW5jdGlvbigpe3RoaXMuYWRqdXN0U3Bpbm5lcigiaG91cnMiLHRoaXMuaG91cnMpLHRoaXMuYWRqdXN0U3Bpbm5lcigibWludXRlcyIsdGhpcy5taW51dGVzKSx0aGlzLmFkanVzdFNwaW5uZXIoInNlY29uZHMiLHRoaXMuc2Vjb25kcyl9LGFkanVzdEN1cnJlbnRTcGlubmVyOmZ1bmN0aW9uKHR5cGUpe3RoaXMuYWRqdXN0U3Bpbm5lcih0eXBlLHRoaXNbdHlwZV0pfSxhZGp1c3RTcGlubmVyOmZ1bmN0aW9uKHR5cGUsdmFsdWUpe2lmKCF0aGlzLmFycm93Q29udHJvbCl7dmFyIGVsPXRoaXMuJHJlZnNbdHlwZV0ud3JhcDtlbCYmKGVsLnNjcm9sbFRvcD1NYXRoLm1heCgwLHZhbHVlKnRoaXMudHlwZUl0ZW1IZWlnaHQodHlwZSkpKX19LHNjcm9sbERvd246ZnVuY3Rpb24oc3RlcCl7dGhpcy5jdXJyZW50U2Nyb2xsYmFyfHx0aGlzLmVtaXRTZWxlY3RSYW5nZSgiaG91cnMiKTt2YXIgbGFiZWw9dGhpcy5jdXJyZW50U2Nyb2xsYmFyLGhvdXJzTGlzdD10aGlzLmhvdXJzTGlzdCxub3c9dGhpc1tsYWJlbF07aWYoImhvdXJzIj09PXRoaXMuY3VycmVudFNjcm9sbGJhcil7dmFyIHRvdGFsPU1hdGguYWJzKHN0ZXApO3N0ZXA9MDxzdGVwPzE6LTE7Zm9yKHZhciBsZW5ndGg9aG91cnNMaXN0Lmxlbmd0aDtsZW5ndGgtLSYmdG90YWw7KWhvdXJzTGlzdFtub3c9KG5vdytzdGVwK2hvdXJzTGlzdC5sZW5ndGgpJWhvdXJzTGlzdC5sZW5ndGhdfHx0b3RhbC0tO2lmKGhvdXJzTGlzdFtub3ddKXJldHVybn1lbHNlIG5vdz0obm93K3N0ZXArNjApJTYwO3RoaXMubW9kaWZ5RGF0ZUZpZWxkKGxhYmVsLG5vdyksdGhpcy5hZGp1c3RTcGlubmVyKGxhYmVsLG5vdyl9LGFtUG06ZnVuY3Rpb24oaG91cil7aWYoISgiYSI9PT10aGlzLmFtUG1Nb2RlLnRvTG93ZXJDYXNlKCkpKXJldHVybiIiO3ZhciBjb250ZW50PWhvdXI8MTI/IiBhbSI6IiBwbSI7cmV0dXJuIkEiPT09dGhpcy5hbVBtTW9kZSYmKGNvbnRlbnQ9Y29udGVudC50b1VwcGVyQ2FzZSgpKSxjb250ZW50fSx0eXBlSXRlbUhlaWdodDpmdW5jdGlvbih0eXBlKXtyZXR1cm4gdGhpcy4kcmVmc1t0eXBlXS4kZWwucXVlcnlTZWxlY3RvcigibGkiKS5vZmZzZXRIZWlnaHR9LHNjcm9sbEJhckhlaWdodDpmdW5jdGlvbih0eXBlKXtyZXR1cm4gdGhpcy4kcmVmc1t0eXBlXS4kZWwub2Zmc2V0SGVpZ2h0fX19LHRpbWVfc3Bpbm5lcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzFmYWNhZGViX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7dGltZV9zcGlubmVyX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvZGF0ZS1waWNrZXIvc3JjL2Jhc2ljL3RpbWUtc3Bpbm5lci52dWUiO3ZhciB0aW1lX3NwaW5uZXI9dGltZV9zcGlubmVyX2NvbXBvbmVudC5leHBvcnRzLHRpbWVfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bWl4aW5zOltsb2NhbGVfZGVmYXVsdC5hXSxjb21wb25lbnRzOntUaW1lU3Bpbm5lcjp0aW1lX3NwaW5uZXJ9LHByb3BzOnt2aXNpYmxlOkJvb2xlYW4sdGltZUFycm93Q29udHJvbDpCb29sZWFufSx3YXRjaDp7dmlzaWJsZTpmdW5jdGlvbih2YWwpe3ZhciBfdGhpcz10aGlzO3ZhbD8odGhpcy5vbGRWYWx1ZT10aGlzLnZhbHVlLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzLiRyZWZzLnNwaW5uZXIuZW1pdFNlbGVjdFJhbmdlKCJob3VycyIpfSkpOnRoaXMubmVlZEluaXRBZGp1c3Q9ITB9LHZhbHVlOmZ1bmN0aW9uKG5ld1ZhbCl7dmFyIF90aGlzMj10aGlzLGRhdGU9dm9pZCAwO25ld1ZhbCBpbnN0YW5jZW9mIERhdGU/ZGF0ZT11dGlsX2xpbWl0VGltZVJhbmdlKG5ld1ZhbCx0aGlzLnNlbGVjdGFibGVSYW5nZSx0aGlzLmZvcm1hdCk6bmV3VmFsfHwoZGF0ZT10aGlzLmRlZmF1bHRWYWx1ZT9uZXcgRGF0ZSh0aGlzLmRlZmF1bHRWYWx1ZSk6bmV3IERhdGUpLHRoaXMuZGF0ZT1kYXRlLHRoaXMudmlzaWJsZSYmdGhpcy5uZWVkSW5pdEFkanVzdCYmKHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKF8pe3JldHVybiBfdGhpczIuYWRqdXN0U3Bpbm5lcnMoKX0pLHRoaXMubmVlZEluaXRBZGp1c3Q9ITEpfSxzZWxlY3RhYmxlUmFuZ2U6ZnVuY3Rpb24odmFsKXt0aGlzLiRyZWZzLnNwaW5uZXIuc2VsZWN0YWJsZVJhbmdlPXZhbH0sZGVmYXVsdFZhbHVlOmZ1bmN0aW9uKHZhbCl7aXNEYXRlKHRoaXMudmFsdWUpfHwodGhpcy5kYXRlPXZhbD9uZXcgRGF0ZSh2YWwpOm5ldyBEYXRlKX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cG9wcGVyQ2xhc3M6IiIsZm9ybWF0OiJISDptbTpzcyIsdmFsdWU6IiIsZGVmYXVsdFZhbHVlOm51bGwsZGF0ZTpuZXcgRGF0ZSxvbGRWYWx1ZTpuZXcgRGF0ZSxzZWxlY3RhYmxlUmFuZ2U6W10sc2VsZWN0aW9uUmFuZ2U6WzAsMl0sZGlzYWJsZWQ6ITEsYXJyb3dDb250cm9sOiExLG5lZWRJbml0QWRqdXN0OiEwfX0sY29tcHV0ZWQ6e3Nob3dTZWNvbmRzOmZ1bmN0aW9uKCl7cmV0dXJuLTEhPT0odGhpcy5mb3JtYXR8fCIiKS5pbmRleE9mKCJzcyIpfSx1c2VBcnJvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFycm93Q29udHJvbHx8dGhpcy50aW1lQXJyb3dDb250cm9sfHwhMX0sYW1QbU1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4tMSE9PSh0aGlzLmZvcm1hdHx8IiIpLmluZGV4T2YoIkEiKT8iQSI6LTEhPT0odGhpcy5mb3JtYXR8fCIiKS5pbmRleE9mKCJhIik/ImEiOiIifX0sbWV0aG9kczp7aGFuZGxlQ2FuY2VsOmZ1bmN0aW9uKCl7dGhpcy4kZW1pdCgicGljayIsdGhpcy5vbGRWYWx1ZSwhMSl9LGhhbmRsZUNoYW5nZTpmdW5jdGlvbihkYXRlKXt0aGlzLnZpc2libGUmJih0aGlzLmRhdGU9Y2xlYXJNaWxsaXNlY29uZHMoZGF0ZSksdGhpcy5pc1ZhbGlkVmFsdWUodGhpcy5kYXRlKSYmdGhpcy4kZW1pdCgicGljayIsdGhpcy5kYXRlLCEwKSl9LHNldFNlbGVjdGlvblJhbmdlOmZ1bmN0aW9uKHN0YXJ0LGVuZCl7dGhpcy4kZW1pdCgic2VsZWN0LXJhbmdlIixzdGFydCxlbmQpLHRoaXMuc2VsZWN0aW9uUmFuZ2U9W3N0YXJ0LGVuZF19LGhhbmRsZUNvbmZpcm06ZnVuY3Rpb24oKXt2YXIgdmlzaWJsZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdLGZpcnN0PWFyZ3VtZW50c1sxXTtpZighZmlyc3Qpe3ZhciBkYXRlPWNsZWFyTWlsbGlzZWNvbmRzKHV0aWxfbGltaXRUaW1lUmFuZ2UodGhpcy5kYXRlLHRoaXMuc2VsZWN0YWJsZVJhbmdlLHRoaXMuZm9ybWF0KSk7dGhpcy4kZW1pdCgicGljayIsZGF0ZSx2aXNpYmxlLGZpcnN0KX19LGhhbmRsZUtleWRvd246ZnVuY3Rpb24oZXZlbnQpe3ZhciBrZXlDb2RlPWV2ZW50LmtleUNvZGUsbWFwcGluZz17Mzg6LTEsNDA6MSwzNzotMSwzOToxfTtpZigzNz09PWtleUNvZGV8fDM5PT09a2V5Q29kZSl7dmFyIHN0ZXA9bWFwcGluZ1trZXlDb2RlXTtyZXR1cm4gdGhpcy5jaGFuZ2VTZWxlY3Rpb25SYW5nZShzdGVwKSx2b2lkIGV2ZW50LnByZXZlbnREZWZhdWx0KCl9aWYoMzg9PT1rZXlDb2RlfHw0MD09PWtleUNvZGUpe3ZhciBfc3RlcD1tYXBwaW5nW2tleUNvZGVdO3JldHVybiB0aGlzLiRyZWZzLnNwaW5uZXIuc2Nyb2xsRG93bihfc3RlcCksdm9pZCBldmVudC5wcmV2ZW50RGVmYXVsdCgpfX0saXNWYWxpZFZhbHVlOmZ1bmN0aW9uKGRhdGUpe3JldHVybiB0aW1lV2l0aGluUmFuZ2UoZGF0ZSx0aGlzLnNlbGVjdGFibGVSYW5nZSx0aGlzLmZvcm1hdCl9LGFkanVzdFNwaW5uZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHJlZnMuc3Bpbm5lci5hZGp1c3RTcGlubmVycygpfSxjaGFuZ2VTZWxlY3Rpb25SYW5nZTpmdW5jdGlvbihzdGVwKXt2YXIgbGlzdD1bMCwzXS5jb25jYXQodGhpcy5zaG93U2Vjb25kcz9bNl06W10pLG1hcHBpbmc9WyJob3VycyIsIm1pbnV0ZXMiXS5jb25jYXQodGhpcy5zaG93U2Vjb25kcz9bInNlY29uZHMiXTpbXSksbmV4dD0obGlzdC5pbmRleE9mKHRoaXMuc2VsZWN0aW9uUmFuZ2VbMF0pK3N0ZXArbGlzdC5sZW5ndGgpJWxpc3QubGVuZ3RoO3RoaXMuJHJlZnMuc3Bpbm5lci5lbWl0U2VsZWN0UmFuZ2UobWFwcGluZ1tuZXh0XSl9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzMz10aGlzO3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzMy5oYW5kbGVDb25maXJtKCEwLCEwKX0pLHRoaXMuJGVtaXQoIm1vdW50ZWQiKX19LHRpbWV2dWVfdHlwZV90ZW1wbGF0ZV9pZF8zZDkzOTA4OV9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3RpbWVfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9kYXRlLXBpY2tlci9zcmMvcGFuZWwvdGltZS52dWUiO3ZhciBwYW5lbF90aW1lPXRpbWVfY29tcG9uZW50LmV4cG9ydHMseWVhcl90YWJsZXZ1ZV90eXBlX3RlbXBsYXRlX2lkX2M4NmFiNWUwX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInRhYmxlIix7c3RhdGljQ2xhc3M6ImVsLXllYXItdGFibGUiLG9uOntjbGljazpfdm0uaGFuZGxlWWVhclRhYmxlQ2xpY2t9fSxbX2MoInRib2R5IixbX2MoInRyIixbX2MoInRkIix7c3RhdGljQ2xhc3M6ImF2YWlsYWJsZSIsY2xhc3M6X3ZtLmdldENlbGxTdHlsZShfdm0uc3RhcnRZZWFyKzApfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS5zdGFydFllYXIpKV0pXSksX2MoInRkIix7c3RhdGljQ2xhc3M6ImF2YWlsYWJsZSIsY2xhc3M6X3ZtLmdldENlbGxTdHlsZShfdm0uc3RhcnRZZWFyKzEpfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS5zdGFydFllYXIrMSkpXSldKSxfYygidGQiLHtzdGF0aWNDbGFzczoiYXZhaWxhYmxlIixjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKF92bS5zdGFydFllYXIrMil9LFtfYygiYSIse3N0YXRpY0NsYXNzOiJjZWxsIn0sW192bS5fdihfdm0uX3MoX3ZtLnN0YXJ0WWVhcisyKSldKV0pLF9jKCJ0ZCIse3N0YXRpY0NsYXNzOiJhdmFpbGFibGUiLGNsYXNzOl92bS5nZXRDZWxsU3R5bGUoX3ZtLnN0YXJ0WWVhciszKX0sW19jKCJhIix7c3RhdGljQ2xhc3M6ImNlbGwifSxbX3ZtLl92KF92bS5fcyhfdm0uc3RhcnRZZWFyKzMpKV0pXSldKSxfYygidHIiLFtfYygidGQiLHtzdGF0aWNDbGFzczoiYXZhaWxhYmxlIixjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKF92bS5zdGFydFllYXIrNCl9LFtfYygiYSIse3N0YXRpY0NsYXNzOiJjZWxsIn0sW192bS5fdihfdm0uX3MoX3ZtLnN0YXJ0WWVhcis0KSldKV0pLF9jKCJ0ZCIse3N0YXRpY0NsYXNzOiJhdmFpbGFibGUiLGNsYXNzOl92bS5nZXRDZWxsU3R5bGUoX3ZtLnN0YXJ0WWVhcis1KX0sW19jKCJhIix7c3RhdGljQ2xhc3M6ImNlbGwifSxbX3ZtLl92KF92bS5fcyhfdm0uc3RhcnRZZWFyKzUpKV0pXSksX2MoInRkIix7c3RhdGljQ2xhc3M6ImF2YWlsYWJsZSIsY2xhc3M6X3ZtLmdldENlbGxTdHlsZShfdm0uc3RhcnRZZWFyKzYpfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS5zdGFydFllYXIrNikpXSldKSxfYygidGQiLHtzdGF0aWNDbGFzczoiYXZhaWxhYmxlIixjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKF92bS5zdGFydFllYXIrNyl9LFtfYygiYSIse3N0YXRpY0NsYXNzOiJjZWxsIn0sW192bS5fdihfdm0uX3MoX3ZtLnN0YXJ0WWVhcis3KSldKV0pXSksX2MoInRyIixbX2MoInRkIix7c3RhdGljQ2xhc3M6ImF2YWlsYWJsZSIsY2xhc3M6X3ZtLmdldENlbGxTdHlsZShfdm0uc3RhcnRZZWFyKzgpfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS5zdGFydFllYXIrOCkpXSldKSxfYygidGQiLHtzdGF0aWNDbGFzczoiYXZhaWxhYmxlIixjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKF92bS5zdGFydFllYXIrOSl9LFtfYygiYSIse3N0YXRpY0NsYXNzOiJjZWxsIn0sW192bS5fdihfdm0uX3MoX3ZtLnN0YXJ0WWVhcis5KSldKV0pLF9jKCJ0ZCIpLF9jKCJ0ZCIpXSldKV0pfTt5ZWFyX3RhYmxldnVlX3R5cGVfdGVtcGxhdGVfaWRfYzg2YWI1ZTBfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHllYXJfdGFibGVfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7cHJvcHM6e2Rpc2FibGVkRGF0ZTp7fSx2YWx1ZTp7fSxkZWZhdWx0VmFsdWU6e3ZhbGlkYXRvcjpmdW5jdGlvbih2YWwpe3JldHVybiBudWxsPT09dmFsfHx2YWwgaW5zdGFuY2VvZiBEYXRlJiZpc0RhdGUodmFsKX19LGRhdGU6e319LGNvbXB1dGVkOntzdGFydFllYXI6ZnVuY3Rpb24oKXtyZXR1cm4gMTAqTWF0aC5mbG9vcih0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKS8xMCl9fSxtZXRob2RzOntnZXRDZWxsU3R5bGU6ZnVuY3Rpb24oeWVhcil7dmFyIHN0eWxlPXt9LHRvZGF5PW5ldyBEYXRlO3JldHVybiBzdHlsZS5kaXNhYmxlZD0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5kaXNhYmxlZERhdGUmJmZ1bmN0aW9uKHllYXIpe3ZhciBudW1PZkRheXM9ZnVuY3Rpb24oeWVhcil7cmV0dXJuIHllYXIlNDAwPT0wfHx5ZWFyJTEwMCE9MCYmeWVhciU0PT0wPzM2NjozNjV9KHllYXIpLGZpcnN0RGF5PW5ldyBEYXRlKHllYXIsMCwxKTtyZXR1cm4gdXRpbF9yYW5nZShudW1PZkRheXMpLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gbmV4dERhdGUoZmlyc3REYXksbil9KX0oeWVhcikuZXZlcnkodGhpcy5kaXNhYmxlZERhdGUpLHN0eWxlLmN1cnJlbnQ9MDw9T2JqZWN0KHV0aWxfLmFycmF5RmluZEluZGV4KShPYmplY3QodXRpbF8uY29lcmNlVHJ1dGh5VmFsdWVUb0FycmF5KSh0aGlzLnZhbHVlKSxmdW5jdGlvbihkYXRlKXtyZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpPT09eWVhcn0pLHN0eWxlLnRvZGF5PXRvZGF5LmdldEZ1bGxZZWFyKCk9PT15ZWFyLHN0eWxlLmRlZmF1bHQ9dGhpcy5kZWZhdWx0VmFsdWUmJnRoaXMuZGVmYXVsdFZhbHVlLmdldEZ1bGxZZWFyKCk9PT15ZWFyLHN0eWxlfSxoYW5kbGVZZWFyVGFibGVDbGljazpmdW5jdGlvbihldmVudCl7dmFyIHRhcmdldD1ldmVudC50YXJnZXQ7aWYoIkEiPT09dGFyZ2V0LnRhZ05hbWUpe2lmKE9iamVjdChkb21fLmhhc0NsYXNzKSh0YXJnZXQucGFyZW50Tm9kZSwiZGlzYWJsZWQiKSlyZXR1cm47dmFyIHllYXI9dGFyZ2V0LnRleHRDb250ZW50fHx0YXJnZXQuaW5uZXJUZXh0O3RoaXMuJGVtaXQoInBpY2siLE51bWJlcih5ZWFyKSl9fX19LHllYXJfdGFibGV2dWVfdHlwZV90ZW1wbGF0ZV9pZF9jODZhYjVlMF9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3llYXJfdGFibGVfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9kYXRlLXBpY2tlci9zcmMvYmFzaWMveWVhci10YWJsZS52dWUiO3ZhciB5ZWFyX3RhYmxlPXllYXJfdGFibGVfY29tcG9uZW50LmV4cG9ydHMsbW9udGhfdGFibGV2dWVfdHlwZV90ZW1wbGF0ZV9pZF82NTRkNGY0Ml9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJ0YWJsZSIse3N0YXRpY0NsYXNzOiJlbC1tb250aC10YWJsZSIsb246e2NsaWNrOl92bS5oYW5kbGVNb250aFRhYmxlQ2xpY2t9fSxbX2MoInRib2R5IixbX2MoInRyIixbX2MoInRkIix7Y2xhc3M6X3ZtLmdldENlbGxTdHlsZSgwKX0sW19jKCJhIix7c3RhdGljQ2xhc3M6ImNlbGwifSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5tb250aHMuamFuIikpKV0pXSksX2MoInRkIix7Y2xhc3M6X3ZtLmdldENlbGxTdHlsZSgxKX0sW19jKCJhIix7c3RhdGljQ2xhc3M6ImNlbGwifSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5tb250aHMuZmViIikpKV0pXSksX2MoInRkIix7Y2xhc3M6X3ZtLmdldENlbGxTdHlsZSgyKX0sW19jKCJhIix7c3RhdGljQ2xhc3M6ImNlbGwifSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5tb250aHMubWFyIikpKV0pXSksX2MoInRkIix7Y2xhc3M6X3ZtLmdldENlbGxTdHlsZSgzKX0sW19jKCJhIix7c3RhdGljQ2xhc3M6ImNlbGwifSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5tb250aHMuYXByIikpKV0pXSldKSxfYygidHIiLFtfYygidGQiLHtjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKDQpfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS50KCJlbC5kYXRlcGlja2VyLm1vbnRocy5tYXkiKSkpXSldKSxfYygidGQiLHtjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKDUpfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS50KCJlbC5kYXRlcGlja2VyLm1vbnRocy5qdW4iKSkpXSldKSxfYygidGQiLHtjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKDYpfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS50KCJlbC5kYXRlcGlja2VyLm1vbnRocy5qdWwiKSkpXSldKSxfYygidGQiLHtjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKDcpfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS50KCJlbC5kYXRlcGlja2VyLm1vbnRocy5hdWciKSkpXSldKV0pLF9jKCJ0ciIsW19jKCJ0ZCIse2NsYXNzOl92bS5nZXRDZWxsU3R5bGUoOCl9LFtfYygiYSIse3N0YXRpY0NsYXNzOiJjZWxsIn0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIubW9udGhzLnNlcCIpKSldKV0pLF9jKCJ0ZCIse2NsYXNzOl92bS5nZXRDZWxsU3R5bGUoOSl9LFtfYygiYSIse3N0YXRpY0NsYXNzOiJjZWxsIn0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIubW9udGhzLm9jdCIpKSldKV0pLF9jKCJ0ZCIse2NsYXNzOl92bS5nZXRDZWxsU3R5bGUoMTApfSxbX2MoImEiLHtzdGF0aWNDbGFzczoiY2VsbCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS50KCJlbC5kYXRlcGlja2VyLm1vbnRocy5ub3YiKSkpXSldKSxfYygidGQiLHtjbGFzczpfdm0uZ2V0Q2VsbFN0eWxlKDExKX0sW19jKCJhIix7c3RhdGljQ2xhc3M6ImNlbGwifSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5tb250aHMuZGVjIikpKV0pXSldKV0pXSl9O21vbnRoX3RhYmxldnVlX3R5cGVfdGVtcGxhdGVfaWRfNjU0ZDRmNDJfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIG1vbnRoX3RhYmxlX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe3Byb3BzOntkaXNhYmxlZERhdGU6e30sdmFsdWU6e30sZGVmYXVsdFZhbHVlOnt2YWxpZGF0b3I6ZnVuY3Rpb24odmFsKXtyZXR1cm4gbnVsbD09PXZhbHx8dmFsIGluc3RhbmNlb2YgRGF0ZSYmaXNEYXRlKHZhbCl9fSxkYXRlOnt9fSxtaXhpbnM6W2xvY2FsZV9kZWZhdWx0LmFdLG1ldGhvZHM6e2dldENlbGxTdHlsZTpmdW5jdGlvbihtb250aCl7dmFyIHN0eWxlPXt9LHllYXI9dGhpcy5kYXRlLmdldEZ1bGxZZWFyKCksdG9kYXk9bmV3IERhdGU7cmV0dXJuIHN0eWxlLmRpc2FibGVkPSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLmRpc2FibGVkRGF0ZSYmZnVuY3Rpb24oeWVhcixtb250aCl7dmFyIG51bU9mRGF5cz1nZXREYXlDb3VudE9mTW9udGgoeWVhcixtb250aCksZmlyc3REYXk9bmV3IERhdGUoeWVhcixtb250aCwxKTtyZXR1cm4gdXRpbF9yYW5nZShudW1PZkRheXMpLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gbmV4dERhdGUoZmlyc3REYXksbil9KX0oeWVhcixtb250aCkuZXZlcnkodGhpcy5kaXNhYmxlZERhdGUpLHN0eWxlLmN1cnJlbnQ9MDw9T2JqZWN0KHV0aWxfLmFycmF5RmluZEluZGV4KShPYmplY3QodXRpbF8uY29lcmNlVHJ1dGh5VmFsdWVUb0FycmF5KSh0aGlzLnZhbHVlKSxmdW5jdGlvbihkYXRlKXtyZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpPT09eWVhciYmZGF0ZS5nZXRNb250aCgpPT09bW9udGh9KSxzdHlsZS50b2RheT10b2RheS5nZXRGdWxsWWVhcigpPT09eWVhciYmdG9kYXkuZ2V0TW9udGgoKT09PW1vbnRoLHN0eWxlLmRlZmF1bHQ9dGhpcy5kZWZhdWx0VmFsdWUmJnRoaXMuZGVmYXVsdFZhbHVlLmdldEZ1bGxZZWFyKCk9PT15ZWFyJiZ0aGlzLmRlZmF1bHRWYWx1ZS5nZXRNb250aCgpPT09bW9udGgsc3R5bGV9LGhhbmRsZU1vbnRoVGFibGVDbGljazpmdW5jdGlvbihldmVudCl7dmFyIHRhcmdldD1ldmVudC50YXJnZXQ7aWYoIkEiPT09dGFyZ2V0LnRhZ05hbWUmJiFPYmplY3QoZG9tXy5oYXNDbGFzcykodGFyZ2V0LnBhcmVudE5vZGUsImRpc2FibGVkIikpe3ZhciBjb2x1bW49dGFyZ2V0LnBhcmVudE5vZGUuY2VsbEluZGV4LG1vbnRoPTQqdGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5yb3dJbmRleCtjb2x1bW47dGhpcy4kZW1pdCgicGljayIsbW9udGgpfX19fSxtb250aF90YWJsZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzY1NGQ0ZjQyX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7bW9udGhfdGFibGVfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9kYXRlLXBpY2tlci9zcmMvYmFzaWMvbW9udGgtdGFibGUudnVlIjt2YXIgbW9udGhfdGFibGU9bW9udGhfdGFibGVfY29tcG9uZW50LmV4cG9ydHMsZGF0ZV90YWJsZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzVkMWYzMzQxX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInRhYmxlIix7c3RhdGljQ2xhc3M6ImVsLWRhdGUtdGFibGUiLGNsYXNzOnsiaXMtd2Vlay1tb2RlIjoid2VlayI9PT1fdm0uc2VsZWN0aW9uTW9kZX0sYXR0cnM6e2NlbGxzcGFjaW5nOiIwIixjZWxscGFkZGluZzoiMCJ9LG9uOntjbGljazpfdm0uaGFuZGxlQ2xpY2ssbW91c2Vtb3ZlOl92bS5oYW5kbGVNb3VzZU1vdmV9fSxbX2MoInRib2R5IixbX2MoInRyIixbX3ZtLnNob3dXZWVrTnVtYmVyP19jKCJ0aCIsW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIud2VlayIpKSldKTpfdm0uX2UoKSxfdm0uX2woX3ZtLldFRUtTLGZ1bmN0aW9uKHdlZWssa2V5KXtyZXR1cm4gX2MoInRoIix7a2V5OmtleX0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIud2Vla3MuIit3ZWVrKSkpXSl9KV0sMiksX3ZtLl9sKF92bS5yb3dzLGZ1bmN0aW9uKHJvdyxrZXkpe3JldHVybiBfYygidHIiLHtrZXk6a2V5LHN0YXRpY0NsYXNzOiJlbC1kYXRlLXRhYmxlX19yb3ciLGNsYXNzOntjdXJyZW50Ol92bS5pc1dlZWtBY3RpdmUocm93WzFdKX19LF92bS5fbChyb3csZnVuY3Rpb24oY2VsbCxrZXkpe3JldHVybiBfYygidGQiLHtrZXk6a2V5LGNsYXNzOl92bS5nZXRDZWxsQ2xhc3NlcyhjZWxsKX0sW19jKCJkaXYiLFtfYygic3BhbiIsW192bS5fdigiXG4gICAgICAgICAgIitfdm0uX3MoY2VsbC50ZXh0KSsiXG4gICAgICAgICIpXSldKV0pfSksMCl9KV0sMildKX07ZGF0ZV90YWJsZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzVkMWYzMzQxX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBfV0VFS1M9WyJzdW4iLCJtb24iLCJ0dWUiLCJ3ZWQiLCJ0aHUiLCJmcmkiLCJzYXQiXSxkYXRlX3RhYmxldnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfZ2V0RGF0ZVRpbWVzdGFtcD1mdW5jdGlvbih0aW1lKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHRpbWV8fCJzdHJpbmciPT10eXBlb2YgdGltZT9jbGVhclRpbWUobmV3IERhdGUodGltZSkpLmdldFRpbWUoKTp0aW1lIGluc3RhbmNlb2YgRGF0ZT9jbGVhclRpbWUodGltZSkuZ2V0VGltZSgpOk5hTn0sZGF0ZV90YWJsZV9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHttaXhpbnM6W2xvY2FsZV9kZWZhdWx0LmFdLHByb3BzOntmaXJzdERheU9mV2Vlazp7ZGVmYXVsdDo3LHR5cGU6TnVtYmVyLHZhbGlkYXRvcjpmdW5jdGlvbih2YWwpe3JldHVybiAxPD12YWwmJnZhbDw9N319LHZhbHVlOnt9LGRlZmF1bHRWYWx1ZTp7dmFsaWRhdG9yOmZ1bmN0aW9uKHZhbCl7cmV0dXJuIG51bGw9PT12YWx8fGlzRGF0ZSh2YWwpfHxBcnJheS5pc0FycmF5KHZhbCkmJnZhbC5ldmVyeShpc0RhdGUpfX0sZGF0ZTp7fSxzZWxlY3Rpb25Nb2RlOntkZWZhdWx0OiJkYXkifSxzaG93V2Vla051bWJlcjp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LGRpc2FibGVkRGF0ZTp7fSxtaW5EYXRlOnt9LG1heERhdGU6e30scmFuZ2VTdGF0ZTp7ZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybntlbmREYXRlOm51bGwsc2VsZWN0aW5nOiExfX19fSxjb21wdXRlZDp7b2Zmc2V0RGF5OmZ1bmN0aW9uKCl7dmFyIHdlZWs9dGhpcy5maXJzdERheU9mV2VlaztyZXR1cm4gMzx3ZWVrPzctd2Vlazotd2Vla30sV0VFS1M6ZnVuY3Rpb24oKXt2YXIgd2Vlaz10aGlzLmZpcnN0RGF5T2ZXZWVrO3JldHVybiBfV0VFS1MuY29uY2F0KF9XRUVLUykuc2xpY2Uod2Vlayx3ZWVrKzcpfSx5ZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0ZS5nZXRGdWxsWWVhcigpfSxtb250aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGUuZ2V0TW9udGgoKX0sc3RhcnREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHllYXI9dGhpcy55ZWFyLG1vbnRoPXRoaXMubW9udGgscmVzdWx0PW5ldyBEYXRlKHllYXIsbW9udGgsMSksZGF5PXJlc3VsdC5nZXREYXkoKSxwcmV2RGF0ZShyZXN1bHQsMD09PWRheT83OmRheSk7dmFyIHllYXIsbW9udGgscmVzdWx0LGRheX0scm93czpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzLGRhdGU9bmV3IERhdGUodGhpcy55ZWFyLHRoaXMubW9udGgsMSksZGF5PWZ1bmN0aW9uKGRhdGUpe3ZhciB0ZW1wPW5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtyZXR1cm4gdGVtcC5zZXREYXRlKDEpLHRlbXAuZ2V0RGF5KCl9KGRhdGUpLGRhdGVDb3VudE9mTW9udGg9Z2V0RGF5Q291bnRPZk1vbnRoKGRhdGUuZ2V0RnVsbFllYXIoKSxkYXRlLmdldE1vbnRoKCkpLGRhdGVDb3VudE9mTGFzdE1vbnRoPWdldERheUNvdW50T2ZNb250aChkYXRlLmdldEZ1bGxZZWFyKCksMD09PWRhdGUuZ2V0TW9udGgoKT8xMTpkYXRlLmdldE1vbnRoKCktMSk7ZGF5PTA9PT1kYXk/NzpkYXk7Zm9yKHZhciBvZmZzZXQ9dGhpcy5vZmZzZXREYXkscm93cz10aGlzLnRhYmxlUm93cyxjb3VudD0xLGZpcnN0RGF5UG9zaXRpb249dm9pZCAwLHN0YXJ0RGF0ZT10aGlzLnN0YXJ0RGF0ZSxkaXNhYmxlZERhdGU9dGhpcy5kaXNhYmxlZERhdGUsc2VsZWN0ZWREYXRlPSJkYXRlcyI9PT10aGlzLnNlbGVjdGlvbk1vZGU/T2JqZWN0KHV0aWxfLmNvZXJjZVRydXRoeVZhbHVlVG9BcnJheSkodGhpcy52YWx1ZSk6W10sbm93PWRhdGVfdGFibGV2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19nZXREYXRlVGltZXN0YW1wKG5ldyBEYXRlKSxpPTA7aTw2O2krKyl7dmFyIHJvdz1yb3dzW2ldO3RoaXMuc2hvd1dlZWtOdW1iZXImJihyb3dbMF18fChyb3dbMF09e3R5cGU6IndlZWsiLHRleHQ6Z2V0V2Vla051bWJlcihuZXh0RGF0ZShzdGFydERhdGUsNyppKzEpKX0pKTtmb3IodmFyIF9sb29wPWZ1bmN0aW9uKGope3ZhciBjZWxsPXJvd1tfdGhpcy5zaG93V2Vla051bWJlcj9qKzE6al07Y2VsbHx8KGNlbGw9e3JvdzppLGNvbHVtbjpqLHR5cGU6Im5vcm1hbCIsaW5SYW5nZTohMSxzdGFydDohMSxlbmQ6ITF9KSxjZWxsLnR5cGU9Im5vcm1hbCI7dmFyIHRpbWU9bmV4dERhdGUoc3RhcnREYXRlLDcqaStqLW9mZnNldCkuZ2V0VGltZSgpO2NlbGwuaW5SYW5nZT10aW1lPj1kYXRlX3RhYmxldnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfZ2V0RGF0ZVRpbWVzdGFtcChfdGhpcy5taW5EYXRlKSYmdGltZTw9ZGF0ZV90YWJsZXZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX2dldERhdGVUaW1lc3RhbXAoX3RoaXMubWF4RGF0ZSksY2VsbC5zdGFydD1fdGhpcy5taW5EYXRlJiZ0aW1lPT09ZGF0ZV90YWJsZXZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX2dldERhdGVUaW1lc3RhbXAoX3RoaXMubWluRGF0ZSksY2VsbC5lbmQ9X3RoaXMubWF4RGF0ZSYmdGltZT09PWRhdGVfdGFibGV2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19nZXREYXRlVGltZXN0YW1wKF90aGlzLm1heERhdGUpLHRpbWU9PT1ub3cmJihjZWxsLnR5cGU9InRvZGF5IiksMDw9aSYmaTw9MT9kYXkrb2Zmc2V0PD1qKzcqaT8oY2VsbC50ZXh0PWNvdW50KyssMj09PWNvdW50JiYoZmlyc3REYXlQb3NpdGlvbj03KmkraikpOihjZWxsLnRleHQ9ZGF0ZUNvdW50T2ZMYXN0TW9udGgtKGRheStvZmZzZXQtaiU3KSsxKzcqaSxjZWxsLnR5cGU9InByZXYtbW9udGgiKTpjb3VudDw9ZGF0ZUNvdW50T2ZNb250aD8oY2VsbC50ZXh0PWNvdW50KyssMj09PWNvdW50JiYoZmlyc3REYXlQb3NpdGlvbj03KmkraikpOihjZWxsLnRleHQ9Y291bnQrKy1kYXRlQ291bnRPZk1vbnRoLGNlbGwudHlwZT0ibmV4dC1tb250aCIpO3ZhciBjZWxsRGF0ZT1uZXcgRGF0ZSh0aW1lKTtjZWxsLmRpc2FibGVkPSJmdW5jdGlvbiI9PXR5cGVvZiBkaXNhYmxlZERhdGUmJmRpc2FibGVkRGF0ZShjZWxsRGF0ZSksY2VsbC5zZWxlY3RlZD1PYmplY3QodXRpbF8uYXJyYXlGaW5kKShzZWxlY3RlZERhdGUsZnVuY3Rpb24oZGF0ZSl7cmV0dXJuIGRhdGUuZ2V0VGltZSgpPT09Y2VsbERhdGUuZ2V0VGltZSgpfSksX3RoaXMuJHNldChyb3csX3RoaXMuc2hvd1dlZWtOdW1iZXI/aisxOmosY2VsbCl9LGo9MDtqPDc7aisrKV9sb29wKGopO2lmKCJ3ZWVrIj09PXRoaXMuc2VsZWN0aW9uTW9kZSl7dmFyIHN0YXJ0PXRoaXMuc2hvd1dlZWtOdW1iZXI/MTowLGVuZD10aGlzLnNob3dXZWVrTnVtYmVyPzc6Nixpc1dlZWtBY3RpdmU9dGhpcy5pc1dlZWtBY3RpdmUocm93W3N0YXJ0KzFdKTtyb3dbc3RhcnRdLmluUmFuZ2U9aXNXZWVrQWN0aXZlLHJvd1tzdGFydF0uc3RhcnQ9aXNXZWVrQWN0aXZlLHJvd1tlbmRdLmluUmFuZ2U9aXNXZWVrQWN0aXZlLHJvd1tlbmRdLmVuZD1pc1dlZWtBY3RpdmV9fXJldHVybiByb3dzLmZpcnN0RGF5UG9zaXRpb249Zmlyc3REYXlQb3NpdGlvbixyb3dzfX0sd2F0Y2g6eyJyYW5nZVN0YXRlLmVuZERhdGUiOmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5tYXJrUmFuZ2UodGhpcy5taW5EYXRlLG5ld1ZhbCl9LG1pbkRhdGU6ZnVuY3Rpb24obmV3VmFsLG9sZFZhbCl7ZGF0ZV90YWJsZXZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX2dldERhdGVUaW1lc3RhbXAobmV3VmFsKSE9PWRhdGVfdGFibGV2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19nZXREYXRlVGltZXN0YW1wKG9sZFZhbCkmJnRoaXMubWFya1JhbmdlKHRoaXMubWluRGF0ZSx0aGlzLm1heERhdGUpfSxtYXhEYXRlOmZ1bmN0aW9uKG5ld1ZhbCxvbGRWYWwpe2RhdGVfdGFibGV2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19nZXREYXRlVGltZXN0YW1wKG5ld1ZhbCkhPT1kYXRlX3RhYmxldnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfZ2V0RGF0ZVRpbWVzdGFtcChvbGRWYWwpJiZ0aGlzLm1hcmtSYW5nZSh0aGlzLm1pbkRhdGUsdGhpcy5tYXhEYXRlKX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGFibGVSb3dzOltbXSxbXSxbXSxbXSxbXSxbXV0sbGFzdFJvdzpudWxsLGxhc3RDb2x1bW46bnVsbH19LG1ldGhvZHM6e2NlbGxNYXRjaGVzRGF0ZTpmdW5jdGlvbihjZWxsLGRhdGUpe3ZhciB2YWx1ZT1uZXcgRGF0ZShkYXRlKTtyZXR1cm4gdGhpcy55ZWFyPT09dmFsdWUuZ2V0RnVsbFllYXIoKSYmdGhpcy5tb250aD09PXZhbHVlLmdldE1vbnRoKCkmJk51bWJlcihjZWxsLnRleHQpPT09dmFsdWUuZ2V0RGF0ZSgpfSxnZXRDZWxsQ2xhc3NlczpmdW5jdGlvbihjZWxsKXt2YXIgX3RoaXMyPXRoaXMsc2VsZWN0aW9uTW9kZT10aGlzLnNlbGVjdGlvbk1vZGUsZGVmYXVsdFZhbHVlPXRoaXMuZGVmYXVsdFZhbHVlP0FycmF5LmlzQXJyYXkodGhpcy5kZWZhdWx0VmFsdWUpP3RoaXMuZGVmYXVsdFZhbHVlOlt0aGlzLmRlZmF1bHRWYWx1ZV06W10sY2xhc3Nlcz1bXTtyZXR1cm4ibm9ybWFsIiE9PWNlbGwudHlwZSYmInRvZGF5IiE9PWNlbGwudHlwZXx8Y2VsbC5kaXNhYmxlZD9jbGFzc2VzLnB1c2goY2VsbC50eXBlKTooY2xhc3Nlcy5wdXNoKCJhdmFpbGFibGUiKSwidG9kYXkiPT09Y2VsbC50eXBlJiZjbGFzc2VzLnB1c2goInRvZGF5IikpLCJub3JtYWwiPT09Y2VsbC50eXBlJiZkZWZhdWx0VmFsdWUuc29tZShmdW5jdGlvbihkYXRlKXtyZXR1cm4gX3RoaXMyLmNlbGxNYXRjaGVzRGF0ZShjZWxsLGRhdGUpfSkmJmNsYXNzZXMucHVzaCgiZGVmYXVsdCIpLCJkYXkiIT09c2VsZWN0aW9uTW9kZXx8Im5vcm1hbCIhPT1jZWxsLnR5cGUmJiJ0b2RheSIhPT1jZWxsLnR5cGV8fCF0aGlzLmNlbGxNYXRjaGVzRGF0ZShjZWxsLHRoaXMudmFsdWUpfHxjbGFzc2VzLnB1c2goImN1cnJlbnQiKSwhY2VsbC5pblJhbmdlfHwibm9ybWFsIiE9PWNlbGwudHlwZSYmInRvZGF5IiE9PWNlbGwudHlwZSYmIndlZWsiIT09dGhpcy5zZWxlY3Rpb25Nb2RlfHwoY2xhc3Nlcy5wdXNoKCJpbi1yYW5nZSIpLGNlbGwuc3RhcnQmJmNsYXNzZXMucHVzaCgic3RhcnQtZGF0ZSIpLGNlbGwuZW5kJiZjbGFzc2VzLnB1c2goImVuZC1kYXRlIikpLGNlbGwuZGlzYWJsZWQmJmNsYXNzZXMucHVzaCgiZGlzYWJsZWQiKSxjZWxsLnNlbGVjdGVkJiZjbGFzc2VzLnB1c2goInNlbGVjdGVkIiksY2xhc3Nlcy5qb2luKCIgIil9LGdldERhdGVPZkNlbGw6ZnVuY3Rpb24ocm93LGNvbHVtbil7dmFyIG9mZnNldEZyb21TdGFydD03KnJvdysoY29sdW1uLSh0aGlzLnNob3dXZWVrTnVtYmVyPzE6MCkpLXRoaXMub2Zmc2V0RGF5O3JldHVybiBuZXh0RGF0ZSh0aGlzLnN0YXJ0RGF0ZSxvZmZzZXRGcm9tU3RhcnQpfSxpc1dlZWtBY3RpdmU6ZnVuY3Rpb24oY2VsbCl7aWYoIndlZWsiIT09dGhpcy5zZWxlY3Rpb25Nb2RlKXJldHVybiExO3ZhciBuZXdEYXRlPW5ldyBEYXRlKHRoaXMueWVhcix0aGlzLm1vbnRoLDEpLHllYXI9bmV3RGF0ZS5nZXRGdWxsWWVhcigpLG1vbnRoPW5ld0RhdGUuZ2V0TW9udGgoKTtpZigicHJldi1tb250aCI9PT1jZWxsLnR5cGUmJihuZXdEYXRlLnNldE1vbnRoKDA9PT1tb250aD8xMTptb250aC0xKSxuZXdEYXRlLnNldEZ1bGxZZWFyKDA9PT1tb250aD95ZWFyLTE6eWVhcikpLCJuZXh0LW1vbnRoIj09PWNlbGwudHlwZSYmKG5ld0RhdGUuc2V0TW9udGgoMTE9PT1tb250aD8wOm1vbnRoKzEpLG5ld0RhdGUuc2V0RnVsbFllYXIoMTE9PT1tb250aD95ZWFyKzE6eWVhcikpLG5ld0RhdGUuc2V0RGF0ZShwYXJzZUludChjZWxsLnRleHQsMTApKSxpc0RhdGUodGhpcy52YWx1ZSkpe3ZhciBkYXlPZmZzZXQ9KHRoaXMudmFsdWUuZ2V0RGF5KCktdGhpcy5maXJzdERheU9mV2Vlays3KSU3LTE7cmV0dXJuIHByZXZEYXRlKHRoaXMudmFsdWUsZGF5T2Zmc2V0KS5nZXRUaW1lKCk9PT1uZXdEYXRlLmdldFRpbWUoKX1yZXR1cm4hMX0sbWFya1JhbmdlOmZ1bmN0aW9uKG1pbkRhdGUsbWF4RGF0ZSl7bWluRGF0ZT1kYXRlX3RhYmxldnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfZ2V0RGF0ZVRpbWVzdGFtcChtaW5EYXRlKSxtYXhEYXRlPWRhdGVfdGFibGV2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19nZXREYXRlVGltZXN0YW1wKG1heERhdGUpfHxtaW5EYXRlO3ZhciBfcmVmPVtNYXRoLm1pbihtaW5EYXRlLG1heERhdGUpLE1hdGgubWF4KG1pbkRhdGUsbWF4RGF0ZSldO21pbkRhdGU9X3JlZlswXSxtYXhEYXRlPV9yZWZbMV07Zm9yKHZhciBzdGFydERhdGU9dGhpcy5zdGFydERhdGUscm93cz10aGlzLnJvd3MsaT0wLGs9cm93cy5sZW5ndGg7aTxrO2krKylmb3IodmFyIHJvdz1yb3dzW2ldLGo9MCxsPXJvdy5sZW5ndGg7ajxsO2orKylpZighdGhpcy5zaG93V2Vla051bWJlcnx8MCE9PWope3ZhciBfY2VsbD1yb3dbal0saW5kZXg9NyppK2orKHRoaXMuc2hvd1dlZWtOdW1iZXI/LTE6MCksdGltZT1uZXh0RGF0ZShzdGFydERhdGUsaW5kZXgtdGhpcy5vZmZzZXREYXkpLmdldFRpbWUoKTtfY2VsbC5pblJhbmdlPW1pbkRhdGUmJm1pbkRhdGU8PXRpbWUmJnRpbWU8PW1heERhdGUsX2NlbGwuc3RhcnQ9bWluRGF0ZSYmdGltZT09PW1pbkRhdGUsX2NlbGwuZW5kPW1heERhdGUmJnRpbWU9PT1tYXhEYXRlfX0saGFuZGxlTW91c2VNb3ZlOmZ1bmN0aW9uKGV2ZW50KXtpZih0aGlzLnJhbmdlU3RhdGUuc2VsZWN0aW5nKXt2YXIgdGFyZ2V0PWV2ZW50LnRhcmdldDtpZigiU1BBTiI9PT10YXJnZXQudGFnTmFtZSYmKHRhcmdldD10YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlKSwiRElWIj09PXRhcmdldC50YWdOYW1lJiYodGFyZ2V0PXRhcmdldC5wYXJlbnROb2RlKSwiVEQiPT09dGFyZ2V0LnRhZ05hbWUpe3ZhciByb3c9dGFyZ2V0LnBhcmVudE5vZGUucm93SW5kZXgtMSxjb2x1bW49dGFyZ2V0LmNlbGxJbmRleDt0aGlzLnJvd3Nbcm93XVtjb2x1bW5dLmRpc2FibGVkfHxyb3c9PT10aGlzLmxhc3RSb3cmJmNvbHVtbj09PXRoaXMubGFzdENvbHVtbnx8KHRoaXMubGFzdFJvdz1yb3csdGhpcy5sYXN0Q29sdW1uPWNvbHVtbix0aGlzLiRlbWl0KCJjaGFuZ2VyYW5nZSIse21pbkRhdGU6dGhpcy5taW5EYXRlLG1heERhdGU6dGhpcy5tYXhEYXRlLHJhbmdlU3RhdGU6e3NlbGVjdGluZzohMCxlbmREYXRlOnRoaXMuZ2V0RGF0ZU9mQ2VsbChyb3csY29sdW1uKX19KSl9fX0saGFuZGxlQ2xpY2s6ZnVuY3Rpb24oZXZlbnQpe3ZhciB0YXJnZXQ9ZXZlbnQudGFyZ2V0O2lmKCJTUEFOIj09PXRhcmdldC50YWdOYW1lJiYodGFyZ2V0PXRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpLCJESVYiPT09dGFyZ2V0LnRhZ05hbWUmJih0YXJnZXQ9dGFyZ2V0LnBhcmVudE5vZGUpLCJURCI9PT10YXJnZXQudGFnTmFtZSl7dmFyIHJvdz10YXJnZXQucGFyZW50Tm9kZS5yb3dJbmRleC0xLGNvbHVtbj0id2VlayI9PT10aGlzLnNlbGVjdGlvbk1vZGU/MTp0YXJnZXQuY2VsbEluZGV4LGNlbGw9dGhpcy5yb3dzW3Jvd11bY29sdW1uXTtpZighY2VsbC5kaXNhYmxlZCYmIndlZWsiIT09Y2VsbC50eXBlKXt2YXIgYXJyLHByZWQsaWR4LG5ld0RhdGU9dGhpcy5nZXREYXRlT2ZDZWxsKHJvdyxjb2x1bW4pO2lmKCJyYW5nZSI9PT10aGlzLnNlbGVjdGlvbk1vZGUpdGhpcy5yYW5nZVN0YXRlLnNlbGVjdGluZz8obmV3RGF0ZT49dGhpcy5taW5EYXRlP3RoaXMuJGVtaXQoInBpY2siLHttaW5EYXRlOnRoaXMubWluRGF0ZSxtYXhEYXRlOm5ld0RhdGV9KTp0aGlzLiRlbWl0KCJwaWNrIix7bWluRGF0ZTpuZXdEYXRlLG1heERhdGU6dGhpcy5taW5EYXRlfSksdGhpcy5yYW5nZVN0YXRlLnNlbGVjdGluZz0hMSk6KHRoaXMuJGVtaXQoInBpY2siLHttaW5EYXRlOm5ld0RhdGUsbWF4RGF0ZTpudWxsfSksdGhpcy5yYW5nZVN0YXRlLnNlbGVjdGluZz0hMCk7ZWxzZSBpZigiZGF5Ij09PXRoaXMuc2VsZWN0aW9uTW9kZSl0aGlzLiRlbWl0KCJwaWNrIixuZXdEYXRlKTtlbHNlIGlmKCJ3ZWVrIj09PXRoaXMuc2VsZWN0aW9uTW9kZSl7dmFyIHdlZWtOdW1iZXI9Z2V0V2Vla051bWJlcihuZXdEYXRlKSx2YWx1ZT1uZXdEYXRlLmdldEZ1bGxZZWFyKCkrInciK3dlZWtOdW1iZXI7dGhpcy4kZW1pdCgicGljayIse3llYXI6bmV3RGF0ZS5nZXRGdWxsWWVhcigpLHdlZWs6d2Vla051bWJlcix2YWx1ZTp2YWx1ZSxkYXRlOm5ld0RhdGV9KX1lbHNlIGlmKCJkYXRlcyI9PT10aGlzLnNlbGVjdGlvbk1vZGUpe3ZhciBfdmFsdWU9dGhpcy52YWx1ZXx8W10sbmV3VmFsdWU9Y2VsbC5zZWxlY3RlZD8oYXJyPV92YWx1ZSwwPD0oaWR4PSJmdW5jdGlvbiI9PXR5cGVvZihwcmVkPWZ1bmN0aW9uKGRhdGUpe3JldHVybiBkYXRlLmdldFRpbWUoKT09PW5ld0RhdGUuZ2V0VGltZSgpfSk/T2JqZWN0KHV0aWxfLmFycmF5RmluZEluZGV4KShhcnIscHJlZCk6YXJyLmluZGV4T2YocHJlZCkpP1tdLmNvbmNhdChhcnIuc2xpY2UoMCxpZHgpLGFyci5zbGljZShpZHgrMSkpOmFycik6W10uY29uY2F0KF92YWx1ZSxbbmV3RGF0ZV0pO3RoaXMuJGVtaXQoInBpY2siLG5ld1ZhbHVlKX19fX19fSxkYXRlX3RhYmxldnVlX3R5cGVfdGVtcGxhdGVfaWRfNWQxZjMzNDFfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtkYXRlX3RhYmxlX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvZGF0ZS1waWNrZXIvc3JjL2Jhc2ljL2RhdGUtdGFibGUudnVlIjt2YXIgZGF0ZV90YWJsZT1kYXRlX3RhYmxlX2NvbXBvbmVudC5leHBvcnRzLGRhdGVfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bWl4aW5zOltsb2NhbGVfZGVmYXVsdC5hXSxkaXJlY3RpdmVzOntDbGlja291dHNpZGU6Y2xpY2tvdXRzaWRlX2RlZmF1bHQuYX0sd2F0Y2g6e3Nob3dUaW1lOmZ1bmN0aW9uKHZhbCl7dmFyIF90aGlzPXRoaXM7dmFsJiZ0aGlzLiRuZXh0VGljayhmdW5jdGlvbihfKXt2YXIgaW5wdXRFbG09X3RoaXMuJHJlZnMuaW5wdXQuJGVsO2lucHV0RWxtJiYoX3RoaXMucGlja2VyV2lkdGg9aW5wdXRFbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgrMTApfSl9LHZhbHVlOmZ1bmN0aW9uKHZhbCl7ImRhdGVzIj09PXRoaXMuc2VsZWN0aW9uTW9kZSYmdGhpcy52YWx1ZXx8KGlzRGF0ZSh2YWwpP3RoaXMuZGF0ZT1uZXcgRGF0ZSh2YWwpOnRoaXMuZGF0ZT10aGlzLmdldERlZmF1bHRWYWx1ZSgpKX0sZGVmYXVsdFZhbHVlOmZ1bmN0aW9uKHZhbCl7aXNEYXRlKHRoaXMudmFsdWUpfHwodGhpcy5kYXRlPXZhbD9uZXcgRGF0ZSh2YWwpOm5ldyBEYXRlKX0sdGltZVBpY2tlclZpc2libGU6ZnVuY3Rpb24odmFsKXt2YXIgX3RoaXMyPXRoaXM7dmFsJiZ0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBfdGhpczIuJHJlZnMudGltZXBpY2tlci5hZGp1c3RTcGlubmVycygpfSl9LHNlbGVjdGlvbk1vZGU6ZnVuY3Rpb24obmV3VmFsKXsibW9udGgiPT09bmV3VmFsPyJ5ZWFyIj09PXRoaXMuY3VycmVudFZpZXcmJiJtb250aCI9PT10aGlzLmN1cnJlbnRWaWV3fHwodGhpcy5jdXJyZW50Vmlldz0ibW9udGgiKToiZGF0ZXMiPT09bmV3VmFsJiYodGhpcy5jdXJyZW50Vmlldz0iZGF0ZSIpfX0sbWV0aG9kczp7cHJveHlUaW1lUGlja2VyRGF0YVByb3BlcnRpZXM6ZnVuY3Rpb24oKXt2YXIgdGltZUZvcm1hdCxfdGhpczM9dGhpcyx2YWx1ZT1mdW5jdGlvbihfdmFsdWUpe190aGlzMy4kcmVmcy50aW1lcGlja2VyLnZhbHVlPV92YWx1ZX0sZGF0ZT1mdW5jdGlvbihfZGF0ZSl7X3RoaXMzLiRyZWZzLnRpbWVwaWNrZXIuZGF0ZT1fZGF0ZX0sc2VsZWN0YWJsZVJhbmdlPWZ1bmN0aW9uKF9zZWxlY3RhYmxlUmFuZ2Upe190aGlzMy4kcmVmcy50aW1lcGlja2VyLnNlbGVjdGFibGVSYW5nZT1fc2VsZWN0YWJsZVJhbmdlfTt0aGlzLiR3YXRjaCgidmFsdWUiLHZhbHVlKSx0aGlzLiR3YXRjaCgiZGF0ZSIsZGF0ZSksdGhpcy4kd2F0Y2goInNlbGVjdGFibGVSYW5nZSIsc2VsZWN0YWJsZVJhbmdlKSx0aW1lRm9ybWF0PXRoaXMudGltZUZvcm1hdCxfdGhpczMuJHJlZnMudGltZXBpY2tlci5mb3JtYXQ9dGltZUZvcm1hdCx2YWx1ZSh0aGlzLnZhbHVlKSxkYXRlKHRoaXMuZGF0ZSksc2VsZWN0YWJsZVJhbmdlKHRoaXMuc2VsZWN0YWJsZVJhbmdlKX0saGFuZGxlQ2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmRhdGU9dGhpcy5nZXREZWZhdWx0VmFsdWUoKSx0aGlzLiRlbWl0KCJwaWNrIixudWxsKX0sZW1pdDpmdW5jdGlvbih2YWx1ZSl7Zm9yKHZhciBfdGhpczQ9dGhpcyxfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1BcnJheSgxPF9sZW4/X2xlbi0xOjApLF9rZXk9MTtfa2V5PF9sZW47X2tleSsrKWFyZ3NbX2tleS0xXT1hcmd1bWVudHNbX2tleV07aWYodmFsdWUpaWYoQXJyYXkuaXNBcnJheSh2YWx1ZSkpe3ZhciBkYXRlcz12YWx1ZS5tYXAoZnVuY3Rpb24oZGF0ZSl7cmV0dXJuIF90aGlzNC5zaG93VGltZT9jbGVhck1pbGxpc2Vjb25kcyhkYXRlKTpjbGVhclRpbWUoZGF0ZSl9KTt0aGlzLiRlbWl0LmFwcGx5KHRoaXMsWyJwaWNrIixkYXRlc10uY29uY2F0KGFyZ3MpKX1lbHNlIHRoaXMuJGVtaXQuYXBwbHkodGhpcyxbInBpY2siLHRoaXMuc2hvd1RpbWU/Y2xlYXJNaWxsaXNlY29uZHModmFsdWUpOmNsZWFyVGltZSh2YWx1ZSldLmNvbmNhdChhcmdzKSk7ZWxzZSB0aGlzLiRlbWl0LmFwcGx5KHRoaXMsWyJwaWNrIix2YWx1ZV0uY29uY2F0KGFyZ3MpKTt0aGlzLnVzZXJJbnB1dERhdGU9bnVsbCx0aGlzLnVzZXJJbnB1dFRpbWU9bnVsbH0sc2hvd01vbnRoUGlja2VyOmZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50Vmlldz0ibW9udGgifSxzaG93WWVhclBpY2tlcjpmdW5jdGlvbigpe3RoaXMuY3VycmVudFZpZXc9InllYXIifSxwcmV2TW9udGg6ZnVuY3Rpb24oKXt0aGlzLmRhdGU9dXRpbF9wcmV2TW9udGgodGhpcy5kYXRlKX0sbmV4dE1vbnRoOmZ1bmN0aW9uKCl7dGhpcy5kYXRlPXV0aWxfbmV4dE1vbnRoKHRoaXMuZGF0ZSl9LHByZXZZZWFyOmZ1bmN0aW9uKCl7InllYXIiPT09dGhpcy5jdXJyZW50Vmlldz90aGlzLmRhdGU9dXRpbF9wcmV2WWVhcih0aGlzLmRhdGUsMTApOnRoaXMuZGF0ZT11dGlsX3ByZXZZZWFyKHRoaXMuZGF0ZSl9LG5leHRZZWFyOmZ1bmN0aW9uKCl7InllYXIiPT09dGhpcy5jdXJyZW50Vmlldz90aGlzLmRhdGU9dXRpbF9uZXh0WWVhcih0aGlzLmRhdGUsMTApOnRoaXMuZGF0ZT11dGlsX25leHRZZWFyKHRoaXMuZGF0ZSl9LGhhbmRsZVNob3J0Y3V0Q2xpY2s6ZnVuY3Rpb24oc2hvcnRjdXQpe3Nob3J0Y3V0Lm9uQ2xpY2smJnNob3J0Y3V0Lm9uQ2xpY2sodGhpcyl9LGhhbmRsZVRpbWVQaWNrOmZ1bmN0aW9uKHZhbHVlLHZpc2libGUsZmlyc3Qpe2lmKGlzRGF0ZSh2YWx1ZSkpe3ZhciBuZXdEYXRlPXRoaXMudmFsdWU/bW9kaWZ5VGltZSh0aGlzLnZhbHVlLHZhbHVlLmdldEhvdXJzKCksdmFsdWUuZ2V0TWludXRlcygpLHZhbHVlLmdldFNlY29uZHMoKSk6bW9kaWZ5V2l0aFRpbWVTdHJpbmcodGhpcy5nZXREZWZhdWx0VmFsdWUoKSx0aGlzLmRlZmF1bHRUaW1lKTt0aGlzLmRhdGU9bmV3RGF0ZSx0aGlzLmVtaXQodGhpcy5kYXRlLCEwKX1lbHNlIHRoaXMuZW1pdCh2YWx1ZSwhMCk7Zmlyc3R8fCh0aGlzLnRpbWVQaWNrZXJWaXNpYmxlPXZpc2libGUpfSxoYW5kbGVUaW1lUGlja0Nsb3NlOmZ1bmN0aW9uKCl7dGhpcy50aW1lUGlja2VyVmlzaWJsZT0hMX0saGFuZGxlTW9udGhQaWNrOmZ1bmN0aW9uKG1vbnRoKXsibW9udGgiPT09dGhpcy5zZWxlY3Rpb25Nb2RlPyh0aGlzLmRhdGU9bW9kaWZ5RGF0ZSh0aGlzLmRhdGUsdGhpcy55ZWFyLG1vbnRoLDEpLHRoaXMuZW1pdCh0aGlzLmRhdGUpKToodGhpcy5kYXRlPWNoYW5nZVllYXJNb250aEFuZENsYW1wRGF0ZSh0aGlzLmRhdGUsdGhpcy55ZWFyLG1vbnRoKSx0aGlzLmN1cnJlbnRWaWV3PSJkYXRlIil9LGhhbmRsZURhdGVQaWNrOmZ1bmN0aW9uKHZhbHVlKXtpZigiZGF5Ij09PXRoaXMuc2VsZWN0aW9uTW9kZSl7dmFyIG5ld0RhdGU9dGhpcy52YWx1ZT9tb2RpZnlEYXRlKHRoaXMudmFsdWUsdmFsdWUuZ2V0RnVsbFllYXIoKSx2YWx1ZS5nZXRNb250aCgpLHZhbHVlLmdldERhdGUoKSk6bW9kaWZ5V2l0aFRpbWVTdHJpbmcodmFsdWUsdGhpcy5kZWZhdWx0VGltZSk7dGhpcy5jaGVja0RhdGVXaXRoaW5SYW5nZShuZXdEYXRlKXx8KG5ld0RhdGU9bW9kaWZ5RGF0ZSh0aGlzLnNlbGVjdGFibGVSYW5nZVswXVswXSx2YWx1ZS5nZXRGdWxsWWVhcigpLHZhbHVlLmdldE1vbnRoKCksdmFsdWUuZ2V0RGF0ZSgpKSksdGhpcy5kYXRlPW5ld0RhdGUsdGhpcy5lbWl0KHRoaXMuZGF0ZSx0aGlzLnNob3dUaW1lKX1lbHNlIndlZWsiPT09dGhpcy5zZWxlY3Rpb25Nb2RlP3RoaXMuZW1pdCh2YWx1ZS5kYXRlKToiZGF0ZXMiPT09dGhpcy5zZWxlY3Rpb25Nb2RlJiZ0aGlzLmVtaXQodmFsdWUsITApfSxoYW5kbGVZZWFyUGljazpmdW5jdGlvbih5ZWFyKXsieWVhciI9PT10aGlzLnNlbGVjdGlvbk1vZGU/KHRoaXMuZGF0ZT1tb2RpZnlEYXRlKHRoaXMuZGF0ZSx5ZWFyLDAsMSksdGhpcy5lbWl0KHRoaXMuZGF0ZSkpOih0aGlzLmRhdGU9Y2hhbmdlWWVhck1vbnRoQW5kQ2xhbXBEYXRlKHRoaXMuZGF0ZSx5ZWFyLHRoaXMubW9udGgpLHRoaXMuY3VycmVudFZpZXc9Im1vbnRoIil9LGNoYW5nZVRvTm93OmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZERhdGUmJnRoaXMuZGlzYWJsZWREYXRlKG5ldyBEYXRlKXx8IXRoaXMuY2hlY2tEYXRlV2l0aGluUmFuZ2UobmV3IERhdGUpfHwodGhpcy5kYXRlPW5ldyBEYXRlLHRoaXMuZW1pdCh0aGlzLmRhdGUpKX0sY29uZmlybTpmdW5jdGlvbigpe2lmKCJkYXRlcyI9PT10aGlzLnNlbGVjdGlvbk1vZGUpdGhpcy5lbWl0KHRoaXMudmFsdWUpO2Vsc2V7dmFyIHZhbHVlPXRoaXMudmFsdWU/dGhpcy52YWx1ZTptb2RpZnlXaXRoVGltZVN0cmluZyh0aGlzLmdldERlZmF1bHRWYWx1ZSgpLHRoaXMuZGVmYXVsdFRpbWUpO3RoaXMuZGF0ZT1uZXcgRGF0ZSh2YWx1ZSksdGhpcy5lbWl0KHZhbHVlKX19LHJlc2V0VmlldzpmdW5jdGlvbigpeyJtb250aCI9PT10aGlzLnNlbGVjdGlvbk1vZGU/dGhpcy5jdXJyZW50Vmlldz0ibW9udGgiOiJ5ZWFyIj09PXRoaXMuc2VsZWN0aW9uTW9kZT90aGlzLmN1cnJlbnRWaWV3PSJ5ZWFyIjp0aGlzLmN1cnJlbnRWaWV3PSJkYXRlIn0saGFuZGxlRW50ZXI6ZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLHRoaXMuaGFuZGxlS2V5ZG93bil9LGhhbmRsZUxlYXZlOmZ1bmN0aW9uKCl7dGhpcy4kZW1pdCgiZG9kZXN0cm95IiksZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLmhhbmRsZUtleWRvd24pfSxoYW5kbGVLZXlkb3duOmZ1bmN0aW9uKGV2ZW50KXt2YXIga2V5Q29kZT1ldmVudC5rZXlDb2RlO3RoaXMudmlzaWJsZSYmIXRoaXMudGltZVBpY2tlclZpc2libGUmJigtMSE9PVszOCw0MCwzNywzOV0uaW5kZXhPZihrZXlDb2RlKSYmKHRoaXMuaGFuZGxlS2V5Q29udHJvbChrZXlDb2RlKSxldmVudC5zdG9wUHJvcGFnYXRpb24oKSxldmVudC5wcmV2ZW50RGVmYXVsdCgpKSwxMz09PWtleUNvZGUmJm51bGw9PT10aGlzLnVzZXJJbnB1dERhdGUmJm51bGw9PT10aGlzLnVzZXJJbnB1dFRpbWUmJnRoaXMuZW1pdCh0aGlzLmRhdGUsITEpKX0saGFuZGxlS2V5Q29udHJvbDpmdW5jdGlvbihrZXlDb2RlKXtmb3IodmFyIG1hcHBpbmc9e3llYXI6ezM4Oi00LDQwOjQsMzc6LTEsMzk6MSxvZmZzZXQ6ZnVuY3Rpb24oZGF0ZSxzdGVwKXtyZXR1cm4gZGF0ZS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkrc3RlcCl9fSxtb250aDp7Mzg6LTQsNDA6NCwzNzotMSwzOToxLG9mZnNldDpmdW5jdGlvbihkYXRlLHN0ZXApe3JldHVybiBkYXRlLnNldE1vbnRoKGRhdGUuZ2V0TW9udGgoKStzdGVwKX19LHdlZWs6ezM4Oi0xLDQwOjEsMzc6LTEsMzk6MSxvZmZzZXQ6ZnVuY3Rpb24oZGF0ZSxzdGVwKXtyZXR1cm4gZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpKzcqc3RlcCl9fSxkYXk6ezM4Oi03LDQwOjcsMzc6LTEsMzk6MSxvZmZzZXQ6ZnVuY3Rpb24oZGF0ZSxzdGVwKXtyZXR1cm4gZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpK3N0ZXApfX19LG1vZGU9dGhpcy5zZWxlY3Rpb25Nb2RlLG5vdz10aGlzLmRhdGUuZ2V0VGltZSgpLG5ld0RhdGU9bmV3IERhdGUodGhpcy5kYXRlLmdldFRpbWUoKSk7TWF0aC5hYnMobm93LW5ld0RhdGUuZ2V0VGltZSgpKTw9MzE1MzZlNjspe3ZhciBtYXA9bWFwcGluZ1ttb2RlXTtpZihtYXAub2Zmc2V0KG5ld0RhdGUsbWFwW2tleUNvZGVdKSwiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5kaXNhYmxlZERhdGV8fCF0aGlzLmRpc2FibGVkRGF0ZShuZXdEYXRlKSl7dGhpcy5kYXRlPW5ld0RhdGUsdGhpcy4kZW1pdCgicGljayIsbmV3RGF0ZSwhMCk7YnJlYWt9fX0saGFuZGxlVmlzaWJsZVRpbWVDaGFuZ2U6ZnVuY3Rpb24odmFsdWUpe3ZhciB0aW1lPXV0aWxfcGFyc2VEYXRlKHZhbHVlLHRoaXMudGltZUZvcm1hdCk7dGltZSYmdGhpcy5jaGVja0RhdGVXaXRoaW5SYW5nZSh0aW1lKSYmKHRoaXMuZGF0ZT1tb2RpZnlEYXRlKHRpbWUsdGhpcy55ZWFyLHRoaXMubW9udGgsdGhpcy5tb250aERhdGUpLHRoaXMudXNlcklucHV0VGltZT1udWxsLHRoaXMuJHJlZnMudGltZXBpY2tlci52YWx1ZT10aGlzLmRhdGUsdGhpcy50aW1lUGlja2VyVmlzaWJsZT0hMSx0aGlzLmVtaXQodGhpcy5kYXRlLCEwKSl9LGhhbmRsZVZpc2libGVEYXRlQ2hhbmdlOmZ1bmN0aW9uKHZhbHVlKXt2YXIgZGF0ZT11dGlsX3BhcnNlRGF0ZSh2YWx1ZSx0aGlzLmRhdGVGb3JtYXQpO2lmKGRhdGUpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLmRpc2FibGVkRGF0ZSYmdGhpcy5kaXNhYmxlZERhdGUoZGF0ZSkpcmV0dXJuO3RoaXMuZGF0ZT1tb2RpZnlUaW1lKGRhdGUsdGhpcy5kYXRlLmdldEhvdXJzKCksdGhpcy5kYXRlLmdldE1pbnV0ZXMoKSx0aGlzLmRhdGUuZ2V0U2Vjb25kcygpKSx0aGlzLnVzZXJJbnB1dERhdGU9bnVsbCx0aGlzLnJlc2V0VmlldygpLHRoaXMuZW1pdCh0aGlzLmRhdGUsITApfX0saXNWYWxpZFZhbHVlOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWUmJiFpc05hTih2YWx1ZSkmJigiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5kaXNhYmxlZERhdGV8fCF0aGlzLmRpc2FibGVkRGF0ZSh2YWx1ZSkpJiZ0aGlzLmNoZWNrRGF0ZVdpdGhpblJhbmdlKHZhbHVlKX0sZ2V0RGVmYXVsdFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlP25ldyBEYXRlKHRoaXMuZGVmYXVsdFZhbHVlKTpuZXcgRGF0ZX0sY2hlY2tEYXRlV2l0aGluUmFuZ2U6ZnVuY3Rpb24oZGF0ZSl7cmV0dXJuISgwPHRoaXMuc2VsZWN0YWJsZVJhbmdlLmxlbmd0aCl8fHRpbWVXaXRoaW5SYW5nZShkYXRlLHRoaXMuc2VsZWN0YWJsZVJhbmdlLHRoaXMuZm9ybWF0fHwiSEg6bW06c3MiKX19LGNvbXBvbmVudHM6e1RpbWVQaWNrZXI6cGFuZWxfdGltZSxZZWFyVGFibGU6eWVhcl90YWJsZSxNb250aFRhYmxlOm1vbnRoX3RhYmxlLERhdGVUYWJsZTpkYXRlX3RhYmxlLEVsSW5wdXQ6aW5wdXRfZGVmYXVsdC5hLEVsQnV0dG9uOmJ1dHRvbl9kZWZhdWx0LmF9LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cG9wcGVyQ2xhc3M6IiIsZGF0ZTpuZXcgRGF0ZSx2YWx1ZToiIixkZWZhdWx0VmFsdWU6bnVsbCxkZWZhdWx0VGltZTpudWxsLHNob3dUaW1lOiExLHNlbGVjdGlvbk1vZGU6ImRheSIsc2hvcnRjdXRzOiIiLHZpc2libGU6ITEsY3VycmVudFZpZXc6ImRhdGUiLGRpc2FibGVkRGF0ZToiIixzZWxlY3RhYmxlUmFuZ2U6W10sZmlyc3REYXlPZldlZWs6NyxzaG93V2Vla051bWJlcjohMSx0aW1lUGlja2VyVmlzaWJsZTohMSxmb3JtYXQ6IiIsYXJyb3dDb250cm9sOiExLHVzZXJJbnB1dERhdGU6bnVsbCx1c2VySW5wdXRUaW1lOm51bGx9fSxjb21wdXRlZDp7eWVhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKX0sbW9udGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRlLmdldE1vbnRoKCl9LHdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gZ2V0V2Vla051bWJlcih0aGlzLmRhdGUpfSxtb250aERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRlLmdldERhdGUoKX0sZm9vdGVyVmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNob3dUaW1lfHwiZGF0ZXMiPT09dGhpcy5zZWxlY3Rpb25Nb2RlfSx2aXNpYmxlVGltZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy51c2VySW5wdXRUaW1lP3RoaXMudXNlcklucHV0VGltZTp1dGlsX2Zvcm1hdERhdGUodGhpcy52YWx1ZXx8dGhpcy5kZWZhdWx0VmFsdWUsdGhpcy50aW1lRm9ybWF0KX0sdmlzaWJsZURhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMudXNlcklucHV0RGF0ZT90aGlzLnVzZXJJbnB1dERhdGU6dXRpbF9mb3JtYXREYXRlKHRoaXMudmFsdWV8fHRoaXMuZGVmYXVsdFZhbHVlLHRoaXMuZGF0ZUZvcm1hdCl9LHllYXJMYWJlbDpmdW5jdGlvbigpe3ZhciB5ZWFyVHJhbnNsYXRpb249dGhpcy50KCJlbC5kYXRlcGlja2VyLnllYXIiKTtpZigieWVhciIhPT10aGlzLmN1cnJlbnRWaWV3KXJldHVybiB0aGlzLnllYXIrIiAiK3llYXJUcmFuc2xhdGlvbjt2YXIgc3RhcnRZZWFyPTEwKk1hdGguZmxvb3IodGhpcy55ZWFyLzEwKTtyZXR1cm4geWVhclRyYW5zbGF0aW9uP3N0YXJ0WWVhcisiICIreWVhclRyYW5zbGF0aW9uKyIgLSAiKyhzdGFydFllYXIrOSkrIiAiK3llYXJUcmFuc2xhdGlvbjpzdGFydFllYXIrIiAtICIrKHN0YXJ0WWVhcis5KX0sdGltZUZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm1hdD9leHRyYWN0VGltZUZvcm1hdCh0aGlzLmZvcm1hdCk6IkhIOm1tOnNzIn0sZGF0ZUZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm1hdD9leHRyYWN0RGF0ZUZvcm1hdCh0aGlzLmZvcm1hdCk6Inl5eXktTU0tZGQifX19LGRhdGV2dWVfdHlwZV90ZW1wbGF0ZV9pZF8yNDQwZDRlYV9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2RhdGVfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9kYXRlLXBpY2tlci9zcmMvcGFuZWwvZGF0ZS52dWUiO3ZhciBwYW5lbF9kYXRlPWRhdGVfY29tcG9uZW50LmV4cG9ydHMsZGF0ZV9yYW5nZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzI2NTI4NDlhX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToiZWwtem9vbS1pbi10b3AifSxvbjp7ImFmdGVyLWxlYXZlIjpmdW5jdGlvbigkZXZlbnQpe192bS4kZW1pdCgiZG9kZXN0cm95Iil9fX0sW19jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0udmlzaWJsZSxleHByZXNzaW9uOiJ2aXNpYmxlIn1dLHN0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWwgZWwtZGF0ZS1yYW5nZS1waWNrZXIgZWwtcG9wcGVyIixjbGFzczpbeyJoYXMtc2lkZWJhciI6X3ZtLiRzbG90cy5zaWRlYmFyfHxfdm0uc2hvcnRjdXRzLCJoYXMtdGltZSI6X3ZtLnNob3dUaW1lfSxfdm0ucG9wcGVyQ2xhc3NdfSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2JvZHktd3JhcHBlciJ9LFtfdm0uX3QoInNpZGViYXIiKSxfdm0uc2hvcnRjdXRzP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsX19zaWRlYmFyIn0sX3ZtLl9sKF92bS5zaG9ydGN1dHMsZnVuY3Rpb24oc2hvcnRjdXQsa2V5KXtyZXR1cm4gX2MoImJ1dHRvbiIse2tleTprZXksc3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9fc2hvcnRjdXQiLGF0dHJzOnt0eXBlOiJidXR0b24ifSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaGFuZGxlU2hvcnRjdXRDbGljayhzaG9ydGN1dCl9fX0sW192bS5fdihfdm0uX3Moc2hvcnRjdXQudGV4dCkpXSl9KSwwKTpfdm0uX2UoKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9fYm9keSJ9LFtfdm0uc2hvd1RpbWU/X2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1kYXRlLXJhbmdlLXBpY2tlcl9fdGltZS1oZWFkZXIifSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtZGF0ZS1yYW5nZS1waWNrZXJfX2VkaXRvcnMtd3JhcCJ9LFtfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1kYXRlLXJhbmdlLXBpY2tlcl9fdGltZS1waWNrZXItd3JhcCJ9LFtfYygiZWwtaW5wdXQiLHtyZWY6Im1pbklucHV0IixzdGF0aWNDbGFzczoiZWwtZGF0ZS1yYW5nZS1waWNrZXJfX2VkaXRvciIsYXR0cnM6e3NpemU6InNtYWxsIixkaXNhYmxlZDpfdm0ucmFuZ2VTdGF0ZS5zZWxlY3RpbmcscGxhY2Vob2xkZXI6X3ZtLnQoImVsLmRhdGVwaWNrZXIuc3RhcnREYXRlIiksdmFsdWU6X3ZtLm1pblZpc2libGVEYXRlfSxvbjp7aW5wdXQ6ZnVuY3Rpb24odmFsKXtyZXR1cm4gX3ZtLmhhbmRsZURhdGVJbnB1dCh2YWwsIm1pbiIpfSxjaGFuZ2U6ZnVuY3Rpb24odmFsKXtyZXR1cm4gX3ZtLmhhbmRsZURhdGVDaGFuZ2UodmFsLCJtaW4iKX19fSldLDEpLF9jKCJzcGFuIix7ZGlyZWN0aXZlczpbe25hbWU6ImNsaWNrb3V0c2lkZSIscmF3TmFtZToidi1jbGlja291dHNpZGUiLHZhbHVlOl92bS5oYW5kbGVNaW5UaW1lQ2xvc2UsZXhwcmVzc2lvbjoiaGFuZGxlTWluVGltZUNsb3NlIn1dLHN0YXRpY0NsYXNzOiJlbC1kYXRlLXJhbmdlLXBpY2tlcl9fdGltZS1waWNrZXItd3JhcCJ9LFtfYygiZWwtaW5wdXQiLHtzdGF0aWNDbGFzczoiZWwtZGF0ZS1yYW5nZS1waWNrZXJfX2VkaXRvciIsYXR0cnM6e3NpemU6InNtYWxsIixkaXNhYmxlZDpfdm0ucmFuZ2VTdGF0ZS5zZWxlY3RpbmcscGxhY2Vob2xkZXI6X3ZtLnQoImVsLmRhdGVwaWNrZXIuc3RhcnRUaW1lIiksdmFsdWU6X3ZtLm1pblZpc2libGVUaW1lfSxvbjp7Zm9jdXM6ZnVuY3Rpb24oJGV2ZW50KXtfdm0ubWluVGltZVBpY2tlclZpc2libGU9ITB9LGlucHV0OmZ1bmN0aW9uKHZhbCl7cmV0dXJuIF92bS5oYW5kbGVUaW1lSW5wdXQodmFsLCJtaW4iKX0sY2hhbmdlOmZ1bmN0aW9uKHZhbCl7cmV0dXJuIF92bS5oYW5kbGVUaW1lQ2hhbmdlKHZhbCwibWluIil9fX0pLF9jKCJ0aW1lLXBpY2tlciIse3JlZjoibWluVGltZVBpY2tlciIsYXR0cnM6eyJ0aW1lLWFycm93LWNvbnRyb2wiOl92bS5hcnJvd0NvbnRyb2wsdmlzaWJsZTpfdm0ubWluVGltZVBpY2tlclZpc2libGV9LG9uOntwaWNrOl92bS5oYW5kbGVNaW5UaW1lUGljayxtb3VudGVkOmZ1bmN0aW9uKCRldmVudCl7X3ZtLiRyZWZzLm1pblRpbWVQaWNrZXIuZm9ybWF0PV92bS50aW1lRm9ybWF0fX19KV0sMSldKSxfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1pY29uLWFycm93LXJpZ2h0In0pLF9jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWRhdGUtcmFuZ2UtcGlja2VyX19lZGl0b3JzLXdyYXAgaXMtcmlnaHQifSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtZGF0ZS1yYW5nZS1waWNrZXJfX3RpbWUtcGlja2VyLXdyYXAifSxbX2MoImVsLWlucHV0Iix7c3RhdGljQ2xhc3M6ImVsLWRhdGUtcmFuZ2UtcGlja2VyX19lZGl0b3IiLGF0dHJzOntzaXplOiJzbWFsbCIsZGlzYWJsZWQ6X3ZtLnJhbmdlU3RhdGUuc2VsZWN0aW5nLHBsYWNlaG9sZGVyOl92bS50KCJlbC5kYXRlcGlja2VyLmVuZERhdGUiKSx2YWx1ZTpfdm0ubWF4VmlzaWJsZURhdGUscmVhZG9ubHk6IV92bS5taW5EYXRlfSxvbjp7aW5wdXQ6ZnVuY3Rpb24odmFsKXtyZXR1cm4gX3ZtLmhhbmRsZURhdGVJbnB1dCh2YWwsIm1heCIpfSxjaGFuZ2U6ZnVuY3Rpb24odmFsKXtyZXR1cm4gX3ZtLmhhbmRsZURhdGVDaGFuZ2UodmFsLCJtYXgiKX19fSldLDEpLF9jKCJzcGFuIix7ZGlyZWN0aXZlczpbe25hbWU6ImNsaWNrb3V0c2lkZSIscmF3TmFtZToidi1jbGlja291dHNpZGUiLHZhbHVlOl92bS5oYW5kbGVNYXhUaW1lQ2xvc2UsZXhwcmVzc2lvbjoiaGFuZGxlTWF4VGltZUNsb3NlIn1dLHN0YXRpY0NsYXNzOiJlbC1kYXRlLXJhbmdlLXBpY2tlcl9fdGltZS1waWNrZXItd3JhcCJ9LFtfYygiZWwtaW5wdXQiLHtzdGF0aWNDbGFzczoiZWwtZGF0ZS1yYW5nZS1waWNrZXJfX2VkaXRvciIsYXR0cnM6e3NpemU6InNtYWxsIixkaXNhYmxlZDpfdm0ucmFuZ2VTdGF0ZS5zZWxlY3RpbmcscGxhY2Vob2xkZXI6X3ZtLnQoImVsLmRhdGVwaWNrZXIuZW5kVGltZSIpLHZhbHVlOl92bS5tYXhWaXNpYmxlVGltZSxyZWFkb25seTohX3ZtLm1pbkRhdGV9LG9uOntmb2N1czpmdW5jdGlvbigkZXZlbnQpe192bS5taW5EYXRlJiYoX3ZtLm1heFRpbWVQaWNrZXJWaXNpYmxlPSEwKX0saW5wdXQ6ZnVuY3Rpb24odmFsKXtyZXR1cm4gX3ZtLmhhbmRsZVRpbWVJbnB1dCh2YWwsIm1heCIpfSxjaGFuZ2U6ZnVuY3Rpb24odmFsKXtyZXR1cm4gX3ZtLmhhbmRsZVRpbWVDaGFuZ2UodmFsLCJtYXgiKX19fSksX2MoInRpbWUtcGlja2VyIix7cmVmOiJtYXhUaW1lUGlja2VyIixhdHRyczp7InRpbWUtYXJyb3ctY29udHJvbCI6X3ZtLmFycm93Q29udHJvbCx2aXNpYmxlOl92bS5tYXhUaW1lUGlja2VyVmlzaWJsZX0sb246e3BpY2s6X3ZtLmhhbmRsZU1heFRpbWVQaWNrLG1vdW50ZWQ6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uJHJlZnMubWF4VGltZVBpY2tlci5mb3JtYXQ9X3ZtLnRpbWVGb3JtYXR9fX0pXSwxKV0pXSk6X3ZtLl9lKCksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2NvbnRlbnQgZWwtZGF0ZS1yYW5nZS1waWNrZXJfX2NvbnRlbnQgaXMtbGVmdCJ9LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWRhdGUtcmFuZ2UtcGlja2VyX19oZWFkZXIifSxbX2MoImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2ljb24tYnRuIGVsLWljb24tZC1hcnJvdy1sZWZ0IixhdHRyczp7dHlwZToiYnV0dG9uIn0sb246e2NsaWNrOl92bS5sZWZ0UHJldlllYXJ9fSksX2MoImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2ljb24tYnRuIGVsLWljb24tYXJyb3ctbGVmdCIsYXR0cnM6e3R5cGU6ImJ1dHRvbiJ9LG9uOntjbGljazpfdm0ubGVmdFByZXZNb250aH19KSxfdm0udW5saW5rUGFuZWxzP19jKCJidXR0b24iLHtzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsX19pY29uLWJ0biBlbC1pY29uLWQtYXJyb3ctcmlnaHQiLGNsYXNzOnsiaXMtZGlzYWJsZWQiOiFfdm0uZW5hYmxlWWVhckFycm93fSxhdHRyczp7dHlwZToiYnV0dG9uIixkaXNhYmxlZDohX3ZtLmVuYWJsZVllYXJBcnJvd30sb246e2NsaWNrOl92bS5sZWZ0TmV4dFllYXJ9fSk6X3ZtLl9lKCksX3ZtLnVubGlua1BhbmVscz9fYygiYnV0dG9uIix7c3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9faWNvbi1idG4gZWwtaWNvbi1hcnJvdy1yaWdodCIsY2xhc3M6eyJpcy1kaXNhYmxlZCI6IV92bS5lbmFibGVNb250aEFycm93fSxhdHRyczp7dHlwZToiYnV0dG9uIixkaXNhYmxlZDohX3ZtLmVuYWJsZU1vbnRoQXJyb3d9LG9uOntjbGljazpfdm0ubGVmdE5leHRNb250aH19KTpfdm0uX2UoKSxfYygiZGl2IixbX3ZtLl92KF92bS5fcyhfdm0ubGVmdExhYmVsKSldKV0pLF9jKCJkYXRlLXRhYmxlIix7YXR0cnM6eyJzZWxlY3Rpb24tbW9kZSI6InJhbmdlIixkYXRlOl92bS5sZWZ0RGF0ZSwiZGVmYXVsdC12YWx1ZSI6X3ZtLmRlZmF1bHRWYWx1ZSwibWluLWRhdGUiOl92bS5taW5EYXRlLCJtYXgtZGF0ZSI6X3ZtLm1heERhdGUsInJhbmdlLXN0YXRlIjpfdm0ucmFuZ2VTdGF0ZSwiZGlzYWJsZWQtZGF0ZSI6X3ZtLmRpc2FibGVkRGF0ZSwiZmlyc3QtZGF5LW9mLXdlZWsiOl92bS5maXJzdERheU9mV2Vla30sb246e2NoYW5nZXJhbmdlOl92bS5oYW5kbGVDaGFuZ2VSYW5nZSxwaWNrOl92bS5oYW5kbGVSYW5nZVBpY2t9fSldLDEpLF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsX19jb250ZW50IGVsLWRhdGUtcmFuZ2UtcGlja2VyX19jb250ZW50IGlzLXJpZ2h0In0sW19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtZGF0ZS1yYW5nZS1waWNrZXJfX2hlYWRlciJ9LFtfdm0udW5saW5rUGFuZWxzP19jKCJidXR0b24iLHtzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsX19pY29uLWJ0biBlbC1pY29uLWQtYXJyb3ctbGVmdCIsY2xhc3M6eyJpcy1kaXNhYmxlZCI6IV92bS5lbmFibGVZZWFyQXJyb3d9LGF0dHJzOnt0eXBlOiJidXR0b24iLGRpc2FibGVkOiFfdm0uZW5hYmxlWWVhckFycm93fSxvbjp7Y2xpY2s6X3ZtLnJpZ2h0UHJldlllYXJ9fSk6X3ZtLl9lKCksX3ZtLnVubGlua1BhbmVscz9fYygiYnV0dG9uIix7c3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9faWNvbi1idG4gZWwtaWNvbi1hcnJvdy1sZWZ0IixjbGFzczp7ImlzLWRpc2FibGVkIjohX3ZtLmVuYWJsZU1vbnRoQXJyb3d9LGF0dHJzOnt0eXBlOiJidXR0b24iLGRpc2FibGVkOiFfdm0uZW5hYmxlTW9udGhBcnJvd30sb246e2NsaWNrOl92bS5yaWdodFByZXZNb250aH19KTpfdm0uX2UoKSxfYygiYnV0dG9uIix7c3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9faWNvbi1idG4gZWwtaWNvbi1kLWFycm93LXJpZ2h0IixhdHRyczp7dHlwZToiYnV0dG9uIn0sb246e2NsaWNrOl92bS5yaWdodE5leHRZZWFyfX0pLF9jKCJidXR0b24iLHtzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsX19pY29uLWJ0biBlbC1pY29uLWFycm93LXJpZ2h0IixhdHRyczp7dHlwZToiYnV0dG9uIn0sb246e2NsaWNrOl92bS5yaWdodE5leHRNb250aH19KSxfYygiZGl2IixbX3ZtLl92KF92bS5fcyhfdm0ucmlnaHRMYWJlbCkpXSldKSxfYygiZGF0ZS10YWJsZSIse2F0dHJzOnsic2VsZWN0aW9uLW1vZGUiOiJyYW5nZSIsZGF0ZTpfdm0ucmlnaHREYXRlLCJkZWZhdWx0LXZhbHVlIjpfdm0uZGVmYXVsdFZhbHVlLCJtaW4tZGF0ZSI6X3ZtLm1pbkRhdGUsIm1heC1kYXRlIjpfdm0ubWF4RGF0ZSwicmFuZ2Utc3RhdGUiOl92bS5yYW5nZVN0YXRlLCJkaXNhYmxlZC1kYXRlIjpfdm0uZGlzYWJsZWREYXRlLCJmaXJzdC1kYXktb2Ytd2VlayI6X3ZtLmZpcnN0RGF5T2ZXZWVrfSxvbjp7Y2hhbmdlcmFuZ2U6X3ZtLmhhbmRsZUNoYW5nZVJhbmdlLHBpY2s6X3ZtLmhhbmRsZVJhbmdlUGlja319KV0sMSldKV0sMiksX3ZtLnNob3dUaW1lP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcGlja2VyLXBhbmVsX19mb290ZXIifSxbX2MoImVsLWJ1dHRvbiIse3N0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWxfX2xpbmstYnRuIixhdHRyczp7c2l6ZToibWluaSIsdHlwZToidGV4dCJ9LG9uOntjbGljazpfdm0uaGFuZGxlQ2xlYXJ9fSxbX3ZtLl92KCJcbiAgICAgICAgIitfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIuY2xlYXIiKSkrIlxuICAgICAgIildKSxfYygiZWwtYnV0dG9uIix7c3RhdGljQ2xhc3M6ImVsLXBpY2tlci1wYW5lbF9fbGluay1idG4iLGF0dHJzOntwbGFpbjoiIixzaXplOiJtaW5pIixkaXNhYmxlZDpfdm0uYnRuRGlzYWJsZWR9LG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe192bS5oYW5kbGVDb25maXJtKCExKX19fSxbX3ZtLl92KCJcbiAgICAgICAgIitfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIuY29uZmlybSIpKSsiXG4gICAgICAiKV0pXSwxKTpfdm0uX2UoKV0pXSl9O2RhdGVfcmFuZ2V2dWVfdHlwZV90ZW1wbGF0ZV9pZF8yNjUyODQ5YV9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgYWR2YW5jZURhdGU9ZnVuY3Rpb24oZGF0ZSxhbW91bnQpe3JldHVybiBuZXcgRGF0ZShuZXcgRGF0ZShkYXRlKS5nZXRUaW1lKCkrYW1vdW50KX0sY2FsY0RlZmF1bHRWYWx1ZT1mdW5jdGlvbihkZWZhdWx0VmFsdWUpe3JldHVybiBBcnJheS5pc0FycmF5KGRlZmF1bHRWYWx1ZSk/W25ldyBEYXRlKGRlZmF1bHRWYWx1ZVswXSksbmV3IERhdGUoZGVmYXVsdFZhbHVlWzFdKV06ZGVmYXVsdFZhbHVlP1tuZXcgRGF0ZShkZWZhdWx0VmFsdWUpLGFkdmFuY2VEYXRlKGRlZmF1bHRWYWx1ZSw4NjRlNSldOltuZXcgRGF0ZSxhZHZhbmNlRGF0ZShEYXRlLm5vdygpLDg2NGU1KV19LGRhdGVfcmFuZ2VfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bWl4aW5zOltsb2NhbGVfZGVmYXVsdC5hXSxkaXJlY3RpdmVzOntDbGlja291dHNpZGU6Y2xpY2tvdXRzaWRlX2RlZmF1bHQuYX0sY29tcHV0ZWQ6e2J0bkRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLm1pbkRhdGUmJnRoaXMubWF4RGF0ZSYmIXRoaXMuc2VsZWN0aW5nJiZ0aGlzLmlzVmFsaWRWYWx1ZShbdGhpcy5taW5EYXRlLHRoaXMubWF4RGF0ZV0pKX0sbGVmdExhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdERhdGUuZ2V0RnVsbFllYXIoKSsiICIrdGhpcy50KCJlbC5kYXRlcGlja2VyLnllYXIiKSsiICIrdGhpcy50KCJlbC5kYXRlcGlja2VyLm1vbnRoIisodGhpcy5sZWZ0RGF0ZS5nZXRNb250aCgpKzEpKX0scmlnaHRMYWJlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0RGF0ZS5nZXRGdWxsWWVhcigpKyIgIit0aGlzLnQoImVsLmRhdGVwaWNrZXIueWVhciIpKyIgIit0aGlzLnQoImVsLmRhdGVwaWNrZXIubW9udGgiKyh0aGlzLnJpZ2h0RGF0ZS5nZXRNb250aCgpKzEpKX0sbGVmdFllYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZWZ0RGF0ZS5nZXRGdWxsWWVhcigpfSxsZWZ0TW9udGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZWZ0RGF0ZS5nZXRNb250aCgpfSxsZWZ0TW9udGhEYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdERhdGUuZ2V0RGF0ZSgpfSxyaWdodFllYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yaWdodERhdGUuZ2V0RnVsbFllYXIoKX0scmlnaHRNb250aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0RGF0ZS5nZXRNb250aCgpfSxyaWdodE1vbnRoRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0RGF0ZS5nZXREYXRlKCl9LG1pblZpc2libGVEYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmRhdGVVc2VySW5wdXQubWluP3RoaXMuZGF0ZVVzZXJJbnB1dC5taW46dGhpcy5taW5EYXRlP3V0aWxfZm9ybWF0RGF0ZSh0aGlzLm1pbkRhdGUsdGhpcy5kYXRlRm9ybWF0KToiIn0sbWF4VmlzaWJsZURhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuZGF0ZVVzZXJJbnB1dC5tYXg/dGhpcy5kYXRlVXNlcklucHV0Lm1heDp0aGlzLm1heERhdGV8fHRoaXMubWluRGF0ZT91dGlsX2Zvcm1hdERhdGUodGhpcy5tYXhEYXRlfHx0aGlzLm1pbkRhdGUsdGhpcy5kYXRlRm9ybWF0KToiIn0sbWluVmlzaWJsZVRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMudGltZVVzZXJJbnB1dC5taW4/dGhpcy50aW1lVXNlcklucHV0Lm1pbjp0aGlzLm1pbkRhdGU/dXRpbF9mb3JtYXREYXRlKHRoaXMubWluRGF0ZSx0aGlzLnRpbWVGb3JtYXQpOiIifSxtYXhWaXNpYmxlVGltZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy50aW1lVXNlcklucHV0Lm1heD90aGlzLnRpbWVVc2VySW5wdXQubWF4OnRoaXMubWF4RGF0ZXx8dGhpcy5taW5EYXRlP3V0aWxfZm9ybWF0RGF0ZSh0aGlzLm1heERhdGV8fHRoaXMubWluRGF0ZSx0aGlzLnRpbWVGb3JtYXQpOiIifSx0aW1lRm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9ybWF0P2V4dHJhY3RUaW1lRm9ybWF0KHRoaXMuZm9ybWF0KToiSEg6bW06c3MifSxkYXRlRm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9ybWF0P2V4dHJhY3REYXRlRm9ybWF0KHRoaXMuZm9ybWF0KToieXl5eS1NTS1kZCJ9LGVuYWJsZU1vbnRoQXJyb3c6ZnVuY3Rpb24oKXt2YXIgbmV4dE1vbnRoPSh0aGlzLmxlZnRNb250aCsxKSUxMix5ZWFyT2Zmc2V0PTEyPD10aGlzLmxlZnRNb250aCsxPzE6MDtyZXR1cm4gdGhpcy51bmxpbmtQYW5lbHMmJm5ldyBEYXRlKHRoaXMubGVmdFllYXIreWVhck9mZnNldCxuZXh0TW9udGgpPG5ldyBEYXRlKHRoaXMucmlnaHRZZWFyLHRoaXMucmlnaHRNb250aCl9LGVuYWJsZVllYXJBcnJvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVubGlua1BhbmVscyYmMTI8PTEyKnRoaXMucmlnaHRZZWFyK3RoaXMucmlnaHRNb250aC0oMTIqdGhpcy5sZWZ0WWVhcit0aGlzLmxlZnRNb250aCsxKX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cG9wcGVyQ2xhc3M6IiIsdmFsdWU6W10sZGVmYXVsdFZhbHVlOm51bGwsZGVmYXVsdFRpbWU6bnVsbCxtaW5EYXRlOiIiLG1heERhdGU6IiIsbGVmdERhdGU6bmV3IERhdGUscmlnaHREYXRlOnV0aWxfbmV4dE1vbnRoKG5ldyBEYXRlKSxyYW5nZVN0YXRlOntlbmREYXRlOm51bGwsc2VsZWN0aW5nOiExLHJvdzpudWxsLGNvbHVtbjpudWxsfSxzaG93VGltZTohMSxzaG9ydGN1dHM6IiIsdmlzaWJsZToiIixkaXNhYmxlZERhdGU6IiIsZmlyc3REYXlPZldlZWs6NyxtaW5UaW1lUGlja2VyVmlzaWJsZTohMSxtYXhUaW1lUGlja2VyVmlzaWJsZTohMSxmb3JtYXQ6IiIsYXJyb3dDb250cm9sOiExLHVubGlua1BhbmVsczohMSxkYXRlVXNlcklucHV0OnttaW46bnVsbCxtYXg6bnVsbH0sdGltZVVzZXJJbnB1dDp7bWluOm51bGwsbWF4Om51bGx9fX0sd2F0Y2g6e21pbkRhdGU6ZnVuY3Rpb24odmFsKXt2YXIgX3RoaXM9dGhpczt0aGlzLmRhdGVVc2VySW5wdXQubWluPW51bGwsdGhpcy50aW1lVXNlcklucHV0Lm1pbj1udWxsLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7aWYoX3RoaXMuJHJlZnMubWF4VGltZVBpY2tlciYmX3RoaXMubWF4RGF0ZSYmX3RoaXMubWF4RGF0ZTxfdGhpcy5taW5EYXRlKXtfdGhpcy4kcmVmcy5tYXhUaW1lUGlja2VyLnNlbGVjdGFibGVSYW5nZT1bW3V0aWxfcGFyc2VEYXRlKHV0aWxfZm9ybWF0RGF0ZShfdGhpcy5taW5EYXRlLCJISDptbTpzcyIpLCJISDptbTpzcyIpLHV0aWxfcGFyc2VEYXRlKCIyMzo1OTo1OSIsIkhIOm1tOnNzIildXX19KSx2YWwmJnRoaXMuJHJlZnMubWluVGltZVBpY2tlciYmKHRoaXMuJHJlZnMubWluVGltZVBpY2tlci5kYXRlPXZhbCx0aGlzLiRyZWZzLm1pblRpbWVQaWNrZXIudmFsdWU9dmFsKX0sbWF4RGF0ZTpmdW5jdGlvbih2YWwpe3RoaXMuZGF0ZVVzZXJJbnB1dC5tYXg9bnVsbCx0aGlzLnRpbWVVc2VySW5wdXQubWF4PW51bGwsdmFsJiZ0aGlzLiRyZWZzLm1heFRpbWVQaWNrZXImJih0aGlzLiRyZWZzLm1heFRpbWVQaWNrZXIuZGF0ZT12YWwsdGhpcy4kcmVmcy5tYXhUaW1lUGlja2VyLnZhbHVlPXZhbCl9LG1pblRpbWVQaWNrZXJWaXNpYmxlOmZ1bmN0aW9uKHZhbCl7dmFyIF90aGlzMj10aGlzO3ZhbCYmdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczIuJHJlZnMubWluVGltZVBpY2tlci5kYXRlPV90aGlzMi5taW5EYXRlLF90aGlzMi4kcmVmcy5taW5UaW1lUGlja2VyLnZhbHVlPV90aGlzMi5taW5EYXRlLF90aGlzMi4kcmVmcy5taW5UaW1lUGlja2VyLmFkanVzdFNwaW5uZXJzKCl9KX0sbWF4VGltZVBpY2tlclZpc2libGU6ZnVuY3Rpb24odmFsKXt2YXIgX3RoaXMzPXRoaXM7dmFsJiZ0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzMy4kcmVmcy5tYXhUaW1lUGlja2VyLmRhdGU9X3RoaXMzLm1heERhdGUsX3RoaXMzLiRyZWZzLm1heFRpbWVQaWNrZXIudmFsdWU9X3RoaXMzLm1heERhdGUsX3RoaXMzLiRyZWZzLm1heFRpbWVQaWNrZXIuYWRqdXN0U3Bpbm5lcnMoKX0pfSx2YWx1ZTpmdW5jdGlvbihuZXdWYWwpe2lmKG5ld1ZhbCl7aWYoQXJyYXkuaXNBcnJheShuZXdWYWwpKWlmKHRoaXMubWluRGF0ZT1pc0RhdGUobmV3VmFsWzBdKT9uZXcgRGF0ZShuZXdWYWxbMF0pOm51bGwsdGhpcy5tYXhEYXRlPWlzRGF0ZShuZXdWYWxbMV0pP25ldyBEYXRlKG5ld1ZhbFsxXSk6bnVsbCx0aGlzLm1pbkRhdGUpaWYodGhpcy5sZWZ0RGF0ZT10aGlzLm1pbkRhdGUsdGhpcy51bmxpbmtQYW5lbHMmJnRoaXMubWF4RGF0ZSl7dmFyIG1pbkRhdGVZZWFyPXRoaXMubWluRGF0ZS5nZXRGdWxsWWVhcigpLG1pbkRhdGVNb250aD10aGlzLm1pbkRhdGUuZ2V0TW9udGgoKSxtYXhEYXRlWWVhcj10aGlzLm1heERhdGUuZ2V0RnVsbFllYXIoKSxtYXhEYXRlTW9udGg9dGhpcy5tYXhEYXRlLmdldE1vbnRoKCk7dGhpcy5yaWdodERhdGU9bWluRGF0ZVllYXI9PT1tYXhEYXRlWWVhciYmbWluRGF0ZU1vbnRoPT09bWF4RGF0ZU1vbnRoP3V0aWxfbmV4dE1vbnRoKHRoaXMubWF4RGF0ZSk6dGhpcy5tYXhEYXRlfWVsc2UgdGhpcy5yaWdodERhdGU9dXRpbF9uZXh0TW9udGgodGhpcy5sZWZ0RGF0ZSk7ZWxzZSB0aGlzLmxlZnREYXRlPWNhbGNEZWZhdWx0VmFsdWUodGhpcy5kZWZhdWx0VmFsdWUpWzBdLHRoaXMucmlnaHREYXRlPXV0aWxfbmV4dE1vbnRoKHRoaXMubGVmdERhdGUpfWVsc2UgdGhpcy5taW5EYXRlPW51bGwsdGhpcy5tYXhEYXRlPW51bGx9LGRlZmF1bHRWYWx1ZTpmdW5jdGlvbih2YWwpe2lmKCFBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpKXt2YXIgX2NhbGNEZWZhdWx0VmFsdWU9Y2FsY0RlZmF1bHRWYWx1ZSh2YWwpLGxlZnQ9X2NhbGNEZWZhdWx0VmFsdWVbMF0scmlnaHQ9X2NhbGNEZWZhdWx0VmFsdWVbMV07dGhpcy5sZWZ0RGF0ZT1sZWZ0LHRoaXMucmlnaHREYXRlPXZhbCYmdmFsWzFdJiZ0aGlzLnVubGlua1BhbmVscz9yaWdodDp1dGlsX25leHRNb250aCh0aGlzLmxlZnREYXRlKX19fSxtZXRob2RzOntoYW5kbGVDbGVhcjpmdW5jdGlvbigpe3RoaXMubWluRGF0ZT1udWxsLHRoaXMubWF4RGF0ZT1udWxsLHRoaXMubGVmdERhdGU9Y2FsY0RlZmF1bHRWYWx1ZSh0aGlzLmRlZmF1bHRWYWx1ZSlbMF0sdGhpcy5yaWdodERhdGU9dXRpbF9uZXh0TW9udGgodGhpcy5sZWZ0RGF0ZSksdGhpcy4kZW1pdCgicGljayIsbnVsbCl9LGhhbmRsZUNoYW5nZVJhbmdlOmZ1bmN0aW9uKHZhbCl7dGhpcy5taW5EYXRlPXZhbC5taW5EYXRlLHRoaXMubWF4RGF0ZT12YWwubWF4RGF0ZSx0aGlzLnJhbmdlU3RhdGU9dmFsLnJhbmdlU3RhdGV9LGhhbmRsZURhdGVJbnB1dDpmdW5jdGlvbih2YWx1ZSx0eXBlKXtpZigodGhpcy5kYXRlVXNlcklucHV0W3R5cGVdPXZhbHVlKS5sZW5ndGg9PT10aGlzLmRhdGVGb3JtYXQubGVuZ3RoKXt2YXIgcGFyc2VkVmFsdWU9dXRpbF9wYXJzZURhdGUodmFsdWUsdGhpcy5kYXRlRm9ybWF0KTtpZihwYXJzZWRWYWx1ZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuZGlzYWJsZWREYXRlJiZ0aGlzLmRpc2FibGVkRGF0ZShuZXcgRGF0ZShwYXJzZWRWYWx1ZSkpKXJldHVybjsibWluIj09PXR5cGU/KHRoaXMubWluRGF0ZT1tb2RpZnlEYXRlKHRoaXMubWluRGF0ZXx8bmV3IERhdGUscGFyc2VkVmFsdWUuZ2V0RnVsbFllYXIoKSxwYXJzZWRWYWx1ZS5nZXRNb250aCgpLHBhcnNlZFZhbHVlLmdldERhdGUoKSksdGhpcy5sZWZ0RGF0ZT1uZXcgRGF0ZShwYXJzZWRWYWx1ZSksdGhpcy51bmxpbmtQYW5lbHN8fCh0aGlzLnJpZ2h0RGF0ZT11dGlsX25leHRNb250aCh0aGlzLmxlZnREYXRlKSkpOih0aGlzLm1heERhdGU9bW9kaWZ5RGF0ZSh0aGlzLm1heERhdGV8fG5ldyBEYXRlLHBhcnNlZFZhbHVlLmdldEZ1bGxZZWFyKCkscGFyc2VkVmFsdWUuZ2V0TW9udGgoKSxwYXJzZWRWYWx1ZS5nZXREYXRlKCkpLHRoaXMucmlnaHREYXRlPW5ldyBEYXRlKHBhcnNlZFZhbHVlKSx0aGlzLnVubGlua1BhbmVsc3x8KHRoaXMubGVmdERhdGU9dXRpbF9wcmV2TW9udGgocGFyc2VkVmFsdWUpKSl9fX0saGFuZGxlRGF0ZUNoYW5nZTpmdW5jdGlvbih2YWx1ZSx0eXBlKXt2YXIgcGFyc2VkVmFsdWU9dXRpbF9wYXJzZURhdGUodmFsdWUsdGhpcy5kYXRlRm9ybWF0KTtwYXJzZWRWYWx1ZSYmKCJtaW4iPT09dHlwZT8odGhpcy5taW5EYXRlPW1vZGlmeURhdGUodGhpcy5taW5EYXRlLHBhcnNlZFZhbHVlLmdldEZ1bGxZZWFyKCkscGFyc2VkVmFsdWUuZ2V0TW9udGgoKSxwYXJzZWRWYWx1ZS5nZXREYXRlKCkpLHRoaXMubWluRGF0ZT50aGlzLm1heERhdGUmJih0aGlzLm1heERhdGU9dGhpcy5taW5EYXRlKSk6KHRoaXMubWF4RGF0ZT1tb2RpZnlEYXRlKHRoaXMubWF4RGF0ZSxwYXJzZWRWYWx1ZS5nZXRGdWxsWWVhcigpLHBhcnNlZFZhbHVlLmdldE1vbnRoKCkscGFyc2VkVmFsdWUuZ2V0RGF0ZSgpKSx0aGlzLm1heERhdGU8dGhpcy5taW5EYXRlJiYodGhpcy5taW5EYXRlPXRoaXMubWF4RGF0ZSkpKX0saGFuZGxlVGltZUlucHV0OmZ1bmN0aW9uKHZhbHVlLHR5cGUpe3ZhciBfdGhpczQ9dGhpcztpZigodGhpcy50aW1lVXNlcklucHV0W3R5cGVdPXZhbHVlKS5sZW5ndGg9PT10aGlzLnRpbWVGb3JtYXQubGVuZ3RoKXt2YXIgcGFyc2VkVmFsdWU9dXRpbF9wYXJzZURhdGUodmFsdWUsdGhpcy50aW1lRm9ybWF0KTtwYXJzZWRWYWx1ZSYmKCJtaW4iPT09dHlwZT8odGhpcy5taW5EYXRlPW1vZGlmeVRpbWUodGhpcy5taW5EYXRlLHBhcnNlZFZhbHVlLmdldEhvdXJzKCkscGFyc2VkVmFsdWUuZ2V0TWludXRlcygpLHBhcnNlZFZhbHVlLmdldFNlY29uZHMoKSksdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oXyl7cmV0dXJuIF90aGlzNC4kcmVmcy5taW5UaW1lUGlja2VyLmFkanVzdFNwaW5uZXJzKCl9KSk6KHRoaXMubWF4RGF0ZT1tb2RpZnlUaW1lKHRoaXMubWF4RGF0ZSxwYXJzZWRWYWx1ZS5nZXRIb3VycygpLHBhcnNlZFZhbHVlLmdldE1pbnV0ZXMoKSxwYXJzZWRWYWx1ZS5nZXRTZWNvbmRzKCkpLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKF8pe3JldHVybiBfdGhpczQuJHJlZnMubWF4VGltZVBpY2tlci5hZGp1c3RTcGlubmVycygpfSkpKX19LGhhbmRsZVRpbWVDaGFuZ2U6ZnVuY3Rpb24odmFsdWUsdHlwZSl7dmFyIHBhcnNlZFZhbHVlPXV0aWxfcGFyc2VEYXRlKHZhbHVlLHRoaXMudGltZUZvcm1hdCk7cGFyc2VkVmFsdWUmJigibWluIj09PXR5cGU/KHRoaXMubWluRGF0ZT1tb2RpZnlUaW1lKHRoaXMubWluRGF0ZSxwYXJzZWRWYWx1ZS5nZXRIb3VycygpLHBhcnNlZFZhbHVlLmdldE1pbnV0ZXMoKSxwYXJzZWRWYWx1ZS5nZXRTZWNvbmRzKCkpLHRoaXMubWluRGF0ZT50aGlzLm1heERhdGUmJih0aGlzLm1heERhdGU9dGhpcy5taW5EYXRlKSx0aGlzLiRyZWZzLm1pblRpbWVQaWNrZXIudmFsdWU9dGhpcy5taW5EYXRlLHRoaXMubWluVGltZVBpY2tlclZpc2libGU9ITEpOih0aGlzLm1heERhdGU9bW9kaWZ5VGltZSh0aGlzLm1heERhdGUscGFyc2VkVmFsdWUuZ2V0SG91cnMoKSxwYXJzZWRWYWx1ZS5nZXRNaW51dGVzKCkscGFyc2VkVmFsdWUuZ2V0U2Vjb25kcygpKSx0aGlzLm1heERhdGU8dGhpcy5taW5EYXRlJiYodGhpcy5taW5EYXRlPXRoaXMubWF4RGF0ZSksdGhpcy4kcmVmcy5tYXhUaW1lUGlja2VyLnZhbHVlPXRoaXMubWluRGF0ZSx0aGlzLm1heFRpbWVQaWNrZXJWaXNpYmxlPSExKSl9LGhhbmRsZVJhbmdlUGljazpmdW5jdGlvbih2YWwpe3ZhciBfdGhpczU9dGhpcyxjbG9zZT0hKDE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLGRlZmF1bHRUaW1lPXRoaXMuZGVmYXVsdFRpbWV8fFtdLG1pbkRhdGU9bW9kaWZ5V2l0aFRpbWVTdHJpbmcodmFsLm1pbkRhdGUsZGVmYXVsdFRpbWVbMF0pLG1heERhdGU9bW9kaWZ5V2l0aFRpbWVTdHJpbmcodmFsLm1heERhdGUsZGVmYXVsdFRpbWVbMV0pO3RoaXMubWF4RGF0ZT09PW1heERhdGUmJnRoaXMubWluRGF0ZT09PW1pbkRhdGV8fCh0aGlzLm9uUGljayYmdGhpcy5vblBpY2sodmFsKSx0aGlzLm1heERhdGU9bWF4RGF0ZSx0aGlzLm1pbkRhdGU9bWluRGF0ZSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXM1Lm1heERhdGU9bWF4RGF0ZSxfdGhpczUubWluRGF0ZT1taW5EYXRlfSwxMCksY2xvc2UmJiF0aGlzLnNob3dUaW1lJiZ0aGlzLmhhbmRsZUNvbmZpcm0oKSl9LGhhbmRsZVNob3J0Y3V0Q2xpY2s6ZnVuY3Rpb24oc2hvcnRjdXQpe3Nob3J0Y3V0Lm9uQ2xpY2smJnNob3J0Y3V0Lm9uQ2xpY2sodGhpcyl9LGhhbmRsZU1pblRpbWVQaWNrOmZ1bmN0aW9uKHZhbHVlLHZpc2libGUsZmlyc3Qpe3RoaXMubWluRGF0ZT10aGlzLm1pbkRhdGV8fG5ldyBEYXRlLHZhbHVlJiYodGhpcy5taW5EYXRlPW1vZGlmeVRpbWUodGhpcy5taW5EYXRlLHZhbHVlLmdldEhvdXJzKCksdmFsdWUuZ2V0TWludXRlcygpLHZhbHVlLmdldFNlY29uZHMoKSkpLGZpcnN0fHwodGhpcy5taW5UaW1lUGlja2VyVmlzaWJsZT12aXNpYmxlKSwoIXRoaXMubWF4RGF0ZXx8dGhpcy5tYXhEYXRlJiZ0aGlzLm1heERhdGUuZ2V0VGltZSgpPHRoaXMubWluRGF0ZS5nZXRUaW1lKCkpJiYodGhpcy5tYXhEYXRlPW5ldyBEYXRlKHRoaXMubWluRGF0ZSkpfSxoYW5kbGVNaW5UaW1lQ2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm1pblRpbWVQaWNrZXJWaXNpYmxlPSExfSxoYW5kbGVNYXhUaW1lUGljazpmdW5jdGlvbih2YWx1ZSx2aXNpYmxlLGZpcnN0KXt0aGlzLm1heERhdGUmJnZhbHVlJiYodGhpcy5tYXhEYXRlPW1vZGlmeVRpbWUodGhpcy5tYXhEYXRlLHZhbHVlLmdldEhvdXJzKCksdmFsdWUuZ2V0TWludXRlcygpLHZhbHVlLmdldFNlY29uZHMoKSkpLGZpcnN0fHwodGhpcy5tYXhUaW1lUGlja2VyVmlzaWJsZT12aXNpYmxlKSx0aGlzLm1heERhdGUmJnRoaXMubWluRGF0ZSYmdGhpcy5taW5EYXRlLmdldFRpbWUoKT50aGlzLm1heERhdGUuZ2V0VGltZSgpJiYodGhpcy5taW5EYXRlPW5ldyBEYXRlKHRoaXMubWF4RGF0ZSkpfSxoYW5kbGVNYXhUaW1lQ2xvc2U6ZnVuY3Rpb24oKXt0aGlzLm1heFRpbWVQaWNrZXJWaXNpYmxlPSExfSxsZWZ0UHJldlllYXI6ZnVuY3Rpb24oKXt0aGlzLmxlZnREYXRlPXV0aWxfcHJldlllYXIodGhpcy5sZWZ0RGF0ZSksdGhpcy51bmxpbmtQYW5lbHN8fCh0aGlzLnJpZ2h0RGF0ZT11dGlsX25leHRNb250aCh0aGlzLmxlZnREYXRlKSl9LGxlZnRQcmV2TW9udGg6ZnVuY3Rpb24oKXt0aGlzLmxlZnREYXRlPXV0aWxfcHJldk1vbnRoKHRoaXMubGVmdERhdGUpLHRoaXMudW5saW5rUGFuZWxzfHwodGhpcy5yaWdodERhdGU9dXRpbF9uZXh0TW9udGgodGhpcy5sZWZ0RGF0ZSkpfSxyaWdodE5leHRZZWFyOmZ1bmN0aW9uKCl7dGhpcy51bmxpbmtQYW5lbHM/dGhpcy5yaWdodERhdGU9dXRpbF9uZXh0WWVhcih0aGlzLnJpZ2h0RGF0ZSk6KHRoaXMubGVmdERhdGU9dXRpbF9uZXh0WWVhcih0aGlzLmxlZnREYXRlKSx0aGlzLnJpZ2h0RGF0ZT11dGlsX25leHRNb250aCh0aGlzLmxlZnREYXRlKSl9LHJpZ2h0TmV4dE1vbnRoOmZ1bmN0aW9uKCl7dGhpcy51bmxpbmtQYW5lbHM/dGhpcy5yaWdodERhdGU9dXRpbF9uZXh0TW9udGgodGhpcy5yaWdodERhdGUpOih0aGlzLmxlZnREYXRlPXV0aWxfbmV4dE1vbnRoKHRoaXMubGVmdERhdGUpLHRoaXMucmlnaHREYXRlPXV0aWxfbmV4dE1vbnRoKHRoaXMubGVmdERhdGUpKX0sbGVmdE5leHRZZWFyOmZ1bmN0aW9uKCl7dGhpcy5sZWZ0RGF0ZT11dGlsX25leHRZZWFyKHRoaXMubGVmdERhdGUpfSxsZWZ0TmV4dE1vbnRoOmZ1bmN0aW9uKCl7dGhpcy5sZWZ0RGF0ZT11dGlsX25leHRNb250aCh0aGlzLmxlZnREYXRlKX0scmlnaHRQcmV2WWVhcjpmdW5jdGlvbigpe3RoaXMucmlnaHREYXRlPXV0aWxfcHJldlllYXIodGhpcy5yaWdodERhdGUpfSxyaWdodFByZXZNb250aDpmdW5jdGlvbigpe3RoaXMucmlnaHREYXRlPXV0aWxfcHJldk1vbnRoKHRoaXMucmlnaHREYXRlKX0saGFuZGxlQ29uZmlybTpmdW5jdGlvbigpe3ZhciB2aXNpYmxlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07dGhpcy5pc1ZhbGlkVmFsdWUoW3RoaXMubWluRGF0ZSx0aGlzLm1heERhdGVdKSYmdGhpcy4kZW1pdCgicGljayIsW3RoaXMubWluRGF0ZSx0aGlzLm1heERhdGVdLHZpc2libGUpfSxpc1ZhbGlkVmFsdWU6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSYmdmFsdWUmJnZhbHVlWzBdJiZ2YWx1ZVsxXSYmaXNEYXRlKHZhbHVlWzBdKSYmaXNEYXRlKHZhbHVlWzFdKSYmdmFsdWVbMF0uZ2V0VGltZSgpPD12YWx1ZVsxXS5nZXRUaW1lKCkmJigiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5kaXNhYmxlZERhdGV8fCF0aGlzLmRpc2FibGVkRGF0ZSh2YWx1ZVswXSkmJiF0aGlzLmRpc2FibGVkRGF0ZSh2YWx1ZVsxXSkpfSxyZXNldFZpZXc6ZnVuY3Rpb24oKXt0aGlzLm1pbkRhdGU9dGhpcy52YWx1ZSYmaXNEYXRlKHRoaXMudmFsdWVbMF0pP25ldyBEYXRlKHRoaXMudmFsdWVbMF0pOm51bGwsdGhpcy5tYXhEYXRlPXRoaXMudmFsdWUmJmlzRGF0ZSh0aGlzLnZhbHVlWzBdKT9uZXcgRGF0ZSh0aGlzLnZhbHVlWzFdKTpudWxsfX0sY29tcG9uZW50czp7VGltZVBpY2tlcjpwYW5lbF90aW1lLERhdGVUYWJsZTpkYXRlX3RhYmxlLEVsSW5wdXQ6aW5wdXRfZGVmYXVsdC5hLEVsQnV0dG9uOmJ1dHRvbl9kZWZhdWx0LmF9fSxkYXRlX3JhbmdldnVlX3R5cGVfdGVtcGxhdGVfaWRfMjY1Mjg0OWFfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtkYXRlX3JhbmdlX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvZGF0ZS1waWNrZXIvc3JjL3BhbmVsL2RhdGUtcmFuZ2UudnVlIjt2YXIgZGF0ZV9yYW5nZT1kYXRlX3JhbmdlX2NvbXBvbmVudC5leHBvcnRzLGRhdGVfcGlja2VyX2dldFBhbmVsPWZ1bmN0aW9uKHR5cGUpe3JldHVybiJkYXRlcmFuZ2UiPT09dHlwZXx8ImRhdGV0aW1lcmFuZ2UiPT09dHlwZT9kYXRlX3JhbmdlOnBhbmVsX2RhdGV9LGRhdGVfcGlja2VyPXttaXhpbnM6W3BpY2tlcl0sbmFtZToiRWxEYXRlUGlja2VyIixwcm9wczp7dHlwZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiZGF0ZSJ9LHRpbWVBcnJvd0NvbnRyb2w6Qm9vbGVhbn0sd2F0Y2g6e3R5cGU6ZnVuY3Rpb24oX3R5cGUpe3RoaXMucGlja2VyPyh0aGlzLnVubW91bnRQaWNrZXIoKSx0aGlzLnBhbmVsPWRhdGVfcGlja2VyX2dldFBhbmVsKF90eXBlKSx0aGlzLm1vdW50UGlja2VyKCkpOnRoaXMucGFuZWw9ZGF0ZV9waWNrZXJfZ2V0UGFuZWwoX3R5cGUpfX0sY3JlYXRlZDpmdW5jdGlvbigpe3RoaXMucGFuZWw9ZGF0ZV9waWNrZXJfZ2V0UGFuZWwodGhpcy50eXBlKX0saW5zdGFsbDpmdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoZGF0ZV9waWNrZXIubmFtZSxkYXRlX3BpY2tlcil9fSxwYWNrYWdlc19kYXRlX3BpY2tlcj1kYXRlX3BpY2tlcix0aW1lX3NlbGVjdHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzUxYWI5MzIwX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToiZWwtem9vbS1pbi10b3AifSxvbjp7ImJlZm9yZS1lbnRlciI6X3ZtLmhhbmRsZU1lbnVFbnRlciwiYWZ0ZXItbGVhdmUiOmZ1bmN0aW9uKCRldmVudCl7X3ZtLiRlbWl0KCJkb2Rlc3Ryb3kiKX19fSxbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS52aXNpYmxlLGV4cHJlc3Npb246InZpc2libGUifV0scmVmOiJwb3BwZXIiLHN0YXRpY0NsYXNzOiJlbC1waWNrZXItcGFuZWwgdGltZS1zZWxlY3QgZWwtcG9wcGVyIixjbGFzczpfdm0ucG9wcGVyQ2xhc3Msc3R5bGU6e3dpZHRoOl92bS53aWR0aCsicHgifX0sW19jKCJlbC1zY3JvbGxiYXIiLHthdHRyczp7bm9yZXNpemU6IiIsIndyYXAtY2xhc3MiOiJlbC1waWNrZXItcGFuZWxfX2NvbnRlbnQifX0sX3ZtLl9sKF92bS5pdGVtcyxmdW5jdGlvbihpdGVtKXtyZXR1cm4gX2MoImRpdiIse2tleTppdGVtLnZhbHVlLHN0YXRpY0NsYXNzOiJ0aW1lLXNlbGVjdC1pdGVtIixjbGFzczp7c2VsZWN0ZWQ6X3ZtLnZhbHVlPT09aXRlbS52YWx1ZSxkaXNhYmxlZDppdGVtLmRpc2FibGVkLGRlZmF1bHQ6aXRlbS52YWx1ZT09PV92bS5kZWZhdWx0VmFsdWV9LGF0dHJzOntkaXNhYmxlZDppdGVtLmRpc2FibGVkfSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaGFuZGxlQ2xpY2soaXRlbSl9fX0sW192bS5fdihfdm0uX3MoaXRlbS52YWx1ZSkpXSl9KSwwKV0sMSldKX07dGltZV9zZWxlY3R2dWVfdHlwZV90ZW1wbGF0ZV9pZF81MWFiOTMyMF9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgcGFyc2VUaW1lPWZ1bmN0aW9uKHRpbWUpe3ZhciB2YWx1ZXM9KHRpbWV8fCIiKS5zcGxpdCgiOiIpO3JldHVybiAyPD12YWx1ZXMubGVuZ3RoP3tob3VyczpwYXJzZUludCh2YWx1ZXNbMF0sMTApLG1pbnV0ZXM6cGFyc2VJbnQodmFsdWVzWzFdLDEwKX06bnVsbH0sY29tcGFyZVRpbWU9ZnVuY3Rpb24odGltZTEsdGltZTIpe3ZhciB2YWx1ZTE9cGFyc2VUaW1lKHRpbWUxKSx2YWx1ZTI9cGFyc2VUaW1lKHRpbWUyKSxtaW51dGVzMT12YWx1ZTEubWludXRlcys2MCp2YWx1ZTEuaG91cnMsbWludXRlczI9dmFsdWUyLm1pbnV0ZXMrNjAqdmFsdWUyLmhvdXJzO3JldHVybiBtaW51dGVzMT09PW1pbnV0ZXMyPzA6bWludXRlczI8bWludXRlczE/MTotMX0sbmV4dFRpbWU9ZnVuY3Rpb24odGltZSxzdGVwKXt2YXIgdGltZVZhbHVlPXBhcnNlVGltZSh0aW1lKSxzdGVwVmFsdWU9cGFyc2VUaW1lKHN0ZXApLG5leHQ9e2hvdXJzOnRpbWVWYWx1ZS5ob3VycyxtaW51dGVzOnRpbWVWYWx1ZS5taW51dGVzfTtyZXR1cm4gbmV4dC5taW51dGVzKz1zdGVwVmFsdWUubWludXRlcyxuZXh0LmhvdXJzKz1zdGVwVmFsdWUuaG91cnMsbmV4dC5ob3Vycys9TWF0aC5mbG9vcihuZXh0Lm1pbnV0ZXMvNjApLG5leHQubWludXRlcz1uZXh0Lm1pbnV0ZXMlNjAsZnVuY3Rpb24odGltZSl7cmV0dXJuKHRpbWUuaG91cnM8MTA/IjAiK3RpbWUuaG91cnM6dGltZS5ob3VycykrIjoiKyh0aW1lLm1pbnV0ZXM8MTA/IjAiK3RpbWUubWludXRlczp0aW1lLm1pbnV0ZXMpfShuZXh0KX0sdGltZV9zZWxlY3RfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7Y29tcG9uZW50czp7RWxTY3JvbGxiYXI6c2Nyb2xsYmFyX2RlZmF1bHQuYX0sd2F0Y2g6e3ZhbHVlOmZ1bmN0aW9uKHZhbCl7dmFyIF90aGlzPXRoaXM7dmFsJiZ0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBfdGhpcy5zY3JvbGxUb09wdGlvbigpfSl9fSxtZXRob2RzOntoYW5kbGVDbGljazpmdW5jdGlvbihpdGVtKXtpdGVtLmRpc2FibGVkfHx0aGlzLiRlbWl0KCJwaWNrIixpdGVtLnZhbHVlKX0saGFuZGxlQ2xlYXI6ZnVuY3Rpb24oKXt0aGlzLiRlbWl0KCJwaWNrIixudWxsKX0sc2Nyb2xsVG9PcHRpb246ZnVuY3Rpb24oKXt2YXIgc2VsZWN0b3I9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiIuc2VsZWN0ZWQiLG1lbnU9dGhpcy4kcmVmcy5wb3BwZXIucXVlcnlTZWxlY3RvcigiLmVsLXBpY2tlci1wYW5lbF9fY29udGVudCIpO3Njcm9sbF9pbnRvX3ZpZXdfZGVmYXVsdCgpKG1lbnUsbWVudS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSl9LGhhbmRsZU1lbnVFbnRlcjpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpcyxzZWxlY3RlZD0tMSE9PXRoaXMuaXRlbXMubWFwKGZ1bmN0aW9uKGl0ZW0pe3JldHVybiBpdGVtLnZhbHVlfSkuaW5kZXhPZih0aGlzLnZhbHVlKSxoYXNEZWZhdWx0PS0xIT09dGhpcy5pdGVtcy5tYXAoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0udmFsdWV9KS5pbmRleE9mKHRoaXMuZGVmYXVsdFZhbHVlKSxvcHRpb249KHNlbGVjdGVkPyIuc2VsZWN0ZWQiOmhhc0RlZmF1bHQmJiIuZGVmYXVsdCIpfHwiLnRpbWUtc2VsZWN0LWl0ZW06bm90KC5kaXNhYmxlZCkiO3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzMi5zY3JvbGxUb09wdGlvbihvcHRpb24pfSl9LHNjcm9sbERvd246ZnVuY3Rpb24oc3RlcCl7Zm9yKHZhciBpdGVtcz10aGlzLml0ZW1zLGxlbmd0aD1pdGVtcy5sZW5ndGgsdG90YWw9aXRlbXMubGVuZ3RoLGluZGV4PWl0ZW1zLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbS52YWx1ZX0pLmluZGV4T2YodGhpcy52YWx1ZSk7dG90YWwtLTspaWYoIWl0ZW1zW2luZGV4PShpbmRleCtzdGVwK2xlbmd0aCklbGVuZ3RoXS5kaXNhYmxlZClyZXR1cm4gdm9pZCB0aGlzLiRlbWl0KCJwaWNrIixpdGVtc1tpbmRleF0udmFsdWUsITApfSxpc1ZhbGlkVmFsdWU6ZnVuY3Rpb24oZGF0ZSl7cmV0dXJuLTEhPT10aGlzLml0ZW1zLmZpbHRlcihmdW5jdGlvbihpdGVtKXtyZXR1cm4haXRlbS5kaXNhYmxlZH0pLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbS52YWx1ZX0pLmluZGV4T2YoZGF0ZSl9LGhhbmRsZUtleWRvd246ZnVuY3Rpb24oZXZlbnQpe3ZhciBrZXlDb2RlPWV2ZW50LmtleUNvZGU7aWYoMzg9PT1rZXlDb2RlfHw0MD09PWtleUNvZGUpe3ZhciBvZmZzZXQ9ezQwOjEsMzg6LTF9W2tleUNvZGUudG9TdHJpbmcoKV07cmV0dXJuIHRoaXMuc2Nyb2xsRG93bihvZmZzZXQpLHZvaWQgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9fX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntwb3BwZXJDbGFzczoiIixzdGFydDoiMDk6MDAiLGVuZDoiMTg6MDAiLHN0ZXA6IjAwOjMwIix2YWx1ZToiIixkZWZhdWx0VmFsdWU6IiIsdmlzaWJsZTohMSxtaW5UaW1lOiIiLG1heFRpbWU6IiIsd2lkdGg6MH19LGNvbXB1dGVkOntpdGVtczpmdW5jdGlvbigpe3ZhciBzdGFydD10aGlzLnN0YXJ0LGVuZD10aGlzLmVuZCxzdGVwPXRoaXMuc3RlcCxyZXN1bHQ9W107aWYoc3RhcnQmJmVuZCYmc3RlcClmb3IodmFyIGN1cnJlbnQ9c3RhcnQ7Y29tcGFyZVRpbWUoY3VycmVudCxlbmQpPD0wOylyZXN1bHQucHVzaCh7dmFsdWU6Y3VycmVudCxkaXNhYmxlZDpjb21wYXJlVGltZShjdXJyZW50LHRoaXMubWluVGltZXx8Ii0xOi0xIik8PTB8fDA8PWNvbXBhcmVUaW1lKGN1cnJlbnQsdGhpcy5tYXhUaW1lfHwiMTAwOjEwMCIpfSksY3VycmVudD1uZXh0VGltZShjdXJyZW50LHN0ZXApO3JldHVybiByZXN1bHR9fX0sdGltZV9zZWxlY3R2dWVfdHlwZV90ZW1wbGF0ZV9pZF81MWFiOTMyMF9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3RpbWVfc2VsZWN0X2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvZGF0ZS1waWNrZXIvc3JjL3BhbmVsL3RpbWUtc2VsZWN0LnZ1ZSI7dmFyIHRpbWVfc2VsZWN0PXRpbWVfc2VsZWN0X2NvbXBvbmVudC5leHBvcnRzLHBpY2tlcl90aW1lX3NlbGVjdD17bWl4aW5zOltwaWNrZXJdLG5hbWU6IkVsVGltZVNlbGVjdCIsY29tcG9uZW50TmFtZToiRWxUaW1lU2VsZWN0Iixwcm9wczp7dHlwZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoidGltZS1zZWxlY3QifX0sYmVmb3JlQ3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5wYW5lbD10aW1lX3NlbGVjdH0saW5zdGFsbDpmdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQocGlja2VyX3RpbWVfc2VsZWN0Lm5hbWUscGlja2VyX3RpbWVfc2VsZWN0KX19LHBhY2thZ2VzX3RpbWVfc2VsZWN0PXBpY2tlcl90aW1lX3NlbGVjdCx0aW1lX3JhbmdldnVlX3R5cGVfdGVtcGxhdGVfaWRfZmIyODY2MGVfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJlbC16b29tLWluLXRvcCJ9LG9uOnsiYWZ0ZXItbGVhdmUiOmZ1bmN0aW9uKCRldmVudCl7X3ZtLiRlbWl0KCJkb2Rlc3Ryb3kiKX19fSxbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS52aXNpYmxlLGV4cHJlc3Npb246InZpc2libGUifV0sc3RhdGljQ2xhc3M6ImVsLXRpbWUtcmFuZ2UtcGlja2VyIGVsLXBpY2tlci1wYW5lbCBlbC1wb3BwZXIiLGNsYXNzOl92bS5wb3BwZXJDbGFzc30sW19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtdGltZS1yYW5nZS1waWNrZXJfX2NvbnRlbnQifSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXJhbmdlLXBpY2tlcl9fY2VsbCJ9LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRpbWUtcmFuZ2UtcGlja2VyX19oZWFkZXIifSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5zdGFydFRpbWUiKSkpXSksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXJhbmdlLXBpY2tlcl9fYm9keSBlbC10aW1lLXBhbmVsX19jb250ZW50IixjbGFzczp7Imhhcy1zZWNvbmRzIjpfdm0uc2hvd1NlY29uZHMsImlzLWFycm93Ijpfdm0uYXJyb3dDb250cm9sfX0sW19jKCJ0aW1lLXNwaW5uZXIiLHtyZWY6Im1pblNwaW5uZXIiLGF0dHJzOnsic2hvdy1zZWNvbmRzIjpfdm0uc2hvd1NlY29uZHMsImFtLXBtLW1vZGUiOl92bS5hbVBtTW9kZSwiYXJyb3ctY29udHJvbCI6X3ZtLmFycm93Q29udHJvbCxkYXRlOl92bS5taW5EYXRlfSxvbjp7Y2hhbmdlOl92bS5oYW5kbGVNaW5DaGFuZ2UsInNlbGVjdC1yYW5nZSI6X3ZtLnNldE1pblNlbGVjdGlvblJhbmdlfX0pXSwxKV0pLF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtdGltZS1yYW5nZS1waWNrZXJfX2NlbGwifSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lLXJhbmdlLXBpY2tlcl9faGVhZGVyIn0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIuZW5kVGltZSIpKSldKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRpbWUtcmFuZ2UtcGlja2VyX19ib2R5IGVsLXRpbWUtcGFuZWxfX2NvbnRlbnQiLGNsYXNzOnsiaGFzLXNlY29uZHMiOl92bS5zaG93U2Vjb25kcywiaXMtYXJyb3ciOl92bS5hcnJvd0NvbnRyb2x9fSxbX2MoInRpbWUtc3Bpbm5lciIse3JlZjoibWF4U3Bpbm5lciIsYXR0cnM6eyJzaG93LXNlY29uZHMiOl92bS5zaG93U2Vjb25kcywiYW0tcG0tbW9kZSI6X3ZtLmFtUG1Nb2RlLCJhcnJvdy1jb250cm9sIjpfdm0uYXJyb3dDb250cm9sLGRhdGU6X3ZtLm1heERhdGV9LG9uOntjaGFuZ2U6X3ZtLmhhbmRsZU1heENoYW5nZSwic2VsZWN0LXJhbmdlIjpfdm0uc2V0TWF4U2VsZWN0aW9uUmFuZ2V9fSldLDEpXSldKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRpbWUtcGFuZWxfX2Zvb3RlciJ9LFtfYygiYnV0dG9uIix7c3RhdGljQ2xhc3M6ImVsLXRpbWUtcGFuZWxfX2J0biBjYW5jZWwiLGF0dHJzOnt0eXBlOiJidXR0b24ifSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaGFuZGxlQ2FuY2VsKCl9fX0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLmRhdGVwaWNrZXIuY2FuY2VsIikpKV0pLF9jKCJidXR0b24iLHtzdGF0aWNDbGFzczoiZWwtdGltZS1wYW5lbF9fYnRuIGNvbmZpcm0iLGF0dHJzOnt0eXBlOiJidXR0b24iLGRpc2FibGVkOl92bS5idG5EaXNhYmxlZH0sb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhhbmRsZUNvbmZpcm0oKX19fSxbX3ZtLl92KF92bS5fcyhfdm0udCgiZWwuZGF0ZXBpY2tlci5jb25maXJtIikpKV0pXSldKV0pfTt0aW1lX3JhbmdldnVlX3R5cGVfdGVtcGxhdGVfaWRfZmIyODY2MGVfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIE1JTl9USU1FPXV0aWxfcGFyc2VEYXRlKCIwMDowMDowMCIsIkhIOm1tOnNzIiksTUFYX1RJTUU9dXRpbF9wYXJzZURhdGUoIjIzOjU5OjU5IiwiSEg6bW06c3MiKSx0aW1lX3JhbmdldnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfbWF4VGltZU9mRGF5PWZ1bmN0aW9uKGRhdGUpe3JldHVybiBtb2RpZnlEYXRlKE1BWF9USU1FLGRhdGUuZ2V0RnVsbFllYXIoKSxkYXRlLmdldE1vbnRoKCksZGF0ZS5nZXREYXRlKCkpfSxhZHZhbmNlVGltZT1mdW5jdGlvbihkYXRlLGFtb3VudCl7cmV0dXJuIG5ldyBEYXRlKE1hdGgubWluKGRhdGUuZ2V0VGltZSgpK2Ftb3VudCx0aW1lX3JhbmdldnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfbWF4VGltZU9mRGF5KGRhdGUpLmdldFRpbWUoKSkpfSx0aW1lX3JhbmdlX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe21peGluczpbbG9jYWxlX2RlZmF1bHQuYV0sY29tcG9uZW50czp7VGltZVNwaW5uZXI6dGltZV9zcGlubmVyfSxjb21wdXRlZDp7c2hvd1NlY29uZHM6ZnVuY3Rpb24oKXtyZXR1cm4tMSE9PSh0aGlzLmZvcm1hdHx8IiIpLmluZGV4T2YoInNzIil9LG9mZnNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNob3dTZWNvbmRzPzExOjh9LHNwaW5uZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb25SYW5nZVswXTx0aGlzLm9mZnNldD90aGlzLiRyZWZzLm1pblNwaW5uZXI6dGhpcy4kcmVmcy5tYXhTcGlubmVyfSxidG5EaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbkRhdGUuZ2V0VGltZSgpPnRoaXMubWF4RGF0ZS5nZXRUaW1lKCl9LGFtUG1Nb2RlOmZ1bmN0aW9uKCl7cmV0dXJuLTEhPT0odGhpcy5mb3JtYXR8fCIiKS5pbmRleE9mKCJBIik/IkEiOi0xIT09KHRoaXMuZm9ybWF0fHwiIikuaW5kZXhPZigiYSIpPyJhIjoiIn19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cG9wcGVyQ2xhc3M6IiIsbWluRGF0ZTpuZXcgRGF0ZSxtYXhEYXRlOm5ldyBEYXRlLHZhbHVlOltdLG9sZFZhbHVlOltuZXcgRGF0ZSxuZXcgRGF0ZV0sZGVmYXVsdFZhbHVlOm51bGwsZm9ybWF0OiJISDptbTpzcyIsdmlzaWJsZTohMSxzZWxlY3Rpb25SYW5nZTpbMCwyXSxhcnJvd0NvbnRyb2w6ITF9fSx3YXRjaDp7dmFsdWU6ZnVuY3Rpb24oX3ZhbHVlKXtBcnJheS5pc0FycmF5KF92YWx1ZSk/KHRoaXMubWluRGF0ZT1uZXcgRGF0ZShfdmFsdWVbMF0pLHRoaXMubWF4RGF0ZT1uZXcgRGF0ZShfdmFsdWVbMV0pKTpBcnJheS5pc0FycmF5KHRoaXMuZGVmYXVsdFZhbHVlKT8odGhpcy5taW5EYXRlPW5ldyBEYXRlKHRoaXMuZGVmYXVsdFZhbHVlWzBdKSx0aGlzLm1heERhdGU9bmV3IERhdGUodGhpcy5kZWZhdWx0VmFsdWVbMV0pKTp0aGlzLmRlZmF1bHRWYWx1ZT8odGhpcy5taW5EYXRlPW5ldyBEYXRlKHRoaXMuZGVmYXVsdFZhbHVlKSx0aGlzLm1heERhdGU9YWR2YW5jZVRpbWUobmV3IERhdGUodGhpcy5kZWZhdWx0VmFsdWUpLDM2ZTUpKToodGhpcy5taW5EYXRlPW5ldyBEYXRlLHRoaXMubWF4RGF0ZT1hZHZhbmNlVGltZShuZXcgRGF0ZSwzNmU1KSl9LHZpc2libGU6ZnVuY3Rpb24odmFsKXt2YXIgX3RoaXM9dGhpczt2YWwmJih0aGlzLm9sZFZhbHVlPXRoaXMudmFsdWUsdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMuJHJlZnMubWluU3Bpbm5lci5lbWl0U2VsZWN0UmFuZ2UoImhvdXJzIil9KSl9fSxtZXRob2RzOntoYW5kbGVDbGVhcjpmdW5jdGlvbigpe3RoaXMuJGVtaXQoInBpY2siLG51bGwpfSxoYW5kbGVDYW5jZWw6ZnVuY3Rpb24oKXt0aGlzLiRlbWl0KCJwaWNrIix0aGlzLm9sZFZhbHVlKX0saGFuZGxlTWluQ2hhbmdlOmZ1bmN0aW9uKGRhdGUpe3RoaXMubWluRGF0ZT1jbGVhck1pbGxpc2Vjb25kcyhkYXRlKSx0aGlzLmhhbmRsZUNoYW5nZSgpfSxoYW5kbGVNYXhDaGFuZ2U6ZnVuY3Rpb24oZGF0ZSl7dGhpcy5tYXhEYXRlPWNsZWFyTWlsbGlzZWNvbmRzKGRhdGUpLHRoaXMuaGFuZGxlQ2hhbmdlKCl9LGhhbmRsZUNoYW5nZTpmdW5jdGlvbigpe3ZhciBkYXRlO3RoaXMuaXNWYWxpZFZhbHVlKFt0aGlzLm1pbkRhdGUsdGhpcy5tYXhEYXRlXSkmJih0aGlzLiRyZWZzLm1pblNwaW5uZXIuc2VsZWN0YWJsZVJhbmdlPVtbKGRhdGU9dGhpcy5taW5EYXRlLG1vZGlmeURhdGUoTUlOX1RJTUUsZGF0ZS5nZXRGdWxsWWVhcigpLGRhdGUuZ2V0TW9udGgoKSxkYXRlLmdldERhdGUoKSkpLHRoaXMubWF4RGF0ZV1dLHRoaXMuJHJlZnMubWF4U3Bpbm5lci5zZWxlY3RhYmxlUmFuZ2U9W1t0aGlzLm1pbkRhdGUsdGltZV9yYW5nZXZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX21heFRpbWVPZkRheSh0aGlzLm1heERhdGUpXV0sdGhpcy4kZW1pdCgicGljayIsW3RoaXMubWluRGF0ZSx0aGlzLm1heERhdGVdLCEwKSl9LHNldE1pblNlbGVjdGlvblJhbmdlOmZ1bmN0aW9uKHN0YXJ0LGVuZCl7dGhpcy4kZW1pdCgic2VsZWN0LXJhbmdlIixzdGFydCxlbmQsIm1pbiIpLHRoaXMuc2VsZWN0aW9uUmFuZ2U9W3N0YXJ0LGVuZF19LHNldE1heFNlbGVjdGlvblJhbmdlOmZ1bmN0aW9uKHN0YXJ0LGVuZCl7dGhpcy4kZW1pdCgic2VsZWN0LXJhbmdlIixzdGFydCxlbmQsIm1heCIpLHRoaXMuc2VsZWN0aW9uUmFuZ2U9W3N0YXJ0K3RoaXMub2Zmc2V0LGVuZCt0aGlzLm9mZnNldF19LGhhbmRsZUNvbmZpcm06ZnVuY3Rpb24oKXt2YXIgdmlzaWJsZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdLG1pblNlbGVjdGFibGVSYW5nZT10aGlzLiRyZWZzLm1pblNwaW5uZXIuc2VsZWN0YWJsZVJhbmdlLG1heFNlbGVjdGFibGVSYW5nZT10aGlzLiRyZWZzLm1heFNwaW5uZXIuc2VsZWN0YWJsZVJhbmdlO3RoaXMubWluRGF0ZT11dGlsX2xpbWl0VGltZVJhbmdlKHRoaXMubWluRGF0ZSxtaW5TZWxlY3RhYmxlUmFuZ2UsdGhpcy5mb3JtYXQpLHRoaXMubWF4RGF0ZT11dGlsX2xpbWl0VGltZVJhbmdlKHRoaXMubWF4RGF0ZSxtYXhTZWxlY3RhYmxlUmFuZ2UsdGhpcy5mb3JtYXQpLHRoaXMuJGVtaXQoInBpY2siLFt0aGlzLm1pbkRhdGUsdGhpcy5tYXhEYXRlXSx2aXNpYmxlKX0sYWRqdXN0U3Bpbm5lcnM6ZnVuY3Rpb24oKXt0aGlzLiRyZWZzLm1pblNwaW5uZXIuYWRqdXN0U3Bpbm5lcnMoKSx0aGlzLiRyZWZzLm1heFNwaW5uZXIuYWRqdXN0U3Bpbm5lcnMoKX0sY2hhbmdlU2VsZWN0aW9uUmFuZ2U6ZnVuY3Rpb24oc3RlcCl7dmFyIGxpc3Q9dGhpcy5zaG93U2Vjb25kcz9bMCwzLDYsMTEsMTQsMTddOlswLDMsOCwxMV0sbWFwcGluZz1bImhvdXJzIiwibWludXRlcyJdLmNvbmNhdCh0aGlzLnNob3dTZWNvbmRzP1sic2Vjb25kcyJdOltdKSxuZXh0PShsaXN0LmluZGV4T2YodGhpcy5zZWxlY3Rpb25SYW5nZVswXSkrc3RlcCtsaXN0Lmxlbmd0aCklbGlzdC5sZW5ndGgsaGFsZj1saXN0Lmxlbmd0aC8yO25leHQ8aGFsZj90aGlzLiRyZWZzLm1pblNwaW5uZXIuZW1pdFNlbGVjdFJhbmdlKG1hcHBpbmdbbmV4dF0pOnRoaXMuJHJlZnMubWF4U3Bpbm5lci5lbWl0U2VsZWN0UmFuZ2UobWFwcGluZ1tuZXh0LWhhbGZdKX0saXNWYWxpZFZhbHVlOmZ1bmN0aW9uKGRhdGUpe3JldHVybiBBcnJheS5pc0FycmF5KGRhdGUpJiZ0aW1lV2l0aGluUmFuZ2UodGhpcy5taW5EYXRlLHRoaXMuJHJlZnMubWluU3Bpbm5lci5zZWxlY3RhYmxlUmFuZ2UpJiZ0aW1lV2l0aGluUmFuZ2UodGhpcy5tYXhEYXRlLHRoaXMuJHJlZnMubWF4U3Bpbm5lci5zZWxlY3RhYmxlUmFuZ2UpfSxoYW5kbGVLZXlkb3duOmZ1bmN0aW9uKGV2ZW50KXt2YXIga2V5Q29kZT1ldmVudC5rZXlDb2RlLG1hcHBpbmc9ezM4Oi0xLDQwOjEsMzc6LTEsMzk6MX07aWYoMzc9PT1rZXlDb2RlfHwzOT09PWtleUNvZGUpe3ZhciBzdGVwPW1hcHBpbmdba2V5Q29kZV07cmV0dXJuIHRoaXMuY2hhbmdlU2VsZWN0aW9uUmFuZ2Uoc3RlcCksdm9pZCBldmVudC5wcmV2ZW50RGVmYXVsdCgpfWlmKDM4PT09a2V5Q29kZXx8NDA9PT1rZXlDb2RlKXt2YXIgX3N0ZXA9bWFwcGluZ1trZXlDb2RlXTtyZXR1cm4gdGhpcy5zcGlubmVyLnNjcm9sbERvd24oX3N0ZXApLHZvaWQgZXZlbnQucHJldmVudERlZmF1bHQoKX19fX0sdGltZV9yYW5nZXZ1ZV90eXBlX3RlbXBsYXRlX2lkX2ZiMjg2NjBlX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7dGltZV9yYW5nZV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2RhdGUtcGlja2VyL3NyYy9wYW5lbC90aW1lLXJhbmdlLnZ1ZSI7dmFyIHRpbWVfcmFuZ2U9dGltZV9yYW5nZV9jb21wb25lbnQuZXhwb3J0cyx0aW1lX3BpY2tlcj17bWl4aW5zOltwaWNrZXJdLG5hbWU6IkVsVGltZVBpY2tlciIscHJvcHM6e2lzUmFuZ2U6Qm9vbGVhbixhcnJvd0NvbnRyb2w6Qm9vbGVhbn0sZGF0YTpmdW5jdGlvbigpe3JldHVybnt0eXBlOiIifX0sd2F0Y2g6e2lzUmFuZ2U6ZnVuY3Rpb24oX2lzUmFuZ2Upe3RoaXMucGlja2VyPyh0aGlzLnVubW91bnRQaWNrZXIoKSx0aGlzLnR5cGU9X2lzUmFuZ2U/InRpbWVyYW5nZSI6InRpbWUiLHRoaXMucGFuZWw9X2lzUmFuZ2U/dGltZV9yYW5nZTpwYW5lbF90aW1lLHRoaXMubW91bnRQaWNrZXIoKSk6KHRoaXMudHlwZT1faXNSYW5nZT8idGltZXJhbmdlIjoidGltZSIsdGhpcy5wYW5lbD1faXNSYW5nZT90aW1lX3JhbmdlOnBhbmVsX3RpbWUpfX0sY3JlYXRlZDpmdW5jdGlvbigpe3RoaXMudHlwZT10aGlzLmlzUmFuZ2U/InRpbWVyYW5nZSI6InRpbWUiLHRoaXMucGFuZWw9dGhpcy5pc1JhbmdlP3RpbWVfcmFuZ2U6cGFuZWxfdGltZX0saW5zdGFsbDpmdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQodGltZV9waWNrZXIubmFtZSx0aW1lX3BpY2tlcil9fSxwYWNrYWdlc190aW1lX3BpY2tlcj10aW1lX3BpY2tlcixtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfNTIwNjAyNzJfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygic3BhbiIsW19jKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6X3ZtLnRyYW5zaXRpb259LG9uOnsiYWZ0ZXItZW50ZXIiOl92bS5oYW5kbGVBZnRlckVudGVyLCJhZnRlci1sZWF2ZSI6X3ZtLmhhbmRsZUFmdGVyTGVhdmV9fSxbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOiFfdm0uZGlzYWJsZWQmJl92bS5zaG93UG9wcGVyLGV4cHJlc3Npb246IiFkaXNhYmxlZCAmJiBzaG93UG9wcGVyIn1dLHJlZjoicG9wcGVyIixzdGF0aWNDbGFzczoiZWwtcG9wb3ZlciBlbC1wb3BwZXIiLGNsYXNzOltfdm0ucG9wcGVyQ2xhc3MsX3ZtLmNvbnRlbnQmJiJlbC1wb3BvdmVyLS1wbGFpbiJdLHN0eWxlOnt3aWR0aDpfdm0ud2lkdGgrInB4In0sYXR0cnM6e3JvbGU6InRvb2x0aXAiLGlkOl92bS50b29sdGlwSWQsImFyaWEtaGlkZGVuIjpfdm0uZGlzYWJsZWR8fCFfdm0uc2hvd1BvcHBlcj8idHJ1ZSI6ImZhbHNlIn19LFtfdm0udGl0bGU/X2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1wb3BvdmVyX190aXRsZSIsZG9tUHJvcHM6e3RleHRDb250ZW50Ol92bS5fcyhfdm0udGl0bGUpfX0pOl92bS5fZSgpLF92bS5fdCgiZGVmYXVsdCIsW192bS5fdihfdm0uX3MoX3ZtLmNvbnRlbnQpKV0pXSwyKV0pLF92bS5fdCgicmVmZXJlbmNlIildLDIpfTttYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfNTIwNjAyNzJfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIG1haW5fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxQb3BvdmVyIixtaXhpbnM6W3Z1ZV9wb3BwZXJfZGVmYXVsdC5hXSxwcm9wczp7dHJpZ2dlcjp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiY2xpY2siLHZhbGlkYXRvcjpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuLTE8WyJjbGljayIsImZvY3VzIiwiaG92ZXIiLCJtYW51YWwiXS5pbmRleE9mKHZhbHVlKX19LG9wZW5EZWxheTp7dHlwZTpOdW1iZXIsZGVmYXVsdDowfSx0aXRsZTpTdHJpbmcsZGlzYWJsZWQ6Qm9vbGVhbixjb250ZW50OlN0cmluZyxyZWZlcmVuY2U6e30scG9wcGVyQ2xhc3M6U3RyaW5nLHdpZHRoOnt9LHZpc2libGVBcnJvdzp7ZGVmYXVsdDohMH0sYXJyb3dPZmZzZXQ6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MH0sdHJhbnNpdGlvbjp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiZmFkZS1pbi1saW5lYXIifX0sY29tcHV0ZWQ6e3Rvb2x0aXBJZDpmdW5jdGlvbigpe3JldHVybiJlbC1wb3BvdmVyLSIrT2JqZWN0KHV0aWxfLmdlbmVyYXRlSWQpKCl9fSx3YXRjaDp7c2hvd1BvcHBlcjpmdW5jdGlvbih2YWwpe3RoaXMuZGlzYWJsZWR8fCh2YWw/dGhpcy4kZW1pdCgic2hvdyIpOnRoaXMuJGVtaXQoImhpZGUiKSl9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXMscmVmZXJlbmNlPXRoaXMucmVmZXJlbmNlRWxtPXRoaXMucmVmZXJlbmNlfHx0aGlzLiRyZWZzLnJlZmVyZW5jZSxwb3BwZXI9dGhpcy5wb3BwZXJ8fHRoaXMuJHJlZnMucG9wcGVyOyFyZWZlcmVuY2UmJnRoaXMuJHNsb3RzLnJlZmVyZW5jZSYmdGhpcy4kc2xvdHMucmVmZXJlbmNlWzBdJiYocmVmZXJlbmNlPXRoaXMucmVmZXJlbmNlRWxtPXRoaXMuJHNsb3RzLnJlZmVyZW5jZVswXS5lbG0pLHJlZmVyZW5jZSYmKE9iamVjdChkb21fLmFkZENsYXNzKShyZWZlcmVuY2UsImVsLXBvcG92ZXJfX3JlZmVyZW5jZSIpLHJlZmVyZW5jZS5zZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkYnkiLHRoaXMudG9vbHRpcElkKSxyZWZlcmVuY2Uuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsMCkscG9wcGVyLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLDApLCJjbGljayIhPT10aGlzLnRyaWdnZXImJihPYmplY3QoZG9tXy5vbikocmVmZXJlbmNlLCJmb2N1c2luIixmdW5jdGlvbigpe190aGlzLmhhbmRsZUZvY3VzKCk7dmFyIGluc3RhbmNlPXJlZmVyZW5jZS5fX3Z1ZV9fO2luc3RhbmNlJiYiZnVuY3Rpb24iPT10eXBlb2YgaW5zdGFuY2UuZm9jdXMmJmluc3RhbmNlLmZvY3VzKCl9KSxPYmplY3QoZG9tXy5vbikocG9wcGVyLCJmb2N1c2luIix0aGlzLmhhbmRsZUZvY3VzKSxPYmplY3QoZG9tXy5vbikocmVmZXJlbmNlLCJmb2N1c291dCIsdGhpcy5oYW5kbGVCbHVyKSxPYmplY3QoZG9tXy5vbikocG9wcGVyLCJmb2N1c291dCIsdGhpcy5oYW5kbGVCbHVyKSksT2JqZWN0KGRvbV8ub24pKHJlZmVyZW5jZSwia2V5ZG93biIsdGhpcy5oYW5kbGVLZXlkb3duKSxPYmplY3QoZG9tXy5vbikocmVmZXJlbmNlLCJjbGljayIsdGhpcy5oYW5kbGVDbGljaykpLCJjbGljayI9PT10aGlzLnRyaWdnZXI/KE9iamVjdChkb21fLm9uKShyZWZlcmVuY2UsImNsaWNrIix0aGlzLmRvVG9nZ2xlKSxPYmplY3QoZG9tXy5vbikoZG9jdW1lbnQsImNsaWNrIix0aGlzLmhhbmRsZURvY3VtZW50Q2xpY2spKToiaG92ZXIiPT09dGhpcy50cmlnZ2VyPyhPYmplY3QoZG9tXy5vbikocmVmZXJlbmNlLCJtb3VzZWVudGVyIix0aGlzLmhhbmRsZU1vdXNlRW50ZXIpLE9iamVjdChkb21fLm9uKShwb3BwZXIsIm1vdXNlZW50ZXIiLHRoaXMuaGFuZGxlTW91c2VFbnRlciksT2JqZWN0KGRvbV8ub24pKHJlZmVyZW5jZSwibW91c2VsZWF2ZSIsdGhpcy5oYW5kbGVNb3VzZUxlYXZlKSxPYmplY3QoZG9tXy5vbikocG9wcGVyLCJtb3VzZWxlYXZlIix0aGlzLmhhbmRsZU1vdXNlTGVhdmUpKToiZm9jdXMiPT09dGhpcy50cmlnZ2VyJiYocmVmZXJlbmNlLnF1ZXJ5U2VsZWN0b3IoImlucHV0LCB0ZXh0YXJlYSIpPyhPYmplY3QoZG9tXy5vbikocmVmZXJlbmNlLCJmb2N1c2luIix0aGlzLmRvU2hvdyksT2JqZWN0KGRvbV8ub24pKHJlZmVyZW5jZSwiZm9jdXNvdXQiLHRoaXMuZG9DbG9zZSkpOihPYmplY3QoZG9tXy5vbikocmVmZXJlbmNlLCJtb3VzZWRvd24iLHRoaXMuZG9TaG93KSxPYmplY3QoZG9tXy5vbikocmVmZXJlbmNlLCJtb3VzZXVwIix0aGlzLmRvQ2xvc2UpKSl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsZWFudXAoKX0sZGVhY3RpdmF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNsZWFudXAoKX0sbWV0aG9kczp7ZG9Ub2dnbGU6ZnVuY3Rpb24oKXt0aGlzLnNob3dQb3BwZXI9IXRoaXMuc2hvd1BvcHBlcn0sZG9TaG93OmZ1bmN0aW9uKCl7dGhpcy5zaG93UG9wcGVyPSEwfSxkb0Nsb3NlOmZ1bmN0aW9uKCl7dGhpcy5zaG93UG9wcGVyPSExfSxoYW5kbGVGb2N1czpmdW5jdGlvbigpe09iamVjdChkb21fLmFkZENsYXNzKSh0aGlzLnJlZmVyZW5jZUVsbSwiZm9jdXNpbmciKSwiY2xpY2siIT09dGhpcy50cmlnZ2VyJiYiZm9jdXMiIT09dGhpcy50cmlnZ2VyfHwodGhpcy5zaG93UG9wcGVyPSEwKX0saGFuZGxlQ2xpY2s6ZnVuY3Rpb24oKXtPYmplY3QoZG9tXy5yZW1vdmVDbGFzcykodGhpcy5yZWZlcmVuY2VFbG0sImZvY3VzaW5nIil9LGhhbmRsZUJsdXI6ZnVuY3Rpb24oKXtPYmplY3QoZG9tXy5yZW1vdmVDbGFzcykodGhpcy5yZWZlcmVuY2VFbG0sImZvY3VzaW5nIiksImNsaWNrIiE9PXRoaXMudHJpZ2dlciYmImZvY3VzIiE9PXRoaXMudHJpZ2dlcnx8KHRoaXMuc2hvd1BvcHBlcj0hMSl9LGhhbmRsZU1vdXNlRW50ZXI6ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXM7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKSx0aGlzLm9wZW5EZWxheT90aGlzLl90aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMyLnNob3dQb3BwZXI9ITB9LHRoaXMub3BlbkRlbGF5KTp0aGlzLnNob3dQb3BwZXI9ITB9LGhhbmRsZUtleWRvd246ZnVuY3Rpb24oZXYpezI3PT09ZXYua2V5Q29kZSYmIm1hbnVhbCIhPT10aGlzLnRyaWdnZXImJnRoaXMuZG9DbG9zZSgpfSxoYW5kbGVNb3VzZUxlYXZlOmZ1bmN0aW9uKCl7dmFyIF90aGlzMz10aGlzO2NsZWFyVGltZW91dCh0aGlzLl90aW1lciksdGhpcy5fdGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe190aGlzMy5zaG93UG9wcGVyPSExfSwyMDApfSxoYW5kbGVEb2N1bWVudENsaWNrOmZ1bmN0aW9uKGUpe3ZhciByZWZlcmVuY2U9dGhpcy5yZWZlcmVuY2V8fHRoaXMuJHJlZnMucmVmZXJlbmNlLHBvcHBlcj10aGlzLnBvcHBlcnx8dGhpcy4kcmVmcy5wb3BwZXI7IXJlZmVyZW5jZSYmdGhpcy4kc2xvdHMucmVmZXJlbmNlJiZ0aGlzLiRzbG90cy5yZWZlcmVuY2VbMF0mJihyZWZlcmVuY2U9dGhpcy5yZWZlcmVuY2VFbG09dGhpcy4kc2xvdHMucmVmZXJlbmNlWzBdLmVsbSksdGhpcy4kZWwmJnJlZmVyZW5jZSYmIXRoaXMuJGVsLmNvbnRhaW5zKGUudGFyZ2V0KSYmIXJlZmVyZW5jZS5jb250YWlucyhlLnRhcmdldCkmJnBvcHBlciYmIXBvcHBlci5jb250YWlucyhlLnRhcmdldCkmJih0aGlzLnNob3dQb3BwZXI9ITEpfSxoYW5kbGVBZnRlckVudGVyOmZ1bmN0aW9uKCl7dGhpcy4kZW1pdCgiYWZ0ZXItZW50ZXIiKX0saGFuZGxlQWZ0ZXJMZWF2ZTpmdW5jdGlvbigpe3RoaXMuJGVtaXQoImFmdGVyLWxlYXZlIiksdGhpcy5kb0Rlc3Ryb3koKX0sY2xlYW51cDpmdW5jdGlvbigpe3RoaXMub3BlbkRlbGF5JiZjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpfX0sZGVzdHJveWVkOmZ1bmN0aW9uKCl7dmFyIHJlZmVyZW5jZT10aGlzLnJlZmVyZW5jZTtPYmplY3QoZG9tXy5vZmYpKHJlZmVyZW5jZSwiY2xpY2siLHRoaXMuZG9Ub2dnbGUpLE9iamVjdChkb21fLm9mZikocmVmZXJlbmNlLCJtb3VzZXVwIix0aGlzLmRvQ2xvc2UpLE9iamVjdChkb21fLm9mZikocmVmZXJlbmNlLCJtb3VzZWRvd24iLHRoaXMuZG9TaG93KSxPYmplY3QoZG9tXy5vZmYpKHJlZmVyZW5jZSwiZm9jdXNpbiIsdGhpcy5kb1Nob3cpLE9iamVjdChkb21fLm9mZikocmVmZXJlbmNlLCJmb2N1c291dCIsdGhpcy5kb0Nsb3NlKSxPYmplY3QoZG9tXy5vZmYpKHJlZmVyZW5jZSwibW91c2Vkb3duIix0aGlzLmRvU2hvdyksT2JqZWN0KGRvbV8ub2ZmKShyZWZlcmVuY2UsIm1vdXNldXAiLHRoaXMuZG9DbG9zZSksT2JqZWN0KGRvbV8ub2ZmKShyZWZlcmVuY2UsIm1vdXNlbGVhdmUiLHRoaXMuaGFuZGxlTW91c2VMZWF2ZSksT2JqZWN0KGRvbV8ub2ZmKShyZWZlcmVuY2UsIm1vdXNlZW50ZXIiLHRoaXMuaGFuZGxlTW91c2VFbnRlciksT2JqZWN0KGRvbV8ub2ZmKShkb2N1bWVudCwiY2xpY2siLHRoaXMuaGFuZGxlRG9jdW1lbnRDbGljayl9fSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfNTIwNjAyNzJfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTttYWluX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvcG9wb3Zlci9zcmMvbWFpbi52dWUiO3ZhciBtYWluPW1haW5fY29tcG9uZW50LmV4cG9ydHMsZ2V0UmVmZXJlbmNlPWZ1bmN0aW9uKGVsLGJpbmRpbmcsdm5vZGUpe3ZhciBfcmVmPWJpbmRpbmcuZXhwcmVzc2lvbj9iaW5kaW5nLnZhbHVlOmJpbmRpbmcuYXJnLHBvcHBlcj12bm9kZS5jb250ZXh0LiRyZWZzW19yZWZdO3BvcHBlciYmKEFycmF5LmlzQXJyYXkocG9wcGVyKT9wb3BwZXJbMF0uJHJlZnMucmVmZXJlbmNlPWVsOnBvcHBlci4kcmVmcy5yZWZlcmVuY2U9ZWwpfSxkaXJlY3RpdmU9e2JpbmQ6ZnVuY3Rpb24oZWwsYmluZGluZyx2bm9kZSl7Z2V0UmVmZXJlbmNlKGVsLGJpbmRpbmcsdm5vZGUpfSxpbnNlcnRlZDpmdW5jdGlvbihlbCxiaW5kaW5nLHZub2RlKXtnZXRSZWZlcmVuY2UoZWwsYmluZGluZyx2bm9kZSl9fTtleHRlcm5hbF92dWVfZGVmYXVsdC5hLmRpcmVjdGl2ZSgicG9wb3ZlciIsZGlyZWN0aXZlKSxtYWluLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuZGlyZWN0aXZlKCJwb3BvdmVyIixkaXJlY3RpdmUpLFZ1ZS5jb21wb25lbnQobWFpbi5uYW1lLG1haW4pfSxtYWluLmRpcmVjdGl2ZT1kaXJlY3RpdmU7dmFyIHBvcG92ZXI9bWFpbix2ZG9tXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDE2KSxzcmNfbWFpbj17bmFtZToiRWxUb29sdGlwIixtaXhpbnM6W3Z1ZV9wb3BwZXJfZGVmYXVsdC5hXSxwcm9wczp7b3BlbkRlbGF5Ont0eXBlOk51bWJlcixkZWZhdWx0OjB9LGRpc2FibGVkOkJvb2xlYW4sbWFudWFsOkJvb2xlYW4sZWZmZWN0Ont0eXBlOlN0cmluZyxkZWZhdWx0OiJkYXJrIn0sYXJyb3dPZmZzZXQ6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MH0scG9wcGVyQ2xhc3M6U3RyaW5nLGNvbnRlbnQ6U3RyaW5nLHZpc2libGVBcnJvdzp7ZGVmYXVsdDohMH0sdHJhbnNpdGlvbjp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiZWwtZmFkZS1pbi1saW5lYXIifSxwb3BwZXJPcHRpb25zOntkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJue2JvdW5kYXJpZXNQYWRkaW5nOjEwLGdwdUFjY2VsZXJhdGlvbjohMX19fSxlbnRlcmFibGU6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxoaWRlQWZ0ZXI6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGltZW91dFBlbmRpbmc6bnVsbCxmb2N1c2luZzohMX19LGNvbXB1dGVkOnt0b29sdGlwSWQ6ZnVuY3Rpb24oKXtyZXR1cm4iZWwtdG9vbHRpcC0iK09iamVjdCh1dGlsXy5nZW5lcmF0ZUlkKSgpfX0sYmVmb3JlQ3JlYXRlOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXM7dGhpcy4kaXNTZXJ2ZXJ8fCh0aGlzLnBvcHBlclZNPW5ldyBleHRlcm5hbF92dWVfZGVmYXVsdC5hKHtkYXRhOntub2RlOiIifSxyZW5kZXI6ZnVuY3Rpb24oaCl7cmV0dXJuIHRoaXMubm9kZX19KS4kbW91bnQoKSx0aGlzLmRlYm91bmNlQ2xvc2U9ZGVib3VuY2VfZGVmYXVsdCgpKDIwMCxmdW5jdGlvbigpe3JldHVybiBfdGhpcy5oYW5kbGVDbG9zZVBvcHBlcigpfSkpfSxyZW5kZXI6ZnVuY3Rpb24oaCl7dmFyIF90aGlzMj10aGlzO2lmKHRoaXMucG9wcGVyVk0mJih0aGlzLnBvcHBlclZNLm5vZGU9aCgidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOnRoaXMudHJhbnNpdGlvbn0sb246e2FmdGVyTGVhdmU6dGhpcy5kb0Rlc3Ryb3l9fSxbaCgiZGl2Iix7b246e21vdXNlbGVhdmU6ZnVuY3Rpb24oKXtfdGhpczIuc2V0RXhwZWN0ZWRTdGF0ZSghMSksX3RoaXMyLmRlYm91bmNlQ2xvc2UoKX0sbW91c2VlbnRlcjpmdW5jdGlvbigpe190aGlzMi5zZXRFeHBlY3RlZFN0YXRlKCEwKX19LHJlZjoicG9wcGVyIixhdHRyczp7cm9sZToidG9vbHRpcCIsaWQ6dGhpcy50b29sdGlwSWQsImFyaWEtaGlkZGVuIjp0aGlzLmRpc2FibGVkfHwhdGhpcy5zaG93UG9wcGVyPyJ0cnVlIjoiZmFsc2UifSxkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIsdmFsdWU6IXRoaXMuZGlzYWJsZWQmJnRoaXMuc2hvd1BvcHBlcn1dLGNsYXNzOlsiZWwtdG9vbHRpcF9fcG9wcGVyIiwiaXMtIit0aGlzLmVmZmVjdCx0aGlzLnBvcHBlckNsYXNzXX0sW3RoaXMuJHNsb3RzLmNvbnRlbnR8fHRoaXMuY29udGVudF0pXSkpLCF0aGlzLiRzbG90cy5kZWZhdWx0fHwhdGhpcy4kc2xvdHMuZGVmYXVsdC5sZW5ndGgpcmV0dXJuIHRoaXMuJHNsb3RzLmRlZmF1bHQ7dmFyIHZub2RlPU9iamVjdCh2ZG9tXy5nZXRGaXJzdENvbXBvbmVudENoaWxkKSh0aGlzLiRzbG90cy5kZWZhdWx0KTtpZighdm5vZGUpcmV0dXJuIHZub2RlO3ZhciBkYXRhPXZub2RlLmRhdGE9dm5vZGUuZGF0YXx8e307cmV0dXJuIGRhdGEuc3RhdGljQ2xhc3M9dGhpcy5jb25jYXRDbGFzcyhkYXRhLnN0YXRpY0NsYXNzLCJlbC10b29sdGlwIiksdm5vZGV9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXMzPXRoaXM7dGhpcy5yZWZlcmVuY2VFbG09dGhpcy4kZWwsMT09PXRoaXMuJGVsLm5vZGVUeXBlJiYodGhpcy4kZWwuc2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iix0aGlzLnRvb2x0aXBJZCksdGhpcy4kZWwuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsMCksT2JqZWN0KGRvbV8ub24pKHRoaXMucmVmZXJlbmNlRWxtLCJtb3VzZWVudGVyIix0aGlzLnNob3cpLE9iamVjdChkb21fLm9uKSh0aGlzLnJlZmVyZW5jZUVsbSwibW91c2VsZWF2ZSIsdGhpcy5oaWRlKSxPYmplY3QoZG9tXy5vbikodGhpcy5yZWZlcmVuY2VFbG0sImZvY3VzIixmdW5jdGlvbigpe2lmKF90aGlzMy4kc2xvdHMuZGVmYXVsdCYmX3RoaXMzLiRzbG90cy5kZWZhdWx0Lmxlbmd0aCl7dmFyIGluc3RhbmNlPV90aGlzMy4kc2xvdHMuZGVmYXVsdFswXS5jb21wb25lbnRJbnN0YW5jZTtpbnN0YW5jZSYmaW5zdGFuY2UuZm9jdXM/aW5zdGFuY2UuZm9jdXMoKTpfdGhpczMuaGFuZGxlRm9jdXMoKX1lbHNlIF90aGlzMy5oYW5kbGVGb2N1cygpfSksT2JqZWN0KGRvbV8ub24pKHRoaXMucmVmZXJlbmNlRWxtLCJibHVyIix0aGlzLmhhbmRsZUJsdXIpLE9iamVjdChkb21fLm9uKSh0aGlzLnJlZmVyZW5jZUVsbSwiY2xpY2siLHRoaXMucmVtb3ZlRm9jdXNpbmcpKX0sd2F0Y2g6e2ZvY3VzaW5nOmZ1bmN0aW9uKHZhbCl7dmFsP09iamVjdChkb21fLmFkZENsYXNzKSh0aGlzLnJlZmVyZW5jZUVsbSwiZm9jdXNpbmciKTpPYmplY3QoZG9tXy5yZW1vdmVDbGFzcykodGhpcy5yZWZlcmVuY2VFbG0sImZvY3VzaW5nIil9fSxtZXRob2RzOntzaG93OmZ1bmN0aW9uKCl7dGhpcy5zZXRFeHBlY3RlZFN0YXRlKCEwKSx0aGlzLmhhbmRsZVNob3dQb3BwZXIoKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuc2V0RXhwZWN0ZWRTdGF0ZSghMSksdGhpcy5kZWJvdW5jZUNsb3NlKCl9LGhhbmRsZUZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5mb2N1c2luZz0hMCx0aGlzLnNob3coKX0saGFuZGxlQmx1cjpmdW5jdGlvbigpe3RoaXMuZm9jdXNpbmc9ITEsdGhpcy5oaWRlKCl9LHJlbW92ZUZvY3VzaW5nOmZ1bmN0aW9uKCl7dGhpcy5mb2N1c2luZz0hMX0sY29uY2F0Q2xhc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmLTE8YS5pbmRleE9mKGIpP2E6YT9iP2ErIiAiK2I6YTpifHwiIn0saGFuZGxlU2hvd1BvcHBlcjpmdW5jdGlvbigpe3ZhciBfdGhpczQ9dGhpczt0aGlzLmV4cGVjdGVkU3RhdGUmJiF0aGlzLm1hbnVhbCYmKGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXM0LnNob3dQb3BwZXI9ITB9LHRoaXMub3BlbkRlbGF5KSwwPHRoaXMuaGlkZUFmdGVyJiYodGhpcy50aW1lb3V0UGVuZGluZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXM0LnNob3dQb3BwZXI9ITF9LHRoaXMuaGlkZUFmdGVyKSkpfSxoYW5kbGVDbG9zZVBvcHBlcjpmdW5jdGlvbigpe3RoaXMuZW50ZXJhYmxlJiZ0aGlzLmV4cGVjdGVkU3RhdGV8fHRoaXMubWFudWFsfHwoY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCksdGhpcy50aW1lb3V0UGVuZGluZyYmY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFBlbmRpbmcpLHRoaXMuc2hvd1BvcHBlcj0hMSx0aGlzLmRpc2FibGVkJiZ0aGlzLmRvRGVzdHJveSgpKX0sc2V0RXhwZWN0ZWRTdGF0ZTpmdW5jdGlvbihleHBlY3RlZFN0YXRlKXshMT09PWV4cGVjdGVkU3RhdGUmJmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRQZW5kaW5nKSx0aGlzLmV4cGVjdGVkU3RhdGU9ZXhwZWN0ZWRTdGF0ZX19LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnBvcHBlclZNJiZ0aGlzLnBvcHBlclZNLiRkZXN0cm95KCl9LGRlc3Ryb3llZDpmdW5jdGlvbigpe3ZhciByZWZlcmVuY2U9dGhpcy5yZWZlcmVuY2VFbG07T2JqZWN0KGRvbV8ub2ZmKShyZWZlcmVuY2UsIm1vdXNlZW50ZXIiLHRoaXMuc2hvdyksT2JqZWN0KGRvbV8ub2ZmKShyZWZlcmVuY2UsIm1vdXNlbGVhdmUiLHRoaXMuaGlkZSksT2JqZWN0KGRvbV8ub2ZmKShyZWZlcmVuY2UsImZvY3VzIix0aGlzLmhhbmRsZUZvY3VzKSxPYmplY3QoZG9tXy5vZmYpKHJlZmVyZW5jZSwiYmx1ciIsdGhpcy5oYW5kbGVCbHVyKSxPYmplY3QoZG9tXy5vZmYpKHJlZmVyZW5jZSwiY2xpY2siLHRoaXMucmVtb3ZlRm9jdXNpbmcpfSxpbnN0YWxsOmZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChzcmNfbWFpbi5uYW1lLHNyY19tYWluKX19LHBhY2thZ2VzX3Rvb2x0aXA9c3JjX21haW4sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzZiMjliMDEyX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToibXNnYm94LWZhZGUifX0sW19jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0udmlzaWJsZSxleHByZXNzaW9uOiJ2aXNpYmxlIn1dLHN0YXRpY0NsYXNzOiJlbC1tZXNzYWdlLWJveF9fd3JhcHBlciIsYXR0cnM6e3RhYmluZGV4OiItMSIscm9sZToiZGlhbG9nIiwiYXJpYS1tb2RhbCI6InRydWUiLCJhcmlhLWxhYmVsIjpfdm0udGl0bGV8fCJkaWFsb2cifSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gJGV2ZW50LnRhcmdldCE9PSRldmVudC5jdXJyZW50VGFyZ2V0P251bGw6X3ZtLmhhbmRsZVdyYXBwZXJDbGljaygkZXZlbnQpfX19LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLW1lc3NhZ2UtYm94IixjbGFzczpbX3ZtLmN1c3RvbUNsYXNzLF92bS5jZW50ZXImJiJlbC1tZXNzYWdlLWJveC0tY2VudGVyIl19LFtudWxsIT09X3ZtLnRpdGxlP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtbWVzc2FnZS1ib3hfX2hlYWRlciJ9LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLW1lc3NhZ2UtYm94X190aXRsZSJ9LFtfdm0uaWNvbiYmX3ZtLmNlbnRlcj9fYygiZGl2Iix7Y2xhc3M6WyJlbC1tZXNzYWdlLWJveF9fc3RhdHVzIixfdm0uaWNvbl19KTpfdm0uX2UoKSxfYygic3BhbiIsW192bS5fdihfdm0uX3MoX3ZtLnRpdGxlKSldKV0pLF92bS5zaG93Q2xvc2U/X2MoImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJlbC1tZXNzYWdlLWJveF9faGVhZGVyYnRuIixhdHRyczp7dHlwZToiYnV0dG9uIiwiYXJpYS1sYWJlbCI6IkNsb3NlIn0sb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhhbmRsZUFjdGlvbihfdm0uZGlzdGluZ3Vpc2hDYW5jZWxBbmRDbG9zZT8iY2xvc2UiOiJjYW5jZWwiKX0sa2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsImVudGVyIiwxMywkZXZlbnQua2V5LCJFbnRlciIpKXJldHVybiBudWxsO192bS5oYW5kbGVBY3Rpb24oX3ZtLmRpc3Rpbmd1aXNoQ2FuY2VsQW5kQ2xvc2U/ImNsb3NlIjoiY2FuY2VsIil9fX0sW19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLW1lc3NhZ2UtYm94X19jbG9zZSBlbC1pY29uLWNsb3NlIn0pXSk6X3ZtLl9lKCldKTpfdm0uX2UoKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLW1lc3NhZ2UtYm94X19jb250ZW50In0sW192bS5pY29uJiYhX3ZtLmNlbnRlciYmIiIhPT1fdm0ubWVzc2FnZT9fYygiZGl2Iix7Y2xhc3M6WyJlbC1tZXNzYWdlLWJveF9fc3RhdHVzIixfdm0uaWNvbl19KTpfdm0uX2UoKSwiIiE9PV92bS5tZXNzYWdlP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtbWVzc2FnZS1ib3hfX21lc3NhZ2UifSxbX3ZtLl90KCJkZWZhdWx0IixbX3ZtLmRhbmdlcm91c2x5VXNlSFRNTFN0cmluZz9fYygicCIse2RvbVByb3BzOntpbm5lckhUTUw6X3ZtLl9zKF92bS5tZXNzYWdlKX19KTpfYygicCIsW192bS5fdihfdm0uX3MoX3ZtLm1lc3NhZ2UpKV0pXSldLDIpOl92bS5fZSgpLF9jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0uc2hvd0lucHV0LGV4cHJlc3Npb246InNob3dJbnB1dCJ9XSxzdGF0aWNDbGFzczoiZWwtbWVzc2FnZS1ib3hfX2lucHV0In0sW19jKCJlbC1pbnB1dCIse3JlZjoiaW5wdXQiLGF0dHJzOnt0eXBlOl92bS5pbnB1dFR5cGUscGxhY2Vob2xkZXI6X3ZtLmlucHV0UGxhY2Vob2xkZXJ9LG5hdGl2ZU9uOntrZXlkb3duOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuImJ1dHRvbiJpbiAkZXZlbnR8fCFfdm0uX2soJGV2ZW50LmtleUNvZGUsImVudGVyIiwxMywkZXZlbnQua2V5LCJFbnRlciIpP192bS5oYW5kbGVJbnB1dEVudGVyKCRldmVudCk6bnVsbH19LG1vZGVsOnt2YWx1ZTpfdm0uaW5wdXRWYWx1ZSxjYWxsYmFjazpmdW5jdGlvbigkJHYpe192bS5pbnB1dFZhbHVlPSQkdn0sZXhwcmVzc2lvbjoiaW5wdXRWYWx1ZSJ9fSksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1tZXNzYWdlLWJveF9fZXJyb3Jtc2ciLHN0eWxlOnt2aXNpYmlsaXR5Ol92bS5lZGl0b3JFcnJvck1lc3NhZ2U/InZpc2libGUiOiJoaWRkZW4ifX0sW192bS5fdihfdm0uX3MoX3ZtLmVkaXRvckVycm9yTWVzc2FnZSkpXSldLDEpXSksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1tZXNzYWdlLWJveF9fYnRucyJ9LFtfdm0uc2hvd0NhbmNlbEJ1dHRvbj9fYygiZWwtYnV0dG9uIix7Y2xhc3M6W192bS5jYW5jZWxCdXR0b25DbGFzc2VzXSxhdHRyczp7bG9hZGluZzpfdm0uY2FuY2VsQnV0dG9uTG9hZGluZyxyb3VuZDpfdm0ucm91bmRCdXR0b24sc2l6ZToic21hbGwifSxvbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsImVudGVyIiwxMywkZXZlbnQua2V5LCJFbnRlciIpKXJldHVybiBudWxsO192bS5oYW5kbGVBY3Rpb24oImNhbmNlbCIpfX0sbmF0aXZlT246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhhbmRsZUFjdGlvbigiY2FuY2VsIil9fX0sW192bS5fdigiXG4gICAgICAgICAgIitfdm0uX3MoX3ZtLmNhbmNlbEJ1dHRvblRleHR8fF92bS50KCJlbC5tZXNzYWdlYm94LmNhbmNlbCIpKSsiXG4gICAgICAgICIpXSk6X3ZtLl9lKCksX2MoImVsLWJ1dHRvbiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS5zaG93Q29uZmlybUJ1dHRvbixleHByZXNzaW9uOiJzaG93Q29uZmlybUJ1dHRvbiJ9XSxyZWY6ImNvbmZpcm0iLGNsYXNzOltfdm0uY29uZmlybUJ1dHRvbkNsYXNzZXNdLGF0dHJzOntsb2FkaW5nOl92bS5jb25maXJtQnV0dG9uTG9hZGluZyxyb3VuZDpfdm0ucm91bmRCdXR0b24sc2l6ZToic21hbGwifSxvbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsImVudGVyIiwxMywkZXZlbnQua2V5LCJFbnRlciIpKXJldHVybiBudWxsO192bS5oYW5kbGVBY3Rpb24oImNvbmZpcm0iKX19LG5hdGl2ZU9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe192bS5oYW5kbGVBY3Rpb24oImNvbmZpcm0iKX19fSxbX3ZtLl92KCJcbiAgICAgICAgICAiK192bS5fcyhfdm0uY29uZmlybUJ1dHRvblRleHR8fF92bS50KCJlbC5tZXNzYWdlYm94LmNvbmZpcm0iKSkrIlxuICAgICAgICAiKV0pXSwxKV0pXSldKX07bWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzZiMjliMDEyX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBhcmlhX2RpYWxvZ189X193ZWJwYWNrX3JlcXVpcmVfXygzNSksYXJpYV9kaWFsb2dfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oYXJpYV9kaWFsb2dfKSxtZXNzYWdlQm94PXZvaWQgMCx0eXBlTWFwPXtzdWNjZXNzOiJzdWNjZXNzIixpbmZvOiJpbmZvIix3YXJuaW5nOiJ3YXJuaW5nIixlcnJvcjoiZXJyb3IifSxzcmNfbWFpbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHttaXhpbnM6W3BvcHVwX2RlZmF1bHQuYSxsb2NhbGVfZGVmYXVsdC5hXSxwcm9wczp7bW9kYWw6e2RlZmF1bHQ6ITB9LGxvY2tTY3JvbGw6e2RlZmF1bHQ6ITB9LHNob3dDbG9zZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGNsb3NlT25DbGlja01vZGFsOntkZWZhdWx0OiEwfSxjbG9zZU9uUHJlc3NFc2NhcGU6e2RlZmF1bHQ6ITB9LGNsb3NlT25IYXNoQ2hhbmdlOntkZWZhdWx0OiEwfSxjZW50ZXI6e2RlZmF1bHQ6ITEsdHlwZTpCb29sZWFufSxyb3VuZEJ1dHRvbjp7ZGVmYXVsdDohMSx0eXBlOkJvb2xlYW59fSxjb21wb25lbnRzOntFbElucHV0OmlucHV0X2RlZmF1bHQuYSxFbEJ1dHRvbjpidXR0b25fZGVmYXVsdC5hfSxjb21wdXRlZDp7aWNvbjpmdW5jdGlvbigpe3ZhciB0eXBlPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5pY29uQ2xhc3N8fCh0eXBlJiZ0eXBlTWFwW3R5cGVdPyJlbC1pY29uLSIrdHlwZU1hcFt0eXBlXToiIil9LGNvbmZpcm1CdXR0b25DbGFzc2VzOmZ1bmN0aW9uKCl7cmV0dXJuImVsLWJ1dHRvbi0tcHJpbWFyeSAiK3RoaXMuY29uZmlybUJ1dHRvbkNsYXNzfSxjYW5jZWxCdXR0b25DbGFzc2VzOmZ1bmN0aW9uKCl7cmV0dXJuIiIrdGhpcy5jYW5jZWxCdXR0b25DbGFzc319LG1ldGhvZHM6e2dldFNhZmVDbG9zZTpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzLGN1cnJlbnRJZD10aGlzLnVpZDtyZXR1cm4gZnVuY3Rpb24oKXtfdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtjdXJyZW50SWQ9PT1fdGhpcy51aWQmJl90aGlzLmRvQ2xvc2UoKX0pfX0sZG9DbG9zZTpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpczt0aGlzLnZpc2libGUmJih0aGlzLnZpc2libGU9ITEsdGhpcy5fY2xvc2luZz0hMCx0aGlzLm9uQ2xvc2UmJnRoaXMub25DbG9zZSgpLG1lc3NhZ2VCb3guY2xvc2VEaWFsb2coKSx0aGlzLmxvY2tTY3JvbGwmJnNldFRpbWVvdXQodGhpcy5yZXN0b3JlQm9keVN0eWxlLDIwMCksdGhpcy5vcGVuZWQ9ITEsdGhpcy5kb0FmdGVyQ2xvc2UoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMyLmFjdGlvbiYmX3RoaXMyLmNhbGxiYWNrKF90aGlzMi5hY3Rpb24sX3RoaXMyKX0pKX0saGFuZGxlV3JhcHBlckNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5jbG9zZU9uQ2xpY2tNb2RhbCYmdGhpcy5oYW5kbGVBY3Rpb24odGhpcy5kaXN0aW5ndWlzaENhbmNlbEFuZENsb3NlPyJjbG9zZSI6ImNhbmNlbCIpfSxoYW5kbGVJbnB1dEVudGVyOmZ1bmN0aW9uKCl7aWYoInRleHRhcmVhIiE9PXRoaXMuaW5wdXRUeXBlKXJldHVybiB0aGlzLmhhbmRsZUFjdGlvbigiY29uZmlybSIpfSxoYW5kbGVBY3Rpb246ZnVuY3Rpb24oYWN0aW9uKXsoInByb21wdCIhPT10aGlzLiR0eXBlfHwiY29uZmlybSIhPT1hY3Rpb258fHRoaXMudmFsaWRhdGUoKSkmJih0aGlzLmFjdGlvbj1hY3Rpb24sImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuYmVmb3JlQ2xvc2U/KHRoaXMuY2xvc2U9dGhpcy5nZXRTYWZlQ2xvc2UoKSx0aGlzLmJlZm9yZUNsb3NlKGFjdGlvbix0aGlzLHRoaXMuY2xvc2UpKTp0aGlzLmRvQ2xvc2UoKSl9LHZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoInByb21wdCI9PT10aGlzLiR0eXBlKXt2YXIgaW5wdXRQYXR0ZXJuPXRoaXMuaW5wdXRQYXR0ZXJuO2lmKGlucHV0UGF0dGVybiYmIWlucHV0UGF0dGVybi50ZXN0KHRoaXMuaW5wdXRWYWx1ZXx8IiIpKXJldHVybiB0aGlzLmVkaXRvckVycm9yTWVzc2FnZT10aGlzLmlucHV0RXJyb3JNZXNzYWdlfHxPYmplY3QobGliX2xvY2FsZV8udCkoImVsLm1lc3NhZ2Vib3guZXJyb3IiKSxPYmplY3QoZG9tXy5hZGRDbGFzcykodGhpcy5nZXRJbnB1dEVsZW1lbnQoKSwiaW52YWxpZCIpLCExO3ZhciBpbnB1dFZhbGlkYXRvcj10aGlzLmlucHV0VmFsaWRhdG9yO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBpbnB1dFZhbGlkYXRvcil7dmFyIHZhbGlkYXRlUmVzdWx0PWlucHV0VmFsaWRhdG9yKHRoaXMuaW5wdXRWYWx1ZSk7aWYoITE9PT12YWxpZGF0ZVJlc3VsdClyZXR1cm4gdGhpcy5lZGl0b3JFcnJvck1lc3NhZ2U9dGhpcy5pbnB1dEVycm9yTWVzc2FnZXx8T2JqZWN0KGxpYl9sb2NhbGVfLnQpKCJlbC5tZXNzYWdlYm94LmVycm9yIiksT2JqZWN0KGRvbV8uYWRkQ2xhc3MpKHRoaXMuZ2V0SW5wdXRFbGVtZW50KCksImludmFsaWQiKSwhMTtpZigic3RyaW5nIj09dHlwZW9mIHZhbGlkYXRlUmVzdWx0KXJldHVybiB0aGlzLmVkaXRvckVycm9yTWVzc2FnZT12YWxpZGF0ZVJlc3VsdCxPYmplY3QoZG9tXy5hZGRDbGFzcykodGhpcy5nZXRJbnB1dEVsZW1lbnQoKSwiaW52YWxpZCIpLCExfX1yZXR1cm4gdGhpcy5lZGl0b3JFcnJvck1lc3NhZ2U9IiIsT2JqZWN0KGRvbV8ucmVtb3ZlQ2xhc3MpKHRoaXMuZ2V0SW5wdXRFbGVtZW50KCksImludmFsaWQiKSwhMH0sZ2V0Rmlyc3RGb2N1czpmdW5jdGlvbigpe3ZhciBidG49dGhpcy4kZWwucXVlcnlTZWxlY3RvcigiLmVsLW1lc3NhZ2UtYm94X19idG5zIC5lbC1idXR0b24iKSx0aXRsZT10aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCIuZWwtbWVzc2FnZS1ib3hfX2J0bnMgLmVsLW1lc3NhZ2UtYm94X190aXRsZSIpO3JldHVybiBidG58fHRpdGxlfSxnZXRJbnB1dEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgaW5wdXRSZWZzPXRoaXMuJHJlZnMuaW5wdXQuJHJlZnM7cmV0dXJuIGlucHV0UmVmcy5pbnB1dHx8aW5wdXRSZWZzLnRleHRhcmVhfX0sd2F0Y2g6e2lucHV0VmFsdWU6e2ltbWVkaWF0ZTohMCxoYW5kbGVyOmZ1bmN0aW9uKHZhbCl7dmFyIF90aGlzMz10aGlzO3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKF8peyJwcm9tcHQiPT09X3RoaXMzLiR0eXBlJiZudWxsIT09dmFsJiZfdGhpczMudmFsaWRhdGUoKX0pfX0sdmlzaWJsZTpmdW5jdGlvbih2YWwpe3ZhciBfdGhpczQ9dGhpczt2YWwmJih0aGlzLnVpZCsrLCJhbGVydCIhPT10aGlzLiR0eXBlJiYiY29uZmlybSIhPT10aGlzLiR0eXBlfHx0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzNC4kcmVmcy5jb25maXJtLiRlbC5mb2N1cygpfSksdGhpcy5mb2N1c0FmdGVyQ2xvc2VkPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsbWVzc2FnZUJveD1uZXcgYXJpYV9kaWFsb2dfZGVmYXVsdC5hKHRoaXMuJGVsLHRoaXMuZm9jdXNBZnRlckNsb3NlZCx0aGlzLmdldEZpcnN0Rm9jdXMoKSkpLCJwcm9tcHQiPT09dGhpcy4kdHlwZSYmKHZhbD9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXM0LiRyZWZzLmlucHV0JiZfdGhpczQuJHJlZnMuaW5wdXQuJGVsJiZfdGhpczQuZ2V0SW5wdXRFbGVtZW50KCkuZm9jdXMoKX0sNTAwKToodGhpcy5lZGl0b3JFcnJvck1lc3NhZ2U9IiIsT2JqZWN0KGRvbV8ucmVtb3ZlQ2xhc3MpKHRoaXMuZ2V0SW5wdXRFbGVtZW50KCksImludmFsaWQiKSkpfX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczU9dGhpczt0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzNS5jbG9zZU9uSGFzaENoYW5nZSYmd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImhhc2hjaGFuZ2UiLF90aGlzNS5jbG9zZSl9KX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuY2xvc2VPbkhhc2hDaGFuZ2UmJndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJoYXNoY2hhbmdlIix0aGlzLmNsb3NlKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bWVzc2FnZUJveC5jbG9zZURpYWxvZygpfSl9LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dWlkOjEsdGl0bGU6dm9pZCAwLG1lc3NhZ2U6IiIsdHlwZToiIixpY29uQ2xhc3M6IiIsY3VzdG9tQ2xhc3M6IiIsc2hvd0lucHV0OiExLGlucHV0VmFsdWU6bnVsbCxpbnB1dFBsYWNlaG9sZGVyOiIiLGlucHV0VHlwZToidGV4dCIsaW5wdXRQYXR0ZXJuOm51bGwsaW5wdXRWYWxpZGF0b3I6bnVsbCxpbnB1dEVycm9yTWVzc2FnZToiIixzaG93Q29uZmlybUJ1dHRvbjohMCxzaG93Q2FuY2VsQnV0dG9uOiExLGFjdGlvbjoiIixjb25maXJtQnV0dG9uVGV4dDoiIixjYW5jZWxCdXR0b25UZXh0OiIiLGNvbmZpcm1CdXR0b25Mb2FkaW5nOiExLGNhbmNlbEJ1dHRvbkxvYWRpbmc6ITEsY29uZmlybUJ1dHRvbkNsYXNzOiIiLGNvbmZpcm1CdXR0b25EaXNhYmxlZDohMSxjYW5jZWxCdXR0b25DbGFzczoiIixlZGl0b3JFcnJvck1lc3NhZ2U6bnVsbCxjYWxsYmFjazpudWxsLGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzohMSxmb2N1c0FmdGVyQ2xvc2VkOm51bGwsaXNPbkNvbXBvc2l0aW9uOiExLGRpc3Rpbmd1aXNoQ2FuY2VsQW5kQ2xvc2U6ITF9fX0sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzZiMjliMDEyX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7c3JjX21haW5fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9tZXNzYWdlLWJveC9zcmMvbWFpbi52dWUiO3ZhciBtZXNzYWdlX2JveF9zcmNfbWFpbj1zcmNfbWFpbl9jb21wb25lbnQuZXhwb3J0cyxtYWluX3R5cGVvZj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqfTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2Ygb2JqfSxtYWluX2RlZmF1bHRzPXt0aXRsZTpudWxsLG1lc3NhZ2U6IiIsdHlwZToiIixpY29uQ2xhc3M6IiIsc2hvd0lucHV0OiExLHNob3dDbG9zZTohMCxtb2RhbEZhZGU6ITAsbG9ja1Njcm9sbDohMCxjbG9zZU9uQ2xpY2tNb2RhbDohMCxjbG9zZU9uUHJlc3NFc2NhcGU6ITAsY2xvc2VPbkhhc2hDaGFuZ2U6ITAsaW5wdXRWYWx1ZTpudWxsLGlucHV0UGxhY2Vob2xkZXI6IiIsaW5wdXRUeXBlOiJ0ZXh0IixpbnB1dFBhdHRlcm46bnVsbCxpbnB1dFZhbGlkYXRvcjpudWxsLGlucHV0RXJyb3JNZXNzYWdlOiIiLHNob3dDb25maXJtQnV0dG9uOiEwLHNob3dDYW5jZWxCdXR0b246ITEsY29uZmlybUJ1dHRvblBvc2l0aW9uOiJyaWdodCIsY29uZmlybUJ1dHRvbkhpZ2hsaWdodDohMSxjYW5jZWxCdXR0b25IaWdobGlnaHQ6ITEsY29uZmlybUJ1dHRvblRleHQ6IiIsY2FuY2VsQnV0dG9uVGV4dDoiIixjb25maXJtQnV0dG9uQ2xhc3M6IiIsY2FuY2VsQnV0dG9uQ2xhc3M6IiIsY3VzdG9tQ2xhc3M6IiIsYmVmb3JlQ2xvc2U6bnVsbCxkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6ITEsY2VudGVyOiExLHJvdW5kQnV0dG9uOiExLGRpc3Rpbmd1aXNoQ2FuY2VsQW5kQ2xvc2U6ITF9LE1lc3NhZ2VCb3hDb25zdHJ1Y3Rvcj1leHRlcm5hbF92dWVfZGVmYXVsdC5hLmV4dGVuZChtZXNzYWdlX2JveF9zcmNfbWFpbiksY3VycmVudE1zZz12b2lkIDAsbWFpbl9pbnN0YW5jZT12b2lkIDAsbXNnUXVldWU9W10sZGVmYXVsdENhbGxiYWNrPWZ1bmN0aW9uKGFjdGlvbil7aWYoY3VycmVudE1zZyl7dmFyIGNhbGxiYWNrPWN1cnJlbnRNc2cuY2FsbGJhY2s7ImZ1bmN0aW9uIj09dHlwZW9mIGNhbGxiYWNrJiYobWFpbl9pbnN0YW5jZS5zaG93SW5wdXQ/Y2FsbGJhY2sobWFpbl9pbnN0YW5jZS5pbnB1dFZhbHVlLGFjdGlvbik6Y2FsbGJhY2soYWN0aW9uKSksY3VycmVudE1zZy5yZXNvbHZlJiYoImNvbmZpcm0iPT09YWN0aW9uP21haW5faW5zdGFuY2Uuc2hvd0lucHV0P2N1cnJlbnRNc2cucmVzb2x2ZSh7dmFsdWU6bWFpbl9pbnN0YW5jZS5pbnB1dFZhbHVlLGFjdGlvbjphY3Rpb259KTpjdXJyZW50TXNnLnJlc29sdmUoYWN0aW9uKTohY3VycmVudE1zZy5yZWplY3R8fCJjYW5jZWwiIT09YWN0aW9uJiYiY2xvc2UiIT09YWN0aW9ufHxjdXJyZW50TXNnLnJlamVjdChhY3Rpb24pKX19LG1haW5fc2hvd05leHRNc2c9ZnVuY3Rpb24gc2hvd05leHRNc2coKXtpZihtYWluX2luc3RhbmNlfHwoKG1haW5faW5zdGFuY2U9bmV3IE1lc3NhZ2VCb3hDb25zdHJ1Y3Rvcih7ZWw6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9KSkuY2FsbGJhY2s9ZGVmYXVsdENhbGxiYWNrKSxtYWluX2luc3RhbmNlLmFjdGlvbj0iIiwoIW1haW5faW5zdGFuY2UudmlzaWJsZXx8bWFpbl9pbnN0YW5jZS5jbG9zZVRpbWVyKSYmMDxtc2dRdWV1ZS5sZW5ndGgpe3ZhciBvcHRpb25zPShjdXJyZW50TXNnPW1zZ1F1ZXVlLnNoaWZ0KCkpLm9wdGlvbnM7Zm9yKHZhciBwcm9wIGluIG9wdGlvbnMpb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wKSYmKG1haW5faW5zdGFuY2VbcHJvcF09b3B0aW9uc1twcm9wXSk7dm9pZCAwPT09b3B0aW9ucy5jYWxsYmFjayYmKG1haW5faW5zdGFuY2UuY2FsbGJhY2s9ZGVmYXVsdENhbGxiYWNrKTt2YXIgb2xkQ2I9bWFpbl9pbnN0YW5jZS5jYWxsYmFjazttYWluX2luc3RhbmNlLmNhbGxiYWNrPWZ1bmN0aW9uKGFjdGlvbixpbnN0YW5jZSl7b2xkQ2IoYWN0aW9uLGluc3RhbmNlKSxzaG93TmV4dE1zZygpfSxPYmplY3QodmRvbV8uaXNWTm9kZSkobWFpbl9pbnN0YW5jZS5tZXNzYWdlKT8obWFpbl9pbnN0YW5jZS4kc2xvdHMuZGVmYXVsdD1bbWFpbl9pbnN0YW5jZS5tZXNzYWdlXSxtYWluX2luc3RhbmNlLm1lc3NhZ2U9bnVsbCk6ZGVsZXRlIG1haW5faW5zdGFuY2UuJHNsb3RzLmRlZmF1bHQsWyJtb2RhbCIsInNob3dDbG9zZSIsImNsb3NlT25DbGlja01vZGFsIiwiY2xvc2VPblByZXNzRXNjYXBlIiwiY2xvc2VPbkhhc2hDaGFuZ2UiXS5mb3JFYWNoKGZ1bmN0aW9uKHByb3Ape3ZvaWQgMD09PW1haW5faW5zdGFuY2VbcHJvcF0mJihtYWluX2luc3RhbmNlW3Byb3BdPSEwKX0pLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWFpbl9pbnN0YW5jZS4kZWwpLGV4dGVybmFsX3Z1ZV9kZWZhdWx0LmEubmV4dFRpY2soZnVuY3Rpb24oKXttYWluX2luc3RhbmNlLnZpc2libGU9ITB9KX19LG1haW5fTWVzc2FnZUJveD1mdW5jdGlvbiBNZXNzYWdlQm94KG9wdGlvbnMsY2FsbGJhY2spe2lmKCFleHRlcm5hbF92dWVfZGVmYXVsdC5hLnByb3RvdHlwZS4kaXNTZXJ2ZXIpe2lmKCJzdHJpbmciPT10eXBlb2Ygb3B0aW9uc3x8T2JqZWN0KHZkb21fLmlzVk5vZGUpKG9wdGlvbnMpPyhvcHRpb25zPXttZXNzYWdlOm9wdGlvbnN9LCJzdHJpbmciPT10eXBlb2YgYXJndW1lbnRzWzFdJiYob3B0aW9ucy50aXRsZT1hcmd1bWVudHNbMV0pKTpvcHRpb25zLmNhbGxiYWNrJiYhY2FsbGJhY2smJihjYWxsYmFjaz1vcHRpb25zLmNhbGxiYWNrKSwidW5kZWZpbmVkIiE9dHlwZW9mIFByb21pc2UpcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXttc2dRdWV1ZS5wdXNoKHtvcHRpb25zOm1lcmdlX2RlZmF1bHQoKSh7fSxtYWluX2RlZmF1bHRzLE1lc3NhZ2VCb3guZGVmYXVsdHMsb3B0aW9ucyksY2FsbGJhY2s6Y2FsbGJhY2sscmVzb2x2ZTpyZXNvbHZlLHJlamVjdDpyZWplY3R9KSxtYWluX3Nob3dOZXh0TXNnKCl9KTttc2dRdWV1ZS5wdXNoKHtvcHRpb25zOm1lcmdlX2RlZmF1bHQoKSh7fSxtYWluX2RlZmF1bHRzLE1lc3NhZ2VCb3guZGVmYXVsdHMsb3B0aW9ucyksY2FsbGJhY2s6Y2FsbGJhY2t9KSxtYWluX3Nob3dOZXh0TXNnKCl9fTttYWluX01lc3NhZ2VCb3guc2V0RGVmYXVsdHM9ZnVuY3Rpb24oZGVmYXVsdHMpe21haW5fTWVzc2FnZUJveC5kZWZhdWx0cz1kZWZhdWx0c30sbWFpbl9NZXNzYWdlQm94LmFsZXJ0PWZ1bmN0aW9uKG1lc3NhZ2UsdGl0bGUsb3B0aW9ucyl7cmV0dXJuIm9iamVjdCI9PT0odm9pZCAwPT09dGl0bGU/InVuZGVmaW5lZCI6bWFpbl90eXBlb2YodGl0bGUpKT8ob3B0aW9ucz10aXRsZSx0aXRsZT0iIik6dm9pZCAwPT09dGl0bGUmJih0aXRsZT0iIiksbWFpbl9NZXNzYWdlQm94KG1lcmdlX2RlZmF1bHQoKSh7dGl0bGU6dGl0bGUsbWVzc2FnZTptZXNzYWdlLCR0eXBlOiJhbGVydCIsY2xvc2VPblByZXNzRXNjYXBlOiExLGNsb3NlT25DbGlja01vZGFsOiExfSxvcHRpb25zKSl9LG1haW5fTWVzc2FnZUJveC5jb25maXJtPWZ1bmN0aW9uKG1lc3NhZ2UsdGl0bGUsb3B0aW9ucyl7cmV0dXJuIm9iamVjdCI9PT0odm9pZCAwPT09dGl0bGU/InVuZGVmaW5lZCI6bWFpbl90eXBlb2YodGl0bGUpKT8ob3B0aW9ucz10aXRsZSx0aXRsZT0iIik6dm9pZCAwPT09dGl0bGUmJih0aXRsZT0iIiksbWFpbl9NZXNzYWdlQm94KG1lcmdlX2RlZmF1bHQoKSh7dGl0bGU6dGl0bGUsbWVzc2FnZTptZXNzYWdlLCR0eXBlOiJjb25maXJtIixzaG93Q2FuY2VsQnV0dG9uOiEwfSxvcHRpb25zKSl9LG1haW5fTWVzc2FnZUJveC5wcm9tcHQ9ZnVuY3Rpb24obWVzc2FnZSx0aXRsZSxvcHRpb25zKXtyZXR1cm4ib2JqZWN0Ij09PSh2b2lkIDA9PT10aXRsZT8idW5kZWZpbmVkIjptYWluX3R5cGVvZih0aXRsZSkpPyhvcHRpb25zPXRpdGxlLHRpdGxlPSIiKTp2b2lkIDA9PT10aXRsZSYmKHRpdGxlPSIiKSxtYWluX01lc3NhZ2VCb3gobWVyZ2VfZGVmYXVsdCgpKHt0aXRsZTp0aXRsZSxtZXNzYWdlOm1lc3NhZ2Usc2hvd0NhbmNlbEJ1dHRvbjohMCxzaG93SW5wdXQ6ITAsJHR5cGU6InByb21wdCJ9LG9wdGlvbnMpKX0sbWFpbl9NZXNzYWdlQm94LmNsb3NlPWZ1bmN0aW9uKCl7bWFpbl9pbnN0YW5jZS5kb0Nsb3NlKCksbWFpbl9pbnN0YW5jZS52aXNpYmxlPSExLG1zZ1F1ZXVlPVtdLGN1cnJlbnRNc2c9bnVsbH07dmFyIG1lc3NhZ2VfYm94PW1haW5fTWVzc2FnZUJveCxicmVhZGNydW1idnVlX3R5cGVfdGVtcGxhdGVfaWRfNGI0NjRjMDZfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF9oPXRoaXMuJGNyZWF0ZUVsZW1lbnQ7cmV0dXJuKHRoaXMuX3NlbGYuX2N8fF9oKSgiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWJyZWFkY3J1bWIiLGF0dHJzOnsiYXJpYS1sYWJlbCI6IkJyZWFkY3J1bWIiLHJvbGU6Im5hdmlnYXRpb24ifX0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMil9O2JyZWFkY3J1bWJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF80YjQ2NGMwNl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgYnJlYWRjcnVtYl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbEJyZWFkY3J1bWIiLHByb3BzOntzZXBhcmF0b3I6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6Ii8ifSxzZXBhcmF0b3JDbGFzczp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn19LHByb3ZpZGU6ZnVuY3Rpb24oKXtyZXR1cm57ZWxCcmVhZGNydW1iOnRoaXN9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIGl0ZW1zPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIi5lbC1icmVhZGNydW1iX19pdGVtIik7aXRlbXMubGVuZ3RoJiZpdGVtc1tpdGVtcy5sZW5ndGgtMV0uc2V0QXR0cmlidXRlKCJhcmlhLWN1cnJlbnQiLCJwYWdlIil9fSxicmVhZGNydW1idnVlX3R5cGVfdGVtcGxhdGVfaWRfNGI0NjRjMDZfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTticmVhZGNydW1iX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvYnJlYWRjcnVtYi9zcmMvYnJlYWRjcnVtYi52dWUiO3ZhciBicmVhZGNydW1iPWJyZWFkY3J1bWJfY29tcG9uZW50LmV4cG9ydHM7YnJlYWRjcnVtYi5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChicmVhZGNydW1iLm5hbWUsYnJlYWRjcnVtYil9O3ZhciBwYWNrYWdlc19icmVhZGNydW1iPWJyZWFkY3J1bWIsYnJlYWRjcnVtYl9pdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfZmNmOWVhYWNfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF9oPXRoaXMuJGNyZWF0ZUVsZW1lbnQsX2M9dGhpcy5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWJyZWFkY3J1bWJfX2l0ZW0ifSxbX2MoInNwYW4iLHtyZWY6ImxpbmsiLGNsYXNzOlsiZWwtYnJlYWRjcnVtYl9faW5uZXIiLHRoaXMudG8/ImlzLWxpbmsiOiIiXSxhdHRyczp7cm9sZToibGluayJ9fSxbdGhpcy5fdCgiZGVmYXVsdCIpXSwyKSx0aGlzLnNlcGFyYXRvckNsYXNzP19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWJyZWFkY3J1bWJfX3NlcGFyYXRvciIsY2xhc3M6dGhpcy5zZXBhcmF0b3JDbGFzc30pOl9jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWJyZWFkY3J1bWJfX3NlcGFyYXRvciIsYXR0cnM6e3JvbGU6InByZXNlbnRhdGlvbiJ9fSxbdGhpcy5fdih0aGlzLl9zKHRoaXMuc2VwYXJhdG9yKSldKV0pfTticmVhZGNydW1iX2l0ZW12dWVfdHlwZV90ZW1wbGF0ZV9pZF9mY2Y5ZWFhY19yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgYnJlYWRjcnVtYl9pdGVtX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsQnJlYWRjcnVtYkl0ZW0iLHByb3BzOnt0bzp7fSxyZXBsYWNlOkJvb2xlYW59LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57c2VwYXJhdG9yOiIiLHNlcGFyYXRvckNsYXNzOiIifX0saW5qZWN0OlsiZWxCcmVhZGNydW1iIl0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzO3RoaXMuc2VwYXJhdG9yPXRoaXMuZWxCcmVhZGNydW1iLnNlcGFyYXRvcix0aGlzLnNlcGFyYXRvckNsYXNzPXRoaXMuZWxCcmVhZGNydW1iLnNlcGFyYXRvckNsYXNzO3ZhciBsaW5rPXRoaXMuJHJlZnMubGluaztsaW5rLnNldEF0dHJpYnV0ZSgicm9sZSIsImxpbmsiKSxsaW5rLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbihfKXt2YXIgdG89X3RoaXMudG8sJHJvdXRlcj1fdGhpcy4kcm91dGVyO3RvJiYkcm91dGVyJiYoX3RoaXMucmVwbGFjZT8kcm91dGVyLnJlcGxhY2UodG8pOiRyb3V0ZXIucHVzaCh0bykpfSl9fSxicmVhZGNydW1iX2l0ZW12dWVfdHlwZV90ZW1wbGF0ZV9pZF9mY2Y5ZWFhY19yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2JyZWFkY3J1bWJfaXRlbV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2JyZWFkY3J1bWIvc3JjL2JyZWFkY3J1bWItaXRlbS52dWUiO3ZhciBicmVhZGNydW1iX2l0ZW09YnJlYWRjcnVtYl9pdGVtX2NvbXBvbmVudC5leHBvcnRzO2JyZWFkY3J1bWJfaXRlbS5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChicmVhZGNydW1iX2l0ZW0ubmFtZSxicmVhZGNydW1iX2l0ZW0pfTt2YXIgcGFja2FnZXNfYnJlYWRjcnVtYl9pdGVtPWJyZWFkY3J1bWJfaXRlbSxmb3JtdnVlX3R5cGVfdGVtcGxhdGVfaWRfYTFiNWZmMzRfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF9oPXRoaXMuJGNyZWF0ZUVsZW1lbnQ7cmV0dXJuKHRoaXMuX3NlbGYuX2N8fF9oKSgiZm9ybSIse3N0YXRpY0NsYXNzOiJlbC1mb3JtIixjbGFzczpbdGhpcy5sYWJlbFBvc2l0aW9uPyJlbC1mb3JtLS1sYWJlbC0iK3RoaXMubGFiZWxQb3NpdGlvbjoiIix7ImVsLWZvcm0tLWlubGluZSI6dGhpcy5pbmxpbmV9XX0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMil9O2Zvcm12dWVfdHlwZV90ZW1wbGF0ZV9pZF9hMWI1ZmYzNF9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgZm9ybV9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbEZvcm0iLGNvbXBvbmVudE5hbWU6IkVsRm9ybSIscHJvdmlkZTpmdW5jdGlvbigpe3JldHVybntlbEZvcm06dGhpc319LHByb3BzOnttb2RlbDpPYmplY3QscnVsZXM6T2JqZWN0LGxhYmVsUG9zaXRpb246U3RyaW5nLGxhYmVsV2lkdGg6U3RyaW5nLGxhYmVsU3VmZml4Ont0eXBlOlN0cmluZyxkZWZhdWx0OiIifSxpbmxpbmU6Qm9vbGVhbixpbmxpbmVNZXNzYWdlOkJvb2xlYW4sc3RhdHVzSWNvbjpCb29sZWFuLHNob3dNZXNzYWdlOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sc2l6ZTpTdHJpbmcsZGlzYWJsZWQ6Qm9vbGVhbix2YWxpZGF0ZU9uUnVsZUNoYW5nZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGhpZGVSZXF1aXJlZEFzdGVyaXNrOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX19LHdhdGNoOntydWxlczpmdW5jdGlvbigpe3RoaXMudmFsaWRhdGVPblJ1bGVDaGFuZ2UmJnRoaXMudmFsaWRhdGUoZnVuY3Rpb24oKXt9KX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57ZmllbGRzOltdfX0sY3JlYXRlZDpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzO3RoaXMuJG9uKCJlbC5mb3JtLmFkZEZpZWxkIixmdW5jdGlvbihmaWVsZCl7ZmllbGQmJl90aGlzLmZpZWxkcy5wdXNoKGZpZWxkKX0pLHRoaXMuJG9uKCJlbC5mb3JtLnJlbW92ZUZpZWxkIixmdW5jdGlvbihmaWVsZCl7ZmllbGQucHJvcCYmX3RoaXMuZmllbGRzLnNwbGljZShfdGhpcy5maWVsZHMuaW5kZXhPZihmaWVsZCksMSl9KX0sbWV0aG9kczp7cmVzZXRGaWVsZHM6ZnVuY3Rpb24oKXt0aGlzLm1vZGVsP3RoaXMuZmllbGRzLmZvckVhY2goZnVuY3Rpb24oZmllbGQpe2ZpZWxkLnJlc2V0RmllbGQoKX0pOmNvbnNvbGUud2FybigiW0VsZW1lbnQgV2Fybl1bRm9ybV1tb2RlbCBpcyByZXF1aXJlZCBmb3IgcmVzZXRGaWVsZHMgdG8gd29yay4iKX0sY2xlYXJWYWxpZGF0ZTpmdW5jdGlvbigpe3ZhciBwcm9wcz0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W107KHByb3BzLmxlbmd0aD8ic3RyaW5nIj09dHlwZW9mIHByb3BzP3RoaXMuZmllbGRzLmZpbHRlcihmdW5jdGlvbihmaWVsZCl7cmV0dXJuIHByb3BzPT09ZmllbGQucHJvcH0pOnRoaXMuZmllbGRzLmZpbHRlcihmdW5jdGlvbihmaWVsZCl7cmV0dXJuLTE8cHJvcHMuaW5kZXhPZihmaWVsZC5wcm9wKX0pOnRoaXMuZmllbGRzKS5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkKXtmaWVsZC5jbGVhclZhbGlkYXRlKCl9KX0sdmFsaWRhdGU6ZnVuY3Rpb24oY2FsbGJhY2spe3ZhciBfdGhpczI9dGhpcztpZih0aGlzLm1vZGVsKXt2YXIgcHJvbWlzZT12b2lkIDA7ImZ1bmN0aW9uIiE9dHlwZW9mIGNhbGxiYWNrJiZ3aW5kb3cuUHJvbWlzZSYmKHByb21pc2U9bmV3IHdpbmRvdy5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtjYWxsYmFjaz1mdW5jdGlvbih2YWxpZCl7dmFsaWQ/cmVzb2x2ZSh2YWxpZCk6cmVqZWN0KHZhbGlkKX19KSk7dmFyIHZhbGlkPSEwLGNvdW50PTA7MD09PXRoaXMuZmllbGRzLmxlbmd0aCYmY2FsbGJhY2smJmNhbGxiYWNrKCEwKTt2YXIgaW52YWxpZEZpZWxkcz17fTtyZXR1cm4gdGhpcy5maWVsZHMuZm9yRWFjaChmdW5jdGlvbihmaWVsZCl7ZmllbGQudmFsaWRhdGUoIiIsZnVuY3Rpb24obWVzc2FnZSxmaWVsZCl7bWVzc2FnZSYmKHZhbGlkPSExKSxpbnZhbGlkRmllbGRzPW1lcmdlX2RlZmF1bHQoKSh7fSxpbnZhbGlkRmllbGRzLGZpZWxkKSwiZnVuY3Rpb24iPT10eXBlb2YgY2FsbGJhY2smJisrY291bnQ9PT1fdGhpczIuZmllbGRzLmxlbmd0aCYmY2FsbGJhY2sodmFsaWQsaW52YWxpZEZpZWxkcyl9KX0pLHByb21pc2V8fHZvaWQgMH1jb25zb2xlLndhcm4oIltFbGVtZW50IFdhcm5dW0Zvcm1dbW9kZWwgaXMgcmVxdWlyZWQgZm9yIHZhbGlkYXRlIHRvIHdvcmshIil9LHZhbGlkYXRlRmllbGQ6ZnVuY3Rpb24ocHJvcHMsY2Ipe3Byb3BzPVtdLmNvbmNhdChwcm9wcyk7dmFyIGZpZWxkcz10aGlzLmZpZWxkcy5maWx0ZXIoZnVuY3Rpb24oZmllbGQpe3JldHVybi0xIT09cHJvcHMuaW5kZXhPZihmaWVsZC5wcm9wKX0pO2ZpZWxkcy5sZW5ndGg/ZmllbGRzLmZvckVhY2goZnVuY3Rpb24oZmllbGQpe2ZpZWxkLnZhbGlkYXRlKCIiLGNiKX0pOmNvbnNvbGUud2FybigiW0VsZW1lbnQgV2Fybl1wbGVhc2UgcGFzcyBjb3JyZWN0IHByb3BzISIpfX19LGZvcm12dWVfdHlwZV90ZW1wbGF0ZV9pZF9hMWI1ZmYzNF9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2Zvcm1fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9mb3JtL3NyYy9mb3JtLnZ1ZSI7dmFyIHNyY19mb3JtPWZvcm1fY29tcG9uZW50LmV4cG9ydHM7c3JjX2Zvcm0uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc3JjX2Zvcm0ubmFtZSxzcmNfZm9ybSl9O3ZhciBwYWNrYWdlc19mb3JtPXNyY19mb3JtLGZvcm1faXRlbXZ1ZV90eXBlX3RlbXBsYXRlX2lkX2I2ZjNkYjZjX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1mb3JtLWl0ZW0iLGNsYXNzOlt7ImVsLWZvcm0taXRlbS0tZmVlZGJhY2siOl92bS5lbEZvcm0mJl92bS5lbEZvcm0uc3RhdHVzSWNvbiwiaXMtZXJyb3IiOiJlcnJvciI9PT1fdm0udmFsaWRhdGVTdGF0ZSwiaXMtdmFsaWRhdGluZyI6InZhbGlkYXRpbmciPT09X3ZtLnZhbGlkYXRlU3RhdGUsImlzLXN1Y2Nlc3MiOiJzdWNjZXNzIj09PV92bS52YWxpZGF0ZVN0YXRlLCJpcy1yZXF1aXJlZCI6X3ZtLmlzUmVxdWlyZWR8fF92bS5yZXF1aXJlZCwiaXMtbm8tYXN0ZXJpc2siOl92bS5lbEZvcm0mJl92bS5lbEZvcm0uaGlkZVJlcXVpcmVkQXN0ZXJpc2t9LF92bS5zaXplQ2xhc3M/ImVsLWZvcm0taXRlbS0tIitfdm0uc2l6ZUNsYXNzOiIiXX0sW192bS5sYWJlbHx8X3ZtLiRzbG90cy5sYWJlbD9fYygibGFiZWwiLHtzdGF0aWNDbGFzczoiZWwtZm9ybS1pdGVtX19sYWJlbCIsc3R5bGU6X3ZtLmxhYmVsU3R5bGUsYXR0cnM6e2Zvcjpfdm0ubGFiZWxGb3J9fSxbX3ZtLl90KCJsYWJlbCIsW192bS5fdihfdm0uX3MoX3ZtLmxhYmVsK192bS5mb3JtLmxhYmVsU3VmZml4KSldKV0sMik6X3ZtLl9lKCksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1mb3JtLWl0ZW1fX2NvbnRlbnQiLHN0eWxlOl92bS5jb250ZW50U3R5bGV9LFtfdm0uX3QoImRlZmF1bHQiKSxfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJlbC16b29tLWluLXRvcCJ9fSxbImVycm9yIj09PV92bS52YWxpZGF0ZVN0YXRlJiZfdm0uc2hvd01lc3NhZ2UmJl92bS5mb3JtLnNob3dNZXNzYWdlP192bS5fdCgiZXJyb3IiLFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWZvcm0taXRlbV9fZXJyb3IiLGNsYXNzOnsiZWwtZm9ybS1pdGVtX19lcnJvci0taW5saW5lIjoiYm9vbGVhbiI9PXR5cGVvZiBfdm0uaW5saW5lTWVzc2FnZT9fdm0uaW5saW5lTWVzc2FnZTpfdm0uZWxGb3JtJiZfdm0uZWxGb3JtLmlubGluZU1lc3NhZ2V8fCExfX0sW192bS5fdigiXG4gICAgICAgICAgIitfdm0uX3MoX3ZtLnZhbGlkYXRlTWVzc2FnZSkrIlxuICAgICAgICAiKV0pXSx7ZXJyb3I6X3ZtLnZhbGlkYXRlTWVzc2FnZX0pOl92bS5fZSgpXSwyKV0sMildKX07Zm9ybV9pdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfYjZmM2RiNmNfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGV4dGVybmFsX2FzeW5jX3ZhbGlkYXRvcl89X193ZWJwYWNrX3JlcXVpcmVfXygzNiksZXh0ZXJuYWxfYXN5bmNfdmFsaWRhdG9yX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGV4dGVybmFsX2FzeW5jX3ZhbGlkYXRvcl8pLGZvcm1faXRlbV9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbEZvcm1JdGVtIixjb21wb25lbnROYW1lOiJFbEZvcm1JdGVtIixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hXSxwcm92aWRlOmZ1bmN0aW9uKCl7cmV0dXJue2VsRm9ybUl0ZW06dGhpc319LGluamVjdDpbImVsRm9ybSJdLHByb3BzOntsYWJlbDpTdHJpbmcsbGFiZWxXaWR0aDpTdHJpbmcscHJvcDpTdHJpbmcscmVxdWlyZWQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OnZvaWQgMH0scnVsZXM6W09iamVjdCxBcnJheV0sZXJyb3I6U3RyaW5nLHZhbGlkYXRlU3RhdHVzOlN0cmluZyxmb3I6U3RyaW5nLGlubGluZU1lc3NhZ2U6e3R5cGU6W1N0cmluZyxCb29sZWFuXSxkZWZhdWx0OiIifSxzaG93TWVzc2FnZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LHNpemU6U3RyaW5nfSx3YXRjaDp7ZXJyb3I6e2ltbWVkaWF0ZTohMCxoYW5kbGVyOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnZhbGlkYXRlTWVzc2FnZT12YWx1ZSx0aGlzLnZhbGlkYXRlU3RhdGU9dmFsdWU/ImVycm9yIjoiIn19LHZhbGlkYXRlU3RhdHVzOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLnZhbGlkYXRlU3RhdGU9dmFsdWV9fSxjb21wdXRlZDp7bGFiZWxGb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mb3J8fHRoaXMucHJvcH0sbGFiZWxTdHlsZTpmdW5jdGlvbigpe3ZhciByZXQ9e307aWYoInRvcCI9PT10aGlzLmZvcm0ubGFiZWxQb3NpdGlvbilyZXR1cm4gcmV0O3ZhciBsYWJlbFdpZHRoPXRoaXMubGFiZWxXaWR0aHx8dGhpcy5mb3JtLmxhYmVsV2lkdGg7cmV0dXJuIGxhYmVsV2lkdGgmJihyZXQud2lkdGg9bGFiZWxXaWR0aCkscmV0fSxjb250ZW50U3R5bGU6ZnVuY3Rpb24oKXt2YXIgcmV0PXt9LGxhYmVsPXRoaXMubGFiZWw7aWYoInRvcCI9PT10aGlzLmZvcm0ubGFiZWxQb3NpdGlvbnx8dGhpcy5mb3JtLmlubGluZSlyZXR1cm4gcmV0O2lmKCFsYWJlbCYmIXRoaXMubGFiZWxXaWR0aCYmdGhpcy5pc05lc3RlZClyZXR1cm4gcmV0O3ZhciBsYWJlbFdpZHRoPXRoaXMubGFiZWxXaWR0aHx8dGhpcy5mb3JtLmxhYmVsV2lkdGg7cmV0dXJuIGxhYmVsV2lkdGgmJihyZXQubWFyZ2luTGVmdD1sYWJlbFdpZHRoKSxyZXR9LGZvcm06ZnVuY3Rpb24oKXtmb3IodmFyIHBhcmVudD10aGlzLiRwYXJlbnQscGFyZW50TmFtZT1wYXJlbnQuJG9wdGlvbnMuY29tcG9uZW50TmFtZTsiRWxGb3JtIiE9PXBhcmVudE5hbWU7KSJFbEZvcm1JdGVtIj09PXBhcmVudE5hbWUmJih0aGlzLmlzTmVzdGVkPSEwKSxwYXJlbnROYW1lPShwYXJlbnQ9cGFyZW50LiRwYXJlbnQpLiRvcHRpb25zLmNvbXBvbmVudE5hbWU7cmV0dXJuIHBhcmVudH0sZmllbGRWYWx1ZTpmdW5jdGlvbigpe3ZhciBtb2RlbD10aGlzLmZvcm0ubW9kZWw7aWYobW9kZWwmJnRoaXMucHJvcCl7dmFyIHBhdGg9dGhpcy5wcm9wO3JldHVybi0xIT09cGF0aC5pbmRleE9mKCI6IikmJihwYXRoPXBhdGgucmVwbGFjZSgvOi8sIi4iKSksT2JqZWN0KHV0aWxfLmdldFByb3BCeVBhdGgpKG1vZGVsLHBhdGgsITApLnZ9fSxpc1JlcXVpcmVkOmZ1bmN0aW9uKCl7dmFyIHJ1bGVzPXRoaXMuZ2V0UnVsZXMoKSxpc1JlcXVpcmVkPSExO3JldHVybiBydWxlcyYmcnVsZXMubGVuZ3RoJiZydWxlcy5ldmVyeShmdW5jdGlvbihydWxlKXtyZXR1cm4hcnVsZS5yZXF1aXJlZHx8IShpc1JlcXVpcmVkPSEwKX0pLGlzUmVxdWlyZWR9LF9mb3JtU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsRm9ybS5zaXplfSxlbEZvcm1JdGVtU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV8fHRoaXMuX2Zvcm1TaXplfSxzaXplQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbEZvcm1JdGVtU2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfX0sZGF0YTpmdW5jdGlvbigpe3JldHVybnt2YWxpZGF0ZVN0YXRlOiIiLHZhbGlkYXRlTWVzc2FnZToiIix2YWxpZGF0ZURpc2FibGVkOiExLHZhbGlkYXRvcjp7fSxpc05lc3RlZDohMX19LG1ldGhvZHM6e3ZhbGlkYXRlOmZ1bmN0aW9uKHRyaWdnZXIpe3ZhciBfdGhpcz10aGlzLGNhbGxiYWNrPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp1dGlsXy5ub29wO3RoaXMudmFsaWRhdGVEaXNhYmxlZD0hMTt2YXIgcnVsZXM9dGhpcy5nZXRGaWx0ZXJlZFJ1bGUodHJpZ2dlcik7aWYoKCFydWxlc3x8MD09PXJ1bGVzLmxlbmd0aCkmJnZvaWQgMD09PXRoaXMucmVxdWlyZWQpcmV0dXJuIGNhbGxiYWNrKCksITA7dGhpcy52YWxpZGF0ZVN0YXRlPSJ2YWxpZGF0aW5nIjt2YXIgZGVzY3JpcHRvcj17fTtydWxlcyYmMDxydWxlcy5sZW5ndGgmJnJ1bGVzLmZvckVhY2goZnVuY3Rpb24ocnVsZSl7ZGVsZXRlIHJ1bGUudHJpZ2dlcn0pLGRlc2NyaXB0b3JbdGhpcy5wcm9wXT1ydWxlczt2YXIgdmFsaWRhdG9yPW5ldyBleHRlcm5hbF9hc3luY192YWxpZGF0b3JfZGVmYXVsdC5hKGRlc2NyaXB0b3IpLG1vZGVsPXt9O21vZGVsW3RoaXMucHJvcF09dGhpcy5maWVsZFZhbHVlLHZhbGlkYXRvci52YWxpZGF0ZShtb2RlbCx7Zmlyc3RGaWVsZHM6ITB9LGZ1bmN0aW9uKGVycm9ycyxpbnZhbGlkRmllbGRzKXtfdGhpcy52YWxpZGF0ZVN0YXRlPWVycm9ycz8iZXJyb3IiOiJzdWNjZXNzIixfdGhpcy52YWxpZGF0ZU1lc3NhZ2U9ZXJyb3JzP2Vycm9yc1swXS5tZXNzYWdlOiIiLGNhbGxiYWNrKF90aGlzLnZhbGlkYXRlTWVzc2FnZSxpbnZhbGlkRmllbGRzKSxfdGhpcy5lbEZvcm0mJl90aGlzLmVsRm9ybS4kZW1pdCgidmFsaWRhdGUiLF90aGlzLnByb3AsIWVycm9ycyxfdGhpcy52YWxpZGF0ZU1lc3NhZ2V8fG51bGwpfSl9LGNsZWFyVmFsaWRhdGU6ZnVuY3Rpb24oKXt0aGlzLnZhbGlkYXRlU3RhdGU9IiIsdGhpcy52YWxpZGF0ZU1lc3NhZ2U9IiIsdGhpcy52YWxpZGF0ZURpc2FibGVkPSExfSxyZXNldEZpZWxkOmZ1bmN0aW9uKCl7dGhpcy52YWxpZGF0ZVN0YXRlPSIiLHRoaXMudmFsaWRhdGVNZXNzYWdlPSIiO3ZhciBtb2RlbD10aGlzLmZvcm0ubW9kZWwsdmFsdWU9dGhpcy5maWVsZFZhbHVlLHBhdGg9dGhpcy5wcm9wOy0xIT09cGF0aC5pbmRleE9mKCI6IikmJihwYXRoPXBhdGgucmVwbGFjZSgvOi8sIi4iKSk7dmFyIHByb3A9T2JqZWN0KHV0aWxfLmdldFByb3BCeVBhdGgpKG1vZGVsLHBhdGgsITApO3RoaXMudmFsaWRhdGVEaXNhYmxlZD0hMCxBcnJheS5pc0FycmF5KHZhbHVlKT9wcm9wLm9bcHJvcC5rXT1bXS5jb25jYXQodGhpcy5pbml0aWFsVmFsdWUpOnByb3Aub1twcm9wLmtdPXRoaXMuaW5pdGlhbFZhbHVlLHRoaXMuYnJvYWRjYXN0KCJFbFRpbWVTZWxlY3QiLCJmaWVsZFJlc2V0Iix0aGlzLmluaXRpYWxWYWx1ZSl9LGdldFJ1bGVzOmZ1bmN0aW9uKCl7dmFyIGZvcm1SdWxlcz10aGlzLmZvcm0ucnVsZXMsc2VsZlJ1bGVzPXRoaXMucnVsZXMscmVxdWlyZWRSdWxlPXZvaWQgMCE9PXRoaXMucmVxdWlyZWQ/e3JlcXVpcmVkOiEhdGhpcy5yZXF1aXJlZH06W10scHJvcD1PYmplY3QodXRpbF8uZ2V0UHJvcEJ5UGF0aCkoZm9ybVJ1bGVzLHRoaXMucHJvcHx8IiIpO3JldHVybiBmb3JtUnVsZXM9Zm9ybVJ1bGVzP3Byb3Aub1t0aGlzLnByb3B8fCIiXXx8cHJvcC52OltdLFtdLmNvbmNhdChzZWxmUnVsZXN8fGZvcm1SdWxlc3x8W10pLmNvbmNhdChyZXF1aXJlZFJ1bGUpfSxnZXRGaWx0ZXJlZFJ1bGU6ZnVuY3Rpb24odHJpZ2dlcil7cmV0dXJuIHRoaXMuZ2V0UnVsZXMoKS5maWx0ZXIoZnVuY3Rpb24ocnVsZSl7cmV0dXJuIXJ1bGUudHJpZ2dlcnx8IiI9PT10cmlnZ2VyfHwoQXJyYXkuaXNBcnJheShydWxlLnRyaWdnZXIpPy0xPHJ1bGUudHJpZ2dlci5pbmRleE9mKHRyaWdnZXIpOnJ1bGUudHJpZ2dlcj09PXRyaWdnZXIpfSkubWFwKGZ1bmN0aW9uKHJ1bGUpe3JldHVybiBtZXJnZV9kZWZhdWx0KCkoe30scnVsZSl9KX0sb25GaWVsZEJsdXI6ZnVuY3Rpb24oKXt0aGlzLnZhbGlkYXRlKCJibHVyIil9LG9uRmllbGRDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnZhbGlkYXRlRGlzYWJsZWQ/dGhpcy52YWxpZGF0ZURpc2FibGVkPSExOnRoaXMudmFsaWRhdGUoImNoYW5nZSIpfX0sbW91bnRlZDpmdW5jdGlvbigpe2lmKHRoaXMucHJvcCl7dGhpcy5kaXNwYXRjaCgiRWxGb3JtIiwiZWwuZm9ybS5hZGRGaWVsZCIsW3RoaXNdKTt2YXIgaW5pdGlhbFZhbHVlPXRoaXMuZmllbGRWYWx1ZTtBcnJheS5pc0FycmF5KGluaXRpYWxWYWx1ZSkmJihpbml0aWFsVmFsdWU9W10uY29uY2F0KGluaXRpYWxWYWx1ZSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJpbml0aWFsVmFsdWUiLHt2YWx1ZTppbml0aWFsVmFsdWV9KSwodGhpcy5nZXRSdWxlcygpLmxlbmd0aHx8dm9pZCAwIT09dGhpcy5yZXF1aXJlZCkmJih0aGlzLiRvbigiZWwuZm9ybS5ibHVyIix0aGlzLm9uRmllbGRCbHVyKSx0aGlzLiRvbigiZWwuZm9ybS5jaGFuZ2UiLHRoaXMub25GaWVsZENoYW5nZSkpfX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2goIkVsRm9ybSIsImVsLmZvcm0ucmVtb3ZlRmllbGQiLFt0aGlzXSl9fSxmb3JtX2l0ZW12dWVfdHlwZV90ZW1wbGF0ZV9pZF9iNmYzZGI2Y19yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2Zvcm1faXRlbV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2Zvcm0vc3JjL2Zvcm0taXRlbS52dWUiO3ZhciBmb3JtX2l0ZW09Zm9ybV9pdGVtX2NvbXBvbmVudC5leHBvcnRzO2Zvcm1faXRlbS5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChmb3JtX2l0ZW0ubmFtZSxmb3JtX2l0ZW0pfTt2YXIgcGFja2FnZXNfZm9ybV9pdGVtPWZvcm1faXRlbSx0YWJfYmFydnVlX3R5cGVfdGVtcGxhdGVfaWRfMjAzMWYzM2FfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF9oPXRoaXMuJGNyZWF0ZUVsZW1lbnQ7cmV0dXJuKHRoaXMuX3NlbGYuX2N8fF9oKSgiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRhYnNfX2FjdGl2ZS1iYXIiLGNsYXNzOiJpcy0iK3RoaXMucm9vdFRhYnMudGFiUG9zaXRpb24sc3R5bGU6dGhpcy5iYXJTdHlsZX0pfTt0YWJfYmFydnVlX3R5cGVfdGVtcGxhdGVfaWRfMjAzMWYzM2FfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHRhYl9iYXJfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiVGFiQmFyIixwcm9wczp7dGFiczpBcnJheX0saW5qZWN0Olsicm9vdFRhYnMiXSxjb21wdXRlZDp7YmFyU3R5bGU6e2dldDpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzLHN0eWxlPXt9LG9mZnNldD0wLHRhYlNpemU9MCxzaXplTmFtZT0tMSE9PVsidG9wIiwiYm90dG9tIl0uaW5kZXhPZih0aGlzLnJvb3RUYWJzLnRhYlBvc2l0aW9uKT8id2lkdGgiOiJoZWlnaHQiLHNpemVEaXI9IndpZHRoIj09PXNpemVOYW1lPyJ4IjoieSIsZmlyc3RVcHBlckNhc2U9ZnVuY3Rpb24oc3RyKXtyZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvKCB8XilbYS16XS9nLGZ1bmN0aW9uKEwpe3JldHVybiBMLnRvVXBwZXJDYXNlKCl9KX07dGhpcy50YWJzLmV2ZXJ5KGZ1bmN0aW9uKHRhYixpbmRleCl7dmFyICRlbD1PYmplY3QodXRpbF8uYXJyYXlGaW5kKShfdGhpcy4kcGFyZW50LiRyZWZzLnRhYnN8fFtdLGZ1bmN0aW9uKHQpe3JldHVybiB0LmlkLnJlcGxhY2UoInRhYi0iLCIiKT09PXRhYi5wYW5lTmFtZX0pO3JldHVybiEhJGVsJiYodGFiLmFjdGl2ZT8odGFiU2l6ZT0kZWxbImNsaWVudCIrZmlyc3RVcHBlckNhc2Uoc2l6ZU5hbWUpXSwid2lkdGgiPT09c2l6ZU5hbWUmJjE8X3RoaXMudGFicy5sZW5ndGgmJih0YWJTaXplLT0wPT09aW5kZXh8fGluZGV4PT09X3RoaXMudGFicy5sZW5ndGgtMT8yMDo0MCksITEpOihvZmZzZXQrPSRlbFsiY2xpZW50IitmaXJzdFVwcGVyQ2FzZShzaXplTmFtZSldLCEwKSl9KSwid2lkdGgiPT09c2l6ZU5hbWUmJjAhPT1vZmZzZXQmJihvZmZzZXQrPTIwKTt2YXIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUiK2ZpcnN0VXBwZXJDYXNlKHNpemVEaXIpKyIoIitvZmZzZXQrInB4KSI7cmV0dXJuIHN0eWxlW3NpemVOYW1lXT10YWJTaXplKyJweCIsc3R5bGUudHJhbnNmb3JtPXRyYW5zZm9ybSxzdHlsZS5tc1RyYW5zZm9ybT10cmFuc2Zvcm0sc3R5bGUud2Via2l0VHJhbnNmb3JtPXRyYW5zZm9ybSxzdHlsZX19fX0sdGFiX2JhcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzIwMzFmMzNhX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7dGFiX2Jhcl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3RhYnMvc3JjL3RhYi1iYXIudnVlIjt2YXIgdGFiX2Jhcj10YWJfYmFyX2NvbXBvbmVudC5leHBvcnRzO2Z1bmN0aW9uIG5vb3AoKXt9dmFyIHRhYl9uYXZ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19maXJzdFVwcGVyQ2FzZT1mdW5jdGlvbihzdHIpe3JldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8oIHxeKVthLXpdL2csZnVuY3Rpb24oTCl7cmV0dXJuIEwudG9VcHBlckNhc2UoKX0pfSx0YWJfbmF2X2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IlRhYk5hdiIsY29tcG9uZW50czp7VGFiQmFyOnRhYl9iYXJ9LGluamVjdDpbInJvb3RUYWJzIl0scHJvcHM6e3BhbmVzOkFycmF5LGN1cnJlbnROYW1lOlN0cmluZyxlZGl0YWJsZTpCb29sZWFuLG9uVGFiQ2xpY2s6e3R5cGU6RnVuY3Rpb24sZGVmYXVsdDpub29wfSxvblRhYlJlbW92ZTp7dHlwZTpGdW5jdGlvbixkZWZhdWx0Om5vb3B9LHR5cGU6U3RyaW5nLHN0cmV0Y2g6Qm9vbGVhbn0sZGF0YTpmdW5jdGlvbigpe3JldHVybntzY3JvbGxhYmxlOiExLG5hdk9mZnNldDowLGlzRm9jdXM6ITEsZm9jdXNhYmxlOiEwfX0sY29tcHV0ZWQ6e25hdlN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJue3RyYW5zZm9ybToidHJhbnNsYXRlIisoLTEhPT1bInRvcCIsImJvdHRvbSJdLmluZGV4T2YodGhpcy5yb290VGFicy50YWJQb3NpdGlvbik/IlgiOiJZIikrIigtIit0aGlzLm5hdk9mZnNldCsicHgpIn19LHNpemVOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuLTEhPT1bInRvcCIsImJvdHRvbSJdLmluZGV4T2YodGhpcy5yb290VGFicy50YWJQb3NpdGlvbik/IndpZHRoIjoiaGVpZ2h0In19LG1ldGhvZHM6e3Njcm9sbFByZXY6ZnVuY3Rpb24oKXt2YXIgY29udGFpbmVyU2l6ZT10aGlzLiRyZWZzLm5hdlNjcm9sbFsib2Zmc2V0Iit0YWJfbmF2dnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfZmlyc3RVcHBlckNhc2UodGhpcy5zaXplTmFtZSldLGN1cnJlbnRPZmZzZXQ9dGhpcy5uYXZPZmZzZXQ7aWYoY3VycmVudE9mZnNldCl7dmFyIG5ld09mZnNldD1jb250YWluZXJTaXplPGN1cnJlbnRPZmZzZXQ/Y3VycmVudE9mZnNldC1jb250YWluZXJTaXplOjA7dGhpcy5uYXZPZmZzZXQ9bmV3T2Zmc2V0fX0sc2Nyb2xsTmV4dDpmdW5jdGlvbigpe3ZhciBuYXZTaXplPXRoaXMuJHJlZnMubmF2WyJvZmZzZXQiK3RhYl9uYXZ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19maXJzdFVwcGVyQ2FzZSh0aGlzLnNpemVOYW1lKV0sY29udGFpbmVyU2l6ZT10aGlzLiRyZWZzLm5hdlNjcm9sbFsib2Zmc2V0Iit0YWJfbmF2dnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfZmlyc3RVcHBlckNhc2UodGhpcy5zaXplTmFtZSldLGN1cnJlbnRPZmZzZXQ9dGhpcy5uYXZPZmZzZXQ7aWYoIShuYXZTaXplLWN1cnJlbnRPZmZzZXQ8PWNvbnRhaW5lclNpemUpKXt2YXIgbmV3T2Zmc2V0PTIqY29udGFpbmVyU2l6ZTxuYXZTaXplLWN1cnJlbnRPZmZzZXQ/Y3VycmVudE9mZnNldCtjb250YWluZXJTaXplOm5hdlNpemUtY29udGFpbmVyU2l6ZTt0aGlzLm5hdk9mZnNldD1uZXdPZmZzZXR9fSxzY3JvbGxUb0FjdGl2ZVRhYjpmdW5jdGlvbigpe2lmKHRoaXMuc2Nyb2xsYWJsZSl7dmFyIG5hdj10aGlzLiRyZWZzLm5hdixhY3RpdmVUYWI9dGhpcy4kZWwucXVlcnlTZWxlY3RvcigiLmlzLWFjdGl2ZSIpO2lmKGFjdGl2ZVRhYil7dmFyIG5hdlNjcm9sbD10aGlzLiRyZWZzLm5hdlNjcm9sbCxhY3RpdmVUYWJCb3VuZGluZz1hY3RpdmVUYWIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbmF2U2Nyb2xsQm91bmRpbmc9bmF2U2Nyb2xsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG1heE9mZnNldD1uYXYub2Zmc2V0V2lkdGgtbmF2U2Nyb2xsQm91bmRpbmcud2lkdGgsY3VycmVudE9mZnNldD10aGlzLm5hdk9mZnNldCxuZXdPZmZzZXQ9Y3VycmVudE9mZnNldDthY3RpdmVUYWJCb3VuZGluZy5sZWZ0PG5hdlNjcm9sbEJvdW5kaW5nLmxlZnQmJihuZXdPZmZzZXQ9Y3VycmVudE9mZnNldC0obmF2U2Nyb2xsQm91bmRpbmcubGVmdC1hY3RpdmVUYWJCb3VuZGluZy5sZWZ0KSksYWN0aXZlVGFiQm91bmRpbmcucmlnaHQ+bmF2U2Nyb2xsQm91bmRpbmcucmlnaHQmJihuZXdPZmZzZXQ9Y3VycmVudE9mZnNldCthY3RpdmVUYWJCb3VuZGluZy5yaWdodC1uYXZTY3JvbGxCb3VuZGluZy5yaWdodCksbmV3T2Zmc2V0PU1hdGgubWF4KG5ld09mZnNldCwwKSx0aGlzLm5hdk9mZnNldD1NYXRoLm1pbihuZXdPZmZzZXQsbWF4T2Zmc2V0KX19fSx1cGRhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLiRyZWZzLm5hdil7dmFyIHNpemVOYW1lPXRoaXMuc2l6ZU5hbWUsbmF2U2l6ZT10aGlzLiRyZWZzLm5hdlsib2Zmc2V0Iit0YWJfbmF2dnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfZmlyc3RVcHBlckNhc2Uoc2l6ZU5hbWUpXSxjb250YWluZXJTaXplPXRoaXMuJHJlZnMubmF2U2Nyb2xsWyJvZmZzZXQiK3RhYl9uYXZ2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19maXJzdFVwcGVyQ2FzZShzaXplTmFtZSldLGN1cnJlbnRPZmZzZXQ9dGhpcy5uYXZPZmZzZXQ7aWYoY29udGFpbmVyU2l6ZTxuYXZTaXplKXt2YXIgX2N1cnJlbnRPZmZzZXQ9dGhpcy5uYXZPZmZzZXQ7dGhpcy5zY3JvbGxhYmxlPXRoaXMuc2Nyb2xsYWJsZXx8e30sdGhpcy5zY3JvbGxhYmxlLnByZXY9X2N1cnJlbnRPZmZzZXQsdGhpcy5zY3JvbGxhYmxlLm5leHQ9X2N1cnJlbnRPZmZzZXQrY29udGFpbmVyU2l6ZTxuYXZTaXplLG5hdlNpemUtX2N1cnJlbnRPZmZzZXQ8Y29udGFpbmVyU2l6ZSYmKHRoaXMubmF2T2Zmc2V0PW5hdlNpemUtY29udGFpbmVyU2l6ZSl9ZWxzZSB0aGlzLnNjcm9sbGFibGU9ITEsMDxjdXJyZW50T2Zmc2V0JiYodGhpcy5uYXZPZmZzZXQ9MCl9fSxjaGFuZ2VUYWI6ZnVuY3Rpb24oZSl7dmFyIGtleUNvZGU9ZS5rZXlDb2RlLG5leHRJbmRleD12b2lkIDAsY3VycmVudEluZGV4PXZvaWQgMCx0YWJMaXN0PXZvaWQgMDstMSE9PVszNywzOCwzOSw0MF0uaW5kZXhPZihrZXlDb2RlKSYmKHRhYkxpc3Q9ZS5jdXJyZW50VGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoIltyb2xlPXRhYl0iKSxjdXJyZW50SW5kZXg9QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0YWJMaXN0LGUudGFyZ2V0KSx0YWJMaXN0W25leHRJbmRleD0zNz09PWtleUNvZGV8fDM4PT09a2V5Q29kZT8wPT09Y3VycmVudEluZGV4P3RhYkxpc3QubGVuZ3RoLTE6Y3VycmVudEluZGV4LTE6Y3VycmVudEluZGV4PHRhYkxpc3QubGVuZ3RoLTE/Y3VycmVudEluZGV4KzE6MF0uZm9jdXMoKSx0YWJMaXN0W25leHRJbmRleF0uY2xpY2soKSx0aGlzLnNldEZvY3VzKCkpfSxzZXRGb2N1czpmdW5jdGlvbigpe3RoaXMuZm9jdXNhYmxlJiYodGhpcy5pc0ZvY3VzPSEwKX0scmVtb3ZlRm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmlzRm9jdXM9ITF9LHZpc2liaWxpdHlDaGFuZ2VIYW5kbGVyOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXMsdmlzaWJpbGl0eT1kb2N1bWVudC52aXNpYmlsaXR5U3RhdGU7ImhpZGRlbiI9PT12aXNpYmlsaXR5P3RoaXMuZm9jdXNhYmxlPSExOiJ2aXNpYmxlIj09PXZpc2liaWxpdHkmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpcy5mb2N1c2FibGU9ITB9LDUwKX0sd2luZG93Qmx1ckhhbmRsZXI6ZnVuY3Rpb24oKXt0aGlzLmZvY3VzYWJsZT0hMX0sd2luZG93Rm9jdXNIYW5kbGVyOmZ1bmN0aW9uKCl7dmFyIF90aGlzMj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpczIuZm9jdXNhYmxlPSEwfSw1MCl9fSx1cGRhdGVkOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGUoKX0scmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciBfdGhpczM9dGhpcyx0eXBlPXRoaXMudHlwZSxwYW5lcz10aGlzLnBhbmVzLGVkaXRhYmxlPXRoaXMuZWRpdGFibGUsc3RyZXRjaD10aGlzLnN0cmV0Y2gsb25UYWJDbGljaz10aGlzLm9uVGFiQ2xpY2ssb25UYWJSZW1vdmU9dGhpcy5vblRhYlJlbW92ZSxuYXZTdHlsZT10aGlzLm5hdlN0eWxlLHNjcm9sbGFibGU9dGhpcy5zY3JvbGxhYmxlLHNjcm9sbE5leHQ9dGhpcy5zY3JvbGxOZXh0LHNjcm9sbFByZXY9dGhpcy5zY3JvbGxQcmV2LGNoYW5nZVRhYj10aGlzLmNoYW5nZVRhYixzZXRGb2N1cz10aGlzLnNldEZvY3VzLHJlbW92ZUZvY3VzPXRoaXMucmVtb3ZlRm9jdXMsc2Nyb2xsQnRuPXNjcm9sbGFibGU/W2goInNwYW4iLHtjbGFzczpbImVsLXRhYnNfX25hdi1wcmV2IixzY3JvbGxhYmxlLnByZXY/IiI6ImlzLWRpc2FibGVkIl0sb246e2NsaWNrOnNjcm9sbFByZXZ9fSxbaCgiaSIse2NsYXNzOiJlbC1pY29uLWFycm93LWxlZnQifSldKSxoKCJzcGFuIix7Y2xhc3M6WyJlbC10YWJzX19uYXYtbmV4dCIsc2Nyb2xsYWJsZS5uZXh0PyIiOiJpcy1kaXNhYmxlZCJdLG9uOntjbGljazpzY3JvbGxOZXh0fX0sW2goImkiLHtjbGFzczoiZWwtaWNvbi1hcnJvdy1yaWdodCJ9KV0pXTpudWxsLHRhYnM9dGhpcy5fbChwYW5lcyxmdW5jdGlvbihwYW5lLGluZGV4KXt2YXIgX3JlZix0YWJOYW1lPXBhbmUubmFtZXx8cGFuZS5pbmRleHx8aW5kZXgsY2xvc2FibGU9cGFuZS5pc0Nsb3NhYmxlfHxlZGl0YWJsZTtwYW5lLmluZGV4PSIiK2luZGV4O3ZhciBidG5DbG9zZT1jbG9zYWJsZT9oKCJzcGFuIix7Y2xhc3M6ImVsLWljb24tY2xvc2UiLG9uOntjbGljazpmdW5jdGlvbihldil7b25UYWJSZW1vdmUocGFuZSxldil9fX0pOm51bGwsdGFiTGFiZWxDb250ZW50PXBhbmUuJHNsb3RzLmxhYmVsfHxwYW5lLmxhYmVsLHRhYmluZGV4PXBhbmUuYWN0aXZlPzA6LTE7cmV0dXJuIGgoImRpdiIse2NsYXNzOihfcmVmPXsiZWwtdGFic19faXRlbSI6ITB9LF9yZWZbImlzLSIrX3RoaXMzLnJvb3RUYWJzLnRhYlBvc2l0aW9uXT0hMCxfcmVmWyJpcy1hY3RpdmUiXT1wYW5lLmFjdGl2ZSxfcmVmWyJpcy1kaXNhYmxlZCJdPXBhbmUuZGlzYWJsZWQsX3JlZlsiaXMtY2xvc2FibGUiXT1jbG9zYWJsZSxfcmVmWyJpcy1mb2N1cyJdPV90aGlzMy5pc0ZvY3VzLF9yZWYpLGF0dHJzOntpZDoidGFiLSIrdGFiTmFtZSwiYXJpYS1jb250cm9scyI6InBhbmUtIit0YWJOYW1lLHJvbGU6InRhYiIsImFyaWEtc2VsZWN0ZWQiOnBhbmUuYWN0aXZlLHRhYmluZGV4OnRhYmluZGV4fSxrZXk6InRhYi0iK3RhYk5hbWUscmVmOiJ0YWJzIixyZWZJbkZvcjohMCxvbjp7Zm9jdXM6ZnVuY3Rpb24oKXtzZXRGb2N1cygpfSxibHVyOmZ1bmN0aW9uKCl7cmVtb3ZlRm9jdXMoKX0sY2xpY2s6ZnVuY3Rpb24oZXYpe3JlbW92ZUZvY3VzKCksb25UYWJDbGljayhwYW5lLHRhYk5hbWUsZXYpfSxrZXlkb3duOmZ1bmN0aW9uKGV2KXshY2xvc2FibGV8fDQ2IT09ZXYua2V5Q29kZSYmOCE9PWV2LmtleUNvZGV8fG9uVGFiUmVtb3ZlKHBhbmUsZXYpfX19LFt0YWJMYWJlbENvbnRlbnQsYnRuQ2xvc2VdKX0pO3JldHVybiBoKCJkaXYiLHtjbGFzczpbImVsLXRhYnNfX25hdi13cmFwIixzY3JvbGxhYmxlPyJpcy1zY3JvbGxhYmxlIjoiIiwiaXMtIit0aGlzLnJvb3RUYWJzLnRhYlBvc2l0aW9uXX0sW3Njcm9sbEJ0bixoKCJkaXYiLHtjbGFzczpbImVsLXRhYnNfX25hdi1zY3JvbGwiXSxyZWY6Im5hdlNjcm9sbCJ9LFtoKCJkaXYiLHtjbGFzczpbImVsLXRhYnNfX25hdiIsImlzLSIrdGhpcy5yb290VGFicy50YWJQb3NpdGlvbixzdHJldGNoJiYtMSE9PVsidG9wIiwiYm90dG9tIl0uaW5kZXhPZih0aGlzLnJvb3RUYWJzLnRhYlBvc2l0aW9uKT8iaXMtc3RyZXRjaCI6IiJdLHJlZjoibmF2IixzdHlsZTpuYXZTdHlsZSxhdHRyczp7cm9sZToidGFibGlzdCJ9LG9uOntrZXlkb3duOmNoYW5nZVRhYn19LFt0eXBlP251bGw6aCgidGFiLWJhciIse2F0dHJzOnt0YWJzOnBhbmVzfX0pLHRhYnNdKV0pXSl9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM0PXRoaXM7T2JqZWN0KHJlc2l6ZV9ldmVudF8uYWRkUmVzaXplTGlzdGVuZXIpKHRoaXMuJGVsLHRoaXMudXBkYXRlKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIix0aGlzLnZpc2liaWxpdHlDaGFuZ2VIYW5kbGVyKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy53aW5kb3dCbHVySGFuZGxlciksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLndpbmRvd0ZvY3VzSGFuZGxlciksc2V0VGltZW91dChmdW5jdGlvbigpe190aGlzNC5zY3JvbGxUb0FjdGl2ZVRhYigpfSwwKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuJGVsJiZ0aGlzLnVwZGF0ZSYmT2JqZWN0KHJlc2l6ZV9ldmVudF8ucmVtb3ZlUmVzaXplTGlzdGVuZXIpKHRoaXMuJGVsLHRoaXMudXBkYXRlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIix0aGlzLnZpc2liaWxpdHlDaGFuZ2VIYW5kbGVyKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy53aW5kb3dCbHVySGFuZGxlciksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLndpbmRvd0ZvY3VzSGFuZGxlcil9fSx2b2lkIDAsdm9pZCAwLCExLG51bGwsbnVsbCxudWxsKTt0YWJfbmF2X2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvdGFicy9zcmMvdGFiLW5hdi52dWUiO3ZhciB0YWJzX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsVGFicyIsY29tcG9uZW50czp7VGFiTmF2OnRhYl9uYXZfY29tcG9uZW50LmV4cG9ydHN9LHByb3BzOnt0eXBlOlN0cmluZyxhY3RpdmVOYW1lOlN0cmluZyxjbG9zYWJsZTpCb29sZWFuLGFkZGFibGU6Qm9vbGVhbix2YWx1ZTp7fSxlZGl0YWJsZTpCb29sZWFuLHRhYlBvc2l0aW9uOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJ0b3AifSxiZWZvcmVMZWF2ZTpGdW5jdGlvbixzdHJldGNoOkJvb2xlYW59LHByb3ZpZGU6ZnVuY3Rpb24oKXtyZXR1cm57cm9vdFRhYnM6dGhpc319LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57Y3VycmVudE5hbWU6dGhpcy52YWx1ZXx8dGhpcy5hY3RpdmVOYW1lLHBhbmVzOltdfX0sd2F0Y2g6e2FjdGl2ZU5hbWU6ZnVuY3Rpb24odmFsdWUpe3RoaXMuc2V0Q3VycmVudE5hbWUodmFsdWUpfSx2YWx1ZTpmdW5jdGlvbihfdmFsdWUpe3RoaXMuc2V0Q3VycmVudE5hbWUoX3ZhbHVlKX0sY3VycmVudE5hbWU6ZnVuY3Rpb24odmFsdWUpe3ZhciBfdGhpcz10aGlzO3RoaXMuJHJlZnMubmF2JiZ0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzLiRyZWZzLm5hdi4kbmV4dFRpY2soZnVuY3Rpb24oXyl7X3RoaXMuJHJlZnMubmF2LnNjcm9sbFRvQWN0aXZlVGFiKCl9KX0pfX0sbWV0aG9kczp7Y2FsY1BhbmVJbnN0YW5jZXM6ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXM7aWYodGhpcy4kc2xvdHMuZGVmYXVsdCl7dmFyIHBhbmVzPXRoaXMuJHNsb3RzLmRlZmF1bHQuZmlsdGVyKGZ1bmN0aW9uKHZub2RlKXtyZXR1cm4gdm5vZGUudGFnJiZ2bm9kZS5jb21wb25lbnRPcHRpb25zJiYiRWxUYWJQYW5lIj09PXZub2RlLmNvbXBvbmVudE9wdGlvbnMuQ3Rvci5vcHRpb25zLm5hbWV9KS5tYXAoZnVuY3Rpb24oX3JlZil7cmV0dXJuIF9yZWYuY29tcG9uZW50SW5zdGFuY2V9KTtwYW5lcy5sZW5ndGg9PT10aGlzLnBhbmVzLmxlbmd0aCYmcGFuZXMuZXZlcnkoZnVuY3Rpb24ocGFuZSxpbmRleCl7cmV0dXJuIHBhbmU9PT1fdGhpczIucGFuZXNbaW5kZXhdfSl8fCh0aGlzLnBhbmVzPXBhbmVzKX1lbHNlIDAhPT10aGlzLnBhbmVzLmxlbmd0aCYmKHRoaXMucGFuZXM9W10pfSxoYW5kbGVUYWJDbGljazpmdW5jdGlvbih0YWIsdGFiTmFtZSxldmVudCl7dGFiLmRpc2FibGVkfHwodGhpcy5zZXRDdXJyZW50TmFtZSh0YWJOYW1lKSx0aGlzLiRlbWl0KCJ0YWItY2xpY2siLHRhYixldmVudCkpfSxoYW5kbGVUYWJSZW1vdmU6ZnVuY3Rpb24ocGFuZSxldil7cGFuZS5kaXNhYmxlZHx8KGV2LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuJGVtaXQoImVkaXQiLHBhbmUubmFtZSwicmVtb3ZlIiksdGhpcy4kZW1pdCgidGFiLXJlbW92ZSIscGFuZS5uYW1lKSl9LGhhbmRsZVRhYkFkZDpmdW5jdGlvbigpe3RoaXMuJGVtaXQoImVkaXQiLG51bGwsImFkZCIpLHRoaXMuJGVtaXQoInRhYi1hZGQiKX0sc2V0Q3VycmVudE5hbWU6ZnVuY3Rpb24odmFsdWUpe3ZhciBfdGhpczM9dGhpcyxjaGFuZ2VDdXJyZW50TmFtZT1mdW5jdGlvbigpe190aGlzMy5jdXJyZW50TmFtZT12YWx1ZSxfdGhpczMuJGVtaXQoImlucHV0Iix2YWx1ZSl9O2lmKHRoaXMuY3VycmVudE5hbWUhPT12YWx1ZSYmdGhpcy5iZWZvcmVMZWF2ZSl7dmFyIGJlZm9yZT10aGlzLmJlZm9yZUxlYXZlKHZhbHVlLHRoaXMuY3VycmVudE5hbWUpO2JlZm9yZSYmYmVmb3JlLnRoZW4/YmVmb3JlLnRoZW4oZnVuY3Rpb24oKXtjaGFuZ2VDdXJyZW50TmFtZSgpLF90aGlzMy4kcmVmcy5uYXYmJl90aGlzMy4kcmVmcy5uYXYucmVtb3ZlRm9jdXMoKX0pOiExIT09YmVmb3JlJiZjaGFuZ2VDdXJyZW50TmFtZSgpfWVsc2UgY2hhbmdlQ3VycmVudE5hbWUoKX19LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgX3JlZjIsdHlwZT10aGlzLnR5cGUsaGFuZGxlVGFiQ2xpY2s9dGhpcy5oYW5kbGVUYWJDbGljayxoYW5kbGVUYWJSZW1vdmU9dGhpcy5oYW5kbGVUYWJSZW1vdmUsaGFuZGxlVGFiQWRkPXRoaXMuaGFuZGxlVGFiQWRkLGN1cnJlbnROYW1lPXRoaXMuY3VycmVudE5hbWUscGFuZXM9dGhpcy5wYW5lcyxlZGl0YWJsZT10aGlzLmVkaXRhYmxlLGFkZGFibGU9dGhpcy5hZGRhYmxlLHRhYlBvc2l0aW9uPXRoaXMudGFiUG9zaXRpb24sc3RyZXRjaD10aGlzLnN0cmV0Y2gsaGVhZGVyPWgoImRpdiIse2NsYXNzOlsiZWwtdGFic19faGVhZGVyIiwiaXMtIit0YWJQb3NpdGlvbl19LFtlZGl0YWJsZXx8YWRkYWJsZT9oKCJzcGFuIix7Y2xhc3M6ImVsLXRhYnNfX25ldy10YWIiLG9uOntjbGljazpoYW5kbGVUYWJBZGQsa2V5ZG93bjpmdW5jdGlvbihldil7MTM9PT1ldi5rZXlDb2RlJiZoYW5kbGVUYWJBZGQoKX19LGF0dHJzOnt0YWJpbmRleDoiMCJ9fSxbaCgiaSIse2NsYXNzOiJlbC1pY29uLXBsdXMifSldKTpudWxsLGgoInRhYi1uYXYiLHtwcm9wczp7Y3VycmVudE5hbWU6Y3VycmVudE5hbWUsb25UYWJDbGljazpoYW5kbGVUYWJDbGljayxvblRhYlJlbW92ZTpoYW5kbGVUYWJSZW1vdmUsZWRpdGFibGU6ZWRpdGFibGUsdHlwZTp0eXBlLHBhbmVzOnBhbmVzLHN0cmV0Y2g6c3RyZXRjaH0scmVmOiJuYXYifSldKSxwYW5lbHM9aCgiZGl2Iix7Y2xhc3M6ImVsLXRhYnNfX2NvbnRlbnQifSxbdGhpcy4kc2xvdHMuZGVmYXVsdF0pO3JldHVybiBoKCJkaXYiLHtjbGFzczooX3JlZjI9eyJlbC10YWJzIjohMCwiZWwtdGFicy0tY2FyZCI6ImNhcmQiPT09dHlwZX0sX3JlZjJbImVsLXRhYnMtLSIrdGFiUG9zaXRpb25dPSEwLF9yZWYyWyJlbC10YWJzLS1ib3JkZXItY2FyZCJdPSJib3JkZXItY2FyZCI9PT10eXBlLF9yZWYyKX0sWyJib3R0b20iIT09dGFiUG9zaXRpb24/W2hlYWRlcixwYW5lbHNdOltwYW5lbHMsaGVhZGVyXV0pfSxjcmVhdGVkOmZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50TmFtZXx8dGhpcy5zZXRDdXJyZW50TmFtZSgiMCIpfSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy5jYWxjUGFuZUluc3RhbmNlcygpfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dGhpcy5jYWxjUGFuZUluc3RhbmNlcygpfX0sdm9pZCAwLHZvaWQgMCwhMSxudWxsLG51bGwsbnVsbCk7dGFic19jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3RhYnMvc3JjL3RhYnMudnVlIjt2YXIgdGFicz10YWJzX2NvbXBvbmVudC5leHBvcnRzO3RhYnMuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQodGFicy5uYW1lLHRhYnMpfTt2YXIgcGFja2FnZXNfdGFicz10YWJzLHRhYl9wYW5ldnVlX3R5cGVfdGVtcGxhdGVfaWRfOTE0NWEwNzBfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiFfdm0ubGF6eXx8X3ZtLmxvYWRlZHx8X3ZtLmFjdGl2ZT9fYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLmFjdGl2ZSxleHByZXNzaW9uOiJhY3RpdmUifV0sc3RhdGljQ2xhc3M6ImVsLXRhYi1wYW5lIixhdHRyczp7cm9sZToidGFicGFuZWwiLCJhcmlhLWhpZGRlbiI6IV92bS5hY3RpdmUsaWQ6InBhbmUtIitfdm0ucGFuZU5hbWUsImFyaWEtbGFiZWxsZWRieSI6InRhYi0iK192bS5wYW5lTmFtZX19LFtfdm0uX3QoImRlZmF1bHQiKV0sMik6X3ZtLl9lKCl9O3RhYl9wYW5ldnVlX3R5cGVfdGVtcGxhdGVfaWRfOTE0NWEwNzBfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHRhYl9wYW5lX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsVGFiUGFuZSIsY29tcG9uZW50TmFtZToiRWxUYWJQYW5lIixwcm9wczp7bGFiZWw6U3RyaW5nLGxhYmVsQ29udGVudDpGdW5jdGlvbixuYW1lOlN0cmluZyxjbG9zYWJsZTpCb29sZWFuLGRpc2FibGVkOkJvb2xlYW4sbGF6eTpCb29sZWFufSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2luZGV4Om51bGwsbG9hZGVkOiExfX0sY29tcHV0ZWQ6e2lzQ2xvc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9zYWJsZXx8dGhpcy4kcGFyZW50LmNsb3NhYmxlfSxhY3RpdmU6ZnVuY3Rpb24oKXt2YXIgYWN0aXZlPXRoaXMuJHBhcmVudC5jdXJyZW50TmFtZT09PSh0aGlzLm5hbWV8fHRoaXMuaW5kZXgpO3JldHVybiBhY3RpdmUmJih0aGlzLmxvYWRlZD0hMCksYWN0aXZlfSxwYW5lTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWV8fHRoaXMuaW5kZXh9fSx3YXRjaDp7bGFiZWw6ZnVuY3Rpb24oKXt0aGlzLiRwYXJlbnQuJGZvcmNlVXBkYXRlKCl9fX0sdGFiX3BhbmV2dWVfdHlwZV90ZW1wbGF0ZV9pZF85MTQ1YTA3MF9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3RhYl9wYW5lX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvdGFicy9zcmMvdGFiLXBhbmUudnVlIjt2YXIgdGFiX3BhbmU9dGFiX3BhbmVfY29tcG9uZW50LmV4cG9ydHM7dGFiX3BhbmUuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQodGFiX3BhbmUubmFtZSx0YWJfcGFuZSl9O3ZhciBwYWNrYWdlc190YWJfcGFuZT10YWJfcGFuZSx0YWdfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxUYWciLHByb3BzOnt0ZXh0OlN0cmluZyxjbG9zYWJsZTpCb29sZWFuLHR5cGU6U3RyaW5nLGhpdDpCb29sZWFuLGRpc2FibGVUcmFuc2l0aW9uczpCb29sZWFuLGNvbG9yOlN0cmluZyxzaXplOlN0cmluZ30sbWV0aG9kczp7aGFuZGxlQ2xvc2U6ZnVuY3Rpb24oZXZlbnQpe2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuJGVtaXQoImNsb3NlIixldmVudCl9LGhhbmRsZUNsaWNrOmZ1bmN0aW9uKGV2ZW50KXtldmVudC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLiRlbWl0KCJjbGljayIsZXZlbnQpfX0sY29tcHV0ZWQ6e3RhZ1NpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaXplfHwodGhpcy4kRUxFTUVOVHx8e30pLnNpemV9fSxyZW5kZXI6ZnVuY3Rpb24oaCl7dmFyIHRhZ0VsPWgoInNwYW4iLHtjbGFzczpbImVsLXRhZyIsdGhpcy50eXBlPyJlbC10YWctLSIrdGhpcy50eXBlOiIiLHRoaXMudGFnU2l6ZT8iZWwtdGFnLS0iK3RoaXMudGFnU2l6ZToiIix7ImlzLWhpdCI6dGhpcy5oaXR9XSxzdHlsZTp7YmFja2dyb3VuZENvbG9yOnRoaXMuY29sb3J9LG9uOntjbGljazp0aGlzLmhhbmRsZUNsaWNrfX0sW3RoaXMuJHNsb3RzLmRlZmF1bHQsdGhpcy5jbG9zYWJsZSYmaCgiaSIse2NsYXNzOiJlbC10YWdfX2Nsb3NlIGVsLWljb24tY2xvc2UiLG9uOntjbGljazp0aGlzLmhhbmRsZUNsb3NlfX0pXSk7cmV0dXJuIHRoaXMuZGlzYWJsZVRyYW5zaXRpb25zP3RhZ0VsOmgoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToiZWwtem9vbS1pbi1jZW50ZXIifX0sW3RhZ0VsXSl9fSx2b2lkIDAsdm9pZCAwLCExLG51bGwsbnVsbCxudWxsKTt0YWdfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy90YWcvc3JjL3RhZy52dWUiO3ZhciB0YWc9dGFnX2NvbXBvbmVudC5leHBvcnRzO3RhZy5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudCh0YWcubmFtZSx0YWcpfTt2YXIgcGFja2FnZXNfdGFnPXRhZyx0cmVldnVlX3R5cGVfdGVtcGxhdGVfaWRfNTQ3NTc1YTZfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRyZWUiLGNsYXNzOnsiZWwtdHJlZS0taGlnaGxpZ2h0LWN1cnJlbnQiOl92bS5oaWdobGlnaHRDdXJyZW50LCJpcy1kcmFnZ2luZyI6ISFfdm0uZHJhZ1N0YXRlLmRyYWdnaW5nTm9kZSwiaXMtZHJvcC1ub3QtYWxsb3ciOiFfdm0uZHJhZ1N0YXRlLmFsbG93RHJvcCwiaXMtZHJvcC1pbm5lciI6ImlubmVyIj09PV92bS5kcmFnU3RhdGUuZHJvcFR5cGV9LGF0dHJzOntyb2xlOiJ0cmVlIn19LFtfdm0uX2woX3ZtLnJvb3QuY2hpbGROb2RlcyxmdW5jdGlvbihjaGlsZCl7cmV0dXJuIF9jKCJlbC10cmVlLW5vZGUiLHtrZXk6X3ZtLmdldE5vZGVLZXkoY2hpbGQpLGF0dHJzOntub2RlOmNoaWxkLHByb3BzOl92bS5wcm9wcywicmVuZGVyLWFmdGVyLWV4cGFuZCI6X3ZtLnJlbmRlckFmdGVyRXhwYW5kLCJzaG93LWNoZWNrYm94Ijpfdm0uc2hvd0NoZWNrYm94LCJyZW5kZXItY29udGVudCI6X3ZtLnJlbmRlckNvbnRlbnR9LG9uOnsibm9kZS1leHBhbmQiOl92bS5oYW5kbGVOb2RlRXhwYW5kfX0pfSksX3ZtLmlzRW1wdHk/X2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10cmVlX19lbXB0eS1ibG9jayJ9LFtfYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC10cmVlX19lbXB0eS10ZXh0In0sW192bS5fdihfdm0uX3MoX3ZtLmVtcHR5VGV4dCkpXSldKTpfdm0uX2UoKSxfYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLmRyYWdTdGF0ZS5zaG93RHJvcEluZGljYXRvcixleHByZXNzaW9uOiJkcmFnU3RhdGUuc2hvd0Ryb3BJbmRpY2F0b3IifV0scmVmOiJkcm9wSW5kaWNhdG9yIixzdGF0aWNDbGFzczoiZWwtdHJlZV9fZHJvcC1pbmRpY2F0b3IifSldLDIpfTt0cmVldnVlX3R5cGVfdGVtcGxhdGVfaWRfNTQ3NTc1YTZfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIE5PREVfS0VZPSIkdHJlZU5vZGVJZCIsbWFya05vZGVEYXRhPWZ1bmN0aW9uKG5vZGUsZGF0YSl7ZGF0YSYmIWRhdGFbTk9ERV9LRVldJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZGF0YSxOT0RFX0tFWSx7dmFsdWU6bm9kZS5pZCxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMSx3cml0YWJsZTohMX0pfSx1dGlsX2dldE5vZGVLZXk9ZnVuY3Rpb24oa2V5LGRhdGEpe3JldHVybiBrZXk/ZGF0YVtrZXldOmRhdGFbTk9ERV9LRVldfSxfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHwhMSxkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gZGVzY3JpcHRvciYmKGRlc2NyaXB0b3Iud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcil9fXJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtyZXR1cm4gcHJvdG9Qcm9wcyYmZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyksc3RhdGljUHJvcHMmJmRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpLENvbnN0cnVjdG9yfX0oKTt2YXIgZ2V0Q2hpbGRTdGF0ZT1mdW5jdGlvbihub2RlKXtmb3IodmFyIGFsbD0hMCxub25lPSEwLGFsbFdpdGhvdXREaXNhYmxlPSEwLGk9MCxqPW5vZGUubGVuZ3RoO2k8ajtpKyspe3ZhciBuPW5vZGVbaV07KCEwIT09bi5jaGVja2VkfHxuLmluZGV0ZXJtaW5hdGUpJiYoYWxsPSExLG4uZGlzYWJsZWR8fChhbGxXaXRob3V0RGlzYWJsZT0hMSkpLCghMSE9PW4uY2hlY2tlZHx8bi5pbmRldGVybWluYXRlKSYmKG5vbmU9ITEpfXJldHVybnthbGw6YWxsLG5vbmU6bm9uZSxhbGxXaXRob3V0RGlzYWJsZTphbGxXaXRob3V0RGlzYWJsZSxoYWxmOiFhbGwmJiFub25lfX0scmVJbml0Q2hlY2tlZD1mdW5jdGlvbiByZUluaXRDaGVja2VkKG5vZGUpe2lmKDAhPT1ub2RlLmNoaWxkTm9kZXMubGVuZ3RoKXt2YXIgX2dldENoaWxkU3RhdGU9Z2V0Q2hpbGRTdGF0ZShub2RlLmNoaWxkTm9kZXMpLGFsbD1fZ2V0Q2hpbGRTdGF0ZS5hbGwsbm9uZT1fZ2V0Q2hpbGRTdGF0ZS5ub25lLGhhbGY9X2dldENoaWxkU3RhdGUuaGFsZjthbGw/KG5vZGUuY2hlY2tlZD0hMCxub2RlLmluZGV0ZXJtaW5hdGU9ITEpOmhhbGY/KG5vZGUuY2hlY2tlZD0hMSxub2RlLmluZGV0ZXJtaW5hdGU9ITApOm5vbmUmJihub2RlLmNoZWNrZWQ9ITEsbm9kZS5pbmRldGVybWluYXRlPSExKTt2YXIgcGFyZW50PW5vZGUucGFyZW50O3BhcmVudCYmMCE9PXBhcmVudC5sZXZlbCYmKG5vZGUuc3RvcmUuY2hlY2tTdHJpY3RseXx8cmVJbml0Q2hlY2tlZChwYXJlbnQpKX19LGdldFByb3BlcnR5RnJvbURhdGE9ZnVuY3Rpb24obm9kZSxwcm9wKXt2YXIgcHJvcHM9bm9kZS5zdG9yZS5wcm9wcyxkYXRhPW5vZGUuZGF0YXx8e30sY29uZmlnPXByb3BzW3Byb3BdO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBjb25maWcpcmV0dXJuIGNvbmZpZyhkYXRhLG5vZGUpO2lmKCJzdHJpbmciPT10eXBlb2YgY29uZmlnKXJldHVybiBkYXRhW2NvbmZpZ107aWYodm9pZCAwPT09Y29uZmlnKXt2YXIgZGF0YVByb3A9ZGF0YVtwcm9wXTtyZXR1cm4gdm9pZCAwPT09ZGF0YVByb3A/IiI6ZGF0YVByb3B9fSxub2RlSWRTZWVkPTAsbW9kZWxfbm9kZT1mdW5jdGlvbigpe2Z1bmN0aW9uIE5vZGUob3B0aW9ucyl7Zm9yKHZhciBuYW1lIGluIGZ1bmN0aW9uKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfSh0aGlzLE5vZGUpLHRoaXMuaWQ9bm9kZUlkU2VlZCsrLHRoaXMudGV4dD1udWxsLHRoaXMuY2hlY2tlZD0hMSx0aGlzLmluZGV0ZXJtaW5hdGU9ITEsdGhpcy5kYXRhPW51bGwsdGhpcy5leHBhbmRlZD0hMSx0aGlzLnBhcmVudD1udWxsLHRoaXMudmlzaWJsZT0hMCxvcHRpb25zKW9wdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkmJih0aGlzW25hbWVdPW9wdGlvbnNbbmFtZV0pO3RoaXMubGV2ZWw9MCx0aGlzLmxvYWRlZD0hMSx0aGlzLmNoaWxkTm9kZXM9W10sdGhpcy5sb2FkaW5nPSExLHRoaXMucGFyZW50JiYodGhpcy5sZXZlbD10aGlzLnBhcmVudC5sZXZlbCsxKTt2YXIgc3RvcmU9dGhpcy5zdG9yZTtpZighc3RvcmUpdGhyb3cgbmV3IEVycm9yKCJbTm9kZV1zdG9yZSBpcyByZXF1aXJlZCEiKTtzdG9yZS5yZWdpc3Rlck5vZGUodGhpcyk7dmFyIHByb3BzPXN0b3JlLnByb3BzO2lmKHByb3BzJiZ2b2lkIDAhPT1wcm9wcy5pc0xlYWYpe3ZhciBpc0xlYWY9Z2V0UHJvcGVydHlGcm9tRGF0YSh0aGlzLCJpc0xlYWYiKTsiYm9vbGVhbiI9PXR5cGVvZiBpc0xlYWYmJih0aGlzLmlzTGVhZkJ5VXNlcj1pc0xlYWYpfWlmKCEwIT09c3RvcmUubGF6eSYmdGhpcy5kYXRhPyh0aGlzLnNldERhdGEodGhpcy5kYXRhKSxzdG9yZS5kZWZhdWx0RXhwYW5kQWxsJiYodGhpcy5leHBhbmRlZD0hMCkpOjA8dGhpcy5sZXZlbCYmc3RvcmUubGF6eSYmc3RvcmUuZGVmYXVsdEV4cGFuZEFsbCYmdGhpcy5leHBhbmQoKSxBcnJheS5pc0FycmF5KHRoaXMuZGF0YSl8fG1hcmtOb2RlRGF0YSh0aGlzLHRoaXMuZGF0YSksdGhpcy5kYXRhKXt2YXIgZGVmYXVsdEV4cGFuZGVkS2V5cz1zdG9yZS5kZWZhdWx0RXhwYW5kZWRLZXlzLGtleT1zdG9yZS5rZXk7a2V5JiZkZWZhdWx0RXhwYW5kZWRLZXlzJiYtMSE9PWRlZmF1bHRFeHBhbmRlZEtleXMuaW5kZXhPZih0aGlzLmtleSkmJnRoaXMuZXhwYW5kKG51bGwsc3RvcmUuYXV0b0V4cGFuZFBhcmVudCksa2V5JiZ2b2lkIDAhPT1zdG9yZS5jdXJyZW50Tm9kZUtleSYmdGhpcy5rZXk9PT1zdG9yZS5jdXJyZW50Tm9kZUtleSYmKHN0b3JlLmN1cnJlbnROb2RlPXRoaXMpLHN0b3JlLmxhenkmJnN0b3JlLl9pbml0RGVmYXVsdENoZWNrZWROb2RlKHRoaXMpLHRoaXMudXBkYXRlTGVhZlN0YXRlKCl9fXJldHVybiBOb2RlLnByb3RvdHlwZS5zZXREYXRhPWZ1bmN0aW9uKGRhdGEpe0FycmF5LmlzQXJyYXkoZGF0YSl8fG1hcmtOb2RlRGF0YSh0aGlzLGRhdGEpLHRoaXMuZGF0YT1kYXRhLHRoaXMuY2hpbGROb2Rlcz1bXTtmb3IodmFyIGNoaWxkcmVuPXZvaWQgMCxpPTAsaj0oY2hpbGRyZW49MD09PXRoaXMubGV2ZWwmJnRoaXMuZGF0YSBpbnN0YW5jZW9mIEFycmF5P3RoaXMuZGF0YTpnZXRQcm9wZXJ0eUZyb21EYXRhKHRoaXMsImNoaWxkcmVuIil8fFtdKS5sZW5ndGg7aTxqO2krKyl0aGlzLmluc2VydENoaWxkKHtkYXRhOmNoaWxkcmVuW2ldfSl9LE5vZGUucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHRhcmdldCl7dmFyIGRlZXA9ISgxPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtyZXR1cm4gZnVuY3Rpb24gd2FsayhwYXJlbnQpe2Zvcih2YXIgY2hpbGRyZW49cGFyZW50LmNoaWxkTm9kZXN8fFtdLHJlc3VsdD0hMSxpPTAsaj1jaGlsZHJlbi5sZW5ndGg7aTxqO2krKyl7dmFyIGNoaWxkPWNoaWxkcmVuW2ldO2lmKGNoaWxkPT09dGFyZ2V0fHxkZWVwJiZ3YWxrKGNoaWxkKSl7cmVzdWx0PSEwO2JyZWFrfX1yZXR1cm4gcmVzdWx0fSh0aGlzKX0sTm9kZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dmFyIHBhcmVudD10aGlzLnBhcmVudDtwYXJlbnQmJnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKX0sTm9kZS5wcm90b3R5cGUuaW5zZXJ0Q2hpbGQ9ZnVuY3Rpb24oY2hpbGQsaW5kZXgsYmF0Y2gpe2lmKCFjaGlsZCl0aHJvdyBuZXcgRXJyb3IoImluc2VydENoaWxkIGVycm9yOiBjaGlsZCBpcyByZXF1aXJlZC4iKTtpZighKGNoaWxkIGluc3RhbmNlb2YgTm9kZSkpe2lmKCFiYXRjaCl7dmFyIGNoaWxkcmVuPXRoaXMuZ2V0Q2hpbGRyZW4oITApOy0xPT09Y2hpbGRyZW4uaW5kZXhPZihjaGlsZC5kYXRhKSYmKHZvaWQgMD09PWluZGV4fHxpbmRleDwwP2NoaWxkcmVuLnB1c2goY2hpbGQuZGF0YSk6Y2hpbGRyZW4uc3BsaWNlKGluZGV4LDAsY2hpbGQuZGF0YSkpfW1lcmdlX2RlZmF1bHQoKShjaGlsZCx7cGFyZW50OnRoaXMsc3RvcmU6dGhpcy5zdG9yZX0pLGNoaWxkPW5ldyBOb2RlKGNoaWxkKX1jaGlsZC5sZXZlbD10aGlzLmxldmVsKzEsdm9pZCAwPT09aW5kZXh8fGluZGV4PDA/dGhpcy5jaGlsZE5vZGVzLnB1c2goY2hpbGQpOnRoaXMuY2hpbGROb2Rlcy5zcGxpY2UoaW5kZXgsMCxjaGlsZCksdGhpcy51cGRhdGVMZWFmU3RhdGUoKX0sTm9kZS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlPWZ1bmN0aW9uKGNoaWxkLHJlZil7dmFyIGluZGV4PXZvaWQgMDtyZWYmJihpbmRleD10aGlzLmNoaWxkTm9kZXMuaW5kZXhPZihyZWYpKSx0aGlzLmluc2VydENoaWxkKGNoaWxkLGluZGV4KX0sTm9kZS5wcm90b3R5cGUuaW5zZXJ0QWZ0ZXI9ZnVuY3Rpb24oY2hpbGQscmVmKXt2YXIgaW5kZXg9dm9pZCAwO3JlZiYmLTEhPT0oaW5kZXg9dGhpcy5jaGlsZE5vZGVzLmluZGV4T2YocmVmKSkmJihpbmRleCs9MSksdGhpcy5pbnNlcnRDaGlsZChjaGlsZCxpbmRleCl9LE5vZGUucHJvdG90eXBlLnJlbW92ZUNoaWxkPWZ1bmN0aW9uKGNoaWxkKXt2YXIgY2hpbGRyZW49dGhpcy5nZXRDaGlsZHJlbigpfHxbXSxkYXRhSW5kZXg9Y2hpbGRyZW4uaW5kZXhPZihjaGlsZC5kYXRhKTstMTxkYXRhSW5kZXgmJmNoaWxkcmVuLnNwbGljZShkYXRhSW5kZXgsMSk7dmFyIGluZGV4PXRoaXMuY2hpbGROb2Rlcy5pbmRleE9mKGNoaWxkKTstMTxpbmRleCYmKHRoaXMuc3RvcmUmJnRoaXMuc3RvcmUuZGVyZWdpc3Rlck5vZGUoY2hpbGQpLGNoaWxkLnBhcmVudD1udWxsLHRoaXMuY2hpbGROb2Rlcy5zcGxpY2UoaW5kZXgsMSkpLHRoaXMudXBkYXRlTGVhZlN0YXRlKCl9LE5vZGUucHJvdG90eXBlLnJlbW92ZUNoaWxkQnlEYXRhPWZ1bmN0aW9uKGRhdGEpe2Zvcih2YXIgdGFyZ2V0Tm9kZT1udWxsLGk9MDtpPHRoaXMuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKWlmKHRoaXMuY2hpbGROb2Rlc1tpXS5kYXRhPT09ZGF0YSl7dGFyZ2V0Tm9kZT10aGlzLmNoaWxkTm9kZXNbaV07YnJlYWt9dGFyZ2V0Tm9kZSYmdGhpcy5yZW1vdmVDaGlsZCh0YXJnZXROb2RlKX0sTm9kZS5wcm90b3R5cGUuZXhwYW5kPWZ1bmN0aW9uKGNhbGxiYWNrLGV4cGFuZFBhcmVudCl7dmFyIF90aGlzPXRoaXMsZG9uZT1mdW5jdGlvbigpe2lmKGV4cGFuZFBhcmVudClmb3IodmFyIHBhcmVudD1fdGhpcy5wYXJlbnQ7MDxwYXJlbnQubGV2ZWw7KXBhcmVudC5leHBhbmRlZD0hMCxwYXJlbnQ9cGFyZW50LnBhcmVudDtfdGhpcy5leHBhbmRlZD0hMCxjYWxsYmFjayYmY2FsbGJhY2soKX07dGhpcy5zaG91bGRMb2FkRGF0YSgpP3RoaXMubG9hZERhdGEoZnVuY3Rpb24oZGF0YSl7ZGF0YSBpbnN0YW5jZW9mIEFycmF5JiYoX3RoaXMuY2hlY2tlZD9fdGhpcy5zZXRDaGVja2VkKCEwLCEwKTpfdGhpcy5zdG9yZS5jaGVja1N0cmljdGx5fHxyZUluaXRDaGVja2VkKF90aGlzKSxkb25lKCkpfSk6ZG9uZSgpfSxOb2RlLnByb3RvdHlwZS5kb0NyZWF0ZUNoaWxkcmVuPWZ1bmN0aW9uKGFycmF5KXt2YXIgX3RoaXMyPXRoaXMsZGVmYXVsdFByb3BzPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTthcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe190aGlzMi5pbnNlcnRDaGlsZChtZXJnZV9kZWZhdWx0KCkoe2RhdGE6aXRlbX0sZGVmYXVsdFByb3BzKSx2b2lkIDAsITApfSl9LE5vZGUucHJvdG90eXBlLmNvbGxhcHNlPWZ1bmN0aW9uKCl7dGhpcy5leHBhbmRlZD0hMX0sTm9kZS5wcm90b3R5cGUuc2hvdWxkTG9hZERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuc3RvcmUubGF6eSYmdGhpcy5zdG9yZS5sb2FkJiYhdGhpcy5sb2FkZWR9LE5vZGUucHJvdG90eXBlLnVwZGF0ZUxlYWZTdGF0ZT1mdW5jdGlvbigpe2lmKCEwIT09dGhpcy5zdG9yZS5sYXp5fHwhMD09PXRoaXMubG9hZGVkfHx2b2lkIDA9PT10aGlzLmlzTGVhZkJ5VXNlcil7dmFyIGNoaWxkTm9kZXM9dGhpcy5jaGlsZE5vZGVzOyF0aGlzLnN0b3JlLmxhenl8fCEwPT09dGhpcy5zdG9yZS5sYXp5JiYhMD09PXRoaXMubG9hZGVkP3RoaXMuaXNMZWFmPSFjaGlsZE5vZGVzfHwwPT09Y2hpbGROb2Rlcy5sZW5ndGg6dGhpcy5pc0xlYWY9ITF9ZWxzZSB0aGlzLmlzTGVhZj10aGlzLmlzTGVhZkJ5VXNlcn0sTm9kZS5wcm90b3R5cGUuc2V0Q2hlY2tlZD1mdW5jdGlvbih2YWx1ZSxkZWVwLHJlY3Vyc2lvbixwYXNzVmFsdWUpe3ZhciBfdGhpczM9dGhpcztpZih0aGlzLmluZGV0ZXJtaW5hdGU9ImhhbGYiPT09dmFsdWUsdGhpcy5jaGVja2VkPSEwPT09dmFsdWUsIXRoaXMuc3RvcmUuY2hlY2tTdHJpY3RseSl7aWYoIXRoaXMuc2hvdWxkTG9hZERhdGEoKXx8dGhpcy5zdG9yZS5jaGVja0Rlc2NlbmRhbnRzKXt2YXIgX2dldENoaWxkU3RhdGUyPWdldENoaWxkU3RhdGUodGhpcy5jaGlsZE5vZGVzKSxhbGw9X2dldENoaWxkU3RhdGUyLmFsbCxhbGxXaXRob3V0RGlzYWJsZT1fZ2V0Q2hpbGRTdGF0ZTIuYWxsV2l0aG91dERpc2FibGU7dGhpcy5pc0xlYWZ8fGFsbHx8IWFsbFdpdGhvdXREaXNhYmxlfHwodGhpcy5jaGVja2VkPSExLHZhbHVlPSExKTt2YXIgaGFuZGxlRGVzY2VuZGFudHM9ZnVuY3Rpb24oKXtpZihkZWVwKXtmb3IodmFyIGNoaWxkTm9kZXM9X3RoaXMzLmNoaWxkTm9kZXMsaT0wLGo9Y2hpbGROb2Rlcy5sZW5ndGg7aTxqO2krKyl7dmFyIGNoaWxkPWNoaWxkTm9kZXNbaV07cGFzc1ZhbHVlPXBhc3NWYWx1ZXx8ITEhPT12YWx1ZTt2YXIgaXNDaGVjaz1jaGlsZC5kaXNhYmxlZD9jaGlsZC5jaGVja2VkOnBhc3NWYWx1ZTtjaGlsZC5zZXRDaGVja2VkKGlzQ2hlY2ssZGVlcCwhMCxwYXNzVmFsdWUpfXZhciBfZ2V0Q2hpbGRTdGF0ZTM9Z2V0Q2hpbGRTdGF0ZShjaGlsZE5vZGVzKSxoYWxmPV9nZXRDaGlsZFN0YXRlMy5oYWxmLF9hbGw9X2dldENoaWxkU3RhdGUzLmFsbDtfYWxsfHwoX3RoaXMzLmNoZWNrZWQ9X2FsbCxfdGhpczMuaW5kZXRlcm1pbmF0ZT1oYWxmKX19O2lmKHRoaXMuc2hvdWxkTG9hZERhdGEoKSlyZXR1cm4gdm9pZCB0aGlzLmxvYWREYXRhKGZ1bmN0aW9uKCl7aGFuZGxlRGVzY2VuZGFudHMoKSxyZUluaXRDaGVja2VkKF90aGlzMyl9LHtjaGVja2VkOiExIT09dmFsdWV9KTtoYW5kbGVEZXNjZW5kYW50cygpfXZhciBwYXJlbnQ9dGhpcy5wYXJlbnQ7cGFyZW50JiYwIT09cGFyZW50LmxldmVsJiYocmVjdXJzaW9ufHxyZUluaXRDaGVja2VkKHBhcmVudCkpfX0sTm9kZS5wcm90b3R5cGUuZ2V0Q2hpbGRyZW49ZnVuY3Rpb24oKXt2YXIgZm9yY2VJbml0PTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07aWYoMD09PXRoaXMubGV2ZWwpcmV0dXJuIHRoaXMuZGF0YTt2YXIgZGF0YT10aGlzLmRhdGE7aWYoIWRhdGEpcmV0dXJuIG51bGw7dmFyIHByb3BzPXRoaXMuc3RvcmUucHJvcHMsY2hpbGRyZW49ImNoaWxkcmVuIjtyZXR1cm4gcHJvcHMmJihjaGlsZHJlbj1wcm9wcy5jaGlsZHJlbnx8ImNoaWxkcmVuIiksdm9pZCAwPT09ZGF0YVtjaGlsZHJlbl0mJihkYXRhW2NoaWxkcmVuXT1udWxsKSxmb3JjZUluaXQmJiFkYXRhW2NoaWxkcmVuXSYmKGRhdGFbY2hpbGRyZW5dPVtdKSxkYXRhW2NoaWxkcmVuXX0sTm9kZS5wcm90b3R5cGUudXBkYXRlQ2hpbGRyZW49ZnVuY3Rpb24oKXt2YXIgX3RoaXM0PXRoaXMsbmV3RGF0YT10aGlzLmdldENoaWxkcmVuKCl8fFtdLG9sZERhdGE9dGhpcy5jaGlsZE5vZGVzLm1hcChmdW5jdGlvbihub2RlKXtyZXR1cm4gbm9kZS5kYXRhfSksbmV3RGF0YU1hcD17fSxuZXdOb2Rlcz1bXTtuZXdEYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSxpbmRleCl7aXRlbVtOT0RFX0tFWV0/bmV3RGF0YU1hcFtpdGVtW05PREVfS0VZXV09e2luZGV4OmluZGV4LGRhdGE6aXRlbX06bmV3Tm9kZXMucHVzaCh7aW5kZXg6aW5kZXgsZGF0YTppdGVtfSl9KSx0aGlzLnN0b3JlLmxhenl8fG9sZERhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtuZXdEYXRhTWFwW2l0ZW1bTk9ERV9LRVldXXx8X3RoaXM0LnJlbW92ZUNoaWxkQnlEYXRhKGl0ZW0pfSksbmV3Tm9kZXMuZm9yRWFjaChmdW5jdGlvbihfcmVmKXt2YXIgaW5kZXg9X3JlZi5pbmRleCxkYXRhPV9yZWYuZGF0YTtfdGhpczQuaW5zZXJ0Q2hpbGQoe2RhdGE6ZGF0YX0saW5kZXgpfSksdGhpcy51cGRhdGVMZWFmU3RhdGUoKX0sTm9kZS5wcm90b3R5cGUubG9hZERhdGE9ZnVuY3Rpb24oY2FsbGJhY2spe3ZhciBfdGhpczU9dGhpcyxkZWZhdWx0UHJvcHM9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKCEwIT09dGhpcy5zdG9yZS5sYXp5fHwhdGhpcy5zdG9yZS5sb2FkfHx0aGlzLmxvYWRlZHx8dGhpcy5sb2FkaW5nJiYhT2JqZWN0LmtleXMoZGVmYXVsdFByb3BzKS5sZW5ndGgpY2FsbGJhY2smJmNhbGxiYWNrLmNhbGwodGhpcyk7ZWxzZXt0aGlzLmxvYWRpbmc9ITA7dGhpcy5zdG9yZS5sb2FkKHRoaXMsZnVuY3Rpb24oY2hpbGRyZW4pe190aGlzNS5sb2FkZWQ9ITAsX3RoaXM1LmxvYWRpbmc9ITEsX3RoaXM1LmNoaWxkTm9kZXM9W10sX3RoaXM1LmRvQ3JlYXRlQ2hpbGRyZW4oY2hpbGRyZW4sZGVmYXVsdFByb3BzKSxfdGhpczUudXBkYXRlTGVhZlN0YXRlKCkscmVJbml0Q2hlY2tlZChfdGhpczUpLGNhbGxiYWNrJiZjYWxsYmFjay5jYWxsKF90aGlzNSxjaGlsZHJlbil9KX19LF9jcmVhdGVDbGFzcyhOb2RlLFt7a2V5OiJsYWJlbCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGdldFByb3BlcnR5RnJvbURhdGEodGhpcywibGFiZWwiKX19LHtrZXk6ImtleSIsZ2V0OmZ1bmN0aW9uKCl7dmFyIG5vZGVLZXk9dGhpcy5zdG9yZS5rZXk7cmV0dXJuIHRoaXMuZGF0YT90aGlzLmRhdGFbbm9kZUtleV06bnVsbH19LHtrZXk6ImRpc2FibGVkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZ2V0UHJvcGVydHlGcm9tRGF0YSh0aGlzLCJkaXNhYmxlZCIpfX0se2tleToibmV4dFNpYmxpbmciLGdldDpmdW5jdGlvbigpe3ZhciBwYXJlbnQ9dGhpcy5wYXJlbnQ7aWYocGFyZW50KXt2YXIgaW5kZXg9cGFyZW50LmNoaWxkTm9kZXMuaW5kZXhPZih0aGlzKTtpZigtMTxpbmRleClyZXR1cm4gcGFyZW50LmNoaWxkTm9kZXNbaW5kZXgrMV19cmV0dXJuIG51bGx9fSx7a2V5OiJwcmV2aW91c1NpYmxpbmciLGdldDpmdW5jdGlvbigpe3ZhciBwYXJlbnQ9dGhpcy5wYXJlbnQ7aWYocGFyZW50KXt2YXIgaW5kZXg9cGFyZW50LmNoaWxkTm9kZXMuaW5kZXhPZih0aGlzKTtpZigtMTxpbmRleClyZXR1cm4gMDxpbmRleD9wYXJlbnQuY2hpbGROb2Rlc1tpbmRleC0xXTpudWxsfXJldHVybiBudWxsfX1dKSxOb2RlfSgpLHRyZWVfc3RvcmVfdHlwZW9mPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmp9OmZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBvYmp9O3ZhciB0cmVlX3N0b3JlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gVHJlZVN0b3JlKG9wdGlvbnMpe3ZhciBfdGhpcz10aGlzO2Zvcih2YXIgb3B0aW9uIGluIGZ1bmN0aW9uKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfSh0aGlzLFRyZWVTdG9yZSksdGhpcy5jdXJyZW50Tm9kZT1udWxsLHRoaXMuY3VycmVudE5vZGVLZXk9bnVsbCxvcHRpb25zKW9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uKSYmKHRoaXNbb3B0aW9uXT1vcHRpb25zW29wdGlvbl0pOyh0aGlzLm5vZGVzTWFwPXt9LHRoaXMucm9vdD1uZXcgbW9kZWxfbm9kZSh7ZGF0YTp0aGlzLmRhdGEsc3RvcmU6dGhpc30pLHRoaXMubGF6eSYmdGhpcy5sb2FkKT8oMCx0aGlzLmxvYWQpKHRoaXMucm9vdCxmdW5jdGlvbihkYXRhKXtfdGhpcy5yb290LmRvQ3JlYXRlQ2hpbGRyZW4oZGF0YSksX3RoaXMuX2luaXREZWZhdWx0Q2hlY2tlZE5vZGVzKCl9KTp0aGlzLl9pbml0RGVmYXVsdENoZWNrZWROb2RlcygpfXJldHVybiBUcmVlU3RvcmUucHJvdG90eXBlLmZpbHRlcj1mdW5jdGlvbih2YWx1ZSl7dmFyIGZpbHRlck5vZGVNZXRob2Q9dGhpcy5maWx0ZXJOb2RlTWV0aG9kLGxhenk9dGhpcy5sYXp5OyFmdW5jdGlvbiB0cmF2ZXJzZShub2RlKXt2YXIgY2hpbGROb2Rlcz1ub2RlLnJvb3Q/bm9kZS5yb290LmNoaWxkTm9kZXM6bm9kZS5jaGlsZE5vZGVzO2lmKGNoaWxkTm9kZXMuZm9yRWFjaChmdW5jdGlvbihjaGlsZCl7Y2hpbGQudmlzaWJsZT1maWx0ZXJOb2RlTWV0aG9kLmNhbGwoY2hpbGQsdmFsdWUsY2hpbGQuZGF0YSxjaGlsZCksdHJhdmVyc2UoY2hpbGQpfSksIW5vZGUudmlzaWJsZSYmY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciBhbGxIaWRkZW49ITA7Y2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKXtjaGlsZC52aXNpYmxlJiYoYWxsSGlkZGVuPSExKX0pLG5vZGUucm9vdD9ub2RlLnJvb3QudmlzaWJsZT0hMT09PWFsbEhpZGRlbjpub2RlLnZpc2libGU9ITE9PT1hbGxIaWRkZW59dmFsdWUmJighbm9kZS52aXNpYmxlfHxub2RlLmlzTGVhZnx8bGF6eXx8bm9kZS5leHBhbmQoKSl9KHRoaXMpfSxUcmVlU3RvcmUucHJvdG90eXBlLnNldERhdGE9ZnVuY3Rpb24obmV3VmFsKXtuZXdWYWwhPT10aGlzLnJvb3QuZGF0YT8odGhpcy5yb290LnNldERhdGEobmV3VmFsKSx0aGlzLl9pbml0RGVmYXVsdENoZWNrZWROb2RlcygpKTp0aGlzLnJvb3QudXBkYXRlQ2hpbGRyZW4oKX0sVHJlZVN0b3JlLnByb3RvdHlwZS5nZXROb2RlPWZ1bmN0aW9uKGRhdGEpe2lmKGRhdGEgaW5zdGFuY2VvZiBtb2RlbF9ub2RlKXJldHVybiBkYXRhO3ZhciBrZXk9Im9iamVjdCIhPT0odm9pZCAwPT09ZGF0YT8idW5kZWZpbmVkIjp0cmVlX3N0b3JlX3R5cGVvZihkYXRhKSk/ZGF0YTp1dGlsX2dldE5vZGVLZXkodGhpcy5rZXksZGF0YSk7cmV0dXJuIHRoaXMubm9kZXNNYXBba2V5XXx8bnVsbH0sVHJlZVN0b3JlLnByb3RvdHlwZS5pbnNlcnRCZWZvcmU9ZnVuY3Rpb24oZGF0YSxyZWZEYXRhKXt2YXIgcmVmTm9kZT10aGlzLmdldE5vZGUocmVmRGF0YSk7cmVmTm9kZS5wYXJlbnQuaW5zZXJ0QmVmb3JlKHtkYXRhOmRhdGF9LHJlZk5vZGUpfSxUcmVlU3RvcmUucHJvdG90eXBlLmluc2VydEFmdGVyPWZ1bmN0aW9uKGRhdGEscmVmRGF0YSl7dmFyIHJlZk5vZGU9dGhpcy5nZXROb2RlKHJlZkRhdGEpO3JlZk5vZGUucGFyZW50Lmluc2VydEFmdGVyKHtkYXRhOmRhdGF9LHJlZk5vZGUpfSxUcmVlU3RvcmUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihkYXRhKXt2YXIgbm9kZT10aGlzLmdldE5vZGUoZGF0YSk7bm9kZSYmbm9kZS5wYXJlbnQmJm5vZGUucGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpfSxUcmVlU3RvcmUucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbihkYXRhLHBhcmVudERhdGEpe3ZhciBwYXJlbnROb2RlPXBhcmVudERhdGE/dGhpcy5nZXROb2RlKHBhcmVudERhdGEpOnRoaXMucm9vdDtwYXJlbnROb2RlJiZwYXJlbnROb2RlLmluc2VydENoaWxkKHtkYXRhOmRhdGF9KX0sVHJlZVN0b3JlLnByb3RvdHlwZS5faW5pdERlZmF1bHRDaGVja2VkTm9kZXM9ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXMsZGVmYXVsdENoZWNrZWRLZXlzPXRoaXMuZGVmYXVsdENoZWNrZWRLZXlzfHxbXSxub2Rlc01hcD10aGlzLm5vZGVzTWFwO2RlZmF1bHRDaGVja2VkS2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGNoZWNrZWRLZXkpe3ZhciBub2RlPW5vZGVzTWFwW2NoZWNrZWRLZXldO25vZGUmJm5vZGUuc2V0Q2hlY2tlZCghMCwhX3RoaXMyLmNoZWNrU3RyaWN0bHkpfSl9LFRyZWVTdG9yZS5wcm90b3R5cGUuX2luaXREZWZhdWx0Q2hlY2tlZE5vZGU9ZnVuY3Rpb24obm9kZSl7LTEhPT0odGhpcy5kZWZhdWx0Q2hlY2tlZEtleXN8fFtdKS5pbmRleE9mKG5vZGUua2V5KSYmbm9kZS5zZXRDaGVja2VkKCEwLCF0aGlzLmNoZWNrU3RyaWN0bHkpfSxUcmVlU3RvcmUucHJvdG90eXBlLnNldERlZmF1bHRDaGVja2VkS2V5PWZ1bmN0aW9uKG5ld1ZhbCl7bmV3VmFsIT09dGhpcy5kZWZhdWx0Q2hlY2tlZEtleXMmJih0aGlzLmRlZmF1bHRDaGVja2VkS2V5cz1uZXdWYWwsdGhpcy5faW5pdERlZmF1bHRDaGVja2VkTm9kZXMoKSl9LFRyZWVTdG9yZS5wcm90b3R5cGUucmVnaXN0ZXJOb2RlPWZ1bmN0aW9uKG5vZGUpe3RoaXMua2V5JiZub2RlJiZub2RlLmRhdGEmJih2b2lkIDAhPT1ub2RlLmtleSYmKHRoaXMubm9kZXNNYXBbbm9kZS5rZXldPW5vZGUpKX0sVHJlZVN0b3JlLnByb3RvdHlwZS5kZXJlZ2lzdGVyTm9kZT1mdW5jdGlvbihub2RlKXt2YXIgX3RoaXMzPXRoaXM7dGhpcy5rZXkmJm5vZGUmJm5vZGUuZGF0YSYmKG5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKXtfdGhpczMuZGVyZWdpc3Rlck5vZGUoY2hpbGQpfSksZGVsZXRlIHRoaXMubm9kZXNNYXBbbm9kZS5rZXldKX0sVHJlZVN0b3JlLnByb3RvdHlwZS5nZXRDaGVja2VkTm9kZXM9ZnVuY3Rpb24oKXt2YXIgbGVhZk9ubHk9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXSxpbmNsdWRlSGFsZkNoZWNrZWQ9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxjaGVja2VkTm9kZXM9W107cmV0dXJuIGZ1bmN0aW9uIHRyYXZlcnNlKG5vZGUpeyhub2RlLnJvb3Q/bm9kZS5yb290LmNoaWxkTm9kZXM6bm9kZS5jaGlsZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKXsoY2hpbGQuY2hlY2tlZHx8aW5jbHVkZUhhbGZDaGVja2VkJiZjaGlsZC5pbmRldGVybWluYXRlKSYmKCFsZWFmT25seXx8bGVhZk9ubHkmJmNoaWxkLmlzTGVhZikmJmNoZWNrZWROb2Rlcy5wdXNoKGNoaWxkLmRhdGEpLHRyYXZlcnNlKGNoaWxkKX0pfSh0aGlzKSxjaGVja2VkTm9kZXN9LFRyZWVTdG9yZS5wcm90b3R5cGUuZ2V0Q2hlY2tlZEtleXM9ZnVuY3Rpb24oKXt2YXIgX3RoaXM0PXRoaXMsbGVhZk9ubHk9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5nZXRDaGVja2VkTm9kZXMobGVhZk9ubHkpLm1hcChmdW5jdGlvbihkYXRhKXtyZXR1cm4oZGF0YXx8e30pW190aGlzNC5rZXldfSl9LFRyZWVTdG9yZS5wcm90b3R5cGUuZ2V0SGFsZkNoZWNrZWROb2Rlcz1mdW5jdGlvbigpe3ZhciBub2Rlcz1bXTtyZXR1cm4gZnVuY3Rpb24gdHJhdmVyc2Uobm9kZSl7KG5vZGUucm9vdD9ub2RlLnJvb3QuY2hpbGROb2Rlczpub2RlLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpe2NoaWxkLmluZGV0ZXJtaW5hdGUmJm5vZGVzLnB1c2goY2hpbGQuZGF0YSksdHJhdmVyc2UoY2hpbGQpfSl9KHRoaXMpLG5vZGVzfSxUcmVlU3RvcmUucHJvdG90eXBlLmdldEhhbGZDaGVja2VkS2V5cz1mdW5jdGlvbigpe3ZhciBfdGhpczU9dGhpcztyZXR1cm4gdGhpcy5nZXRIYWxmQ2hlY2tlZE5vZGVzKCkubWFwKGZ1bmN0aW9uKGRhdGEpe3JldHVybihkYXRhfHx7fSlbX3RoaXM1LmtleV19KX0sVHJlZVN0b3JlLnByb3RvdHlwZS5fZ2V0QWxsTm9kZXM9ZnVuY3Rpb24oKXt2YXIgYWxsTm9kZXM9W10sbm9kZXNNYXA9dGhpcy5ub2Rlc01hcDtmb3IodmFyIG5vZGVLZXkgaW4gbm9kZXNNYXApbm9kZXNNYXAuaGFzT3duUHJvcGVydHkobm9kZUtleSkmJmFsbE5vZGVzLnB1c2gobm9kZXNNYXBbbm9kZUtleV0pO3JldHVybiBhbGxOb2Rlc30sVHJlZVN0b3JlLnByb3RvdHlwZS51cGRhdGVDaGlsZHJlbj1mdW5jdGlvbihrZXksZGF0YSl7dmFyIG5vZGU9dGhpcy5ub2Rlc01hcFtrZXldO2lmKG5vZGUpe2Zvcih2YXIgY2hpbGROb2Rlcz1ub2RlLmNoaWxkTm9kZXMsaT1jaGlsZE5vZGVzLmxlbmd0aC0xOzA8PWk7aS0tKXt2YXIgY2hpbGQ9Y2hpbGROb2Rlc1tpXTt0aGlzLnJlbW92ZShjaGlsZC5kYXRhKX1mb3IodmFyIF9pPTAsaj1kYXRhLmxlbmd0aDtfaTxqO19pKyspe3ZhciBfY2hpbGQ9ZGF0YVtfaV07dGhpcy5hcHBlbmQoX2NoaWxkLG5vZGUuZGF0YSl9fX0sVHJlZVN0b3JlLnByb3RvdHlwZS5fc2V0Q2hlY2tlZEtleXM9ZnVuY3Rpb24oa2V5KXt2YXIgbGVhZk9ubHk9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxjaGVja2VkS2V5cz1hcmd1bWVudHNbMl0sYWxsTm9kZXM9dGhpcy5fZ2V0QWxsTm9kZXMoKS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIubGV2ZWwtYS5sZXZlbH0pLGNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksa2V5cz1PYmplY3Qua2V5cyhjaGVja2VkS2V5cyk7YWxsTm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKXtyZXR1cm4gbm9kZS5zZXRDaGVja2VkKCExLCExKX0pO2Zvcih2YXIgaT0wLGo9YWxsTm9kZXMubGVuZ3RoO2k8ajtpKyspe3ZhciBub2RlPWFsbE5vZGVzW2ldLG5vZGVLZXk9bm9kZS5kYXRhW2tleV0udG9TdHJpbmcoKTtpZigtMTxrZXlzLmluZGV4T2Yobm9kZUtleSkpe2Zvcih2YXIgcGFyZW50PW5vZGUucGFyZW50O3BhcmVudCYmMDxwYXJlbnQubGV2ZWw7KWNhY2hlW3BhcmVudC5kYXRhW2tleV1dPSEwLHBhcmVudD1wYXJlbnQucGFyZW50O25vZGUuaXNMZWFmfHx0aGlzLmNoZWNrU3RyaWN0bHk/bm9kZS5zZXRDaGVja2VkKCEwLCExKToobm9kZS5zZXRDaGVja2VkKCEwLCEwKSxsZWFmT25seSYmZnVuY3Rpb24oKXtub2RlLnNldENoZWNrZWQoITEsITEpOyFmdW5jdGlvbiB0cmF2ZXJzZShub2RlKXtub2RlLmNoaWxkTm9kZXMuZm9yRWFjaChmdW5jdGlvbihjaGlsZCl7Y2hpbGQuaXNMZWFmfHxjaGlsZC5zZXRDaGVja2VkKCExLCExKSx0cmF2ZXJzZShjaGlsZCl9KX0obm9kZSl9KCkpfWVsc2Ugbm9kZS5jaGVja2VkJiYhY2FjaGVbbm9kZUtleV0mJm5vZGUuc2V0Q2hlY2tlZCghMSwhMSl9fSxUcmVlU3RvcmUucHJvdG90eXBlLnNldENoZWNrZWROb2Rlcz1mdW5jdGlvbihhcnJheSl7dmFyIGxlYWZPbmx5PTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0sa2V5PXRoaXMua2V5LGNoZWNrZWRLZXlzPXt9O2FycmF5LmZvckVhY2goZnVuY3Rpb24oaXRlbSl7Y2hlY2tlZEtleXNbKGl0ZW18fHt9KVtrZXldXT0hMH0pLHRoaXMuX3NldENoZWNrZWRLZXlzKGtleSxsZWFmT25seSxjaGVja2VkS2V5cyl9LFRyZWVTdG9yZS5wcm90b3R5cGUuc2V0Q2hlY2tlZEtleXM9ZnVuY3Rpb24oa2V5cyl7dmFyIGxlYWZPbmx5PTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV07dGhpcy5kZWZhdWx0Q2hlY2tlZEtleXM9a2V5czt2YXIga2V5PXRoaXMua2V5LGNoZWNrZWRLZXlzPXt9O2tleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe2NoZWNrZWRLZXlzW2tleV09ITB9KSx0aGlzLl9zZXRDaGVja2VkS2V5cyhrZXksbGVhZk9ubHksY2hlY2tlZEtleXMpfSxUcmVlU3RvcmUucHJvdG90eXBlLnNldERlZmF1bHRFeHBhbmRlZEtleXM9ZnVuY3Rpb24oa2V5cyl7dmFyIF90aGlzNj10aGlzO2tleXM9a2V5c3x8W10sKHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cz1rZXlzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7dmFyIG5vZGU9X3RoaXM2LmdldE5vZGUoa2V5KTtub2RlJiZub2RlLmV4cGFuZChudWxsLF90aGlzNi5hdXRvRXhwYW5kUGFyZW50KX0pfSxUcmVlU3RvcmUucHJvdG90eXBlLnNldENoZWNrZWQ9ZnVuY3Rpb24oZGF0YSxjaGVja2VkLGRlZXApe3ZhciBub2RlPXRoaXMuZ2V0Tm9kZShkYXRhKTtub2RlJiZub2RlLnNldENoZWNrZWQoISFjaGVja2VkLGRlZXApfSxUcmVlU3RvcmUucHJvdG90eXBlLmdldEN1cnJlbnROb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudE5vZGV9LFRyZWVTdG9yZS5wcm90b3R5cGUuc2V0Q3VycmVudE5vZGU9ZnVuY3Rpb24obm9kZSl7dGhpcy5jdXJyZW50Tm9kZT1ub2RlfSxUcmVlU3RvcmUucHJvdG90eXBlLnNldFVzZXJDdXJyZW50Tm9kZT1mdW5jdGlvbihub2RlKXt2YXIga2V5PW5vZGVbdGhpcy5rZXldLGN1cnJOb2RlPXRoaXMubm9kZXNNYXBba2V5XTt0aGlzLnNldEN1cnJlbnROb2RlKGN1cnJOb2RlKX0sVHJlZVN0b3JlLnByb3RvdHlwZS5zZXRDdXJyZW50Tm9kZUtleT1mdW5jdGlvbihrZXkpe2lmKG51bGwhPT1rZXkpe3ZhciBub2RlPXRoaXMuZ2V0Tm9kZShrZXkpO25vZGUmJih0aGlzLmN1cnJlbnROb2RlPW5vZGUpfWVsc2UgdGhpcy5jdXJyZW50Tm9kZT1udWxsfSxUcmVlU3RvcmV9KCksdHJlZV9ub2RldnVlX3R5cGVfdGVtcGxhdGVfaWRfM2JhM2VmMGVfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHRoaXMkMT10aGlzLF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLm5vZGUudmlzaWJsZSxleHByZXNzaW9uOiJub2RlLnZpc2libGUifV0scmVmOiJub2RlIixzdGF0aWNDbGFzczoiZWwtdHJlZS1ub2RlIixjbGFzczp7ImlzLWV4cGFuZGVkIjpfdm0uZXhwYW5kZWQsImlzLWN1cnJlbnQiOl92bS50cmVlLnN0b3JlLmN1cnJlbnROb2RlPT09X3ZtLm5vZGUsImlzLWhpZGRlbiI6IV92bS5ub2RlLnZpc2libGUsImlzLWZvY3VzYWJsZSI6IV92bS5ub2RlLmRpc2FibGVkLCJpcy1jaGVja2VkIjohX3ZtLm5vZGUuZGlzYWJsZWQmJl92bS5ub2RlLmNoZWNrZWR9LGF0dHJzOntyb2xlOiJ0cmVlaXRlbSIsdGFiaW5kZXg6Ii0xIiwiYXJpYS1leHBhbmRlZCI6X3ZtLmV4cGFuZGVkLCJhcmlhLWRpc2FibGVkIjpfdm0ubm9kZS5kaXNhYmxlZCwiYXJpYS1jaGVja2VkIjpfdm0ubm9kZS5jaGVja2VkLGRyYWdnYWJsZTpfdm0udHJlZS5kcmFnZ2FibGV9LG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe3JldHVybiAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksX3ZtLmhhbmRsZUNsaWNrKCRldmVudCl9LGNvbnRleHRtZW51OmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIHRoaXMkMS5oYW5kbGVDb250ZXh0TWVudSgkZXZlbnQpfSxkcmFnc3RhcnQ6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLF92bS5oYW5kbGVEcmFnU3RhcnQoJGV2ZW50KX0sZHJhZ292ZXI6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLF92bS5oYW5kbGVEcmFnT3ZlcigkZXZlbnQpfSxkcmFnZW5kOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuICRldmVudC5zdG9wUHJvcGFnYXRpb24oKSxfdm0uaGFuZGxlRHJhZ0VuZCgkZXZlbnQpfSxkcm9wOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuICRldmVudC5zdG9wUHJvcGFnYXRpb24oKSxfdm0uaGFuZGxlRHJvcCgkZXZlbnQpfX19LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRyZWUtbm9kZV9fY29udGVudCIsc3R5bGU6eyJwYWRkaW5nLWxlZnQiOihfdm0ubm9kZS5sZXZlbC0xKSpfdm0udHJlZS5pbmRlbnQrInB4In19LFtfYygic3BhbiIse2NsYXNzOlt7ImlzLWxlYWYiOl92bS5ub2RlLmlzTGVhZixleHBhbmRlZDohX3ZtLm5vZGUuaXNMZWFmJiZfdm0uZXhwYW5kZWR9LCJlbC10cmVlLW5vZGVfX2V4cGFuZC1pY29uIixfdm0udHJlZS5pY29uQ2xhc3M/X3ZtLnRyZWUuaWNvbkNsYXNzOiJlbC1pY29uLWNhcmV0LXJpZ2h0Il0sb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuICRldmVudC5zdG9wUHJvcGFnYXRpb24oKSxfdm0uaGFuZGxlRXhwYW5kSWNvbkNsaWNrKCRldmVudCl9fX0pLF92bS5zaG93Q2hlY2tib3g/X2MoImVsLWNoZWNrYm94Iix7YXR0cnM6e2luZGV0ZXJtaW5hdGU6X3ZtLm5vZGUuaW5kZXRlcm1pbmF0ZSxkaXNhYmxlZDohIV92bS5ub2RlLmRpc2FibGVkfSxvbjp7Y2hhbmdlOl92bS5oYW5kbGVDaGVja0NoYW5nZX0sbmF0aXZlT246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7JGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpfX0sbW9kZWw6e3ZhbHVlOl92bS5ub2RlLmNoZWNrZWQsY2FsbGJhY2s6ZnVuY3Rpb24oJCR2KXtfdm0uJHNldChfdm0ubm9kZSwiY2hlY2tlZCIsJCR2KX0sZXhwcmVzc2lvbjoibm9kZS5jaGVja2VkIn19KTpfdm0uX2UoKSxfdm0ubm9kZS5sb2FkaW5nP19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXRyZWUtbm9kZV9fbG9hZGluZy1pY29uIGVsLWljb24tbG9hZGluZyJ9KTpfdm0uX2UoKSxfYygibm9kZS1jb250ZW50Iix7YXR0cnM6e25vZGU6X3ZtLm5vZGV9fSldLDEpLF9jKCJlbC1jb2xsYXBzZS10cmFuc2l0aW9uIixbIV92bS5yZW5kZXJBZnRlckV4cGFuZHx8X3ZtLmNoaWxkTm9kZVJlbmRlcmVkP19jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0uZXhwYW5kZWQsZXhwcmVzc2lvbjoiZXhwYW5kZWQifV0sc3RhdGljQ2xhc3M6ImVsLXRyZWUtbm9kZV9fY2hpbGRyZW4iLGF0dHJzOntyb2xlOiJncm91cCIsImFyaWEtZXhwYW5kZWQiOl92bS5leHBhbmRlZH19LF92bS5fbChfdm0ubm9kZS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGNoaWxkKXtyZXR1cm4gX2MoImVsLXRyZWUtbm9kZSIse2tleTpfdm0uZ2V0Tm9kZUtleShjaGlsZCksYXR0cnM6eyJyZW5kZXItY29udGVudCI6X3ZtLnJlbmRlckNvbnRlbnQsInJlbmRlci1hZnRlci1leHBhbmQiOl92bS5yZW5kZXJBZnRlckV4cGFuZCwic2hvdy1jaGVja2JveCI6X3ZtLnNob3dDaGVja2JveCxub2RlOmNoaWxkfSxvbjp7Im5vZGUtZXhwYW5kIjpfdm0uaGFuZGxlQ2hpbGROb2RlRXhwYW5kfX0pfSksMSk6X3ZtLl9lKCldKV0sMSl9O3RyZWVfbm9kZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzNiYTNlZjBlX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciB0cmVlX25vZGVfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxUcmVlTm9kZSIsY29tcG9uZW50TmFtZToiRWxUcmVlTm9kZSIsbWl4aW5zOltlbWl0dGVyX2RlZmF1bHQuYV0scHJvcHM6e25vZGU6e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19LHByb3BzOnt9LHJlbmRlckNvbnRlbnQ6RnVuY3Rpb24scmVuZGVyQWZ0ZXJFeHBhbmQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxzaG93Q2hlY2tib3g6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfX0sY29tcG9uZW50czp7RWxDb2xsYXBzZVRyYW5zaXRpb246Y29sbGFwc2VfdHJhbnNpdGlvbl9kZWZhdWx0LmEsRWxDaGVja2JveDpjaGVja2JveF9kZWZhdWx0LmEsTm9kZUNvbnRlbnQ6e3Byb3BzOntub2RlOntyZXF1aXJlZDohMH19LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgcGFyZW50PXRoaXMuJHBhcmVudCx0cmVlPXBhcmVudC50cmVlLG5vZGU9dGhpcy5ub2RlLGRhdGE9bm9kZS5kYXRhLHN0b3JlPW5vZGUuc3RvcmU7cmV0dXJuIHBhcmVudC5yZW5kZXJDb250ZW50P3BhcmVudC5yZW5kZXJDb250ZW50LmNhbGwocGFyZW50Ll9yZW5kZXJQcm94eSxoLHtfc2VsZjp0cmVlLiR2bm9kZS5jb250ZXh0LG5vZGU6bm9kZSxkYXRhOmRhdGEsc3RvcmU6c3RvcmV9KTp0cmVlLiRzY29wZWRTbG90cy5kZWZhdWx0P3RyZWUuJHNjb3BlZFNsb3RzLmRlZmF1bHQoe25vZGU6bm9kZSxkYXRhOmRhdGF9KTpoKCJzcGFuIix7Y2xhc3M6ImVsLXRyZWUtbm9kZV9fbGFiZWwifSxbbm9kZS5sYWJlbF0pfX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dHJlZTpudWxsLGV4cGFuZGVkOiExLGNoaWxkTm9kZVJlbmRlcmVkOiExLG9sZENoZWNrZWQ6bnVsbCxvbGRJbmRldGVybWluYXRlOm51bGx9fSx3YXRjaDp7Im5vZGUuaW5kZXRlcm1pbmF0ZSI6ZnVuY3Rpb24odmFsKXt0aGlzLmhhbmRsZVNlbGVjdENoYW5nZSh0aGlzLm5vZGUuY2hlY2tlZCx2YWwpfSwibm9kZS5jaGVja2VkIjpmdW5jdGlvbih2YWwpe3RoaXMuaGFuZGxlU2VsZWN0Q2hhbmdlKHZhbCx0aGlzLm5vZGUuaW5kZXRlcm1pbmF0ZSl9LCJub2RlLmV4cGFuZGVkIjpmdW5jdGlvbih2YWwpe3ZhciBfdGhpcz10aGlzO3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7cmV0dXJuIF90aGlzLmV4cGFuZGVkPXZhbH0pLHZhbCYmKHRoaXMuY2hpbGROb2RlUmVuZGVyZWQ9ITApfX0sbWV0aG9kczp7Z2V0Tm9kZUtleTpmdW5jdGlvbihub2RlKXtyZXR1cm4gdXRpbF9nZXROb2RlS2V5KHRoaXMudHJlZS5ub2RlS2V5LG5vZGUuZGF0YSl9LGhhbmRsZVNlbGVjdENoYW5nZTpmdW5jdGlvbihjaGVja2VkLGluZGV0ZXJtaW5hdGUpe3RoaXMub2xkQ2hlY2tlZCE9PWNoZWNrZWQmJnRoaXMub2xkSW5kZXRlcm1pbmF0ZSE9PWluZGV0ZXJtaW5hdGUmJnRoaXMudHJlZS4kZW1pdCgiY2hlY2stY2hhbmdlIix0aGlzLm5vZGUuZGF0YSxjaGVja2VkLGluZGV0ZXJtaW5hdGUpLHRoaXMub2xkQ2hlY2tlZD1jaGVja2VkLHRoaXMuaW5kZXRlcm1pbmF0ZT1pbmRldGVybWluYXRlfSxoYW5kbGVDbGljazpmdW5jdGlvbigpe3ZhciBzdG9yZT10aGlzLnRyZWUuc3RvcmU7c3RvcmUuc2V0Q3VycmVudE5vZGUodGhpcy5ub2RlKSx0aGlzLnRyZWUuJGVtaXQoImN1cnJlbnQtY2hhbmdlIixzdG9yZS5jdXJyZW50Tm9kZT9zdG9yZS5jdXJyZW50Tm9kZS5kYXRhOm51bGwsc3RvcmUuY3VycmVudE5vZGUpLCh0aGlzLnRyZWUuY3VycmVudE5vZGU9dGhpcykudHJlZS5leHBhbmRPbkNsaWNrTm9kZSYmdGhpcy5oYW5kbGVFeHBhbmRJY29uQ2xpY2soKSx0aGlzLnRyZWUuY2hlY2tPbkNsaWNrTm9kZSYmIXRoaXMubm9kZS5kaXNhYmxlZCYmdGhpcy5oYW5kbGVDaGVja0NoYW5nZShudWxsLHt0YXJnZXQ6e2NoZWNrZWQ6IXRoaXMubm9kZS5jaGVja2VkfX0pLHRoaXMudHJlZS4kZW1pdCgibm9kZS1jbGljayIsdGhpcy5ub2RlLmRhdGEsdGhpcy5ub2RlLHRoaXMpfSxoYW5kbGVDb250ZXh0TWVudTpmdW5jdGlvbihldmVudCl7dGhpcy50cmVlLl9ldmVudHNbIm5vZGUtY29udGV4dG1lbnUiXSYmMDx0aGlzLnRyZWUuX2V2ZW50c1sibm9kZS1jb250ZXh0bWVudSJdLmxlbmd0aCYmKGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLGV2ZW50LnByZXZlbnREZWZhdWx0KCkpLHRoaXMudHJlZS4kZW1pdCgibm9kZS1jb250ZXh0bWVudSIsZXZlbnQsdGhpcy5ub2RlLmRhdGEsdGhpcy5ub2RlLHRoaXMpfSxoYW5kbGVFeHBhbmRJY29uQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLm5vZGUuaXNMZWFmfHwodGhpcy5leHBhbmRlZD8odGhpcy50cmVlLiRlbWl0KCJub2RlLWNvbGxhcHNlIix0aGlzLm5vZGUuZGF0YSx0aGlzLm5vZGUsdGhpcyksdGhpcy5ub2RlLmNvbGxhcHNlKCkpOih0aGlzLm5vZGUuZXhwYW5kKCksdGhpcy4kZW1pdCgibm9kZS1leHBhbmQiLHRoaXMubm9kZS5kYXRhLHRoaXMubm9kZSx0aGlzKSkpfSxoYW5kbGVDaGVja0NoYW5nZTpmdW5jdGlvbih2YWx1ZSxldil7dmFyIF90aGlzMj10aGlzO3RoaXMubm9kZS5zZXRDaGVja2VkKGV2LnRhcmdldC5jaGVja2VkLCF0aGlzLnRyZWUuY2hlY2tTdHJpY3RseSksdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXt2YXIgc3RvcmU9X3RoaXMyLnRyZWUuc3RvcmU7X3RoaXMyLnRyZWUuJGVtaXQoImNoZWNrIixfdGhpczIubm9kZS5kYXRhLHtjaGVja2VkTm9kZXM6c3RvcmUuZ2V0Q2hlY2tlZE5vZGVzKCksY2hlY2tlZEtleXM6c3RvcmUuZ2V0Q2hlY2tlZEtleXMoKSxoYWxmQ2hlY2tlZE5vZGVzOnN0b3JlLmdldEhhbGZDaGVja2VkTm9kZXMoKSxoYWxmQ2hlY2tlZEtleXM6c3RvcmUuZ2V0SGFsZkNoZWNrZWRLZXlzKCl9KX0pfSxoYW5kbGVDaGlsZE5vZGVFeHBhbmQ6ZnVuY3Rpb24obm9kZURhdGEsbm9kZSxpbnN0YW5jZSl7dGhpcy5icm9hZGNhc3QoIkVsVHJlZU5vZGUiLCJ0cmVlLW5vZGUtZXhwYW5kIixub2RlKSx0aGlzLnRyZWUuJGVtaXQoIm5vZGUtZXhwYW5kIixub2RlRGF0YSxub2RlLGluc3RhbmNlKX0saGFuZGxlRHJhZ1N0YXJ0OmZ1bmN0aW9uKGV2ZW50KXt0aGlzLnRyZWUuZHJhZ2dhYmxlJiZ0aGlzLnRyZWUuJGVtaXQoInRyZWUtbm9kZS1kcmFnLXN0YXJ0IixldmVudCx0aGlzKX0saGFuZGxlRHJhZ092ZXI6ZnVuY3Rpb24oZXZlbnQpe3RoaXMudHJlZS5kcmFnZ2FibGUmJih0aGlzLnRyZWUuJGVtaXQoInRyZWUtbm9kZS1kcmFnLW92ZXIiLGV2ZW50LHRoaXMpLGV2ZW50LnByZXZlbnREZWZhdWx0KCkpfSxoYW5kbGVEcm9wOmZ1bmN0aW9uKGV2ZW50KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpfSxoYW5kbGVEcmFnRW5kOmZ1bmN0aW9uKGV2ZW50KXt0aGlzLnRyZWUuZHJhZ2dhYmxlJiZ0aGlzLnRyZWUuJGVtaXQoInRyZWUtbm9kZS1kcmFnLWVuZCIsZXZlbnQsdGhpcyl9fSxjcmVhdGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzMz10aGlzLHBhcmVudD10aGlzLiRwYXJlbnQ7cGFyZW50LmlzVHJlZT90aGlzLnRyZWU9cGFyZW50OnRoaXMudHJlZT1wYXJlbnQudHJlZTt2YXIgdHJlZT10aGlzLnRyZWU7dHJlZXx8Y29uc29sZS53YXJuKCJDYW4gbm90IGZpbmQgbm9kZSdzIHRyZWUuIik7dmFyIGNoaWxkcmVuS2V5PSh0cmVlLnByb3BzfHx7fSkuY2hpbGRyZW58fCJjaGlsZHJlbiI7dGhpcy4kd2F0Y2goIm5vZGUuZGF0YS4iK2NoaWxkcmVuS2V5LGZ1bmN0aW9uKCl7X3RoaXMzLm5vZGUudXBkYXRlQ2hpbGRyZW4oKX0pLHRoaXMubm9kZS5leHBhbmRlZCYmKHRoaXMuZXhwYW5kZWQ9ITAsdGhpcy5jaGlsZE5vZGVSZW5kZXJlZD0hMCksdGhpcy50cmVlLmFjY29yZGlvbiYmdGhpcy4kb24oInRyZWUtbm9kZS1leHBhbmQiLGZ1bmN0aW9uKG5vZGUpe190aGlzMy5ub2RlIT09bm9kZSYmX3RoaXMzLm5vZGUuY29sbGFwc2UoKX0pfX0sdHJlZV9ub2RldnVlX3R5cGVfdGVtcGxhdGVfaWRfM2JhM2VmMGVfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTt0cmVlX25vZGVfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy90cmVlL3NyYy90cmVlLW5vZGUudnVlIjt2YXIgdHJlZV9ub2RlPXRyZWVfbm9kZV9jb21wb25lbnQuZXhwb3J0cyx0cmVlX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsVHJlZSIsbWl4aW5zOltlbWl0dGVyX2RlZmF1bHQuYV0sY29tcG9uZW50czp7RWxUcmVlTm9kZTp0cmVlX25vZGV9LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57c3RvcmU6bnVsbCxyb290Om51bGwsY3VycmVudE5vZGU6bnVsbCx0cmVlSXRlbXM6bnVsbCxjaGVja2JveEl0ZW1zOltdLGRyYWdTdGF0ZTp7c2hvd0Ryb3BJbmRpY2F0b3I6ITEsZHJhZ2dpbmdOb2RlOm51bGwsZHJvcE5vZGU6bnVsbCxhbGxvd0Ryb3A6ITB9fX0scHJvcHM6e2RhdGE6e3R5cGU6QXJyYXl9LGVtcHR5VGV4dDp7dHlwZTpTdHJpbmcsZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBPYmplY3QobGliX2xvY2FsZV8udCkoImVsLnRyZWUuZW1wdHlUZXh0Iil9fSxyZW5kZXJBZnRlckV4cGFuZDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LG5vZGVLZXk6U3RyaW5nLGNoZWNrU3RyaWN0bHk6Qm9vbGVhbixkZWZhdWx0RXhwYW5kQWxsOkJvb2xlYW4sZXhwYW5kT25DbGlja05vZGU6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxjaGVja09uQ2xpY2tOb2RlOkJvb2xlYW4sY2hlY2tEZXNjZW5kYW50czp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LGF1dG9FeHBhbmRQYXJlbnQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxkZWZhdWx0Q2hlY2tlZEtleXM6QXJyYXksZGVmYXVsdEV4cGFuZGVkS2V5czpBcnJheSxjdXJyZW50Tm9kZUtleTpbU3RyaW5nLE51bWJlcl0scmVuZGVyQ29udGVudDpGdW5jdGlvbixzaG93Q2hlY2tib3g6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxkcmFnZ2FibGU6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxhbGxvd0RyYWc6RnVuY3Rpb24sYWxsb3dEcm9wOkZ1bmN0aW9uLHByb3BzOntkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJue2NoaWxkcmVuOiJjaGlsZHJlbiIsbGFiZWw6ImxhYmVsIixkaXNhYmxlZDoiZGlzYWJsZWQifX19LGxhenk6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxoaWdobGlnaHRDdXJyZW50OkJvb2xlYW4sbG9hZDpGdW5jdGlvbixmaWx0ZXJOb2RlTWV0aG9kOkZ1bmN0aW9uLGFjY29yZGlvbjpCb29sZWFuLGluZGVudDp7dHlwZTpOdW1iZXIsZGVmYXVsdDoxOH0saWNvbkNsYXNzOlN0cmluZ30sY29tcHV0ZWQ6e2NoaWxkcmVuOntzZXQ6ZnVuY3Rpb24odmFsdWUpe3RoaXMuZGF0YT12YWx1ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YX19LHRyZWVJdGVtQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy50cmVlSXRlbXMpfSxpc0VtcHR5OmZ1bmN0aW9uKCl7dmFyIGNoaWxkTm9kZXM9dGhpcy5yb290LmNoaWxkTm9kZXM7cmV0dXJuIWNoaWxkTm9kZXN8fDA9PT1jaGlsZE5vZGVzLmxlbmd0aHx8Y2hpbGROb2Rlcy5ldmVyeShmdW5jdGlvbihfcmVmKXtyZXR1cm4hX3JlZi52aXNpYmxlfSl9fSx3YXRjaDp7ZGVmYXVsdENoZWNrZWRLZXlzOmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5zdG9yZS5zZXREZWZhdWx0Q2hlY2tlZEtleShuZXdWYWwpfSxkZWZhdWx0RXhwYW5kZWRLZXlzOmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5zdG9yZS5kZWZhdWx0RXhwYW5kZWRLZXlzPW5ld1ZhbCx0aGlzLnN0b3JlLnNldERlZmF1bHRFeHBhbmRlZEtleXMobmV3VmFsKX0sZGF0YTpmdW5jdGlvbihuZXdWYWwpe3RoaXMuc3RvcmUuc2V0RGF0YShuZXdWYWwpfSxjaGVja2JveEl0ZW1zOmZ1bmN0aW9uKHZhbCl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh2YWwsZnVuY3Rpb24oY2hlY2tib3gpe2NoZWNrYm94LnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLC0xKX0pfSxjaGVja1N0cmljdGx5OmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5zdG9yZS5jaGVja1N0cmljdGx5PW5ld1ZhbH19LG1ldGhvZHM6e2ZpbHRlcjpmdW5jdGlvbih2YWx1ZSl7aWYoIXRoaXMuZmlsdGVyTm9kZU1ldGhvZCl0aHJvdyBuZXcgRXJyb3IoIltUcmVlXSBmaWx0ZXJOb2RlTWV0aG9kIGlzIHJlcXVpcmVkIHdoZW4gZmlsdGVyIik7dGhpcy5zdG9yZS5maWx0ZXIodmFsdWUpfSxnZXROb2RlS2V5OmZ1bmN0aW9uKG5vZGUpe3JldHVybiB1dGlsX2dldE5vZGVLZXkodGhpcy5ub2RlS2V5LG5vZGUuZGF0YSl9LGdldE5vZGVQYXRoOmZ1bmN0aW9uKGRhdGEpe2lmKCF0aGlzLm5vZGVLZXkpdGhyb3cgbmV3IEVycm9yKCJbVHJlZV0gbm9kZUtleSBpcyByZXF1aXJlZCBpbiBnZXROb2RlUGF0aCIpO3ZhciBub2RlPXRoaXMuc3RvcmUuZ2V0Tm9kZShkYXRhKTtpZighbm9kZSlyZXR1cm5bXTtmb3IodmFyIHBhdGg9W25vZGUuZGF0YV0scGFyZW50PW5vZGUucGFyZW50O3BhcmVudCYmcGFyZW50IT09dGhpcy5yb290OylwYXRoLnB1c2gocGFyZW50LmRhdGEpLHBhcmVudD1wYXJlbnQucGFyZW50O3JldHVybiBwYXRoLnJldmVyc2UoKX0sZ2V0Q2hlY2tlZE5vZGVzOmZ1bmN0aW9uKGxlYWZPbmx5LGluY2x1ZGVIYWxmQ2hlY2tlZCl7cmV0dXJuIHRoaXMuc3RvcmUuZ2V0Q2hlY2tlZE5vZGVzKGxlYWZPbmx5LGluY2x1ZGVIYWxmQ2hlY2tlZCl9LGdldENoZWNrZWRLZXlzOmZ1bmN0aW9uKGxlYWZPbmx5KXtyZXR1cm4gdGhpcy5zdG9yZS5nZXRDaGVja2VkS2V5cyhsZWFmT25seSl9LGdldEN1cnJlbnROb2RlOmZ1bmN0aW9uKCl7dmFyIGN1cnJlbnROb2RlPXRoaXMuc3RvcmUuZ2V0Q3VycmVudE5vZGUoKTtyZXR1cm4gY3VycmVudE5vZGU/Y3VycmVudE5vZGUuZGF0YTpudWxsfSxnZXRDdXJyZW50S2V5OmZ1bmN0aW9uKCl7aWYoIXRoaXMubm9kZUtleSl0aHJvdyBuZXcgRXJyb3IoIltUcmVlXSBub2RlS2V5IGlzIHJlcXVpcmVkIGluIGdldEN1cnJlbnRLZXkiKTt2YXIgY3VycmVudE5vZGU9dGhpcy5nZXRDdXJyZW50Tm9kZSgpO3JldHVybiBjdXJyZW50Tm9kZT9jdXJyZW50Tm9kZVt0aGlzLm5vZGVLZXldOm51bGx9LHNldENoZWNrZWROb2RlczpmdW5jdGlvbihub2RlcyxsZWFmT25seSl7aWYoIXRoaXMubm9kZUtleSl0aHJvdyBuZXcgRXJyb3IoIltUcmVlXSBub2RlS2V5IGlzIHJlcXVpcmVkIGluIHNldENoZWNrZWROb2RlcyIpO3RoaXMuc3RvcmUuc2V0Q2hlY2tlZE5vZGVzKG5vZGVzLGxlYWZPbmx5KX0sc2V0Q2hlY2tlZEtleXM6ZnVuY3Rpb24oa2V5cyxsZWFmT25seSl7aWYoIXRoaXMubm9kZUtleSl0aHJvdyBuZXcgRXJyb3IoIltUcmVlXSBub2RlS2V5IGlzIHJlcXVpcmVkIGluIHNldENoZWNrZWRLZXlzIik7dGhpcy5zdG9yZS5zZXRDaGVja2VkS2V5cyhrZXlzLGxlYWZPbmx5KX0sc2V0Q2hlY2tlZDpmdW5jdGlvbihkYXRhLGNoZWNrZWQsZGVlcCl7dGhpcy5zdG9yZS5zZXRDaGVja2VkKGRhdGEsY2hlY2tlZCxkZWVwKX0sZ2V0SGFsZkNoZWNrZWROb2RlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLmdldEhhbGZDaGVja2VkTm9kZXMoKX0sZ2V0SGFsZkNoZWNrZWRLZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuZ2V0SGFsZkNoZWNrZWRLZXlzKCl9LHNldEN1cnJlbnROb2RlOmZ1bmN0aW9uKG5vZGUpe2lmKCF0aGlzLm5vZGVLZXkpdGhyb3cgbmV3IEVycm9yKCJbVHJlZV0gbm9kZUtleSBpcyByZXF1aXJlZCBpbiBzZXRDdXJyZW50Tm9kZSIpO3RoaXMuc3RvcmUuc2V0VXNlckN1cnJlbnROb2RlKG5vZGUpfSxzZXRDdXJyZW50S2V5OmZ1bmN0aW9uKGtleSl7aWYoIXRoaXMubm9kZUtleSl0aHJvdyBuZXcgRXJyb3IoIltUcmVlXSBub2RlS2V5IGlzIHJlcXVpcmVkIGluIHNldEN1cnJlbnRLZXkiKTt0aGlzLnN0b3JlLnNldEN1cnJlbnROb2RlS2V5KGtleSl9LGdldE5vZGU6ZnVuY3Rpb24oZGF0YSl7cmV0dXJuIHRoaXMuc3RvcmUuZ2V0Tm9kZShkYXRhKX0scmVtb3ZlOmZ1bmN0aW9uKGRhdGEpe3RoaXMuc3RvcmUucmVtb3ZlKGRhdGEpfSxhcHBlbmQ6ZnVuY3Rpb24oZGF0YSxwYXJlbnROb2RlKXt0aGlzLnN0b3JlLmFwcGVuZChkYXRhLHBhcmVudE5vZGUpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oZGF0YSxyZWZOb2RlKXt0aGlzLnN0b3JlLmluc2VydEJlZm9yZShkYXRhLHJlZk5vZGUpfSxpbnNlcnRBZnRlcjpmdW5jdGlvbihkYXRhLHJlZk5vZGUpe3RoaXMuc3RvcmUuaW5zZXJ0QWZ0ZXIoZGF0YSxyZWZOb2RlKX0saGFuZGxlTm9kZUV4cGFuZDpmdW5jdGlvbihub2RlRGF0YSxub2RlLGluc3RhbmNlKXt0aGlzLmJyb2FkY2FzdCgiRWxUcmVlTm9kZSIsInRyZWUtbm9kZS1leHBhbmQiLG5vZGUpLHRoaXMuJGVtaXQoIm5vZGUtZXhwYW5kIixub2RlRGF0YSxub2RlLGluc3RhbmNlKX0sdXBkYXRlS2V5Q2hpbGRyZW46ZnVuY3Rpb24oa2V5LGRhdGEpe2lmKCF0aGlzLm5vZGVLZXkpdGhyb3cgbmV3IEVycm9yKCJbVHJlZV0gbm9kZUtleSBpcyByZXF1aXJlZCBpbiB1cGRhdGVLZXlDaGlsZCIpO3RoaXMuc3RvcmUudXBkYXRlQ2hpbGRyZW4oa2V5LGRhdGEpfSxpbml0VGFiSW5kZXg6ZnVuY3Rpb24oKXt0aGlzLnRyZWVJdGVtcz10aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCIuaXMtZm9jdXNhYmxlW3JvbGU9dHJlZWl0ZW1dIiksdGhpcy5jaGVja2JveEl0ZW1zPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W3R5cGU9Y2hlY2tib3hdIik7dmFyIGNoZWNrZWRJdGVtPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIi5pcy1jaGVja2VkW3JvbGU9dHJlZWl0ZW1dIik7Y2hlY2tlZEl0ZW0ubGVuZ3RoP2NoZWNrZWRJdGVtWzBdLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLDApOnRoaXMudHJlZUl0ZW1zWzBdJiZ0aGlzLnRyZWVJdGVtc1swXS5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwwKX0saGFuZGxlS2V5ZG93bjpmdW5jdGlvbihldil7dmFyIGN1cnJlbnRJdGVtPWV2LnRhcmdldDtpZigtMSE9PWN1cnJlbnRJdGVtLmNsYXNzTmFtZS5pbmRleE9mKCJlbC10cmVlLW5vZGUiKSl7dmFyIGtleUNvZGU9ZXYua2V5Q29kZTt0aGlzLnRyZWVJdGVtcz10aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCIuaXMtZm9jdXNhYmxlW3JvbGU9dHJlZWl0ZW1dIik7dmFyIGN1cnJlbnRJbmRleD10aGlzLnRyZWVJdGVtQXJyYXkuaW5kZXhPZihjdXJyZW50SXRlbSksbmV4dEluZGV4PXZvaWQgMDstMTxbMzgsNDBdLmluZGV4T2Yoa2V5Q29kZSkmJihldi5wcmV2ZW50RGVmYXVsdCgpLG5leHRJbmRleD0zOD09PWtleUNvZGU/MCE9PWN1cnJlbnRJbmRleD9jdXJyZW50SW5kZXgtMTowOmN1cnJlbnRJbmRleDx0aGlzLnRyZWVJdGVtQXJyYXkubGVuZ3RoLTE/Y3VycmVudEluZGV4KzE6MCx0aGlzLnRyZWVJdGVtQXJyYXlbbmV4dEluZGV4XS5mb2N1cygpKSwtMTxbMzcsMzldLmluZGV4T2Yoa2V5Q29kZSkmJihldi5wcmV2ZW50RGVmYXVsdCgpLGN1cnJlbnRJdGVtLmNsaWNrKCkpO3ZhciBoYXNJbnB1dD1jdXJyZW50SXRlbS5xdWVyeVNlbGVjdG9yKCdbdHlwZT0iY2hlY2tib3giXScpOy0xPFsxMywzMl0uaW5kZXhPZihrZXlDb2RlKSYmaGFzSW5wdXQmJihldi5wcmV2ZW50RGVmYXVsdCgpLGhhc0lucHV0LmNsaWNrKCkpfX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLmlzVHJlZT0hMCx0aGlzLnN0b3JlPW5ldyB0cmVlX3N0b3JlKHtrZXk6dGhpcy5ub2RlS2V5LGRhdGE6dGhpcy5kYXRhLGxhenk6dGhpcy5sYXp5LHByb3BzOnRoaXMucHJvcHMsbG9hZDp0aGlzLmxvYWQsY3VycmVudE5vZGVLZXk6dGhpcy5jdXJyZW50Tm9kZUtleSxjaGVja1N0cmljdGx5OnRoaXMuY2hlY2tTdHJpY3RseSxjaGVja0Rlc2NlbmRhbnRzOnRoaXMuY2hlY2tEZXNjZW5kYW50cyxkZWZhdWx0Q2hlY2tlZEtleXM6dGhpcy5kZWZhdWx0Q2hlY2tlZEtleXMsZGVmYXVsdEV4cGFuZGVkS2V5czp0aGlzLmRlZmF1bHRFeHBhbmRlZEtleXMsYXV0b0V4cGFuZFBhcmVudDp0aGlzLmF1dG9FeHBhbmRQYXJlbnQsZGVmYXVsdEV4cGFuZEFsbDp0aGlzLmRlZmF1bHRFeHBhbmRBbGwsZmlsdGVyTm9kZU1ldGhvZDp0aGlzLmZpbHRlck5vZGVNZXRob2R9KSx0aGlzLnJvb3Q9dGhpcy5zdG9yZS5yb290O3ZhciBkcmFnU3RhdGU9dGhpcy5kcmFnU3RhdGU7dGhpcy4kb24oInRyZWUtbm9kZS1kcmFnLXN0YXJ0IixmdW5jdGlvbihldmVudCx0cmVlTm9kZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIF90aGlzLmFsbG93RHJhZyYmIV90aGlzLmFsbG93RHJhZyh0cmVlTm9kZS5ub2RlKSlyZXR1cm4gZXZlbnQucHJldmVudERlZmF1bHQoKSwhMTtldmVudC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZD0ibW92ZSI7dHJ5e2V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0L3BsYWluIiwiIil9Y2F0Y2goZSl7fWRyYWdTdGF0ZS5kcmFnZ2luZ05vZGU9dHJlZU5vZGUsX3RoaXMuJGVtaXQoIm5vZGUtZHJhZy1zdGFydCIsdHJlZU5vZGUubm9kZSxldmVudCl9KSx0aGlzLiRvbigidHJlZS1ub2RlLWRyYWctb3ZlciIsZnVuY3Rpb24oZXZlbnQsdHJlZU5vZGUpe3ZhciBkcm9wTm9kZT1mdW5jdGlvbihlbGVtZW50LGNvbXBvbmVudE5hbWUpe2Zvcih2YXIgdGFyZ2V0PWVsZW1lbnQ7dGFyZ2V0JiYiQk9EWSIhPT10YXJnZXQudGFnTmFtZTspe2lmKHRhcmdldC5fX3Z1ZV9fJiZ0YXJnZXQuX192dWVfXy4kb3B0aW9ucy5uYW1lPT09Y29tcG9uZW50TmFtZSlyZXR1cm4gdGFyZ2V0Ll9fdnVlX187dGFyZ2V0PXRhcmdldC5wYXJlbnROb2RlfXJldHVybiBudWxsfShldmVudC50YXJnZXQsIkVsVHJlZU5vZGUiKSxvbGREcm9wTm9kZT1kcmFnU3RhdGUuZHJvcE5vZGU7b2xkRHJvcE5vZGUmJm9sZERyb3BOb2RlIT09ZHJvcE5vZGUmJk9iamVjdChkb21fLnJlbW92ZUNsYXNzKShvbGREcm9wTm9kZS4kZWwsImlzLWRyb3AtaW5uZXIiKTt2YXIgZHJhZ2dpbmdOb2RlPWRyYWdTdGF0ZS5kcmFnZ2luZ05vZGU7aWYoZHJhZ2dpbmdOb2RlJiZkcm9wTm9kZSl7dmFyIGRyb3BQcmV2PSEwLGRyb3BJbm5lcj0hMCxkcm9wTmV4dD0hMCx1c2VyQWxsb3dEcm9wSW5uZXI9ITA7ImZ1bmN0aW9uIj09dHlwZW9mIF90aGlzLmFsbG93RHJvcCYmKGRyb3BQcmV2PV90aGlzLmFsbG93RHJvcChkcmFnZ2luZ05vZGUubm9kZSxkcm9wTm9kZS5ub2RlLCJwcmV2IiksdXNlckFsbG93RHJvcElubmVyPWRyb3BJbm5lcj1fdGhpcy5hbGxvd0Ryb3AoZHJhZ2dpbmdOb2RlLm5vZGUsZHJvcE5vZGUubm9kZSwiaW5uZXIiKSxkcm9wTmV4dD1fdGhpcy5hbGxvd0Ryb3AoZHJhZ2dpbmdOb2RlLm5vZGUsZHJvcE5vZGUubm9kZSwibmV4dCIpKSxldmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD1kcm9wSW5uZXI/Im1vdmUiOiJub25lIiwoZHJvcFByZXZ8fGRyb3BJbm5lcnx8ZHJvcE5leHQpJiZvbGREcm9wTm9kZSE9PWRyb3BOb2RlJiYob2xkRHJvcE5vZGUmJl90aGlzLiRlbWl0KCJub2RlLWRyYWctbGVhdmUiLGRyYWdnaW5nTm9kZS5ub2RlLG9sZERyb3BOb2RlLm5vZGUsZXZlbnQpLF90aGlzLiRlbWl0KCJub2RlLWRyYWctZW50ZXIiLGRyYWdnaW5nTm9kZS5ub2RlLGRyb3BOb2RlLm5vZGUsZXZlbnQpKSwoZHJvcFByZXZ8fGRyb3BJbm5lcnx8ZHJvcE5leHQpJiYoZHJhZ1N0YXRlLmRyb3BOb2RlPWRyb3BOb2RlKSxkcm9wTm9kZS5ub2RlLm5leHRTaWJsaW5nPT09ZHJhZ2dpbmdOb2RlLm5vZGUmJihkcm9wTmV4dD0hMSksZHJvcE5vZGUubm9kZS5wcmV2aW91c1NpYmxpbmc9PT1kcmFnZ2luZ05vZGUubm9kZSYmKGRyb3BQcmV2PSExKSxkcm9wTm9kZS5ub2RlLmNvbnRhaW5zKGRyYWdnaW5nTm9kZS5ub2RlLCExKSYmKGRyb3BJbm5lcj0hMSksKGRyYWdnaW5nTm9kZS5ub2RlPT09ZHJvcE5vZGUubm9kZXx8ZHJhZ2dpbmdOb2RlLm5vZGUuY29udGFpbnMoZHJvcE5vZGUubm9kZSkpJiYoZHJvcE5leHQ9ZHJvcElubmVyPWRyb3BQcmV2PSExKTt2YXIgdGFyZ2V0UG9zaXRpb249ZHJvcE5vZGUuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHRyZWVQb3NpdGlvbj1fdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZHJvcFR5cGU9dm9pZCAwLHByZXZQZXJjZW50PWRyb3BQcmV2P2Ryb3BJbm5lcj8uMjU6ZHJvcE5leHQ/LjQ1OjE6LTEsbmV4dFBlcmNlbnQ9ZHJvcE5leHQ/ZHJvcElubmVyPy43NTpkcm9wUHJldj8uNTU6MDoxLGluZGljYXRvclRvcD0tOTk5OSxkaXN0YW5jZT1ldmVudC5jbGllbnRZLXRhcmdldFBvc2l0aW9uLnRvcDtkcm9wVHlwZT1kaXN0YW5jZTx0YXJnZXRQb3NpdGlvbi5oZWlnaHQqcHJldlBlcmNlbnQ/ImJlZm9yZSI6ZGlzdGFuY2U+dGFyZ2V0UG9zaXRpb24uaGVpZ2h0Km5leHRQZXJjZW50PyJhZnRlciI6ZHJvcElubmVyPyJpbm5lciI6Im5vbmUiO3ZhciBpY29uUG9zaXRpb249ZHJvcE5vZGUuJGVsLnF1ZXJ5U2VsZWN0b3IoIi5lbC10cmVlLW5vZGVfX2V4cGFuZC1pY29uIikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZHJvcEluZGljYXRvcj1fdGhpcy4kcmVmcy5kcm9wSW5kaWNhdG9yOyJiZWZvcmUiPT09ZHJvcFR5cGU/aW5kaWNhdG9yVG9wPWljb25Qb3NpdGlvbi50b3AtdHJlZVBvc2l0aW9uLnRvcDoiYWZ0ZXIiPT09ZHJvcFR5cGUmJihpbmRpY2F0b3JUb3A9aWNvblBvc2l0aW9uLmJvdHRvbS10cmVlUG9zaXRpb24udG9wKSxkcm9wSW5kaWNhdG9yLnN0eWxlLnRvcD1pbmRpY2F0b3JUb3ArInB4Iixkcm9wSW5kaWNhdG9yLnN0eWxlLmxlZnQ9aWNvblBvc2l0aW9uLnJpZ2h0LXRyZWVQb3NpdGlvbi5sZWZ0KyJweCIsImlubmVyIj09PWRyb3BUeXBlP09iamVjdChkb21fLmFkZENsYXNzKShkcm9wTm9kZS4kZWwsImlzLWRyb3AtaW5uZXIiKTpPYmplY3QoZG9tXy5yZW1vdmVDbGFzcykoZHJvcE5vZGUuJGVsLCJpcy1kcm9wLWlubmVyIiksZHJhZ1N0YXRlLnNob3dEcm9wSW5kaWNhdG9yPSJiZWZvcmUiPT09ZHJvcFR5cGV8fCJhZnRlciI9PT1kcm9wVHlwZSxkcmFnU3RhdGUuYWxsb3dEcm9wPWRyYWdTdGF0ZS5zaG93RHJvcEluZGljYXRvcnx8dXNlckFsbG93RHJvcElubmVyLGRyYWdTdGF0ZS5kcm9wVHlwZT1kcm9wVHlwZSxfdGhpcy4kZW1pdCgibm9kZS1kcmFnLW92ZXIiLGRyYWdnaW5nTm9kZS5ub2RlLGRyb3BOb2RlLm5vZGUsZXZlbnQpfX0pLHRoaXMuJG9uKCJ0cmVlLW5vZGUtZHJhZy1lbmQiLGZ1bmN0aW9uKGV2ZW50KXt2YXIgZHJhZ2dpbmdOb2RlPWRyYWdTdGF0ZS5kcmFnZ2luZ05vZGUsZHJvcFR5cGU9ZHJhZ1N0YXRlLmRyb3BUeXBlLGRyb3BOb2RlPWRyYWdTdGF0ZS5kcm9wTm9kZTtpZihldmVudC5wcmV2ZW50RGVmYXVsdCgpLGV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0PSJtb3ZlIixkcmFnZ2luZ05vZGUmJmRyb3BOb2RlKXt2YXIgZHJhZ2dpbmdOb2RlQ29weT17ZGF0YTpkcmFnZ2luZ05vZGUubm9kZS5kYXRhfTsibm9uZSIhPT1kcm9wVHlwZSYmZHJhZ2dpbmdOb2RlLm5vZGUucmVtb3ZlKCksImJlZm9yZSI9PT1kcm9wVHlwZT9kcm9wTm9kZS5ub2RlLnBhcmVudC5pbnNlcnRCZWZvcmUoZHJhZ2dpbmdOb2RlQ29weSxkcm9wTm9kZS5ub2RlKToiYWZ0ZXIiPT09ZHJvcFR5cGU/ZHJvcE5vZGUubm9kZS5wYXJlbnQuaW5zZXJ0QWZ0ZXIoZHJhZ2dpbmdOb2RlQ29weSxkcm9wTm9kZS5ub2RlKToiaW5uZXIiPT09ZHJvcFR5cGUmJmRyb3BOb2RlLm5vZGUuaW5zZXJ0Q2hpbGQoZHJhZ2dpbmdOb2RlQ29weSksIm5vbmUiIT09ZHJvcFR5cGUmJl90aGlzLnN0b3JlLnJlZ2lzdGVyTm9kZShkcmFnZ2luZ05vZGVDb3B5KSxPYmplY3QoZG9tXy5yZW1vdmVDbGFzcykoZHJvcE5vZGUuJGVsLCJpcy1kcm9wLWlubmVyIiksX3RoaXMuJGVtaXQoIm5vZGUtZHJhZy1lbmQiLGRyYWdnaW5nTm9kZS5ub2RlLGRyb3BOb2RlLm5vZGUsZHJvcFR5cGUsZXZlbnQpLCJub25lIiE9PWRyb3BUeXBlJiZfdGhpcy4kZW1pdCgibm9kZS1kcm9wIixkcmFnZ2luZ05vZGUubm9kZSxkcm9wTm9kZS5ub2RlLGRyb3BUeXBlLGV2ZW50KX1kcmFnZ2luZ05vZGUmJiFkcm9wTm9kZSYmX3RoaXMuJGVtaXQoIm5vZGUtZHJhZy1lbmQiLGRyYWdnaW5nTm9kZS5ub2RlLG51bGwsZHJvcFR5cGUsZXZlbnQpLGRyYWdTdGF0ZS5zaG93RHJvcEluZGljYXRvcj0hMSxkcmFnU3RhdGUuZHJhZ2dpbmdOb2RlPW51bGwsZHJhZ1N0YXRlLmRyb3BOb2RlPW51bGwsZHJhZ1N0YXRlLmFsbG93RHJvcD0hMH0pfSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy5pbml0VGFiSW5kZXgoKSx0aGlzLiRlbC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLmhhbmRsZUtleWRvd24pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dGhpcy50cmVlSXRlbXM9dGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbCgiW3JvbGU9dHJlZWl0ZW1dIiksdGhpcy5jaGVja2JveEl0ZW1zPXRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W3R5cGU9Y2hlY2tib3hdIil9fSx0cmVldnVlX3R5cGVfdGVtcGxhdGVfaWRfNTQ3NTc1YTZfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTt0cmVlX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvdHJlZS9zcmMvdHJlZS52dWUiO3ZhciB0cmVlPXRyZWVfY29tcG9uZW50LmV4cG9ydHM7dHJlZS5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudCh0cmVlLm5hbWUsdHJlZSl9O3ZhciBwYWNrYWdlc190cmVlPXRyZWUsbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzZlNTMzNDFiX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToiZWwtYWxlcnQtZmFkZSJ9fSxbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS52aXNpYmxlLGV4cHJlc3Npb246InZpc2libGUifV0sc3RhdGljQ2xhc3M6ImVsLWFsZXJ0IixjbGFzczpbX3ZtLnR5cGVDbGFzcyxfdm0uY2VudGVyPyJpcy1jZW50ZXIiOiIiXSxhdHRyczp7cm9sZToiYWxlcnQifX0sW192bS5zaG93SWNvbj9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1hbGVydF9faWNvbiIsY2xhc3M6W192bS5pY29uQ2xhc3MsX3ZtLmlzQmlnSWNvbl19KTpfdm0uX2UoKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWFsZXJ0X19jb250ZW50In0sW192bS50aXRsZXx8X3ZtLiRzbG90cy50aXRsZT9fYygic3BhbiIse3N0YXRpY0NsYXNzOiJlbC1hbGVydF9fdGl0bGUiLGNsYXNzOltfdm0uaXNCb2xkVGl0bGVdfSxbX3ZtLl90KCJ0aXRsZSIsW192bS5fdihfdm0uX3MoX3ZtLnRpdGxlKSldKV0sMik6X3ZtLl9lKCksX3ZtLiRzbG90cy5kZWZhdWx0JiYhX3ZtLmRlc2NyaXB0aW9uP19jKCJwIix7c3RhdGljQ2xhc3M6ImVsLWFsZXJ0X19kZXNjcmlwdGlvbiJ9LFtfdm0uX3QoImRlZmF1bHQiKV0sMik6X3ZtLl9lKCksX3ZtLmRlc2NyaXB0aW9uJiYhX3ZtLiRzbG90cy5kZWZhdWx0P19jKCJwIix7c3RhdGljQ2xhc3M6ImVsLWFsZXJ0X19kZXNjcmlwdGlvbiJ9LFtfdm0uX3YoX3ZtLl9zKF92bS5kZXNjcmlwdGlvbikpXSk6X3ZtLl9lKCksX2MoImkiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0uY2xvc2FibGUsZXhwcmVzc2lvbjoiY2xvc2FibGUifV0sc3RhdGljQ2xhc3M6ImVsLWFsZXJ0X19jbG9zZWJ0biIsY2xhc3M6eyJpcy1jdXN0b21lZCI6IiIhPT1fdm0uY2xvc2VUZXh0LCJlbC1pY29uLWNsb3NlIjoiIj09PV92bS5jbG9zZVRleHR9LG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe192bS5jbG9zZSgpfX19LFtfdm0uX3YoX3ZtLl9zKF92bS5jbG9zZVRleHQpKV0pXSldKV0pfTttYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfNmU1MzM0MWJfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIFRZUEVfQ0xBU1NFU19NQVA9e3N1Y2Nlc3M6ImVsLWljb24tc3VjY2VzcyIsd2FybmluZzoiZWwtaWNvbi13YXJuaW5nIixlcnJvcjoiZWwtaWNvbi1lcnJvciJ9LGFsZXJ0X3NyY19tYWluX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsQWxlcnQiLHByb3BzOnt0aXRsZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn0sZGVzY3JpcHRpb246e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiJ9LHR5cGU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImluZm8ifSxjbG9zYWJsZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGNsb3NlVGV4dDp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiIn0sc2hvd0ljb246Qm9vbGVhbixjZW50ZXI6Qm9vbGVhbn0sZGF0YTpmdW5jdGlvbigpe3JldHVybnt2aXNpYmxlOiEwfX0sbWV0aG9kczp7Y2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnZpc2libGU9ITEsdGhpcy4kZW1pdCgiY2xvc2UiKX19LGNvbXB1dGVkOnt0eXBlQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4iZWwtYWxlcnQtLSIrdGhpcy50eXBlfSxpY29uQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVFlQRV9DTEFTU0VTX01BUFt0aGlzLnR5cGVdfHwiZWwtaWNvbi1pbmZvIn0saXNCaWdJY29uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVzY3JpcHRpb258fHRoaXMuJHNsb3RzLmRlZmF1bHQ/ImlzLWJpZyI6IiJ9LGlzQm9sZFRpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVzY3JpcHRpb258fHRoaXMuJHNsb3RzLmRlZmF1bHQ/ImlzLWJvbGQiOiIifX19LG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF82ZTUzMzQxYl9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2FsZXJ0X3NyY19tYWluX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvYWxlcnQvc3JjL21haW4udnVlIjt2YXIgYWxlcnRfc3JjX21haW49YWxlcnRfc3JjX21haW5fY29tcG9uZW50LmV4cG9ydHM7YWxlcnRfc3JjX21haW4uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoYWxlcnRfc3JjX21haW4ubmFtZSxhbGVydF9zcmNfbWFpbil9O3ZhciBwYWNrYWdlc19hbGVydD1hbGVydF9zcmNfbWFpbixtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfNDNkYmMzZDhfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJlbC1ub3RpZmljYXRpb24tZmFkZSJ9fSxbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS52aXNpYmxlLGV4cHJlc3Npb246InZpc2libGUifV0sY2xhc3M6WyJlbC1ub3RpZmljYXRpb24iLF92bS5jdXN0b21DbGFzcyxfdm0uaG9yaXpvbnRhbENsYXNzXSxzdHlsZTpfdm0ucG9zaXRpb25TdHlsZSxhdHRyczp7cm9sZToiYWxlcnQifSxvbjp7bW91c2VlbnRlcjpmdW5jdGlvbigkZXZlbnQpe192bS5jbGVhclRpbWVyKCl9LG1vdXNlbGVhdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc3RhcnRUaW1lcigpfSxjbGljazpfdm0uY2xpY2t9fSxbX3ZtLnR5cGV8fF92bS5pY29uQ2xhc3M/X2MoImkiLHtzdGF0aWNDbGFzczoiZWwtbm90aWZpY2F0aW9uX19pY29uIixjbGFzczpbX3ZtLnR5cGVDbGFzcyxfdm0uaWNvbkNsYXNzXX0pOl92bS5fZSgpLF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtbm90aWZpY2F0aW9uX19ncm91cCIsY2xhc3M6eyJpcy13aXRoLWljb24iOl92bS50eXBlQ2xhc3N8fF92bS5pY29uQ2xhc3N9fSxbX2MoImgyIix7c3RhdGljQ2xhc3M6ImVsLW5vdGlmaWNhdGlvbl9fdGl0bGUiLGRvbVByb3BzOnt0ZXh0Q29udGVudDpfdm0uX3MoX3ZtLnRpdGxlKX19KSxfYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLm1lc3NhZ2UsZXhwcmVzc2lvbjoibWVzc2FnZSJ9XSxzdGF0aWNDbGFzczoiZWwtbm90aWZpY2F0aW9uX19jb250ZW50In0sW192bS5fdCgiZGVmYXVsdCIsW192bS5kYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc/X2MoInAiLHtkb21Qcm9wczp7aW5uZXJIVE1MOl92bS5fcyhfdm0ubWVzc2FnZSl9fSk6X2MoInAiLFtfdm0uX3YoX3ZtLl9zKF92bS5tZXNzYWdlKSldKV0pXSwyKSxfdm0uc2hvd0Nsb3NlP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtbm90aWZpY2F0aW9uX19jbG9zZUJ0biBlbC1pY29uLWNsb3NlIixvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLF92bS5jbG9zZSgkZXZlbnQpfX19KTpfdm0uX2UoKV0pXSldKX07bWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzQzZGJjM2Q4X3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBtYWludnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfdHlwZU1hcD17c3VjY2Vzczoic3VjY2VzcyIsaW5mbzoiaW5mbyIsd2FybmluZzoid2FybmluZyIsZXJyb3I6ImVycm9yIn0sbm90aWZpY2F0aW9uX3NyY19tYWluX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe2RhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dmlzaWJsZTohMSx0aXRsZToiIixtZXNzYWdlOiIiLGR1cmF0aW9uOjQ1MDAsdHlwZToiIixzaG93Q2xvc2U6ITAsY3VzdG9tQ2xhc3M6IiIsaWNvbkNsYXNzOiIiLG9uQ2xvc2U6bnVsbCxvbkNsaWNrOm51bGwsY2xvc2VkOiExLHZlcnRpY2FsT2Zmc2V0OjAsdGltZXI6bnVsbCxkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6ITEscG9zaXRpb246InRvcC1yaWdodCJ9fSxjb21wdXRlZDp7dHlwZUNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZSYmbWFpbnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX3R5cGVNYXBbdGhpcy50eXBlXT8iZWwtaWNvbi0iK21haW52dWVfdHlwZV9zY3JpcHRfbGFuZ19qc190eXBlTWFwW3RoaXMudHlwZV06IiJ9LGhvcml6b250YWxDbGFzczpmdW5jdGlvbigpe3JldHVybi0xPHRoaXMucG9zaXRpb24uaW5kZXhPZigicmlnaHQiKT8icmlnaHQiOiJsZWZ0In0sdmVydGljYWxQcm9wZXJ0eTpmdW5jdGlvbigpe3JldHVybi9edG9wLS8udGVzdCh0aGlzLnBvc2l0aW9uKT8idG9wIjoiYm90dG9tIn0scG9zaXRpb25TdHlsZTpmdW5jdGlvbigpe3ZhciBfcmVmO3JldHVybihfcmVmPXt9KVt0aGlzLnZlcnRpY2FsUHJvcGVydHldPXRoaXMudmVydGljYWxPZmZzZXQrInB4IixfcmVmfX0sd2F0Y2g6e2Nsb3NlZDpmdW5jdGlvbihuZXdWYWwpe25ld1ZhbCYmKHRoaXMudmlzaWJsZT0hMSx0aGlzLiRlbC5hZGRFdmVudExpc3RlbmVyKCJ0cmFuc2l0aW9uZW5kIix0aGlzLmRlc3Ryb3lFbGVtZW50KSl9fSxtZXRob2RzOntkZXN0cm95RWxlbWVudDpmdW5jdGlvbigpe3RoaXMuJGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRyYW5zaXRpb25lbmQiLHRoaXMuZGVzdHJveUVsZW1lbnQpLHRoaXMuJGRlc3Ryb3koITApLHRoaXMuJGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy4kZWwpfSxjbGljazpmdW5jdGlvbigpeyJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9uQ2xpY2smJnRoaXMub25DbGljaygpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuY2xvc2VkPSEwLCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9uQ2xvc2UmJnRoaXMub25DbG9zZSgpfSxjbGVhclRpbWVyOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpfSxzdGFydFRpbWVyOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXM7MDx0aGlzLmR1cmF0aW9uJiYodGhpcy50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMuY2xvc2VkfHxfdGhpcy5jbG9zZSgpfSx0aGlzLmR1cmF0aW9uKSl9LGtleWRvd246ZnVuY3Rpb24oZSl7NDY9PT1lLmtleUNvZGV8fDg9PT1lLmtleUNvZGU/dGhpcy5jbGVhclRpbWVyKCk6Mjc9PT1lLmtleUNvZGU/dGhpcy5jbG9zZWR8fHRoaXMuY2xvc2UoKTp0aGlzLnN0YXJ0VGltZXIoKX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXM7MDx0aGlzLmR1cmF0aW9uJiYodGhpcy50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMyLmNsb3NlZHx8X3RoaXMyLmNsb3NlKCl9LHRoaXMuZHVyYXRpb24pKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLmtleWRvd24pfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsdGhpcy5rZXlkb3duKX19LG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF80M2RiYzNkOF9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO25vdGlmaWNhdGlvbl9zcmNfbWFpbl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL25vdGlmaWNhdGlvbi9zcmMvbWFpbi52dWUiO3ZhciBub3RpZmljYXRpb25fc3JjX21haW49bm90aWZpY2F0aW9uX3NyY19tYWluX2NvbXBvbmVudC5leHBvcnRzLE5vdGlmaWNhdGlvbkNvbnN0cnVjdG9yPWV4dGVybmFsX3Z1ZV9kZWZhdWx0LmEuZXh0ZW5kKG5vdGlmaWNhdGlvbl9zcmNfbWFpbiksc3JjX21haW5faW5zdGFuY2U9dm9pZCAwLGluc3RhbmNlcz1bXSxzZWVkPTEsbWFpbl9Ob3RpZmljYXRpb249ZnVuY3Rpb24gTm90aWZpY2F0aW9uKG9wdGlvbnMpe2lmKCFleHRlcm5hbF92dWVfZGVmYXVsdC5hLnByb3RvdHlwZS4kaXNTZXJ2ZXIpe3ZhciB1c2VyT25DbG9zZT0ob3B0aW9ucz1vcHRpb25zfHx7fSkub25DbG9zZSxpZD0ibm90aWZpY2F0aW9uXyIrc2VlZCsrLHBvc2l0aW9uPW9wdGlvbnMucG9zaXRpb258fCJ0b3AtcmlnaHQiO29wdGlvbnMub25DbG9zZT1mdW5jdGlvbigpe05vdGlmaWNhdGlvbi5jbG9zZShpZCx1c2VyT25DbG9zZSl9LHNyY19tYWluX2luc3RhbmNlPW5ldyBOb3RpZmljYXRpb25Db25zdHJ1Y3Rvcih7ZGF0YTpvcHRpb25zfSksT2JqZWN0KHZkb21fLmlzVk5vZGUpKG9wdGlvbnMubWVzc2FnZSkmJihzcmNfbWFpbl9pbnN0YW5jZS4kc2xvdHMuZGVmYXVsdD1bb3B0aW9ucy5tZXNzYWdlXSxvcHRpb25zLm1lc3NhZ2U9IlJFUExBQ0VEX0JZX1ZOT0RFIiksc3JjX21haW5faW5zdGFuY2UuaWQ9aWQsc3JjX21haW5faW5zdGFuY2UuJG1vdW50KCksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzcmNfbWFpbl9pbnN0YW5jZS4kZWwpLHNyY19tYWluX2luc3RhbmNlLnZpc2libGU9ITAsc3JjX21haW5faW5zdGFuY2UuZG9tPXNyY19tYWluX2luc3RhbmNlLiRlbCxzcmNfbWFpbl9pbnN0YW5jZS5kb20uc3R5bGUuekluZGV4PXBvcHVwXy5Qb3B1cE1hbmFnZXIubmV4dFpJbmRleCgpO3ZhciB2ZXJ0aWNhbE9mZnNldD1vcHRpb25zLm9mZnNldHx8MDtyZXR1cm4gaW5zdGFuY2VzLmZpbHRlcihmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbS5wb3NpdGlvbj09PXBvc2l0aW9ufSkuZm9yRWFjaChmdW5jdGlvbihpdGVtKXt2ZXJ0aWNhbE9mZnNldCs9aXRlbS4kZWwub2Zmc2V0SGVpZ2h0KzE2fSksdmVydGljYWxPZmZzZXQrPTE2LHNyY19tYWluX2luc3RhbmNlLnZlcnRpY2FsT2Zmc2V0PXZlcnRpY2FsT2Zmc2V0LGluc3RhbmNlcy5wdXNoKHNyY19tYWluX2luc3RhbmNlKSxzcmNfbWFpbl9pbnN0YW5jZX19O1sic3VjY2VzcyIsIndhcm5pbmciLCJpbmZvIiwiZXJyb3IiXS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUpe21haW5fTm90aWZpY2F0aW9uW3R5cGVdPWZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybigic3RyaW5nIj09dHlwZW9mIG9wdGlvbnN8fE9iamVjdCh2ZG9tXy5pc1ZOb2RlKShvcHRpb25zKSkmJihvcHRpb25zPXttZXNzYWdlOm9wdGlvbnN9KSxvcHRpb25zLnR5cGU9dHlwZSxtYWluX05vdGlmaWNhdGlvbihvcHRpb25zKX19KSxtYWluX05vdGlmaWNhdGlvbi5jbG9zZT1mdW5jdGlvbihpZCx1c2VyT25DbG9zZSl7dmFyIGluZGV4PS0xLGxlbj1pbnN0YW5jZXMubGVuZ3RoLGluc3RhbmNlPWluc3RhbmNlcy5maWx0ZXIoZnVuY3Rpb24oaW5zdGFuY2UsaSl7cmV0dXJuIGluc3RhbmNlLmlkPT09aWQmJihpbmRleD1pLCEwKX0pWzBdO2lmKGluc3RhbmNlJiYoImZ1bmN0aW9uIj09dHlwZW9mIHVzZXJPbkNsb3NlJiZ1c2VyT25DbG9zZShpbnN0YW5jZSksaW5zdGFuY2VzLnNwbGljZShpbmRleCwxKSwhKGxlbjw9MSkpKWZvcih2YXIgcG9zaXRpb249aW5zdGFuY2UucG9zaXRpb24scmVtb3ZlZEhlaWdodD1pbnN0YW5jZS5kb20ub2Zmc2V0SGVpZ2h0LGk9aW5kZXg7aTxsZW4tMTtpKyspaW5zdGFuY2VzW2ldLnBvc2l0aW9uPT09cG9zaXRpb24mJihpbnN0YW5jZXNbaV0uZG9tLnN0eWxlW2luc3RhbmNlLnZlcnRpY2FsUHJvcGVydHldPXBhcnNlSW50KGluc3RhbmNlc1tpXS5kb20uc3R5bGVbaW5zdGFuY2UudmVydGljYWxQcm9wZXJ0eV0sMTApLXJlbW92ZWRIZWlnaHQtMTYrInB4Iil9LG1haW5fTm90aWZpY2F0aW9uLmNsb3NlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPWluc3RhbmNlcy5sZW5ndGgtMTswPD1pO2ktLSlpbnN0YW5jZXNbaV0uY2xvc2UoKX07dmFyIG5vdGlmaWNhdGlvbj1tYWluX05vdGlmaWNhdGlvbixtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfMzI3MDg2NDRfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXNsaWRlciIsY2xhc3M6eyJpcy12ZXJ0aWNhbCI6X3ZtLnZlcnRpY2FsLCJlbC1zbGlkZXItLXdpdGgtaW5wdXQiOl92bS5zaG93SW5wdXR9LGF0dHJzOntyb2xlOiJzbGlkZXIiLCJhcmlhLXZhbHVlbWluIjpfdm0ubWluLCJhcmlhLXZhbHVlbWF4Ijpfdm0ubWF4LCJhcmlhLW9yaWVudGF0aW9uIjpfdm0udmVydGljYWw/InZlcnRpY2FsIjoiaG9yaXpvbnRhbCIsImFyaWEtZGlzYWJsZWQiOl92bS5zbGlkZXJEaXNhYmxlZH19LFtfdm0uc2hvd0lucHV0JiYhX3ZtLnJhbmdlP19jKCJlbC1pbnB1dC1udW1iZXIiLHtyZWY6ImlucHV0IixzdGF0aWNDbGFzczoiZWwtc2xpZGVyX19pbnB1dCIsYXR0cnM6e3N0ZXA6X3ZtLnN0ZXAsZGlzYWJsZWQ6X3ZtLnNsaWRlckRpc2FibGVkLGNvbnRyb2xzOl92bS5zaG93SW5wdXRDb250cm9scyxtaW46X3ZtLm1pbixtYXg6X3ZtLm1heCxkZWJvdW5jZTpfdm0uZGVib3VuY2Usc2l6ZTpfdm0uaW5wdXRTaXplfSxvbjp7Y2hhbmdlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLiRuZXh0VGljayhfdm0uZW1pdENoYW5nZSl9fSxtb2RlbDp7dmFsdWU6X3ZtLmZpcnN0VmFsdWUsY2FsbGJhY2s6ZnVuY3Rpb24oJCR2KXtfdm0uZmlyc3RWYWx1ZT0kJHZ9LGV4cHJlc3Npb246ImZpcnN0VmFsdWUifX0pOl92bS5fZSgpLF9jKCJkaXYiLHtyZWY6InNsaWRlciIsc3RhdGljQ2xhc3M6ImVsLXNsaWRlcl9fcnVud2F5IixjbGFzczp7InNob3ctaW5wdXQiOl92bS5zaG93SW5wdXQsZGlzYWJsZWQ6X3ZtLnNsaWRlckRpc2FibGVkfSxzdHlsZTpfdm0ucnVud2F5U3R5bGUsb246e2NsaWNrOl92bS5vblNsaWRlckNsaWNrfX0sW19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtc2xpZGVyX19iYXIiLHN0eWxlOl92bS5iYXJTdHlsZX0pLF9jKCJzbGlkZXItYnV0dG9uIix7cmVmOiJidXR0b24xIixhdHRyczp7dmVydGljYWw6X3ZtLnZlcnRpY2FsLCJ0b29sdGlwLWNsYXNzIjpfdm0udG9vbHRpcENsYXNzfSxtb2RlbDp7dmFsdWU6X3ZtLmZpcnN0VmFsdWUsY2FsbGJhY2s6ZnVuY3Rpb24oJCR2KXtfdm0uZmlyc3RWYWx1ZT0kJHZ9LGV4cHJlc3Npb246ImZpcnN0VmFsdWUifX0pLF92bS5yYW5nZT9fYygic2xpZGVyLWJ1dHRvbiIse3JlZjoiYnV0dG9uMiIsYXR0cnM6e3ZlcnRpY2FsOl92bS52ZXJ0aWNhbCwidG9vbHRpcC1jbGFzcyI6X3ZtLnRvb2x0aXBDbGFzc30sbW9kZWw6e3ZhbHVlOl92bS5zZWNvbmRWYWx1ZSxjYWxsYmFjazpmdW5jdGlvbigkJHYpe192bS5zZWNvbmRWYWx1ZT0kJHZ9LGV4cHJlc3Npb246InNlY29uZFZhbHVlIn19KTpfdm0uX2UoKSxfdm0uX2woX3ZtLnN0b3BzLGZ1bmN0aW9uKGl0ZW0sa2V5KXtyZXR1cm4gX3ZtLnNob3dTdG9wcz9fYygiZGl2Iix7a2V5OmtleSxzdGF0aWNDbGFzczoiZWwtc2xpZGVyX19zdG9wIixzdHlsZTpfdm0udmVydGljYWw/e2JvdHRvbTppdGVtKyIlIn06e2xlZnQ6aXRlbSsiJSJ9fSk6X3ZtLl9lKCl9KV0sMildLDEpfTttYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfMzI3MDg2NDRfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGlucHV0X251bWJlcl89X193ZWJwYWNrX3JlcXVpcmVfXygzNyksaW5wdXRfbnVtYmVyX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGlucHV0X251bWJlcl8pLGJ1dHRvbnZ1ZV90eXBlX3RlbXBsYXRlX2lkX2U3MmQyYWQyX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3JlZjoiYnV0dG9uIixzdGF0aWNDbGFzczoiZWwtc2xpZGVyX19idXR0b24td3JhcHBlciIsY2xhc3M6e2hvdmVyOl92bS5ob3ZlcmluZyxkcmFnZ2luZzpfdm0uZHJhZ2dpbmd9LHN0eWxlOl92bS53cmFwcGVyU3R5bGUsYXR0cnM6e3RhYmluZGV4OiIwIn0sb246e21vdXNlZW50ZXI6X3ZtLmhhbmRsZU1vdXNlRW50ZXIsbW91c2VsZWF2ZTpfdm0uaGFuZGxlTW91c2VMZWF2ZSxtb3VzZWRvd246X3ZtLm9uQnV0dG9uRG93bix0b3VjaHN0YXJ0Ol92bS5vbkJ1dHRvbkRvd24sZm9jdXM6X3ZtLmhhbmRsZU1vdXNlRW50ZXIsYmx1cjpfdm0uaGFuZGxlTW91c2VMZWF2ZSxrZXlkb3duOltmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJsZWZ0IiwzNywkZXZlbnQua2V5LFsiTGVmdCIsIkFycm93TGVmdCJdKT8iYnV0dG9uImluICRldmVudCYmMCE9PSRldmVudC5idXR0b24/bnVsbDpfdm0ub25MZWZ0S2V5RG93bigkZXZlbnQpOm51bGx9LGZ1bmN0aW9uKCRldmVudCl7cmV0dXJuImJ1dHRvbiJpbiAkZXZlbnR8fCFfdm0uX2soJGV2ZW50LmtleUNvZGUsInJpZ2h0IiwzOSwkZXZlbnQua2V5LFsiUmlnaHQiLCJBcnJvd1JpZ2h0Il0pPyJidXR0b24iaW4gJGV2ZW50JiYyIT09JGV2ZW50LmJ1dHRvbj9udWxsOl92bS5vblJpZ2h0S2V5RG93bigkZXZlbnQpOm51bGx9LGZ1bmN0aW9uKCRldmVudCl7cmV0dXJuImJ1dHRvbiJpbiAkZXZlbnR8fCFfdm0uX2soJGV2ZW50LmtleUNvZGUsImRvd24iLDQwLCRldmVudC5rZXksWyJEb3duIiwiQXJyb3dEb3duIl0pPygkZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0ub25MZWZ0S2V5RG93bigkZXZlbnQpKTpudWxsfSxmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJ1cCIsMzgsJGV2ZW50LmtleSxbIlVwIiwiQXJyb3dVcCJdKT8oJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLm9uUmlnaHRLZXlEb3duKCRldmVudCkpOm51bGx9XX19LFtfYygiZWwtdG9vbHRpcCIse3JlZjoidG9vbHRpcCIsYXR0cnM6e3BsYWNlbWVudDoidG9wIiwicG9wcGVyLWNsYXNzIjpfdm0udG9vbHRpcENsYXNzLGRpc2FibGVkOiFfdm0uc2hvd1Rvb2x0aXB9fSxbX2MoInNwYW4iLHthdHRyczp7c2xvdDoiY29udGVudCJ9LHNsb3Q6ImNvbnRlbnQifSxbX3ZtLl92KF92bS5fcyhfdm0uZm9ybWF0VmFsdWUpKV0pLF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtc2xpZGVyX19idXR0b24iLGNsYXNzOntob3Zlcjpfdm0uaG92ZXJpbmcsZHJhZ2dpbmc6X3ZtLmRyYWdnaW5nfX0pXSldLDEpfTtidXR0b252dWVfdHlwZV90ZW1wbGF0ZV9pZF9lNzJkMmFkMl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgc3JjX2J1dHRvbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFNsaWRlckJ1dHRvbiIsY29tcG9uZW50czp7RWxUb29sdGlwOnRvb2x0aXBfZGVmYXVsdC5hfSxwcm9wczp7dmFsdWU6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MH0sdmVydGljYWw6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSx0b29sdGlwQ2xhc3M6U3RyaW5nfSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2hvdmVyaW5nOiExLGRyYWdnaW5nOiExLGlzQ2xpY2s6ITEsc3RhcnRYOjAsY3VycmVudFg6MCxzdGFydFk6MCxjdXJyZW50WTowLHN0YXJ0UG9zaXRpb246MCxuZXdQb3NpdGlvbjpudWxsLG9sZFZhbHVlOnRoaXMudmFsdWV9fSxjb21wdXRlZDp7ZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcGFyZW50LnNsaWRlckRpc2FibGVkfSxtYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcGFyZW50Lm1heH0sbWluOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHBhcmVudC5taW59LHN0ZXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcGFyZW50LnN0ZXB9LHNob3dUb29sdGlwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHBhcmVudC5zaG93VG9vbHRpcH0scHJlY2lzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHBhcmVudC5wcmVjaXNpb259LGN1cnJlbnRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybih0aGlzLnZhbHVlLXRoaXMubWluKS8odGhpcy5tYXgtdGhpcy5taW4pKjEwMCsiJSJ9LGVuYWJsZUZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRwYXJlbnQuZm9ybWF0VG9vbHRpcCBpbnN0YW5jZW9mIEZ1bmN0aW9ufSxmb3JtYXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZUZvcm1hdCYmdGhpcy4kcGFyZW50LmZvcm1hdFRvb2x0aXAodGhpcy52YWx1ZSl8fHRoaXMudmFsdWV9LHdyYXBwZXJTdHlsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZlcnRpY2FsP3tib3R0b206dGhpcy5jdXJyZW50UG9zaXRpb259OntsZWZ0OnRoaXMuY3VycmVudFBvc2l0aW9ufX19LHdhdGNoOntkcmFnZ2luZzpmdW5jdGlvbih2YWwpe3RoaXMuJHBhcmVudC5kcmFnZ2luZz12YWx9fSxtZXRob2RzOntkaXNwbGF5VG9vbHRpcDpmdW5jdGlvbigpe3RoaXMuJHJlZnMudG9vbHRpcCYmKHRoaXMuJHJlZnMudG9vbHRpcC5zaG93UG9wcGVyPSEwKX0saGlkZVRvb2x0aXA6ZnVuY3Rpb24oKXt0aGlzLiRyZWZzLnRvb2x0aXAmJih0aGlzLiRyZWZzLnRvb2x0aXAuc2hvd1BvcHBlcj0hMSl9LGhhbmRsZU1vdXNlRW50ZXI6ZnVuY3Rpb24oKXt0aGlzLmhvdmVyaW5nPSEwLHRoaXMuZGlzcGxheVRvb2x0aXAoKX0saGFuZGxlTW91c2VMZWF2ZTpmdW5jdGlvbigpe3RoaXMuaG92ZXJpbmc9ITEsdGhpcy5oaWRlVG9vbHRpcCgpfSxvbkJ1dHRvbkRvd246ZnVuY3Rpb24oZXZlbnQpe3RoaXMuZGlzYWJsZWR8fChldmVudC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMub25EcmFnU3RhcnQoZXZlbnQpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMub25EcmFnZ2luZyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsdGhpcy5vbkRyYWdnaW5nKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy5vbkRyYWdFbmQpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsdGhpcy5vbkRyYWdFbmQpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsdGhpcy5vbkRyYWdFbmQpKX0sb25MZWZ0S2V5RG93bjpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWR8fCh0aGlzLm5ld1Bvc2l0aW9uPXBhcnNlRmxvYXQodGhpcy5jdXJyZW50UG9zaXRpb24pLXRoaXMuc3RlcC8odGhpcy5tYXgtdGhpcy5taW4pKjEwMCx0aGlzLnNldFBvc2l0aW9uKHRoaXMubmV3UG9zaXRpb24pKX0sb25SaWdodEtleURvd246ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkfHwodGhpcy5uZXdQb3NpdGlvbj1wYXJzZUZsb2F0KHRoaXMuY3VycmVudFBvc2l0aW9uKSt0aGlzLnN0ZXAvKHRoaXMubWF4LXRoaXMubWluKSoxMDAsdGhpcy5zZXRQb3NpdGlvbih0aGlzLm5ld1Bvc2l0aW9uKSl9LG9uRHJhZ1N0YXJ0OmZ1bmN0aW9uKGV2ZW50KXt0aGlzLmRyYWdnaW5nPSEwLHRoaXMuaXNDbGljaz0hMCwidG91Y2hzdGFydCI9PT1ldmVudC50eXBlJiYoZXZlbnQuY2xpZW50WT1ldmVudC50b3VjaGVzWzBdLmNsaWVudFksZXZlbnQuY2xpZW50WD1ldmVudC50b3VjaGVzWzBdLmNsaWVudFgpLHRoaXMudmVydGljYWw/dGhpcy5zdGFydFk9ZXZlbnQuY2xpZW50WTp0aGlzLnN0YXJ0WD1ldmVudC5jbGllbnRYLHRoaXMuc3RhcnRQb3NpdGlvbj1wYXJzZUZsb2F0KHRoaXMuY3VycmVudFBvc2l0aW9uKSx0aGlzLm5ld1Bvc2l0aW9uPXRoaXMuc3RhcnRQb3NpdGlvbn0sb25EcmFnZ2luZzpmdW5jdGlvbihldmVudCl7aWYodGhpcy5kcmFnZ2luZyl7dGhpcy5pc0NsaWNrPSExLHRoaXMuZGlzcGxheVRvb2x0aXAoKSx0aGlzLiRwYXJlbnQucmVzZXRTaXplKCk7dmFyIGRpZmY9MDsidG91Y2htb3ZlIj09PWV2ZW50LnR5cGUmJihldmVudC5jbGllbnRZPWV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSxldmVudC5jbGllbnRYPWV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCksZGlmZj10aGlzLnZlcnRpY2FsPyh0aGlzLmN1cnJlbnRZPWV2ZW50LmNsaWVudFksKHRoaXMuc3RhcnRZLXRoaXMuY3VycmVudFkpL3RoaXMuJHBhcmVudC5zbGlkZXJTaXplKjEwMCk6KHRoaXMuY3VycmVudFg9ZXZlbnQuY2xpZW50WCwodGhpcy5jdXJyZW50WC10aGlzLnN0YXJ0WCkvdGhpcy4kcGFyZW50LnNsaWRlclNpemUqMTAwKSx0aGlzLm5ld1Bvc2l0aW9uPXRoaXMuc3RhcnRQb3NpdGlvbitkaWZmLHRoaXMuc2V0UG9zaXRpb24odGhpcy5uZXdQb3NpdGlvbil9fSxvbkRyYWdFbmQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLmRyYWdnaW5nJiYoc2V0VGltZW91dChmdW5jdGlvbigpe190aGlzLmRyYWdnaW5nPSExLF90aGlzLmhpZGVUb29sdGlwKCksX3RoaXMuaXNDbGlja3x8KF90aGlzLnNldFBvc2l0aW9uKF90aGlzLm5ld1Bvc2l0aW9uKSxfdGhpcy4kcGFyZW50LmVtaXRDaGFuZ2UoKSl9LDApLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMub25EcmFnZ2luZyksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsdGhpcy5vbkRyYWdnaW5nKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy5vbkRyYWdFbmQpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsdGhpcy5vbkRyYWdFbmQpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsdGhpcy5vbkRyYWdFbmQpKX0sc2V0UG9zaXRpb246ZnVuY3Rpb24obmV3UG9zaXRpb24pe3ZhciBfdGhpczI9dGhpcztpZihudWxsIT09bmV3UG9zaXRpb24mJiFpc05hTihuZXdQb3NpdGlvbikpe25ld1Bvc2l0aW9uPDA/bmV3UG9zaXRpb249MDoxMDA8bmV3UG9zaXRpb24mJihuZXdQb3NpdGlvbj0xMDApO3ZhciBsZW5ndGhQZXJTdGVwPTEwMC8oKHRoaXMubWF4LXRoaXMubWluKS90aGlzLnN0ZXApLHZhbHVlPU1hdGgucm91bmQobmV3UG9zaXRpb24vbGVuZ3RoUGVyU3RlcCkqbGVuZ3RoUGVyU3RlcCoodGhpcy5tYXgtdGhpcy5taW4pKi4wMSt0aGlzLm1pbjt2YWx1ZT1wYXJzZUZsb2F0KHZhbHVlLnRvRml4ZWQodGhpcy5wcmVjaXNpb24pKSx0aGlzLiRlbWl0KCJpbnB1dCIsdmFsdWUpLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7X3RoaXMyLiRyZWZzLnRvb2x0aXAmJl90aGlzMi4kcmVmcy50b29sdGlwLnVwZGF0ZVBvcHBlcigpfSksdGhpcy5kcmFnZ2luZ3x8dGhpcy52YWx1ZT09PXRoaXMub2xkVmFsdWV8fCh0aGlzLm9sZFZhbHVlPXRoaXMudmFsdWUpfX19fSxidXR0b252dWVfdHlwZV90ZW1wbGF0ZV9pZF9lNzJkMmFkMl9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3NyY19idXR0b25fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9zbGlkZXIvc3JjL2J1dHRvbi52dWUiO3ZhciBzbGlkZXJfc3JjX2J1dHRvbj1zcmNfYnV0dG9uX2NvbXBvbmVudC5leHBvcnRzLHNsaWRlcl9zcmNfbWFpbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFNsaWRlciIsbWl4aW5zOltlbWl0dGVyX2RlZmF1bHQuYV0saW5qZWN0OntlbEZvcm06e2RlZmF1bHQ6IiJ9fSxwcm9wczp7bWluOnt0eXBlOk51bWJlcixkZWZhdWx0OjB9LG1heDp7dHlwZTpOdW1iZXIsZGVmYXVsdDoxMDB9LHN0ZXA6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MX0sdmFsdWU6e3R5cGU6W051bWJlcixBcnJheV0sZGVmYXVsdDowfSxzaG93SW5wdXQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxzaG93SW5wdXRDb250cm9sczp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGlucHV0U2l6ZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoic21hbGwifSxzaG93U3RvcHM6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxzaG93VG9vbHRpcDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGZvcm1hdFRvb2x0aXA6RnVuY3Rpb24sZGlzYWJsZWQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxyYW5nZTp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITF9LHZlcnRpY2FsOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX0saGVpZ2h0Ont0eXBlOlN0cmluZ30sZGVib3VuY2U6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MzAwfSxsYWJlbDp7dHlwZTpTdHJpbmd9LHRvb2x0aXBDbGFzczpTdHJpbmd9LGNvbXBvbmVudHM6e0VsSW5wdXROdW1iZXI6aW5wdXRfbnVtYmVyX2RlZmF1bHQuYSxTbGlkZXJCdXR0b246c2xpZGVyX3NyY19idXR0b259LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57Zmlyc3RWYWx1ZTpudWxsLHNlY29uZFZhbHVlOm51bGwsb2xkVmFsdWU6bnVsbCxkcmFnZ2luZzohMSxzbGlkZXJTaXplOjF9fSx3YXRjaDp7dmFsdWU6ZnVuY3Rpb24odmFsLG9sZFZhbCl7dGhpcy5kcmFnZ2luZ3x8QXJyYXkuaXNBcnJheSh2YWwpJiZBcnJheS5pc0FycmF5KG9sZFZhbCkmJnZhbC5ldmVyeShmdW5jdGlvbihpdGVtLGluZGV4KXtyZXR1cm4gaXRlbT09PW9sZFZhbFtpbmRleF19KXx8dGhpcy5zZXRWYWx1ZXMoKX0sZHJhZ2dpbmc6ZnVuY3Rpb24odmFsKXt2YWx8fHRoaXMuc2V0VmFsdWVzKCl9LGZpcnN0VmFsdWU6ZnVuY3Rpb24odmFsKXt0aGlzLnJhbmdlP3RoaXMuJGVtaXQoImlucHV0IixbdGhpcy5taW5WYWx1ZSx0aGlzLm1heFZhbHVlXSk6dGhpcy4kZW1pdCgiaW5wdXQiLHZhbCl9LHNlY29uZFZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yYW5nZSYmdGhpcy4kZW1pdCgiaW5wdXQiLFt0aGlzLm1pblZhbHVlLHRoaXMubWF4VmFsdWVdKX0sbWluOmZ1bmN0aW9uKCl7dGhpcy5zZXRWYWx1ZXMoKX0sbWF4OmZ1bmN0aW9uKCl7dGhpcy5zZXRWYWx1ZXMoKX19LG1ldGhvZHM6e3ZhbHVlQ2hhbmdlZDpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzO3JldHVybiB0aGlzLnJhbmdlPyFbdGhpcy5taW5WYWx1ZSx0aGlzLm1heFZhbHVlXS5ldmVyeShmdW5jdGlvbihpdGVtLGluZGV4KXtyZXR1cm4gaXRlbT09PV90aGlzLm9sZFZhbHVlW2luZGV4XX0pOnRoaXMudmFsdWUhPT10aGlzLm9sZFZhbHVlfSxzZXRWYWx1ZXM6ZnVuY3Rpb24oKXtpZih0aGlzLm1pbj50aGlzLm1heCljb25zb2xlLmVycm9yKCJbRWxlbWVudCBFcnJvcl1bU2xpZGVyXW1pbiBzaG91bGQgbm90IGJlIGdyZWF0ZXIgdGhhbiBtYXguIik7ZWxzZXt2YXIgdmFsPXRoaXMudmFsdWU7dGhpcy5yYW5nZSYmQXJyYXkuaXNBcnJheSh2YWwpP3ZhbFsxXTx0aGlzLm1pbj90aGlzLiRlbWl0KCJpbnB1dCIsW3RoaXMubWluLHRoaXMubWluXSk6dmFsWzBdPnRoaXMubWF4P3RoaXMuJGVtaXQoImlucHV0IixbdGhpcy5tYXgsdGhpcy5tYXhdKTp2YWxbMF08dGhpcy5taW4/dGhpcy4kZW1pdCgiaW5wdXQiLFt0aGlzLm1pbix2YWxbMV1dKTp2YWxbMV0+dGhpcy5tYXg/dGhpcy4kZW1pdCgiaW5wdXQiLFt2YWxbMF0sdGhpcy5tYXhdKToodGhpcy5maXJzdFZhbHVlPXZhbFswXSx0aGlzLnNlY29uZFZhbHVlPXZhbFsxXSx0aGlzLnZhbHVlQ2hhbmdlZCgpJiYodGhpcy5kaXNwYXRjaCgiRWxGb3JtSXRlbSIsImVsLmZvcm0uY2hhbmdlIixbdGhpcy5taW5WYWx1ZSx0aGlzLm1heFZhbHVlXSksdGhpcy5vbGRWYWx1ZT12YWwuc2xpY2UoKSkpOnRoaXMucmFuZ2V8fCJudW1iZXIiIT10eXBlb2YgdmFsfHxpc05hTih2YWwpfHwodmFsPHRoaXMubWluP3RoaXMuJGVtaXQoImlucHV0Iix0aGlzLm1pbik6dmFsPnRoaXMubWF4P3RoaXMuJGVtaXQoImlucHV0Iix0aGlzLm1heCk6KHRoaXMuZmlyc3RWYWx1ZT12YWwsdGhpcy52YWx1ZUNoYW5nZWQoKSYmKHRoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmNoYW5nZSIsdmFsKSx0aGlzLm9sZFZhbHVlPXZhbCkpKX19LHNldFBvc2l0aW9uOmZ1bmN0aW9uKHBlcmNlbnQpe3ZhciB0YXJnZXRWYWx1ZT10aGlzLm1pbitwZXJjZW50Kih0aGlzLm1heC10aGlzLm1pbikvMTAwO2lmKHRoaXMucmFuZ2Upe3ZhciBidXR0b249dm9pZCAwO2J1dHRvbj1NYXRoLmFicyh0aGlzLm1pblZhbHVlLXRhcmdldFZhbHVlKTxNYXRoLmFicyh0aGlzLm1heFZhbHVlLXRhcmdldFZhbHVlKT90aGlzLmZpcnN0VmFsdWU8dGhpcy5zZWNvbmRWYWx1ZT8iYnV0dG9uMSI6ImJ1dHRvbjIiOnRoaXMuZmlyc3RWYWx1ZT50aGlzLnNlY29uZFZhbHVlPyJidXR0b24xIjoiYnV0dG9uMiIsdGhpcy4kcmVmc1tidXR0b25dLnNldFBvc2l0aW9uKHBlcmNlbnQpfWVsc2UgdGhpcy4kcmVmcy5idXR0b24xLnNldFBvc2l0aW9uKHBlcmNlbnQpfSxvblNsaWRlckNsaWNrOmZ1bmN0aW9uKGV2ZW50KXtpZighdGhpcy5zbGlkZXJEaXNhYmxlZCYmIXRoaXMuZHJhZ2dpbmcpe2lmKHRoaXMucmVzZXRTaXplKCksdGhpcy52ZXJ0aWNhbCl7dmFyIHNsaWRlck9mZnNldEJvdHRvbT10aGlzLiRyZWZzLnNsaWRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b207dGhpcy5zZXRQb3NpdGlvbigoc2xpZGVyT2Zmc2V0Qm90dG9tLWV2ZW50LmNsaWVudFkpL3RoaXMuc2xpZGVyU2l6ZSoxMDApfWVsc2V7dmFyIHNsaWRlck9mZnNldExlZnQ9dGhpcy4kcmVmcy5zbGlkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDt0aGlzLnNldFBvc2l0aW9uKChldmVudC5jbGllbnRYLXNsaWRlck9mZnNldExlZnQpL3RoaXMuc2xpZGVyU2l6ZSoxMDApfXRoaXMuZW1pdENoYW5nZSgpfX0scmVzZXRTaXplOmZ1bmN0aW9uKCl7dGhpcy4kcmVmcy5zbGlkZXImJih0aGlzLnNsaWRlclNpemU9dGhpcy4kcmVmcy5zbGlkZXJbImNsaWVudCIrKHRoaXMudmVydGljYWw/IkhlaWdodCI6IldpZHRoIildKX0sZW1pdENoYW5nZTpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpczt0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzMi4kZW1pdCgiY2hhbmdlIixfdGhpczIucmFuZ2U/W190aGlzMi5taW5WYWx1ZSxfdGhpczIubWF4VmFsdWVdOl90aGlzMi52YWx1ZSl9KX19LGNvbXB1dGVkOntzdG9wczpmdW5jdGlvbigpe3ZhciBfdGhpczM9dGhpcztpZighdGhpcy5zaG93U3RvcHN8fHRoaXMubWluPnRoaXMubWF4KXJldHVybltdO2lmKDA9PT10aGlzLnN0ZXApcmV0dXJuW107Zm9yKHZhciBzdG9wQ291bnQ9KHRoaXMubWF4LXRoaXMubWluKS90aGlzLnN0ZXAsc3RlcFdpZHRoPTEwMCp0aGlzLnN0ZXAvKHRoaXMubWF4LXRoaXMubWluKSxyZXN1bHQ9W10saT0xO2k8c3RvcENvdW50O2krKylyZXN1bHQucHVzaChpKnN0ZXBXaWR0aCk7cmV0dXJuIHRoaXMucmFuZ2U/cmVzdWx0LmZpbHRlcihmdW5jdGlvbihzdGVwKXtyZXR1cm4gc3RlcDwxMDAqKF90aGlzMy5taW5WYWx1ZS1fdGhpczMubWluKS8oX3RoaXMzLm1heC1fdGhpczMubWluKXx8c3RlcD4xMDAqKF90aGlzMy5tYXhWYWx1ZS1fdGhpczMubWluKS8oX3RoaXMzLm1heC1fdGhpczMubWluKX0pOnJlc3VsdC5maWx0ZXIoZnVuY3Rpb24oc3RlcCl7cmV0dXJuIHN0ZXA+MTAwKihfdGhpczMuZmlyc3RWYWx1ZS1fdGhpczMubWluKS8oX3RoaXMzLm1heC1fdGhpczMubWluKX0pfSxtaW5WYWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbih0aGlzLmZpcnN0VmFsdWUsdGhpcy5zZWNvbmRWYWx1ZSl9LG1heFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KHRoaXMuZmlyc3RWYWx1ZSx0aGlzLnNlY29uZFZhbHVlKX0sYmFyU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJhbmdlPzEwMCoodGhpcy5tYXhWYWx1ZS10aGlzLm1pblZhbHVlKS8odGhpcy5tYXgtdGhpcy5taW4pKyIlIjoxMDAqKHRoaXMuZmlyc3RWYWx1ZS10aGlzLm1pbikvKHRoaXMubWF4LXRoaXMubWluKSsiJSJ9LGJhclN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmFuZ2U/MTAwKih0aGlzLm1pblZhbHVlLXRoaXMubWluKS8odGhpcy5tYXgtdGhpcy5taW4pKyIlIjoiMCUifSxwcmVjaXNpb246ZnVuY3Rpb24oKXt2YXIgcHJlY2lzaW9ucz1bdGhpcy5taW4sdGhpcy5tYXgsdGhpcy5zdGVwXS5tYXAoZnVuY3Rpb24oaXRlbSl7dmFyIGRlY2ltYWw9KCIiK2l0ZW0pLnNwbGl0KCIuIilbMV07cmV0dXJuIGRlY2ltYWw/ZGVjaW1hbC5sZW5ndGg6MH0pO3JldHVybiBNYXRoLm1heC5hcHBseShudWxsLHByZWNpc2lvbnMpfSxydW53YXlTdHlsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZlcnRpY2FsP3toZWlnaHQ6dGhpcy5oZWlnaHR9Ont9fSxiYXJTdHlsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZlcnRpY2FsP3toZWlnaHQ6dGhpcy5iYXJTaXplLGJvdHRvbTp0aGlzLmJhclN0YXJ0fTp7d2lkdGg6dGhpcy5iYXJTaXplLGxlZnQ6dGhpcy5iYXJTdGFydH19LHNsaWRlckRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzYWJsZWR8fCh0aGlzLmVsRm9ybXx8e30pLmRpc2FibGVkfX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciB2YWx1ZXRleHQ9dm9pZCAwO3ZhbHVldGV4dD10aGlzLnJhbmdlPyhBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpPyh0aGlzLmZpcnN0VmFsdWU9TWF0aC5tYXgodGhpcy5taW4sdGhpcy52YWx1ZVswXSksdGhpcy5zZWNvbmRWYWx1ZT1NYXRoLm1pbih0aGlzLm1heCx0aGlzLnZhbHVlWzFdKSk6KHRoaXMuZmlyc3RWYWx1ZT10aGlzLm1pbix0aGlzLnNlY29uZFZhbHVlPXRoaXMubWF4KSx0aGlzLm9sZFZhbHVlPVt0aGlzLmZpcnN0VmFsdWUsdGhpcy5zZWNvbmRWYWx1ZV0sdGhpcy5maXJzdFZhbHVlKyItIit0aGlzLnNlY29uZFZhbHVlKTooIm51bWJlciIhPXR5cGVvZiB0aGlzLnZhbHVlfHxpc05hTih0aGlzLnZhbHVlKT90aGlzLmZpcnN0VmFsdWU9dGhpcy5taW46dGhpcy5maXJzdFZhbHVlPU1hdGgubWluKHRoaXMubWF4LE1hdGgubWF4KHRoaXMubWluLHRoaXMudmFsdWUpKSx0aGlzLm9sZFZhbHVlPXRoaXMuZmlyc3RWYWx1ZSx0aGlzLmZpcnN0VmFsdWUpLHRoaXMuJGVsLnNldEF0dHJpYnV0ZSgiYXJpYS12YWx1ZXRleHQiLHZhbHVldGV4dCksdGhpcy4kZWwuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIix0aGlzLmxhYmVsP3RoaXMubGFiZWw6InNsaWRlciBiZXR3ZWVuICIrdGhpcy5taW4rIiBhbmQgIit0aGlzLm1heCksdGhpcy5yZXNldFNpemUoKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIix0aGlzLnJlc2V0U2l6ZSl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIix0aGlzLnJlc2V0U2l6ZSl9fSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfMzI3MDg2NDRfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtzbGlkZXJfc3JjX21haW5fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9zbGlkZXIvc3JjL21haW4udnVlIjt2YXIgc2xpZGVyX3NyY19tYWluPXNsaWRlcl9zcmNfbWFpbl9jb21wb25lbnQuZXhwb3J0cztzbGlkZXJfc3JjX21haW4uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc2xpZGVyX3NyY19tYWluLm5hbWUsc2xpZGVyX3NyY19tYWluKX07dmFyIHNsaWRlcj1zbGlkZXJfc3JjX21haW4sbG9hZGluZ3Z1ZV90eXBlX3RlbXBsYXRlX2lkX2VlZTBhN2FjX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToiZWwtbG9hZGluZy1mYWRlIn0sb246eyJhZnRlci1sZWF2ZSI6X3ZtLmhhbmRsZUFmdGVyTGVhdmV9fSxbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS52aXNpYmxlLGV4cHJlc3Npb246InZpc2libGUifV0sc3RhdGljQ2xhc3M6ImVsLWxvYWRpbmctbWFzayIsY2xhc3M6W192bS5jdXN0b21DbGFzcyx7ImlzLWZ1bGxzY3JlZW4iOl92bS5mdWxsc2NyZWVufV0sc3R5bGU6e2JhY2tncm91bmRDb2xvcjpfdm0uYmFja2dyb3VuZHx8IiJ9fSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1sb2FkaW5nLXNwaW5uZXIifSxbX3ZtLnNwaW5uZXI/X2MoImkiLHtjbGFzczpfdm0uc3Bpbm5lcn0pOl9jKCJzdmciLHtzdGF0aWNDbGFzczoiY2lyY3VsYXIiLGF0dHJzOnt2aWV3Qm94OiIyNSAyNSA1MCA1MCJ9fSxbX2MoImNpcmNsZSIse3N0YXRpY0NsYXNzOiJwYXRoIixhdHRyczp7Y3g6IjUwIixjeToiNTAiLHI6IjIwIixmaWxsOiJub25lIn19KV0pLF92bS50ZXh0P19jKCJwIix7c3RhdGljQ2xhc3M6ImVsLWxvYWRpbmctdGV4dCJ9LFtfdm0uX3YoX3ZtLl9zKF92bS50ZXh0KSldKTpfdm0uX2UoKV0pXSldKX07bG9hZGluZ3Z1ZV90eXBlX3RlbXBsYXRlX2lkX2VlZTBhN2FjX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBsb2FkaW5nX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe2RhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGV4dDpudWxsLHNwaW5uZXI6bnVsbCxiYWNrZ3JvdW5kOm51bGwsZnVsbHNjcmVlbjohMCx2aXNpYmxlOiExLGN1c3RvbUNsYXNzOiIifX0sbWV0aG9kczp7aGFuZGxlQWZ0ZXJMZWF2ZTpmdW5jdGlvbigpe3RoaXMuJGVtaXQoImFmdGVyLWxlYXZlIil9LHNldFRleHQ6ZnVuY3Rpb24odGV4dCl7dGhpcy50ZXh0PXRleHR9fX0sbG9hZGluZ3Z1ZV90eXBlX3RlbXBsYXRlX2lkX2VlZTBhN2FjX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7bG9hZGluZ19jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2xvYWRpbmcvc3JjL2xvYWRpbmcudnVlIjt2YXIgbG9hZGluZz1sb2FkaW5nX2NvbXBvbmVudC5leHBvcnRzLGFmdGVyX2xlYXZlXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDI4KSxhZnRlcl9sZWF2ZV9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihhZnRlcl9sZWF2ZV8pLE1hc2s9ZXh0ZXJuYWxfdnVlX2RlZmF1bHQuYS5leHRlbmQobG9hZGluZyksbG9hZGluZ0RpcmVjdGl2ZT17aW5zdGFsbDpmdW5jdGlvbihWdWUpe2lmKCFWdWUucHJvdG90eXBlLiRpc1NlcnZlcil7dmFyIHRvZ2dsZUxvYWRpbmc9ZnVuY3Rpb24oZWwsYmluZGluZyl7YmluZGluZy52YWx1ZT9WdWUubmV4dFRpY2soZnVuY3Rpb24oKXtiaW5kaW5nLm1vZGlmaWVycy5mdWxsc2NyZWVuPyhlbC5vcmlnaW5hbFBvc2l0aW9uPU9iamVjdChkb21fLmdldFN0eWxlKShkb2N1bWVudC5ib2R5LCJwb3NpdGlvbiIpLGVsLm9yaWdpbmFsT3ZlcmZsb3c9T2JqZWN0KGRvbV8uZ2V0U3R5bGUpKGRvY3VtZW50LmJvZHksIm92ZXJmbG93IiksZWwubWFza1N0eWxlLnpJbmRleD1wb3B1cF8uUG9wdXBNYW5hZ2VyLm5leHRaSW5kZXgoKSxPYmplY3QoZG9tXy5hZGRDbGFzcykoZWwubWFzaywiaXMtZnVsbHNjcmVlbiIpLGluc2VydERvbShkb2N1bWVudC5ib2R5LGVsLGJpbmRpbmcpKTooT2JqZWN0KGRvbV8ucmVtb3ZlQ2xhc3MpKGVsLm1hc2ssImlzLWZ1bGxzY3JlZW4iKSxiaW5kaW5nLm1vZGlmaWVycy5ib2R5PyhlbC5vcmlnaW5hbFBvc2l0aW9uPU9iamVjdChkb21fLmdldFN0eWxlKShkb2N1bWVudC5ib2R5LCJwb3NpdGlvbiIpLFsidG9wIiwibGVmdCJdLmZvckVhY2goZnVuY3Rpb24ocHJvcGVydHkpe3ZhciBzY3JvbGw9InRvcCI9PT1wcm9wZXJ0eT8ic2Nyb2xsVG9wIjoic2Nyb2xsTGVmdCI7ZWwubWFza1N0eWxlW3Byb3BlcnR5XT1lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtwcm9wZXJ0eV0rZG9jdW1lbnQuYm9keVtzY3JvbGxdK2RvY3VtZW50LmRvY3VtZW50RWxlbWVudFtzY3JvbGxdLXBhcnNlSW50KE9iamVjdChkb21fLmdldFN0eWxlKShkb2N1bWVudC5ib2R5LCJtYXJnaW4tIitwcm9wZXJ0eSksMTApKyJweCJ9KSxbImhlaWdodCIsIndpZHRoIl0uZm9yRWFjaChmdW5jdGlvbihwcm9wZXJ0eSl7ZWwubWFza1N0eWxlW3Byb3BlcnR5XT1lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtwcm9wZXJ0eV0rInB4In0pLGluc2VydERvbShkb2N1bWVudC5ib2R5LGVsLGJpbmRpbmcpKTooZWwub3JpZ2luYWxQb3NpdGlvbj1PYmplY3QoZG9tXy5nZXRTdHlsZSkoZWwsInBvc2l0aW9uIiksaW5zZXJ0RG9tKGVsLGVsLGJpbmRpbmcpKSl9KTooYWZ0ZXJfbGVhdmVfZGVmYXVsdCgpKGVsLmluc3RhbmNlLGZ1bmN0aW9uKF8pe2VsLmRvbVZpc2libGU9ITE7dmFyIHRhcmdldD1iaW5kaW5nLm1vZGlmaWVycy5mdWxsc2NyZWVufHxiaW5kaW5nLm1vZGlmaWVycy5ib2R5P2RvY3VtZW50LmJvZHk6ZWw7T2JqZWN0KGRvbV8ucmVtb3ZlQ2xhc3MpKHRhcmdldCwiZWwtbG9hZGluZy1wYXJlbnQtLXJlbGF0aXZlIiksT2JqZWN0KGRvbV8ucmVtb3ZlQ2xhc3MpKHRhcmdldCwiZWwtbG9hZGluZy1wYXJlbnQtLWhpZGRlbiIpLGVsLmluc3RhbmNlLmhpZGluZz0hMX0sMzAwLCEwKSxlbC5pbnN0YW5jZS52aXNpYmxlPSExLGVsLmluc3RhbmNlLmhpZGluZz0hMCl9LGluc2VydERvbT1mdW5jdGlvbihwYXJlbnQsZWwsYmluZGluZyl7ZWwuZG9tVmlzaWJsZXx8Im5vbmUiPT09T2JqZWN0KGRvbV8uZ2V0U3R5bGUpKGVsLCJkaXNwbGF5Iil8fCJoaWRkZW4iPT09T2JqZWN0KGRvbV8uZ2V0U3R5bGUpKGVsLCJ2aXNpYmlsaXR5Iil8fChPYmplY3Qua2V5cyhlbC5tYXNrU3R5bGUpLmZvckVhY2goZnVuY3Rpb24ocHJvcGVydHkpe2VsLm1hc2suc3R5bGVbcHJvcGVydHldPWVsLm1hc2tTdHlsZVtwcm9wZXJ0eV19KSwiYWJzb2x1dGUiIT09ZWwub3JpZ2luYWxQb3NpdGlvbiYmImZpeGVkIiE9PWVsLm9yaWdpbmFsUG9zaXRpb24mJk9iamVjdChkb21fLmFkZENsYXNzKShwYXJlbnQsImVsLWxvYWRpbmctcGFyZW50LS1yZWxhdGl2ZSIpLGJpbmRpbmcubW9kaWZpZXJzLmZ1bGxzY3JlZW4mJmJpbmRpbmcubW9kaWZpZXJzLmxvY2smJk9iamVjdChkb21fLmFkZENsYXNzKShwYXJlbnQsImVsLWxvYWRpbmctcGFyZW50LS1oaWRkZW4iKSxlbC5kb21WaXNpYmxlPSEwLHBhcmVudC5hcHBlbmRDaGlsZChlbC5tYXNrKSxWdWUubmV4dFRpY2soZnVuY3Rpb24oKXtlbC5pbnN0YW5jZS5oaWRpbmc/ZWwuaW5zdGFuY2UuJGVtaXQoImFmdGVyLWxlYXZlIik6ZWwuaW5zdGFuY2UudmlzaWJsZT0hMH0pLGVsLmRvbUluc2VydGVkPSEwKX07VnVlLmRpcmVjdGl2ZSgibG9hZGluZyIse2JpbmQ6ZnVuY3Rpb24oZWwsYmluZGluZyx2bm9kZSl7dmFyIHRleHRFeHI9ZWwuZ2V0QXR0cmlidXRlKCJlbGVtZW50LWxvYWRpbmctdGV4dCIpLHNwaW5uZXJFeHI9ZWwuZ2V0QXR0cmlidXRlKCJlbGVtZW50LWxvYWRpbmctc3Bpbm5lciIpLGJhY2tncm91bmRFeHI9ZWwuZ2V0QXR0cmlidXRlKCJlbGVtZW50LWxvYWRpbmctYmFja2dyb3VuZCIpLGN1c3RvbUNsYXNzRXhyPWVsLmdldEF0dHJpYnV0ZSgiZWxlbWVudC1sb2FkaW5nLWN1c3RvbS1jbGFzcyIpLHZtPXZub2RlLmNvbnRleHQsbWFzaz1uZXcgTWFzayh7ZWw6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZGF0YTp7dGV4dDp2bSYmdm1bdGV4dEV4cl18fHRleHRFeHIsc3Bpbm5lcjp2bSYmdm1bc3Bpbm5lckV4cl18fHNwaW5uZXJFeHIsYmFja2dyb3VuZDp2bSYmdm1bYmFja2dyb3VuZEV4cl18fGJhY2tncm91bmRFeHIsY3VzdG9tQ2xhc3M6dm0mJnZtW2N1c3RvbUNsYXNzRXhyXXx8Y3VzdG9tQ2xhc3NFeHIsZnVsbHNjcmVlbjohIWJpbmRpbmcubW9kaWZpZXJzLmZ1bGxzY3JlZW59fSk7ZWwuaW5zdGFuY2U9bWFzayxlbC5tYXNrPW1hc2suJGVsLGVsLm1hc2tTdHlsZT17fSxiaW5kaW5nLnZhbHVlJiZ0b2dnbGVMb2FkaW5nKGVsLGJpbmRpbmcpfSx1cGRhdGU6ZnVuY3Rpb24oZWwsYmluZGluZyl7ZWwuaW5zdGFuY2Uuc2V0VGV4dChlbC5nZXRBdHRyaWJ1dGUoImVsZW1lbnQtbG9hZGluZy10ZXh0IikpLGJpbmRpbmcub2xkVmFsdWUhPT1iaW5kaW5nLnZhbHVlJiZ0b2dnbGVMb2FkaW5nKGVsLGJpbmRpbmcpfSx1bmJpbmQ6ZnVuY3Rpb24oZWwsYmluZGluZyl7ZWwuZG9tSW5zZXJ0ZWQmJihlbC5tYXNrJiZlbC5tYXNrLnBhcmVudE5vZGUmJmVsLm1hc2sucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbC5tYXNrKSx0b2dnbGVMb2FkaW5nKGVsLHt2YWx1ZTohMSxtb2RpZmllcnM6YmluZGluZy5tb2RpZmllcnN9KSksZWwuaW5zdGFuY2UmJmVsLmluc3RhbmNlLiRkZXN0cm95KCl9fSl9fX0sc3JjX2RpcmVjdGl2ZT1sb2FkaW5nRGlyZWN0aXZlLExvYWRpbmdDb25zdHJ1Y3Rvcj1leHRlcm5hbF92dWVfZGVmYXVsdC5hLmV4dGVuZChsb2FkaW5nKSxzcmNfZGVmYXVsdHM9e3RleHQ6bnVsbCxmdWxsc2NyZWVuOiEwLGJvZHk6ITEsbG9jazohMSxjdXN0b21DbGFzczoiIn0sZnVsbHNjcmVlbkxvYWRpbmc9dm9pZCAwO0xvYWRpbmdDb25zdHJ1Y3Rvci5wcm90b3R5cGUub3JpZ2luYWxQb3NpdGlvbj0iIixMb2FkaW5nQ29uc3RydWN0b3IucHJvdG90eXBlLm9yaWdpbmFsT3ZlcmZsb3c9IiIsTG9hZGluZ0NvbnN0cnVjdG9yLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzO3RoaXMuZnVsbHNjcmVlbiYmKGZ1bGxzY3JlZW5Mb2FkaW5nPXZvaWQgMCksYWZ0ZXJfbGVhdmVfZGVmYXVsdCgpKHRoaXMsZnVuY3Rpb24oXyl7dmFyIHRhcmdldD1fdGhpcy5mdWxsc2NyZWVufHxfdGhpcy5ib2R5P2RvY3VtZW50LmJvZHk6X3RoaXMudGFyZ2V0O09iamVjdChkb21fLnJlbW92ZUNsYXNzKSh0YXJnZXQsImVsLWxvYWRpbmctcGFyZW50LS1yZWxhdGl2ZSIpLE9iamVjdChkb21fLnJlbW92ZUNsYXNzKSh0YXJnZXQsImVsLWxvYWRpbmctcGFyZW50LS1oaWRkZW4iKSxfdGhpcy4kZWwmJl90aGlzLiRlbC5wYXJlbnROb2RlJiZfdGhpcy4kZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChfdGhpcy4kZWwpLF90aGlzLiRkZXN0cm95KCl9LDMwMCksdGhpcy52aXNpYmxlPSExfTt2YXIgc3JjPWZ1bmN0aW9uKCl7dmFyIG9wdGlvbnM9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2lmKCFleHRlcm5hbF92dWVfZGVmYXVsdC5hLnByb3RvdHlwZS4kaXNTZXJ2ZXIpe2lmKCJzdHJpbmciPT10eXBlb2Yob3B0aW9ucz1tZXJnZV9kZWZhdWx0KCkoe30sc3JjX2RlZmF1bHRzLG9wdGlvbnMpKS50YXJnZXQmJihvcHRpb25zLnRhcmdldD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMudGFyZ2V0KSksb3B0aW9ucy50YXJnZXQ9b3B0aW9ucy50YXJnZXR8fGRvY3VtZW50LmJvZHksb3B0aW9ucy50YXJnZXQhPT1kb2N1bWVudC5ib2R5P29wdGlvbnMuZnVsbHNjcmVlbj0hMTpvcHRpb25zLmJvZHk9ITAsb3B0aW9ucy5mdWxsc2NyZWVuJiZmdWxsc2NyZWVuTG9hZGluZylyZXR1cm4gZnVsbHNjcmVlbkxvYWRpbmc7dmFyIHBhcmVudD1vcHRpb25zLmJvZHk/ZG9jdW1lbnQuYm9keTpvcHRpb25zLnRhcmdldCxpbnN0YW5jZT1uZXcgTG9hZGluZ0NvbnN0cnVjdG9yKHtlbDpkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxkYXRhOm9wdGlvbnN9KTtyZXR1cm4gZnVuY3Rpb24ob3B0aW9ucyxwYXJlbnQsaW5zdGFuY2Upe3ZhciBtYXNrU3R5bGU9e307b3B0aW9ucy5mdWxsc2NyZWVuPyhpbnN0YW5jZS5vcmlnaW5hbFBvc2l0aW9uPU9iamVjdChkb21fLmdldFN0eWxlKShkb2N1bWVudC5ib2R5LCJwb3NpdGlvbiIpLGluc3RhbmNlLm9yaWdpbmFsT3ZlcmZsb3c9T2JqZWN0KGRvbV8uZ2V0U3R5bGUpKGRvY3VtZW50LmJvZHksIm92ZXJmbG93IiksbWFza1N0eWxlLnpJbmRleD1wb3B1cF8uUG9wdXBNYW5hZ2VyLm5leHRaSW5kZXgoKSk6b3B0aW9ucy5ib2R5PyhpbnN0YW5jZS5vcmlnaW5hbFBvc2l0aW9uPU9iamVjdChkb21fLmdldFN0eWxlKShkb2N1bWVudC5ib2R5LCJwb3NpdGlvbiIpLFsidG9wIiwibGVmdCJdLmZvckVhY2goZnVuY3Rpb24ocHJvcGVydHkpe3ZhciBzY3JvbGw9InRvcCI9PT1wcm9wZXJ0eT8ic2Nyb2xsVG9wIjoic2Nyb2xsTGVmdCI7bWFza1N0eWxlW3Byb3BlcnR5XT1vcHRpb25zLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtwcm9wZXJ0eV0rZG9jdW1lbnQuYm9keVtzY3JvbGxdK2RvY3VtZW50LmRvY3VtZW50RWxlbWVudFtzY3JvbGxdKyJweCJ9KSxbImhlaWdodCIsIndpZHRoIl0uZm9yRWFjaChmdW5jdGlvbihwcm9wZXJ0eSl7bWFza1N0eWxlW3Byb3BlcnR5XT1vcHRpb25zLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtwcm9wZXJ0eV0rInB4In0pKTppbnN0YW5jZS5vcmlnaW5hbFBvc2l0aW9uPU9iamVjdChkb21fLmdldFN0eWxlKShwYXJlbnQsInBvc2l0aW9uIiksT2JqZWN0LmtleXMobWFza1N0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uKHByb3BlcnR5KXtpbnN0YW5jZS4kZWwuc3R5bGVbcHJvcGVydHldPW1hc2tTdHlsZVtwcm9wZXJ0eV19KX0ob3B0aW9ucyxwYXJlbnQsaW5zdGFuY2UpLCJhYnNvbHV0ZSIhPT1pbnN0YW5jZS5vcmlnaW5hbFBvc2l0aW9uJiYiZml4ZWQiIT09aW5zdGFuY2Uub3JpZ2luYWxQb3NpdGlvbiYmT2JqZWN0KGRvbV8uYWRkQ2xhc3MpKHBhcmVudCwiZWwtbG9hZGluZy1wYXJlbnQtLXJlbGF0aXZlIiksb3B0aW9ucy5mdWxsc2NyZWVuJiZvcHRpb25zLmxvY2smJk9iamVjdChkb21fLmFkZENsYXNzKShwYXJlbnQsImVsLWxvYWRpbmctcGFyZW50LS1oaWRkZW4iKSxwYXJlbnQuYXBwZW5kQ2hpbGQoaW5zdGFuY2UuJGVsKSxleHRlcm5hbF92dWVfZGVmYXVsdC5hLm5leHRUaWNrKGZ1bmN0aW9uKCl7aW5zdGFuY2UudmlzaWJsZT0hMH0pLG9wdGlvbnMuZnVsbHNjcmVlbiYmKGZ1bGxzY3JlZW5Mb2FkaW5nPWluc3RhbmNlKSxpbnN0YW5jZX19LHBhY2thZ2VzX2xvYWRpbmc9e2luc3RhbGw6ZnVuY3Rpb24oVnVlKXtWdWUudXNlKHNyY19kaXJlY3RpdmUpLFZ1ZS5wcm90b3R5cGUuJGxvYWRpbmc9c3JjfSxkaXJlY3RpdmU6c3JjX2RpcmVjdGl2ZSxzZXJ2aWNlOnNyY30saWNvbnZ1ZV90eXBlX3RlbXBsYXRlX2lkX2NiM2ZlN2Y0X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoImkiLHtjbGFzczoiZWwtaWNvbi0iK3RoaXMubmFtZX0pfTtpY29udnVlX3R5cGVfdGVtcGxhdGVfaWRfY2IzZmU3ZjRfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGljb25fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxJY29uIixwcm9wczp7bmFtZTpTdHJpbmd9fSxpY29udnVlX3R5cGVfdGVtcGxhdGVfaWRfY2IzZmU3ZjRfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtpY29uX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvaWNvbi9zcmMvaWNvbi52dWUiO3ZhciBpY29uPWljb25fY29tcG9uZW50LmV4cG9ydHM7aWNvbi5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChpY29uLm5hbWUsaWNvbil9O3ZhciBwYWNrYWdlc19pY29uPWljb24sc3JjX3Jvdz17bmFtZToiRWxSb3ciLGNvbXBvbmVudE5hbWU6IkVsUm93Iixwcm9wczp7dGFnOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJkaXYifSxndXR0ZXI6TnVtYmVyLHR5cGU6U3RyaW5nLGp1c3RpZnk6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6InN0YXJ0In0sYWxpZ246e3R5cGU6U3RyaW5nLGRlZmF1bHQ6InRvcCJ9fSxjb21wdXRlZDp7c3R5bGU6ZnVuY3Rpb24oKXt2YXIgcmV0PXt9O3JldHVybiB0aGlzLmd1dHRlciYmKHJldC5tYXJnaW5MZWZ0PSItIit0aGlzLmd1dHRlci8yKyJweCIscmV0Lm1hcmdpblJpZ2h0PXJldC5tYXJnaW5MZWZ0KSxyZXR9fSxyZW5kZXI6ZnVuY3Rpb24oaCl7cmV0dXJuIGgodGhpcy50YWcse2NsYXNzOlsiZWwtcm93Iiwic3RhcnQiIT09dGhpcy5qdXN0aWZ5PyJpcy1qdXN0aWZ5LSIrdGhpcy5qdXN0aWZ5OiIiLCJ0b3AiIT09dGhpcy5hbGlnbj8iaXMtYWxpZ24tIit0aGlzLmFsaWduOiIiLHsiZWwtcm93LS1mbGV4IjoiZmxleCI9PT10aGlzLnR5cGV9XSxzdHlsZTp0aGlzLnN0eWxlfSx0aGlzLiRzbG90cy5kZWZhdWx0KX0saW5zdGFsbDpmdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc3JjX3Jvdy5uYW1lLHNyY19yb3cpfX0scGFja2FnZXNfcm93PXNyY19yb3csY29sX3R5cGVvZj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqfTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2Ygb2JqfSxjb2w9e25hbWU6IkVsQ29sIixwcm9wczp7c3Bhbjp7dHlwZTpOdW1iZXIsZGVmYXVsdDoyNH0sdGFnOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJkaXYifSxvZmZzZXQ6TnVtYmVyLHB1bGw6TnVtYmVyLHB1c2g6TnVtYmVyLHhzOltOdW1iZXIsT2JqZWN0XSxzbTpbTnVtYmVyLE9iamVjdF0sbWQ6W051bWJlcixPYmplY3RdLGxnOltOdW1iZXIsT2JqZWN0XSx4bDpbTnVtYmVyLE9iamVjdF19LGNvbXB1dGVkOntndXR0ZXI6ZnVuY3Rpb24oKXtmb3IodmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7cGFyZW50JiYiRWxSb3ciIT09cGFyZW50LiRvcHRpb25zLmNvbXBvbmVudE5hbWU7KXBhcmVudD1wYXJlbnQuJHBhcmVudDtyZXR1cm4gcGFyZW50P3BhcmVudC5ndXR0ZXI6MH19LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgX3RoaXM9dGhpcyxjbGFzc0xpc3Q9W10sc3R5bGU9e307cmV0dXJuIHRoaXMuZ3V0dGVyJiYoc3R5bGUucGFkZGluZ0xlZnQ9dGhpcy5ndXR0ZXIvMisicHgiLHN0eWxlLnBhZGRpbmdSaWdodD1zdHlsZS5wYWRkaW5nTGVmdCksWyJzcGFuIiwib2Zmc2V0IiwicHVsbCIsInB1c2giXS5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApeyhfdGhpc1twcm9wXXx8MD09PV90aGlzW3Byb3BdKSYmY2xhc3NMaXN0LnB1c2goInNwYW4iIT09cHJvcD8iZWwtY29sLSIrcHJvcCsiLSIrX3RoaXNbcHJvcF06ImVsLWNvbC0iK190aGlzW3Byb3BdKX0pLFsieHMiLCJzbSIsIm1kIiwibGciLCJ4bCJdLmZvckVhY2goZnVuY3Rpb24oc2l6ZSl7aWYoIm51bWJlciI9PXR5cGVvZiBfdGhpc1tzaXplXSljbGFzc0xpc3QucHVzaCgiZWwtY29sLSIrc2l6ZSsiLSIrX3RoaXNbc2l6ZV0pO2Vsc2UgaWYoIm9iamVjdCI9PT1jb2xfdHlwZW9mKF90aGlzW3NpemVdKSl7dmFyIHByb3BzPV90aGlzW3NpemVdO09iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uKHByb3Ape2NsYXNzTGlzdC5wdXNoKCJzcGFuIiE9PXByb3A/ImVsLWNvbC0iK3NpemUrIi0iK3Byb3ArIi0iK3Byb3BzW3Byb3BdOiJlbC1jb2wtIitzaXplKyItIitwcm9wc1twcm9wXSl9KX19KSxoKHRoaXMudGFnLHtjbGFzczpbImVsLWNvbCIsY2xhc3NMaXN0XSxzdHlsZTpzdHlsZX0sdGhpcy4kc2xvdHMuZGVmYXVsdCl9LGluc3RhbGw6ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGNvbC5uYW1lLGNvbCl9fSxwYWNrYWdlc19jb2w9Y29sLHVwbG9hZF9saXN0dnVlX3R5cGVfdGVtcGxhdGVfaWRfMTczZmVkZjVfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygidHJhbnNpdGlvbi1ncm91cCIse2NsYXNzOlsiZWwtdXBsb2FkLWxpc3QiLCJlbC11cGxvYWQtbGlzdC0tIitfdm0ubGlzdFR5cGUseyJpcy1kaXNhYmxlZCI6X3ZtLmRpc2FibGVkfV0sYXR0cnM6e3RhZzoidWwiLG5hbWU6ImVsLWxpc3QifX0sX3ZtLl9sKF92bS5maWxlcyxmdW5jdGlvbihmaWxlKXtyZXR1cm4gX2MoImxpIix7a2V5OmZpbGUudWlkLGNsYXNzOlsiZWwtdXBsb2FkLWxpc3RfX2l0ZW0iLCJpcy0iK2ZpbGUuc3RhdHVzLF92bS5mb2N1c2luZz8iZm9jdXNpbmciOiIiXSxhdHRyczp7dGFiaW5kZXg6IjAifSxvbjp7a2V5ZG93bjpmdW5jdGlvbigkZXZlbnQpe2lmKCEoImJ1dHRvbiJpbiAkZXZlbnQpJiZfdm0uX2soJGV2ZW50LmtleUNvZGUsImRlbGV0ZSIsWzgsNDZdLCRldmVudC5rZXksWyJCYWNrc3BhY2UiLCJEZWxldGUiLCJEZWwiXSkpcmV0dXJuIG51bGw7IV92bS5kaXNhYmxlZCYmX3ZtLiRlbWl0KCJyZW1vdmUiLGZpbGUpfSxmb2N1czpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1c2luZz0hMH0sYmx1cjpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1c2luZz0hMX0sY2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uZm9jdXNpbmc9ITF9fX0sWyJ1cGxvYWRpbmciIT09ZmlsZS5zdGF0dXMmJi0xPFsicGljdHVyZS1jYXJkIiwicGljdHVyZSJdLmluZGV4T2YoX3ZtLmxpc3RUeXBlKT9fYygiaW1nIix7c3RhdGljQ2xhc3M6ImVsLXVwbG9hZC1saXN0X19pdGVtLXRodW1ibmFpbCIsYXR0cnM6e3NyYzpmaWxlLnVybCxhbHQ6IiJ9fSk6X3ZtLl9lKCksX2MoImEiLHtzdGF0aWNDbGFzczoiZWwtdXBsb2FkLWxpc3RfX2l0ZW0tbmFtZSIsb246e2NsaWNrOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhhbmRsZUNsaWNrKGZpbGUpfX19LFtfYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pY29uLWRvY3VtZW50In0pLF92bS5fdihfdm0uX3MoZmlsZS5uYW1lKSsiXG4gICAgIildKSxfYygibGFiZWwiLHtzdGF0aWNDbGFzczoiZWwtdXBsb2FkLWxpc3RfX2l0ZW0tc3RhdHVzLWxhYmVsIn0sW19jKCJpIix7Y2xhc3M6eyJlbC1pY29uLXVwbG9hZC1zdWNjZXNzIjohMCwiZWwtaWNvbi1jaXJjbGUtY2hlY2siOiJ0ZXh0Ij09PV92bS5saXN0VHlwZSwiZWwtaWNvbi1jaGVjayI6LTE8WyJwaWN0dXJlLWNhcmQiLCJwaWN0dXJlIl0uaW5kZXhPZihfdm0ubGlzdFR5cGUpfX0pXSksX3ZtLmRpc2FibGVkP192bS5fZSgpOl9jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWljb24tY2xvc2UiLG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe192bS4kZW1pdCgicmVtb3ZlIixmaWxlKX19fSksX3ZtLmRpc2FibGVkP192bS5fZSgpOl9jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWljb24tY2xvc2UtdGlwIn0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLnVwbG9hZC5kZWxldGVUaXAiKSkpXSksInVwbG9hZGluZyI9PT1maWxlLnN0YXR1cz9fYygiZWwtcHJvZ3Jlc3MiLHthdHRyczp7dHlwZToicGljdHVyZS1jYXJkIj09PV92bS5saXN0VHlwZT8iY2lyY2xlIjoibGluZSIsInN0cm9rZS13aWR0aCI6InBpY3R1cmUtY2FyZCI9PT1fdm0ubGlzdFR5cGU/NjoyLHBlcmNlbnRhZ2U6X3ZtLnBhcnNlUGVyY2VudGFnZShmaWxlLnBlcmNlbnRhZ2UpfX0pOl92bS5fZSgpLCJwaWN0dXJlLWNhcmQiPT09X3ZtLmxpc3RUeXBlP19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXVwbG9hZC1saXN0X19pdGVtLWFjdGlvbnMifSxbX3ZtLmhhbmRsZVByZXZpZXcmJiJwaWN0dXJlLWNhcmQiPT09X3ZtLmxpc3RUeXBlP19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXVwbG9hZC1saXN0X19pdGVtLXByZXZpZXciLG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe192bS5oYW5kbGVQcmV2aWV3KGZpbGUpfX19LFtfYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pY29uLXpvb20taW4ifSldKTpfdm0uX2UoKSxfdm0uZGlzYWJsZWQ/X3ZtLl9lKCk6X2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtdXBsb2FkLWxpc3RfX2l0ZW0tZGVsZXRlIixvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uJGVtaXQoInJlbW92ZSIsZmlsZSl9fX0sW19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWljb24tZGVsZXRlIn0pXSldKTpfdm0uX2UoKV0sMSl9KSwwKX07dXBsb2FkX2xpc3R2dWVfdHlwZV90ZW1wbGF0ZV9pZF8xNzNmZWRmNV9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgcHJvZ3Jlc3NfPV9fd2VicGFja19yZXF1aXJlX18oMjkpLHByb2dyZXNzX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKHByb2dyZXNzXyksdXBsb2FkX2xpc3RfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxVcGxvYWRMaXN0IixtaXhpbnM6W2xvY2FsZV9kZWZhdWx0LmFdLGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57Zm9jdXNpbmc6ITF9fSxjb21wb25lbnRzOntFbFByb2dyZXNzOnByb2dyZXNzX2RlZmF1bHQuYX0scHJvcHM6e2ZpbGVzOnt0eXBlOkFycmF5LGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm5bXX19LGRpc2FibGVkOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX0saGFuZGxlUHJldmlldzpGdW5jdGlvbixsaXN0VHlwZTpTdHJpbmd9LG1ldGhvZHM6e3BhcnNlUGVyY2VudGFnZTpmdW5jdGlvbih2YWwpe3JldHVybiBwYXJzZUludCh2YWwsMTApfSxoYW5kbGVDbGljazpmdW5jdGlvbihmaWxlKXt0aGlzLmhhbmRsZVByZXZpZXcmJnRoaXMuaGFuZGxlUHJldmlldyhmaWxlKX19fSx1cGxvYWRfbGlzdHZ1ZV90eXBlX3RlbXBsYXRlX2lkXzE3M2ZlZGY1X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7dXBsb2FkX2xpc3RfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy91cGxvYWQvc3JjL3VwbG9hZC1saXN0LnZ1ZSI7dmFyIHVwbG9hZF9saXN0PXVwbG9hZF9saXN0X2NvbXBvbmVudC5leHBvcnRzLGV4dGVybmFsX2JhYmVsX2hlbHBlcl92dWVfanN4X21lcmdlX3Byb3BzXz1fX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSxleHRlcm5hbF9iYWJlbF9oZWxwZXJfdnVlX2pzeF9tZXJnZV9wcm9wc19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihleHRlcm5hbF9iYWJlbF9oZWxwZXJfdnVlX2pzeF9tZXJnZV9wcm9wc18pO3ZhciB1cGxvYWRfZHJhZ2dlcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzdlYmJmMjE5X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7cmV0dXJuKF92bS5fc2VsZi5fY3x8X2gpKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtdXBsb2FkLWRyYWdnZXIiLGNsYXNzOnsiaXMtZHJhZ292ZXIiOl92bS5kcmFnb3Zlcn0sb246e2Ryb3A6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gJGV2ZW50LnByZXZlbnREZWZhdWx0KCksX3ZtLm9uRHJvcCgkZXZlbnQpfSxkcmFnb3ZlcjpmdW5jdGlvbigkZXZlbnQpe3JldHVybiAkZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0ub25EcmFnb3ZlcigkZXZlbnQpfSxkcmFnbGVhdmU6ZnVuY3Rpb24oJGV2ZW50KXskZXZlbnQucHJldmVudERlZmF1bHQoKSxfdm0uZHJhZ292ZXI9ITF9fX0sW192bS5fdCgiZGVmYXVsdCIpXSwyKX07dXBsb2FkX2RyYWdnZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF83ZWJiZjIxOV9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgdXBsb2FkX2RyYWdnZXJfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxVcGxvYWREcmFnIixwcm9wczp7ZGlzYWJsZWQ6Qm9vbGVhbn0saW5qZWN0Ont1cGxvYWRlcjp7ZGVmYXVsdDoiIn19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57ZHJhZ292ZXI6ITF9fSxtZXRob2RzOntvbkRyYWdvdmVyOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZHx8KHRoaXMuZHJhZ292ZXI9ITApfSxvbkRyb3A6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuZGlzYWJsZWQmJnRoaXMudXBsb2FkZXIpe3ZhciBhY2NlcHQ9dGhpcy51cGxvYWRlci5hY2NlcHQ7dGhpcy5kcmFnb3Zlcj0hMSxhY2NlcHQ/dGhpcy4kZW1pdCgiZmlsZSIsW10uc2xpY2UuY2FsbChlLmRhdGFUcmFuc2Zlci5maWxlcykuZmlsdGVyKGZ1bmN0aW9uKGZpbGUpe3ZhciB0eXBlPWZpbGUudHlwZSxuYW1lPWZpbGUubmFtZSxleHRlbnNpb249LTE8bmFtZS5pbmRleE9mKCIuIik/Ii4iK25hbWUuc3BsaXQoIi4iKS5wb3AoKToiIixiYXNlVHlwZT10eXBlLnJlcGxhY2UoL1wvLiokLywiIik7cmV0dXJuIGFjY2VwdC5zcGxpdCgiLCIpLm1hcChmdW5jdGlvbih0eXBlKXtyZXR1cm4gdHlwZS50cmltKCl9KS5maWx0ZXIoZnVuY3Rpb24odHlwZSl7cmV0dXJuIHR5cGV9KS5zb21lKGZ1bmN0aW9uKGFjY2VwdGVkVHlwZSl7cmV0dXJuL1wuLiskLy50ZXN0KGFjY2VwdGVkVHlwZSk/ZXh0ZW5zaW9uPT09YWNjZXB0ZWRUeXBlOi9cL1wqJC8udGVzdChhY2NlcHRlZFR5cGUpP2Jhc2VUeXBlPT09YWNjZXB0ZWRUeXBlLnJlcGxhY2UoL1wvXCokLywiIik6ISEvXlteXC9dK1wvW15cL10rJC8udGVzdChhY2NlcHRlZFR5cGUpJiZ0eXBlPT09YWNjZXB0ZWRUeXBlfSl9KSk6dGhpcy4kZW1pdCgiZmlsZSIsZS5kYXRhVHJhbnNmZXIuZmlsZXMpfX19fSx1cGxvYWRfZHJhZ2dlcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzdlYmJmMjE5X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7dXBsb2FkX2RyYWdnZXJfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy91cGxvYWQvc3JjL3VwbG9hZC1kcmFnZ2VyLnZ1ZSI7dmFyIHVwbG9hZF9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtpbmplY3Q6WyJ1cGxvYWRlciJdLGNvbXBvbmVudHM6e1VwbG9hZERyYWdnZXI6dXBsb2FkX2RyYWdnZXJfY29tcG9uZW50LmV4cG9ydHN9LHByb3BzOnt0eXBlOlN0cmluZyxhY3Rpb246e3R5cGU6U3RyaW5nLHJlcXVpcmVkOiEwfSxuYW1lOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJmaWxlIn0sZGF0YTpPYmplY3QsaGVhZGVyczpPYmplY3Qsd2l0aENyZWRlbnRpYWxzOkJvb2xlYW4sbXVsdGlwbGU6Qm9vbGVhbixhY2NlcHQ6U3RyaW5nLG9uU3RhcnQ6RnVuY3Rpb24sb25Qcm9ncmVzczpGdW5jdGlvbixvblN1Y2Nlc3M6RnVuY3Rpb24sb25FcnJvcjpGdW5jdGlvbixiZWZvcmVVcGxvYWQ6RnVuY3Rpb24sZHJhZzpCb29sZWFuLG9uUHJldmlldzp7dHlwZTpGdW5jdGlvbixkZWZhdWx0OmZ1bmN0aW9uKCl7fX0sb25SZW1vdmU6e3R5cGU6RnVuY3Rpb24sZGVmYXVsdDpmdW5jdGlvbigpe319LGZpbGVMaXN0OkFycmF5LGF1dG9VcGxvYWQ6Qm9vbGVhbixsaXN0VHlwZTpTdHJpbmcsaHR0cFJlcXVlc3Q6e3R5cGU6RnVuY3Rpb24sZGVmYXVsdDpmdW5jdGlvbihvcHRpb24pe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3Qpe3ZhciB4aHI9bmV3IFhNTEh0dHBSZXF1ZXN0LGFjdGlvbj1vcHRpb24uYWN0aW9uO3hoci51cGxvYWQmJih4aHIudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7MDxlLnRvdGFsJiYoZS5wZXJjZW50PWUubG9hZGVkL2UudG90YWwqMTAwKSxvcHRpb24ub25Qcm9ncmVzcyhlKX0pO3ZhciBmb3JtRGF0YT1uZXcgRm9ybURhdGE7b3B0aW9uLmRhdGEmJk9iamVjdC5rZXlzKG9wdGlvbi5kYXRhKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7Zm9ybURhdGEuYXBwZW5kKGtleSxvcHRpb24uZGF0YVtrZXldKX0pLGZvcm1EYXRhLmFwcGVuZChvcHRpb24uZmlsZW5hbWUsb3B0aW9uLmZpbGUsb3B0aW9uLmZpbGUubmFtZSkseGhyLm9uZXJyb3I9ZnVuY3Rpb24oZSl7b3B0aW9uLm9uRXJyb3IoZSl9LHhoci5vbmxvYWQ9ZnVuY3Rpb24oKXtpZih4aHIuc3RhdHVzPDIwMHx8MzAwPD14aHIuc3RhdHVzKXJldHVybiBvcHRpb24ub25FcnJvcihmdW5jdGlvbihhY3Rpb24sb3B0aW9uLHhocil7dmFyIG1zZz12b2lkIDA7bXNnPXhoci5yZXNwb25zZT8iIisoeGhyLnJlc3BvbnNlLmVycm9yfHx4aHIucmVzcG9uc2UpOnhoci5yZXNwb25zZVRleHQ/IiIreGhyLnJlc3BvbnNlVGV4dDoiZmFpbCB0byBwb3N0ICIrYWN0aW9uKyIgIit4aHIuc3RhdHVzO3ZhciBlcnI9bmV3IEVycm9yKG1zZyk7cmV0dXJuIGVyci5zdGF0dXM9eGhyLnN0YXR1cyxlcnIubWV0aG9kPSJwb3N0IixlcnIudXJsPWFjdGlvbixlcnJ9KGFjdGlvbiwwLHhocikpO29wdGlvbi5vblN1Y2Nlc3MoZnVuY3Rpb24oeGhyKXt2YXIgdGV4dD14aHIucmVzcG9uc2VUZXh0fHx4aHIucmVzcG9uc2U7aWYoIXRleHQpcmV0dXJuIHRleHQ7dHJ5e3JldHVybiBKU09OLnBhcnNlKHRleHQpfWNhdGNoKGUpe3JldHVybiB0ZXh0fX0oeGhyKSl9LHhoci5vcGVuKCJwb3N0IixhY3Rpb24sITApLG9wdGlvbi53aXRoQ3JlZGVudGlhbHMmJiJ3aXRoQ3JlZGVudGlhbHMiaW4geGhyJiYoeGhyLndpdGhDcmVkZW50aWFscz0hMCk7dmFyIGhlYWRlcnM9b3B0aW9uLmhlYWRlcnN8fHt9O2Zvcih2YXIgaXRlbSBpbiBoZWFkZXJzKWhlYWRlcnMuaGFzT3duUHJvcGVydHkoaXRlbSkmJm51bGwhPT1oZWFkZXJzW2l0ZW1dJiZ4aHIuc2V0UmVxdWVzdEhlYWRlcihpdGVtLGhlYWRlcnNbaXRlbV0pO3JldHVybiB4aHIuc2VuZChmb3JtRGF0YSkseGhyfX19LGRpc2FibGVkOkJvb2xlYW4sbGltaXQ6TnVtYmVyLG9uRXhjZWVkOkZ1bmN0aW9ufSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue21vdXNlb3ZlcjohMSxyZXFzOnt9fX0sbWV0aG9kczp7aXNJbWFnZTpmdW5jdGlvbihzdHIpe3JldHVybi0xIT09c3RyLmluZGV4T2YoImltYWdlIil9LGhhbmRsZUNoYW5nZTpmdW5jdGlvbihldil7dmFyIGZpbGVzPWV2LnRhcmdldC5maWxlcztmaWxlcyYmdGhpcy51cGxvYWRGaWxlcyhmaWxlcyl9LHVwbG9hZEZpbGVzOmZ1bmN0aW9uKGZpbGVzKXt2YXIgX3RoaXM9dGhpcztpZih0aGlzLmxpbWl0JiZ0aGlzLmZpbGVMaXN0Lmxlbmd0aCtmaWxlcy5sZW5ndGg+dGhpcy5saW1pdCl0aGlzLm9uRXhjZWVkJiZ0aGlzLm9uRXhjZWVkKGZpbGVzLHRoaXMuZmlsZUxpc3QpO2Vsc2V7dmFyIHBvc3RGaWxlcz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmaWxlcyk7dGhpcy5tdWx0aXBsZXx8KHBvc3RGaWxlcz1wb3N0RmlsZXMuc2xpY2UoMCwxKSksMCE9PXBvc3RGaWxlcy5sZW5ndGgmJnBvc3RGaWxlcy5mb3JFYWNoKGZ1bmN0aW9uKHJhd0ZpbGUpe190aGlzLm9uU3RhcnQocmF3RmlsZSksX3RoaXMuYXV0b1VwbG9hZCYmX3RoaXMudXBsb2FkKHJhd0ZpbGUpfSl9fSx1cGxvYWQ6ZnVuY3Rpb24ocmF3RmlsZSl7dmFyIF90aGlzMj10aGlzO2lmKHRoaXMuJHJlZnMuaW5wdXQudmFsdWU9bnVsbCwhdGhpcy5iZWZvcmVVcGxvYWQpcmV0dXJuIHRoaXMucG9zdChyYXdGaWxlKTt2YXIgYmVmb3JlPXRoaXMuYmVmb3JlVXBsb2FkKHJhd0ZpbGUpO2JlZm9yZSYmYmVmb3JlLnRoZW4/YmVmb3JlLnRoZW4oZnVuY3Rpb24ocHJvY2Vzc2VkRmlsZSl7dmFyIGZpbGVUeXBlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzZWRGaWxlKTtpZigiW29iamVjdCBGaWxlXSI9PT1maWxlVHlwZXx8IltvYmplY3QgQmxvYl0iPT09ZmlsZVR5cGUpe2Zvcih2YXIgcCBpbiJbb2JqZWN0IEJsb2JdIj09PWZpbGVUeXBlJiYocHJvY2Vzc2VkRmlsZT1uZXcgRmlsZShbcHJvY2Vzc2VkRmlsZV0scmF3RmlsZS5uYW1lLHt0eXBlOnJhd0ZpbGUudHlwZX0pKSxyYXdGaWxlKXJhd0ZpbGUuaGFzT3duUHJvcGVydHkocCkmJihwcm9jZXNzZWRGaWxlW3BdPXJhd0ZpbGVbcF0pO190aGlzMi5wb3N0KHByb2Nlc3NlZEZpbGUpfWVsc2UgX3RoaXMyLnBvc3QocmF3RmlsZSl9LGZ1bmN0aW9uKCl7X3RoaXMyLm9uUmVtb3ZlKG51bGwscmF3RmlsZSl9KTohMSE9PWJlZm9yZT90aGlzLnBvc3QocmF3RmlsZSk6dGhpcy5vblJlbW92ZShudWxsLHJhd0ZpbGUpfSxhYm9ydDpmdW5jdGlvbihmaWxlKXt2YXIgcmVxcz10aGlzLnJlcXM7aWYoZmlsZSl7dmFyIHVpZD1maWxlO2ZpbGUudWlkJiYodWlkPWZpbGUudWlkKSxyZXFzW3VpZF0mJnJlcXNbdWlkXS5hYm9ydCgpfWVsc2UgT2JqZWN0LmtleXMocmVxcykuZm9yRWFjaChmdW5jdGlvbih1aWQpe3JlcXNbdWlkXSYmcmVxc1t1aWRdLmFib3J0KCksZGVsZXRlIHJlcXNbdWlkXX0pfSxwb3N0OmZ1bmN0aW9uKHJhd0ZpbGUpe3ZhciBfdGhpczM9dGhpcyx1aWQ9cmF3RmlsZS51aWQsb3B0aW9ucz17aGVhZGVyczp0aGlzLmhlYWRlcnMsd2l0aENyZWRlbnRpYWxzOnRoaXMud2l0aENyZWRlbnRpYWxzLGZpbGU6cmF3RmlsZSxkYXRhOnRoaXMuZGF0YSxmaWxlbmFtZTp0aGlzLm5hbWUsYWN0aW9uOnRoaXMuYWN0aW9uLG9uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7X3RoaXMzLm9uUHJvZ3Jlc3MoZSxyYXdGaWxlKX0sb25TdWNjZXNzOmZ1bmN0aW9uKHJlcyl7X3RoaXMzLm9uU3VjY2VzcyhyZXMscmF3RmlsZSksZGVsZXRlIF90aGlzMy5yZXFzW3VpZF19LG9uRXJyb3I6ZnVuY3Rpb24oZXJyKXtfdGhpczMub25FcnJvcihlcnIscmF3RmlsZSksZGVsZXRlIF90aGlzMy5yZXFzW3VpZF19fSxyZXE9dGhpcy5odHRwUmVxdWVzdChvcHRpb25zKTsodGhpcy5yZXFzW3VpZF09cmVxKSYmcmVxLnRoZW4mJnJlcS50aGVuKG9wdGlvbnMub25TdWNjZXNzLG9wdGlvbnMub25FcnJvcil9LGhhbmRsZUNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZHx8KHRoaXMuJHJlZnMuaW5wdXQudmFsdWU9bnVsbCx0aGlzLiRyZWZzLmlucHV0LmNsaWNrKCkpfSxoYW5kbGVLZXlkb3duOmZ1bmN0aW9uKGUpe2UudGFyZ2V0PT09ZS5jdXJyZW50VGFyZ2V0JiYoMTMhPT1lLmtleUNvZGUmJjMyIT09ZS5rZXlDb2RlfHx0aGlzLmhhbmRsZUNsaWNrKCkpfX0scmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciBoYW5kbGVDbGljaz10aGlzLmhhbmRsZUNsaWNrLGRyYWc9dGhpcy5kcmFnLG5hbWU9dGhpcy5uYW1lLGhhbmRsZUNoYW5nZT10aGlzLmhhbmRsZUNoYW5nZSxtdWx0aXBsZT10aGlzLm11bHRpcGxlLGFjY2VwdD10aGlzLmFjY2VwdCxsaXN0VHlwZT10aGlzLmxpc3RUeXBlLHVwbG9hZEZpbGVzPXRoaXMudXBsb2FkRmlsZXMsZGlzYWJsZWQ9dGhpcy5kaXNhYmxlZCxkYXRhPXtjbGFzczp7ImVsLXVwbG9hZCI6ITB9LG9uOntjbGljazpoYW5kbGVDbGljayxrZXlkb3duOnRoaXMuaGFuZGxlS2V5ZG93bn19O3JldHVybiBkYXRhLmNsYXNzWyJlbC11cGxvYWQtLSIrbGlzdFR5cGVdPSEwLGgoImRpdiIsZXh0ZXJuYWxfYmFiZWxfaGVscGVyX3Z1ZV9qc3hfbWVyZ2VfcHJvcHNfZGVmYXVsdCgpKFtkYXRhLHthdHRyczp7dGFiaW5kZXg6IjAifX1dKSxbZHJhZz9oKCJ1cGxvYWQtZHJhZ2dlciIse2F0dHJzOntkaXNhYmxlZDpkaXNhYmxlZH0sb246e2ZpbGU6dXBsb2FkRmlsZXN9fSxbdGhpcy4kc2xvdHMuZGVmYXVsdF0pOnRoaXMuJHNsb3RzLmRlZmF1bHQsaCgiaW5wdXQiLHtjbGFzczoiZWwtdXBsb2FkX19pbnB1dCIsYXR0cnM6e3R5cGU6ImZpbGUiLG5hbWU6bmFtZSxtdWx0aXBsZTptdWx0aXBsZSxhY2NlcHQ6YWNjZXB0fSxyZWY6ImlucHV0Iixvbjp7Y2hhbmdlOmhhbmRsZUNoYW5nZX19KV0pfX0sdm9pZCAwLHZvaWQgMCwhMSxudWxsLG51bGwsbnVsbCk7dXBsb2FkX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvdXBsb2FkL3NyYy91cGxvYWQudnVlIjt2YXIgc3JjX3VwbG9hZD11cGxvYWRfY29tcG9uZW50LmV4cG9ydHM7ZnVuY3Rpb24gc3JjdnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfbm9vcCgpe312YXIgdXBsb2FkX3NyY19jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFVwbG9hZCIsbWl4aW5zOlttaWdyYXRpbmdfZGVmYXVsdC5hXSxjb21wb25lbnRzOntFbFByb2dyZXNzOnByb2dyZXNzX2RlZmF1bHQuYSxVcGxvYWRMaXN0OnVwbG9hZF9saXN0LFVwbG9hZDpzcmNfdXBsb2FkfSxwcm92aWRlOmZ1bmN0aW9uKCl7cmV0dXJue3VwbG9hZGVyOnRoaXN9fSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn19LHByb3BzOnthY3Rpb246e3R5cGU6U3RyaW5nLHJlcXVpcmVkOiEwfSxoZWFkZXJzOnt0eXBlOk9iamVjdCxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJue319fSxkYXRhOk9iamVjdCxtdWx0aXBsZTpCb29sZWFuLG5hbWU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImZpbGUifSxkcmFnOkJvb2xlYW4sZHJhZ2dlcjpCb29sZWFuLHdpdGhDcmVkZW50aWFsczpCb29sZWFuLHNob3dGaWxlTGlzdDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGFjY2VwdDpTdHJpbmcsdHlwZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoic2VsZWN0In0sYmVmb3JlVXBsb2FkOkZ1bmN0aW9uLGJlZm9yZVJlbW92ZTpGdW5jdGlvbixvblJlbW92ZTp7dHlwZTpGdW5jdGlvbixkZWZhdWx0OnNyY3Z1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX25vb3B9LG9uQ2hhbmdlOnt0eXBlOkZ1bmN0aW9uLGRlZmF1bHQ6c3JjdnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfbm9vcH0sb25QcmV2aWV3Ont0eXBlOkZ1bmN0aW9ufSxvblN1Y2Nlc3M6e3R5cGU6RnVuY3Rpb24sZGVmYXVsdDpzcmN2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19ub29wfSxvblByb2dyZXNzOnt0eXBlOkZ1bmN0aW9uLGRlZmF1bHQ6c3JjdnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfbm9vcH0sb25FcnJvcjp7dHlwZTpGdW5jdGlvbixkZWZhdWx0OnNyY3Z1ZV90eXBlX3NjcmlwdF9sYW5nX2pzX25vb3B9LGZpbGVMaXN0Ont0eXBlOkFycmF5LGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm5bXX19LGF1dG9VcGxvYWQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxsaXN0VHlwZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoidGV4dCJ9LGh0dHBSZXF1ZXN0OkZ1bmN0aW9uLGRpc2FibGVkOkJvb2xlYW4sbGltaXQ6TnVtYmVyLG9uRXhjZWVkOnt0eXBlOkZ1bmN0aW9uLGRlZmF1bHQ6c3JjdnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfbm9vcH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dXBsb2FkRmlsZXM6W10sZHJhZ092ZXI6ITEsZHJhZ2luZzohMSx0ZW1wSW5kZXg6MX19LGNvbXB1dGVkOnt1cGxvYWREaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGVkfHwodGhpcy5lbEZvcm18fHt9KS5kaXNhYmxlZH19LHdhdGNoOntsaXN0VHlwZTpmdW5jdGlvbih0eXBlKXsicGljdHVyZS1jYXJkIiE9PXR5cGUmJiJwaWN0dXJlIiE9PXR5cGV8fCh0aGlzLnVwbG9hZEZpbGVzPXRoaXMudXBsb2FkRmlsZXMubWFwKGZ1bmN0aW9uKGZpbGUpe2lmKCFmaWxlLnVybCYmZmlsZS5yYXcpdHJ5e2ZpbGUudXJsPVVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5yYXcpfWNhdGNoKGVycil7Y29uc29sZS5lcnJvcigiW0VsZW1lbnQgRXJyb3JdW1VwbG9hZF0iLGVycil9cmV0dXJuIGZpbGV9KSl9LGZpbGVMaXN0OntpbW1lZGlhdGU6ITAsaGFuZGxlcjpmdW5jdGlvbihmaWxlTGlzdCl7dmFyIF90aGlzPXRoaXM7dGhpcy51cGxvYWRGaWxlcz1maWxlTGlzdC5tYXAoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0udWlkPWl0ZW0udWlkfHxEYXRlLm5vdygpK190aGlzLnRlbXBJbmRleCsrLGl0ZW0uc3RhdHVzPWl0ZW0uc3RhdHVzfHwic3VjY2VzcyIsaXRlbX0pfX19LG1ldGhvZHM6e2hhbmRsZVN0YXJ0OmZ1bmN0aW9uKHJhd0ZpbGUpe3Jhd0ZpbGUudWlkPURhdGUubm93KCkrdGhpcy50ZW1wSW5kZXgrKzt2YXIgZmlsZT17c3RhdHVzOiJyZWFkeSIsbmFtZTpyYXdGaWxlLm5hbWUsc2l6ZTpyYXdGaWxlLnNpemUscGVyY2VudGFnZTowLHVpZDpyYXdGaWxlLnVpZCxyYXc6cmF3RmlsZX07aWYoInBpY3R1cmUtY2FyZCI9PT10aGlzLmxpc3RUeXBlfHwicGljdHVyZSI9PT10aGlzLmxpc3RUeXBlKXRyeXtmaWxlLnVybD1VUkwuY3JlYXRlT2JqZWN0VVJMKHJhd0ZpbGUpfWNhdGNoKGVycil7cmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcigiW0VsZW1lbnQgRXJyb3JdW1VwbG9hZF0iLGVycil9dGhpcy51cGxvYWRGaWxlcy5wdXNoKGZpbGUpLHRoaXMub25DaGFuZ2UoZmlsZSx0aGlzLnVwbG9hZEZpbGVzKX0saGFuZGxlUHJvZ3Jlc3M6ZnVuY3Rpb24oZXYscmF3RmlsZSl7dmFyIGZpbGU9dGhpcy5nZXRGaWxlKHJhd0ZpbGUpO3RoaXMub25Qcm9ncmVzcyhldixmaWxlLHRoaXMudXBsb2FkRmlsZXMpLGZpbGUuc3RhdHVzPSJ1cGxvYWRpbmciLGZpbGUucGVyY2VudGFnZT1ldi5wZXJjZW50fHwwfSxoYW5kbGVTdWNjZXNzOmZ1bmN0aW9uKHJlcyxyYXdGaWxlKXt2YXIgZmlsZT10aGlzLmdldEZpbGUocmF3RmlsZSk7ZmlsZSYmKGZpbGUuc3RhdHVzPSJzdWNjZXNzIixmaWxlLnJlc3BvbnNlPXJlcyx0aGlzLm9uU3VjY2VzcyhyZXMsZmlsZSx0aGlzLnVwbG9hZEZpbGVzKSx0aGlzLm9uQ2hhbmdlKGZpbGUsdGhpcy51cGxvYWRGaWxlcykpfSxoYW5kbGVFcnJvcjpmdW5jdGlvbihlcnIscmF3RmlsZSl7dmFyIGZpbGU9dGhpcy5nZXRGaWxlKHJhd0ZpbGUpLGZpbGVMaXN0PXRoaXMudXBsb2FkRmlsZXM7ZmlsZS5zdGF0dXM9ImZhaWwiLGZpbGVMaXN0LnNwbGljZShmaWxlTGlzdC5pbmRleE9mKGZpbGUpLDEpLHRoaXMub25FcnJvcihlcnIsZmlsZSx0aGlzLnVwbG9hZEZpbGVzKSx0aGlzLm9uQ2hhbmdlKGZpbGUsdGhpcy51cGxvYWRGaWxlcyl9LGhhbmRsZVJlbW92ZTpmdW5jdGlvbihmaWxlLHJhdyl7dmFyIF90aGlzMj10aGlzO3JhdyYmKGZpbGU9dGhpcy5nZXRGaWxlKHJhdykpO3ZhciBkb1JlbW92ZT1mdW5jdGlvbigpe190aGlzMi5hYm9ydChmaWxlKTt2YXIgZmlsZUxpc3Q9X3RoaXMyLnVwbG9hZEZpbGVzO2ZpbGVMaXN0LnNwbGljZShmaWxlTGlzdC5pbmRleE9mKGZpbGUpLDEpLF90aGlzMi5vblJlbW92ZShmaWxlLGZpbGVMaXN0KX07aWYodGhpcy5iZWZvcmVSZW1vdmUpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLmJlZm9yZVJlbW92ZSl7dmFyIGJlZm9yZT10aGlzLmJlZm9yZVJlbW92ZShmaWxlLHRoaXMudXBsb2FkRmlsZXMpO2JlZm9yZSYmYmVmb3JlLnRoZW4/YmVmb3JlLnRoZW4oZnVuY3Rpb24oKXtkb1JlbW92ZSgpfSxzcmN2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc19ub29wKTohMSE9PWJlZm9yZSYmZG9SZW1vdmUoKX19ZWxzZSBkb1JlbW92ZSgpfSxnZXRGaWxlOmZ1bmN0aW9uKHJhd0ZpbGUpe3ZhciBmaWxlTGlzdD10aGlzLnVwbG9hZEZpbGVzLHRhcmdldD12b2lkIDA7cmV0dXJuIGZpbGVMaXN0LmV2ZXJ5KGZ1bmN0aW9uKGl0ZW0pe3JldHVybiEodGFyZ2V0PXJhd0ZpbGUudWlkPT09aXRlbS51aWQ/aXRlbTpudWxsKX0pLHRhcmdldH0sYWJvcnQ6ZnVuY3Rpb24oZmlsZSl7dGhpcy4kcmVmc1sidXBsb2FkLWlubmVyIl0uYWJvcnQoZmlsZSl9LGNsZWFyRmlsZXM6ZnVuY3Rpb24oKXt0aGlzLnVwbG9hZEZpbGVzPVtdfSxzdWJtaXQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXMzPXRoaXM7dGhpcy51cGxvYWRGaWxlcy5maWx0ZXIoZnVuY3Rpb24oZmlsZSl7cmV0dXJuInJlYWR5Ij09PWZpbGUuc3RhdHVzfSkuZm9yRWFjaChmdW5jdGlvbihmaWxlKXtfdGhpczMuJHJlZnNbInVwbG9hZC1pbm5lciJdLnVwbG9hZChmaWxlLnJhdyl9KX0sZ2V0TWlncmF0aW5nQ29uZmlnOmZ1bmN0aW9uKCl7cmV0dXJue3Byb3BzOnsiZGVmYXVsdC1maWxlLWxpc3QiOiJkZWZhdWx0LWZpbGUtbGlzdCBpcyByZW5hbWVkIHRvIGZpbGUtbGlzdC4iLCJzaG93LXVwbG9hZC1saXN0Ijoic2hvdy11cGxvYWQtbGlzdCBpcyByZW5hbWVkIHRvIHNob3ctZmlsZS1saXN0LiIsInRodW1ibmFpbC1tb2RlIjoidGh1bWJuYWlsLW1vZGUgaGFzIGJlZW4gZGVwcmVjYXRlZCwgeW91IGNhbiBpbXBsZW1lbnQgdGhlIHNhbWUgZWZmZWN0IGFjY29yZGluZyB0byB0aGlzIGNhc2U6IGh0dHA6Ly9lbGVtZW50LmVsZW1lLmlvLyMvemgtQ04vY29tcG9uZW50L3VwbG9hZCN5b25nLWh1LXRvdS14aWFuZy1zaGFuZy1jaHVhbiJ9fX19LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnVwbG9hZEZpbGVzLmZvckVhY2goZnVuY3Rpb24oZmlsZSl7ZmlsZS51cmwmJjA9PT1maWxlLnVybC5pbmRleE9mKCJibG9iOiIpJiZVUkwucmV2b2tlT2JqZWN0VVJMKGZpbGUudXJsKX0pfSxyZW5kZXI6ZnVuY3Rpb24oaCl7dmFyIHVwbG9hZExpc3Q9dm9pZCAwO3RoaXMuc2hvd0ZpbGVMaXN0JiYodXBsb2FkTGlzdD1oKHVwbG9hZF9saXN0LHthdHRyczp7ZGlzYWJsZWQ6dGhpcy51cGxvYWREaXNhYmxlZCxsaXN0VHlwZTp0aGlzLmxpc3RUeXBlLGZpbGVzOnRoaXMudXBsb2FkRmlsZXMsaGFuZGxlUHJldmlldzp0aGlzLm9uUHJldmlld30sb246e3JlbW92ZTp0aGlzLmhhbmRsZVJlbW92ZX19KSk7dmFyIHVwbG9hZENvbXBvbmVudD1oKCJ1cGxvYWQiLHtwcm9wczp7dHlwZTp0aGlzLnR5cGUsZHJhZzp0aGlzLmRyYWcsYWN0aW9uOnRoaXMuYWN0aW9uLG11bHRpcGxlOnRoaXMubXVsdGlwbGUsImJlZm9yZS11cGxvYWQiOnRoaXMuYmVmb3JlVXBsb2FkLCJ3aXRoLWNyZWRlbnRpYWxzIjp0aGlzLndpdGhDcmVkZW50aWFscyxoZWFkZXJzOnRoaXMuaGVhZGVycyxuYW1lOnRoaXMubmFtZSxkYXRhOnRoaXMuZGF0YSxhY2NlcHQ6dGhpcy5hY2NlcHQsZmlsZUxpc3Q6dGhpcy51cGxvYWRGaWxlcyxhdXRvVXBsb2FkOnRoaXMuYXV0b1VwbG9hZCxsaXN0VHlwZTp0aGlzLmxpc3RUeXBlLGRpc2FibGVkOnRoaXMudXBsb2FkRGlzYWJsZWQsbGltaXQ6dGhpcy5saW1pdCwib24tZXhjZWVkIjp0aGlzLm9uRXhjZWVkLCJvbi1zdGFydCI6dGhpcy5oYW5kbGVTdGFydCwib24tcHJvZ3Jlc3MiOnRoaXMuaGFuZGxlUHJvZ3Jlc3MsIm9uLXN1Y2Nlc3MiOnRoaXMuaGFuZGxlU3VjY2Vzcywib24tZXJyb3IiOnRoaXMuaGFuZGxlRXJyb3IsIm9uLXByZXZpZXciOnRoaXMub25QcmV2aWV3LCJvbi1yZW1vdmUiOnRoaXMuaGFuZGxlUmVtb3ZlLCJodHRwLXJlcXVlc3QiOnRoaXMuaHR0cFJlcXVlc3R9LHJlZjoidXBsb2FkLWlubmVyIn0sW3RoaXMuJHNsb3RzLnRyaWdnZXJ8fHRoaXMuJHNsb3RzLmRlZmF1bHRdKTtyZXR1cm4gaCgiZGl2IixbInBpY3R1cmUtY2FyZCI9PT10aGlzLmxpc3RUeXBlP3VwbG9hZExpc3Q6IiIsdGhpcy4kc2xvdHMudHJpZ2dlcj9bdXBsb2FkQ29tcG9uZW50LHRoaXMuJHNsb3RzLmRlZmF1bHRdOnVwbG9hZENvbXBvbmVudCx0aGlzLiRzbG90cy50aXAsInBpY3R1cmUtY2FyZCIhPT10aGlzLmxpc3RUeXBlP3VwbG9hZExpc3Q6IiJdKX19LHZvaWQgMCx2b2lkIDAsITEsbnVsbCxudWxsLG51bGwpO3VwbG9hZF9zcmNfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy91cGxvYWQvc3JjL2luZGV4LnZ1ZSI7dmFyIHVwbG9hZF9zcmM9dXBsb2FkX3NyY19jb21wb25lbnQuZXhwb3J0czt1cGxvYWRfc3JjLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHVwbG9hZF9zcmMubmFtZSx1cGxvYWRfc3JjKX07dmFyIHBhY2thZ2VzX3VwbG9hZD11cGxvYWRfc3JjLHByb2dyZXNzdnVlX3R5cGVfdGVtcGxhdGVfaWRfMjI5ZWU0MDZfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXByb2dyZXNzIixjbGFzczpbImVsLXByb2dyZXNzLS0iK192bS50eXBlLF92bS5zdGF0dXM/ImlzLSIrX3ZtLnN0YXR1czoiIix7ImVsLXByb2dyZXNzLS13aXRob3V0LXRleHQiOiFfdm0uc2hvd1RleHQsImVsLXByb2dyZXNzLS10ZXh0LWluc2lkZSI6X3ZtLnRleHRJbnNpZGV9XSxhdHRyczp7cm9sZToicHJvZ3Jlc3NiYXIiLCJhcmlhLXZhbHVlbm93Ijpfdm0ucGVyY2VudGFnZSwiYXJpYS12YWx1ZW1pbiI6IjAiLCJhcmlhLXZhbHVlbWF4IjoiMTAwIn19LFsibGluZSI9PT1fdm0udHlwZT9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXByb2dyZXNzLWJhciJ9LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXByb2dyZXNzLWJhcl9fb3V0ZXIiLHN0eWxlOntoZWlnaHQ6X3ZtLnN0cm9rZVdpZHRoKyJweCJ9fSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1wcm9ncmVzcy1iYXJfX2lubmVyIixzdHlsZTpfdm0uYmFyU3R5bGV9LFtfdm0uc2hvd1RleHQmJl92bS50ZXh0SW5zaWRlP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcHJvZ3Jlc3MtYmFyX19pbm5lclRleHQifSxbX3ZtLl92KF92bS5fcyhfdm0ucGVyY2VudGFnZSkrIiUiKV0pOl92bS5fZSgpXSldKV0pOl9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcHJvZ3Jlc3MtY2lyY2xlIixzdHlsZTp7aGVpZ2h0Ol92bS53aWR0aCsicHgiLHdpZHRoOl92bS53aWR0aCsicHgifX0sW19jKCJzdmciLHthdHRyczp7dmlld0JveDoiMCAwIDEwMCAxMDAifX0sW19jKCJwYXRoIix7c3RhdGljQ2xhc3M6ImVsLXByb2dyZXNzLWNpcmNsZV9fdHJhY2siLGF0dHJzOntkOl92bS50cmFja1BhdGgsc3Ryb2tlOiIjZTVlOWYyIiwic3Ryb2tlLXdpZHRoIjpfdm0ucmVsYXRpdmVTdHJva2VXaWR0aCxmaWxsOiJub25lIn19KSxfYygicGF0aCIse3N0YXRpY0NsYXNzOiJlbC1wcm9ncmVzcy1jaXJjbGVfX3BhdGgiLHN0eWxlOl92bS5jaXJjbGVQYXRoU3R5bGUsYXR0cnM6e2Q6X3ZtLnRyYWNrUGF0aCwic3Ryb2tlLWxpbmVjYXAiOiJyb3VuZCIsc3Ryb2tlOl92bS5zdHJva2UsInN0cm9rZS13aWR0aCI6X3ZtLnJlbGF0aXZlU3Ryb2tlV2lkdGgsZmlsbDoibm9uZSJ9fSldKV0pLF92bS5zaG93VGV4dCYmIV92bS50ZXh0SW5zaWRlP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcHJvZ3Jlc3NfX3RleHQiLHN0eWxlOntmb250U2l6ZTpfdm0ucHJvZ3Jlc3NUZXh0U2l6ZSsicHgifX0sW192bS5zdGF0dXM/WyJ0ZXh0Ij09PV92bS5zdGF0dXM/X3ZtLl90KCJkZWZhdWx0Iik6X2MoImkiLHtjbGFzczpfdm0uaWNvbkNsYXNzfSldOltfdm0uX3YoX3ZtLl9zKF92bS5wZXJjZW50YWdlKSsiJSIpXV0sMik6X3ZtLl9lKCldKX07cHJvZ3Jlc3N2dWVfdHlwZV90ZW1wbGF0ZV9pZF8yMjllZTQwNl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgcHJvZ3Jlc3NfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxQcm9ncmVzcyIscHJvcHM6e3R5cGU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImxpbmUiLHZhbGlkYXRvcjpmdW5jdGlvbih2YWwpe3JldHVybi0xPFsibGluZSIsImNpcmNsZSJdLmluZGV4T2YodmFsKX19LHBlcmNlbnRhZ2U6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MCxyZXF1aXJlZDohMCx2YWxpZGF0b3I6ZnVuY3Rpb24odmFsKXtyZXR1cm4gMDw9dmFsJiZ2YWw8PTEwMH19LHN0YXR1czp7dHlwZTpTdHJpbmcsdmFsaWRhdG9yOmZ1bmN0aW9uKHZhbCl7cmV0dXJuLTE8WyJ0ZXh0Iiwic3VjY2VzcyIsImV4Y2VwdGlvbiJdLmluZGV4T2YodmFsKX19LHN0cm9rZVdpZHRoOnt0eXBlOk51bWJlcixkZWZhdWx0OjZ9LHRleHRJbnNpZGU6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSx3aWR0aDp7dHlwZTpOdW1iZXIsZGVmYXVsdDoxMjZ9LHNob3dUZXh0Ont0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sY29sb3I6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiJ9fSxjb21wdXRlZDp7YmFyU3R5bGU6ZnVuY3Rpb24oKXt2YXIgc3R5bGU9e307cmV0dXJuIHN0eWxlLndpZHRoPXRoaXMucGVyY2VudGFnZSsiJSIsc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuY29sb3Isc3R5bGV9LHJlbGF0aXZlU3Ryb2tlV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5zdHJva2VXaWR0aC90aGlzLndpZHRoKjEwMCkudG9GaXhlZCgxKX0sdHJhY2tQYXRoOmZ1bmN0aW9uKCl7dmFyIHJhZGl1cz1wYXJzZUludCg1MC1wYXJzZUZsb2F0KHRoaXMucmVsYXRpdmVTdHJva2VXaWR0aCkvMiwxMCk7cmV0dXJuIk0gNTAgNTAgbSAwIC0iK3JhZGl1cysiIGEgIityYWRpdXMrIiAiK3JhZGl1cysiIDAgMSAxIDAgIisyKnJhZGl1cysiIGEgIityYWRpdXMrIiAiK3JhZGl1cysiIDAgMSAxIDAgLSIrMipyYWRpdXN9LHBlcmltZXRlcjpmdW5jdGlvbigpe3ZhciByYWRpdXM9NTAtcGFyc2VGbG9hdCh0aGlzLnJlbGF0aXZlU3Ryb2tlV2lkdGgpLzI7cmV0dXJuIDIqTWF0aC5QSSpyYWRpdXN9LGNpcmNsZVBhdGhTdHlsZTpmdW5jdGlvbigpe3ZhciBwZXJpbWV0ZXI9dGhpcy5wZXJpbWV0ZXI7cmV0dXJue3N0cm9rZURhc2hhcnJheTpwZXJpbWV0ZXIrInB4LCIrcGVyaW1ldGVyKyJweCIsc3Ryb2tlRGFzaG9mZnNldDooMS10aGlzLnBlcmNlbnRhZ2UvMTAwKSpwZXJpbWV0ZXIrInB4Iix0cmFuc2l0aW9uOiJzdHJva2UtZGFzaG9mZnNldCAwLjZzIGVhc2UgMHMsIHN0cm9rZSAwLjZzIGVhc2UifX0sc3Ryb2tlOmZ1bmN0aW9uKCl7dmFyIHJldD12b2lkIDA7aWYodGhpcy5jb2xvcilyZXQ9dGhpcy5jb2xvcjtlbHNlIHN3aXRjaCh0aGlzLnN0YXR1cyl7Y2FzZSJzdWNjZXNzIjpyZXQ9IiMxM2NlNjYiO2JyZWFrO2Nhc2UiZXhjZXB0aW9uIjpyZXQ9IiNmZjQ5NDkiO2JyZWFrO2RlZmF1bHQ6cmV0PSIjMjBhMGZmIn1yZXR1cm4gcmV0fSxpY29uQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4ibGluZSI9PT10aGlzLnR5cGU/InN1Y2Nlc3MiPT09dGhpcy5zdGF0dXM/ImVsLWljb24tY2lyY2xlLWNoZWNrIjoiZWwtaWNvbi1jaXJjbGUtY2xvc2UiOiJzdWNjZXNzIj09PXRoaXMuc3RhdHVzPyJlbC1pY29uLWNoZWNrIjoiZWwtaWNvbi1jbG9zZSJ9LHByb2dyZXNzVGV4dFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4ibGluZSI9PT10aGlzLnR5cGU/MTIrLjQqdGhpcy5zdHJva2VXaWR0aDouMTExMTExKnRoaXMud2lkdGgrMn19fSxwcm9ncmVzc3Z1ZV90eXBlX3RlbXBsYXRlX2lkXzIyOWVlNDA2X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7cHJvZ3Jlc3NfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9wcm9ncmVzcy9zcmMvcHJvZ3Jlc3MudnVlIjt2YXIgcHJvZ3Jlc3M9cHJvZ3Jlc3NfY29tcG9uZW50LmV4cG9ydHM7cHJvZ3Jlc3MuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQocHJvZ3Jlc3MubmFtZSxwcm9ncmVzcyl9O3ZhciBwYWNrYWdlc19wcm9ncmVzcz1wcm9ncmVzcyxzcGlubmVydnVlX3R5cGVfdGVtcGxhdGVfaWRfNjk3Yjg1MzhfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF9oPXRoaXMuJGNyZWF0ZUVsZW1lbnQsX2M9dGhpcy5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXNwaW5uZXIifSxbX2MoInN2ZyIse3N0YXRpY0NsYXNzOiJlbC1zcGlubmVyLWlubmVyIixzdHlsZTp7d2lkdGg6dGhpcy5yYWRpdXMvMisicHgiLGhlaWdodDp0aGlzLnJhZGl1cy8yKyJweCJ9LGF0dHJzOnt2aWV3Qm94OiIwIDAgNTAgNTAifX0sW19jKCJjaXJjbGUiLHtzdGF0aWNDbGFzczoicGF0aCIsYXR0cnM6e2N4OiIyNSIsY3k6IjI1IixyOiIyMCIsZmlsbDoibm9uZSIsc3Ryb2tlOnRoaXMuc3Ryb2tlQ29sb3IsInN0cm9rZS13aWR0aCI6dGhpcy5zdHJva2VXaWR0aH19KV0pXSl9O3NwaW5uZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF82OTdiODUzOF9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgc3Bpbm5lcl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFNwaW5uZXIiLHByb3BzOnt0eXBlOlN0cmluZyxyYWRpdXM6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MTAwfSxzdHJva2VXaWR0aDp7dHlwZTpOdW1iZXIsZGVmYXVsdDo1fSxzdHJva2VDb2xvcjp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiI2VmZWZlZiJ9fX0sc3Bpbm5lcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzY5N2I4NTM4X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7c3Bpbm5lcl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3NwaW5uZXIvc3JjL3NwaW5uZXIudnVlIjt2YXIgc3Bpbm5lcj1zcGlubmVyX2NvbXBvbmVudC5leHBvcnRzO3NwaW5uZXIuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc3Bpbm5lci5uYW1lLHNwaW5uZXIpfTt2YXIgcGFja2FnZXNfc3Bpbm5lcj1zcGlubmVyLG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF80NTViOWY2MF9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6ImVsLW1lc3NhZ2UtZmFkZSJ9LG9uOnsiYWZ0ZXItbGVhdmUiOl92bS5oYW5kbGVBZnRlckxlYXZlfX0sW19jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0udmlzaWJsZSxleHByZXNzaW9uOiJ2aXNpYmxlIn1dLGNsYXNzOlsiZWwtbWVzc2FnZSIsX3ZtLnR5cGUmJiFfdm0uaWNvbkNsYXNzPyJlbC1tZXNzYWdlLS0iK192bS50eXBlOiIiLF92bS5jZW50ZXI/ImlzLWNlbnRlciI6IiIsX3ZtLnNob3dDbG9zZT8iaXMtY2xvc2FibGUiOiIiLF92bS5jdXN0b21DbGFzc10sYXR0cnM6e3JvbGU6ImFsZXJ0In0sb246e21vdXNlZW50ZXI6X3ZtLmNsZWFyVGltZXIsbW91c2VsZWF2ZTpfdm0uc3RhcnRUaW1lcn19LFtfdm0uaWNvbkNsYXNzP19jKCJpIix7Y2xhc3M6X3ZtLmljb25DbGFzc30pOl9jKCJpIix7Y2xhc3M6X3ZtLnR5cGVDbGFzc30pLF92bS5fdCgiZGVmYXVsdCIsW192bS5kYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc/X2MoInAiLHtzdGF0aWNDbGFzczoiZWwtbWVzc2FnZV9fY29udGVudCIsZG9tUHJvcHM6e2lubmVySFRNTDpfdm0uX3MoX3ZtLm1lc3NhZ2UpfX0pOl9jKCJwIix7c3RhdGljQ2xhc3M6ImVsLW1lc3NhZ2VfX2NvbnRlbnQifSxbX3ZtLl92KF92bS5fcyhfdm0ubWVzc2FnZSkpXSldKSxfdm0uc2hvd0Nsb3NlP19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLW1lc3NhZ2VfX2Nsb3NlQnRuIGVsLWljb24tY2xvc2UiLG9uOntjbGljazpfdm0uY2xvc2V9fSk6X3ZtLl9lKCldLDIpXSl9O21haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF80NTViOWY2MF9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgc3JjX21haW52dWVfdHlwZV9zY3JpcHRfbGFuZ19qc190eXBlTWFwPXtzdWNjZXNzOiJzdWNjZXNzIixpbmZvOiJpbmZvIix3YXJuaW5nOiJ3YXJuaW5nIixlcnJvcjoiZXJyb3IifSxtZXNzYWdlX3NyY19tYWluX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe2RhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dmlzaWJsZTohMSxtZXNzYWdlOiIiLGR1cmF0aW9uOjNlMyx0eXBlOiJpbmZvIixpY29uQ2xhc3M6IiIsY3VzdG9tQ2xhc3M6IiIsb25DbG9zZTpudWxsLHNob3dDbG9zZTohMSxjbG9zZWQ6ITEsdGltZXI6bnVsbCxkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6ITEsY2VudGVyOiExfX0sY29tcHV0ZWQ6e3R5cGVDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUmJiF0aGlzLmljb25DbGFzcz8iZWwtbWVzc2FnZV9faWNvbiBlbC1pY29uLSIrc3JjX21haW52dWVfdHlwZV9zY3JpcHRfbGFuZ19qc190eXBlTWFwW3RoaXMudHlwZV06IiJ9fSx3YXRjaDp7Y2xvc2VkOmZ1bmN0aW9uKG5ld1ZhbCl7bmV3VmFsJiYodGhpcy52aXNpYmxlPSExKX19LG1ldGhvZHM6e2hhbmRsZUFmdGVyTGVhdmU6ZnVuY3Rpb24oKXt0aGlzLiRkZXN0cm95KCEwKSx0aGlzLiRlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuJGVsKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZD0hMCwiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5vbkNsb3NlJiZ0aGlzLm9uQ2xvc2UodGhpcyl9LGNsZWFyVGltZXI6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcil9LHN0YXJ0VGltZXI6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczswPHRoaXMuZHVyYXRpb24mJih0aGlzLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpcy5jbG9zZWR8fF90aGlzLmNsb3NlKCl9LHRoaXMuZHVyYXRpb24pKX0sa2V5ZG93bjpmdW5jdGlvbihlKXsyNz09PWUua2V5Q29kZSYmKHRoaXMuY2xvc2VkfHx0aGlzLmNsb3NlKCkpfX0sbW91bnRlZDpmdW5jdGlvbigpe3RoaXMuc3RhcnRUaW1lcigpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLHRoaXMua2V5ZG93bil9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLmtleWRvd24pfX0sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzQ1NWI5ZjYwX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7bWVzc2FnZV9zcmNfbWFpbl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL21lc3NhZ2Uvc3JjL21haW4udnVlIjt2YXIgbWVzc2FnZV9zcmNfbWFpbj1tZXNzYWdlX3NyY19tYWluX2NvbXBvbmVudC5leHBvcnRzLE1lc3NhZ2VDb25zdHJ1Y3Rvcj1leHRlcm5hbF92dWVfZGVmYXVsdC5hLmV4dGVuZChtZXNzYWdlX3NyY19tYWluKSxtZXNzYWdlX3NyY19tYWluX2luc3RhbmNlPXZvaWQgMCxtYWluX2luc3RhbmNlcz1bXSxtYWluX3NlZWQ9MSxtYWluX01lc3NhZ2U9ZnVuY3Rpb24gTWVzc2FnZShvcHRpb25zKXtpZighZXh0ZXJuYWxfdnVlX2RlZmF1bHQuYS5wcm90b3R5cGUuJGlzU2VydmVyKXsic3RyaW5nIj09dHlwZW9mKG9wdGlvbnM9b3B0aW9uc3x8e30pJiYob3B0aW9ucz17bWVzc2FnZTpvcHRpb25zfSk7dmFyIHVzZXJPbkNsb3NlPW9wdGlvbnMub25DbG9zZSxpZD0ibWVzc2FnZV8iK21haW5fc2VlZCsrO3JldHVybiBvcHRpb25zLm9uQ2xvc2U9ZnVuY3Rpb24oKXtNZXNzYWdlLmNsb3NlKGlkLHVzZXJPbkNsb3NlKX0sKG1lc3NhZ2Vfc3JjX21haW5faW5zdGFuY2U9bmV3IE1lc3NhZ2VDb25zdHJ1Y3Rvcih7ZGF0YTpvcHRpb25zfSkpLmlkPWlkLE9iamVjdCh2ZG9tXy5pc1ZOb2RlKShtZXNzYWdlX3NyY19tYWluX2luc3RhbmNlLm1lc3NhZ2UpJiYobWVzc2FnZV9zcmNfbWFpbl9pbnN0YW5jZS4kc2xvdHMuZGVmYXVsdD1bbWVzc2FnZV9zcmNfbWFpbl9pbnN0YW5jZS5tZXNzYWdlXSxtZXNzYWdlX3NyY19tYWluX2luc3RhbmNlLm1lc3NhZ2U9bnVsbCksbWVzc2FnZV9zcmNfbWFpbl9pbnN0YW5jZS52bT1tZXNzYWdlX3NyY19tYWluX2luc3RhbmNlLiRtb3VudCgpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWVzc2FnZV9zcmNfbWFpbl9pbnN0YW5jZS52bS4kZWwpLG1lc3NhZ2Vfc3JjX21haW5faW5zdGFuY2Uudm0udmlzaWJsZT0hMCxtZXNzYWdlX3NyY19tYWluX2luc3RhbmNlLmRvbT1tZXNzYWdlX3NyY19tYWluX2luc3RhbmNlLnZtLiRlbCxtZXNzYWdlX3NyY19tYWluX2luc3RhbmNlLmRvbS5zdHlsZS56SW5kZXg9cG9wdXBfLlBvcHVwTWFuYWdlci5uZXh0WkluZGV4KCksbWFpbl9pbnN0YW5jZXMucHVzaChtZXNzYWdlX3NyY19tYWluX2luc3RhbmNlKSxtZXNzYWdlX3NyY19tYWluX2luc3RhbmNlLnZtfX07WyJzdWNjZXNzIiwid2FybmluZyIsImluZm8iLCJlcnJvciJdLmZvckVhY2goZnVuY3Rpb24odHlwZSl7bWFpbl9NZXNzYWdlW3R5cGVdPWZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiJzdHJpbmciPT10eXBlb2Ygb3B0aW9ucyYmKG9wdGlvbnM9e21lc3NhZ2U6b3B0aW9uc30pLG9wdGlvbnMudHlwZT10eXBlLG1haW5fTWVzc2FnZShvcHRpb25zKX19KSxtYWluX01lc3NhZ2UuY2xvc2U9ZnVuY3Rpb24oaWQsdXNlck9uQ2xvc2Upe2Zvcih2YXIgaT0wLGxlbj1tYWluX2luc3RhbmNlcy5sZW5ndGg7aTxsZW47aSsrKWlmKGlkPT09bWFpbl9pbnN0YW5jZXNbaV0uaWQpeyJmdW5jdGlvbiI9PXR5cGVvZiB1c2VyT25DbG9zZSYmdXNlck9uQ2xvc2UobWFpbl9pbnN0YW5jZXNbaV0pLG1haW5faW5zdGFuY2VzLnNwbGljZShpLDEpO2JyZWFrfX0sbWFpbl9NZXNzYWdlLmNsb3NlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPW1haW5faW5zdGFuY2VzLmxlbmd0aC0xOzA8PWk7aS0tKW1haW5faW5zdGFuY2VzW2ldLmNsb3NlKCl9O3ZhciBwYWNrYWdlc19tZXNzYWdlPW1haW5fTWVzc2FnZSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfN2NjYjY1OThfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWJhZGdlIn0sW192bS5fdCgiZGVmYXVsdCIpLF9jKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6ImVsLXpvb20taW4tY2VudGVyIn19LFtfYygic3VwIix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6IV92bS5oaWRkZW4mJihfdm0uY29udGVudHx8MD09PV92bS5jb250ZW50fHxfdm0uaXNEb3QpLGV4cHJlc3Npb246IiFoaWRkZW4gJiYgKGNvbnRlbnQgfHwgY29udGVudCA9PT0gMCB8fCBpc0RvdCkifV0sc3RhdGljQ2xhc3M6ImVsLWJhZGdlX19jb250ZW50IixjbGFzczpbImVsLWJhZGdlX19jb250ZW50LS0iK192bS50eXBlLHsiaXMtZml4ZWQiOl92bS4kc2xvdHMuZGVmYXVsdCwiaXMtZG90Ijpfdm0uaXNEb3R9XSxkb21Qcm9wczp7dGV4dENvbnRlbnQ6X3ZtLl9zKF92bS5jb250ZW50KX19KV0pXSwyKX07bWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzdjY2I2NTk4X3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBiYWRnZV9zcmNfbWFpbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbEJhZGdlIixwcm9wczp7dmFsdWU6e30sbWF4Ok51bWJlcixpc0RvdDpCb29sZWFuLGhpZGRlbjpCb29sZWFuLHR5cGU6e3R5cGU6U3RyaW5nLHZhbGlkYXRvcjpmdW5jdGlvbih2YWwpe3JldHVybi0xPFsicHJpbWFyeSIsInN1Y2Nlc3MiLCJ3YXJuaW5nIiwiaW5mbyIsImRhbmdlciJdLmluZGV4T2YodmFsKX19fSxjb21wdXRlZDp7Y29udGVudDpmdW5jdGlvbigpe2lmKCF0aGlzLmlzRG90KXt2YXIgdmFsdWU9dGhpcy52YWx1ZSxtYXg9dGhpcy5tYXg7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB2YWx1ZSYmIm51bWJlciI9PXR5cGVvZiBtYXgmJm1heDx2YWx1ZT9tYXgrIisiOnZhbHVlfX19fSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfN2NjYjY1OThfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtiYWRnZV9zcmNfbWFpbl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2JhZGdlL3NyYy9tYWluLnZ1ZSI7dmFyIGJhZGdlX3NyY19tYWluPWJhZGdlX3NyY19tYWluX2NvbXBvbmVudC5leHBvcnRzO2JhZGdlX3NyY19tYWluLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGJhZGdlX3NyY19tYWluLm5hbWUsYmFkZ2Vfc3JjX21haW4pfTt2YXIgYmFkZ2U9YmFkZ2Vfc3JjX21haW4sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzU5YTRhNDBmX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jYXJkIixjbGFzczpfdm0uc2hhZG93PyJpcy0iK192bS5zaGFkb3crIi1zaGFkb3ciOiJpcy1hbHdheXMtc2hhZG93In0sW192bS4kc2xvdHMuaGVhZGVyfHxfdm0uaGVhZGVyP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtY2FyZF9faGVhZGVyIn0sW192bS5fdCgiaGVhZGVyIixbX3ZtLl92KF92bS5fcyhfdm0uaGVhZGVyKSldKV0sMik6X3ZtLl9lKCksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jYXJkX19ib2R5IixzdHlsZTpfdm0uYm9keVN0eWxlfSxbX3ZtLl90KCJkZWZhdWx0IildLDIpXSl9O21haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF81OWE0YTQwZl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgY2FyZF9zcmNfbWFpbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbENhcmQiLHByb3BzOntoZWFkZXI6e30sYm9keVN0eWxlOnt9LHNoYWRvdzp7dHlwZTpTdHJpbmd9fX0sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzU5YTRhNDBmX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y2FyZF9zcmNfbWFpbl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2NhcmQvc3JjL21haW4udnVlIjt2YXIgY2FyZF9zcmNfbWFpbj1jYXJkX3NyY19tYWluX2NvbXBvbmVudC5leHBvcnRzO2NhcmRfc3JjX21haW4uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoY2FyZF9zcmNfbWFpbi5uYW1lLGNhcmRfc3JjX21haW4pfTt2YXIgY2FyZD1jYXJkX3NyY19tYWluLG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF9hZGE1Nzc4Ml9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcmF0ZSIsYXR0cnM6e3JvbGU6InNsaWRlciIsImFyaWEtdmFsdWVub3ciOl92bS5jdXJyZW50VmFsdWUsImFyaWEtdmFsdWV0ZXh0Ijpfdm0udGV4dCwiYXJpYS12YWx1ZW1pbiI6IjAiLCJhcmlhLXZhbHVlbWF4Ijpfdm0ubWF4LHRhYmluZGV4OiIwIn0sb246e2tleWRvd246X3ZtLmhhbmRsZUtleX19LFtfdm0uX2woX3ZtLm1heCxmdW5jdGlvbihpdGVtLGtleSl7cmV0dXJuIF9jKCJzcGFuIix7a2V5OmtleSxzdGF0aWNDbGFzczoiZWwtcmF0ZV9faXRlbSIsc3R5bGU6e2N1cnNvcjpfdm0ucmF0ZURpc2FibGVkPyJhdXRvIjoicG9pbnRlciJ9LG9uOnttb3VzZW1vdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc2V0Q3VycmVudFZhbHVlKGl0ZW0sJGV2ZW50KX0sbW91c2VsZWF2ZTpfdm0ucmVzZXRDdXJyZW50VmFsdWUsY2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc2VsZWN0VmFsdWUoaXRlbSl9fX0sW19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLXJhdGVfX2ljb24iLGNsYXNzOltfdm0uY2xhc3Nlc1tpdGVtLTFdLHtob3Zlcjpfdm0uaG92ZXJJbmRleD09PWl0ZW19XSxzdHlsZTpfdm0uZ2V0SWNvblN0eWxlKGl0ZW0pfSxbX3ZtLnNob3dEZWNpbWFsSWNvbihpdGVtKT9fYygiaSIse3N0YXRpY0NsYXNzOiJlbC1yYXRlX19kZWNpbWFsIixjbGFzczpfdm0uZGVjaW1hbEljb25DbGFzcyxzdHlsZTpfdm0uZGVjaW1hbFN0eWxlfSk6X3ZtLl9lKCldKV0pfSksX3ZtLnNob3dUZXh0fHxfdm0uc2hvd1Njb3JlP19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLXJhdGVfX3RleHQiLHN0eWxlOntjb2xvcjpfdm0udGV4dENvbG9yfX0sW192bS5fdihfdm0uX3MoX3ZtLnRleHQpKV0pOl92bS5fZSgpXSwyKX07bWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkX2FkYTU3NzgyX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciByYXRlX3NyY19tYWluX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsUmF0ZSIsbWl4aW5zOlttaWdyYXRpbmdfZGVmYXVsdC5hXSxpbmplY3Q6e2VsRm9ybTp7ZGVmYXVsdDoiIn19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cG9pbnRlckF0TGVmdEhhbGY6ITAsY3VycmVudFZhbHVlOnRoaXMudmFsdWUsaG92ZXJJbmRleDotMX19LHByb3BzOnt2YWx1ZTp7dHlwZTpOdW1iZXIsZGVmYXVsdDowfSxsb3dUaHJlc2hvbGQ6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6Mn0saGlnaFRocmVzaG9sZDp7dHlwZTpOdW1iZXIsZGVmYXVsdDo0fSxtYXg6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6NX0sY29sb3JzOnt0eXBlOkFycmF5LGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm5bIiNGN0JBMkEiLCIjRjdCQTJBIiwiI0Y3QkEyQSJdfX0sdm9pZENvbG9yOnt0eXBlOlN0cmluZyxkZWZhdWx0OiIjQzZEMURFIn0sZGlzYWJsZWRWb2lkQ29sb3I6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiNFRkYyRjcifSxpY29uQ2xhc3Nlczp7dHlwZTpBcnJheSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuWyJlbC1pY29uLXN0YXItb24iLCJlbC1pY29uLXN0YXItb24iLCJlbC1pY29uLXN0YXItb24iXX19LHZvaWRJY29uQ2xhc3M6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImVsLWljb24tc3Rhci1vZmYifSxkaXNhYmxlZFZvaWRJY29uQ2xhc3M6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImVsLWljb24tc3Rhci1vbiJ9LGRpc2FibGVkOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX0sYWxsb3dIYWxmOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX0sc2hvd1RleHQ6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxzaG93U2NvcmU6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSx0ZXh0Q29sb3I6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiMxZjJkM2QifSx0ZXh0czp7dHlwZTpBcnJheSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuWyLmnoHlt64iLCLlpLHmnJsiLCLkuIDoiKwiLCLmu6HmhI8iLCLmg4rllpwiXX19LHNjb3JlVGVtcGxhdGU6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6Int2YWx1ZX0ifX0sY29tcHV0ZWQ6e3RleHQ6ZnVuY3Rpb24oKXt2YXIgcmVzdWx0PSIiO3JldHVybiB0aGlzLnNob3dTY29yZT9yZXN1bHQ9dGhpcy5zY29yZVRlbXBsYXRlLnJlcGxhY2UoL1x7XHMqdmFsdWVccypcfS8sdGhpcy5yYXRlRGlzYWJsZWQ/dGhpcy52YWx1ZTp0aGlzLmN1cnJlbnRWYWx1ZSk6dGhpcy5zaG93VGV4dCYmKHJlc3VsdD10aGlzLnRleHRzW01hdGguY2VpbCh0aGlzLmN1cnJlbnRWYWx1ZSktMV0pLHJlc3VsdH0sZGVjaW1hbFN0eWxlOmZ1bmN0aW9uKCl7dmFyIHdpZHRoPSIiO3JldHVybiB0aGlzLnJhdGVEaXNhYmxlZCYmKHdpZHRoPSh0aGlzLnZhbHVlRGVjaW1hbDw1MD8wOjUwKSsiJSIpLHRoaXMuYWxsb3dIYWxmJiYod2lkdGg9IjUwJSIpLHtjb2xvcjp0aGlzLmFjdGl2ZUNvbG9yLHdpZHRoOndpZHRofX0sdmFsdWVEZWNpbWFsOmZ1bmN0aW9uKCl7cmV0dXJuIDEwMCp0aGlzLnZhbHVlLTEwMCpNYXRoLmZsb29yKHRoaXMudmFsdWUpfSxkZWNpbWFsSWNvbkNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VmFsdWVGcm9tTWFwKHRoaXMudmFsdWUsdGhpcy5jbGFzc01hcCl9LHZvaWRDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJhdGVEaXNhYmxlZD90aGlzLmNsYXNzTWFwLmRpc2FibGVkVm9pZENsYXNzOnRoaXMuY2xhc3NNYXAudm9pZENsYXNzfSxhY3RpdmVDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZhbHVlRnJvbU1hcCh0aGlzLmN1cnJlbnRWYWx1ZSx0aGlzLmNsYXNzTWFwKX0sY29sb3JNYXA6ZnVuY3Rpb24oKXtyZXR1cm57bG93Q29sb3I6dGhpcy5jb2xvcnNbMF0sbWVkaXVtQ29sb3I6dGhpcy5jb2xvcnNbMV0saGlnaENvbG9yOnRoaXMuY29sb3JzWzJdLHZvaWRDb2xvcjp0aGlzLnZvaWRDb2xvcixkaXNhYmxlZFZvaWRDb2xvcjp0aGlzLmRpc2FibGVkVm9pZENvbG9yfX0sYWN0aXZlQ29sb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRWYWx1ZUZyb21NYXAodGhpcy5jdXJyZW50VmFsdWUsdGhpcy5jb2xvck1hcCl9LGNsYXNzZXM6ZnVuY3Rpb24oKXt2YXIgcmVzdWx0PVtdLGk9MCx0aHJlc2hvbGQ9dGhpcy5jdXJyZW50VmFsdWU7Zm9yKHRoaXMuYWxsb3dIYWxmJiZ0aGlzLmN1cnJlbnRWYWx1ZSE9PU1hdGguZmxvb3IodGhpcy5jdXJyZW50VmFsdWUpJiZ0aHJlc2hvbGQtLTtpPHRocmVzaG9sZDtpKyspcmVzdWx0LnB1c2godGhpcy5hY3RpdmVDbGFzcyk7Zm9yKDtpPHRoaXMubWF4O2krKylyZXN1bHQucHVzaCh0aGlzLnZvaWRDbGFzcyk7cmV0dXJuIHJlc3VsdH0sY2xhc3NNYXA6ZnVuY3Rpb24oKXtyZXR1cm57bG93Q2xhc3M6dGhpcy5pY29uQ2xhc3Nlc1swXSxtZWRpdW1DbGFzczp0aGlzLmljb25DbGFzc2VzWzFdLGhpZ2hDbGFzczp0aGlzLmljb25DbGFzc2VzWzJdLHZvaWRDbGFzczp0aGlzLnZvaWRJY29uQ2xhc3MsZGlzYWJsZWRWb2lkQ2xhc3M6dGhpcy5kaXNhYmxlZFZvaWRJY29uQ2xhc3N9fSxyYXRlRGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNhYmxlZHx8KHRoaXMuZWxGb3JtfHx7fSkuZGlzYWJsZWR9fSx3YXRjaDp7dmFsdWU6ZnVuY3Rpb24odmFsKXt0aGlzLmN1cnJlbnRWYWx1ZT12YWwsdGhpcy5wb2ludGVyQXRMZWZ0SGFsZj10aGlzLnZhbHVlIT09TWF0aC5mbG9vcih0aGlzLnZhbHVlKX19LG1ldGhvZHM6e2dldE1pZ3JhdGluZ0NvbmZpZzpmdW5jdGlvbigpe3JldHVybntwcm9wczp7InRleHQtdGVtcGxhdGUiOiJ0ZXh0LXRlbXBsYXRlIGlzIHJlbmFtZWQgdG8gc2NvcmUtdGVtcGxhdGUuIn19fSxnZXRWYWx1ZUZyb21NYXA6ZnVuY3Rpb24odmFsdWUsbWFwKXtyZXR1cm4gdmFsdWU8PXRoaXMubG93VGhyZXNob2xkP21hcC5sb3dDb2xvcnx8bWFwLmxvd0NsYXNzOnZhbHVlPj10aGlzLmhpZ2hUaHJlc2hvbGQ/bWFwLmhpZ2hDb2xvcnx8bWFwLmhpZ2hDbGFzczptYXAubWVkaXVtQ29sb3J8fG1hcC5tZWRpdW1DbGFzc30sc2hvd0RlY2ltYWxJY29uOmZ1bmN0aW9uKGl0ZW0pe3ZhciBzaG93V2hlbkRpc2FibGVkPXRoaXMucmF0ZURpc2FibGVkJiYwPHRoaXMudmFsdWVEZWNpbWFsJiZpdGVtLTE8dGhpcy52YWx1ZSYmaXRlbT50aGlzLnZhbHVlLHNob3dXaGVuQWxsb3dIYWxmPXRoaXMuYWxsb3dIYWxmJiZ0aGlzLnBvaW50ZXJBdExlZnRIYWxmJiZpdGVtLS41PD10aGlzLmN1cnJlbnRWYWx1ZSYmaXRlbT50aGlzLmN1cnJlbnRWYWx1ZTtyZXR1cm4gc2hvd1doZW5EaXNhYmxlZHx8c2hvd1doZW5BbGxvd0hhbGZ9LGdldEljb25TdHlsZTpmdW5jdGlvbihpdGVtKXt2YXIgdm9pZENvbG9yPXRoaXMucmF0ZURpc2FibGVkP3RoaXMuY29sb3JNYXAuZGlzYWJsZWRWb2lkQ29sb3I6dGhpcy5jb2xvck1hcC52b2lkQ29sb3I7cmV0dXJue2NvbG9yOml0ZW08PXRoaXMuY3VycmVudFZhbHVlP3RoaXMuYWN0aXZlQ29sb3I6dm9pZENvbG9yfX0sc2VsZWN0VmFsdWU6ZnVuY3Rpb24odmFsdWUpe3RoaXMucmF0ZURpc2FibGVkfHwodGhpcy5hbGxvd0hhbGYmJnRoaXMucG9pbnRlckF0TGVmdEhhbGY/KHRoaXMuJGVtaXQoImlucHV0Iix0aGlzLmN1cnJlbnRWYWx1ZSksdGhpcy4kZW1pdCgiY2hhbmdlIix0aGlzLmN1cnJlbnRWYWx1ZSkpOih0aGlzLiRlbWl0KCJpbnB1dCIsdmFsdWUpLHRoaXMuJGVtaXQoImNoYW5nZSIsdmFsdWUpKSl9LGhhbmRsZUtleTpmdW5jdGlvbihlKXtpZighdGhpcy5yYXRlRGlzYWJsZWQpe3ZhciBjdXJyZW50VmFsdWU9dGhpcy5jdXJyZW50VmFsdWUsa2V5Q29kZT1lLmtleUNvZGU7Mzg9PT1rZXlDb2RlfHwzOT09PWtleUNvZGU/KHRoaXMuYWxsb3dIYWxmP2N1cnJlbnRWYWx1ZSs9LjU6Y3VycmVudFZhbHVlKz0xLGUuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKTozNyE9PWtleUNvZGUmJjQwIT09a2V5Q29kZXx8KHRoaXMuYWxsb3dIYWxmP2N1cnJlbnRWYWx1ZS09LjU6Y3VycmVudFZhbHVlLT0xLGUuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKSxjdXJyZW50VmFsdWU9KGN1cnJlbnRWYWx1ZT1jdXJyZW50VmFsdWU8MD8wOmN1cnJlbnRWYWx1ZSk+dGhpcy5tYXg/dGhpcy5tYXg6Y3VycmVudFZhbHVlLHRoaXMuJGVtaXQoImlucHV0IixjdXJyZW50VmFsdWUpLHRoaXMuJGVtaXQoImNoYW5nZSIsY3VycmVudFZhbHVlKX19LHNldEN1cnJlbnRWYWx1ZTpmdW5jdGlvbih2YWx1ZSxldmVudCl7aWYoIXRoaXMucmF0ZURpc2FibGVkKXtpZih0aGlzLmFsbG93SGFsZil7dmFyIHRhcmdldD1ldmVudC50YXJnZXQ7T2JqZWN0KGRvbV8uaGFzQ2xhc3MpKHRhcmdldCwiZWwtcmF0ZV9faXRlbSIpJiYodGFyZ2V0PXRhcmdldC5xdWVyeVNlbGVjdG9yKCIuZWwtcmF0ZV9faWNvbiIpKSxPYmplY3QoZG9tXy5oYXNDbGFzcykodGFyZ2V0LCJlbC1yYXRlX19kZWNpbWFsIikmJih0YXJnZXQ9dGFyZ2V0LnBhcmVudE5vZGUpLHRoaXMucG9pbnRlckF0TGVmdEhhbGY9MipldmVudC5vZmZzZXRYPD10YXJnZXQuY2xpZW50V2lkdGgsdGhpcy5jdXJyZW50VmFsdWU9dGhpcy5wb2ludGVyQXRMZWZ0SGFsZj92YWx1ZS0uNTp2YWx1ZX1lbHNlIHRoaXMuY3VycmVudFZhbHVlPXZhbHVlO3RoaXMuaG92ZXJJbmRleD12YWx1ZX19LHJlc2V0Q3VycmVudFZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yYXRlRGlzYWJsZWR8fCh0aGlzLmFsbG93SGFsZiYmKHRoaXMucG9pbnRlckF0TGVmdEhhbGY9dGhpcy52YWx1ZSE9PU1hdGguZmxvb3IodGhpcy52YWx1ZSkpLHRoaXMuY3VycmVudFZhbHVlPXRoaXMudmFsdWUsdGhpcy5ob3ZlckluZGV4PS0xKX19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlfHx0aGlzLiRlbWl0KCJpbnB1dCIsMCl9fSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfYWRhNTc3ODJfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtyYXRlX3NyY19tYWluX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvcmF0ZS9zcmMvbWFpbi52dWUiO3ZhciByYXRlX3NyY19tYWluPXJhdGVfc3JjX21haW5fY29tcG9uZW50LmV4cG9ydHM7cmF0ZV9zcmNfbWFpbi5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChyYXRlX3NyY19tYWluLm5hbWUscmF0ZV9zcmNfbWFpbil9O3ZhciByYXRlPXJhdGVfc3JjX21haW4sc3RlcHN2dWVfdHlwZV90ZW1wbGF0ZV9pZF8zYzZiNmRjMF9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudDtyZXR1cm4odGhpcy5fc2VsZi5fY3x8X2gpKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtc3RlcHMiLGNsYXNzOlshdGhpcy5zaW1wbGUmJiJlbC1zdGVwcy0tIit0aGlzLmRpcmVjdGlvbix0aGlzLnNpbXBsZSYmImVsLXN0ZXBzLS1zaW1wbGUiXX0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMil9O3N0ZXBzdnVlX3R5cGVfdGVtcGxhdGVfaWRfM2M2YjZkYzBfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHN0ZXBzX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsU3RlcHMiLG1peGluczpbbWlncmF0aW5nX2RlZmF1bHQuYV0scHJvcHM6e3NwYWNlOltOdW1iZXIsU3RyaW5nXSxhY3RpdmU6TnVtYmVyLGRpcmVjdGlvbjp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiaG9yaXpvbnRhbCJ9LGFsaWduQ2VudGVyOkJvb2xlYW4sc2ltcGxlOkJvb2xlYW4sZmluaXNoU3RhdHVzOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJmaW5pc2gifSxwcm9jZXNzU3RhdHVzOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJwcm9jZXNzIn19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57c3RlcHM6W10sc3RlcE9mZnNldDowfX0sbWV0aG9kczp7Z2V0TWlncmF0aW5nQ29uZmlnOmZ1bmN0aW9uKCl7cmV0dXJue3Byb3BzOntjZW50ZXI6ImNlbnRlciBpcyByZW1vdmVkLiJ9fX19LHdhdGNoOnthY3RpdmU6ZnVuY3Rpb24obmV3VmFsLG9sZFZhbCl7dGhpcy4kZW1pdCgiY2hhbmdlIixuZXdWYWwsb2xkVmFsKX0sc3RlcHM6ZnVuY3Rpb24oX3N0ZXBzKXtfc3RlcHMuZm9yRWFjaChmdW5jdGlvbihjaGlsZCxpbmRleCl7Y2hpbGQuaW5kZXg9aW5kZXh9KX19fSxzdGVwc3Z1ZV90eXBlX3RlbXBsYXRlX2lkXzNjNmI2ZGMwX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7c3RlcHNfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9zdGVwcy9zcmMvc3RlcHMudnVlIjt2YXIgc3RlcHM9c3RlcHNfY29tcG9uZW50LmV4cG9ydHM7c3RlcHMuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoc3RlcHMubmFtZSxzdGVwcyl9O3ZhciBwYWNrYWdlc19zdGVwcz1zdGVwcyxzdGVwdnVlX3R5cGVfdGVtcGxhdGVfaWRfZjQxNGE4N2FfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXN0ZXAiLGNsYXNzOlshX3ZtLmlzU2ltcGxlJiYiaXMtIitfdm0uJHBhcmVudC5kaXJlY3Rpb24sX3ZtLmlzU2ltcGxlJiYiaXMtc2ltcGxlIixfdm0uaXNMYXN0JiYhX3ZtLnNwYWNlJiYhX3ZtLmlzQ2VudGVyJiYiaXMtZmxleCIsX3ZtLmlzQ2VudGVyJiYhX3ZtLmlzVmVydGljYWwmJiFfdm0uaXNTaW1wbGUmJiJpcy1jZW50ZXIiXSxzdHlsZTpfdm0uc3R5bGV9LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXN0ZXBfX2hlYWQiLGNsYXNzOiJpcy0iK192bS5jdXJyZW50U3RhdHVzfSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1zdGVwX19saW5lIixzdHlsZTpfdm0uaXNMYXN0PyIiOnttYXJnaW5SaWdodDpfdm0uJHBhcmVudC5zdGVwT2Zmc2V0KyJweCJ9fSxbX2MoImkiLHtzdGF0aWNDbGFzczoiZWwtc3RlcF9fbGluZS1pbm5lciIsc3R5bGU6X3ZtLmxpbmVTdHlsZX0pXSksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1zdGVwX19pY29uIixjbGFzczoiaXMtIisoX3ZtLmljb24/Imljb24iOiJ0ZXh0Iil9LFsic3VjY2VzcyIhPT1fdm0uY3VycmVudFN0YXR1cyYmImVycm9yIiE9PV92bS5jdXJyZW50U3RhdHVzP192bS5fdCgiaWNvbiIsW192bS5pY29uP19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLXN0ZXBfX2ljb24taW5uZXIiLGNsYXNzOltfdm0uaWNvbl19KTpfdm0uX2UoKSxfdm0uaWNvbnx8X3ZtLmlzU2ltcGxlP192bS5fZSgpOl9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtc3RlcF9faWNvbi1pbm5lciJ9LFtfdm0uX3YoX3ZtLl9zKF92bS5pbmRleCsxKSldKV0pOl9jKCJpIix7c3RhdGljQ2xhc3M6ImVsLXN0ZXBfX2ljb24taW5uZXIgaXMtc3RhdHVzIixjbGFzczpbImVsLWljb24tIisoInN1Y2Nlc3MiPT09X3ZtLmN1cnJlbnRTdGF0dXM/ImNoZWNrIjoiY2xvc2UiKV19KV0sMildKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXN0ZXBfX21haW4ifSxbX2MoImRpdiIse3JlZjoidGl0bGUiLHN0YXRpY0NsYXNzOiJlbC1zdGVwX190aXRsZSIsY2xhc3M6WyJpcy0iK192bS5jdXJyZW50U3RhdHVzXX0sW192bS5fdCgidGl0bGUiLFtfdm0uX3YoX3ZtLl9zKF92bS50aXRsZSkpXSldLDIpLF92bS5pc1NpbXBsZT9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXN0ZXBfX2Fycm93In0pOl9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtc3RlcF9fZGVzY3JpcHRpb24iLGNsYXNzOlsiaXMtIitfdm0uY3VycmVudFN0YXR1c119LFtfdm0uX3QoImRlc2NyaXB0aW9uIixbX3ZtLl92KF92bS5fcyhfdm0uZGVzY3JpcHRpb24pKV0pXSwyKV0pXSl9O3N0ZXB2dWVfdHlwZV90ZW1wbGF0ZV9pZF9mNDE0YTg3YV9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgc3RlcF9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFN0ZXAiLHByb3BzOnt0aXRsZTpTdHJpbmcsaWNvbjpTdHJpbmcsZGVzY3JpcHRpb246U3RyaW5nLHN0YXR1czpTdHJpbmd9LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6LTEsbGluZVN0eWxlOnt9LGludGVybmFsU3RhdHVzOiIifX0sYmVmb3JlQ3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy4kcGFyZW50LnN0ZXBzLnB1c2godGhpcyl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgc3RlcHM9dGhpcy4kcGFyZW50LnN0ZXBzLGluZGV4PXN0ZXBzLmluZGV4T2YodGhpcyk7MDw9aW5kZXgmJnN0ZXBzLnNwbGljZShpbmRleCwxKX0sY29tcHV0ZWQ6e2N1cnJlbnRTdGF0dXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0dXN8fHRoaXMuaW50ZXJuYWxTdGF0dXN9LHByZXZTdGF0dXM6ZnVuY3Rpb24oKXt2YXIgcHJldlN0ZXA9dGhpcy4kcGFyZW50LnN0ZXBzW3RoaXMuaW5kZXgtMV07cmV0dXJuIHByZXZTdGVwP3ByZXZTdGVwLmN1cnJlbnRTdGF0dXM6IndhaXQifSxpc0NlbnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRwYXJlbnQuYWxpZ25DZW50ZXJ9LGlzVmVydGljYWw6ZnVuY3Rpb24oKXtyZXR1cm4idmVydGljYWwiPT09dGhpcy4kcGFyZW50LmRpcmVjdGlvbn0saXNTaW1wbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcGFyZW50LnNpbXBsZX0saXNMYXN0OmZ1bmN0aW9uKCl7dmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7cmV0dXJuIHBhcmVudC5zdGVwc1twYXJlbnQuc3RlcHMubGVuZ3RoLTFdPT09dGhpc30sc3RlcHNDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiRwYXJlbnQuc3RlcHMubGVuZ3RofSxzcGFjZTpmdW5jdGlvbigpe3ZhciBpc1NpbXBsZT10aGlzLmlzU2ltcGxlLHNwYWNlPXRoaXMuJHBhcmVudC5zcGFjZTtyZXR1cm4gaXNTaW1wbGU/IiI6c3BhY2V9LHN0eWxlOmZ1bmN0aW9uKCl7dmFyIHN0eWxlPXt9LGxlbj10aGlzLiRwYXJlbnQuc3RlcHMubGVuZ3RoLHNwYWNlPSJudW1iZXIiPT10eXBlb2YgdGhpcy5zcGFjZT90aGlzLnNwYWNlKyJweCI6dGhpcy5zcGFjZT90aGlzLnNwYWNlOjEwMC8obGVuLSh0aGlzLmlzQ2VudGVyPzA6MSkpKyIlIjtyZXR1cm4gc3R5bGUuZmxleEJhc2lzPXNwYWNlLHRoaXMuaXNWZXJ0aWNhbHx8KHRoaXMuaXNMYXN0P3N0eWxlLm1heFdpZHRoPTEwMC90aGlzLnN0ZXBzQ291bnQrIiUiOnN0eWxlLm1hcmdpblJpZ2h0PS10aGlzLiRwYXJlbnQuc3RlcE9mZnNldCsicHgiKSxzdHlsZX19LG1ldGhvZHM6e3VwZGF0ZVN0YXR1czpmdW5jdGlvbih2YWwpe3ZhciBwcmV2Q2hpbGQ9dGhpcy4kcGFyZW50LiRjaGlsZHJlblt0aGlzLmluZGV4LTFdO3ZhbD50aGlzLmluZGV4P3RoaXMuaW50ZXJuYWxTdGF0dXM9dGhpcy4kcGFyZW50LmZpbmlzaFN0YXR1czp2YWw9PT10aGlzLmluZGV4JiYiZXJyb3IiIT09dGhpcy5wcmV2U3RhdHVzP3RoaXMuaW50ZXJuYWxTdGF0dXM9dGhpcy4kcGFyZW50LnByb2Nlc3NTdGF0dXM6dGhpcy5pbnRlcm5hbFN0YXR1cz0id2FpdCIscHJldkNoaWxkJiZwcmV2Q2hpbGQuY2FsY1Byb2dyZXNzKHRoaXMuaW50ZXJuYWxTdGF0dXMpfSxjYWxjUHJvZ3Jlc3M6ZnVuY3Rpb24oc3RhdHVzKXt2YXIgc3RlcD0xMDAsc3R5bGU9e307c3R5bGUudHJhbnNpdGlvbkRlbGF5PTE1MCp0aGlzLmluZGV4KyJtcyIsc3RhdHVzPT09dGhpcy4kcGFyZW50LnByb2Nlc3NTdGF0dXM/KHRoaXMuY3VycmVudFN0YXR1cyxzdGVwPTApOiJ3YWl0Ij09PXN0YXR1cyYmKHN0ZXA9MCxzdHlsZS50cmFuc2l0aW9uRGVsYXk9LTE1MCp0aGlzLmluZGV4KyJtcyIpLHN0eWxlLmJvcmRlcldpZHRoPXN0ZXA/IjFweCI6MCwidmVydGljYWwiPT09dGhpcy4kcGFyZW50LmRpcmVjdGlvbj9zdHlsZS5oZWlnaHQ9c3RlcCsiJSI6c3R5bGUud2lkdGg9c3RlcCsiJSIsdGhpcy5saW5lU3R5bGU9c3R5bGV9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXMsdW53YXRjaD10aGlzLiR3YXRjaCgiaW5kZXgiLGZ1bmN0aW9uKHZhbCl7X3RoaXMuJHdhdGNoKCIkcGFyZW50LmFjdGl2ZSIsX3RoaXMudXBkYXRlU3RhdHVzLHtpbW1lZGlhdGU6ITB9KSx1bndhdGNoKCl9KX19LHN0ZXB2dWVfdHlwZV90ZW1wbGF0ZV9pZF9mNDE0YTg3YV9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3N0ZXBfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9zdGVwcy9zcmMvc3RlcC52dWUiO3ZhciBzdGVwPXN0ZXBfY29tcG9uZW50LmV4cG9ydHM7c3RlcC5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChzdGVwLm5hbWUsc3RlcCl9O3ZhciBwYWNrYWdlc19zdGVwPXN0ZXAsbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzVkNWQxNDgyX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jYXJvdXNlbCIsY2xhc3M6eyJlbC1jYXJvdXNlbC0tY2FyZCI6ImNhcmQiPT09X3ZtLnR5cGV9LG9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuICRldmVudC5zdG9wUHJvcGFnYXRpb24oKSxfdm0uaGFuZGxlTW91c2VFbnRlcigkZXZlbnQpfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuICRldmVudC5zdG9wUHJvcGFnYXRpb24oKSxfdm0uaGFuZGxlTW91c2VMZWF2ZSgkZXZlbnQpfX19LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWNhcm91c2VsX19jb250YWluZXIiLHN0eWxlOntoZWlnaHQ6X3ZtLmhlaWdodH19LFtfYygidHJhbnNpdGlvbiIse2F0dHJzOntuYW1lOiJjYXJvdXNlbC1hcnJvdy1sZWZ0In19LFsibmV2ZXIiIT09X3ZtLmFycm93P19jKCJidXR0b24iLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTooImFsd2F5cyI9PT1fdm0uYXJyb3d8fF92bS5ob3ZlcikmJihfdm0ubG9vcHx8MDxfdm0uYWN0aXZlSW5kZXgpLGV4cHJlc3Npb246IihhcnJvdyA9PT0gJ2Fsd2F5cycgfHwgaG92ZXIpICYmIChsb29wIHx8IGFjdGl2ZUluZGV4ID4gMCkifV0sc3RhdGljQ2xhc3M6ImVsLWNhcm91c2VsX19hcnJvdyBlbC1jYXJvdXNlbF9fYXJyb3ctLWxlZnQiLGF0dHJzOnt0eXBlOiJidXR0b24ifSxvbjp7bW91c2VlbnRlcjpmdW5jdGlvbigkZXZlbnQpe192bS5oYW5kbGVCdXR0b25FbnRlcigibGVmdCIpfSxtb3VzZWxlYXZlOl92bS5oYW5kbGVCdXR0b25MZWF2ZSxjbGljazpmdW5jdGlvbigkZXZlbnQpeyRldmVudC5zdG9wUHJvcGFnYXRpb24oKSxfdm0udGhyb3R0bGVkQXJyb3dDbGljayhfdm0uYWN0aXZlSW5kZXgtMSl9fX0sW19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWljb24tYXJyb3ctbGVmdCJ9KV0pOl92bS5fZSgpXSksX2MoInRyYW5zaXRpb24iLHthdHRyczp7bmFtZToiY2Fyb3VzZWwtYXJyb3ctcmlnaHQifX0sWyJuZXZlciIhPT1fdm0uYXJyb3c/X2MoImJ1dHRvbiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOigiYWx3YXlzIj09PV92bS5hcnJvd3x8X3ZtLmhvdmVyKSYmKF92bS5sb29wfHxfdm0uYWN0aXZlSW5kZXg8X3ZtLml0ZW1zLmxlbmd0aC0xKSxleHByZXNzaW9uOiIoYXJyb3cgPT09ICdhbHdheXMnIHx8IGhvdmVyKSAmJiAobG9vcCB8fCBhY3RpdmVJbmRleCA8IGl0ZW1zLmxlbmd0aCAtIDEpIn1dLHN0YXRpY0NsYXNzOiJlbC1jYXJvdXNlbF9fYXJyb3cgZWwtY2Fyb3VzZWxfX2Fycm93LS1yaWdodCIsYXR0cnM6e3R5cGU6ImJ1dHRvbiJ9LG9uOnttb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmhhbmRsZUJ1dHRvbkVudGVyKCJyaWdodCIpfSxtb3VzZWxlYXZlOl92bS5oYW5kbGVCdXR0b25MZWF2ZSxjbGljazpmdW5jdGlvbigkZXZlbnQpeyRldmVudC5zdG9wUHJvcGFnYXRpb24oKSxfdm0udGhyb3R0bGVkQXJyb3dDbGljayhfdm0uYWN0aXZlSW5kZXgrMSl9fX0sW19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWljb24tYXJyb3ctcmlnaHQifSldKTpfdm0uX2UoKV0pLF92bS5fdCgiZGVmYXVsdCIpXSwyKSwibm9uZSIhPT1fdm0uaW5kaWNhdG9yUG9zaXRpb24/X2MoInVsIix7c3RhdGljQ2xhc3M6ImVsLWNhcm91c2VsX19pbmRpY2F0b3JzIixjbGFzczp7ImVsLWNhcm91c2VsX19pbmRpY2F0b3JzLS1sYWJlbHMiOl92bS5oYXNMYWJlbCwiZWwtY2Fyb3VzZWxfX2luZGljYXRvcnMtLW91dHNpZGUiOiJvdXRzaWRlIj09PV92bS5pbmRpY2F0b3JQb3NpdGlvbnx8ImNhcmQiPT09X3ZtLnR5cGV9fSxfdm0uX2woX3ZtLml0ZW1zLGZ1bmN0aW9uKGl0ZW0saW5kZXgpe3JldHVybiBfYygibGkiLHtzdGF0aWNDbGFzczoiZWwtY2Fyb3VzZWxfX2luZGljYXRvciIsY2xhc3M6eyJpcy1hY3RpdmUiOmluZGV4PT09X3ZtLmFjdGl2ZUluZGV4fSxvbjp7bW91c2VlbnRlcjpmdW5jdGlvbigkZXZlbnQpe192bS50aHJvdHRsZWRJbmRpY2F0b3JIb3ZlcihpbmRleCl9LGNsaWNrOmZ1bmN0aW9uKCRldmVudCl7JGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLF92bS5oYW5kbGVJbmRpY2F0b3JDbGljayhpbmRleCl9fX0sW19jKCJidXR0b24iLHtzdGF0aWNDbGFzczoiZWwtY2Fyb3VzZWxfX2J1dHRvbiJ9LFtfdm0uaGFzTGFiZWw/X2MoInNwYW4iLFtfdm0uX3YoX3ZtLl9zKGl0ZW0ubGFiZWwpKV0pOl92bS5fZSgpXSldKX0pLDApOl92bS5fZSgpXSl9O21haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF81ZDVkMTQ4Ml9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgdGhyb3R0bGVfPV9fd2VicGFja19yZXF1aXJlX18oMzApLHRocm90dGxlX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKHRocm90dGxlXyksY2Fyb3VzZWxfc3JjX21haW5fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxDYXJvdXNlbCIscHJvcHM6e2luaXRpYWxJbmRleDp7dHlwZTpOdW1iZXIsZGVmYXVsdDowfSxoZWlnaHQ6U3RyaW5nLHRyaWdnZXI6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImhvdmVyIn0sYXV0b3BsYXk6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxpbnRlcnZhbDp7dHlwZTpOdW1iZXIsZGVmYXVsdDozZTN9LGluZGljYXRvclBvc2l0aW9uOlN0cmluZyxpbmRpY2F0b3I6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiEwfSxhcnJvdzp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiaG92ZXIifSx0eXBlOlN0cmluZyxsb29wOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57aXRlbXM6W10sYWN0aXZlSW5kZXg6LTEsY29udGFpbmVyV2lkdGg6MCx0aW1lcjpudWxsLGhvdmVyOiExfX0sY29tcHV0ZWQ6e2hhc0xhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXMuc29tZShmdW5jdGlvbihpdGVtKXtyZXR1cm4gMDxpdGVtLmxhYmVsLnRvU3RyaW5nKCkubGVuZ3RofSl9fSx3YXRjaDp7aXRlbXM6ZnVuY3Rpb24odmFsKXswPHZhbC5sZW5ndGgmJnRoaXMuc2V0QWN0aXZlSXRlbSh0aGlzLmluaXRpYWxJbmRleCl9LGFjdGl2ZUluZGV4OmZ1bmN0aW9uKHZhbCxvbGRWYWwpe3RoaXMucmVzZXRJdGVtUG9zaXRpb24ob2xkVmFsKSx0aGlzLiRlbWl0KCJjaGFuZ2UiLHZhbCxvbGRWYWwpfSxhdXRvcGxheTpmdW5jdGlvbih2YWwpe3ZhbD90aGlzLnN0YXJ0VGltZXIoKTp0aGlzLnBhdXNlVGltZXIoKX0sbG9vcDpmdW5jdGlvbigpe3RoaXMuc2V0QWN0aXZlSXRlbSh0aGlzLmFjdGl2ZUluZGV4KX19LG1ldGhvZHM6e2hhbmRsZU1vdXNlRW50ZXI6ZnVuY3Rpb24oKXt0aGlzLmhvdmVyPSEwLHRoaXMucGF1c2VUaW1lcigpfSxoYW5kbGVNb3VzZUxlYXZlOmZ1bmN0aW9uKCl7dGhpcy5ob3Zlcj0hMSx0aGlzLnN0YXJ0VGltZXIoKX0saXRlbUluU3RhZ2U6ZnVuY3Rpb24oaXRlbSxpbmRleCl7dmFyIGxlbmd0aD10aGlzLml0ZW1zLmxlbmd0aDtyZXR1cm4gaW5kZXg9PT1sZW5ndGgtMSYmaXRlbS5pblN0YWdlJiZ0aGlzLml0ZW1zWzBdLmFjdGl2ZXx8aXRlbS5pblN0YWdlJiZ0aGlzLml0ZW1zW2luZGV4KzFdJiZ0aGlzLml0ZW1zW2luZGV4KzFdLmFjdGl2ZT8ibGVmdCI6ISEoMD09PWluZGV4JiZpdGVtLmluU3RhZ2UmJnRoaXMuaXRlbXNbbGVuZ3RoLTFdLmFjdGl2ZXx8aXRlbS5pblN0YWdlJiZ0aGlzLml0ZW1zW2luZGV4LTFdJiZ0aGlzLml0ZW1zW2luZGV4LTFdLmFjdGl2ZSkmJiJyaWdodCJ9LGhhbmRsZUJ1dHRvbkVudGVyOmZ1bmN0aW9uKGFycm93KXt2YXIgX3RoaXM9dGhpczt0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSxpbmRleCl7YXJyb3c9PT1fdGhpcy5pdGVtSW5TdGFnZShpdGVtLGluZGV4KSYmKGl0ZW0uaG92ZXI9ITApfSl9LGhhbmRsZUJ1dHRvbkxlYXZlOmZ1bmN0aW9uKCl7dGhpcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe2l0ZW0uaG92ZXI9ITF9KX0sdXBkYXRlSXRlbXM6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPXRoaXMuJGNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbihjaGlsZCl7cmV0dXJuIkVsQ2Fyb3VzZWxJdGVtIj09PWNoaWxkLiRvcHRpb25zLm5hbWV9KX0scmVzZXRJdGVtUG9zaXRpb246ZnVuY3Rpb24ob2xkSW5kZXgpe3ZhciBfdGhpczI9dGhpczt0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSxpbmRleCl7aXRlbS50cmFuc2xhdGVJdGVtKGluZGV4LF90aGlzMi5hY3RpdmVJbmRleCxvbGRJbmRleCl9KX0scGxheVNsaWRlczpmdW5jdGlvbigpe3RoaXMuYWN0aXZlSW5kZXg8dGhpcy5pdGVtcy5sZW5ndGgtMT90aGlzLmFjdGl2ZUluZGV4Kys6dGhpcy5sb29wJiYodGhpcy5hY3RpdmVJbmRleD0wKX0scGF1c2VUaW1lcjpmdW5jdGlvbigpe3RoaXMudGltZXImJihjbGVhckludGVydmFsKHRoaXMudGltZXIpLHRoaXMudGltZXI9bnVsbCl9LHN0YXJ0VGltZXI6ZnVuY3Rpb24oKXt0aGlzLmludGVydmFsPD0wfHwhdGhpcy5hdXRvcGxheXx8dGhpcy50aW1lcnx8KHRoaXMudGltZXI9c2V0SW50ZXJ2YWwodGhpcy5wbGF5U2xpZGVzLHRoaXMuaW50ZXJ2YWwpKX0sc2V0QWN0aXZlSXRlbTpmdW5jdGlvbihpbmRleCl7aWYoInN0cmluZyI9PXR5cGVvZiBpbmRleCl7dmFyIGZpbHRlcmVkSXRlbXM9dGhpcy5pdGVtcy5maWx0ZXIoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0ubmFtZT09PWluZGV4fSk7MDxmaWx0ZXJlZEl0ZW1zLmxlbmd0aCYmKGluZGV4PXRoaXMuaXRlbXMuaW5kZXhPZihmaWx0ZXJlZEl0ZW1zWzBdKSl9aWYoaW5kZXg9TnVtYmVyKGluZGV4KSwhaXNOYU4oaW5kZXgpJiZpbmRleD09PU1hdGguZmxvb3IoaW5kZXgpKXt2YXIgbGVuZ3RoPXRoaXMuaXRlbXMubGVuZ3RoLG9sZEluZGV4PXRoaXMuYWN0aXZlSW5kZXg7dGhpcy5hY3RpdmVJbmRleD1pbmRleDwwP3RoaXMubG9vcD9sZW5ndGgtMTowOmxlbmd0aDw9aW5kZXg/dGhpcy5sb29wPzA6bGVuZ3RoLTE6aW5kZXgsb2xkSW5kZXg9PT10aGlzLmFjdGl2ZUluZGV4JiZ0aGlzLnJlc2V0SXRlbVBvc2l0aW9uKG9sZEluZGV4KX19LHByZXY6ZnVuY3Rpb24oKXt0aGlzLnNldEFjdGl2ZUl0ZW0odGhpcy5hY3RpdmVJbmRleC0xKX0sbmV4dDpmdW5jdGlvbigpe3RoaXMuc2V0QWN0aXZlSXRlbSh0aGlzLmFjdGl2ZUluZGV4KzEpfSxoYW5kbGVJbmRpY2F0b3JDbGljazpmdW5jdGlvbihpbmRleCl7dGhpcy5hY3RpdmVJbmRleD1pbmRleH0saGFuZGxlSW5kaWNhdG9ySG92ZXI6ZnVuY3Rpb24oaW5kZXgpeyJob3ZlciI9PT10aGlzLnRyaWdnZXImJmluZGV4IT09dGhpcy5hY3RpdmVJbmRleCYmKHRoaXMuYWN0aXZlSW5kZXg9aW5kZXgpfX0sY3JlYXRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczM9dGhpczt0aGlzLnRocm90dGxlZEFycm93Q2xpY2s9dGhyb3R0bGVfZGVmYXVsdCgpKDMwMCwhMCxmdW5jdGlvbihpbmRleCl7X3RoaXMzLnNldEFjdGl2ZUl0ZW0oaW5kZXgpfSksdGhpcy50aHJvdHRsZWRJbmRpY2F0b3JIb3Zlcj10aHJvdHRsZV9kZWZhdWx0KCkoMzAwLGZ1bmN0aW9uKGluZGV4KXtfdGhpczMuaGFuZGxlSW5kaWNhdG9ySG92ZXIoaW5kZXgpfSl9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM0PXRoaXM7dGhpcy51cGRhdGVJdGVtcygpLHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCl7T2JqZWN0KHJlc2l6ZV9ldmVudF8uYWRkUmVzaXplTGlzdGVuZXIpKF90aGlzNC4kZWwsX3RoaXM0LnJlc2V0SXRlbVBvc2l0aW9uKSxfdGhpczQuaW5pdGlhbEluZGV4PF90aGlzNC5pdGVtcy5sZW5ndGgmJjA8PV90aGlzNC5pbml0aWFsSW5kZXgmJihfdGhpczQuYWN0aXZlSW5kZXg9X3RoaXM0LmluaXRpYWxJbmRleCksX3RoaXM0LnN0YXJ0VGltZXIoKX0pfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy4kZWwmJk9iamVjdChyZXNpemVfZXZlbnRfLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKSh0aGlzLiRlbCx0aGlzLnJlc2V0SXRlbVBvc2l0aW9uKSx0aGlzLnBhdXNlVGltZXIoKX19LG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF81ZDVkMTQ4Ml9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2Nhcm91c2VsX3NyY19tYWluX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvY2Fyb3VzZWwvc3JjL21haW4udnVlIjt2YXIgY2Fyb3VzZWxfc3JjX21haW49Y2Fyb3VzZWxfc3JjX21haW5fY29tcG9uZW50LmV4cG9ydHM7Y2Fyb3VzZWxfc3JjX21haW4uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoY2Fyb3VzZWxfc3JjX21haW4ubmFtZSxjYXJvdXNlbF9zcmNfbWFpbil9O3ZhciBjYXJvdXNlbD1jYXJvdXNlbF9zcmNfbWFpbixCQVJfTUFQPXt2ZXJ0aWNhbDp7b2Zmc2V0OiJvZmZzZXRIZWlnaHQiLHNjcm9sbDoic2Nyb2xsVG9wIixzY3JvbGxTaXplOiJzY3JvbGxIZWlnaHQiLHNpemU6ImhlaWdodCIsa2V5OiJ2ZXJ0aWNhbCIsYXhpczoiWSIsY2xpZW50OiJjbGllbnRZIixkaXJlY3Rpb246InRvcCJ9LGhvcml6b250YWw6e29mZnNldDoib2Zmc2V0V2lkdGgiLHNjcm9sbDoic2Nyb2xsTGVmdCIsc2Nyb2xsU2l6ZToic2Nyb2xsV2lkdGgiLHNpemU6IndpZHRoIixrZXk6Imhvcml6b250YWwiLGF4aXM6IlgiLGNsaWVudDoiY2xpZW50WCIsZGlyZWN0aW9uOiJsZWZ0In19O3ZhciBzcmNfYmFyPXtuYW1lOiJCYXIiLHByb3BzOnt2ZXJ0aWNhbDpCb29sZWFuLHNpemU6U3RyaW5nLG1vdmU6TnVtYmVyfSxjb21wdXRlZDp7YmFyOmZ1bmN0aW9uKCl7cmV0dXJuIEJBUl9NQVBbdGhpcy52ZXJ0aWNhbD8idmVydGljYWwiOiJob3Jpem9udGFsIl19LHdyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcGFyZW50LndyYXB9fSxyZW5kZXI6ZnVuY3Rpb24oaCl7dmFyIHNpemU9dGhpcy5zaXplLG1vdmU9dGhpcy5tb3ZlLGJhcj10aGlzLmJhcjtyZXR1cm4gaCgiZGl2Iix7Y2xhc3M6WyJlbC1zY3JvbGxiYXJfX2JhciIsImlzLSIrYmFyLmtleV0sb246e21vdXNlZG93bjp0aGlzLmNsaWNrVHJhY2tIYW5kbGVyfX0sW2goImRpdiIse3JlZjoidGh1bWIiLGNsYXNzOiJlbC1zY3JvbGxiYXJfX3RodW1iIixvbjp7bW91c2Vkb3duOnRoaXMuY2xpY2tUaHVtYkhhbmRsZXJ9LHN0eWxlOmZ1bmN0aW9uKF9yZWYpe3ZhciBtb3ZlPV9yZWYubW92ZSxzaXplPV9yZWYuc2l6ZSxiYXI9X3JlZi5iYXIsc3R5bGU9e30sdHJhbnNsYXRlPSJ0cmFuc2xhdGUiK2Jhci5heGlzKyIoIittb3ZlKyIlKSI7cmV0dXJuIHN0eWxlW2Jhci5zaXplXT1zaXplLHN0eWxlLnRyYW5zZm9ybT10cmFuc2xhdGUsc3R5bGUubXNUcmFuc2Zvcm09dHJhbnNsYXRlLHN0eWxlLndlYmtpdFRyYW5zZm9ybT10cmFuc2xhdGUsc3R5bGV9KHtzaXplOnNpemUsbW92ZTptb3ZlLGJhcjpiYXJ9KX0pXSl9LG1ldGhvZHM6e2NsaWNrVGh1bWJIYW5kbGVyOmZ1bmN0aW9uKGUpe2UuY3RybEtleXx8Mj09PWUuYnV0dG9ufHwodGhpcy5zdGFydERyYWcoZSksdGhpc1t0aGlzLmJhci5heGlzXT1lLmN1cnJlbnRUYXJnZXRbdGhpcy5iYXIub2Zmc2V0XS0oZVt0aGlzLmJhci5jbGllbnRdLWUuY3VycmVudFRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0aGlzLmJhci5kaXJlY3Rpb25dKSl9LGNsaWNrVHJhY2tIYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0aHVtYlBvc2l0aW9uUGVyY2VudGFnZT0xMDAqKE1hdGguYWJzKGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuYmFyLmRpcmVjdGlvbl0tZVt0aGlzLmJhci5jbGllbnRdKS10aGlzLiRyZWZzLnRodW1iW3RoaXMuYmFyLm9mZnNldF0vMikvdGhpcy4kZWxbdGhpcy5iYXIub2Zmc2V0XTt0aGlzLndyYXBbdGhpcy5iYXIuc2Nyb2xsXT10aHVtYlBvc2l0aW9uUGVyY2VudGFnZSp0aGlzLndyYXBbdGhpcy5iYXIuc2Nyb2xsU2l6ZV0vMTAwfSxzdGFydERyYWc6ZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLmN1cnNvckRvd249ITAsT2JqZWN0KGRvbV8ub24pKGRvY3VtZW50LCJtb3VzZW1vdmUiLHRoaXMubW91c2VNb3ZlRG9jdW1lbnRIYW5kbGVyKSxPYmplY3QoZG9tXy5vbikoZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMubW91c2VVcERvY3VtZW50SGFuZGxlciksZG9jdW1lbnQub25zZWxlY3RzdGFydD1mdW5jdGlvbigpe3JldHVybiExfX0sbW91c2VNb3ZlRG9jdW1lbnRIYW5kbGVyOmZ1bmN0aW9uKGUpe2lmKCExIT09dGhpcy5jdXJzb3JEb3duKXt2YXIgcHJldlBhZ2U9dGhpc1t0aGlzLmJhci5heGlzXTtpZihwcmV2UGFnZSl7dmFyIHRodW1iUG9zaXRpb25QZXJjZW50YWdlPTEwMCooLTEqKHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMuYmFyLmRpcmVjdGlvbl0tZVt0aGlzLmJhci5jbGllbnRdKS0odGhpcy4kcmVmcy50aHVtYlt0aGlzLmJhci5vZmZzZXRdLXByZXZQYWdlKSkvdGhpcy4kZWxbdGhpcy5iYXIub2Zmc2V0XTt0aGlzLndyYXBbdGhpcy5iYXIuc2Nyb2xsXT10aHVtYlBvc2l0aW9uUGVyY2VudGFnZSp0aGlzLndyYXBbdGhpcy5iYXIuc2Nyb2xsU2l6ZV0vMTAwfX19LG1vdXNlVXBEb2N1bWVudEhhbmRsZXI6ZnVuY3Rpb24oZSl7dGhpcy5jdXJzb3JEb3duPSExLHRoaXNbdGhpcy5iYXIuYXhpc109MCxPYmplY3QoZG9tXy5vZmYpKGRvY3VtZW50LCJtb3VzZW1vdmUiLHRoaXMubW91c2VNb3ZlRG9jdW1lbnRIYW5kbGVyKSxkb2N1bWVudC5vbnNlbGVjdHN0YXJ0PW51bGx9fSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtPYmplY3QoZG9tXy5vZmYpKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLm1vdXNlVXBEb2N1bWVudEhhbmRsZXIpfX0sc2Nyb2xsYmFyX3NyY19tYWluPXtuYW1lOiJFbFNjcm9sbGJhciIsY29tcG9uZW50czp7QmFyOnNyY19iYXJ9LHByb3BzOntuYXRpdmU6Qm9vbGVhbix3cmFwU3R5bGU6e30sd3JhcENsYXNzOnt9LHZpZXdDbGFzczp7fSx2aWV3U3R5bGU6e30sbm9yZXNpemU6Qm9vbGVhbix0YWc6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ImRpdiJ9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3NpemVXaWR0aDoiMCIsc2l6ZUhlaWdodDoiMCIsbW92ZVg6MCxtb3ZlWTowfX0sY29tcHV0ZWQ6e3dyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kcmVmcy53cmFwfX0scmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciBndXR0ZXI9c2Nyb2xsYmFyX3dpZHRoX2RlZmF1bHQoKSgpLHN0eWxlPXRoaXMud3JhcFN0eWxlO2lmKGd1dHRlcil7dmFyIGd1dHRlcldpdGg9Ii0iK2d1dHRlcisicHgiLGd1dHRlclN0eWxlPSJtYXJnaW4tYm90dG9tOiAiK2d1dHRlcldpdGgrIjsgbWFyZ2luLXJpZ2h0OiAiK2d1dHRlcldpdGgrIjsiO0FycmF5LmlzQXJyYXkodGhpcy53cmFwU3R5bGUpPyhzdHlsZT1PYmplY3QodXRpbF8udG9PYmplY3QpKHRoaXMud3JhcFN0eWxlKSkubWFyZ2luUmlnaHQ9c3R5bGUubWFyZ2luQm90dG9tPWd1dHRlcldpdGg6InN0cmluZyI9PXR5cGVvZiB0aGlzLndyYXBTdHlsZT9zdHlsZSs9Z3V0dGVyU3R5bGU6c3R5bGU9Z3V0dGVyU3R5bGV9dmFyIHZpZXc9aCh0aGlzLnRhZyx7Y2xhc3M6WyJlbC1zY3JvbGxiYXJfX3ZpZXciLHRoaXMudmlld0NsYXNzXSxzdHlsZTp0aGlzLnZpZXdTdHlsZSxyZWY6InJlc2l6ZSJ9LHRoaXMuJHNsb3RzLmRlZmF1bHQpLHdyYXA9aCgiZGl2Iix7cmVmOiJ3cmFwIixzdHlsZTpzdHlsZSxvbjp7c2Nyb2xsOnRoaXMuaGFuZGxlU2Nyb2xsfSxjbGFzczpbdGhpcy53cmFwQ2xhc3MsImVsLXNjcm9sbGJhcl9fd3JhcCIsZ3V0dGVyPyIiOiJlbC1zY3JvbGxiYXJfX3dyYXAtLWhpZGRlbi1kZWZhdWx0Il19LFtbdmlld11dKTtyZXR1cm4gaCgiZGl2Iix7Y2xhc3M6ImVsLXNjcm9sbGJhciJ9LHRoaXMubmF0aXZlP1toKCJkaXYiLHtyZWY6IndyYXAiLGNsYXNzOlt0aGlzLndyYXBDbGFzcywiZWwtc2Nyb2xsYmFyX193cmFwIl0sc3R5bGU6c3R5bGV9LFtbdmlld11dKV06W3dyYXAsaChzcmNfYmFyLHthdHRyczp7bW92ZTp0aGlzLm1vdmVYLHNpemU6dGhpcy5zaXplV2lkdGh9fSksaChzcmNfYmFyLHthdHRyczp7dmVydGljYWw6ITAsbW92ZTp0aGlzLm1vdmVZLHNpemU6dGhpcy5zaXplSGVpZ2h0fX0pXSl9LG1ldGhvZHM6e2hhbmRsZVNjcm9sbDpmdW5jdGlvbigpe3ZhciB3cmFwPXRoaXMud3JhcDt0aGlzLm1vdmVZPTEwMCp3cmFwLnNjcm9sbFRvcC93cmFwLmNsaWVudEhlaWdodCx0aGlzLm1vdmVYPTEwMCp3cmFwLnNjcm9sbExlZnQvd3JhcC5jbGllbnRXaWR0aH0sdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGhlaWdodFBlcmNlbnRhZ2Usd2lkdGhQZXJjZW50YWdlLHdyYXA9dGhpcy53cmFwO3dyYXAmJihoZWlnaHRQZXJjZW50YWdlPTEwMCp3cmFwLmNsaWVudEhlaWdodC93cmFwLnNjcm9sbEhlaWdodCx3aWR0aFBlcmNlbnRhZ2U9MTAwKndyYXAuY2xpZW50V2lkdGgvd3JhcC5zY3JvbGxXaWR0aCx0aGlzLnNpemVIZWlnaHQ9aGVpZ2h0UGVyY2VudGFnZTwxMDA/aGVpZ2h0UGVyY2VudGFnZSsiJSI6IiIsdGhpcy5zaXplV2lkdGg9d2lkdGhQZXJjZW50YWdlPDEwMD93aWR0aFBlcmNlbnRhZ2UrIiUiOiIiKX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt0aGlzLm5hdGl2ZXx8KHRoaXMuJG5leHRUaWNrKHRoaXMudXBkYXRlKSwhdGhpcy5ub3Jlc2l6ZSYmT2JqZWN0KHJlc2l6ZV9ldmVudF8uYWRkUmVzaXplTGlzdGVuZXIpKHRoaXMuJHJlZnMucmVzaXplLHRoaXMudXBkYXRlKSl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLm5hdGl2ZXx8IXRoaXMubm9yZXNpemUmJk9iamVjdChyZXNpemVfZXZlbnRfLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKSh0aGlzLiRyZWZzLnJlc2l6ZSx0aGlzLnVwZGF0ZSl9LGluc3RhbGw6ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHNjcm9sbGJhcl9zcmNfbWFpbi5uYW1lLHNjcm9sbGJhcl9zcmNfbWFpbil9fSxzY3JvbGxiYXI9c2Nyb2xsYmFyX3NyY19tYWluLGl0ZW12dWVfdHlwZV90ZW1wbGF0ZV9pZF8xODAxYWUxOV9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0ucmVhZHksZXhwcmVzc2lvbjoicmVhZHkifV0sc3RhdGljQ2xhc3M6ImVsLWNhcm91c2VsX19pdGVtIixjbGFzczp7ImlzLWFjdGl2ZSI6X3ZtLmFjdGl2ZSwiZWwtY2Fyb3VzZWxfX2l0ZW0tLWNhcmQiOiJjYXJkIj09PV92bS4kcGFyZW50LnR5cGUsImlzLWluLXN0YWdlIjpfdm0uaW5TdGFnZSwiaXMtaG92ZXIiOl92bS5ob3ZlciwiaXMtYW5pbWF0aW5nIjpfdm0uYW5pbWF0aW5nfSxzdHlsZTp7bXNUcmFuc2Zvcm06InRyYW5zbGF0ZVgoIitfdm0udHJhbnNsYXRlKyJweCkgc2NhbGUoIitfdm0uc2NhbGUrIikiLHdlYmtpdFRyYW5zZm9ybToidHJhbnNsYXRlWCgiK192bS50cmFuc2xhdGUrInB4KSBzY2FsZSgiK192bS5zY2FsZSsiKSIsdHJhbnNmb3JtOiJ0cmFuc2xhdGVYKCIrX3ZtLnRyYW5zbGF0ZSsicHgpIHNjYWxlKCIrX3ZtLnNjYWxlKyIpIn0sb246e2NsaWNrOl92bS5oYW5kbGVJdGVtQ2xpY2t9fSxbImNhcmQiPT09X3ZtLiRwYXJlbnQudHlwZT9fYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6IV92bS5hY3RpdmUsZXhwcmVzc2lvbjoiIWFjdGl2ZSJ9XSxzdGF0aWNDbGFzczoiZWwtY2Fyb3VzZWxfX21hc2sifSk6X3ZtLl9lKCksX3ZtLl90KCJkZWZhdWx0IildLDIpfTtpdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfMTgwMWFlMTlfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGl0ZW1fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxDYXJvdXNlbEl0ZW0iLHByb3BzOntuYW1lOlN0cmluZyxsYWJlbDp7dHlwZTpbU3RyaW5nLE51bWJlcl0sZGVmYXVsdDoiIn19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57aG92ZXI6ITEsdHJhbnNsYXRlOjAsc2NhbGU6MSxhY3RpdmU6ITEscmVhZHk6ITEsaW5TdGFnZTohMSxhbmltYXRpbmc6ITF9fSxtZXRob2RzOntwcm9jZXNzSW5kZXg6ZnVuY3Rpb24oaW5kZXgsYWN0aXZlSW5kZXgsbGVuZ3RoKXtyZXR1cm4gMD09PWFjdGl2ZUluZGV4JiZpbmRleD09PWxlbmd0aC0xPy0xOmFjdGl2ZUluZGV4PT09bGVuZ3RoLTEmJjA9PT1pbmRleD9sZW5ndGg6aW5kZXg8YWN0aXZlSW5kZXgtMSYmbGVuZ3RoLzI8PWFjdGl2ZUluZGV4LWluZGV4P2xlbmd0aCsxOmFjdGl2ZUluZGV4KzE8aW5kZXgmJmxlbmd0aC8yPD1pbmRleC1hY3RpdmVJbmRleD8tMjppbmRleH0sY2FsY3VsYXRlVHJhbnNsYXRlOmZ1bmN0aW9uKGluZGV4LGFjdGl2ZUluZGV4LHBhcmVudFdpZHRoKXtyZXR1cm4gdGhpcy5pblN0YWdlP3BhcmVudFdpZHRoKigxLjE3KihpbmRleC1hY3RpdmVJbmRleCkrMSkvNDppbmRleDxhY3RpdmVJbmRleD8tMS44MypwYXJlbnRXaWR0aC80OjMuODMqcGFyZW50V2lkdGgvNH0sdHJhbnNsYXRlSXRlbTpmdW5jdGlvbihpbmRleCxhY3RpdmVJbmRleCxvbGRJbmRleCl7dmFyIHBhcmVudFdpZHRoPXRoaXMuJHBhcmVudC4kZWwub2Zmc2V0V2lkdGgsbGVuZ3RoPXRoaXMuJHBhcmVudC5pdGVtcy5sZW5ndGg7ImNhcmQiIT09dGhpcy4kcGFyZW50LnR5cGUmJnZvaWQgMCE9PW9sZEluZGV4JiYodGhpcy5hbmltYXRpbmc9aW5kZXg9PT1hY3RpdmVJbmRleHx8aW5kZXg9PT1vbGRJbmRleCksaW5kZXghPT1hY3RpdmVJbmRleCYmMjxsZW5ndGgmJnRoaXMuJHBhcmVudC5sb29wJiYoaW5kZXg9dGhpcy5wcm9jZXNzSW5kZXgoaW5kZXgsYWN0aXZlSW5kZXgsbGVuZ3RoKSksImNhcmQiPT09dGhpcy4kcGFyZW50LnR5cGU/KHRoaXMuaW5TdGFnZT1NYXRoLnJvdW5kKE1hdGguYWJzKGluZGV4LWFjdGl2ZUluZGV4KSk8PTEsdGhpcy5hY3RpdmU9aW5kZXg9PT1hY3RpdmVJbmRleCx0aGlzLnRyYW5zbGF0ZT10aGlzLmNhbGN1bGF0ZVRyYW5zbGF0ZShpbmRleCxhY3RpdmVJbmRleCxwYXJlbnRXaWR0aCksdGhpcy5zY2FsZT10aGlzLmFjdGl2ZT8xOi44Myk6KHRoaXMuYWN0aXZlPWluZGV4PT09YWN0aXZlSW5kZXgsdGhpcy50cmFuc2xhdGU9cGFyZW50V2lkdGgqKGluZGV4LWFjdGl2ZUluZGV4KSksdGhpcy5yZWFkeT0hMH0saGFuZGxlSXRlbUNsaWNrOmZ1bmN0aW9uKCl7dmFyIHBhcmVudD10aGlzLiRwYXJlbnQ7aWYocGFyZW50JiYiY2FyZCI9PT1wYXJlbnQudHlwZSl7dmFyIGluZGV4PXBhcmVudC5pdGVtcy5pbmRleE9mKHRoaXMpO3BhcmVudC5zZXRBY3RpdmVJdGVtKGluZGV4KX19fSxjcmVhdGVkOmZ1bmN0aW9uKCl7dGhpcy4kcGFyZW50JiZ0aGlzLiRwYXJlbnQudXBkYXRlSXRlbXMoKX0sZGVzdHJveWVkOmZ1bmN0aW9uKCl7dGhpcy4kcGFyZW50JiZ0aGlzLiRwYXJlbnQudXBkYXRlSXRlbXMoKX19LGl0ZW12dWVfdHlwZV90ZW1wbGF0ZV9pZF8xODAxYWUxOV9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2l0ZW1fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9jYXJvdXNlbC9zcmMvaXRlbS52dWUiO3ZhciBzcmNfaXRlbT1pdGVtX2NvbXBvbmVudC5leHBvcnRzO3NyY19pdGVtLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHNyY19pdGVtLm5hbWUsc3JjX2l0ZW0pfTt2YXIgY2Fyb3VzZWxfaXRlbT1zcmNfaXRlbSxjb2xsYXBzZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzQ2MWQ1N2Y0X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xsYXBzZSIsYXR0cnM6e3JvbGU6InRhYmxpc3QiLCJhcmlhLW11bHRpc2VsZWN0YWJsZSI6InRydWUifX0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMil9O2NvbGxhcHNldnVlX3R5cGVfdGVtcGxhdGVfaWRfNDYxZDU3ZjRfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGNvbGxhcHNlX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsQ29sbGFwc2UiLGNvbXBvbmVudE5hbWU6IkVsQ29sbGFwc2UiLHByb3BzOnthY2NvcmRpb246Qm9vbGVhbix2YWx1ZTp7dHlwZTpbQXJyYXksU3RyaW5nLE51bWJlcl0sZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybltdfX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57YWN0aXZlTmFtZXM6W10uY29uY2F0KHRoaXMudmFsdWUpfX0scHJvdmlkZTpmdW5jdGlvbigpe3JldHVybntjb2xsYXBzZTp0aGlzfX0sd2F0Y2g6e3ZhbHVlOmZ1bmN0aW9uKF92YWx1ZSl7dGhpcy5hY3RpdmVOYW1lcz1bXS5jb25jYXQoX3ZhbHVlKX19LG1ldGhvZHM6e3NldEFjdGl2ZU5hbWVzOmZ1bmN0aW9uKGFjdGl2ZU5hbWVzKXthY3RpdmVOYW1lcz1bXS5jb25jYXQoYWN0aXZlTmFtZXMpO3ZhciB2YWx1ZT10aGlzLmFjY29yZGlvbj9hY3RpdmVOYW1lc1swXTphY3RpdmVOYW1lczt0aGlzLmFjdGl2ZU5hbWVzPWFjdGl2ZU5hbWVzLHRoaXMuJGVtaXQoImlucHV0Iix2YWx1ZSksdGhpcy4kZW1pdCgiY2hhbmdlIix2YWx1ZSl9LGhhbmRsZUl0ZW1DbGljazpmdW5jdGlvbihpdGVtKXtpZih0aGlzLmFjY29yZGlvbil0aGlzLnNldEFjdGl2ZU5hbWVzKCF0aGlzLmFjdGl2ZU5hbWVzWzBdJiYwIT09dGhpcy5hY3RpdmVOYW1lc1swXXx8dGhpcy5hY3RpdmVOYW1lc1swXSE9PWl0ZW0ubmFtZT9pdGVtLm5hbWU6IiIpO2Vsc2V7dmFyIGFjdGl2ZU5hbWVzPXRoaXMuYWN0aXZlTmFtZXMuc2xpY2UoMCksaW5kZXg9YWN0aXZlTmFtZXMuaW5kZXhPZihpdGVtLm5hbWUpOy0xPGluZGV4P2FjdGl2ZU5hbWVzLnNwbGljZShpbmRleCwxKTphY3RpdmVOYW1lcy5wdXNoKGl0ZW0ubmFtZSksdGhpcy5zZXRBY3RpdmVOYW1lcyhhY3RpdmVOYW1lcyl9fX0sY3JlYXRlZDpmdW5jdGlvbigpe3RoaXMuJG9uKCJpdGVtLWNsaWNrIix0aGlzLmhhbmRsZUl0ZW1DbGljayl9fSxjb2xsYXBzZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzQ2MWQ1N2Y0X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29sbGFwc2VfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9jb2xsYXBzZS9zcmMvY29sbGFwc2UudnVlIjt2YXIgY29sbGFwc2U9Y29sbGFwc2VfY29tcG9uZW50LmV4cG9ydHM7Y29sbGFwc2UuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoY29sbGFwc2UubmFtZSxjb2xsYXBzZSl9O3ZhciBwYWNrYWdlc19jb2xsYXBzZT1jb2xsYXBzZSxjb2xsYXBzZV9pdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfMmQwNWZhYWNfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWNvbGxhcHNlLWl0ZW0iLGNsYXNzOnsiaXMtYWN0aXZlIjpfdm0uaXNBY3RpdmV9fSxbX2MoImRpdiIse2F0dHJzOntyb2xlOiJ0YWIiLCJhcmlhLWV4cGFuZGVkIjpfdm0uaXNBY3RpdmUsImFyaWEtY29udHJvbHMiOiJlbC1jb2xsYXBzZS1jb250ZW50LSIrX3ZtLmlkLCJhcmlhLWRlc2NyaWJlZGJ5IjoiZWwtY29sbGFwc2UtY29udGVudC0iK192bS5pZH19LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWNvbGxhcHNlLWl0ZW1fX2hlYWRlciIsY2xhc3M6e2ZvY3VzaW5nOl92bS5mb2N1c2luZywiaXMtYWN0aXZlIjpfdm0uaXNBY3RpdmV9LGF0dHJzOntyb2xlOiJidXR0b24iLGlkOiJlbC1jb2xsYXBzZS1oZWFkLSIrX3ZtLmlkLHRhYmluZGV4OiIwIn0sb246e2NsaWNrOl92bS5oYW5kbGVIZWFkZXJDbGljayxrZXl1cDpmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJzcGFjZSIsMzIsJGV2ZW50LmtleSxbIiAiLCJTcGFjZWJhciJdKXx8IV92bS5faygkZXZlbnQua2V5Q29kZSwiZW50ZXIiLDEzLCRldmVudC5rZXksIkVudGVyIik/KCRldmVudC5zdG9wUHJvcGFnYXRpb24oKSxfdm0uaGFuZGxlRW50ZXJDbGljaygkZXZlbnQpKTpudWxsfSxmb2N1czpfdm0uaGFuZGxlRm9jdXMsYmx1cjpmdW5jdGlvbigkZXZlbnQpe192bS5mb2N1c2luZz0hMX19fSxbX3ZtLl90KCJ0aXRsZSIsW192bS5fdihfdm0uX3MoX3ZtLnRpdGxlKSldKSxfYygiaSIse3N0YXRpY0NsYXNzOiJlbC1jb2xsYXBzZS1pdGVtX19hcnJvdyBlbC1pY29uLWFycm93LXJpZ2h0IixjbGFzczp7ImlzLWFjdGl2ZSI6X3ZtLmlzQWN0aXZlfX0pXSwyKV0pLF9jKCJlbC1jb2xsYXBzZS10cmFuc2l0aW9uIixbX2MoImRpdiIse2RpcmVjdGl2ZXM6W3tuYW1lOiJzaG93IixyYXdOYW1lOiJ2LXNob3ciLHZhbHVlOl92bS5pc0FjdGl2ZSxleHByZXNzaW9uOiJpc0FjdGl2ZSJ9XSxzdGF0aWNDbGFzczoiZWwtY29sbGFwc2UtaXRlbV9fd3JhcCIsYXR0cnM6e3JvbGU6InRhYnBhbmVsIiwiYXJpYS1oaWRkZW4iOiFfdm0uaXNBY3RpdmUsImFyaWEtbGFiZWxsZWRieSI6ImVsLWNvbGxhcHNlLWhlYWQtIitfdm0uaWQsaWQ6ImVsLWNvbGxhcHNlLWNvbnRlbnQtIitfdm0uaWR9fSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xsYXBzZS1pdGVtX19jb250ZW50In0sW192bS5fdCgiZGVmYXVsdCIpXSwyKV0pXSldLDEpfTtjb2xsYXBzZV9pdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfMmQwNWZhYWNfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGNvbGxhcHNlX2l0ZW1fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxDb2xsYXBzZUl0ZW0iLGNvbXBvbmVudE5hbWU6IkVsQ29sbGFwc2VJdGVtIixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hXSxjb21wb25lbnRzOntFbENvbGxhcHNlVHJhbnNpdGlvbjpjb2xsYXBzZV90cmFuc2l0aW9uX2RlZmF1bHQuYX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntjb250ZW50V3JhcFN0eWxlOntoZWlnaHQ6ImF1dG8iLGRpc3BsYXk6ImJsb2NrIn0sY29udGVudEhlaWdodDowLGZvY3VzaW5nOiExLGlzQ2xpY2s6ITF9fSxpbmplY3Q6WyJjb2xsYXBzZSJdLHByb3BzOnt0aXRsZTpTdHJpbmcsbmFtZTp7dHlwZTpbU3RyaW5nLE51bWJlcl0sZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91aWR9fX0sY29tcHV0ZWQ6e2lzQWN0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuLTE8dGhpcy5jb2xsYXBzZS5hY3RpdmVOYW1lcy5pbmRleE9mKHRoaXMubmFtZSl9LGlkOmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdCh1dGlsXy5nZW5lcmF0ZUlkKSgpfX0sbWV0aG9kczp7aGFuZGxlRm9jdXM6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMuaXNDbGljaz9fdGhpcy5pc0NsaWNrPSExOl90aGlzLmZvY3VzaW5nPSEwfSw1MCl9LGhhbmRsZUhlYWRlckNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaCgiRWxDb2xsYXBzZSIsIml0ZW0tY2xpY2siLHRoaXMpLHRoaXMuZm9jdXNpbmc9ITEsdGhpcy5pc0NsaWNrPSEwfSxoYW5kbGVFbnRlckNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaCgiRWxDb2xsYXBzZSIsIml0ZW0tY2xpY2siLHRoaXMpfX19LGNvbGxhcHNlX2l0ZW12dWVfdHlwZV90ZW1wbGF0ZV9pZF8yZDA1ZmFhY19yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO2NvbGxhcHNlX2l0ZW1fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9jb2xsYXBzZS9zcmMvY29sbGFwc2UtaXRlbS52dWUiO3ZhciBjb2xsYXBzZV9pdGVtPWNvbGxhcHNlX2l0ZW1fY29tcG9uZW50LmV4cG9ydHM7Y29sbGFwc2VfaXRlbS5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChjb2xsYXBzZV9pdGVtLm5hbWUsY29sbGFwc2VfaXRlbSl9O3ZhciBwYWNrYWdlc19jb2xsYXBzZV9pdGVtPWNvbGxhcHNlX2l0ZW0sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzJlODY5ZmExX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoInNwYW4iLHtkaXJlY3RpdmVzOlt7bmFtZToiY2xpY2tvdXRzaWRlIixyYXdOYW1lOiJ2LWNsaWNrb3V0c2lkZSIsdmFsdWU6X3ZtLmhhbmRsZUNsaWNrb3V0c2lkZSxleHByZXNzaW9uOiJoYW5kbGVDbGlja291dHNpZGUifV0scmVmOiJyZWZlcmVuY2UiLHN0YXRpY0NsYXNzOiJlbC1jYXNjYWRlciIsY2xhc3M6W3siaXMtb3BlbmVkIjpfdm0ubWVudVZpc2libGUsImlzLWRpc2FibGVkIjpfdm0uY2FzY2FkZXJEaXNhYmxlZH0sX3ZtLmNhc2NhZGVyU2l6ZT8iZWwtY2FzY2FkZXItLSIrX3ZtLmNhc2NhZGVyU2l6ZToiIl0sb246e2NsaWNrOl92bS5oYW5kbGVDbGljayxtb3VzZWVudGVyOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmlucHV0SG92ZXI9ITB9LGZvY3VzOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmlucHV0SG92ZXI9ITB9LG1vdXNlbGVhdmU6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uaW5wdXRIb3Zlcj0hMX0sYmx1cjpmdW5jdGlvbigkZXZlbnQpe192bS5pbnB1dEhvdmVyPSExfSxrZXlkb3duOl92bS5oYW5kbGVLZXlkb3dufX0sW19jKCJlbC1pbnB1dCIse3JlZjoiaW5wdXQiLGNsYXNzOnsiaXMtZm9jdXMiOl92bS5tZW51VmlzaWJsZX0sYXR0cnM6e3JlYWRvbmx5Ol92bS5yZWFkb25seSxwbGFjZWhvbGRlcjpfdm0uY3VycmVudExhYmVscy5sZW5ndGg/dm9pZCAwOl92bS5wbGFjZWhvbGRlciwidmFsaWRhdGUtZXZlbnQiOiExLHNpemU6X3ZtLnNpemUsZGlzYWJsZWQ6X3ZtLmNhc2NhZGVyRGlzYWJsZWR9LG9uOntpbnB1dDpfdm0uZGVib3VuY2VkSW5wdXRDaGFuZ2UsZm9jdXM6X3ZtLmhhbmRsZUZvY3VzLGJsdXI6X3ZtLmhhbmRsZUJsdXJ9LG5hdGl2ZU9uOntjb21wb3NpdGlvbnN0YXJ0OmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF92bS5oYW5kbGVDb21wb3NpdGlvbigkZXZlbnQpfSxjb21wb3NpdGlvbmVuZDpmdW5jdGlvbigkZXZlbnQpe3JldHVybiBfdm0uaGFuZGxlQ29tcG9zaXRpb24oJGV2ZW50KX19LG1vZGVsOnt2YWx1ZTpfdm0uaW5wdXRWYWx1ZSxjYWxsYmFjazpmdW5jdGlvbigkJHYpe192bS5pbnB1dFZhbHVlPSQkdn0sZXhwcmVzc2lvbjoiaW5wdXRWYWx1ZSJ9fSxbX2MoInRlbXBsYXRlIix7c2xvdDoic3VmZml4In0sW192bS5jbGVhcmFibGUmJl92bS5pbnB1dEhvdmVyJiZfdm0uY3VycmVudExhYmVscy5sZW5ndGg/X2MoImkiLHtrZXk6IjEiLHN0YXRpY0NsYXNzOiJlbC1pbnB1dF9faWNvbiBlbC1pY29uLWNpcmNsZS1jbG9zZSBlbC1jYXNjYWRlcl9fY2xlYXJJY29uIixvbjp7Y2xpY2s6X3ZtLmNsZWFyVmFsdWV9fSk6X2MoImkiLHtrZXk6IjIiLHN0YXRpY0NsYXNzOiJlbC1pbnB1dF9faWNvbiBlbC1pY29uLWFycm93LWRvd24iLGNsYXNzOnsiaXMtcmV2ZXJzZSI6X3ZtLm1lbnVWaXNpYmxlfX0pXSldLDIpLF9jKCJzcGFuIix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6IiI9PT1fdm0uaW5wdXRWYWx1ZSYmIV92bS5pc09uQ29tcG9zaXRpb24sZXhwcmVzc2lvbjoiaW5wdXRWYWx1ZSA9PT0gJycgJiYgIWlzT25Db21wb3NpdGlvbiJ9XSxzdGF0aWNDbGFzczoiZWwtY2FzY2FkZXJfX2xhYmVsIn0sW192bS5zaG93QWxsTGV2ZWxzP1tfdm0uX2woX3ZtLmN1cnJlbnRMYWJlbHMsZnVuY3Rpb24obGFiZWwsaW5kZXgpe3JldHVybltfdm0uX3YoIlxuICAgICAgICAiK192bS5fcyhsYWJlbCkrIlxuICAgICAgICAiKSxpbmRleDxfdm0uY3VycmVudExhYmVscy5sZW5ndGgtMT9fYygic3BhbiIse2tleTppbmRleH0sW192bS5fdigiICIrX3ZtLl9zKF92bS5zZXBhcmF0b3IpKyIgIildKTpfdm0uX2UoKV19KV06W192bS5fdigiXG4gICAgICAiK192bS5fcyhfdm0uY3VycmVudExhYmVsc1tfdm0uY3VycmVudExhYmVscy5sZW5ndGgtMV0pKyJcbiAgICAiKV1dLDIpXSwxKX0sc3JjX21lbnVfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxDYXNjYWRlck1lbnUiLGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57aW5wdXRXaWR0aDowLG9wdGlvbnM6W10scHJvcHM6e30sdmlzaWJsZTohMSxhY3RpdmVWYWx1ZTpbXSx2YWx1ZTpbXSxleHBhbmRUcmlnZ2VyOiJjbGljayIsY2hhbmdlT25TZWxlY3Q6ITEscG9wcGVyQ2xhc3M6IiIsaG92ZXJUaW1lcjowLGNsaWNraW5nOiExLGlkOk9iamVjdCh1dGlsXy5nZW5lcmF0ZUlkKSgpfX0sd2F0Y2g6e3Zpc2libGU6ZnVuY3Rpb24odmFsdWUpe3ZhbHVlJiYodGhpcy5hY3RpdmVWYWx1ZT10aGlzLnZhbHVlKX0sdmFsdWU6e2ltbWVkaWF0ZTptYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfMmU4NjlmYTFfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITAsaGFuZGxlcjpmdW5jdGlvbih2YWx1ZSl7dGhpcy5hY3RpdmVWYWx1ZT12YWx1ZX19fSxjb21wdXRlZDp7YWN0aXZlT3B0aW9uczp7Z2V0OmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXMsYWN0aXZlVmFsdWU9dGhpcy5hY3RpdmVWYWx1ZSxjb25maWd1cmFibGVQcm9wcz1bImxhYmVsIiwidmFsdWUiLCJjaGlsZHJlbiIsImRpc2FibGVkIl0sb3B0aW9uc0NvcHk9ZnVuY3Rpb24gY29weUFycmF5KGFycixwcm9wcyl7aWYoIWFycnx8IUFycmF5LmlzQXJyYXkoYXJyKXx8IXByb3BzKXJldHVybiBhcnI7dmFyIHJlc3VsdD1bXSxjb25maWd1cmFibGVQcm9wcz1bIl9fSVNfX0ZMQVRfX09QVElPTlMiLCJsYWJlbCIsInZhbHVlIiwiZGlzYWJsZWQiXSxjaGlsZHJlblByb3A9cHJvcHMuY2hpbGRyZW58fCJjaGlsZHJlbiI7cmV0dXJuIGFyci5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe3ZhciBpdGVtQ29weT17fTtjb25maWd1cmFibGVQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3Ape3ZhciBuYW1lPXByb3BzW3Byb3BdLHZhbHVlPWl0ZW1bbmFtZV07dm9pZCAwPT09dmFsdWUmJih2YWx1ZT1pdGVtW25hbWU9cHJvcF0pLHZvaWQgMCE9PXZhbHVlJiYoaXRlbUNvcHlbbmFtZV09dmFsdWUpfSksQXJyYXkuaXNBcnJheShpdGVtW2NoaWxkcmVuUHJvcF0pJiYoaXRlbUNvcHlbY2hpbGRyZW5Qcm9wXT1jb3B5QXJyYXkoaXRlbVtjaGlsZHJlblByb3BdLHByb3BzKSkscmVzdWx0LnB1c2goaXRlbUNvcHkpfSkscmVzdWx0fSh0aGlzLm9wdGlvbnMsdGhpcy5wcm9wcyk7cmV0dXJuIGZ1bmN0aW9uIGZvcm1hdE9wdGlvbnMob3B0aW9ucyl7b3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG9wdGlvbil7b3B0aW9uLl9fSVNfX0ZMQVRfX09QVElPTlN8fChjb25maWd1cmFibGVQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3Ape3ZhciB2YWx1ZT1vcHRpb25bX3RoaXMucHJvcHNbcHJvcF18fHByb3BdO3ZvaWQgMCE9PXZhbHVlJiYob3B0aW9uW3Byb3BdPXZhbHVlKX0pLEFycmF5LmlzQXJyYXkob3B0aW9uLmNoaWxkcmVuKSYmZm9ybWF0T3B0aW9ucyhvcHRpb24uY2hpbGRyZW4pKX0pfShvcHRpb25zQ29weSksZnVuY3Rpb24gbG9hZEFjdGl2ZU9wdGlvbnMob3B0aW9ucyl7dmFyIGFjdGl2ZU9wdGlvbnM9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOltdLGxldmVsPWFjdGl2ZU9wdGlvbnMubGVuZ3RoO2FjdGl2ZU9wdGlvbnNbbGV2ZWxdPW9wdGlvbnM7dmFyIGFjdGl2ZT1hY3RpdmVWYWx1ZVtsZXZlbF07cmV0dXJuIE9iamVjdChzaGFyZWRfLmlzRGVmKShhY3RpdmUpJiYob3B0aW9ucz1vcHRpb25zLmZpbHRlcihmdW5jdGlvbihvcHRpb24pe3JldHVybiBvcHRpb24udmFsdWU9PT1hY3RpdmV9KVswXSkmJm9wdGlvbnMuY2hpbGRyZW4mJmxvYWRBY3RpdmVPcHRpb25zKG9wdGlvbnMuY2hpbGRyZW4sYWN0aXZlT3B0aW9ucyksYWN0aXZlT3B0aW9uc30ob3B0aW9uc0NvcHkpfX19LG1ldGhvZHM6e3NlbGVjdDpmdW5jdGlvbihpdGVtLG1lbnVJbmRleCl7aXRlbS5fX0lTX19GTEFUX19PUFRJT05TP3RoaXMuYWN0aXZlVmFsdWU9aXRlbS52YWx1ZTptZW51SW5kZXg/dGhpcy5hY3RpdmVWYWx1ZS5zcGxpY2UobWVudUluZGV4LHRoaXMuYWN0aXZlVmFsdWUubGVuZ3RoLTEsaXRlbS52YWx1ZSk6dGhpcy5hY3RpdmVWYWx1ZT1baXRlbS52YWx1ZV0sdGhpcy4kZW1pdCgicGljayIsdGhpcy5hY3RpdmVWYWx1ZS5zbGljZSgpKX0saGFuZGxlTWVudUxlYXZlOmZ1bmN0aW9uKCl7dGhpcy4kZW1pdCgibWVudUxlYXZlIil9LGFjdGl2ZUl0ZW06ZnVuY3Rpb24oaXRlbSxtZW51SW5kZXgpe3ZhciBsZW49dGhpcy5hY3RpdmVPcHRpb25zLmxlbmd0aDt0aGlzLmFjdGl2ZVZhbHVlLnNwbGljZShtZW51SW5kZXgsbGVuLGl0ZW0udmFsdWUpLHRoaXMuYWN0aXZlT3B0aW9ucy5zcGxpY2UobWVudUluZGV4KzEsbGVuLGl0ZW0uY2hpbGRyZW4pLHRoaXMuY2hhbmdlT25TZWxlY3Q/dGhpcy4kZW1pdCgicGljayIsdGhpcy5hY3RpdmVWYWx1ZS5zbGljZSgpLCExKTp0aGlzLiRlbWl0KCJhY3RpdmVJdGVtQ2hhbmdlIix0aGlzLmFjdGl2ZVZhbHVlKX0sc2Nyb2xsTWVudTpmdW5jdGlvbihtZW51KXtzY3JvbGxfaW50b192aWV3X2RlZmF1bHQoKShtZW51LG1lbnUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaXMtYWN0aXZlIilbMF0pfSxoYW5kbGVNZW51RW50ZXI6ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXM7dGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMyLiRyZWZzLm1lbnVzLmZvckVhY2goZnVuY3Rpb24obWVudSl7cmV0dXJuIF90aGlzMi5zY3JvbGxNZW51KG1lbnUpfSl9KX19LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgX3RoaXMzPXRoaXMsYWN0aXZlVmFsdWU9dGhpcy5hY3RpdmVWYWx1ZSxhY3RpdmVPcHRpb25zPXRoaXMuYWN0aXZlT3B0aW9ucyx2aXNpYmxlPXRoaXMudmlzaWJsZSxleHBhbmRUcmlnZ2VyPXRoaXMuZXhwYW5kVHJpZ2dlcixwb3BwZXJDbGFzcz10aGlzLnBvcHBlckNsYXNzLGhvdmVyVGhyZXNob2xkPXRoaXMuaG92ZXJUaHJlc2hvbGQsaXRlbUlkPW51bGwsaXRlbUluZGV4PTAsaG92ZXJNZW51UmVmcz17fSxob3Zlck1lbnVIYW5kbGVyPWZ1bmN0aW9uKGUpe3ZhciBhY3RpdmVNZW51PWhvdmVyTWVudVJlZnMuYWN0aXZlTWVudTtpZihhY3RpdmVNZW51KXt2YXIgb2Zmc2V0WD1lLm9mZnNldFgsd2lkdGg9YWN0aXZlTWVudS5vZmZzZXRXaWR0aCxoZWlnaHQ9YWN0aXZlTWVudS5vZmZzZXRIZWlnaHQ7aWYoZS50YXJnZXQ9PT1ob3Zlck1lbnVSZWZzLmFjdGl2ZUl0ZW0pe2NsZWFyVGltZW91dChfdGhpczMuaG92ZXJUaW1lcik7dmFyIGFjdGl2ZUl0ZW09aG92ZXJNZW51UmVmcy5hY3RpdmVJdGVtLG9mZnNldFlfdG9wPWFjdGl2ZUl0ZW0ub2Zmc2V0VG9wLG9mZnNldFlfQm90dG9tPW9mZnNldFlfdG9wK2FjdGl2ZUl0ZW0ub2Zmc2V0SGVpZ2h0O2hvdmVyTWVudVJlZnMuaG92ZXJab25lLmlubmVySFRNTD0nXG4gICAgICAgICAgPHBhdGggc3R5bGU9InBvaW50ZXItZXZlbnRzOiBhdXRvOyIgZmlsbD0idHJhbnNwYXJlbnQiIGQ9Ik0nK29mZnNldFgrIiAiK29mZnNldFlfdG9wKyIgTCIrd2lkdGgrIiAwIFYiK29mZnNldFlfdG9wKycgWiIgLz5cbiAgICAgICAgICA8cGF0aCBzdHlsZT0icG9pbnRlci1ldmVudHM6IGF1dG87IiBmaWxsPSJ0cmFuc3BhcmVudCIgZD0iTScrb2Zmc2V0WCsiICIrb2Zmc2V0WV9Cb3R0b20rIiBMIit3aWR0aCsiICIraGVpZ2h0KyIgViIrb2Zmc2V0WV9Cb3R0b20rJyBaIiAvPlxuICAgICAgICAnfWVsc2UgX3RoaXMzLmhvdmVyVGltZXJ8fChfdGhpczMuaG92ZXJUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aG92ZXJNZW51UmVmcy5ob3ZlclpvbmUuaW5uZXJIVE1MPSIifSxob3ZlclRocmVzaG9sZCkpfX0sbWVudXM9dGhpcy5fbChhY3RpdmVPcHRpb25zLGZ1bmN0aW9uKG1lbnUsbWVudUluZGV4KXt2YXIgaXNGbGF0PSExLG1lbnVJZD0ibWVudS0iK190aGlzMy5pZCsiLSIrbWVudUluZGV4LG93bnNJZD0ibWVudS0iK190aGlzMy5pZCsiLSIrKG1lbnVJbmRleCsxKSxpdGVtcz1fdGhpczMuX2wobWVudSxmdW5jdGlvbihpdGVtKXt2YXIgZXZlbnRzPXtvbjp7fX07aWYoaXRlbS5fX0lTX19GTEFUX19PUFRJT05TJiYoaXNGbGF0PSEwKSwhaXRlbS5kaXNhYmxlZClpZihldmVudHMub24ua2V5ZG93bj1mdW5jdGlvbihldil7dmFyIGtleUNvZGU9ZXYua2V5Q29kZTtpZighKFszNywzOCwzOSw0MCwxMyw5LDI3XS5pbmRleE9mKGtleUNvZGUpPDApKXt2YXIgY3VycmVudEVsZT1ldi50YXJnZXQscGFyZW50RWxlPV90aGlzMy4kcmVmcy5tZW51c1ttZW51SW5kZXhdLG1lbnVJdGVtTGlzdD1wYXJlbnRFbGUucXVlcnlTZWxlY3RvckFsbCgiW3RhYmluZGV4PSctMSddIiksY3VycmVudEluZGV4PUFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwobWVudUl0ZW1MaXN0LGN1cnJlbnRFbGUpLG5leHRJbmRleD12b2lkIDA7aWYoLTE8WzM4LDQwXS5pbmRleE9mKGtleUNvZGUpKTM4PT09a2V5Q29kZT9uZXh0SW5kZXg9MCE9PWN1cnJlbnRJbmRleD9jdXJyZW50SW5kZXgtMTpjdXJyZW50SW5kZXg6NDA9PT1rZXlDb2RlJiYobmV4dEluZGV4PWN1cnJlbnRJbmRleCE9PW1lbnVJdGVtTGlzdC5sZW5ndGgtMT9jdXJyZW50SW5kZXgrMTpjdXJyZW50SW5kZXgpLG1lbnVJdGVtTGlzdFtuZXh0SW5kZXhdLmZvY3VzKCk7ZWxzZSBpZigzNz09PWtleUNvZGUpe2lmKDAhPT1tZW51SW5kZXgpX3RoaXMzLiRyZWZzLm1lbnVzW21lbnVJbmRleC0xXS5xdWVyeVNlbGVjdG9yKCJbYXJpYS1leHBhbmRlZD10cnVlXSIpLmZvY3VzKCl9ZWxzZSBpZigzOT09PWtleUNvZGUpaXRlbS5jaGlsZHJlbiYmX3RoaXMzLiRyZWZzLm1lbnVzW21lbnVJbmRleCsxXS5xdWVyeVNlbGVjdG9yQWxsKCJbdGFiaW5kZXg9Jy0xJ10iKVswXS5mb2N1cygpO2Vsc2UgaWYoMTM9PT1rZXlDb2RlKXtpZighaXRlbS5jaGlsZHJlbil7dmFyIGlkPWN1cnJlbnRFbGUuZ2V0QXR0cmlidXRlKCJpZCIpO3BhcmVudEVsZS5zZXRBdHRyaWJ1dGUoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIsaWQpLF90aGlzMy5zZWxlY3QoaXRlbSxtZW51SW5kZXgpLF90aGlzMy4kbmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gX3RoaXMzLnNjcm9sbE1lbnUoX3RoaXMzLiRyZWZzLm1lbnVzW21lbnVJbmRleF0pfSl9fWVsc2UgOSE9PWtleUNvZGUmJjI3IT09a2V5Q29kZXx8X3RoaXMzLiRlbWl0KCJjbG9zZUluc2lkZSIpfX0saXRlbS5jaGlsZHJlbil7dmFyIHRyaWdnZXJFdmVudD17Y2xpY2s6ImNsaWNrIixob3ZlcjoibW91c2VlbnRlciJ9W2V4cGFuZFRyaWdnZXJdLHRyaWdnZXJIYW5kbGVyPWZ1bmN0aW9uKCl7X3RoaXMzLnZpc2libGUmJihfdGhpczMuYWN0aXZlSXRlbShpdGVtLG1lbnVJbmRleCksX3RoaXMzLiRuZXh0VGljayhmdW5jdGlvbigpe190aGlzMy5zY3JvbGxNZW51KF90aGlzMy4kcmVmcy5tZW51c1ttZW51SW5kZXhdKSxfdGhpczMuc2Nyb2xsTWVudShfdGhpczMuJHJlZnMubWVudXNbbWVudUluZGV4KzFdKX0pKX07ZXZlbnRzLm9uW3RyaWdnZXJFdmVudF09dHJpZ2dlckhhbmRsZXIsIm1vdXNlZW50ZXIiPT09dHJpZ2dlckV2ZW50JiZfdGhpczMuY2hhbmdlT25TZWxlY3QmJihldmVudHMub24uY2xpY2s9ZnVuY3Rpb24oKXstMSE9PV90aGlzMy5hY3RpdmVWYWx1ZS5pbmRleE9mKGl0ZW0udmFsdWUpJiZfdGhpczMuJGVtaXQoImNsb3NlSW5zaWRlIiwhMCl9KSxldmVudHMub24ubW91c2Vkb3duPWZ1bmN0aW9uKCl7X3RoaXMzLmNsaWNraW5nPSEwfSxldmVudHMub24uZm9jdXM9ZnVuY3Rpb24oKXtfdGhpczMuY2xpY2tpbmc/X3RoaXMzLmNsaWNraW5nPSExOnRyaWdnZXJIYW5kbGVyKCl9fWVsc2UgZXZlbnRzLm9uLmNsaWNrPWZ1bmN0aW9uKCl7X3RoaXMzLnNlbGVjdChpdGVtLG1lbnVJbmRleCksX3RoaXMzLiRuZXh0VGljayhmdW5jdGlvbigpe3JldHVybiBfdGhpczMuc2Nyb2xsTWVudShfdGhpczMuJHJlZnMubWVudXNbbWVudUluZGV4XSl9KX07cmV0dXJuIGl0ZW0uZGlzYWJsZWR8fGl0ZW0uY2hpbGRyZW58fChpdGVtSWQ9bWVudUlkKyItIitpdGVtSW5kZXgsaXRlbUluZGV4KyspLGgoImxpIixleHRlcm5hbF9iYWJlbF9oZWxwZXJfdnVlX2pzeF9tZXJnZV9wcm9wc19kZWZhdWx0KCkoW3tjbGFzczp7ImVsLWNhc2NhZGVyLW1lbnVfX2l0ZW0iOiEwLCJlbC1jYXNjYWRlci1tZW51X19pdGVtLS1leHRlbnNpYmxlIjppdGVtLmNoaWxkcmVuLCJpcy1hY3RpdmUiOml0ZW0udmFsdWU9PT1hY3RpdmVWYWx1ZVttZW51SW5kZXhdLCJpcy1kaXNhYmxlZCI6aXRlbS5kaXNhYmxlZH0scmVmOml0ZW0udmFsdWU9PT1hY3RpdmVWYWx1ZVttZW51SW5kZXhdPyJhY3RpdmVJdGVtIjpudWxsfSxldmVudHMse2F0dHJzOnt0YWJpbmRleDppdGVtLmRpc2FibGVkP251bGw6LTEscm9sZToibWVudWl0ZW0iLCJhcmlhLWhhc3BvcHVwIjohIWl0ZW0uY2hpbGRyZW4sImFyaWEtZXhwYW5kZWQiOml0ZW0udmFsdWU9PT1hY3RpdmVWYWx1ZVttZW51SW5kZXhdLGlkOml0ZW1JZCwiYXJpYS1vd25zIjppdGVtLmNoaWxkcmVuP293bnNJZDpudWxsfX1dKSxbaCgic3BhbiIsW2l0ZW0ubGFiZWxdKV0pfSksbWVudVN0eWxlPXt9O2lzRmxhdCYmKG1lbnVTdHlsZS5taW5XaWR0aD1fdGhpczMuaW5wdXRXaWR0aCsicHgiKTt2YXIgaXNIb3ZlcmVkTWVudT0iaG92ZXIiPT09ZXhwYW5kVHJpZ2dlciYmYWN0aXZlVmFsdWUubGVuZ3RoLTE9PT1tZW51SW5kZXgsaG92ZXJNZW51RXZlbnQ9e29uOnt9fTtyZXR1cm4gaXNIb3ZlcmVkTWVudSYmKGhvdmVyTWVudUV2ZW50Lm9uLm1vdXNlbW92ZT1ob3Zlck1lbnVIYW5kbGVyLG1lbnVTdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoKCJ1bCIsZXh0ZXJuYWxfYmFiZWxfaGVscGVyX3Z1ZV9qc3hfbWVyZ2VfcHJvcHNfZGVmYXVsdCgpKFt7Y2xhc3M6eyJlbC1jYXNjYWRlci1tZW51IjohMCwiZWwtY2FzY2FkZXItbWVudS0tZmxleGlibGUiOmlzRmxhdH19LGhvdmVyTWVudUV2ZW50LHtzdHlsZTptZW51U3R5bGUscmVmSW5Gb3I6ITAscmVmOiJtZW51cyIsYXR0cnM6e3JvbGU6Im1lbnUiLGlkOm1lbnVJZH19XSksW2l0ZW1zLGlzSG92ZXJlZE1lbnU/aCgic3ZnIix7cmVmOiJob3ZlclpvbmUiLHN0eWxlOntwb3NpdGlvbjoiYWJzb2x1dGUiLHRvcDowLGhlaWdodDoiMTAwJSIsd2lkdGg6IjEwMCUiLGxlZnQ6MCxwb2ludGVyRXZlbnRzOiJub25lIn19KTpudWxsXSl9KTtyZXR1cm4iaG92ZXIiPT09ZXhwYW5kVHJpZ2dlciYmdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXt2YXIgYWN0aXZlSXRlbT1fdGhpczMuJHJlZnMuYWN0aXZlSXRlbTtpZihhY3RpdmVJdGVtKXt2YXIgYWN0aXZlTWVudT1hY3RpdmVJdGVtLnBhcmVudEVsZW1lbnQsaG92ZXJab25lPV90aGlzMy4kcmVmcy5ob3ZlclpvbmU7aG92ZXJNZW51UmVmcz17YWN0aXZlTWVudTphY3RpdmVNZW51LGFjdGl2ZUl0ZW06YWN0aXZlSXRlbSxob3ZlclpvbmU6aG92ZXJab25lfX1lbHNlIGhvdmVyTWVudVJlZnM9e319KSxoKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6ImVsLXpvb20taW4tdG9wIn0sb246eyJiZWZvcmUtZW50ZXIiOnRoaXMuaGFuZGxlTWVudUVudGVyLCJhZnRlci1sZWF2ZSI6dGhpcy5oYW5kbGVNZW51TGVhdmV9fSxbaCgiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHZhbHVlOnZpc2libGV9XSxjbGFzczpbImVsLWNhc2NhZGVyLW1lbnVzIGVsLXBvcHBlciIscG9wcGVyQ2xhc3NdLHJlZjoid3JhcHBlciJ9LFtoKCJkaXYiLHthdHRyczp7IngtYXJyb3ciOiEwfSxjbGFzczoicG9wcGVyX19hcnJvdyJ9KSxtZW51c10pXSl9fSx2b2lkIDAsdm9pZCAwLCExLG51bGwsbnVsbCxudWxsKTtzcmNfbWVudV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2Nhc2NhZGVyL3NyYy9tZW51LnZ1ZSI7dmFyIGNhc2NhZGVyX3NyY19tZW51PXNyY19tZW51X2NvbXBvbmVudC5leHBvcnRzLHBvcHBlck1peGluPXtwcm9wczp7cGxhY2VtZW50Ont0eXBlOlN0cmluZyxkZWZhdWx0OiJib3R0b20tc3RhcnQifSxhcHBlbmRUb0JvZHk6dnVlX3BvcHBlcl9kZWZhdWx0LmEucHJvcHMuYXBwZW5kVG9Cb2R5LGFycm93T2Zmc2V0OnZ1ZV9wb3BwZXJfZGVmYXVsdC5hLnByb3BzLmFycm93T2Zmc2V0LG9mZnNldDp2dWVfcG9wcGVyX2RlZmF1bHQuYS5wcm9wcy5vZmZzZXQsYm91bmRhcmllc1BhZGRpbmc6dnVlX3BvcHBlcl9kZWZhdWx0LmEucHJvcHMuYm91bmRhcmllc1BhZGRpbmcscG9wcGVyT3B0aW9uczp2dWVfcG9wcGVyX2RlZmF1bHQuYS5wcm9wcy5wb3BwZXJPcHRpb25zfSxtZXRob2RzOnZ1ZV9wb3BwZXJfZGVmYXVsdC5hLm1ldGhvZHMsZGF0YTp2dWVfcG9wcGVyX2RlZmF1bHQuYS5kYXRhLGJlZm9yZURlc3Ryb3k6dnVlX3BvcHBlcl9kZWZhdWx0LmEuYmVmb3JlRGVzdHJveX0sY2FzY2FkZXJfc3JjX21haW5fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxDYXNjYWRlciIsZGlyZWN0aXZlczp7Q2xpY2tvdXRzaWRlOmNsaWNrb3V0c2lkZV9kZWZhdWx0LmF9LG1peGluczpbcG9wcGVyTWl4aW4sZW1pdHRlcl9kZWZhdWx0LmEsbG9jYWxlX2RlZmF1bHQuYV0saW5qZWN0OntlbEZvcm06e2RlZmF1bHQ6IiJ9LGVsRm9ybUl0ZW06e2RlZmF1bHQ6IiJ9fSxjb21wb25lbnRzOntFbElucHV0OmlucHV0X2RlZmF1bHQuYX0scHJvcHM6e29wdGlvbnM6e3R5cGU6QXJyYXkscmVxdWlyZWQ6ITB9LHByb3BzOnt0eXBlOk9iamVjdCxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJue2NoaWxkcmVuOiJjaGlsZHJlbiIsbGFiZWw6ImxhYmVsIix2YWx1ZToidmFsdWUiLGRpc2FibGVkOiJkaXNhYmxlZCJ9fX0sdmFsdWU6e3R5cGU6QXJyYXksZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybltdfX0sc2VwYXJhdG9yOnt0eXBlOlN0cmluZyxkZWZhdWx0OiIvIn0scGxhY2Vob2xkZXI6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0KGxpYl9sb2NhbGVfLnQpKCJlbC5jYXNjYWRlci5wbGFjZWhvbGRlciIpfX0sZGlzYWJsZWQ6Qm9vbGVhbixjbGVhcmFibGU6e3R5cGU6Qm9vbGVhbixkZWZhdWx0OiExfSxjaGFuZ2VPblNlbGVjdDpCb29sZWFuLHBvcHBlckNsYXNzOlN0cmluZyxleHBhbmRUcmlnZ2VyOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJjbGljayJ9LGZpbHRlcmFibGU6Qm9vbGVhbixzaXplOlN0cmluZyxzaG93QWxsTGV2ZWxzOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMH0sZGVib3VuY2U6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MzAwfSxiZWZvcmVGaWx0ZXI6e3R5cGU6RnVuY3Rpb24sZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319fSxob3ZlclRocmVzaG9sZDp7dHlwZTpOdW1iZXIsZGVmYXVsdDo1MDB9fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2N1cnJlbnRWYWx1ZTp0aGlzLnZhbHVlfHxbXSxtZW51Om51bGwsZGVib3VuY2VkSW5wdXRDaGFuZ2U6ZnVuY3Rpb24oKXt9LG1lbnVWaXNpYmxlOiExLGlucHV0SG92ZXI6ITEsaW5wdXRWYWx1ZToiIixmbGF0T3B0aW9uczpudWxsLGlkOk9iamVjdCh1dGlsXy5nZW5lcmF0ZUlkKSgpLG5lZWRGb2N1czohMCxpc09uQ29tcG9zaXRpb246ITF9fSxjb21wdXRlZDp7bGFiZWxLZXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5sYWJlbHx8ImxhYmVsIn0sdmFsdWVLZXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy52YWx1ZXx8InZhbHVlIn0sY2hpbGRyZW5LZXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbnx8ImNoaWxkcmVuIn0sZGlzYWJsZWRLZXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5kaXNhYmxlZHx8ImRpc2FibGVkIn0sY3VycmVudExhYmVsczpmdW5jdGlvbigpe3ZhciBfdGhpcz10aGlzLG9wdGlvbnM9dGhpcy5vcHRpb25zLGxhYmVscz1bXTtyZXR1cm4gdGhpcy5jdXJyZW50VmFsdWUuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSl7dmFyIHRhcmdldE9wdGlvbj1vcHRpb25zJiZvcHRpb25zLmZpbHRlcihmdW5jdGlvbihvcHRpb24pe3JldHVybiBvcHRpb25bX3RoaXMudmFsdWVLZXldPT09dmFsdWV9KVswXTt0YXJnZXRPcHRpb24mJihsYWJlbHMucHVzaCh0YXJnZXRPcHRpb25bX3RoaXMubGFiZWxLZXldKSxvcHRpb25zPXRhcmdldE9wdGlvbltfdGhpcy5jaGlsZHJlbktleV0pfSksbGFiZWxzfSxfZWxGb3JtSXRlbVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5lbEZvcm1JdGVtfHx7fSkuZWxGb3JtSXRlbVNpemV9LGNhc2NhZGVyU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemV8fHRoaXMuX2VsRm9ybUl0ZW1TaXplfHwodGhpcy4kRUxFTUVOVHx8e30pLnNpemV9LGNhc2NhZGVyRGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNhYmxlZHx8KHRoaXMuZWxGb3JtfHx7fSkuZGlzYWJsZWR9LHJlYWRvbmx5OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZmlsdGVyYWJsZXx8IU9iamVjdCh1dGlsXy5pc0lFKSgpJiYhT2JqZWN0KHV0aWxfLmlzRWRnZSkoKSYmIXRoaXMubWVudVZpc2libGV9fSx3YXRjaDp7bWVudVZpc2libGU6ZnVuY3Rpb24odmFsdWUpe3RoaXMuJHJlZnMuaW5wdXQuJHJlZnMuaW5wdXQuc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIix2YWx1ZSksdmFsdWU/dGhpcy5zaG93TWVudSgpOnRoaXMuaGlkZU1lbnUoKSx0aGlzLiRlbWl0KCJ2aXNpYmxlLWNoYW5nZSIsdmFsdWUpfSx2YWx1ZTpmdW5jdGlvbihfdmFsdWUpe3RoaXMuY3VycmVudFZhbHVlPV92YWx1ZX0sY3VycmVudFZhbHVlOmZ1bmN0aW9uKHZhbHVlKXt0aGlzLmRpc3BhdGNoKCJFbEZvcm1JdGVtIiwiZWwuZm9ybS5jaGFuZ2UiLFt2YWx1ZV0pfSxjdXJyZW50TGFiZWxzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgaW5wdXRMYWJlbD10aGlzLnNob3dBbGxMZXZlbHM/dmFsdWUuam9pbigiLyIpOnZhbHVlW3ZhbHVlLmxlbmd0aC0xXTt0aGlzLiRyZWZzLmlucHV0LiRyZWZzLmlucHV0LnNldEF0dHJpYnV0ZSgidmFsdWUiLGlucHV0TGFiZWwpfSxvcHRpb25zOntkZWVwOiEwLGhhbmRsZXI6ZnVuY3Rpb24odmFsdWUpe3RoaXMubWVudXx8dGhpcy5pbml0TWVudSgpLHRoaXMuZmxhdE9wdGlvbnM9dGhpcy5mbGF0dGVuT3B0aW9ucyh0aGlzLm9wdGlvbnMpLHRoaXMubWVudS5vcHRpb25zPXZhbHVlfX19LG1ldGhvZHM6e2luaXRNZW51OmZ1bmN0aW9uKCl7dGhpcy5tZW51PW5ldyBleHRlcm5hbF92dWVfZGVmYXVsdC5hKGNhc2NhZGVyX3NyY19tZW51KS4kbW91bnQoKSx0aGlzLm1lbnUub3B0aW9ucz10aGlzLm9wdGlvbnMsdGhpcy5tZW51LnByb3BzPXRoaXMucHJvcHMsdGhpcy5tZW51LmV4cGFuZFRyaWdnZXI9dGhpcy5leHBhbmRUcmlnZ2VyLHRoaXMubWVudS5jaGFuZ2VPblNlbGVjdD10aGlzLmNoYW5nZU9uU2VsZWN0LHRoaXMubWVudS5wb3BwZXJDbGFzcz10aGlzLnBvcHBlckNsYXNzLHRoaXMubWVudS5ob3ZlclRocmVzaG9sZD10aGlzLmhvdmVyVGhyZXNob2xkLHRoaXMucG9wcGVyRWxtPXRoaXMubWVudS4kZWwsdGhpcy5tZW51LiRyZWZzLm1lbnVzWzBdLnNldEF0dHJpYnV0ZSgiaWQiLCJjYXNjYWRlci1tZW51LSIrdGhpcy5pZCksdGhpcy5tZW51LiRvbigicGljayIsdGhpcy5oYW5kbGVQaWNrKSx0aGlzLm1lbnUuJG9uKCJhY3RpdmVJdGVtQ2hhbmdlIix0aGlzLmhhbmRsZUFjdGl2ZUl0ZW1DaGFuZ2UpLHRoaXMubWVudS4kb24oIm1lbnVMZWF2ZSIsdGhpcy5kb0Rlc3Ryb3kpLHRoaXMubWVudS4kb24oImNsb3NlSW5zaWRlIix0aGlzLmhhbmRsZUNsaWNrb3V0c2lkZSl9LHNob3dNZW51OmZ1bmN0aW9uKCl7dmFyIF90aGlzMj10aGlzO3RoaXMubWVudXx8dGhpcy5pbml0TWVudSgpLHRoaXMubWVudS52YWx1ZT10aGlzLmN1cnJlbnRWYWx1ZS5zbGljZSgwKSx0aGlzLm1lbnUudmlzaWJsZT0hMCx0aGlzLm1lbnUub3B0aW9ucz10aGlzLm9wdGlvbnMsdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oXyl7X3RoaXMyLnVwZGF0ZVBvcHBlcigpLF90aGlzMi5tZW51LmlucHV0V2lkdGg9X3RoaXMyLiRyZWZzLmlucHV0LiRlbC5vZmZzZXRXaWR0aC0yfSl9LGhpZGVNZW51OmZ1bmN0aW9uKCl7dGhpcy5pbnB1dFZhbHVlPSIiLHRoaXMubWVudS52aXNpYmxlPSExLHRoaXMubmVlZEZvY3VzP3RoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKTp0aGlzLm5lZWRGb2N1cz0hMH0saGFuZGxlQWN0aXZlSXRlbUNoYW5nZTpmdW5jdGlvbih2YWx1ZSl7dmFyIF90aGlzMz10aGlzO3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKF8pe190aGlzMy51cGRhdGVQb3BwZXIoKX0pLHRoaXMuJGVtaXQoImFjdGl2ZS1pdGVtLWNoYW5nZSIsdmFsdWUpfSxoYW5kbGVLZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciBfdGhpczQ9dGhpcyxrZXlDb2RlPWUua2V5Q29kZTsxMz09PWtleUNvZGU/dGhpcy5oYW5kbGVDbGljaygpOjQwPT09a2V5Q29kZT8odGhpcy5tZW51VmlzaWJsZT0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXM0LnBvcHBlckVsbS5xdWVyeVNlbGVjdG9yQWxsKCIuZWwtY2FzY2FkZXItbWVudSIpWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0YWJpbmRleD0nLTEnXSIpWzBdLmZvY3VzKCl9KSxlLnN0b3BQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSk6MjchPT1rZXlDb2RlJiY5IT09a2V5Q29kZXx8KHRoaXMuaW5wdXRWYWx1ZT0iIix0aGlzLm1lbnUmJih0aGlzLm1lbnUudmlzaWJsZT0hMSkpfSxoYW5kbGVQaWNrOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xvc2U9ISgxPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTt0aGlzLmN1cnJlbnRWYWx1ZT12YWx1ZSx0aGlzLiRlbWl0KCJpbnB1dCIsdmFsdWUpLHRoaXMuJGVtaXQoImNoYW5nZSIsdmFsdWUpLGNsb3NlP3RoaXMubWVudVZpc2libGU9ITE6dGhpcy4kbmV4dFRpY2sodGhpcy51cGRhdGVQb3BwZXIpfSxoYW5kbGVJbnB1dENoYW5nZTpmdW5jdGlvbih2YWx1ZSl7dmFyIF90aGlzNT10aGlzO2lmKHRoaXMubWVudVZpc2libGUpe3ZhciBmbGF0T3B0aW9ucz10aGlzLmZsYXRPcHRpb25zO2lmKCF2YWx1ZSlyZXR1cm4gdGhpcy5tZW51Lm9wdGlvbnM9dGhpcy5vcHRpb25zLHZvaWQgdGhpcy4kbmV4dFRpY2sodGhpcy51cGRhdGVQb3BwZXIpO3ZhciBmaWx0ZXJlZEZsYXRPcHRpb25zPWZsYXRPcHRpb25zLmZpbHRlcihmdW5jdGlvbihvcHRpb25zU3RhY2spe3JldHVybiBvcHRpb25zU3RhY2suc29tZShmdW5jdGlvbihvcHRpb24pe3JldHVybiBuZXcgUmVnRXhwKE9iamVjdCh1dGlsXy5lc2NhcGVSZWdleHBTdHJpbmcpKHZhbHVlKSwiaSIpLnRlc3Qob3B0aW9uW190aGlzNS5sYWJlbEtleV0pfSl9KTtmaWx0ZXJlZEZsYXRPcHRpb25zPTA8ZmlsdGVyZWRGbGF0T3B0aW9ucy5sZW5ndGg/ZmlsdGVyZWRGbGF0T3B0aW9ucy5tYXAoZnVuY3Rpb24ob3B0aW9uU3RhY2spe3JldHVybntfX0lTX19GTEFUX19PUFRJT05TOiEwLHZhbHVlOm9wdGlvblN0YWNrLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbVtfdGhpczUudmFsdWVLZXldfSksbGFiZWw6X3RoaXM1LnJlbmRlckZpbHRlcmVkT3B0aW9uTGFiZWwodmFsdWUsb3B0aW9uU3RhY2spLGRpc2FibGVkOm9wdGlvblN0YWNrLnNvbWUoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW1bX3RoaXM1LmRpc2FibGVkS2V5XX0pfX0pOlt7X19JU19fRkxBVF9fT1BUSU9OUzohMCxsYWJlbDp0aGlzLnQoImVsLmNhc2NhZGVyLm5vTWF0Y2giKSx2YWx1ZToiIixkaXNhYmxlZDohMH1dLHRoaXMubWVudS5vcHRpb25zPWZpbHRlcmVkRmxhdE9wdGlvbnMsdGhpcy4kbmV4dFRpY2sodGhpcy51cGRhdGVQb3BwZXIpfX0scmVuZGVyRmlsdGVyZWRPcHRpb25MYWJlbDpmdW5jdGlvbihpbnB1dFZhbHVlLG9wdGlvbnNTdGFjayl7dmFyIF90aGlzNj10aGlzO3JldHVybiBvcHRpb25zU3RhY2subWFwKGZ1bmN0aW9uKG9wdGlvbixpbmRleCl7dmFyIGxhYmVsPW9wdGlvbltfdGhpczYubGFiZWxLZXldLGtleXdvcmRJbmRleD1sYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaW5wdXRWYWx1ZS50b0xvd2VyQ2FzZSgpKSxsYWJlbFBhcnQ9bGFiZWwuc2xpY2Uoa2V5d29yZEluZGV4LGlucHV0VmFsdWUubGVuZ3RoK2tleXdvcmRJbmRleCksbm9kZT0tMTxrZXl3b3JkSW5kZXg/X3RoaXM2LmhpZ2hsaWdodEtleXdvcmQobGFiZWwsbGFiZWxQYXJ0KTpsYWJlbDtyZXR1cm4gMD09PWluZGV4P25vZGU6WyIgIitfdGhpczYuc2VwYXJhdG9yKyIgIixub2RlXX0pfSxoaWdobGlnaHRLZXl3b3JkOmZ1bmN0aW9uKGxhYmVsLGtleXdvcmQpe3ZhciBfdGhpczc9dGhpcyxoPXRoaXMuX2M7cmV0dXJuIGxhYmVsLnNwbGl0KGtleXdvcmQpLm1hcChmdW5jdGlvbihub2RlLGluZGV4KXtyZXR1cm4gMD09PWluZGV4P25vZGU6W2goInNwYW4iLHtjbGFzczp7ImVsLWNhc2NhZGVyLW1lbnVfX2l0ZW1fX2tleXdvcmQiOiEwfX0sW190aGlzNy5fdihrZXl3b3JkKV0pLG5vZGVdfSl9LGZsYXR0ZW5PcHRpb25zOmZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBfdGhpczg9dGhpcyxhbmNlc3Rvcj0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06W10sZmxhdE9wdGlvbnM9W107cmV0dXJuIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbihvcHRpb24pe3ZhciBvcHRpb25zU3RhY2s9YW5jZXN0b3IuY29uY2F0KG9wdGlvbik7b3B0aW9uW190aGlzOC5jaGlsZHJlbktleV0/KF90aGlzOC5jaGFuZ2VPblNlbGVjdCYmZmxhdE9wdGlvbnMucHVzaChvcHRpb25zU3RhY2spLGZsYXRPcHRpb25zPWZsYXRPcHRpb25zLmNvbmNhdChfdGhpczguZmxhdHRlbk9wdGlvbnMob3B0aW9uW190aGlzOC5jaGlsZHJlbktleV0sb3B0aW9uc1N0YWNrKSkpOmZsYXRPcHRpb25zLnB1c2gob3B0aW9uc1N0YWNrKX0pLGZsYXRPcHRpb25zfSxjbGVhclZhbHVlOmZ1bmN0aW9uKGV2KXtldi5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmhhbmRsZVBpY2soW10sITApfSxoYW5kbGVDbGlja291dHNpZGU6ZnVuY3Rpb24oKXt2YXIgcGlja0ZpbmlzaGVkPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07dGhpcy5tZW51VmlzaWJsZSYmIXBpY2tGaW5pc2hlZCYmKHRoaXMubmVlZEZvY3VzPSExKSx0aGlzLm1lbnVWaXNpYmxlPSExfSxoYW5kbGVDbGljazpmdW5jdGlvbigpe3RoaXMuY2FzY2FkZXJEaXNhYmxlZHx8KHRoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKSx0aGlzLmZpbHRlcmFibGU/dGhpcy5tZW51VmlzaWJsZT0hMDp0aGlzLm1lbnVWaXNpYmxlPSF0aGlzLm1lbnVWaXNpYmxlKX0saGFuZGxlRm9jdXM6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuJGVtaXQoImZvY3VzIixldmVudCl9LGhhbmRsZUJsdXI6ZnVuY3Rpb24oZXZlbnQpe3RoaXMuJGVtaXQoImJsdXIiLGV2ZW50KX0saGFuZGxlQ29tcG9zaXRpb246ZnVuY3Rpb24oZXZlbnQpe3RoaXMuaXNPbkNvbXBvc2l0aW9uPSJjb21wb3NpdGlvbmVuZCIhPT1ldmVudC50eXBlfX0sY3JlYXRlZDpmdW5jdGlvbigpe3ZhciBfdGhpczk9dGhpczt0aGlzLmRlYm91bmNlZElucHV0Q2hhbmdlPWRlYm91bmNlX2RlZmF1bHQoKSh0aGlzLmRlYm91bmNlLGZ1bmN0aW9uKHZhbHVlKXt2YXIgYmVmb3JlPV90aGlzOS5iZWZvcmVGaWx0ZXIodmFsdWUpO2JlZm9yZSYmYmVmb3JlLnRoZW4/KF90aGlzOS5tZW51Lm9wdGlvbnM9W3tfX0lTX19GTEFUX19PUFRJT05TOiEwLGxhYmVsOl90aGlzOS50KCJlbC5jYXNjYWRlci5sb2FkaW5nIiksdmFsdWU6IiIsZGlzYWJsZWQ6ITB9XSxiZWZvcmUudGhlbihmdW5jdGlvbigpe190aGlzOS4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczkuaGFuZGxlSW5wdXRDaGFuZ2UodmFsdWUpfSl9KSk6ITEhPT1iZWZvcmUmJl90aGlzOS4kbmV4dFRpY2soZnVuY3Rpb24oKXtfdGhpczkuaGFuZGxlSW5wdXRDaGFuZ2UodmFsdWUpfSl9KX0sbW91bnRlZDpmdW5jdGlvbigpe3RoaXMuZmxhdE9wdGlvbnM9dGhpcy5mbGF0dGVuT3B0aW9ucyh0aGlzLm9wdGlvbnMpfX0sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzJlODY5ZmExX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y2FzY2FkZXJfc3JjX21haW5fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9jYXNjYWRlci9zcmMvbWFpbi52dWUiO3ZhciBjYXNjYWRlcl9zcmNfbWFpbj1jYXNjYWRlcl9zcmNfbWFpbl9jb21wb25lbnQuZXhwb3J0cztjYXNjYWRlcl9zcmNfbWFpbi5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChjYXNjYWRlcl9zcmNfbWFpbi5uYW1lLGNhc2NhZGVyX3NyY19tYWluKX07dmFyIGNhc2NhZGVyPWNhc2NhZGVyX3NyY19tYWluLG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF81NWM4YWRlN19yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtkaXJlY3RpdmVzOlt7bmFtZToiY2xpY2tvdXRzaWRlIixyYXdOYW1lOiJ2LWNsaWNrb3V0c2lkZSIsdmFsdWU6X3ZtLmhpZGUsZXhwcmVzc2lvbjoiaGlkZSJ9XSxjbGFzczpbImVsLWNvbG9yLXBpY2tlciIsX3ZtLmNvbG9yRGlzYWJsZWQ/ImlzLWRpc2FibGVkIjoiIixfdm0uY29sb3JTaXplPyJlbC1jb2xvci1waWNrZXItLSIrX3ZtLmNvbG9yU2l6ZToiIl19LFtfdm0uY29sb3JEaXNhYmxlZD9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWNvbG9yLXBpY2tlcl9fbWFzayJ9KTpfdm0uX2UoKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWNvbG9yLXBpY2tlcl9fdHJpZ2dlciIsb246e2NsaWNrOl92bS5oYW5kbGVUcmlnZ2VyfX0sW19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWNvbG9yLXBpY2tlcl9fY29sb3IiLGNsYXNzOnsiaXMtYWxwaGEiOl92bS5zaG93QWxwaGF9fSxbX2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtY29sb3ItcGlja2VyX19jb2xvci1pbm5lciIsc3R5bGU6e2JhY2tncm91bmRDb2xvcjpfdm0uZGlzcGxheWVkQ29sb3J9fSksX3ZtLnZhbHVlfHxfdm0uc2hvd1BhbmVsQ29sb3I/X3ZtLl9lKCk6X2MoInNwYW4iLHtzdGF0aWNDbGFzczoiZWwtY29sb3ItcGlja2VyX19lbXB0eSBlbC1pY29uLWNsb3NlIn0pXSksX2MoInNwYW4iLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTpfdm0udmFsdWV8fF92bS5zaG93UGFuZWxDb2xvcixleHByZXNzaW9uOiJ2YWx1ZSB8fCBzaG93UGFuZWxDb2xvciJ9XSxzdGF0aWNDbGFzczoiZWwtY29sb3ItcGlja2VyX19pY29uIGVsLWljb24tYXJyb3ctZG93biJ9KV0pLF9jKCJwaWNrZXItZHJvcGRvd24iLHtyZWY6ImRyb3Bkb3duIixjbGFzczpbImVsLWNvbG9yLXBpY2tlcl9fcGFuZWwiLF92bS5wb3BwZXJDbGFzc3x8IiJdLGF0dHJzOntjb2xvcjpfdm0uY29sb3IsInNob3ctYWxwaGEiOl92bS5zaG93QWxwaGEscHJlZGVmaW5lOl92bS5wcmVkZWZpbmV9LG9uOntwaWNrOl92bS5jb25maXJtVmFsdWUsY2xlYXI6X3ZtLmNsZWFyVmFsdWV9LG1vZGVsOnt2YWx1ZTpfdm0uc2hvd1BpY2tlcixjYWxsYmFjazpmdW5jdGlvbigkJHYpe192bS5zaG93UGlja2VyPSQkdn0sZXhwcmVzc2lvbjoic2hvd1BpY2tlciJ9fSldLDEpfTttYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfNTVjOGFkZTdfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIGNvbG9yX3R5cGVvZj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqfTpmdW5jdGlvbihvYmope3JldHVybiBvYmomJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJm9iai5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmb2JqIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2Ygb2JqfTt2YXIgaHN2MmhzbD1mdW5jdGlvbihodWUsc2F0LHZhbCl7cmV0dXJuW2h1ZSxzYXQqdmFsLygoaHVlPSgyLXNhdCkqdmFsKTwxP2h1ZToyLWh1ZSl8fDAsaHVlLzJdfSxib3VuZDAxPWZ1bmN0aW9uKHZhbHVlLG1heCl7dmFyIG47InN0cmluZyI9PXR5cGVvZihuPXZhbHVlKSYmLTEhPT1uLmluZGV4T2YoIi4iKSYmMT09PXBhcnNlRmxvYXQobikmJih2YWx1ZT0iMTAwJSIpO3ZhciBwcm9jZXNzUGVyY2VudD1mdW5jdGlvbihuKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIG4mJi0xIT09bi5pbmRleE9mKCIlIil9KHZhbHVlKTtyZXR1cm4gdmFsdWU9TWF0aC5taW4obWF4LE1hdGgubWF4KDAscGFyc2VGbG9hdCh2YWx1ZSkpKSxwcm9jZXNzUGVyY2VudCYmKHZhbHVlPXBhcnNlSW50KHZhbHVlKm1heCwxMCkvMTAwKSxNYXRoLmFicyh2YWx1ZS1tYXgpPDFlLTY/MTp2YWx1ZSVtYXgvcGFyc2VGbG9hdChtYXgpfSxJTlRfSEVYX01BUD17MTA6IkEiLDExOiJCIiwxMjoiQyIsMTM6IkQiLDE0OiJFIiwxNToiRiJ9LEhFWF9JTlRfTUFQPXtBOjEwLEI6MTEsQzoxMixEOjEzLEU6MTQsRjoxNX0scGFyc2VIZXhDaGFubmVsPWZ1bmN0aW9uKGhleCl7cmV0dXJuIDI9PT1oZXgubGVuZ3RoPzE2KihIRVhfSU5UX01BUFtoZXhbMF0udG9VcHBlckNhc2UoKV18fCtoZXhbMF0pKyhIRVhfSU5UX01BUFtoZXhbMV0udG9VcHBlckNhc2UoKV18fCtoZXhbMV0pOkhFWF9JTlRfTUFQW2hleFsxXS50b1VwcGVyQ2FzZSgpXXx8K2hleFsxXX0scmdiMmhzdj1mdW5jdGlvbihyLGcsYil7cj1ib3VuZDAxKHIsMjU1KSxnPWJvdW5kMDEoZywyNTUpLGI9Ym91bmQwMShiLDI1NSk7dmFyIHMsbWF4PU1hdGgubWF4KHIsZyxiKSxtaW49TWF0aC5taW4ocixnLGIpLGg9dm9pZCAwLHY9bWF4LGQ9bWF4LW1pbjtpZihzPTA9PT1tYXg/MDpkL21heCxtYXg9PT1taW4paD0wO2Vsc2V7c3dpdGNoKG1heCl7Y2FzZSByOmg9KGctYikvZCsoZzxiPzY6MCk7YnJlYWs7Y2FzZSBnOmg9KGItcikvZCsyO2JyZWFrO2Nhc2UgYjpoPShyLWcpL2QrNH1oLz02fXJldHVybntoOjM2MCpoLHM6MTAwKnMsdjoxMDAqdn19LGhzdjJyZ2I9ZnVuY3Rpb24oaCxzLHYpe2g9Nipib3VuZDAxKGgsMzYwKSxzPWJvdW5kMDEocywxMDApLHY9Ym91bmQwMSh2LDEwMCk7dmFyIGk9TWF0aC5mbG9vcihoKSxmPWgtaSxwPXYqKDEtcykscT12KigxLWYqcyksdD12KigxLSgxLWYpKnMpLG1vZD1pJTYscj1bdixxLHAscCx0LHZdW21vZF0sZz1bdCx2LHYscSxwLHBdW21vZF0sYj1bcCxwLHQsdix2LHFdW21vZF07cmV0dXJue3I6TWF0aC5yb3VuZCgyNTUqciksZzpNYXRoLnJvdW5kKDI1NSpnKSxiOk1hdGgucm91bmQoMjU1KmIpfX0sc3JjX2NvbG9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQ29sb3Iob3B0aW9ucyl7Zm9yKHZhciBvcHRpb24gaW4gZnVuY3Rpb24oaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9KHRoaXMsQ29sb3IpLHRoaXMuX2h1ZT0wLHRoaXMuX3NhdHVyYXRpb249MTAwLHRoaXMuX3ZhbHVlPTEwMCx0aGlzLl9hbHBoYT0xMDAsdGhpcy5lbmFibGVBbHBoYT0hMSx0aGlzLmZvcm1hdD0iaGV4Iix0aGlzLnZhbHVlPSIiLG9wdGlvbnM9b3B0aW9uc3x8e30pb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHRpb24pJiYodGhpc1tvcHRpb25dPW9wdGlvbnNbb3B0aW9uXSk7dGhpcy5kb09uQ2hhbmdlKCl9cmV0dXJuIENvbG9yLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24ocHJvcCx2YWx1ZSl7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGh8fCJvYmplY3QiIT09KHZvaWQgMD09PXByb3A/InVuZGVmaW5lZCI6Y29sb3JfdHlwZW9mKHByb3ApKSl0aGlzWyJfIitwcm9wXT12YWx1ZSx0aGlzLmRvT25DaGFuZ2UoKTtlbHNlIGZvcih2YXIgcCBpbiBwcm9wKXByb3AuaGFzT3duUHJvcGVydHkocCkmJnRoaXMuc2V0KHAscHJvcFtwXSl9LENvbG9yLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24ocHJvcCl7cmV0dXJuIHRoaXNbIl8iK3Byb3BdfSxDb2xvci5wcm90b3R5cGUudG9SZ2I9ZnVuY3Rpb24oKXtyZXR1cm4gaHN2MnJnYih0aGlzLl9odWUsdGhpcy5fc2F0dXJhdGlvbix0aGlzLl92YWx1ZSl9LENvbG9yLnByb3RvdHlwZS5mcm9tU3RyaW5nPWZ1bmN0aW9uKHZhbHVlKXt2YXIgX3RoaXM9dGhpcztpZighdmFsdWUpcmV0dXJuIHRoaXMuX2h1ZT0wLHRoaXMuX3NhdHVyYXRpb249MTAwLHRoaXMuX3ZhbHVlPTEwMCx2b2lkIHRoaXMuZG9PbkNoYW5nZSgpO3ZhciBmcm9tSFNWPWZ1bmN0aW9uKGgscyx2KXtfdGhpcy5faHVlPU1hdGgubWF4KDAsTWF0aC5taW4oMzYwLGgpKSxfdGhpcy5fc2F0dXJhdGlvbj1NYXRoLm1heCgwLE1hdGgubWluKDEwMCxzKSksX3RoaXMuX3ZhbHVlPU1hdGgubWF4KDAsTWF0aC5taW4oMTAwLHYpKSxfdGhpcy5kb09uQ2hhbmdlKCl9O2lmKC0xIT09dmFsdWUuaW5kZXhPZigiaHNsIikpe3ZhciBwYXJ0cz12YWx1ZS5yZXBsYWNlKC9oc2xhfGhzbHxcKHxcKS9nbSwiIikuc3BsaXQoL1xzfCwvZykuZmlsdGVyKGZ1bmN0aW9uKHZhbCl7cmV0dXJuIiIhPT12YWx9KS5tYXAoZnVuY3Rpb24odmFsLGluZGV4KXtyZXR1cm4gMjxpbmRleD9wYXJzZUZsb2F0KHZhbCk6cGFyc2VJbnQodmFsLDEwKX0pO2lmKDQ9PT1wYXJ0cy5sZW5ndGg/dGhpcy5fYWxwaGE9TWF0aC5mbG9vcigxMDAqcGFyc2VGbG9hdChwYXJ0c1szXSkpOjM9PT1wYXJ0cy5sZW5ndGgmJih0aGlzLl9hbHBoYT0xMDApLDM8PXBhcnRzLmxlbmd0aCl7dmFyIF9oc2wyaHN2PWZ1bmN0aW9uKGh1ZSxzYXQsbGlnaHQpe2xpZ2h0Lz0xMDA7dmFyIHNtaW49c2F0Lz0xMDAsbG1pbj1NYXRoLm1heChsaWdodCwuMDEpO3JldHVybiBzYXQqPShsaWdodCo9Mik8PTE/bGlnaHQ6Mi1saWdodCxzbWluKj1sbWluPD0xP2xtaW46Mi1sbWluLHtoOmh1ZSxzOjEwMCooMD09PWxpZ2h0PzIqc21pbi8obG1pbitzbWluKToyKnNhdC8obGlnaHQrc2F0KSksdjoobGlnaHQrc2F0KS8yKjEwMH19KHBhcnRzWzBdLHBhcnRzWzFdLHBhcnRzWzJdKTtmcm9tSFNWKF9oc2wyaHN2LmgsX2hzbDJoc3YucyxfaHNsMmhzdi52KX19ZWxzZSBpZigtMSE9PXZhbHVlLmluZGV4T2YoImhzdiIpKXt2YXIgX3BhcnRzPXZhbHVlLnJlcGxhY2UoL2hzdmF8aHN2fFwofFwpL2dtLCIiKS5zcGxpdCgvXHN8LC9nKS5maWx0ZXIoZnVuY3Rpb24odmFsKXtyZXR1cm4iIiE9PXZhbH0pLm1hcChmdW5jdGlvbih2YWwsaW5kZXgpe3JldHVybiAyPGluZGV4P3BhcnNlRmxvYXQodmFsKTpwYXJzZUludCh2YWwsMTApfSk7ND09PV9wYXJ0cy5sZW5ndGg/dGhpcy5fYWxwaGE9TWF0aC5mbG9vcigxMDAqcGFyc2VGbG9hdChfcGFydHNbM10pKTozPT09X3BhcnRzLmxlbmd0aCYmKHRoaXMuX2FscGhhPTEwMCksMzw9X3BhcnRzLmxlbmd0aCYmZnJvbUhTVihfcGFydHNbMF0sX3BhcnRzWzFdLF9wYXJ0c1syXSl9ZWxzZSBpZigtMSE9PXZhbHVlLmluZGV4T2YoInJnYiIpKXt2YXIgX3BhcnRzMj12YWx1ZS5yZXBsYWNlKC9yZ2JhfHJnYnxcKHxcKS9nbSwiIikuc3BsaXQoL1xzfCwvZykuZmlsdGVyKGZ1bmN0aW9uKHZhbCl7cmV0dXJuIiIhPT12YWx9KS5tYXAoZnVuY3Rpb24odmFsLGluZGV4KXtyZXR1cm4gMjxpbmRleD9wYXJzZUZsb2F0KHZhbCk6cGFyc2VJbnQodmFsLDEwKX0pO2lmKDQ9PT1fcGFydHMyLmxlbmd0aD90aGlzLl9hbHBoYT1NYXRoLmZsb29yKDEwMCpwYXJzZUZsb2F0KF9wYXJ0czJbM10pKTozPT09X3BhcnRzMi5sZW5ndGgmJih0aGlzLl9hbHBoYT0xMDApLDM8PV9wYXJ0czIubGVuZ3RoKXt2YXIgX3JnYjJoc3Y9cmdiMmhzdihfcGFydHMyWzBdLF9wYXJ0czJbMV0sX3BhcnRzMlsyXSk7ZnJvbUhTVihfcmdiMmhzdi5oLF9yZ2IyaHN2LnMsX3JnYjJoc3Yudil9fWVsc2UgaWYoLTEhPT12YWx1ZS5pbmRleE9mKCIjIikpe3ZhciBoZXg9dmFsdWUucmVwbGFjZSgiIyIsIiIpLnRyaW0oKSxyPXZvaWQgMCxnPXZvaWQgMCxiPXZvaWQgMDszPT09aGV4Lmxlbmd0aD8ocj1wYXJzZUhleENoYW5uZWwoaGV4WzBdK2hleFswXSksZz1wYXJzZUhleENoYW5uZWwoaGV4WzFdK2hleFsxXSksYj1wYXJzZUhleENoYW5uZWwoaGV4WzJdK2hleFsyXSkpOjYhPT1oZXgubGVuZ3RoJiY4IT09aGV4Lmxlbmd0aHx8KHI9cGFyc2VIZXhDaGFubmVsKGhleC5zdWJzdHJpbmcoMCwyKSksZz1wYXJzZUhleENoYW5uZWwoaGV4LnN1YnN0cmluZygyLDQpKSxiPXBhcnNlSGV4Q2hhbm5lbChoZXguc3Vic3RyaW5nKDQsNikpKSw4PT09aGV4Lmxlbmd0aD90aGlzLl9hbHBoYT1NYXRoLmZsb29yKHBhcnNlSGV4Q2hhbm5lbChoZXguc3Vic3RyaW5nKDYpKS8yNTUqMTAwKTozIT09aGV4Lmxlbmd0aCYmNiE9PWhleC5sZW5ndGh8fCh0aGlzLl9hbHBoYT0xMDApO3ZhciBfcmdiMmhzdjI9cmdiMmhzdihyLGcsYik7ZnJvbUhTVihfcmdiMmhzdjIuaCxfcmdiMmhzdjIucyxfcmdiMmhzdjIudil9fSxDb2xvci5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihjb2xvcil7cmV0dXJuIE1hdGguYWJzKGNvbG9yLl9odWUtdGhpcy5faHVlKTwyJiZNYXRoLmFicyhjb2xvci5fc2F0dXJhdGlvbi10aGlzLl9zYXR1cmF0aW9uKTwxJiZNYXRoLmFicyhjb2xvci5fdmFsdWUtdGhpcy5fdmFsdWUpPDEmJk1hdGguYWJzKGNvbG9yLl9hbHBoYS10aGlzLl9hbHBoYSk8MX0sQ29sb3IucHJvdG90eXBlLmRvT25DaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgX2h1ZT10aGlzLl9odWUsX3NhdHVyYXRpb249dGhpcy5fc2F0dXJhdGlvbixfdmFsdWU9dGhpcy5fdmFsdWUsX2FscGhhPXRoaXMuX2FscGhhLGZvcm1hdD10aGlzLmZvcm1hdDtpZih0aGlzLmVuYWJsZUFscGhhKXN3aXRjaChmb3JtYXQpe2Nhc2UiaHNsIjp2YXIgaHNsPWhzdjJoc2woX2h1ZSxfc2F0dXJhdGlvbi8xMDAsX3ZhbHVlLzEwMCk7dGhpcy52YWx1ZT0iaHNsYSgiK19odWUrIiwgIitNYXRoLnJvdW5kKDEwMCpoc2xbMV0pKyIlLCAiK01hdGgucm91bmQoMTAwKmhzbFsyXSkrIiUsICIrX2FscGhhLzEwMCsiKSI7YnJlYWs7Y2FzZSJoc3YiOnRoaXMudmFsdWU9ImhzdmEoIitfaHVlKyIsICIrTWF0aC5yb3VuZChfc2F0dXJhdGlvbikrIiUsICIrTWF0aC5yb3VuZChfdmFsdWUpKyIlLCAiK19hbHBoYS8xMDArIikiO2JyZWFrO2RlZmF1bHQ6dmFyIF9oc3YycmdiPWhzdjJyZ2IoX2h1ZSxfc2F0dXJhdGlvbixfdmFsdWUpLHI9X2hzdjJyZ2IucixnPV9oc3YycmdiLmcsYj1faHN2MnJnYi5iO3RoaXMudmFsdWU9InJnYmEoIityKyIsICIrZysiLCAiK2IrIiwgIitfYWxwaGEvMTAwKyIpIn1lbHNlIHN3aXRjaChmb3JtYXQpe2Nhc2UiaHNsIjp2YXIgX2hzbD1oc3YyaHNsKF9odWUsX3NhdHVyYXRpb24vMTAwLF92YWx1ZS8xMDApO3RoaXMudmFsdWU9ImhzbCgiK19odWUrIiwgIitNYXRoLnJvdW5kKDEwMCpfaHNsWzFdKSsiJSwgIitNYXRoLnJvdW5kKDEwMCpfaHNsWzJdKSsiJSkiO2JyZWFrO2Nhc2UiaHN2Ijp0aGlzLnZhbHVlPSJoc3YoIitfaHVlKyIsICIrTWF0aC5yb3VuZChfc2F0dXJhdGlvbikrIiUsICIrTWF0aC5yb3VuZChfdmFsdWUpKyIlKSI7YnJlYWs7Y2FzZSJyZ2IiOnZhciBfaHN2MnJnYjI9aHN2MnJnYihfaHVlLF9zYXR1cmF0aW9uLF92YWx1ZSksX3I9X2hzdjJyZ2IyLnIsX2c9X2hzdjJyZ2IyLmcsX2I9X2hzdjJyZ2IyLmI7dGhpcy52YWx1ZT0icmdiKCIrX3IrIiwgIitfZysiLCAiK19iKyIpIjticmVhaztkZWZhdWx0OnRoaXMudmFsdWU9ZnVuY3Rpb24oX3JlZil7dmFyIHI9X3JlZi5yLGc9X3JlZi5nLGI9X3JlZi5iLGhleE9uZT1mdW5jdGlvbih2YWx1ZSl7dmFsdWU9TWF0aC5taW4oTWF0aC5yb3VuZCh2YWx1ZSksMjU1KTt2YXIgaGlnaD1NYXRoLmZsb29yKHZhbHVlLzE2KSxsb3c9dmFsdWUlMTY7cmV0dXJuIiIrKElOVF9IRVhfTUFQW2hpZ2hdfHxoaWdoKSsoSU5UX0hFWF9NQVBbbG93XXx8bG93KX07cmV0dXJuIGlzTmFOKHIpfHxpc05hTihnKXx8aXNOYU4oYik/IiI6IiMiK2hleE9uZShyKStoZXhPbmUoZykraGV4T25lKGIpfShoc3YycmdiKF9odWUsX3NhdHVyYXRpb24sX3ZhbHVlKSl9fSxDb2xvcn0oKSxwaWNrZXJfZHJvcGRvd252dWVfdHlwZV90ZW1wbGF0ZV9pZF8wNjYwMTYyNV9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6ImVsLXpvb20taW4tdG9wIn0sb246eyJhZnRlci1sZWF2ZSI6X3ZtLmRvRGVzdHJveX19LFtfYygiZGl2Iix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLnNob3dQb3BwZXIsZXhwcmVzc2lvbjoic2hvd1BvcHBlciJ9XSxzdGF0aWNDbGFzczoiZWwtY29sb3ItZHJvcGRvd24ifSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xvci1kcm9wZG93bl9fbWFpbi13cmFwcGVyIn0sW19jKCJodWUtc2xpZGVyIix7cmVmOiJodWUiLHN0YXRpY1N0eWxlOntmbG9hdDoicmlnaHQifSxhdHRyczp7Y29sb3I6X3ZtLmNvbG9yLHZlcnRpY2FsOiIifX0pLF9jKCJzdi1wYW5lbCIse3JlZjoic2wiLGF0dHJzOntjb2xvcjpfdm0uY29sb3J9fSldLDEpLF92bS5zaG93QWxwaGE/X2MoImFscGhhLXNsaWRlciIse3JlZjoiYWxwaGEiLGF0dHJzOntjb2xvcjpfdm0uY29sb3J9fSk6X3ZtLl9lKCksX3ZtLnByZWRlZmluZT9fYygicHJlZGVmaW5lIix7YXR0cnM6e2NvbG9yOl92bS5jb2xvcixjb2xvcnM6X3ZtLnByZWRlZmluZX19KTpfdm0uX2UoKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWNvbG9yLWRyb3Bkb3duX19idG5zIn0sW19jKCJzcGFuIix7c3RhdGljQ2xhc3M6ImVsLWNvbG9yLWRyb3Bkb3duX192YWx1ZSJ9LFtfYygiZWwtaW5wdXQiLHthdHRyczp7InZhbGlkYXRlLWV2ZW50IjohMSxzaXplOiJtaW5pIn0sb246e2JsdXI6X3ZtLmhhbmRsZUNvbmZpcm19LG5hdGl2ZU9uOntrZXl1cDpmdW5jdGlvbigkZXZlbnQpe3JldHVybiJidXR0b24iaW4gJGV2ZW50fHwhX3ZtLl9rKCRldmVudC5rZXlDb2RlLCJlbnRlciIsMTMsJGV2ZW50LmtleSwiRW50ZXIiKT9fdm0uaGFuZGxlQ29uZmlybSgkZXZlbnQpOm51bGx9fSxtb2RlbDp7dmFsdWU6X3ZtLmN1c3RvbUlucHV0LGNhbGxiYWNrOmZ1bmN0aW9uKCQkdil7X3ZtLmN1c3RvbUlucHV0PSQkdn0sZXhwcmVzc2lvbjoiY3VzdG9tSW5wdXQifX0pXSwxKSxfYygiZWwtYnV0dG9uIix7c3RhdGljQ2xhc3M6ImVsLWNvbG9yLWRyb3Bkb3duX19saW5rLWJ0biIsYXR0cnM6e3NpemU6Im1pbmkiLHR5cGU6InRleHQifSxvbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uJGVtaXQoImNsZWFyIil9fX0sW192bS5fdigiXG4gICAgICAgICIrX3ZtLl9zKF92bS50KCJlbC5jb2xvcnBpY2tlci5jbGVhciIpKSsiXG4gICAgICAiKV0pLF9jKCJlbC1idXR0b24iLHtzdGF0aWNDbGFzczoiZWwtY29sb3ItZHJvcGRvd25fX2J0biIsYXR0cnM6e3BsYWluOiIiLHNpemU6Im1pbmkifSxvbjp7Y2xpY2s6X3ZtLmNvbmZpcm1WYWx1ZX19LFtfdm0uX3YoIlxuICAgICAgICAiK192bS5fcyhfdm0udCgiZWwuY29sb3JwaWNrZXIuY29uZmlybSIpKSsiXG4gICAgICAiKV0pXSwxKV0sMSldKX0sc3ZfcGFuZWx2dWVfdHlwZV90ZW1wbGF0ZV9pZF9kODU4MzU5Nl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudCxfYz10aGlzLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xvci1zdnBhbmVsIixzdHlsZTp7YmFja2dyb3VuZENvbG9yOnRoaXMuYmFja2dyb3VuZH19LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLWNvbG9yLXN2cGFuZWxfX3doaXRlIn0pLF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtY29sb3Itc3ZwYW5lbF9fYmxhY2sifSksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xvci1zdnBhbmVsX19jdXJzb3IiLHN0eWxlOnt0b3A6dGhpcy5jdXJzb3JUb3ArInB4IixsZWZ0OnRoaXMuY3Vyc29yTGVmdCsicHgifX0sW19jKCJkaXYiKV0pXSl9LGlzRHJhZ2dpbmc9IShzdl9wYW5lbHZ1ZV90eXBlX3RlbXBsYXRlX2lkX2Q4NTgzNTk2X3JlbmRlci5fd2l0aFN0cmlwcGVkPXBpY2tlcl9kcm9wZG93bnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzA2NjAxNjI1X3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwKSxkcmFnZ2FibGU9ZnVuY3Rpb24oZWxlbWVudCxvcHRpb25zKXtpZighZXh0ZXJuYWxfdnVlX2RlZmF1bHQuYS5wcm90b3R5cGUuJGlzU2VydmVyKXt2YXIgbW92ZUZuPWZ1bmN0aW9uKGV2ZW50KXtvcHRpb25zLmRyYWcmJm9wdGlvbnMuZHJhZyhldmVudCl9LHVwRm49ZnVuY3Rpb24gdXBGbihldmVudCl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixtb3ZlRm4pLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHVwRm4pLGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9bnVsbCxkb2N1bWVudC5vbmRyYWdzdGFydD1udWxsLGlzRHJhZ2dpbmc9ITEsb3B0aW9ucy5lbmQmJm9wdGlvbnMuZW5kKGV2ZW50KX07ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLGZ1bmN0aW9uKGV2ZW50KXtpc0RyYWdnaW5nfHwoZG9jdW1lbnQub25zZWxlY3RzdGFydD1mdW5jdGlvbigpe3JldHVybiExfSxkb2N1bWVudC5vbmRyYWdzdGFydD1mdW5jdGlvbigpe3JldHVybiExfSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLG1vdmVGbiksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdXBGbiksaXNEcmFnZ2luZz0hMCxvcHRpb25zLnN0YXJ0JiZvcHRpb25zLnN0YXJ0KGV2ZW50KSl9KX19LHN2X3BhbmVsX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6ImVsLXNsLXBhbmVsIixwcm9wczp7Y29sb3I6e3JlcXVpcmVkOiEwfX0sY29tcHV0ZWQ6e2NvbG9yVmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm57aHVlOnRoaXMuY29sb3IuZ2V0KCJodWUiKSx2YWx1ZTp0aGlzLmNvbG9yLmdldCgidmFsdWUiKX19fSx3YXRjaDp7Y29sb3JWYWx1ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlKCl9fSxtZXRob2RzOnt1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgc2F0dXJhdGlvbj10aGlzLmNvbG9yLmdldCgic2F0dXJhdGlvbiIpLHZhbHVlPXRoaXMuY29sb3IuZ2V0KCJ2YWx1ZSIpLGVsPXRoaXMuJGVsLHdpZHRoPWVsLmNsaWVudFdpZHRoLGhlaWdodD1lbC5jbGllbnRIZWlnaHQ7dGhpcy5jdXJzb3JMZWZ0PXNhdHVyYXRpb24qd2lkdGgvMTAwLHRoaXMuY3Vyc29yVG9wPSgxMDAtdmFsdWUpKmhlaWdodC8xMDAsdGhpcy5iYWNrZ3JvdW5kPSJoc2woIit0aGlzLmNvbG9yLmdldCgiaHVlIikrIiwgMTAwJSwgNTAlKSJ9LGhhbmRsZURyYWc6ZnVuY3Rpb24oZXZlbnQpe3ZhciByZWN0PXRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGxlZnQ9ZXZlbnQuY2xpZW50WC1yZWN0LmxlZnQsdG9wPWV2ZW50LmNsaWVudFktcmVjdC50b3A7bGVmdD1NYXRoLm1heCgwLGxlZnQpLGxlZnQ9TWF0aC5taW4obGVmdCxyZWN0LndpZHRoKSx0b3A9TWF0aC5tYXgoMCx0b3ApLHRvcD1NYXRoLm1pbih0b3AscmVjdC5oZWlnaHQpLHRoaXMuY3Vyc29yTGVmdD1sZWZ0LHRoaXMuY3Vyc29yVG9wPXRvcCx0aGlzLmNvbG9yLnNldCh7c2F0dXJhdGlvbjpsZWZ0L3JlY3Qud2lkdGgqMTAwLHZhbHVlOjEwMC10b3AvcmVjdC5oZWlnaHQqMTAwfSl9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXM7ZHJhZ2dhYmxlKHRoaXMuJGVsLHtkcmFnOmZ1bmN0aW9uKGV2ZW50KXtfdGhpcy5oYW5kbGVEcmFnKGV2ZW50KX0sZW5kOmZ1bmN0aW9uKGV2ZW50KXtfdGhpcy5oYW5kbGVEcmFnKGV2ZW50KX19KSx0aGlzLnVwZGF0ZSgpfSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2N1cnNvclRvcDowLGN1cnNvckxlZnQ6MCxiYWNrZ3JvdW5kOiJoc2woMCwgMTAwJSwgNTAlKSJ9fX0sc3ZfcGFuZWx2dWVfdHlwZV90ZW1wbGF0ZV9pZF9kODU4MzU5Nl9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3N2X3BhbmVsX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvY29sb3ItcGlja2VyL3NyYy9jb21wb25lbnRzL3N2LXBhbmVsLnZ1ZSI7dmFyIHN2X3BhbmVsPXN2X3BhbmVsX2NvbXBvbmVudC5leHBvcnRzLGh1ZV9zbGlkZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF81Y2RjNDNiMV9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudCxfYz10aGlzLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xvci1odWUtc2xpZGVyIixjbGFzczp7ImlzLXZlcnRpY2FsIjp0aGlzLnZlcnRpY2FsfX0sW19jKCJkaXYiLHtyZWY6ImJhciIsc3RhdGljQ2xhc3M6ImVsLWNvbG9yLWh1ZS1zbGlkZXJfX2JhciIsb246e2NsaWNrOnRoaXMuaGFuZGxlQ2xpY2t9fSksX2MoImRpdiIse3JlZjoidGh1bWIiLHN0YXRpY0NsYXNzOiJlbC1jb2xvci1odWUtc2xpZGVyX190aHVtYiIsc3R5bGU6e2xlZnQ6dGhpcy50aHVtYkxlZnQrInB4Iix0b3A6dGhpcy50aHVtYlRvcCsicHgifX0pXSl9LGh1ZV9zbGlkZXJfY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiZWwtY29sb3ItaHVlLXNsaWRlciIscHJvcHM6e2NvbG9yOntyZXF1aXJlZDpodWVfc2xpZGVydnVlX3R5cGVfdGVtcGxhdGVfaWRfNWNkYzQzYjFfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITB9LHZlcnRpY2FsOkJvb2xlYW59LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGh1bWJMZWZ0OjAsdGh1bWJUb3A6MH19LGNvbXB1dGVkOntodWVWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbG9yLmdldCgiaHVlIil9fSx3YXRjaDp7aHVlVmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZSgpfX0sbWV0aG9kczp7aGFuZGxlQ2xpY2s6ZnVuY3Rpb24oZXZlbnQpe3ZhciB0aHVtYj10aGlzLiRyZWZzLnRodW1iO2V2ZW50LnRhcmdldCE9PXRodW1iJiZ0aGlzLmhhbmRsZURyYWcoZXZlbnQpfSxoYW5kbGVEcmFnOmZ1bmN0aW9uKGV2ZW50KXt2YXIgcmVjdD10aGlzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx0aHVtYj10aGlzLiRyZWZzLnRodW1iLGh1ZT12b2lkIDA7aWYodGhpcy52ZXJ0aWNhbCl7dmFyIHRvcD1ldmVudC5jbGllbnRZLXJlY3QudG9wO3RvcD1NYXRoLm1pbih0b3AscmVjdC5oZWlnaHQtdGh1bWIub2Zmc2V0SGVpZ2h0LzIpLHRvcD1NYXRoLm1heCh0aHVtYi5vZmZzZXRIZWlnaHQvMix0b3ApLGh1ZT1NYXRoLnJvdW5kKCh0b3AtdGh1bWIub2Zmc2V0SGVpZ2h0LzIpLyhyZWN0LmhlaWdodC10aHVtYi5vZmZzZXRIZWlnaHQpKjM2MCl9ZWxzZXt2YXIgbGVmdD1ldmVudC5jbGllbnRYLXJlY3QubGVmdDtsZWZ0PU1hdGgubWluKGxlZnQscmVjdC53aWR0aC10aHVtYi5vZmZzZXRXaWR0aC8yKSxsZWZ0PU1hdGgubWF4KHRodW1iLm9mZnNldFdpZHRoLzIsbGVmdCksaHVlPU1hdGgucm91bmQoKGxlZnQtdGh1bWIub2Zmc2V0V2lkdGgvMikvKHJlY3Qud2lkdGgtdGh1bWIub2Zmc2V0V2lkdGgpKjM2MCl9dGhpcy5jb2xvci5zZXQoImh1ZSIsaHVlKX0sZ2V0VGh1bWJMZWZ0OmZ1bmN0aW9uKCl7aWYodGhpcy52ZXJ0aWNhbClyZXR1cm4gMDt2YXIgZWw9dGhpcy4kZWwsaHVlPXRoaXMuY29sb3IuZ2V0KCJodWUiKTtpZighZWwpcmV0dXJuIDA7dmFyIHRodW1iPXRoaXMuJHJlZnMudGh1bWI7cmV0dXJuIE1hdGgucm91bmQoaHVlKihlbC5vZmZzZXRXaWR0aC10aHVtYi5vZmZzZXRXaWR0aC8yKS8zNjApfSxnZXRUaHVtYlRvcDpmdW5jdGlvbigpe2lmKCF0aGlzLnZlcnRpY2FsKXJldHVybiAwO3ZhciBlbD10aGlzLiRlbCxodWU9dGhpcy5jb2xvci5nZXQoImh1ZSIpO2lmKCFlbClyZXR1cm4gMDt2YXIgdGh1bWI9dGhpcy4kcmVmcy50aHVtYjtyZXR1cm4gTWF0aC5yb3VuZChodWUqKGVsLm9mZnNldEhlaWdodC10aHVtYi5vZmZzZXRIZWlnaHQvMikvMzYwKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy50aHVtYkxlZnQ9dGhpcy5nZXRUaHVtYkxlZnQoKSx0aGlzLnRodW1iVG9wPXRoaXMuZ2V0VGh1bWJUb3AoKX19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpcyxfJHJlZnM9dGhpcy4kcmVmcyxiYXI9XyRyZWZzLmJhcix0aHVtYj1fJHJlZnMudGh1bWIsZHJhZ0NvbmZpZz17ZHJhZzpmdW5jdGlvbihldmVudCl7X3RoaXMuaGFuZGxlRHJhZyhldmVudCl9LGVuZDpmdW5jdGlvbihldmVudCl7X3RoaXMuaGFuZGxlRHJhZyhldmVudCl9fTtkcmFnZ2FibGUoYmFyLGRyYWdDb25maWcpLGRyYWdnYWJsZSh0aHVtYixkcmFnQ29uZmlnKSx0aGlzLnVwZGF0ZSgpfX0saHVlX3NsaWRlcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzVjZGM0M2IxX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7aHVlX3NsaWRlcl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2NvbG9yLXBpY2tlci9zcmMvY29tcG9uZW50cy9odWUtc2xpZGVyLnZ1ZSI7dmFyIGh1ZV9zbGlkZXI9aHVlX3NsaWRlcl9jb21wb25lbnQuZXhwb3J0cyxhbHBoYV9zbGlkZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF8wNjhjNjZjYl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudCxfYz10aGlzLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xvci1hbHBoYS1zbGlkZXIiLGNsYXNzOnsiaXMtdmVydGljYWwiOnRoaXMudmVydGljYWx9fSxbX2MoImRpdiIse3JlZjoiYmFyIixzdGF0aWNDbGFzczoiZWwtY29sb3ItYWxwaGEtc2xpZGVyX19iYXIiLHN0eWxlOntiYWNrZ3JvdW5kOnRoaXMuYmFja2dyb3VuZH0sb246e2NsaWNrOnRoaXMuaGFuZGxlQ2xpY2t9fSksX2MoImRpdiIse3JlZjoidGh1bWIiLHN0YXRpY0NsYXNzOiJlbC1jb2xvci1hbHBoYS1zbGlkZXJfX3RodW1iIixzdHlsZTp7bGVmdDp0aGlzLnRodW1iTGVmdCsicHgiLHRvcDp0aGlzLnRodW1iVG9wKyJweCJ9fSldKX0sYWxwaGFfc2xpZGVyX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6ImVsLWNvbG9yLWFscGhhLXNsaWRlciIscHJvcHM6e2NvbG9yOntyZXF1aXJlZDphbHBoYV9zbGlkZXJ2dWVfdHlwZV90ZW1wbGF0ZV9pZF8wNjhjNjZjYl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMH0sdmVydGljYWw6Qm9vbGVhbn0sd2F0Y2g6eyJjb2xvci5fYWxwaGEiOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGUoKX0sImNvbG9yLnZhbHVlIjpmdW5jdGlvbigpe3RoaXMudXBkYXRlKCl9fSxtZXRob2RzOntoYW5kbGVDbGljazpmdW5jdGlvbihldmVudCl7dmFyIHRodW1iPXRoaXMuJHJlZnMudGh1bWI7ZXZlbnQudGFyZ2V0IT09dGh1bWImJnRoaXMuaGFuZGxlRHJhZyhldmVudCl9LGhhbmRsZURyYWc6ZnVuY3Rpb24oZXZlbnQpe3ZhciByZWN0PXRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHRodW1iPXRoaXMuJHJlZnMudGh1bWI7aWYodGhpcy52ZXJ0aWNhbCl7dmFyIHRvcD1ldmVudC5jbGllbnRZLXJlY3QudG9wO3RvcD1NYXRoLm1heCh0aHVtYi5vZmZzZXRIZWlnaHQvMix0b3ApLHRvcD1NYXRoLm1pbih0b3AscmVjdC5oZWlnaHQtdGh1bWIub2Zmc2V0SGVpZ2h0LzIpLHRoaXMuY29sb3Iuc2V0KCJhbHBoYSIsTWF0aC5yb3VuZCgodG9wLXRodW1iLm9mZnNldEhlaWdodC8yKS8ocmVjdC5oZWlnaHQtdGh1bWIub2Zmc2V0SGVpZ2h0KSoxMDApKX1lbHNle3ZhciBsZWZ0PWV2ZW50LmNsaWVudFgtcmVjdC5sZWZ0O2xlZnQ9TWF0aC5tYXgodGh1bWIub2Zmc2V0V2lkdGgvMixsZWZ0KSxsZWZ0PU1hdGgubWluKGxlZnQscmVjdC53aWR0aC10aHVtYi5vZmZzZXRXaWR0aC8yKSx0aGlzLmNvbG9yLnNldCgiYWxwaGEiLE1hdGgucm91bmQoKGxlZnQtdGh1bWIub2Zmc2V0V2lkdGgvMikvKHJlY3Qud2lkdGgtdGh1bWIub2Zmc2V0V2lkdGgpKjEwMCkpfX0sZ2V0VGh1bWJMZWZ0OmZ1bmN0aW9uKCl7aWYodGhpcy52ZXJ0aWNhbClyZXR1cm4gMDt2YXIgZWw9dGhpcy4kZWwsYWxwaGE9dGhpcy5jb2xvci5fYWxwaGE7aWYoIWVsKXJldHVybiAwO3ZhciB0aHVtYj10aGlzLiRyZWZzLnRodW1iO3JldHVybiBNYXRoLnJvdW5kKGFscGhhKihlbC5vZmZzZXRXaWR0aC10aHVtYi5vZmZzZXRXaWR0aC8yKS8xMDApfSxnZXRUaHVtYlRvcDpmdW5jdGlvbigpe2lmKCF0aGlzLnZlcnRpY2FsKXJldHVybiAwO3ZhciBlbD10aGlzLiRlbCxhbHBoYT10aGlzLmNvbG9yLl9hbHBoYTtpZighZWwpcmV0dXJuIDA7dmFyIHRodW1iPXRoaXMuJHJlZnMudGh1bWI7cmV0dXJuIE1hdGgucm91bmQoYWxwaGEqKGVsLm9mZnNldEhlaWdodC10aHVtYi5vZmZzZXRIZWlnaHQvMikvMTAwKX0sZ2V0QmFja2dyb3VuZDpmdW5jdGlvbigpe2lmKHRoaXMuY29sb3ImJnRoaXMuY29sb3IudmFsdWUpe3ZhciBfY29sb3IkdG9SZ2I9dGhpcy5jb2xvci50b1JnYigpLHI9X2NvbG9yJHRvUmdiLnIsZz1fY29sb3IkdG9SZ2IuZyxiPV9jb2xvciR0b1JnYi5iO3JldHVybiJsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoIityKyIsICIrZysiLCAiK2IrIiwgMCkgMCUsIHJnYmEoIityKyIsICIrZysiLCAiK2IrIiwgMSkgMTAwJSkifXJldHVybiBudWxsfSx1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLnRodW1iTGVmdD10aGlzLmdldFRodW1iTGVmdCgpLHRoaXMudGh1bWJUb3A9dGhpcy5nZXRUaHVtYlRvcCgpLHRoaXMuYmFja2dyb3VuZD10aGlzLmdldEJhY2tncm91bmQoKX19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGh1bWJMZWZ0OjAsdGh1bWJUb3A6MCxiYWNrZ3JvdW5kOm51bGx9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXMsXyRyZWZzPXRoaXMuJHJlZnMsYmFyPV8kcmVmcy5iYXIsdGh1bWI9XyRyZWZzLnRodW1iLGRyYWdDb25maWc9e2RyYWc6ZnVuY3Rpb24oZXZlbnQpe190aGlzLmhhbmRsZURyYWcoZXZlbnQpfSxlbmQ6ZnVuY3Rpb24oZXZlbnQpe190aGlzLmhhbmRsZURyYWcoZXZlbnQpfX07ZHJhZ2dhYmxlKGJhcixkcmFnQ29uZmlnKSxkcmFnZ2FibGUodGh1bWIsZHJhZ0NvbmZpZyksdGhpcy51cGRhdGUoKX19LGFscGhhX3NsaWRlcnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzA2OGM2NmNiX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7YWxwaGFfc2xpZGVyX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvY29sb3ItcGlja2VyL3NyYy9jb21wb25lbnRzL2FscGhhLXNsaWRlci52dWUiO3ZhciBhbHBoYV9zbGlkZXI9YWxwaGFfc2xpZGVyX2NvbXBvbmVudC5leHBvcnRzLHByZWRlZmluZXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzA2ZTAzMDkzX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xvci1wcmVkZWZpbmUifSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jb2xvci1wcmVkZWZpbmVfX2NvbG9ycyJ9LF92bS5fbChfdm0ucmdiYUNvbG9ycyxmdW5jdGlvbihpdGVtLGluZGV4KXtyZXR1cm4gX2MoImRpdiIse2tleTpfdm0uY29sb3JzW2luZGV4XSxzdGF0aWNDbGFzczoiZWwtY29sb3ItcHJlZGVmaW5lX19jb2xvci1zZWxlY3RvciIsY2xhc3M6e3NlbGVjdGVkOml0ZW0uc2VsZWN0ZWQsImlzLWFscGhhIjppdGVtLl9hbHBoYTwxMDB9LG9uOntjbGljazpmdW5jdGlvbigkZXZlbnQpe192bS5oYW5kbGVTZWxlY3QoaW5kZXgpfX19LFtfYygiZGl2Iix7c3R5bGU6eyJiYWNrZ3JvdW5kLWNvbG9yIjppdGVtLnZhbHVlfX0pXSl9KSwwKV0pfTtwcmVkZWZpbmV2dWVfdHlwZV90ZW1wbGF0ZV9pZF8wNmUwMzA5M19yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgcHJlZGVmaW5lX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe3Byb3BzOntjb2xvcnM6e3R5cGU6QXJyYXkscmVxdWlyZWQ6ITB9LGNvbG9yOntyZXF1aXJlZDohMH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57cmdiYUNvbG9yczp0aGlzLnBhcnNlQ29sb3JzKHRoaXMuY29sb3JzLHRoaXMuY29sb3IpfX0sbWV0aG9kczp7aGFuZGxlU2VsZWN0OmZ1bmN0aW9uKGluZGV4KXt0aGlzLmNvbG9yLmZyb21TdHJpbmcodGhpcy5jb2xvcnNbaW5kZXhdKX0scGFyc2VDb2xvcnM6ZnVuY3Rpb24oY29sb3JzLGNvbG9yKXtyZXR1cm4gY29sb3JzLm1hcChmdW5jdGlvbih2YWx1ZSl7dmFyIGM9bmV3IHNyY19jb2xvcjtyZXR1cm4gYy5lbmFibGVBbHBoYT0hMCxjLmZvcm1hdD0icmdiYSIsYy5mcm9tU3RyaW5nKHZhbHVlKSxjLnNlbGVjdGVkPWMudmFsdWU9PT1jb2xvci52YWx1ZSxjfSl9fSx3YXRjaDp7IiRwYXJlbnQuY3VycmVudENvbG9yIjpmdW5jdGlvbih2YWwpe3ZhciBjb2xvcj1uZXcgc3JjX2NvbG9yO2NvbG9yLmZyb21TdHJpbmcodmFsKSx0aGlzLnJnYmFDb2xvcnMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtpdGVtLnNlbGVjdGVkPWNvbG9yLmNvbXBhcmUoaXRlbSl9KX0sY29sb3JzOmZ1bmN0aW9uKG5ld1ZhbCl7dGhpcy5yZ2JhQ29sb3JzPXRoaXMucGFyc2VDb2xvcnMobmV3VmFsLHRoaXMuY29sb3IpfSxjb2xvcjpmdW5jdGlvbihuZXdWYWwpe3RoaXMucmdiYUNvbG9ycz10aGlzLnBhcnNlQ29sb3JzKHRoaXMuY29sb3JzLG5ld1ZhbCl9fX0scHJlZGVmaW5ldnVlX3R5cGVfdGVtcGxhdGVfaWRfMDZlMDMwOTNfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtwcmVkZWZpbmVfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9jb2xvci1waWNrZXIvc3JjL2NvbXBvbmVudHMvcHJlZGVmaW5lLnZ1ZSI7dmFyIHByZWRlZmluZT1wcmVkZWZpbmVfY29tcG9uZW50LmV4cG9ydHMscGlja2VyX2Ryb3Bkb3duX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6ImVsLWNvbG9yLXBpY2tlci1kcm9wZG93biIsbWl4aW5zOlt2dWVfcG9wcGVyX2RlZmF1bHQuYSxsb2NhbGVfZGVmYXVsdC5hXSxjb21wb25lbnRzOntTdlBhbmVsOnN2X3BhbmVsLEh1ZVNsaWRlcjpodWVfc2xpZGVyLEFscGhhU2xpZGVyOmFscGhhX3NsaWRlcixFbElucHV0OmlucHV0X2RlZmF1bHQuYSxFbEJ1dHRvbjpidXR0b25fZGVmYXVsdC5hLFByZWRlZmluZTpwcmVkZWZpbmV9LHByb3BzOntjb2xvcjp7cmVxdWlyZWQ6ITB9LHNob3dBbHBoYTpCb29sZWFuLHByZWRlZmluZTpBcnJheX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntjdXN0b21JbnB1dDoiIn19LGNvbXB1dGVkOntjdXJyZW50Q29sb3I6ZnVuY3Rpb24oKXt2YXIgcGFyZW50PXRoaXMuJHBhcmVudDtyZXR1cm4gcGFyZW50LnZhbHVlfHxwYXJlbnQuc2hvd1BhbmVsQ29sb3I/cGFyZW50LmNvbG9yLnZhbHVlOiIifX0sbWV0aG9kczp7Y29uZmlybVZhbHVlOmZ1bmN0aW9uKCl7dGhpcy4kZW1pdCgicGljayIpfSxoYW5kbGVDb25maXJtOmZ1bmN0aW9uKCl7dGhpcy5jb2xvci5mcm9tU3RyaW5nKHRoaXMuY3VzdG9tSW5wdXQpfX0sbW91bnRlZDpmdW5jdGlvbigpe3RoaXMuJHBhcmVudC5wb3BwZXJFbG09dGhpcy5wb3BwZXJFbG09dGhpcy4kZWwsdGhpcy5yZWZlcmVuY2VFbG09dGhpcy4kcGFyZW50LiRlbH0sd2F0Y2g6e3Nob3dQb3BwZXI6ZnVuY3Rpb24odmFsKXt2YXIgX3RoaXM9dGhpczshMD09PXZhbCYmdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKXt2YXIgXyRyZWZzPV90aGlzLiRyZWZzLHNsPV8kcmVmcy5zbCxodWU9XyRyZWZzLmh1ZSxhbHBoYT1fJHJlZnMuYWxwaGE7c2wmJnNsLnVwZGF0ZSgpLGh1ZSYmaHVlLnVwZGF0ZSgpLGFscGhhJiZhbHBoYS51cGRhdGUoKX0pfSxjdXJyZW50Q29sb3I6e2ltbWVkaWF0ZTohMCxoYW5kbGVyOmZ1bmN0aW9uKHZhbCl7dGhpcy5jdXN0b21JbnB1dD12YWx9fX19LHBpY2tlcl9kcm9wZG93bnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzA2NjAxNjI1X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7cGlja2VyX2Ryb3Bkb3duX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvY29sb3ItcGlja2VyL3NyYy9jb21wb25lbnRzL3BpY2tlci1kcm9wZG93bi52dWUiO3ZhciBwaWNrZXJfZHJvcGRvd249cGlja2VyX2Ryb3Bkb3duX2NvbXBvbmVudC5leHBvcnRzLGNvbG9yX3BpY2tlcl9zcmNfbWFpbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbENvbG9yUGlja2VyIixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hXSxwcm9wczp7dmFsdWU6U3RyaW5nLHNob3dBbHBoYTpCb29sZWFuLGNvbG9yRm9ybWF0OlN0cmluZyxkaXNhYmxlZDpCb29sZWFuLHNpemU6U3RyaW5nLHBvcHBlckNsYXNzOlN0cmluZyxwcmVkZWZpbmU6QXJyYXl9LGluamVjdDp7ZWxGb3JtOntkZWZhdWx0OiIifSxlbEZvcm1JdGVtOntkZWZhdWx0OiIifX0sZGlyZWN0aXZlczp7Q2xpY2tvdXRzaWRlOmNsaWNrb3V0c2lkZV9kZWZhdWx0LmF9LGNvbXB1dGVkOntkaXNwbGF5ZWRDb2xvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlfHx0aGlzLnNob3dQYW5lbENvbG9yP3RoaXMuZGlzcGxheWVkUmdiKHRoaXMuY29sb3IsdGhpcy5zaG93QWxwaGEpOiJ0cmFuc3BhcmVudCJ9LF9lbEZvcm1JdGVtU2l6ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmVsRm9ybUl0ZW18fHt9KS5lbEZvcm1JdGVtU2l6ZX0sY29sb3JTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZXx8dGhpcy5fZWxGb3JtSXRlbVNpemV8fCh0aGlzLiRFTEVNRU5UfHx7fSkuc2l6ZX0sY29sb3JEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGVkfHwodGhpcy5lbEZvcm18fHt9KS5kaXNhYmxlZH19LHdhdGNoOnt2YWx1ZTpmdW5jdGlvbih2YWwpe3ZhbD92YWwmJnZhbCE9PXRoaXMuY29sb3IudmFsdWUmJnRoaXMuY29sb3IuZnJvbVN0cmluZyh2YWwpOnRoaXMuc2hvd1BhbmVsQ29sb3I9ITF9LGNvbG9yOntkZWVwOiEwLGhhbmRsZXI6ZnVuY3Rpb24oKXt0aGlzLnNob3dQYW5lbENvbG9yPSEwfX0sZGlzcGxheWVkQ29sb3I6ZnVuY3Rpb24odmFsKXtpZih0aGlzLnNob3dQaWNrZXIpe3ZhciBjdXJyZW50VmFsdWVDb2xvcj1uZXcgc3JjX2NvbG9yKHtlbmFibGVBbHBoYTp0aGlzLnNob3dBbHBoYSxmb3JtYXQ6dGhpcy5jb2xvckZvcm1hdH0pO2N1cnJlbnRWYWx1ZUNvbG9yLmZyb21TdHJpbmcodGhpcy52YWx1ZSksdmFsIT09dGhpcy5kaXNwbGF5ZWRSZ2IoY3VycmVudFZhbHVlQ29sb3IsdGhpcy5zaG93QWxwaGEpJiZ0aGlzLiRlbWl0KCJhY3RpdmUtY2hhbmdlIix2YWwpfX19LG1ldGhvZHM6e2hhbmRsZVRyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLmNvbG9yRGlzYWJsZWR8fCh0aGlzLnNob3dQaWNrZXI9IXRoaXMuc2hvd1BpY2tlcil9LGNvbmZpcm1WYWx1ZTpmdW5jdGlvbigpe3ZhciB2YWx1ZT10aGlzLmNvbG9yLnZhbHVlO3RoaXMuJGVtaXQoImlucHV0Iix2YWx1ZSksdGhpcy4kZW1pdCgiY2hhbmdlIix2YWx1ZSksdGhpcy5kaXNwYXRjaCgiRWxGb3JtSXRlbSIsImVsLmZvcm0uY2hhbmdlIix2YWx1ZSksdGhpcy5zaG93UGlja2VyPSExfSxjbGVhclZhbHVlOmZ1bmN0aW9uKCl7dGhpcy4kZW1pdCgiaW5wdXQiLG51bGwpLHRoaXMuJGVtaXQoImNoYW5nZSIsbnVsbCksbnVsbCE9PXRoaXMudmFsdWUmJnRoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmNoYW5nZSIsbnVsbCksdGhpcy5zaG93UGFuZWxDb2xvcj0hMSx0aGlzLnNob3dQaWNrZXI9ITEsdGhpcy5yZXNldENvbG9yKCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLnNob3dQaWNrZXI9ITEsdGhpcy5yZXNldENvbG9yKCl9LHJlc2V0Q29sb3I6ZnVuY3Rpb24oKXt2YXIgX3RoaXM9dGhpczt0aGlzLiRuZXh0VGljayhmdW5jdGlvbihfKXtfdGhpcy52YWx1ZT9fdGhpcy5jb2xvci5mcm9tU3RyaW5nKF90aGlzLnZhbHVlKTpfdGhpcy5zaG93UGFuZWxDb2xvcj0hMX0pfSxkaXNwbGF5ZWRSZ2I6ZnVuY3Rpb24oY29sb3Isc2hvd0FscGhhKXtpZighKGNvbG9yIGluc3RhbmNlb2Ygc3JjX2NvbG9yKSl0aHJvdyBFcnJvcigiY29sb3Igc2hvdWxkIGJlIGluc3RhbmNlIG9mIENvbG9yIENsYXNzIik7dmFyIF9jb2xvciR0b1JnYj1jb2xvci50b1JnYigpLHI9X2NvbG9yJHRvUmdiLnIsZz1fY29sb3IkdG9SZ2IuZyxiPV9jb2xvciR0b1JnYi5iO3JldHVybiBzaG93QWxwaGE/InJnYmEoIityKyIsICIrZysiLCAiK2IrIiwgIitjb2xvci5nZXQoImFscGhhIikvMTAwKyIpIjoicmdiKCIrcisiLCAiK2crIiwgIitiKyIpIn19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgdmFsdWU9dGhpcy52YWx1ZTt2YWx1ZSYmdGhpcy5jb2xvci5mcm9tU3RyaW5nKHZhbHVlKSx0aGlzLnBvcHBlckVsbT10aGlzLiRyZWZzLmRyb3Bkb3duLiRlbH0sZGF0YTpmdW5jdGlvbigpe3JldHVybntjb2xvcjpuZXcgc3JjX2NvbG9yKHtlbmFibGVBbHBoYTp0aGlzLnNob3dBbHBoYSxmb3JtYXQ6dGhpcy5jb2xvckZvcm1hdH0pLHNob3dQaWNrZXI6ITEsc2hvd1BhbmVsQ29sb3I6ITF9fSxjb21wb25lbnRzOntQaWNrZXJEcm9wZG93bjpwaWNrZXJfZHJvcGRvd259fSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfNTVjOGFkZTdfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtjb2xvcl9waWNrZXJfc3JjX21haW5fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9jb2xvci1waWNrZXIvc3JjL21haW4udnVlIjt2YXIgY29sb3JfcGlja2VyX3NyY19tYWluPWNvbG9yX3BpY2tlcl9zcmNfbWFpbl9jb21wb25lbnQuZXhwb3J0cztjb2xvcl9waWNrZXJfc3JjX21haW4uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoY29sb3JfcGlja2VyX3NyY19tYWluLm5hbWUsY29sb3JfcGlja2VyX3NyY19tYWluKX07dmFyIGNvbG9yX3BpY2tlcj1jb2xvcl9waWNrZXJfc3JjX21haW4sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzVjNjU0ZGQ4X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10cmFuc2ZlciJ9LFtfYygidHJhbnNmZXItcGFuZWwiLF92bS5fYih7cmVmOiJsZWZ0UGFuZWwiLGF0dHJzOntkYXRhOl92bS5zb3VyY2VEYXRhLHRpdGxlOl92bS50aXRsZXNbMF18fF92bS50KCJlbC50cmFuc2Zlci50aXRsZXMuMCIpLCJkZWZhdWx0LWNoZWNrZWQiOl92bS5sZWZ0RGVmYXVsdENoZWNrZWQscGxhY2Vob2xkZXI6X3ZtLmZpbHRlclBsYWNlaG9sZGVyfHxfdm0udCgiZWwudHJhbnNmZXIuZmlsdGVyUGxhY2Vob2xkZXIiKX0sb246eyJjaGVja2VkLWNoYW5nZSI6X3ZtLm9uU291cmNlQ2hlY2tlZENoYW5nZX19LCJ0cmFuc2Zlci1wYW5lbCIsX3ZtLiRwcm9wcywhMSksW192bS5fdCgibGVmdC1mb290ZXIiKV0sMiksX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10cmFuc2Zlcl9fYnV0dG9ucyJ9LFtfYygiZWwtYnV0dG9uIix7Y2xhc3M6WyJlbC10cmFuc2Zlcl9fYnV0dG9uIixfdm0uaGFzQnV0dG9uVGV4dHM/ImlzLXdpdGgtdGV4dHMiOiIiXSxhdHRyczp7dHlwZToicHJpbWFyeSIsZGlzYWJsZWQ6MD09PV92bS5yaWdodENoZWNrZWQubGVuZ3RofSxuYXRpdmVPbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLmFkZFRvTGVmdCgkZXZlbnQpfX19LFtfYygiaSIse3N0YXRpY0NsYXNzOiJlbC1pY29uLWFycm93LWxlZnQifSksdm9pZCAwIT09X3ZtLmJ1dHRvblRleHRzWzBdP19jKCJzcGFuIixbX3ZtLl92KF92bS5fcyhfdm0uYnV0dG9uVGV4dHNbMF0pKV0pOl92bS5fZSgpXSksX2MoImVsLWJ1dHRvbiIse2NsYXNzOlsiZWwtdHJhbnNmZXJfX2J1dHRvbiIsX3ZtLmhhc0J1dHRvblRleHRzPyJpcy13aXRoLXRleHRzIjoiIl0sYXR0cnM6e3R5cGU6InByaW1hcnkiLGRpc2FibGVkOjA9PT1fdm0ubGVmdENoZWNrZWQubGVuZ3RofSxuYXRpdmVPbjp7Y2xpY2s6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLmFkZFRvUmlnaHQoJGV2ZW50KX19fSxbdm9pZCAwIT09X3ZtLmJ1dHRvblRleHRzWzFdP19jKCJzcGFuIixbX3ZtLl92KF92bS5fcyhfdm0uYnV0dG9uVGV4dHNbMV0pKV0pOl92bS5fZSgpLF9jKCJpIix7c3RhdGljQ2xhc3M6ImVsLWljb24tYXJyb3ctcmlnaHQifSldKV0sMSksX2MoInRyYW5zZmVyLXBhbmVsIixfdm0uX2Ioe3JlZjoicmlnaHRQYW5lbCIsYXR0cnM6e2RhdGE6X3ZtLnRhcmdldERhdGEsdGl0bGU6X3ZtLnRpdGxlc1sxXXx8X3ZtLnQoImVsLnRyYW5zZmVyLnRpdGxlcy4xIiksImRlZmF1bHQtY2hlY2tlZCI6X3ZtLnJpZ2h0RGVmYXVsdENoZWNrZWQscGxhY2Vob2xkZXI6X3ZtLmZpbHRlclBsYWNlaG9sZGVyfHxfdm0udCgiZWwudHJhbnNmZXIuZmlsdGVyUGxhY2Vob2xkZXIiKX0sb246eyJjaGVja2VkLWNoYW5nZSI6X3ZtLm9uVGFyZ2V0Q2hlY2tlZENoYW5nZX19LCJ0cmFuc2Zlci1wYW5lbCIsX3ZtLiRwcm9wcywhMSksW192bS5fdCgicmlnaHQtZm9vdGVyIildLDIpXSwxKX0sdHJhbnNmZXJfcGFuZWx2dWVfdHlwZV90ZW1wbGF0ZV9pZF8yZGRhYjhiZF9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtdHJhbnNmZXItcGFuZWwifSxbX2MoInAiLHtzdGF0aWNDbGFzczoiZWwtdHJhbnNmZXItcGFuZWxfX2hlYWRlciJ9LFtfYygiZWwtY2hlY2tib3giLHthdHRyczp7aW5kZXRlcm1pbmF0ZTpfdm0uaXNJbmRldGVybWluYXRlfSxvbjp7Y2hhbmdlOl92bS5oYW5kbGVBbGxDaGVja2VkQ2hhbmdlfSxtb2RlbDp7dmFsdWU6X3ZtLmFsbENoZWNrZWQsY2FsbGJhY2s6ZnVuY3Rpb24oJCR2KXtfdm0uYWxsQ2hlY2tlZD0kJHZ9LGV4cHJlc3Npb246ImFsbENoZWNrZWQifX0sW192bS5fdigiXG4gICAgICAiK192bS5fcyhfdm0udGl0bGUpKyJcbiAgICAgICIpLF9jKCJzcGFuIixbX3ZtLl92KF92bS5fcyhfdm0uY2hlY2tlZFN1bW1hcnkpKV0pXSldLDEpLF9jKCJkaXYiLHtjbGFzczpbImVsLXRyYW5zZmVyLXBhbmVsX19ib2R5Iixfdm0uaGFzRm9vdGVyPyJpcy13aXRoLWZvb3RlciI6IiJdfSxbX3ZtLmZpbHRlcmFibGU/X2MoImVsLWlucHV0Iix7c3RhdGljQ2xhc3M6ImVsLXRyYW5zZmVyLXBhbmVsX19maWx0ZXIiLGF0dHJzOntzaXplOiJzbWFsbCIscGxhY2Vob2xkZXI6X3ZtLnBsYWNlaG9sZGVyfSxuYXRpdmVPbjp7bW91c2VlbnRlcjpmdW5jdGlvbigkZXZlbnQpe192bS5pbnB1dEhvdmVyPSEwfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKCRldmVudCl7X3ZtLmlucHV0SG92ZXI9ITF9fSxtb2RlbDp7dmFsdWU6X3ZtLnF1ZXJ5LGNhbGxiYWNrOmZ1bmN0aW9uKCQkdil7X3ZtLnF1ZXJ5PSQkdn0sZXhwcmVzc2lvbjoicXVlcnkifX0sW19jKCJpIix7Y2xhc3M6WyJlbC1pbnB1dF9faWNvbiIsImVsLWljb24tIitfdm0uaW5wdXRJY29uXSxhdHRyczp7c2xvdDoicHJlZml4In0sb246e2NsaWNrOl92bS5jbGVhclF1ZXJ5fSxzbG90OiJwcmVmaXgifSldKTpfdm0uX2UoKSxfYygiZWwtY2hlY2tib3gtZ3JvdXAiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTohX3ZtLmhhc05vTWF0Y2gmJjA8X3ZtLmRhdGEubGVuZ3RoLGV4cHJlc3Npb246IiFoYXNOb01hdGNoICYmIGRhdGEubGVuZ3RoID4gMCJ9XSxzdGF0aWNDbGFzczoiZWwtdHJhbnNmZXItcGFuZWxfX2xpc3QiLGNsYXNzOnsiaXMtZmlsdGVyYWJsZSI6X3ZtLmZpbHRlcmFibGV9LG1vZGVsOnt2YWx1ZTpfdm0uY2hlY2tlZCxjYWxsYmFjazpmdW5jdGlvbigkJHYpe192bS5jaGVja2VkPSQkdn0sZXhwcmVzc2lvbjoiY2hlY2tlZCJ9fSxfdm0uX2woX3ZtLmZpbHRlcmVkRGF0YSxmdW5jdGlvbihpdGVtKXtyZXR1cm4gX2MoImVsLWNoZWNrYm94Iix7a2V5Oml0ZW1bX3ZtLmtleVByb3BdLHN0YXRpY0NsYXNzOiJlbC10cmFuc2Zlci1wYW5lbF9faXRlbSIsYXR0cnM6e2xhYmVsOml0ZW1bX3ZtLmtleVByb3BdLGRpc2FibGVkOml0ZW1bX3ZtLmRpc2FibGVkUHJvcF19fSxbX2MoIm9wdGlvbi1jb250ZW50Iix7YXR0cnM6e29wdGlvbjppdGVtfX0pXSwxKX0pLDEpLF9jKCJwIix7ZGlyZWN0aXZlczpbe25hbWU6InNob3ciLHJhd05hbWU6InYtc2hvdyIsdmFsdWU6X3ZtLmhhc05vTWF0Y2gsZXhwcmVzc2lvbjoiaGFzTm9NYXRjaCJ9XSxzdGF0aWNDbGFzczoiZWwtdHJhbnNmZXItcGFuZWxfX2VtcHR5In0sW192bS5fdihfdm0uX3MoX3ZtLnQoImVsLnRyYW5zZmVyLm5vTWF0Y2giKSkpXSksX2MoInAiLHtkaXJlY3RpdmVzOlt7bmFtZToic2hvdyIscmF3TmFtZToidi1zaG93Iix2YWx1ZTowPT09X3ZtLmRhdGEubGVuZ3RoJiYhX3ZtLmhhc05vTWF0Y2gsZXhwcmVzc2lvbjoiZGF0YS5sZW5ndGggPT09IDAgJiYgIWhhc05vTWF0Y2gifV0sc3RhdGljQ2xhc3M6ImVsLXRyYW5zZmVyLXBhbmVsX19lbXB0eSJ9LFtfdm0uX3YoX3ZtLl9zKF92bS50KCJlbC50cmFuc2Zlci5ub0RhdGEiKSkpXSldLDEpLF92bS5oYXNGb290ZXI/X2MoInAiLHtzdGF0aWNDbGFzczoiZWwtdHJhbnNmZXItcGFuZWxfX2Zvb3RlciJ9LFtfdm0uX3QoImRlZmF1bHQiKV0sMik6X3ZtLl9lKCldKX07dHJhbnNmZXJfcGFuZWx2dWVfdHlwZV90ZW1wbGF0ZV9pZF8yZGRhYjhiZF9yZW5kZXIuX3dpdGhTdHJpcHBlZD1tYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfNWM2NTRkZDhfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHRyYW5zZmVyX3BhbmVsX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe21peGluczpbbG9jYWxlX2RlZmF1bHQuYV0sbmFtZToiRWxUcmFuc2ZlclBhbmVsIixjb21wb25lbnROYW1lOiJFbFRyYW5zZmVyUGFuZWwiLGNvbXBvbmVudHM6e0VsQ2hlY2tib3hHcm91cDpjaGVja2JveF9ncm91cF9kZWZhdWx0LmEsRWxDaGVja2JveDpjaGVja2JveF9kZWZhdWx0LmEsRWxJbnB1dDppbnB1dF9kZWZhdWx0LmEsT3B0aW9uQ29udGVudDp7cHJvcHM6e29wdGlvbjpPYmplY3R9LHJlbmRlcjpmdW5jdGlvbihoKXt2YXIgcGFuZWw9ZnVuY3Rpb24gZ2V0UGFyZW50KHZtKXtyZXR1cm4iRWxUcmFuc2ZlclBhbmVsIj09PXZtLiRvcHRpb25zLmNvbXBvbmVudE5hbWU/dm06dm0uJHBhcmVudD9nZXRQYXJlbnQodm0uJHBhcmVudCk6dm19KHRoaXMpLHRyYW5zZmVyPXBhbmVsLiRwYXJlbnR8fHBhbmVsO3JldHVybiBwYW5lbC5yZW5kZXJDb250ZW50P3BhbmVsLnJlbmRlckNvbnRlbnQoaCx0aGlzLm9wdGlvbik6dHJhbnNmZXIuJHNjb3BlZFNsb3RzLmRlZmF1bHQ/dHJhbnNmZXIuJHNjb3BlZFNsb3RzLmRlZmF1bHQoe29wdGlvbjp0aGlzLm9wdGlvbn0pOmgoInNwYW4iLFt0aGlzLm9wdGlvbltwYW5lbC5sYWJlbFByb3BdfHx0aGlzLm9wdGlvbltwYW5lbC5rZXlQcm9wXV0pfX19LHByb3BzOntkYXRhOnt0eXBlOkFycmF5LGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm5bXX19LHJlbmRlckNvbnRlbnQ6RnVuY3Rpb24scGxhY2Vob2xkZXI6U3RyaW5nLHRpdGxlOlN0cmluZyxmaWx0ZXJhYmxlOkJvb2xlYW4sZm9ybWF0Ok9iamVjdCxmaWx0ZXJNZXRob2Q6RnVuY3Rpb24sZGVmYXVsdENoZWNrZWQ6QXJyYXkscHJvcHM6T2JqZWN0fSxkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue2NoZWNrZWQ6W10sYWxsQ2hlY2tlZDohMSxxdWVyeToiIixpbnB1dEhvdmVyOiExLGNoZWNrQ2hhbmdlQnlVc2VyOiEwfX0sd2F0Y2g6e2NoZWNrZWQ6ZnVuY3Rpb24odmFsLG9sZFZhbCl7aWYodGhpcy51cGRhdGVBbGxDaGVja2VkKCksdGhpcy5jaGVja0NoYW5nZUJ5VXNlcil7dmFyIG1vdmVkS2V5cz12YWwuY29uY2F0KG9sZFZhbCkuZmlsdGVyKGZ1bmN0aW9uKHYpe3JldHVybi0xPT09dmFsLmluZGV4T2Yodil8fC0xPT09b2xkVmFsLmluZGV4T2Yodil9KTt0aGlzLiRlbWl0KCJjaGVja2VkLWNoYW5nZSIsdmFsLG1vdmVkS2V5cyl9ZWxzZSB0aGlzLiRlbWl0KCJjaGVja2VkLWNoYW5nZSIsdmFsKSx0aGlzLmNoZWNrQ2hhbmdlQnlVc2VyPSEwfSxkYXRhOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXMsY2hlY2tlZD1bXSxmaWx0ZXJlZERhdGFLZXlzPXRoaXMuZmlsdGVyZWREYXRhLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbVtfdGhpcy5rZXlQcm9wXX0pO3RoaXMuY2hlY2tlZC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pey0xPGZpbHRlcmVkRGF0YUtleXMuaW5kZXhPZihpdGVtKSYmY2hlY2tlZC5wdXNoKGl0ZW0pfSksdGhpcy5jaGVja0NoYW5nZUJ5VXNlcj0hMSx0aGlzLmNoZWNrZWQ9Y2hlY2tlZH0sY2hlY2thYmxlRGF0YTpmdW5jdGlvbigpe3RoaXMudXBkYXRlQWxsQ2hlY2tlZCgpfSxkZWZhdWx0Q2hlY2tlZDp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odmFsLG9sZFZhbCl7dmFyIF90aGlzMj10aGlzO2lmKCFvbGRWYWx8fHZhbC5sZW5ndGghPT1vbGRWYWwubGVuZ3RofHwhdmFsLmV2ZXJ5KGZ1bmN0aW9uKGl0ZW0pe3JldHVybi0xPG9sZFZhbC5pbmRleE9mKGl0ZW0pfSkpe3ZhciBjaGVja2VkPVtdLGNoZWNrYWJsZURhdGFLZXlzPXRoaXMuY2hlY2thYmxlRGF0YS5tYXAoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW1bX3RoaXMyLmtleVByb3BdfSk7dmFsLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7LTE8Y2hlY2thYmxlRGF0YUtleXMuaW5kZXhPZihpdGVtKSYmY2hlY2tlZC5wdXNoKGl0ZW0pfSksdGhpcy5jaGVja0NoYW5nZUJ5VXNlcj0hMSx0aGlzLmNoZWNrZWQ9Y2hlY2tlZH19fX0sY29tcHV0ZWQ6e2ZpbHRlcmVkRGF0YTpmdW5jdGlvbigpe3ZhciBfdGhpczM9dGhpcztyZXR1cm4gdGhpcy5kYXRhLmZpbHRlcihmdW5jdGlvbihpdGVtKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgX3RoaXMzLmZpbHRlck1ldGhvZD9fdGhpczMuZmlsdGVyTWV0aG9kKF90aGlzMy5xdWVyeSxpdGVtKTotMTwoaXRlbVtfdGhpczMubGFiZWxQcm9wXXx8aXRlbVtfdGhpczMua2V5UHJvcF0udG9TdHJpbmcoKSkudG9Mb3dlckNhc2UoKS5pbmRleE9mKF90aGlzMy5xdWVyeS50b0xvd2VyQ2FzZSgpKX0pfSxjaGVja2FibGVEYXRhOmZ1bmN0aW9uKCl7dmFyIF90aGlzND10aGlzO3JldHVybiB0aGlzLmZpbHRlcmVkRGF0YS5maWx0ZXIoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIWl0ZW1bX3RoaXM0LmRpc2FibGVkUHJvcF19KX0sY2hlY2tlZFN1bW1hcnk6ZnVuY3Rpb24oKXt2YXIgY2hlY2tlZExlbmd0aD10aGlzLmNoZWNrZWQubGVuZ3RoLGRhdGFMZW5ndGg9dGhpcy5kYXRhLmxlbmd0aCxfZm9ybWF0PXRoaXMuZm9ybWF0LG5vQ2hlY2tlZD1fZm9ybWF0Lm5vQ2hlY2tlZCxoYXNDaGVja2VkPV9mb3JtYXQuaGFzQ2hlY2tlZDtyZXR1cm4gbm9DaGVja2VkJiZoYXNDaGVja2VkPzA8Y2hlY2tlZExlbmd0aD9oYXNDaGVja2VkLnJlcGxhY2UoL1wke2NoZWNrZWR9L2csY2hlY2tlZExlbmd0aCkucmVwbGFjZSgvXCR7dG90YWx9L2csZGF0YUxlbmd0aCk6bm9DaGVja2VkLnJlcGxhY2UoL1wke3RvdGFsfS9nLGRhdGFMZW5ndGgpOmNoZWNrZWRMZW5ndGgrIi8iK2RhdGFMZW5ndGh9LGlzSW5kZXRlcm1pbmF0ZTpmdW5jdGlvbigpe3ZhciBjaGVja2VkTGVuZ3RoPXRoaXMuY2hlY2tlZC5sZW5ndGg7cmV0dXJuIDA8Y2hlY2tlZExlbmd0aCYmY2hlY2tlZExlbmd0aDx0aGlzLmNoZWNrYWJsZURhdGEubGVuZ3RofSxoYXNOb01hdGNoOmZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5xdWVyeS5sZW5ndGgmJjA9PT10aGlzLmZpbHRlcmVkRGF0YS5sZW5ndGh9LGlucHV0SWNvbjpmdW5jdGlvbigpe3JldHVybiAwPHRoaXMucXVlcnkubGVuZ3RoJiZ0aGlzLmlucHV0SG92ZXI/ImNpcmNsZS1jbG9zZSI6InNlYXJjaCJ9LGxhYmVsUHJvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BzLmxhYmVsfHwibGFiZWwifSxrZXlQcm9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcHMua2V5fHwia2V5In0sZGlzYWJsZWRQcm9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcHMuZGlzYWJsZWR8fCJkaXNhYmxlZCJ9LGhhc0Zvb3RlcjpmdW5jdGlvbigpe3JldHVybiEhdGhpcy4kc2xvdHMuZGVmYXVsdH19LG1ldGhvZHM6e3VwZGF0ZUFsbENoZWNrZWQ6ZnVuY3Rpb24oKXt2YXIgX3RoaXM1PXRoaXMsY2hlY2thYmxlRGF0YUtleXM9dGhpcy5jaGVja2FibGVEYXRhLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbVtfdGhpczUua2V5UHJvcF19KTt0aGlzLmFsbENoZWNrZWQ9MDxjaGVja2FibGVEYXRhS2V5cy5sZW5ndGgmJmNoZWNrYWJsZURhdGFLZXlzLmV2ZXJ5KGZ1bmN0aW9uKGl0ZW0pe3JldHVybi0xPF90aGlzNS5jaGVja2VkLmluZGV4T2YoaXRlbSl9KX0saGFuZGxlQWxsQ2hlY2tlZENoYW5nZTpmdW5jdGlvbih2YWx1ZSl7dmFyIF90aGlzNj10aGlzO3RoaXMuY2hlY2tlZD12YWx1ZT90aGlzLmNoZWNrYWJsZURhdGEubWFwKGZ1bmN0aW9uKGl0ZW0pe3JldHVybiBpdGVtW190aGlzNi5rZXlQcm9wXX0pOltdfSxjbGVhclF1ZXJ5OmZ1bmN0aW9uKCl7ImNpcmNsZS1jbG9zZSI9PT10aGlzLmlucHV0SWNvbiYmKHRoaXMucXVlcnk9IiIpfX19LHRyYW5zZmVyX3BhbmVsdnVlX3R5cGVfdGVtcGxhdGVfaWRfMmRkYWI4YmRfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTt0cmFuc2Zlcl9wYW5lbF9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3RyYW5zZmVyL3NyYy90cmFuc2Zlci1wYW5lbC52dWUiO3ZhciB0cmFuc2Zlcl9wYW5lbD10cmFuc2Zlcl9wYW5lbF9jb21wb25lbnQuZXhwb3J0cyx0cmFuc2Zlcl9zcmNfbWFpbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFRyYW5zZmVyIixtaXhpbnM6W2VtaXR0ZXJfZGVmYXVsdC5hLGxvY2FsZV9kZWZhdWx0LmEsbWlncmF0aW5nX2RlZmF1bHQuYV0sY29tcG9uZW50czp7VHJhbnNmZXJQYW5lbDp0cmFuc2Zlcl9wYW5lbCxFbEJ1dHRvbjpidXR0b25fZGVmYXVsdC5hfSxwcm9wczp7ZGF0YTp7dHlwZTpBcnJheSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSx0aXRsZXM6e3R5cGU6QXJyYXksZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybltdfX0sYnV0dG9uVGV4dHM6e3R5cGU6QXJyYXksZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybltdfX0sZmlsdGVyUGxhY2Vob2xkZXI6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IiJ9LGZpbHRlck1ldGhvZDpGdW5jdGlvbixsZWZ0RGVmYXVsdENoZWNrZWQ6e3R5cGU6QXJyYXksZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybltdfX0scmlnaHREZWZhdWx0Q2hlY2tlZDp7dHlwZTpBcnJheSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSxyZW5kZXJDb250ZW50OkZ1bmN0aW9uLHZhbHVlOnt0eXBlOkFycmF5LGRlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm5bXX19LGZvcm1hdDp7dHlwZTpPYmplY3QsZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybnt9fX0sZmlsdGVyYWJsZTpCb29sZWFuLHByb3BzOnt0eXBlOk9iamVjdCxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJue2xhYmVsOiJsYWJlbCIsa2V5OiJrZXkiLGRpc2FibGVkOiJkaXNhYmxlZCJ9fX0sdGFyZ2V0T3JkZXI6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6Im9yaWdpbmFsIn19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57bGVmdENoZWNrZWQ6W10scmlnaHRDaGVja2VkOltdfX0sY29tcHV0ZWQ6e2RhdGFPYmo6ZnVuY3Rpb24oKXt2YXIga2V5PXRoaXMucHJvcHMua2V5O3JldHVybiB0aGlzLmRhdGEucmVkdWNlKGZ1bmN0aW9uKG8sY3VyKXtyZXR1cm4ob1tjdXJba2V5XV09Y3VyKSYmb30se30pfSxzb3VyY2VEYXRhOmZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXM7cmV0dXJuIHRoaXMuZGF0YS5maWx0ZXIoZnVuY3Rpb24oaXRlbSl7cmV0dXJuLTE9PT1fdGhpcy52YWx1ZS5pbmRleE9mKGl0ZW1bX3RoaXMucHJvcHMua2V5XSl9KX0sdGFyZ2V0RGF0YTpmdW5jdGlvbigpe3ZhciBfdGhpczI9dGhpcztyZXR1cm4ib3JpZ2luYWwiPT09dGhpcy50YXJnZXRPcmRlcj90aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pe3JldHVybi0xPF90aGlzMi52YWx1ZS5pbmRleE9mKGl0ZW1bX3RoaXMyLnByb3BzLmtleV0pfSk6dGhpcy52YWx1ZS5yZWR1Y2UoZnVuY3Rpb24oYXJyLGN1cil7dmFyIHZhbD1fdGhpczIuZGF0YU9ialtjdXJdO3JldHVybiB2YWwmJmFyci5wdXNoKHZhbCksYXJyfSxbXSl9LGhhc0J1dHRvblRleHRzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT10aGlzLmJ1dHRvblRleHRzLmxlbmd0aH19LHdhdGNoOnt2YWx1ZTpmdW5jdGlvbih2YWwpe3RoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmNoYW5nZSIsdmFsKX19LG1ldGhvZHM6e2dldE1pZ3JhdGluZ0NvbmZpZzpmdW5jdGlvbigpe3JldHVybntwcm9wczp7ImZvb3Rlci1mb3JtYXQiOiJmb290ZXItZm9ybWF0IGlzIHJlbmFtZWQgdG8gZm9ybWF0LiJ9fX0sb25Tb3VyY2VDaGVja2VkQ2hhbmdlOmZ1bmN0aW9uKHZhbCxtb3ZlZEtleXMpe3RoaXMubGVmdENoZWNrZWQ9dmFsLHZvaWQgMCE9PW1vdmVkS2V5cyYmdGhpcy4kZW1pdCgibGVmdC1jaGVjay1jaGFuZ2UiLHZhbCxtb3ZlZEtleXMpfSxvblRhcmdldENoZWNrZWRDaGFuZ2U6ZnVuY3Rpb24odmFsLG1vdmVkS2V5cyl7dGhpcy5yaWdodENoZWNrZWQ9dmFsLHZvaWQgMCE9PW1vdmVkS2V5cyYmdGhpcy4kZW1pdCgicmlnaHQtY2hlY2stY2hhbmdlIix2YWwsbW92ZWRLZXlzKX0sYWRkVG9MZWZ0OmZ1bmN0aW9uKCl7dmFyIGN1cnJlbnRWYWx1ZT10aGlzLnZhbHVlLnNsaWNlKCk7dGhpcy5yaWdodENoZWNrZWQuZm9yRWFjaChmdW5jdGlvbihpdGVtKXt2YXIgaW5kZXg9Y3VycmVudFZhbHVlLmluZGV4T2YoaXRlbSk7LTE8aW5kZXgmJmN1cnJlbnRWYWx1ZS5zcGxpY2UoaW5kZXgsMSl9KSx0aGlzLiRlbWl0KCJpbnB1dCIsY3VycmVudFZhbHVlKSx0aGlzLiRlbWl0KCJjaGFuZ2UiLGN1cnJlbnRWYWx1ZSwibGVmdCIsdGhpcy5yaWdodENoZWNrZWQpfSxhZGRUb1JpZ2h0OmZ1bmN0aW9uKCl7dmFyIF90aGlzMz10aGlzLGN1cnJlbnRWYWx1ZT10aGlzLnZhbHVlLnNsaWNlKCksaXRlbXNUb0JlTW92ZWQ9W10sa2V5PXRoaXMucHJvcHMua2V5O3RoaXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe3ZhciBpdGVtS2V5PWl0ZW1ba2V5XTstMTxfdGhpczMubGVmdENoZWNrZWQuaW5kZXhPZihpdGVtS2V5KSYmLTE9PT1fdGhpczMudmFsdWUuaW5kZXhPZihpdGVtS2V5KSYmaXRlbXNUb0JlTW92ZWQucHVzaChpdGVtS2V5KX0pLGN1cnJlbnRWYWx1ZT0idW5zaGlmdCI9PT10aGlzLnRhcmdldE9yZGVyP2l0ZW1zVG9CZU1vdmVkLmNvbmNhdChjdXJyZW50VmFsdWUpOmN1cnJlbnRWYWx1ZS5jb25jYXQoaXRlbXNUb0JlTW92ZWQpLHRoaXMuJGVtaXQoImlucHV0IixjdXJyZW50VmFsdWUpLHRoaXMuJGVtaXQoImNoYW5nZSIsY3VycmVudFZhbHVlLCJyaWdodCIsdGhpcy5sZWZ0Q2hlY2tlZCl9LGNsZWFyUXVlcnk6ZnVuY3Rpb24od2hpY2gpeyJsZWZ0Ij09PXdoaWNoP3RoaXMuJHJlZnMubGVmdFBhbmVsLnF1ZXJ5PSIiOiJyaWdodCI9PT13aGljaCYmKHRoaXMuJHJlZnMucmlnaHRQYW5lbC5xdWVyeT0iIil9fX0sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzVjNjU0ZGQ4X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7dHJhbnNmZXJfc3JjX21haW5fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy90cmFuc2Zlci9zcmMvbWFpbi52dWUiO3ZhciB0cmFuc2Zlcl9zcmNfbWFpbj10cmFuc2Zlcl9zcmNfbWFpbl9jb21wb25lbnQuZXhwb3J0czt0cmFuc2Zlcl9zcmNfbWFpbi5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudCh0cmFuc2Zlcl9zcmNfbWFpbi5uYW1lLHRyYW5zZmVyX3NyY19tYWluKX07dmFyIHRyYW5zZmVyPXRyYW5zZmVyX3NyY19tYWluLG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF81YmYxODFkNF9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudDtyZXR1cm4odGhpcy5fc2VsZi5fY3x8X2gpKCJzZWN0aW9uIix7c3RhdGljQ2xhc3M6ImVsLWNvbnRhaW5lciIsY2xhc3M6eyJpcy12ZXJ0aWNhbCI6dGhpcy5pc1ZlcnRpY2FsfX0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMil9O21haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF81YmYxODFkNF9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgY29udGFpbmVyX3NyY19tYWluX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsQ29udGFpbmVyIixjb21wb25lbnROYW1lOiJFbENvbnRhaW5lciIscHJvcHM6e2RpcmVjdGlvbjpTdHJpbmd9LGNvbXB1dGVkOntpc1ZlcnRpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuInZlcnRpY2FsIj09PXRoaXMuZGlyZWN0aW9ufHwiaG9yaXpvbnRhbCIhPT10aGlzLmRpcmVjdGlvbiYmKCEoIXRoaXMuJHNsb3RzfHwhdGhpcy4kc2xvdHMuZGVmYXVsdCkmJnRoaXMuJHNsb3RzLmRlZmF1bHQuc29tZShmdW5jdGlvbih2bm9kZSl7dmFyIHRhZz12bm9kZS5jb21wb25lbnRPcHRpb25zJiZ2bm9kZS5jb21wb25lbnRPcHRpb25zLnRhZztyZXR1cm4iZWwtaGVhZGVyIj09PXRhZ3x8ImVsLWZvb3RlciI9PT10YWd9KSl9fX0sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzViZjE4MWQ0X3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29udGFpbmVyX3NyY19tYWluX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvY29udGFpbmVyL3NyYy9tYWluLnZ1ZSI7dmFyIGNvbnRhaW5lcl9zcmNfbWFpbj1jb250YWluZXJfc3JjX21haW5fY29tcG9uZW50LmV4cG9ydHM7Y29udGFpbmVyX3NyY19tYWluLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGNvbnRhaW5lcl9zcmNfbWFpbi5uYW1lLGNvbnRhaW5lcl9zcmNfbWFpbil9O3ZhciBjb250YWluZXI9Y29udGFpbmVyX3NyY19tYWluLG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF8yYjI5NmFiMl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudDtyZXR1cm4odGhpcy5fc2VsZi5fY3x8X2gpKCJoZWFkZXIiLHtzdGF0aWNDbGFzczoiZWwtaGVhZGVyIixzdHlsZTp7aGVpZ2h0OnRoaXMuaGVpZ2h0fX0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMil9O21haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF8yYjI5NmFiMl9yZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgaGVhZGVyX3NyY19tYWluX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsSGVhZGVyIixjb21wb25lbnROYW1lOiJFbEhlYWRlciIscHJvcHM6e2hlaWdodDp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiNjBweCJ9fX0sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzJiMjk2YWIyX3JlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7aGVhZGVyX3NyY19tYWluX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvaGVhZGVyL3NyYy9tYWluLnZ1ZSI7dmFyIGhlYWRlcl9zcmNfbWFpbj1oZWFkZXJfc3JjX21haW5fY29tcG9uZW50LmV4cG9ydHM7aGVhZGVyX3NyY19tYWluLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGhlYWRlcl9zcmNfbWFpbi5uYW1lLGhlYWRlcl9zcmNfbWFpbil9O3ZhciBoZWFkZXI9aGVhZGVyX3NyY19tYWluLG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF8wMzQxMWRiZl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudDtyZXR1cm4odGhpcy5fc2VsZi5fY3x8X2gpKCJhc2lkZSIse3N0YXRpY0NsYXNzOiJlbC1hc2lkZSIsc3R5bGU6e3dpZHRoOnRoaXMud2lkdGh9fSxbdGhpcy5fdCgiZGVmYXVsdCIpXSwyKX07bWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzAzNDExZGJmX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBhc2lkZV9zcmNfbWFpbl9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbEFzaWRlIixjb21wb25lbnROYW1lOiJFbEFzaWRlIixwcm9wczp7d2lkdGg6e3R5cGU6U3RyaW5nLGRlZmF1bHQ6IjMwMHB4In19fSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfMDM0MTFkYmZfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTthc2lkZV9zcmNfbWFpbl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL2FzaWRlL3NyYy9tYWluLnZ1ZSI7dmFyIGFzaWRlX3NyY19tYWluPWFzaWRlX3NyY19tYWluX2NvbXBvbmVudC5leHBvcnRzO2FzaWRlX3NyY19tYWluLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGFzaWRlX3NyY19tYWluLm5hbWUsYXNpZGVfc3JjX21haW4pfTt2YXIgYXNpZGU9YXNpZGVfc3JjX21haW4sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzJhM2E3NDA2X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoIm1haW4iLHtzdGF0aWNDbGFzczoiZWwtbWFpbiJ9LFt0aGlzLl90KCJkZWZhdWx0IildLDIpfTttYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfMmEzYTc0MDZfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIG1haW5fc3JjX21haW5fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxNYWluIixjb21wb25lbnROYW1lOiJFbE1haW4ifSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfMmEzYTc0MDZfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTttYWluX3NyY19tYWluX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvbWFpbi9zcmMvbWFpbi52dWUiO3ZhciBtYWluX3NyY19tYWluPW1haW5fc3JjX21haW5fY29tcG9uZW50LmV4cG9ydHM7bWFpbl9zcmNfbWFpbi5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChtYWluX3NyY19tYWluLm5hbWUsbWFpbl9zcmNfbWFpbil9O3ZhciBwYWNrYWdlc19tYWluPW1haW5fc3JjX21haW4sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzgwMjEwMzM4X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoImZvb3RlciIse3N0YXRpY0NsYXNzOiJlbC1mb290ZXIiLHN0eWxlOntoZWlnaHQ6dGhpcy5oZWlnaHR9fSxbdGhpcy5fdCgiZGVmYXVsdCIpXSwyKX07bWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkXzgwMjEwMzM4X3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBmb290ZXJfc3JjX21haW5fY29tcG9uZW50PW5vcm1hbGl6ZUNvbXBvbmVudCh7bmFtZToiRWxGb290ZXIiLGNvbXBvbmVudE5hbWU6IkVsRm9vdGVyIixwcm9wczp7aGVpZ2h0Ont0eXBlOlN0cmluZyxkZWZhdWx0OiI2MHB4In19fSxtYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfODAyMTAzMzhfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtmb290ZXJfc3JjX21haW5fY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9mb290ZXIvc3JjL21haW4udnVlIjt2YXIgZm9vdGVyX3NyY19tYWluPWZvb3Rlcl9zcmNfbWFpbl9jb21wb25lbnQuZXhwb3J0cztmb290ZXJfc3JjX21haW4uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoZm9vdGVyX3NyY19tYWluLm5hbWUsZm9vdGVyX3NyY19tYWluKX07dmFyIGZvb3Rlcj1mb290ZXJfc3JjX21haW4sbWFpbnZ1ZV90eXBlX3RlbXBsYXRlX2lkX2VmMDcwZjA0X3JlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoInVsIix7c3RhdGljQ2xhc3M6ImVsLXRpbWVsaW5lIixjbGFzczp7ImlzLXJldmVyc2UiOnRoaXMucmV2ZXJzZX19LFt0aGlzLl90KCJkZWZhdWx0IildLDIpfTttYWludnVlX3R5cGVfdGVtcGxhdGVfaWRfZWYwNzBmMDRfcmVuZGVyLl93aXRoU3RyaXBwZWQ9ITA7dmFyIHRpbWVsaW5lX3NyY19tYWluX2NvbXBvbmVudD1ub3JtYWxpemVDb21wb25lbnQoe25hbWU6IkVsVGltZWxpbmUiLHByb3BzOntyZXZlcnNlOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX19LHByb3ZpZGU6ZnVuY3Rpb24oKXtyZXR1cm57dGltZWxpbmU6dGhpc319LHdhdGNoOntyZXZlcnNlOntoYW5kbGVyOmZ1bmN0aW9uKG5ld1ZhbCl7bmV3VmFsJiYodGhpcy4kc2xvdHMuZGVmYXVsdD1bXS5jb25jYXQodGhpcy4kc2xvdHMuZGVmYXVsdCkucmV2ZXJzZSgpKX0saW1tZWRpYXRlOiEwfX19LG1haW52dWVfdHlwZV90ZW1wbGF0ZV9pZF9lZjA3MGYwNF9yZW5kZXIsW10sITEsbnVsbCxudWxsLG51bGwpO3RpbWVsaW5lX3NyY19tYWluX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvdGltZWxpbmUvc3JjL21haW4udnVlIjt2YXIgdGltZWxpbmVfc3JjX21haW49dGltZWxpbmVfc3JjX21haW5fY29tcG9uZW50LmV4cG9ydHM7dGltZWxpbmVfc3JjX21haW4uaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQodGltZWxpbmVfc3JjX21haW4ubmFtZSx0aW1lbGluZV9zcmNfbWFpbil9O3ZhciB0aW1lbGluZT10aW1lbGluZV9zcmNfbWFpbixpdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfNjFhNjllNTBfcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIF92bT10aGlzLF9oPV92bS4kY3JlYXRlRWxlbWVudCxfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygibGkiLHtzdGF0aWNDbGFzczoiZWwtdGltZWxpbmUtaXRlbSJ9LFtfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRpbWVsaW5lLWl0ZW1fX3RhaWwifSksX3ZtLiRzbG90cy5kb3Q/X3ZtLl9lKCk6X2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC10aW1lbGluZS1pdGVtX19ub2RlIixjbGFzczpbImVsLXRpbWVsaW5lLWl0ZW1fX25vZGUtLSIrKF92bS5zaXplfHwiIiksImVsLXRpbWVsaW5lLWl0ZW1fX25vZGUtLSIrKF92bS50eXBlfHwiIildLHN0eWxlOntiYWNrZ3JvdW5kQ29sb3I6X3ZtLmNvbG9yfX0sW192bS5pY29uP19jKCJpIix7c3RhdGljQ2xhc3M6ImVsLXRpbWVsaW5lLWl0ZW1fX2ljb24iLGNsYXNzOl92bS5pY29ufSk6X3ZtLl9lKCldKSxfdm0uJHNsb3RzLmRvdD9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRpbWVsaW5lLWl0ZW1fX2RvdCJ9LFtfdm0uX3QoImRvdCIpXSwyKTpfdm0uX2UoKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRpbWVsaW5lLWl0ZW1fX3dyYXBwZXIifSxbX3ZtLmhpZGVUaW1lc3RhbXB8fCJ0b3AiIT09X3ZtLnBsYWNlbWVudD9fdm0uX2UoKTpfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRpbWVsaW5lLWl0ZW1fX3RpbWVzdGFtcCBpcy10b3AifSxbX3ZtLl92KCJcbiAgICAgICIrX3ZtLl9zKF92bS50aW1lc3RhbXApKyJcbiAgICAiKV0pLF9jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtdGltZWxpbmUtaXRlbV9fY29udGVudCJ9LFtfdm0uX3QoImRlZmF1bHQiKV0sMiksX3ZtLmhpZGVUaW1lc3RhbXB8fCJib3R0b20iIT09X3ZtLnBsYWNlbWVudD9fdm0uX2UoKTpfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXRpbWVsaW5lLWl0ZW1fX3RpbWVzdGFtcCBpcy1ib3R0b20ifSxbX3ZtLl92KCJcbiAgICAgICIrX3ZtLl9zKF92bS50aW1lc3RhbXApKyJcbiAgICAiKV0pXSldKX07aXRlbXZ1ZV90eXBlX3RlbXBsYXRlX2lkXzYxYTY5ZTUwX3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBzcmNfaXRlbV9jb21wb25lbnQ9bm9ybWFsaXplQ29tcG9uZW50KHtuYW1lOiJFbFRpbWVsaW5lSXRlbSIsaW5qZWN0OlsidGltZWxpbmUiXSxwcm9wczp7dGltZXN0YW1wOlN0cmluZyxoaWRlVGltZXN0YW1wOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX0scGxhY2VtZW50Ont0eXBlOlN0cmluZyxkZWZhdWx0OiJib3R0b20ifSx0eXBlOlN0cmluZyxjb2xvcjpTdHJpbmcsc2l6ZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoibm9ybWFsIn0saWNvbjpTdHJpbmd9fSxpdGVtdnVlX3R5cGVfdGVtcGxhdGVfaWRfNjFhNjllNTBfcmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtzcmNfaXRlbV9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3RpbWVsaW5lL3NyYy9pdGVtLnZ1ZSI7dmFyIHRpbWVsaW5lX3NyY19pdGVtPXNyY19pdGVtX2NvbXBvbmVudC5leHBvcnRzO3RpbWVsaW5lX3NyY19pdGVtLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KHRpbWVsaW5lX3NyY19pdGVtLm5hbWUsdGltZWxpbmVfc3JjX2l0ZW0pfTt2YXIgdGltZWxpbmVfaXRlbT10aW1lbGluZV9zcmNfaXRlbSxjb21wb25lbnRzPVtwYWNrYWdlc19wYWdpbmF0aW9uLGRpYWxvZyxwYWNrYWdlc19hdXRvY29tcGxldGUscGFja2FnZXNfZHJvcGRvd24scGFja2FnZXNfZHJvcGRvd25fbWVudSxwYWNrYWdlc19kcm9wZG93bl9pdGVtLHBhY2thZ2VzX21lbnUscGFja2FnZXNfc3VibWVudSxwYWNrYWdlc19tZW51X2l0ZW0scGFja2FnZXNfbWVudV9pdGVtX2dyb3VwLHBhY2thZ2VzX2lucHV0LHBhY2thZ2VzX2lucHV0X251bWJlcixwYWNrYWdlc19yYWRpbyxwYWNrYWdlc19yYWRpb19ncm91cCxwYWNrYWdlc19yYWRpb19idXR0b24scGFja2FnZXNfY2hlY2tib3gscGFja2FnZXNfY2hlY2tib3hfYnV0dG9uLHBhY2thZ2VzX2NoZWNrYm94X2dyb3VwLHBhY2thZ2VzX3N3aXRjaCxwYWNrYWdlc19zZWxlY3QscGFja2FnZXNfb3B0aW9uLHBhY2thZ2VzX29wdGlvbl9ncm91cCxwYWNrYWdlc19idXR0b24scGFja2FnZXNfYnV0dG9uX2dyb3VwLHBhY2thZ2VzX3RhYmxlLHBhY2thZ2VzX3RhYmxlX2NvbHVtbixwYWNrYWdlc19kYXRlX3BpY2tlcixwYWNrYWdlc190aW1lX3NlbGVjdCxwYWNrYWdlc190aW1lX3BpY2tlcixwb3BvdmVyLHBhY2thZ2VzX3Rvb2x0aXAscGFja2FnZXNfYnJlYWRjcnVtYixwYWNrYWdlc19icmVhZGNydW1iX2l0ZW0scGFja2FnZXNfZm9ybSxwYWNrYWdlc19mb3JtX2l0ZW0scGFja2FnZXNfdGFicyxwYWNrYWdlc190YWJfcGFuZSxwYWNrYWdlc190YWcscGFja2FnZXNfdHJlZSxwYWNrYWdlc19hbGVydCxzbGlkZXIscGFja2FnZXNfaWNvbixwYWNrYWdlc19yb3cscGFja2FnZXNfY29sLHBhY2thZ2VzX3VwbG9hZCxwYWNrYWdlc19wcm9ncmVzcyxwYWNrYWdlc19zcGlubmVyLGJhZGdlLGNhcmQscmF0ZSxwYWNrYWdlc19zdGVwcyxwYWNrYWdlc19zdGVwLGNhcm91c2VsLHNjcm9sbGJhcixjYXJvdXNlbF9pdGVtLHBhY2thZ2VzX2NvbGxhcHNlLHBhY2thZ2VzX2NvbGxhcHNlX2l0ZW0sY2FzY2FkZXIsY29sb3JfcGlja2VyLHRyYW5zZmVyLGNvbnRhaW5lcixoZWFkZXIsYXNpZGUscGFja2FnZXNfbWFpbixmb290ZXIsdGltZWxpbmUsdGltZWxpbmVfaXRlbSxjb2xsYXBzZV90cmFuc2l0aW9uX2RlZmF1bHQuYV0sc3JjX2luc3RhbGw9ZnVuY3Rpb24oVnVlKXt2YXIgb3B0cz0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307bGliX2xvY2FsZV9kZWZhdWx0LmEudXNlKG9wdHMubG9jYWxlKSxsaWJfbG9jYWxlX2RlZmF1bHQuYS5pMThuKG9wdHMuaTE4biksY29tcG9uZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGNvbXBvbmVudCl7VnVlLmNvbXBvbmVudChjb21wb25lbnQubmFtZSxjb21wb25lbnQpfSksVnVlLnVzZShwYWNrYWdlc19sb2FkaW5nLmRpcmVjdGl2ZSksVnVlLnByb3RvdHlwZS4kRUxFTUVOVD17c2l6ZTpvcHRzLnNpemV8fCIiLHpJbmRleDpvcHRzLnpJbmRleHx8MmUzfSxWdWUucHJvdG90eXBlLiRsb2FkaW5nPXBhY2thZ2VzX2xvYWRpbmcuc2VydmljZSxWdWUucHJvdG90eXBlLiRtc2dib3g9bWVzc2FnZV9ib3gsVnVlLnByb3RvdHlwZS4kYWxlcnQ9bWVzc2FnZV9ib3guYWxlcnQsVnVlLnByb3RvdHlwZS4kY29uZmlybT1tZXNzYWdlX2JveC5jb25maXJtLFZ1ZS5wcm90b3R5cGUuJHByb21wdD1tZXNzYWdlX2JveC5wcm9tcHQsVnVlLnByb3RvdHlwZS4kbm90aWZ5PW5vdGlmaWNhdGlvbixWdWUucHJvdG90eXBlLiRtZXNzYWdlPXBhY2thZ2VzX21lc3NhZ2V9OyJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuVnVlJiZzcmNfaW5zdGFsbCh3aW5kb3cuVnVlKTtfX3dlYnBhY2tfZXhwb3J0c19fLmRlZmF1bHQ9e3ZlcnNpb246IjIuNi4xIixsb2NhbGU6bGliX2xvY2FsZV9kZWZhdWx0LmEudXNlLGkxOG46bGliX2xvY2FsZV9kZWZhdWx0LmEuaTE4bixpbnN0YWxsOnNyY19pbnN0YWxsLENvbGxhcHNlVHJhbnNpdGlvbjpjb2xsYXBzZV90cmFuc2l0aW9uX2RlZmF1bHQuYSxMb2FkaW5nOnBhY2thZ2VzX2xvYWRpbmcsUGFnaW5hdGlvbjpwYWNrYWdlc19wYWdpbmF0aW9uLERpYWxvZzpkaWFsb2csQXV0b2NvbXBsZXRlOnBhY2thZ2VzX2F1dG9jb21wbGV0ZSxEcm9wZG93bjpwYWNrYWdlc19kcm9wZG93bixEcm9wZG93bk1lbnU6cGFja2FnZXNfZHJvcGRvd25fbWVudSxEcm9wZG93bkl0ZW06cGFja2FnZXNfZHJvcGRvd25faXRlbSxNZW51OnBhY2thZ2VzX21lbnUsU3VibWVudTpwYWNrYWdlc19zdWJtZW51LE1lbnVJdGVtOnBhY2thZ2VzX21lbnVfaXRlbSxNZW51SXRlbUdyb3VwOnBhY2thZ2VzX21lbnVfaXRlbV9ncm91cCxJbnB1dDpwYWNrYWdlc19pbnB1dCxJbnB1dE51bWJlcjpwYWNrYWdlc19pbnB1dF9udW1iZXIsUmFkaW86cGFja2FnZXNfcmFkaW8sUmFkaW9Hcm91cDpwYWNrYWdlc19yYWRpb19ncm91cCxSYWRpb0J1dHRvbjpwYWNrYWdlc19yYWRpb19idXR0b24sQ2hlY2tib3g6cGFja2FnZXNfY2hlY2tib3gsQ2hlY2tib3hCdXR0b246cGFja2FnZXNfY2hlY2tib3hfYnV0dG9uLENoZWNrYm94R3JvdXA6cGFja2FnZXNfY2hlY2tib3hfZ3JvdXAsU3dpdGNoOnBhY2thZ2VzX3N3aXRjaCxTZWxlY3Q6cGFja2FnZXNfc2VsZWN0LE9wdGlvbjpwYWNrYWdlc19vcHRpb24sT3B0aW9uR3JvdXA6cGFja2FnZXNfb3B0aW9uX2dyb3VwLEJ1dHRvbjpwYWNrYWdlc19idXR0b24sQnV0dG9uR3JvdXA6cGFja2FnZXNfYnV0dG9uX2dyb3VwLFRhYmxlOnBhY2thZ2VzX3RhYmxlLFRhYmxlQ29sdW1uOnBhY2thZ2VzX3RhYmxlX2NvbHVtbixEYXRlUGlja2VyOnBhY2thZ2VzX2RhdGVfcGlja2VyLFRpbWVTZWxlY3Q6cGFja2FnZXNfdGltZV9zZWxlY3QsVGltZVBpY2tlcjpwYWNrYWdlc190aW1lX3BpY2tlcixQb3BvdmVyOnBvcG92ZXIsVG9vbHRpcDpwYWNrYWdlc190b29sdGlwLE1lc3NhZ2VCb3g6bWVzc2FnZV9ib3gsQnJlYWRjcnVtYjpwYWNrYWdlc19icmVhZGNydW1iLEJyZWFkY3J1bWJJdGVtOnBhY2thZ2VzX2JyZWFkY3J1bWJfaXRlbSxGb3JtOnBhY2thZ2VzX2Zvcm0sRm9ybUl0ZW06cGFja2FnZXNfZm9ybV9pdGVtLFRhYnM6cGFja2FnZXNfdGFicyxUYWJQYW5lOnBhY2thZ2VzX3RhYl9wYW5lLFRhZzpwYWNrYWdlc190YWcsVHJlZTpwYWNrYWdlc190cmVlLEFsZXJ0OnBhY2thZ2VzX2FsZXJ0LE5vdGlmaWNhdGlvbjpub3RpZmljYXRpb24sU2xpZGVyOnNsaWRlcixJY29uOnBhY2thZ2VzX2ljb24sUm93OnBhY2thZ2VzX3JvdyxDb2w6cGFja2FnZXNfY29sLFVwbG9hZDpwYWNrYWdlc191cGxvYWQsUHJvZ3Jlc3M6cGFja2FnZXNfcHJvZ3Jlc3MsU3Bpbm5lcjpwYWNrYWdlc19zcGlubmVyLE1lc3NhZ2U6cGFja2FnZXNfbWVzc2FnZSxCYWRnZTpiYWRnZSxDYXJkOmNhcmQsUmF0ZTpyYXRlLFN0ZXBzOnBhY2thZ2VzX3N0ZXBzLFN0ZXA6cGFja2FnZXNfc3RlcCxDYXJvdXNlbDpjYXJvdXNlbCxTY3JvbGxiYXI6c2Nyb2xsYmFyLENhcm91c2VsSXRlbTpjYXJvdXNlbF9pdGVtLENvbGxhcHNlOnBhY2thZ2VzX2NvbGxhcHNlLENvbGxhcHNlSXRlbTpwYWNrYWdlc19jb2xsYXBzZV9pdGVtLENhc2NhZGVyOmNhc2NhZGVyLENvbG9yUGlja2VyOmNvbG9yX3BpY2tlcixUcmFuc2Zlcjp0cmFuc2ZlcixDb250YWluZXI6Y29udGFpbmVyLEhlYWRlcjpoZWFkZXIsQXNpZGU6YXNpZGUsTWFpbjpwYWNrYWdlc19tYWluLEZvb3Rlcjpmb290ZXIsVGltZWxpbmU6dGltZWxpbmUsVGltZWxpbmVJdGVtOnRpbWVsaW5lX2l0ZW19fV0pLmRlZmF1bHR9LFlXZGk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yO3ZvaWQgMD09PShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXz0iZnVuY3Rpb24iPT10eXBlb2YoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fPWZ1bmN0aW9uKCl7dmFyIHJvb3Q9d2luZG93LERFRkFVTFRTPXtwbGFjZW1lbnQ6ImJvdHRvbSIsZ3B1QWNjZWxlcmF0aW9uOiEwLG9mZnNldDowLGJvdW5kYXJpZXNFbGVtZW50OiJ2aWV3cG9ydCIsYm91bmRhcmllc1BhZGRpbmc6NSxwcmV2ZW50T3ZlcmZsb3dPcmRlcjpbImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSJdLGZsaXBCZWhhdmlvcjoiZmxpcCIsYXJyb3dFbGVtZW50OiJbeC1hcnJvd10iLGFycm93T2Zmc2V0OjAsbW9kaWZpZXJzOlsic2hpZnQiLCJvZmZzZXQiLCJwcmV2ZW50T3ZlcmZsb3ciLCJrZWVwVG9nZXRoZXIiLCJhcnJvdyIsImZsaXAiLCJhcHBseVN0eWxlIl0sbW9kaWZpZXJzSWdub3JlZDpbXSxmb3JjZUFic29sdXRlOiExfTtmdW5jdGlvbiBQb3BwZXIocmVmZXJlbmNlLHBvcHBlcixvcHRpb25zKXt0aGlzLl9yZWZlcmVuY2U9cmVmZXJlbmNlLmpxdWVyeT9yZWZlcmVuY2VbMF06cmVmZXJlbmNlLHRoaXMuc3RhdGU9e307dmFyIGlzTm90RGVmaW5lZD1udWxsPT1wb3BwZXIsaXNDb25maWc9cG9wcGVyJiYiW29iamVjdCBPYmplY3RdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwb3BwZXIpO3JldHVybiB0aGlzLl9wb3BwZXI9aXNOb3REZWZpbmVkfHxpc0NvbmZpZz90aGlzLnBhcnNlKGlzQ29uZmlnP3BvcHBlcjp7fSk6cG9wcGVyLmpxdWVyeT9wb3BwZXJbMF06cG9wcGVyLHRoaXMuX29wdGlvbnM9T2JqZWN0LmFzc2lnbih7fSxERUZBVUxUUyxvcHRpb25zKSx0aGlzLl9vcHRpb25zLm1vZGlmaWVycz10aGlzLl9vcHRpb25zLm1vZGlmaWVycy5tYXAoZnVuY3Rpb24obW9kaWZpZXIpe2lmKC0xPT09dGhpcy5fb3B0aW9ucy5tb2RpZmllcnNJZ25vcmVkLmluZGV4T2YobW9kaWZpZXIpKXJldHVybiJhcHBseVN0eWxlIj09PW1vZGlmaWVyJiZ0aGlzLl9wb3BwZXIuc2V0QXR0cmlidXRlKCJ4LXBsYWNlbWVudCIsdGhpcy5fb3B0aW9ucy5wbGFjZW1lbnQpLHRoaXMubW9kaWZpZXJzW21vZGlmaWVyXXx8bW9kaWZpZXJ9LmJpbmQodGhpcykpLHRoaXMuc3RhdGUucG9zaXRpb249dGhpcy5fZ2V0UG9zaXRpb24odGhpcy5fcG9wcGVyLHRoaXMuX3JlZmVyZW5jZSksc2V0U3R5bGUodGhpcy5fcG9wcGVyLHtwb3NpdGlvbjp0aGlzLnN0YXRlLnBvc2l0aW9uLHRvcDowfSksdGhpcy51cGRhdGUoKSx0aGlzLl9zZXR1cEV2ZW50TGlzdGVuZXJzKCksdGhpc31mdW5jdGlvbiBnZXRPdXRlclNpemVzKGVsZW1lbnQpe3ZhciBfZGlzcGxheT1lbGVtZW50LnN0eWxlLmRpc3BsYXksX3Zpc2liaWxpdHk9ZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5O2VsZW1lbnQuc3R5bGUuZGlzcGxheT0iYmxvY2siLGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIixlbGVtZW50Lm9mZnNldFdpZHRoO3ZhciBzdHlsZXM9cm9vdC5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLHg9cGFyc2VGbG9hdChzdHlsZXMubWFyZ2luVG9wKStwYXJzZUZsb2F0KHN0eWxlcy5tYXJnaW5Cb3R0b20pLHk9cGFyc2VGbG9hdChzdHlsZXMubWFyZ2luTGVmdCkrcGFyc2VGbG9hdChzdHlsZXMubWFyZ2luUmlnaHQpLHJlc3VsdD17d2lkdGg6ZWxlbWVudC5vZmZzZXRXaWR0aCt5LGhlaWdodDplbGVtZW50Lm9mZnNldEhlaWdodCt4fTtyZXR1cm4gZWxlbWVudC5zdHlsZS5kaXNwbGF5PV9kaXNwbGF5LGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eT1fdmlzaWJpbGl0eSxyZXN1bHR9ZnVuY3Rpb24gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocGxhY2VtZW50KXt2YXIgaGFzaD17bGVmdDoicmlnaHQiLHJpZ2h0OiJsZWZ0Iixib3R0b206InRvcCIsdG9wOiJib3R0b20ifTtyZXR1cm4gcGxhY2VtZW50LnJlcGxhY2UoL2xlZnR8cmlnaHR8Ym90dG9tfHRvcC9nLGZ1bmN0aW9uKG1hdGNoZWQpe3JldHVybiBoYXNoW21hdGNoZWRdfSl9ZnVuY3Rpb24gZ2V0UG9wcGVyQ2xpZW50UmVjdChwb3BwZXJPZmZzZXRzKXt2YXIgb2Zmc2V0cz1PYmplY3QuYXNzaWduKHt9LHBvcHBlck9mZnNldHMpO3JldHVybiBvZmZzZXRzLnJpZ2h0PW9mZnNldHMubGVmdCtvZmZzZXRzLndpZHRoLG9mZnNldHMuYm90dG9tPW9mZnNldHMudG9wK29mZnNldHMuaGVpZ2h0LG9mZnNldHN9ZnVuY3Rpb24gZ2V0QXJyYXlLZXlJbmRleChhcnIsa2V5VG9GaW5kKXt2YXIga2V5LGk9MDtmb3Ioa2V5IGluIGFycil7aWYoYXJyW2tleV09PT1rZXlUb0ZpbmQpcmV0dXJuIGk7aSsrfXJldHVybiBudWxsfWZ1bmN0aW9uIGdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShlbGVtZW50LHByb3BlcnR5KXt2YXIgY3NzPXJvb3QuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LG51bGwpO3JldHVybiBjc3NbcHJvcGVydHldfWZ1bmN0aW9uIGdldE9mZnNldFBhcmVudChlbGVtZW50KXt2YXIgb2Zmc2V0UGFyZW50PWVsZW1lbnQub2Zmc2V0UGFyZW50O3JldHVybiBvZmZzZXRQYXJlbnQhPT1yb290LmRvY3VtZW50LmJvZHkmJm9mZnNldFBhcmVudD9vZmZzZXRQYXJlbnQ6cm9vdC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9ZnVuY3Rpb24gZ2V0U2Nyb2xsUGFyZW50KGVsZW1lbnQpe3ZhciBwYXJlbnQ9ZWxlbWVudC5wYXJlbnROb2RlO3JldHVybiBwYXJlbnQ/cGFyZW50PT09cm9vdC5kb2N1bWVudD9yb290LmRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wfHxyb290LmRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdD9yb290LmRvY3VtZW50LmJvZHk6cm9vdC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ6LTEhPT1bInNjcm9sbCIsImF1dG8iXS5pbmRleE9mKGdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShwYXJlbnQsIm92ZXJmbG93IikpfHwtMSE9PVsic2Nyb2xsIiwiYXV0byJdLmluZGV4T2YoZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KHBhcmVudCwib3ZlcmZsb3cteCIpKXx8LTEhPT1bInNjcm9sbCIsImF1dG8iXS5pbmRleE9mKGdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShwYXJlbnQsIm92ZXJmbG93LXkiKSk/cGFyZW50OmdldFNjcm9sbFBhcmVudChlbGVtZW50LnBhcmVudE5vZGUpOmVsZW1lbnR9ZnVuY3Rpb24gc2V0U3R5bGUoZWxlbWVudCxzdHlsZXMpe09iamVjdC5rZXlzKHN0eWxlcykuZm9yRWFjaChmdW5jdGlvbihwcm9wKXt2YXIgbix1bml0PSIiOy0xIT09WyJ3aWR0aCIsImhlaWdodCIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdLmluZGV4T2YocHJvcCkmJiIiIT09KG49c3R5bGVzW3Byb3BdKSYmIWlzTmFOKHBhcnNlRmxvYXQobikpJiZpc0Zpbml0ZShuKSYmKHVuaXQ9InB4IiksZWxlbWVudC5zdHlsZVtwcm9wXT1zdHlsZXNbcHJvcF0rdW5pdH0pfWZ1bmN0aW9uIGdldE9mZnNldFJlY3QoZWxlbWVudCl7dmFyIGVsZW1lbnRSZWN0PXt3aWR0aDplbGVtZW50Lm9mZnNldFdpZHRoLGhlaWdodDplbGVtZW50Lm9mZnNldEhlaWdodCxsZWZ0OmVsZW1lbnQub2Zmc2V0TGVmdCx0b3A6ZWxlbWVudC5vZmZzZXRUb3B9O3JldHVybiBlbGVtZW50UmVjdC5yaWdodD1lbGVtZW50UmVjdC5sZWZ0K2VsZW1lbnRSZWN0LndpZHRoLGVsZW1lbnRSZWN0LmJvdHRvbT1lbGVtZW50UmVjdC50b3ArZWxlbWVudFJlY3QuaGVpZ2h0LGVsZW1lbnRSZWN0fWZ1bmN0aW9uIGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50KXt2YXIgcmVjdD1lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGlzSUU9LTEhPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpLHJlY3RUb3A9aXNJRSYmIkhUTUwiPT09ZWxlbWVudC50YWdOYW1lPy1lbGVtZW50LnNjcm9sbFRvcDpyZWN0LnRvcDtyZXR1cm57bGVmdDpyZWN0LmxlZnQsdG9wOnJlY3RUb3AscmlnaHQ6cmVjdC5yaWdodCxib3R0b206cmVjdC5ib3R0b20sd2lkdGg6cmVjdC5yaWdodC1yZWN0LmxlZnQsaGVpZ2h0OnJlY3QuYm90dG9tLXJlY3RUb3B9fWZ1bmN0aW9uIGdldFN1cHBvcnRlZFByb3BlcnR5TmFtZShwcm9wZXJ0eSl7Zm9yKHZhciBwcmVmaXhlcz1bIiIsIm1zIiwid2Via2l0IiwibW96IiwibyJdLGk9MDtpPHByZWZpeGVzLmxlbmd0aDtpKyspe3ZhciB0b0NoZWNrPXByZWZpeGVzW2ldP3ByZWZpeGVzW2ldK3Byb3BlcnR5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Byb3BlcnR5LnNsaWNlKDEpOnByb3BlcnR5O2lmKHZvaWQgMCE9PXJvb3QuZG9jdW1lbnQuYm9keS5zdHlsZVt0b0NoZWNrXSlyZXR1cm4gdG9DaGVja31yZXR1cm4gbnVsbH1yZXR1cm4gUG9wcGVyLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvcHBlci5yZW1vdmVBdHRyaWJ1dGUoIngtcGxhY2VtZW50IiksdGhpcy5fcG9wcGVyLnN0eWxlLmxlZnQ9IiIsdGhpcy5fcG9wcGVyLnN0eWxlLnBvc2l0aW9uPSIiLHRoaXMuX3BvcHBlci5zdHlsZS50b3A9IiIsdGhpcy5fcG9wcGVyLnN0eWxlW2dldFN1cHBvcnRlZFByb3BlcnR5TmFtZSgidHJhbnNmb3JtIildPSIiLHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCksdGhpcy5fb3B0aW9ucy5yZW1vdmVPbkRlc3Ryb3kmJnRoaXMuX3BvcHBlci5yZW1vdmUoKSx0aGlzfSxQb3BwZXIucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3ZhciBkYXRhPXtpbnN0YW5jZTp0aGlzLHN0eWxlczp7fX07ZGF0YS5wbGFjZW1lbnQ9dGhpcy5fb3B0aW9ucy5wbGFjZW1lbnQsZGF0YS5fb3JpZ2luYWxQbGFjZW1lbnQ9dGhpcy5fb3B0aW9ucy5wbGFjZW1lbnQsZGF0YS5vZmZzZXRzPXRoaXMuX2dldE9mZnNldHModGhpcy5fcG9wcGVyLHRoaXMuX3JlZmVyZW5jZSxkYXRhLnBsYWNlbWVudCksZGF0YS5ib3VuZGFyaWVzPXRoaXMuX2dldEJvdW5kYXJpZXMoZGF0YSx0aGlzLl9vcHRpb25zLmJvdW5kYXJpZXNQYWRkaW5nLHRoaXMuX29wdGlvbnMuYm91bmRhcmllc0VsZW1lbnQpLGRhdGE9dGhpcy5ydW5Nb2RpZmllcnMoZGF0YSx0aGlzLl9vcHRpb25zLm1vZGlmaWVycyksImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuc3RhdGUudXBkYXRlQ2FsbGJhY2smJnRoaXMuc3RhdGUudXBkYXRlQ2FsbGJhY2soZGF0YSl9LFBvcHBlci5wcm90b3R5cGUub25DcmVhdGU9ZnVuY3Rpb24oY2FsbGJhY2spe3JldHVybiBjYWxsYmFjayh0aGlzKSx0aGlzfSxQb3BwZXIucHJvdG90eXBlLm9uVXBkYXRlPWZ1bmN0aW9uKGNhbGxiYWNrKXtyZXR1cm4gdGhpcy5zdGF0ZS51cGRhdGVDYWxsYmFjaz1jYWxsYmFjayx0aGlzfSxQb3BwZXIucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGNvbmZpZyl7dmFyIGRlZmF1bHRDb25maWc9e3RhZ05hbWU6ImRpdiIsY2xhc3NOYW1lczpbInBvcHBlciJdLGF0dHJpYnV0ZXM6W10scGFyZW50OnJvb3QuZG9jdW1lbnQuYm9keSxjb250ZW50OiIiLGNvbnRlbnRUeXBlOiJ0ZXh0IixhcnJvd1RhZ05hbWU6ImRpdiIsYXJyb3dDbGFzc05hbWVzOlsicG9wcGVyX19hcnJvdyJdLGFycm93QXR0cmlidXRlczpbIngtYXJyb3ciXX07Y29uZmlnPU9iamVjdC5hc3NpZ24oe30sZGVmYXVsdENvbmZpZyxjb25maWcpO3ZhciBkPXJvb3QuZG9jdW1lbnQscG9wcGVyPWQuY3JlYXRlRWxlbWVudChjb25maWcudGFnTmFtZSk7aWYoYWRkQ2xhc3NOYW1lcyhwb3BwZXIsY29uZmlnLmNsYXNzTmFtZXMpLGFkZEF0dHJpYnV0ZXMocG9wcGVyLGNvbmZpZy5hdHRyaWJ1dGVzKSwibm9kZSI9PT1jb25maWcuY29udGVudFR5cGU/cG9wcGVyLmFwcGVuZENoaWxkKGNvbmZpZy5jb250ZW50LmpxdWVyeT9jb25maWcuY29udGVudFswXTpjb25maWcuY29udGVudCk6Imh0bWwiPT09Y29uZmlnLmNvbnRlbnRUeXBlP3BvcHBlci5pbm5lckhUTUw9Y29uZmlnLmNvbnRlbnQ6cG9wcGVyLnRleHRDb250ZW50PWNvbmZpZy5jb250ZW50LGNvbmZpZy5hcnJvd1RhZ05hbWUpe3ZhciBhcnJvdz1kLmNyZWF0ZUVsZW1lbnQoY29uZmlnLmFycm93VGFnTmFtZSk7YWRkQ2xhc3NOYW1lcyhhcnJvdyxjb25maWcuYXJyb3dDbGFzc05hbWVzKSxhZGRBdHRyaWJ1dGVzKGFycm93LGNvbmZpZy5hcnJvd0F0dHJpYnV0ZXMpLHBvcHBlci5hcHBlbmRDaGlsZChhcnJvdyl9dmFyIHBhcmVudD1jb25maWcucGFyZW50LmpxdWVyeT9jb25maWcucGFyZW50WzBdOmNvbmZpZy5wYXJlbnQ7aWYoInN0cmluZyI9PXR5cGVvZiBwYXJlbnQpe2lmKDE8KHBhcmVudD1kLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLnBhcmVudCkpLmxlbmd0aCYmY29uc29sZS53YXJuKCJXQVJOSU5HOiB0aGUgZ2l2ZW4gYHBhcmVudGAgcXVlcnkoIitjb25maWcucGFyZW50KyIpIG1hdGNoZWQgbW9yZSB0aGFuIG9uZSBlbGVtZW50LCB0aGUgZmlyc3Qgb25lIHdpbGwgYmUgdXNlZCIpLDA9PT1wYXJlbnQubGVuZ3RoKXRocm93IkVSUk9SOiB0aGUgZ2l2ZW4gYHBhcmVudGAgZG9lc24ndCBleGlzdHMhIjtwYXJlbnQ9cGFyZW50WzBdfXJldHVybiAxPHBhcmVudC5sZW5ndGgmJnBhcmVudCBpbnN0YW5jZW9mIEVsZW1lbnQ9PTAmJihjb25zb2xlLndhcm4oIldBUk5JTkc6IHlvdSBoYXZlIHBhc3NlZCBhcyBwYXJlbnQgYSBsaXN0IG9mIGVsZW1lbnRzLCB0aGUgZmlyc3Qgb25lIHdpbGwgYmUgdXNlZCIpLHBhcmVudD1wYXJlbnRbMF0pLHBhcmVudC5hcHBlbmRDaGlsZChwb3BwZXIpLHBvcHBlcjtmdW5jdGlvbiBhZGRDbGFzc05hbWVzKGVsZW1lbnQsY2xhc3NOYW1lcyl7Y2xhc3NOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGNsYXNzTmFtZSl7ZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSl9KX1mdW5jdGlvbiBhZGRBdHRyaWJ1dGVzKGVsZW1lbnQsYXR0cmlidXRlcyl7YXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYnV0ZSl7ZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLnNwbGl0KCI6IilbMF0sYXR0cmlidXRlLnNwbGl0KCI6IilbMV18fCIiKX0pfX0sUG9wcGVyLnByb3RvdHlwZS5fZ2V0UG9zaXRpb249ZnVuY3Rpb24ocG9wcGVyLHJlZmVyZW5jZSl7cmV0dXJuIGdldE9mZnNldFBhcmVudChyZWZlcmVuY2UpLHRoaXMuX29wdGlvbnMuZm9yY2VBYnNvbHV0ZT8iYWJzb2x1dGUiOmZ1bmN0aW9uIGlzRml4ZWQoZWxlbWVudCl7cmV0dXJuIGVsZW1lbnQhPT1yb290LmRvY3VtZW50LmJvZHkmJigiZml4ZWQiPT09Z2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KGVsZW1lbnQsInBvc2l0aW9uIil8fChlbGVtZW50LnBhcmVudE5vZGU/aXNGaXhlZChlbGVtZW50LnBhcmVudE5vZGUpOmVsZW1lbnQpKX0ocmVmZXJlbmNlKT8iZml4ZWQiOiJhYnNvbHV0ZSJ9LFBvcHBlci5wcm90b3R5cGUuX2dldE9mZnNldHM9ZnVuY3Rpb24ocG9wcGVyLHJlZmVyZW5jZSxwbGFjZW1lbnQpe3BsYWNlbWVudD1wbGFjZW1lbnQuc3BsaXQoIi0iKVswXTt2YXIgcG9wcGVyT2Zmc2V0cz17fTtwb3BwZXJPZmZzZXRzLnBvc2l0aW9uPXRoaXMuc3RhdGUucG9zaXRpb247dmFyIGlzUGFyZW50Rml4ZWQ9ImZpeGVkIj09PXBvcHBlck9mZnNldHMucG9zaXRpb24scmVmZXJlbmNlT2Zmc2V0cz1mdW5jdGlvbihlbGVtZW50LHBhcmVudCxmaXhlZCl7dmFyIGVsZW1lbnRSZWN0PWdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50KSxwYXJlbnRSZWN0PWdldEJvdW5kaW5nQ2xpZW50UmVjdChwYXJlbnQpO2lmKGZpeGVkKXt2YXIgc2Nyb2xsUGFyZW50PWdldFNjcm9sbFBhcmVudChwYXJlbnQpO3BhcmVudFJlY3QudG9wKz1zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wLHBhcmVudFJlY3QuYm90dG9tKz1zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wLHBhcmVudFJlY3QubGVmdCs9c2Nyb2xsUGFyZW50LnNjcm9sbExlZnQscGFyZW50UmVjdC5yaWdodCs9c2Nyb2xsUGFyZW50LnNjcm9sbExlZnR9cmV0dXJue3RvcDplbGVtZW50UmVjdC50b3AtcGFyZW50UmVjdC50b3AsbGVmdDplbGVtZW50UmVjdC5sZWZ0LXBhcmVudFJlY3QubGVmdCxib3R0b206ZWxlbWVudFJlY3QudG9wLXBhcmVudFJlY3QudG9wK2VsZW1lbnRSZWN0LmhlaWdodCxyaWdodDplbGVtZW50UmVjdC5sZWZ0LXBhcmVudFJlY3QubGVmdCtlbGVtZW50UmVjdC53aWR0aCx3aWR0aDplbGVtZW50UmVjdC53aWR0aCxoZWlnaHQ6ZWxlbWVudFJlY3QuaGVpZ2h0fX0ocmVmZXJlbmNlLGdldE9mZnNldFBhcmVudChwb3BwZXIpLGlzUGFyZW50Rml4ZWQpLHBvcHBlclJlY3Q9Z2V0T3V0ZXJTaXplcyhwb3BwZXIpO3JldHVybi0xIT09WyJyaWdodCIsImxlZnQiXS5pbmRleE9mKHBsYWNlbWVudCk/KHBvcHBlck9mZnNldHMudG9wPXJlZmVyZW5jZU9mZnNldHMudG9wK3JlZmVyZW5jZU9mZnNldHMuaGVpZ2h0LzItcG9wcGVyUmVjdC5oZWlnaHQvMixwb3BwZXJPZmZzZXRzLmxlZnQ9ImxlZnQiPT09cGxhY2VtZW50P3JlZmVyZW5jZU9mZnNldHMubGVmdC1wb3BwZXJSZWN0LndpZHRoOnJlZmVyZW5jZU9mZnNldHMucmlnaHQpOihwb3BwZXJPZmZzZXRzLmxlZnQ9cmVmZXJlbmNlT2Zmc2V0cy5sZWZ0K3JlZmVyZW5jZU9mZnNldHMud2lkdGgvMi1wb3BwZXJSZWN0LndpZHRoLzIscG9wcGVyT2Zmc2V0cy50b3A9InRvcCI9PT1wbGFjZW1lbnQ/cmVmZXJlbmNlT2Zmc2V0cy50b3AtcG9wcGVyUmVjdC5oZWlnaHQ6cmVmZXJlbmNlT2Zmc2V0cy5ib3R0b20pLHBvcHBlck9mZnNldHMud2lkdGg9cG9wcGVyUmVjdC53aWR0aCxwb3BwZXJPZmZzZXRzLmhlaWdodD1wb3BwZXJSZWN0LmhlaWdodCx7cG9wcGVyOnBvcHBlck9mZnNldHMscmVmZXJlbmNlOnJlZmVyZW5jZU9mZnNldHN9fSxQb3BwZXIucHJvdG90eXBlLl9zZXR1cEV2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZS51cGRhdGVCb3VuZD10aGlzLnVwZGF0ZS5iaW5kKHRoaXMpLHJvb3QuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIix0aGlzLnN0YXRlLnVwZGF0ZUJvdW5kKSwid2luZG93IiE9PXRoaXMuX29wdGlvbnMuYm91bmRhcmllc0VsZW1lbnQpe3ZhciB0YXJnZXQ9Z2V0U2Nyb2xsUGFyZW50KHRoaXMuX3JlZmVyZW5jZSk7dGFyZ2V0IT09cm9vdC5kb2N1bWVudC5ib2R5JiZ0YXJnZXQhPT1yb290LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudHx8KHRhcmdldD1yb290KSx0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIix0aGlzLnN0YXRlLnVwZGF0ZUJvdW5kKSx0aGlzLnN0YXRlLnNjcm9sbFRhcmdldD10YXJnZXR9fSxQb3BwZXIucHJvdG90eXBlLl9yZW1vdmVFdmVudExpc3RlbmVycz1mdW5jdGlvbigpe3Jvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIix0aGlzLnN0YXRlLnVwZGF0ZUJvdW5kKSwid2luZG93IiE9PXRoaXMuX29wdGlvbnMuYm91bmRhcmllc0VsZW1lbnQmJnRoaXMuc3RhdGUuc2Nyb2xsVGFyZ2V0JiYodGhpcy5zdGF0ZS5zY3JvbGxUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2Nyb2xsIix0aGlzLnN0YXRlLnVwZGF0ZUJvdW5kKSx0aGlzLnN0YXRlLnNjcm9sbFRhcmdldD1udWxsKSx0aGlzLnN0YXRlLnVwZGF0ZUJvdW5kPW51bGx9LFBvcHBlci5wcm90b3R5cGUuX2dldEJvdW5kYXJpZXM9ZnVuY3Rpb24oZGF0YSxwYWRkaW5nLGJvdW5kYXJpZXNFbGVtZW50KXt2YXIgaGVpZ2h0LGVsZW1lbnQsYm91bmRhcmllcz17fTtpZigid2luZG93Ij09PWJvdW5kYXJpZXNFbGVtZW50KXt2YXIgYm9keT1yb290LmRvY3VtZW50LmJvZHksaHRtbD1yb290LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtoZWlnaHQ9TWF0aC5tYXgoYm9keS5zY3JvbGxIZWlnaHQsYm9keS5vZmZzZXRIZWlnaHQsaHRtbC5jbGllbnRIZWlnaHQsaHRtbC5zY3JvbGxIZWlnaHQsaHRtbC5vZmZzZXRIZWlnaHQpLGJvdW5kYXJpZXM9e3RvcDowLHJpZ2h0Ok1hdGgubWF4KGJvZHkuc2Nyb2xsV2lkdGgsYm9keS5vZmZzZXRXaWR0aCxodG1sLmNsaWVudFdpZHRoLGh0bWwuc2Nyb2xsV2lkdGgsaHRtbC5vZmZzZXRXaWR0aCksYm90dG9tOmhlaWdodCxsZWZ0OjB9fWVsc2UgaWYoInZpZXdwb3J0Ij09PWJvdW5kYXJpZXNFbGVtZW50KXt2YXIgb2Zmc2V0UGFyZW50PWdldE9mZnNldFBhcmVudCh0aGlzLl9wb3BwZXIpLHNjcm9sbFBhcmVudD1nZXRTY3JvbGxQYXJlbnQodGhpcy5fcG9wcGVyKSxvZmZzZXRQYXJlbnRSZWN0PWdldE9mZnNldFJlY3Qob2Zmc2V0UGFyZW50KSxzY3JvbGxUb3A9ImZpeGVkIj09PWRhdGEub2Zmc2V0cy5wb3BwZXIucG9zaXRpb24/MDooZWxlbWVudD1zY3JvbGxQYXJlbnQpPT1kb2N1bWVudC5ib2R5P01hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApOmVsZW1lbnQuc2Nyb2xsVG9wLHNjcm9sbExlZnQ9ImZpeGVkIj09PWRhdGEub2Zmc2V0cy5wb3BwZXIucG9zaXRpb24/MDpmdW5jdGlvbihlbGVtZW50KXtyZXR1cm4gZWxlbWVudD09ZG9jdW1lbnQuYm9keT9NYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQpOmVsZW1lbnQuc2Nyb2xsTGVmdH0oc2Nyb2xsUGFyZW50KTtib3VuZGFyaWVzPXt0b3A6MC0ob2Zmc2V0UGFyZW50UmVjdC50b3Atc2Nyb2xsVG9wKSxyaWdodDpyb290LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC0ob2Zmc2V0UGFyZW50UmVjdC5sZWZ0LXNjcm9sbExlZnQpLGJvdHRvbTpyb290LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQtKG9mZnNldFBhcmVudFJlY3QudG9wLXNjcm9sbFRvcCksbGVmdDowLShvZmZzZXRQYXJlbnRSZWN0LmxlZnQtc2Nyb2xsTGVmdCl9fWVsc2UgYm91bmRhcmllcz1nZXRPZmZzZXRQYXJlbnQodGhpcy5fcG9wcGVyKT09PWJvdW5kYXJpZXNFbGVtZW50P3t0b3A6MCxsZWZ0OjAscmlnaHQ6Ym91bmRhcmllc0VsZW1lbnQuY2xpZW50V2lkdGgsYm90dG9tOmJvdW5kYXJpZXNFbGVtZW50LmNsaWVudEhlaWdodH06Z2V0T2Zmc2V0UmVjdChib3VuZGFyaWVzRWxlbWVudCk7cmV0dXJuIGJvdW5kYXJpZXMubGVmdCs9cGFkZGluZyxib3VuZGFyaWVzLnJpZ2h0LT1wYWRkaW5nLGJvdW5kYXJpZXMudG9wPWJvdW5kYXJpZXMudG9wK3BhZGRpbmcsYm91bmRhcmllcy5ib3R0b209Ym91bmRhcmllcy5ib3R0b20tcGFkZGluZyxib3VuZGFyaWVzfSxQb3BwZXIucHJvdG90eXBlLnJ1bk1vZGlmaWVycz1mdW5jdGlvbihkYXRhLG1vZGlmaWVycyxlbmRzKXt2YXIgbW9kaWZpZXJzVG9SdW49bW9kaWZpZXJzLnNsaWNlKCk7cmV0dXJuIHZvaWQgMCE9PWVuZHMmJihtb2RpZmllcnNUb1J1bj10aGlzLl9vcHRpb25zLm1vZGlmaWVycy5zbGljZSgwLGdldEFycmF5S2V5SW5kZXgodGhpcy5fb3B0aW9ucy5tb2RpZmllcnMsZW5kcykpKSxtb2RpZmllcnNUb1J1bi5mb3JFYWNoKGZ1bmN0aW9uKG1vZGlmaWVyKXt2YXIgZnVuY3Rpb25Ub0NoZWNrOyhmdW5jdGlvblRvQ2hlY2s9bW9kaWZpZXIpJiYiW29iamVjdCBGdW5jdGlvbl0iPT09e30udG9TdHJpbmcuY2FsbChmdW5jdGlvblRvQ2hlY2spJiYoZGF0YT1tb2RpZmllci5jYWxsKHRoaXMsZGF0YSkpfS5iaW5kKHRoaXMpKSxkYXRhfSxQb3BwZXIucHJvdG90eXBlLmlzTW9kaWZpZXJSZXF1aXJlZD1mdW5jdGlvbihyZXF1ZXN0aW5nLHJlcXVlc3RlZCl7dmFyIGluZGV4PWdldEFycmF5S2V5SW5kZXgodGhpcy5fb3B0aW9ucy5tb2RpZmllcnMscmVxdWVzdGluZyk7cmV0dXJuISF0aGlzLl9vcHRpb25zLm1vZGlmaWVycy5zbGljZSgwLGluZGV4KS5maWx0ZXIoZnVuY3Rpb24obW9kaWZpZXIpe3JldHVybiBtb2RpZmllcj09PXJlcXVlc3RlZH0pLmxlbmd0aH0sKFBvcHBlci5wcm90b3R5cGUubW9kaWZpZXJzPXt9KS5hcHBseVN0eWxlPWZ1bmN0aW9uKGRhdGEpe3ZhciBwcmVmaXhlZFByb3BlcnR5LHN0eWxlcz17cG9zaXRpb246ZGF0YS5vZmZzZXRzLnBvcHBlci5wb3NpdGlvbn0sbGVmdD1NYXRoLnJvdW5kKGRhdGEub2Zmc2V0cy5wb3BwZXIubGVmdCksdG9wPU1hdGgucm91bmQoZGF0YS5vZmZzZXRzLnBvcHBlci50b3ApO3JldHVybiB0aGlzLl9vcHRpb25zLmdwdUFjY2VsZXJhdGlvbiYmKHByZWZpeGVkUHJvcGVydHk9Z2V0U3VwcG9ydGVkUHJvcGVydHlOYW1lKCJ0cmFuc2Zvcm0iKSk/KHN0eWxlc1twcmVmaXhlZFByb3BlcnR5XT0idHJhbnNsYXRlM2QoIitsZWZ0KyJweCwgIit0b3ArInB4LCAwKSIsc3R5bGVzLnRvcD0wLHN0eWxlcy5sZWZ0PTApOihzdHlsZXMubGVmdD1sZWZ0LHN0eWxlcy50b3A9dG9wKSxPYmplY3QuYXNzaWduKHN0eWxlcyxkYXRhLnN0eWxlcyksc2V0U3R5bGUodGhpcy5fcG9wcGVyLHN0eWxlcyksdGhpcy5fcG9wcGVyLnNldEF0dHJpYnV0ZSgieC1wbGFjZW1lbnQiLGRhdGEucGxhY2VtZW50KSx0aGlzLmlzTW9kaWZpZXJSZXF1aXJlZCh0aGlzLm1vZGlmaWVycy5hcHBseVN0eWxlLHRoaXMubW9kaWZpZXJzLmFycm93KSYmZGF0YS5vZmZzZXRzLmFycm93JiZzZXRTdHlsZShkYXRhLmFycm93RWxlbWVudCxkYXRhLm9mZnNldHMuYXJyb3cpLGRhdGF9LFBvcHBlci5wcm90b3R5cGUubW9kaWZpZXJzLnNoaWZ0PWZ1bmN0aW9uKGRhdGEpe3ZhciBwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQsYmFzZVBsYWNlbWVudD1wbGFjZW1lbnQuc3BsaXQoIi0iKVswXSxzaGlmdFZhcmlhdGlvbj1wbGFjZW1lbnQuc3BsaXQoIi0iKVsxXTtpZihzaGlmdFZhcmlhdGlvbil7dmFyIHJlZmVyZW5jZT1kYXRhLm9mZnNldHMucmVmZXJlbmNlLHBvcHBlcj1nZXRQb3BwZXJDbGllbnRSZWN0KGRhdGEub2Zmc2V0cy5wb3BwZXIpLHNoaWZ0T2Zmc2V0cz17eTp7c3RhcnQ6e3RvcDpyZWZlcmVuY2UudG9wfSxlbmQ6e3RvcDpyZWZlcmVuY2UudG9wK3JlZmVyZW5jZS5oZWlnaHQtcG9wcGVyLmhlaWdodH19LHg6e3N0YXJ0OntsZWZ0OnJlZmVyZW5jZS5sZWZ0fSxlbmQ6e2xlZnQ6cmVmZXJlbmNlLmxlZnQrcmVmZXJlbmNlLndpZHRoLXBvcHBlci53aWR0aH19fSxheGlzPS0xIT09WyJib3R0b20iLCJ0b3AiXS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpPyJ4IjoieSI7ZGF0YS5vZmZzZXRzLnBvcHBlcj1PYmplY3QuYXNzaWduKHBvcHBlcixzaGlmdE9mZnNldHNbYXhpc11bc2hpZnRWYXJpYXRpb25dKX1yZXR1cm4gZGF0YX0sUG9wcGVyLnByb3RvdHlwZS5tb2RpZmllcnMucHJldmVudE92ZXJmbG93PWZ1bmN0aW9uKGRhdGEpe3ZhciBvcmRlcj10aGlzLl9vcHRpb25zLnByZXZlbnRPdmVyZmxvd09yZGVyLHBvcHBlcj1nZXRQb3BwZXJDbGllbnRSZWN0KGRhdGEub2Zmc2V0cy5wb3BwZXIpLGNoZWNrPXtsZWZ0OmZ1bmN0aW9uKCl7dmFyIGxlZnQ9cG9wcGVyLmxlZnQ7cmV0dXJuIHBvcHBlci5sZWZ0PGRhdGEuYm91bmRhcmllcy5sZWZ0JiYobGVmdD1NYXRoLm1heChwb3BwZXIubGVmdCxkYXRhLmJvdW5kYXJpZXMubGVmdCkpLHtsZWZ0OmxlZnR9fSxyaWdodDpmdW5jdGlvbigpe3ZhciBsZWZ0PXBvcHBlci5sZWZ0O3JldHVybiBwb3BwZXIucmlnaHQ+ZGF0YS5ib3VuZGFyaWVzLnJpZ2h0JiYobGVmdD1NYXRoLm1pbihwb3BwZXIubGVmdCxkYXRhLmJvdW5kYXJpZXMucmlnaHQtcG9wcGVyLndpZHRoKSkse2xlZnQ6bGVmdH19LHRvcDpmdW5jdGlvbigpe3ZhciB0b3A9cG9wcGVyLnRvcDtyZXR1cm4gcG9wcGVyLnRvcDxkYXRhLmJvdW5kYXJpZXMudG9wJiYodG9wPU1hdGgubWF4KHBvcHBlci50b3AsZGF0YS5ib3VuZGFyaWVzLnRvcCkpLHt0b3A6dG9wfX0sYm90dG9tOmZ1bmN0aW9uKCl7dmFyIHRvcD1wb3BwZXIudG9wO3JldHVybiBwb3BwZXIuYm90dG9tPmRhdGEuYm91bmRhcmllcy5ib3R0b20mJih0b3A9TWF0aC5taW4ocG9wcGVyLnRvcCxkYXRhLmJvdW5kYXJpZXMuYm90dG9tLXBvcHBlci5oZWlnaHQpKSx7dG9wOnRvcH19fTtyZXR1cm4gb3JkZXIuZm9yRWFjaChmdW5jdGlvbihkaXJlY3Rpb24pe2RhdGEub2Zmc2V0cy5wb3BwZXI9T2JqZWN0LmFzc2lnbihwb3BwZXIsY2hlY2tbZGlyZWN0aW9uXSgpKX0pLGRhdGF9LFBvcHBlci5wcm90b3R5cGUubW9kaWZpZXJzLmtlZXBUb2dldGhlcj1mdW5jdGlvbihkYXRhKXt2YXIgcG9wcGVyPWdldFBvcHBlckNsaWVudFJlY3QoZGF0YS5vZmZzZXRzLnBvcHBlcikscmVmZXJlbmNlPWRhdGEub2Zmc2V0cy5yZWZlcmVuY2UsZj1NYXRoLmZsb29yO3JldHVybiBwb3BwZXIucmlnaHQ8ZihyZWZlcmVuY2UubGVmdCkmJihkYXRhLm9mZnNldHMucG9wcGVyLmxlZnQ9ZihyZWZlcmVuY2UubGVmdCktcG9wcGVyLndpZHRoKSxwb3BwZXIubGVmdD5mKHJlZmVyZW5jZS5yaWdodCkmJihkYXRhLm9mZnNldHMucG9wcGVyLmxlZnQ9ZihyZWZlcmVuY2UucmlnaHQpKSxwb3BwZXIuYm90dG9tPGYocmVmZXJlbmNlLnRvcCkmJihkYXRhLm9mZnNldHMucG9wcGVyLnRvcD1mKHJlZmVyZW5jZS50b3ApLXBvcHBlci5oZWlnaHQpLHBvcHBlci50b3A+ZihyZWZlcmVuY2UuYm90dG9tKSYmKGRhdGEub2Zmc2V0cy5wb3BwZXIudG9wPWYocmVmZXJlbmNlLmJvdHRvbSkpLGRhdGF9LFBvcHBlci5wcm90b3R5cGUubW9kaWZpZXJzLmZsaXA9ZnVuY3Rpb24oZGF0YSl7aWYoIXRoaXMuaXNNb2RpZmllclJlcXVpcmVkKHRoaXMubW9kaWZpZXJzLmZsaXAsdGhpcy5tb2RpZmllcnMucHJldmVudE92ZXJmbG93KSlyZXR1cm4gY29uc29sZS53YXJuKCJXQVJOSU5HOiBwcmV2ZW50T3ZlcmZsb3cgbW9kaWZpZXIgaXMgcmVxdWlyZWQgYnkgZmxpcCBtb2RpZmllciBpbiBvcmRlciB0byB3b3JrLCBiZSBzdXJlIHRvIGluY2x1ZGUgaXQgYmVmb3JlIGZsaXAhIiksZGF0YTtpZihkYXRhLmZsaXBwZWQmJmRhdGEucGxhY2VtZW50PT09ZGF0YS5fb3JpZ2luYWxQbGFjZW1lbnQpcmV0dXJuIGRhdGE7dmFyIHBsYWNlbWVudD1kYXRhLnBsYWNlbWVudC5zcGxpdCgiLSIpWzBdLHBsYWNlbWVudE9wcG9zaXRlPWdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCksdmFyaWF0aW9uPWRhdGEucGxhY2VtZW50LnNwbGl0KCItIilbMV18fCIiLGZsaXBPcmRlcj1bXTtyZXR1cm4oZmxpcE9yZGVyPSJmbGlwIj09PXRoaXMuX29wdGlvbnMuZmxpcEJlaGF2aW9yP1twbGFjZW1lbnQscGxhY2VtZW50T3Bwb3NpdGVdOnRoaXMuX29wdGlvbnMuZmxpcEJlaGF2aW9yKS5mb3JFYWNoKGZ1bmN0aW9uKHN0ZXAsaW5kZXgpe2lmKHBsYWNlbWVudD09PXN0ZXAmJmZsaXBPcmRlci5sZW5ndGghPT1pbmRleCsxKXtwbGFjZW1lbnQ9ZGF0YS5wbGFjZW1lbnQuc3BsaXQoIi0iKVswXSxwbGFjZW1lbnRPcHBvc2l0ZT1nZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpO3ZhciBwb3BwZXJPZmZzZXRzPWdldFBvcHBlckNsaWVudFJlY3QoZGF0YS5vZmZzZXRzLnBvcHBlciksYT0tMSE9PVsicmlnaHQiLCJib3R0b20iXS5pbmRleE9mKHBsYWNlbWVudCk7KGEmJk1hdGguZmxvb3IoZGF0YS5vZmZzZXRzLnJlZmVyZW5jZVtwbGFjZW1lbnRdKT5NYXRoLmZsb29yKHBvcHBlck9mZnNldHNbcGxhY2VtZW50T3Bwb3NpdGVdKXx8IWEmJk1hdGguZmxvb3IoZGF0YS5vZmZzZXRzLnJlZmVyZW5jZVtwbGFjZW1lbnRdKTxNYXRoLmZsb29yKHBvcHBlck9mZnNldHNbcGxhY2VtZW50T3Bwb3NpdGVdKSkmJihkYXRhLmZsaXBwZWQ9ITAsZGF0YS5wbGFjZW1lbnQ9ZmxpcE9yZGVyW2luZGV4KzFdLHZhcmlhdGlvbiYmKGRhdGEucGxhY2VtZW50Kz0iLSIrdmFyaWF0aW9uKSxkYXRhLm9mZnNldHMucG9wcGVyPXRoaXMuX2dldE9mZnNldHModGhpcy5fcG9wcGVyLHRoaXMuX3JlZmVyZW5jZSxkYXRhLnBsYWNlbWVudCkucG9wcGVyLGRhdGE9dGhpcy5ydW5Nb2RpZmllcnMoZGF0YSx0aGlzLl9vcHRpb25zLm1vZGlmaWVycyx0aGlzLl9mbGlwKSl9fS5iaW5kKHRoaXMpKSxkYXRhfSxQb3BwZXIucHJvdG90eXBlLm1vZGlmaWVycy5vZmZzZXQ9ZnVuY3Rpb24oZGF0YSl7dmFyIG9mZnNldD10aGlzLl9vcHRpb25zLm9mZnNldCxwb3BwZXI9ZGF0YS5vZmZzZXRzLnBvcHBlcjtyZXR1cm4tMSE9PWRhdGEucGxhY2VtZW50LmluZGV4T2YoImxlZnQiKT9wb3BwZXIudG9wLT1vZmZzZXQ6LTEhPT1kYXRhLnBsYWNlbWVudC5pbmRleE9mKCJyaWdodCIpP3BvcHBlci50b3ArPW9mZnNldDotMSE9PWRhdGEucGxhY2VtZW50LmluZGV4T2YoInRvcCIpP3BvcHBlci5sZWZ0LT1vZmZzZXQ6LTEhPT1kYXRhLnBsYWNlbWVudC5pbmRleE9mKCJib3R0b20iKSYmKHBvcHBlci5sZWZ0Kz1vZmZzZXQpLGRhdGF9LFBvcHBlci5wcm90b3R5cGUubW9kaWZpZXJzLmFycm93PWZ1bmN0aW9uKGRhdGEpe3ZhciBhcnJvdz10aGlzLl9vcHRpb25zLmFycm93RWxlbWVudCxhcnJvd09mZnNldD10aGlzLl9vcHRpb25zLmFycm93T2Zmc2V0O2lmKCJzdHJpbmciPT10eXBlb2YgYXJyb3cmJihhcnJvdz10aGlzLl9wb3BwZXIucXVlcnlTZWxlY3RvcihhcnJvdykpLCFhcnJvdylyZXR1cm4gZGF0YTtpZighdGhpcy5fcG9wcGVyLmNvbnRhaW5zKGFycm93KSlyZXR1cm4gY29uc29sZS53YXJuKCJXQVJOSU5HOiBgYXJyb3dFbGVtZW50YCBtdXN0IGJlIGNoaWxkIG9mIGl0cyBwb3BwZXIgZWxlbWVudCEiKSxkYXRhO2lmKCF0aGlzLmlzTW9kaWZpZXJSZXF1aXJlZCh0aGlzLm1vZGlmaWVycy5hcnJvdyx0aGlzLm1vZGlmaWVycy5rZWVwVG9nZXRoZXIpKXJldHVybiBjb25zb2xlLndhcm4oIldBUk5JTkc6IGtlZXBUb2dldGhlciBtb2RpZmllciBpcyByZXF1aXJlZCBieSBhcnJvdyBtb2RpZmllciBpbiBvcmRlciB0byB3b3JrLCBiZSBzdXJlIHRvIGluY2x1ZGUgaXQgYmVmb3JlIGFycm93ISIpLGRhdGE7dmFyIGFycm93U3R5bGU9e30scGxhY2VtZW50PWRhdGEucGxhY2VtZW50LnNwbGl0KCItIilbMF0scG9wcGVyPWdldFBvcHBlckNsaWVudFJlY3QoZGF0YS5vZmZzZXRzLnBvcHBlcikscmVmZXJlbmNlPWRhdGEub2Zmc2V0cy5yZWZlcmVuY2UsaXNWZXJ0aWNhbD0tMSE9PVsibGVmdCIsInJpZ2h0Il0uaW5kZXhPZihwbGFjZW1lbnQpLGxlbj1pc1ZlcnRpY2FsPyJoZWlnaHQiOiJ3aWR0aCIsc2lkZT1pc1ZlcnRpY2FsPyJ0b3AiOiJsZWZ0IixhbHRTaWRlPWlzVmVydGljYWw/ImxlZnQiOiJ0b3AiLG9wU2lkZT1pc1ZlcnRpY2FsPyJib3R0b20iOiJyaWdodCIsYXJyb3dTaXplPWdldE91dGVyU2l6ZXMoYXJyb3cpW2xlbl07cmVmZXJlbmNlW29wU2lkZV0tYXJyb3dTaXplPHBvcHBlcltzaWRlXSYmKGRhdGEub2Zmc2V0cy5wb3BwZXJbc2lkZV0tPXBvcHBlcltzaWRlXS0ocmVmZXJlbmNlW29wU2lkZV0tYXJyb3dTaXplKSkscmVmZXJlbmNlW3NpZGVdK2Fycm93U2l6ZT5wb3BwZXJbb3BTaWRlXSYmKGRhdGEub2Zmc2V0cy5wb3BwZXJbc2lkZV0rPXJlZmVyZW5jZVtzaWRlXSthcnJvd1NpemUtcG9wcGVyW29wU2lkZV0pO3ZhciBzaWRlVmFsdWU9cmVmZXJlbmNlW3NpZGVdKyhhcnJvd09mZnNldHx8cmVmZXJlbmNlW2xlbl0vMi1hcnJvd1NpemUvMiktcG9wcGVyW3NpZGVdO3JldHVybiBzaWRlVmFsdWU9TWF0aC5tYXgoTWF0aC5taW4ocG9wcGVyW2xlbl0tYXJyb3dTaXplLTgsc2lkZVZhbHVlKSw4KSxhcnJvd1N0eWxlW3NpZGVdPXNpZGVWYWx1ZSxhcnJvd1N0eWxlW2FsdFNpZGVdPSIiLGRhdGEub2Zmc2V0cy5hcnJvdz1hcnJvd1N0eWxlLGRhdGEuYXJyb3dFbGVtZW50PWFycm93LGRhdGF9LE9iamVjdC5hc3NpZ258fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QsImFzc2lnbiIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKHRhcmdldCl7aWYobnVsbD09dGFyZ2V0KXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjb252ZXJ0IGZpcnN0IGFyZ3VtZW50IHRvIG9iamVjdCIpO2Zvcih2YXIgdG89T2JqZWN0KHRhcmdldCksaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBuZXh0U291cmNlPWFyZ3VtZW50c1tpXTtpZihudWxsIT1uZXh0U291cmNlKXtuZXh0U291cmNlPU9iamVjdChuZXh0U291cmNlKTtmb3IodmFyIGtleXNBcnJheT1PYmplY3Qua2V5cyhuZXh0U291cmNlKSxuZXh0SW5kZXg9MCxsZW49a2V5c0FycmF5Lmxlbmd0aDtuZXh0SW5kZXg8bGVuO25leHRJbmRleCsrKXt2YXIgbmV4dEtleT1rZXlzQXJyYXlbbmV4dEluZGV4XSxkZXNjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobmV4dFNvdXJjZSxuZXh0S2V5KTt2b2lkIDAhPT1kZXNjJiZkZXNjLmVudW1lcmFibGUmJih0b1tuZXh0S2V5XT1uZXh0U291cmNlW25leHRLZXldKX19fXJldHVybiB0b319KSxQb3BwZXJ9KT9fX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18uY2FsbChleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18sZXhwb3J0cyxtb2R1bGUpOl9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyl8fChtb2R1bGUuZXhwb3J0cz1fX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyl9LGEzem86ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2V4cG9ydHMuX19lc01vZHVsZT0hMDt2YXIgX2xvY2FsZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTSmRUIik7ZXhwb3J0cy5kZWZhdWx0PXttZXRob2RzOnt0OmZ1bmN0aW9uKCl7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1BcnJheShfbGVuKSxfa2V5PTA7X2tleTxfbGVuO19rZXkrKylhcmdzW19rZXldPWFyZ3VtZW50c1tfa2V5XTtyZXR1cm4gX2xvY2FsZS50LmFwcGx5KHRoaXMsYXJncyl9fX19LGNpOWc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2V4cG9ydHMuX19lc01vZHVsZT0hMDt2YXIgb2JqLF90eXBlb2Y9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9ian06ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIG9ian0sX2FyaWFVdGlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1RkxKIiksX2FyaWFVdGlsczI9KG9iaj1fYXJpYVV0aWxzKSYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07dmFyIHRhYkV2ZW50LGFyaWE9YXJpYXx8e307YXJpYS5EaWFsb2c9ZnVuY3Rpb24oZGlhbG9nLGZvY3VzQWZ0ZXJDbG9zZWQsZm9jdXNGaXJzdCl7dmFyIF90aGlzPXRoaXM7aWYodGhpcy5kaWFsb2dOb2RlPWRpYWxvZyxudWxsPT09dGhpcy5kaWFsb2dOb2RlfHwiZGlhbG9nIiE9PXRoaXMuZGlhbG9nTm9kZS5nZXRBdHRyaWJ1dGUoInJvbGUiKSl0aHJvdyBuZXcgRXJyb3IoIkRpYWxvZygpIHJlcXVpcmVzIGEgRE9NIGVsZW1lbnQgd2l0aCBBUklBIHJvbGUgb2YgZGlhbG9nLiIpOyJzdHJpbmciPT10eXBlb2YgZm9jdXNBZnRlckNsb3NlZD90aGlzLmZvY3VzQWZ0ZXJDbG9zZWQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9jdXNBZnRlckNsb3NlZCk6Im9iamVjdCI9PT0odm9pZCAwPT09Zm9jdXNBZnRlckNsb3NlZD8idW5kZWZpbmVkIjpfdHlwZW9mKGZvY3VzQWZ0ZXJDbG9zZWQpKT90aGlzLmZvY3VzQWZ0ZXJDbG9zZWQ9Zm9jdXNBZnRlckNsb3NlZDp0aGlzLmZvY3VzQWZ0ZXJDbG9zZWQ9bnVsbCwic3RyaW5nIj09dHlwZW9mIGZvY3VzRmlyc3Q/dGhpcy5mb2N1c0ZpcnN0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvY3VzRmlyc3QpOiJvYmplY3QiPT09KHZvaWQgMD09PWZvY3VzRmlyc3Q/InVuZGVmaW5lZCI6X3R5cGVvZihmb2N1c0ZpcnN0KSk/dGhpcy5mb2N1c0ZpcnN0PWZvY3VzRmlyc3Q6dGhpcy5mb2N1c0ZpcnN0PW51bGwsdGhpcy5mb2N1c0ZpcnN0P3RoaXMuZm9jdXNGaXJzdC5mb2N1cygpOl9hcmlhVXRpbHMyLmRlZmF1bHQuZm9jdXNGaXJzdERlc2NlbmRhbnQodGhpcy5kaWFsb2dOb2RlKSx0aGlzLmxhc3RGb2N1cz1kb2N1bWVudC5hY3RpdmVFbGVtZW50LHRhYkV2ZW50PWZ1bmN0aW9uKGUpe190aGlzLnRyYXBGb2N1cyhlKX0sdGhpcy5hZGRMaXN0ZW5lcnMoKX0sYXJpYS5EaWFsb2cucHJvdG90eXBlLmFkZExpc3RlbmVycz1mdW5jdGlvbigpe2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0YWJFdmVudCwhMCl9LGFyaWEuRGlhbG9nLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcnM9ZnVuY3Rpb24oKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGFiRXZlbnQsITApfSxhcmlhLkRpYWxvZy5wcm90b3R5cGUuY2xvc2VEaWFsb2c9ZnVuY3Rpb24oKXt2YXIgX3RoaXMyPXRoaXM7dGhpcy5yZW1vdmVMaXN0ZW5lcnMoKSx0aGlzLmZvY3VzQWZ0ZXJDbG9zZWQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtfdGhpczIuZm9jdXNBZnRlckNsb3NlZC5mb2N1cygpfSl9LGFyaWEuRGlhbG9nLnByb3RvdHlwZS50cmFwRm9jdXM9ZnVuY3Rpb24oZXZlbnQpe19hcmlhVXRpbHMyLmRlZmF1bHQuSWdub3JlVXRpbEZvY3VzQ2hhbmdlc3x8KHRoaXMuZGlhbG9nTm9kZS5jb250YWlucyhldmVudC50YXJnZXQpP3RoaXMubGFzdEZvY3VzPWV2ZW50LnRhcmdldDooX2FyaWFVdGlsczIuZGVmYXVsdC5mb2N1c0ZpcnN0RGVzY2VuZGFudCh0aGlzLmRpYWxvZ05vZGUpLHRoaXMubGFzdEZvY3VzPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmX2FyaWFVdGlsczIuZGVmYXVsdC5mb2N1c0xhc3REZXNjZW5kYW50KHRoaXMuZGlhbG9nTm9kZSksdGhpcy5sYXN0Rm9jdXM9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpfSxleHBvcnRzLmRlZmF1bHQ9YXJpYS5EaWFsb2d9LGYwM3o6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2V4cG9ydHMuX19lc01vZHVsZT0hMCxleHBvcnRzLmRlZmF1bHQ9ZnVuY3Rpb24odGFyZ2V0KXtmb3IodmFyIGk9MSxqPWFyZ3VtZW50cy5sZW5ndGg7aTxqO2krKyl7dmFyIHNvdXJjZT1hcmd1bWVudHNbaV18fHt9O2Zvcih2YXIgcHJvcCBpbiBzb3VyY2UpaWYoc291cmNlLmhhc093blByb3BlcnR5KHByb3ApKXt2YXIgdmFsdWU9c291cmNlW3Byb3BdO3ZvaWQgMCE9PXZhbHVlJiYodGFyZ2V0W3Byb3BdPXZhbHVlKX19cmV0dXJuIHRhcmdldH19LGY4SG46ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obW9kdWxlcyl7dmFyIGluc3RhbGxlZE1vZHVsZXM9e307ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7dmFyIG1vZHVsZT1pbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXT17aTptb2R1bGVJZCxsOiExLGV4cG9ydHM6e319O3JldHVybiBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLG1vZHVsZSxtb2R1bGUuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxtb2R1bGUubD0hMCxtb2R1bGUuZXhwb3J0c31yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPW1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5jPWluc3RhbGxlZE1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGV4cG9ydHMsbmFtZSxnZXR0ZXIpe19fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLG5hbWUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxuYW1lLHtlbnVtZXJhYmxlOiEwLGdldDpnZXR0ZXJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5yPWZ1bmN0aW9uKGV4cG9ydHMpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LF9fd2VicGFja19yZXF1aXJlX18udD1mdW5jdGlvbih2YWx1ZSxtb2RlKXtpZigxJm1vZGUmJih2YWx1ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKSksOCZtb2RlKXJldHVybiB2YWx1ZTtpZig0Jm1vZGUmJiJvYmplY3QiPT10eXBlb2YgdmFsdWUmJnZhbHVlJiZ2YWx1ZS5fX2VzTW9kdWxlKXJldHVybiB2YWx1ZTt2YXIgbnM9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dmFsdWV9KSwyJm1vZGUmJiJzdHJpbmciIT10eXBlb2YgdmFsdWUpZm9yKHZhciBrZXkgaW4gdmFsdWUpX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLGtleSxmdW5jdGlvbihrZXkpe3JldHVybiB2YWx1ZVtrZXldfS5iaW5kKG51bGwsa2V5KSk7cmV0dXJuIG5zfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24obW9kdWxlKXt2YXIgZ2V0dGVyPW1vZHVsZSYmbW9kdWxlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZX07cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsImEiLGdldHRlciksZ2V0dGVyfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24ob2JqZWN0LHByb3BlcnR5KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iL2Rpc3QvIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz03OSl9KHswOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnQoc2NyaXB0RXhwb3J0cyxyZW5kZXIsc3RhdGljUmVuZGVyRm5zLGZ1bmN0aW9uYWxUZW1wbGF0ZSxpbmplY3RTdHlsZXMsc2NvcGVJZCxtb2R1bGVJZGVudGlmaWVyLHNoYWRvd01vZGUpe3ZhciBob29rLG9wdGlvbnM9ImZ1bmN0aW9uIj09dHlwZW9mIHNjcmlwdEV4cG9ydHM/c2NyaXB0RXhwb3J0cy5vcHRpb25zOnNjcmlwdEV4cG9ydHM7aWYocmVuZGVyJiYob3B0aW9ucy5yZW5kZXI9cmVuZGVyLG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zPXN0YXRpY1JlbmRlckZucyxvcHRpb25zLl9jb21waWxlZD0hMCksZnVuY3Rpb25hbFRlbXBsYXRlJiYob3B0aW9ucy5mdW5jdGlvbmFsPSEwKSxzY29wZUlkJiYob3B0aW9ucy5fc2NvcGVJZD0iZGF0YS12LSIrc2NvcGVJZCksbW9kdWxlSWRlbnRpZmllcj8oaG9vaz1mdW5jdGlvbihjb250ZXh0KXsoY29udGV4dD1jb250ZXh0fHx0aGlzLiR2bm9kZSYmdGhpcy4kdm5vZGUuc3NyQ29udGV4dHx8dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LiR2bm9kZSYmdGhpcy5wYXJlbnQuJHZub2RlLnNzckNvbnRleHQpfHwidW5kZWZpbmVkIj09dHlwZW9mIF9fVlVFX1NTUl9DT05URVhUX198fChjb250ZXh0PV9fVlVFX1NTUl9DT05URVhUX18pLGluamVjdFN0eWxlcyYmaW5qZWN0U3R5bGVzLmNhbGwodGhpcyxjb250ZXh0KSxjb250ZXh0JiZjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cyYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMuYWRkKG1vZHVsZUlkZW50aWZpZXIpfSxvcHRpb25zLl9zc3JSZWdpc3Rlcj1ob29rKTppbmplY3RTdHlsZXMmJihob29rPXNoYWRvd01vZGU/ZnVuY3Rpb24oKXtpbmplY3RTdHlsZXMuY2FsbCh0aGlzLHRoaXMuJHJvb3QuJG9wdGlvbnMuc2hhZG93Um9vdCl9OmluamVjdFN0eWxlcyksaG9vaylpZihvcHRpb25zLmZ1bmN0aW9uYWwpe29wdGlvbnMuX2luamVjdFN0eWxlcz1ob29rO3ZhciBvcmlnaW5hbFJlbmRlcj1vcHRpb25zLnJlbmRlcjtvcHRpb25zLnJlbmRlcj1mdW5jdGlvbihoLGNvbnRleHQpe3JldHVybiBob29rLmNhbGwoY29udGV4dCksb3JpZ2luYWxSZW5kZXIoaCxjb250ZXh0KX19ZWxzZXt2YXIgZXhpc3Rpbmc9b3B0aW9ucy5iZWZvcmVDcmVhdGU7b3B0aW9ucy5iZWZvcmVDcmVhdGU9ZXhpc3Rpbmc/W10uY29uY2F0KGV4aXN0aW5nLGhvb2spOltob29rXX1yZXR1cm57ZXhwb3J0czpzY3JpcHRFeHBvcnRzLG9wdGlvbnM6b3B0aW9uc319X193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImEiLGZ1bmN0aW9uKCl7cmV0dXJuIG5vcm1hbGl6ZUNvbXBvbmVudH0pfSwzOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwQkRIIil9LDc5OmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7dmFyIHJlbmRlcj1mdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50O3JldHVybih0aGlzLl9zZWxmLl9jfHxfaCkoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1jaGVja2JveC1ncm91cCIsYXR0cnM6e3JvbGU6Imdyb3VwIiwiYXJpYS1sYWJlbCI6ImNoZWNrYm94LWdyb3VwIn19LFt0aGlzLl90KCJkZWZhdWx0IildLDIpfTtyZW5kZXIuX3dpdGhTdHJpcHBlZD0hMDt2YXIgZW1pdHRlcl89X193ZWJwYWNrX3JlcXVpcmVfXygzKSxzcmNfY2hlY2tib3hfZ3JvdXB2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc189e25hbWU6IkVsQ2hlY2tib3hHcm91cCIsY29tcG9uZW50TmFtZToiRWxDaGVja2JveEdyb3VwIixtaXhpbnM6W19fd2VicGFja19yZXF1aXJlX18ubihlbWl0dGVyXykuYV0saW5qZWN0OntlbEZvcm1JdGVtOntkZWZhdWx0OiIifX0scHJvcHM6e3ZhbHVlOnt9LGRpc2FibGVkOkJvb2xlYW4sbWluOk51bWJlcixtYXg6TnVtYmVyLHNpemU6U3RyaW5nLGZpbGw6U3RyaW5nLHRleHRDb2xvcjpTdHJpbmd9LGNvbXB1dGVkOntfZWxGb3JtSXRlbVNpemU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5lbEZvcm1JdGVtfHx7fSkuZWxGb3JtSXRlbVNpemV9LGNoZWNrYm94R3JvdXBTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZXx8dGhpcy5fZWxGb3JtSXRlbVNpemV8fCh0aGlzLiRFTEVNRU5UfHx7fSkuc2l6ZX19LHdhdGNoOnt2YWx1ZTpmdW5jdGlvbihfdmFsdWUpe3RoaXMuZGlzcGF0Y2goIkVsRm9ybUl0ZW0iLCJlbC5mb3JtLmNoYW5nZSIsW192YWx1ZV0pfX19LGNvbXBvbmVudE5vcm1hbGl6ZXI9X193ZWJwYWNrX3JlcXVpcmVfXygwKSxjb21wb25lbnQ9T2JqZWN0KGNvbXBvbmVudE5vcm1hbGl6ZXIuYSkoc3JjX2NoZWNrYm94X2dyb3VwdnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfLHJlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9jaGVja2JveC9zcmMvY2hlY2tib3gtZ3JvdXAudnVlIjt2YXIgY2hlY2tib3hfZ3JvdXA9Y29tcG9uZW50LmV4cG9ydHM7Y2hlY2tib3hfZ3JvdXAuaW5zdGFsbD1mdW5jdGlvbihWdWUpe1Z1ZS5jb21wb25lbnQoY2hlY2tib3hfZ3JvdXAubmFtZSxjaGVja2JveF9ncm91cCl9O19fd2VicGFja19leHBvcnRzX18uZGVmYXVsdD1jaGVja2JveF9ncm91cH19KX0sZ1NJUTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwLGV4cG9ydHMuaXNFZGdlPWV4cG9ydHMuaXNJRT1leHBvcnRzLmNvZXJjZVRydXRoeVZhbHVlVG9BcnJheT1leHBvcnRzLmFycmF5RmluZD1leHBvcnRzLmFycmF5RmluZEluZGV4PWV4cG9ydHMuZXNjYXBlUmVnZXhwU3RyaW5nPWV4cG9ydHMudmFsdWVFcXVhbHM9ZXhwb3J0cy5nZW5lcmF0ZUlkPWV4cG9ydHMuZ2V0VmFsdWVCeVBhdGg9dm9pZCAwLGV4cG9ydHMubm9vcD1mdW5jdGlvbigpe30sZXhwb3J0cy5oYXNPd249ZnVuY3Rpb24ob2JqLGtleSl7cmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSl9LGV4cG9ydHMudG9PYmplY3Q9ZnVuY3Rpb24oYXJyKXtmb3IodmFyIHJlcz17fSxpPTA7aTxhcnIubGVuZ3RoO2krKylhcnJbaV0mJmV4dGVuZChyZXMsYXJyW2ldKTtyZXR1cm4gcmVzfSxleHBvcnRzLmdldFByb3BCeVBhdGg9ZnVuY3Rpb24ob2JqLHBhdGgsc3RyaWN0KXtmb3IodmFyIHRlbXBPYmo9b2JqLGtleUFycj0ocGF0aD0ocGF0aD1wYXRoLnJlcGxhY2UoL1xbKFx3KylcXS9nLCIuJDEiKSkucmVwbGFjZSgvXlwuLywiIikpLnNwbGl0KCIuIiksaT0wLGxlbj1rZXlBcnIubGVuZ3RoO2k8bGVuLTEmJih0ZW1wT2JqfHxzdHJpY3QpOysraSl7dmFyIGtleT1rZXlBcnJbaV07aWYoIShrZXkgaW4gdGVtcE9iaikpe2lmKHN0cmljdCl0aHJvdyBuZXcgRXJyb3IoInBsZWFzZSB0cmFuc2ZlciBhIHZhbGlkIHByb3AgcGF0aCB0byBmb3JtIGl0ZW0hIik7YnJlYWt9dGVtcE9iaj10ZW1wT2JqW2tleV19cmV0dXJue286dGVtcE9iaixrOmtleUFycltpXSx2OnRlbXBPYmo/dGVtcE9ialtrZXlBcnJbaV1dOm51bGx9fTt2YXIgb2JqLF92dWU9X193ZWJwYWNrX3JlcXVpcmVfXygiS3c1ciIpLF92dWUyPShvYmo9X3Z1ZSkmJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O3ZhciBoYXNPd25Qcm9wZXJ0eT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIGV4dGVuZCh0byxfZnJvbSl7Zm9yKHZhciBrZXkgaW4gX2Zyb20pdG9ba2V5XT1fZnJvbVtrZXldO3JldHVybiB0b31leHBvcnRzLmdldFZhbHVlQnlQYXRoPWZ1bmN0aW9uKG9iamVjdCxwcm9wKXtmb3IodmFyIHBhdGhzPShwcm9wPXByb3B8fCIiKS5zcGxpdCgiLiIpLGN1cnJlbnQ9b2JqZWN0LHJlc3VsdD1udWxsLGk9MCxqPXBhdGhzLmxlbmd0aDtpPGo7aSsrKXt2YXIgcGF0aD1wYXRoc1tpXTtpZighY3VycmVudClicmVhaztpZihpPT09ai0xKXtyZXN1bHQ9Y3VycmVudFtwYXRoXTticmVha31jdXJyZW50PWN1cnJlbnRbcGF0aF19cmV0dXJuIHJlc3VsdH07ZXhwb3J0cy5nZW5lcmF0ZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpfSxleHBvcnRzLnZhbHVlRXF1YWxzPWZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuITA7aWYoIShhIGluc3RhbmNlb2YgQXJyYXkpKXJldHVybiExO2lmKCEoYiBpbnN0YW5jZW9mIEFycmF5KSlyZXR1cm4hMTtpZihhLmxlbmd0aCE9PWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgaT0wO2khPT1hLmxlbmd0aDsrK2kpaWYoYVtpXSE9PWJbaV0pcmV0dXJuITE7cmV0dXJuITB9LGV4cG9ydHMuZXNjYXBlUmVnZXhwU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHZhbHVlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToiIjtyZXR1cm4gU3RyaW5nKHZhbHVlKS5yZXBsYWNlKC9bfFxce30oKVtcXV4kKyo/Ll0vZywiXFwkJiIpfTt2YXIgYXJyYXlGaW5kSW5kZXg9ZXhwb3J0cy5hcnJheUZpbmRJbmRleD1mdW5jdGlvbihhcnIscHJlZCl7Zm9yKHZhciBpPTA7aSE9PWFyci5sZW5ndGg7KytpKWlmKHByZWQoYXJyW2ldKSlyZXR1cm4gaTtyZXR1cm4tMX07ZXhwb3J0cy5hcnJheUZpbmQ9ZnVuY3Rpb24oYXJyLHByZWQpe3ZhciBpZHg9YXJyYXlGaW5kSW5kZXgoYXJyLHByZWQpO3JldHVybi0xIT09aWR4P2FycltpZHhdOnZvaWQgMH0sZXhwb3J0cy5jb2VyY2VUcnV0aHlWYWx1ZVRvQXJyYXk9ZnVuY3Rpb24odmFsKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpP3ZhbDp2YWw/W3ZhbF06W119LGV4cG9ydHMuaXNJRT1mdW5jdGlvbigpe3JldHVybiFfdnVlMi5kZWZhdWx0LnByb3RvdHlwZS4kaXNTZXJ2ZXImJiFpc05hTihOdW1iZXIoZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSl9LGV4cG9ydHMuaXNFZGdlPWZ1bmN0aW9uKCl7cmV0dXJuIV92dWUyLmRlZmF1bHQucHJvdG90eXBlLiRpc1NlcnZlciYmLTE8bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJFZGdlIil9fSwiaEYrMSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obW9kdWxlcyl7dmFyIGluc3RhbGxlZE1vZHVsZXM9e307ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7dmFyIG1vZHVsZT1pbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXT17aTptb2R1bGVJZCxsOiExLGV4cG9ydHM6e319O3JldHVybiBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLG1vZHVsZSxtb2R1bGUuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxtb2R1bGUubD0hMCxtb2R1bGUuZXhwb3J0c31yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPW1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5jPWluc3RhbGxlZE1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGV4cG9ydHMsbmFtZSxnZXR0ZXIpe19fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLG5hbWUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxuYW1lLHtlbnVtZXJhYmxlOiEwLGdldDpnZXR0ZXJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5yPWZ1bmN0aW9uKGV4cG9ydHMpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LF9fd2VicGFja19yZXF1aXJlX18udD1mdW5jdGlvbih2YWx1ZSxtb2RlKXtpZigxJm1vZGUmJih2YWx1ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKSksOCZtb2RlKXJldHVybiB2YWx1ZTtpZig0Jm1vZGUmJiJvYmplY3QiPT10eXBlb2YgdmFsdWUmJnZhbHVlJiZ2YWx1ZS5fX2VzTW9kdWxlKXJldHVybiB2YWx1ZTt2YXIgbnM9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dmFsdWV9KSwyJm1vZGUmJiJzdHJpbmciIT10eXBlb2YgdmFsdWUpZm9yKHZhciBrZXkgaW4gdmFsdWUpX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLGtleSxmdW5jdGlvbihrZXkpe3JldHVybiB2YWx1ZVtrZXldfS5iaW5kKG51bGwsa2V5KSk7cmV0dXJuIG5zfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24obW9kdWxlKXt2YXIgZ2V0dGVyPW1vZHVsZSYmbW9kdWxlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZX07cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsImEiLGdldHRlciksZ2V0dGVyfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24ob2JqZWN0LHByb3BlcnR5KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iL2Rpc3QvIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz04Myl9KHswOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnQoc2NyaXB0RXhwb3J0cyxyZW5kZXIsc3RhdGljUmVuZGVyRm5zLGZ1bmN0aW9uYWxUZW1wbGF0ZSxpbmplY3RTdHlsZXMsc2NvcGVJZCxtb2R1bGVJZGVudGlmaWVyLHNoYWRvd01vZGUpe3ZhciBob29rLG9wdGlvbnM9ImZ1bmN0aW9uIj09dHlwZW9mIHNjcmlwdEV4cG9ydHM/c2NyaXB0RXhwb3J0cy5vcHRpb25zOnNjcmlwdEV4cG9ydHM7aWYocmVuZGVyJiYob3B0aW9ucy5yZW5kZXI9cmVuZGVyLG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zPXN0YXRpY1JlbmRlckZucyxvcHRpb25zLl9jb21waWxlZD0hMCksZnVuY3Rpb25hbFRlbXBsYXRlJiYob3B0aW9ucy5mdW5jdGlvbmFsPSEwKSxzY29wZUlkJiYob3B0aW9ucy5fc2NvcGVJZD0iZGF0YS12LSIrc2NvcGVJZCksbW9kdWxlSWRlbnRpZmllcj8oaG9vaz1mdW5jdGlvbihjb250ZXh0KXsoY29udGV4dD1jb250ZXh0fHx0aGlzLiR2bm9kZSYmdGhpcy4kdm5vZGUuc3NyQ29udGV4dHx8dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LiR2bm9kZSYmdGhpcy5wYXJlbnQuJHZub2RlLnNzckNvbnRleHQpfHwidW5kZWZpbmVkIj09dHlwZW9mIF9fVlVFX1NTUl9DT05URVhUX198fChjb250ZXh0PV9fVlVFX1NTUl9DT05URVhUX18pLGluamVjdFN0eWxlcyYmaW5qZWN0U3R5bGVzLmNhbGwodGhpcyxjb250ZXh0KSxjb250ZXh0JiZjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cyYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMuYWRkKG1vZHVsZUlkZW50aWZpZXIpfSxvcHRpb25zLl9zc3JSZWdpc3Rlcj1ob29rKTppbmplY3RTdHlsZXMmJihob29rPXNoYWRvd01vZGU/ZnVuY3Rpb24oKXtpbmplY3RTdHlsZXMuY2FsbCh0aGlzLHRoaXMuJHJvb3QuJG9wdGlvbnMuc2hhZG93Um9vdCl9OmluamVjdFN0eWxlcyksaG9vaylpZihvcHRpb25zLmZ1bmN0aW9uYWwpe29wdGlvbnMuX2luamVjdFN0eWxlcz1ob29rO3ZhciBvcmlnaW5hbFJlbmRlcj1vcHRpb25zLnJlbmRlcjtvcHRpb25zLnJlbmRlcj1mdW5jdGlvbihoLGNvbnRleHQpe3JldHVybiBob29rLmNhbGwoY29udGV4dCksb3JpZ2luYWxSZW5kZXIoaCxjb250ZXh0KX19ZWxzZXt2YXIgZXhpc3Rpbmc9b3B0aW9ucy5iZWZvcmVDcmVhdGU7b3B0aW9ucy5iZWZvcmVDcmVhdGU9ZXhpc3Rpbmc/W10uY29uY2F0KGV4aXN0aW5nLGhvb2spOltob29rXX1yZXR1cm57ZXhwb3J0czpzY3JpcHRFeHBvcnRzLG9wdGlvbnM6b3B0aW9uc319X193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImEiLGZ1bmN0aW9uKCl7cmV0dXJuIG5vcm1hbGl6ZUNvbXBvbmVudH0pfSw4MzpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO3ZhciByZW5kZXI9ZnVuY3Rpb24oKXt2YXIgX2g9dGhpcy4kY3JlYXRlRWxlbWVudDtyZXR1cm4odGhpcy5fc2VsZi5fY3x8X2gpKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtYnV0dG9uLWdyb3VwIn0sW3RoaXMuX3QoImRlZmF1bHQiKV0sMil9O3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBzcmNfYnV0dG9uX2dyb3VwdnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfPXtuYW1lOiJFbEJ1dHRvbkdyb3VwIn0sY29tcG9uZW50Tm9ybWFsaXplcj1fX3dlYnBhY2tfcmVxdWlyZV9fKDApLGNvbXBvbmVudD1PYmplY3QoY29tcG9uZW50Tm9ybWFsaXplci5hKShzcmNfYnV0dG9uX2dyb3VwdnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfLHJlbmRlcixbXSwhMSxudWxsLG51bGwsbnVsbCk7Y29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJwYWNrYWdlcy9idXR0b24vc3JjL2J1dHRvbi1ncm91cC52dWUiO3ZhciBidXR0b25fZ3JvdXA9Y29tcG9uZW50LmV4cG9ydHM7YnV0dG9uX2dyb3VwLmluc3RhbGw9ZnVuY3Rpb24oVnVlKXtWdWUuY29tcG9uZW50KGJ1dHRvbl9ncm91cC5uYW1lLGJ1dHRvbl9ncm91cCl9O19fd2VicGFja19leHBvcnRzX18uZGVmYXVsdD1idXR0b25fZ3JvdXB9fSl9LGk3d0U6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obW9kdWxlcyl7dmFyIGluc3RhbGxlZE1vZHVsZXM9e307ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7dmFyIG1vZHVsZT1pbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXT17aTptb2R1bGVJZCxsOiExLGV4cG9ydHM6e319O3JldHVybiBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLG1vZHVsZSxtb2R1bGUuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxtb2R1bGUubD0hMCxtb2R1bGUuZXhwb3J0c31yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPW1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5jPWluc3RhbGxlZE1vZHVsZXMsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGV4cG9ydHMsbmFtZSxnZXR0ZXIpe19fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLG5hbWUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxuYW1lLHtlbnVtZXJhYmxlOiEwLGdldDpnZXR0ZXJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5yPWZ1bmN0aW9uKGV4cG9ydHMpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LF9fd2VicGFja19yZXF1aXJlX18udD1mdW5jdGlvbih2YWx1ZSxtb2RlKXtpZigxJm1vZGUmJih2YWx1ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKSksOCZtb2RlKXJldHVybiB2YWx1ZTtpZig0Jm1vZGUmJiJvYmplY3QiPT10eXBlb2YgdmFsdWUmJnZhbHVlJiZ2YWx1ZS5fX2VzTW9kdWxlKXJldHVybiB2YWx1ZTt2YXIgbnM9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dmFsdWV9KSwyJm1vZGUmJiJzdHJpbmciIT10eXBlb2YgdmFsdWUpZm9yKHZhciBrZXkgaW4gdmFsdWUpX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLGtleSxmdW5jdGlvbihrZXkpe3JldHVybiB2YWx1ZVtrZXldfS5iaW5kKG51bGwsa2V5KSk7cmV0dXJuIG5zfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24obW9kdWxlKXt2YXIgZ2V0dGVyPW1vZHVsZSYmbW9kdWxlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZX07cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsImEiLGdldHRlciksZ2V0dGVyfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24ob2JqZWN0LHByb3BlcnR5KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iL2Rpc3QvIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0xMTEpfSh7MDpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50KHNjcmlwdEV4cG9ydHMscmVuZGVyLHN0YXRpY1JlbmRlckZucyxmdW5jdGlvbmFsVGVtcGxhdGUsaW5qZWN0U3R5bGVzLHNjb3BlSWQsbW9kdWxlSWRlbnRpZmllcixzaGFkb3dNb2RlKXt2YXIgaG9vayxvcHRpb25zPSJmdW5jdGlvbiI9PXR5cGVvZiBzY3JpcHRFeHBvcnRzP3NjcmlwdEV4cG9ydHMub3B0aW9uczpzY3JpcHRFeHBvcnRzO2lmKHJlbmRlciYmKG9wdGlvbnMucmVuZGVyPXJlbmRlcixvcHRpb25zLnN0YXRpY1JlbmRlckZucz1zdGF0aWNSZW5kZXJGbnMsb3B0aW9ucy5fY29tcGlsZWQ9ITApLGZ1bmN0aW9uYWxUZW1wbGF0ZSYmKG9wdGlvbnMuZnVuY3Rpb25hbD0hMCksc2NvcGVJZCYmKG9wdGlvbnMuX3Njb3BlSWQ9ImRhdGEtdi0iK3Njb3BlSWQpLG1vZHVsZUlkZW50aWZpZXI/KGhvb2s9ZnVuY3Rpb24oY29udGV4dCl7KGNvbnRleHQ9Y29udGV4dHx8dGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR8fHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC4kdm5vZGUmJnRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0KXx8InVuZGVmaW5lZCI9PXR5cGVvZiBfX1ZVRV9TU1JfQ09OVEVYVF9ffHwoY29udGV4dD1fX1ZVRV9TU1JfQ09OVEVYVF9fKSxpbmplY3RTdHlsZXMmJmluamVjdFN0eWxlcy5jYWxsKHRoaXMsY29udGV4dCksY29udGV4dCYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMmJmNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzLmFkZChtb2R1bGVJZGVudGlmaWVyKX0sb3B0aW9ucy5fc3NyUmVnaXN0ZXI9aG9vayk6aW5qZWN0U3R5bGVzJiYoaG9vaz1zaGFkb3dNb2RlP2Z1bmN0aW9uKCl7aW5qZWN0U3R5bGVzLmNhbGwodGhpcyx0aGlzLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpfTppbmplY3RTdHlsZXMpLGhvb2spaWYob3B0aW9ucy5mdW5jdGlvbmFsKXtvcHRpb25zLl9pbmplY3RTdHlsZXM9aG9vazt2YXIgb3JpZ2luYWxSZW5kZXI9b3B0aW9ucy5yZW5kZXI7b3B0aW9ucy5yZW5kZXI9ZnVuY3Rpb24oaCxjb250ZXh0KXtyZXR1cm4gaG9vay5jYWxsKGNvbnRleHQpLG9yaWdpbmFsUmVuZGVyKGgsY29udGV4dCl9fWVsc2V7dmFyIGV4aXN0aW5nPW9wdGlvbnMuYmVmb3JlQ3JlYXRlO29wdGlvbnMuYmVmb3JlQ3JlYXRlPWV4aXN0aW5nP1tdLmNvbmNhdChleGlzdGluZyxob29rKTpbaG9va119cmV0dXJue2V4cG9ydHM6c2NyaXB0RXhwb3J0cyxvcHRpb25zOm9wdGlvbnN9fV9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJhIixmdW5jdGlvbigpe3JldHVybiBub3JtYWxpemVDb21wb25lbnR9KX0sMTExOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7dmFyIHNyY190YWd2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc189e25hbWU6IkVsVGFnIixwcm9wczp7dGV4dDpTdHJpbmcsY2xvc2FibGU6Qm9vbGVhbix0eXBlOlN0cmluZyxoaXQ6Qm9vbGVhbixkaXNhYmxlVHJhbnNpdGlvbnM6Qm9vbGVhbixjb2xvcjpTdHJpbmcsc2l6ZTpTdHJpbmd9LG1ldGhvZHM6e2hhbmRsZUNsb3NlOmZ1bmN0aW9uKGV2ZW50KXtldmVudC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLiRlbWl0KCJjbG9zZSIsZXZlbnQpfSxoYW5kbGVDbGljazpmdW5jdGlvbihldmVudCl7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy4kZW1pdCgiY2xpY2siLGV2ZW50KX19LGNvbXB1dGVkOnt0YWdTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZXx8KHRoaXMuJEVMRU1FTlR8fHt9KS5zaXplfX0scmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciB0YWdFbD1oKCJzcGFuIix7Y2xhc3M6WyJlbC10YWciLHRoaXMudHlwZT8iZWwtdGFnLS0iK3RoaXMudHlwZToiIix0aGlzLnRhZ1NpemU/ImVsLXRhZy0tIit0aGlzLnRhZ1NpemU6IiIseyJpcy1oaXQiOnRoaXMuaGl0fV0sc3R5bGU6e2JhY2tncm91bmRDb2xvcjp0aGlzLmNvbG9yfSxvbjp7Y2xpY2s6dGhpcy5oYW5kbGVDbGlja319LFt0aGlzLiRzbG90cy5kZWZhdWx0LHRoaXMuY2xvc2FibGUmJmgoImkiLHtjbGFzczoiZWwtdGFnX19jbG9zZSBlbC1pY29uLWNsb3NlIixvbjp7Y2xpY2s6dGhpcy5oYW5kbGVDbG9zZX19KV0pO3JldHVybiB0aGlzLmRpc2FibGVUcmFuc2l0aW9ucz90YWdFbDpoKCJ0cmFuc2l0aW9uIix7YXR0cnM6e25hbWU6ImVsLXpvb20taW4tY2VudGVyIn19LFt0YWdFbF0pfX0sY29tcG9uZW50Tm9ybWFsaXplcj1fX3dlYnBhY2tfcmVxdWlyZV9fKDApLGNvbXBvbmVudD1PYmplY3QoY29tcG9uZW50Tm9ybWFsaXplci5hKShzcmNfdGFndnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfLHZvaWQgMCx2b2lkIDAsITEsbnVsbCxudWxsLG51bGwpO2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0icGFja2FnZXMvdGFnL3NyYy90YWcudnVlIjt2YXIgdGFnPWNvbXBvbmVudC5leHBvcnRzO3RhZy5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudCh0YWcubmFtZSx0YWcpfTtfX3dlYnBhY2tfZXhwb3J0c19fLmRlZmF1bHQ9dGFnfX0pfSxuWDZLOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITA7dmFyIF90eXBlb2Y9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9ian06ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZvYmouY29uc3RydWN0b3I9PT1TeW1ib2wmJm9iaiE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIG9ian07ZXhwb3J0cy5kZWZhdWx0PWZ1bmN0aW9uKFZ1ZSl7cmV0dXJuIGZ1bmN0aW9uKHN0cmluZyl7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1BcnJheSgxPF9sZW4/X2xlbi0xOjApLF9rZXk9MTtfa2V5PF9sZW47X2tleSsrKWFyZ3NbX2tleS0xXT1hcmd1bWVudHNbX2tleV07cmV0dXJuIDE9PT1hcmdzLmxlbmd0aCYmIm9iamVjdCI9PT1fdHlwZW9mKGFyZ3NbMF0pJiYoYXJncz1hcmdzWzBdKSxhcmdzJiZhcmdzLmhhc093blByb3BlcnR5fHwoYXJncz17fSksc3RyaW5nLnJlcGxhY2UoUkVfTkFSR1MsZnVuY3Rpb24obWF0Y2gscHJlZml4LGksaW5kZXgpe3ZhciByZXN1bHQ9dm9pZCAwO3JldHVybiJ7Ij09PXN0cmluZ1tpbmRleC0xXSYmIn0iPT09c3RyaW5nW2luZGV4K21hdGNoLmxlbmd0aF0/aTpudWxsPT0ocmVzdWx0PSgwLF91dGlsLmhhc093bikoYXJncyxpKT9hcmdzW2ldOm51bGwpPyIiOnJlc3VsdH0pfX07dmFyIF91dGlsPV9fd2VicGFja19yZXF1aXJlX18oImdTSVEiKSxSRV9OQVJHUz0vKCV8KVx7KFswLTlhLXpBLVpfXSspXH0vZ30sd29RdjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihtb2R1bGVzKXt2YXIgaW5zdGFsbGVkTW9kdWxlcz17fTtmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKXtpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czt2YXIgbW9kdWxlPWluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdPXtpOm1vZHVsZUlkLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsbW9kdWxlLG1vZHVsZS5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLG1vZHVsZS5sPSEwLG1vZHVsZS5leHBvcnRzfXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLm09bW9kdWxlcyxfX3dlYnBhY2tfcmVxdWlyZV9fLmM9aW5zdGFsbGVkTW9kdWxlcyxfX3dlYnBhY2tfcmVxdWlyZV9fLmQ9ZnVuY3Rpb24oZXhwb3J0cyxuYW1lLGdldHRlcil7X193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsbmFtZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLG5hbWUse2VudW1lcmFibGU6ITAsZ2V0OmdldHRlcn0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnI9ZnVuY3Rpb24oZXhwb3J0cyl7InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy50PWZ1bmN0aW9uKHZhbHVlLG1vZGUpe2lmKDEmbW9kZSYmKHZhbHVlPV9fd2VicGFja19yZXF1aXJlX18odmFsdWUpKSw4Jm1vZGUpcmV0dXJuIHZhbHVlO2lmKDQmbW9kZSYmIm9iamVjdCI9PXR5cGVvZiB2YWx1ZSYmdmFsdWUmJnZhbHVlLl9fZXNNb2R1bGUpcmV0dXJuIHZhbHVlO3ZhciBucz1PYmplY3QuY3JlYXRlKG51bGwpO2lmKF9fd2VicGFja19yZXF1aXJlX18ucihucyksT2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCJkZWZhdWx0Iix7ZW51bWVyYWJsZTohMCx2YWx1ZTp2YWx1ZX0pLDImbW9kZSYmInN0cmluZyIhPXR5cGVvZiB2YWx1ZSlmb3IodmFyIGtleSBpbiB2YWx1ZSlfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsa2V5LGZ1bmN0aW9uKGtleSl7cmV0dXJuIHZhbHVlW2tleV19LmJpbmQobnVsbCxrZXkpKTtyZXR1cm4gbnN9LF9fd2VicGFja19yZXF1aXJlX18ubj1mdW5jdGlvbihtb2R1bGUpe3ZhciBnZXR0ZXI9bW9kdWxlJiZtb2R1bGUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBtb2R1bGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlfTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwiYSIsZ2V0dGVyKSxnZXR0ZXJ9LF9fd2VicGFja19yZXF1aXJlX18ubz1mdW5jdGlvbihvYmplY3QscHJvcGVydHkpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LHByb3BlcnR5KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5wPSIvZGlzdC8iLF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTkxKX0oezA6ZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG5vcm1hbGl6ZUNvbXBvbmVudChzY3JpcHRFeHBvcnRzLHJlbmRlcixzdGF0aWNSZW5kZXJGbnMsZnVuY3Rpb25hbFRlbXBsYXRlLGluamVjdFN0eWxlcyxzY29wZUlkLG1vZHVsZUlkZW50aWZpZXIsc2hhZG93TW9kZSl7dmFyIGhvb2ssb3B0aW9ucz0iZnVuY3Rpb24iPT10eXBlb2Ygc2NyaXB0RXhwb3J0cz9zY3JpcHRFeHBvcnRzLm9wdGlvbnM6c2NyaXB0RXhwb3J0cztpZihyZW5kZXImJihvcHRpb25zLnJlbmRlcj1yZW5kZXIsb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnM9c3RhdGljUmVuZGVyRm5zLG9wdGlvbnMuX2NvbXBpbGVkPSEwKSxmdW5jdGlvbmFsVGVtcGxhdGUmJihvcHRpb25zLmZ1bmN0aW9uYWw9ITApLHNjb3BlSWQmJihvcHRpb25zLl9zY29wZUlkPSJkYXRhLXYtIitzY29wZUlkKSxtb2R1bGVJZGVudGlmaWVyPyhob29rPWZ1bmN0aW9uKGNvbnRleHQpeyhjb250ZXh0PWNvbnRleHR8fHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fHx0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuJHZub2RlJiZ0aGlzLnBhcmVudC4kdm5vZGUuc3NyQ29udGV4dCl8fCJ1bmRlZmluZWQiPT10eXBlb2YgX19WVUVfU1NSX0NPTlRFWFRfX3x8KGNvbnRleHQ9X19WVUVfU1NSX0NPTlRFWFRfXyksaW5qZWN0U3R5bGVzJiZpbmplY3RTdHlsZXMuY2FsbCh0aGlzLGNvbnRleHQpLGNvbnRleHQmJmNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzJiZjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cy5hZGQobW9kdWxlSWRlbnRpZmllcil9LG9wdGlvbnMuX3NzclJlZ2lzdGVyPWhvb2spOmluamVjdFN0eWxlcyYmKGhvb2s9c2hhZG93TW9kZT9mdW5jdGlvbigpe2luamVjdFN0eWxlcy5jYWxsKHRoaXMsdGhpcy4kcm9vdC4kb3B0aW9ucy5zaGFkb3dSb290KX06aW5qZWN0U3R5bGVzKSxob29rKWlmKG9wdGlvbnMuZnVuY3Rpb25hbCl7b3B0aW9ucy5faW5qZWN0U3R5bGVzPWhvb2s7dmFyIG9yaWdpbmFsUmVuZGVyPW9wdGlvbnMucmVuZGVyO29wdGlvbnMucmVuZGVyPWZ1bmN0aW9uKGgsY29udGV4dCl7cmV0dXJuIGhvb2suY2FsbChjb250ZXh0KSxvcmlnaW5hbFJlbmRlcihoLGNvbnRleHQpfX1lbHNle3ZhciBleGlzdGluZz1vcHRpb25zLmJlZm9yZUNyZWF0ZTtvcHRpb25zLmJlZm9yZUNyZWF0ZT1leGlzdGluZz9bXS5jb25jYXQoZXhpc3RpbmcsaG9vayk6W2hvb2tdfXJldHVybntleHBvcnRzOnNjcmlwdEV4cG9ydHMsb3B0aW9uczpvcHRpb25zfX1fX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiYSIsZnVuY3Rpb24oKXtyZXR1cm4gbm9ybWFsaXplQ29tcG9uZW50fSl9LDkxOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7dmFyIHJlbmRlcj1mdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1wcm9ncmVzcyIsY2xhc3M6WyJlbC1wcm9ncmVzcy0tIitfdm0udHlwZSxfdm0uc3RhdHVzPyJpcy0iK192bS5zdGF0dXM6IiIseyJlbC1wcm9ncmVzcy0td2l0aG91dC10ZXh0IjohX3ZtLnNob3dUZXh0LCJlbC1wcm9ncmVzcy0tdGV4dC1pbnNpZGUiOl92bS50ZXh0SW5zaWRlfV0sYXR0cnM6e3JvbGU6InByb2dyZXNzYmFyIiwiYXJpYS12YWx1ZW5vdyI6X3ZtLnBlcmNlbnRhZ2UsImFyaWEtdmFsdWVtaW4iOiIwIiwiYXJpYS12YWx1ZW1heCI6IjEwMCJ9fSxbImxpbmUiPT09X3ZtLnR5cGU/X2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1wcm9ncmVzcy1iYXIifSxbX2MoImRpdiIse3N0YXRpY0NsYXNzOiJlbC1wcm9ncmVzcy1iYXJfX291dGVyIixzdHlsZTp7aGVpZ2h0Ol92bS5zdHJva2VXaWR0aCsicHgifX0sW19jKCJkaXYiLHtzdGF0aWNDbGFzczoiZWwtcHJvZ3Jlc3MtYmFyX19pbm5lciIsc3R5bGU6X3ZtLmJhclN0eWxlfSxbX3ZtLnNob3dUZXh0JiZfdm0udGV4dEluc2lkZT9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXByb2dyZXNzLWJhcl9faW5uZXJUZXh0In0sW192bS5fdihfdm0uX3MoX3ZtLnBlcmNlbnRhZ2UpKyIlIildKTpfdm0uX2UoKV0pXSldKTpfYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXByb2dyZXNzLWNpcmNsZSIsc3R5bGU6e2hlaWdodDpfdm0ud2lkdGgrInB4Iix3aWR0aDpfdm0ud2lkdGgrInB4In19LFtfYygic3ZnIix7YXR0cnM6e3ZpZXdCb3g6IjAgMCAxMDAgMTAwIn19LFtfYygicGF0aCIse3N0YXRpY0NsYXNzOiJlbC1wcm9ncmVzcy1jaXJjbGVfX3RyYWNrIixhdHRyczp7ZDpfdm0udHJhY2tQYXRoLHN0cm9rZToiI2U1ZTlmMiIsInN0cm9rZS13aWR0aCI6X3ZtLnJlbGF0aXZlU3Ryb2tlV2lkdGgsZmlsbDoibm9uZSJ9fSksX2MoInBhdGgiLHtzdGF0aWNDbGFzczoiZWwtcHJvZ3Jlc3MtY2lyY2xlX19wYXRoIixzdHlsZTpfdm0uY2lyY2xlUGF0aFN0eWxlLGF0dHJzOntkOl92bS50cmFja1BhdGgsInN0cm9rZS1saW5lY2FwIjoicm91bmQiLHN0cm9rZTpfdm0uc3Ryb2tlLCJzdHJva2Utd2lkdGgiOl92bS5yZWxhdGl2ZVN0cm9rZVdpZHRoLGZpbGw6Im5vbmUifX0pXSldKSxfdm0uc2hvd1RleHQmJiFfdm0udGV4dEluc2lkZT9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImVsLXByb2dyZXNzX190ZXh0IixzdHlsZTp7Zm9udFNpemU6X3ZtLnByb2dyZXNzVGV4dFNpemUrInB4In19LFtfdm0uc3RhdHVzP1sidGV4dCI9PT1fdm0uc3RhdHVzP192bS5fdCgiZGVmYXVsdCIpOl9jKCJpIix7Y2xhc3M6X3ZtLmljb25DbGFzc30pXTpbX3ZtLl92KF92bS5fcyhfdm0ucGVyY2VudGFnZSkrIiUiKV1dLDIpOl92bS5fZSgpXSl9O3JlbmRlci5fd2l0aFN0cmlwcGVkPSEwO3ZhciBzcmNfcHJvZ3Jlc3N2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc189e25hbWU6IkVsUHJvZ3Jlc3MiLHByb3BzOnt0eXBlOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJsaW5lIix2YWxpZGF0b3I6ZnVuY3Rpb24odmFsKXtyZXR1cm4tMTxbImxpbmUiLCJjaXJjbGUiXS5pbmRleE9mKHZhbCl9fSxwZXJjZW50YWdlOnt0eXBlOk51bWJlcixkZWZhdWx0OjAscmVxdWlyZWQ6ITAsdmFsaWRhdG9yOmZ1bmN0aW9uKHZhbCl7cmV0dXJuIDA8PXZhbCYmdmFsPD0xMDB9fSxzdGF0dXM6e3R5cGU6U3RyaW5nLHZhbGlkYXRvcjpmdW5jdGlvbih2YWwpe3JldHVybi0xPFsidGV4dCIsInN1Y2Nlc3MiLCJleGNlcHRpb24iXS5pbmRleE9mKHZhbCl9fSxzdHJva2VXaWR0aDp7dHlwZTpOdW1iZXIsZGVmYXVsdDo2fSx0ZXh0SW5zaWRlOnt0eXBlOkJvb2xlYW4sZGVmYXVsdDohMX0sd2lkdGg6e3R5cGU6TnVtYmVyLGRlZmF1bHQ6MTI2fSxzaG93VGV4dDp7dHlwZTpCb29sZWFuLGRlZmF1bHQ6ITB9LGNvbG9yOnt0eXBlOlN0cmluZyxkZWZhdWx0OiIifX0sY29tcHV0ZWQ6e2JhclN0eWxlOmZ1bmN0aW9uKCl7dmFyIHN0eWxlPXt9O3JldHVybiBzdHlsZS53aWR0aD10aGlzLnBlcmNlbnRhZ2UrIiUiLHN0eWxlLmJhY2tncm91bmRDb2xvcj10aGlzLmNvbG9yLHN0eWxlfSxyZWxhdGl2ZVN0cm9rZVdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuc3Ryb2tlV2lkdGgvdGhpcy53aWR0aCoxMDApLnRvRml4ZWQoMSl9LHRyYWNrUGF0aDpmdW5jdGlvbigpe3ZhciByYWRpdXM9cGFyc2VJbnQoNTAtcGFyc2VGbG9hdCh0aGlzLnJlbGF0aXZlU3Ryb2tlV2lkdGgpLzIsMTApO3JldHVybiJNIDUwIDUwIG0gMCAtIityYWRpdXMrIiBhICIrcmFkaXVzKyIgIityYWRpdXMrIiAwIDEgMSAwICIrMipyYWRpdXMrIiBhICIrcmFkaXVzKyIgIityYWRpdXMrIiAwIDEgMSAwIC0iKzIqcmFkaXVzfSxwZXJpbWV0ZXI6ZnVuY3Rpb24oKXt2YXIgcmFkaXVzPTUwLXBhcnNlRmxvYXQodGhpcy5yZWxhdGl2ZVN0cm9rZVdpZHRoKS8yO3JldHVybiAyKk1hdGguUEkqcmFkaXVzfSxjaXJjbGVQYXRoU3R5bGU6ZnVuY3Rpb24oKXt2YXIgcGVyaW1ldGVyPXRoaXMucGVyaW1ldGVyO3JldHVybntzdHJva2VEYXNoYXJyYXk6cGVyaW1ldGVyKyJweCwiK3BlcmltZXRlcisicHgiLHN0cm9rZURhc2hvZmZzZXQ6KDEtdGhpcy5wZXJjZW50YWdlLzEwMCkqcGVyaW1ldGVyKyJweCIsdHJhbnNpdGlvbjoic3Ryb2tlLWRhc2hvZmZzZXQgMC42cyBlYXNlIDBzLCBzdHJva2UgMC42cyBlYXNlIn19LHN0cm9rZTpmdW5jdGlvbigpe3ZhciByZXQ9dm9pZCAwO2lmKHRoaXMuY29sb3IpcmV0PXRoaXMuY29sb3I7ZWxzZSBzd2l0Y2godGhpcy5zdGF0dXMpe2Nhc2Uic3VjY2VzcyI6cmV0PSIjMTNjZTY2IjticmVhaztjYXNlImV4Y2VwdGlvbiI6cmV0PSIjZmY0OTQ5IjticmVhaztkZWZhdWx0OnJldD0iIzIwYTBmZiJ9cmV0dXJuIHJldH0saWNvbkNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuImxpbmUiPT09dGhpcy50eXBlPyJzdWNjZXNzIj09PXRoaXMuc3RhdHVzPyJlbC1pY29uLWNpcmNsZS1jaGVjayI6ImVsLWljb24tY2lyY2xlLWNsb3NlIjoic3VjY2VzcyI9PT10aGlzLnN0YXR1cz8iZWwtaWNvbi1jaGVjayI6ImVsLWljb24tY2xvc2UifSxwcm9ncmVzc1RleHRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuImxpbmUiPT09dGhpcy50eXBlPzEyKy40KnRoaXMuc3Ryb2tlV2lkdGg6LjExMTExMSp0aGlzLndpZHRoKzJ9fX0sY29tcG9uZW50Tm9ybWFsaXplcj1fX3dlYnBhY2tfcmVxdWlyZV9fKDApLGNvbXBvbmVudD1PYmplY3QoY29tcG9uZW50Tm9ybWFsaXplci5hKShzcmNfcHJvZ3Jlc3N2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc18scmVuZGVyLFtdLCExLG51bGwsbnVsbCxudWxsKTtjb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9InBhY2thZ2VzL3Byb2dyZXNzL3NyYy9wcm9ncmVzcy52dWUiO3ZhciBwcm9ncmVzcz1jb21wb25lbnQuZXhwb3J0cztwcm9ncmVzcy5pbnN0YWxsPWZ1bmN0aW9uKFZ1ZSl7VnVlLmNvbXBvbmVudChwcm9ncmVzcy5uYW1lLHByb2dyZXNzKX07X193ZWJwYWNrX2V4cG9ydHNfXy5kZWZhdWx0PXByb2dyZXNzfX0pfSx4V3F0OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITAsZXhwb3J0cy5kZWZhdWx0PWZ1bmN0aW9uKGluc3RhbmNlLGNhbGxiYWNrKXt2YXIgc3BlZWQ9Mjxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjMwMCxvbmNlPTM8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzNdJiZhcmd1bWVudHNbM107aWYoIWluc3RhbmNlfHwhY2FsbGJhY2spdGhyb3cgbmV3IEVycm9yKCJpbnN0YW5jZSAmIGNhbGxiYWNrIGlzIHJlcXVpcmVkIik7dmFyIGNhbGxlZD0hMSxhZnRlckxlYXZlQ2FsbGJhY2s9ZnVuY3Rpb24oKXtjYWxsZWR8fChjYWxsZWQ9ITAsY2FsbGJhY2smJmNhbGxiYWNrLmFwcGx5KG51bGwsYXJndW1lbnRzKSl9O29uY2U/aW5zdGFuY2UuJG9uY2UoImFmdGVyLWxlYXZlIixhZnRlckxlYXZlQ2FsbGJhY2spOmluc3RhbmNlLiRvbigiYWZ0ZXItbGVhdmUiLGFmdGVyTGVhdmVDYWxsYmFjayksc2V0VGltZW91dChmdW5jdGlvbigpe2FmdGVyTGVhdmVDYWxsYmFjaygpfSxzcGVlZCsxMDApfX19XSk7</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="6177421" offset="0" length="16384" />
          <PacketInfo time="6177531" offset="16384" length="16384" />
          <PacketInfo time="6177703" offset="32768" length="16384" />
          <PacketInfo time="6178375" offset="49152" length="16384" />
          <PacketInfo time="6178656" offset="65536" length="16384" />
          <PacketInfo time="6178796" offset="81920" length="16384" />
          <PacketInfo time="6178890" offset="98304" length="16384" />
          <PacketInfo time="6179109" offset="114688" length="16384" />
          <PacketInfo time="6179234" offset="131072" length="16384" />
          <PacketInfo time="6180421" offset="147456" length="16384" />
          <PacketInfo time="6180484" offset="163840" length="16384" />
          <PacketInfo time="6180562" offset="180224" length="16384" />
          <PacketInfo time="6181437" offset="196608" length="16384" />
          <PacketInfo time="6181437" offset="212992" length="16384" />
          <PacketInfo time="6181468" offset="229376" length="16384" />
          <PacketInfo time="6181546" offset="245760" length="16384" />
          <PacketInfo time="6181593" offset="262144" length="16384" />
          <PacketInfo time="6181656" offset="278528" length="16384" />
          <PacketInfo time="6181843" offset="294912" length="16384" />
          <PacketInfo time="6182015" offset="311296" length="16384" />
          <PacketInfo time="6182031" offset="327680" length="16384" />
          <PacketInfo time="6182031" offset="344064" length="16384" />
          <PacketInfo time="6182703" offset="360448" length="16384" />
          <PacketInfo time="6182750" offset="376832" length="16384" />
          <PacketInfo time="6182875" offset="393216" length="16384" />
          <PacketInfo time="6183562" offset="409600" length="16384" />
          <PacketInfo time="6183578" offset="425984" length="16384" />
          <PacketInfo time="6183593" offset="442368" length="16384" />
          <PacketInfo time="6183609" offset="458752" length="16384" />
          <PacketInfo time="6183609" offset="475136" length="16384" />
          <PacketInfo time="6183609" offset="491520" length="16384" />
          <PacketInfo time="6183625" offset="507904" length="16384" />
          <PacketInfo time="6183625" offset="524288" length="16384" />
          <PacketInfo time="6183656" offset="540672" length="16384" />
          <PacketInfo time="6183718" offset="557056" length="16384" />
          <PacketInfo time="6183765" offset="573440" length="16384" />
          <PacketInfo time="6183828" offset="589824" length="16384" />
          <PacketInfo time="6183906" offset="606208" length="16384" />
          <PacketInfo time="6184031" offset="622592" length="16384" />
          <PacketInfo time="6184078" offset="638976" length="16384" />
          <PacketInfo time="6184156" offset="655360" length="16384" />
          <PacketInfo time="6184234" offset="671744" length="16384" />
          <PacketInfo time="6184343" offset="688128" length="8086" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="10679" hostname="center.t.dacube.cn" path="/static/js/runtime.c0a6c5aa.js" url="https://center.t.dacube.cn/static/js/runtime.c0a6c5aa.js" ip="139.9.5.231" port="443" connectionId="14" origin="HTML" frame="1" startDateTime="2019-04-16T14:14:17.061+08:00" startTime="6176156" endTime="6177421">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2VudGVyLnQuZGFjdWJlLmNu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2Mjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24v</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>emgtQ04semg7cT0wLjg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdGF0aWMvanMvcnVudGltZS5jMGE2YzVhYS5qcyBIVFRQLzEuMQ0KSG9zdDogY2VudGVyLnQuZGFjdWJlLmNuDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzU2LjAuMjkyNC45MCBTYWZhcmkvNTM3LjM2IDIzNDVFeHBsb3Jlci85LjYuMC4xODYyNw0KQWNjZXB0OiAqLyoNClJlZmVyZXI6IGh0dHBzOi8vY2VudGVyLnQuZGFjdWJlLmNuLw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiB6aC1DTix6aDtxPTAuOA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>6424</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xMi4y</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NjQyNA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjVjYWViMjRhLTE5MTgi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuMTIuMg0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowOTozMCBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDY0MjQNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMTEgQXByIDIwMTkgMDM6MTk6MzggR01UDQpFVGFnOiAiNWNhZWIyNGEtMTkxOCINCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IWZ1bmN0aW9uKG1vZHVsZXMpe2Z1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpe2Zvcih2YXIgbW9kdWxlSWQsY2h1bmtJZCxjaHVua0lkcz1kYXRhWzBdLG1vcmVNb2R1bGVzPWRhdGFbMV0sZXhlY3V0ZU1vZHVsZXM9ZGF0YVsyXSxpPTAscmVzb2x2ZXM9W107aTxjaHVua0lkcy5sZW5ndGg7aSsrKWNodW5rSWQ9Y2h1bmtJZHNbaV0saW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdJiZyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSksaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdPTA7Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcyxtb2R1bGVJZCkmJihtb2R1bGVzW21vZHVsZUlkXT1tb3JlTW9kdWxlc1ttb2R1bGVJZF0pO2ZvcihwYXJlbnRKc29ucEZ1bmN0aW9uJiZwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO3Jlc29sdmVzLmxlbmd0aDspcmVzb2x2ZXMuc2hpZnQoKSgpO3JldHVybiBkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsZXhlY3V0ZU1vZHVsZXN8fFtdKSxjaGVja0RlZmVycmVkTW9kdWxlcygpfWZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCl7Zm9yKHZhciByZXN1bHQsaT0wO2k8ZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDtpKyspe2Zvcih2YXIgZGVmZXJyZWRNb2R1bGU9ZGVmZXJyZWRNb2R1bGVzW2ldLGZ1bGZpbGxlZD0hMCxqPTE7ajxkZWZlcnJlZE1vZHVsZS5sZW5ndGg7aisrKXt2YXIgZGVwSWQ9ZGVmZXJyZWRNb2R1bGVbal07MCE9PWluc3RhbGxlZENodW5rc1tkZXBJZF0mJihmdWxmaWxsZWQ9ITEpfWZ1bGZpbGxlZCYmKGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLDEpLHJlc3VsdD1fX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz1kZWZlcnJlZE1vZHVsZVswXSkpfXJldHVybiByZXN1bHR9dmFyIGluc3RhbGxlZE1vZHVsZXM9e30saW5zdGFsbGVkQ3NzQ2h1bmtzPXtydW50aW1lOjB9LGluc3RhbGxlZENodW5rcz17cnVudGltZTowfSxkZWZlcnJlZE1vZHVsZXM9W107ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7dmFyIG1vZHVsZT1pbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXT17aTptb2R1bGVJZCxsOiExLGV4cG9ydHM6e319O3JldHVybiBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLG1vZHVsZSxtb2R1bGUuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxtb2R1bGUubD0hMCxtb2R1bGUuZXhwb3J0c31fX3dlYnBhY2tfcmVxdWlyZV9fLmU9ZnVuY3Rpb24oY2h1bmtJZCl7dmFyIHByb21pc2VzPVtdO2luc3RhbGxlZENzc0NodW5rc1tjaHVua0lkXT9wcm9taXNlcy5wdXNoKGluc3RhbGxlZENzc0NodW5rc1tjaHVua0lkXSk6MCE9PWluc3RhbGxlZENzc0NodW5rc1tjaHVua0lkXSYmeyJjaHVuay05Mzg5IjoxLCJjaHVuay00NzZjIjoxLCJjaHVuay02Mjg1IjoxLCJjaHVuay1jYjZlIjoxLCJjaHVuay0yOWRiIjoxLCJjaHVuay1iYTJmIjoxLCJjaHVuay04ZWJiIjoxLCJjaHVuay0wM2Y1IjoxLCJjaHVuay0xZDM1IjoxLCJjaHVuay0zNmZmIjoxLCJjaHVuay0zODRmIjoxLCJjaHVuay0zZmZlIjoxLCJjaHVuay00Y2Y2IjoxLCJjaHVuay1iNWU0IjoxfVtjaHVua0lkXSYmcHJvbWlzZXMucHVzaChpbnN0YWxsZWRDc3NDaHVua3NbY2h1bmtJZF09bmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe2Zvcih2YXIgaHJlZj0ic3RhdGljL2Nzcy8iKyh7fVtjaHVua0lkXXx8Y2h1bmtJZCkrIi4iK3tMdkRsOiIzMWQ2Y2ZlMCIsImNodW5rLTkzODkiOiI2ODk2OGU0OCIsImNodW5rLTQ3NmMiOiJhMjU2ZjhiYiIsImNodW5rLTYyODUiOiI4ZGFhOTk0NyIsImNodW5rLWNiNmUiOiIwMmU3OGJjMyIsImNodW5rLTI5ZGIiOiI1ODY5ZmY3NyIsImNodW5rLWJhMmYiOiJiYjg4YmI0NSIsImNodW5rLThlYmIiOiJmMDE3MDM1NSIsImNodW5rLTAzZjUiOiI0ZjBhM2FmNCIsImNodW5rLTFkMzUiOiJkYmYxN2FhNSIsImNodW5rLTM2ZmYiOiI4YzllODhiNiIsImNodW5rLTM4NGYiOiIyNjFmOTRmNyIsImNodW5rLTNmZmUiOiIyNDQ3ZTgyYiIsImNodW5rLTRjZjYiOiIyNzVhNTM0ZCIsImNodW5rLWI1ZTQiOiI3NmMwY2NlNCJ9W2NodW5rSWRdKyIuY3NzIixmdWxsaHJlZj1fX3dlYnBhY2tfcmVxdWlyZV9fLnAraHJlZixleGlzdGluZ0xpbmtUYWdzPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaW5rIiksaT0wO2k8ZXhpc3RpbmdMaW5rVGFncy5sZW5ndGg7aSsrKXt2YXIgZGF0YUhyZWY9KHRhZz1leGlzdGluZ0xpbmtUYWdzW2ldKS5nZXRBdHRyaWJ1dGUoImRhdGEtaHJlZiIpfHx0YWcuZ2V0QXR0cmlidXRlKCJocmVmIik7aWYoInN0eWxlc2hlZXQiPT09dGFnLnJlbCYmKGRhdGFIcmVmPT09aHJlZnx8ZGF0YUhyZWY9PT1mdWxsaHJlZikpcmV0dXJuIHJlc29sdmUoKX12YXIgZXhpc3RpbmdTdHlsZVRhZ3M9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInN0eWxlIik7Zm9yKGk9MDtpPGV4aXN0aW5nU3R5bGVUYWdzLmxlbmd0aDtpKyspe3ZhciB0YWc7aWYoKGRhdGFIcmVmPSh0YWc9ZXhpc3RpbmdTdHlsZVRhZ3NbaV0pLmdldEF0dHJpYnV0ZSgiZGF0YS1ocmVmIikpPT09aHJlZnx8ZGF0YUhyZWY9PT1mdWxsaHJlZilyZXR1cm4gcmVzb2x2ZSgpfXZhciBsaW5rVGFnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTtsaW5rVGFnLnJlbD0ic3R5bGVzaGVldCIsbGlua1RhZy50eXBlPSJ0ZXh0L2NzcyIsbGlua1RhZy5vbmxvYWQ9cmVzb2x2ZSxsaW5rVGFnLm9uZXJyb3I9ZnVuY3Rpb24oZXZlbnQpe3ZhciByZXF1ZXN0PWV2ZW50JiZldmVudC50YXJnZXQmJmV2ZW50LnRhcmdldC5zcmN8fGZ1bGxocmVmLGVycj1uZXcgRXJyb3IoIkxvYWRpbmcgQ1NTIGNodW5rICIrY2h1bmtJZCsiIGZhaWxlZC5cbigiK3JlcXVlc3QrIikiKTtlcnIucmVxdWVzdD1yZXF1ZXN0LHJlamVjdChlcnIpfSxsaW5rVGFnLmhyZWY9ZnVsbGhyZWYsZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChsaW5rVGFnKX0pLnRoZW4oZnVuY3Rpb24oKXtpbnN0YWxsZWRDc3NDaHVua3NbY2h1bmtJZF09MH0pKTt2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhPWluc3RhbGxlZENodW5rc1tjaHVua0lkXTtpZigwIT09aW5zdGFsbGVkQ2h1bmtEYXRhKWlmKGluc3RhbGxlZENodW5rRGF0YSlwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7ZWxzZXt2YXIgcHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7aW5zdGFsbGVkQ2h1bmtEYXRhPWluc3RhbGxlZENodW5rc1tjaHVua0lkXT1bcmVzb2x2ZSxyZWplY3RdfSk7cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl09cHJvbWlzZSk7dmFyIG9uU2NyaXB0Q29tcGxldGUsaGVhZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLHNjcmlwdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtzY3JpcHQuY2hhcnNldD0idXRmLTgiLHNjcmlwdC50aW1lb3V0PTEyMCxfX3dlYnBhY2tfcmVxdWlyZV9fLm5jJiZzY3JpcHQuc2V0QXR0cmlidXRlKCJub25jZSIsX193ZWJwYWNrX3JlcXVpcmVfXy5uYyksc2NyaXB0LnNyYz1mdW5jdGlvbihjaHVua0lkKXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5wKyJzdGF0aWMvanMvIisoe31bY2h1bmtJZF18fGNodW5rSWQpKyIuIit7THZEbDoiN2ExMmEyM2IiLCJjaHVuay05Mzg5IjoiNjY4NDFhMGQiLCJjaHVuay00NzZjIjoiMmU3ZWE4YzUiLCJjaHVuay02Mjg1IjoiYjc3NjE0NGIiLCJjaHVuay1jYjZlIjoiNGI1ZDI5ODIiLCJjaHVuay0yOWRiIjoiMGJmZDQzMTAiLCJjaHVuay1iYTJmIjoiZDdkMzJiNGYiLCJjaHVuay04ZWJiIjoiZTJkYWI4YzgiLCJjaHVuay0wM2Y1IjoiNDE4ZjZkN2YiLCJjaHVuay0xZDM1IjoiYTc4N2ExOGIiLCJjaHVuay0zNmZmIjoiNjRlOGY4NDYiLCJjaHVuay0zODRmIjoiNDY3MTk2ODYiLCJjaHVuay0zZmZlIjoiOGZhZDM4NDMiLCJjaHVuay00Y2Y2IjoiMjFlYTM3ZmMiLCJjaHVuay1iNWU0IjoiOTU1OTkwNDgifVtjaHVua0lkXSsiLmpzIn0oY2h1bmtJZCksb25TY3JpcHRDb21wbGV0ZT1mdW5jdGlvbihldmVudCl7c2NyaXB0Lm9uZXJyb3I9c2NyaXB0Lm9ubG9hZD1udWxsLGNsZWFyVGltZW91dCh0aW1lb3V0KTt2YXIgY2h1bms9aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO2lmKDAhPT1jaHVuayl7aWYoY2h1bmspe3ZhciBlcnJvclR5cGU9ZXZlbnQmJigibG9hZCI9PT1ldmVudC50eXBlPyJtaXNzaW5nIjpldmVudC50eXBlKSxyZWFsU3JjPWV2ZW50JiZldmVudC50YXJnZXQmJmV2ZW50LnRhcmdldC5zcmMsZXJyb3I9bmV3IEVycm9yKCJMb2FkaW5nIGNodW5rICIrY2h1bmtJZCsiIGZhaWxlZC5cbigiK2Vycm9yVHlwZSsiOiAiK3JlYWxTcmMrIikiKTtlcnJvci50eXBlPWVycm9yVHlwZSxlcnJvci5yZXF1ZXN0PXJlYWxTcmMsY2h1bmtbMV0oZXJyb3IpfWluc3RhbGxlZENodW5rc1tjaHVua0lkXT12b2lkIDB9fTt2YXIgdGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7b25TY3JpcHRDb21wbGV0ZSh7dHlwZToidGltZW91dCIsdGFyZ2V0OnNjcmlwdH0pfSwxMmU0KTtzY3JpcHQub25lcnJvcj1zY3JpcHQub25sb2FkPW9uU2NyaXB0Q29tcGxldGUsaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpfXJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyl9LF9fd2VicGFja19yZXF1aXJlX18ubT1tb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uYz1pbnN0YWxsZWRNb2R1bGVzLF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihleHBvcnRzLG5hbWUsZ2V0dGVyKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cyxuYW1lKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsbmFtZSx7ZW51bWVyYWJsZTohMCxnZXQ6Z2V0dGVyfSl9LF9fd2VicGFja19yZXF1aXJlX18ucj1mdW5jdGlvbihleHBvcnRzKXsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnQ9ZnVuY3Rpb24odmFsdWUsbW9kZSl7aWYoMSZtb2RlJiYodmFsdWU9X193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSkpLDgmbW9kZSlyZXR1cm4gdmFsdWU7aWYoNCZtb2RlJiYib2JqZWN0Ij09dHlwZW9mIHZhbHVlJiZ2YWx1ZSYmdmFsdWUuX19lc01vZHVsZSlyZXR1cm4gdmFsdWU7dmFyIG5zPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnZhbHVlfSksMiZtb2RlJiYic3RyaW5nIiE9dHlwZW9mIHZhbHVlKWZvcih2YXIga2V5IGluIHZhbHVlKV9fd2VicGFja19yZXF1aXJlX18uZChucyxrZXksZnVuY3Rpb24oa2V5KXtyZXR1cm4gdmFsdWVba2V5XX0uYmluZChudWxsLGtleSkpO3JldHVybiBuc30sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKG1vZHVsZSl7dmFyIGdldHRlcj1tb2R1bGUmJm1vZHVsZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBtb2R1bGV9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCJhIixnZXR0ZXIpLGdldHRlcn0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKG9iamVjdCxwcm9wZXJ0eSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9Ii8iLF9fd2VicGFja19yZXF1aXJlX18ub2U9ZnVuY3Rpb24oZXJyKXt0aHJvdyBjb25zb2xlLmVycm9yKGVyciksZXJyfTt2YXIganNvbnBBcnJheT13aW5kb3cud2VicGFja0pzb25wPXdpbmRvdy53ZWJwYWNrSnNvbnB8fFtdLG9sZEpzb25wRnVuY3Rpb249anNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7anNvbnBBcnJheS5wdXNoPXdlYnBhY2tKc29ucENhbGxiYWNrLGpzb25wQXJyYXk9anNvbnBBcnJheS5zbGljZSgpO2Zvcih2YXIgaT0wO2k8anNvbnBBcnJheS5sZW5ndGg7aSsrKXdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO3ZhciBwYXJlbnRKc29ucEZ1bmN0aW9uPW9sZEpzb25wRnVuY3Rpb247Y2hlY2tEZWZlcnJlZE1vZHVsZXMoKX0oW10pOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="6177421" offset="0" length="6677" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="10714" hostname="center.t.dacube.cn" path="/static/js/chunk-libs.d331153a.js" url="https://center.t.dacube.cn/static/js/chunk-libs.d331153a.js" ip="139.9.5.231" port="443" connectionId="12" origin="HTML" frame="1" startDateTime="2019-04-16T14:14:17.097+08:00" startTime="6181453" endTime="6181593">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2VudGVyLnQuZGFjdWJlLmNu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2Mjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24v</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>emgtQ04semg7cT0wLjg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdGF0aWMvanMvY2h1bmstbGlicy5kMzMxMTUzYS5qcyBIVFRQLzEuMQ0KSG9zdDogY2VudGVyLnQuZGFjdWJlLmNuDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzU2LjAuMjkyNC45MCBTYWZhcmkvNTM3LjM2IDIzNDVFeHBsb3Jlci85LjYuMC4xODYyNw0KQWNjZXB0OiAqLyoNClJlZmVyZXI6IGh0dHBzOi8vY2VudGVyLnQuZGFjdWJlLmNuLw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiB6aC1DTix6aDtxPTAuOA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>759110</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xMi4y</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowOTozNSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NzU5MTEw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjVjYWViMjRhLWI5NTQ2Ig==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuMTIuMg0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowOTozNSBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDc1OTExMA0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KTGFzdC1Nb2RpZmllZDogVGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQNCkVUYWc6ICI1Y2FlYjI0YS1iOTU0NiINCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>KHdpbmRvdy53ZWJwYWNrSnNvbnA9d2luZG93LndlYnBhY2tKc29ucHx8W10pLnB1c2goW1siY2h1bmstbGlicyJdLHsiK0pQTCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9e2RlZmF1bHQ6X193ZWJwYWNrX3JlcXVpcmVfXygiK1NGSyIpLF9fZXNNb2R1bGU6ITB9fSwiK1NGSyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiQVV2bSIpLF9fd2VicGFja19yZXF1aXJlX18oIndnZVUiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJhZE96IiksX193ZWJwYWNrX3JlcXVpcmVfXygiZGwwcSIpLG1vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIldFcGsiKS5TeW1ib2x9LCIrYXVPIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksc2lnbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJsdnRtIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtjYnJ0OmZ1bmN0aW9uKHgpe3JldHVybiBzaWduKHg9K3gpKk1hdGgucG93KE1hdGguYWJzKHgpLDEvMyl9fSl9LCIrbHZGIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJWVGVyIikoIm5hdGl2ZS1mdW5jdGlvbi10by1zdHJpbmciLEZ1bmN0aW9uLnRvU3RyaW5nKX0sIitvUGIiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fKCJPR3RmIikoImJsaW5rIixmdW5jdGlvbihjcmVhdGVIVE1MKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCJibGluayIsIiIsIiIpfX0pfSwiK3JMdiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGRvY3VtZW50PV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKS5kb2N1bWVudDttb2R1bGUuZXhwb3J0cz1kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSwiK3MwZyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBtb250aHNTaG9ydFdpdGhEb3RzPSJqYW4uX2ZlYi5fbXJ0Ll9hcHIuX21laV9qdW4uX2p1bC5fYXVnLl9zZXAuX29rdC5fbm92Ll9kZWMuIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0V2l0aG91dERvdHM9Imphbl9mZWJfbXJ0X2Fwcl9tZWlfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlPVsvXmphbi9pLC9eZmViL2ksL15tYWFydHxtcnQuPyQvaSwvXmFwci9pLC9ebWVpJC9pLC9eanVuW2kuXT8kL2ksL15qdWxbaS5dPyQvaSwvXmF1Zy9pLC9ec2VwL2ksL15va3QvaSwvXm5vdi9pLC9eZGVjL2ldLG1vbnRoc1JlZ2V4PS9eKGphbnVhcml8ZmVicnVhcml8bWFhcnR8YXByaWx8bWVpfGp1W25sXWl8YXVndXN0dXN8c2VwdGVtYmVyfG9rdG9iZXJ8bm92ZW1iZXJ8ZGVjZW1iZXJ8amFuXC4/fGZlYlwuP3xtcnRcLj98YXByXC4/fGp1W25sXVwuP3xhdWdcLj98c2VwXC4/fG9rdFwuP3xub3ZcLj98ZGVjXC4/KS9pO21vbWVudC5kZWZpbmVMb2NhbGUoIm5sIix7bW9udGhzOiJqYW51YXJpX2ZlYnJ1YXJpX21hYXJ0X2FwcmlsX21laV9qdW5pX2p1bGlfYXVndXN0dXNfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ZnVuY3Rpb24obSxmb3JtYXQpe3JldHVybiBtPy8tTU1NLS8udGVzdChmb3JtYXQpP21vbnRoc1Nob3J0V2l0aG91dERvdHNbbS5tb250aCgpXTptb250aHNTaG9ydFdpdGhEb3RzW20ubW9udGgoKV06bW9udGhzU2hvcnRXaXRoRG90c30sbW9udGhzUmVnZXg6bW9udGhzUmVnZXgsbW9udGhzU2hvcnRSZWdleDptb250aHNSZWdleCxtb250aHNTdHJpY3RSZWdleDovXihqYW51YXJpfGZlYnJ1YXJpfG1hYXJ0fGFwcmlsfG1laXxqdVtubF1pfGF1Z3VzdHVzfHNlcHRlbWJlcnxva3RvYmVyfG5vdmVtYmVyfGRlY2VtYmVyKS9pLG1vbnRoc1Nob3J0U3RyaWN0UmVnZXg6L14oamFuXC4/fGZlYlwuP3xtcnRcLj98YXByXC4/fG1laXxqdVtubF1cLj98YXVnXC4/fHNlcFwuP3xva3RcLj98bm92XC4/fGRlY1wuPykvaSxtb250aHNQYXJzZTptb250aHNQYXJzZSxsb25nTW9udGhzUGFyc2U6bW9udGhzUGFyc2Usc2hvcnRNb250aHNQYXJzZTptb250aHNQYXJzZSx3ZWVrZGF5czoiem9uZGFnX21hYW5kYWdfZGluc2RhZ193b2Vuc2RhZ19kb25kZXJkYWdfdnJpamRhZ196YXRlcmRhZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJ6by5fbWEuX2RpLl93by5fZG8uX3ZyLl96YS4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46InpvX21hX2RpX3dvX2RvX3ZyX3phIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC1NTS1ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW3ZhbmRhYWcgb21dIExUIixuZXh0RGF5OiJbbW9yZ2VuIG9tXSBMVCIsbmV4dFdlZWs6ImRkZGQgW29tXSBMVCIsbGFzdERheToiW2dpc3RlcmVuIG9tXSBMVCIsbGFzdFdlZWs6IlthZmdlbG9wZW5dIGRkZGQgW29tXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToib3ZlciAlcyIscGFzdDoiJXMgZ2VsZWRlbiIsczoiZWVuIHBhYXIgc2Vjb25kZW4iLHNzOiIlZCBzZWNvbmRlbiIsbToiw6nDqW4gbWludXV0IixtbToiJWQgbWludXRlbiIsaDoiw6nDqW4gdXVyIixoaDoiJWQgdXVyIixkOiLDqcOpbiBkYWciLGRkOiIlZCBkYWdlbiIsTToiw6nDqW4gbWFhbmQiLE1NOiIlZCBtYWFuZGVuIix5OiLDqcOpbiBqYWFyIix5eToiJWQgamFhciJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0oc3RlfGRlKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3JldHVybiBudW1iZXIrKDE9PT1udW1iZXJ8fDg9PT1udW1iZXJ8fDIwPD1udW1iZXI/InN0ZSI6ImRlIil9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiLy85dyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoInNlIix7bW9udGhzOiJvxJHEkWFqYWdlbcOhbm51X2d1b3Z2YW3DoW5udV9uanVrxI1hbcOhbm51X2N1b8WLb23DoW5udV9taWVzc2Vtw6FubnVfZ2Vhc3NlbcOhbm51X3N1b2lkbmVtw6FubnVfYm9yZ2Vtw6FubnVfxI1ha8SNYW3DoW5udV9nb2xnZ290bcOhbm51X3Nrw6FibWFtw6FubnVfanVvdmxhbcOhbm51Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJvxJHEkWpfZ3Vvdl9uanVrX2N1b19taWVzX2dlYXNfc3VvaV9ib3JnX8SNYWvEjV9nb2xnX3Nrw6FiX2p1b3YiLnNwbGl0KCJfIiksd2Vla2RheXM6InNvdG5hYmVhaXZpX3Z1b3Nzw6FyZ2FfbWHFi8WLZWLDoXJnYV9nYXNrYXZhaGtrdV9kdW9yYXN0YXRfYmVhcmphZGF0X2zDoXZ2YXJkYXQiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoic290bl92dW9zX21hxYtfZ2Fza19kdW9yX2JlYXJfbMOhdiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoic192X21fZ19kX2JfTCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiTU1NTSBELiBbYi5dIFlZWVkiLExMTDoiTU1NTSBELiBbYi5dIFlZWVkgW3RpLl0gSEg6bW0iLExMTEw6ImRkZGQsIE1NTU0gRC4gW2IuXSBZWVlZIFt0aS5dIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltvdG5lIHRpXSBMVCIsbmV4dERheToiW2lodHRpbiB0aV0gTFQiLG5leHRXZWVrOiJkZGRkIFt0aV0gTFQiLGxhc3REYXk6Iltpa3RlIHRpXSBMVCIsbGFzdFdlZWs6IltvdmRkaXRdIGRkZGQgW3RpXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgZ2Vhxb5lcyIscGFzdDoibWHFi2l0ICVzIixzOiJtb2FkZGUgc2VrdW5kZGF0IixzczoiJWQgc2VrdW5kZGF0IixtOiJva3RhIG1pbnVodGEiLG1tOiIlZCBtaW51aHRhdCIsaDoib2t0YSBkaWltbXUiLGhoOiIlZCBkaWltbXV0IixkOiJva3RhIGJlYWl2aSIsZGQ6IiVkIGJlYWl2dml0IixNOiJva3RhIG3DoW5udSIsTU06IiVkIG3DoW51dCIseToib2t0YSBqYWhraSIseXk6IiVkIGphZ2l0In0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiLzhGYiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLCRlbnRyaWVzPV9fd2VicGFja19yZXF1aXJlX18oIlVFeGQiKSghMCk7JGV4cG9ydCgkZXhwb3J0LlMsIk9iamVjdCIse2VudHJpZXM6ZnVuY3Rpb24oaXQpe3JldHVybiAkZW50cmllcyhpdCl9fSl9LCIvS0FpIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksX2lzRmluaXRlPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKS5pc0Zpbml0ZTskZXhwb3J0KCRleHBvcnQuUywiTnVtYmVyIix7aXNGaW5pdGU6ZnVuY3Rpb24oaXQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgaXQmJl9pc0Zpbml0ZShpdCl9fSl9LCIvU1MvIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOl9fd2VicGFja19yZXF1aXJlX18oImk1ZGMiKS5zZXR9KX0sIi9WcGYiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIjBNcmkiKSxtb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJnM2c1IikuUmVnRXhwLmVzY2FwZX0sIi9YNXYiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJ4LXBzZXVkbyIse21vbnRoczoiSn7DocOxw7rDoX5yw71fRn7DqWJyw7p+w6Fyw71ffk3DoXJjfmhfw4FwfnLDrWxffk3DocO9X35Kw7rDscOpfl9Kw7psfsO9X8OBw7p+Z8O6c3R+X1PDqXB+dMOpbWJ+w6lyX8OTfmN0w7NifsOpcl/DkX7Ds3bDqW1+YsOpcl9+RMOpY8Opfm1iw6lyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKfsOhw7FffkbDqWJffk3DoXJffsOBcHJffk3DocO9X35Kw7rDsV9+SsO6bF9+w4HDumdfflPDqXBffsOTY3RffsORw7N2X35Ew6ljIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlRXhhY3Q6ITAsd2Vla2RheXM6IlN+w7rDsWTDoX7DvV9Nw7N+w7Fkw6HDvX5fVMO6w6l+c2TDocO9fl9Xw6lkfsOxw6lzZH7DocO9X1R+aMO6cnN+ZMOhw71ffkZyw61kfsOhw71fU37DoXTDunJ+ZMOhw70iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU37DusOxX35Nw7PDsV9+VMO6w6lfflfDqWRfflRow7pffkZyw61fflPDoXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN+w7pfTcOzfl9Uw7pfflfDqV9UfmhfRnJ+X1PDoSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbVH7Ds2TDoX7DvSDDoXRdIExUIixuZXh0RGF5OiJbVH7Ds23Ds35ycsOzfncgw6F0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW8OhdF0gTFQiLGxhc3REYXk6IlvDnX7DqXN0fsOpcmTDoX7DvSDDoXRdIExUIixsYXN0V2VlazoiW0x+w6FzdF0gZGRkZCBbw6F0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiw61+w7EgJXMiLHBhc3Q6IiVzIMOhfmfDsyIsczoiw6EgfmbDqXcgfnPDqWPDs37DsWRzIixzczoiJWQgc37DqWPDs8OxfmRzIixtOiLDoSB+bcOtw7F+w7p0w6kiLG1tOiIlZCBtfsOtw7HDun50w6lzIixoOiLDoX7DsSBow7N+w7pyIixoaDoiJWQgaH7Ds8O6cnMiLGQ6IsOhIH5kw6HDvSIsZGQ6IiVkIGR+w6HDvXMiLE06IsOhIH5tw7PDsX50aCIsTU06IiVkIG1+w7PDsXR+aHMiLHk6IsOhIH7DvcOpw6FyIix5eToiJWQgw71+w6nDoXJzIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfSh0aHxzdHxuZHxyZCkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXt2YXIgYj1udW1iZXIlMTAsb3V0cHV0PTE9PX5+KG51bWJlciUxMDAvMTApPyJ0aCI6MT09PWI/InN0IjoyPT09Yj8ibmQiOjM9PT1iPyJyZCI6InRoIjtyZXR1cm4gbnVtYmVyK291dHB1dH0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCIvZTg4IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9Ilx0XG5cdlxmXHIgwqDhmoDhoI7igIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIBcdTIwMjhcdTIwMjlcdWZlZmYifSwiL3VmMSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSx0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTL2ovIiksYUZ1bmN0aW9uPV9fd2VicGFja19yZXF1aXJlX18oIjJPaUYiKSwkZGVmaW5lUHJvcGVydHk9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpO19fd2VicGFja19yZXF1aXJlX18oIm5oNGciKSYmJGV4cG9ydCgkZXhwb3J0LlArX193ZWJwYWNrX3JlcXVpcmVfXygieGJTbSIpLCJPYmplY3QiLHtfX2RlZmluZVNldHRlcl9fOmZ1bmN0aW9uKFAsc2V0dGVyKXskZGVmaW5lUHJvcGVydHkuZih0b09iamVjdCh0aGlzKSxQLHtzZXQ6YUZ1bmN0aW9uKHNldHRlciksZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19KX0sIjAvUjQiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBpdD9udWxsIT09aXQ6ImZ1bmN0aW9uIj09dHlwZW9mIGl0fX0sIjBFK1ciOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oImVsWnEiKSgiQXJyYXkiKX0sIjBMRG4iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fKCJPR3RmIikoIml0YWxpY3MiLGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjcmVhdGVIVE1MKHRoaXMsImkiLCIiLCIiKX19KX0sIjBNcmkiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSwkcmU9X193ZWJwYWNrX3JlcXVpcmVfXygicTllZyIpKC9bXFxeJCorPy4oKXxbXF17fV0vZywiXFwkJiIpOyRleHBvcnQoJGV4cG9ydC5TLCJSZWdFeHAiLHtlc2NhcGU6ZnVuY3Rpb24oaXQpe3JldHVybiAkcmUoaXQpfX0pfSwiMFlXTSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGdPUEQ9X193ZWJwYWNrX3JlcXVpcmVfXygiRWVtSCIpLGdldFByb3RvdHlwZU9mPV9fd2VicGFja19yZXF1aXJlX18oIk9QM1kiKSxoYXM9X193ZWJwYWNrX3JlcXVpcmVfXygiYWFneCIpLCRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5Iik7JGV4cG9ydCgkZXhwb3J0LlMsIlJlZmxlY3QiLHtnZXQ6ZnVuY3Rpb24gZ2V0KHRhcmdldCxwcm9wZXJ0eUtleSl7dmFyIGRlc2MscHJvdG8scmVjZWl2ZXI9YXJndW1lbnRzLmxlbmd0aDwzP3RhcmdldDphcmd1bWVudHNbMl07cmV0dXJuIGFuT2JqZWN0KHRhcmdldCk9PT1yZWNlaXZlcj90YXJnZXRbcHJvcGVydHlLZXldOihkZXNjPWdPUEQuZih0YXJnZXQscHJvcGVydHlLZXkpKT9oYXMoZGVzYywidmFsdWUiKT9kZXNjLnZhbHVlOnZvaWQgMCE9PWRlc2MuZ2V0P2Rlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpOnZvaWQgMDppc09iamVjdChwcm90bz1nZXRQcm90b3R5cGVPZih0YXJnZXQpKT9nZXQocHJvdG8scHJvcGVydHlLZXkscmVjZWl2ZXIpOnZvaWQgMH19KX0sIjBsL3QiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGZpbHRlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJDa2tUIikoMik7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKiFfX3dlYnBhY2tfcmVxdWlyZV9fKCJMeUU4IikoW10uZmlsdGVyLCEwKSwiQXJyYXkiLHtmaWx0ZXI6ZnVuY3Rpb24oY2FsbGJhY2tmbil7cmV0dXJuICRmaWx0ZXIodGhpcyxjYWxsYmFja2ZuLGFyZ3VtZW50c1sxXSl9fSl9LCIwbU40IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygiT0d0ZiIpKCJmaXhlZCIsZnVuY3Rpb24oY3JlYXRlSFRNTCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGNyZWF0ZUhUTUwodGhpcywidHQiLCIiLCIiKX19KX0sIjBtbysiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgc3ltYm9sTWFwPXsxOiLgvKEiLDI6IuC8oiIsMzoi4LyjIiw0OiLgvKQiLDU6IuC8pSIsNjoi4LymIiw3OiLgvKciLDg6IuC8qCIsOToi4LypIiwwOiLgvKAifSxudW1iZXJNYXA9eyLgvKEiOiIxIiwi4LyiIjoiMiIsIuC8oyI6IjMiLCLgvKQiOiI0Iiwi4LylIjoiNSIsIuC8piI6IjYiLCLgvKciOiI3Iiwi4LyoIjoiOCIsIuC8qSI6IjkiLCLgvKAiOiIwIn07bW9tZW50LmRlZmluZUxvY2FsZSgiYm8iLHttb250aHM6IuC9n+C+s+C8i+C9luC8i+C9keC9hOC8i+C9lOC9vF/gvZ/gvrPgvIvgvZbgvIvgvYLgvYngvbLgvabgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2C4L2m4L204L2Y4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9nuC9suC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvaPgvpTgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2R4L6y4L204L2C4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9keC9tOC9k+C8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvaLgvpLgvrHgvZHgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2R4L2C4L204LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9heC9tOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvYXgvbTgvIvgvYLgvYXgvbLgvYLgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2F4L204LyL4L2C4L2J4L2y4L2m4LyL4L2UIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgvZ/gvrPgvIvgvZbgvIvgvZHgvYTgvIvgvZTgvbxf4L2f4L6z4LyL4L2W4LyL4L2C4L2J4L2y4L2m4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9guC9puC9tOC9mOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvZ7gvbLgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2j4L6U4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9keC+suC9tOC9guC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvZHgvbTgvZPgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2i4L6S4L6x4L2R4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9keC9guC9tOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvYXgvbTgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2F4L204LyL4L2C4L2F4L2y4L2C4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9heC9tOC8i+C9guC9ieC9suC9puC8i+C9lCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4L2C4L2f4L2g4LyL4L2J4L2y4LyL4L2Y4LyLX+C9guC9n+C9oOC8i+C9n+C+s+C8i+C9luC8i1/gvYLgvZ/gvaDgvIvgvZjgvbLgvYLgvIvgvZHgvZjgvaLgvItf4L2C4L2f4L2g4LyL4L2j4L634L2C4LyL4L2U4LyLX+C9guC9n+C9oOC8i+C9leC9tOC9ouC8i+C9luC9tF/gvYLgvZ/gvaDgvIvgvZTgvIvgvabgvYTgvabgvItf4L2C4L2f4L2g4LyL4L2m4L6k4L264L2T4LyL4L2U4LyLIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC9ieC9suC8i+C9mOC8i1/gvZ/gvrPgvIvgvZbgvItf4L2Y4L2y4L2C4LyL4L2R4L2Y4L2i4LyLX+C9o+C+t+C9guC8i+C9lOC8i1/gvZXgvbTgvaLgvIvgvZbgvbRf4L2U4LyL4L2m4L2E4L2m4LyLX+C9puC+pOC9uuC9k+C8i+C9lOC8iyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4L2J4L2y4LyL4L2Y4LyLX+C9n+C+s+C8i+C9luC8i1/gvZjgvbLgvYLgvIvgvZHgvZjgvaLgvItf4L2j4L634L2C4LyL4L2U4LyLX+C9leC9tOC9ouC8i+C9luC9tF/gvZTgvIvgvabgvYTgvabgvItf4L2m4L6k4L264L2T4LyL4L2U4LyLIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIixMVFM6IkEgaDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+C9keC9suC8i+C9ouC9suC9hF0gTFQiLG5leHREYXk6IlvgvabgvYTgvIvgvYngvbLgvZNdIExUIixuZXh0V2VlazoiW+C9luC9keC9tOC9k+C8i+C9leC+suC9guC8i+C9ouC+l+C9uuC9puC8i+C9mF0sIExUIixsYXN0RGF5OiJb4L2B4LyL4L2m4L2EXSBMVCIsbGFzdFdlZWs6IlvgvZbgvZHgvbTgvZPgvIvgvZXgvrLgvYLgvIvgvZjgvZDgvaDgvIvgvZhdIGRkZGQsIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDgvaPgvIsiLHBhc3Q6IiVzIOC9puC+lOC9k+C8i+C9oyIsczoi4L2j4L2Y4LyL4L2m4L2EIixzczoiJWQg4L2m4L6Q4L2i4LyL4L2G4LyNIixtOiLgvabgvpDgvaLgvIvgvZjgvIvgvYLgvYXgvbLgvYIiLG1tOiIlZCDgvabgvpDgvaLgvIvgvZgiLGg6IuC9huC9tOC8i+C9muC9vOC9keC8i+C9guC9heC9suC9giIsaGg6IiVkIOC9huC9tOC8i+C9muC9vOC9kSIsZDoi4L2J4L2y4L2T4LyL4L2C4L2F4L2y4L2CIixkZDoiJWQg4L2J4L2y4L2T4LyLIixNOiLgvZ/gvrPgvIvgvZbgvIvgvYLgvYXgvbLgvYIiLE1NOiIlZCDgvZ/gvrPgvIvgvZYiLHk6IuC9o+C9vOC8i+C9guC9heC9suC9giIseXk6IiVkIOC9o+C9vCJ9LHByZXBhcnNlOmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4Lyh4Lyi4Lyj4Lyk4Lyl4Lym4Lyn4Lyo4Lyp4LygXS9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbnVtYmVyTWFwW21hdGNoXX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cZC9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gc3ltYm9sTWFwW21hdGNoXX0pfSxtZXJpZGllbVBhcnNlOi/gvZjgvZrgvZPgvIvgvZjgvbx84L2e4L284L2C4L2m4LyL4L2A4L2mfOC9ieC9suC9k+C8i+C9guC9tOC9hHzgvZHgvYLgvbzgvYTgvIvgvZHgvYJ84L2Y4L2a4L2T4LyL4L2Y4L28LyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksIuC9mOC9muC9k+C8i+C9mOC9vCI9PT1tZXJpZGllbSYmNDw9aG91cnx8IuC9ieC9suC9k+C8i+C9guC9tOC9hCI9PT1tZXJpZGllbSYmaG91cjw1fHwi4L2R4L2C4L284L2E4LyL4L2R4L2CIj09PW1lcmlkaWVtP2hvdXIrMTI6aG91cn0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7cmV0dXJuIGhvdXI8ND8i4L2Y4L2a4L2T4LyL4L2Y4L28Ijpob3VyPDEwPyLgvZ7gvbzgvYLgvabgvIvgvYDgvaYiOmhvdXI8MTc/IuC9ieC9suC9k+C8i+C9guC9tOC9hCI6aG91cjwyMD8i4L2R4L2C4L284L2E4LyL4L2R4L2CIjoi4L2Y4L2a4L2T4LyL4L2Y4L28In0sd2Vlazp7ZG93OjAsZG95OjZ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCIwc2grIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNSZWdFeHA9X193ZWJwYWNrX3JlcXVpcmVfXygicXVQaiIpLGRlZmluZWQ9X193ZWJwYWNrX3JlcXVpcmVfXygidmhQVSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKHRoYXQsc2VhcmNoU3RyaW5nLE5BTUUpe2lmKGlzUmVnRXhwKHNlYXJjaFN0cmluZykpdGhyb3cgVHlwZUVycm9yKCJTdHJpbmcjIitOQU1FKyIgZG9lc24ndCBhY2NlcHQgcmVnZXghIik7cmV0dXJuIFN0cmluZyhkZWZpbmVkKHRoYXQpKX19LCIwdFJrIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgicHQtYnIiLHttb250aHM6IkphbmVpcm9fRmV2ZXJlaXJvX01hcsOnb19BYnJpbF9NYWlvX0p1bmhvX0p1bGhvX0Fnb3N0b19TZXRlbWJyb19PdXR1YnJvX05vdmVtYnJvX0RlemVtYnJvIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmV2X01hcl9BYnJfTWFpX0p1bl9KdWxfQWdvX1NldF9PdXRfTm92X0RleiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiRG9taW5nb19TZWd1bmRhLWZlaXJhX1RlcsOnYS1mZWlyYV9RdWFydGEtZmVpcmFfUXVpbnRhLWZlaXJhX1NleHRhLWZlaXJhX1PDoWJhZG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiRG9tX1NlZ19UZXJfUXVhX1F1aV9TZXhfU8OhYiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiRG9fMsKqXzPCql80wqpfNcKqXzbCql9Tw6EiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkiLExMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIFvDoHNdIEhIOm1tIixMTExMOiJkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgW8Ogc10gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hvamUgw6BzXSBMVCIsbmV4dERheToiW0FtYW5ow6Mgw6BzXSBMVCIsbmV4dFdlZWs6ImRkZGQgW8Ogc10gTFQiLGxhc3REYXk6IltPbnRlbSDDoHNdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5kYXkoKXx8Nj09PXRoaXMuZGF5KCk/IlvDmmx0aW1vXSBkZGRkIFvDoHNdIExUIjoiW8OabHRpbWFdIGRkZGQgW8Ogc10gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJlbSAlcyIscGFzdDoiaMOhICVzIixzOiJwb3Vjb3Mgc2VndW5kb3MiLHNzOiIlZCBzZWd1bmRvcyIsbToidW0gbWludXRvIixtbToiJWQgbWludXRvcyIsaDoidW1hIGhvcmEiLGhoOiIlZCBob3JhcyIsZDoidW0gZGlhIixkZDoiJWQgZGlhcyIsTToidW0gbcOqcyIsTU06IiVkIG1lc2VzIix5OiJ1bSBhbm8iLHl5OiIlZCBhbm9zIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6In0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiMHRWUSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiRmxRZiIpLF9fd2VicGFja19yZXF1aXJlX18oIlZKc1AiKSxtb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXRXBrIikuQXJyYXkuZnJvbX0sIjExSVoiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkcGFyc2VGbG9hdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIikucGFyc2VGbG9hdCwkdHJpbT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJxbmNCIikudHJpbTttb2R1bGUuZXhwb3J0cz0xLyRwYXJzZUZsb2F0KF9fd2VicGFja19yZXF1aXJlX18oIi9lODgiKSsiLTAiKSE9LTEvMD9mdW5jdGlvbihzdHIpe3ZhciBzdHJpbmc9JHRyaW0oU3RyaW5nKHN0ciksMykscmVzdWx0PSRwYXJzZUZsb2F0KHN0cmluZyk7cmV0dXJuIDA9PT1yZXN1bHQmJiItIj09c3RyaW5nLmNoYXJBdCgwKT8tMDpyZXN1bHR9OiRwYXJzZUZsb2F0fSwiMUs4cCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBVc2VyQWdlbnRfREVQUkVDQVRFRD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJqcmZrIiksaXNFdmVudFN1cHBvcnRlZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlejQ5Iik7ZnVuY3Rpb24gbm9ybWFsaXplV2hlZWwoZXZlbnQpe3ZhciBzWD0wLHNZPTAscFg9MCxwWT0wO3JldHVybiJkZXRhaWwiaW4gZXZlbnQmJihzWT1ldmVudC5kZXRhaWwpLCJ3aGVlbERlbHRhImluIGV2ZW50JiYoc1k9LWV2ZW50LndoZWVsRGVsdGEvMTIwKSwid2hlZWxEZWx0YVkiaW4gZXZlbnQmJihzWT0tZXZlbnQud2hlZWxEZWx0YVkvMTIwKSwid2hlZWxEZWx0YVgiaW4gZXZlbnQmJihzWD0tZXZlbnQud2hlZWxEZWx0YVgvMTIwKSwiYXhpcyJpbiBldmVudCYmZXZlbnQuYXhpcz09PWV2ZW50LkhPUklaT05UQUxfQVhJUyYmKHNYPXNZLHNZPTApLHBYPTEwKnNYLHBZPTEwKnNZLCJkZWx0YVkiaW4gZXZlbnQmJihwWT1ldmVudC5kZWx0YVkpLCJkZWx0YVgiaW4gZXZlbnQmJihwWD1ldmVudC5kZWx0YVgpLChwWHx8cFkpJiZldmVudC5kZWx0YU1vZGUmJigxPT1ldmVudC5kZWx0YU1vZGU/KHBYKj00MCxwWSo9NDApOihwWCo9ODAwLHBZKj04MDApKSxwWCYmIXNYJiYoc1g9cFg8MT8tMToxKSxwWSYmIXNZJiYoc1k9cFk8MT8tMToxKSx7c3Bpblg6c1gsc3Bpblk6c1kscGl4ZWxYOnBYLHBpeGVsWTpwWX19bm9ybWFsaXplV2hlZWwuZ2V0RXZlbnRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIFVzZXJBZ2VudF9ERVBSRUNBVEVELmZpcmVmb3goKT8iRE9NTW91c2VTY3JvbGwiOmlzRXZlbnRTdXBwb3J0ZWQoIndoZWVsIik/IndoZWVsIjoibW91c2V3aGVlbCJ9LG1vZHVsZS5leHBvcnRzPW5vcm1hbGl6ZVdoZWVsfSwiMU1CbiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGdldEtleXM9X193ZWJwYWNrX3JlcXVpcmVfXygiRFZnQSIpLGdPUFM9X193ZWJwYWNrX3JlcXVpcmVfXygiSmlFYSIpLHBJRT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJVcWNGIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQpe3ZhciByZXN1bHQ9Z2V0S2V5cyhpdCksZ2V0U3ltYm9scz1nT1BTLmY7aWYoZ2V0U3ltYm9scylmb3IodmFyIGtleSxzeW1ib2xzPWdldFN5bWJvbHMoaXQpLGlzRW51bT1wSUUuZixpPTA7c3ltYm9scy5sZW5ndGg+aTspaXNFbnVtLmNhbGwoaXQsa2V5PXN5bWJvbHNbaSsrXSkmJnJlc3VsdC5wdXNoKGtleSk7cmV0dXJuIHJlc3VsdH19LCIxVHNBIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oZG9uZSx2YWx1ZSl7cmV0dXJue3ZhbHVlOnZhbHVlLGRvbmU6ISFkb25lfX19LCIxcll5IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiaHktYW0iLHttb250aHM6e2Zvcm1hdDoi1bDVuNaC1bbVvtWh1oDVq1/Wg9Wl1b/WgNW+1aHWgNWrX9W01aHWgNW/1atf1aHVutaA1avVrNWrX9W01aHVtdWr1b3Vq1/VsNW41oLVttWr1b3Vq1/VsNW41oLVrNWr1b3Vq1/WhdWj1bjVvdW/1bjVvdWrX9W91aXVutW/1aXVtNWi1aXWgNWrX9Ww1bjVr9W/1aXVtNWi1aXWgNWrX9W21bjVtdWl1bTVotWl1oDVq1/VpNWl1a/Vv9Wl1bTVotWl1oDVqyIuc3BsaXQoIl8iKSxzdGFuZGFsb25lOiLVsNW41oLVttW+1aHWgF/Wg9Wl1b/WgNW+1aHWgF/VtNWh1oDVv1/VodW61oDVq9WsX9W01aHVtdWr1b1f1bDVuNaC1bbVq9W9X9Ww1bjWgtWs1avVvV/WhdWj1bjVvdW/1bjVvV/VvdWl1brVv9Wl1bTVotWl1oBf1bDVuNWv1b/VpdW01aLVpdaAX9W21bjVtdWl1bTVotWl1oBf1aTVpdWv1b/VpdW01aLVpdaAIi5zcGxpdCgiXyIpfSxtb250aHNTaG9ydDoi1bDVttW+X9aD1b/WgF/VtNaA1b9f1aHVutaAX9W01bXVvV/VsNW21b1f1bDVrNW9X9aF1aPVvV/VvdW61b9f1bDVr9W/X9W21bTVol/VpNWv1b8iLnNwbGl0KCJfIiksd2Vla2RheXM6ItWv1avWgNWh1a/Vq1/VpdaA1a/VuNaC1bfVodWi1anVq1/VpdaA1aXWhNW31aHVotWp1atf1bnVuNaA1aXWhNW31aHVotWp1atf1bDVq9W21aPVt9Wh1aLVqdWrX9W41oLWgNWi1aHVqV/Vt9Wh1aLVodWpIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItWv1oDVr1/VpdaA1a9f1aXWgNaEX9W51oDWhF/VsNW21aNf1bjWgtaA1aJf1bfVotWpIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLVr9aA1a9f1aXWgNWvX9Wl1oDWhF/VudaA1oRf1bDVttWjX9W41oLWgNWiX9W31aLVqSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkg1akuIixMTEw6IkQgTU1NTSBZWVlZINWpLiwgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZINWpLiwgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9Wh1bXVvdaF1oBdIExUIixuZXh0RGF5OiJb1b7VodWy1ahdIExUIixsYXN0RGF5OiJb1aXWgNWl1a9dIExUIixuZXh0V2VlazpmdW5jdGlvbigpe3JldHVybiJkZGRkIFvWhdaA1agg1arVodW01ahdIExUIn0sbGFzdFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iW9Wh1bbWgdWh1a5dIGRkZGQgW9aF1oDVqCDVqtWh1bTVqF0gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDVsNWl1b/VuCIscGFzdDoiJXMg1aHVvNWh1bsiLHM6ItW01asg1oTVodW21asg1b7VodW11oDVr9W11aHVtiIsc3M6IiVkINW+1aHVtdaA1a/VtdWh1bYiLG06ItaA1bjVutWlIixtbToiJWQg1oDVuNW61aUiLGg6ItWq1aHVtCIsaGg6IiVkINWq1aHVtCIsZDoi1oXWgCIsZGQ6IiVkINaF1oAiLE06ItWh1bTVq9W9IixNTToiJWQg1aHVtNWr1b0iLHk6ItW/1aHWgNWrIix5eToiJWQg1b/VodaA1asifSxtZXJpZGllbVBhcnNlOi/Vo9Wr1bfVpdaA1b7VoXzVodW81aHVvtW41b/VvtWhfNaB1aXWgNWl1a/VvtWhfNWl1oDVpdWv1bjVtdWh1bYvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybi9eKNaB1aXWgNWl1a/VvtWhfNWl1oDVpdWv1bjVtdWh1bYpJC8udGVzdChpbnB1dCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIpe3JldHVybiBob3VyPDQ/ItWj1avVt9Wl1oDVvtWhIjpob3VyPDEyPyLVodW81aHVvtW41b/VvtWhIjpob3VyPDE3PyLWgdWl1oDVpdWv1b7VoSI6ItWl1oDVpdWv1bjVtdWh1bYifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9fFxkezEsMn0tKNWr1bZ81oDVpCkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyLHBlcmlvZCl7c3dpdGNoKHBlcmlvZCl7Y2FzZSJEREQiOmNhc2UidyI6Y2FzZSJXIjpjYXNlIkRERG8iOnJldHVybiAxPT09bnVtYmVyP251bWJlcisiLdWr1bYiOm51bWJlcisiLdaA1aQiO2RlZmF1bHQ6cmV0dXJuIG51bWJlcn19LHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiMXNhNyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPU1hdGgubG9nMXB8fGZ1bmN0aW9uKHgpe3JldHVybi0xZS04PCh4PSt4KSYmeDwxZS04P3gteCp4LzI6TWF0aC5sb2coMSt4KX19LCIxeFo0IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiY2EiLHttb250aHM6e3N0YW5kYWxvbmU6ImdlbmVyX2ZlYnJlcl9tYXLDp19hYnJpbF9tYWlnX2p1bnlfanVsaW9sX2Fnb3N0X3NldGVtYnJlX29jdHVicmVfbm92ZW1icmVfZGVzZW1icmUiLnNwbGl0KCJfIiksZm9ybWF0OiJkZSBnZW5lcl9kZSBmZWJyZXJfZGUgbWFyw6dfZCdhYnJpbF9kZSBtYWlnX2RlIGp1bnlfZGUganVsaW9sX2QnYWdvc3RfZGUgc2V0ZW1icmVfZCdvY3R1YnJlX2RlIG5vdmVtYnJlX2RlIGRlc2VtYnJlIi5zcGxpdCgiXyIpLGlzRm9ybWF0Oi9EW29EXT8oXHMpK01NTU0vfSxtb250aHNTaG9ydDoiZ2VuLl9mZWJyLl9tYXLDp19hYnIuX21haWdfanVueV9qdWwuX2FnLl9zZXQuX29jdC5fbm92Ll9kZXMuIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlRXhhY3Q6ITAsd2Vla2RheXM6ImRpdW1lbmdlX2RpbGx1bnNfZGltYXJ0c19kaW1lY3Jlc19kaWpvdXNfZGl2ZW5kcmVzX2Rpc3NhYnRlIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImRnLl9kbC5fZHQuX2RjLl9kai5fZHYuX2RzLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiZGdfZGxfZHRfZGNfZGpfZHZfZHMiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFtkZV0gWVlZWSIsbGw6IkQgTU1NIFlZWVkiLExMTDoiRCBNTU1NIFtkZV0gWVlZWSBbYSBsZXNdIEg6bW0iLGxsbDoiRCBNTU0gWVlZWSwgSDptbSIsTExMTDoiZGRkZCBEIE1NTU0gW2RlXSBZWVlZIFthIGxlc10gSDptbSIsbGxsbDoiZGRkIEQgTU1NIFlZWVksIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheTpmdW5jdGlvbigpe3JldHVybiJbYXZ1aSBhICIrKDEhPT10aGlzLmhvdXJzKCk/ImxlcyI6ImxhIikrIl0gTFQifSxuZXh0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltkZW3DoCBhICIrKDEhPT10aGlzLmhvdXJzKCk/ImxlcyI6ImxhIikrIl0gTFQifSxuZXh0V2VlazpmdW5jdGlvbigpe3JldHVybiJkZGRkIFthICIrKDEhPT10aGlzLmhvdXJzKCk/ImxlcyI6ImxhIikrIl0gTFQifSxsYXN0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIlthaGlyIGEgIisoMSE9PXRoaXMuaG91cnMoKT8ibGVzIjoibGEiKSsiXSBMVCJ9LGxhc3RXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIltlbF0gZGRkZCBbcGFzc2F0IGEgIisoMSE9PXRoaXMuaG91cnMoKT8ibGVzIjoibGEiKSsiXSBMVCJ9LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImQnYXF1w60gJXMiLHBhc3Q6ImZhICVzIixzOiJ1bnMgc2Vnb25zIixzczoiJWQgc2Vnb25zIixtOiJ1biBtaW51dCIsbW06IiVkIG1pbnV0cyIsaDoidW5hIGhvcmEiLGhoOiIlZCBob3JlcyIsZDoidW4gZGlhIixkZDoiJWQgZGllcyIsTToidW4gbWVzIixNTToiJWQgbWVzb3MiLHk6InVuIGFueSIseXk6IiVkIGFueXMifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHJ8bnx0fMOofGEpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcixwZXJpb2Qpe3ZhciBvdXRwdXQ9MT09PW51bWJlcj8iciI6Mj09PW51bWJlcj8ibiI6Mz09PW51bWJlcj8iciI6ND09PW51bWJlcj8idCI6IsOoIjtyZXR1cm4idyIhPT1wZXJpb2QmJiJXIiE9PXBlcmlvZHx8KG91dHB1dD0iYSIpLG51bWJlcitvdXRwdXR9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiMjAxYyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiOyhmdW5jdGlvbihnbG9iYWwpe2lmKF9fd2VicGFja19yZXF1aXJlX18oIlp2bXIiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCI4NkxXIiksX193ZWJwYWNrX3JlcXVpcmVfXygiL1ZwZiIpLGdsb2JhbC5fYmFiZWxQb2x5ZmlsbCl0aHJvdyBuZXcgRXJyb3IoIm9ubHkgb25lIGluc3RhbmNlIG9mIGJhYmVsLXBvbHlmaWxsIGlzIGFsbG93ZWQiKTtnbG9iYWwuX2JhYmVsUG9seWZpbGw9ITA7ZnVuY3Rpb24gZGVmaW5lKE8sa2V5LHZhbHVlKXtPW2tleV18fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLGtleSx7d3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwLHZhbHVlOnZhbHVlfSl9ZGVmaW5lKFN0cmluZy5wcm90b3R5cGUsInBhZExlZnQiLCIiLnBhZFN0YXJ0KSxkZWZpbmUoU3RyaW5nLnByb3RvdHlwZSwicGFkUmlnaHQiLCIiLnBhZEVuZCksInBvcCxyZXZlcnNlLHNoaWZ0LGtleXMsdmFsdWVzLGVudHJpZXMsaW5kZXhPZixldmVyeSxzb21lLGZvckVhY2gsbWFwLGZpbHRlcixmaW5kLGZpbmRJbmRleCxpbmNsdWRlcyxqb2luLHNsaWNlLGNvbmNhdCxwdXNoLHNwbGljZSx1bnNoaWZ0LHNvcnQsbGFzdEluZGV4T2YscmVkdWNlLHJlZHVjZVJpZ2h0LGNvcHlXaXRoaW4sZmlsbCIuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7W11ba2V5XSYmZGVmaW5lKEFycmF5LGtleSxGdW5jdGlvbi5jYWxsLmJpbmQoW11ba2V5XSkpfSl9KS5jYWxsKHRoaXMsX193ZWJwYWNrX3JlcXVpcmVfXygieUxwaiIpKX0sIjI1ZE4iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUywiT2JqZWN0Iix7aXM6X193ZWJwYWNrX3JlcXVpcmVfXygiZzZITCIpfSl9LCIyNXFuIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5SLCJTZXQiLHt0b0pTT046X193ZWJwYWNrX3JlcXVpcmVfXygiUkxoOSIpKCJTZXQiKX0pfSwiMjlzLyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGNvcmU9X193ZWJwYWNrX3JlcXVpcmVfXygiV0VwayIpLGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1VDJZIiksc3RvcmU9Z2xvYmFsWyJfX2NvcmUtanNfc2hhcmVkX18iXXx8KGdsb2JhbFsiX19jb3JlLWpzX3NoYXJlZF9fIl09e30pOyhtb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihrZXksdmFsdWUpe3JldHVybiBzdG9yZVtrZXldfHwoc3RvcmVba2V5XT12b2lkIDAhPT12YWx1ZT92YWx1ZTp7fSl9KSgidmVyc2lvbnMiLFtdKS5wdXNoKHt2ZXJzaW9uOmNvcmUudmVyc2lvbixtb2RlOl9fd2VicGFja19yZXF1aXJlX18oInVPUFMiKT8icHVyZSI6Imdsb2JhbCIsY29weXJpZ2h0OiLCqSAyMDE5IERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpIn0pfSwiMkdUUCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGFGdW5jdGlvbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlYW9oIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oZm4sdGhhdCxsZW5ndGgpe2lmKGFGdW5jdGlvbihmbiksdm9pZCAwPT09dGhhdClyZXR1cm4gZm47c3dpdGNoKGxlbmd0aCl7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZm4uY2FsbCh0aGF0LGEpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKGEsYil7cmV0dXJuIGZuLmNhbGwodGhhdCxhLGIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZm4uY2FsbCh0aGF0LGEsYixjKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGZuLmFwcGx5KHRoYXQsYXJndW1lbnRzKX19fSwiMk5iMCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiRmxRZiIpLF9fd2VicGFja19yZXF1aXJlX18oImJCeTkiKSxtb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ6TGtHIikuZigiaXRlcmF0b3IiKX0sIjJPaUYiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGl0KXRocm93IFR5cGVFcnJvcihpdCsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBpdH19LCIyU1ZkIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24odXJsKXtyZXR1cm4vXihbYS16XVthLXpcZFwrXC1cLl0qOik/XC9cLy9pLnRlc3QodXJsKX19LCIyU3BqIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlAsIkZ1bmN0aW9uIix7YmluZDpfX3dlYnBhY2tfcmVxdWlyZV9fKCI4TUVHIil9KX0sIjJhdHAiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSwkYXRhbmg9TWF0aC5hdGFuaDskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqISgkYXRhbmgmJjEvJGF0YW5oKC0wKTwwKSwiTWF0aCIse2F0YW5oOmZ1bmN0aW9uKHgpe3JldHVybiAwPT0oeD0reCk/eDpNYXRoLmxvZygoMSt4KS8oMS14KSkvMn19KX0sIjJmYUUiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1SzdaIiksSUU4X0RPTV9ERUZJTkU9X193ZWJwYWNrX3JlcXVpcmVfXygiZVV0RiIpLHRvUHJpbWl0aXZlPV9fd2VicGFja19yZXF1aXJlX18oIkc4TW8iKSxkUD1PYmplY3QuZGVmaW5lUHJvcGVydHk7ZXhwb3J0cy5mPV9fd2VicGFja19yZXF1aXJlX18oImptREgiKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oTyxQLEF0dHJpYnV0ZXMpe2lmKGFuT2JqZWN0KE8pLFA9dG9QcmltaXRpdmUoUCwhMCksYW5PYmplY3QoQXR0cmlidXRlcyksSUU4X0RPTV9ERUZJTkUpdHJ5e3JldHVybiBkUChPLFAsQXR0cmlidXRlcyl9Y2F0Y2goZSl7fWlmKCJnZXQiaW4gQXR0cmlidXRlc3x8InNldCJpbiBBdHRyaWJ1dGVzKXRocm93IFR5cGVFcnJvcigiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhIik7cmV0dXJuInZhbHVlImluIEF0dHJpYnV0ZXMmJihPW1BdPUF0dHJpYnV0ZXMudmFsdWUpLE99fSwiMmZqbiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImZyLWNhIix7bW9udGhzOiJqYW52aWVyX2bDqXZyaWVyX21hcnNfYXZyaWxfbWFpX2p1aW5fanVpbGxldF9hb8O7dF9zZXB0ZW1icmVfb2N0b2JyZV9ub3ZlbWJyZV9kw6ljZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ImphbnYuX2bDqXZyLl9tYXJzX2F2ci5fbWFpX2p1aW5fanVpbC5fYW/Du3Rfc2VwdC5fb2N0Ll9ub3YuX2TDqWMuIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlRXhhY3Q6ITAsd2Vla2RheXM6ImRpbWFuY2hlX2x1bmRpX21hcmRpX21lcmNyZWRpX2pldWRpX3ZlbmRyZWRpX3NhbWVkaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkaW0uX2x1bi5fbWFyLl9tZXIuX2pldS5fdmVuLl9zYW0uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJkaV9sdV9tYV9tZV9qZV92ZV9zYSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltBdWpvdXJk4oCZaHVpIMOgXSBMVCIsbmV4dERheToiW0RlbWFpbiDDoF0gTFQiLG5leHRXZWVrOiJkZGRkIFvDoF0gTFQiLGxhc3REYXk6IltIaWVyIMOgXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2Rlcm5pZXIgw6BdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYW5zICVzIixwYXN0OiJpbCB5IGEgJXMiLHM6InF1ZWxxdWVzIHNlY29uZGVzIixzczoiJWQgc2Vjb25kZXMiLG06InVuZSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJ1bmUgaGV1cmUiLGhoOiIlZCBoZXVyZXMiLGQ6InVuIGpvdXIiLGRkOiIlZCBqb3VycyIsTToidW4gbW9pcyIsTU06IiVkIG1vaXMiLHk6InVuIGFuIix5eToiJWQgYW5zIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfShlcnxlKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIscGVyaW9kKXtzd2l0Y2gocGVyaW9kKXtkZWZhdWx0OmNhc2UiTSI6Y2FzZSJRIjpjYXNlIkQiOmNhc2UiREREIjpjYXNlImQiOnJldHVybiBudW1iZXIrKDE9PT1udW1iZXI/ImVyIjoiZSIpO2Nhc2UidyI6Y2FzZSJXIjpyZXR1cm4gbnVtYmVyKygxPT09bnVtYmVyPyJyZSI6ImUiKX19fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCIyeWt2IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIG1vbnRoc1Nob3J0V2l0aERvdHM9Imphbi5fZmViLl9tcnQuX2Fwci5fbWVpX2p1bi5fanVsLl9hdWcuX3NlcC5fb2t0Ll9ub3YuX2RlYy4iLnNwbGl0KCJfIiksbW9udGhzU2hvcnRXaXRob3V0RG90cz0iamFuX2ZlYl9tcnRfYXByX21laV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMiLnNwbGl0KCJfIiksbW9udGhzUGFyc2U9Wy9eamFuL2ksL15mZWIvaSwvXm1hYXJ0fG1ydC4/JC9pLC9eYXByL2ksL15tZWkkL2ksL15qdW5baS5dPyQvaSwvXmp1bFtpLl0/JC9pLC9eYXVnL2ksL15zZXAvaSwvXm9rdC9pLC9ebm92L2ksL15kZWMvaV0sbW9udGhzUmVnZXg9L14oamFudWFyaXxmZWJydWFyaXxtYWFydHxhcHJpbHxtZWl8anVbbmxdaXxhdWd1c3R1c3xzZXB0ZW1iZXJ8b2t0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcnxqYW5cLj98ZmViXC4/fG1ydFwuP3xhcHJcLj98anVbbmxdXC4/fGF1Z1wuP3xzZXBcLj98b2t0XC4/fG5vdlwuP3xkZWNcLj8pL2k7bW9tZW50LmRlZmluZUxvY2FsZSgibmwtYmUiLHttb250aHM6ImphbnVhcmlfZmVicnVhcmlfbWFhcnRfYXByaWxfbWVpX2p1bmlfanVsaV9hdWd1c3R1c19zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDpmdW5jdGlvbihtLGZvcm1hdCl7cmV0dXJuIG0/Ly1NTU0tLy50ZXN0KGZvcm1hdCk/bW9udGhzU2hvcnRXaXRob3V0RG90c1ttLm1vbnRoKCldOm1vbnRoc1Nob3J0V2l0aERvdHNbbS5tb250aCgpXTptb250aHNTaG9ydFdpdGhEb3RzfSxtb250aHNSZWdleDptb250aHNSZWdleCxtb250aHNTaG9ydFJlZ2V4Om1vbnRoc1JlZ2V4LG1vbnRoc1N0cmljdFJlZ2V4Oi9eKGphbnVhcml8ZmVicnVhcml8bWFhcnR8YXByaWx8bWVpfGp1W25sXWl8YXVndXN0dXN8c2VwdGVtYmVyfG9rdG9iZXJ8bm92ZW1iZXJ8ZGVjZW1iZXIpL2ksbW9udGhzU2hvcnRTdHJpY3RSZWdleDovXihqYW5cLj98ZmViXC4/fG1ydFwuP3xhcHJcLj98bWVpfGp1W25sXVwuP3xhdWdcLj98c2VwXC4/fG9rdFwuP3xub3ZcLj98ZGVjXC4/KS9pLG1vbnRoc1BhcnNlOm1vbnRoc1BhcnNlLGxvbmdNb250aHNQYXJzZTptb250aHNQYXJzZSxzaG9ydE1vbnRoc1BhcnNlOm1vbnRoc1BhcnNlLHdlZWtkYXlzOiJ6b25kYWdfbWFhbmRhZ19kaW5zZGFnX3dvZW5zZGFnX2RvbmRlcmRhZ192cmlqZGFnX3phdGVyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InpvLl9tYS5fZGkuX3dvLl9kby5fdnIuX3phLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiem9fbWFfZGlfd29fZG9fdnJfemEiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbdmFuZGFhZyBvbV0gTFQiLG5leHREYXk6Ilttb3JnZW4gb21dIExUIixuZXh0V2VlazoiZGRkZCBbb21dIExUIixsYXN0RGF5OiJbZ2lzdGVyZW4gb21dIExUIixsYXN0V2VlazoiW2FmZ2Vsb3Blbl0gZGRkZCBbb21dIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJvdmVyICVzIixwYXN0OiIlcyBnZWxlZGVuIixzOiJlZW4gcGFhciBzZWNvbmRlbiIsc3M6IiVkIHNlY29uZGVuIixtOiLDqcOpbiBtaW51dXQiLG1tOiIlZCBtaW51dGVuIixoOiLDqcOpbiB1dXIiLGhoOiIlZCB1dXIiLGQ6IsOpw6luIGRhZyIsZGQ6IiVkIGRhZ2VuIixNOiLDqcOpbiBtYWFuZCIsTU06IiVkIG1hYW5kZW4iLHk6IsOpw6luIGphYXIiLHl5OiIlZCBqYWFyIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfShzdGV8ZGUpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7cmV0dXJuIG51bWJlcisoMT09PW51bWJlcnx8OD09PW51bWJlcnx8MjA8PW51bWJlcj8ic3RlIjoiZGUiKX0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCIzRTFyIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIHN5bWJvbE1hcD17MToi4KWnIiwyOiLgpagiLDM6IuClqSIsNDoi4KWqIiw1OiLgpasiLDY6IuClrCIsNzoi4KWtIiw4OiLgpa4iLDk6IuClryIsMDoi4KWmIn0sbnVtYmVyTWFwPXsi4KWnIjoiMSIsIuClqCI6IjIiLCLgpakiOiIzIiwi4KWqIjoiNCIsIuClqyI6IjUiLCLgpawiOiI2Iiwi4KWtIjoiNyIsIuClriI6IjgiLCLgpa8iOiI5Iiwi4KWmIjoiMCJ9O21vbWVudC5kZWZpbmVMb2NhbGUoImhpIix7bW9udGhzOiLgpJzgpKjgpLXgpLDgpYBf4KSr4KS84KSw4KS14KSw4KWAX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpYjgpLJf4KSu4KSIX+CknOClguCkqF/gpJzgpYHgpLLgpL7gpIhf4KSF4KSX4KS44KWN4KSkX+CkuOCkv+CkpOCkruCljeCkrOCksF/gpIXgpJXgpY3gpJ/gpYLgpKzgpLBf4KSo4KS14KSu4KWN4KSs4KSwX+CkpuCkv+CkuOCkruCljeCkrOCksCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4KSc4KSoLl/gpKvgpLzgpLAuX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpYguX+CkruCkiF/gpJzgpYLgpKhf4KSc4KWB4KSyLl/gpIXgpJcuX+CkuOCkv+CkpC5f4KSF4KSV4KWN4KSf4KWCLl/gpKjgpLUuX+CkpuCkv+CkuC4iLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoi4KSw4KS14KS/4KS14KS+4KSwX+CkuOCli+CkruCkteCkvuCksF/gpK7gpILgpJfgpLLgpLXgpL7gpLBf4KSs4KWB4KSn4KS14KS+4KSwX+Ckl+ClgeCksOClguCkteCkvuCksF/gpLbgpYHgpJXgpY3gpLDgpLXgpL7gpLBf4KS24KSo4KS/4KS14KS+4KSwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCksOCkteCkv1/gpLjgpYvgpK5f4KSu4KSC4KSX4KSyX+CkrOClgeCkp1/gpJfgpYHgpLDgpYJf4KS24KWB4KSV4KWN4KSwX+CktuCkqOCkvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4KSwX+CkuOCli1/gpK7gpIJf4KSs4KWBX+Ckl+ClgV/gpLbgpYFf4KS2Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIOCkrOCknOClhyIsTFRTOiJBIGg6bW06c3Mg4KSs4KSc4KWHIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVksIEEgaDptbSDgpKzgpJzgpYciLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4KSs4KSc4KWHIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvgpIbgpJxdIExUIixuZXh0RGF5OiJb4KSV4KSyXSBMVCIsbmV4dFdlZWs6ImRkZGQsIExUIixsYXN0RGF5OiJb4KSV4KSyXSBMVCIsbGFzdFdlZWs6IlvgpKrgpL/gpJvgpLLgpYddIGRkZGQsIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDgpK7gpYfgpIIiLHBhc3Q6IiVzIOCkquCkueCksuClhyIsczoi4KSV4KWB4KSbIOCkueClgCDgpJXgpY3gpLfgpKMiLHNzOiIlZCDgpLjgpYfgpJXgpILgpKEiLG06IuCkj+CklSDgpK7gpL/gpKjgpJ8iLG1tOiIlZCDgpK7gpL/gpKjgpJ8iLGg6IuCkj+CklSDgpJjgpILgpJ/gpL4iLGhoOiIlZCDgpJjgpILgpJ/gpYciLGQ6IuCkj+CklSDgpKbgpL/gpKgiLGRkOiIlZCDgpKbgpL/gpKgiLE06IuCkj+CklSDgpK7gpLngpYDgpKjgpYciLE1NOiIlZCDgpK7gpLngpYDgpKjgpYciLHk6IuCkj+CklSDgpLXgpLDgpY3gpLciLHl5OiIlZCDgpLXgpLDgpY3gpLcifSxwcmVwYXJzZTpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvW+Clp+ClqOClqeClquClq+ClrOClreClruClr+Clpl0vZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIG51bWJlck1hcFttYXRjaF19KX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHN5bWJvbE1hcFttYXRjaF19KX0sbWVyaWRpZW1QYXJzZTov4KSw4KS+4KSkfOCkuOClgeCkrOCkuXzgpKbgpYvgpKrgpLngpLB84KS24KS+4KSuLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksIuCksOCkvuCkpCI9PT1tZXJpZGllbT9ob3VyPDQ/aG91cjpob3VyKzEyOiLgpLjgpYHgpKzgpLkiPT09bWVyaWRpZW0/aG91cjoi4KSm4KWL4KSq4KS54KSwIj09PW1lcmlkaWVtPzEwPD1ob3VyP2hvdXI6aG91cisxMjoi4KS24KS+4KSuIj09PW1lcmlkaWVtP2hvdXIrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjw0PyLgpLDgpL7gpKQiOmhvdXI8MTA/IuCkuOClgeCkrOCkuSI6aG91cjwxNz8i4KSm4KWL4KSq4KS54KSwIjpob3VyPDIwPyLgpLbgpL7gpK4iOiLgpLDgpL7gpKQifSx3ZWVrOntkb3c6MCxkb3k6Nn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sIjNMeWoiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciByZWRlZmluZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLcm9KIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24odGFyZ2V0LHNyYyxzYWZlKXtmb3IodmFyIGtleSBpbiBzcmMpcmVkZWZpbmUodGFyZ2V0LGtleSxzcmNba2V5XSxzYWZlKTtyZXR1cm4gdGFyZ2V0fX0sIjNZcFciOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIktPUWIiKSgiU2V0Iil9LCIzeHR5IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksYUZ1bmN0aW9uPV9fd2VicGFja19yZXF1aXJlX18oIjJPaUYiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksckFwcGx5PShfX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIikuUmVmbGVjdHx8e30pLmFwcGx5LGZBcHBseT1GdW5jdGlvbi5hcHBseTskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqIV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe3JBcHBseShmdW5jdGlvbigpe30pfSksIlJlZmxlY3QiLHthcHBseTpmdW5jdGlvbih0YXJnZXQsdGhpc0FyZ3VtZW50LGFyZ3VtZW50c0xpc3Qpe3ZhciBUPWFGdW5jdGlvbih0YXJnZXQpLEw9YW5PYmplY3QoYXJndW1lbnRzTGlzdCk7cmV0dXJuIHJBcHBseT9yQXBwbHkoVCx0aGlzQXJndW1lbnQsTCk6ZkFwcGx5LmNhbGwoVCx0aGlzQXJndW1lbnQsTCl9fSl9LCI0NVR2IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgbWV0YWRhdGE9X193ZWJwYWNrX3JlcXVpcmVfXygiTjZjSiIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSxnZXRQcm90b3R5cGVPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJPUDNZIiksb3JkaW5hcnlIYXNPd25NZXRhZGF0YT1tZXRhZGF0YS5oYXMsb3JkaW5hcnlHZXRPd25NZXRhZGF0YT1tZXRhZGF0YS5nZXQsdG9NZXRhS2V5PW1ldGFkYXRhLmtleSxvcmRpbmFyeUdldE1ldGFkYXRhPWZ1bmN0aW9uKE1ldGFkYXRhS2V5LE8sUCl7aWYob3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSxPLFApKXJldHVybiBvcmRpbmFyeUdldE93bk1ldGFkYXRhKE1ldGFkYXRhS2V5LE8sUCk7dmFyIHBhcmVudD1nZXRQcm90b3R5cGVPZihPKTtyZXR1cm4gbnVsbCE9PXBhcmVudD9vcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LHBhcmVudCxQKTp2b2lkIDB9O21ldGFkYXRhLmV4cCh7Z2V0TWV0YWRhdGE6ZnVuY3Rpb24obWV0YWRhdGFLZXksdGFyZ2V0KXtyZXR1cm4gb3JkaW5hcnlHZXRNZXRhZGF0YShtZXRhZGF0YUtleSxhbk9iamVjdCh0YXJnZXQpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6dG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpfX0pfSwiNDlENCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIG1ldGFkYXRhPV9fd2VicGFja19yZXF1aXJlX18oIk42Y0oiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksdG9NZXRhS2V5PW1ldGFkYXRhLmtleSxvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhPW1ldGFkYXRhLnNldDttZXRhZGF0YS5leHAoe2RlZmluZU1ldGFkYXRhOmZ1bmN0aW9uKG1ldGFkYXRhS2V5LG1ldGFkYXRhVmFsdWUsdGFyZ2V0LHRhcmdldEtleSl7b3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShtZXRhZGF0YUtleSxtZXRhZGF0YVZhbHVlLGFuT2JqZWN0KHRhcmdldCksdG9NZXRhS2V5KHRhcmdldEtleSkpfX0pfSwiNExpRCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLCRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLHJlZGVmaW5lPV9fd2VicGFja19yZXF1aXJlX18oIktyb0oiKSxyZWRlZmluZUFsbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIzTHlqIiksbWV0YT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJaNnZGIiksZm9yT2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiU2xrWSIpLGFuSW5zdGFuY2U9X193ZWJwYWNrX3JlcXVpcmVfXygiOWdYNyIpLGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKSxmYWlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIiksJGl0ZXJEZXRlY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiWE1WaCIpLHNldFRvU3RyaW5nVGFnPV9fd2VicGFja19yZXF1aXJlX18oImZ5RHEiKSxpbmhlcml0SWZSZXF1aXJlZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYYnppIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oTkFNRSx3cmFwcGVyLG1ldGhvZHMsY29tbW9uLElTX01BUCxJU19XRUFLKXt2YXIgQmFzZT1nbG9iYWxbTkFNRV0sQz1CYXNlLEFEREVSPUlTX01BUD8ic2V0IjoiYWRkIixwcm90bz1DJiZDLnByb3RvdHlwZSxPPXt9LGZpeE1ldGhvZD1mdW5jdGlvbihLRVkpe3ZhciBmbj1wcm90b1tLRVldO3JlZGVmaW5lKHByb3RvLEtFWSwiZGVsZXRlIj09S0VZP2Z1bmN0aW9uKGEpe3JldHVybiEoSVNfV0VBSyYmIWlzT2JqZWN0KGEpKSYmZm4uY2FsbCh0aGlzLDA9PT1hPzA6YSl9OiJoYXMiPT1LRVk/ZnVuY3Rpb24oYSl7cmV0dXJuIShJU19XRUFLJiYhaXNPYmplY3QoYSkpJiZmbi5jYWxsKHRoaXMsMD09PWE/MDphKX06ImdldCI9PUtFWT9mdW5jdGlvbihhKXtyZXR1cm4gSVNfV0VBSyYmIWlzT2JqZWN0KGEpP3ZvaWQgMDpmbi5jYWxsKHRoaXMsMD09PWE/MDphKX06ImFkZCI9PUtFWT9mdW5jdGlvbihhKXtyZXR1cm4gZm4uY2FsbCh0aGlzLDA9PT1hPzA6YSksdGhpc306ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZm4uY2FsbCh0aGlzLDA9PT1hPzA6YSxiKSx0aGlzfSl9O2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBDJiYoSVNfV0VBS3x8cHJvdG8uZm9yRWFjaCYmIWZhaWxzKGZ1bmN0aW9uKCl7KG5ldyBDKS5lbnRyaWVzKCkubmV4dCgpfSkpKXt2YXIgaW5zdGFuY2U9bmV3IEMsSEFTTlRfQ0hBSU5JTkc9aW5zdGFuY2VbQURERVJdKElTX1dFQUs/e306LTAsMSkhPWluc3RhbmNlLFRIUk9XU19PTl9QUklNSVRJVkVTPWZhaWxzKGZ1bmN0aW9uKCl7aW5zdGFuY2UuaGFzKDEpfSksQUNDRVBUX0lURVJBQkxFUz0kaXRlckRldGVjdChmdW5jdGlvbihpdGVyKXtuZXcgQyhpdGVyKX0pLEJVR0dZX1pFUk89IUlTX1dFQUsmJmZhaWxzKGZ1bmN0aW9uKCl7Zm9yKHZhciAkaW5zdGFuY2U9bmV3IEMsaW5kZXg9NTtpbmRleC0tOykkaW5zdGFuY2VbQURERVJdKGluZGV4LGluZGV4KTtyZXR1cm4hJGluc3RhbmNlLmhhcygtMCl9KTtBQ0NFUFRfSVRFUkFCTEVTfHwoKChDPXdyYXBwZXIoZnVuY3Rpb24odGFyZ2V0LGl0ZXJhYmxlKXthbkluc3RhbmNlKHRhcmdldCxDLE5BTUUpO3ZhciB0aGF0PWluaGVyaXRJZlJlcXVpcmVkKG5ldyBCYXNlLHRhcmdldCxDKTtyZXR1cm4gbnVsbCE9aXRlcmFibGUmJmZvck9mKGl0ZXJhYmxlLElTX01BUCx0aGF0W0FEREVSXSx0aGF0KSx0aGF0fSkpLnByb3RvdHlwZT1wcm90bykuY29uc3RydWN0b3I9QyksKFRIUk9XU19PTl9QUklNSVRJVkVTfHxCVUdHWV9aRVJPKSYmKGZpeE1ldGhvZCgiZGVsZXRlIiksZml4TWV0aG9kKCJoYXMiKSxJU19NQVAmJmZpeE1ldGhvZCgiZ2V0IikpLChCVUdHWV9aRVJPfHxIQVNOVF9DSEFJTklORykmJmZpeE1ldGhvZChBRERFUiksSVNfV0VBSyYmcHJvdG8uY2xlYXImJmRlbGV0ZSBwcm90by5jbGVhcn1lbHNlIEM9Y29tbW9uLmdldENvbnN0cnVjdG9yKHdyYXBwZXIsTkFNRSxJU19NQVAsQURERVIpLHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLG1ldGhvZHMpLG1ldGEuTkVFRD0hMDtyZXR1cm4gc2V0VG9TdHJpbmdUYWcoQyxOQU1FKSxPW05BTUVdPUMsJGV4cG9ydCgkZXhwb3J0LkcrJGV4cG9ydC5XKyRleHBvcnQuRiooQyE9QmFzZSksTyksSVNfV0VBS3x8Y29tbW9uLnNldFN0cm9uZyhDLE5BTUUsSVNfTUFQKSxDfX0sIjRNVjMiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgc3ltYm9sTWFwPXsxOiLgq6ciLDI6IuCrqCIsMzoi4KupIiw0OiLgq6oiLDU6IuCrqyIsNjoi4KusIiw3OiLgq60iLDg6IuCrriIsOToi4KuvIiwwOiLgq6YifSxudW1iZXJNYXA9eyLgq6ciOiIxIiwi4KuoIjoiMiIsIuCrqSI6IjMiLCLgq6oiOiI0Iiwi4KurIjoiNSIsIuCrrCI6IjYiLCLgq60iOiI3Iiwi4KuuIjoiOCIsIuCrryI6IjkiLCLgq6YiOiIwIn07bW9tZW50LmRlZmluZUxvY2FsZSgiZ3UiLHttb250aHM6IuCqnOCqvuCqqOCrjeCqr+CrgeCqhuCqsOCrgF/gqqvgq4fgqqzgq43gqrDgq4HgqobgqrDgq4Bf4Kqu4Kq+4Kqw4KuN4KqaX+Cqj+CqquCrjeCqsOCqv+Cqsl/gqq7gq4df4Kqc4KuC4KqoX+CqnOCrgeCqsuCqvuCqiF/gqpHgqpfgqrjgq43gqp9f4Kq44Kqq4KuN4Kqf4KuH4Kqu4KuN4Kqs4KqwX+CqkeCqleCrjeCqn+CrjeCqrOCqsF/gqqjgqrXgq4fgqq7gq43gqqzgqrBf4Kqh4Kq/4Kq44KuH4Kqu4KuN4Kqs4KqwIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgqpzgqr7gqqjgq43gqq/gq4EuX+Cqq+Crh+CqrOCrjeCqsOCrgS5f4Kqu4Kq+4Kqw4KuN4KqaX+Cqj+CqquCrjeCqsOCqvy5f4Kqu4KuHX+CqnOCrguCqqF/gqpzgq4HgqrLgqr4uX+CqkeCqly5f4Kq44Kqq4KuN4Kqf4KuHLl/gqpHgqpXgq43gqp/gq40uX+CqqOCqteCrhy5f4Kqh4Kq/4Kq44KuHLiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiLgqrDgqrXgqr/gqrXgqr7gqrBf4Kq44KuL4Kqu4Kq14Kq+4KqwX+CqruCqguCql+Cqs+CqteCqvuCqsF/gqqzgq4Hgqqfgq43gqrXgqr7gqrBf4KqX4KuB4Kqw4KuB4Kq14Kq+4KqwX+CqtuCrgeCqleCrjeCqsOCqteCqvuCqsF/gqrbgqqjgqr/gqrXgqr7gqrAiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4Kqw4Kq14Kq/X+CquOCri+Cqrl/gqq7gqoLgqpfgqrNf4Kqs4KuB4Kqn4KuNX+Cql+CrgeCqsOCrgV/gqrbgq4HgqpXgq43gqrBf4Kq24Kqo4Kq/Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgqrBf4Kq44KuLX+CqruCqgl/gqqzgq4Ff4KqX4KuBX+CqtuCrgV/gqrYiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJBIGg6bW0g4Kq14Kq+4KqX4KuN4Kqv4KuHIixMVFM6IkEgaDptbTpzcyDgqrXgqr7gqpfgq43gqq/gq4ciLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSwgQSBoOm1tIOCqteCqvuCql+CrjeCqr+CrhyIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSDgqrXgqr7gqpfgq43gqq/gq4cifSxjYWxlbmRhcjp7c2FtZURheToiW+CqhuCqnF0gTFQiLG5leHREYXk6IlvgqpXgqr7gqrLgq4ddIExUIixuZXh0V2VlazoiZGRkZCwgTFQiLGxhc3REYXk6IlvgqpfgqofgqpXgqr7gqrLgq4ddIExUIixsYXN0V2VlazoiW+CqquCqvuCqm+CqsuCqvl0gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIOCqruCqviIscGFzdDoiJXMg4Kqq4KuH4Kq54Kqy4Kq+IixzOiLgqoXgqq7gq4HgqpUg4Kqq4Kqz4KuLIixzczoiJWQg4Kq44KuH4KqV4KqC4KqhIixtOiLgqo/gqpUg4Kqu4Kq/4Kqo4Kq/4KqfIixtbToiJWQg4Kqu4Kq/4Kqo4Kq/4KqfIixoOiLgqo/gqpUg4KqV4Kqy4Kq+4KqVIixoaDoiJWQg4KqV4Kqy4Kq+4KqVIixkOiLgqo/gqpUg4Kqm4Kq/4Kq14Kq4IixkZDoiJWQg4Kqm4Kq/4Kq14Kq4IixNOiLgqo/gqpUg4Kqu4Kq54Kq/4Kqo4KuLIixNTToiJWQg4Kqu4Kq54Kq/4Kqo4KuLIix5OiLgqo/gqpUg4Kq14Kqw4KuN4Kq3Iix5eToiJWQg4Kq14Kqw4KuN4Kq3In0scHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgq6fgq6jgq6ngq6rgq6vgq6zgq63gq67gq6/gq6ZdL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBudW1iZXJNYXBbbWF0Y2hdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBzeW1ib2xNYXBbbWF0Y2hdfSl9LG1lcmlkaWVtUGFyc2U6L+CqsOCqvuCqpHzgqqzgqqrgq4vgqrB84Kq44Kq14Kq+4KqwfOCquOCqvuCqguCqnC8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKGhvdXIsbWVyaWRpZW0pe3JldHVybiAxMj09PWhvdXImJihob3VyPTApLCLgqrDgqr7gqqQiPT09bWVyaWRpZW0/aG91cjw0P2hvdXI6aG91cisxMjoi4Kq44Kq14Kq+4KqwIj09PW1lcmlkaWVtP2hvdXI6IuCqrOCqquCri+CqsCI9PT1tZXJpZGllbT8xMDw9aG91cj9ob3VyOmhvdXIrMTI6IuCquOCqvuCqguCqnCI9PT1tZXJpZGllbT9ob3VyKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7cmV0dXJuIGhvdXI8ND8i4Kqw4Kq+4KqkIjpob3VyPDEwPyLgqrjgqrXgqr7gqrAiOmhvdXI8MTc/IuCqrOCqquCri+CqsCI6aG91cjwyMD8i4Kq44Kq+4KqC4KqcIjoi4Kqw4Kq+4KqkIn0sd2Vlazp7ZG93OjAsZG95OjZ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCI0UjR1IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZiIuc3BsaXQoIiwiKX0sIjRkN0YiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPXtkZWZhdWx0Ol9fd2VicGFja19yZXF1aXJlX18oImFXN2UiKSxfX2VzTW9kdWxlOiEwfX0sIjRkT3ciOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJlbi1pZSIse21vbnRoczoiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6IlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3VfTW9fVHVfV2VfVGhfRnJfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltUb2RheSBhdF0gTFQiLG5leHREYXk6IltUb21vcnJvdyBhdF0gTFQiLG5leHRXZWVrOiJkZGRkIFthdF0gTFQiLGxhc3REYXk6IltZZXN0ZXJkYXkgYXRdIExUIixsYXN0V2VlazoiW0xhc3RdIGRkZGQgW2F0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaW4gJXMiLHBhc3Q6IiVzIGFnbyIsczoiYSBmZXcgc2Vjb25kcyIsc3M6IiVkIHNlY29uZHMiLG06ImEgbWludXRlIixtbToiJWQgbWludXRlcyIsaDoiYW4gaG91ciIsaGg6IiVkIGhvdXJzIixkOiJhIGRheSIsZGQ6IiVkIGRheXMiLE06ImEgbW9udGgiLE1NOiIlZCBtb250aHMiLHk6ImEgeWVhciIseXk6IiVkIHllYXJzIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfShzdHxuZHxyZHx0aCkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXt2YXIgYj1udW1iZXIlMTAsb3V0cHV0PTE9PX5+KG51bWJlciUxMDAvMTApPyJ0aCI6MT09PWI/InN0IjoyPT09Yj8ibmQiOjM9PT1iPyJyZCI6InRoIjtyZXR1cm4gbnVtYmVyK291dHB1dH0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCI1SzdaIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiOTNJNCIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0KXtpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGl0fX0sIjVQZjAiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTL2ovIiksJGdldFByb3RvdHlwZU9mPV9fd2VicGFja19yZXF1aXJlX18oIk9QM1kiKTtfX3dlYnBhY2tfcmVxdWlyZV9fKCJYdHI4IikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihpdCl7cmV0dXJuICRnZXRQcm90b3R5cGVPZih0b09iamVjdChpdCkpfX0pfSwiNVQyWSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe3ZhciBnbG9iYWw9bW9kdWxlLmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9Z2xvYmFsKX0sIjVvTXAiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihiYXNlVVJMLHJlbGF0aXZlVVJMKXtyZXR1cm4gcmVsYXRpdmVVUkw/YmFzZVVSTC5yZXBsYWNlKC9cLyskLywiIikrIi8iK3JlbGF0aXZlVVJMLnJlcGxhY2UoL15cLysvLCIiKTpiYXNlVVJMfX0sIjV2TVYiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBoYXM9X193ZWJwYWNrX3JlcXVpcmVfXygiQitPVCIpLHRvSU9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJOc08vIiksYXJyYXlJbmRleE9mPV9fd2VicGFja19yZXF1aXJlX18oIlcwNzAiKSghMSksSUVfUFJPVE89X193ZWJwYWNrX3JlcXVpcmVfXygiVlZseCIpKCJJRV9QUk9UTyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG9iamVjdCxuYW1lcyl7dmFyIGtleSxPPXRvSU9iamVjdChvYmplY3QpLGk9MCxyZXN1bHQ9W107Zm9yKGtleSBpbiBPKWtleSE9SUVfUFJPVE8mJmhhcyhPLGtleSkmJnJlc3VsdC5wdXNoKGtleSk7Zm9yKDtuYW1lcy5sZW5ndGg+aTspaGFzKE8sa2V5PW5hbWVzW2krK10pJiYofmFycmF5SW5kZXhPZihyZXN1bHQsa2V5KXx8cmVzdWx0LnB1c2goa2V5KSk7cmV0dXJuIHJlc3VsdH19LCI2K1FCIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgibXMiLHttb250aHM6IkphbnVhcmlfRmVicnVhcmlfTWFjX0FwcmlsX01laV9KdW5fSnVsYWlfT2dvc19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EaXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYWNfQXByX01laV9KdW5fSnVsX09nc19TZXBfT2t0X05vdl9EaXMiLnNwbGl0KCJfIiksd2Vla2RheXM6IkFoYWRfSXNuaW5fU2VsYXNhX1JhYnVfS2hhbWlzX0p1bWFhdF9TYWJ0dSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJBaGRfSXNuX1NlbF9SYWJfS2hhX0p1bV9TYWIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkFoX0lzX1NsX1JiX0ttX0ptX1NiIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEgubW0iLExUUzoiSEgubW0uc3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tIn0sbWVyaWRpZW1QYXJzZTovcGFnaXx0ZW5nYWhhcml8cGV0YW5nfG1hbGFtLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksInBhZ2kiPT09bWVyaWRpZW0/aG91cjoidGVuZ2FoYXJpIj09PW1lcmlkaWVtPzExPD1ob3VyP2hvdXI6aG91cisxMjoicGV0YW5nIj09PW1lcmlkaWVtfHwibWFsYW0iPT09bWVyaWRpZW0/aG91cisxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXJzLG1pbnV0ZXMsaXNMb3dlcil7cmV0dXJuIGhvdXJzPDExPyJwYWdpIjpob3VyczwxNT8idGVuZ2FoYXJpIjpob3VyczwxOT8icGV0YW5nIjoibWFsYW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hhcmkgaW5pIHB1a3VsXSBMVCIsbmV4dERheToiW0Vzb2sgcHVrdWxdIExUIixuZXh0V2VlazoiZGRkZCBbcHVrdWxdIExUIixsYXN0RGF5OiJbS2VsbWFyaW4gcHVrdWxdIExUIixsYXN0V2VlazoiZGRkZCBbbGVwYXMgcHVrdWxdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYWxhbSAlcyIscGFzdDoiJXMgeWFuZyBsZXBhcyIsczoiYmViZXJhcGEgc2FhdCIsc3M6IiVkIHNhYXQiLG06InNlbWluaXQiLG1tOiIlZCBtaW5pdCIsaDoic2VqYW0iLGhoOiIlZCBqYW0iLGQ6InNlaGFyaSIsZGQ6IiVkIGhhcmkiLE06InNlYnVsYW4iLE1NOiIlZCBidWxhbiIseToic2V0YWh1biIseXk6IiVkIHRhaHVuIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCI2LzFzIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgTUVUQT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJZcUFjIikoIm1ldGEiKSxpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI5M0k0IiksaGFzPV9fd2VicGFja19yZXF1aXJlX18oIkIrT1QiKSxzZXREZXNjPV9fd2VicGFja19yZXF1aXJlX18oIjJmYUUiKS5mLGlkPTAsaXNFeHRlbnNpYmxlPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LEZSRUVaRT0hX193ZWJwYWNrX3JlcXVpcmVfXygiS1V4UCIpKGZ1bmN0aW9uKCl7cmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLHNldE1ldGE9ZnVuY3Rpb24oaXQpe3NldERlc2MoaXQsTUVUQSx7dmFsdWU6e2k6Ik8iKyArK2lkLHc6e319fSl9LG1ldGE9bW9kdWxlLmV4cG9ydHM9e0tFWTpNRVRBLE5FRUQ6ITEsZmFzdEtleTpmdW5jdGlvbihpdCxjcmVhdGUpe2lmKCFpc09iamVjdChpdCkpcmV0dXJuInN5bWJvbCI9PXR5cGVvZiBpdD9pdDooInN0cmluZyI9PXR5cGVvZiBpdD8iUyI6IlAiKStpdDtpZighaGFzKGl0LE1FVEEpKXtpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4iRiI7aWYoIWNyZWF0ZSlyZXR1cm4iRSI7c2V0TWV0YShpdCl9cmV0dXJuIGl0W01FVEFdLml9LGdldFdlYWs6ZnVuY3Rpb24oaXQsY3JlYXRlKXtpZighaGFzKGl0LE1FVEEpKXtpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4hMDtpZighY3JlYXRlKXJldHVybiExO3NldE1ldGEoaXQpfXJldHVybiBpdFtNRVRBXS53fSxvbkZyZWV6ZTpmdW5jdGlvbihpdCl7cmV0dXJuIEZSRUVaRSYmbWV0YS5ORUVEJiZpc0V4dGVuc2libGUoaXQpJiYhaGFzKGl0LE1FVEEpJiZzZXRNZXRhKGl0KSxpdH19fSwiNjk0ZSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGdPUEQ9X193ZWJwYWNrX3JlcXVpcmVfXygiRWVtSCIpLCRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKTskZXhwb3J0KCRleHBvcnQuUywiUmVmbGVjdCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcjpmdW5jdGlvbih0YXJnZXQscHJvcGVydHlLZXkpe3JldHVybiBnT1BELmYoYW5PYmplY3QodGFyZ2V0KSxwcm9wZXJ0eUtleSl9fSl9LCI2OWJuIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLGFGdW5jdGlvbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCIyT2lGIiksU1BFQ0lFUz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIikoInNwZWNpZXMiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihPLEQpe3ZhciBTLEM9YW5PYmplY3QoTykuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PUN8fG51bGw9PShTPWFuT2JqZWN0KEMpW1NQRUNJRVNdKT9EOmFGdW5jdGlvbihTKX19LCI2QVE5IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGNyZWF0ZVByb3BlcnR5PV9fd2VicGFja19yZXF1aXJlX18oIjhhN3IiKTskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqX193ZWJwYWNrX3JlcXVpcmVfXygiZWVWcSIpKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gRigpe31yZXR1cm4hKEFycmF5Lm9mLmNhbGwoRilpbnN0YW5jZW9mIEYpfSksIkFycmF5Iix7b2Y6ZnVuY3Rpb24oKXtmb3IodmFyIGluZGV4PTAsYUxlbj1hcmd1bWVudHMubGVuZ3RoLHJlc3VsdD1uZXcoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSkoYUxlbik7aW5kZXg8YUxlbjspY3JlYXRlUHJvcGVydHkocmVzdWx0LGluZGV4LGFyZ3VtZW50c1tpbmRleCsrXSk7cmV0dXJuIHJlc3VsdC5sZW5ndGg9YUxlbixyZXN1bHR9fSl9LCI2QjBZIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIHN5bWJvbE1hcD17MToi4Z+hIiwyOiLhn6IiLDM6IuGfoyIsNDoi4Z+kIiw1OiLhn6UiLDY6IuGfpiIsNzoi4Z+nIiw4OiLhn6giLDk6IuGfqSIsMDoi4Z+gIn0sbnVtYmVyTWFwPXsi4Z+hIjoiMSIsIuGfoiI6IjIiLCLhn6MiOiIzIiwi4Z+kIjoiNCIsIuGfpSI6IjUiLCLhn6YiOiI2Iiwi4Z+nIjoiNyIsIuGfqCI6IjgiLCLhn6kiOiI5Iiwi4Z+gIjoiMCJ9O21vbWVudC5kZWZpbmVMb2NhbGUoImttIix7bW9udGhzOiLhnpjhnoDhnprhnrZf4Z6A4Z674Z6Y4Z+S4Z6X4Z+IX+GemOGeuOGek+Getl/hnpjhn4Hhnp/hnrZf4Z6n4Z6f4Z6X4Z62X+GemOGet+GekOGeu+Gek+Getl/hnoDhnoDhn5LhnoDhnorhnrZf4Z6f4Z644Z6g4Z62X+GegOGeieGfkuGeieGetl/hno/hnrvhnpvhnrZf4Z6c4Z634Z6F4Z+S4Z6G4Z634Z6A4Z62X+GekuGfkuGek+GevCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Z6Y4Z6A4Z6a4Z62X+GegOGeu+GemOGfkuGel+GfiF/hnpjhnrjhnpPhnrZf4Z6Y4Z+B4Z6f4Z62X+Gep+Gen+Gel+Getl/hnpjhnrfhnpDhnrvhnpPhnrZf4Z6A4Z6A4Z+S4Z6A4Z6K4Z62X+Gen+GeuOGeoOGetl/hnoDhnonhn5LhnonhnrZf4Z6P4Z674Z6b4Z62X+GenOGet+GeheGfkuGehuGet+GegOGetl/hnpLhn5LhnpPhnrwiLnNwbGl0KCJfIiksd2Vla2RheXM6IuGeouGetuGekeGet+Gej+GfkuGemV/hnoXhn5DhnpPhn5LhnpFf4Z6i4Z6E4Z+S4Z6C4Z624Z6aX+GeluGeu+Gekl/hnpbhn5LhnprhnqDhnp/hn5LhnpThno/hnrfhn41f4Z6f4Z674Z6A4Z+S4Z6aX+Gen+GfheGemuGfjSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLhnqLhnrZf4Z6FX+Geol/hnpZf4Z6W4Z+S4Z6aX+Gen+Geu1/hnp8iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuGeouGetl/hnoVf4Z6iX+Gell/hnpbhn5Lhnppf4Z6f4Z67X+GenyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L+GeluGfkuGemuGeueGegHzhnpvhn5LhnoThnrbhnoUvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybiLhnpvhn5LhnoThnrbhnoUiPT09aW5wdXR9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDEyPyLhnpbhn5LhnprhnrnhnoAiOiLhnpvhn5LhnoThnrbhnoUifSxjYWxlbmRhcjp7c2FtZURheToiW+GekOGfkuGehOGfg+Gek+GfgeGfhyDhnpjhn4nhn4ThnoRdIExUIixuZXh0RGF5OiJb4Z6f4Z+S4Z6i4Z+C4Z6AIOGemOGfieGfhOGehF0gTFQiLG5leHRXZWVrOiJkZGRkIFvhnpjhn4nhn4ThnoRdIExUIixsYXN0RGF5OiJb4Z6Y4Z+S4Z6f4Z634Z6b4Z6Y4Z634Z6JIOGemOGfieGfhOGehF0gTFQiLGxhc3RXZWVrOiJkZGRkIFvhnp/hnpThn5Lhno/hnrbhnqDhn43hnpjhnrvhnpNdIFvhnpjhn4nhn4ThnoRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlc+GekeGfgOGejyIscGFzdDoiJXPhnpjhnrvhnpMiLHM6IuGelOGfieGeu+Gek+GfkuGemOGetuGek+GenOGet+Gek+GetuGekeGeuCIsc3M6IiVkIOGenOGet+Gek+GetuGekeGeuCIsbToi4Z6Y4Z694Z6Z4Z6T4Z624Z6R4Z64IixtbToiJWQg4Z6T4Z624Z6R4Z64IixoOiLhnpjhnr3hnpnhnpjhn4nhn4ThnoQiLGhoOiIlZCDhnpjhn4nhn4ThnoQiLGQ6IuGemOGeveGemeGekOGfkuGehOGfgyIsZGQ6IiVkIOGekOGfkuGehOGfgyIsTToi4Z6Y4Z694Z6Z4Z6B4Z+CIixNTToiJWQg4Z6B4Z+CIix5OiLhnpjhnr3hnpnhnobhn5LhnpPhnrbhn4YiLHl5OiIlZCDhnobhn5LhnpPhnrbhn4YifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi/hnpHhnrhcZHsxLDJ9LyxvcmRpbmFsOiLhnpHhnrglZCIscHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vhn6Hhn6Lhn6Phn6Thn6Xhn6bhn6fhn6jhn6nhn6BdL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBudW1iZXJNYXBbbWF0Y2hdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBzeW1ib2xNYXBbbWF0Y2hdfSl9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiNkZNTyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKSxpc0FycmF5PV9fd2VicGFja19yZXF1aXJlX18oIkVXbUMiKSxTUEVDSUVTPV9fd2VicGFja19yZXF1aXJlX18oIksweFUiKSgic3BlY2llcyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG9yaWdpbmFsKXt2YXIgQztyZXR1cm4gaXNBcnJheShvcmlnaW5hbCkmJigiZnVuY3Rpb24iIT10eXBlb2YoQz1vcmlnaW5hbC5jb25zdHJ1Y3Rvcil8fEMhPT1BcnJheSYmIWlzQXJyYXkoQy5wcm90b3R5cGUpfHwoQz12b2lkIDApLGlzT2JqZWN0KEMpJiZudWxsPT09KEM9Q1tTUEVDSUVTXSkmJihDPXZvaWQgMCkpLHZvaWQgMD09PUM/QXJyYXk6Q319LCI2VmFVIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGZsYXR0ZW5JbnRvQXJyYXk9X193ZWJwYWNrX3JlcXVpcmVfXygieEYvYiIpLHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlMvai8iKSx0b0xlbmd0aD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJuZThpIiksYUZ1bmN0aW9uPV9fd2VicGFja19yZXF1aXJlX18oIjJPaUYiKSxhcnJheVNwZWNpZXNDcmVhdGU9X193ZWJwYWNrX3JlcXVpcmVfXygielJ3byIpOyRleHBvcnQoJGV4cG9ydC5QLCJBcnJheSIse2ZsYXRNYXA6ZnVuY3Rpb24oY2FsbGJhY2tmbil7dmFyIHNvdXJjZUxlbixBLE89dG9PYmplY3QodGhpcyk7cmV0dXJuIGFGdW5jdGlvbihjYWxsYmFja2ZuKSxzb3VyY2VMZW49dG9MZW5ndGgoTy5sZW5ndGgpLEE9YXJyYXlTcGVjaWVzQ3JlYXRlKE8sMCksZmxhdHRlbkludG9BcnJheShBLE8sTyxzb3VyY2VMZW4sMCwxLGNhbGxiYWNrZm4sYXJndW1lbnRzWzFdKSxBfX0pLF9fd2VicGFja19yZXF1aXJlX18oIm5HeXUiKSgiZmxhdE1hcCIpfSwiNmRJVCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPU1hdGguc2NhbGV8fGZ1bmN0aW9uKHgsaW5Mb3csaW5IaWdoLG91dExvdyxvdXRIaWdoKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGh8fHghPXh8fGluTG93IT1pbkxvd3x8aW5IaWdoIT1pbkhpZ2h8fG91dExvdyE9b3V0TG93fHxvdXRIaWdoIT1vdXRIaWdoP05hTjp4PT09MS8wfHx4PT09LTEvMD94Oih4LWluTG93KSoob3V0SGlnaC1vdXRMb3cpLyhpbkhpZ2gtaW5Mb3cpK291dExvd319LCI3QmpDIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcHJvY2Vzc1JlbGF0aXZlVGltZShudW1iZXIsd2l0aG91dFN1ZmZpeCxrZXksaXNGdXR1cmUpe3ZhciBmb3JtYXQ9e3M6WyJtw7VuZSBzZWt1bmRpIiwibcO1bmkgc2VrdW5kIiwicGFhciBzZWt1bmRpdCJdLHNzOltudW1iZXIrInNla3VuZGkiLG51bWJlcisic2VrdW5kaXQiXSxtOlsiw7xoZSBtaW51dGkiLCLDvGtzIG1pbnV0Il0sbW06W251bWJlcisiIG1pbnV0aSIsbnVtYmVyKyIgbWludXRpdCJdLGg6WyLDvGhlIHR1bm5pIiwidHVuZCBhZWdhIiwiw7xrcyB0dW5kIl0saGg6W251bWJlcisiIHR1bm5pIixudW1iZXIrIiB0dW5kaSJdLGQ6WyLDvGhlIHDDpGV2YSIsIsO8a3MgcMOkZXYiXSxNOlsia3V1IGFqYSIsImt1dSBhZWdhIiwiw7xrcyBrdXUiXSxNTTpbbnVtYmVyKyIga3V1IixudW1iZXIrIiBrdXVkIl0seTpbIsO8aGUgYWFzdGEiLCJhYXN0YSIsIsO8a3MgYWFzdGEiXSx5eTpbbnVtYmVyKyIgYWFzdGEiLG51bWJlcisiIGFhc3RhdCJdfTtyZXR1cm4gd2l0aG91dFN1ZmZpeD9mb3JtYXRba2V5XVsyXT9mb3JtYXRba2V5XVsyXTpmb3JtYXRba2V5XVsxXTppc0Z1dHVyZT9mb3JtYXRba2V5XVswXTpmb3JtYXRba2V5XVsxXX1tb21lbnQuZGVmaW5lTG9jYWxlKCJldCIse21vbnRoczoiamFhbnVhcl92ZWVicnVhcl9tw6RydHNfYXByaWxsX21haV9qdXVuaV9qdXVsaV9hdWd1c3Rfc2VwdGVtYmVyX29rdG9vYmVyX25vdmVtYmVyX2RldHNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFhbl92ZWVicl9tw6RydHNfYXByX21haV9qdXVuaV9qdXVsaV9hdWdfc2VwdF9va3Rfbm92X2RldHMiLnNwbGl0KCJfIiksd2Vla2RheXM6InDDvGhhcMOkZXZfZXNtYXNww6Rldl90ZWlzaXDDpGV2X2tvbG1hcMOkZXZfbmVsamFww6Rldl9yZWVkZV9sYXVww6RldiIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJQX0VfVF9LX05fUl9MIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJQX0VfVF9LX05fUl9MIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbVMOkbmEsXSBMVCIsbmV4dERheToiW0hvbW1lLF0gTFQiLG5leHRXZWVrOiJbSsOkcmdtaW5lXSBkZGRkIExUIixsYXN0RGF5OiJbRWlsZSxdIExUIixsYXN0V2VlazoiW0VlbG1pbmVdIGRkZGQgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIHDDpHJhc3QiLHBhc3Q6IiVzIHRhZ2FzaSIsczpwcm9jZXNzUmVsYXRpdmVUaW1lLHNzOnByb2Nlc3NSZWxhdGl2ZVRpbWUsbTpwcm9jZXNzUmVsYXRpdmVUaW1lLG1tOnByb2Nlc3NSZWxhdGl2ZVRpbWUsaDpwcm9jZXNzUmVsYXRpdmVUaW1lLGhoOnByb2Nlc3NSZWxhdGl2ZVRpbWUsZDpwcm9jZXNzUmVsYXRpdmVUaW1lLGRkOiIlZCBww6RldmEiLE06cHJvY2Vzc1JlbGF0aXZlVGltZSxNTTpwcm9jZXNzUmVsYXRpdmVUaW1lLHk6cHJvY2Vzc1JlbGF0aXZlVGltZSx5eTpwcm9jZXNzUmVsYXRpdmVUaW1lfSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCI3RERnIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7aWYoX193ZWJwYWNrX3JlcXVpcmVfXygibmg0ZyIpKXt2YXIgTElCUkFSWT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMUUFjIiksZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKSxmYWlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIiksJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJHR5cGVkPV9fd2VicGFja19yZXF1aXJlX18oIkQ0aVYiKSwkYnVmZmVyPV9fd2VicGFja19yZXF1aXJlX18oIjdRdHoiKSxjdHg9X193ZWJwYWNrX3JlcXVpcmVfXygibTBQcCIpLGFuSW5zdGFuY2U9X193ZWJwYWNrX3JlcXVpcmVfXygiOWdYNyIpLHByb3BlcnR5RGVzYz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJSakQvIiksaGlkZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNdWtiIikscmVkZWZpbmVBbGw9X193ZWJwYWNrX3JlcXVpcmVfXygiM0x5aiIpLHRvSW50ZWdlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJSWWk3IiksdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygibmU4aSIpLHRvSW5kZXg9X193ZWJwYWNrX3JlcXVpcmVfXygiQ2ZyaiIpLHRvQWJzb2x1dGVJbmRleD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkL0djIiksdG9QcmltaXRpdmU9X193ZWJwYWNrX3JlcXVpcmVfXygiYXBtVCIpLGhhcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhYWd4IiksY2xhc3NvZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJJOGErIiksaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpLHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlMvai8iKSxpc0FycmF5SXRlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNNlFqIiksY3JlYXRlPV9fd2VicGFja19yZXF1aXJlX18oIkt1dGgiKSxnZXRQcm90b3R5cGVPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJPUDNZIiksZ09QTj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJrSk14IikuZixnZXRJdGVyRm49X193ZWJwYWNrX3JlcXVpcmVfXygiSis2ZSIpLHVpZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5bHFzIiksd2tzPV9fd2VicGFja19yZXF1aXJlX18oIksweFUiKSxjcmVhdGVBcnJheU1ldGhvZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJDa2tUIiksY3JlYXRlQXJyYXlJbmNsdWRlcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ3MmE1Iiksc3BlY2llc0NvbnN0cnVjdG9yPV9fd2VicGFja19yZXF1aXJlX18oIjY5Ym4iKSxBcnJheUl0ZXJhdG9ycz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5dDhPIiksSXRlcmF0b3JzPV9fd2VicGFja19yZXF1aXJlX18oImhQSVEiKSwkaXRlckRldGVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYTVZoIiksc2V0U3BlY2llcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlbFpxIiksYXJyYXlGaWxsPV9fd2VicGFja19yZXF1aXJlX18oIk5yMTgiKSxhcnJheUNvcHlXaXRoaW49X193ZWJwYWNrX3JlcXVpcmVfXygidXBLeCIpLCREUD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJoc3dhIiksJEdPUEQ9X193ZWJwYWNrX3JlcXVpcmVfXygiRWVtSCIpLGRQPSREUC5mLGdPUEQ9JEdPUEQuZixSYW5nZUVycm9yPWdsb2JhbC5SYW5nZUVycm9yLFR5cGVFcnJvcj1nbG9iYWwuVHlwZUVycm9yLFVpbnQ4QXJyYXk9Z2xvYmFsLlVpbnQ4QXJyYXksQXJyYXlQcm90bz1BcnJheS5wcm90b3R5cGUsJEFycmF5QnVmZmVyPSRidWZmZXIuQXJyYXlCdWZmZXIsJERhdGFWaWV3PSRidWZmZXIuRGF0YVZpZXcsYXJyYXlGb3JFYWNoPWNyZWF0ZUFycmF5TWV0aG9kKDApLGFycmF5RmlsdGVyPWNyZWF0ZUFycmF5TWV0aG9kKDIpLGFycmF5U29tZT1jcmVhdGVBcnJheU1ldGhvZCgzKSxhcnJheUV2ZXJ5PWNyZWF0ZUFycmF5TWV0aG9kKDQpLGFycmF5RmluZD1jcmVhdGVBcnJheU1ldGhvZCg1KSxhcnJheUZpbmRJbmRleD1jcmVhdGVBcnJheU1ldGhvZCg2KSxhcnJheUluY2x1ZGVzPWNyZWF0ZUFycmF5SW5jbHVkZXMoITApLGFycmF5SW5kZXhPZj1jcmVhdGVBcnJheUluY2x1ZGVzKCExKSxhcnJheVZhbHVlcz1BcnJheUl0ZXJhdG9ycy52YWx1ZXMsYXJyYXlLZXlzPUFycmF5SXRlcmF0b3JzLmtleXMsYXJyYXlFbnRyaWVzPUFycmF5SXRlcmF0b3JzLmVudHJpZXMsYXJyYXlMYXN0SW5kZXhPZj1BcnJheVByb3RvLmxhc3RJbmRleE9mLGFycmF5UmVkdWNlPUFycmF5UHJvdG8ucmVkdWNlLGFycmF5UmVkdWNlUmlnaHQ9QXJyYXlQcm90by5yZWR1Y2VSaWdodCxhcnJheUpvaW49QXJyYXlQcm90by5qb2luLGFycmF5U29ydD1BcnJheVByb3RvLnNvcnQsYXJyYXlTbGljZT1BcnJheVByb3RvLnNsaWNlLGFycmF5VG9TdHJpbmc9QXJyYXlQcm90by50b1N0cmluZyxhcnJheVRvTG9jYWxlU3RyaW5nPUFycmF5UHJvdG8udG9Mb2NhbGVTdHJpbmcsSVRFUkFUT1I9d2tzKCJpdGVyYXRvciIpLFRBRz13a3MoInRvU3RyaW5nVGFnIiksVFlQRURfQ09OU1RSVUNUT1I9dWlkKCJ0eXBlZF9jb25zdHJ1Y3RvciIpLERFRl9DT05TVFJVQ1RPUj11aWQoImRlZl9jb25zdHJ1Y3RvciIpLEFMTF9DT05TVFJVQ1RPUlM9JHR5cGVkLkNPTlNUUixUWVBFRF9BUlJBWT0kdHlwZWQuVFlQRUQsVklFVz0kdHlwZWQuVklFVywkbWFwPWNyZWF0ZUFycmF5TWV0aG9kKDEsZnVuY3Rpb24oTyxsZW5ndGgpe3JldHVybiBhbGxvY2F0ZShzcGVjaWVzQ29uc3RydWN0b3IoTyxPW0RFRl9DT05TVFJVQ1RPUl0pLGxlbmd0aCl9KSxMSVRUTEVfRU5ESUFOPWZhaWxzKGZ1bmN0aW9uKCl7cmV0dXJuIDE9PT1uZXcgVWludDhBcnJheShuZXcgVWludDE2QXJyYXkoWzFdKS5idWZmZXIpWzBdfSksRk9SQ0VEX1NFVD0hIVVpbnQ4QXJyYXkmJiEhVWludDhBcnJheS5wcm90b3R5cGUuc2V0JiZmYWlscyhmdW5jdGlvbigpe25ldyBVaW50OEFycmF5KDEpLnNldCh7fSl9KSx0b09mZnNldD1mdW5jdGlvbihpdCxCWVRFUyl7dmFyIG9mZnNldD10b0ludGVnZXIoaXQpO2lmKG9mZnNldDwwfHxvZmZzZXQlQllURVMpdGhyb3cgUmFuZ2VFcnJvcigiV3Jvbmcgb2Zmc2V0ISIpO3JldHVybiBvZmZzZXR9LHZhbGlkYXRlPWZ1bmN0aW9uKGl0KXtpZihpc09iamVjdChpdCkmJlRZUEVEX0FSUkFZIGluIGl0KXJldHVybiBpdDt0aHJvdyBUeXBlRXJyb3IoaXQrIiBpcyBub3QgYSB0eXBlZCBhcnJheSEiKX0sYWxsb2NhdGU9ZnVuY3Rpb24oQyxsZW5ndGgpe2lmKCEoaXNPYmplY3QoQykmJlRZUEVEX0NPTlNUUlVDVE9SIGluIEMpKXRocm93IFR5cGVFcnJvcigiSXQgaXMgbm90IGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IhIik7cmV0dXJuIG5ldyBDKGxlbmd0aCl9LHNwZWNpZXNGcm9tTGlzdD1mdW5jdGlvbihPLGxpc3Qpe3JldHVybiBmcm9tTGlzdChzcGVjaWVzQ29uc3RydWN0b3IoTyxPW0RFRl9DT05TVFJVQ1RPUl0pLGxpc3QpfSxmcm9tTGlzdD1mdW5jdGlvbihDLGxpc3Qpe2Zvcih2YXIgaW5kZXg9MCxsZW5ndGg9bGlzdC5sZW5ndGgscmVzdWx0PWFsbG9jYXRlKEMsbGVuZ3RoKTtpbmRleDxsZW5ndGg7KXJlc3VsdFtpbmRleF09bGlzdFtpbmRleCsrXTtyZXR1cm4gcmVzdWx0fSxhZGRHZXR0ZXI9ZnVuY3Rpb24oaXQsa2V5LGludGVybmFsKXtkUChpdCxrZXkse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kW2ludGVybmFsXX19KX0sJGZyb209ZnVuY3Rpb24oc291cmNlKXt2YXIgaSxsZW5ndGgsdmFsdWVzLHJlc3VsdCxzdGVwLGl0ZXJhdG9yLE89dG9PYmplY3Qoc291cmNlKSxhTGVuPWFyZ3VtZW50cy5sZW5ndGgsbWFwZm49MTxhTGVuP2FyZ3VtZW50c1sxXTp2b2lkIDAsbWFwcGluZz12b2lkIDAhPT1tYXBmbixpdGVyRm49Z2V0SXRlckZuKE8pO2lmKG51bGwhPWl0ZXJGbiYmIWlzQXJyYXlJdGVyKGl0ZXJGbikpe2ZvcihpdGVyYXRvcj1pdGVyRm4uY2FsbChPKSx2YWx1ZXM9W10saT0wOyEoc3RlcD1pdGVyYXRvci5uZXh0KCkpLmRvbmU7aSsrKXZhbHVlcy5wdXNoKHN0ZXAudmFsdWUpO089dmFsdWVzfWZvcihtYXBwaW5nJiYyPGFMZW4mJihtYXBmbj1jdHgobWFwZm4sYXJndW1lbnRzWzJdLDIpKSxpPTAsbGVuZ3RoPXRvTGVuZ3RoKE8ubGVuZ3RoKSxyZXN1bHQ9YWxsb2NhdGUodGhpcyxsZW5ndGgpO2k8bGVuZ3RoO2krKylyZXN1bHRbaV09bWFwcGluZz9tYXBmbihPW2ldLGkpOk9baV07cmV0dXJuIHJlc3VsdH0sJG9mPWZ1bmN0aW9uKCl7Zm9yKHZhciBpbmRleD0wLGxlbmd0aD1hcmd1bWVudHMubGVuZ3RoLHJlc3VsdD1hbGxvY2F0ZSh0aGlzLGxlbmd0aCk7aW5kZXg8bGVuZ3RoOylyZXN1bHRbaW5kZXhdPWFyZ3VtZW50c1tpbmRleCsrXTtyZXR1cm4gcmVzdWx0fSxUT19MT0NBTEVfQlVHPSEhVWludDhBcnJheSYmZmFpbHMoZnVuY3Rpb24oKXthcnJheVRvTG9jYWxlU3RyaW5nLmNhbGwobmV3IFVpbnQ4QXJyYXkoMSkpfSksJHRvTG9jYWxlU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGFycmF5VG9Mb2NhbGVTdHJpbmcuYXBwbHkoVE9fTE9DQUxFX0JVRz9hcnJheVNsaWNlLmNhbGwodmFsaWRhdGUodGhpcykpOnZhbGlkYXRlKHRoaXMpLGFyZ3VtZW50cyl9LHByb3RvPXtjb3B5V2l0aGluOmZ1bmN0aW9uKHRhcmdldCxzdGFydCl7cmV0dXJuIGFycmF5Q29weVdpdGhpbi5jYWxsKHZhbGlkYXRlKHRoaXMpLHRhcmdldCxzdGFydCwyPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzJdOnZvaWQgMCl9LGV2ZXJ5OmZ1bmN0aW9uKGNhbGxiYWNrZm4pe3JldHVybiBhcnJheUV2ZXJ5KHZhbGlkYXRlKHRoaXMpLGNhbGxiYWNrZm4sMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxmaWxsOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gYXJyYXlGaWxsLmFwcGx5KHZhbGlkYXRlKHRoaXMpLGFyZ3VtZW50cyl9LGZpbHRlcjpmdW5jdGlvbihjYWxsYmFja2ZuKXtyZXR1cm4gc3BlY2llc0Zyb21MaXN0KHRoaXMsYXJyYXlGaWx0ZXIodmFsaWRhdGUodGhpcyksY2FsbGJhY2tmbiwxPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCkpfSxmaW5kOmZ1bmN0aW9uKHByZWRpY2F0ZSl7cmV0dXJuIGFycmF5RmluZCh2YWxpZGF0ZSh0aGlzKSxwcmVkaWNhdGUsMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxmaW5kSW5kZXg6ZnVuY3Rpb24ocHJlZGljYXRlKXtyZXR1cm4gYXJyYXlGaW5kSW5kZXgodmFsaWRhdGUodGhpcykscHJlZGljYXRlLDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwKX0sZm9yRWFjaDpmdW5jdGlvbihjYWxsYmFja2ZuKXthcnJheUZvckVhY2godmFsaWRhdGUodGhpcyksY2FsbGJhY2tmbiwxPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGluZGV4T2Y6ZnVuY3Rpb24oc2VhcmNoRWxlbWVudCl7cmV0dXJuIGFycmF5SW5kZXhPZih2YWxpZGF0ZSh0aGlzKSxzZWFyY2hFbGVtZW50LDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwKX0saW5jbHVkZXM6ZnVuY3Rpb24oc2VhcmNoRWxlbWVudCl7cmV0dXJuIGFycmF5SW5jbHVkZXModmFsaWRhdGUodGhpcyksc2VhcmNoRWxlbWVudCwxPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGpvaW46ZnVuY3Rpb24oc2VwYXJhdG9yKXtyZXR1cm4gYXJyYXlKb2luLmFwcGx5KHZhbGlkYXRlKHRoaXMpLGFyZ3VtZW50cyl9LGxhc3RJbmRleE9mOmZ1bmN0aW9uKHNlYXJjaEVsZW1lbnQpe3JldHVybiBhcnJheUxhc3RJbmRleE9mLmFwcGx5KHZhbGlkYXRlKHRoaXMpLGFyZ3VtZW50cyl9LG1hcDpmdW5jdGlvbihtYXBmbil7cmV0dXJuICRtYXAodmFsaWRhdGUodGhpcyksbWFwZm4sMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxyZWR1Y2U6ZnVuY3Rpb24oY2FsbGJhY2tmbil7cmV0dXJuIGFycmF5UmVkdWNlLmFwcGx5KHZhbGlkYXRlKHRoaXMpLGFyZ3VtZW50cyl9LHJlZHVjZVJpZ2h0OmZ1bmN0aW9uKGNhbGxiYWNrZm4pe3JldHVybiBhcnJheVJlZHVjZVJpZ2h0LmFwcGx5KHZhbGlkYXRlKHRoaXMpLGFyZ3VtZW50cyl9LHJldmVyc2U6ZnVuY3Rpb24oKXtmb3IodmFyIHZhbHVlLGxlbmd0aD12YWxpZGF0ZSh0aGlzKS5sZW5ndGgsbWlkZGxlPU1hdGguZmxvb3IobGVuZ3RoLzIpLGluZGV4PTA7aW5kZXg8bWlkZGxlOyl2YWx1ZT10aGlzW2luZGV4XSx0aGlzW2luZGV4KytdPXRoaXNbLS1sZW5ndGhdLHRoaXNbbGVuZ3RoXT12YWx1ZTtyZXR1cm4gdGhpc30sc29tZTpmdW5jdGlvbihjYWxsYmFja2ZuKXtyZXR1cm4gYXJyYXlTb21lKHZhbGlkYXRlKHRoaXMpLGNhbGxiYWNrZm4sMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxzb3J0OmZ1bmN0aW9uKGNvbXBhcmVmbil7cmV0dXJuIGFycmF5U29ydC5jYWxsKHZhbGlkYXRlKHRoaXMpLGNvbXBhcmVmbil9LHN1YmFycmF5OmZ1bmN0aW9uKGJlZ2luLGVuZCl7dmFyIE89dmFsaWRhdGUodGhpcyksbGVuZ3RoPU8ubGVuZ3RoLCRiZWdpbj10b0Fic29sdXRlSW5kZXgoYmVnaW4sbGVuZ3RoKTtyZXR1cm4gbmV3KHNwZWNpZXNDb25zdHJ1Y3RvcihPLE9bREVGX0NPTlNUUlVDVE9SXSkpKE8uYnVmZmVyLE8uYnl0ZU9mZnNldCskYmVnaW4qTy5CWVRFU19QRVJfRUxFTUVOVCx0b0xlbmd0aCgodm9pZCAwPT09ZW5kP2xlbmd0aDp0b0Fic29sdXRlSW5kZXgoZW5kLGxlbmd0aCkpLSRiZWdpbikpfX0sJHNsaWNlPWZ1bmN0aW9uKHN0YXJ0LGVuZCl7cmV0dXJuIHNwZWNpZXNGcm9tTGlzdCh0aGlzLGFycmF5U2xpY2UuY2FsbCh2YWxpZGF0ZSh0aGlzKSxzdGFydCxlbmQpKX0sJHNldD1mdW5jdGlvbihhcnJheUxpa2Upe3ZhbGlkYXRlKHRoaXMpO3ZhciBvZmZzZXQ9dG9PZmZzZXQoYXJndW1lbnRzWzFdLDEpLGxlbmd0aD10aGlzLmxlbmd0aCxzcmM9dG9PYmplY3QoYXJyYXlMaWtlKSxsZW49dG9MZW5ndGgoc3JjLmxlbmd0aCksaW5kZXg9MDtpZihsZW5ndGg8bGVuK29mZnNldCl0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBsZW5ndGghIik7Zm9yKDtpbmRleDxsZW47KXRoaXNbb2Zmc2V0K2luZGV4XT1zcmNbaW5kZXgrK119LCRpdGVyYXRvcnM9e2VudHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gYXJyYXlFbnRyaWVzLmNhbGwodmFsaWRhdGUodGhpcykpfSxrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGFycmF5S2V5cy5jYWxsKHZhbGlkYXRlKHRoaXMpKX0sdmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIGFycmF5VmFsdWVzLmNhbGwodmFsaWRhdGUodGhpcykpfX0saXNUQUluZGV4PWZ1bmN0aW9uKHRhcmdldCxrZXkpe3JldHVybiBpc09iamVjdCh0YXJnZXQpJiZ0YXJnZXRbVFlQRURfQVJSQVldJiYic3ltYm9sIiE9dHlwZW9mIGtleSYma2V5IGluIHRhcmdldCYmU3RyaW5nKCtrZXkpPT1TdHJpbmcoa2V5KX0sJGdldERlc2M9ZnVuY3Rpb24odGFyZ2V0LGtleSl7cmV0dXJuIGlzVEFJbmRleCh0YXJnZXQsa2V5PXRvUHJpbWl0aXZlKGtleSwhMCkpP3Byb3BlcnR5RGVzYygyLHRhcmdldFtrZXldKTpnT1BEKHRhcmdldCxrZXkpfSwkc2V0RGVzYz1mdW5jdGlvbih0YXJnZXQsa2V5LGRlc2Mpe3JldHVybiEoaXNUQUluZGV4KHRhcmdldCxrZXk9dG9QcmltaXRpdmUoa2V5LCEwKSkmJmlzT2JqZWN0KGRlc2MpJiZoYXMoZGVzYywidmFsdWUiKSl8fGhhcyhkZXNjLCJnZXQiKXx8aGFzKGRlc2MsInNldCIpfHxkZXNjLmNvbmZpZ3VyYWJsZXx8aGFzKGRlc2MsIndyaXRhYmxlIikmJiFkZXNjLndyaXRhYmxlfHxoYXMoZGVzYywiZW51bWVyYWJsZSIpJiYhZGVzYy5lbnVtZXJhYmxlP2RQKHRhcmdldCxrZXksZGVzYyk6KHRhcmdldFtrZXldPWRlc2MudmFsdWUsdGFyZ2V0KX07QUxMX0NPTlNUUlVDVE9SU3x8KCRHT1BELmY9JGdldERlc2MsJERQLmY9JHNldERlc2MpLCRleHBvcnQoJGV4cG9ydC5TKyRleHBvcnQuRiohQUxMX0NPTlNUUlVDVE9SUywiT2JqZWN0Iix7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiRnZXREZXNjLGRlZmluZVByb3BlcnR5OiRzZXREZXNjfSksZmFpbHMoZnVuY3Rpb24oKXthcnJheVRvU3RyaW5nLmNhbGwoe30pfSkmJihhcnJheVRvU3RyaW5nPWFycmF5VG9Mb2NhbGVTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gYXJyYXlKb2luLmNhbGwodGhpcyl9KTt2YXIgJFR5cGVkQXJyYXlQcm90b3R5cGUkPXJlZGVmaW5lQWxsKHt9LHByb3RvKTtyZWRlZmluZUFsbCgkVHlwZWRBcnJheVByb3RvdHlwZSQsJGl0ZXJhdG9ycyksaGlkZSgkVHlwZWRBcnJheVByb3RvdHlwZSQsSVRFUkFUT1IsJGl0ZXJhdG9ycy52YWx1ZXMpLHJlZGVmaW5lQWxsKCRUeXBlZEFycmF5UHJvdG90eXBlJCx7c2xpY2U6JHNsaWNlLHNldDokc2V0LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7fSx0b1N0cmluZzphcnJheVRvU3RyaW5nLHRvTG9jYWxlU3RyaW5nOiR0b0xvY2FsZVN0cmluZ30pLGFkZEdldHRlcigkVHlwZWRBcnJheVByb3RvdHlwZSQsImJ1ZmZlciIsImIiKSxhZGRHZXR0ZXIoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCJieXRlT2Zmc2V0IiwibyIpLGFkZEdldHRlcigkVHlwZWRBcnJheVByb3RvdHlwZSQsImJ5dGVMZW5ndGgiLCJsIiksYWRkR2V0dGVyKCRUeXBlZEFycmF5UHJvdG90eXBlJCwibGVuZ3RoIiwiZSIpLGRQKCRUeXBlZEFycmF5UHJvdG90eXBlJCxUQUcse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW1RZUEVEX0FSUkFZXX19KSxtb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihLRVksQllURVMsd3JhcHBlcixDTEFNUEVEKXt2YXIgTkFNRT1LRVkrKChDTEFNUEVEPSEhQ0xBTVBFRCk/IkNsYW1wZWQiOiIiKSsiQXJyYXkiLEdFVFRFUj0iZ2V0IitLRVksU0VUVEVSPSJzZXQiK0tFWSxUeXBlZEFycmF5PWdsb2JhbFtOQU1FXSxCYXNlPVR5cGVkQXJyYXl8fHt9LFRBQz1UeXBlZEFycmF5JiZnZXRQcm90b3R5cGVPZihUeXBlZEFycmF5KSxGT1JDRUQ9IVR5cGVkQXJyYXl8fCEkdHlwZWQuQUJWLE89e30sVHlwZWRBcnJheVByb3RvdHlwZT1UeXBlZEFycmF5JiZUeXBlZEFycmF5LnByb3RvdHlwZSxhZGRFbGVtZW50PWZ1bmN0aW9uKHRoYXQsaW5kZXgpe2RQKHRoYXQsaW5kZXgse2dldDpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0aGF0LGluZGV4KXt2YXIgZGF0YT10aGF0Ll9kO3JldHVybiBkYXRhLnZbR0VUVEVSXShpbmRleCpCWVRFUytkYXRhLm8sTElUVExFX0VORElBTil9KHRoaXMsaW5kZXgpfSxzZXQ6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBmdW5jdGlvbih0aGF0LGluZGV4LHZhbHVlKXt2YXIgZGF0YT10aGF0Ll9kO0NMQU1QRUQmJih2YWx1ZT0odmFsdWU9TWF0aC5yb3VuZCh2YWx1ZSkpPDA/MDoyNTU8dmFsdWU/MjU1OjI1NSZ2YWx1ZSksZGF0YS52W1NFVFRFUl0oaW5kZXgqQllURVMrZGF0YS5vLHZhbHVlLExJVFRMRV9FTkRJQU4pfSh0aGlzLGluZGV4LHZhbHVlKX0sZW51bWVyYWJsZTohMH0pfTtGT1JDRUQ/KFR5cGVkQXJyYXk9d3JhcHBlcihmdW5jdGlvbih0aGF0LGRhdGEsJG9mZnNldCwkbGVuZ3RoKXthbkluc3RhbmNlKHRoYXQsVHlwZWRBcnJheSxOQU1FLCJfZCIpO3ZhciBidWZmZXIsYnl0ZUxlbmd0aCxsZW5ndGgsa2xhc3MsaW5kZXg9MCxvZmZzZXQ9MDtpZihpc09iamVjdChkYXRhKSl7aWYoIShkYXRhIGluc3RhbmNlb2YgJEFycmF5QnVmZmVyfHwiQXJyYXlCdWZmZXIiPT0oa2xhc3M9Y2xhc3NvZihkYXRhKSl8fCJTaGFyZWRBcnJheUJ1ZmZlciI9PWtsYXNzKSlyZXR1cm4gVFlQRURfQVJSQVkgaW4gZGF0YT9mcm9tTGlzdChUeXBlZEFycmF5LGRhdGEpOiRmcm9tLmNhbGwoVHlwZWRBcnJheSxkYXRhKTtidWZmZXI9ZGF0YSxvZmZzZXQ9dG9PZmZzZXQoJG9mZnNldCxCWVRFUyk7dmFyICRsZW49ZGF0YS5ieXRlTGVuZ3RoO2lmKHZvaWQgMD09PSRsZW5ndGgpe2lmKCRsZW4lQllURVMpdGhyb3cgUmFuZ2VFcnJvcigiV3JvbmcgbGVuZ3RoISIpO2lmKChieXRlTGVuZ3RoPSRsZW4tb2Zmc2V0KTwwKXRocm93IFJhbmdlRXJyb3IoIldyb25nIGxlbmd0aCEiKX1lbHNlIGlmKCRsZW48KGJ5dGVMZW5ndGg9dG9MZW5ndGgoJGxlbmd0aCkqQllURVMpK29mZnNldCl0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBsZW5ndGghIik7bGVuZ3RoPWJ5dGVMZW5ndGgvQllURVN9ZWxzZSBsZW5ndGg9dG9JbmRleChkYXRhKSxidWZmZXI9bmV3ICRBcnJheUJ1ZmZlcihieXRlTGVuZ3RoPWxlbmd0aCpCWVRFUyk7Zm9yKGhpZGUodGhhdCwiX2QiLHtiOmJ1ZmZlcixvOm9mZnNldCxsOmJ5dGVMZW5ndGgsZTpsZW5ndGgsdjpuZXcgJERhdGFWaWV3KGJ1ZmZlcil9KTtpbmRleDxsZW5ndGg7KWFkZEVsZW1lbnQodGhhdCxpbmRleCsrKX0pLFR5cGVkQXJyYXlQcm90b3R5cGU9VHlwZWRBcnJheS5wcm90b3R5cGU9Y3JlYXRlKCRUeXBlZEFycmF5UHJvdG90eXBlJCksaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCJjb25zdHJ1Y3RvciIsVHlwZWRBcnJheSkpOmZhaWxzKGZ1bmN0aW9uKCl7VHlwZWRBcnJheSgxKX0pJiZmYWlscyhmdW5jdGlvbigpe25ldyBUeXBlZEFycmF5KC0xKX0pJiYkaXRlckRldGVjdChmdW5jdGlvbihpdGVyKXtuZXcgVHlwZWRBcnJheSxuZXcgVHlwZWRBcnJheShudWxsKSxuZXcgVHlwZWRBcnJheSgxLjUpLG5ldyBUeXBlZEFycmF5KGl0ZXIpfSwhMCl8fChUeXBlZEFycmF5PXdyYXBwZXIoZnVuY3Rpb24odGhhdCxkYXRhLCRvZmZzZXQsJGxlbmd0aCl7dmFyIGtsYXNzO3JldHVybiBhbkluc3RhbmNlKHRoYXQsVHlwZWRBcnJheSxOQU1FKSxpc09iamVjdChkYXRhKT9kYXRhIGluc3RhbmNlb2YgJEFycmF5QnVmZmVyfHwiQXJyYXlCdWZmZXIiPT0oa2xhc3M9Y2xhc3NvZihkYXRhKSl8fCJTaGFyZWRBcnJheUJ1ZmZlciI9PWtsYXNzP3ZvaWQgMCE9PSRsZW5ndGg/bmV3IEJhc2UoZGF0YSx0b09mZnNldCgkb2Zmc2V0LEJZVEVTKSwkbGVuZ3RoKTp2b2lkIDAhPT0kb2Zmc2V0P25ldyBCYXNlKGRhdGEsdG9PZmZzZXQoJG9mZnNldCxCWVRFUykpOm5ldyBCYXNlKGRhdGEpOlRZUEVEX0FSUkFZIGluIGRhdGE/ZnJvbUxpc3QoVHlwZWRBcnJheSxkYXRhKTokZnJvbS5jYWxsKFR5cGVkQXJyYXksZGF0YSk6bmV3IEJhc2UodG9JbmRleChkYXRhKSl9KSxhcnJheUZvckVhY2goVEFDIT09RnVuY3Rpb24ucHJvdG90eXBlP2dPUE4oQmFzZSkuY29uY2F0KGdPUE4oVEFDKSk6Z09QTihCYXNlKSxmdW5jdGlvbihrZXkpe2tleSBpbiBUeXBlZEFycmF5fHxoaWRlKFR5cGVkQXJyYXksa2V5LEJhc2Vba2V5XSl9KSxUeXBlZEFycmF5LnByb3RvdHlwZT1UeXBlZEFycmF5UHJvdG90eXBlLExJQlJBUll8fChUeXBlZEFycmF5UHJvdG90eXBlLmNvbnN0cnVjdG9yPVR5cGVkQXJyYXkpKTt2YXIgJG5hdGl2ZUl0ZXJhdG9yPVR5cGVkQXJyYXlQcm90b3R5cGVbSVRFUkFUT1JdLENPUlJFQ1RfSVRFUl9OQU1FPSEhJG5hdGl2ZUl0ZXJhdG9yJiYoInZhbHVlcyI9PSRuYXRpdmVJdGVyYXRvci5uYW1lfHxudWxsPT0kbmF0aXZlSXRlcmF0b3IubmFtZSksJGl0ZXJhdG9yPSRpdGVyYXRvcnMudmFsdWVzO2hpZGUoVHlwZWRBcnJheSxUWVBFRF9DT05TVFJVQ1RPUiwhMCksaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLFRZUEVEX0FSUkFZLE5BTUUpLGhpZGUoVHlwZWRBcnJheVByb3RvdHlwZSxWSUVXLCEwKSxoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsREVGX0NPTlNUUlVDVE9SLFR5cGVkQXJyYXkpLChDTEFNUEVEP25ldyBUeXBlZEFycmF5KDEpW1RBR109PU5BTUU6VEFHIGluIFR5cGVkQXJyYXlQcm90b3R5cGUpfHxkUChUeXBlZEFycmF5UHJvdG90eXBlLFRBRyx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE5BTUV9fSksT1tOQU1FXT1UeXBlZEFycmF5LCRleHBvcnQoJGV4cG9ydC5HKyRleHBvcnQuVyskZXhwb3J0LkYqKFR5cGVkQXJyYXkhPUJhc2UpLE8pLCRleHBvcnQoJGV4cG9ydC5TLE5BTUUse0JZVEVTX1BFUl9FTEVNRU5UOkJZVEVTfSksJGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKmZhaWxzKGZ1bmN0aW9uKCl7QmFzZS5vZi5jYWxsKFR5cGVkQXJyYXksMSl9KSxOQU1FLHtmcm9tOiRmcm9tLG9mOiRvZn0pLCJCWVRFU19QRVJfRUxFTUVOVCJpbiBUeXBlZEFycmF5UHJvdG90eXBlfHxoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIkJZVEVTX1BFUl9FTEVNRU5UIixCWVRFUyksJGV4cG9ydCgkZXhwb3J0LlAsTkFNRSxwcm90byksc2V0U3BlY2llcyhOQU1FKSwkZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqRk9SQ0VEX1NFVCxOQU1FLHtzZXQ6JHNldH0pLCRleHBvcnQoJGV4cG9ydC5QKyRleHBvcnQuRiohQ09SUkVDVF9JVEVSX05BTUUsTkFNRSwkaXRlcmF0b3JzKSxMSUJSQVJZfHxUeXBlZEFycmF5UHJvdG90eXBlLnRvU3RyaW5nPT1hcnJheVRvU3RyaW5nfHwoVHlwZWRBcnJheVByb3RvdHlwZS50b1N0cmluZz1hcnJheVRvU3RyaW5nKSwkZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqZmFpbHMoZnVuY3Rpb24oKXtuZXcgVHlwZWRBcnJheSgxKS5zbGljZSgpfSksTkFNRSx7c2xpY2U6JHNsaWNlfSksJGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKihmYWlscyhmdW5jdGlvbigpe3JldHVyblsxLDJdLnRvTG9jYWxlU3RyaW5nKCkhPW5ldyBUeXBlZEFycmF5KFsxLDJdKS50b0xvY2FsZVN0cmluZygpfSl8fCFmYWlscyhmdW5jdGlvbigpe1R5cGVkQXJyYXlQcm90b3R5cGUudG9Mb2NhbGVTdHJpbmcuY2FsbChbMSwyXSl9KSksTkFNRSx7dG9Mb2NhbGVTdHJpbmc6JHRvTG9jYWxlU3RyaW5nfSksSXRlcmF0b3JzW05BTUVdPUNPUlJFQ1RfSVRFUl9OQU1FPyRuYXRpdmVJdGVyYXRvcjokaXRlcmF0b3IsTElCUkFSWXx8Q09SUkVDVF9JVEVSX05BTUV8fGhpZGUoVHlwZWRBcnJheVByb3RvdHlwZSxJVEVSQVRPUiwkaXRlcmF0b3IpfX1lbHNlIG1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7fX0sIjdEbGgiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBtZXRhZGF0YT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJONmNKIiksYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLG9yZGluYXJ5SGFzT3duTWV0YWRhdGE9bWV0YWRhdGEuaGFzLHRvTWV0YUtleT1tZXRhZGF0YS5rZXk7bWV0YWRhdGEuZXhwKHtoYXNPd25NZXRhZGF0YTpmdW5jdGlvbihtZXRhZGF0YUtleSx0YXJnZXQpe3JldHVybiBvcmRpbmFyeUhhc093bk1ldGFkYXRhKG1ldGFkYXRhS2V5LGFuT2JqZWN0KHRhcmdldCksYXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDp0b01ldGFLZXkoYXJndW1lbnRzWzJdKSl9fSl9LCI3UXR6IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIiksREVTQ1JJUFRPUlM9X193ZWJwYWNrX3JlcXVpcmVfXygibmg0ZyIpLExJQlJBUlk9X193ZWJwYWNrX3JlcXVpcmVfXygiTFFBYyIpLCR0eXBlZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJENGlWIiksaGlkZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNdWtiIikscmVkZWZpbmVBbGw9X193ZWJwYWNrX3JlcXVpcmVfXygiM0x5aiIpLGZhaWxzPV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKSxhbkluc3RhbmNlPV9fd2VicGFja19yZXF1aXJlX18oIjlnWDciKSx0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiUllpNyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKSx0b0luZGV4PV9fd2VicGFja19yZXF1aXJlX18oIkNmcmoiKSxnT1BOPV9fd2VicGFja19yZXF1aXJlX18oImtKTXgiKS5mLGRQPV9fd2VicGFja19yZXF1aXJlX18oImhzd2EiKS5mLGFycmF5RmlsbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJOcjE4Iiksc2V0VG9TdHJpbmdUYWc9X193ZWJwYWNrX3JlcXVpcmVfXygiZnlEcSIpLCRBcnJheUJ1ZmZlcj1nbG9iYWwuQXJyYXlCdWZmZXIsJERhdGFWaWV3PWdsb2JhbC5EYXRhVmlldyxNYXRoPWdsb2JhbC5NYXRoLFJhbmdlRXJyb3I9Z2xvYmFsLlJhbmdlRXJyb3IsSW5maW5pdHk9Z2xvYmFsLkluZmluaXR5LEJhc2VCdWZmZXI9JEFycmF5QnVmZmVyLGFicz1NYXRoLmFicyxwb3c9TWF0aC5wb3csZmxvb3I9TWF0aC5mbG9vcixsb2c9TWF0aC5sb2csTE4yPU1hdGguTE4yLCRCVUZGRVI9REVTQ1JJUFRPUlM/Il9iIjoiYnVmZmVyIiwkTEVOR1RIPURFU0NSSVBUT1JTPyJfbCI6ImJ5dGVMZW5ndGgiLCRPRkZTRVQ9REVTQ1JJUFRPUlM/Il9vIjoiYnl0ZU9mZnNldCI7ZnVuY3Rpb24gcGFja0lFRUU3NTQodmFsdWUsbUxlbixuQnl0ZXMpe3ZhciBlLG0sYyxidWZmZXI9bmV3IEFycmF5KG5CeXRlcyksZUxlbj04Km5CeXRlcy1tTGVuLTEsZU1heD0oMTw8ZUxlbiktMSxlQmlhcz1lTWF4Pj4xLHJ0PTIzPT09bUxlbj9wb3coMiwtMjQpLXBvdygyLC03Nyk6MCxpPTAscz12YWx1ZTwwfHwwPT09dmFsdWUmJjEvdmFsdWU8MD8xOjA7Zm9yKCh2YWx1ZT1hYnModmFsdWUpKSE9dmFsdWV8fHZhbHVlPT09SW5maW5pdHk/KG09dmFsdWUhPXZhbHVlPzE6MCxlPWVNYXgpOihlPWZsb29yKGxvZyh2YWx1ZSkvTE4yKSx2YWx1ZSooYz1wb3coMiwtZSkpPDEmJihlLS0sYyo9MiksMjw9KHZhbHVlKz0xPD1lK2VCaWFzP3J0L2M6cnQqcG93KDIsMS1lQmlhcykpKmMmJihlKyssYy89MiksZU1heDw9ZStlQmlhcz8obT0wLGU9ZU1heCk6MTw9ZStlQmlhcz8obT0odmFsdWUqYy0xKSpwb3coMixtTGVuKSxlKz1lQmlhcyk6KG09dmFsdWUqcG93KDIsZUJpYXMtMSkqcG93KDIsbUxlbiksZT0wKSk7ODw9bUxlbjtidWZmZXJbaSsrXT0yNTUmbSxtLz0yNTYsbUxlbi09OCk7Zm9yKGU9ZTw8bUxlbnxtLGVMZW4rPW1MZW47MDxlTGVuO2J1ZmZlcltpKytdPTI1NSZlLGUvPTI1NixlTGVuLT04KTtyZXR1cm4gYnVmZmVyWy0taV18PTEyOCpzLGJ1ZmZlcn1mdW5jdGlvbiB1bnBhY2tJRUVFNzU0KGJ1ZmZlcixtTGVuLG5CeXRlcyl7dmFyIG0sZUxlbj04Km5CeXRlcy1tTGVuLTEsZU1heD0oMTw8ZUxlbiktMSxlQmlhcz1lTWF4Pj4xLG5CaXRzPWVMZW4tNyxpPW5CeXRlcy0xLHM9YnVmZmVyW2ktLV0sZT0xMjcmcztmb3Iocz4+PTc7MDxuQml0cztlPTI1NiplK2J1ZmZlcltpXSxpLS0sbkJpdHMtPTgpO2ZvcihtPWUmKDE8PC1uQml0cyktMSxlPj49LW5CaXRzLG5CaXRzKz1tTGVuOzA8bkJpdHM7bT0yNTYqbStidWZmZXJbaV0saS0tLG5CaXRzLT04KTtpZigwPT09ZSllPTEtZUJpYXM7ZWxzZXtpZihlPT09ZU1heClyZXR1cm4gbT9OYU46cz8tSW5maW5pdHk6SW5maW5pdHk7bSs9cG93KDIsbUxlbiksZS09ZUJpYXN9cmV0dXJuKHM/LTE6MSkqbSpwb3coMixlLW1MZW4pfWZ1bmN0aW9uIHVucGFja0kzMihieXRlcyl7cmV0dXJuIGJ5dGVzWzNdPDwyNHxieXRlc1syXTw8MTZ8Ynl0ZXNbMV08PDh8Ynl0ZXNbMF19ZnVuY3Rpb24gcGFja0k4KGl0KXtyZXR1cm5bMjU1Jml0XX1mdW5jdGlvbiBwYWNrSTE2KGl0KXtyZXR1cm5bMjU1Jml0LGl0Pj44JjI1NV19ZnVuY3Rpb24gcGFja0kzMihpdCl7cmV0dXJuWzI1NSZpdCxpdD4+OCYyNTUsaXQ+PjE2JjI1NSxpdD4+MjQmMjU1XX1mdW5jdGlvbiBwYWNrRjY0KGl0KXtyZXR1cm4gcGFja0lFRUU3NTQoaXQsNTIsOCl9ZnVuY3Rpb24gcGFja0YzMihpdCl7cmV0dXJuIHBhY2tJRUVFNzU0KGl0LDIzLDQpfWZ1bmN0aW9uIGFkZEdldHRlcihDLGtleSxpbnRlcm5hbCl7ZFAoQy5wcm90b3R5cGUsa2V5LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tpbnRlcm5hbF19fSl9ZnVuY3Rpb24gZ2V0KHZpZXcsYnl0ZXMsaW5kZXgsaXNMaXR0bGVFbmRpYW4pe3ZhciBpbnRJbmRleD10b0luZGV4KCtpbmRleCk7aWYoaW50SW5kZXgrYnl0ZXM+dmlld1skTEVOR1RIXSl0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBpbmRleCEiKTt2YXIgc3RvcmU9dmlld1skQlVGRkVSXS5fYixzdGFydD1pbnRJbmRleCt2aWV3WyRPRkZTRVRdLHBhY2s9c3RvcmUuc2xpY2Uoc3RhcnQsc3RhcnQrYnl0ZXMpO3JldHVybiBpc0xpdHRsZUVuZGlhbj9wYWNrOnBhY2sucmV2ZXJzZSgpfWZ1bmN0aW9uIHNldCh2aWV3LGJ5dGVzLGluZGV4LGNvbnZlcnNpb24sdmFsdWUsaXNMaXR0bGVFbmRpYW4pe3ZhciBpbnRJbmRleD10b0luZGV4KCtpbmRleCk7aWYoaW50SW5kZXgrYnl0ZXM+dmlld1skTEVOR1RIXSl0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBpbmRleCEiKTtmb3IodmFyIHN0b3JlPXZpZXdbJEJVRkZFUl0uX2Isc3RhcnQ9aW50SW5kZXgrdmlld1skT0ZGU0VUXSxwYWNrPWNvbnZlcnNpb24oK3ZhbHVlKSxpPTA7aTxieXRlcztpKyspc3RvcmVbc3RhcnQraV09cGFja1tpc0xpdHRsZUVuZGlhbj9pOmJ5dGVzLWktMV19aWYoJHR5cGVkLkFCVil7aWYoIWZhaWxzKGZ1bmN0aW9uKCl7JEFycmF5QnVmZmVyKDEpfSl8fCFmYWlscyhmdW5jdGlvbigpe25ldyAkQXJyYXlCdWZmZXIoLTEpfSl8fGZhaWxzKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyAkQXJyYXlCdWZmZXIsbmV3ICRBcnJheUJ1ZmZlcigxLjUpLG5ldyAkQXJyYXlCdWZmZXIoTmFOKSwiQXJyYXlCdWZmZXIiIT0kQXJyYXlCdWZmZXIubmFtZX0pKXtmb3IodmFyIGtleSxBcnJheUJ1ZmZlclByb3RvPSgkQXJyYXlCdWZmZXI9ZnVuY3Rpb24obGVuZ3RoKXtyZXR1cm4gYW5JbnN0YW5jZSh0aGlzLCRBcnJheUJ1ZmZlciksbmV3IEJhc2VCdWZmZXIodG9JbmRleChsZW5ndGgpKX0pLnByb3RvdHlwZT1CYXNlQnVmZmVyLnByb3RvdHlwZSxrZXlzPWdPUE4oQmFzZUJ1ZmZlciksaj0wO2tleXMubGVuZ3RoPmo7KShrZXk9a2V5c1tqKytdKWluICRBcnJheUJ1ZmZlcnx8aGlkZSgkQXJyYXlCdWZmZXIsa2V5LEJhc2VCdWZmZXJba2V5XSk7TElCUkFSWXx8KEFycmF5QnVmZmVyUHJvdG8uY29uc3RydWN0b3I9JEFycmF5QnVmZmVyKX12YXIgdmlldz1uZXcgJERhdGFWaWV3KG5ldyAkQXJyYXlCdWZmZXIoMikpLCRzZXRJbnQ4PSREYXRhVmlldy5wcm90b3R5cGUuc2V0SW50ODt2aWV3LnNldEludDgoMCwyMTQ3NDgzNjQ4KSx2aWV3LnNldEludDgoMSwyMTQ3NDgzNjQ5KSwhdmlldy5nZXRJbnQ4KDApJiZ2aWV3LmdldEludDgoMSl8fHJlZGVmaW5lQWxsKCREYXRhVmlldy5wcm90b3R5cGUse3NldEludDg6ZnVuY3Rpb24oYnl0ZU9mZnNldCx2YWx1ZSl7JHNldEludDguY2FsbCh0aGlzLGJ5dGVPZmZzZXQsdmFsdWU8PDI0Pj4yNCl9LHNldFVpbnQ4OmZ1bmN0aW9uKGJ5dGVPZmZzZXQsdmFsdWUpeyRzZXRJbnQ4LmNhbGwodGhpcyxieXRlT2Zmc2V0LHZhbHVlPDwyND4+MjQpfX0sITApfWVsc2UgJEFycmF5QnVmZmVyPWZ1bmN0aW9uKGxlbmd0aCl7YW5JbnN0YW5jZSh0aGlzLCRBcnJheUJ1ZmZlciwiQXJyYXlCdWZmZXIiKTt2YXIgYnl0ZUxlbmd0aD10b0luZGV4KGxlbmd0aCk7dGhpcy5fYj1hcnJheUZpbGwuY2FsbChuZXcgQXJyYXkoYnl0ZUxlbmd0aCksMCksdGhpc1skTEVOR1RIXT1ieXRlTGVuZ3RofSwkRGF0YVZpZXc9ZnVuY3Rpb24oYnVmZmVyLGJ5dGVPZmZzZXQsYnl0ZUxlbmd0aCl7YW5JbnN0YW5jZSh0aGlzLCREYXRhVmlldywiRGF0YVZpZXciKSxhbkluc3RhbmNlKGJ1ZmZlciwkQXJyYXlCdWZmZXIsIkRhdGFWaWV3Iik7dmFyIGJ1ZmZlckxlbmd0aD1idWZmZXJbJExFTkdUSF0sb2Zmc2V0PXRvSW50ZWdlcihieXRlT2Zmc2V0KTtpZihvZmZzZXQ8MHx8YnVmZmVyTGVuZ3RoPG9mZnNldCl0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBvZmZzZXQhIik7aWYoYnVmZmVyTGVuZ3RoPG9mZnNldCsoYnl0ZUxlbmd0aD12b2lkIDA9PT1ieXRlTGVuZ3RoP2J1ZmZlckxlbmd0aC1vZmZzZXQ6dG9MZW5ndGgoYnl0ZUxlbmd0aCkpKXRocm93IFJhbmdlRXJyb3IoIldyb25nIGxlbmd0aCEiKTt0aGlzWyRCVUZGRVJdPWJ1ZmZlcix0aGlzWyRPRkZTRVRdPW9mZnNldCx0aGlzWyRMRU5HVEhdPWJ5dGVMZW5ndGh9LERFU0NSSVBUT1JTJiYoYWRkR2V0dGVyKCRBcnJheUJ1ZmZlciwiYnl0ZUxlbmd0aCIsIl9sIiksYWRkR2V0dGVyKCREYXRhVmlldywiYnVmZmVyIiwiX2IiKSxhZGRHZXR0ZXIoJERhdGFWaWV3LCJieXRlTGVuZ3RoIiwiX2wiKSxhZGRHZXR0ZXIoJERhdGFWaWV3LCJieXRlT2Zmc2V0IiwiX28iKSkscmVkZWZpbmVBbGwoJERhdGFWaWV3LnByb3RvdHlwZSx7Z2V0SW50ODpmdW5jdGlvbihieXRlT2Zmc2V0KXtyZXR1cm4gZ2V0KHRoaXMsMSxieXRlT2Zmc2V0KVswXTw8MjQ+PjI0fSxnZXRVaW50ODpmdW5jdGlvbihieXRlT2Zmc2V0KXtyZXR1cm4gZ2V0KHRoaXMsMSxieXRlT2Zmc2V0KVswXX0sZ2V0SW50MTY6ZnVuY3Rpb24oYnl0ZU9mZnNldCl7dmFyIGJ5dGVzPWdldCh0aGlzLDIsYnl0ZU9mZnNldCxhcmd1bWVudHNbMV0pO3JldHVybihieXRlc1sxXTw8OHxieXRlc1swXSk8PDE2Pj4xNn0sZ2V0VWludDE2OmZ1bmN0aW9uKGJ5dGVPZmZzZXQpe3ZhciBieXRlcz1nZXQodGhpcywyLGJ5dGVPZmZzZXQsYXJndW1lbnRzWzFdKTtyZXR1cm4gYnl0ZXNbMV08PDh8Ynl0ZXNbMF19LGdldEludDMyOmZ1bmN0aW9uKGJ5dGVPZmZzZXQpe3JldHVybiB1bnBhY2tJMzIoZ2V0KHRoaXMsNCxieXRlT2Zmc2V0LGFyZ3VtZW50c1sxXSkpfSxnZXRVaW50MzI6ZnVuY3Rpb24oYnl0ZU9mZnNldCl7cmV0dXJuIHVucGFja0kzMihnZXQodGhpcyw0LGJ5dGVPZmZzZXQsYXJndW1lbnRzWzFdKSk+Pj4wfSxnZXRGbG9hdDMyOmZ1bmN0aW9uKGJ5dGVPZmZzZXQpe3JldHVybiB1bnBhY2tJRUVFNzU0KGdldCh0aGlzLDQsYnl0ZU9mZnNldCxhcmd1bWVudHNbMV0pLDIzLDQpfSxnZXRGbG9hdDY0OmZ1bmN0aW9uKGJ5dGVPZmZzZXQpe3JldHVybiB1bnBhY2tJRUVFNzU0KGdldCh0aGlzLDgsYnl0ZU9mZnNldCxhcmd1bWVudHNbMV0pLDUyLDgpfSxzZXRJbnQ4OmZ1bmN0aW9uKGJ5dGVPZmZzZXQsdmFsdWUpe3NldCh0aGlzLDEsYnl0ZU9mZnNldCxwYWNrSTgsdmFsdWUpfSxzZXRVaW50ODpmdW5jdGlvbihieXRlT2Zmc2V0LHZhbHVlKXtzZXQodGhpcywxLGJ5dGVPZmZzZXQscGFja0k4LHZhbHVlKX0sc2V0SW50MTY6ZnVuY3Rpb24oYnl0ZU9mZnNldCx2YWx1ZSl7c2V0KHRoaXMsMixieXRlT2Zmc2V0LHBhY2tJMTYsdmFsdWUsYXJndW1lbnRzWzJdKX0sc2V0VWludDE2OmZ1bmN0aW9uKGJ5dGVPZmZzZXQsdmFsdWUpe3NldCh0aGlzLDIsYnl0ZU9mZnNldCxwYWNrSTE2LHZhbHVlLGFyZ3VtZW50c1syXSl9LHNldEludDMyOmZ1bmN0aW9uKGJ5dGVPZmZzZXQsdmFsdWUpe3NldCh0aGlzLDQsYnl0ZU9mZnNldCxwYWNrSTMyLHZhbHVlLGFyZ3VtZW50c1syXSl9LHNldFVpbnQzMjpmdW5jdGlvbihieXRlT2Zmc2V0LHZhbHVlKXtzZXQodGhpcyw0LGJ5dGVPZmZzZXQscGFja0kzMix2YWx1ZSxhcmd1bWVudHNbMl0pfSxzZXRGbG9hdDMyOmZ1bmN0aW9uKGJ5dGVPZmZzZXQsdmFsdWUpe3NldCh0aGlzLDQsYnl0ZU9mZnNldCxwYWNrRjMyLHZhbHVlLGFyZ3VtZW50c1syXSl9LHNldEZsb2F0NjQ6ZnVuY3Rpb24oYnl0ZU9mZnNldCx2YWx1ZSl7c2V0KHRoaXMsOCxieXRlT2Zmc2V0LHBhY2tGNjQsdmFsdWUsYXJndW1lbnRzWzJdKX19KTtzZXRUb1N0cmluZ1RhZygkQXJyYXlCdWZmZXIsIkFycmF5QnVmZmVyIiksc2V0VG9TdHJpbmdUYWcoJERhdGFWaWV3LCJEYXRhVmlldyIpLGhpZGUoJERhdGFWaWV3LnByb3RvdHlwZSwkdHlwZWQuVklFVywhMCksZXhwb3J0cy5BcnJheUJ1ZmZlcj0kQXJyYXlCdWZmZXIsZXhwb3J0cy5EYXRhVmlldz0kRGF0YVZpZXd9LCI3VkMxIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLCRwYWQ9X193ZWJwYWNrX3JlcXVpcmVfXygiTGdqdiIpLHVzZXJBZ2VudD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJvbDh4IiksV0VCS0lUX0JVRz0vVmVyc2lvblwvMTBcLlxkKyhcLlxkKyk/KCBNb2JpbGVcL1x3Kyk/IFNhZmFyaVwvLy50ZXN0KHVzZXJBZ2VudCk7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKldFQktJVF9CVUcsIlN0cmluZyIse3BhZEVuZDpmdW5jdGlvbihtYXhMZW5ndGgpe3JldHVybiAkcGFkKHRoaXMsbWF4TGVuZ3RoLDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwLCExKX19KX0sIjdYNTgiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUywiTWF0aCIse3NpZ25iaXQ6ZnVuY3Rpb24oeCl7cmV0dXJuKHg9K3gpIT14P3g6MD09eD8xL3g9PTEvMDowPHh9fSl9LCI3YVY5IjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgic2kiLHttb250aHM6IuC2ouC2seC3gOC3j+C2u+C3kl/gtrTgt5ngtrbgtrvgt4Dgt4/gtrvgt5Jf4La44LeP4La74LeK4Lat4LeUX+C2heC2tOC3iuKAjeC2u+C3muC2veC3il/gtrjgt5Dgtrrgt5Jf4Lai4LeW4Lax4LeSX+C2ouC3luC2veC3kl/gtoXgtpzgt53gt4Pgt4rgtq3gt5Rf4LeD4LeQ4La04LeK4Lat4LeQ4La44LeK4La24La74LeKX+C2lOC2muC3iuC2reC3neC2tuC2u+C3il/gtrHgt5zgt4Dgt5Dgtrjgt4rgtrbgtrvgt4pf4Lav4LeZ4LeD4LeQ4La44LeK4La24La74LeKIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgtqLgtrFf4La04LeZ4La2X+C2uOC3j+C2u+C3il/gtoXgtrTgt4pf4La44LeQ4La64LeSX+C2ouC3luC2seC3kl/gtqLgt5bgtr3gt5Jf4LaF4Lac4LedX+C3g+C3kOC2tOC3il/gtpTgtprgt4pf4Lax4Lec4LeA4LeQX+C2r+C3meC3g+C3kCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4LaJ4La74LeS4Lav4LePX+C3g+C2s+C3lOC2r+C3j1/gtoXgtp/gt4Tgtrvgt5Tgt4Dgt4/gtq/gt49f4La24Lav4LeP4Lav4LePX+C2tuC3iuKAjeC2u+C3hOC3g+C3iuC2tOC2reC3kuC2seC3iuC2r+C3j1/gt4Pgt5Lgtprgt5Tgtrvgt4/gtq/gt49f4LeD4LeZ4Lax4LeD4LeU4La74LeP4Lav4LePIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC2ieC2u+C3kl/gt4PgtrPgt5Rf4LaF4LafX+C2tuC2r+C3j1/gtrbgt4rigI3gtrvgt4Rf4LeD4LeS4Laa4LeUX+C3g+C3meC2sSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4LaJX+C3g1/gtoVf4La2X+C2tuC3iuKAjeC2u1/gt4Pgt5Jf4LeD4LeZIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6ImEgaDptbSIsTFRTOiJhIGg6bW06c3MiLEw6IllZWVkvTU0vREQiLExMOiJZWVlZIE1NTU0gRCIsTExMOiJZWVlZIE1NTU0gRCwgYSBoOm1tIixMTExMOiJZWVlZIE1NTU0gRCBb4LeA4LeQ4Lax4LeSXSBkZGRkLCBhIGg6bW06c3MifSxjYWxlbmRhcjp7c2FtZURheToiW+C2heC2r10gTFRb4LanXSIsbmV4dERheToiW+C3hOC3meC2p10gTFRb4LanXSIsbmV4dFdlZWs6ImRkZGQgTFRb4LanXSIsbGFzdERheToiW+C2iuC2uuC3ml0gTFRb4LanXSIsbGFzdFdlZWs6IlvgtrTgt4Pgt5Tgtpzgt5LgtrpdIGRkZGQgTFRb4LanXSIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXPgtprgt5LgtrHgt4oiLHBhc3Q6IiVz4Laa4LanIOC2tOC3meC2uyIsczoi4Lat4Lat4LeK4La04La7IOC2muC3kuC3hOC3kuC2tOC2uiIsc3M6IuC2reC2reC3iuC2tOC2uyAlZCIsbToi4La44LeS4Lax4LeS4Lat4LeK4Lat4LeU4LeAIixtbToi4La44LeS4Lax4LeS4Lat4LeK4Lat4LeUICVkIixoOiLgtrTgt5DgtroiLGhoOiLgtrTgt5DgtrogJWQiLGQ6IuC2r+C3kuC2seC2uiIsZGQ6IuC2r+C3kuC2sSAlZCIsTToi4La44LeP4LeD4La6IixNTToi4La44LeP4LeDICVkIix5OiLgt4Dgt4PgtrsiLHl5OiLgt4Dgt4PgtrsgJWQifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9IOC3gOC3kOC2seC3ki8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3JldHVybiBudW1iZXIrIiDgt4Dgt5DgtrHgt5IifSxtZXJpZGllbVBhcnNlOi/gtrTgt5ngtrsg4LeA4La74LeUfOC2tOC3g+C3iiDgt4Dgtrvgt5R84La04LeZLuC3gHzgtrQu4LeALi8saXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuIuC2tC7gt4AuIj09PWlucHV0fHwi4La04LeD4LeKIOC3gOC2u+C3lCI9PT1pbnB1dH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cnMsbWludXRlcyxpc0xvd2VyKXtyZXR1cm4gMTE8aG91cnM/aXNMb3dlcj8i4La0LuC3gC4iOiLgtrTgt4Pgt4og4LeA4La74LeUIjppc0xvd2VyPyLgtrTgt5ku4LeALiI6IuC2tOC3meC2uyDgt4Dgtrvgt5QifX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiN2gwVCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJOdW1iZXIiLHtpc05hTjpmdW5jdGlvbihudW1iZXIpe3JldHVybiBudW1iZXIhPW51bWJlcn19KX0sIjgrS1YiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGZvckVhY2g9X193ZWJwYWNrX3JlcXVpcmVfXygiQ2trVCIpKDApLFNUUklDVD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMeUU4IikoW10uZm9yRWFjaCwhMCk7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKiFTVFJJQ1QsIkFycmF5Iix7Zm9yRWFjaDpmdW5jdGlvbihjYWxsYmFja2ZuKXtyZXR1cm4gJGZvckVhY2godGhpcyxjYWxsYmFja2ZuLGFyZ3VtZW50c1sxXSl9fSl9LCI4LytSIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIHN5bWJvbE1hcD17MToi4KmnIiwyOiLgqagiLDM6IuCpqSIsNDoi4KmqIiw1OiLgqasiLDY6IuCprCIsNzoi4KmtIiw4OiLgqa4iLDk6IuCpryIsMDoi4KmmIn0sbnVtYmVyTWFwPXsi4KmnIjoiMSIsIuCpqCI6IjIiLCLgqakiOiIzIiwi4KmqIjoiNCIsIuCpqyI6IjUiLCLgqawiOiI2Iiwi4KmtIjoiNyIsIuCpriI6IjgiLCLgqa8iOiI5Iiwi4KmmIjoiMCJ9O21vbWVudC5kZWZpbmVMb2NhbGUoInBhLWluIix7bW9udGhzOiLgqJzgqKjgqLXgqLDgqYBf4Kir4Ki84Kiw4Ki14Kiw4KmAX+CoruCovuCosOComl/gqIXgqKrgqY3gqLDgqYjgqLJf4Kiu4KiIX+ConOCpguCoqF/gqJzgqYHgqLLgqL7gqIhf4KiF4KiX4Ki44KikX+CouOCopOCpsOCorOCosF/gqIXgqJXgqKTgqYLgqKzgqLBf4Kio4Ki14Kmw4Kis4KiwX+CopuCouOCpsOCorOCosCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Kic4Kio4Ki14Kiw4KmAX+Coq+CovOCosOCoteCosOCpgF/gqK7gqL7gqLDgqJpf4KiF4Kiq4KmN4Kiw4KmI4KiyX+CoruCoiF/gqJzgqYLgqKhf4Kic4KmB4Kiy4Ki+4KiIX+CoheCol+CouOCopF/gqLjgqKTgqbDgqKzgqLBf4KiF4KiV4Kik4KmC4Kis4KiwX+CoqOCoteCpsOCorOCosF/gqKbgqLjgqbDgqKzgqLAiLnNwbGl0KCJfIiksd2Vla2RheXM6IuCokOCopOCoteCovuCosF/gqLjgqYvgqK7gqLXgqL7gqLBf4Kiu4Kmw4KiX4Kiy4Ki14Ki+4KiwX+CorOCpgeCop+CoteCovuCosF/gqLXgqYDgqLDgqLXgqL7gqLBf4Ki44Ki84KmB4Kmx4KiV4Kiw4Ki14Ki+4KiwX+CouOCovOCoqOCpgOComuCosOCoteCovuCosCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgqJDgqKRf4Ki44KmL4KiuX+CoruCpsOCol+Cosl/gqKzgqYHgqKdf4Ki14KmA4KiwX+CouOCovOCpgeColeCosF/gqLjgqLzgqKjgqYAiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuCokOCopF/gqLjgqYvgqK5f4Kiu4Kmw4KiX4KiyX+CorOCpgeCop1/gqLXgqYDgqLBf4Ki44Ki84KmB4KiV4KiwX+CouOCovOCoqOCpgCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkEgaDptbSDgqLXgqJzgqYciLExUUzoiQSBoOm1tOnNzIOCoteConOCphyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0g4Ki14Kic4KmHIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCoteConOCphyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4KiF4KicXSBMVCIsbmV4dERheToiW+ColeCosl0gTFQiLG5leHRXZWVrOiJb4KiF4KiX4Kiy4Ki+XSBkZGRkLCBMVCIsbGFzdERheToiW+ColeCosl0gTFQiLGxhc3RXZWVrOiJb4Kiq4Ki/4Kib4Kiy4KmHXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4Ki14Ki/4Kmx4KiaIixwYXN0OiIlcyDgqKrgqL/gqJvgqLLgqYciLHM6IuColeCpgeConSDgqLjgqJXgqL/gqbDgqJ8iLHNzOiIlZCDgqLjgqJXgqL/gqbDgqJ8iLG06IuCoh+ColSDgqK7gqL/gqbDgqJ8iLG1tOiIlZCDgqK7gqL/gqbDgqJ8iLGg6IuCoh+CpseColSDgqJjgqbDgqJ/gqL4iLGhoOiIlZCDgqJjgqbDgqJ/gqYciLGQ6IuCoh+CpseColSDgqKbgqL/gqKgiLGRkOiIlZCDgqKbgqL/gqKgiLE06IuCoh+CpseColSDgqK7gqLngqYDgqKjgqL4iLE1NOiIlZCDgqK7gqLngqYDgqKjgqYciLHk6IuCoh+CpseColSDgqLjgqL7gqLIiLHl5OiIlZCDgqLjgqL7gqLIifSxwcmVwYXJzZTpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvW+Cpp+CpqOCpqeCpquCpq+CprOCpreCpruCpr+Cppl0vZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIG51bWJlck1hcFttYXRjaF19KX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHN5bWJvbE1hcFttYXRjaF19KX0sbWVyaWRpZW1QYXJzZTov4Kiw4Ki+4KikfOCouOCoteCph+CosHzgqKbgqYHgqKrgqLngqL/gqLB84Ki44Ki84Ki+4KiuLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksIuCosOCovuCopCI9PT1tZXJpZGllbT9ob3VyPDQ/aG91cjpob3VyKzEyOiLgqLjgqLXgqYfgqLAiPT09bWVyaWRpZW0/aG91cjoi4Kim4KmB4Kiq4Ki54Ki/4KiwIj09PW1lcmlkaWVtPzEwPD1ob3VyP2hvdXI6aG91cisxMjoi4Ki44Ki84Ki+4KiuIj09PW1lcmlkaWVtP2hvdXIrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjw0PyLgqLDgqL7gqKQiOmhvdXI8MTA/IuCouOCoteCph+CosCI6aG91cjwxNz8i4Kim4KmB4Kiq4Ki54Ki/4KiwIjpob3VyPDIwPyLgqLjgqLzgqL7gqK4iOiLgqLDgqL7gqKQifSx3ZWVrOntkb3c6MCxkb3k6Nn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sIjg0YkYiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fKCJPR3RmIikoInNtYWxsIixmdW5jdGlvbihjcmVhdGVIVE1MKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCJzbWFsbCIsIiIsIiIpfX0pfSwiODZMVyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7KGZ1bmN0aW9uKGdsb2JhbCl7IWZ1bmN0aW9uKGdsb2JhbCl7InVzZSBzdHJpY3QiO3ZhciB1bmRlZmluZWQsT3A9T2JqZWN0LnByb3RvdHlwZSxoYXNPd249T3AuaGFzT3duUHJvcGVydHksJFN5bWJvbD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxpdGVyYXRvclN5bWJvbD0kU3ltYm9sLml0ZXJhdG9yfHwiQEBpdGVyYXRvciIsYXN5bmNJdGVyYXRvclN5bWJvbD0kU3ltYm9sLmFzeW5jSXRlcmF0b3J8fCJAQGFzeW5jSXRlcmF0b3IiLHRvU3RyaW5nVGFnU3ltYm9sPSRTeW1ib2wudG9TdHJpbmdUYWd8fCJAQHRvU3RyaW5nVGFnIixpbk1vZHVsZT0ib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSxydW50aW1lPWdsb2JhbC5yZWdlbmVyYXRvclJ1bnRpbWU7aWYocnVudGltZSlpbk1vZHVsZSYmKG1vZHVsZS5leHBvcnRzPXJ1bnRpbWUpO2Vsc2V7KHJ1bnRpbWU9Z2xvYmFsLnJlZ2VuZXJhdG9yUnVudGltZT1pbk1vZHVsZT9tb2R1bGUuZXhwb3J0czp7fSkud3JhcD13cmFwO3ZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0PSJzdXNwZW5kZWRTdGFydCIsR2VuU3RhdGVTdXNwZW5kZWRZaWVsZD0ic3VzcGVuZGVkWWllbGQiLEdlblN0YXRlRXhlY3V0aW5nPSJleGVjdXRpbmciLEdlblN0YXRlQ29tcGxldGVkPSJjb21wbGV0ZWQiLENvbnRpbnVlU2VudGluZWw9e30sSXRlcmF0b3JQcm90b3R5cGU9e307SXRlcmF0b3JQcm90b3R5cGVbaXRlcmF0b3JTeW1ib2xdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3ZhciBnZXRQcm90bz1PYmplY3QuZ2V0UHJvdG90eXBlT2YsTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU9Z2V0UHJvdG8mJmdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtOYXRpdmVJdGVyYXRvclByb3RvdHlwZSYmTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUhPT1PcCYmaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsaXRlcmF0b3JTeW1ib2wpJiYoSXRlcmF0b3JQcm90b3R5cGU9TmF0aXZlSXRlcmF0b3JQcm90b3R5cGUpO3ZhciBHcD1HZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGU9R2VuZXJhdG9yLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGU9R3AuY29uc3RydWN0b3I9R2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3I9R2VuZXJhdG9yRnVuY3Rpb24sR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGVbdG9TdHJpbmdUYWdTeW1ib2xdPUdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lPSJHZW5lcmF0b3JGdW5jdGlvbiIscnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKGdlbkZ1bil7dmFyIGN0b3I9ImZ1bmN0aW9uIj09dHlwZW9mIGdlbkZ1biYmZ2VuRnVuLmNvbnN0cnVjdG9yO3JldHVybiEhY3RvciYmKGN0b3I9PT1HZW5lcmF0b3JGdW5jdGlvbnx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PShjdG9yLmRpc3BsYXlOYW1lfHxjdG9yLm5hbWUpKX0scnVudGltZS5tYXJrPWZ1bmN0aW9uKGdlbkZ1bil7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTooZ2VuRnVuLl9fcHJvdG9fXz1HZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSx0b1N0cmluZ1RhZ1N5bWJvbCBpbiBnZW5GdW58fChnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdPSJHZW5lcmF0b3JGdW5jdGlvbiIpKSxnZW5GdW4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoR3ApLGdlbkZ1bn0scnVudGltZS5hd3JhcD1mdW5jdGlvbihhcmcpe3JldHVybntfX2F3YWl0OmFyZ319LGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSksQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30scnVudGltZS5Bc3luY0l0ZXJhdG9yPUFzeW5jSXRlcmF0b3IscnVudGltZS5hc3luYz1mdW5jdGlvbihpbm5lckZuLG91dGVyRm4sc2VsZix0cnlMb2NzTGlzdCl7dmFyIGl0ZXI9bmV3IEFzeW5jSXRlcmF0b3Iod3JhcChpbm5lckZuLG91dGVyRm4sc2VsZix0cnlMb2NzTGlzdCkpO3JldHVybiBydW50aW1lLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbik/aXRlcjppdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7cmV0dXJuIHJlc3VsdC5kb25lP3Jlc3VsdC52YWx1ZTppdGVyLm5leHQoKX0pfSxkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApLEdwW3RvU3RyaW5nVGFnU3ltYm9sXT0iR2VuZXJhdG9yIixHcFtpdGVyYXRvclN5bWJvbF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sR3AudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0scnVudGltZS5rZXlzPWZ1bmN0aW9uKG9iamVjdCl7dmFyIGtleXM9W107Zm9yKHZhciBrZXkgaW4gb2JqZWN0KWtleXMucHVzaChrZXkpO3JldHVybiBrZXlzLnJldmVyc2UoKSxmdW5jdGlvbiBuZXh0KCl7Zm9yKDtrZXlzLmxlbmd0aDspe3ZhciBrZXk9a2V5cy5wb3AoKTtpZihrZXkgaW4gb2JqZWN0KXJldHVybiBuZXh0LnZhbHVlPWtleSxuZXh0LmRvbmU9ITEsbmV4dH1yZXR1cm4gbmV4dC5kb25lPSEwLG5leHR9fSxydW50aW1lLnZhbHVlcz12YWx1ZXMsQ29udGV4dC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkNvbnRleHQscmVzZXQ6ZnVuY3Rpb24oc2tpcFRlbXBSZXNldCl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9dW5kZWZpbmVkLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9Im5leHQiLHRoaXMuYXJnPXVuZGVmaW5lZCx0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KSwhc2tpcFRlbXBSZXNldClmb3IodmFyIG5hbWUgaW4gdGhpcykidCI9PT1uYW1lLmNoYXJBdCgwKSYmaGFzT3duLmNhbGwodGhpcyxuYW1lKSYmIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSYmKHRoaXNbbmFtZV09dW5kZWZpbmVkKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgcm9vdFJlY29yZD10aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtpZigidGhyb3ciPT09cm9vdFJlY29yZC50eXBlKXRocm93IHJvb3RSZWNvcmQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKGV4Y2VwdGlvbil7aWYodGhpcy5kb25lKXRocm93IGV4Y2VwdGlvbjt2YXIgY29udGV4dD10aGlzO2Z1bmN0aW9uIGhhbmRsZShsb2MsY2F1Z2h0KXtyZXR1cm4gcmVjb3JkLnR5cGU9InRocm93IixyZWNvcmQuYXJnPWV4Y2VwdGlvbixjb250ZXh0Lm5leHQ9bG9jLGNhdWdodCYmKGNvbnRleHQubWV0aG9kPSJuZXh0Iixjb250ZXh0LmFyZz11bmRlZmluZWQpLCEhY2F1Z2h0fWZvcih2YXIgaT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7MDw9aTstLWkpe3ZhciBlbnRyeT10aGlzLnRyeUVudHJpZXNbaV0scmVjb3JkPWVudHJ5LmNvbXBsZXRpb247aWYoInJvb3QiPT09ZW50cnkudHJ5TG9jKXJldHVybiBoYW5kbGUoImVuZCIpO2lmKGVudHJ5LnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgaGFzQ2F0Y2g9aGFzT3duLmNhbGwoZW50cnksImNhdGNoTG9jIiksaGFzRmluYWxseT1oYXNPd24uY2FsbChlbnRyeSwiZmluYWxseUxvYyIpO2lmKGhhc0NhdGNoJiZoYXNGaW5hbGx5KXtpZih0aGlzLnByZXY8ZW50cnkuY2F0Y2hMb2MpcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PGVudHJ5LmZpbmFsbHlMb2MpcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKX1lbHNlIGlmKGhhc0NhdGNoKXtpZih0aGlzLnByZXY8ZW50cnkuY2F0Y2hMb2MpcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywhMCl9ZWxzZXtpZighaGFzRmluYWxseSl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PGVudHJ5LmZpbmFsbHlMb2MpcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKHR5cGUsYXJnKXtmb3IodmFyIGk9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xOzA8PWk7LS1pKXt2YXIgZW50cnk9dGhpcy50cnlFbnRyaWVzW2ldO2lmKGVudHJ5LnRyeUxvYzw9dGhpcy5wcmV2JiZoYXNPd24uY2FsbChlbnRyeSwiZmluYWxseUxvYyIpJiZ0aGlzLnByZXY8ZW50cnkuZmluYWxseUxvYyl7dmFyIGZpbmFsbHlFbnRyeT1lbnRyeTticmVha319ZmluYWxseUVudHJ5JiYoImJyZWFrIj09PXR5cGV8fCJjb250aW51ZSI9PT10eXBlKSYmZmluYWxseUVudHJ5LnRyeUxvYzw9YXJnJiZhcmc8PWZpbmFsbHlFbnRyeS5maW5hbGx5TG9jJiYoZmluYWxseUVudHJ5PW51bGwpO3ZhciByZWNvcmQ9ZmluYWxseUVudHJ5P2ZpbmFsbHlFbnRyeS5jb21wbGV0aW9uOnt9O3JldHVybiByZWNvcmQudHlwZT10eXBlLHJlY29yZC5hcmc9YXJnLGZpbmFsbHlFbnRyeT8odGhpcy5tZXRob2Q9Im5leHQiLHRoaXMubmV4dD1maW5hbGx5RW50cnkuZmluYWxseUxvYyxDb250aW51ZVNlbnRpbmVsKTp0aGlzLmNvbXBsZXRlKHJlY29yZCl9LGNvbXBsZXRlOmZ1bmN0aW9uKHJlY29yZCxhZnRlckxvYyl7aWYoInRocm93Ij09PXJlY29yZC50eXBlKXRocm93IHJlY29yZC5hcmc7cmV0dXJuImJyZWFrIj09PXJlY29yZC50eXBlfHwiY29udGludWUiPT09cmVjb3JkLnR5cGU/dGhpcy5uZXh0PXJlY29yZC5hcmc6InJldHVybiI9PT1yZWNvcmQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXJlY29yZC5hcmcsdGhpcy5tZXRob2Q9InJldHVybiIsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PXJlY29yZC50eXBlJiZhZnRlckxvYyYmKHRoaXMubmV4dD1hZnRlckxvYyksQ29udGludWVTZW50aW5lbH0sZmluaXNoOmZ1bmN0aW9uKGZpbmFsbHlMb2Mpe2Zvcih2YXIgaT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7MDw9aTstLWkpe3ZhciBlbnRyeT10aGlzLnRyeUVudHJpZXNbaV07aWYoZW50cnkuZmluYWxseUxvYz09PWZpbmFsbHlMb2MpcmV0dXJuIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbixlbnRyeS5hZnRlckxvYykscmVzZXRUcnlFbnRyeShlbnRyeSksQ29udGludWVTZW50aW5lbH19LGNhdGNoOmZ1bmN0aW9uKHRyeUxvYyl7Zm9yKHZhciBpPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTswPD1pOy0taSl7dmFyIGVudHJ5PXRoaXMudHJ5RW50cmllc1tpXTtpZihlbnRyeS50cnlMb2M9PT10cnlMb2Mpe3ZhciByZWNvcmQ9ZW50cnkuY29tcGxldGlvbjtpZigidGhyb3ciPT09cmVjb3JkLnR5cGUpe3ZhciB0aHJvd249cmVjb3JkLmFyZztyZXNldFRyeUVudHJ5KGVudHJ5KX1yZXR1cm4gdGhyb3dufX10aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKGl0ZXJhYmxlLHJlc3VsdE5hbWUsbmV4dExvYyl7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOnZhbHVlcyhpdGVyYWJsZSkscmVzdWx0TmFtZTpyZXN1bHROYW1lLG5leHRMb2M6bmV4dExvY30sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz11bmRlZmluZWQpLENvbnRpbnVlU2VudGluZWx9fX1mdW5jdGlvbiB3cmFwKGlubmVyRm4sb3V0ZXJGbixzZWxmLHRyeUxvY3NMaXN0KXt2YXIgcHJvdG9HZW5lcmF0b3I9b3V0ZXJGbiYmb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3I/b3V0ZXJGbjpHZW5lcmF0b3IsZ2VuZXJhdG9yPU9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKSxjb250ZXh0PW5ldyBDb250ZXh0KHRyeUxvY3NMaXN0fHxbXSk7cmV0dXJuIGdlbmVyYXRvci5faW52b2tlPWZ1bmN0aW9uKGlubmVyRm4sc2VsZixjb250ZXh0KXt2YXIgc3RhdGU9R2VuU3RhdGVTdXNwZW5kZWRTdGFydDtyZXR1cm4gZnVuY3Rpb24obWV0aG9kLGFyZyl7aWYoc3RhdGU9PT1HZW5TdGF0ZUV4ZWN1dGluZyl0aHJvdyBuZXcgRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmciKTtpZihzdGF0ZT09PUdlblN0YXRlQ29tcGxldGVkKXtpZigidGhyb3ciPT09bWV0aG9kKXRocm93IGFyZztyZXR1cm4gZG9uZVJlc3VsdCgpfWZvcihjb250ZXh0Lm1ldGhvZD1tZXRob2QsY29udGV4dC5hcmc9YXJnOzspe3ZhciBkZWxlZ2F0ZT1jb250ZXh0LmRlbGVnYXRlO2lmKGRlbGVnYXRlKXt2YXIgZGVsZWdhdGVSZXN1bHQ9bWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSxjb250ZXh0KTtpZihkZWxlZ2F0ZVJlc3VsdCl7aWYoZGVsZWdhdGVSZXN1bHQ9PT1Db250aW51ZVNlbnRpbmVsKWNvbnRpbnVlO3JldHVybiBkZWxlZ2F0ZVJlc3VsdH19aWYoIm5leHQiPT09Y29udGV4dC5tZXRob2QpY29udGV4dC5zZW50PWNvbnRleHQuX3NlbnQ9Y29udGV4dC5hcmc7ZWxzZSBpZigidGhyb3ciPT09Y29udGV4dC5tZXRob2Qpe2lmKHN0YXRlPT09R2VuU3RhdGVTdXNwZW5kZWRTdGFydCl0aHJvdyBzdGF0ZT1HZW5TdGF0ZUNvbXBsZXRlZCxjb250ZXh0LmFyZztjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKX1lbHNlInJldHVybiI9PT1jb250ZXh0Lm1ldGhvZCYmY29udGV4dC5hYnJ1cHQoInJldHVybiIsY29udGV4dC5hcmcpO3N0YXRlPUdlblN0YXRlRXhlY3V0aW5nO3ZhciByZWNvcmQ9dHJ5Q2F0Y2goaW5uZXJGbixzZWxmLGNvbnRleHQpO2lmKCJub3JtYWwiPT09cmVjb3JkLnR5cGUpe2lmKHN0YXRlPWNvbnRleHQuZG9uZT9HZW5TdGF0ZUNvbXBsZXRlZDpHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkLHJlY29yZC5hcmc9PT1Db250aW51ZVNlbnRpbmVsKWNvbnRpbnVlO3JldHVybnt2YWx1ZTpyZWNvcmQuYXJnLGRvbmU6Y29udGV4dC5kb25lfX0idGhyb3ciPT09cmVjb3JkLnR5cGUmJihzdGF0ZT1HZW5TdGF0ZUNvbXBsZXRlZCxjb250ZXh0Lm1ldGhvZD0idGhyb3ciLGNvbnRleHQuYXJnPXJlY29yZC5hcmcpfX19KGlubmVyRm4sc2VsZixjb250ZXh0KSxnZW5lcmF0b3J9ZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sb2JqLGFyZyl7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzpmbi5jYWxsKG9iaixhcmcpfX1jYXRjaChlcnIpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOmVycn19fWZ1bmN0aW9uIEdlbmVyYXRvcigpe31mdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpe31mdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpe31mdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKXtwcm90b3R5cGVbbWV0aG9kXT1mdW5jdGlvbihhcmcpe3JldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLGFyZyl9fSl9ZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3Ipe2Z1bmN0aW9uIGludm9rZShtZXRob2QsYXJnLHJlc29sdmUscmVqZWN0KXt2YXIgcmVjb3JkPXRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLGdlbmVyYXRvcixhcmcpO2lmKCJ0aHJvdyIhPT1yZWNvcmQudHlwZSl7dmFyIHJlc3VsdD1yZWNvcmQuYXJnLHZhbHVlPXJlc3VsdC52YWx1ZTtyZXR1cm4gdmFsdWUmJiJvYmplY3QiPT10eXBlb2YgdmFsdWUmJmhhc093bi5jYWxsKHZhbHVlLCJfX2F3YWl0Iik/UHJvbWlzZS5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpe2ludm9rZSgibmV4dCIsdmFsdWUscmVzb2x2ZSxyZWplY3QpfSxmdW5jdGlvbihlcnIpe2ludm9rZSgidGhyb3ciLGVycixyZXNvbHZlLHJlamVjdCl9KTpQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKXtyZXN1bHQudmFsdWU9dW53cmFwcGVkLHJlc29sdmUocmVzdWx0KX0scmVqZWN0KX1yZWplY3QocmVjb3JkLmFyZyl9dmFyIHByZXZpb3VzUHJvbWlzZTsib2JqZWN0Ij09dHlwZW9mIGdsb2JhbC5wcm9jZXNzJiZnbG9iYWwucHJvY2Vzcy5kb21haW4mJihpbnZva2U9Z2xvYmFsLnByb2Nlc3MuZG9tYWluLmJpbmQoaW52b2tlKSksdGhpcy5faW52b2tlPWZ1bmN0aW9uKG1ldGhvZCxhcmcpe2Z1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtpbnZva2UobWV0aG9kLGFyZyxyZXNvbHZlLHJlamVjdCl9KX1yZXR1cm4gcHJldmlvdXNQcm9taXNlPXByZXZpb3VzUHJvbWlzZT9wcmV2aW91c1Byb21pc2UudGhlbihjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyk6Y2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKX19ZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSxjb250ZXh0KXt2YXIgbWV0aG9kPWRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtpZihtZXRob2Q9PT11bmRlZmluZWQpe2lmKGNvbnRleHQuZGVsZWdhdGU9bnVsbCwidGhyb3ciPT09Y29udGV4dC5tZXRob2Qpe2lmKGRlbGVnYXRlLml0ZXJhdG9yLnJldHVybiYmKGNvbnRleHQubWV0aG9kPSJyZXR1cm4iLGNvbnRleHQuYXJnPXVuZGVmaW5lZCxtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLGNvbnRleHQpLCJ0aHJvdyI9PT1jb250ZXh0Lm1ldGhvZCkpcmV0dXJuIENvbnRpbnVlU2VudGluZWw7Y29udGV4dC5tZXRob2Q9InRocm93Iixjb250ZXh0LmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIil9cmV0dXJuIENvbnRpbnVlU2VudGluZWx9dmFyIHJlY29yZD10cnlDYXRjaChtZXRob2QsZGVsZWdhdGUuaXRlcmF0b3IsY29udGV4dC5hcmcpO2lmKCJ0aHJvdyI9PT1yZWNvcmQudHlwZSlyZXR1cm4gY29udGV4dC5tZXRob2Q9InRocm93Iixjb250ZXh0LmFyZz1yZWNvcmQuYXJnLGNvbnRleHQuZGVsZWdhdGU9bnVsbCxDb250aW51ZVNlbnRpbmVsO3ZhciBpbmZvPXJlY29yZC5hcmc7cmV0dXJuIGluZm8/aW5mby5kb25lPyhjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdPWluZm8udmFsdWUsY29udGV4dC5uZXh0PWRlbGVnYXRlLm5leHRMb2MsInJldHVybiIhPT1jb250ZXh0Lm1ldGhvZCYmKGNvbnRleHQubWV0aG9kPSJuZXh0Iixjb250ZXh0LmFyZz11bmRlZmluZWQpLGNvbnRleHQuZGVsZWdhdGU9bnVsbCxDb250aW51ZVNlbnRpbmVsKTppbmZvOihjb250ZXh0Lm1ldGhvZD0idGhyb3ciLGNvbnRleHQuYXJnPW5ldyBUeXBlRXJyb3IoIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0IiksY29udGV4dC5kZWxlZ2F0ZT1udWxsLENvbnRpbnVlU2VudGluZWwpfWZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKXt2YXIgZW50cnk9e3RyeUxvYzpsb2NzWzBdfTsxIGluIGxvY3MmJihlbnRyeS5jYXRjaExvYz1sb2NzWzFdKSwyIGluIGxvY3MmJihlbnRyeS5maW5hbGx5TG9jPWxvY3NbMl0sZW50cnkuYWZ0ZXJMb2M9bG9jc1szXSksdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpfWZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpe3ZhciByZWNvcmQ9ZW50cnkuY29tcGxldGlvbnx8e307cmVjb3JkLnR5cGU9Im5vcm1hbCIsZGVsZXRlIHJlY29yZC5hcmcsZW50cnkuY29tcGxldGlvbj1yZWNvcmR9ZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSl7aWYoaXRlcmFibGUpe3ZhciBpdGVyYXRvck1ldGhvZD1pdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07aWYoaXRlcmF0b3JNZXRob2QpcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBpdGVyYWJsZS5uZXh0KXJldHVybiBpdGVyYWJsZTtpZighaXNOYU4oaXRlcmFibGUubGVuZ3RoKSl7dmFyIGk9LTEsbmV4dD1mdW5jdGlvbiBuZXh0KCl7Zm9yKDsrK2k8aXRlcmFibGUubGVuZ3RoOylpZihoYXNPd24uY2FsbChpdGVyYWJsZSxpKSlyZXR1cm4gbmV4dC52YWx1ZT1pdGVyYWJsZVtpXSxuZXh0LmRvbmU9ITEsbmV4dDtyZXR1cm4gbmV4dC52YWx1ZT11bmRlZmluZWQsbmV4dC5kb25lPSEwLG5leHR9O3JldHVybiBuZXh0Lm5leHQ9bmV4dH19cmV0dXJue25leHQ6ZG9uZVJlc3VsdH19ZnVuY3Rpb24gZG9uZVJlc3VsdCgpe3JldHVybnt2YWx1ZTp1bmRlZmluZWQsZG9uZTohMH19fSgib2JqZWN0Ij09dHlwZW9mIGdsb2JhbD9nbG9iYWw6Im9iamVjdCI9PXR5cGVvZiB3aW5kb3c/d2luZG93OiJvYmplY3QiPT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMpfSkuY2FsbCh0aGlzLF9fd2VicGFja19yZXF1aXJlX18oInlMcGoiKSl9LCI4TUVHIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGFGdW5jdGlvbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCIyT2lGIiksaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpLGludm9rZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNZlFOIiksYXJyYXlTbGljZT1bXS5zbGljZSxmYWN0b3JpZXM9e307bW9kdWxlLmV4cG9ydHM9RnVuY3Rpb24uYmluZHx8ZnVuY3Rpb24odGhhdCl7dmFyIGZuPWFGdW5jdGlvbih0aGlzKSxwYXJ0QXJncz1hcnJheVNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGJvdW5kPWZ1bmN0aW9uKCl7dmFyIGFyZ3M9cGFydEFyZ3MuY29uY2F0KGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMpKTtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGJvdW5kP2Z1bmN0aW9uKEYsbGVuLGFyZ3Mpe2lmKCEobGVuIGluIGZhY3Rvcmllcykpe2Zvcih2YXIgbj1bXSxpPTA7aTxsZW47aSsrKW5baV09ImFbIitpKyJdIjtmYWN0b3JpZXNbbGVuXT1GdW5jdGlvbigiRixhIiwicmV0dXJuIG5ldyBGKCIrbi5qb2luKCIsIikrIikiKX1yZXR1cm4gZmFjdG9yaWVzW2xlbl0oRixhcmdzKX0oZm4sYXJncy5sZW5ndGgsYXJncyk6aW52b2tlKGZuLGFyZ3MsdGhhdCl9O3JldHVybiBpc09iamVjdChmbi5wcm90b3R5cGUpJiYoYm91bmQucHJvdG90eXBlPWZuLnByb3RvdHlwZSksYm91bmR9fSwiOGE3ciI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZGVmaW5lUHJvcGVydHk9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpLGNyZWF0ZURlc2M9X193ZWJwYWNrX3JlcXVpcmVfXygiUmpELyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG9iamVjdCxpbmRleCx2YWx1ZSl7aW5kZXggaW4gb2JqZWN0PyRkZWZpbmVQcm9wZXJ0eS5mKG9iamVjdCxpbmRleCxjcmVhdGVEZXNjKDAsdmFsdWUpKTpvYmplY3RbaW5kZXhdPXZhbHVlfX0sIjhnSHoiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1SzdaIiksYUZ1bmN0aW9uPV9fd2VicGFja19yZXF1aXJlX18oImVhb2giKSxTUEVDSUVTPV9fd2VicGFja19yZXF1aXJlX18oIlVXaVgiKSgic3BlY2llcyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKE8sRCl7dmFyIFMsQz1hbk9iamVjdChPKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09Q3x8bnVsbD09KFM9YW5PYmplY3QoQylbU1BFQ0lFU10pP0Q6YUZ1bmN0aW9uKFMpfX0sIjhtQkQiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJwdCIse21vbnRoczoiSmFuZWlyb19GZXZlcmVpcm9fTWFyw6dvX0FicmlsX01haW9fSnVuaG9fSnVsaG9fQWdvc3RvX1NldGVtYnJvX091dHVicm9fTm92ZW1icm9fRGV6ZW1icm8iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZXZfTWFyX0Ficl9NYWlfSnVuX0p1bF9BZ29fU2V0X091dF9Ob3ZfRGV6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEb21pbmdvX1NlZ3VuZGEtZmVpcmFfVGVyw6dhLWZlaXJhX1F1YXJ0YS1mZWlyYV9RdWludGEtZmVpcmFfU2V4dGEtZmVpcmFfU8OhYmFkbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJEb21fU2VnX1Rlcl9RdWFfUXVpX1NleF9Tw6FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEb18ywqpfM8KqXzTCql81wqpfNsKqX1PDoSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgW2RlXSBNTU1NIFtkZV0gWVlZWSIsTExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgW2RlXSBNTU1NIFtkZV0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSG9qZSDDoHNdIExUIixuZXh0RGF5OiJbQW1hbmjDoyDDoHNdIExUIixuZXh0V2VlazoiZGRkZCBbw6BzXSBMVCIsbGFzdERheToiW09udGVtIMOgc10gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmRheSgpfHw2PT09dGhpcy5kYXkoKT8iW8OabHRpbW9dIGRkZGQgW8Ogc10gTFQiOiJbw5psdGltYV0gZGRkZCBbw6BzXSBMVCJ9LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImVtICVzIixwYXN0OiJow6EgJXMiLHM6InNlZ3VuZG9zIixzczoiJWQgc2VndW5kb3MiLG06InVtIG1pbnV0byIsbW06IiVkIG1pbnV0b3MiLGg6InVtYSBob3JhIixoaDoiJWQgaG9yYXMiLGQ6InVtIGRpYSIsZGQ6IiVkIGRpYXMiLE06InVtIG3DqnMiLE1NOiIlZCBtZXNlcyIseToidW0gYW5vIix5eToiJWQgYW5vcyJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn3Cui8sb3JkaW5hbDoiJWTCuiIsd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCI4b3hCIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7dmFyIGNhY2hlZFNldFRpbWVvdXQsY2FjaGVkQ2xlYXJUaW1lb3V0LHByb2Nlc3M9bW9kdWxlLmV4cG9ydHM9e307ZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpe3Rocm93IG5ldyBFcnJvcigic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpfWZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQoKXt0aHJvdyBuZXcgRXJyb3IoImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpfWZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKXtpZihjYWNoZWRTZXRUaW1lb3V0PT09c2V0VGltZW91dClyZXR1cm4gc2V0VGltZW91dChmdW4sMCk7aWYoKGNhY2hlZFNldFRpbWVvdXQ9PT1kZWZhdWx0U2V0VGltb3V0fHwhY2FjaGVkU2V0VGltZW91dCkmJnNldFRpbWVvdXQpcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQ9c2V0VGltZW91dCxzZXRUaW1lb3V0KGZ1biwwKTt0cnl7cmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLDApfWNhdGNoKGUpe3RyeXtyZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsZnVuLDApfWNhdGNoKGUpe3JldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcyxmdW4sMCl9fX0hZnVuY3Rpb24oKXt0cnl7Y2FjaGVkU2V0VGltZW91dD0iZnVuY3Rpb24iPT10eXBlb2Ygc2V0VGltZW91dD9zZXRUaW1lb3V0OmRlZmF1bHRTZXRUaW1vdXR9Y2F0Y2goZSl7Y2FjaGVkU2V0VGltZW91dD1kZWZhdWx0U2V0VGltb3V0fXRyeXtjYWNoZWRDbGVhclRpbWVvdXQ9ImZ1bmN0aW9uIj09dHlwZW9mIGNsZWFyVGltZW91dD9jbGVhclRpbWVvdXQ6ZGVmYXVsdENsZWFyVGltZW91dH1jYXRjaChlKXtjYWNoZWRDbGVhclRpbWVvdXQ9ZGVmYXVsdENsZWFyVGltZW91dH19KCk7dmFyIGN1cnJlbnRRdWV1ZSxxdWV1ZT1bXSxkcmFpbmluZz0hMSxxdWV1ZUluZGV4PS0xO2Z1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpe2RyYWluaW5nJiZjdXJyZW50UXVldWUmJihkcmFpbmluZz0hMSxjdXJyZW50UXVldWUubGVuZ3RoP3F1ZXVlPWN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpOnF1ZXVlSW5kZXg9LTEscXVldWUubGVuZ3RoJiZkcmFpblF1ZXVlKCkpfWZ1bmN0aW9uIGRyYWluUXVldWUoKXtpZighZHJhaW5pbmcpe3ZhciB0aW1lb3V0PXJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtkcmFpbmluZz0hMDtmb3IodmFyIGxlbj1xdWV1ZS5sZW5ndGg7bGVuOyl7Zm9yKGN1cnJlbnRRdWV1ZT1xdWV1ZSxxdWV1ZT1bXTsrK3F1ZXVlSW5kZXg8bGVuOyljdXJyZW50UXVldWUmJmN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtxdWV1ZUluZGV4PS0xLGxlbj1xdWV1ZS5sZW5ndGh9Y3VycmVudFF1ZXVlPW51bGwsZHJhaW5pbmc9ITEsZnVuY3Rpb24obWFya2VyKXtpZihjYWNoZWRDbGVhclRpbWVvdXQ9PT1jbGVhclRpbWVvdXQpcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO2lmKChjYWNoZWRDbGVhclRpbWVvdXQ9PT1kZWZhdWx0Q2xlYXJUaW1lb3V0fHwhY2FjaGVkQ2xlYXJUaW1lb3V0KSYmY2xlYXJUaW1lb3V0KXJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQ9Y2xlYXJUaW1lb3V0LGNsZWFyVGltZW91dChtYXJrZXIpO3RyeXtjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKX1jYXRjaChlKXt0cnl7cmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsbWFya2VyKX1jYXRjaChlKXtyZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcyxtYXJrZXIpfX19KHRpbWVvdXQpfX1mdW5jdGlvbiBJdGVtKGZ1bixhcnJheSl7dGhpcy5mdW49ZnVuLHRoaXMuYXJyYXk9YXJyYXl9ZnVuY3Rpb24gbm9vcCgpe31wcm9jZXNzLm5leHRUaWNrPWZ1bmN0aW9uKGZ1bil7dmFyIGFyZ3M9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoMTxhcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspYXJnc1tpLTFdPWFyZ3VtZW50c1tpXTtxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1bixhcmdzKSksMSE9PXF1ZXVlLmxlbmd0aHx8ZHJhaW5pbmd8fHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSl9LEl0ZW0ucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LHByb2Nlc3MudGl0bGU9ImJyb3dzZXIiLHByb2Nlc3MuYnJvd3Nlcj0hMCxwcm9jZXNzLmVudj17fSxwcm9jZXNzLmFyZ3Y9W10scHJvY2Vzcy52ZXJzaW9uPSIiLHByb2Nlc3MudmVyc2lvbnM9e30scHJvY2Vzcy5vbj1ub29wLHByb2Nlc3MuYWRkTGlzdGVuZXI9bm9vcCxwcm9jZXNzLm9uY2U9bm9vcCxwcm9jZXNzLm9mZj1ub29wLHByb2Nlc3MucmVtb3ZlTGlzdGVuZXI9bm9vcCxwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycz1ub29wLHByb2Nlc3MuZW1pdD1ub29wLHByb2Nlc3MucHJlcGVuZExpc3RlbmVyPW5vb3AscHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyPW5vb3AscHJvY2Vzcy5saXN0ZW5lcnM9ZnVuY3Rpb24obmFtZSl7cmV0dXJuW119LHByb2Nlc3MuYmluZGluZz1mdW5jdGlvbihuYW1lKXt0aHJvdyBuZXcgRXJyb3IoInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkIil9LHByb2Nlc3MuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuIi8ifSxwcm9jZXNzLmNoZGlyPWZ1bmN0aW9uKGRpcil7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX0scHJvY2Vzcy51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sIjkxR1AiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYsIk9iamVjdCIse2Fzc2lnbjpfX3dlYnBhY2tfcmVxdWlyZV9fKCJjek5LIil9KX0sIjkzSTQiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBpdD9udWxsIT09aXQ6ImZ1bmN0aW9uIj09dHlwZW9mIGl0fX0sIjlBQW4iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgc3Ryb25nPV9fd2VicGFja19yZXF1aXJlX18oIndtdkciKSx2YWxpZGF0ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJzNXFZIik7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiNExpRCIpKCJNYXAiLGZ1bmN0aW9uKGdldCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGdldCh0aGlzLDA8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHtnZXQ6ZnVuY3Rpb24oa2V5KXt2YXIgZW50cnk9c3Ryb25nLmdldEVudHJ5KHZhbGlkYXRlKHRoaXMsIk1hcCIpLGtleSk7cmV0dXJuIGVudHJ5JiZlbnRyeS52fSxzZXQ6ZnVuY3Rpb24oa2V5LHZhbHVlKXtyZXR1cm4gc3Ryb25nLmRlZih2YWxpZGF0ZSh0aGlzLCJNYXAiKSwwPT09a2V5PzA6a2V5LHZhbHVlKX19LHN0cm9uZywhMCl9LCI5UDkzIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGltdWw9TWF0aC5pbXVsOyRleHBvcnQoJGV4cG9ydC5TKyRleHBvcnQuRipfX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIikoZnVuY3Rpb24oKXtyZXR1cm4tNSE9JGltdWwoNDI5NDk2NzI5NSw1KXx8MiE9JGltdWwubGVuZ3RofSksIk1hdGgiLHtpbXVsOmZ1bmN0aW9uKHgseSl7dmFyIHhuPSt4LHluPSt5LHhsPTY1NTM1JnhuLHlsPTY1NTM1JnluO3JldHVybiAwfHhsKnlsKygoNjU1MzUmeG4+Pj4xNikqeWwreGwqKDY1NTM1JnluPj4+MTYpPDwxNj4+PjApfX0pfSwiOVZtRiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSx0b0xlbmd0aD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJuZThpIiksY29udGV4dD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwc2grIiksJHN0YXJ0c1dpdGg9IiIuc3RhcnRzV2l0aDskZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqX193ZWJwYWNrX3JlcXVpcmVfXygiVVVlVyIpKCJzdGFydHNXaXRoIiksIlN0cmluZyIse3N0YXJ0c1dpdGg6ZnVuY3Rpb24oc2VhcmNoU3RyaW5nKXt2YXIgdGhhdD1jb250ZXh0KHRoaXMsc2VhcmNoU3RyaW5nLCJzdGFydHNXaXRoIiksaW5kZXg9dG9MZW5ndGgoTWF0aC5taW4oMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDAsdGhhdC5sZW5ndGgpKSxzZWFyY2g9U3RyaW5nKHNlYXJjaFN0cmluZyk7cmV0dXJuICRzdGFydHNXaXRoPyRzdGFydHNXaXRoLmNhbGwodGhhdCxzZWFyY2gsaW5kZXgpOnRoYXQuc2xpY2UoaW5kZXgsaW5kZXgrc2VhcmNoLmxlbmd0aCk9PT1zZWFyY2h9fSl9LCI5WFpyIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLCRwYWQ9X193ZWJwYWNrX3JlcXVpcmVfXygiTGdqdiIpLHVzZXJBZ2VudD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJvbDh4IiksV0VCS0lUX0JVRz0vVmVyc2lvblwvMTBcLlxkKyhcLlxkKyk/KCBNb2JpbGVcL1x3Kyk/IFNhZmFyaVwvLy50ZXN0KHVzZXJBZ2VudCk7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKldFQktJVF9CVUcsIlN0cmluZyIse3BhZFN0YXJ0OmZ1bmN0aW9uKG1heExlbmd0aCl7cmV0dXJuICRwYWQodGhpcyxtYXhMZW5ndGgsMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDAsITApfX0pfSwiOWdYNyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0LENvbnN0cnVjdG9yLG5hbWUsZm9yYmlkZGVuRmllbGQpe2lmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcil8fHZvaWQgMCE9PWZvcmJpZGRlbkZpZWxkJiZmb3JiaWRkZW5GaWVsZCBpbiBpdCl0aHJvdyBUeXBlRXJyb3IobmFtZSsiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEiKTtyZXR1cm4gaXR9fSwiOXJNayI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJSZWZsZWN0Iix7aGFzOmZ1bmN0aW9uKHRhcmdldCxwcm9wZXJ0eUtleSl7cmV0dXJuIHByb3BlcnR5S2V5IGluIHRhcmdldH19KX0sIjlyUmkiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJnZCIse21vbnRoczpbIkFtIEZhb2lsbGVhY2giLCJBbiBHZWFycmFuIiwiQW0gTcOgcnQiLCJBbiBHaWJsZWFuIiwiQW4gQ8OoaXRlYW4iLCJBbiB0LcOSZ21oaW9zIiwiQW4gdC1JdWNoYXIiLCJBbiBMw7luYXN0YWwiLCJBbiB0LVN1bHRhaW4iLCJBbiBEw6BtaGFpciIsIkFuIHQtU2FtaGFpbiIsIkFuIETDuWJobGFjaGQiXSxtb250aHNTaG9ydDpbIkZhb2kiLCJHZWFyIiwiTcOgcnQiLCJHaWJsIiwiQ8OoaXQiLCLDkmdtaCIsIkl1Y2giLCJMw7luIiwiU3VsdCIsIkTDoG1oIiwiU2FtaCIsIkTDuWJoIl0sbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czpbIkRpZMOybWhuYWljaCIsIkRpbHVhaW4iLCJEaW3DoGlydCIsIkRpY2lhZGFpbiIsIkRpYXJkYW9pbiIsIkRpaGFvaW5lIiwiRGlzYXRoYWlybmUiXSx3ZWVrZGF5c1Nob3J0OlsiRGlkIiwiRGlsIiwiRGltIiwiRGljIiwiRGlhIiwiRGloIiwiRGlzIl0sd2Vla2RheXNNaW46WyJEw7IiLCJMdSIsIk3DoCIsIkNpIiwiQXIiLCJIYSIsIlNhIl0sbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbQW4tZGl1Z2ggYWlnXSBMVCIsbmV4dERheToiW0EtbcOgaXJlYWNoIGFpZ10gTFQiLG5leHRXZWVrOiJkZGRkIFthaWddIExUIixsYXN0RGF5OiJbQW4tZMOoIGFpZ10gTFQiLGxhc3RXZWVrOiJkZGRkIFtzZW8gY2hhaWRoXSBbYWlnXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiYW5uIGFuICVzIixwYXN0OiJiaG8gY2hpb25uICVzIixzOiJiZWFnYW4gZGlvZ2FuIixzczoiJWQgZGlvZ2FuIixtOiJtaW9uYWlkIixtbToiJWQgbWlvbmFpZGVhbiIsaDoidWFpciIsaGg6IiVkIHVhaXJlYW4iLGQ6ImxhdGhhIixkZDoiJWQgbGF0aGEiLE06Im3DrG9zIixNTToiJWQgbcOsb3NhbiIseToiYmxpYWRobmEiLHl5OiIlZCBibGlhZGhuYSJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0oZHxuYXxtaCkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXt2YXIgb3V0cHV0PTE9PT1udW1iZXI/ImQiOm51bWJlciUxMD09Mj8ibmEiOiJtaCI7cmV0dXJuIG51bWJlcitvdXRwdXR9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiOXJTUSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciB1dGlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ4VEorIik7ZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCl7dGhpcy5oYW5kbGVycz1bXX1JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZT1mdW5jdGlvbihmdWxmaWxsZWQscmVqZWN0ZWQpe3JldHVybiB0aGlzLmhhbmRsZXJzLnB1c2goe2Z1bGZpbGxlZDpmdWxmaWxsZWQscmVqZWN0ZWQ6cmVqZWN0ZWR9KSx0aGlzLmhhbmRsZXJzLmxlbmd0aC0xfSxJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0PWZ1bmN0aW9uKGlkKXt0aGlzLmhhbmRsZXJzW2lkXSYmKHRoaXMuaGFuZGxlcnNbaWRdPW51bGwpfSxJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZm4pe3V0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycyxmdW5jdGlvbihoKXtudWxsIT09aCYmZm4oaCl9KX0sbW9kdWxlLmV4cG9ydHM9SW50ZXJjZXB0b3JNYW5hZ2VyfSwiQSt4YSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImN2Iix7bW9udGhzOiLQutOR0YDQu9Cw0Ydf0L3QsNGA05HRgV/Qv9GD0Yhf0LDQutCwX9C80LDQuV/Sq9OX0YDRgtC80LVf0YPRgtORX9Kr0YPRgNC70LBf0LDQstOR0L1f0Y7Qv9CwX9GH07PQul/RgNCw0YjRgtCw0LIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItC605HRgF/QvdCw0YBf0L/Rg9GIX9Cw0LrQsF/QvNCw0Llf0qvTl9GAX9GD0YLTkV/Sq9GD0YBf0LDQstC9X9GO0L/QsF/Rh9Oz0Lpf0YDQsNGIIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLQstGL0YDRgdCw0YDQvdC40LrRg9C9X9GC0YPQvdGC0LjQutGD0L1f0YvRgtC70LDRgNC40LrRg9C9X9GO0L3QutGD0L1f0LrTl9Kr0L3QtdGA0L3QuNC60YPQvV/RjdGA0L3QtdC60YPQvV/RiNOR0LzQsNGC0LrRg9C9Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItCy0YvRgF/RgtGD0L1f0YvRgtC7X9GO0L1f0LrTl9KrX9GN0YDQvV/RiNOR0LwiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItCy0YBf0YLQvV/Ri9GCX9GO0L1f0LrSq1/RjdGAX9GI0LwiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQtTU0tWVlZWSIsTEw6IllZWVkgW9Kr0YPQu9GF0LhdIE1NTU0gW9GD0LnTkdGF05fQvV0gRFst0LzTl9GI05ddIixMTEw6IllZWVkgW9Kr0YPQu9GF0LhdIE1NTU0gW9GD0LnTkdGF05fQvV0gRFst0LzTl9GI05ddLCBISDptbSIsTExMTDoiZGRkZCwgWVlZWSBb0qvRg9C70YXQuF0gTU1NTSBb0YPQudOR0YXTl9C9XSBEWy3QvNOX0YjTl10sIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvQn9Cw0Y/QvV0gTFQgW9GB0LXRhdC10YLRgNC1XSIsbmV4dERheToiW9Cr0YDQsNC9XSBMVCBb0YHQtdGF0LXRgtGA0LVdIixsYXN0RGF5OiJb05bQvdC10YBdIExUIFvRgdC10YXQtdGC0YDQtV0iLG5leHRXZWVrOiJb0qrQuNGC0LXRgV0gZGRkZCBMVCBb0YHQtdGF0LXRgtGA0LVdIixsYXN0V2VlazoiW9CY0YDRgtC905ddIGRkZGQgTFQgW9GB0LXRhdC10YLRgNC1XSIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZTpmdW5jdGlvbihvdXRwdXQpe3ZhciBhZmZpeD0v0YHQtdGF0LXRgiQvaS5leGVjKG91dHB1dCk/ItGA0LXQvSI6L9Kr0YPQuyQvaS5leGVjKG91dHB1dCk/ItGC0LDQvSI6ItGA0LDQvSI7cmV0dXJuIG91dHB1dCthZmZpeH0scGFzdDoiJXMg0LrQsNGP0LvQu9CwIixzOiLQv9OX0YAt0LjQuiDSq9C10LrQutGD0L3RgiIsc3M6IiVkINKr0LXQutC60YPQvdGCIixtOiLQv9OX0YAg0LzQuNC90YPRgiIsbW06IiVkINC80LjQvdGD0YIiLGg6ItC/05fRgCDRgdC10YXQtdGCIixoaDoiJWQg0YHQtdGF0LXRgiIsZDoi0L/Tl9GAINC60YPQvSIsZGQ6IiVkINC60YPQvSIsTToi0L/Tl9GAINGD0LnTkdGFIixNTToiJWQg0YPQudOR0YUiLHk6ItC/05fRgCDSq9GD0LsiLHl5OiIlZCDSq9GD0LsifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9LdC805fRiC8sb3JkaW5hbDoiJWQt0LzTl9GIIix3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sQTJ6VzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLHRvSW50ZWdlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJSWWk3IiksYU51bWJlclZhbHVlPV9fd2VicGFja19yZXF1aXJlX18oInZ2bU8iKSxyZXBlYXQ9X193ZWJwYWNrX3JlcXVpcmVfXygibDBSbiIpLCR0b0ZpeGVkPTEuLnRvRml4ZWQsZmxvb3I9TWF0aC5mbG9vcixkYXRhPVswLDAsMCwwLDAsMF0sRVJST1I9Ik51bWJlci50b0ZpeGVkOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEiLG11bHRpcGx5PWZ1bmN0aW9uKG4sYyl7Zm9yKHZhciBpPS0xLGMyPWM7KytpPDY7KWMyKz1uKmRhdGFbaV0sZGF0YVtpXT1jMiUxZTcsYzI9Zmxvb3IoYzIvMWU3KX0sZGl2aWRlPWZ1bmN0aW9uKG4pe2Zvcih2YXIgaT02LGM9MDswPD0tLWk7KWMrPWRhdGFbaV0sZGF0YVtpXT1mbG9vcihjL24pLGM9YyVuKjFlN30sbnVtVG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIGk9NixzPSIiOzA8PS0taTspaWYoIiIhPT1zfHwwPT09aXx8MCE9PWRhdGFbaV0pe3ZhciB0PVN0cmluZyhkYXRhW2ldKTtzPSIiPT09cz90OnMrcmVwZWF0LmNhbGwoIjAiLDctdC5sZW5ndGgpK3R9cmV0dXJuIHN9LHBvdz1mdW5jdGlvbih4LG4sYWNjKXtyZXR1cm4gMD09PW4/YWNjOm4lMj09MT9wb3coeCxuLTEsYWNjKngpOnBvdyh4Kngsbi8yLGFjYyl9OyRleHBvcnQoJGV4cG9ydC5QKyRleHBvcnQuRiooISEkdG9GaXhlZCYmKCIwLjAwMCIhPT04ZS01LnRvRml4ZWQoMyl8fCIxIiE9PS45LnRvRml4ZWQoMCl8fCIxLjI1IiE9PTEuMjU1LnRvRml4ZWQoMil8fCIxMDAwMDAwMDAwMDAwMDAwMTI4IiE9PSgweGRlMGI2YjNhNzY0MDA4MCkudG9GaXhlZCgwKSl8fCFfX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIikoZnVuY3Rpb24oKXskdG9GaXhlZC5jYWxsKHt9KX0pKSwiTnVtYmVyIix7dG9GaXhlZDpmdW5jdGlvbihmcmFjdGlvbkRpZ2l0cyl7dmFyIGUseixqLGsseD1hTnVtYmVyVmFsdWUodGhpcyxFUlJPUiksZj10b0ludGVnZXIoZnJhY3Rpb25EaWdpdHMpLHM9IiIsbT0iMCI7aWYoZjwwfHwyMDxmKXRocm93IFJhbmdlRXJyb3IoRVJST1IpO2lmKHghPXgpcmV0dXJuIk5hTiI7aWYoeDw9LTFlMjF8fDFlMjE8PXgpcmV0dXJuIFN0cmluZyh4KTtpZih4PDAmJihzPSItIix4PS14KSwxZS0yMTx4KWlmKHo9KGU9ZnVuY3Rpb24oeCl7Zm9yKHZhciBuPTAseDI9eDs0MDk2PD14Mjspbis9MTIseDIvPTQwOTY7Zm9yKDsyPD14Mjspbis9MSx4Mi89MjtyZXR1cm4gbn0oeCpwb3coMiw2OSwxKSktNjkpPDA/eCpwb3coMiwtZSwxKTp4L3BvdygyLGUsMSkseio9NDUwMzU5OTYyNzM3MDQ5NiwwPChlPTUyLWUpKXtmb3IobXVsdGlwbHkoMCx6KSxqPWY7Nzw9ajspbXVsdGlwbHkoMWU3LDApLGotPTc7Zm9yKG11bHRpcGx5KHBvdygxMCxqLDEpLDApLGo9ZS0xOzIzPD1qOylkaXZpZGUoMTw8MjMpLGotPTIzO2RpdmlkZSgxPDxqKSxtdWx0aXBseSgxLDEpLGRpdmlkZSgyKSxtPW51bVRvU3RyaW5nKCl9ZWxzZSBtdWx0aXBseSgwLHopLG11bHRpcGx5KDE8PC1lLDApLG09bnVtVG9TdHJpbmcoKStyZXBlYXQuY2FsbCgiMCIsZik7cmV0dXJuIG09MDxmP3MrKChrPW0ubGVuZ3RoKTw9Zj8iMC4iK3JlcGVhdC5jYWxsKCIwIixmLWspK206bS5zbGljZSgwLGstZikrIi4iK20uc2xpY2Uoay1mKSk6cyttfX0pfSxBNUFOOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgYXQ9X193ZWJwYWNrX3JlcXVpcmVfXygiQXZSRSIpKCEwKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihTLGluZGV4LHVuaWNvZGUpe3JldHVybiBpbmRleCsodW5pY29kZT9hdChTLGluZGV4KS5sZW5ndGg6MSl9fSxBNVhnOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b0lPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiTnNPLyIpLGdPUE49X193ZWJwYWNrX3JlcXVpcmVfXygiYXIvcCIpLmYsdG9TdHJpbmc9e30udG9TdHJpbmcsd2luZG93TmFtZXM9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXTttb2R1bGUuZXhwb3J0cy5mPWZ1bmN0aW9uKGl0KXtyZXR1cm4gd2luZG93TmFtZXMmJiJbb2JqZWN0IFdpbmRvd10iPT10b1N0cmluZy5jYWxsKGl0KT9mdW5jdGlvbihpdCl7dHJ5e3JldHVybiBnT1BOKGl0KX1jYXRjaChlKXtyZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKX19KGl0KTpnT1BOKHRvSU9iamVjdChpdCkpfX0sQVE2ODpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgidXotbGF0biIse21vbnRoczoiWWFudmFyX0ZldnJhbF9NYXJ0X0FwcmVsX01heV9JeXVuX0l5dWxfQXZndXN0X1NlbnRhYnJfT2t0YWJyX05veWFicl9EZWthYnIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Illhbl9GZXZfTWFyX0Fwcl9NYXlfSXl1bl9JeXVsX0F2Z19TZW5fT2t0X05veV9EZWsiLnNwbGl0KCJfIiksd2Vla2RheXM6Illha3NoYW5iYV9EdXNoYW5iYV9TZXNoYW5iYV9DaG9yc2hhbmJhX1BheXNoYW5iYV9KdW1hX1NoYW5iYSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJZYWtfRHVzaF9TZXNoX0Nob3JfUGF5X0p1bV9TaGFuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJZYV9EdV9TZV9DaG9fUGFfSnVfU2hhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiRCBNTU1NIFlZWVksIGRkZGQgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0J1Z3VuIHNvYXRdIExUIFtkYV0iLG5leHREYXk6IltFcnRhZ2FdIExUIFtkYV0iLG5leHRXZWVrOiJkZGRkIFtrdW5pIHNvYXRdIExUIFtkYV0iLGxhc3REYXk6IltLZWNoYSBzb2F0XSBMVCBbZGFdIixsYXN0V2VlazoiW08ndGdhbl0gZGRkZCBba3VuaSBzb2F0XSBMVCBbZGFdIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJZYXFpbiAlcyBpY2hpZGEiLHBhc3Q6IkJpciBuZWNoYSAlcyBvbGRpbiIsczoic29uaXlhIixzczoiJWQgc29uaXlhIixtOiJiaXIgZGFxaXFhIixtbToiJWQgZGFxaXFhIixoOiJiaXIgc29hdCIsaGg6IiVkIHNvYXQiLGQ6ImJpciBrdW4iLGRkOiIlZCBrdW4iLE06ImJpciBveSIsTU06IiVkIG95Iix5OiJiaXIgeWlsIix5eToiJWQgeWlsIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LEFVdm06ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiNVQyWSIpLGhhcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJCK09UIiksREVTQ1JJUFRPUlM9X193ZWJwYWNrX3JlcXVpcmVfXygiam1ESCIpLCRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWTdaQyIpLHJlZGVmaW5lPV9fd2VicGFja19yZXF1aXJlX18oImtUaVciKSxNRVRBPV9fd2VicGFja19yZXF1aXJlX18oIjYvMXMiKS5LRVksJGZhaWxzPV9fd2VicGFja19yZXF1aXJlX18oIktVeFAiKSxzaGFyZWQ9X193ZWJwYWNrX3JlcXVpcmVfXygiMjlzLyIpLHNldFRvU3RyaW5nVGFnPV9fd2VicGFja19yZXF1aXJlX18oIlJmS0IiKSx1aWQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWXFBYyIpLHdrcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJVV2lYIiksd2tzRXh0PV9fd2VicGFja19yZXF1aXJlX18oInpMa0ciKSx3a3NEZWZpbmU9X193ZWJwYWNrX3JlcXVpcmVfXygiWnhnaSIpLGVudW1LZXlzPV9fd2VicGFja19yZXF1aXJlX18oIlIrNysiKSxpc0FycmF5PV9fd2VicGFja19yZXF1aXJlX18oImtBTUgiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1SzdaIiksaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiOTNJNCIpLHRvSU9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJOc08vIiksdG9QcmltaXRpdmU9X193ZWJwYWNrX3JlcXVpcmVfXygiRzhNbyIpLGNyZWF0ZURlc2M9X193ZWJwYWNrX3JlcXVpcmVfXygicnIxaSIpLF9jcmVhdGU9X193ZWJwYWNrX3JlcXVpcmVfXygib1ZtbCIpLGdPUE5FeHQ9X193ZWJwYWNrX3JlcXVpcmVfXygiQTVYZyIpLCRHT1BEPV9fd2VicGFja19yZXF1aXJlX18oInZ3dUwiKSwkRFA9X193ZWJwYWNrX3JlcXVpcmVfXygiMmZhRSIpLCRrZXlzPV9fd2VicGFja19yZXF1aXJlX18oInc2R08iKSxnT1BEPSRHT1BELmYsZFA9JERQLmYsZ09QTj1nT1BORXh0LmYsJFN5bWJvbD1nbG9iYWwuU3ltYm9sLCRKU09OPWdsb2JhbC5KU09OLF9zdHJpbmdpZnk9JEpTT04mJiRKU09OLnN0cmluZ2lmeSxISURERU49d2tzKCJfaGlkZGVuIiksVE9fUFJJTUlUSVZFPXdrcygidG9QcmltaXRpdmUiKSxpc0VudW09e30ucHJvcGVydHlJc0VudW1lcmFibGUsU3ltYm9sUmVnaXN0cnk9c2hhcmVkKCJzeW1ib2wtcmVnaXN0cnkiKSxBbGxTeW1ib2xzPXNoYXJlZCgic3ltYm9scyIpLE9QU3ltYm9scz1zaGFyZWQoIm9wLXN5bWJvbHMiKSxPYmplY3RQcm90bz1PYmplY3QucHJvdG90eXBlLFVTRV9OQVRJVkU9ImZ1bmN0aW9uIj09dHlwZW9mICRTeW1ib2wsUU9iamVjdD1nbG9iYWwuUU9iamVjdCxzZXR0ZXI9IVFPYmplY3R8fCFRT2JqZWN0LnByb3RvdHlwZXx8IVFPYmplY3QucHJvdG90eXBlLmZpbmRDaGlsZCxzZXRTeW1ib2xEZXNjPURFU0NSSVBUT1JTJiYkZmFpbHMoZnVuY3Rpb24oKXtyZXR1cm4gNyE9X2NyZWF0ZShkUCh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiBkUCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihpdCxrZXksRCl7dmFyIHByb3RvRGVzYz1nT1BEKE9iamVjdFByb3RvLGtleSk7cHJvdG9EZXNjJiZkZWxldGUgT2JqZWN0UHJvdG9ba2V5XSxkUChpdCxrZXksRCkscHJvdG9EZXNjJiZpdCE9PU9iamVjdFByb3RvJiZkUChPYmplY3RQcm90byxrZXkscHJvdG9EZXNjKX06ZFAsd3JhcD1mdW5jdGlvbih0YWcpe3ZhciBzeW09QWxsU3ltYm9sc1t0YWddPV9jcmVhdGUoJFN5bWJvbC5wcm90b3R5cGUpO3JldHVybiBzeW0uX2s9dGFnLHN5bX0saXNTeW1ib2w9VVNFX05BVElWRSYmInN5bWJvbCI9PXR5cGVvZiAkU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGl0KXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGl0fTpmdW5jdGlvbihpdCl7cmV0dXJuIGl0IGluc3RhbmNlb2YgJFN5bWJvbH0sJGRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGl0LGtleSxEKXtyZXR1cm4gaXQ9PT1PYmplY3RQcm90byYmJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scyxrZXksRCksYW5PYmplY3QoaXQpLGtleT10b1ByaW1pdGl2ZShrZXksITApLGFuT2JqZWN0KEQpLGhhcyhBbGxTeW1ib2xzLGtleSk/KEQuZW51bWVyYWJsZT8oaGFzKGl0LEhJRERFTikmJml0W0hJRERFTl1ba2V5XSYmKGl0W0hJRERFTl1ba2V5XT0hMSksRD1fY3JlYXRlKEQse2VudW1lcmFibGU6Y3JlYXRlRGVzYygwLCExKX0pKTooaGFzKGl0LEhJRERFTil8fGRQKGl0LEhJRERFTixjcmVhdGVEZXNjKDEse30pKSxpdFtISURERU5dW2tleV09ITApLHNldFN5bWJvbERlc2MoaXQsa2V5LEQpKTpkUChpdCxrZXksRCl9LCRkZWZpbmVQcm9wZXJ0aWVzPWZ1bmN0aW9uKGl0LFApe2FuT2JqZWN0KGl0KTtmb3IodmFyIGtleSxrZXlzPWVudW1LZXlzKFA9dG9JT2JqZWN0KFApKSxpPTAsbD1rZXlzLmxlbmd0aDtpPGw7KSRkZWZpbmVQcm9wZXJ0eShpdCxrZXk9a2V5c1tpKytdLFBba2V5XSk7cmV0dXJuIGl0fSwkcHJvcGVydHlJc0VudW1lcmFibGU9ZnVuY3Rpb24oa2V5KXt2YXIgRT1pc0VudW0uY2FsbCh0aGlzLGtleT10b1ByaW1pdGl2ZShrZXksITApKTtyZXR1cm4hKHRoaXM9PT1PYmplY3RQcm90byYmaGFzKEFsbFN5bWJvbHMsa2V5KSYmIWhhcyhPUFN5bWJvbHMsa2V5KSkmJighKEV8fCFoYXModGhpcyxrZXkpfHwhaGFzKEFsbFN5bWJvbHMsa2V5KXx8aGFzKHRoaXMsSElEREVOKSYmdGhpc1tISURERU5dW2tleV0pfHxFKX0sJGdldE93blByb3BlcnR5RGVzY3JpcHRvcj1mdW5jdGlvbihpdCxrZXkpe2lmKGl0PXRvSU9iamVjdChpdCksa2V5PXRvUHJpbWl0aXZlKGtleSwhMCksaXQhPT1PYmplY3RQcm90b3x8IWhhcyhBbGxTeW1ib2xzLGtleSl8fGhhcyhPUFN5bWJvbHMsa2V5KSl7dmFyIEQ9Z09QRChpdCxrZXkpO3JldHVybiFEfHwhaGFzKEFsbFN5bWJvbHMsa2V5KXx8aGFzKGl0LEhJRERFTikmJml0W0hJRERFTl1ba2V5XXx8KEQuZW51bWVyYWJsZT0hMCksRH19LCRnZXRPd25Qcm9wZXJ0eU5hbWVzPWZ1bmN0aW9uKGl0KXtmb3IodmFyIGtleSxuYW1lcz1nT1BOKHRvSU9iamVjdChpdCkpLHJlc3VsdD1bXSxpPTA7bmFtZXMubGVuZ3RoPmk7KWhhcyhBbGxTeW1ib2xzLGtleT1uYW1lc1tpKytdKXx8a2V5PT1ISURERU58fGtleT09TUVUQXx8cmVzdWx0LnB1c2goa2V5KTtyZXR1cm4gcmVzdWx0fSwkZ2V0T3duUHJvcGVydHlTeW1ib2xzPWZ1bmN0aW9uKGl0KXtmb3IodmFyIGtleSxJU19PUD1pdD09PU9iamVjdFByb3RvLG5hbWVzPWdPUE4oSVNfT1A/T1BTeW1ib2xzOnRvSU9iamVjdChpdCkpLHJlc3VsdD1bXSxpPTA7bmFtZXMubGVuZ3RoPmk7KSFoYXMoQWxsU3ltYm9scyxrZXk9bmFtZXNbaSsrXSl8fElTX09QJiYhaGFzKE9iamVjdFByb3RvLGtleSl8fHJlc3VsdC5wdXNoKEFsbFN5bWJvbHNba2V5XSk7cmV0dXJuIHJlc3VsdH07VVNFX05BVElWRXx8KHJlZGVmaW5lKCgkU3ltYm9sPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mICRTeW1ib2wpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhIik7dmFyIHRhZz11aWQoMDxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1swXTp2b2lkIDApLCRzZXQ9ZnVuY3Rpb24odmFsdWUpe3RoaXM9PT1PYmplY3RQcm90byYmJHNldC5jYWxsKE9QU3ltYm9scyx2YWx1ZSksaGFzKHRoaXMsSElEREVOKSYmaGFzKHRoaXNbSElEREVOXSx0YWcpJiYodGhpc1tISURERU5dW3RhZ109ITEpLHNldFN5bWJvbERlc2ModGhpcyx0YWcsY3JlYXRlRGVzYygxLHZhbHVlKSl9O3JldHVybiBERVNDUklQVE9SUyYmc2V0dGVyJiZzZXRTeW1ib2xEZXNjKE9iamVjdFByb3RvLHRhZyx7Y29uZmlndXJhYmxlOiEwLHNldDokc2V0fSksd3JhcCh0YWcpfSkucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLCRHT1BELmY9JGdldE93blByb3BlcnR5RGVzY3JpcHRvciwkRFAuZj0kZGVmaW5lUHJvcGVydHksX193ZWJwYWNrX3JlcXVpcmVfXygiYXIvcCIpLmY9Z09QTkV4dC5mPSRnZXRPd25Qcm9wZXJ0eU5hbWVzLF9fd2VicGFja19yZXF1aXJlX18oIk5WMGsiKS5mPSRwcm9wZXJ0eUlzRW51bWVyYWJsZSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJtcWxGIikuZj0kZ2V0T3duUHJvcGVydHlTeW1ib2xzLERFU0NSSVBUT1JTJiYhX193ZWJwYWNrX3JlcXVpcmVfXygidU9QUyIpJiZyZWRlZmluZShPYmplY3RQcm90bywicHJvcGVydHlJc0VudW1lcmFibGUiLCRwcm9wZXJ0eUlzRW51bWVyYWJsZSwhMCksd2tzRXh0LmY9ZnVuY3Rpb24obmFtZSl7cmV0dXJuIHdyYXAod2tzKG5hbWUpKX0pLCRleHBvcnQoJGV4cG9ydC5HKyRleHBvcnQuVyskZXhwb3J0LkYqIVVTRV9OQVRJVkUse1N5bWJvbDokU3ltYm9sfSk7Zm9yKHZhciBlczZTeW1ib2xzPSJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxqPTA7ZXM2U3ltYm9scy5sZW5ndGg+ajspd2tzKGVzNlN5bWJvbHNbaisrXSk7Zm9yKHZhciB3ZWxsS25vd25TeW1ib2xzPSRrZXlzKHdrcy5zdG9yZSksaz0wO3dlbGxLbm93blN5bWJvbHMubGVuZ3RoPms7KXdrc0RlZmluZSh3ZWxsS25vd25TeW1ib2xzW2srK10pOyRleHBvcnQoJGV4cG9ydC5TKyRleHBvcnQuRiohVVNFX05BVElWRSwiU3ltYm9sIix7Zm9yOmZ1bmN0aW9uKGtleSl7cmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSxrZXkrPSIiKT9TeW1ib2xSZWdpc3RyeVtrZXldOlN5bWJvbFJlZ2lzdHJ5W2tleV09JFN5bWJvbChrZXkpfSxrZXlGb3I6ZnVuY3Rpb24oc3ltKXtpZighaXNTeW1ib2woc3ltKSl0aHJvdyBUeXBlRXJyb3Ioc3ltKyIgaXMgbm90IGEgc3ltYm9sISIpO2Zvcih2YXIga2V5IGluIFN5bWJvbFJlZ2lzdHJ5KWlmKFN5bWJvbFJlZ2lzdHJ5W2tleV09PT1zeW0pcmV0dXJuIGtleX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7c2V0dGVyPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtzZXR0ZXI9ITF9fSksJGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKiFVU0VfTkFUSVZFLCJPYmplY3QiLHtjcmVhdGU6ZnVuY3Rpb24oaXQsUCl7cmV0dXJuIHZvaWQgMD09PVA/X2NyZWF0ZShpdCk6JGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksUCl9LGRlZmluZVByb3BlcnR5OiRkZWZpbmVQcm9wZXJ0eSxkZWZpbmVQcm9wZXJ0aWVzOiRkZWZpbmVQcm9wZXJ0aWVzLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjokZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLGdldE93blByb3BlcnR5TmFtZXM6JGdldE93blByb3BlcnR5TmFtZXMsZ2V0T3duUHJvcGVydHlTeW1ib2xzOiRnZXRPd25Qcm9wZXJ0eVN5bWJvbHN9KSwkSlNPTiYmJGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKighVVNFX05BVElWRXx8JGZhaWxzKGZ1bmN0aW9uKCl7dmFyIFM9JFN5bWJvbCgpO3JldHVybiJbbnVsbF0iIT1fc3RyaW5naWZ5KFtTXSl8fCJ7fSIhPV9zdHJpbmdpZnkoe2E6U30pfHwie30iIT1fc3RyaW5naWZ5KE9iamVjdChTKSl9KSksIkpTT04iLHtzdHJpbmdpZnk6ZnVuY3Rpb24oaXQpe2Zvcih2YXIgcmVwbGFjZXIsJHJlcGxhY2VyLGFyZ3M9W2l0XSxpPTE7YXJndW1lbnRzLmxlbmd0aD5pOylhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO2lmKCRyZXBsYWNlcj1yZXBsYWNlcj1hcmdzWzFdLChpc09iamVjdChyZXBsYWNlcil8fHZvaWQgMCE9PWl0KSYmIWlzU3ltYm9sKGl0KSlyZXR1cm4gaXNBcnJheShyZXBsYWNlcil8fChyZXBsYWNlcj1mdW5jdGlvbihrZXksdmFsdWUpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiAkcmVwbGFjZXImJih2YWx1ZT0kcmVwbGFjZXIuY2FsbCh0aGlzLGtleSx2YWx1ZSkpLCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlfSksYXJnc1sxXT1yZXBsYWNlcixfc3RyaW5naWZ5LmFwcGx5KCRKU09OLGFyZ3MpfX0pLCRTeW1ib2wucHJvdG90eXBlW1RPX1BSSU1JVElWRV18fF9fd2VicGFja19yZXF1aXJlX18oIk5lZ00iKSgkU3ltYm9sLnByb3RvdHlwZSxUT19QUklNSVRJVkUsJFN5bWJvbC5wcm90b3R5cGUudmFsdWVPZiksc2V0VG9TdHJpbmdUYWcoJFN5bWJvbCwiU3ltYm9sIiksc2V0VG9TdHJpbmdUYWcoTWF0aCwiTWF0aCIsITApLHNldFRvU3RyaW5nVGFnKGdsb2JhbC5KU09OLCJKU09OIiwhMCl9LEFmbno6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBMSUJSQVJZPV9fd2VicGFja19yZXF1aXJlX18oIkxRQWMiKSwkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxyZWRlZmluZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLcm9KIiksaGlkZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNdWtiIiksSXRlcmF0b3JzPV9fd2VicGFja19yZXF1aXJlX18oImhQSVEiKSwkaXRlckNyZWF0ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJRYURiIiksc2V0VG9TdHJpbmdUYWc9X193ZWJwYWNrX3JlcXVpcmVfXygiZnlEcSIpLGdldFByb3RvdHlwZU9mPV9fd2VicGFja19yZXF1aXJlX18oIk9QM1kiKSxJVEVSQVRPUj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIikoIml0ZXJhdG9yIiksQlVHR1k9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSkscmV0dXJuVGhpcz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihCYXNlLE5BTUUsQ29uc3RydWN0b3IsbmV4dCxERUZBVUxULElTX1NFVCxGT1JDRUQpeyRpdGVyQ3JlYXRlKENvbnN0cnVjdG9yLE5BTUUsbmV4dCk7dmFyIG1ldGhvZHMsa2V5LEl0ZXJhdG9yUHJvdG90eXBlLGdldE1ldGhvZD1mdW5jdGlvbihraW5kKXtpZighQlVHR1kmJmtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdO3N3aXRjaChraW5kKXtjYXNlImtleXMiOmNhc2UidmFsdWVzIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsa2luZCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcyxraW5kKX19LFRBRz1OQU1FKyIgSXRlcmF0b3IiLERFRl9WQUxVRVM9InZhbHVlcyI9PURFRkFVTFQsVkFMVUVTX0JVRz0hMSxwcm90bz1CYXNlLnByb3RvdHlwZSwkbmF0aXZlPXByb3RvW0lURVJBVE9SXXx8cHJvdG9bIkBAaXRlcmF0b3IiXXx8REVGQVVMVCYmcHJvdG9bREVGQVVMVF0sJGRlZmF1bHQ9JG5hdGl2ZXx8Z2V0TWV0aG9kKERFRkFVTFQpLCRlbnRyaWVzPURFRkFVTFQ/REVGX1ZBTFVFUz9nZXRNZXRob2QoImVudHJpZXMiKTokZGVmYXVsdDp2b2lkIDAsJGFueU5hdGl2ZT0iQXJyYXkiPT1OQU1FJiZwcm90by5lbnRyaWVzfHwkbmF0aXZlO2lmKCRhbnlOYXRpdmUmJihJdGVyYXRvclByb3RvdHlwZT1nZXRQcm90b3R5cGVPZigkYW55TmF0aXZlLmNhbGwobmV3IEJhc2UpKSkhPT1PYmplY3QucHJvdG90eXBlJiZJdGVyYXRvclByb3RvdHlwZS5uZXh0JiYoc2V0VG9TdHJpbmdUYWcoSXRlcmF0b3JQcm90b3R5cGUsVEFHLCEwKSxMSUJSQVJZfHwiZnVuY3Rpb24iPT10eXBlb2YgSXRlcmF0b3JQcm90b3R5cGVbSVRFUkFUT1JdfHxoaWRlKEl0ZXJhdG9yUHJvdG90eXBlLElURVJBVE9SLHJldHVyblRoaXMpKSxERUZfVkFMVUVTJiYkbmF0aXZlJiYidmFsdWVzIiE9PSRuYXRpdmUubmFtZSYmKFZBTFVFU19CVUc9ITAsJGRlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gJG5hdGl2ZS5jYWxsKHRoaXMpfSksTElCUkFSWSYmIUZPUkNFRHx8IUJVR0dZJiYhVkFMVUVTX0JVRyYmcHJvdG9bSVRFUkFUT1JdfHxoaWRlKHByb3RvLElURVJBVE9SLCRkZWZhdWx0KSxJdGVyYXRvcnNbTkFNRV09JGRlZmF1bHQsSXRlcmF0b3JzW1RBR109cmV0dXJuVGhpcyxERUZBVUxUKWlmKG1ldGhvZHM9e3ZhbHVlczpERUZfVkFMVUVTPyRkZWZhdWx0OmdldE1ldGhvZCgidmFsdWVzIiksa2V5czpJU19TRVQ/JGRlZmF1bHQ6Z2V0TWV0aG9kKCJrZXlzIiksZW50cmllczokZW50cmllc30sRk9SQ0VEKWZvcihrZXkgaW4gbWV0aG9kcylrZXkgaW4gcHJvdG98fHJlZGVmaW5lKHByb3RvLGtleSxtZXRob2RzW2tleV0pO2Vsc2UgJGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKihCVUdHWXx8VkFMVUVTX0JVRyksTkFNRSxtZXRob2RzKTtyZXR1cm4gbWV0aG9kc319LEFwaFA6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSx0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTL2ovIiksdG9QcmltaXRpdmU9X193ZWJwYWNrX3JlcXVpcmVfXygiYXBtVCIpOyRleHBvcnQoJGV4cG9ydC5QKyRleHBvcnQuRipfX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIikoZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PW5ldyBEYXRlKE5hTikudG9KU09OKCl8fDEhPT1EYXRlLnByb3RvdHlwZS50b0pTT04uY2FsbCh7dG9JU09TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gMX19KX0pLCJEYXRlIix7dG9KU09OOmZ1bmN0aW9uKGtleSl7dmFyIE89dG9PYmplY3QodGhpcykscHY9dG9QcmltaXRpdmUoTyk7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBwdnx8aXNGaW5pdGUocHYpP08udG9JU09TdHJpbmcoKTpudWxsfX0pfSxBdlJFOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiUllpNyIpLGRlZmluZWQ9X193ZWJwYWNrX3JlcXVpcmVfXygidmhQVSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKFRPX1NUUklORyl7cmV0dXJuIGZ1bmN0aW9uKHRoYXQscG9zKXt2YXIgYSxiLHM9U3RyaW5nKGRlZmluZWQodGhhdCkpLGk9dG9JbnRlZ2VyKHBvcyksbD1zLmxlbmd0aDtyZXR1cm4gaTwwfHxsPD1pP1RPX1NUUklORz8iIjp2b2lkIDA6KGE9cy5jaGFyQ29kZUF0KGkpKTw1NTI5Nnx8NTYzMTk8YXx8aSsxPT09bHx8KGI9cy5jaGFyQ29kZUF0KGkrMSkpPDU2MzIwfHw1NzM0MzxiP1RPX1NUUklORz9zLmNoYXJBdChpKTphOlRPX1NUUklORz9zLnNsaWNlKGksaSsyKTpiLTU2MzIwKyhhLTU1Mjk2PDwxMCkrNjU1MzZ9fX0sQXZ2WTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgibWwiLHttb250aHM6IuC0nOC0qOC1geC0teC0sOC0v1/gtKvgtYbgtKzgtY3gtLDgtYHgtLXgtLDgtL9f4LSu4LS+4LW84LSa4LWN4LSa4LWNX+C0j+C0quC1jeC0sOC0v+C1vV/gtK7gtYfgtK/gtY1f4LSc4LWC4LW6X+C0nOC1guC0suC1iF/gtJPgtJfgtLjgtY3gtLHgtY3gtLHgtY1f4LS44LWG4LSq4LWN4LSx4LWN4LSx4LSC4LSs4LW8X+C0kuC0leC1jeC0n+C1i+C0rOC1vF/gtKjgtLXgtILgtKzgtbxf4LSh4LS/4LS44LSC4LSs4LW8Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgtJzgtKjgtYEuX+C0q+C1huC0rOC1jeC0sOC1gS5f4LSu4LS+4LW8Ll/gtI/gtKrgtY3gtLDgtL8uX+C0ruC1h+C0r+C1jV/gtJzgtYLgtbpf4LSc4LWC4LSy4LWILl/gtJPgtJcuX+C0uOC1huC0quC1jeC0seC1jeC0sS5f4LSS4LSV4LWN4LSf4LWLLl/gtKjgtLXgtIIuX+C0oeC0v+C0uOC0gi4iLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoi4LSe4LS+4LSv4LSx4LS+4LS04LWN4LSaX+C0pOC0v+C0meC1jeC0leC0s+C0vuC0tOC1jeC0ml/gtJrgtYrgtLXgtY3gtLXgtL7gtLTgtY3gtJpf4LSs4LWB4LSn4LSo4LS+4LS04LWN4LSaX+C0teC1jeC0r+C0vuC0tOC0vuC0tOC1jeC0ml/gtLXgtYbgtLPgtY3gtLPgtL/gtK/gtL7gtLTgtY3gtJpf4LS24LSo4LS/4LSv4LS+4LS04LWN4LSaIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC0nuC0vuC0r+C1vF/gtKTgtL/gtJngtY3gtJXgtb5f4LSa4LWK4LS14LWN4LS1X+C0rOC1geC0p+C1u1/gtLXgtY3gtK/gtL7gtLTgtIJf4LS14LWG4LSz4LWN4LSz4LS/X+C0tuC0qOC0vyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4LSe4LS+X+C0pOC0v1/gtJrgtYpf4LSs4LWBX+C0teC1jeC0r+C0vl/gtLXgtYZf4LS2Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIC3gtKjgtYEiLExUUzoiQSBoOm1tOnNzIC3gtKjgtYEiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSwgQSBoOm1tIC3gtKjgtYEiLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0gLeC0qOC1gSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4LSH4LSo4LWN4LSo4LWNXSBMVCIsbmV4dERheToiW+C0qOC0vuC0s+C1hl0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+C0h+C0qOC1jeC0qOC0suC1hl0gTFQiLGxhc3RXZWVrOiJb4LSV4LS04LS/4LSe4LWN4LSeXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4LSV4LS04LS/4LSe4LWN4LSe4LWNIixwYXN0OiIlcyDgtK7gtYHgtbvgtKrgtY0iLHM6IuC0heC1veC0qiDgtKjgtL/gtK7gtL/gtLfgtJngtY3gtJngtb4iLHNzOiIlZCDgtLjgtYbgtJXgtY3gtJXgtbvgtKHgtY0iLG06IuC0kuC0sOC1gSDgtK7gtL/gtKjgtL/gtLHgtY3gtLHgtY0iLG1tOiIlZCDgtK7gtL/gtKjgtL/gtLHgtY3gtLHgtY0iLGg6IuC0kuC0sOC1gSDgtK7gtKPgtL/gtJXgtY3gtJXgtYLgtbwiLGhoOiIlZCDgtK7gtKPgtL/gtJXgtY3gtJXgtYLgtbwiLGQ6IuC0kuC0sOC1gSDgtKbgtL/gtLXgtLjgtIIiLGRkOiIlZCDgtKbgtL/gtLXgtLjgtIIiLE06IuC0kuC0sOC1gSDgtK7gtL7gtLjgtIIiLE1NOiIlZCDgtK7gtL7gtLjgtIIiLHk6IuC0kuC0sOC1gSDgtLXgtbzgtLfgtIIiLHl5OiIlZCDgtLXgtbzgtLfgtIIifSxtZXJpZGllbVBhcnNlOi/gtLDgtL7gtKTgtY3gtLDgtL984LSw4LS+4LS14LS/4LSy4LWGfOC0ieC0muC1jeC0miDgtJXgtLTgtL/gtJ7gtY3gtJ7gtY184LS14LWI4LSV4LWB4LSo4LWN4LSo4LWH4LSw4LSCfOC0sOC0vuC0pOC1jeC0sOC0vy9pLG1lcmlkaWVtSG91cjpmdW5jdGlvbihob3VyLG1lcmlkaWVtKXtyZXR1cm4gMTI9PT1ob3VyJiYoaG91cj0wKSwi4LSw4LS+4LSk4LWN4LSw4LS/Ij09PW1lcmlkaWVtJiY0PD1ob3VyfHwi4LSJ4LSa4LWN4LSaIOC0leC0tOC0v+C0nuC1jeC0nuC1jSI9PT1tZXJpZGllbXx8IuC0teC1iOC0leC1geC0qOC1jeC0qOC1h+C0sOC0giI9PT1tZXJpZGllbT9ob3VyKzEyOmhvdXJ9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDQ/IuC0sOC0vuC0pOC1jeC0sOC0vyI6aG91cjwxMj8i4LSw4LS+4LS14LS/4LSy4LWGIjpob3VyPDE3PyLgtIngtJrgtY3gtJog4LSV4LS04LS/4LSe4LWN4LSe4LWNIjpob3VyPDIwPyLgtLXgtYjgtJXgtYHgtKjgtY3gtKjgtYfgtLDgtIIiOiLgtLDgtL7gtKTgtY3gtLDgtL8ifX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiQitPVCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe3ZhciBoYXNPd25Qcm9wZXJ0eT17fS5oYXNPd25Qcm9wZXJ0eTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCxrZXkpe3JldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LGtleSl9fSxCNTVOOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJqYSIse21vbnRoczoi5LiA5pyIX+S6jOaciF/kuInmnIhf5Zub5pyIX+S6lOaciF/lha3mnIhf5LiD5pyIX+WFq+aciF/kuZ3mnIhf5Y2B5pyIX+WNgeS4gOaciF/ljYHkuozmnIgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IjHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLml6Xmm5zml6Vf5pyI5puc5pelX+eBq+abnOaXpV/msLTmm5zml6Vf5pyo5puc5pelX+mHkeabnOaXpV/lnJ/mm5zml6UiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi5pelX+aciF/ngatf5rC0X+acqF/ph5Ff5ZyfIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLml6Vf5pyIX+eBq1/msLRf5pyoX+mHkV/lnJ8iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS9NTS9ERCIsTEw6IllZWVnlubRN5pyIROaXpSIsTExMOiJZWVlZ5bm0TeaciETml6UgSEg6bW0iLExMTEw6IllZWVnlubRN5pyIROaXpSBkZGRkIEhIOm1tIixsOiJZWVlZL01NL0REIixsbDoiWVlZWeW5tE3mnIhE5pelIixsbGw6IllZWVnlubRN5pyIROaXpSBISDptbSIsbGxsbDoiWVlZWeW5tE3mnIhE5pelKGRkZCkgSEg6bW0ifSxtZXJpZGllbVBhcnNlOi/ljYjliY185Y2I5b6ML2ksaXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuIuWNiOW+jCI9PT1pbnB1dH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7cmV0dXJuIGhvdXI8MTI/IuWNiOWJjSI6IuWNiOW+jCJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb5LuK5pelXSBMVCIsbmV4dERheToiW+aYjuaXpV0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKG5vdyl7cmV0dXJuIG5vdy53ZWVrKCk8dGhpcy53ZWVrKCk/IlvmnaXpgLFdZGRkZCBMVCI6ImRkZGQgTFQifSxsYXN0RGF5OiJb5pio5pelXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24obm93KXtyZXR1cm4gdGhpcy53ZWVrKCk8bm93LndlZWsoKT8iW+WFiOmAsV1kZGRkIExUIjoiZGRkZCBMVCJ9LHNhbWVFbHNlOiJMIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfeaXpS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIscGVyaW9kKXtzd2l0Y2gocGVyaW9kKXtjYXNlImQiOmNhc2UiRCI6Y2FzZSJEREQiOnJldHVybiBudW1iZXIrIuaXpSI7ZGVmYXVsdDpyZXR1cm4gbnVtYmVyfX0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz5b6MIixwYXN0OiIlc+WJjSIsczoi5pWw56eSIixzczoiJWTnp5IiLG06IjHliIYiLG1tOiIlZOWIhiIsaDoiMeaZgumWkyIsaGg6IiVk5pmC6ZaTIixkOiIx5pelIixkZDoiJWTml6UiLE06IjHjg7bmnIgiLE1NOiIlZOODtuaciCIseToiMeW5tCIseXk6IiVk5bm0In19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sQkM3QzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtmcm91bmQ6X193ZWJwYWNrX3JlcXVpcmVfXygia2NvUyIpfSl9LEJFdGc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe2Z1bmN0aW9uIGlzQnVmZmVyKG9iail7cmV0dXJuISFvYmouY29uc3RydWN0b3ImJiJmdW5jdGlvbiI9PXR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXImJm9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopfQovKiEKICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlcgogKgogKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPgogKiBAbGljZW5zZSAgTUlUCiAqLwptb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihvYmope3JldHVybiBudWxsIT1vYmomJihpc0J1ZmZlcihvYmopfHxmdW5jdGlvbihvYmope3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBvYmoucmVhZEZsb2F0TEUmJiJmdW5jdGlvbiI9PXR5cGVvZiBvYmouc2xpY2UmJmlzQnVmZmVyKG9iai5zbGljZSgwLDApKX0ob2JqKXx8ISFvYmouX2lzQnVmZmVyKX19LCJCSi9sIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtsb2cxcDpfX3dlYnBhY2tfcmVxdWlyZV9fKCIxc2E3Iil9KX0sQlA4VTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJHBhcnNlSW50PV9fd2VicGFja19yZXF1aXJlX18oIlBLVXIiKTskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqKE51bWJlci5wYXJzZUludCE9JHBhcnNlSW50KSwiTnVtYmVyIix7cGFyc2VJbnQ6JHBhcnNlSW50fSl9LEJWZzM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHBsdXJhbChuKXtyZXR1cm4gbiUxMDA9PTExfHxuJTEwIT0xfWZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsd2l0aG91dFN1ZmZpeCxrZXksaXNGdXR1cmUpe3ZhciByZXN1bHQ9bnVtYmVyKyIgIjtzd2l0Y2goa2V5KXtjYXNlInMiOnJldHVybiB3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8ibm9ra3JhciBzZWvDum5kdXIiOiJub2trcnVtIHNla8O6bmR1bSI7Y2FzZSJzcyI6cmV0dXJuIHBsdXJhbChudW1iZXIpP3Jlc3VsdCsod2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/InNla8O6bmR1ciI6InNla8O6bmR1bSIpOnJlc3VsdCsic2Vrw7puZGEiO2Nhc2UibSI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/Im3DrW7DunRhIjoibcOtbsO6dHUiO2Nhc2UibW0iOnJldHVybiBwbHVyYWwobnVtYmVyKT9yZXN1bHQrKHdpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJtw61uw7p0dXIiOiJtw61uw7p0dW0iKTp3aXRob3V0U3VmZml4P3Jlc3VsdCsibcOtbsO6dGEiOnJlc3VsdCsibcOtbsO6dHUiO2Nhc2UiaGgiOnJldHVybiBwbHVyYWwobnVtYmVyKT9yZXN1bHQrKHdpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJrbHVra3VzdHVuZGlyIjoia2x1a2t1c3R1bmR1bSIpOnJlc3VsdCsia2x1a2t1c3R1bmQiO2Nhc2UiZCI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/ImRhZ3VyIjppc0Z1dHVyZT8iZGFnIjoiZGVnaSI7Y2FzZSJkZCI6cmV0dXJuIHBsdXJhbChudW1iZXIpP3dpdGhvdXRTdWZmaXg/cmVzdWx0KyJkYWdhciI6cmVzdWx0Kyhpc0Z1dHVyZT8iZGFnYSI6ImTDtmd1bSIpOndpdGhvdXRTdWZmaXg/cmVzdWx0KyJkYWd1ciI6cmVzdWx0Kyhpc0Z1dHVyZT8iZGFnIjoiZGVnaSIpO2Nhc2UiTSI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/Im3DoW51w7B1ciI6aXNGdXR1cmU/Im3DoW51w7AiOiJtw6FudcOwaSI7Y2FzZSJNTSI6cmV0dXJuIHBsdXJhbChudW1iZXIpP3dpdGhvdXRTdWZmaXg/cmVzdWx0KyJtw6FudcOwaXIiOnJlc3VsdCsoaXNGdXR1cmU/Im3DoW51w7BpIjoibcOhbnXDsHVtIik6d2l0aG91dFN1ZmZpeD9yZXN1bHQrIm3DoW51w7B1ciI6cmVzdWx0Kyhpc0Z1dHVyZT8ibcOhbnXDsCI6Im3DoW51w7BpIik7Y2FzZSJ5IjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/IsOhciI6IsOhcmkiO2Nhc2UieXkiOnJldHVybiBwbHVyYWwobnVtYmVyKT9yZXN1bHQrKHdpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyLDoXIiOiLDoXJ1bSIpOnJlc3VsdCsod2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/IsOhciI6IsOhcmkiKX19bW9tZW50LmRlZmluZUxvY2FsZSgiaXMiLHttb250aHM6ImphbsO6YXJfZmVicsO6YXJfbWFyc19hcHLDrWxfbWHDrV9qw7puw61fasO6bMOtX8OhZ8O6c3Rfc2VwdGVtYmVyX29rdMOzYmVyX27Ds3ZlbWJlcl9kZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuX2ZlYl9tYXJfYXByX21hw61fasO6bl9qw7psX8OhZ8O6X3NlcF9va3RfbsOzdl9kZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6InN1bm51ZGFndXJfbcOhbnVkYWd1cl/DvnJpw7BqdWRhZ3VyX21pw7B2aWt1ZGFndXJfZmltbXR1ZGFndXJfZsO2c3R1ZGFndXJfbGF1Z2FyZGFndXIiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoic3VuX23DoW5fw75yaV9tacOwX2ZpbV9mw7ZzX2xhdSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3VfTcOhX8Oecl9NaV9GaV9Gw7ZfTGEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIFtrbC5dIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBba2wuXSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvDrSBkYWcga2wuXSBMVCIsbmV4dERheToiW8OhIG1vcmd1biBrbC5dIExUIixuZXh0V2VlazoiZGRkZCBba2wuXSBMVCIsbGFzdERheToiW8OtIGfDpnIga2wuXSBMVCIsbGFzdFdlZWs6Iltzw63DsGFzdGFdIGRkZGQgW2tsLl0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImVmdGlyICVzIixwYXN0OiJmeXJpciAlcyBzw63DsGFuIixzOnRyYW5zbGF0ZSxzczp0cmFuc2xhdGUsbTp0cmFuc2xhdGUsbW06dHJhbnNsYXRlLGg6ImtsdWtrdXN0dW5kIixoaDp0cmFuc2xhdGUsZDp0cmFuc2xhdGUsZGQ6dHJhbnNsYXRlLE06dHJhbnNsYXRlLE1NOnRyYW5zbGF0ZSx5OnRyYW5zbGF0ZSx5eTp0cmFuc2xhdGV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sQnFmVjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgbWV0YWRhdGE9X193ZWJwYWNrX3JlcXVpcmVfXygiTjZjSiIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSxvcmRpbmFyeUdldE93bk1ldGFkYXRhPW1ldGFkYXRhLmdldCx0b01ldGFLZXk9bWV0YWRhdGEua2V5O21ldGFkYXRhLmV4cCh7Z2V0T3duTWV0YWRhdGE6ZnVuY3Rpb24obWV0YWRhdGFLZXksdGFyZ2V0KXtyZXR1cm4gb3JkaW5hcnlHZXRPd25NZXRhZGF0YShtZXRhZGF0YUtleSxhbk9iamVjdCh0YXJnZXQpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6dG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpfX0pfSxCdHZ0OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgY2xhc3NvZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJJOGErIiksdGVzdD17fTt0ZXN0W19fd2VicGFja19yZXF1aXJlX18oIksweFUiKSgidG9TdHJpbmdUYWciKV09InoiLHRlc3QrIiIhPSJbb2JqZWN0IHpdIiYmX193ZWJwYWNrX3JlcXVpcmVfXygiS3JvSiIpKE9iamVjdC5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0ICIrY2xhc3NvZih0aGlzKSsiXSJ9LCEwKX0sQnlGNDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZm8iLHttb250aHM6ImphbnVhcl9mZWJydWFyX21hcnNfYXByw61sX21haV9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2Rlc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW5fZmViX21hcl9hcHJfbWFpX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic3VubnVkYWd1cl9tw6FuYWRhZ3VyX3TDvXNkYWd1cl9taWt1ZGFndXJfaMOzc2RhZ3VyX2Zyw61nZ2phZGFndXJfbGV5Z2FyZGFndXIiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoic3VuX23DoW5fdMO9c19taWtfaMOzc19mcsOtX2xleSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoic3VfbcOhX3TDvV9taV9ow7NfZnJfbGUiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQuIE1NTU0sIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW8ONIGRhZyBrbC5dIExUIixuZXh0RGF5OiJbw40gbW9yZ2luIGtsLl0gTFQiLG5leHRXZWVrOiJkZGRkIFtrbC5dIExUIixsYXN0RGF5OiJbw40gZ2rDoXIga2wuXSBMVCIsbGFzdFdlZWs6Iltzw63DsHN0dV0gZGRkZCBba2xdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJ1bSAlcyIscGFzdDoiJXMgc8Otw7BhbmkiLHM6ImbDoSBzZWt1bmQiLHNzOiIlZCBzZWt1bmRpciIsbToiZWluIG1pbnV0dHVyIixtbToiJWQgbWludXR0aXIiLGg6ImVpbiB0w61taSIsaGg6IiVkIHTDrW1hciIsZDoiZWluIGRhZ3VyIixkZDoiJWQgZGFnYXIiLE06ImVpbiBtw6FuYcOwdXIiLE1NOiIlZCBtw6FuYcOwaXIiLHk6ImVpdHQgw6FyIix5eToiJWQgw6FyIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiQy92YSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5Iik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdGhhdD1hbk9iamVjdCh0aGlzKSxyZXN1bHQ9IiI7cmV0dXJuIHRoYXQuZ2xvYmFsJiYocmVzdWx0Kz0iZyIpLHRoYXQuaWdub3JlQ2FzZSYmKHJlc3VsdCs9ImkiKSx0aGF0Lm11bHRpbGluZSYmKHJlc3VsdCs9Im0iKSx0aGF0LnVuaWNvZGUmJihyZXN1bHQrPSJ1IiksdGhhdC5zdGlja3kmJihyZXN1bHQrPSJ5IikscmVzdWx0fX0sQ1gydTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGNvcmU9X193ZWJwYWNrX3JlcXVpcmVfXygiZzNnNSIpLGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIiksc3BlY2llc0NvbnN0cnVjdG9yPV9fd2VicGFja19yZXF1aXJlX18oIjY5Ym4iKSxwcm9taXNlUmVzb2x2ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ2S3JkIik7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5SLCJQcm9taXNlIix7ZmluYWxseTpmdW5jdGlvbihvbkZpbmFsbHkpe3ZhciBDPXNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLGNvcmUuUHJvbWlzZXx8Z2xvYmFsLlByb21pc2UpLGlzRnVuY3Rpb249ImZ1bmN0aW9uIj09dHlwZW9mIG9uRmluYWxseTtyZXR1cm4gdGhpcy50aGVuKGlzRnVuY3Rpb24/ZnVuY3Rpb24oeCl7cmV0dXJuIHByb21pc2VSZXNvbHZlKEMsb25GaW5hbGx5KCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4geH0pfTpvbkZpbmFsbHksaXNGdW5jdGlvbj9mdW5jdGlvbihlKXtyZXR1cm4gcHJvbWlzZVJlc29sdmUoQyxvbkZpbmFsbHkoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IGV9KX06b25GaW5hbGx5KX19KX0sQ2VDZDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtjbGFtcDpmdW5jdGlvbih4LGxvd2VyLHVwcGVyKXtyZXR1cm4gTWF0aC5taW4odXBwZXIsTWF0aC5tYXgobG93ZXIseCkpfX0pfSxDZnJqOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiUllpNyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7aWYodm9pZCAwPT09aXQpcmV0dXJuIDA7dmFyIG51bWJlcj10b0ludGVnZXIoaXQpLGxlbmd0aD10b0xlbmd0aChudW1iZXIpO2lmKG51bWJlciE9PWxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBsZW5ndGghIik7cmV0dXJuIGxlbmd0aH19LENnYVM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBkZWZhdWx0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJKRVFyIiksdXRpbHM9X193ZWJwYWNrX3JlcXVpcmVfXygieFRKKyIpLEludGVyY2VwdG9yTWFuYWdlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCI5clNRIiksZGlzcGF0Y2hSZXF1ZXN0PV9fd2VicGFja19yZXF1aXJlX18oIlVuQksiKTtmdW5jdGlvbiBBeGlvcyhpbnN0YW5jZUNvbmZpZyl7dGhpcy5kZWZhdWx0cz1pbnN0YW5jZUNvbmZpZyx0aGlzLmludGVyY2VwdG9ycz17cmVxdWVzdDpuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyLHJlc3BvbnNlOm5ldyBJbnRlcmNlcHRvck1hbmFnZXJ9fUF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGNvbmZpZyl7InN0cmluZyI9PXR5cGVvZiBjb25maWcmJihjb25maWc9dXRpbHMubWVyZ2Uoe3VybDphcmd1bWVudHNbMF19LGFyZ3VtZW50c1sxXSkpLChjb25maWc9dXRpbHMubWVyZ2UoZGVmYXVsdHMse21ldGhvZDoiZ2V0In0sdGhpcy5kZWZhdWx0cyxjb25maWcpKS5tZXRob2Q9Y29uZmlnLm1ldGhvZC50b0xvd2VyQ2FzZSgpO3ZhciBjaGFpbj1bZGlzcGF0Y2hSZXF1ZXN0LHZvaWQgMF0scHJvbWlzZT1Qcm9taXNlLnJlc29sdmUoY29uZmlnKTtmb3IodGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uKGludGVyY2VwdG9yKXtjaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCxpbnRlcmNlcHRvci5yZWplY3RlZCl9KSx0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uKGludGVyY2VwdG9yKXtjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCxpbnRlcmNlcHRvci5yZWplY3RlZCl9KTtjaGFpbi5sZW5ndGg7KXByb21pc2U9cHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksY2hhaW4uc2hpZnQoKSk7cmV0dXJuIHByb21pc2V9LHV0aWxzLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwib3B0aW9ucyJdLGZ1bmN0aW9uKG1ldGhvZCl7QXhpb3MucHJvdG90eXBlW21ldGhvZF09ZnVuY3Rpb24odXJsLGNvbmZpZyl7cmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWd8fHt9LHttZXRob2Q6bWV0aG9kLHVybDp1cmx9KSl9fSksdXRpbHMuZm9yRWFjaChbInBvc3QiLCJwdXQiLCJwYXRjaCJdLGZ1bmN0aW9uKG1ldGhvZCl7QXhpb3MucHJvdG90eXBlW21ldGhvZF09ZnVuY3Rpb24odXJsLGRhdGEsY29uZmlnKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZ3x8e30se21ldGhvZDptZXRob2QsdXJsOnVybCxkYXRhOmRhdGF9KSl9fSksbW9kdWxlLmV4cG9ydHM9QXhpb3N9LENqelQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBtb250aHNTaG9ydERvdD0iZW5lLl9mZWIuX21hci5fYWJyLl9tYXkuX2p1bi5fanVsLl9hZ28uX3NlcC5fb2N0Ll9ub3YuX2RpYy4iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ9ImVuZV9mZWJfbWFyX2Ficl9tYXlfanVuX2p1bF9hZ29fc2VwX29jdF9ub3ZfZGljIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlPVsvXmVuZS9pLC9eZmViL2ksL15tYXIvaSwvXmFici9pLC9ebWF5L2ksL15qdW4vaSwvXmp1bC9pLC9eYWdvL2ksL15zZXAvaSwvXm9jdC9pLC9ebm92L2ksL15kaWMvaV0sbW9udGhzUmVnZXg9L14oZW5lcm98ZmVicmVyb3xtYXJ6b3xhYnJpbHxtYXlvfGp1bmlvfGp1bGlvfGFnb3N0b3xzZXB0aWVtYnJlfG9jdHVicmV8bm92aWVtYnJlfGRpY2llbWJyZXxlbmVcLj98ZmViXC4/fG1hclwuP3xhYnJcLj98bWF5XC4/fGp1blwuP3xqdWxcLj98YWdvXC4/fHNlcFwuP3xvY3RcLj98bm92XC4/fGRpY1wuPykvaTttb21lbnQuZGVmaW5lTG9jYWxlKCJlcy1kbyIse21vbnRoczoiZW5lcm9fZmVicmVyb19tYXJ6b19hYnJpbF9tYXlvX2p1bmlvX2p1bGlvX2Fnb3N0b19zZXB0aWVtYnJlX29jdHVicmVfbm92aWVtYnJlX2RpY2llbWJyZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDpmdW5jdGlvbihtLGZvcm1hdCl7cmV0dXJuIG0/Ly1NTU0tLy50ZXN0KGZvcm1hdCk/bW9udGhzU2hvcnRbbS5tb250aCgpXTptb250aHNTaG9ydERvdFttLm1vbnRoKCldOm1vbnRoc1Nob3J0RG90fSxtb250aHNSZWdleDptb250aHNSZWdleCxtb250aHNTaG9ydFJlZ2V4Om1vbnRoc1JlZ2V4LG1vbnRoc1N0cmljdFJlZ2V4Oi9eKGVuZXJvfGZlYnJlcm98bWFyem98YWJyaWx8bWF5b3xqdW5pb3xqdWxpb3xhZ29zdG98c2VwdGllbWJyZXxvY3R1YnJlfG5vdmllbWJyZXxkaWNpZW1icmUpL2ksbW9udGhzU2hvcnRTdHJpY3RSZWdleDovXihlbmVcLj98ZmViXC4/fG1hclwuP3xhYnJcLj98bWF5XC4/fGp1blwuP3xqdWxcLj98YWdvXC4/fHNlcFwuP3xvY3RcLj98bm92XC4/fGRpY1wuPykvaSxtb250aHNQYXJzZTptb250aHNQYXJzZSxsb25nTW9udGhzUGFyc2U6bW9udGhzUGFyc2Usc2hvcnRNb250aHNQYXJzZTptb250aHNQYXJzZSx3ZWVrZGF5czoiZG9taW5nb19sdW5lc19tYXJ0ZXNfbWnDqXJjb2xlc19qdWV2ZXNfdmllcm5lc19zw6FiYWRvIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImRvbS5fbHVuLl9tYXIuX21pw6kuX2p1ZS5fdmllLl9zw6FiLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiZG9fbHVfbWFfbWlfanVfdmlfc8OhIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6Img6bW0gQSIsTFRTOiJoOm1tOnNzIEEiLEw6IkREL01NL1lZWVkiLExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkiLExMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIGg6bW0gQSJ9LGNhbGVuZGFyOntzYW1lRGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltob3kgYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LG5leHREYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW21hw7FhbmEgYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LG5leHRXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuImRkZGQgW2EgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxsYXN0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltheWVyIGEgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiJbZWxdIGRkZGQgW3Bhc2FkbyBhIGxhIisoMSE9PXRoaXMuaG91cnMoKT8icyI6IiIpKyJdIExUIn0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZW4gJXMiLHBhc3Q6ImhhY2UgJXMiLHM6InVub3Mgc2VndW5kb3MiLHNzOiIlZCBzZWd1bmRvcyIsbToidW4gbWludXRvIixtbToiJWQgbWludXRvcyIsaDoidW5hIGhvcmEiLGhoOiIlZCBob3JhcyIsZDoidW4gZMOtYSIsZGQ6IiVkIGTDrWFzIixNOiJ1biBtZXMiLE1NOiIlZCBtZXNlcyIseToidW4gYcOxbyIseXk6IiVkIGHDsW9zIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6Iix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sQ2trVDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgY3R4PV9fd2VicGFja19yZXF1aXJlX18oIm0wUHAiKSxJT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlltcXYiKSx0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTL2ovIiksdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygibmU4aSIpLGFzYz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ6UndvIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oVFlQRSwkY3JlYXRlKXt2YXIgSVNfTUFQPTE9PVRZUEUsSVNfRklMVEVSPTI9PVRZUEUsSVNfU09NRT0zPT1UWVBFLElTX0VWRVJZPTQ9PVRZUEUsSVNfRklORF9JTkRFWD02PT1UWVBFLE5PX0hPTEVTPTU9PVRZUEV8fElTX0ZJTkRfSU5ERVgsY3JlYXRlPSRjcmVhdGV8fGFzYztyZXR1cm4gZnVuY3Rpb24oJHRoaXMsY2FsbGJhY2tmbix0aGF0KXtmb3IodmFyIHZhbCxyZXMsTz10b09iamVjdCgkdGhpcyksc2VsZj1JT2JqZWN0KE8pLGY9Y3R4KGNhbGxiYWNrZm4sdGhhdCwzKSxsZW5ndGg9dG9MZW5ndGgoc2VsZi5sZW5ndGgpLGluZGV4PTAscmVzdWx0PUlTX01BUD9jcmVhdGUoJHRoaXMsbGVuZ3RoKTpJU19GSUxURVI/Y3JlYXRlKCR0aGlzLDApOnZvaWQgMDtpbmRleDxsZW5ndGg7aW5kZXgrKylpZigoTk9fSE9MRVN8fGluZGV4IGluIHNlbGYpJiYocmVzPWYodmFsPXNlbGZbaW5kZXhdLGluZGV4LE8pLFRZUEUpKWlmKElTX01BUClyZXN1bHRbaW5kZXhdPXJlcztlbHNlIGlmKHJlcylzd2l0Y2goVFlQRSl7Y2FzZSAzOnJldHVybiEwO2Nhc2UgNTpyZXR1cm4gdmFsO2Nhc2UgNjpyZXR1cm4gaW5kZXg7Y2FzZSAyOnJlc3VsdC5wdXNoKHZhbCl9ZWxzZSBpZihJU19FVkVSWSlyZXR1cm4hMTtyZXR1cm4gSVNfRklORF9JTkRFWD8tMTpJU19TT01FfHxJU19FVkVSWT9JU19FVkVSWTpyZXN1bHR9fX0sQ29SSjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiYXItbWEiLHttb250aHM6ItmK2YbYp9mK2LFf2YHYqNix2KfZitixX9mF2KfYsdizX9ij2KjYsdmK2YRf2YXYp9mKX9mK2YjZhtmK2Yhf2YrZiNmE2YrZiNiyX9i62LTYql/YtNiq2YbYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YbYqNixX9iv2KzZhtio2LEiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItmK2YbYp9mK2LFf2YHYqNix2KfZitixX9mF2KfYsdizX9ij2KjYsdmK2YRf2YXYp9mKX9mK2YjZhtmK2Yhf2YrZiNmE2YrZiNiyX9i62LTYql/YtNiq2YbYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YbYqNixX9iv2KzZhtio2LEiLnNwbGl0KCJfIiksd2Vla2RheXM6Itin2YTYo9it2K9f2KfZhNil2KrZhtmK2YZf2KfZhNir2YTYp9ir2KfYoV/Yp9mE2KPYsdio2LnYp9ihX9in2YTYrtmF2YrYs1/Yp9mE2KzZhdi52Klf2KfZhNiz2KjYqiIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLYp9it2K9f2KfYqtmG2YrZhl/Yq9mE2KfYq9in2KFf2KfYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi2K1f2YZf2Ktf2LFf2K5f2Kxf2LMiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhNmK2YjZhSDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dERheToiW9i62K/YpyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0RGF5OiJb2KPZhdizINi52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0V2VlazoiZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItmB2YogJXMiLHBhc3Q6ItmF2YbYsCAlcyIsczoi2KvZiNin2YYiLHNzOiIlZCDYq9in2YbZitipIixtOiLYr9mC2YrZgtipIixtbToiJWQg2K/Zgtin2KbZgiIsaDoi2LPYp9i52KkiLGhoOiIlZCDYs9in2LnYp9iqIixkOiLZitmI2YUiLGRkOiIlZCDYo9mK2KfZhSIsTToi2LTZh9ixIixNTToiJWQg2KPYtNmH2LEiLHk6Itiz2YbYqSIseXk6IiVkINiz2YbZiNin2KoifSx3ZWVrOntkb3c6Nixkb3k6MTJ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LEN5SHo6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJNYXRoIix7c2lnbjpfX3dlYnBhY2tfcmVxdWlyZV9fKCJsdnRtIil9KX0sIkQvSk0iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJldSIse21vbnRoczoidXJ0YXJyaWxhX290c2FpbGFfbWFydHhvYV9hcGlyaWxhX21haWF0emFfZWthaW5hX3V6dGFpbGFfYWJ1enR1YV9pcmFpbGFfdXJyaWFfYXphcm9hX2FiZW5kdWEiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6InVydC5fb3RzLl9tYXIuX2FwaS5fbWFpLl9la2EuX3V6dC5fYWJ1Ll9pcmEuX3Vyci5fYXphLl9hYmUuIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlRXhhY3Q6ITAsd2Vla2RheXM6ImlnYW5kZWFfYXN0ZWxlaGVuYV9hc3RlYXJ0ZWFfYXN0ZWF6a2VuYV9vc3RlZ3VuYV9vc3RpcmFsYV9sYXJ1bmJhdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiaWcuX2FsLl9hci5fYXouX29nLl9vbC5fbHIuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJpZ19hbF9hcl9hel9vZ19vbF9sciIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IllZWVlba29dIE1NTU1bcmVuXSBEW2FdIixMTEw6IllZWVlba29dIE1NTU1bcmVuXSBEW2FdIEhIOm1tIixMTExMOiJkZGRkLCBZWVlZW2tvXSBNTU1NW3Jlbl0gRFthXSBISDptbSIsbDoiWVlZWS1NLUQiLGxsOiJZWVlZW2tvXSBNTU0gRFthXSIsbGxsOiJZWVlZW2tvXSBNTU0gRFthXSBISDptbSIsbGxsbDoiZGRkLCBZWVlZW2tvXSBNTU0gRFthXSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbZ2F1cl0gTFRbZXRhbl0iLG5leHREYXk6IltiaWhhcl0gTFRbZXRhbl0iLG5leHRXZWVrOiJkZGRkIExUW2V0YW5dIixsYXN0RGF5OiJbYXR6b10gTFRbZXRhbl0iLGxhc3RXZWVrOiJbYXVycmVrb10gZGRkZCBMVFtldGFuXSIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgYmFycnUiLHBhc3Q6ImR1ZWxhICVzIixzOiJzZWd1bmRvIGJhdHp1ayIsc3M6IiVkIHNlZ3VuZG8iLG06Im1pbnV0dSBiYXQiLG1tOiIlZCBtaW51dHUiLGg6Im9yZHUgYmF0IixoaDoiJWQgb3JkdSIsZDoiZWd1biBiYXQiLGRkOiIlZCBlZ3VuIixNOiJoaWxhYmV0ZSBiYXQiLE1NOiIlZCBoaWxhYmV0ZSIseToidXJ0ZSBiYXQiLHl5OiIlZCB1cnRlIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxENGlWOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe2Zvcih2YXIgVHlwZWQsZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKSxoaWRlPV9fd2VicGFja19yZXF1aXJlX18oIk11a2IiKSx1aWQ9X193ZWJwYWNrX3JlcXVpcmVfXygieWxxcyIpLFRZUEVEPXVpZCgidHlwZWRfYXJyYXkiKSxWSUVXPXVpZCgidmlldyIpLEFCVj0hKCFnbG9iYWwuQXJyYXlCdWZmZXJ8fCFnbG9iYWwuRGF0YVZpZXcpLENPTlNUUj1BQlYsaT0wLFR5cGVkQXJyYXlDb25zdHJ1Y3RvcnM9IkludDhBcnJheSxVaW50OEFycmF5LFVpbnQ4Q2xhbXBlZEFycmF5LEludDE2QXJyYXksVWludDE2QXJyYXksSW50MzJBcnJheSxVaW50MzJBcnJheSxGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5Ii5zcGxpdCgiLCIpO2k8OTspKFR5cGVkPWdsb2JhbFtUeXBlZEFycmF5Q29uc3RydWN0b3JzW2krK11dKT8oaGlkZShUeXBlZC5wcm90b3R5cGUsVFlQRUQsITApLGhpZGUoVHlwZWQucHJvdG90eXBlLFZJRVcsITApKTpDT05TVFI9ITE7bW9kdWxlLmV4cG9ydHM9e0FCVjpBQlYsQ09OU1RSOkNPTlNUUixUWVBFRDpUWVBFRCxWSUVXOlZJRVd9fSxEOGtZOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiT2pnZCIpLG1heD1NYXRoLm1heCxtaW49TWF0aC5taW47bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaW5kZXgsbGVuZ3RoKXtyZXR1cm4oaW5kZXg9dG9JbnRlZ2VyKGluZGV4KSk8MD9tYXgoaW5kZXgrbGVuZ3RoLDApOm1pbihpbmRleCxsZW5ndGgpfX0sREFDczpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtERUdfUEVSX1JBRDpNYXRoLlBJLzE4MH0pfSxERFlJOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuRyx7Z2xvYmFsOl9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKX0pfSwiREtyKyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHByb2Nlc3NSZWxhdGl2ZVRpbWUobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5LGlzRnV0dXJlKXt2YXIgZm9ybWF0PXtzOlsidGhvZGRlIHNlY29uZGFuaW0iLCJ0aG9kZGUgc2Vjb25kIl0sc3M6W251bWJlcisiIHNlY29uZGFuaW0iLG51bWJlcisiIHNlY29uZCJdLG06WyJla2EgbWludGFuIiwiZWsgbWludXRlIl0sbW06W251bWJlcisiIG1pbnRhbmltIixudW1iZXIrIiBtaW50YW0iXSxoOlsiZWthIHZvcmFuIiwiZWsgdm9yIl0saGg6W251bWJlcisiIHZvcmFuaW0iLG51bWJlcisiIHZvcmFtIl0sZDpbImVrYSBkaXNhbiIsImVrIGRpcyJdLGRkOltudW1iZXIrIiBkaXNhbmltIixudW1iZXIrIiBkaXMiXSxNOlsiZWthIG1ob2luZWFuIiwiZWsgbWhvaW5vIl0sTU06W251bWJlcisiIG1ob2luZWFuaW0iLG51bWJlcisiIG1ob2luZSJdLHk6WyJla2Egdm9yc2FuIiwiZWsgdm9yb3MiXSx5eTpbbnVtYmVyKyIgdm9yc2FuaW0iLG51bWJlcisiIHZvcnNhbSJdfTtyZXR1cm4gd2l0aG91dFN1ZmZpeD9mb3JtYXRba2V5XVswXTpmb3JtYXRba2V5XVsxXX1tb21lbnQuZGVmaW5lTG9jYWxlKCJnb20tbGF0biIse21vbnRoczoiSmFuZXJfRmVicmVyX01hcnNfQWJyaWxfTWFpX0p1bl9KdWxhaV9BZ29zdF9TZXRlbWJyX090dWJyX05vdmVtYnJfRGV6ZW1iciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuLl9GZWIuX01hcnNfQWJyLl9NYWlfSnVuX0p1bC5fQWdvLl9TZXQuX090dS5fTm92Ll9EZXouIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlRXhhY3Q6ITAsd2Vla2RheXM6IkFpdGFyX1NvbWFyX01vbmdsbGFyX0J1ZHZhcl9CcmVzdGFyX1N1a3Jhcl9Tb24ndmFyIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkFpdC5fU29tLl9Nb24uX0J1ZC5fQnJlLl9TdWsuX1Nvbi4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkFpX1NtX01vX0J1X0JyX1N1X1NuIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkEgaDptbSBbdmF6dGFdIixMVFM6IkEgaDptbTpzcyBbdmF6dGFdIixMOiJERC1NTS1ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgQSBoOm1tIFt2YXp0YV0iLExMTEw6ImRkZGQsIE1NTU1bYWNoZWFdIERvLCBZWVlZLCBBIGg6bW0gW3ZhenRhXSIsbGxsbDoiZGRkLCBEIE1NTSBZWVlZLCBBIGg6bW0gW3ZhenRhXSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbQWl6XSBMVCIsbmV4dERheToiW0ZhbGVhbV0gTFQiLG5leHRXZWVrOiJbSWV0YSB0b10gZGRkZFssXSBMVCIsbGFzdERheToiW0thbF0gTFQiLGxhc3RXZWVrOiJbRmF0bG9dIGRkZGRbLF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIixwYXN0OiIlcyBhZGltIixzOnByb2Nlc3NSZWxhdGl2ZVRpbWUsc3M6cHJvY2Vzc1JlbGF0aXZlVGltZSxtOnByb2Nlc3NSZWxhdGl2ZVRpbWUsbW06cHJvY2Vzc1JlbGF0aXZlVGltZSxoOnByb2Nlc3NSZWxhdGl2ZVRpbWUsaGg6cHJvY2Vzc1JlbGF0aXZlVGltZSxkOnByb2Nlc3NSZWxhdGl2ZVRpbWUsZGQ6cHJvY2Vzc1JlbGF0aXZlVGltZSxNOnByb2Nlc3NSZWxhdGl2ZVRpbWUsTU06cHJvY2Vzc1JlbGF0aXZlVGltZSx5OnByb2Nlc3NSZWxhdGl2ZVRpbWUseXk6cHJvY2Vzc1JlbGF0aXZlVGltZX0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfShlcikvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyLHBlcmlvZCl7c3dpdGNoKHBlcmlvZCl7Y2FzZSJEIjpyZXR1cm4gbnVtYmVyKyJlciI7ZGVmYXVsdDpjYXNlIk0iOmNhc2UiUSI6Y2FzZSJEREQiOmNhc2UiZCI6Y2FzZSJ3IjpjYXNlIlciOnJldHVybiBudW1iZXJ9fSx3ZWVrOntkb3c6MSxkb3k6NH0sbWVyaWRpZW1QYXJzZTovcmF0aXxzb2thbGxpfGRvbnBhcmFtfHNhbmplLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksInJhdGkiPT09bWVyaWRpZW0/aG91cjw0P2hvdXI6aG91cisxMjoic29rYWxsaSI9PT1tZXJpZGllbT9ob3VyOiJkb25wYXJhbSI9PT1tZXJpZGllbT8xMjxob3VyP2hvdXI6aG91cisxMjoic2FuamUiPT09bWVyaWRpZW0/aG91cisxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDQ/InJhdGkiOmhvdXI8MTI/InNva2FsbGkiOmhvdXI8MTY/ImRvbnBhcmFtIjpob3VyPDIwPyJzYW5qZSI6InJhdGkifX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxETmlQOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJHJlZHVjZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJleU1yIik7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKiFfX3dlYnBhY2tfcmVxdWlyZV9fKCJMeUU4IikoW10ucmVkdWNlLCEwKSwiQXJyYXkiLHtyZWR1Y2U6ZnVuY3Rpb24oY2FsbGJhY2tmbil7cmV0dXJuICRyZWR1Y2UodGhpcyxjYWxsYmFja2ZuLGFyZ3VtZW50cy5sZW5ndGgsYXJndW1lbnRzWzFdLCExKX19KX0sRFNWMzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksbWljcm90YXNrPV9fd2VicGFja19yZXF1aXJlX18oImdIbm4iKSgpLHByb2Nlc3M9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLnByb2Nlc3MsaXNOb2RlPSJwcm9jZXNzIj09X193ZWJwYWNrX3JlcXVpcmVfXygiTFpXdCIpKHByb2Nlc3MpOyRleHBvcnQoJGV4cG9ydC5HLHthc2FwOmZ1bmN0aW9uKGZuKXt2YXIgZG9tYWluPWlzTm9kZSYmcHJvY2Vzcy5kb21haW47bWljcm90YXNrKGRvbWFpbj9kb21haW4uYmluZChmbik6Zm4pfX0pfSxEVmdBOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAka2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ6aEFiIiksZW51bUJ1Z0tleXM9X193ZWJwYWNrX3JlcXVpcmVfXygiNFI0dSIpO21vZHVsZS5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbihPKXtyZXR1cm4gJGtleXMoTyxlbnVtQnVnS2V5cyl9fSxEVzJFOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0IiksbWV0YT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJaNnZGIikub25GcmVlemU7X193ZWJwYWNrX3JlcXVpcmVfXygiWHRyOCIpKCJmcmVlemUiLGZ1bmN0aW9uKCRmcmVlemUpe3JldHVybiBmdW5jdGlvbihpdCl7cmV0dXJuICRmcmVlemUmJmlzT2JqZWN0KGl0KT8kZnJlZXplKG1ldGEoaXQpKTppdH19KX0sRGZaQjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oY2FsbGJhY2spe3JldHVybiBmdW5jdGlvbihhcnIpe3JldHVybiBjYWxsYmFjay5hcHBseShudWxsLGFycil9fX0sRGhWRDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgdGhyb3R0bGU9X193ZWJwYWNrX3JlcXVpcmVfXygiV1gvVSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGRlbGF5LGF0QmVnaW4sY2FsbGJhY2spe3JldHVybiB2b2lkIDA9PT1jYWxsYmFjaz90aHJvdHRsZShkZWxheSxhdEJlZ2luLCExKTp0aHJvdHRsZShkZWxheSxjYWxsYmFjaywhMSE9PWF0QmVnaW4pfX0sRGtreTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZnItY2giLHttb250aHM6ImphbnZpZXJfZsOpdnJpZXJfbWFyc19hdnJpbF9tYWlfanVpbl9qdWlsbGV0X2Fvw7t0X3NlcHRlbWJyZV9vY3RvYnJlX25vdmVtYnJlX2TDqWNlbWJyZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFudi5fZsOpdnIuX21hcnNfYXZyLl9tYWlfanVpbl9qdWlsLl9hb8O7dF9zZXB0Ll9vY3QuX25vdi5fZMOpYy4iLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoiZGltYW5jaGVfbHVuZGlfbWFyZGlfbWVyY3JlZGlfamV1ZGlfdmVuZHJlZGlfc2FtZWRpIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImRpbS5fbHVuLl9tYXIuX21lci5famV1Ll92ZW4uX3NhbS4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ImRpX2x1X21hX21lX2plX3ZlX3NhIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0F1am91cmTigJlodWkgw6BdIExUIixuZXh0RGF5OiJbRGVtYWluIMOgXSBMVCIsbmV4dFdlZWs6ImRkZGQgW8OgXSBMVCIsbGFzdERheToiW0hpZXIgw6BdIExUIixsYXN0V2VlazoiZGRkZCBbZGVybmllciDDoF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImRhbnMgJXMiLHBhc3Q6ImlsIHkgYSAlcyIsczoicXVlbHF1ZXMgc2Vjb25kZXMiLHNzOiIlZCBzZWNvbmRlcyIsbToidW5lIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6InVuZSBoZXVyZSIsaGg6IiVkIGhldXJlcyIsZDoidW4gam91ciIsZGQ6IiVkIGpvdXJzIixNOiJ1biBtb2lzIixNTToiJWQgbW9pcyIseToidW4gYW4iLHl5OiIlZCBhbnMifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KGVyfGUpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcixwZXJpb2Qpe3N3aXRjaChwZXJpb2Qpe2RlZmF1bHQ6Y2FzZSJNIjpjYXNlIlEiOmNhc2UiRCI6Y2FzZSJEREQiOmNhc2UiZCI6cmV0dXJuIG51bWJlcisoMT09PW51bWJlcj8iZXIiOiJlIik7Y2FzZSJ3IjpjYXNlIlciOnJldHVybiBudW1iZXIrKDE9PT1udW1iZXI/InJlIjoiZSIpfX0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LERtdmk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImVuLWF1Iix7bW9udGhzOiJKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXkiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTdV9Nb19UdV9XZV9UaF9Gcl9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Img6bW0gQSIsTFRTOiJoOm1tOnNzIEEiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBoOm1tIEEiLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIGg6bW0gQSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbVG9kYXkgYXRdIExUIixuZXh0RGF5OiJbVG9tb3Jyb3cgYXRdIExUIixuZXh0V2VlazoiZGRkZCBbYXRdIExUIixsYXN0RGF5OiJbWWVzdGVyZGF5IGF0XSBMVCIsbGFzdFdlZWs6IltMYXN0XSBkZGRkIFthdF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImluICVzIixwYXN0OiIlcyBhZ28iLHM6ImEgZmV3IHNlY29uZHMiLHNzOiIlZCBzZWNvbmRzIixtOiJhIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6ImFuIGhvdXIiLGhoOiIlZCBob3VycyIsZDoiYSBkYXkiLGRkOiIlZCBkYXlzIixNOiJhIG1vbnRoIixNTToiJWQgbW9udGhzIix5OiJhIHllYXIiLHl5OiIlZCB5ZWFycyJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0oc3R8bmR8cmR8dGgpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7dmFyIGI9bnVtYmVyJTEwLG91dHB1dD0xPT1+fihudW1iZXIlMTAwLzEwKT8idGgiOjE9PT1iPyJzdCI6Mj09PWI/Im5kIjozPT09Yj8icmQiOiJ0aCI7cmV0dXJuIG51bWJlcitvdXRwdXR9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxEb0hyOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgc3VmZml4ZXM9ezE6IidpbmNpIiw1OiInaW5jaSIsODoiJ2luY2kiLDcwOiInaW5jaSIsODA6IidpbmNpIiwyOiInbmNpIiw3OiInbmNpIiwyMDoiJ25jaSIsNTA6IiduY2kiLDM6IifDvG5jw7wiLDQ6IifDvG5jw7wiLDEwMDoiJ8O8bmPDvCIsNjoiJ25jxLEiLDk6Iid1bmN1IiwxMDoiJ3VuY3UiLDMwOiIndW5jdSIsNjA6IifEsW5jxLEiLDkwOiInxLFuY8SxIn07bW9tZW50LmRlZmluZUxvY2FsZSgidHIiLHttb250aHM6Ik9jYWtfxZ51YmF0X01hcnRfTmlzYW5fTWF5xLFzX0hhemlyYW5fVGVtbXV6X0HEn3VzdG9zX0V5bMO8bF9Fa2ltX0thc8SxbV9BcmFsxLFrIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJPY2FfxZ51Yl9NYXJfTmlzX01heV9IYXpfVGVtX0HEn3VfRXlsX0VraV9LYXNfQXJhIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJQYXphcl9QYXphcnRlc2lfU2FsxLFfw4dhcsWfYW1iYV9QZXLFn2VtYmVfQ3VtYV9DdW1hcnRlc2kiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiUGF6X1B0c19TYWxfw4dhcl9QZXJfQ3VtX0N0cyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiUHpfUHRfU2Ffw4dhX1BlX0N1X0N0Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2J1Z8O8biBzYWF0XSBMVCIsbmV4dERheToiW3lhcsSxbiBzYWF0XSBMVCIsbmV4dFdlZWs6IltnZWxlY2VrXSBkZGRkIFtzYWF0XSBMVCIsbGFzdERheToiW2TDvG5dIExUIixsYXN0V2VlazoiW2dlw6dlbl0gZGRkZCBbc2FhdF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIHNvbnJhIixwYXN0OiIlcyDDtm5jZSIsczoiYmlya2HDpyBzYW5peWUiLHNzOiIlZCBzYW5peWUiLG06ImJpciBkYWtpa2EiLG1tOiIlZCBkYWtpa2EiLGg6ImJpciBzYWF0IixoaDoiJWQgc2FhdCIsZDoiYmlyIGfDvG4iLGRkOiIlZCBnw7xuIixNOiJiaXIgYXkiLE1NOiIlZCBheSIseToiYmlyIHnEsWwiLHl5OiIlZCB5xLFsIn0sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIscGVyaW9kKXtzd2l0Y2gocGVyaW9kKXtjYXNlImQiOmNhc2UiRCI6Y2FzZSJEbyI6Y2FzZSJERCI6cmV0dXJuIG51bWJlcjtkZWZhdWx0OmlmKDA9PT1udW1iZXIpcmV0dXJuIG51bWJlcisiJ8SxbmPEsSI7dmFyIGE9bnVtYmVyJTEwLGI9bnVtYmVyJTEwMC1hLGM9MTAwPD1udW1iZXI/MTAwOm51bGw7cmV0dXJuIG51bWJlcisoc3VmZml4ZXNbYV18fHN1ZmZpeGVzW2JdfHxzdWZmaXhlc1tjXSl9fSx3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sRHhRdjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZGEiLHttb250aHM6ImphbnVhcl9mZWJydWFyX21hcnRzX2FwcmlsX21hal9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW5fZmViX21hcl9hcHJfbWFqX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2RlYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic8O4bmRhZ19tYW5kYWdfdGlyc2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbMO4cmRhZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJzw7huX21hbl90aXJfb25zX3Rvcl9mcmVfbMO4ciIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoic8O4X21hX3RpX29uX3RvX2ZyX2zDuCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBbZC5dIEQuIE1NTU0gWVlZWSBba2wuXSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbaSBkYWcga2wuXSBMVCIsbmV4dERheToiW2kgbW9yZ2VuIGtsLl0gTFQiLG5leHRXZWVrOiJww6UgZGRkZCBba2wuXSBMVCIsbGFzdERheToiW2kgZ8OlciBrbC5dIExUIixsYXN0V2VlazoiW2ldIGRkZGRbcyBrbC5dIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJvbSAlcyIscGFzdDoiJXMgc2lkZW4iLHM6ImbDpSBzZWt1bmRlciIsc3M6IiVkIHNla3VuZGVyIixtOiJldCBtaW51dCIsbW06IiVkIG1pbnV0dGVyIixoOiJlbiB0aW1lIixoaDoiJWQgdGltZXIiLGQ6ImVuIGRhZyIsZGQ6IiVkIGRhZ2UiLE06ImVuIG3DpW5lZCIsTU06IiVkIG3DpW5lZGVyIix5OiJldCDDpXIiLHl5OiIlZCDDpXIifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LER6aTA6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoInRsLXBoIix7bW9udGhzOiJFbmVyb19QZWJyZXJvX01hcnNvX0FicmlsX01heW9fSHVueW9fSHVseW9fQWdvc3RvX1NldHllbWJyZV9Pa3R1YnJlX05vYnllbWJyZV9EaXN5ZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IkVuZV9QZWJfTWFyX0Ficl9NYXlfSHVuX0h1bF9BZ29fU2V0X09rdF9Ob2JfRGlzIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJMaW5nZ29fTHVuZXNfTWFydGVzX01peWVya3VsZXNfSHV3ZWJlc19CaXllcm5lc19TYWJhZG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiTGluX0x1bl9NYXJfTWl5X0h1d19CaXlfU2FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJMaV9MdV9NYV9NaV9IdV9CaV9TYWIiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiTU0vRC9ZWVlZIixMTDoiTU1NTSBELCBZWVlZIixMTEw6Ik1NTU0gRCwgWVlZWSBISDptbSIsTExMTDoiZGRkZCwgTU1NTSBERCwgWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJMVCBbbmdheW9uZyBhcmF3XSIsbmV4dERheToiW0J1a2FzIG5nXSBMVCIsbmV4dFdlZWs6IkxUIFtzYSBzdXN1bm9kIG5hXSBkZGRkIixsYXN0RGF5OiJMVCBba2FoYXBvbl0iLGxhc3RXZWVrOiJMVCBbbm9vbmcgbmFrYXJhYW5nXSBkZGRkIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJzYSBsb29iIG5nICVzIixwYXN0OiIlcyBhbmcgbmFrYWxpcGFzIixzOiJpbGFuZyBzZWd1bmRvIixzczoiJWQgc2VndW5kbyIsbToiaXNhbmcgbWludXRvIixtbToiJWQgbWludXRvIixoOiJpc2FuZyBvcmFzIixoaDoiJWQgb3JhcyIsZDoiaXNhbmcgYXJhdyIsZGQ6IiVkIGFyYXciLE06ImlzYW5nIGJ1d2FuIixNTToiJWQgYnV3YW4iLHk6ImlzYW5nIHRhb24iLHl5OiIlZCB0YW9uIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3JldHVybiBudW1iZXJ9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiRStsViI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciB0cmFuc2xhdG9yPXt3b3Jkczp7c3M6WyLRgdC10LrRg9C90LTQsCIsItGB0LXQutGD0L3QtNC1Iiwi0YHQtdC60YPQvdC00LgiXSxtOlsi0ZjQtdC00LDQvSDQvNC40L3Rg9GCIiwi0ZjQtdC00L3QtSDQvNC40L3Rg9GC0LUiXSxtbTpbItC80LjQvdGD0YIiLCLQvNC40L3Rg9GC0LUiLCLQvNC40L3Rg9GC0LAiXSxoOlsi0ZjQtdC00LDQvSDRgdCw0YIiLCLRmNC10LTQvdC+0LMg0YHQsNGC0LAiXSxoaDpbItGB0LDRgiIsItGB0LDRgtCwIiwi0YHQsNGC0LgiXSxkZDpbItC00LDQvSIsItC00LDQvdCwIiwi0LTQsNC90LAiXSxNTTpbItC80LXRgdC10YYiLCLQvNC10YHQtdGG0LAiLCLQvNC10YHQtdGG0LgiXSx5eTpbItCz0L7QtNC40L3QsCIsItCz0L7QtNC40L3QtSIsItCz0L7QtNC40L3QsCJdfSxjb3JyZWN0R3JhbW1hdGljYWxDYXNlOmZ1bmN0aW9uKG51bWJlcix3b3JkS2V5KXtyZXR1cm4gMT09PW51bWJlcj93b3JkS2V5WzBdOjI8PW51bWJlciYmbnVtYmVyPD00P3dvcmRLZXlbMV06d29yZEtleVsyXX0sdHJhbnNsYXRlOmZ1bmN0aW9uKG51bWJlcix3aXRob3V0U3VmZml4LGtleSl7dmFyIHdvcmRLZXk9dHJhbnNsYXRvci53b3Jkc1trZXldO3JldHVybiAxPT09a2V5Lmxlbmd0aD93aXRob3V0U3VmZml4P3dvcmRLZXlbMF06d29yZEtleVsxXTpudW1iZXIrIiAiK3RyYW5zbGF0b3IuY29ycmVjdEdyYW1tYXRpY2FsQ2FzZShudW1iZXIsd29yZEtleSl9fTttb21lbnQuZGVmaW5lTG9jYWxlKCJzci1jeXJsIix7bW9udGhzOiLRmNCw0L3Rg9Cw0YBf0YTQtdCx0YDRg9Cw0YBf0LzQsNGA0YJf0LDQv9GA0LjQu1/QvNCw0Zhf0ZjRg9C9X9GY0YPQu1/QsNCy0LPRg9GB0YJf0YHQtdC/0YLQtdC80LHQsNGAX9C+0LrRgtC+0LHQsNGAX9C90L7QstC10LzQsdCw0YBf0LTQtdGG0LXQvNCx0LDRgCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi0ZjQsNC9Ll/RhNC10LEuX9C80LDRgC5f0LDQv9GALl/QvNCw0Zhf0ZjRg9C9X9GY0YPQu1/QsNCy0LMuX9GB0LXQvy5f0L7QutGCLl/QvdC+0LIuX9C00LXRhi4iLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoi0L3QtdC00LXRmdCwX9C/0L7QvdC10LTQtdGZ0LDQul/Rg9GC0L7RgNCw0Lpf0YHRgNC10LTQsF/Rh9C10YLQstGA0YLQsNC6X9C/0LXRgtCw0Lpf0YHRg9Cx0L7RgtCwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItC90LXQtC5f0L/QvtC9Ll/Rg9GC0L4uX9GB0YDQtS5f0YfQtdGCLl/Qv9C10YIuX9GB0YPQsS4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItC90LVf0L/Qvl/Rg9GCX9GB0YBf0YfQtV/Qv9C1X9GB0YMiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0LTQsNC90LDRgSDRg10gTFQiLG5leHREYXk6IlvRgdGD0YLRgNCwINGDXSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJb0YNdIFvQvdC10LTQtdGZ0YNdIFvRg10gTFQiO2Nhc2UgMzpyZXR1cm4iW9GDXSBb0YHRgNC10LTRg10gW9GDXSBMVCI7Y2FzZSA2OnJldHVybiJb0YNdIFvRgdGD0LHQvtGC0YNdIFvRg10gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW9GDXSBkZGRkIFvRg10gTFQifX0sbGFzdERheToiW9GY0YPRh9C1INGDXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm5bIlvQv9GA0L7RiNC70LVdIFvQvdC10LTQtdGZ0LVdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvQv9C+0L3QtdC00LXRmdC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvRg9GC0L7RgNC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C1XSBb0YHRgNC10LTQtV0gW9GDXSBMVCIsIlvQv9GA0L7RiNC70L7Qs10gW9GH0LXRgtCy0YDRgtC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvQv9C10YLQutCwXSBb0YNdIExUIiwiW9C/0YDQvtGI0LvQtV0gW9GB0YPQsdC+0YLQtV0gW9GDXSBMVCJdW3RoaXMuZGF5KCldfSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQt9CwICVzIixwYXN0OiLQv9GA0LUgJXMiLHM6ItC90LXQutC+0LvQuNC60L4g0YHQtdC60YPQvdC00LgiLHNzOnRyYW5zbGF0b3IudHJhbnNsYXRlLG06dHJhbnNsYXRvci50cmFuc2xhdGUsbW06dHJhbnNsYXRvci50cmFuc2xhdGUsaDp0cmFuc2xhdG9yLnRyYW5zbGF0ZSxoaDp0cmFuc2xhdG9yLnRyYW5zbGF0ZSxkOiLQtNCw0L0iLGRkOnRyYW5zbGF0b3IudHJhbnNsYXRlLE06ItC80LXRgdC10YYiLE1NOnRyYW5zbGF0b3IudHJhbnNsYXRlLHk6ItCz0L7QtNC40L3RgyIseXk6dHJhbnNsYXRvci50cmFuc2xhdGV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sRUppeTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwO3ZhciBfaXRlcmF0b3IyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygiRisybyIpKSxfc3ltYm9sMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oIitKUEwiKSksX3R5cGVvZj0iZnVuY3Rpb24iPT10eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCYmInN5bWJvbCI9PXR5cGVvZiBfaXRlcmF0b3IyLmRlZmF1bHQ/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9ian06ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiYiZnVuY3Rpb24iPT10eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCYmb2JqLmNvbnN0cnVjdG9yPT09X3N5bWJvbDIuZGVmYXVsdCYmb2JqIT09X3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIG9ian07ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9fWV4cG9ydHMuZGVmYXVsdD0iZnVuY3Rpb24iPT10eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCYmInN5bWJvbCI9PT1fdHlwZW9mKF9pdGVyYXRvcjIuZGVmYXVsdCk/ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdm9pZCAwPT09b2JqPyJ1bmRlZmluZWQiOl90eXBlb2Yob2JqKX06ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqJiYiZnVuY3Rpb24iPT10eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCYmb2JqLmNvbnN0cnVjdG9yPT09X3N5bWJvbDIuZGVmYXVsdCYmb2JqIT09X3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGU/InN5bWJvbCI6dm9pZCAwPT09b2JqPyJ1bmRlZmluZWQiOl90eXBlb2Yob2JqKX19LEVLMEU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBJbnRlcm5hbE1hcCxnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLGVhY2g9X193ZWJwYWNrX3JlcXVpcmVfXygiQ2trVCIpKDApLHJlZGVmaW5lPV9fd2VicGFja19yZXF1aXJlX18oIktyb0oiKSxtZXRhPV9fd2VicGFja19yZXF1aXJlX18oIlo2dkYiKSxhc3NpZ249X193ZWJwYWNrX3JlcXVpcmVfXygiY3pOSyIpLHdlYWs9X193ZWJwYWNrX3JlcXVpcmVfXygiWkQ2NyIpLGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKSx2YWxpZGF0ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJzNXFZIiksTkFUSVZFX1dFQUtfTUFQPV9fd2VicGFja19yZXF1aXJlX18oInM1cVkiKSxJU19JRTExPSFnbG9iYWwuQWN0aXZlWE9iamVjdCYmIkFjdGl2ZVhPYmplY3QiaW4gZ2xvYmFsLGdldFdlYWs9bWV0YS5nZXRXZWFrLGlzRXh0ZW5zaWJsZT1PYmplY3QuaXNFeHRlbnNpYmxlLHVuY2F1Z2h0RnJvemVuU3RvcmU9d2Vhay51ZnN0b3JlLHdyYXBwZXI9ZnVuY3Rpb24oZ2V0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZ2V0KHRoaXMsMDxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1swXTp2b2lkIDApfX0sbWV0aG9kcz17Z2V0OmZ1bmN0aW9uKGtleSl7aWYoaXNPYmplY3Qoa2V5KSl7dmFyIGRhdGE9Z2V0V2VhayhrZXkpO3JldHVybiEwPT09ZGF0YT91bmNhdWdodEZyb3plblN0b3JlKHZhbGlkYXRlKHRoaXMsIldlYWtNYXAiKSkuZ2V0KGtleSk6ZGF0YT9kYXRhW3RoaXMuX2ldOnZvaWQgMH19LHNldDpmdW5jdGlvbihrZXksdmFsdWUpe3JldHVybiB3ZWFrLmRlZih2YWxpZGF0ZSh0aGlzLCJXZWFrTWFwIiksa2V5LHZhbHVlKX19LCRXZWFrTWFwPW1vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIjRMaUQiKSgiV2Vha01hcCIsd3JhcHBlcixtZXRob2RzLHdlYWssITAsITApO05BVElWRV9XRUFLX01BUCYmSVNfSUUxMSYmKGFzc2lnbigoSW50ZXJuYWxNYXA9d2Vhay5nZXRDb25zdHJ1Y3Rvcih3cmFwcGVyLCJXZWFrTWFwIikpLnByb3RvdHlwZSxtZXRob2RzKSxtZXRhLk5FRUQ9ITAsZWFjaChbImRlbGV0ZSIsImhhcyIsImdldCIsInNldCJdLGZ1bmN0aW9uKGtleSl7dmFyIHByb3RvPSRXZWFrTWFwLnByb3RvdHlwZSxtZXRob2Q9cHJvdG9ba2V5XTtyZWRlZmluZShwcm90byxrZXksZnVuY3Rpb24oYSxiKXtpZighaXNPYmplY3QoYSl8fGlzRXh0ZW5zaWJsZShhKSlyZXR1cm4gbWV0aG9kLmNhbGwodGhpcyxhLGIpO3RoaXMuX2Z8fCh0aGlzLl9mPW5ldyBJbnRlcm5hbE1hcCk7dmFyIHJlc3VsdD10aGlzLl9mW2tleV0oYSxiKTtyZXR1cm4ic2V0Ij09a2V5P3RoaXM6cmVzdWx0fSl9KSl9LEVPZ1c6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoInRoIix7bW9udGhzOiLguKHguIHguKPguLLguITguKFf4LiB4Li44Lih4Lig4Liy4Lie4Lix4LiZ4LiY4LmMX+C4oeC4teC4meC4suC4hOC4oV/guYDguKHguKnguLLguKLguJlf4Lie4Lik4Lip4Lig4Liy4LiE4LihX+C4oeC4tOC4luC4uOC4meC4suC4ouC4mV/guIHguKPguIHguI7guLLguITguKFf4Liq4Li04LiH4Lir4Liy4LiE4LihX+C4geC4seC4meC4ouC4suC4ouC4mV/guJXguLjguKXguLLguITguKFf4Lie4Lik4Lio4LiI4Li04LiB4Liy4Lii4LiZX+C4mOC4seC4meC4p+C4suC4hOC4oSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4LihLuC4hC5f4LiBLuC4ni5f4Lih4Li1LuC4hC5f4LmA4LihLuC4oi5f4LieLuC4hC5f4Lih4Li0LuC4oi5f4LiBLuC4hC5f4LiqLuC4hC5f4LiBLuC4oi5f4LiVLuC4hC5f4LieLuC4oi5f4LiYLuC4hC4iLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoi4Lit4Liy4LiX4Li04LiV4Lii4LmMX+C4iOC4seC4meC4l+C4o+C5jF/guK3guLHguIfguITguLLguKNf4Lie4Li44LiYX+C4nuC4pOC4q+C4seC4quC4muC4lOC4tV/guKjguLjguIHguKPguYxf4LmA4Liq4Liy4Lij4LmMIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC4reC4suC4l+C4tOC4leC4ouC5jF/guIjguLHguJnguJfguKPguYxf4Lit4Lix4LiH4LiE4Liy4LijX+C4nuC4uOC4mF/guJ7guKTguKvguLHguKpf4Lio4Li44LiB4Lij4LmMX+C5gOC4quC4suC4o+C5jCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4Lit4LiyLl/guIguX+C4rS5f4LieLl/guJ7guKQuX+C4qC5f4LiqLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSDguYDguKfguKXguLIgSDptbSIsTExMTDoi4Lin4Lix4LiZZGRkZOC4l+C4teC5iCBEIE1NTU0gWVlZWSDguYDguKfguKXguLIgSDptbSJ9LG1lcmlkaWVtUGFyc2U6L+C4geC5iOC4reC4meC5gOC4l+C4teC5iOC4ouC4h3zguKvguKXguLHguIfguYDguJfguLXguYjguKLguIcvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybiLguKvguKXguLHguIfguYDguJfguLXguYjguKLguIciPT09aW5wdXR9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDEyPyLguIHguYjguK3guJnguYDguJfguLXguYjguKLguIciOiLguKvguKXguLHguIfguYDguJfguLXguYjguKLguIcifSxjYWxlbmRhcjp7c2FtZURheToiW+C4p+C4seC4meC4meC4teC5iSDguYDguKfguKXguLJdIExUIixuZXh0RGF5OiJb4Lie4Lij4Li44LmI4LiH4LiZ4Li14LmJIOC5gOC4p+C4peC4sl0gTFQiLG5leHRXZWVrOiJkZGRkW+C4q+C4meC5ieC4siDguYDguKfguKXguLJdIExUIixsYXN0RGF5OiJb4LmA4Lih4Li34LmI4Lit4Lin4Liy4LiZ4LiZ4Li14LmJIOC5gOC4p+C4peC4sl0gTFQiLGxhc3RXZWVrOiJb4Lin4Lix4LiZXWRkZGRb4LiX4Li14LmI4LmB4Lil4LmJ4LinIOC5gOC4p+C4peC4sl0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IuC4reC4teC4gSAlcyIscGFzdDoiJXPguJfguLXguYjguYHguKXguYnguKciLHM6IuC5hOC4oeC5iOC4geC4teC5iOC4p+C4tOC4meC4suC4l+C4tSIsc3M6IiVkIOC4p+C4tOC4meC4suC4l+C4tSIsbToiMSDguJnguLLguJfguLUiLG1tOiIlZCDguJnguLLguJfguLUiLGg6IjEg4LiK4Lix4LmI4Lin4LmC4Lih4LiHIixoaDoiJWQg4LiK4Lix4LmI4Lin4LmC4Lih4LiHIixkOiIxIOC4p+C4seC4mSIsZGQ6IiVkIOC4p+C4seC4mSIsTToiMSDguYDguJTguLfguK3guJkiLE1NOiIlZCDguYDguJTguLfguK3guJkiLHk6IjEg4Lib4Li1Iix5eToiJWQg4Lib4Li1In19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sRVdtQzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgY29mPV9fd2VicGFja19yZXF1aXJlX18oIkxaV3QiKTttb2R1bGUuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhcmcpe3JldHVybiJBcnJheSI9PWNvZihhcmcpfX0sRVhNajpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQsQ29uc3RydWN0b3IsbmFtZSxmb3JiaWRkZW5GaWVsZCl7aWYoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKXx8dm9pZCAwIT09Zm9yYmlkZGVuRmllbGQmJmZvcmJpZGRlbkZpZWxkIGluIGl0KXRocm93IFR5cGVFcnJvcihuYW1lKyI6IGluY29ycmVjdCBpbnZvY2F0aW9uISIpO3JldHVybiBpdH19LEVlbUg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIHBJRT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJVcWNGIiksY3JlYXRlRGVzYz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJSakQvIiksdG9JT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oImFDRmoiKSx0b1ByaW1pdGl2ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhcG1UIiksaGFzPV9fd2VicGFja19yZXF1aXJlX18oImFhZ3giKSxJRThfRE9NX0RFRklORT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ4cHFsIiksZ09QRD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2V4cG9ydHMuZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJuaDRnIik/Z09QRDpmdW5jdGlvbihPLFApe2lmKE89dG9JT2JqZWN0KE8pLFA9dG9QcmltaXRpdmUoUCwhMCksSUU4X0RPTV9ERUZJTkUpdHJ5e3JldHVybiBnT1BEKE8sUCl9Y2F0Y2goZSl7fWlmKGhhcyhPLFApKXJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sUCksT1tQXSl9fSwiRXcrVCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLCR0YXNrPV9fd2VicGFja19yZXF1aXJlX18oIkdaRXUiKTskZXhwb3J0KCRleHBvcnQuRyskZXhwb3J0LkIse3NldEltbWVkaWF0ZTokdGFzay5zZXQsY2xlYXJJbW1lZGlhdGU6JHRhc2suY2xlYXJ9KX0sIkYrMm8iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPXtkZWZhdWx0Ol9fd2VicGFja19yZXF1aXJlX18oIjJOYjAiKSxfX2VzTW9kdWxlOiEwfX0sRkVqcjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygiT0d0ZiIpKCJzdHJpa2UiLGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjcmVhdGVIVE1MKHRoaXMsInN0cmlrZSIsIiIsIiIpfX0pfSxGSlc1OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBkUD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJoc3dhIiksYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLGdldEtleXM9X193ZWJwYWNrX3JlcXVpcmVfXygiRFZnQSIpO21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIm5oNGciKT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbihPLFByb3BlcnRpZXMpe2FuT2JqZWN0KE8pO2Zvcih2YXIgUCxrZXlzPWdldEtleXMoUHJvcGVydGllcyksbGVuZ3RoPWtleXMubGVuZ3RoLGk9MDtpPGxlbmd0aDspZFAuZihPLFA9a2V5c1tpKytdLFByb3BlcnRpZXNbUF0pO3JldHVybiBPfX0sRkxscjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlAsIlN0cmluZyIse3JlcGVhdDpfX3dlYnBhY2tfcmVxdWlyZV9fKCJsMFJuIil9KX0sRmF3NTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCI3RERnIikoIkludDE2IiwyLGZ1bmN0aW9uKGluaXQpe3JldHVybiBmdW5jdGlvbihkYXRhLGJ5dGVPZmZzZXQsbGVuZ3RoKXtyZXR1cm4gaW5pdCh0aGlzLGRhdGEsYnl0ZU9mZnNldCxsZW5ndGgpfX0pfSxGbFFmOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGF0PV9fd2VicGFja19yZXF1aXJlX18oImNjRTciKSghMCk7X193ZWJwYWNrX3JlcXVpcmVfXygiTVBGcCIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihpdGVyYXRlZCl7dGhpcy5fdD1TdHJpbmcoaXRlcmF0ZWQpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgcG9pbnQsTz10aGlzLl90LGluZGV4PXRoaXMuX2k7cmV0dXJuIGluZGV4Pj1PLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9Oihwb2ludD0kYXQoTyxpbmRleCksdGhpcy5faSs9cG9pbnQubGVuZ3RoLHt2YWx1ZTpwb2ludCxkb25lOiExfSl9KX0sRmxzRDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpO19fd2VicGFja19yZXF1aXJlX18oIlh0cjgiKSgiaXNFeHRlbnNpYmxlIixmdW5jdGlvbigkaXNFeHRlbnNpYmxlKXtyZXR1cm4gZnVuY3Rpb24oaXQpe3JldHVybiEhaXNPYmplY3QoaXQpJiYoISRpc0V4dGVuc2libGV8fCRpc0V4dGVuc2libGUoaXQpKX19KX0sRnBIYTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZiIuc3BsaXQoIiwiKX0sRzBVeTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgibXQiLHttb250aHM6Ikphbm5hcl9GcmFyX01hcnp1X0FwcmlsX01lamp1X8SgdW5qdV9MdWxqdV9Bd3dpc3N1X1NldHRlbWJydV9PdHR1YnJ1X05vdmVtYnJ1X0RpxItlbWJydSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZyYV9NYXJfQXByX01lal/EoHVuX0x1bF9Bd3dfU2V0X090dF9Ob3ZfRGnEiyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiSWwtxKZhZGRfSXQtVG5lam5fSXQtVGxpZXRhX0wtRXJiZ8SnYV9JbC3EpmFtaXNfSWwtxKBpbWfEp2FfSXMtU2lidCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLEpmFkX1RuZV9UbGlfRXJiX8SmYW1fxKBpbV9TaWIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IsSmYV9Ubl9UbF9Fcl/EpmFfxKBpX1NpIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0lsbHVtIGZpbC1dTFQiLG5leHREYXk6IltHxKdhZGEgZmlsLV1MVCIsbmV4dFdlZWs6ImRkZGQgW2ZpbC1dTFQiLGxhc3REYXk6IltJbC1iaWVyYcSnIGZpbC1dTFQiLGxhc3RXZWVrOiJkZGRkIFtsaSBnxKdhZGRhXSBbZmlsLV1MVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZuKAmSAlcyIscGFzdDoiJXMgaWx1IixzOiJmdGl0IHNla29uZGkiLHNzOiIlZCBzZWtvbmRpIixtOiJtaW51dGEiLG1tOiIlZCBtaW51dGkiLGg6InNpZWfEp2EiLGhoOiIlZCBzaWVnxKdhdCIsZDoixKF1cm5hdGEiLGRkOiIlZCDEoXJhbmV0IixNOiJ4YWhhciIsTU06IiVkIHhodXIiLHk6InNlbmEiLHl5OiIlZCBzbmkifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9wrovLG9yZGluYWw6IiVkwroiLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxHOE1vOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI5M0k0Iik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQsUyl7aWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gaXQ7dmFyIGZuLHZhbDtpZihTJiYiZnVuY3Rpb24iPT10eXBlb2YoZm49aXQudG9TdHJpbmcpJiYhaXNPYmplY3QodmFsPWZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO2lmKCJmdW5jdGlvbiI9PXR5cGVvZihmbj1pdC52YWx1ZU9mKSYmIWlzT2JqZWN0KHZhbD1mbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDtpZighUyYmImZ1bmN0aW9uIj09dHlwZW9mKGZuPWl0LnRvU3RyaW5nKSYmIWlzT2JqZWN0KHZhbD1mbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDt0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpfX0sR05BZTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJHBhcnNlSW50PV9fd2VicGFja19yZXF1aXJlX18oIlBLVXIiKTskZXhwb3J0KCRleHBvcnQuRyskZXhwb3J0LkYqKHBhcnNlSW50IT0kcGFyc2VJbnQpLHtwYXJzZUludDokcGFyc2VJbnR9KX0sR1FlRTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXttb2R1bGUuZXhwb3J0cz17ZGVmYXVsdDpfX3dlYnBhY2tfcmVxdWlyZV9fKCJpcTR2IiksX19lc01vZHVsZTohMH19LEdaRXU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGRlZmVyLGNoYW5uZWwscG9ydCxjdHg9X193ZWJwYWNrX3JlcXVpcmVfXygibTBQcCIpLGludm9rZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNZlFOIiksaHRtbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIrckx2IiksY2VsPV9fd2VicGFja19yZXF1aXJlX18oIkl3NzEiKSxnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLHByb2Nlc3M9Z2xvYmFsLnByb2Nlc3Msc2V0VGFzaz1nbG9iYWwuc2V0SW1tZWRpYXRlLGNsZWFyVGFzaz1nbG9iYWwuY2xlYXJJbW1lZGlhdGUsTWVzc2FnZUNoYW5uZWw9Z2xvYmFsLk1lc3NhZ2VDaGFubmVsLERpc3BhdGNoPWdsb2JhbC5EaXNwYXRjaCxjb3VudGVyPTAscXVldWU9e30scnVuPWZ1bmN0aW9uKCl7dmFyIGlkPSt0aGlzO2lmKHF1ZXVlLmhhc093blByb3BlcnR5KGlkKSl7dmFyIGZuPXF1ZXVlW2lkXTtkZWxldGUgcXVldWVbaWRdLGZuKCl9fSxsaXN0ZW5lcj1mdW5jdGlvbihldmVudCl7cnVuLmNhbGwoZXZlbnQuZGF0YSl9O3NldFRhc2smJmNsZWFyVGFza3x8KHNldFRhc2s9ZnVuY3Rpb24oZm4pe2Zvcih2YXIgYXJncz1bXSxpPTE7YXJndW1lbnRzLmxlbmd0aD5pOylhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO3JldHVybiBxdWV1ZVsrK2NvdW50ZXJdPWZ1bmN0aW9uKCl7aW52b2tlKCJmdW5jdGlvbiI9PXR5cGVvZiBmbj9mbjpGdW5jdGlvbihmbiksYXJncyl9LGRlZmVyKGNvdW50ZXIpLGNvdW50ZXJ9LGNsZWFyVGFzaz1mdW5jdGlvbihpZCl7ZGVsZXRlIHF1ZXVlW2lkXX0sInByb2Nlc3MiPT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMWld0IikocHJvY2Vzcyk/ZGVmZXI9ZnVuY3Rpb24oaWQpe3Byb2Nlc3MubmV4dFRpY2soY3R4KHJ1bixpZCwxKSl9OkRpc3BhdGNoJiZEaXNwYXRjaC5ub3c/ZGVmZXI9ZnVuY3Rpb24oaWQpe0Rpc3BhdGNoLm5vdyhjdHgocnVuLGlkLDEpKX06TWVzc2FnZUNoYW5uZWw/KHBvcnQ9KGNoYW5uZWw9bmV3IE1lc3NhZ2VDaGFubmVsKS5wb3J0MixjaGFubmVsLnBvcnQxLm9ubWVzc2FnZT1saXN0ZW5lcixkZWZlcj1jdHgocG9ydC5wb3N0TWVzc2FnZSxwb3J0LDEpKTpnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhZ2xvYmFsLmltcG9ydFNjcmlwdHM/KGRlZmVyPWZ1bmN0aW9uKGlkKXtnbG9iYWwucG9zdE1lc3NhZ2UoaWQrIiIsIioiKX0sZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGxpc3RlbmVyLCExKSk6ZGVmZXI9Im9ucmVhZHlzdGF0ZWNoYW5nZSJpbiBjZWwoInNjcmlwdCIpP2Z1bmN0aW9uKGlkKXtodG1sLmFwcGVuZENoaWxkKGNlbCgic2NyaXB0IikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2h0bWwucmVtb3ZlQ2hpbGQodGhpcykscnVuLmNhbGwoaWQpfX06ZnVuY3Rpb24oaWQpe3NldFRpbWVvdXQoY3R4KHJ1bixpZCwxKSwwKX0pLG1vZHVsZS5leHBvcnRzPXtzZXQ6c2V0VGFzayxjbGVhcjpjbGVhclRhc2t9fSxINUdUOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxzY2FsZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCI2ZElUIiksZnJvdW5kPV9fd2VicGFja19yZXF1aXJlX18oImtjb1MiKTskZXhwb3J0KCRleHBvcnQuUywiTWF0aCIse2ZzY2FsZTpmdW5jdGlvbih4LGluTG93LGluSGlnaCxvdXRMb3csb3V0SGlnaCl7cmV0dXJuIGZyb3VuZChzY2FsZSh4LGluTG93LGluSGlnaCxvdXRMb3csb3V0SGlnaCkpfX0pfSxINmhmOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5Iik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXRlcmF0b3IsZm4sdmFsdWUsZW50cmllcyl7dHJ5e3JldHVybiBlbnRyaWVzP2ZuKGFuT2JqZWN0KHZhbHVlKVswXSx2YWx1ZVsxXSk6Zm4odmFsdWUpfWNhdGNoKGUpe3ZhciByZXQ9aXRlcmF0b3IucmV0dXJuO3Rocm93IHZvaWQgMCE9PXJldCYmYW5PYmplY3QocmV0LmNhbGwoaXRlcmF0b3IpKSxlfX19LEg4RUQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHJlbGF0aXZlVGltZVdpdGhQbHVyYWwobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5KXt2YXIgbnVtLGZvcm1zLGZvcm1hdD17c3M6d2l0aG91dFN1ZmZpeD8i0YHQtdC60YPQvdC00LBf0YHQtdC60YPQvdC00Ytf0YHQtdC60YPQvdC0Ijoi0YHQtdC60YPQvdC00YNf0YHQtdC60YPQvdC00Ytf0YHQtdC60YPQvdC0IixtbTp3aXRob3V0U3VmZml4PyLRhdCy0ZbQu9GW0L3QsF/RhdCy0ZbQu9GW0L3Ri1/RhdCy0ZbQu9GW0L0iOiLRhdCy0ZbQu9GW0L3Rg1/RhdCy0ZbQu9GW0L3Ri1/RhdCy0ZbQu9GW0L0iLGhoOndpdGhvdXRTdWZmaXg/ItCz0LDQtNC30ZbQvdCwX9Cz0LDQtNC30ZbQvdGLX9Cz0LDQtNC30ZbQvSI6ItCz0LDQtNC30ZbQvdGDX9Cz0LDQtNC30ZbQvdGLX9Cz0LDQtNC30ZbQvSIsZGQ6ItC00LfQtdC90Yxf0LTQvdGWX9C00LfRkdC9IixNTToi0LzQtdGB0Y/Rhl/QvNC10YHRj9GG0Ytf0LzQtdGB0Y/RhtCw0Z4iLHl5OiLQs9C+0LRf0LPQsNC00Ytf0LPQsNC00L7RniJ9O3JldHVybiJtIj09PWtleT93aXRob3V0U3VmZml4PyLRhdCy0ZbQu9GW0L3QsCI6ItGF0LLRltC70ZbQvdGDIjoiaCI9PT1rZXk/d2l0aG91dFN1ZmZpeD8i0LPQsNC00LfRltC90LAiOiLQs9Cw0LTQt9GW0L3RgyI6bnVtYmVyKyIgIisobnVtPStudW1iZXIsZm9ybXM9Zm9ybWF0W2tleV0uc3BsaXQoIl8iKSxudW0lMTA9PTEmJm51bSUxMDAhPTExP2Zvcm1zWzBdOjI8PW51bSUxMCYmbnVtJTEwPD00JiYobnVtJTEwMDwxMHx8MjA8PW51bSUxMDApP2Zvcm1zWzFdOmZvcm1zWzJdKX1tb21lbnQuZGVmaW5lTG9jYWxlKCJiZSIse21vbnRoczp7Zm9ybWF0OiLRgdGC0YPQtNC30LXQvdGPX9C70Y7RgtCw0LPQsF/RgdCw0LrQsNCy0ZbQutCwX9C60YDQsNGB0LDQstGW0LrQsF/RgtGA0LDRntC90Y9f0YfRjdGA0LLQtdC90Y9f0LvRltC/0LXQvdGPX9C20L3RltGe0L3Rj1/QstC10YDQsNGB0L3Rj1/QutCw0YHRgtGA0YvRh9C90ZbQutCwX9C70ZbRgdGC0LDQv9Cw0LTQsF/RgdC90LXQttC90Y8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToi0YHRgtGD0LTQt9C10L3RjF/Qu9GO0YLRi1/RgdCw0LrQsNCy0ZbQul/QutGA0LDRgdCw0LLRltC6X9GC0YDQsNCy0LXQvdGMX9GH0Y3RgNCy0LXQvdGMX9C70ZbQv9C10L3RjF/QttC90ZbQstC10L3RjF/QstC10YDQsNGB0LXQvdGMX9C60LDRgdGC0YDRi9GH0L3RltC6X9C70ZbRgdGC0LDQv9Cw0LRf0YHQvdC10LbQsNC90YwiLnNwbGl0KCJfIil9LG1vbnRoc1Nob3J0OiLRgdGC0YPQtF/Qu9GO0YJf0YHQsNC6X9C60YDQsNGBX9GC0YDQsNCyX9GH0Y3RgNCyX9C70ZbQv1/QttC90ZbQsl/QstC10YBf0LrQsNGB0YJf0LvRltGB0YJf0YHQvdC10LYiLnNwbGl0KCJfIiksd2Vla2RheXM6e2Zvcm1hdDoi0L3Rj9C00LfQtdC70Y5f0L/QsNC90Y/QtNC30LXQu9Cw0Lpf0LDRntGC0L7RgNCw0Lpf0YHQtdGA0LDQtNGDX9GH0LDRhtCy0LXRgF/Qv9GP0YLQvdGW0YbRg1/RgdGD0LHQvtGC0YMiLnNwbGl0KCJfIiksc3RhbmRhbG9uZToi0L3Rj9C00LfQtdC70Y9f0L/QsNC90Y/QtNC30LXQu9Cw0Lpf0LDRntGC0L7RgNCw0Lpf0YHQtdGA0LDQtNCwX9GH0LDRhtCy0LXRgF/Qv9GP0YLQvdGW0YbQsF/RgdGD0LHQvtGC0LAiLnNwbGl0KCJfIiksaXNGb3JtYXQ6L1xbID9b0KPRg9GeXSA/KD860LzRltC90YPQu9GD0Y580L3QsNGB0YLRg9C/0L3Rg9GOKT8gP1xdID9kZGRkL30sd2Vla2RheXNTaG9ydDoi0L3QtF/Qv9C9X9Cw0YJf0YHRgF/Rh9GGX9C/0YJf0YHQsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0L3QtF/Qv9C9X9Cw0YJf0YHRgF/Rh9GGX9C/0YJf0YHQsSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkg0LMuIixMTEw6IkQgTU1NTSBZWVlZINCzLiwgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZINCzLiwgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9Ch0ZHQvdC90Y8g0Z5dIExUIixuZXh0RGF5OiJb0JfQsNGe0YLRgNCwINGeXSBMVCIsbGFzdERheToiW9Cj0YfQvtGA0LAg0Z5dIExUIixuZXh0V2VlazpmdW5jdGlvbigpe3JldHVybiJb0KNdIGRkZGQgW9GeXSBMVCJ9LGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpjYXNlIDM6Y2FzZSA1OmNhc2UgNjpyZXR1cm4iW9CjINC80ZbQvdGD0LvRg9GOXSBkZGRkIFvRnl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OnJldHVybiJb0KMg0LzRltC90YPQu9GLXSBkZGRkIFvRnl0gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi0L/RgNCw0LcgJXMiLHBhc3Q6IiVzINGC0LDQvNGDIixzOiLQvdC10LrQsNC70YzQutGWINGB0LXQutGD0L3QtCIsbTpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLG1tOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwsaDpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLGhoOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwsZDoi0LTQt9C10L3RjCIsZGQ6cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxNOiLQvNC10YHRj9GGIixNTTpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLHk6ItCz0L7QtCIseXk6cmVsYXRpdmVUaW1lV2l0aFBsdXJhbH0sbWVyaWRpZW1QYXJzZTov0L3QvtGH0Yt80YDQsNC90ZbRhtGLfNC00L3Rj3zQstC10YfQsNGA0LAvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybi9eKNC00L3Rj3zQstC10YfQsNGA0LApJC8udGVzdChpbnB1dCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDQ/ItC90L7Rh9GLIjpob3VyPDEyPyLRgNCw0L3RltGG0YsiOmhvdXI8MTc/ItC00L3RjyI6ItCy0LXRh9Cw0YDQsCJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0tKNGWfNGLfNCz0LApLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcixwZXJpb2Qpe3N3aXRjaChwZXJpb2Qpe2Nhc2UiTSI6Y2FzZSJkIjpjYXNlIkRERCI6Y2FzZSJ3IjpjYXNlIlciOnJldHVybiBudW1iZXIlMTAhPTImJm51bWJlciUxMCE9M3x8bnVtYmVyJTEwMD09MTJ8fG51bWJlciUxMDA9PTEzP251bWJlcisiLdGLIjpudW1iZXIrIi3RliI7Y2FzZSJEIjpyZXR1cm4gbnVtYmVyKyIt0LPQsCI7ZGVmYXVsdDpyZXR1cm4gbnVtYmVyfX0sd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCJIQUUvIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKiFfX3dlYnBhY2tfcmVxdWlyZV9fKCJuaDRnIiksIk9iamVjdCIse2RlZmluZVByb3BlcnR5Ol9fd2VicGFja19yZXF1aXJlX18oImhzd2EiKS5mfSl9LEhFd3Q6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBjdHg9X193ZWJwYWNrX3JlcXVpcmVfXygibTBQcCIpLCRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlMvai8iKSxjYWxsPV9fd2VicGFja19yZXF1aXJlX18oIkg2aGYiKSxpc0FycmF5SXRlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNNlFqIiksdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygibmU4aSIpLGNyZWF0ZVByb3BlcnR5PV9fd2VicGFja19yZXF1aXJlX18oIjhhN3IiKSxnZXRJdGVyRm49X193ZWJwYWNrX3JlcXVpcmVfXygiSis2ZSIpOyRleHBvcnQoJGV4cG9ydC5TKyRleHBvcnQuRiohX193ZWJwYWNrX3JlcXVpcmVfXygiWE1WaCIpKGZ1bmN0aW9uKGl0ZXIpe0FycmF5LmZyb20oaXRlcil9KSwiQXJyYXkiLHtmcm9tOmZ1bmN0aW9uKGFycmF5TGlrZSl7dmFyIGxlbmd0aCxyZXN1bHQsc3RlcCxpdGVyYXRvcixPPXRvT2JqZWN0KGFycmF5TGlrZSksQz0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LGFMZW49YXJndW1lbnRzLmxlbmd0aCxtYXBmbj0xPGFMZW4/YXJndW1lbnRzWzFdOnZvaWQgMCxtYXBwaW5nPXZvaWQgMCE9PW1hcGZuLGluZGV4PTAsaXRlckZuPWdldEl0ZXJGbihPKTtpZihtYXBwaW5nJiYobWFwZm49Y3R4KG1hcGZuLDI8YUxlbj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSxudWxsPT1pdGVyRm58fEM9PUFycmF5JiZpc0FycmF5SXRlcihpdGVyRm4pKWZvcihyZXN1bHQ9bmV3IEMobGVuZ3RoPXRvTGVuZ3RoKE8ubGVuZ3RoKSk7aW5kZXg8bGVuZ3RoO2luZGV4KyspY3JlYXRlUHJvcGVydHkocmVzdWx0LGluZGV4LG1hcHBpbmc/bWFwZm4oT1tpbmRleF0saW5kZXgpOk9baW5kZXhdKTtlbHNlIGZvcihpdGVyYXRvcj1pdGVyRm4uY2FsbChPKSxyZXN1bHQ9bmV3IEM7IShzdGVwPWl0ZXJhdG9yLm5leHQoKSkuZG9uZTtpbmRleCsrKWNyZWF0ZVByb3BlcnR5KHJlc3VsdCxpbmRleCxtYXBwaW5nP2NhbGwoaXRlcmF0b3IsbWFwZm4sW3N0ZXAudmFsdWUsaW5kZXhdLCEwKTpzdGVwLnZhbHVlKTtyZXR1cm4gcmVzdWx0Lmxlbmd0aD1pbmRleCxyZXN1bHR9fSl9LEhQM2g6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBzeW1ib2xNYXA9ezE6IjEiLDI6IjIiLDM6IjMiLDQ6IjQiLDU6IjUiLDY6IjYiLDc6IjciLDg6IjgiLDk6IjkiLDA6IjAifSxwbHVyYWxGb3JtPWZ1bmN0aW9uKG4pe3JldHVybiAwPT09bj8wOjE9PT1uPzE6Mj09PW4/MjozPD1uJTEwMCYmbiUxMDA8PTEwPzM6MTE8PW4lMTAwPzQ6NX0scGx1cmFscz17czpbItij2YLZhCDZhdmGINir2KfZhtmK2KkiLCLYq9in2YbZitipINmI2KfYrdiv2KkiLFsi2KvYp9mG2YrYqtin2YYiLCLYq9in2YbZitiq2YrZhiJdLCIlZCDYq9mI2KfZhiIsIiVkINir2KfZhtmK2KkiLCIlZCDYq9in2YbZitipIl0sbTpbItij2YLZhCDZhdmGINiv2YLZitmC2KkiLCLYr9mC2YrZgtipINmI2KfYrdiv2KkiLFsi2K/ZgtmK2YLYqtin2YYiLCLYr9mC2YrZgtiq2YrZhiJdLCIlZCDYr9mC2KfYptmCIiwiJWQg2K/ZgtmK2YLYqSIsIiVkINiv2YLZitmC2KkiXSxoOlsi2KPZgtmEINmF2YYg2LPYp9i52KkiLCLYs9in2LnYqSDZiNin2K3Yr9ipIixbItiz2KfYudiq2KfZhiIsItiz2KfYudiq2YrZhiJdLCIlZCDYs9in2LnYp9iqIiwiJWQg2LPYp9i52KkiLCIlZCDYs9in2LnYqSJdLGQ6WyLYo9mC2YQg2YXZhiDZitmI2YUiLCLZitmI2YUg2YjYp9it2K8iLFsi2YrZiNmF2KfZhiIsItmK2YjZhdmK2YYiXSwiJWQg2KPZitin2YUiLCIlZCDZitmI2YXZi9inIiwiJWQg2YrZiNmFIl0sTTpbItij2YLZhCDZhdmGINi02YfYsSIsIti02YfYsSDZiNin2K3YryIsWyLYtNmH2LHYp9mGIiwi2LTZh9ix2YrZhiJdLCIlZCDYo9i02YfYsSIsIiVkINi02YfYsdinIiwiJWQg2LTZh9ixIl0seTpbItij2YLZhCDZhdmGINi52KfZhSIsIti52KfZhSDZiNin2K3YryIsWyLYudin2YXYp9mGIiwi2LnYp9mF2YrZhiJdLCIlZCDYo9i52YjYp9mFIiwiJWQg2LnYp9mF2YvYpyIsIiVkINi52KfZhSJdfSxwbHVyYWxpemU9ZnVuY3Rpb24odSl7cmV0dXJuIGZ1bmN0aW9uKG51bWJlcix3aXRob3V0U3VmZml4LHN0cmluZyxpc0Z1dHVyZSl7dmFyIGY9cGx1cmFsRm9ybShudW1iZXIpLHN0cj1wbHVyYWxzW3VdW3BsdXJhbEZvcm0obnVtYmVyKV07cmV0dXJuIDI9PT1mJiYoc3RyPXN0clt3aXRob3V0U3VmZml4PzA6MV0pLHN0ci5yZXBsYWNlKC8lZC9pLG51bWJlcil9fSxtb250aHM9WyLZitmG2KfZitixIiwi2YHYqNix2KfZitixIiwi2YXYp9ix2LMiLCLYo9io2LHZitmEIiwi2YXYp9mK2YgiLCLZitmI2YbZitmIIiwi2YrZiNmE2YrZiCIsItij2LrYs9i32LMiLCLYs9io2KrZhdio2LEiLCLYo9mD2KrZiNio2LEiLCLZhtmI2YHZhdio2LEiLCLYr9mK2LPZhdio2LEiXTttb21lbnQuZGVmaW5lTG9jYWxlKCJhci1seSIse21vbnRoczptb250aHMsbW9udGhzU2hvcnQ6bW9udGhzLHdlZWtkYXlzOiLYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItitX9mGX9irX9ixX9iuX9isX9izIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJEL+KAj00v4oCPWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov2LV82YUvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybiLZhSI9PT1pbnB1dH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7cmV0dXJuIGhvdXI8MTI/Iti1Ijoi2YUifSxjYWxlbmRhcjp7c2FtZURheToiW9in2YTZitmI2YUg2LnZhtivINin2YTYs9in2LnYqV0gTFQiLG5leHREYXk6IlvYutiv2YvYpyDYudmG2K8g2KfZhNiz2KfYudipXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9i52YbYryDYp9mE2LPYp9i52KldIExUIixsYXN0RGF5OiJb2KPZhdizINi52YbYryDYp9mE2LPYp9i52KldIExUIixsYXN0V2VlazoiZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Itio2LnYryAlcyIscGFzdDoi2YXZhtiwICVzIixzOnBsdXJhbGl6ZSgicyIpLHNzOnBsdXJhbGl6ZSgicyIpLG06cGx1cmFsaXplKCJtIiksbW06cGx1cmFsaXplKCJtIiksaDpwbHVyYWxpemUoImgiKSxoaDpwbHVyYWxpemUoImgiKSxkOnBsdXJhbGl6ZSgiZCIpLGRkOnBsdXJhbGl6ZSgiZCIpLE06cGx1cmFsaXplKCJNIiksTU06cGx1cmFsaXplKCJNIikseTpwbHVyYWxpemUoInkiKSx5eTpwbHVyYWxpemUoInkiKX0scHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL9iML2csIiwiKX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHN5bWJvbE1hcFttYXRjaF19KS5yZXBsYWNlKC8sL2csItiMIil9LHdlZWs6e2Rvdzo2LGRveToxMn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sSFNzYTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oZm4sdGhpc0FyZyl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBhcmdzPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKSxpPTA7aTxhcmdzLmxlbmd0aDtpKyspYXJnc1tpXT1hcmd1bWVudHNbaV07cmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsYXJncyl9fX0sSHNuczpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiOTNJNCIpLGRvY3VtZW50PV9fd2VicGFja19yZXF1aXJlX18oIjVUMlkiKS5kb2N1bWVudCxpcz1pc09iamVjdChkb2N1bWVudCkmJmlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0KXtyZXR1cm4gaXM/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCk6e319fSxIeGljOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUywiTWF0aCIse1JBRF9QRVJfREVHOjE4MC9NYXRoLlBJfSl9LEk1Y3Y6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGNyZWF0ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLdXRoIiksYUZ1bmN0aW9uPV9fd2VicGFja19yZXF1aXJlX18oIjJPaUYiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpLGZhaWxzPV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKSxiaW5kPV9fd2VicGFja19yZXF1aXJlX18oIjhNRUciKSxyQ29uc3RydWN0PShfX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIikuUmVmbGVjdHx8e30pLmNvbnN0cnVjdCxORVdfVEFSR0VUX0JVRz1mYWlscyhmdW5jdGlvbigpe2Z1bmN0aW9uIEYoKXt9cmV0dXJuIShyQ29uc3RydWN0KGZ1bmN0aW9uKCl7fSxbXSxGKWluc3RhbmNlb2YgRil9KSxBUkdTX0JVRz0hZmFpbHMoZnVuY3Rpb24oKXtyQ29uc3RydWN0KGZ1bmN0aW9uKCl7fSl9KTskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqKE5FV19UQVJHRVRfQlVHfHxBUkdTX0JVRyksIlJlZmxlY3QiLHtjb25zdHJ1Y3Q6ZnVuY3Rpb24oVGFyZ2V0LGFyZ3Mpe2FGdW5jdGlvbihUYXJnZXQpLGFuT2JqZWN0KGFyZ3MpO3ZhciBuZXdUYXJnZXQ9YXJndW1lbnRzLmxlbmd0aDwzP1RhcmdldDphRnVuY3Rpb24oYXJndW1lbnRzWzJdKTtpZihBUkdTX0JVRyYmIU5FV19UQVJHRVRfQlVHKXJldHVybiByQ29uc3RydWN0KFRhcmdldCxhcmdzLG5ld1RhcmdldCk7aWYoVGFyZ2V0PT1uZXdUYXJnZXQpe3N3aXRjaChhcmdzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgVGFyZ2V0O2Nhc2UgMTpyZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdKTtjYXNlIDI6cmV0dXJuIG5ldyBUYXJnZXQoYXJnc1swXSxhcmdzWzFdKTtjYXNlIDM6cmV0dXJuIG5ldyBUYXJnZXQoYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0pO2Nhc2UgNDpyZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSxhcmdzWzNdKX12YXIgJGFyZ3M9W251bGxdO3JldHVybiAkYXJncy5wdXNoLmFwcGx5KCRhcmdzLGFyZ3MpLG5ldyhiaW5kLmFwcGx5KFRhcmdldCwkYXJncykpfXZhciBwcm90bz1uZXdUYXJnZXQucHJvdG90eXBlLGluc3RhbmNlPWNyZWF0ZShpc09iamVjdChwcm90byk/cHJvdG86T2JqZWN0LnByb3RvdHlwZSkscmVzdWx0PUZ1bmN0aW9uLmFwcGx5LmNhbGwoVGFyZ2V0LGluc3RhbmNlLGFyZ3MpO3JldHVybiBpc09iamVjdChyZXN1bHQpP3Jlc3VsdDppbnN0YW5jZX19KX0sSTc0VzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygicW5jQiIpKCJ0cmltTGVmdCIsZnVuY3Rpb24oJHRyaW0pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiAkdHJpbSh0aGlzLDEpfX0sInRyaW1TdGFydCIpfSxJNzhlOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksaHRtbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIrckx2IiksY29mPV9fd2VicGFja19yZXF1aXJlX18oIkxaV3QiKSx0b0Fic29sdXRlSW5kZXg9X193ZWJwYWNrX3JlcXVpcmVfXygiZC9HYyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKSxhcnJheVNsaWNlPVtdLnNsaWNlOyRleHBvcnQoJGV4cG9ydC5QKyRleHBvcnQuRipfX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIikoZnVuY3Rpb24oKXtodG1sJiZhcnJheVNsaWNlLmNhbGwoaHRtbCl9KSwiQXJyYXkiLHtzbGljZTpmdW5jdGlvbihiZWdpbixlbmQpe3ZhciBsZW49dG9MZW5ndGgodGhpcy5sZW5ndGgpLGtsYXNzPWNvZih0aGlzKTtpZihlbmQ9dm9pZCAwPT09ZW5kP2xlbjplbmQsIkFycmF5Ij09a2xhc3MpcmV0dXJuIGFycmF5U2xpY2UuY2FsbCh0aGlzLGJlZ2luLGVuZCk7Zm9yKHZhciBzdGFydD10b0Fic29sdXRlSW5kZXgoYmVnaW4sbGVuKSx1cFRvPXRvQWJzb2x1dGVJbmRleChlbmQsbGVuKSxzaXplPXRvTGVuZ3RoKHVwVG8tc3RhcnQpLGNsb25lZD1uZXcgQXJyYXkoc2l6ZSksaT0wO2k8c2l6ZTtpKyspY2xvbmVkW2ldPSJTdHJpbmciPT1rbGFzcz90aGlzLmNoYXJBdChzdGFydCtpKTp0aGlzW3N0YXJ0K2ldO3JldHVybiBjbG9uZWR9fSl9LCJJOGErIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgY29mPV9fd2VicGFja19yZXF1aXJlX18oIkxaV3QiKSxUQUc9X193ZWJwYWNrX3JlcXVpcmVfXygiSzB4VSIpKCJ0b1N0cmluZ1RhZyIpLEFSRz0iQXJndW1lbnRzIj09Y29mKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQpe3ZhciBPLFQsQjtyZXR1cm4gdm9pZCAwPT09aXQ/IlVuZGVmaW5lZCI6bnVsbD09PWl0PyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKFQ9ZnVuY3Rpb24oaXQsa2V5KXt0cnl7cmV0dXJuIGl0W2tleV19Y2F0Y2goZSl7fX0oTz1PYmplY3QoaXQpLFRBRykpP1Q6QVJHP2NvZihPKToiT2JqZWN0Ij09KEI9Y29mKE8pKSYmImZ1bmN0aW9uIj09dHlwZW9mIE8uY2FsbGVlPyJBcmd1bWVudHMiOkJ9fSxJQnRaOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJrYSIse21vbnRoczp7c3RhbmRhbG9uZToi4YOY4YOQ4YOc4YOV4YOQ4YOg4YOYX+GDl+GDlOGDkeGDlOGDoOGDleGDkOGDmuGDmF/hg5vhg5Dhg6Dhg6Lhg5hf4YOQ4YOe4YOg4YOY4YOa4YOYX+GDm+GDkOGDmOGDoeGDmF/hg5jhg5Xhg5zhg5jhg6Hhg5hf4YOY4YOV4YOa4YOY4YOh4YOYX+GDkOGDkuGDleGDmOGDoeGDouGDnV/hg6Hhg5Thg6Xhg6Lhg5Thg5vhg5Hhg5Thg6Dhg5hf4YOd4YOl4YOi4YOd4YOb4YOR4YOU4YOg4YOYX+GDnOGDneGDlOGDm+GDkeGDlOGDoOGDmF/hg5Phg5Thg5nhg5Thg5vhg5Hhg5Thg6Dhg5giLnNwbGl0KCJfIiksZm9ybWF0OiLhg5jhg5Dhg5zhg5Xhg5Dhg6Dhg6Ff4YOX4YOU4YOR4YOU4YOg4YOV4YOQ4YOa4YOhX+GDm+GDkOGDoOGDouGDoV/hg5Dhg57hg6Dhg5jhg5rhg5jhg6Ff4YOb4YOQ4YOY4YOh4YOhX+GDmOGDleGDnOGDmOGDoeGDoV/hg5jhg5Xhg5rhg5jhg6Hhg6Ff4YOQ4YOS4YOV4YOY4YOh4YOi4YOhX+GDoeGDlOGDpeGDouGDlOGDm+GDkeGDlOGDoOGDoV/hg53hg6Xhg6Lhg53hg5vhg5Hhg5Thg6Dhg6Ff4YOc4YOd4YOU4YOb4YOR4YOU4YOg4YOhX+GDk+GDlOGDmeGDlOGDm+GDkeGDlOGDoOGDoSIuc3BsaXQoIl8iKX0sbW9udGhzU2hvcnQ6IuGDmOGDkOGDnF/hg5fhg5Thg5Ff4YOb4YOQ4YOgX+GDkOGDnuGDoF/hg5vhg5Dhg5hf4YOY4YOV4YOcX+GDmOGDleGDml/hg5Dhg5Lhg5Vf4YOh4YOU4YOlX+GDneGDpeGDol/hg5zhg53hg5Rf4YOT4YOU4YOZIi5zcGxpdCgiXyIpLHdlZWtkYXlzOntzdGFuZGFsb25lOiLhg5nhg5Xhg5jhg6Dhg5Bf4YOd4YOg4YOo4YOQ4YOR4YOQ4YOX4YOYX+GDoeGDkOGDm+GDqOGDkOGDkeGDkOGDl+GDmF/hg53hg5fhg67hg6jhg5Dhg5Hhg5Dhg5fhg5hf4YOu4YOj4YOX4YOo4YOQ4YOR4YOQ4YOX4YOYX+GDnuGDkOGDoOGDkOGDoeGDmeGDlOGDleGDmF/hg6jhg5Dhg5Hhg5Dhg5fhg5giLnNwbGl0KCJfIiksZm9ybWF0OiLhg5nhg5Xhg5jhg6Dhg5Dhg6Ff4YOd4YOg4YOo4YOQ4YOR4YOQ4YOX4YOhX+GDoeGDkOGDm+GDqOGDkOGDkeGDkOGDl+GDoV/hg53hg5fhg67hg6jhg5Dhg5Hhg5Dhg5fhg6Ff4YOu4YOj4YOX4YOo4YOQ4YOR4YOQ4YOX4YOhX+GDnuGDkOGDoOGDkOGDoeGDmeGDlOGDleGDoV/hg6jhg5Dhg5Hhg5Dhg5fhg6EiLnNwbGl0KCJfIiksaXNGb3JtYXQ6Lyjhg6zhg5jhg5zhg5B84YOo4YOU4YOb4YOT4YOU4YOSKS99LHdlZWtkYXlzU2hvcnQ6IuGDmeGDleGDmF/hg53hg6Dhg6hf4YOh4YOQ4YObX+GDneGDl+GDrl/hg67hg6Phg5df4YOe4YOQ4YOgX+GDqOGDkOGDkSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4YOZ4YOVX+GDneGDoF/hg6Hhg5Bf4YOd4YOXX+GDruGDo1/hg57hg5Bf4YOo4YOQIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiaDptbSBBIixMVFM6Img6bW06c3MgQSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBIn0sY2FsZW5kYXI6e3NhbWVEYXk6Ilvhg5Phg6bhg5Thg6FdIExUWy3hg5bhg5RdIixuZXh0RGF5OiJb4YOu4YOV4YOQ4YOaXSBMVFst4YOW4YOUXSIsbGFzdERheToiW+GDkuGDo+GDqOGDmOGDnF0gTFRbLeGDluGDlF0iLG5leHRXZWVrOiJb4YOo4YOU4YOb4YOT4YOU4YOSXSBkZGRkIExUWy3hg5bhg5RdIixsYXN0V2VlazoiW+GDrOGDmOGDnOGDkF0gZGRkZCBMVC3hg5bhg5QiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ZnVuY3Rpb24ocyl7cmV0dXJuLyjhg6zhg5Dhg5vhg5h84YOs4YOj4YOX4YOYfOGDoeGDkOGDkOGDl+GDmHzhg6zhg5Thg5rhg5gpLy50ZXN0KHMpP3MucmVwbGFjZSgv4YOYJC8sIuGDqOGDmCIpOnMrIuGDqOGDmCJ9LHBhc3Q6ZnVuY3Rpb24ocyl7cmV0dXJuLyjhg6zhg5Dhg5vhg5h84YOs4YOj4YOX4YOYfOGDoeGDkOGDkOGDl+GDmHzhg5Phg6bhg5R84YOX4YOV4YOUKS8udGVzdChzKT9zLnJlcGxhY2UoLyjhg5h84YOUKSQvLCLhg5jhg6Eg4YOs4YOY4YOcIik6L+GDrOGDlOGDmuGDmC8udGVzdChzKT9zLnJlcGxhY2UoL+GDrOGDlOGDmuGDmCQvLCLhg6zhg5rhg5jhg6Eg4YOs4YOY4YOcIik6dm9pZCAwfSxzOiLhg6Dhg5Dhg5vhg5Phg5Thg5zhg5jhg5vhg5Qg4YOs4YOQ4YOb4YOYIixzczoiJWQg4YOs4YOQ4YOb4YOYIixtOiLhg6zhg6Phg5fhg5giLG1tOiIlZCDhg6zhg6Phg5fhg5giLGg6IuGDoeGDkOGDkOGDl+GDmCIsaGg6IiVkIOGDoeGDkOGDkOGDl+GDmCIsZDoi4YOT4YOm4YOUIixkZDoiJWQg4YOT4YOm4YOUIixNOiLhg5fhg5Xhg5QiLE1NOiIlZCDhg5fhg5Xhg5QiLHk6IuGDrOGDlOGDmuGDmCIseXk6IiVkIOGDrOGDlOGDmuGDmCJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6LzB8MS3hg5rhg5h84YOb4YOULVxkezEsMn18XGR7MSwyfS3hg5QvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXtyZXR1cm4gMD09PW51bWJlcj9udW1iZXI6MT09PW51bWJlcj9udW1iZXIrIi3hg5rhg5giOm51bWJlcjwyMHx8bnVtYmVyPD0xMDAmJm51bWJlciUyMD09MHx8bnVtYmVyJTEwMD09MD8i4YOb4YOULSIrbnVtYmVyOm51bWJlcisiLeGDlCJ9LHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxJTllyOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGZpbmQ9X193ZWJwYWNrX3JlcXVpcmVfXygiQ2trVCIpKDYpLEtFWT0iZmluZEluZGV4Iixmb3JjZWQ9ITA7S0VZIGluW10mJkFycmF5KDEpW0tFWV0oZnVuY3Rpb24oKXtmb3JjZWQ9ITF9KSwkZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqZm9yY2VkLCJBcnJheSIse2ZpbmRJbmRleDpmdW5jdGlvbihjYWxsYmFja2ZuKXtyZXR1cm4gJGZpbmQodGhpcyxjYWxsYmFja2ZuLDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJuR3l1IikoS0VZKX0sSVAxWjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRkZWZpbmVQcm9wZXJ0eT1fX3dlYnBhY2tfcmVxdWlyZV9fKCIyZmFFIiksY3JlYXRlRGVzYz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJycjFpIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24ob2JqZWN0LGluZGV4LHZhbHVlKXtpbmRleCBpbiBvYmplY3Q/JGRlZmluZVByb3BlcnR5LmYob2JqZWN0LGluZGV4LGNyZWF0ZURlc2MoMCx2YWx1ZSkpOm9iamVjdFtpbmRleF09dmFsdWV9fSwiSVUrWiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO19fd2VicGFja19yZXF1aXJlX18oInNNWHgiKTt2YXIgcmVkZWZpbmU9X193ZWJwYWNrX3JlcXVpcmVfXygiS3JvSiIpLGhpZGU9X193ZWJwYWNrX3JlcXVpcmVfXygiTXVrYiIpLGZhaWxzPV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKSxkZWZpbmVkPV9fd2VicGFja19yZXF1aXJlX18oInZoUFUiKSx3a3M9X193ZWJwYWNrX3JlcXVpcmVfXygiSzB4VSIpLHJlZ2V4cEV4ZWM9X193ZWJwYWNrX3JlcXVpcmVfXygiVWdvcyIpLFNQRUNJRVM9d2tzKCJzcGVjaWVzIiksUkVQTEFDRV9TVVBQT1JUU19OQU1FRF9HUk9VUFM9IWZhaWxzKGZ1bmN0aW9uKCl7dmFyIHJlPS8uLztyZXR1cm4gcmUuZXhlYz1mdW5jdGlvbigpe3ZhciByZXN1bHQ9W107cmV0dXJuIHJlc3VsdC5ncm91cHM9e2E6IjcifSxyZXN1bHR9LCI3IiE9PSIiLnJlcGxhY2UocmUsIiQ8YT4iKX0pLFNQTElUX1dPUktTX1dJVEhfT1ZFUldSSVRURU5fRVhFQz1mdW5jdGlvbigpe3ZhciByZT0vKD86KS8sb3JpZ2luYWxFeGVjPXJlLmV4ZWM7cmUuZXhlYz1mdW5jdGlvbigpe3JldHVybiBvcmlnaW5hbEV4ZWMuYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgcmVzdWx0PSJhYiIuc3BsaXQocmUpO3JldHVybiAyPT09cmVzdWx0Lmxlbmd0aCYmImEiPT09cmVzdWx0WzBdJiYiYiI9PT1yZXN1bHRbMV19KCk7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oS0VZLGxlbmd0aCxleGVjKXt2YXIgU1lNQk9MPXdrcyhLRVkpLERFTEVHQVRFU19UT19TWU1CT0w9IWZhaWxzKGZ1bmN0aW9uKCl7dmFyIE89e307cmV0dXJuIE9bU1lNQk9MXT1mdW5jdGlvbigpe3JldHVybiA3fSw3IT0iIltLRVldKE8pfSksREVMRUdBVEVTX1RPX0VYRUM9REVMRUdBVEVTX1RPX1NZTUJPTD8hZmFpbHMoZnVuY3Rpb24oKXt2YXIgZXhlY0NhbGxlZD0hMSxyZT0vYS87cmV0dXJuIHJlLmV4ZWM9ZnVuY3Rpb24oKXtyZXR1cm4gZXhlY0NhbGxlZD0hMCxudWxsfSwic3BsaXQiPT09S0VZJiYocmUuY29uc3RydWN0b3I9e30scmUuY29uc3RydWN0b3JbU1BFQ0lFU109ZnVuY3Rpb24oKXtyZXR1cm4gcmV9KSxyZVtTWU1CT0xdKCIiKSwhZXhlY0NhbGxlZH0pOnZvaWQgMDtpZighREVMRUdBVEVTX1RPX1NZTUJPTHx8IURFTEVHQVRFU19UT19FWEVDfHwicmVwbGFjZSI9PT1LRVkmJiFSRVBMQUNFX1NVUFBPUlRTX05BTUVEX0dST1VQU3x8InNwbGl0Ij09PUtFWSYmIVNQTElUX1dPUktTX1dJVEhfT1ZFUldSSVRURU5fRVhFQyl7dmFyIG5hdGl2ZVJlZ0V4cE1ldGhvZD0vLi9bU1lNQk9MXSxmbnM9ZXhlYyhkZWZpbmVkLFNZTUJPTCwiIltLRVldLGZ1bmN0aW9uKG5hdGl2ZU1ldGhvZCxyZWdleHAsc3RyLGFyZzIsZm9yY2VTdHJpbmdNZXRob2Qpe3JldHVybiByZWdleHAuZXhlYz09PXJlZ2V4cEV4ZWM/REVMRUdBVEVTX1RPX1NZTUJPTCYmIWZvcmNlU3RyaW5nTWV0aG9kP3tkb25lOiEwLHZhbHVlOm5hdGl2ZVJlZ0V4cE1ldGhvZC5jYWxsKHJlZ2V4cCxzdHIsYXJnMil9Ontkb25lOiEwLHZhbHVlOm5hdGl2ZU1ldGhvZC5jYWxsKHN0cixyZWdleHAsYXJnMil9Ontkb25lOiExfX0pLHN0cmZuPWZuc1swXSxyeGZuPWZuc1sxXTtyZWRlZmluZShTdHJpbmcucHJvdG90eXBlLEtFWSxzdHJmbiksaGlkZShSZWdFeHAucHJvdG90eXBlLFNZTUJPTCwyPT1sZW5ndGg/ZnVuY3Rpb24oc3RyaW5nLGFyZyl7cmV0dXJuIHJ4Zm4uY2FsbChzdHJpbmcsdGhpcyxhcmcpfTpmdW5jdGlvbihzdHJpbmcpe3JldHVybiByeGZuLmNhbGwoc3RyaW5nLHRoaXMpfSl9fX0sSVh0OTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKSxnZXRQcm90b3R5cGVPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJPUDNZIiksSEFTX0lOU1RBTkNFPV9fd2VicGFja19yZXF1aXJlX18oIksweFUiKSgiaGFzSW5zdGFuY2UiKSxGdW5jdGlvblByb3RvPUZ1bmN0aW9uLnByb3RvdHlwZTtIQVNfSU5TVEFOQ0UgaW4gRnVuY3Rpb25Qcm90b3x8X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpLmYoRnVuY3Rpb25Qcm90byxIQVNfSU5TVEFOQ0Use3ZhbHVlOmZ1bmN0aW9uKE8pe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0aGlzfHwhaXNPYmplY3QoTykpcmV0dXJuITE7aWYoIWlzT2JqZWN0KHRoaXMucHJvdG90eXBlKSlyZXR1cm4gTyBpbnN0YW5jZW9mIHRoaXM7Zm9yKDtPPWdldFByb3RvdHlwZU9mKE8pOylpZih0aGlzLnByb3RvdHlwZT09PU8pcmV0dXJuITA7cmV0dXJuITF9fSl9LElsRng6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSwkaXNFeHRlbnNpYmxlPU9iamVjdC5pc0V4dGVuc2libGU7JGV4cG9ydCgkZXhwb3J0LlMsIlJlZmxlY3QiLHtpc0V4dGVuc2libGU6ZnVuY3Rpb24odGFyZ2V0KXtyZXR1cm4gYW5PYmplY3QodGFyZ2V0KSwhJGlzRXh0ZW5zaWJsZXx8JGlzRXh0ZW5zaWJsZSh0YXJnZXQpfX0pfSwiSXZpKyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImtvIix7bW9udGhzOiIx7JuUXzLsm5RfM+yblF807JuUXzXsm5RfNuyblF837JuUXzjsm5RfOeyblF8xMOyblF8xMeyblF8xMuyblCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiMeyblF8y7JuUXzPsm5RfNOyblF817JuUXzbsm5RfN+yblF847JuUXznsm5RfMTDsm5RfMTHsm5RfMTLsm5QiLnNwbGl0KCJfIiksd2Vla2RheXM6IuydvOyalOydvF/sm5TsmpTsnbxf7ZmU7JqU7J28X+yImOyalOydvF/rqqnsmpTsnbxf6riI7JqU7J28X+2GoOyalOydvCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLsnbxf7JuUX+2ZlF/siJhf66qpX+q4iF/thqAiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuydvF/sm5Rf7ZmUX+yImF/rqqlf6riIX+2GoCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkEgaDptbSIsTFRTOiJBIGg6bW06c3MiLEw6IllZWVkuTU0uREQuIixMTDoiWVlZWeuFhCBNTU1NIETsnbwiLExMTDoiWVlZWeuFhCBNTU1NIETsnbwgQSBoOm1tIixMTExMOiJZWVlZ64WEIE1NTU0gROydvCBkZGRkIEEgaDptbSIsbDoiWVlZWS5NTS5ERC4iLGxsOiJZWVlZ64WEIE1NTU0gROydvCIsbGxsOiJZWVlZ64WEIE1NTU0gROydvCBBIGg6bW0iLGxsbGw6IllZWVnrhYQgTU1NTSBE7J28IGRkZGQgQSBoOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IuyYpOuKmCBMVCIsbmV4dERheToi64K07J28IExUIixuZXh0V2VlazoiZGRkZCBMVCIsbGFzdERheToi7Ja07KCcIExUIixsYXN0V2Vlazoi7KeA64Kc7KO8IGRkZGQgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIO2bhCIscGFzdDoiJXMg7KCEIixzOiLrqocg7LSIIixzczoiJWTstIgiLG06IjHrtoQiLG1tOiIlZOu2hCIsaDoi7ZWcIOyLnOqwhCIsaGg6IiVk7Iuc6rCEIixkOiLtlZjro6giLGRkOiIlZOydvCIsTToi7ZWcIOuLrCIsTU06IiVk64usIix5OiLsnbwg64WEIix5eToiJWTrhYQifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KOydvHzsm5R87KO8KS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIscGVyaW9kKXtzd2l0Y2gocGVyaW9kKXtjYXNlImQiOmNhc2UiRCI6Y2FzZSJEREQiOnJldHVybiBudW1iZXIrIuydvCI7Y2FzZSJNIjpyZXR1cm4gbnVtYmVyKyLsm5QiO2Nhc2UidyI6Y2FzZSJXIjpyZXR1cm4gbnVtYmVyKyLso7wiO2RlZmF1bHQ6cmV0dXJuIG51bWJlcn19LG1lcmlkaWVtUGFyc2U6L+yYpOyghHzsmKTtm4QvLGlzUE06ZnVuY3Rpb24odG9rZW4pe3JldHVybiLsmKTtm4QiPT09dG9rZW59LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzVXBwZXIpe3JldHVybiBob3VyPDEyPyLsmKTsoIQiOiLsmKTtm4QifX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxJdzcxOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0IiksZG9jdW1lbnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLmRvY3VtZW50LGlzPWlzT2JqZWN0KGRvY3VtZW50KSYmaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQpe3JldHVybiBpcz9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KTp7fX19LCJKKzZlIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgY2xhc3NvZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJJOGErIiksSVRFUkFUT1I9X193ZWJwYWNrX3JlcXVpcmVfXygiSzB4VSIpKCJpdGVyYXRvciIpLEl0ZXJhdG9ycz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJoUElRIik7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiZzNnNSIpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGl0KXtpZihudWxsIT1pdClyZXR1cm4gaXRbSVRFUkFUT1JdfHxpdFsiQEBpdGVyYXRvciJdfHxJdGVyYXRvcnNbY2xhc3NvZihpdCldfX0sSjBnZDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksUkFEX1BFUl9ERUc9MTgwL01hdGguUEk7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtkZWdyZWVzOmZ1bmN0aW9uKHJhZGlhbnMpe3JldHVybiByYWRpYW5zKlJBRF9QRVJfREVHfX0pfSxKQjY4OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBkZWZpbmVkPV9fd2VicGFja19yZXF1aXJlX18oIkplczAiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSl9fSwiSkNGLyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBzeW1ib2xNYXA9ezE6ItmhIiwyOiLZoiIsMzoi2aMiLDQ6ItmkIiw1OiLZpSIsNjoi2aYiLDc6ItmnIiw4OiLZqCIsOToi2akiLDA6ItmgIn0sbnVtYmVyTWFwPXsi2aEiOiIxIiwi2aIiOiIyIiwi2aMiOiIzIiwi2aQiOiI0Iiwi2aUiOiI1Iiwi2aYiOiI2Iiwi2aciOiI3Iiwi2agiOiI4Iiwi2akiOiI5Iiwi2aAiOiIwIn0sbW9udGhzPVsi2qnYp9mG2YjZhtuMINiv2YjZiNuV2YUiLCLYtNmI2KjYp9iqIiwi2KbYp9iy2KfYsSIsItmG24zYs9in2YYiLCLYptin24zYp9ixIiwi2K3ZiNiy25XbjNix2KfZhiIsItiq25XZhdmF2YjYsiIsItim2KfYqCIsItim25XbjNmE2YjZiNmEIiwi2KrYtNix24zZhtuMINuM25XZg9uV2YUiLCLYqti02LHbjNmG24wg2K/ZiNmI25XZhSIsItmD2KfZhtmI2YbbjCDbjNuV2qnbldmFIl07bW9tZW50LmRlZmluZUxvY2FsZSgia3UiLHttb250aHM6bW9udGhzLG1vbnRoc1Nob3J0Om1vbnRocyx3ZWVrZGF5czoi24zZh+KAjNmD2LTZh+KAjNmF2YXZh+KAjF/Yr9mI2YjYtNmH4oCM2YXZhdmH4oCMX9iz247YtNmH4oCM2YXZhdmH4oCMX9qG2YjYp9ix2LTZh+KAjNmF2YXZh+KAjF/ZvtuO2YbYrNi02YfigIzZhdmF2YfigIxf2YfZh+KAjNuM2YbbjF/YtNmH4oCM2YXZhdmH4oCMIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItuM2YfigIzZg9i02YfigIzZhV/Yr9mI2YjYtNmH4oCM2YVf2LPbjti02YfigIzZhV/ahtmI2KfYsdi02YfigIzZhV/ZvtuO2YbYrNi02YfigIzZhV/Zh9mH4oCM24zZhtuMX9i02YfigIzZhdmF2YfigIwiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItuMX9ivX9izX9qGX9m+X9mHX9i0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov2KbbjtmI2KfYsdmH4oCMfNio2YfigIzbjNin2YbbjC8saXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuL9im247ZiNin2LHZh+KAjC8udGVzdChpbnB1dCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDEyPyLYqNmH4oCM24zYp9mG24wiOiLYptuO2YjYp9ix2YfigIwifSxjYWxlbmRhcjp7c2FtZURheToiW9im2YfigIzZhdix24Yg2YPYp9iq2pjZhduO2LFdIExUIixuZXh0RGF5OiJb2KjZh+KAjNuM2KfZhtuMINmD2KfYqtqY2YXbjtixXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9mD2KfYqtqY2YXbjtixXSBMVCIsbGFzdERheToiW9iv2YjbjtmG244g2YPYp9iq2pjZhduO2LFdIExUIixsYXN0V2VlazoiZGRkZCBb2YPYp9iq2pjZhduO2LFdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLZhNmH4oCMICVzIixwYXN0OiIlcyIsczoi2obZh+KAjNmG2K8g2obYsdmD2YfigIzbjNmH4oCM2YMiLHNzOiLahtix2YPZh+KAjCAlZCIsbToi24zZh+KAjNmDINiu2YjZhNmH4oCM2YMiLG1tOiIlZCDYrtmI2YTZh+KAjNmDIixoOiLbjNmH4oCM2YMg2YPYp9iq2pjZhduO2LEiLGhoOiIlZCDZg9in2KramNmF247YsSIsZDoi24zZh+KAjNmDINqV24bamCIsZGQ6IiVkINqV24bamCIsTToi24zZh+KAjNmDINmF2KfZhtqvIixNTToiJWQg2YXYp9mG2q8iLHk6ItuM2YfigIzZgyDYs9in2rUiLHl5OiIlZCDYs9in2rUifSxwcmVwYXJzZTpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvW9mh2aLZo9mk2aXZptmn2ajZqdmgXS9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbnVtYmVyTWFwW21hdGNoXX0pLnJlcGxhY2UoL9iML2csIiwiKX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHN5bWJvbE1hcFttYXRjaF19KS5yZXBsYWNlKC8sL2csItiMIil9LHdlZWs6e2Rvdzo2LGRveToxMn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sSkNxajpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygiT0d0ZiIpKCJzdXAiLGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjcmVhdGVIVE1MKHRoaXMsInN1cCIsIiIsIiIpfX0pfSxKRVFyOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjsoZnVuY3Rpb24ocHJvY2Vzcyl7dmFyIHV0aWxzPV9fd2VicGFja19yZXF1aXJlX18oInhUSisiKSxub3JtYWxpemVIZWFkZXJOYW1lPV9fd2VicGFja19yZXF1aXJlX18oInlLOXMiKSxERUZBVUxUX0NPTlRFTlRfVFlQRT17IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9O2Z1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLHZhbHVlKXshdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykmJnV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdKSYmKGhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdPXZhbHVlKX12YXIgYWRhcHRlcixkZWZhdWx0cz17YWRhcHRlcjooInVuZGVmaW5lZCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdD9hZGFwdGVyPV9fd2VicGFja19yZXF1aXJlX18oInRRMkIiKTp2b2lkIDAhPT1wcm9jZXNzJiYoYWRhcHRlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ0UTJCIikpLGFkYXB0ZXIpLHRyYW5zZm9ybVJlcXVlc3Q6W2Z1bmN0aW9uKGRhdGEsaGVhZGVycyl7cmV0dXJuIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywiQ29udGVudC1UeXBlIiksdXRpbHMuaXNGb3JtRGF0YShkYXRhKXx8dXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKXx8dXRpbHMuaXNCdWZmZXIoZGF0YSl8fHV0aWxzLmlzU3RyZWFtKGRhdGEpfHx1dGlscy5pc0ZpbGUoZGF0YSl8fHV0aWxzLmlzQmxvYihkYXRhKT9kYXRhOnV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpP2RhdGEuYnVmZmVyOnV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpPyhzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgiKSxkYXRhLnRvU3RyaW5nKCkpOnV0aWxzLmlzT2JqZWN0KGRhdGEpPyhzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04IiksSlNPTi5zdHJpbmdpZnkoZGF0YSkpOmRhdGF9XSx0cmFuc2Zvcm1SZXNwb25zZTpbZnVuY3Rpb24oZGF0YSl7aWYoInN0cmluZyI9PXR5cGVvZiBkYXRhKXRyeXtkYXRhPUpTT04ucGFyc2UoZGF0YSl9Y2F0Y2goZSl7fXJldHVybiBkYXRhfV0sdGltZW91dDowLHhzcmZDb29raWVOYW1lOiJYU1JGLVRPS0VOIix4c3JmSGVhZGVyTmFtZToiWC1YU1JGLVRPS0VOIixtYXhDb250ZW50TGVuZ3RoOi0xLHZhbGlkYXRlU3RhdHVzOmZ1bmN0aW9uKHN0YXR1cyl7cmV0dXJuIDIwMDw9c3RhdHVzJiZzdGF0dXM8MzAwfX07ZGVmYXVsdHMuaGVhZGVycz17Y29tbW9uOntBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKiJ9fSx1dGlscy5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCJdLGZ1bmN0aW9uKG1ldGhvZCl7ZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdPXt9fSksdXRpbHMuZm9yRWFjaChbInBvc3QiLCJwdXQiLCJwYXRjaCJdLGZ1bmN0aW9uKG1ldGhvZCl7ZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdPXV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKX0pLG1vZHVsZS5leHBvcnRzPWRlZmF1bHRzfSkuY2FsbCh0aGlzLF9fd2VicGFja19yZXF1aXJlX18oIjhveEIiKSl9LCJKTVcrIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIEludGVybmFsLG5ld0dlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSxPd25Qcm9taXNlQ2FwYWJpbGl0eSxXcmFwcGVyLExJQlJBUlk9X193ZWJwYWNrX3JlcXVpcmVfXygidU9QUyIpLGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1VDJZIiksY3R4PV9fd2VicGFja19yZXF1aXJlX18oIjJHVFAiKSxjbGFzc29mPV9fd2VicGFja19yZXF1aXJlX18oIlFNTVQiKSwkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlk3WkMiKSxpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI5M0k0IiksYUZ1bmN0aW9uPV9fd2VicGFja19yZXF1aXJlX18oImVhb2giKSxhbkluc3RhbmNlPV9fd2VicGFja19yZXF1aXJlX18oIkVYTWoiKSxmb3JPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJvaW9SIiksc3BlY2llc0NvbnN0cnVjdG9yPV9fd2VicGFja19yZXF1aXJlX18oIjhnSHoiKSx0YXNrPV9fd2VicGFja19yZXF1aXJlX18oIlFYaGYiKS5zZXQsbWljcm90YXNrPV9fd2VicGFja19yZXF1aXJlX18oInE2TEoiKSgpLG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlPV9fd2VicGFja19yZXF1aXJlX18oIlpXNXEiKSxwZXJmb3JtPV9fd2VicGFja19yZXF1aXJlX18oIlJEbVYiKSx1c2VyQWdlbnQ9X193ZWJwYWNrX3JlcXVpcmVfXygidkJQOSIpLHByb21pc2VSZXNvbHZlPV9fd2VicGFja19yZXF1aXJlX18oInpYaFoiKSxUeXBlRXJyb3I9Z2xvYmFsLlR5cGVFcnJvcixwcm9jZXNzPWdsb2JhbC5wcm9jZXNzLHZlcnNpb25zPXByb2Nlc3MmJnByb2Nlc3MudmVyc2lvbnMsdjg9dmVyc2lvbnMmJnZlcnNpb25zLnY4fHwiIiwkUHJvbWlzZT1nbG9iYWwuUHJvbWlzZSxpc05vZGU9InByb2Nlc3MiPT1jbGFzc29mKHByb2Nlc3MpLGVtcHR5PWZ1bmN0aW9uKCl7fSxuZXdQcm9taXNlQ2FwYWJpbGl0eT1uZXdHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHk9bmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUuZixVU0VfTkFUSVZFPSEhZnVuY3Rpb24oKXt0cnl7dmFyIHByb21pc2U9JFByb21pc2UucmVzb2x2ZSgxKSxGYWtlUHJvbWlzZT0ocHJvbWlzZS5jb25zdHJ1Y3Rvcj17fSlbX193ZWJwYWNrX3JlcXVpcmVfXygiVVdpWCIpKCJzcGVjaWVzIildPWZ1bmN0aW9uKGV4ZWMpe2V4ZWMoZW1wdHksZW1wdHkpfTtyZXR1cm4oaXNOb2RlfHwiZnVuY3Rpb24iPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmcHJvbWlzZS50aGVuKGVtcHR5KWluc3RhbmNlb2YgRmFrZVByb21pc2UmJjAhPT12OC5pbmRleE9mKCI2LjYiKSYmLTE9PT11c2VyQWdlbnQuaW5kZXhPZigiQ2hyb21lLzY2Iil9Y2F0Y2goZSl7fX0oKSxpc1RoZW5hYmxlPWZ1bmN0aW9uKGl0KXt2YXIgdGhlbjtyZXR1cm4hKCFpc09iamVjdChpdCl8fCJmdW5jdGlvbiIhPXR5cGVvZih0aGVuPWl0LnRoZW4pKSYmdGhlbn0sbm90aWZ5PWZ1bmN0aW9uKHByb21pc2UsaXNSZWplY3Qpe2lmKCFwcm9taXNlLl9uKXtwcm9taXNlLl9uPSEwO3ZhciBjaGFpbj1wcm9taXNlLl9jO21pY3JvdGFzayhmdW5jdGlvbigpe2Zvcih2YXIgdmFsdWU9cHJvbWlzZS5fdixvaz0xPT1wcm9taXNlLl9zLGk9MCxydW49ZnVuY3Rpb24ocmVhY3Rpb24pe3ZhciByZXN1bHQsdGhlbixleGl0ZWQsaGFuZGxlcj1vaz9yZWFjdGlvbi5vazpyZWFjdGlvbi5mYWlsLHJlc29sdmU9cmVhY3Rpb24ucmVzb2x2ZSxyZWplY3Q9cmVhY3Rpb24ucmVqZWN0LGRvbWFpbj1yZWFjdGlvbi5kb21haW47dHJ5e2hhbmRsZXI/KG9rfHwoMj09cHJvbWlzZS5faCYmb25IYW5kbGVVbmhhbmRsZWQocHJvbWlzZSkscHJvbWlzZS5faD0xKSwhMD09PWhhbmRsZXI/cmVzdWx0PXZhbHVlOihkb21haW4mJmRvbWFpbi5lbnRlcigpLHJlc3VsdD1oYW5kbGVyKHZhbHVlKSxkb21haW4mJihkb21haW4uZXhpdCgpLGV4aXRlZD0hMCkpLHJlc3VsdD09PXJlYWN0aW9uLnByb21pc2U/cmVqZWN0KFR5cGVFcnJvcigiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKToodGhlbj1pc1RoZW5hYmxlKHJlc3VsdCkpP3RoZW4uY2FsbChyZXN1bHQscmVzb2x2ZSxyZWplY3QpOnJlc29sdmUocmVzdWx0KSk6cmVqZWN0KHZhbHVlKX1jYXRjaChlKXtkb21haW4mJiFleGl0ZWQmJmRvbWFpbi5leGl0KCkscmVqZWN0KGUpfX07Y2hhaW4ubGVuZ3RoPmk7KXJ1bihjaGFpbltpKytdKTtwcm9taXNlLl9jPVtdLHByb21pc2UuX249ITEsaXNSZWplY3QmJiFwcm9taXNlLl9oJiZvblVuaGFuZGxlZChwcm9taXNlKX0pfX0sb25VbmhhbmRsZWQ9ZnVuY3Rpb24ocHJvbWlzZSl7dGFzay5jYWxsKGdsb2JhbCxmdW5jdGlvbigpe3ZhciByZXN1bHQsaGFuZGxlcixjb25zb2xlLHZhbHVlPXByb21pc2UuX3YsdW5oYW5kbGVkPWlzVW5oYW5kbGVkKHByb21pc2UpO2lmKHVuaGFuZGxlZCYmKHJlc3VsdD1wZXJmb3JtKGZ1bmN0aW9uKCl7aXNOb2RlP3Byb2Nlc3MuZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIix2YWx1ZSxwcm9taXNlKTooaGFuZGxlcj1nbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24pP2hhbmRsZXIoe3Byb21pc2U6cHJvbWlzZSxyZWFzb246dmFsdWV9KTooY29uc29sZT1nbG9iYWwuY29uc29sZSkmJmNvbnNvbGUuZXJyb3ImJmNvbnNvbGUuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsdmFsdWUpfSkscHJvbWlzZS5faD1pc05vZGV8fGlzVW5oYW5kbGVkKHByb21pc2UpPzI6MSkscHJvbWlzZS5fYT12b2lkIDAsdW5oYW5kbGVkJiZyZXN1bHQuZSl0aHJvdyByZXN1bHQudn0pfSxpc1VuaGFuZGxlZD1mdW5jdGlvbihwcm9taXNlKXtyZXR1cm4gMSE9PXByb21pc2UuX2gmJjA9PT0ocHJvbWlzZS5fYXx8cHJvbWlzZS5fYykubGVuZ3RofSxvbkhhbmRsZVVuaGFuZGxlZD1mdW5jdGlvbihwcm9taXNlKXt0YXNrLmNhbGwoZ2xvYmFsLGZ1bmN0aW9uKCl7dmFyIGhhbmRsZXI7aXNOb2RlP3Byb2Nlc3MuZW1pdCgicmVqZWN0aW9uSGFuZGxlZCIscHJvbWlzZSk6KGhhbmRsZXI9Z2xvYmFsLm9ucmVqZWN0aW9uaGFuZGxlZCkmJmhhbmRsZXIoe3Byb21pc2U6cHJvbWlzZSxyZWFzb246cHJvbWlzZS5fdn0pfSl9LCRyZWplY3Q9ZnVuY3Rpb24odmFsdWUpe3ZhciBwcm9taXNlPXRoaXM7cHJvbWlzZS5fZHx8KHByb21pc2UuX2Q9ITAsKHByb21pc2U9cHJvbWlzZS5fd3x8cHJvbWlzZSkuX3Y9dmFsdWUscHJvbWlzZS5fcz0yLHByb21pc2UuX2F8fChwcm9taXNlLl9hPXByb21pc2UuX2Muc2xpY2UoKSksbm90aWZ5KHByb21pc2UsITApKX0sJHJlc29sdmU9ZnVuY3Rpb24odmFsdWUpe3ZhciB0aGVuLHByb21pc2U9dGhpcztpZighcHJvbWlzZS5fZCl7cHJvbWlzZS5fZD0hMCxwcm9taXNlPXByb21pc2UuX3d8fHByb21pc2U7dHJ5e2lmKHByb21pc2U9PT12YWx1ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHRoZW49aXNUaGVuYWJsZSh2YWx1ZSkpP21pY3JvdGFzayhmdW5jdGlvbigpe3ZhciB3cmFwcGVyPXtfdzpwcm9taXNlLF9kOiExfTt0cnl7dGhlbi5jYWxsKHZhbHVlLGN0eCgkcmVzb2x2ZSx3cmFwcGVyLDEpLGN0eCgkcmVqZWN0LHdyYXBwZXIsMSkpfWNhdGNoKGUpeyRyZWplY3QuY2FsbCh3cmFwcGVyLGUpfX0pOihwcm9taXNlLl92PXZhbHVlLHByb21pc2UuX3M9MSxub3RpZnkocHJvbWlzZSwhMSkpfWNhdGNoKGUpeyRyZWplY3QuY2FsbCh7X3c6cHJvbWlzZSxfZDohMX0sZSl9fX07VVNFX05BVElWRXx8KCRQcm9taXNlPWZ1bmN0aW9uKGV4ZWN1dG9yKXthbkluc3RhbmNlKHRoaXMsJFByb21pc2UsIlByb21pc2UiLCJfaCIpLGFGdW5jdGlvbihleGVjdXRvciksSW50ZXJuYWwuY2FsbCh0aGlzKTt0cnl7ZXhlY3V0b3IoY3R4KCRyZXNvbHZlLHRoaXMsMSksY3R4KCRyZWplY3QsdGhpcywxKSl9Y2F0Y2goZXJyKXskcmVqZWN0LmNhbGwodGhpcyxlcnIpfX0sKEludGVybmFsPWZ1bmN0aW9uKGV4ZWN1dG9yKXt0aGlzLl9jPVtdLHRoaXMuX2E9dm9pZCAwLHRoaXMuX3M9MCx0aGlzLl9kPSExLHRoaXMuX3Y9dm9pZCAwLHRoaXMuX2g9MCx0aGlzLl9uPSExfSkucHJvdG90eXBlPV9fd2VicGFja19yZXF1aXJlX18oIlhKVS8iKSgkUHJvbWlzZS5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24ob25GdWxmaWxsZWQsb25SZWplY3RlZCl7dmFyIHJlYWN0aW9uPW5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCRQcm9taXNlKSk7cmV0dXJuIHJlYWN0aW9uLm9rPSJmdW5jdGlvbiIhPXR5cGVvZiBvbkZ1bGZpbGxlZHx8b25GdWxmaWxsZWQscmVhY3Rpb24uZmFpbD0iZnVuY3Rpb24iPT10eXBlb2Ygb25SZWplY3RlZCYmb25SZWplY3RlZCxyZWFjdGlvbi5kb21haW49aXNOb2RlP3Byb2Nlc3MuZG9tYWluOnZvaWQgMCx0aGlzLl9jLnB1c2gocmVhY3Rpb24pLHRoaXMuX2EmJnRoaXMuX2EucHVzaChyZWFjdGlvbiksdGhpcy5fcyYmbm90aWZ5KHRoaXMsITEpLHJlYWN0aW9uLnByb21pc2V9LGNhdGNoOmZ1bmN0aW9uKG9uUmVqZWN0ZWQpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLG9uUmVqZWN0ZWQpfX0pLE93blByb21pc2VDYXBhYmlsaXR5PWZ1bmN0aW9uKCl7dmFyIHByb21pc2U9bmV3IEludGVybmFsO3RoaXMucHJvbWlzZT1wcm9taXNlLHRoaXMucmVzb2x2ZT1jdHgoJHJlc29sdmUscHJvbWlzZSwxKSx0aGlzLnJlamVjdD1jdHgoJHJlamVjdCxwcm9taXNlLDEpfSxuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZS5mPW5ld1Byb21pc2VDYXBhYmlsaXR5PWZ1bmN0aW9uKEMpe3JldHVybiBDPT09JFByb21pc2V8fEM9PT1XcmFwcGVyP25ldyBPd25Qcm9taXNlQ2FwYWJpbGl0eShDKTpuZXdHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkoQyl9KSwkZXhwb3J0KCRleHBvcnQuRyskZXhwb3J0LlcrJGV4cG9ydC5GKiFVU0VfTkFUSVZFLHtQcm9taXNlOiRQcm9taXNlfSksX193ZWJwYWNrX3JlcXVpcmVfXygiUmZLQiIpKCRQcm9taXNlLCJQcm9taXNlIiksX193ZWJwYWNrX3JlcXVpcmVfXygiVEpXTiIpKCJQcm9taXNlIiksV3JhcHBlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXRXBrIikuUHJvbWlzZSwkZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqIVVTRV9OQVRJVkUsIlByb21pc2UiLHtyZWplY3Q6ZnVuY3Rpb24ocil7dmFyIGNhcGFiaWxpdHk9bmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcyk7cmV0dXJuKDAsY2FwYWJpbGl0eS5yZWplY3QpKHIpLGNhcGFiaWxpdHkucHJvbWlzZX19KSwkZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqKExJQlJBUll8fCFVU0VfTkFUSVZFKSwiUHJvbWlzZSIse3Jlc29sdmU6ZnVuY3Rpb24oeCl7cmV0dXJuIHByb21pc2VSZXNvbHZlKExJQlJBUlkmJnRoaXM9PT1XcmFwcGVyPyRQcm9taXNlOnRoaXMseCl9fSksJGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKiEoVVNFX05BVElWRSYmX193ZWJwYWNrX3JlcXVpcmVfXygiVHVHRCIpKGZ1bmN0aW9uKGl0ZXIpeyRQcm9taXNlLmFsbChpdGVyKS5jYXRjaChlbXB0eSl9KSksIlByb21pc2UiLHthbGw6ZnVuY3Rpb24oaXRlcmFibGUpe3ZhciBDPXRoaXMsY2FwYWJpbGl0eT1uZXdQcm9taXNlQ2FwYWJpbGl0eShDKSxyZXNvbHZlPWNhcGFiaWxpdHkucmVzb2x2ZSxyZWplY3Q9Y2FwYWJpbGl0eS5yZWplY3QscmVzdWx0PXBlcmZvcm0oZnVuY3Rpb24oKXt2YXIgdmFsdWVzPVtdLGluZGV4PTAscmVtYWluaW5nPTE7Zm9yT2YoaXRlcmFibGUsITEsZnVuY3Rpb24ocHJvbWlzZSl7dmFyICRpbmRleD1pbmRleCsrLGFscmVhZHlDYWxsZWQ9ITE7dmFsdWVzLnB1c2godm9pZCAwKSxyZW1haW5pbmcrKyxDLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSl7YWxyZWFkeUNhbGxlZHx8KGFscmVhZHlDYWxsZWQ9ITAsdmFsdWVzWyRpbmRleF09dmFsdWUsLS1yZW1haW5pbmd8fHJlc29sdmUodmFsdWVzKSl9LHJlamVjdCl9KSwtLXJlbWFpbmluZ3x8cmVzb2x2ZSh2YWx1ZXMpfSk7cmV0dXJuIHJlc3VsdC5lJiZyZWplY3QocmVzdWx0LnYpLGNhcGFiaWxpdHkucHJvbWlzZX0scmFjZTpmdW5jdGlvbihpdGVyYWJsZSl7dmFyIEM9dGhpcyxjYXBhYmlsaXR5PW5ld1Byb21pc2VDYXBhYmlsaXR5KEMpLHJlamVjdD1jYXBhYmlsaXR5LnJlamVjdCxyZXN1bHQ9cGVyZm9ybShmdW5jdGlvbigpe2Zvck9mKGl0ZXJhYmxlLCExLGZ1bmN0aW9uKHByb21pc2Upe0MucmVzb2x2ZShwcm9taXNlKS50aGVuKGNhcGFiaWxpdHkucmVzb2x2ZSxyZWplY3QpfSl9KTtyZXR1cm4gcmVzdWx0LmUmJnJlamVjdChyZXN1bHQudiksY2FwYWJpbGl0eS5wcm9taXNlfX0pfSxKVlNKOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5KXt2YXIgcmVzdWx0PW51bWJlcisiICI7c3dpdGNoKGtleSl7Y2FzZSJzcyI6cmV0dXJuIHJlc3VsdCs9MT09PW51bWJlcj8ic2VrdW5kYSI6Mj09PW51bWJlcnx8Mz09PW51bWJlcnx8ND09PW51bWJlcj8ic2VrdW5kZSI6InNla3VuZGkiO2Nhc2UibSI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/ImplZG5hIG1pbnV0YSI6ImplZG5lIG1pbnV0ZSI7Y2FzZSJtbSI6cmV0dXJuIHJlc3VsdCs9MT09PW51bWJlcj8ibWludXRhIjoyPT09bnVtYmVyfHwzPT09bnVtYmVyfHw0PT09bnVtYmVyPyJtaW51dGUiOiJtaW51dGEiO2Nhc2UiaCI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/ImplZGFuIHNhdCI6ImplZG5vZyBzYXRhIjtjYXNlImhoIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyPyJzYXQiOjI9PT1udW1iZXJ8fDM9PT1udW1iZXJ8fDQ9PT1udW1iZXI/InNhdGEiOiJzYXRpIjtjYXNlImRkIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyPyJkYW4iOiJkYW5hIjtjYXNlIk1NIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyPyJtamVzZWMiOjI9PT1udW1iZXJ8fDM9PT1udW1iZXJ8fDQ9PT1udW1iZXI/Im1qZXNlY2EiOiJtamVzZWNpIjtjYXNlInl5IjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyPyJnb2RpbmEiOjI9PT1udW1iZXJ8fDM9PT1udW1iZXJ8fDQ9PT1udW1iZXI/ImdvZGluZSI6ImdvZGluYSJ9fW1vbWVudC5kZWZpbmVMb2NhbGUoImJzIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJ0X2FwcmlsX21hal9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJhcl9va3RvYmFyX25vdmVtYmFyX2RlY2VtYmFyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW4uX2ZlYi5fbWFyLl9hcHIuX21hai5fanVuLl9qdWwuX2F1Zy5fc2VwLl9va3QuX25vdi5fZGVjLiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJuZWRqZWxqYV9wb25lZGplbGpha191dG9yYWtfc3JpamVkYV/EjWV0dnJ0YWtfcGV0YWtfc3Vib3RhIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Im5lZC5fcG9uLl91dG8uX3NyaS5fxI1ldC5fcGV0Ll9zdWIuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJuZV9wb191dF9zcl/EjWVfcGVfc3UiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbZGFuYXMgdV0gTFQiLG5leHREYXk6IltzdXRyYSB1XSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbdV0gW25lZGplbGp1XSBbdV0gTFQiO2Nhc2UgMzpyZXR1cm4iW3VdIFtzcmlqZWR1XSBbdV0gTFQiO2Nhc2UgNjpyZXR1cm4iW3VdIFtzdWJvdHVdIFt1XSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJbdV0gZGRkZCBbdV0gTFQifX0sbGFzdERheToiW2p1xI1lciB1XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpyZXR1cm4iW3Byb8WhbHVdIGRkZGQgW3VdIExUIjtjYXNlIDY6cmV0dXJuIltwcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3Byb8WhbGldIGRkZGQgW3VdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InphICVzIixwYXN0OiJwcmlqZSAlcyIsczoicGFyIHNla3VuZGkiLHNzOnRyYW5zbGF0ZSxtOnRyYW5zbGF0ZSxtbTp0cmFuc2xhdGUsaDp0cmFuc2xhdGUsaGg6dHJhbnNsYXRlLGQ6ImRhbiIsZGQ6dHJhbnNsYXRlLE06Im1qZXNlYyIsTU06dHJhbnNsYXRlLHk6ImdvZGludSIseXk6dHJhbnNsYXRlfSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LEpjbW86ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGV4cD1NYXRoLmV4cDskZXhwb3J0KCRleHBvcnQuUywiTWF0aCIse2Nvc2g6ZnVuY3Rpb24oeCl7cmV0dXJuKGV4cCh4PSt4KStleHAoLXgpKS8yfX0pfSxKZHVMOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIlh0cjgiKSgiZ2V0T3duUHJvcGVydHlOYW1lcyIsZnVuY3Rpb24oKXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygiZTd5ViIpLmZ9KX0sSmVzMDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQpe2lmKG51bGw9PWl0KXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIraXQpO3JldHVybiBpdH19LCJKaS9sIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LkcrJGV4cG9ydC5XKyRleHBvcnQuRiohX193ZWJwYWNrX3JlcXVpcmVfXygiRDRpViIpLkFCVix7RGF0YVZpZXc6X193ZWJwYWNrX3JlcXVpcmVfXygiN1F0eiIpLkRhdGFWaWV3fSl9LEppRWE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe2V4cG9ydHMuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSxKdmxXOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgdW5pdHM9e3NzOiJzZWt1bmTEl19zZWt1bmTFvmnFs19zZWt1bmRlcyIsbToibWludXTEl19taW51dMSXc19taW51dMSZIixtbToibWludXTEl3NfbWludcSNacWzX21pbnV0ZXMiLGg6InZhbGFuZGFfdmFsYW5kb3NfdmFsYW5kxIUiLGhoOiJ2YWxhbmRvc192YWxhbmTFs192YWxhbmRhcyIsZDoiZGllbmFfZGllbm9zX2RpZW7EhSIsZGQ6ImRpZW5vc19kaWVuxbNfZGllbmFzIixNOiJtxJdudW9fbcSXbmVzaW9fbcSXbmVzxK8iLE1NOiJtxJduZXNpYWlfbcSXbmVzacWzX23El25lc2l1cyIseToibWV0YWlfbWV0xbNfbWV0dXMiLHl5OiJtZXRhaV9tZXTFs19tZXR1cyJ9O2Z1bmN0aW9uIHRyYW5zbGF0ZVNpbmd1bGFyKG51bWJlcix3aXRob3V0U3VmZml4LGtleSxpc0Z1dHVyZSl7cmV0dXJuIHdpdGhvdXRTdWZmaXg/Zm9ybXMoa2V5KVswXTppc0Z1dHVyZT9mb3JtcyhrZXkpWzFdOmZvcm1zKGtleSlbMl19ZnVuY3Rpb24gc3BlY2lhbChudW1iZXIpe3JldHVybiBudW1iZXIlMTA9PTB8fDEwPG51bWJlciYmbnVtYmVyPDIwfWZ1bmN0aW9uIGZvcm1zKGtleSl7cmV0dXJuIHVuaXRzW2tleV0uc3BsaXQoIl8iKX1mdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5LGlzRnV0dXJlKXt2YXIgcmVzdWx0PW51bWJlcisiICI7cmV0dXJuIDE9PT1udW1iZXI/cmVzdWx0K3RyYW5zbGF0ZVNpbmd1bGFyKDAsd2l0aG91dFN1ZmZpeCxrZXlbMF0saXNGdXR1cmUpOndpdGhvdXRTdWZmaXg/cmVzdWx0KyhzcGVjaWFsKG51bWJlcik/Zm9ybXMoa2V5KVsxXTpmb3JtcyhrZXkpWzBdKTppc0Z1dHVyZT9yZXN1bHQrZm9ybXMoa2V5KVsxXTpyZXN1bHQrKHNwZWNpYWwobnVtYmVyKT9mb3JtcyhrZXkpWzFdOmZvcm1zKGtleSlbMl0pfW1vbWVudC5kZWZpbmVMb2NhbGUoImx0Iix7bW9udGhzOntmb3JtYXQ6InNhdXNpb192YXNhcmlvX2tvdm9fYmFsYW5kxb5pb19nZWd1xb7El3NfYmlyxb5lbGlvX2xpZXBvc19ydWdwasWrxI1pb19ydWdzxJdqb19zcGFsaW9fbGFwa3JpxI1pb19ncnVvZMW+aW8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToic2F1c2lzX3Zhc2FyaXNfa292YXNfYmFsYW5kaXNfZ2VndcW+xJdfYmlyxb5lbGlzX2xpZXBhX3J1Z3Bqxat0aXNfcnVnc8SXamlzX3NwYWxpc19sYXBrcml0aXNfZ3J1b2RpcyIuc3BsaXQoIl8iKSxpc0Zvcm1hdDovRFtvRF0/KFxbW15cW1xdXSpcXXxccykrTU1NTT98TU1NTT8oXFtbXlxbXF1dKlxdfFxzKStEW29EXT8vfSxtb250aHNTaG9ydDoic2F1X3Zhc19rb3ZfYmFsX2dlZ19iaXJfbGllX3JncF9yZ3Nfc3BhX2xhcF9ncmQiLnNwbGl0KCJfIiksd2Vla2RheXM6e2Zvcm1hdDoic2VrbWFkaWVuxK9fcGlybWFkaWVuxK9fYW50cmFkaWVuxK9fdHJlxI1pYWRpZW7Er19rZXR2aXJ0YWRpZW7Er19wZW5rdGFkaWVuxK9fxaFlxaF0YWRpZW7EryIuc3BsaXQoIl8iKSxzdGFuZGFsb25lOiJzZWttYWRpZW5pc19waXJtYWRpZW5pc19hbnRyYWRpZW5pc190cmXEjWlhZGllbmlzX2tldHZpcnRhZGllbmlzX3Blbmt0YWRpZW5pc1/FoWXFoXRhZGllbmlzIi5zcGxpdCgiXyIpLGlzRm9ybWF0Oi9kZGRkIEhIOm1tL30sd2Vla2RheXNTaG9ydDoiU2VrX1Bpcl9BbnRfVHJlX0tldF9QZW5fxaBlxaEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlNfUF9BX1RfS19Qbl/FoCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IllZWVkgW20uXSBNTU1NIEQgW2QuXSIsTExMOiJZWVlZIFttLl0gTU1NTSBEIFtkLl0sIEhIOm1tIFt2YWwuXSIsTExMTDoiWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBkZGRkLCBISDptbSBbdmFsLl0iLGw6IllZWVktTU0tREQiLGxsOiJZWVlZIFttLl0gTU1NTSBEIFtkLl0iLGxsbDoiWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBISDptbSBbdmFsLl0iLGxsbGw6IllZWVkgW20uXSBNTU1NIEQgW2QuXSwgZGRkLCBISDptbSBbdmFsLl0ifSxjYWxlbmRhcjp7c2FtZURheToiW8WgaWFuZGllbl0gTFQiLG5leHREYXk6IltSeXRval0gTFQiLG5leHRXZWVrOiJkZGRkIExUIixsYXN0RGF5OiJbVmFrYXJdIExUIixsYXN0V2VlazoiW1ByYcSXanVzxK9dIGRkZGQgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InBvICVzIixwYXN0OiJwcmllxaEgJXMiLHM6ZnVuY3Rpb24obnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5LGlzRnV0dXJlKXtyZXR1cm4gd2l0aG91dFN1ZmZpeD8ia2VsaW9zIHNla3VuZMSXcyI6aXNGdXR1cmU/ImtlbGnFsyBzZWt1bmTFvmnFsyI6ImtlbGlhcyBzZWt1bmRlcyJ9LHNzOnRyYW5zbGF0ZSxtOnRyYW5zbGF0ZVNpbmd1bGFyLG1tOnRyYW5zbGF0ZSxoOnRyYW5zbGF0ZVNpbmd1bGFyLGhoOnRyYW5zbGF0ZSxkOnRyYW5zbGF0ZVNpbmd1bGFyLGRkOnRyYW5zbGF0ZSxNOnRyYW5zbGF0ZVNpbmd1bGFyLE1NOnRyYW5zbGF0ZSx5OnRyYW5zbGF0ZVNpbmd1bGFyLHl5OnRyYW5zbGF0ZX0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfS1vamkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXtyZXR1cm4gbnVtYmVyKyItb2ppIn0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCJLL3RjIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiYWYiLHttb250aHM6IkphbnVhcmllX0ZlYnJ1YXJpZV9NYWFydF9BcHJpbF9NZWlfSnVuaWVfSnVsaWVfQXVndXN0dXNfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGVzZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTXJ0X0Fwcl9NZWlfSnVuX0p1bF9BdWdfU2VwX09rdF9Ob3ZfRGVzIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTb25kYWdfTWFhbmRhZ19EaW5zZGFnX1dvZW5zZGFnX0RvbmRlcmRhZ19WcnlkYWdfU2F0ZXJkYWciLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU29uX01hYV9EaW5fV29lX0Rvbl9WcnlfU2F0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTb19NYV9EaV9Xb19Eb19Wcl9TYSIuc3BsaXQoIl8iKSxtZXJpZGllbVBhcnNlOi92bXxubS9pLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybi9ebm0kL2kudGVzdChpbnB1dCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXJzLG1pbnV0ZXMsaXNMb3dlcil7cmV0dXJuIGhvdXJzPDEyP2lzTG93ZXI/InZtIjoiVk0iOmlzTG93ZXI/Im5tIjoiTk0ifSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltWYW5kYWcgb21dIExUIixuZXh0RGF5OiJbTcO0cmUgb21dIExUIixuZXh0V2VlazoiZGRkZCBbb21dIExUIixsYXN0RGF5OiJbR2lzdGVyIG9tXSBMVCIsbGFzdFdlZWs6IltMYWFzXSBkZGRkIFtvbV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9vciAlcyIscGFzdDoiJXMgZ2VsZWRlIixzOiInbiBwYWFyIHNla29uZGVzIixzczoiJWQgc2Vrb25kZXMiLG06IiduIG1pbnV1dCIsbW06IiVkIG1pbnV0ZSIsaDoiJ24gdXVyIixoaDoiJWQgdXJlIixkOiInbiBkYWciLGRkOiIlZCBkYWUiLE06IiduIG1hYW5kIixNTToiJWQgbWFhbmRlIix5OiInbiBqYWFyIix5eToiJWQgamFhciJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0oc3RlfGRlKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3JldHVybiBudW1iZXIrKDE9PT1udW1iZXJ8fDg9PT1udW1iZXJ8fDIwPD1udW1iZXI/InN0ZSI6ImRlIil9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxLMHhVOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBzdG9yZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJWVGVyIikoIndrcyIpLHVpZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5bHFzIiksU3ltYm9sPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKS5TeW1ib2wsVVNFX1NZTUJPTD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sOyhtb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihuYW1lKXtyZXR1cm4gc3RvcmVbbmFtZV18fChzdG9yZVtuYW1lXT1VU0VfU1lNQk9MJiZTeW1ib2xbbmFtZV18fChVU0VfU1lNQk9MP1N5bWJvbDp1aWQpKCJTeW1ib2wuIituYW1lKSl9KS5zdG9yZT1zdG9yZX0sIktIZCsiOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnQoc2NyaXB0RXhwb3J0cyxyZW5kZXIsc3RhdGljUmVuZGVyRm5zLGZ1bmN0aW9uYWxUZW1wbGF0ZSxpbmplY3RTdHlsZXMsc2NvcGVJZCxtb2R1bGVJZGVudGlmaWVyLHNoYWRvd01vZGUpe3ZhciBob29rLG9wdGlvbnM9ImZ1bmN0aW9uIj09dHlwZW9mIHNjcmlwdEV4cG9ydHM/c2NyaXB0RXhwb3J0cy5vcHRpb25zOnNjcmlwdEV4cG9ydHM7aWYocmVuZGVyJiYob3B0aW9ucy5yZW5kZXI9cmVuZGVyLG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zPXN0YXRpY1JlbmRlckZucyxvcHRpb25zLl9jb21waWxlZD0hMCksZnVuY3Rpb25hbFRlbXBsYXRlJiYob3B0aW9ucy5mdW5jdGlvbmFsPSEwKSxzY29wZUlkJiYob3B0aW9ucy5fc2NvcGVJZD0iZGF0YS12LSIrc2NvcGVJZCksbW9kdWxlSWRlbnRpZmllcj8oaG9vaz1mdW5jdGlvbihjb250ZXh0KXsoY29udGV4dD1jb250ZXh0fHx0aGlzLiR2bm9kZSYmdGhpcy4kdm5vZGUuc3NyQ29udGV4dHx8dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LiR2bm9kZSYmdGhpcy5wYXJlbnQuJHZub2RlLnNzckNvbnRleHQpfHwidW5kZWZpbmVkIj09dHlwZW9mIF9fVlVFX1NTUl9DT05URVhUX198fChjb250ZXh0PV9fVlVFX1NTUl9DT05URVhUX18pLGluamVjdFN0eWxlcyYmaW5qZWN0U3R5bGVzLmNhbGwodGhpcyxjb250ZXh0KSxjb250ZXh0JiZjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cyYmY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMuYWRkKG1vZHVsZUlkZW50aWZpZXIpfSxvcHRpb25zLl9zc3JSZWdpc3Rlcj1ob29rKTppbmplY3RTdHlsZXMmJihob29rPXNoYWRvd01vZGU/ZnVuY3Rpb24oKXtpbmplY3RTdHlsZXMuY2FsbCh0aGlzLHRoaXMuJHJvb3QuJG9wdGlvbnMuc2hhZG93Um9vdCl9OmluamVjdFN0eWxlcyksaG9vaylpZihvcHRpb25zLmZ1bmN0aW9uYWwpe29wdGlvbnMuX2luamVjdFN0eWxlcz1ob29rO3ZhciBvcmlnaW5hbFJlbmRlcj1vcHRpb25zLnJlbmRlcjtvcHRpb25zLnJlbmRlcj1mdW5jdGlvbihoLGNvbnRleHQpe3JldHVybiBob29rLmNhbGwoY29udGV4dCksb3JpZ2luYWxSZW5kZXIoaCxjb250ZXh0KX19ZWxzZXt2YXIgZXhpc3Rpbmc9b3B0aW9ucy5iZWZvcmVDcmVhdGU7b3B0aW9ucy5iZWZvcmVDcmVhdGU9ZXhpc3Rpbmc/W10uY29uY2F0KGV4aXN0aW5nLGhvb2spOltob29rXX1yZXR1cm57ZXhwb3J0czpzY3JpcHRFeHBvcnRzLG9wdGlvbnM6b3B0aW9uc319X193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImEiLGZ1bmN0aW9uKCl7cmV0dXJuIG5vcm1hbGl6ZUNvbXBvbmVudH0pfSxLS1hyOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgaXNSZWdFeHA9X193ZWJwYWNrX3JlcXVpcmVfXygicXVQaiIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSxzcGVjaWVzQ29uc3RydWN0b3I9X193ZWJwYWNrX3JlcXVpcmVfXygiNjlibiIpLGFkdmFuY2VTdHJpbmdJbmRleD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJBNUFOIiksdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygibmU4aSIpLGNhbGxSZWdFeHBFeGVjPV9fd2VicGFja19yZXF1aXJlX18oIlh4dXoiKSxyZWdleHBFeGVjPV9fd2VicGFja19yZXF1aXJlX18oIlVnb3MiKSxmYWlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIiksJG1pbj1NYXRoLm1pbiwkcHVzaD1bXS5wdXNoLFNVUFBPUlRTX1k9IWZhaWxzKGZ1bmN0aW9uKCl7UmVnRXhwKDQyOTQ5NjcyOTUsInkiKX0pO19fd2VicGFja19yZXF1aXJlX18oIklVK1oiKSgic3BsaXQiLDIsZnVuY3Rpb24oZGVmaW5lZCxTUExJVCwkc3BsaXQsbWF5YmVDYWxsTmF0aXZlKXt2YXIgaW50ZXJuYWxTcGxpdDtyZXR1cm4gaW50ZXJuYWxTcGxpdD0iYyI9PSJhYmJjIi5zcGxpdCgvKGIpKi8pWzFdfHw0IT0idGVzdCIuc3BsaXQoLyg/OikvLC0xKS5sZW5ndGh8fDIhPSJhYiIuc3BsaXQoLyg/OmFiKSovKS5sZW5ndGh8fDQhPSIuIi5zcGxpdCgvKC4/KSguPykvKS5sZW5ndGh8fDE8Ii4iLnNwbGl0KC8oKSgpLykubGVuZ3RofHwiIi5zcGxpdCgvLj8vKS5sZW5ndGg/ZnVuY3Rpb24oc2VwYXJhdG9yLGxpbWl0KXt2YXIgc3RyaW5nPVN0cmluZyh0aGlzKTtpZih2b2lkIDA9PT1zZXBhcmF0b3ImJjA9PT1saW1pdClyZXR1cm5bXTtpZighaXNSZWdFeHAoc2VwYXJhdG9yKSlyZXR1cm4gJHNwbGl0LmNhbGwoc3RyaW5nLHNlcGFyYXRvcixsaW1pdCk7Zm9yKHZhciBtYXRjaCxsYXN0SW5kZXgsbGFzdExlbmd0aCxvdXRwdXQ9W10sZmxhZ3M9KHNlcGFyYXRvci5pZ25vcmVDYXNlPyJpIjoiIikrKHNlcGFyYXRvci5tdWx0aWxpbmU/Im0iOiIiKSsoc2VwYXJhdG9yLnVuaWNvZGU/InUiOiIiKSsoc2VwYXJhdG9yLnN0aWNreT8ieSI6IiIpLGxhc3RMYXN0SW5kZXg9MCxzcGxpdExpbWl0PXZvaWQgMD09PWxpbWl0PzQyOTQ5NjcyOTU6bGltaXQ+Pj4wLHNlcGFyYXRvckNvcHk9bmV3IFJlZ0V4cChzZXBhcmF0b3Iuc291cmNlLGZsYWdzKyJnIik7KG1hdGNoPXJlZ2V4cEV4ZWMuY2FsbChzZXBhcmF0b3JDb3B5LHN0cmluZykpJiYhKGxhc3RMYXN0SW5kZXg8KGxhc3RJbmRleD1zZXBhcmF0b3JDb3B5Lmxhc3RJbmRleCkmJihvdXRwdXQucHVzaChzdHJpbmcuc2xpY2UobGFzdExhc3RJbmRleCxtYXRjaC5pbmRleCkpLDE8bWF0Y2gubGVuZ3RoJiZtYXRjaC5pbmRleDxzdHJpbmcubGVuZ3RoJiYkcHVzaC5hcHBseShvdXRwdXQsbWF0Y2guc2xpY2UoMSkpLGxhc3RMZW5ndGg9bWF0Y2hbMF0ubGVuZ3RoLGxhc3RMYXN0SW5kZXg9bGFzdEluZGV4LG91dHB1dC5sZW5ndGg+PXNwbGl0TGltaXQpKTspc2VwYXJhdG9yQ29weS5sYXN0SW5kZXg9PT1tYXRjaC5pbmRleCYmc2VwYXJhdG9yQ29weS5sYXN0SW5kZXgrKztyZXR1cm4gbGFzdExhc3RJbmRleD09PXN0cmluZy5sZW5ndGg/IWxhc3RMZW5ndGgmJnNlcGFyYXRvckNvcHkudGVzdCgiIil8fG91dHB1dC5wdXNoKCIiKTpvdXRwdXQucHVzaChzdHJpbmcuc2xpY2UobGFzdExhc3RJbmRleCkpLG91dHB1dC5sZW5ndGg+c3BsaXRMaW1pdD9vdXRwdXQuc2xpY2UoMCxzcGxpdExpbWl0KTpvdXRwdXR9OiIwIi5zcGxpdCh2b2lkIDAsMCkubGVuZ3RoP2Z1bmN0aW9uKHNlcGFyYXRvcixsaW1pdCl7cmV0dXJuIHZvaWQgMD09PXNlcGFyYXRvciYmMD09PWxpbWl0P1tdOiRzcGxpdC5jYWxsKHRoaXMsc2VwYXJhdG9yLGxpbWl0KX06JHNwbGl0LFtmdW5jdGlvbihzZXBhcmF0b3IsbGltaXQpe3ZhciBPPWRlZmluZWQodGhpcyksc3BsaXR0ZXI9bnVsbD09c2VwYXJhdG9yP3ZvaWQgMDpzZXBhcmF0b3JbU1BMSVRdO3JldHVybiB2b2lkIDAhPT1zcGxpdHRlcj9zcGxpdHRlci5jYWxsKHNlcGFyYXRvcixPLGxpbWl0KTppbnRlcm5hbFNwbGl0LmNhbGwoU3RyaW5nKE8pLHNlcGFyYXRvcixsaW1pdCl9LGZ1bmN0aW9uKHJlZ2V4cCxsaW1pdCl7dmFyIHJlcz1tYXliZUNhbGxOYXRpdmUoaW50ZXJuYWxTcGxpdCxyZWdleHAsdGhpcyxsaW1pdCxpbnRlcm5hbFNwbGl0IT09JHNwbGl0KTtpZihyZXMuZG9uZSlyZXR1cm4gcmVzLnZhbHVlO3ZhciByeD1hbk9iamVjdChyZWdleHApLFM9U3RyaW5nKHRoaXMpLEM9c3BlY2llc0NvbnN0cnVjdG9yKHJ4LFJlZ0V4cCksdW5pY29kZU1hdGNoaW5nPXJ4LnVuaWNvZGUsZmxhZ3M9KHJ4Lmlnbm9yZUNhc2U/ImkiOiIiKSsocngubXVsdGlsaW5lPyJtIjoiIikrKHJ4LnVuaWNvZGU/InUiOiIiKSsoU1VQUE9SVFNfWT8ieSI6ImciKSxzcGxpdHRlcj1uZXcgQyhTVVBQT1JUU19ZP3J4OiJeKD86IityeC5zb3VyY2UrIikiLGZsYWdzKSxsaW09dm9pZCAwPT09bGltaXQ/NDI5NDk2NzI5NTpsaW1pdD4+PjA7aWYoMD09PWxpbSlyZXR1cm5bXTtpZigwPT09Uy5sZW5ndGgpcmV0dXJuIG51bGw9PT1jYWxsUmVnRXhwRXhlYyhzcGxpdHRlcixTKT9bU106W107Zm9yKHZhciBwPTAscT0wLEE9W107cTxTLmxlbmd0aDspe3NwbGl0dGVyLmxhc3RJbmRleD1TVVBQT1JUU19ZP3E6MDt2YXIgZSx6PWNhbGxSZWdFeHBFeGVjKHNwbGl0dGVyLFNVUFBPUlRTX1k/UzpTLnNsaWNlKHEpKTtpZihudWxsPT09enx8KGU9JG1pbih0b0xlbmd0aChzcGxpdHRlci5sYXN0SW5kZXgrKFNVUFBPUlRTX1k/MDpxKSksUy5sZW5ndGgpKT09PXApcT1hZHZhbmNlU3RyaW5nSW5kZXgoUyxxLHVuaWNvZGVNYXRjaGluZyk7ZWxzZXtpZihBLnB1c2goUy5zbGljZShwLHEpKSxBLmxlbmd0aD09PWxpbSlyZXR1cm4gQTtmb3IodmFyIGk9MTtpPD16Lmxlbmd0aC0xO2krKylpZihBLnB1c2goeltpXSksQS5sZW5ndGg9PT1saW0pcmV0dXJuIEE7cT1wPWV9fXJldHVybiBBLnB1c2goUy5zbGljZShwKSksQX1dfSl9LEtPUWI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxhRnVuY3Rpb249X193ZWJwYWNrX3JlcXVpcmVfXygiMk9pRiIpLGN0eD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJtMFBwIiksZm9yT2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiU2xrWSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKENPTExFQ1RJT04peyRleHBvcnQoJGV4cG9ydC5TLENPTExFQ1RJT04se2Zyb206ZnVuY3Rpb24oc291cmNlKXt2YXIgbWFwcGluZyxBLG4sY2IsbWFwRm49YXJndW1lbnRzWzFdO3JldHVybiBhRnVuY3Rpb24odGhpcyksKG1hcHBpbmc9dm9pZCAwIT09bWFwRm4pJiZhRnVuY3Rpb24obWFwRm4pLG51bGw9PXNvdXJjZT9uZXcgdGhpczooQT1bXSxtYXBwaW5nPyhuPTAsY2I9Y3R4KG1hcEZuLGFyZ3VtZW50c1syXSwyKSxmb3JPZihzb3VyY2UsITEsZnVuY3Rpb24obmV4dEl0ZW0pe0EucHVzaChjYihuZXh0SXRlbSxuKyspKX0pKTpmb3JPZihzb3VyY2UsITEsQS5wdXNoLEEpLG5ldyB0aGlzKEEpKX19KX19LEtTRjg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoInZpIix7bW9udGhzOiJ0aMOhbmcgMV90aMOhbmcgMl90aMOhbmcgM190aMOhbmcgNF90aMOhbmcgNV90aMOhbmcgNl90aMOhbmcgN190aMOhbmcgOF90aMOhbmcgOV90aMOhbmcgMTBfdGjDoW5nIDExX3Row6FuZyAxMiIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiVGgwMV9UaDAyX1RoMDNfVGgwNF9UaDA1X1RoMDZfVGgwN19UaDA4X1RoMDlfVGgxMF9UaDExX1RoMTIiLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoiY2jhu6cgbmjhuq10X3Ro4bupIGhhaV90aOG7qSBiYV90aOG7qSB0xrBfdGjhu6kgbsSDbV90aOG7qSBzw6F1X3Ro4bupIGLhuqN5Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkNOX1QyX1QzX1Q0X1Q1X1Q2X1Q3Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJDTl9UMl9UM19UNF9UNV9UNl9UNyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbWVyaWRpZW1QYXJzZTovc2F8Y2gvaSxpc1BNOmZ1bmN0aW9uKGlucHV0KXtyZXR1cm4vXmNoJC9pLnRlc3QoaW5wdXQpfSxtZXJpZGllbTpmdW5jdGlvbihob3VycyxtaW51dGVzLGlzTG93ZXIpe3JldHVybiBob3VyczwxMj9pc0xvd2VyPyJzYSI6IlNBIjppc0xvd2VyPyJjaCI6IkNIIn0sbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBbbsSDbV0gWVlZWSIsTExMOiJEIE1NTU0gW27Eg21dIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBbbsSDbV0gWVlZWSBISDptbSIsbDoiREQvTS9ZWVlZIixsbDoiRCBNTU0gWVlZWSIsbGxsOiJEIE1NTSBZWVlZIEhIOm1tIixsbGxsOiJkZGQsIEQgTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0jDtG0gbmF5IGzDumNdIExUIixuZXh0RGF5OiJbTmfDoHkgbWFpIGzDumNdIExUIixuZXh0V2VlazoiZGRkZCBbdHXhuqduIHThu5tpIGzDumNdIExUIixsYXN0RGF5OiJbSMO0bSBxdWEgbMO6Y10gTFQiLGxhc3RXZWVrOiJkZGRkIFt0deG6p24gcuG7k2kgbMO6Y10gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIHThu5tpIixwYXN0OiIlcyB0csaw4bubYyIsczoidsOgaSBnacOieSIsc3M6IiVkIGdpw6J5IixtOiJt4buZdCBwaMO6dCIsbW06IiVkIHBow7p0IixoOiJt4buZdCBnaeG7nSIsaGg6IiVkIGdp4budIixkOiJt4buZdCBuZ8OgeSIsZGQ6IiVkIG5nw6B5IixNOiJt4buZdCB0aMOhbmciLE1NOiIlZCB0aMOhbmciLHk6Im3hu5l0IG7Eg20iLHl5OiIlZCBuxINtIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3JldHVybiBudW1iZXJ9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxLVHowOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgdHJhbnNsYXRvcj17d29yZHM6e3NzOlsic2VrdW5kIiwic2VrdW5kYSIsInNla3VuZGkiXSxtOlsiamVkYW4gbWludXQiLCJqZWRub2cgbWludXRhIl0sbW06WyJtaW51dCIsIm1pbnV0YSIsIm1pbnV0YSJdLGg6WyJqZWRhbiBzYXQiLCJqZWRub2cgc2F0YSJdLGhoOlsic2F0Iiwic2F0YSIsInNhdGkiXSxkZDpbImRhbiIsImRhbmEiLCJkYW5hIl0sTU06WyJtamVzZWMiLCJtamVzZWNhIiwibWplc2VjaSJdLHl5OlsiZ29kaW5hIiwiZ29kaW5lIiwiZ29kaW5hIl19LGNvcnJlY3RHcmFtbWF0aWNhbENhc2U6ZnVuY3Rpb24obnVtYmVyLHdvcmRLZXkpe3JldHVybiAxPT09bnVtYmVyP3dvcmRLZXlbMF06Mjw9bnVtYmVyJiZudW1iZXI8PTQ/d29yZEtleVsxXTp3b3JkS2V5WzJdfSx0cmFuc2xhdGU6ZnVuY3Rpb24obnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5KXt2YXIgd29yZEtleT10cmFuc2xhdG9yLndvcmRzW2tleV07cmV0dXJuIDE9PT1rZXkubGVuZ3RoP3dpdGhvdXRTdWZmaXg/d29yZEtleVswXTp3b3JkS2V5WzFdOm51bWJlcisiICIrdHJhbnNsYXRvci5jb3JyZWN0R3JhbW1hdGljYWxDYXNlKG51bWJlcix3b3JkS2V5KX19O21vbWVudC5kZWZpbmVMb2NhbGUoIm1lIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJ0X2FwcmlsX21hal9qdW5fanVsX2F2Z3VzdF9zZXB0ZW1iYXJfb2t0b2Jhcl9ub3ZlbWJhcl9kZWNlbWJhciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuLl9mZWIuX21hci5fYXByLl9tYWpfanVuX2p1bF9hdmcuX3NlcC5fb2t0Ll9ub3YuX2RlYy4iLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoibmVkamVsamFfcG9uZWRqZWxqYWtfdXRvcmFrX3NyaWplZGFfxI1ldHZydGFrX3BldGFrX3N1Ym90YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJuZWQuX3Bvbi5fdXRvLl9zcmkuX8SNZXQuX3BldC5fc3ViLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoibmVfcG9fdXRfc3JfxI1lX3BlX3N1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2RhbmFzIHVdIExUIixuZXh0RGF5OiJbc2p1dHJhIHVdIExUIixuZXh0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlt1XSBbbmVkamVsanVdIFt1XSBMVCI7Y2FzZSAzOnJldHVybiJbdV0gW3NyaWplZHVdIFt1XSBMVCI7Y2FzZSA2OnJldHVybiJbdV0gW3N1Ym90dV0gW3VdIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpjYXNlIDU6cmV0dXJuIlt1XSBkZGRkIFt1XSBMVCJ9fSxsYXN0RGF5OiJbanXEjWUgdV0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuWyJbcHJvxaFsZV0gW25lZGplbGplXSBbdV0gTFQiLCJbcHJvxaFsb2ddIFtwb25lZGplbGprYV0gW3VdIExUIiwiW3Byb8WhbG9nXSBbdXRvcmthXSBbdV0gTFQiLCJbcHJvxaFsZV0gW3NyaWplZGVdIFt1XSBMVCIsIltwcm/FoWxvZ10gW8SNZXR2cnRrYV0gW3VdIExUIiwiW3Byb8WhbG9nXSBbcGV0a2FdIFt1XSBMVCIsIltwcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQiXVt0aGlzLmRheSgpXX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InByaWplICVzIixzOiJuZWtvbGlrbyBzZWt1bmRpIixzczp0cmFuc2xhdG9yLnRyYW5zbGF0ZSxtOnRyYW5zbGF0b3IudHJhbnNsYXRlLG1tOnRyYW5zbGF0b3IudHJhbnNsYXRlLGg6dHJhbnNsYXRvci50cmFuc2xhdGUsaGg6dHJhbnNsYXRvci50cmFuc2xhdGUsZDoiZGFuIixkZDp0cmFuc2xhdG9yLnRyYW5zbGF0ZSxNOiJtamVzZWMiLE1NOnRyYW5zbGF0b3IudHJhbnNsYXRlLHk6ImdvZGludSIseXk6dHJhbnNsYXRvci50cmFuc2xhdGV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sS1V4UDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oZXhlYyl7dHJ5e3JldHVybiEhZXhlYygpfWNhdGNoKGUpe3JldHVybiEwfX19LEtyb0o6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIiksaGlkZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNdWtiIiksaGFzPV9fd2VicGFja19yZXF1aXJlX18oImFhZ3giKSxTUkM9X193ZWJwYWNrX3JlcXVpcmVfXygieWxxcyIpKCJzcmMiKSwkdG9TdHJpbmc9X193ZWJwYWNrX3JlcXVpcmVfXygiK2x2RiIpLFRQTD0oIiIrJHRvU3RyaW5nKS5zcGxpdCgidG9TdHJpbmciKTtfX3dlYnBhY2tfcmVxdWlyZV9fKCJnM2c1IikuaW5zcGVjdFNvdXJjZT1mdW5jdGlvbihpdCl7cmV0dXJuICR0b1N0cmluZy5jYWxsKGl0KX0sKG1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKE8sa2V5LHZhbCxzYWZlKXt2YXIgaXNGdW5jdGlvbj0iZnVuY3Rpb24iPT10eXBlb2YgdmFsO2lzRnVuY3Rpb24mJihoYXModmFsLCJuYW1lIil8fGhpZGUodmFsLCJuYW1lIixrZXkpKSxPW2tleV0hPT12YWwmJihpc0Z1bmN0aW9uJiYoaGFzKHZhbCxTUkMpfHxoaWRlKHZhbCxTUkMsT1trZXldPyIiK09ba2V5XTpUUEwuam9pbihTdHJpbmcoa2V5KSkpKSxPPT09Z2xvYmFsP09ba2V5XT12YWw6c2FmZT9PW2tleV0/T1trZXldPXZhbDpoaWRlKE8sa2V5LHZhbCk6KGRlbGV0ZSBPW2tleV0saGlkZShPLGtleSx2YWwpKSl9KShGdW5jdGlvbi5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzJiZ0aGlzW1NSQ118fCR0b1N0cmluZy5jYWxsKHRoaXMpfSl9LEt1dGg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSxkUHM9X193ZWJwYWNrX3JlcXVpcmVfXygiRkpXNSIpLGVudW1CdWdLZXlzPV9fd2VicGFja19yZXF1aXJlX18oIjRSNHUiKSxJRV9QUk9UTz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJZVHZBIikoIklFX1BST1RPIiksRW1wdHk9ZnVuY3Rpb24oKXt9LGNyZWF0ZURpY3Q9ZnVuY3Rpb24oKXt2YXIgaWZyYW1lRG9jdW1lbnQsaWZyYW1lPV9fd2VicGFja19yZXF1aXJlX18oIkl3NzEiKSgiaWZyYW1lIiksaT1lbnVtQnVnS2V5cy5sZW5ndGg7Zm9yKGlmcmFtZS5zdHlsZS5kaXNwbGF5PSJub25lIixfX3dlYnBhY2tfcmVxdWlyZV9fKCIrckx2IikuYXBwZW5kQ2hpbGQoaWZyYW1lKSxpZnJhbWUuc3JjPSJqYXZhc2NyaXB0OiIsKGlmcmFtZURvY3VtZW50PWlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50KS5vcGVuKCksaWZyYW1lRG9jdW1lbnQud3JpdGUoIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XC9zY3JpcHQ+IiksaWZyYW1lRG9jdW1lbnQuY2xvc2UoKSxjcmVhdGVEaWN0PWlmcmFtZURvY3VtZW50LkY7aS0tOylkZWxldGUgY3JlYXRlRGljdC5wcm90b3R5cGVbZW51bUJ1Z0tleXNbaV1dO3JldHVybiBjcmVhdGVEaWN0KCl9O21vZHVsZS5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKE8sUHJvcGVydGllcyl7dmFyIHJlc3VsdDtyZXR1cm4gbnVsbCE9PU8/KEVtcHR5LnByb3RvdHlwZT1hbk9iamVjdChPKSxyZXN1bHQ9bmV3IEVtcHR5LEVtcHR5LnByb3RvdHlwZT1udWxsLHJlc3VsdFtJRV9QUk9UT109Tyk6cmVzdWx0PWNyZWF0ZURpY3QoKSx2b2lkIDA9PT1Qcm9wZXJ0aWVzP3Jlc3VsdDpkUHMocmVzdWx0LFByb3BlcnRpZXMpfX0sS3c1cjpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pLGZ1bmN0aW9uKGdsb2JhbCl7Ci8qIQogKiBWdWUuanMgdjIuNS4xNwogKiAoYykgMjAxNC0yMDE4IEV2YW4gWW91CiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4KICovCnZhciBlbXB0eU9iamVjdD1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiBpc1VuZGVmKHYpe3JldHVybiBudWxsPT12fWZ1bmN0aW9uIGlzRGVmKHYpe3JldHVybiBudWxsIT12fWZ1bmN0aW9uIGlzVHJ1ZSh2KXtyZXR1cm4hMD09PXZ9ZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsdWUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdmFsdWV8fCJudW1iZXIiPT10eXBlb2YgdmFsdWV8fCJzeW1ib2wiPT10eXBlb2YgdmFsdWV8fCJib29sZWFuIj09dHlwZW9mIHZhbHVlfWZ1bmN0aW9uIGlzT2JqZWN0KG9iail7cmV0dXJuIG51bGwhPT1vYmomJiJvYmplY3QiPT10eXBlb2Ygb2JqfXZhciBfdG9TdHJpbmc9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iail7cmV0dXJuIltvYmplY3QgT2JqZWN0XSI9PT1fdG9TdHJpbmcuY2FsbChvYmopfWZ1bmN0aW9uIGlzUmVnRXhwKHYpe3JldHVybiJbb2JqZWN0IFJlZ0V4cF0iPT09X3RvU3RyaW5nLmNhbGwodil9ZnVuY3Rpb24gaXNWYWxpZEFycmF5SW5kZXgodmFsKXt2YXIgbj1wYXJzZUZsb2F0KFN0cmluZyh2YWwpKTtyZXR1cm4gMDw9biYmTWF0aC5mbG9vcihuKT09PW4mJmlzRmluaXRlKHZhbCl9ZnVuY3Rpb24gdG9TdHJpbmcodmFsKXtyZXR1cm4gbnVsbD09dmFsPyIiOiJvYmplY3QiPT10eXBlb2YgdmFsP0pTT04uc3RyaW5naWZ5KHZhbCxudWxsLDIpOlN0cmluZyh2YWwpfWZ1bmN0aW9uIHRvTnVtYmVyKHZhbCl7dmFyIG49cGFyc2VGbG9hdCh2YWwpO3JldHVybiBpc05hTihuKT92YWw6bn1mdW5jdGlvbiBtYWtlTWFwKHN0cixleHBlY3RzTG93ZXJDYXNlKXtmb3IodmFyIG1hcD1PYmplY3QuY3JlYXRlKG51bGwpLGxpc3Q9c3RyLnNwbGl0KCIsIiksaT0wO2k8bGlzdC5sZW5ndGg7aSsrKW1hcFtsaXN0W2ldXT0hMDtyZXR1cm4gZXhwZWN0c0xvd2VyQ2FzZT9mdW5jdGlvbih2YWwpe3JldHVybiBtYXBbdmFsLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbih2YWwpe3JldHVybiBtYXBbdmFsXX19bWFrZU1hcCgic2xvdCxjb21wb25lbnQiLCEwKTt2YXIgaXNSZXNlcnZlZEF0dHJpYnV0ZT1tYWtlTWFwKCJrZXkscmVmLHNsb3Qsc2xvdC1zY29wZSxpcyIpO2Z1bmN0aW9uIHJlbW92ZShhcnIsaXRlbSl7aWYoYXJyLmxlbmd0aCl7dmFyIGluZGV4PWFyci5pbmRleE9mKGl0ZW0pO2lmKC0xPGluZGV4KXJldHVybiBhcnIuc3BsaWNlKGluZGV4LDEpfX12YXIgaGFzT3duUHJvcGVydHk9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBoYXNPd24ob2JqLGtleSl7cmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSl9ZnVuY3Rpb24gY2FjaGVkKGZuKXt2YXIgY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24oc3RyKXtyZXR1cm4gY2FjaGVbc3RyXXx8KGNhY2hlW3N0cl09Zm4oc3RyKSl9fXZhciBjYW1lbGl6ZVJFPS8tKFx3KS9nLGNhbWVsaXplPWNhY2hlZChmdW5jdGlvbihzdHIpe3JldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLGZ1bmN0aW9uKF8sYyl7cmV0dXJuIGM/Yy50b1VwcGVyQ2FzZSgpOiIifSl9KSxjYXBpdGFsaXplPWNhY2hlZChmdW5jdGlvbihzdHIpe3JldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrc3RyLnNsaWNlKDEpfSksaHlwaGVuYXRlUkU9L1xCKFtBLVpdKS9nLGh5cGhlbmF0ZT1jYWNoZWQoZnVuY3Rpb24oc3RyKXtyZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgYmluZD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihmbixjdHgpe3JldHVybiBmbi5iaW5kKGN0eCl9OmZ1bmN0aW9uKGZuLGN0eCl7ZnVuY3Rpb24gYm91bmRGbihhKXt2YXIgbD1hcmd1bWVudHMubGVuZ3RoO3JldHVybiBsPzE8bD9mbi5hcHBseShjdHgsYXJndW1lbnRzKTpmbi5jYWxsKGN0eCxhKTpmbi5jYWxsKGN0eCl9cmV0dXJuIGJvdW5kRm4uX2xlbmd0aD1mbi5sZW5ndGgsYm91bmRGbn07ZnVuY3Rpb24gdG9BcnJheShsaXN0LHN0YXJ0KXtzdGFydD1zdGFydHx8MDtmb3IodmFyIGk9bGlzdC5sZW5ndGgtc3RhcnQscmV0PW5ldyBBcnJheShpKTtpLS07KXJldFtpXT1saXN0W2krc3RhcnRdO3JldHVybiByZXR9ZnVuY3Rpb24gZXh0ZW5kKHRvLF9mcm9tKXtmb3IodmFyIGtleSBpbiBfZnJvbSl0b1trZXldPV9mcm9tW2tleV07cmV0dXJuIHRvfWZ1bmN0aW9uIHRvT2JqZWN0KGFycil7Zm9yKHZhciByZXM9e30saT0wO2k8YXJyLmxlbmd0aDtpKyspYXJyW2ldJiZleHRlbmQocmVzLGFycltpXSk7cmV0dXJuIHJlc31mdW5jdGlvbiBub29wKGEsYixjKXt9dmFyIG5vPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4hMX0saWRlbnRpdHk9ZnVuY3Rpb24oXyl7cmV0dXJuIF99O2Z1bmN0aW9uIGxvb3NlRXF1YWwoYSxiKXtpZihhPT09YilyZXR1cm4hMDt2YXIgaXNPYmplY3RBPWlzT2JqZWN0KGEpLGlzT2JqZWN0Qj1pc09iamVjdChiKTtpZighaXNPYmplY3RBfHwhaXNPYmplY3RCKXJldHVybiFpc09iamVjdEEmJiFpc09iamVjdEImJlN0cmluZyhhKT09PVN0cmluZyhiKTt0cnl7dmFyIGlzQXJyYXlBPUFycmF5LmlzQXJyYXkoYSksaXNBcnJheUI9QXJyYXkuaXNBcnJheShiKTtpZihpc0FycmF5QSYmaXNBcnJheUIpcmV0dXJuIGEubGVuZ3RoPT09Yi5sZW5ndGgmJmEuZXZlcnkoZnVuY3Rpb24oZSxpKXtyZXR1cm4gbG9vc2VFcXVhbChlLGJbaV0pfSk7aWYoaXNBcnJheUF8fGlzQXJyYXlCKXJldHVybiExO3ZhciBrZXlzQT1PYmplY3Qua2V5cyhhKSxrZXlzQj1PYmplY3Qua2V5cyhiKTtyZXR1cm4ga2V5c0EubGVuZ3RoPT09a2V5c0IubGVuZ3RoJiZrZXlzQS5ldmVyeShmdW5jdGlvbihrZXkpe3JldHVybiBsb29zZUVxdWFsKGFba2V5XSxiW2tleV0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGxvb3NlSW5kZXhPZihhcnIsdmFsKXtmb3IodmFyIGk9MDtpPGFyci5sZW5ndGg7aSsrKWlmKGxvb3NlRXF1YWwoYXJyW2ldLHZhbCkpcmV0dXJuIGk7cmV0dXJuLTF9ZnVuY3Rpb24gb25jZShmbil7dmFyIGNhbGxlZD0hMTtyZXR1cm4gZnVuY3Rpb24oKXtjYWxsZWR8fChjYWxsZWQ9ITAsZm4uYXBwbHkodGhpcyxhcmd1bWVudHMpKX19dmFyIEFTU0VUX1RZUEVTPVsiY29tcG9uZW50IiwiZGlyZWN0aXZlIiwiZmlsdGVyIl0sTElGRUNZQ0xFX0hPT0tTPVsiYmVmb3JlQ3JlYXRlIiwiY3JlYXRlZCIsImJlZm9yZU1vdW50IiwibW91bnRlZCIsImJlZm9yZVVwZGF0ZSIsInVwZGF0ZWQiLCJiZWZvcmVEZXN0cm95IiwiZGVzdHJveWVkIiwiYWN0aXZhdGVkIiwiZGVhY3RpdmF0ZWQiLCJlcnJvckNhcHR1cmVkIl0sY29uZmlnPXtvcHRpb25NZXJnZVN0cmF0ZWdpZXM6T2JqZWN0LmNyZWF0ZShudWxsKSxzaWxlbnQ6ITEscHJvZHVjdGlvblRpcDohMSxkZXZ0b29sczohMSxwZXJmb3JtYW5jZTohMSxlcnJvckhhbmRsZXI6bnVsbCx3YXJuSGFuZGxlcjpudWxsLGlnbm9yZWRFbGVtZW50czpbXSxrZXlDb2RlczpPYmplY3QuY3JlYXRlKG51bGwpLGlzUmVzZXJ2ZWRUYWc6bm8saXNSZXNlcnZlZEF0dHI6bm8saXNVbmtub3duRWxlbWVudDpubyxnZXRUYWdOYW1lc3BhY2U6bm9vcCxwYXJzZVBsYXRmb3JtVGFnTmFtZTppZGVudGl0eSxtdXN0VXNlUHJvcDpubyxfbGlmZWN5Y2xlSG9va3M6TElGRUNZQ0xFX0hPT0tTfTtmdW5jdGlvbiBkZWYob2JqLGtleSx2YWwsZW51bWVyYWJsZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse3ZhbHVlOnZhbCxlbnVtZXJhYmxlOiEhZW51bWVyYWJsZSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgYmFpbFJFPS9bXlx3LiRdLzt2YXIgX2lzU2VydmVyLGhhc1Byb3RvPSJfX3Byb3RvX18iaW57fSxpbkJyb3dzZXI9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3csaW5XZWV4PSJ1bmRlZmluZWQiIT10eXBlb2YgV1hFbnZpcm9ubWVudCYmISFXWEVudmlyb25tZW50LnBsYXRmb3JtLHdlZXhQbGF0Zm9ybT1pbldlZXgmJldYRW52aXJvbm1lbnQucGxhdGZvcm0udG9Mb3dlckNhc2UoKSxVQT1pbkJyb3dzZXImJndpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksaXNJRT1VQSYmL21zaWV8dHJpZGVudC8udGVzdChVQSksaXNJRTk9VUEmJjA8VUEuaW5kZXhPZigibXNpZSA5LjAiKSxpc0VkZ2U9VUEmJjA8VUEuaW5kZXhPZigiZWRnZS8iKSxpc0lPUz0oVUEmJlVBLmluZGV4T2YoImFuZHJvaWQiKSxVQSYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KFVBKXx8ImlvcyI9PT13ZWV4UGxhdGZvcm0pLG5hdGl2ZVdhdGNoPShVQSYmL2Nocm9tZVwvXGQrLy50ZXN0KFVBKSx7fS53YXRjaCksc3VwcG9ydHNQYXNzaXZlPSExO2lmKGluQnJvd3Nlcil0cnl7dmFyIG9wdHM9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KG9wdHMsInBhc3NpdmUiLHtnZXQ6ZnVuY3Rpb24oKXtzdXBwb3J0c1Bhc3NpdmU9ITB9fSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInRlc3QtcGFzc2l2ZSIsbnVsbCxvcHRzKX1jYXRjaChlKXt9dmFyIGlzU2VydmVyUmVuZGVyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PV9pc1NlcnZlciYmKF9pc1NlcnZlcj0haW5Ccm93c2VyJiYhaW5XZWV4JiZ2b2lkIDAhPT1nbG9iYWwmJiJzZXJ2ZXIiPT09Z2xvYmFsLnByb2Nlc3MuZW52LlZVRV9FTlYpLF9pc1NlcnZlcn0sZGV2dG9vbHM9aW5Ccm93c2VyJiZ3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztmdW5jdGlvbiBpc05hdGl2ZShDdG9yKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgQ3RvciYmL25hdGl2ZSBjb2RlLy50ZXN0KEN0b3IudG9TdHJpbmcoKSl9dmFyIF9TZXQsaGFzU3ltYm9sPSJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZpc05hdGl2ZShTeW1ib2wpJiYidW5kZWZpbmVkIiE9dHlwZW9mIFJlZmxlY3QmJmlzTmF0aXZlKFJlZmxlY3Qub3duS2V5cyk7X1NldD0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmaXNOYXRpdmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBTZXQoKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfXJldHVybiBTZXQucHJvdG90eXBlLmhhcz1mdW5jdGlvbihrZXkpe3JldHVybiEwPT09dGhpcy5zZXRba2V5XX0sU2V0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oa2V5KXt0aGlzLnNldFtrZXldPSEwfSxTZXQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX0sU2V0fSgpO3ZhciB3YXJuPW5vb3AsdWlkPTAsRGVwPWZ1bmN0aW9uKCl7dGhpcy5pZD11aWQrKyx0aGlzLnN1YnM9W119O0RlcC5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKHN1Yil7dGhpcy5zdWJzLnB1c2goc3ViKX0sRGVwLnByb3RvdHlwZS5yZW1vdmVTdWI9ZnVuY3Rpb24oc3ViKXtyZW1vdmUodGhpcy5zdWJzLHN1Yil9LERlcC5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7RGVwLnRhcmdldCYmRGVwLnRhcmdldC5hZGREZXAodGhpcyl9LERlcC5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBzdWJzPXRoaXMuc3Vicy5zbGljZSgpLGk9MCxsPXN1YnMubGVuZ3RoO2k8bDtpKyspc3Vic1tpXS51cGRhdGUoKX0sRGVwLnRhcmdldD1udWxsO3ZhciB0YXJnZXRTdGFjaz1bXTtmdW5jdGlvbiBwdXNoVGFyZ2V0KF90YXJnZXQpe0RlcC50YXJnZXQmJnRhcmdldFN0YWNrLnB1c2goRGVwLnRhcmdldCksRGVwLnRhcmdldD1fdGFyZ2V0fWZ1bmN0aW9uIHBvcFRhcmdldCgpe0RlcC50YXJnZXQ9dGFyZ2V0U3RhY2sucG9wKCl9dmFyIFZOb2RlPWZ1bmN0aW9uKHRhZyxkYXRhLGNoaWxkcmVuLHRleHQsZWxtLGNvbnRleHQsY29tcG9uZW50T3B0aW9ucyxhc3luY0ZhY3Rvcnkpe3RoaXMudGFnPXRhZyx0aGlzLmRhdGE9ZGF0YSx0aGlzLmNoaWxkcmVuPWNoaWxkcmVuLHRoaXMudGV4dD10ZXh0LHRoaXMuZWxtPWVsbSx0aGlzLm5zPXZvaWQgMCx0aGlzLmNvbnRleHQ9Y29udGV4dCx0aGlzLmZuQ29udGV4dD12b2lkIDAsdGhpcy5mbk9wdGlvbnM9dm9pZCAwLHRoaXMuZm5TY29wZUlkPXZvaWQgMCx0aGlzLmtleT1kYXRhJiZkYXRhLmtleSx0aGlzLmNvbXBvbmVudE9wdGlvbnM9Y29tcG9uZW50T3B0aW9ucyx0aGlzLmNvbXBvbmVudEluc3RhbmNlPXZvaWQgMCx0aGlzLnBhcmVudD12b2lkIDAsdGhpcy5yYXc9ITEsdGhpcy5pc1N0YXRpYz0hMSx0aGlzLmlzUm9vdEluc2VydD0hMCx0aGlzLmlzQ29tbWVudD0hMSx0aGlzLmlzQ2xvbmVkPSExLHRoaXMuaXNPbmNlPSExLHRoaXMuYXN5bmNGYWN0b3J5PWFzeW5jRmFjdG9yeSx0aGlzLmFzeW5jTWV0YT12b2lkIDAsdGhpcy5pc0FzeW5jUGxhY2Vob2xkZXI9ITF9LHByb3RvdHlwZUFjY2Vzc29ycz17Y2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH19O3Byb3RvdHlwZUFjY2Vzc29ycy5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVk5vZGUucHJvdG90eXBlLHByb3RvdHlwZUFjY2Vzc29ycyk7dmFyIGNyZWF0ZUVtcHR5Vk5vZGU9ZnVuY3Rpb24odGV4dCl7dm9pZCAwPT09dGV4dCYmKHRleHQ9IiIpO3ZhciBub2RlPW5ldyBWTm9kZTtyZXR1cm4gbm9kZS50ZXh0PXRleHQsbm9kZS5pc0NvbW1lbnQ9ITAsbm9kZX07ZnVuY3Rpb24gY3JlYXRlVGV4dFZOb2RlKHZhbCl7cmV0dXJuIG5ldyBWTm9kZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcodmFsKSl9ZnVuY3Rpb24gY2xvbmVWTm9kZSh2bm9kZSl7dmFyIGNsb25lZD1uZXcgVk5vZGUodm5vZGUudGFnLHZub2RlLmRhdGEsdm5vZGUuY2hpbGRyZW4sdm5vZGUudGV4dCx2bm9kZS5lbG0sdm5vZGUuY29udGV4dCx2bm9kZS5jb21wb25lbnRPcHRpb25zLHZub2RlLmFzeW5jRmFjdG9yeSk7cmV0dXJuIGNsb25lZC5ucz12bm9kZS5ucyxjbG9uZWQuaXNTdGF0aWM9dm5vZGUuaXNTdGF0aWMsY2xvbmVkLmtleT12bm9kZS5rZXksY2xvbmVkLmlzQ29tbWVudD12bm9kZS5pc0NvbW1lbnQsY2xvbmVkLmZuQ29udGV4dD12bm9kZS5mbkNvbnRleHQsY2xvbmVkLmZuT3B0aW9ucz12bm9kZS5mbk9wdGlvbnMsY2xvbmVkLmZuU2NvcGVJZD12bm9kZS5mblNjb3BlSWQsY2xvbmVkLmlzQ2xvbmVkPSEwLGNsb25lZH12YXIgYXJyYXlQcm90bz1BcnJheS5wcm90b3R5cGUsYXJyYXlNZXRob2RzPU9iamVjdC5jcmVhdGUoYXJyYXlQcm90byk7WyJwdXNoIiwicG9wIiwic2hpZnQiLCJ1bnNoaWZ0Iiwic3BsaWNlIiwic29ydCIsInJldmVyc2UiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCl7dmFyIG9yaWdpbmFsPWFycmF5UHJvdG9bbWV0aG9kXTtkZWYoYXJyYXlNZXRob2RzLG1ldGhvZCxmdW5jdGlvbigpe2Zvcih2YXIgYXJncz1bXSxsZW49YXJndW1lbnRzLmxlbmd0aDtsZW4tLTspYXJnc1tsZW5dPWFyZ3VtZW50c1tsZW5dO3ZhciBpbnNlcnRlZCxyZXN1bHQ9b3JpZ2luYWwuYXBwbHkodGhpcyxhcmdzKSxvYj10aGlzLl9fb2JfXztzd2l0Y2gobWV0aG9kKXtjYXNlInB1c2giOmNhc2UidW5zaGlmdCI6aW5zZXJ0ZWQ9YXJnczticmVhaztjYXNlInNwbGljZSI6aW5zZXJ0ZWQ9YXJncy5zbGljZSgyKX1yZXR1cm4gaW5zZXJ0ZWQmJm9iLm9ic2VydmVBcnJheShpbnNlcnRlZCksb2IuZGVwLm5vdGlmeSgpLHJlc3VsdH0pfSk7dmFyIGFycmF5S2V5cz1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpLHNob3VsZE9ic2VydmU9ITA7ZnVuY3Rpb24gdG9nZ2xlT2JzZXJ2aW5nKHZhbHVlKXtzaG91bGRPYnNlcnZlPXZhbHVlfXZhciBPYnNlcnZlcj1mdW5jdGlvbih2YWx1ZSl7KHRoaXMudmFsdWU9dmFsdWUsdGhpcy5kZXA9bmV3IERlcCx0aGlzLnZtQ291bnQ9MCxkZWYodmFsdWUsIl9fb2JfXyIsdGhpcyksQXJyYXkuaXNBcnJheSh2YWx1ZSkpPygoaGFzUHJvdG8/cHJvdG9BdWdtZW50OmNvcHlBdWdtZW50KSh2YWx1ZSxhcnJheU1ldGhvZHMsYXJyYXlLZXlzKSx0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSkpOnRoaXMud2Fsayh2YWx1ZSl9O2Z1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsc3JjLGtleXMpe3RhcmdldC5fX3Byb3RvX189c3JjfWZ1bmN0aW9uIGNvcHlBdWdtZW50KHRhcmdldCxzcmMsa2V5cyl7Zm9yKHZhciBpPTAsbD1rZXlzLmxlbmd0aDtpPGw7aSsrKXt2YXIga2V5PWtleXNbaV07ZGVmKHRhcmdldCxrZXksc3JjW2tleV0pfX1mdW5jdGlvbiBvYnNlcnZlKHZhbHVlLGFzUm9vdERhdGEpe3ZhciBvYjtpZihpc09iamVjdCh2YWx1ZSkmJiEodmFsdWUgaW5zdGFuY2VvZiBWTm9kZSkpcmV0dXJuIGhhc093bih2YWx1ZSwiX19vYl9fIikmJnZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyP29iPXZhbHVlLl9fb2JfXzpzaG91bGRPYnNlcnZlJiYhaXNTZXJ2ZXJSZW5kZXJpbmcoKSYmKEFycmF5LmlzQXJyYXkodmFsdWUpfHxpc1BsYWluT2JqZWN0KHZhbHVlKSkmJk9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpJiYhdmFsdWUuX2lzVnVlJiYob2I9bmV3IE9ic2VydmVyKHZhbHVlKSksYXNSb290RGF0YSYmb2ImJm9iLnZtQ291bnQrKyxvYn1mdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShvYmosa2V5LHZhbCxjdXN0b21TZXR0ZXIsc2hhbGxvdyl7dmFyIGRlcD1uZXcgRGVwLHByb3BlcnR5PU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLGtleSk7aWYoIXByb3BlcnR5fHwhMSE9PXByb3BlcnR5LmNvbmZpZ3VyYWJsZSl7dmFyIGdldHRlcj1wcm9wZXJ0eSYmcHJvcGVydHkuZ2V0O2dldHRlcnx8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fCh2YWw9b2JqW2tleV0pO3ZhciBzZXR0ZXI9cHJvcGVydHkmJnByb3BlcnR5LnNldCxjaGlsZE9iPSFzaGFsbG93JiZvYnNlcnZlKHZhbCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixrZXkse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3ZhciB2YWx1ZT1nZXR0ZXI/Z2V0dGVyLmNhbGwob2JqKTp2YWw7cmV0dXJuIERlcC50YXJnZXQmJihkZXAuZGVwZW5kKCksY2hpbGRPYiYmKGNoaWxkT2IuZGVwLmRlcGVuZCgpLEFycmF5LmlzQXJyYXkodmFsdWUpJiZmdW5jdGlvbiBkZXBlbmRBcnJheSh2YWx1ZSl7Zm9yKHZhciBlPXZvaWQgMCxpPTAsbD12YWx1ZS5sZW5ndGg7aTxsO2krKykoZT12YWx1ZVtpXSkmJmUuX19vYl9fJiZlLl9fb2JfXy5kZXAuZGVwZW5kKCksQXJyYXkuaXNBcnJheShlKSYmZGVwZW5kQXJyYXkoZSl9KHZhbHVlKSkpLHZhbHVlfSxzZXQ6ZnVuY3Rpb24obmV3VmFsKXt2YXIgdmFsdWU9Z2V0dGVyP2dldHRlci5jYWxsKG9iaik6dmFsO25ld1ZhbD09PXZhbHVlfHxuZXdWYWwhPW5ld1ZhbCYmdmFsdWUhPXZhbHVlfHwoc2V0dGVyP3NldHRlci5jYWxsKG9iaixuZXdWYWwpOnZhbD1uZXdWYWwsY2hpbGRPYj0hc2hhbGxvdyYmb2JzZXJ2ZShuZXdWYWwpLGRlcC5ub3RpZnkoKSl9fSl9fWZ1bmN0aW9uIHNldCh0YXJnZXQsa2V5LHZhbCl7aWYoQXJyYXkuaXNBcnJheSh0YXJnZXQpJiZpc1ZhbGlkQXJyYXlJbmRleChrZXkpKXJldHVybiB0YXJnZXQubGVuZ3RoPU1hdGgubWF4KHRhcmdldC5sZW5ndGgsa2V5KSx0YXJnZXQuc3BsaWNlKGtleSwxLHZhbCksdmFsO2lmKGtleSBpbiB0YXJnZXQmJiEoa2V5IGluIE9iamVjdC5wcm90b3R5cGUpKXJldHVybiB0YXJnZXRba2V5XT12YWw7dmFyIG9iPXRhcmdldC5fX29iX187cmV0dXJuIHRhcmdldC5faXNWdWV8fG9iJiZvYi52bUNvdW50P3ZhbDpvYj8oZGVmaW5lUmVhY3RpdmUob2IudmFsdWUsa2V5LHZhbCksb2IuZGVwLm5vdGlmeSgpLHZhbCk6dGFyZ2V0W2tleV09dmFsfWZ1bmN0aW9uIGRlbCh0YXJnZXQsa2V5KXtpZihBcnJheS5pc0FycmF5KHRhcmdldCkmJmlzVmFsaWRBcnJheUluZGV4KGtleSkpdGFyZ2V0LnNwbGljZShrZXksMSk7ZWxzZXt2YXIgb2I9dGFyZ2V0Ll9fb2JfXzt0YXJnZXQuX2lzVnVlfHxvYiYmb2Iudm1Db3VudHx8aGFzT3duKHRhcmdldCxrZXkpJiYoZGVsZXRlIHRhcmdldFtrZXldLG9iJiZvYi5kZXAubm90aWZ5KCkpfX1PYnNlcnZlci5wcm90b3R5cGUud2Fsaz1mdW5jdGlvbihvYmope2Zvcih2YXIga2V5cz1PYmplY3Qua2V5cyhvYmopLGk9MDtpPGtleXMubGVuZ3RoO2krKylkZWZpbmVSZWFjdGl2ZShvYmosa2V5c1tpXSl9LE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXk9ZnVuY3Rpb24oaXRlbXMpe2Zvcih2YXIgaT0wLGw9aXRlbXMubGVuZ3RoO2k8bDtpKyspb2JzZXJ2ZShpdGVtc1tpXSl9O3ZhciBzdHJhdHM9Y29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBtZXJnZURhdGEodG8sZnJvbSl7aWYoIWZyb20pcmV0dXJuIHRvO2Zvcih2YXIga2V5LHRvVmFsLGZyb21WYWwsa2V5cz1PYmplY3Qua2V5cyhmcm9tKSxpPTA7aTxrZXlzLmxlbmd0aDtpKyspdG9WYWw9dG9ba2V5PWtleXNbaV1dLGZyb21WYWw9ZnJvbVtrZXldLGhhc093bih0byxrZXkpP2lzUGxhaW5PYmplY3QodG9WYWwpJiZpc1BsYWluT2JqZWN0KGZyb21WYWwpJiZtZXJnZURhdGEodG9WYWwsZnJvbVZhbCk6c2V0KHRvLGtleSxmcm9tVmFsKTtyZXR1cm4gdG99ZnVuY3Rpb24gbWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsY2hpbGRWYWwsdm0pe3JldHVybiB2bT9mdW5jdGlvbigpe3ZhciBpbnN0YW5jZURhdGE9ImZ1bmN0aW9uIj09dHlwZW9mIGNoaWxkVmFsP2NoaWxkVmFsLmNhbGwodm0sdm0pOmNoaWxkVmFsLGRlZmF1bHREYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiBwYXJlbnRWYWw/cGFyZW50VmFsLmNhbGwodm0sdm0pOnBhcmVudFZhbDtyZXR1cm4gaW5zdGFuY2VEYXRhP21lcmdlRGF0YShpbnN0YW5jZURhdGEsZGVmYXVsdERhdGEpOmRlZmF1bHREYXRhfTpjaGlsZFZhbD9wYXJlbnRWYWw/ZnVuY3Rpb24oKXtyZXR1cm4gbWVyZ2VEYXRhKCJmdW5jdGlvbiI9PXR5cGVvZiBjaGlsZFZhbD9jaGlsZFZhbC5jYWxsKHRoaXMsdGhpcyk6Y2hpbGRWYWwsImZ1bmN0aW9uIj09dHlwZW9mIHBhcmVudFZhbD9wYXJlbnRWYWwuY2FsbCh0aGlzLHRoaXMpOnBhcmVudFZhbCl9OmNoaWxkVmFsOnBhcmVudFZhbH1mdW5jdGlvbiBtZXJnZUhvb2socGFyZW50VmFsLGNoaWxkVmFsKXtyZXR1cm4gY2hpbGRWYWw/cGFyZW50VmFsP3BhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpOkFycmF5LmlzQXJyYXkoY2hpbGRWYWwpP2NoaWxkVmFsOltjaGlsZFZhbF06cGFyZW50VmFsfWZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCxjaGlsZFZhbCx2bSxrZXkpe3ZhciByZXM9T2JqZWN0LmNyZWF0ZShwYXJlbnRWYWx8fG51bGwpO3JldHVybiBjaGlsZFZhbD9leHRlbmQocmVzLGNoaWxkVmFsKTpyZXN9c3RyYXRzLmRhdGE9ZnVuY3Rpb24ocGFyZW50VmFsLGNoaWxkVmFsLHZtKXtyZXR1cm4gdm0/bWVyZ2VEYXRhT3JGbihwYXJlbnRWYWwsY2hpbGRWYWwsdm0pOmNoaWxkVmFsJiYiZnVuY3Rpb24iIT10eXBlb2YgY2hpbGRWYWw/cGFyZW50VmFsOm1lcmdlRGF0YU9yRm4ocGFyZW50VmFsLGNoaWxkVmFsKX0sTElGRUNZQ0xFX0hPT0tTLmZvckVhY2goZnVuY3Rpb24oaG9vayl7c3RyYXRzW2hvb2tdPW1lcmdlSG9va30pLEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24odHlwZSl7c3RyYXRzW3R5cGUrInMiXT1tZXJnZUFzc2V0c30pLHN0cmF0cy53YXRjaD1mdW5jdGlvbihwYXJlbnRWYWwsY2hpbGRWYWwsdm0sa2V5KXtpZihwYXJlbnRWYWw9PT1uYXRpdmVXYXRjaCYmKHBhcmVudFZhbD12b2lkIDApLGNoaWxkVmFsPT09bmF0aXZlV2F0Y2gmJihjaGlsZFZhbD12b2lkIDApLCFjaGlsZFZhbClyZXR1cm4gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWx8fG51bGwpO2lmKCFwYXJlbnRWYWwpcmV0dXJuIGNoaWxkVmFsO3ZhciByZXQ9e307Zm9yKHZhciBrZXkkMSBpbiBleHRlbmQocmV0LHBhcmVudFZhbCksY2hpbGRWYWwpe3ZhciBwYXJlbnQ9cmV0W2tleSQxXSxjaGlsZD1jaGlsZFZhbFtrZXkkMV07cGFyZW50JiYhQXJyYXkuaXNBcnJheShwYXJlbnQpJiYocGFyZW50PVtwYXJlbnRdKSxyZXRba2V5JDFdPXBhcmVudD9wYXJlbnQuY29uY2F0KGNoaWxkKTpBcnJheS5pc0FycmF5KGNoaWxkKT9jaGlsZDpbY2hpbGRdfXJldHVybiByZXR9LHN0cmF0cy5wcm9wcz1zdHJhdHMubWV0aG9kcz1zdHJhdHMuaW5qZWN0PXN0cmF0cy5jb21wdXRlZD1mdW5jdGlvbihwYXJlbnRWYWwsY2hpbGRWYWwsdm0sa2V5KXtpZighcGFyZW50VmFsKXJldHVybiBjaGlsZFZhbDt2YXIgcmV0PU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIGV4dGVuZChyZXQscGFyZW50VmFsKSxjaGlsZFZhbCYmZXh0ZW5kKHJldCxjaGlsZFZhbCkscmV0fSxzdHJhdHMucHJvdmlkZT1tZXJnZURhdGFPckZuO3ZhciBkZWZhdWx0U3RyYXQ9ZnVuY3Rpb24ocGFyZW50VmFsLGNoaWxkVmFsKXtyZXR1cm4gdm9pZCAwPT09Y2hpbGRWYWw/cGFyZW50VmFsOmNoaWxkVmFsfTtmdW5jdGlvbiBtZXJnZU9wdGlvbnMocGFyZW50LGNoaWxkLHZtKXsiZnVuY3Rpb24iPT10eXBlb2YgY2hpbGQmJihjaGlsZD1jaGlsZC5vcHRpb25zKSxmdW5jdGlvbihvcHRpb25zLHZtKXt2YXIgcHJvcHM9b3B0aW9ucy5wcm9wcztpZihwcm9wcyl7dmFyIGksdmFsLHJlcz17fTtpZihBcnJheS5pc0FycmF5KHByb3BzKSlmb3IoaT1wcm9wcy5sZW5ndGg7aS0tOykic3RyaW5nIj09dHlwZW9mKHZhbD1wcm9wc1tpXSkmJihyZXNbY2FtZWxpemUodmFsKV09e3R5cGU6bnVsbH0pO2Vsc2UgaWYoaXNQbGFpbk9iamVjdChwcm9wcykpZm9yKHZhciBrZXkgaW4gcHJvcHMpdmFsPXByb3BzW2tleV0scmVzW2NhbWVsaXplKGtleSldPWlzUGxhaW5PYmplY3QodmFsKT92YWw6e3R5cGU6dmFsfTtvcHRpb25zLnByb3BzPXJlc319KGNoaWxkKSxmdW5jdGlvbihvcHRpb25zLHZtKXt2YXIgaW5qZWN0PW9wdGlvbnMuaW5qZWN0O2lmKGluamVjdCl7dmFyIG5vcm1hbGl6ZWQ9b3B0aW9ucy5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShpbmplY3QpKWZvcih2YXIgaT0wO2k8aW5qZWN0Lmxlbmd0aDtpKyspbm9ybWFsaXplZFtpbmplY3RbaV1dPXtmcm9tOmluamVjdFtpXX07ZWxzZSBpZihpc1BsYWluT2JqZWN0KGluamVjdCkpZm9yKHZhciBrZXkgaW4gaW5qZWN0KXt2YXIgdmFsPWluamVjdFtrZXldO25vcm1hbGl6ZWRba2V5XT1pc1BsYWluT2JqZWN0KHZhbCk/ZXh0ZW5kKHtmcm9tOmtleX0sdmFsKTp7ZnJvbTp2YWx9fX19KGNoaWxkKSxmdW5jdGlvbihvcHRpb25zKXt2YXIgZGlycz1vcHRpb25zLmRpcmVjdGl2ZXM7aWYoZGlycylmb3IodmFyIGtleSBpbiBkaXJzKXt2YXIgZGVmPWRpcnNba2V5XTsiZnVuY3Rpb24iPT10eXBlb2YgZGVmJiYoZGlyc1trZXldPXtiaW5kOmRlZix1cGRhdGU6ZGVmfSl9fShjaGlsZCk7dmFyIGV4dGVuZHNGcm9tPWNoaWxkLmV4dGVuZHM7aWYoZXh0ZW5kc0Zyb20mJihwYXJlbnQ9bWVyZ2VPcHRpb25zKHBhcmVudCxleHRlbmRzRnJvbSx2bSkpLGNoaWxkLm1peGlucylmb3IodmFyIGk9MCxsPWNoaWxkLm1peGlucy5sZW5ndGg7aTxsO2krKylwYXJlbnQ9bWVyZ2VPcHRpb25zKHBhcmVudCxjaGlsZC5taXhpbnNbaV0sdm0pO3ZhciBrZXksb3B0aW9ucz17fTtmb3Ioa2V5IGluIHBhcmVudCltZXJnZUZpZWxkKGtleSk7Zm9yKGtleSBpbiBjaGlsZCloYXNPd24ocGFyZW50LGtleSl8fG1lcmdlRmllbGQoa2V5KTtmdW5jdGlvbiBtZXJnZUZpZWxkKGtleSl7dmFyIHN0cmF0PXN0cmF0c1trZXldfHxkZWZhdWx0U3RyYXQ7b3B0aW9uc1trZXldPXN0cmF0KHBhcmVudFtrZXldLGNoaWxkW2tleV0sdm0sa2V5KX1yZXR1cm4gb3B0aW9uc31mdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucyx0eXBlLGlkLHdhcm5NaXNzaW5nKXtpZigic3RyaW5nIj09dHlwZW9mIGlkKXt2YXIgYXNzZXRzPW9wdGlvbnNbdHlwZV07aWYoaGFzT3duKGFzc2V0cyxpZCkpcmV0dXJuIGFzc2V0c1tpZF07dmFyIGNhbWVsaXplZElkPWNhbWVsaXplKGlkKTtpZihoYXNPd24oYXNzZXRzLGNhbWVsaXplZElkKSlyZXR1cm4gYXNzZXRzW2NhbWVsaXplZElkXTt2YXIgUGFzY2FsQ2FzZUlkPWNhcGl0YWxpemUoY2FtZWxpemVkSWQpO3JldHVybiBoYXNPd24oYXNzZXRzLFBhc2NhbENhc2VJZCk/YXNzZXRzW1Bhc2NhbENhc2VJZF06YXNzZXRzW2lkXXx8YXNzZXRzW2NhbWVsaXplZElkXXx8YXNzZXRzW1Bhc2NhbENhc2VJZF19fWZ1bmN0aW9uIHZhbGlkYXRlUHJvcChrZXkscHJvcE9wdGlvbnMscHJvcHNEYXRhLHZtKXt2YXIgcHJvcD1wcm9wT3B0aW9uc1trZXldLGFic2VudD0haGFzT3duKHByb3BzRGF0YSxrZXkpLHZhbHVlPXByb3BzRGF0YVtrZXldLGJvb2xlYW5JbmRleD1nZXRUeXBlSW5kZXgoQm9vbGVhbixwcm9wLnR5cGUpO2lmKC0xPGJvb2xlYW5JbmRleClpZihhYnNlbnQmJiFoYXNPd24ocHJvcCwiZGVmYXVsdCIpKXZhbHVlPSExO2Vsc2UgaWYoIiI9PT12YWx1ZXx8dmFsdWU9PT1oeXBoZW5hdGUoa2V5KSl7dmFyIHN0cmluZ0luZGV4PWdldFR5cGVJbmRleChTdHJpbmcscHJvcC50eXBlKTsoc3RyaW5nSW5kZXg8MHx8Ym9vbGVhbkluZGV4PHN0cmluZ0luZGV4KSYmKHZhbHVlPSEwKX1pZih2b2lkIDA9PT12YWx1ZSl7dmFsdWU9ZnVuY3Rpb24odm0scHJvcCxrZXkpe2lmKCFoYXNPd24ocHJvcCwiZGVmYXVsdCIpKXJldHVybjt2YXIgZGVmPXByb3AuZGVmYXVsdDswO2lmKHZtJiZ2bS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PXZtLiRvcHRpb25zLnByb3BzRGF0YVtrZXldJiZ2b2lkIDAhPT12bS5fcHJvcHNba2V5XSlyZXR1cm4gdm0uX3Byb3BzW2tleV07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGRlZiYmIkZ1bmN0aW9uIiE9PWdldFR5cGUocHJvcC50eXBlKT9kZWYuY2FsbCh2bSk6ZGVmfSh2bSxwcm9wLGtleSk7dmFyIHByZXZTaG91bGRPYnNlcnZlPXNob3VsZE9ic2VydmU7dG9nZ2xlT2JzZXJ2aW5nKCEwKSxvYnNlcnZlKHZhbHVlKSx0b2dnbGVPYnNlcnZpbmcocHJldlNob3VsZE9ic2VydmUpfXJldHVybiB2YWx1ZX1mdW5jdGlvbiBnZXRUeXBlKGZuKXt2YXIgbWF0Y2g9Zm4mJmZuLnRvU3RyaW5nKCkubWF0Y2goL15ccypmdW5jdGlvbiAoXHcrKS8pO3JldHVybiBtYXRjaD9tYXRjaFsxXToiIn1mdW5jdGlvbiBpc1NhbWVUeXBlKGEsYil7cmV0dXJuIGdldFR5cGUoYSk9PT1nZXRUeXBlKGIpfWZ1bmN0aW9uIGdldFR5cGVJbmRleCh0eXBlLGV4cGVjdGVkVHlwZXMpe2lmKCFBcnJheS5pc0FycmF5KGV4cGVjdGVkVHlwZXMpKXJldHVybiBpc1NhbWVUeXBlKGV4cGVjdGVkVHlwZXMsdHlwZSk/MDotMTtmb3IodmFyIGk9MCxsZW49ZXhwZWN0ZWRUeXBlcy5sZW5ndGg7aTxsZW47aSsrKWlmKGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlc1tpXSx0eXBlKSlyZXR1cm4gaTtyZXR1cm4tMX1mdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIsdm0saW5mbyl7aWYodm0pZm9yKHZhciBjdXI9dm07Y3VyPWN1ci4kcGFyZW50Oyl7dmFyIGhvb2tzPWN1ci4kb3B0aW9ucy5lcnJvckNhcHR1cmVkO2lmKGhvb2tzKWZvcih2YXIgaT0wO2k8aG9va3MubGVuZ3RoO2krKyl0cnl7aWYoITE9PT1ob29rc1tpXS5jYWxsKGN1cixlcnIsdm0saW5mbykpcmV0dXJufWNhdGNoKGUpe2dsb2JhbEhhbmRsZUVycm9yKGUsY3VyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19Z2xvYmFsSGFuZGxlRXJyb3IoZXJyLHZtLGluZm8pfWZ1bmN0aW9uIGdsb2JhbEhhbmRsZUVycm9yKGVycix2bSxpbmZvKXtpZihjb25maWcuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gY29uZmlnLmVycm9ySGFuZGxlci5jYWxsKG51bGwsZXJyLHZtLGluZm8pfWNhdGNoKGUpe2xvZ0Vycm9yKGUsbnVsbCwiY29uZmlnLmVycm9ySGFuZGxlciIpfWxvZ0Vycm9yKGVycix2bSxpbmZvKX1mdW5jdGlvbiBsb2dFcnJvcihlcnIsdm0saW5mbyl7aWYoIWluQnJvd3NlciYmIWluV2VleHx8InVuZGVmaW5lZCI9PXR5cGVvZiBjb25zb2xlKXRocm93IGVycjtjb25zb2xlLmVycm9yKGVycil9dmFyIG1pY3JvVGltZXJGdW5jLG1hY3JvVGltZXJGdW5jLGNhbGxiYWNrcz1bXSxwZW5kaW5nPSExO2Z1bmN0aW9uIGZsdXNoQ2FsbGJhY2tzKCl7cGVuZGluZz0hMTtmb3IodmFyIGNvcGllcz1jYWxsYmFja3Muc2xpY2UoMCksaT1jYWxsYmFja3MubGVuZ3RoPTA7aTxjb3BpZXMubGVuZ3RoO2krKyljb3BpZXNbaV0oKX12YXIgdXNlTWFjcm9UYXNrPSExO2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZpc05hdGl2ZShzZXRJbW1lZGlhdGUpKW1hY3JvVGltZXJGdW5jPWZ1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKGZsdXNoQ2FsbGJhY2tzKX07ZWxzZSBpZigidW5kZWZpbmVkIj09dHlwZW9mIE1lc3NhZ2VDaGFubmVsfHwhaXNOYXRpdmUoTWVzc2FnZUNoYW5uZWwpJiYiW29iamVjdCBNZXNzYWdlQ2hhbm5lbENvbnN0cnVjdG9yXSIhPT1NZXNzYWdlQ2hhbm5lbC50b1N0cmluZygpKW1hY3JvVGltZXJGdW5jPWZ1bmN0aW9uKCl7c2V0VGltZW91dChmbHVzaENhbGxiYWNrcywwKX07ZWxzZXt2YXIgY2hhbm5lbD1uZXcgTWVzc2FnZUNoYW5uZWwscG9ydD1jaGFubmVsLnBvcnQyO2NoYW5uZWwucG9ydDEub25tZXNzYWdlPWZsdXNoQ2FsbGJhY2tzLG1hY3JvVGltZXJGdW5jPWZ1bmN0aW9uKCl7cG9ydC5wb3N0TWVzc2FnZSgxKX19aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlJiZpc05hdGl2ZShQcm9taXNlKSl7dmFyIHA9UHJvbWlzZS5yZXNvbHZlKCk7bWljcm9UaW1lckZ1bmM9ZnVuY3Rpb24oKXtwLnRoZW4oZmx1c2hDYWxsYmFja3MpLGlzSU9TJiZzZXRUaW1lb3V0KG5vb3ApfX1lbHNlIG1pY3JvVGltZXJGdW5jPW1hY3JvVGltZXJGdW5jO2Z1bmN0aW9uIG5leHRUaWNrKGNiLGN0eCl7dmFyIF9yZXNvbHZlO2lmKGNhbGxiYWNrcy5wdXNoKGZ1bmN0aW9uKCl7aWYoY2IpdHJ5e2NiLmNhbGwoY3R4KX1jYXRjaChlKXtoYW5kbGVFcnJvcihlLGN0eCwibmV4dFRpY2siKX1lbHNlIF9yZXNvbHZlJiZfcmVzb2x2ZShjdHgpfSkscGVuZGluZ3x8KHBlbmRpbmc9ITAsdXNlTWFjcm9UYXNrP21hY3JvVGltZXJGdW5jKCk6bWljcm9UaW1lckZ1bmMoKSksIWNiJiYidW5kZWZpbmVkIiE9dHlwZW9mIFByb21pc2UpcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe19yZXNvbHZlPXJlc29sdmV9KX12YXIgc2Vlbk9iamVjdHM9bmV3IF9TZXQ7ZnVuY3Rpb24gdHJhdmVyc2UodmFsKXshZnVuY3Rpb24gX3RyYXZlcnNlKHZhbCxzZWVuKXt2YXIgaSxrZXlzO3ZhciBpc0E9QXJyYXkuaXNBcnJheSh2YWwpO2lmKCFpc0EmJiFpc09iamVjdCh2YWwpfHxPYmplY3QuaXNGcm96ZW4odmFsKXx8dmFsIGluc3RhbmNlb2YgVk5vZGUpcmV0dXJuO2lmKHZhbC5fX29iX18pe3ZhciBkZXBJZD12YWwuX19vYl9fLmRlcC5pZDtpZihzZWVuLmhhcyhkZXBJZCkpcmV0dXJuO3NlZW4uYWRkKGRlcElkKX1pZihpc0EpZm9yKGk9dmFsLmxlbmd0aDtpLS07KV90cmF2ZXJzZSh2YWxbaV0sc2Vlbik7ZWxzZSBmb3Ioa2V5cz1PYmplY3Qua2V5cyh2YWwpLGk9a2V5cy5sZW5ndGg7aS0tOylfdHJhdmVyc2UodmFsW2tleXNbaV1dLHNlZW4pfSh2YWwsc2Vlbk9iamVjdHMpLHNlZW5PYmplY3RzLmNsZWFyKCl9dmFyIHRhcmdldCxub3JtYWxpemVFdmVudD1jYWNoZWQoZnVuY3Rpb24obmFtZSl7dmFyIHBhc3NpdmU9IiYiPT09bmFtZS5jaGFyQXQoMCksb25jZSQkMT0ifiI9PT0obmFtZT1wYXNzaXZlP25hbWUuc2xpY2UoMSk6bmFtZSkuY2hhckF0KDApLGNhcHR1cmU9IiEiPT09KG5hbWU9b25jZSQkMT9uYW1lLnNsaWNlKDEpOm5hbWUpLmNoYXJBdCgwKTtyZXR1cm57bmFtZTpuYW1lPWNhcHR1cmU/bmFtZS5zbGljZSgxKTpuYW1lLG9uY2U6b25jZSQkMSxjYXB0dXJlOmNhcHR1cmUscGFzc2l2ZTpwYXNzaXZlfX0pO2Z1bmN0aW9uIGNyZWF0ZUZuSW52b2tlcihmbnMpe2Z1bmN0aW9uIGludm9rZXIoKXt2YXIgYXJndW1lbnRzJDE9YXJndW1lbnRzLGZucz1pbnZva2VyLmZucztpZighQXJyYXkuaXNBcnJheShmbnMpKXJldHVybiBmbnMuYXBwbHkobnVsbCxhcmd1bWVudHMpO2Zvcih2YXIgY2xvbmVkPWZucy5zbGljZSgpLGk9MDtpPGNsb25lZC5sZW5ndGg7aSsrKWNsb25lZFtpXS5hcHBseShudWxsLGFyZ3VtZW50cyQxKX1yZXR1cm4gaW52b2tlci5mbnM9Zm5zLGludm9rZXJ9ZnVuY3Rpb24gdXBkYXRlTGlzdGVuZXJzKG9uLG9sZE9uLGFkZCxyZW1vdmUkJDEsdm0pe3ZhciBuYW1lLGN1cixvbGQsZXZlbnQ7Zm9yKG5hbWUgaW4gb24pY3VyPW9uW25hbWVdLG9sZD1vbGRPbltuYW1lXSxldmVudD1ub3JtYWxpemVFdmVudChuYW1lKSxpc1VuZGVmKGN1cil8fChpc1VuZGVmKG9sZCk/KGlzVW5kZWYoY3VyLmZucykmJihjdXI9b25bbmFtZV09Y3JlYXRlRm5JbnZva2VyKGN1cikpLGFkZChldmVudC5uYW1lLGN1cixldmVudC5vbmNlLGV2ZW50LmNhcHR1cmUsZXZlbnQucGFzc2l2ZSxldmVudC5wYXJhbXMpKTpjdXIhPT1vbGQmJihvbGQuZm5zPWN1cixvbltuYW1lXT1vbGQpKTtmb3IobmFtZSBpbiBvbGRPbilpc1VuZGVmKG9uW25hbWVdKSYmcmVtb3ZlJCQxKChldmVudD1ub3JtYWxpemVFdmVudChuYW1lKSkubmFtZSxvbGRPbltuYW1lXSxldmVudC5jYXB0dXJlKX1mdW5jdGlvbiBtZXJnZVZOb2RlSG9vayhkZWYsaG9va0tleSxob29rKXt2YXIgaW52b2tlcjtkZWYgaW5zdGFuY2VvZiBWTm9kZSYmKGRlZj1kZWYuZGF0YS5ob29rfHwoZGVmLmRhdGEuaG9vaz17fSkpO3ZhciBvbGRIb29rPWRlZltob29rS2V5XTtmdW5jdGlvbiB3cmFwcGVkSG9vaygpe2hvb2suYXBwbHkodGhpcyxhcmd1bWVudHMpLHJlbW92ZShpbnZva2VyLmZucyx3cmFwcGVkSG9vayl9aXNVbmRlZihvbGRIb29rKT9pbnZva2VyPWNyZWF0ZUZuSW52b2tlcihbd3JhcHBlZEhvb2tdKTppc0RlZihvbGRIb29rLmZucykmJmlzVHJ1ZShvbGRIb29rLm1lcmdlZCk/KGludm9rZXI9b2xkSG9vaykuZm5zLnB1c2god3JhcHBlZEhvb2spOmludm9rZXI9Y3JlYXRlRm5JbnZva2VyKFtvbGRIb29rLHdyYXBwZWRIb29rXSksaW52b2tlci5tZXJnZWQ9ITAsZGVmW2hvb2tLZXldPWludm9rZXJ9ZnVuY3Rpb24gY2hlY2tQcm9wKHJlcyxoYXNoLGtleSxhbHRLZXkscHJlc2VydmUpe2lmKGlzRGVmKGhhc2gpKXtpZihoYXNPd24oaGFzaCxrZXkpKXJldHVybiByZXNba2V5XT1oYXNoW2tleV0scHJlc2VydmV8fGRlbGV0ZSBoYXNoW2tleV0sITA7aWYoaGFzT3duKGhhc2gsYWx0S2V5KSlyZXR1cm4gcmVzW2tleV09aGFzaFthbHRLZXldLHByZXNlcnZlfHxkZWxldGUgaGFzaFthbHRLZXldLCEwfXJldHVybiExfWZ1bmN0aW9uIG5vcm1hbGl6ZUNoaWxkcmVuKGNoaWxkcmVuKXtyZXR1cm4gaXNQcmltaXRpdmUoY2hpbGRyZW4pP1tjcmVhdGVUZXh0Vk5vZGUoY2hpbGRyZW4pXTpBcnJheS5pc0FycmF5KGNoaWxkcmVuKT9mdW5jdGlvbiBub3JtYWxpemVBcnJheUNoaWxkcmVuKGNoaWxkcmVuLG5lc3RlZEluZGV4KXt2YXIgcmVzPVtdO3ZhciBpLGMsbGFzdEluZGV4LGxhc3Q7Zm9yKGk9MDtpPGNoaWxkcmVuLmxlbmd0aDtpKyspaXNVbmRlZihjPWNoaWxkcmVuW2ldKXx8ImJvb2xlYW4iPT10eXBlb2YgY3x8KGxhc3RJbmRleD1yZXMubGVuZ3RoLTEsbGFzdD1yZXNbbGFzdEluZGV4XSxBcnJheS5pc0FycmF5KGMpPzA8Yy5sZW5ndGgmJihpc1RleHROb2RlKChjPW5vcm1hbGl6ZUFycmF5Q2hpbGRyZW4oYywobmVzdGVkSW5kZXh8fCIiKSsiXyIraSkpWzBdKSYmaXNUZXh0Tm9kZShsYXN0KSYmKHJlc1tsYXN0SW5kZXhdPWNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQrY1swXS50ZXh0KSxjLnNoaWZ0KCkpLHJlcy5wdXNoLmFwcGx5KHJlcyxjKSk6aXNQcmltaXRpdmUoYyk/aXNUZXh0Tm9kZShsYXN0KT9yZXNbbGFzdEluZGV4XT1jcmVhdGVUZXh0Vk5vZGUobGFzdC50ZXh0K2MpOiIiIT09YyYmcmVzLnB1c2goY3JlYXRlVGV4dFZOb2RlKGMpKTppc1RleHROb2RlKGMpJiZpc1RleHROb2RlKGxhc3QpP3Jlc1tsYXN0SW5kZXhdPWNyZWF0ZVRleHRWTm9kZShsYXN0LnRleHQrYy50ZXh0KTooaXNUcnVlKGNoaWxkcmVuLl9pc1ZMaXN0KSYmaXNEZWYoYy50YWcpJiZpc1VuZGVmKGMua2V5KSYmaXNEZWYobmVzdGVkSW5kZXgpJiYoYy5rZXk9Il9fdmxpc3QiK25lc3RlZEluZGV4KyJfIitpKyJfXyIpLHJlcy5wdXNoKGMpKSk7cmV0dXJuIHJlc30oY2hpbGRyZW4pOnZvaWQgMH1mdW5jdGlvbiBpc1RleHROb2RlKG5vZGUpe3JldHVybiBpc0RlZihub2RlKSYmaXNEZWYobm9kZS50ZXh0KSYmITE9PT1ub2RlLmlzQ29tbWVudH1mdW5jdGlvbiBlbnN1cmVDdG9yKGNvbXAsYmFzZSl7cmV0dXJuKGNvbXAuX19lc01vZHVsZXx8aGFzU3ltYm9sJiYiTW9kdWxlIj09PWNvbXBbU3ltYm9sLnRvU3RyaW5nVGFnXSkmJihjb21wPWNvbXAuZGVmYXVsdCksaXNPYmplY3QoY29tcCk/YmFzZS5leHRlbmQoY29tcCk6Y29tcH1mdW5jdGlvbiBpc0FzeW5jUGxhY2Vob2xkZXIobm9kZSl7cmV0dXJuIG5vZGUuaXNDb21tZW50JiZub2RlLmFzeW5jRmFjdG9yeX1mdW5jdGlvbiBnZXRGaXJzdENvbXBvbmVudENoaWxkKGNoaWxkcmVuKXtpZihBcnJheS5pc0FycmF5KGNoaWxkcmVuKSlmb3IodmFyIGk9MDtpPGNoaWxkcmVuLmxlbmd0aDtpKyspe3ZhciBjPWNoaWxkcmVuW2ldO2lmKGlzRGVmKGMpJiYoaXNEZWYoYy5jb21wb25lbnRPcHRpb25zKXx8aXNBc3luY1BsYWNlaG9sZGVyKGMpKSlyZXR1cm4gY319ZnVuY3Rpb24gYWRkKGV2ZW50LGZuLG9uY2Upe29uY2U/dGFyZ2V0LiRvbmNlKGV2ZW50LGZuKTp0YXJnZXQuJG9uKGV2ZW50LGZuKX1mdW5jdGlvbiByZW1vdmUkMShldmVudCxmbil7dGFyZ2V0LiRvZmYoZXZlbnQsZm4pfWZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudExpc3RlbmVycyh2bSxsaXN0ZW5lcnMsb2xkTGlzdGVuZXJzKXt0YXJnZXQ9dm0sdXBkYXRlTGlzdGVuZXJzKGxpc3RlbmVycyxvbGRMaXN0ZW5lcnN8fHt9LGFkZCxyZW1vdmUkMSksdGFyZ2V0PXZvaWQgMH1mdW5jdGlvbiByZXNvbHZlU2xvdHMoY2hpbGRyZW4sY29udGV4dCl7dmFyIHNsb3RzPXt9O2lmKCFjaGlsZHJlbilyZXR1cm4gc2xvdHM7Zm9yKHZhciBpPTAsbD1jaGlsZHJlbi5sZW5ndGg7aTxsO2krKyl7dmFyIGNoaWxkPWNoaWxkcmVuW2ldLGRhdGE9Y2hpbGQuZGF0YTtpZihkYXRhJiZkYXRhLmF0dHJzJiZkYXRhLmF0dHJzLnNsb3QmJmRlbGV0ZSBkYXRhLmF0dHJzLnNsb3QsY2hpbGQuY29udGV4dCE9PWNvbnRleHQmJmNoaWxkLmZuQ29udGV4dCE9PWNvbnRleHR8fCFkYXRhfHxudWxsPT1kYXRhLnNsb3QpKHNsb3RzLmRlZmF1bHR8fChzbG90cy5kZWZhdWx0PVtdKSkucHVzaChjaGlsZCk7ZWxzZXt2YXIgbmFtZT1kYXRhLnNsb3Qsc2xvdD1zbG90c1tuYW1lXXx8KHNsb3RzW25hbWVdPVtdKTsidGVtcGxhdGUiPT09Y2hpbGQudGFnP3Nsb3QucHVzaC5hcHBseShzbG90LGNoaWxkLmNoaWxkcmVufHxbXSk6c2xvdC5wdXNoKGNoaWxkKX19Zm9yKHZhciBuYW1lJDEgaW4gc2xvdHMpc2xvdHNbbmFtZSQxXS5ldmVyeShpc1doaXRlc3BhY2UpJiZkZWxldGUgc2xvdHNbbmFtZSQxXTtyZXR1cm4gc2xvdHN9ZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKG5vZGUpe3JldHVybiBub2RlLmlzQ29tbWVudCYmIW5vZGUuYXN5bmNGYWN0b3J5fHwiICI9PT1ub2RlLnRleHR9ZnVuY3Rpb24gcmVzb2x2ZVNjb3BlZFNsb3RzKGZucyxyZXMpe3Jlcz1yZXN8fHt9O2Zvcih2YXIgaT0wO2k8Zm5zLmxlbmd0aDtpKyspQXJyYXkuaXNBcnJheShmbnNbaV0pP3Jlc29sdmVTY29wZWRTbG90cyhmbnNbaV0scmVzKTpyZXNbZm5zW2ldLmtleV09Zm5zW2ldLmZuO3JldHVybiByZXN9dmFyIGFjdGl2ZUluc3RhbmNlPW51bGw7ZnVuY3Rpb24gaXNJbkluYWN0aXZlVHJlZSh2bSl7Zm9yKDt2bSYmKHZtPXZtLiRwYXJlbnQpOylpZih2bS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bSxkaXJlY3Qpe2lmKGRpcmVjdCl7aWYodm0uX2RpcmVjdEluYWN0aXZlPSExLGlzSW5JbmFjdGl2ZVRyZWUodm0pKXJldHVybn1lbHNlIGlmKHZtLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYodm0uX2luYWN0aXZlfHxudWxsPT09dm0uX2luYWN0aXZlKXt2bS5faW5hY3RpdmU9ITE7Zm9yKHZhciBpPTA7aTx2bS4kY2hpbGRyZW4ubGVuZ3RoO2krKylhY3RpdmF0ZUNoaWxkQ29tcG9uZW50KHZtLiRjaGlsZHJlbltpXSk7Y2FsbEhvb2sodm0sImFjdGl2YXRlZCIpfX1mdW5jdGlvbiBjYWxsSG9vayh2bSxob29rKXtwdXNoVGFyZ2V0KCk7dmFyIGhhbmRsZXJzPXZtLiRvcHRpb25zW2hvb2tdO2lmKGhhbmRsZXJzKWZvcih2YXIgaT0wLGo9aGFuZGxlcnMubGVuZ3RoO2k8ajtpKyspdHJ5e2hhbmRsZXJzW2ldLmNhbGwodm0pfWNhdGNoKGUpe2hhbmRsZUVycm9yKGUsdm0saG9vaysiIGhvb2siKX12bS5faGFzSG9va0V2ZW50JiZ2bS4kZW1pdCgiaG9vazoiK2hvb2spLHBvcFRhcmdldCgpfXZhciBxdWV1ZT1bXSxhY3RpdmF0ZWRDaGlsZHJlbj1bXSxoYXM9e30sd2FpdGluZz0hMSxmbHVzaGluZz0hMSxpbmRleD0wO2Z1bmN0aW9uIGZsdXNoU2NoZWR1bGVyUXVldWUoKXt2YXIgd2F0Y2hlcixpZDtmb3IoZmx1c2hpbmc9ITAscXVldWUuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLmlkLWIuaWR9KSxpbmRleD0wO2luZGV4PHF1ZXVlLmxlbmd0aDtpbmRleCsrKWlkPSh3YXRjaGVyPXF1ZXVlW2luZGV4XSkuaWQsaGFzW2lkXT1udWxsLHdhdGNoZXIucnVuKCk7dmFyIGFjdGl2YXRlZFF1ZXVlPWFjdGl2YXRlZENoaWxkcmVuLnNsaWNlKCksdXBkYXRlZFF1ZXVlPXF1ZXVlLnNsaWNlKCk7aW5kZXg9cXVldWUubGVuZ3RoPWFjdGl2YXRlZENoaWxkcmVuLmxlbmd0aD0wLHdhaXRpbmc9Zmx1c2hpbmc9IShoYXM9e30pLGZ1bmN0aW9uKHF1ZXVlKXtmb3IodmFyIGk9MDtpPHF1ZXVlLmxlbmd0aDtpKyspcXVldWVbaV0uX2luYWN0aXZlPSEwLGFjdGl2YXRlQ2hpbGRDb21wb25lbnQocXVldWVbaV0sITApfShhY3RpdmF0ZWRRdWV1ZSksZnVuY3Rpb24ocXVldWUpe3ZhciBpPXF1ZXVlLmxlbmd0aDtmb3IoO2ktLTspe3ZhciB3YXRjaGVyPXF1ZXVlW2ldLHZtPXdhdGNoZXIudm07dm0uX3dhdGNoZXI9PT13YXRjaGVyJiZ2bS5faXNNb3VudGVkJiZjYWxsSG9vayh2bSwidXBkYXRlZCIpfX0odXBkYXRlZFF1ZXVlKSxkZXZ0b29scyYmY29uZmlnLmRldnRvb2xzJiZkZXZ0b29scy5lbWl0KCJmbHVzaCIpfXZhciB1aWQkMT0wLFdhdGNoZXI9ZnVuY3Rpb24odm0sZXhwT3JGbixjYixvcHRpb25zLGlzUmVuZGVyV2F0Y2hlcil7dGhpcy52bT12bSxpc1JlbmRlcldhdGNoZXImJih2bS5fd2F0Y2hlcj10aGlzKSx2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKSxvcHRpb25zPyh0aGlzLmRlZXA9ISFvcHRpb25zLmRlZXAsdGhpcy51c2VyPSEhb3B0aW9ucy51c2VyLHRoaXMubGF6eT0hIW9wdGlvbnMubGF6eSx0aGlzLnN5bmM9ISFvcHRpb25zLnN5bmMpOnRoaXMuZGVlcD10aGlzLnVzZXI9dGhpcy5sYXp5PXRoaXMuc3luYz0hMSx0aGlzLmNiPWNiLHRoaXMuaWQ9Kyt1aWQkMSx0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBfU2V0LHRoaXMubmV3RGVwSWRzPW5ldyBfU2V0LHRoaXMuZXhwcmVzc2lvbj0iIiwiZnVuY3Rpb24iPT10eXBlb2YgZXhwT3JGbj90aGlzLmdldHRlcj1leHBPckZuOih0aGlzLmdldHRlcj1mdW5jdGlvbihwYXRoKXtpZighYmFpbFJFLnRlc3QocGF0aCkpe3ZhciBzZWdtZW50cz1wYXRoLnNwbGl0KCIuIik7cmV0dXJuIGZ1bmN0aW9uKG9iail7Zm9yKHZhciBpPTA7aTxzZWdtZW50cy5sZW5ndGg7aSsrKXtpZighb2JqKXJldHVybjtvYmo9b2JqW3NlZ21lbnRzW2ldXX1yZXR1cm4gb2JqfX19KGV4cE9yRm4pLHRoaXMuZ2V0dGVyfHwodGhpcy5nZXR0ZXI9ZnVuY3Rpb24oKXt9KSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O1dhdGNoZXIucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3ZhciB2YWx1ZTtwdXNoVGFyZ2V0KHRoaXMpO3ZhciB2bT10aGlzLnZtO3RyeXt2YWx1ZT10aGlzLmdldHRlci5jYWxsKHZtLHZtKX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7aGFuZGxlRXJyb3IoZSx2bSwnZ2V0dGVyIGZvciB3YXRjaGVyICInK3RoaXMuZXhwcmVzc2lvbisnIicpfWZpbmFsbHl7dGhpcy5kZWVwJiZ0cmF2ZXJzZSh2YWx1ZSkscG9wVGFyZ2V0KCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiB2YWx1ZX0sV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGRlcCl7dmFyIGlkPWRlcC5pZDt0aGlzLm5ld0RlcElkcy5oYXMoaWQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKGlkKSx0aGlzLm5ld0RlcHMucHVzaChkZXApLHRoaXMuZGVwSWRzLmhhcyhpZCl8fGRlcC5hZGRTdWIodGhpcykpfSxXYXRjaGVyLnByb3RvdHlwZS5jbGVhbnVwRGVwcz1mdW5jdGlvbigpe2Zvcih2YXIgaT10aGlzLmRlcHMubGVuZ3RoO2ktLTspe3ZhciBkZXA9dGhpcy5kZXBzW2ldO3RoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpfHxkZXAucmVtb3ZlU3ViKHRoaXMpfXZhciB0bXA9dGhpcy5kZXBJZHM7dGhpcy5kZXBJZHM9dGhpcy5uZXdEZXBJZHMsdGhpcy5uZXdEZXBJZHM9dG1wLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksdG1wPXRoaXMuZGVwcyx0aGlzLmRlcHM9dGhpcy5uZXdEZXBzLHRoaXMubmV3RGVwcz10bXAsdGhpcy5uZXdEZXBzLmxlbmd0aD0wfSxXYXRjaGVyLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbih3YXRjaGVyKXt2YXIgaWQ9d2F0Y2hlci5pZDtpZihudWxsPT1oYXNbaWRdKXtpZihoYXNbaWRdPSEwLGZsdXNoaW5nKXtmb3IodmFyIGk9cXVldWUubGVuZ3RoLTE7aW5kZXg8aSYmcXVldWVbaV0uaWQ+d2F0Y2hlci5pZDspaS0tO3F1ZXVlLnNwbGljZShpKzEsMCx3YXRjaGVyKX1lbHNlIHF1ZXVlLnB1c2god2F0Y2hlcik7d2FpdGluZ3x8KHdhaXRpbmc9ITAsbmV4dFRpY2soZmx1c2hTY2hlZHVsZXJRdWV1ZSkpfX0odGhpcyl9LFdhdGNoZXIucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt2YXIgdmFsdWU9dGhpcy5nZXQoKTtpZih2YWx1ZSE9PXRoaXMudmFsdWV8fGlzT2JqZWN0KHZhbHVlKXx8dGhpcy5kZWVwKXt2YXIgb2xkVmFsdWU9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPXZhbHVlLHRoaXMudXNlcil0cnl7dGhpcy5jYi5jYWxsKHRoaXMudm0sdmFsdWUsb2xkVmFsdWUpfWNhdGNoKGUpe2hhbmRsZUVycm9yKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSx2YWx1ZSxvbGRWYWx1ZSl9fX0sV2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oKXt0aGlzLnZhbHVlPXRoaXMuZ2V0KCksdGhpcy5kaXJ0eT0hMX0sV2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPXRoaXMuZGVwcy5sZW5ndGg7aS0tOyl0aGlzLmRlcHNbaV0uZGVwZW5kKCl9LFdhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3RoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWR8fHJlbW92ZSh0aGlzLnZtLl93YXRjaGVycyx0aGlzKTtmb3IodmFyIGk9dGhpcy5kZXBzLmxlbmd0aDtpLS07KXRoaXMuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyk7dGhpcy5hY3RpdmU9ITF9fTt2YXIgc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uPXtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6bm9vcCxzZXQ6bm9vcH07ZnVuY3Rpb24gcHJveHkodGFyZ2V0LHNvdXJjZUtleSxrZXkpe3NoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tzb3VyY2VLZXldW2tleV19LHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5zZXQ9ZnVuY3Rpb24odmFsKXt0aGlzW3NvdXJjZUtleV1ba2V5XT12YWx9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbil9ZnVuY3Rpb24gaW5pdFN0YXRlKHZtKXt2bS5fd2F0Y2hlcnM9W107dmFyIG9wdHM9dm0uJG9wdGlvbnM7b3B0cy5wcm9wcyYmZnVuY3Rpb24odm0scHJvcHNPcHRpb25zKXt2YXIgcHJvcHNEYXRhPXZtLiRvcHRpb25zLnByb3BzRGF0YXx8e30scHJvcHM9dm0uX3Byb3BzPXt9LGtleXM9dm0uJG9wdGlvbnMuX3Byb3BLZXlzPVtdO3ZtLiRwYXJlbnQmJnRvZ2dsZU9ic2VydmluZyghMSk7dmFyIGxvb3A9ZnVuY3Rpb24oa2V5KXtrZXlzLnB1c2goa2V5KTt2YXIgdmFsdWU9dmFsaWRhdGVQcm9wKGtleSxwcm9wc09wdGlvbnMscHJvcHNEYXRhLHZtKTtkZWZpbmVSZWFjdGl2ZShwcm9wcyxrZXksdmFsdWUpLGtleSBpbiB2bXx8cHJveHkodm0sIl9wcm9wcyIsa2V5KX07Zm9yKHZhciBrZXkgaW4gcHJvcHNPcHRpb25zKWxvb3Aoa2V5KTt0b2dnbGVPYnNlcnZpbmcoITApfSh2bSxvcHRzLnByb3BzKSxvcHRzLm1ldGhvZHMmJmZ1bmN0aW9uKHZtLG1ldGhvZHMpe3ZtLiRvcHRpb25zLnByb3BzO2Zvcih2YXIga2V5IGluIG1ldGhvZHMpdm1ba2V5XT1udWxsPT1tZXRob2RzW2tleV0/bm9vcDpiaW5kKG1ldGhvZHNba2V5XSx2bSl9KHZtLG9wdHMubWV0aG9kcyksb3B0cy5kYXRhP2Z1bmN0aW9uKHZtKXt2YXIgZGF0YT12bS4kb3B0aW9ucy5kYXRhO2lzUGxhaW5PYmplY3QoZGF0YT12bS5fZGF0YT0iZnVuY3Rpb24iPT10eXBlb2YgZGF0YT9mdW5jdGlvbihkYXRhLHZtKXtwdXNoVGFyZ2V0KCk7dHJ5e3JldHVybiBkYXRhLmNhbGwodm0sdm0pfWNhdGNoKGUpe3JldHVybiBoYW5kbGVFcnJvcihlLHZtLCJkYXRhKCkiKSx7fX1maW5hbGx5e3BvcFRhcmdldCgpfX0oZGF0YSx2bSk6ZGF0YXx8e30pfHwoZGF0YT17fSk7dmFyIGtleXM9T2JqZWN0LmtleXMoZGF0YSkscHJvcHM9dm0uJG9wdGlvbnMucHJvcHMsaT0odm0uJG9wdGlvbnMubWV0aG9kcyxrZXlzLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIga2V5PWtleXNbaV07MCxwcm9wcyYmaGFzT3duKHByb3BzLGtleSl8fCh2b2lkIDAsMzYhPT0oYz0oa2V5KyIiKS5jaGFyQ29kZUF0KDApKSYmOTUhPT1jJiZwcm94eSh2bSwiX2RhdGEiLGtleSkpfXZhciBjO29ic2VydmUoZGF0YSwhMCl9KHZtKTpvYnNlcnZlKHZtLl9kYXRhPXt9LCEwKSxvcHRzLmNvbXB1dGVkJiZmdW5jdGlvbih2bSxjb21wdXRlZCl7dmFyIHdhdGNoZXJzPXZtLl9jb21wdXRlZFdhdGNoZXJzPU9iamVjdC5jcmVhdGUobnVsbCksaXNTU1I9aXNTZXJ2ZXJSZW5kZXJpbmcoKTtmb3IodmFyIGtleSBpbiBjb21wdXRlZCl7dmFyIHVzZXJEZWY9Y29tcHV0ZWRba2V5XSxnZXR0ZXI9ImZ1bmN0aW9uIj09dHlwZW9mIHVzZXJEZWY/dXNlckRlZjp1c2VyRGVmLmdldDswLGlzU1NSfHwod2F0Y2hlcnNba2V5XT1uZXcgV2F0Y2hlcih2bSxnZXR0ZXJ8fG5vb3Asbm9vcCxjb21wdXRlZFdhdGNoZXJPcHRpb25zKSksa2V5IGluIHZtfHxkZWZpbmVDb21wdXRlZCh2bSxrZXksdXNlckRlZil9fSh2bSxvcHRzLmNvbXB1dGVkKSxvcHRzLndhdGNoJiZvcHRzLndhdGNoIT09bmF0aXZlV2F0Y2gmJmZ1bmN0aW9uKHZtLHdhdGNoKXtmb3IodmFyIGtleSBpbiB3YXRjaCl7dmFyIGhhbmRsZXI9d2F0Y2hba2V5XTtpZihBcnJheS5pc0FycmF5KGhhbmRsZXIpKWZvcih2YXIgaT0wO2k8aGFuZGxlci5sZW5ndGg7aSsrKWNyZWF0ZVdhdGNoZXIodm0sa2V5LGhhbmRsZXJbaV0pO2Vsc2UgY3JlYXRlV2F0Y2hlcih2bSxrZXksaGFuZGxlcil9fSh2bSxvcHRzLndhdGNoKX12YXIgY29tcHV0ZWRXYXRjaGVyT3B0aW9ucz17bGF6eTohMH07ZnVuY3Rpb24gZGVmaW5lQ29tcHV0ZWQodGFyZ2V0LGtleSx1c2VyRGVmKXt2YXIgc2hvdWxkQ2FjaGU9IWlzU2VydmVyUmVuZGVyaW5nKCk7c2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLnNldD0iZnVuY3Rpb24iPT10eXBlb2YgdXNlckRlZj8oc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uLmdldD1zaG91bGRDYWNoZT9jcmVhdGVDb21wdXRlZEdldHRlcihrZXkpOnVzZXJEZWYsbm9vcCk6KHNoYXJlZFByb3BlcnR5RGVmaW5pdGlvbi5nZXQ9dXNlckRlZi5nZXQ/c2hvdWxkQ2FjaGUmJiExIT09dXNlckRlZi5jYWNoZT9jcmVhdGVDb21wdXRlZEdldHRlcihrZXkpOnVzZXJEZWYuZ2V0Om5vb3AsdXNlckRlZi5zZXQ/dXNlckRlZi5zZXQ6bm9vcCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxrZXksc2hhcmVkUHJvcGVydHlEZWZpbml0aW9uKX1mdW5jdGlvbiBjcmVhdGVDb21wdXRlZEdldHRlcihrZXkpe3JldHVybiBmdW5jdGlvbigpe3ZhciB3YXRjaGVyPXRoaXMuX2NvbXB1dGVkV2F0Y2hlcnMmJnRoaXMuX2NvbXB1dGVkV2F0Y2hlcnNba2V5XTtpZih3YXRjaGVyKXJldHVybiB3YXRjaGVyLmRpcnR5JiZ3YXRjaGVyLmV2YWx1YXRlKCksRGVwLnRhcmdldCYmd2F0Y2hlci5kZXBlbmQoKSx3YXRjaGVyLnZhbHVlfX1mdW5jdGlvbiBjcmVhdGVXYXRjaGVyKHZtLGV4cE9yRm4saGFuZGxlcixvcHRpb25zKXtyZXR1cm4gaXNQbGFpbk9iamVjdChoYW5kbGVyKSYmKGhhbmRsZXI9KG9wdGlvbnM9aGFuZGxlcikuaGFuZGxlciksInN0cmluZyI9PXR5cGVvZiBoYW5kbGVyJiYoaGFuZGxlcj12bVtoYW5kbGVyXSksdm0uJHdhdGNoKGV4cE9yRm4saGFuZGxlcixvcHRpb25zKX1mdW5jdGlvbiByZXNvbHZlSW5qZWN0KGluamVjdCx2bSl7aWYoaW5qZWN0KXtmb3IodmFyIHJlc3VsdD1PYmplY3QuY3JlYXRlKG51bGwpLGtleXM9aGFzU3ltYm9sP1JlZmxlY3Qub3duS2V5cyhpbmplY3QpLmZpbHRlcihmdW5jdGlvbihrZXkpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGluamVjdCxrZXkpLmVudW1lcmFibGV9KTpPYmplY3Qua2V5cyhpbmplY3QpLGk9MDtpPGtleXMubGVuZ3RoO2krKyl7Zm9yKHZhciBrZXk9a2V5c1tpXSxwcm92aWRlS2V5PWluamVjdFtrZXldLmZyb20sc291cmNlPXZtO3NvdXJjZTspe2lmKHNvdXJjZS5fcHJvdmlkZWQmJmhhc093bihzb3VyY2UuX3Byb3ZpZGVkLHByb3ZpZGVLZXkpKXtyZXN1bHRba2V5XT1zb3VyY2UuX3Byb3ZpZGVkW3Byb3ZpZGVLZXldO2JyZWFrfXNvdXJjZT1zb3VyY2UuJHBhcmVudH1pZighc291cmNlKWlmKCJkZWZhdWx0ImluIGluamVjdFtrZXldKXt2YXIgcHJvdmlkZURlZmF1bHQ9aW5qZWN0W2tleV0uZGVmYXVsdDtyZXN1bHRba2V5XT0iZnVuY3Rpb24iPT10eXBlb2YgcHJvdmlkZURlZmF1bHQ/cHJvdmlkZURlZmF1bHQuY2FsbCh2bSk6cHJvdmlkZURlZmF1bHR9ZWxzZSAwfXJldHVybiByZXN1bHR9fWZ1bmN0aW9uIHJlbmRlckxpc3QodmFsLHJlbmRlcil7dmFyIHJldCxpLGwsa2V5cyxrZXk7aWYoQXJyYXkuaXNBcnJheSh2YWwpfHwic3RyaW5nIj09dHlwZW9mIHZhbClmb3IocmV0PW5ldyBBcnJheSh2YWwubGVuZ3RoKSxpPTAsbD12YWwubGVuZ3RoO2k8bDtpKyspcmV0W2ldPXJlbmRlcih2YWxbaV0saSk7ZWxzZSBpZigibnVtYmVyIj09dHlwZW9mIHZhbClmb3IocmV0PW5ldyBBcnJheSh2YWwpLGk9MDtpPHZhbDtpKyspcmV0W2ldPXJlbmRlcihpKzEsaSk7ZWxzZSBpZihpc09iamVjdCh2YWwpKWZvcihrZXlzPU9iamVjdC5rZXlzKHZhbCkscmV0PW5ldyBBcnJheShrZXlzLmxlbmd0aCksaT0wLGw9a2V5cy5sZW5ndGg7aTxsO2krKylrZXk9a2V5c1tpXSxyZXRbaV09cmVuZGVyKHZhbFtrZXldLGtleSxpKTtyZXR1cm4gaXNEZWYocmV0KSYmKHJldC5faXNWTGlzdD0hMCkscmV0fWZ1bmN0aW9uIHJlbmRlclNsb3QobmFtZSxmYWxsYmFjayxwcm9wcyxiaW5kT2JqZWN0KXt2YXIgbm9kZXMsc2NvcGVkU2xvdEZuPXRoaXMuJHNjb3BlZFNsb3RzW25hbWVdO2lmKHNjb3BlZFNsb3RGbilwcm9wcz1wcm9wc3x8e30sYmluZE9iamVjdCYmKHByb3BzPWV4dGVuZChleHRlbmQoe30sYmluZE9iamVjdCkscHJvcHMpKSxub2Rlcz1zY29wZWRTbG90Rm4ocHJvcHMpfHxmYWxsYmFjaztlbHNle3ZhciBzbG90Tm9kZXM9dGhpcy4kc2xvdHNbbmFtZV07c2xvdE5vZGVzJiYoc2xvdE5vZGVzLl9yZW5kZXJlZD0hMCksbm9kZXM9c2xvdE5vZGVzfHxmYWxsYmFja312YXIgdGFyZ2V0PXByb3BzJiZwcm9wcy5zbG90O3JldHVybiB0YXJnZXQ/dGhpcy4kY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiLHtzbG90OnRhcmdldH0sbm9kZXMpOm5vZGVzfWZ1bmN0aW9uIHJlc29sdmVGaWx0ZXIoaWQpe3JldHVybiByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsaWQpfHxpZGVudGl0eX1mdW5jdGlvbiBpc0tleU5vdE1hdGNoKGV4cGVjdCxhY3R1YWwpe3JldHVybiBBcnJheS5pc0FycmF5KGV4cGVjdCk/LTE9PT1leHBlY3QuaW5kZXhPZihhY3R1YWwpOmV4cGVjdCE9PWFjdHVhbH1mdW5jdGlvbiBjaGVja0tleUNvZGVzKGV2ZW50S2V5Q29kZSxrZXksYnVpbHRJbktleUNvZGUsZXZlbnRLZXlOYW1lLGJ1aWx0SW5LZXlOYW1lKXt2YXIgbWFwcGVkS2V5Q29kZT1jb25maWcua2V5Q29kZXNba2V5XXx8YnVpbHRJbktleUNvZGU7cmV0dXJuIGJ1aWx0SW5LZXlOYW1lJiZldmVudEtleU5hbWUmJiFjb25maWcua2V5Q29kZXNba2V5XT9pc0tleU5vdE1hdGNoKGJ1aWx0SW5LZXlOYW1lLGV2ZW50S2V5TmFtZSk6bWFwcGVkS2V5Q29kZT9pc0tleU5vdE1hdGNoKG1hcHBlZEtleUNvZGUsZXZlbnRLZXlDb2RlKTpldmVudEtleU5hbWU/aHlwaGVuYXRlKGV2ZW50S2V5TmFtZSkhPT1rZXk6dm9pZCAwfWZ1bmN0aW9uIGJpbmRPYmplY3RQcm9wcyhkYXRhLHRhZyx2YWx1ZSxhc1Byb3AsaXNTeW5jKXtpZih2YWx1ZSlpZihpc09iamVjdCh2YWx1ZSkpe3ZhciBoYXNoO0FycmF5LmlzQXJyYXkodmFsdWUpJiYodmFsdWU9dG9PYmplY3QodmFsdWUpKTt2YXIgbG9vcD1mdW5jdGlvbihrZXkpe2lmKCJjbGFzcyI9PT1rZXl8fCJzdHlsZSI9PT1rZXl8fGlzUmVzZXJ2ZWRBdHRyaWJ1dGUoa2V5KSloYXNoPWRhdGE7ZWxzZXt2YXIgdHlwZT1kYXRhLmF0dHJzJiZkYXRhLmF0dHJzLnR5cGU7aGFzaD1hc1Byb3B8fGNvbmZpZy5tdXN0VXNlUHJvcCh0YWcsdHlwZSxrZXkpP2RhdGEuZG9tUHJvcHN8fChkYXRhLmRvbVByb3BzPXt9KTpkYXRhLmF0dHJzfHwoZGF0YS5hdHRycz17fSl9a2V5IGluIGhhc2h8fChoYXNoW2tleV09dmFsdWVba2V5XSxpc1N5bmMmJigoZGF0YS5vbnx8KGRhdGEub249e30pKVsidXBkYXRlOiIra2V5XT1mdW5jdGlvbigkZXZlbnQpe3ZhbHVlW2tleV09JGV2ZW50fSkpfTtmb3IodmFyIGtleSBpbiB2YWx1ZSlsb29wKGtleSl9ZWxzZTtyZXR1cm4gZGF0YX1mdW5jdGlvbiByZW5kZXJTdGF0aWMoaW5kZXgsaXNJbkZvcil7dmFyIGNhY2hlZD10aGlzLl9zdGF0aWNUcmVlc3x8KHRoaXMuX3N0YXRpY1RyZWVzPVtdKSx0cmVlPWNhY2hlZFtpbmRleF07cmV0dXJuIHRyZWUmJiFpc0luRm9yfHxtYXJrU3RhdGljKHRyZWU9Y2FjaGVkW2luZGV4XT10aGlzLiRvcHRpb25zLnN0YXRpY1JlbmRlckZuc1tpbmRleF0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitpbmRleCwhMSksdHJlZX1mdW5jdGlvbiBtYXJrT25jZSh0cmVlLGluZGV4LGtleSl7cmV0dXJuIG1hcmtTdGF0aWModHJlZSwiX19vbmNlX18iK2luZGV4KyhrZXk/Il8iK2tleToiIiksITApLHRyZWV9ZnVuY3Rpb24gbWFya1N0YXRpYyh0cmVlLGtleSxpc09uY2Upe2lmKEFycmF5LmlzQXJyYXkodHJlZSkpZm9yKHZhciBpPTA7aTx0cmVlLmxlbmd0aDtpKyspdHJlZVtpXSYmInN0cmluZyIhPXR5cGVvZiB0cmVlW2ldJiZtYXJrU3RhdGljTm9kZSh0cmVlW2ldLGtleSsiXyIraSxpc09uY2UpO2Vsc2UgbWFya1N0YXRpY05vZGUodHJlZSxrZXksaXNPbmNlKX1mdW5jdGlvbiBtYXJrU3RhdGljTm9kZShub2RlLGtleSxpc09uY2Upe25vZGUuaXNTdGF0aWM9ITAsbm9kZS5rZXk9a2V5LG5vZGUuaXNPbmNlPWlzT25jZX1mdW5jdGlvbiBiaW5kT2JqZWN0TGlzdGVuZXJzKGRhdGEsdmFsdWUpe2lmKHZhbHVlKWlmKGlzUGxhaW5PYmplY3QodmFsdWUpKXt2YXIgb249ZGF0YS5vbj1kYXRhLm9uP2V4dGVuZCh7fSxkYXRhLm9uKTp7fTtmb3IodmFyIGtleSBpbiB2YWx1ZSl7dmFyIGV4aXN0aW5nPW9uW2tleV0sb3Vycz12YWx1ZVtrZXldO29uW2tleV09ZXhpc3Rpbmc/W10uY29uY2F0KGV4aXN0aW5nLG91cnMpOm91cnN9fWVsc2U7cmV0dXJuIGRhdGF9ZnVuY3Rpb24gaW5zdGFsbFJlbmRlckhlbHBlcnModGFyZ2V0KXt0YXJnZXQuX289bWFya09uY2UsdGFyZ2V0Ll9uPXRvTnVtYmVyLHRhcmdldC5fcz10b1N0cmluZyx0YXJnZXQuX2w9cmVuZGVyTGlzdCx0YXJnZXQuX3Q9cmVuZGVyU2xvdCx0YXJnZXQuX3E9bG9vc2VFcXVhbCx0YXJnZXQuX2k9bG9vc2VJbmRleE9mLHRhcmdldC5fbT1yZW5kZXJTdGF0aWMsdGFyZ2V0Ll9mPXJlc29sdmVGaWx0ZXIsdGFyZ2V0Ll9rPWNoZWNrS2V5Q29kZXMsdGFyZ2V0Ll9iPWJpbmRPYmplY3RQcm9wcyx0YXJnZXQuX3Y9Y3JlYXRlVGV4dFZOb2RlLHRhcmdldC5fZT1jcmVhdGVFbXB0eVZOb2RlLHRhcmdldC5fdT1yZXNvbHZlU2NvcGVkU2xvdHMsdGFyZ2V0Ll9nPWJpbmRPYmplY3RMaXN0ZW5lcnN9ZnVuY3Rpb24gRnVuY3Rpb25hbFJlbmRlckNvbnRleHQoZGF0YSxwcm9wcyxjaGlsZHJlbixwYXJlbnQsQ3Rvcil7dmFyIGNvbnRleHRWbSxvcHRpb25zPUN0b3Iub3B0aW9ucztoYXNPd24ocGFyZW50LCJfdWlkIik/KGNvbnRleHRWbT1PYmplY3QuY3JlYXRlKHBhcmVudCkpLl9vcmlnaW5hbD1wYXJlbnQ6cGFyZW50PShjb250ZXh0Vm09cGFyZW50KS5fb3JpZ2luYWw7dmFyIGlzQ29tcGlsZWQ9aXNUcnVlKG9wdGlvbnMuX2NvbXBpbGVkKSxuZWVkTm9ybWFsaXphdGlvbj0haXNDb21waWxlZDt0aGlzLmRhdGE9ZGF0YSx0aGlzLnByb3BzPXByb3BzLHRoaXMuY2hpbGRyZW49Y2hpbGRyZW4sdGhpcy5wYXJlbnQ9cGFyZW50LHRoaXMubGlzdGVuZXJzPWRhdGEub258fGVtcHR5T2JqZWN0LHRoaXMuaW5qZWN0aW9ucz1yZXNvbHZlSW5qZWN0KG9wdGlvbnMuaW5qZWN0LHBhcmVudCksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiByZXNvbHZlU2xvdHMoY2hpbGRyZW4scGFyZW50KX0saXNDb21waWxlZCYmKHRoaXMuJG9wdGlvbnM9b3B0aW9ucyx0aGlzLiRzbG90cz10aGlzLnNsb3RzKCksdGhpcy4kc2NvcGVkU2xvdHM9ZGF0YS5zY29wZWRTbG90c3x8ZW1wdHlPYmplY3QpLG9wdGlvbnMuX3Njb3BlSWQ/dGhpcy5fYz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgdm5vZGU9Y3JlYXRlRWxlbWVudChjb250ZXh0Vm0sYSxiLGMsZCxuZWVkTm9ybWFsaXphdGlvbik7cmV0dXJuIHZub2RlJiYhQXJyYXkuaXNBcnJheSh2bm9kZSkmJih2bm9kZS5mblNjb3BlSWQ9b3B0aW9ucy5fc2NvcGVJZCx2bm9kZS5mbkNvbnRleHQ9cGFyZW50KSx2bm9kZX06dGhpcy5fYz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gY3JlYXRlRWxlbWVudChjb250ZXh0Vm0sYSxiLGMsZCxuZWVkTm9ybWFsaXphdGlvbil9fWZ1bmN0aW9uIGNsb25lQW5kTWFya0Z1bmN0aW9uYWxSZXN1bHQodm5vZGUsZGF0YSxjb250ZXh0Vm0sb3B0aW9ucyl7dmFyIGNsb25lPWNsb25lVk5vZGUodm5vZGUpO3JldHVybiBjbG9uZS5mbkNvbnRleHQ9Y29udGV4dFZtLGNsb25lLmZuT3B0aW9ucz1vcHRpb25zLGRhdGEuc2xvdCYmKChjbG9uZS5kYXRhfHwoY2xvbmUuZGF0YT17fSkpLnNsb3Q9ZGF0YS5zbG90KSxjbG9uZX1mdW5jdGlvbiBtZXJnZVByb3BzKHRvLGZyb20pe2Zvcih2YXIga2V5IGluIGZyb20pdG9bY2FtZWxpemUoa2V5KV09ZnJvbVtrZXldfWluc3RhbGxSZW5kZXJIZWxwZXJzKEZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0LnByb3RvdHlwZSk7dmFyIGNvbXBvbmVudFZOb2RlSG9va3M9e2luaXQ6ZnVuY3Rpb24odm5vZGUsaHlkcmF0aW5nLHBhcmVudEVsbSxyZWZFbG0pe2lmKHZub2RlLmNvbXBvbmVudEluc3RhbmNlJiYhdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZ2bm9kZS5kYXRhLmtlZXBBbGl2ZSl7dmFyIG1vdW50ZWROb2RlPXZub2RlO2NvbXBvbmVudFZOb2RlSG9va3MucHJlcGF0Y2gobW91bnRlZE5vZGUsbW91bnRlZE5vZGUpfWVsc2V7KHZub2RlLmNvbXBvbmVudEluc3RhbmNlPWZ1bmN0aW9uKHZub2RlLHBhcmVudCxwYXJlbnRFbG0scmVmRWxtKXt2YXIgb3B0aW9ucz17X2lzQ29tcG9uZW50OiEwLHBhcmVudDpwYXJlbnQsX3BhcmVudFZub2RlOnZub2RlLF9wYXJlbnRFbG06cGFyZW50RWxtfHxudWxsLF9yZWZFbG06cmVmRWxtfHxudWxsfSxpbmxpbmVUZW1wbGF0ZT12bm9kZS5kYXRhLmlubGluZVRlbXBsYXRlO2lzRGVmKGlubGluZVRlbXBsYXRlKSYmKG9wdGlvbnMucmVuZGVyPWlubGluZVRlbXBsYXRlLnJlbmRlcixvcHRpb25zLnN0YXRpY1JlbmRlckZucz1pbmxpbmVUZW1wbGF0ZS5zdGF0aWNSZW5kZXJGbnMpO3JldHVybiBuZXcgdm5vZGUuY29tcG9uZW50T3B0aW9ucy5DdG9yKG9wdGlvbnMpfSh2bm9kZSxhY3RpdmVJbnN0YW5jZSxwYXJlbnRFbG0scmVmRWxtKSkuJG1vdW50KGh5ZHJhdGluZz92bm9kZS5lbG06dm9pZCAwLGh5ZHJhdGluZyl9fSxwcmVwYXRjaDpmdW5jdGlvbihvbGRWbm9kZSx2bm9kZSl7dmFyIG9wdGlvbnM9dm5vZGUuY29tcG9uZW50T3B0aW9uczshZnVuY3Rpb24odm0scHJvcHNEYXRhLGxpc3RlbmVycyxwYXJlbnRWbm9kZSxyZW5kZXJDaGlsZHJlbil7dmFyIGhhc0NoaWxkcmVuPSEhKHJlbmRlckNoaWxkcmVufHx2bS4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fHBhcmVudFZub2RlLmRhdGEuc2NvcGVkU2xvdHN8fHZtLiRzY29wZWRTbG90cyE9PWVtcHR5T2JqZWN0KTtpZih2bS4kb3B0aW9ucy5fcGFyZW50Vm5vZGU9cGFyZW50Vm5vZGUsdm0uJHZub2RlPXBhcmVudFZub2RlLHZtLl92bm9kZSYmKHZtLl92bm9kZS5wYXJlbnQ9cGFyZW50Vm5vZGUpLHZtLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1yZW5kZXJDaGlsZHJlbix2bS4kYXR0cnM9cGFyZW50Vm5vZGUuZGF0YS5hdHRyc3x8ZW1wdHlPYmplY3Qsdm0uJGxpc3RlbmVycz1saXN0ZW5lcnN8fGVtcHR5T2JqZWN0LHByb3BzRGF0YSYmdm0uJG9wdGlvbnMucHJvcHMpe3RvZ2dsZU9ic2VydmluZyghMSk7Zm9yKHZhciBwcm9wcz12bS5fcHJvcHMscHJvcEtleXM9dm0uJG9wdGlvbnMuX3Byb3BLZXlzfHxbXSxpPTA7aTxwcm9wS2V5cy5sZW5ndGg7aSsrKXt2YXIga2V5PXByb3BLZXlzW2ldLHByb3BPcHRpb25zPXZtLiRvcHRpb25zLnByb3BzO3Byb3BzW2tleV09dmFsaWRhdGVQcm9wKGtleSxwcm9wT3B0aW9ucyxwcm9wc0RhdGEsdm0pfXRvZ2dsZU9ic2VydmluZyghMCksdm0uJG9wdGlvbnMucHJvcHNEYXRhPXByb3BzRGF0YX1saXN0ZW5lcnM9bGlzdGVuZXJzfHxlbXB0eU9iamVjdDt2YXIgb2xkTGlzdGVuZXJzPXZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dm0uJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1saXN0ZW5lcnMsdXBkYXRlQ29tcG9uZW50TGlzdGVuZXJzKHZtLGxpc3RlbmVycyxvbGRMaXN0ZW5lcnMpLGhhc0NoaWxkcmVuJiYodm0uJHNsb3RzPXJlc29sdmVTbG90cyhyZW5kZXJDaGlsZHJlbixwYXJlbnRWbm9kZS5jb250ZXh0KSx2bS4kZm9yY2VVcGRhdGUoKSl9KHZub2RlLmNvbXBvbmVudEluc3RhbmNlPW9sZFZub2RlLmNvbXBvbmVudEluc3RhbmNlLG9wdGlvbnMucHJvcHNEYXRhLG9wdGlvbnMubGlzdGVuZXJzLHZub2RlLG9wdGlvbnMuY2hpbGRyZW4pfSxpbnNlcnQ6ZnVuY3Rpb24odm5vZGUpe3ZhciB2bSxjb250ZXh0PXZub2RlLmNvbnRleHQsY29tcG9uZW50SW5zdGFuY2U9dm5vZGUuY29tcG9uZW50SW5zdGFuY2U7Y29tcG9uZW50SW5zdGFuY2UuX2lzTW91bnRlZHx8KGNvbXBvbmVudEluc3RhbmNlLl9pc01vdW50ZWQ9ITAsY2FsbEhvb2soY29tcG9uZW50SW5zdGFuY2UsIm1vdW50ZWQiKSksdm5vZGUuZGF0YS5rZWVwQWxpdmUmJihjb250ZXh0Ll9pc01vdW50ZWQ/KCh2bT1jb21wb25lbnRJbnN0YW5jZSkuX2luYWN0aXZlPSExLGFjdGl2YXRlZENoaWxkcmVuLnB1c2godm0pKTphY3RpdmF0ZUNoaWxkQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCEwKSl9LGRlc3Ryb3k6ZnVuY3Rpb24odm5vZGUpe3ZhciBjb21wb25lbnRJbnN0YW5jZT12bm9kZS5jb21wb25lbnRJbnN0YW5jZTtjb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWR8fCh2bm9kZS5kYXRhLmtlZXBBbGl2ZT9mdW5jdGlvbiBkZWFjdGl2YXRlQ2hpbGRDb21wb25lbnQodm0sZGlyZWN0KXtpZighKGRpcmVjdCYmKHZtLl9kaXJlY3RJbmFjdGl2ZT0hMCxpc0luSW5hY3RpdmVUcmVlKHZtKSl8fHZtLl9pbmFjdGl2ZSkpe3ZtLl9pbmFjdGl2ZT0hMDtmb3IodmFyIGk9MDtpPHZtLiRjaGlsZHJlbi5sZW5ndGg7aSsrKWRlYWN0aXZhdGVDaGlsZENvbXBvbmVudCh2bS4kY2hpbGRyZW5baV0pO2NhbGxIb29rKHZtLCJkZWFjdGl2YXRlZCIpfX0oY29tcG9uZW50SW5zdGFuY2UsITApOmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCkpfX0saG9va3NUb01lcmdlPU9iamVjdC5rZXlzKGNvbXBvbmVudFZOb2RlSG9va3MpO2Z1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudChDdG9yLGRhdGEsY29udGV4dCxjaGlsZHJlbix0YWcpe2lmKCFpc1VuZGVmKEN0b3IpKXt2YXIgYmFzZUN0b3I9Y29udGV4dC4kb3B0aW9ucy5fYmFzZTtpZihpc09iamVjdChDdG9yKSYmKEN0b3I9YmFzZUN0b3IuZXh0ZW5kKEN0b3IpKSwiZnVuY3Rpb24iPT10eXBlb2YgQ3Rvcil7dmFyIGFzeW5jRmFjdG9yeTtpZihpc1VuZGVmKEN0b3IuY2lkKSYmdm9pZCAwPT09KEN0b3I9ZnVuY3Rpb24oZmFjdG9yeSxiYXNlQ3Rvcixjb250ZXh0KXtpZihpc1RydWUoZmFjdG9yeS5lcnJvcikmJmlzRGVmKGZhY3RvcnkuZXJyb3JDb21wKSlyZXR1cm4gZmFjdG9yeS5lcnJvckNvbXA7aWYoaXNEZWYoZmFjdG9yeS5yZXNvbHZlZCkpcmV0dXJuIGZhY3RvcnkucmVzb2x2ZWQ7aWYoaXNUcnVlKGZhY3RvcnkubG9hZGluZykmJmlzRGVmKGZhY3RvcnkubG9hZGluZ0NvbXApKXJldHVybiBmYWN0b3J5LmxvYWRpbmdDb21wO2lmKCFpc0RlZihmYWN0b3J5LmNvbnRleHRzKSl7dmFyIGNvbnRleHRzPWZhY3RvcnkuY29udGV4dHM9W2NvbnRleHRdLHN5bmM9ITAsZm9yY2VSZW5kZXI9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MCxsPWNvbnRleHRzLmxlbmd0aDtpPGw7aSsrKWNvbnRleHRzW2ldLiRmb3JjZVVwZGF0ZSgpfSxyZXNvbHZlPW9uY2UoZnVuY3Rpb24ocmVzKXtmYWN0b3J5LnJlc29sdmVkPWVuc3VyZUN0b3IocmVzLGJhc2VDdG9yKSxzeW5jfHxmb3JjZVJlbmRlcigpfSkscmVqZWN0PW9uY2UoZnVuY3Rpb24ocmVhc29uKXtpc0RlZihmYWN0b3J5LmVycm9yQ29tcCkmJihmYWN0b3J5LmVycm9yPSEwLGZvcmNlUmVuZGVyKCkpfSkscmVzPWZhY3RvcnkocmVzb2x2ZSxyZWplY3QpO3JldHVybiBpc09iamVjdChyZXMpJiYoImZ1bmN0aW9uIj09dHlwZW9mIHJlcy50aGVuP2lzVW5kZWYoZmFjdG9yeS5yZXNvbHZlZCkmJnJlcy50aGVuKHJlc29sdmUscmVqZWN0KTppc0RlZihyZXMuY29tcG9uZW50KSYmImZ1bmN0aW9uIj09dHlwZW9mIHJlcy5jb21wb25lbnQudGhlbiYmKHJlcy5jb21wb25lbnQudGhlbihyZXNvbHZlLHJlamVjdCksaXNEZWYocmVzLmVycm9yKSYmKGZhY3RvcnkuZXJyb3JDb21wPWVuc3VyZUN0b3IocmVzLmVycm9yLGJhc2VDdG9yKSksaXNEZWYocmVzLmxvYWRpbmcpJiYoZmFjdG9yeS5sb2FkaW5nQ29tcD1lbnN1cmVDdG9yKHJlcy5sb2FkaW5nLGJhc2VDdG9yKSwwPT09cmVzLmRlbGF5P2ZhY3RvcnkubG9hZGluZz0hMDpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aXNVbmRlZihmYWN0b3J5LnJlc29sdmVkKSYmaXNVbmRlZihmYWN0b3J5LmVycm9yKSYmKGZhY3RvcnkubG9hZGluZz0hMCxmb3JjZVJlbmRlcigpKX0scmVzLmRlbGF5fHwyMDApKSxpc0RlZihyZXMudGltZW91dCkmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpc1VuZGVmKGZhY3RvcnkucmVzb2x2ZWQpJiZyZWplY3QobnVsbCl9LHJlcy50aW1lb3V0KSkpLHN5bmM9ITEsZmFjdG9yeS5sb2FkaW5nP2ZhY3RvcnkubG9hZGluZ0NvbXA6ZmFjdG9yeS5yZXNvbHZlZH1mYWN0b3J5LmNvbnRleHRzLnB1c2goY29udGV4dCl9KGFzeW5jRmFjdG9yeT1DdG9yLGJhc2VDdG9yLGNvbnRleHQpKSlyZXR1cm4gZnVuY3Rpb24oZmFjdG9yeSxkYXRhLGNvbnRleHQsY2hpbGRyZW4sdGFnKXt2YXIgbm9kZT1jcmVhdGVFbXB0eVZOb2RlKCk7cmV0dXJuIG5vZGUuYXN5bmNGYWN0b3J5PWZhY3Rvcnksbm9kZS5hc3luY01ldGE9e2RhdGE6ZGF0YSxjb250ZXh0OmNvbnRleHQsY2hpbGRyZW46Y2hpbGRyZW4sdGFnOnRhZ30sbm9kZX0oYXN5bmNGYWN0b3J5LGRhdGEsY29udGV4dCxjaGlsZHJlbix0YWcpO2RhdGE9ZGF0YXx8e30scmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyhDdG9yKSxpc0RlZihkYXRhLm1vZGVsKSYmZnVuY3Rpb24ob3B0aW9ucyxkYXRhKXt2YXIgcHJvcD1vcHRpb25zLm1vZGVsJiZvcHRpb25zLm1vZGVsLnByb3B8fCJ2YWx1ZSIsZXZlbnQ9b3B0aW9ucy5tb2RlbCYmb3B0aW9ucy5tb2RlbC5ldmVudHx8ImlucHV0IjsoZGF0YS5wcm9wc3x8KGRhdGEucHJvcHM9e30pKVtwcm9wXT1kYXRhLm1vZGVsLnZhbHVlO3ZhciBvbj1kYXRhLm9ufHwoZGF0YS5vbj17fSk7aXNEZWYob25bZXZlbnRdKT9vbltldmVudF09W2RhdGEubW9kZWwuY2FsbGJhY2tdLmNvbmNhdChvbltldmVudF0pOm9uW2V2ZW50XT1kYXRhLm1vZGVsLmNhbGxiYWNrfShDdG9yLm9wdGlvbnMsZGF0YSk7dmFyIHByb3BzRGF0YT1mdW5jdGlvbihkYXRhLEN0b3IsdGFnKXt2YXIgcHJvcE9wdGlvbnM9Q3Rvci5vcHRpb25zLnByb3BzO2lmKCFpc1VuZGVmKHByb3BPcHRpb25zKSl7dmFyIHJlcz17fSxhdHRycz1kYXRhLmF0dHJzLHByb3BzPWRhdGEucHJvcHM7aWYoaXNEZWYoYXR0cnMpfHxpc0RlZihwcm9wcykpZm9yKHZhciBrZXkgaW4gcHJvcE9wdGlvbnMpe3ZhciBhbHRLZXk9aHlwaGVuYXRlKGtleSk7Y2hlY2tQcm9wKHJlcyxwcm9wcyxrZXksYWx0S2V5LCEwKXx8Y2hlY2tQcm9wKHJlcyxhdHRycyxrZXksYWx0S2V5LCExKX1yZXR1cm4gcmVzfX0oZGF0YSxDdG9yKTtpZihpc1RydWUoQ3Rvci5vcHRpb25zLmZ1bmN0aW9uYWwpKXJldHVybiBmdW5jdGlvbihDdG9yLHByb3BzRGF0YSxkYXRhLGNvbnRleHRWbSxjaGlsZHJlbil7dmFyIG9wdGlvbnM9Q3Rvci5vcHRpb25zLHByb3BzPXt9LHByb3BPcHRpb25zPW9wdGlvbnMucHJvcHM7aWYoaXNEZWYocHJvcE9wdGlvbnMpKWZvcih2YXIga2V5IGluIHByb3BPcHRpb25zKXByb3BzW2tleV09dmFsaWRhdGVQcm9wKGtleSxwcm9wT3B0aW9ucyxwcm9wc0RhdGF8fGVtcHR5T2JqZWN0KTtlbHNlIGlzRGVmKGRhdGEuYXR0cnMpJiZtZXJnZVByb3BzKHByb3BzLGRhdGEuYXR0cnMpLGlzRGVmKGRhdGEucHJvcHMpJiZtZXJnZVByb3BzKHByb3BzLGRhdGEucHJvcHMpO3ZhciByZW5kZXJDb250ZXh0PW5ldyBGdW5jdGlvbmFsUmVuZGVyQ29udGV4dChkYXRhLHByb3BzLGNoaWxkcmVuLGNvbnRleHRWbSxDdG9yKSx2bm9kZT1vcHRpb25zLnJlbmRlci5jYWxsKG51bGwscmVuZGVyQ29udGV4dC5fYyxyZW5kZXJDb250ZXh0KTtpZih2bm9kZSBpbnN0YW5jZW9mIFZOb2RlKXJldHVybiBjbG9uZUFuZE1hcmtGdW5jdGlvbmFsUmVzdWx0KHZub2RlLGRhdGEscmVuZGVyQ29udGV4dC5wYXJlbnQsb3B0aW9ucyk7aWYoQXJyYXkuaXNBcnJheSh2bm9kZSkpe2Zvcih2YXIgdm5vZGVzPW5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlKXx8W10scmVzPW5ldyBBcnJheSh2bm9kZXMubGVuZ3RoKSxpPTA7aTx2bm9kZXMubGVuZ3RoO2krKylyZXNbaV09Y2xvbmVBbmRNYXJrRnVuY3Rpb25hbFJlc3VsdCh2bm9kZXNbaV0sZGF0YSxyZW5kZXJDb250ZXh0LnBhcmVudCxvcHRpb25zKTtyZXR1cm4gcmVzfX0oQ3Rvcixwcm9wc0RhdGEsZGF0YSxjb250ZXh0LGNoaWxkcmVuKTt2YXIgbGlzdGVuZXJzPWRhdGEub247aWYoZGF0YS5vbj1kYXRhLm5hdGl2ZU9uLGlzVHJ1ZShDdG9yLm9wdGlvbnMuYWJzdHJhY3QpKXt2YXIgc2xvdD1kYXRhLnNsb3Q7ZGF0YT17fSxzbG90JiYoZGF0YS5zbG90PXNsb3QpfSFmdW5jdGlvbihkYXRhKXtmb3IodmFyIGhvb2tzPWRhdGEuaG9va3x8KGRhdGEuaG9vaz17fSksaT0wO2k8aG9va3NUb01lcmdlLmxlbmd0aDtpKyspe3ZhciBrZXk9aG9va3NUb01lcmdlW2ldO2hvb2tzW2tleV09Y29tcG9uZW50Vk5vZGVIb29rc1trZXldfX0oZGF0YSk7dmFyIG5hbWU9Q3Rvci5vcHRpb25zLm5hbWV8fHRhZztyZXR1cm4gbmV3IFZOb2RlKCJ2dWUtY29tcG9uZW50LSIrQ3Rvci5jaWQrKG5hbWU/Ii0iK25hbWU6IiIpLGRhdGEsdm9pZCAwLHZvaWQgMCx2b2lkIDAsY29udGV4dCx7Q3RvcjpDdG9yLHByb3BzRGF0YTpwcm9wc0RhdGEsbGlzdGVuZXJzOmxpc3RlbmVycyx0YWc6dGFnLGNoaWxkcmVuOmNoaWxkcmVufSxhc3luY0ZhY3RvcnkpfX19dmFyIFNJTVBMRV9OT1JNQUxJWkU9MSxBTFdBWVNfTk9STUFMSVpFPTI7ZnVuY3Rpb24gY3JlYXRlRWxlbWVudChjb250ZXh0LHRhZyxkYXRhLGNoaWxkcmVuLG5vcm1hbGl6YXRpb25UeXBlLGFsd2F5c05vcm1hbGl6ZSl7cmV0dXJuKEFycmF5LmlzQXJyYXkoZGF0YSl8fGlzUHJpbWl0aXZlKGRhdGEpKSYmKG5vcm1hbGl6YXRpb25UeXBlPWNoaWxkcmVuLGNoaWxkcmVuPWRhdGEsZGF0YT12b2lkIDApLGlzVHJ1ZShhbHdheXNOb3JtYWxpemUpJiYobm9ybWFsaXphdGlvblR5cGU9QUxXQVlTX05PUk1BTElaRSksZnVuY3Rpb24oY29udGV4dCx0YWcsZGF0YSxjaGlsZHJlbixub3JtYWxpemF0aW9uVHlwZSl7aWYoaXNEZWYoZGF0YSkmJmlzRGVmKGRhdGEuX19vYl9fKSlyZXR1cm4gY3JlYXRlRW1wdHlWTm9kZSgpO2lzRGVmKGRhdGEpJiZpc0RlZihkYXRhLmlzKSYmKHRhZz1kYXRhLmlzKTtpZighdGFnKXJldHVybiBjcmVhdGVFbXB0eVZOb2RlKCk7MDtBcnJheS5pc0FycmF5KGNoaWxkcmVuKSYmImZ1bmN0aW9uIj09dHlwZW9mIGNoaWxkcmVuWzBdJiYoKGRhdGE9ZGF0YXx8e30pLnNjb3BlZFNsb3RzPXtkZWZhdWx0OmNoaWxkcmVuWzBdfSxjaGlsZHJlbi5sZW5ndGg9MCk7bm9ybWFsaXphdGlvblR5cGU9PT1BTFdBWVNfTk9STUFMSVpFP2NoaWxkcmVuPW5vcm1hbGl6ZUNoaWxkcmVuKGNoaWxkcmVuKTpub3JtYWxpemF0aW9uVHlwZT09PVNJTVBMRV9OT1JNQUxJWkUmJihjaGlsZHJlbj1mdW5jdGlvbihjaGlsZHJlbil7Zm9yKHZhciBpPTA7aTxjaGlsZHJlbi5sZW5ndGg7aSsrKWlmKEFycmF5LmlzQXJyYXkoY2hpbGRyZW5baV0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGNoaWxkcmVuKTtyZXR1cm4gY2hpbGRyZW59KGNoaWxkcmVuKSk7dmFyIHZub2RlLG5zO2lmKCJzdHJpbmciPT10eXBlb2YgdGFnKXt2YXIgQ3Rvcjtucz1jb250ZXh0LiR2bm9kZSYmY29udGV4dC4kdm5vZGUubnN8fGNvbmZpZy5nZXRUYWdOYW1lc3BhY2UodGFnKSx2bm9kZT1jb25maWcuaXNSZXNlcnZlZFRhZyh0YWcpP25ldyBWTm9kZShjb25maWcucGFyc2VQbGF0Zm9ybVRhZ05hbWUodGFnKSxkYXRhLGNoaWxkcmVuLHZvaWQgMCx2b2lkIDAsY29udGV4dCk6aXNEZWYoQ3Rvcj1yZXNvbHZlQXNzZXQoY29udGV4dC4kb3B0aW9ucywiY29tcG9uZW50cyIsdGFnKSk/Y3JlYXRlQ29tcG9uZW50KEN0b3IsZGF0YSxjb250ZXh0LGNoaWxkcmVuLHRhZyk6bmV3IFZOb2RlKHRhZyxkYXRhLGNoaWxkcmVuLHZvaWQgMCx2b2lkIDAsY29udGV4dCl9ZWxzZSB2bm9kZT1jcmVhdGVDb21wb25lbnQodGFnLGRhdGEsY29udGV4dCxjaGlsZHJlbik7cmV0dXJuIEFycmF5LmlzQXJyYXkodm5vZGUpP3Zub2RlOmlzRGVmKHZub2RlKT8oaXNEZWYobnMpJiZmdW5jdGlvbiBhcHBseU5TKHZub2RlLG5zLGZvcmNlKXt2bm9kZS5ucz1uczsiZm9yZWlnbk9iamVjdCI9PT12bm9kZS50YWcmJihmb3JjZT0hKG5zPXZvaWQgMCkpO2lmKGlzRGVmKHZub2RlLmNoaWxkcmVuKSlmb3IodmFyIGk9MCxsPXZub2RlLmNoaWxkcmVuLmxlbmd0aDtpPGw7aSsrKXt2YXIgY2hpbGQ9dm5vZGUuY2hpbGRyZW5baV07aXNEZWYoY2hpbGQudGFnKSYmKGlzVW5kZWYoY2hpbGQubnMpfHxpc1RydWUoZm9yY2UpJiYic3ZnIiE9PWNoaWxkLnRhZykmJmFwcGx5TlMoY2hpbGQsbnMsZm9yY2UpfX0odm5vZGUsbnMpLGlzRGVmKGRhdGEpJiZmdW5jdGlvbihkYXRhKXtpc09iamVjdChkYXRhLnN0eWxlKSYmdHJhdmVyc2UoZGF0YS5zdHlsZSk7aXNPYmplY3QoZGF0YS5jbGFzcykmJnRyYXZlcnNlKGRhdGEuY2xhc3MpfShkYXRhKSx2bm9kZSk6Y3JlYXRlRW1wdHlWTm9kZSgpfShjb250ZXh0LHRhZyxkYXRhLGNoaWxkcmVuLG5vcm1hbGl6YXRpb25UeXBlKX12YXIgdWlkJDM9MDtmdW5jdGlvbiByZXNvbHZlQ29uc3RydWN0b3JPcHRpb25zKEN0b3Ipe3ZhciBvcHRpb25zPUN0b3Iub3B0aW9ucztpZihDdG9yLnN1cGVyKXt2YXIgc3VwZXJPcHRpb25zPXJlc29sdmVDb25zdHJ1Y3Rvck9wdGlvbnMoQ3Rvci5zdXBlcik7aWYoc3VwZXJPcHRpb25zIT09Q3Rvci5zdXBlck9wdGlvbnMpe0N0b3Iuc3VwZXJPcHRpb25zPXN1cGVyT3B0aW9uczt2YXIgbW9kaWZpZWRPcHRpb25zPWZ1bmN0aW9uKEN0b3Ipe3ZhciBtb2RpZmllZCxsYXRlc3Q9Q3Rvci5vcHRpb25zLGV4dGVuZGVkPUN0b3IuZXh0ZW5kT3B0aW9ucyxzZWFsZWQ9Q3Rvci5zZWFsZWRPcHRpb25zO2Zvcih2YXIga2V5IGluIGxhdGVzdClsYXRlc3Rba2V5XSE9PXNlYWxlZFtrZXldJiYobW9kaWZpZWR8fChtb2RpZmllZD17fSksbW9kaWZpZWRba2V5XT1kZWR1cGUobGF0ZXN0W2tleV0sZXh0ZW5kZWRba2V5XSxzZWFsZWRba2V5XSkpO3JldHVybiBtb2RpZmllZH0oQ3Rvcik7bW9kaWZpZWRPcHRpb25zJiZleHRlbmQoQ3Rvci5leHRlbmRPcHRpb25zLG1vZGlmaWVkT3B0aW9ucyksKG9wdGlvbnM9Q3Rvci5vcHRpb25zPW1lcmdlT3B0aW9ucyhzdXBlck9wdGlvbnMsQ3Rvci5leHRlbmRPcHRpb25zKSkubmFtZSYmKG9wdGlvbnMuY29tcG9uZW50c1tvcHRpb25zLm5hbWVdPUN0b3IpfX1yZXR1cm4gb3B0aW9uc31mdW5jdGlvbiBkZWR1cGUobGF0ZXN0LGV4dGVuZGVkLHNlYWxlZCl7aWYoQXJyYXkuaXNBcnJheShsYXRlc3QpKXt2YXIgcmVzPVtdO3NlYWxlZD1BcnJheS5pc0FycmF5KHNlYWxlZCk/c2VhbGVkOltzZWFsZWRdLGV4dGVuZGVkPUFycmF5LmlzQXJyYXkoZXh0ZW5kZWQpP2V4dGVuZGVkOltleHRlbmRlZF07Zm9yKHZhciBpPTA7aTxsYXRlc3QubGVuZ3RoO2krKykoMDw9ZXh0ZW5kZWQuaW5kZXhPZihsYXRlc3RbaV0pfHxzZWFsZWQuaW5kZXhPZihsYXRlc3RbaV0pPDApJiZyZXMucHVzaChsYXRlc3RbaV0pO3JldHVybiByZXN9cmV0dXJuIGxhdGVzdH1mdW5jdGlvbiBWdWUob3B0aW9ucyl7dGhpcy5faW5pdChvcHRpb25zKX1mdW5jdGlvbiBpbml0RXh0ZW5kKFZ1ZSl7VnVlLmNpZD0wO3ZhciBjaWQ9MTtWdWUuZXh0ZW5kPWZ1bmN0aW9uKGV4dGVuZE9wdGlvbnMpe2V4dGVuZE9wdGlvbnM9ZXh0ZW5kT3B0aW9uc3x8e307dmFyIFN1cGVyPXRoaXMsU3VwZXJJZD1TdXBlci5jaWQsY2FjaGVkQ3RvcnM9ZXh0ZW5kT3B0aW9ucy5fQ3Rvcnx8KGV4dGVuZE9wdGlvbnMuX0N0b3I9e30pO2lmKGNhY2hlZEN0b3JzW1N1cGVySWRdKXJldHVybiBjYWNoZWRDdG9yc1tTdXBlcklkXTt2YXIgbmFtZT1leHRlbmRPcHRpb25zLm5hbWV8fFN1cGVyLm9wdGlvbnMubmFtZTt2YXIgU3ViPWZ1bmN0aW9uKG9wdGlvbnMpe3RoaXMuX2luaXQob3B0aW9ucyl9O3JldHVybigoU3ViLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPVN1YikuY2lkPWNpZCsrLFN1Yi5vcHRpb25zPW1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLGV4dGVuZE9wdGlvbnMpLFN1Yi5zdXBlcj1TdXBlcixTdWIub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oQ29tcCl7dmFyIHByb3BzPUNvbXAub3B0aW9ucy5wcm9wcztmb3IodmFyIGtleSBpbiBwcm9wcylwcm94eShDb21wLnByb3RvdHlwZSwiX3Byb3BzIixrZXkpfShTdWIpLFN1Yi5vcHRpb25zLmNvbXB1dGVkJiZmdW5jdGlvbihDb21wKXt2YXIgY29tcHV0ZWQ9Q29tcC5vcHRpb25zLmNvbXB1dGVkO2Zvcih2YXIga2V5IGluIGNvbXB1dGVkKWRlZmluZUNvbXB1dGVkKENvbXAucHJvdG90eXBlLGtleSxjb21wdXRlZFtrZXldKX0oU3ViKSxTdWIuZXh0ZW5kPVN1cGVyLmV4dGVuZCxTdWIubWl4aW49U3VwZXIubWl4aW4sU3ViLnVzZT1TdXBlci51c2UsQVNTRVRfVFlQRVMuZm9yRWFjaChmdW5jdGlvbih0eXBlKXtTdWJbdHlwZV09U3VwZXJbdHlwZV19KSxuYW1lJiYoU3ViLm9wdGlvbnMuY29tcG9uZW50c1tuYW1lXT1TdWIpLFN1Yi5zdXBlck9wdGlvbnM9U3VwZXIub3B0aW9ucyxTdWIuZXh0ZW5kT3B0aW9ucz1leHRlbmRPcHRpb25zLFN1Yi5zZWFsZWRPcHRpb25zPWV4dGVuZCh7fSxTdWIub3B0aW9ucyksY2FjaGVkQ3RvcnNbU3VwZXJJZF09U3VifX1mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKG9wdHMpe3JldHVybiBvcHRzJiYob3B0cy5DdG9yLm9wdGlvbnMubmFtZXx8b3B0cy50YWcpfWZ1bmN0aW9uIG1hdGNoZXMocGF0dGVybixuYW1lKXtyZXR1cm4gQXJyYXkuaXNBcnJheShwYXR0ZXJuKT8tMTxwYXR0ZXJuLmluZGV4T2YobmFtZSk6InN0cmluZyI9PXR5cGVvZiBwYXR0ZXJuPy0xPHBhdHRlcm4uc3BsaXQoIiwiKS5pbmRleE9mKG5hbWUpOiEhaXNSZWdFeHAocGF0dGVybikmJnBhdHRlcm4udGVzdChuYW1lKX1mdW5jdGlvbiBwcnVuZUNhY2hlKGtlZXBBbGl2ZUluc3RhbmNlLGZpbHRlcil7dmFyIGNhY2hlPWtlZXBBbGl2ZUluc3RhbmNlLmNhY2hlLGtleXM9a2VlcEFsaXZlSW5zdGFuY2Uua2V5cyxfdm5vZGU9a2VlcEFsaXZlSW5zdGFuY2UuX3Zub2RlO2Zvcih2YXIga2V5IGluIGNhY2hlKXt2YXIgY2FjaGVkTm9kZT1jYWNoZVtrZXldO2lmKGNhY2hlZE5vZGUpe3ZhciBuYW1lPWdldENvbXBvbmVudE5hbWUoY2FjaGVkTm9kZS5jb21wb25lbnRPcHRpb25zKTtuYW1lJiYhZmlsdGVyKG5hbWUpJiZwcnVuZUNhY2hlRW50cnkoY2FjaGUsa2V5LGtleXMsX3Zub2RlKX19fWZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeShjYWNoZSxrZXksa2V5cyxjdXJyZW50KXt2YXIgY2FjaGVkJCQxPWNhY2hlW2tleV07IWNhY2hlZCQkMXx8Y3VycmVudCYmY2FjaGVkJCQxLnRhZz09PWN1cnJlbnQudGFnfHxjYWNoZWQkJDEuY29tcG9uZW50SW5zdGFuY2UuJGRlc3Ryb3koKSxjYWNoZVtrZXldPW51bGwscmVtb3ZlKGtleXMsa2V5KX0hZnVuY3Rpb24oVnVlKXtWdWUucHJvdG90eXBlLl9pbml0PWZ1bmN0aW9uKG9wdGlvbnMpe3ZhciB2bT10aGlzO3ZtLl91aWQ9dWlkJDMrKyx2bS5faXNWdWU9ITAsb3B0aW9ucyYmb3B0aW9ucy5faXNDb21wb25lbnQ/ZnVuY3Rpb24odm0sb3B0aW9ucyl7dmFyIG9wdHM9dm0uJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZSh2bS5jb25zdHJ1Y3Rvci5vcHRpb25zKSxwYXJlbnRWbm9kZT1vcHRpb25zLl9wYXJlbnRWbm9kZTtvcHRzLnBhcmVudD1vcHRpb25zLnBhcmVudCxvcHRzLl9wYXJlbnRWbm9kZT1wYXJlbnRWbm9kZSxvcHRzLl9wYXJlbnRFbG09b3B0aW9ucy5fcGFyZW50RWxtLG9wdHMuX3JlZkVsbT1vcHRpb25zLl9yZWZFbG07dmFyIHZub2RlQ29tcG9uZW50T3B0aW9ucz1wYXJlbnRWbm9kZS5jb21wb25lbnRPcHRpb25zO29wdHMucHJvcHNEYXRhPXZub2RlQ29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGEsb3B0cy5fcGFyZW50TGlzdGVuZXJzPXZub2RlQ29tcG9uZW50T3B0aW9ucy5saXN0ZW5lcnMsb3B0cy5fcmVuZGVyQ2hpbGRyZW49dm5vZGVDb21wb25lbnRPcHRpb25zLmNoaWxkcmVuLG9wdHMuX2NvbXBvbmVudFRhZz12bm9kZUNvbXBvbmVudE9wdGlvbnMudGFnLG9wdGlvbnMucmVuZGVyJiYob3B0cy5yZW5kZXI9b3B0aW9ucy5yZW5kZXIsb3B0cy5zdGF0aWNSZW5kZXJGbnM9b3B0aW9ucy5zdGF0aWNSZW5kZXJGbnMpfSh2bSxvcHRpb25zKTp2bS4kb3B0aW9ucz1tZXJnZU9wdGlvbnMocmVzb2x2ZUNvbnN0cnVjdG9yT3B0aW9ucyh2bS5jb25zdHJ1Y3Rvciksb3B0aW9uc3x8e30sdm0pLGZ1bmN0aW9uKHZtKXt2YXIgb3B0aW9ucz12bS4kb3B0aW9ucyxwYXJlbnQ9b3B0aW9ucy5wYXJlbnQ7aWYocGFyZW50JiYhb3B0aW9ucy5hYnN0cmFjdCl7Zm9yKDtwYXJlbnQuJG9wdGlvbnMuYWJzdHJhY3QmJnBhcmVudC4kcGFyZW50OylwYXJlbnQ9cGFyZW50LiRwYXJlbnQ7cGFyZW50LiRjaGlsZHJlbi5wdXNoKHZtKX12bS4kcGFyZW50PXBhcmVudCx2bS4kcm9vdD1wYXJlbnQ/cGFyZW50LiRyb290OnZtLHZtLiRjaGlsZHJlbj1bXSx2bS4kcmVmcz17fSx2bS5fd2F0Y2hlcj1udWxsLHZtLl9pbmFjdGl2ZT1udWxsLHZtLl9kaXJlY3RJbmFjdGl2ZT0hMSx2bS5faXNNb3VudGVkPSExLHZtLl9pc0Rlc3Ryb3llZD0hMSx2bS5faXNCZWluZ0Rlc3Ryb3llZD0hMX0oKHZtLl9yZW5kZXJQcm94eT12bSkuX3NlbGY9dm0pLGZ1bmN0aW9uKHZtKXt2bS5fZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCksdm0uX2hhc0hvb2tFdmVudD0hMTt2YXIgbGlzdGVuZXJzPXZtLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7bGlzdGVuZXJzJiZ1cGRhdGVDb21wb25lbnRMaXN0ZW5lcnModm0sbGlzdGVuZXJzKX0odm0pLGZ1bmN0aW9uKHZtKXt2bS5fdm5vZGU9bnVsbCx2bS5fc3RhdGljVHJlZXM9bnVsbDt2YXIgb3B0aW9ucz12bS4kb3B0aW9ucyxwYXJlbnRWbm9kZT12bS4kdm5vZGU9b3B0aW9ucy5fcGFyZW50Vm5vZGUscmVuZGVyQ29udGV4dD1wYXJlbnRWbm9kZSYmcGFyZW50Vm5vZGUuY29udGV4dDt2bS4kc2xvdHM9cmVzb2x2ZVNsb3RzKG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuLHJlbmRlckNvbnRleHQpLHZtLiRzY29wZWRTbG90cz1lbXB0eU9iamVjdCx2bS5fYz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gY3JlYXRlRWxlbWVudCh2bSxhLGIsYyxkLCExKX0sdm0uJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGNyZWF0ZUVsZW1lbnQodm0sYSxiLGMsZCwhMCl9O3ZhciBwYXJlbnREYXRhPXBhcmVudFZub2RlJiZwYXJlbnRWbm9kZS5kYXRhO2RlZmluZVJlYWN0aXZlKHZtLCIkYXR0cnMiLHBhcmVudERhdGEmJnBhcmVudERhdGEuYXR0cnN8fGVtcHR5T2JqZWN0LG51bGwsITApLGRlZmluZVJlYWN0aXZlKHZtLCIkbGlzdGVuZXJzIixvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnN8fGVtcHR5T2JqZWN0LG51bGwsITApfSh2bSksY2FsbEhvb2sodm0sImJlZm9yZUNyZWF0ZSIpLGZ1bmN0aW9uKHZtKXt2YXIgcmVzdWx0PXJlc29sdmVJbmplY3Qodm0uJG9wdGlvbnMuaW5qZWN0LHZtKTtyZXN1bHQmJih0b2dnbGVPYnNlcnZpbmcoITEpLE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbihrZXkpe2RlZmluZVJlYWN0aXZlKHZtLGtleSxyZXN1bHRba2V5XSl9KSx0b2dnbGVPYnNlcnZpbmcoITApKX0odm0pLGluaXRTdGF0ZSh2bSksZnVuY3Rpb24odm0pe3ZhciBwcm92aWRlPXZtLiRvcHRpb25zLnByb3ZpZGU7cHJvdmlkZSYmKHZtLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgcHJvdmlkZT9wcm92aWRlLmNhbGwodm0pOnByb3ZpZGUpfSh2bSksY2FsbEhvb2sodm0sImNyZWF0ZWQiKSx2bS4kb3B0aW9ucy5lbCYmdm0uJG1vdW50KHZtLiRvcHRpb25zLmVsKX19KFZ1ZSksZnVuY3Rpb24oVnVlKXt2YXIgZGF0YURlZj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxwcm9wc0RlZj17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BzfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsIiRkYXRhIixkYXRhRGVmKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwiJHByb3BzIixwcm9wc0RlZiksVnVlLnByb3RvdHlwZS4kc2V0PXNldCxWdWUucHJvdG90eXBlLiRkZWxldGU9ZGVsLFZ1ZS5wcm90b3R5cGUuJHdhdGNoPWZ1bmN0aW9uKGV4cE9yRm4sY2Isb3B0aW9ucyl7aWYoaXNQbGFpbk9iamVjdChjYikpcmV0dXJuIGNyZWF0ZVdhdGNoZXIodGhpcyxleHBPckZuLGNiLG9wdGlvbnMpOyhvcHRpb25zPW9wdGlvbnN8fHt9KS51c2VyPSEwO3ZhciB3YXRjaGVyPW5ldyBXYXRjaGVyKHRoaXMsZXhwT3JGbixjYixvcHRpb25zKTtyZXR1cm4gb3B0aW9ucy5pbW1lZGlhdGUmJmNiLmNhbGwodGhpcyx3YXRjaGVyLnZhbHVlKSxmdW5jdGlvbigpe3dhdGNoZXIudGVhcmRvd24oKX19fShWdWUpLGZ1bmN0aW9uKFZ1ZSl7dmFyIGhvb2tSRT0vXmhvb2s6LztWdWUucHJvdG90eXBlLiRvbj1mdW5jdGlvbihldmVudCxmbil7aWYoQXJyYXkuaXNBcnJheShldmVudCkpZm9yKHZhciBpPTAsbD1ldmVudC5sZW5ndGg7aTxsO2krKyl0aGlzLiRvbihldmVudFtpXSxmbik7ZWxzZSh0aGlzLl9ldmVudHNbZXZlbnRdfHwodGhpcy5fZXZlbnRzW2V2ZW50XT1bXSkpLnB1c2goZm4pLGhvb2tSRS50ZXN0KGV2ZW50KSYmKHRoaXMuX2hhc0hvb2tFdmVudD0hMCk7cmV0dXJuIHRoaXN9LFZ1ZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZXZlbnQsZm4pe3ZhciB2bT10aGlzO2Z1bmN0aW9uIG9uKCl7dm0uJG9mZihldmVudCxvbiksZm4uYXBwbHkodm0sYXJndW1lbnRzKX1yZXR1cm4gb24uZm49Zm4sdm0uJG9uKGV2ZW50LG9uKSx2bX0sVnVlLnByb3RvdHlwZS4kb2ZmPWZ1bmN0aW9uKGV2ZW50LGZuKXt2YXIgdm09dGhpcztpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm0uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHZtO2lmKEFycmF5LmlzQXJyYXkoZXZlbnQpKXtmb3IodmFyIGk9MCxsPWV2ZW50Lmxlbmd0aDtpPGw7aSsrKXRoaXMuJG9mZihldmVudFtpXSxmbik7cmV0dXJuIHZtfXZhciBjYnM9dm0uX2V2ZW50c1tldmVudF07aWYoIWNicylyZXR1cm4gdm07aWYoIWZuKXJldHVybiB2bS5fZXZlbnRzW2V2ZW50XT1udWxsLHZtO2lmKGZuKWZvcih2YXIgY2IsaSQxPWNicy5sZW5ndGg7aSQxLS07KWlmKChjYj1jYnNbaSQxXSk9PT1mbnx8Y2IuZm49PT1mbil7Y2JzLnNwbGljZShpJDEsMSk7YnJlYWt9cmV0dXJuIHZtfSxWdWUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGV2ZW50KXt2YXIgdm09dGhpcyxjYnM9dm0uX2V2ZW50c1tldmVudF07aWYoY2JzKXtjYnM9MTxjYnMubGVuZ3RoP3RvQXJyYXkoY2JzKTpjYnM7Zm9yKHZhciBhcmdzPXRvQXJyYXkoYXJndW1lbnRzLDEpLGk9MCxsPWNicy5sZW5ndGg7aTxsO2krKyl0cnl7Y2JzW2ldLmFwcGx5KHZtLGFyZ3MpfWNhdGNoKGUpe2hhbmRsZUVycm9yKGUsdm0sJ2V2ZW50IGhhbmRsZXIgZm9yICInK2V2ZW50KyciJyl9fXJldHVybiB2bX19KFZ1ZSksZnVuY3Rpb24oVnVlKXtWdWUucHJvdG90eXBlLl91cGRhdGU9ZnVuY3Rpb24odm5vZGUsaHlkcmF0aW5nKXt2YXIgdm09dGhpczt2bS5faXNNb3VudGVkJiZjYWxsSG9vayh2bSwiYmVmb3JlVXBkYXRlIik7dmFyIHByZXZFbD12bS4kZWwscHJldlZub2RlPXZtLl92bm9kZSxwcmV2QWN0aXZlSW5zdGFuY2U9YWN0aXZlSW5zdGFuY2U7KGFjdGl2ZUluc3RhbmNlPXZtKS5fdm5vZGU9dm5vZGUscHJldlZub2RlP3ZtLiRlbD12bS5fX3BhdGNoX18ocHJldlZub2RlLHZub2RlKToodm0uJGVsPXZtLl9fcGF0Y2hfXyh2bS4kZWwsdm5vZGUsaHlkcmF0aW5nLCExLHZtLiRvcHRpb25zLl9wYXJlbnRFbG0sdm0uJG9wdGlvbnMuX3JlZkVsbSksdm0uJG9wdGlvbnMuX3BhcmVudEVsbT12bS4kb3B0aW9ucy5fcmVmRWxtPW51bGwpLGFjdGl2ZUluc3RhbmNlPXByZXZBY3RpdmVJbnN0YW5jZSxwcmV2RWwmJihwcmV2RWwuX192dWVfXz1udWxsKSx2bS4kZWwmJih2bS4kZWwuX192dWVfXz12bSksdm0uJHZub2RlJiZ2bS4kcGFyZW50JiZ2bS4kdm5vZGU9PT12bS4kcGFyZW50Ll92bm9kZSYmKHZtLiRwYXJlbnQuJGVsPXZtLiRlbCl9LFZ1ZS5wcm90b3R5cGUuJGZvcmNlVXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5fd2F0Y2hlciYmdGhpcy5fd2F0Y2hlci51cGRhdGUoKX0sVnVlLnByb3RvdHlwZS4kZGVzdHJveT1mdW5jdGlvbigpe3ZhciB2bT10aGlzO2lmKCF2bS5faXNCZWluZ0Rlc3Ryb3llZCl7Y2FsbEhvb2sodm0sImJlZm9yZURlc3Ryb3kiKSx2bS5faXNCZWluZ0Rlc3Ryb3llZD0hMDt2YXIgcGFyZW50PXZtLiRwYXJlbnQ7IXBhcmVudHx8cGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkfHx2bS4kb3B0aW9ucy5hYnN0cmFjdHx8cmVtb3ZlKHBhcmVudC4kY2hpbGRyZW4sdm0pLHZtLl93YXRjaGVyJiZ2bS5fd2F0Y2hlci50ZWFyZG93bigpO2Zvcih2YXIgaT12bS5fd2F0Y2hlcnMubGVuZ3RoO2ktLTspdm0uX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7dm0uX2RhdGEuX19vYl9fJiZ2bS5fZGF0YS5fX29iX18udm1Db3VudC0tLHZtLl9pc0Rlc3Ryb3llZD0hMCx2bS5fX3BhdGNoX18odm0uX3Zub2RlLG51bGwpLGNhbGxIb29rKHZtLCJkZXN0cm95ZWQiKSx2bS4kb2ZmKCksdm0uJGVsJiYodm0uJGVsLl9fdnVlX189bnVsbCksdm0uJHZub2RlJiYodm0uJHZub2RlLnBhcmVudD1udWxsKX19fShWdWUpLGZ1bmN0aW9uKFZ1ZSl7aW5zdGFsbFJlbmRlckhlbHBlcnMoVnVlLnByb3RvdHlwZSksVnVlLnByb3RvdHlwZS4kbmV4dFRpY2s9ZnVuY3Rpb24oZm4pe3JldHVybiBuZXh0VGljayhmbix0aGlzKX0sVnVlLnByb3RvdHlwZS5fcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHZub2RlLHZtPXRoaXMscmVmPXZtLiRvcHRpb25zLHJlbmRlcj1yZWYucmVuZGVyLF9wYXJlbnRWbm9kZT1yZWYuX3BhcmVudFZub2RlO19wYXJlbnRWbm9kZSYmKHZtLiRzY29wZWRTbG90cz1fcGFyZW50Vm5vZGUuZGF0YS5zY29wZWRTbG90c3x8ZW1wdHlPYmplY3QpLHZtLiR2bm9kZT1fcGFyZW50Vm5vZGU7dHJ5e3Zub2RlPXJlbmRlci5jYWxsKHZtLl9yZW5kZXJQcm94eSx2bS4kY3JlYXRlRWxlbWVudCl9Y2F0Y2goZSl7aGFuZGxlRXJyb3IoZSx2bSwicmVuZGVyIiksdm5vZGU9dm0uX3Zub2RlfXJldHVybiB2bm9kZSBpbnN0YW5jZW9mIFZOb2RlfHwodm5vZGU9Y3JlYXRlRW1wdHlWTm9kZSgpKSx2bm9kZS5wYXJlbnQ9X3BhcmVudFZub2RlLHZub2RlfX0oVnVlKTt2YXIgcGF0dGVyblR5cGVzPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxidWlsdEluQ29tcG9uZW50cz17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpwYXR0ZXJuVHlwZXMsZXhjbHVkZTpwYXR0ZXJuVHlwZXMsbWF4OltTdHJpbmcsTnVtYmVyXX0sY3JlYXRlZDpmdW5jdGlvbigpe3RoaXMuY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmtleXM9W119LGRlc3Ryb3llZDpmdW5jdGlvbigpe2Zvcih2YXIga2V5IGluIHRoaXMuY2FjaGUpcHJ1bmVDYWNoZUVudHJ5KHRoaXMuY2FjaGUsa2V5LHRoaXMua2V5cyl9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgdGhpcyQxPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHZhbCl7cHJ1bmVDYWNoZSh0aGlzJDEsZnVuY3Rpb24obmFtZSl7cmV0dXJuIG1hdGNoZXModmFsLG5hbWUpfSl9KSx0aGlzLiR3YXRjaCgiZXhjbHVkZSIsZnVuY3Rpb24odmFsKXtwcnVuZUNhY2hlKHRoaXMkMSxmdW5jdGlvbihuYW1lKXtyZXR1cm4hbWF0Y2hlcyh2YWwsbmFtZSl9KX0pfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgc2xvdD10aGlzLiRzbG90cy5kZWZhdWx0LHZub2RlPWdldEZpcnN0Q29tcG9uZW50Q2hpbGQoc2xvdCksY29tcG9uZW50T3B0aW9ucz12bm9kZSYmdm5vZGUuY29tcG9uZW50T3B0aW9ucztpZihjb21wb25lbnRPcHRpb25zKXt2YXIgbmFtZT1nZXRDb21wb25lbnROYW1lKGNvbXBvbmVudE9wdGlvbnMpLGluY2x1ZGU9dGhpcy5pbmNsdWRlLGV4Y2x1ZGU9dGhpcy5leGNsdWRlO2lmKGluY2x1ZGUmJighbmFtZXx8IW1hdGNoZXMoaW5jbHVkZSxuYW1lKSl8fGV4Y2x1ZGUmJm5hbWUmJm1hdGNoZXMoZXhjbHVkZSxuYW1lKSlyZXR1cm4gdm5vZGU7dmFyIGNhY2hlPXRoaXMuY2FjaGUsa2V5cz10aGlzLmtleXMsa2V5PW51bGw9PXZub2RlLmtleT9jb21wb25lbnRPcHRpb25zLkN0b3IuY2lkKyhjb21wb25lbnRPcHRpb25zLnRhZz8iOjoiK2NvbXBvbmVudE9wdGlvbnMudGFnOiIiKTp2bm9kZS5rZXk7Y2FjaGVba2V5XT8odm5vZGUuY29tcG9uZW50SW5zdGFuY2U9Y2FjaGVba2V5XS5jb21wb25lbnRJbnN0YW5jZSxyZW1vdmUoa2V5cyxrZXkpLGtleXMucHVzaChrZXkpKTooY2FjaGVba2V5XT12bm9kZSxrZXlzLnB1c2goa2V5KSx0aGlzLm1heCYma2V5cy5sZW5ndGg+cGFyc2VJbnQodGhpcy5tYXgpJiZwcnVuZUNhY2hlRW50cnkoY2FjaGUsa2V5c1swXSxrZXlzLHRoaXMuX3Zub2RlKSksdm5vZGUuZGF0YS5rZWVwQWxpdmU9ITB9cmV0dXJuIHZub2RlfHxzbG90JiZzbG90WzBdfX19OyFmdW5jdGlvbihWdWUpe3ZhciBjb25maWdEZWY9e2dldDpmdW5jdGlvbigpe3JldHVybiBjb25maWd9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLCJjb25maWciLGNvbmZpZ0RlZiksVnVlLnV0aWw9e3dhcm46d2FybixleHRlbmQ6ZXh0ZW5kLG1lcmdlT3B0aW9uczptZXJnZU9wdGlvbnMsZGVmaW5lUmVhY3RpdmU6ZGVmaW5lUmVhY3RpdmV9LFZ1ZS5zZXQ9c2V0LFZ1ZS5kZWxldGU9ZGVsLFZ1ZS5uZXh0VGljaz1uZXh0VGljayxWdWUub3B0aW9ucz1PYmplY3QuY3JlYXRlKG51bGwpLEFTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24odHlwZSl7VnVlLm9wdGlvbnNbdHlwZSsicyJdPU9iamVjdC5jcmVhdGUobnVsbCl9KSxleHRlbmQoKFZ1ZS5vcHRpb25zLl9iYXNlPVZ1ZSkub3B0aW9ucy5jb21wb25lbnRzLGJ1aWx0SW5Db21wb25lbnRzKSxmdW5jdGlvbihWdWUpe1Z1ZS51c2U9ZnVuY3Rpb24ocGx1Z2luKXt2YXIgaW5zdGFsbGVkUGx1Z2lucz10aGlzLl9pbnN0YWxsZWRQbHVnaW5zfHwodGhpcy5faW5zdGFsbGVkUGx1Z2lucz1bXSk7aWYoLTE8aW5zdGFsbGVkUGx1Z2lucy5pbmRleE9mKHBsdWdpbikpcmV0dXJuIHRoaXM7dmFyIGFyZ3M9dG9BcnJheShhcmd1bWVudHMsMSk7cmV0dXJuIGFyZ3MudW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgcGx1Z2luLmluc3RhbGw/cGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLGFyZ3MpOiJmdW5jdGlvbiI9PXR5cGVvZiBwbHVnaW4mJnBsdWdpbi5hcHBseShudWxsLGFyZ3MpLGluc3RhbGxlZFBsdWdpbnMucHVzaChwbHVnaW4pLHRoaXN9fShWdWUpLGZ1bmN0aW9uKFZ1ZSl7VnVlLm1peGluPWZ1bmN0aW9uKG1peGluKXtyZXR1cm4gdGhpcy5vcHRpb25zPW1lcmdlT3B0aW9ucyh0aGlzLm9wdGlvbnMsbWl4aW4pLHRoaXN9fShWdWUpLGluaXRFeHRlbmQoVnVlKSxmdW5jdGlvbihWdWUpe0FTU0VUX1RZUEVTLmZvckVhY2goZnVuY3Rpb24odHlwZSl7VnVlW3R5cGVdPWZ1bmN0aW9uKGlkLGRlZmluaXRpb24pe3JldHVybiBkZWZpbml0aW9uPygiY29tcG9uZW50Ij09PXR5cGUmJmlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikmJihkZWZpbml0aW9uLm5hbWU9ZGVmaW5pdGlvbi5uYW1lfHxpZCxkZWZpbml0aW9uPXRoaXMub3B0aW9ucy5fYmFzZS5leHRlbmQoZGVmaW5pdGlvbikpLCJkaXJlY3RpdmUiPT09dHlwZSYmImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluaXRpb24mJihkZWZpbml0aW9uPXtiaW5kOmRlZmluaXRpb24sdXBkYXRlOmRlZmluaXRpb259KSx0aGlzLm9wdGlvbnNbdHlwZSsicyJdW2lkXT1kZWZpbml0aW9uKTp0aGlzLm9wdGlvbnNbdHlwZSsicyJdW2lkXX19KX0oVnVlKX0oVnVlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwiJGlzU2VydmVyIix7Z2V0OmlzU2VydmVyUmVuZGVyaW5nfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUsIkZ1bmN0aW9uYWxSZW5kZXJDb250ZXh0Iix7dmFsdWU6RnVuY3Rpb25hbFJlbmRlckNvbnRleHR9KSxWdWUudmVyc2lvbj0iMi41LjE3Ijt2YXIgaXNSZXNlcnZlZEF0dHI9bWFrZU1hcCgic3R5bGUsY2xhc3MiKSxhY2NlcHRWYWx1ZT1tYWtlTWFwKCJpbnB1dCx0ZXh0YXJlYSxvcHRpb24sc2VsZWN0LHByb2dyZXNzIiksaXNFbnVtZXJhdGVkQXR0cj1tYWtlTWFwKCJjb250ZW50ZWRpdGFibGUsZHJhZ2dhYmxlLHNwZWxsY2hlY2siKSxpc0Jvb2xlYW5BdHRyPW1ha2VNYXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSx4bGlua05TPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIixpc1hsaW5rPWZ1bmN0aW9uKG5hbWUpe3JldHVybiI6Ij09PW5hbWUuY2hhckF0KDUpJiYieGxpbmsiPT09bmFtZS5zbGljZSgwLDUpfSxnZXRYbGlua1Byb3A9ZnVuY3Rpb24obmFtZSl7cmV0dXJuIGlzWGxpbmsobmFtZSk/bmFtZS5zbGljZSg2LG5hbWUubGVuZ3RoKToiIn0saXNGYWxzeUF0dHJWYWx1ZT1mdW5jdGlvbih2YWwpe3JldHVybiBudWxsPT12YWx8fCExPT09dmFsfTtmdW5jdGlvbiBnZW5DbGFzc0ZvclZub2RlKHZub2RlKXtmb3IodmFyIGRhdGE9dm5vZGUuZGF0YSxwYXJlbnROb2RlPXZub2RlLGNoaWxkTm9kZT12bm9kZTtpc0RlZihjaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UpOykoY2hpbGROb2RlPWNoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZjaGlsZE5vZGUuZGF0YSYmKGRhdGE9bWVyZ2VDbGFzc0RhdGEoY2hpbGROb2RlLmRhdGEsZGF0YSkpO2Zvcig7aXNEZWYocGFyZW50Tm9kZT1wYXJlbnROb2RlLnBhcmVudCk7KXBhcmVudE5vZGUmJnBhcmVudE5vZGUuZGF0YSYmKGRhdGE9bWVyZ2VDbGFzc0RhdGEoZGF0YSxwYXJlbnROb2RlLmRhdGEpKTtyZXR1cm4gZnVuY3Rpb24oc3RhdGljQ2xhc3MsZHluYW1pY0NsYXNzKXtpZihpc0RlZihzdGF0aWNDbGFzcyl8fGlzRGVmKGR5bmFtaWNDbGFzcykpcmV0dXJuIGNvbmNhdChzdGF0aWNDbGFzcyxzdHJpbmdpZnlDbGFzcyhkeW5hbWljQ2xhc3MpKTtyZXR1cm4iIn0oZGF0YS5zdGF0aWNDbGFzcyxkYXRhLmNsYXNzKX1mdW5jdGlvbiBtZXJnZUNsYXNzRGF0YShjaGlsZCxwYXJlbnQpe3JldHVybntzdGF0aWNDbGFzczpjb25jYXQoY2hpbGQuc3RhdGljQ2xhc3MscGFyZW50LnN0YXRpY0NsYXNzKSxjbGFzczppc0RlZihjaGlsZC5jbGFzcyk/W2NoaWxkLmNsYXNzLHBhcmVudC5jbGFzc106cGFyZW50LmNsYXNzfX1mdW5jdGlvbiBjb25jYXQoYSxiKXtyZXR1cm4gYT9iP2ErIiAiK2I6YTpifHwiIn1mdW5jdGlvbiBzdHJpbmdpZnlDbGFzcyh2YWx1ZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpP2Z1bmN0aW9uKHZhbHVlKXtmb3IodmFyIHN0cmluZ2lmaWVkLHJlcz0iIixpPTAsbD12YWx1ZS5sZW5ndGg7aTxsO2krKylpc0RlZihzdHJpbmdpZmllZD1zdHJpbmdpZnlDbGFzcyh2YWx1ZVtpXSkpJiYiIiE9PXN0cmluZ2lmaWVkJiYocmVzJiYocmVzKz0iICIpLHJlcys9c3RyaW5naWZpZWQpO3JldHVybiByZXN9KHZhbHVlKTppc09iamVjdCh2YWx1ZSk/ZnVuY3Rpb24odmFsdWUpe3ZhciByZXM9IiI7Zm9yKHZhciBrZXkgaW4gdmFsdWUpdmFsdWVba2V5XSYmKHJlcyYmKHJlcys9IiAiKSxyZXMrPWtleSk7cmV0dXJuIHJlc30odmFsdWUpOiJzdHJpbmciPT10eXBlb2YgdmFsdWU/dmFsdWU6IiJ9dmFyIG5hbWVzcGFjZU1hcD17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LGlzSFRNTFRhZz1tYWtlTWFwKCJodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSxhZGRyZXNzLGFydGljbGUsYXNpZGUsZm9vdGVyLGhlYWRlcixoMSxoMixoMyxoNCxoNSxoNixoZ3JvdXAsbmF2LHNlY3Rpb24sZGl2LGRkLGRsLGR0LGZpZ2NhcHRpb24sZmlndXJlLHBpY3R1cmUsaHIsaW1nLGxpLG1haW4sb2wscCxwcmUsdWwsYSxiLGFiYnIsYmRpLGJkbyxicixjaXRlLGNvZGUsZGF0YSxkZm4sZW0saSxrYmQsbWFyayxxLHJwLHJ0LHJ0YyxydWJ5LHMsc2FtcCxzbWFsbCxzcGFuLHN0cm9uZyxzdWIsc3VwLHRpbWUsdSx2YXIsd2JyLGFyZWEsYXVkaW8sbWFwLHRyYWNrLHZpZGVvLGVtYmVkLG9iamVjdCxwYXJhbSxzb3VyY2UsY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLGNhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLHRoLHRyLGJ1dHRvbixkYXRhbGlzdCxmaWVsZHNldCxmb3JtLGlucHV0LGxhYmVsLGxlZ2VuZCxtZXRlcixvcHRncm91cCxvcHRpb24sb3V0cHV0LHByb2dyZXNzLHNlbGVjdCx0ZXh0YXJlYSxkZXRhaWxzLGRpYWxvZyxtZW51LG1lbnVpdGVtLHN1bW1hcnksY29udGVudCxlbGVtZW50LHNoYWRvdyx0ZW1wbGF0ZSxibG9ja3F1b3RlLGlmcmFtZSx0Zm9vdCIpLGlzU1ZHPW1ha2VNYXAoInN2ZyxhbmltYXRlLGNpcmNsZSxjbGlwcGF0aCxjdXJzb3IsZGVmcyxkZXNjLGVsbGlwc2UsZmlsdGVyLGZvbnQtZmFjZSxmb3JlaWduT2JqZWN0LGcsZ2x5cGgsaW1hZ2UsbGluZSxtYXJrZXIsbWFzayxtaXNzaW5nLWdseXBoLHBhdGgscGF0dGVybixwb2x5Z29uLHBvbHlsaW5lLHJlY3Qsc3dpdGNoLHN5bWJvbCx0ZXh0LHRleHRwYXRoLHRzcGFuLHVzZSx2aWV3IiwhMCksaXNSZXNlcnZlZFRhZz1mdW5jdGlvbih0YWcpe3JldHVybiBpc0hUTUxUYWcodGFnKXx8aXNTVkcodGFnKX07dmFyIHVua25vd25FbGVtZW50Q2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgaXNUZXh0SW5wdXRUeXBlPW1ha2VNYXAoInRleHQsbnVtYmVyLHBhc3N3b3JkLHNlYXJjaCxlbWFpbCx0ZWwsdXJsIik7dmFyIG5vZGVPcHM9T2JqZWN0LmZyZWV6ZSh7Y3JlYXRlRWxlbWVudDpmdW5jdGlvbih0YWdOYW1lLHZub2RlKXt2YXIgZWxtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7cmV0dXJuInNlbGVjdCIhPT10YWdOYW1lfHx2bm9kZS5kYXRhJiZ2bm9kZS5kYXRhLmF0dHJzJiZ2b2lkIDAhPT12bm9kZS5kYXRhLmF0dHJzLm11bHRpcGxlJiZlbG0uc2V0QXR0cmlidXRlKCJtdWx0aXBsZSIsIm11bHRpcGxlIiksZWxtfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24obmFtZXNwYWNlLHRhZ05hbWUpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlTWFwW25hbWVzcGFjZV0sdGFnTmFtZSl9LGNyZWF0ZVRleHROb2RlOmZ1bmN0aW9uKHRleHQpe3JldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KX0sY3JlYXRlQ29tbWVudDpmdW5jdGlvbih0ZXh0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCh0ZXh0KX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKHBhcmVudE5vZGUsbmV3Tm9kZSxyZWZlcmVuY2VOb2RlKXtwYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlLHJlZmVyZW5jZU5vZGUpfSxyZW1vdmVDaGlsZDpmdW5jdGlvbihub2RlLGNoaWxkKXtub2RlLnJlbW92ZUNoaWxkKGNoaWxkKX0sYXBwZW5kQ2hpbGQ6ZnVuY3Rpb24obm9kZSxjaGlsZCl7bm9kZS5hcHBlbmRDaGlsZChjaGlsZCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24obm9kZSl7cmV0dXJuIG5vZGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24obm9kZSl7cmV0dXJuIG5vZGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24obm9kZSl7cmV0dXJuIG5vZGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24obm9kZSx0ZXh0KXtub2RlLnRleHRDb250ZW50PXRleHR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24obm9kZSxzY29wZUlkKXtub2RlLnNldEF0dHJpYnV0ZShzY29wZUlkLCIiKX19KSxyZWY9e2NyZWF0ZTpmdW5jdGlvbihfLHZub2RlKXtyZWdpc3RlclJlZih2bm9kZSl9LHVwZGF0ZTpmdW5jdGlvbihvbGRWbm9kZSx2bm9kZSl7b2xkVm5vZGUuZGF0YS5yZWYhPT12bm9kZS5kYXRhLnJlZiYmKHJlZ2lzdGVyUmVmKG9sZFZub2RlLCEwKSxyZWdpc3RlclJlZih2bm9kZSkpfSxkZXN0cm95OmZ1bmN0aW9uKHZub2RlKXtyZWdpc3RlclJlZih2bm9kZSwhMCl9fTtmdW5jdGlvbiByZWdpc3RlclJlZih2bm9kZSxpc1JlbW92YWwpe3ZhciBrZXk9dm5vZGUuZGF0YS5yZWY7aWYoaXNEZWYoa2V5KSl7dmFyIHZtPXZub2RlLmNvbnRleHQscmVmPXZub2RlLmNvbXBvbmVudEluc3RhbmNlfHx2bm9kZS5lbG0scmVmcz12bS4kcmVmcztpc1JlbW92YWw/QXJyYXkuaXNBcnJheShyZWZzW2tleV0pP3JlbW92ZShyZWZzW2tleV0scmVmKTpyZWZzW2tleV09PT1yZWYmJihyZWZzW2tleV09dm9pZCAwKTp2bm9kZS5kYXRhLnJlZkluRm9yP0FycmF5LmlzQXJyYXkocmVmc1trZXldKT9yZWZzW2tleV0uaW5kZXhPZihyZWYpPDAmJnJlZnNba2V5XS5wdXNoKHJlZik6cmVmc1trZXldPVtyZWZdOnJlZnNba2V5XT1yZWZ9fXZhciBlbXB0eU5vZGU9bmV3IFZOb2RlKCIiLHt9LFtdKSxob29rcz1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIHNhbWVWbm9kZShhLGIpe3JldHVybiBhLmtleT09PWIua2V5JiYoYS50YWc9PT1iLnRhZyYmYS5pc0NvbW1lbnQ9PT1iLmlzQ29tbWVudCYmaXNEZWYoYS5kYXRhKT09PWlzRGVmKGIuZGF0YSkmJmZ1bmN0aW9uKGEsYil7aWYoImlucHV0IiE9PWEudGFnKXJldHVybiEwO3ZhciBpLHR5cGVBPWlzRGVmKGk9YS5kYXRhKSYmaXNEZWYoaT1pLmF0dHJzKSYmaS50eXBlLHR5cGVCPWlzRGVmKGk9Yi5kYXRhKSYmaXNEZWYoaT1pLmF0dHJzKSYmaS50eXBlO3JldHVybiB0eXBlQT09PXR5cGVCfHxpc1RleHRJbnB1dFR5cGUodHlwZUEpJiZpc1RleHRJbnB1dFR5cGUodHlwZUIpfShhLGIpfHxpc1RydWUoYS5pc0FzeW5jUGxhY2Vob2xkZXIpJiZhLmFzeW5jRmFjdG9yeT09PWIuYXN5bmNGYWN0b3J5JiZpc1VuZGVmKGIuYXN5bmNGYWN0b3J5LmVycm9yKSl9ZnVuY3Rpb24gY3JlYXRlS2V5VG9PbGRJZHgoY2hpbGRyZW4sYmVnaW5JZHgsZW5kSWR4KXt2YXIgaSxrZXksbWFwPXt9O2ZvcihpPWJlZ2luSWR4O2k8PWVuZElkeDsrK2kpaXNEZWYoa2V5PWNoaWxkcmVuW2ldLmtleSkmJihtYXBba2V5XT1pKTtyZXR1cm4gbWFwfXZhciBkaXJlY3RpdmVzPXtjcmVhdGU6dXBkYXRlRGlyZWN0aXZlcyx1cGRhdGU6dXBkYXRlRGlyZWN0aXZlcyxkZXN0cm95OmZ1bmN0aW9uKHZub2RlKXt1cGRhdGVEaXJlY3RpdmVzKHZub2RlLGVtcHR5Tm9kZSl9fTtmdW5jdGlvbiB1cGRhdGVEaXJlY3RpdmVzKG9sZFZub2RlLHZub2RlKXsob2xkVm5vZGUuZGF0YS5kaXJlY3RpdmVzfHx2bm9kZS5kYXRhLmRpcmVjdGl2ZXMpJiZmdW5jdGlvbihvbGRWbm9kZSx2bm9kZSl7dmFyIGtleSxvbGREaXIsZGlyLGlzQ3JlYXRlPW9sZFZub2RlPT09ZW1wdHlOb2RlLGlzRGVzdHJveT12bm9kZT09PWVtcHR5Tm9kZSxvbGREaXJzPW5vcm1hbGl6ZURpcmVjdGl2ZXMkMShvbGRWbm9kZS5kYXRhLmRpcmVjdGl2ZXMsb2xkVm5vZGUuY29udGV4dCksbmV3RGlycz1ub3JtYWxpemVEaXJlY3RpdmVzJDEodm5vZGUuZGF0YS5kaXJlY3RpdmVzLHZub2RlLmNvbnRleHQpLGRpcnNXaXRoSW5zZXJ0PVtdLGRpcnNXaXRoUG9zdHBhdGNoPVtdO2ZvcihrZXkgaW4gbmV3RGlycylvbGREaXI9b2xkRGlyc1trZXldLGRpcj1uZXdEaXJzW2tleV0sb2xkRGlyPyhkaXIub2xkVmFsdWU9b2xkRGlyLnZhbHVlLGNhbGxIb29rJDEoZGlyLCJ1cGRhdGUiLHZub2RlLG9sZFZub2RlKSxkaXIuZGVmJiZkaXIuZGVmLmNvbXBvbmVudFVwZGF0ZWQmJmRpcnNXaXRoUG9zdHBhdGNoLnB1c2goZGlyKSk6KGNhbGxIb29rJDEoZGlyLCJiaW5kIix2bm9kZSxvbGRWbm9kZSksZGlyLmRlZiYmZGlyLmRlZi5pbnNlcnRlZCYmZGlyc1dpdGhJbnNlcnQucHVzaChkaXIpKTtpZihkaXJzV2l0aEluc2VydC5sZW5ndGgpe3ZhciBjYWxsSW5zZXJ0PWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTxkaXJzV2l0aEluc2VydC5sZW5ndGg7aSsrKWNhbGxIb29rJDEoZGlyc1dpdGhJbnNlcnRbaV0sImluc2VydGVkIix2bm9kZSxvbGRWbm9kZSl9O2lzQ3JlYXRlP21lcmdlVk5vZGVIb29rKHZub2RlLCJpbnNlcnQiLGNhbGxJbnNlcnQpOmNhbGxJbnNlcnQoKX1kaXJzV2l0aFBvc3RwYXRjaC5sZW5ndGgmJm1lcmdlVk5vZGVIb29rKHZub2RlLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTxkaXJzV2l0aFBvc3RwYXRjaC5sZW5ndGg7aSsrKWNhbGxIb29rJDEoZGlyc1dpdGhQb3N0cGF0Y2hbaV0sImNvbXBvbmVudFVwZGF0ZWQiLHZub2RlLG9sZFZub2RlKX0pO2lmKCFpc0NyZWF0ZSlmb3Ioa2V5IGluIG9sZERpcnMpbmV3RGlyc1trZXldfHxjYWxsSG9vayQxKG9sZERpcnNba2V5XSwidW5iaW5kIixvbGRWbm9kZSxvbGRWbm9kZSxpc0Rlc3Ryb3kpfShvbGRWbm9kZSx2bm9kZSl9dmFyIGVtcHR5TW9kaWZpZXJzPU9iamVjdC5jcmVhdGUobnVsbCk7ZnVuY3Rpb24gbm9ybWFsaXplRGlyZWN0aXZlcyQxKGRpcnMsdm0pe3ZhciBpLGRpcixyZXM9T2JqZWN0LmNyZWF0ZShudWxsKTtpZighZGlycylyZXR1cm4gcmVzO2ZvcihpPTA7aTxkaXJzLmxlbmd0aDtpKyspKGRpcj1kaXJzW2ldKS5tb2RpZmllcnN8fChkaXIubW9kaWZpZXJzPWVtcHR5TW9kaWZpZXJzKSwocmVzW2dldFJhd0Rpck5hbWUoZGlyKV09ZGlyKS5kZWY9cmVzb2x2ZUFzc2V0KHZtLiRvcHRpb25zLCJkaXJlY3RpdmVzIixkaXIubmFtZSk7cmV0dXJuIHJlc31mdW5jdGlvbiBnZXRSYXdEaXJOYW1lKGRpcil7cmV0dXJuIGRpci5yYXdOYW1lfHxkaXIubmFtZSsiLiIrT2JqZWN0LmtleXMoZGlyLm1vZGlmaWVyc3x8e30pLmpvaW4oIi4iKX1mdW5jdGlvbiBjYWxsSG9vayQxKGRpcixob29rLHZub2RlLG9sZFZub2RlLGlzRGVzdHJveSl7dmFyIGZuPWRpci5kZWYmJmRpci5kZWZbaG9va107aWYoZm4pdHJ5e2ZuKHZub2RlLmVsbSxkaXIsdm5vZGUsb2xkVm5vZGUsaXNEZXN0cm95KX1jYXRjaChlKXtoYW5kbGVFcnJvcihlLHZub2RlLmNvbnRleHQsImRpcmVjdGl2ZSAiK2Rpci5uYW1lKyIgIitob29rKyIgaG9vayIpfX12YXIgYmFzZU1vZHVsZXM9W3JlZixkaXJlY3RpdmVzXTtmdW5jdGlvbiB1cGRhdGVBdHRycyhvbGRWbm9kZSx2bm9kZSl7dmFyIG9wdHM9dm5vZGUuY29tcG9uZW50T3B0aW9ucztpZighKGlzRGVmKG9wdHMpJiYhMT09PW9wdHMuQ3Rvci5vcHRpb25zLmluaGVyaXRBdHRyc3x8aXNVbmRlZihvbGRWbm9kZS5kYXRhLmF0dHJzKSYmaXNVbmRlZih2bm9kZS5kYXRhLmF0dHJzKSkpe3ZhciBrZXksY3VyLGVsbT12bm9kZS5lbG0sb2xkQXR0cnM9b2xkVm5vZGUuZGF0YS5hdHRyc3x8e30sYXR0cnM9dm5vZGUuZGF0YS5hdHRyc3x8e307Zm9yKGtleSBpbiBpc0RlZihhdHRycy5fX29iX18pJiYoYXR0cnM9dm5vZGUuZGF0YS5hdHRycz1leHRlbmQoe30sYXR0cnMpKSxhdHRycyljdXI9YXR0cnNba2V5XSxvbGRBdHRyc1trZXldIT09Y3VyJiZzZXRBdHRyKGVsbSxrZXksY3VyKTtmb3Ioa2V5IGluKGlzSUV8fGlzRWRnZSkmJmF0dHJzLnZhbHVlIT09b2xkQXR0cnMudmFsdWUmJnNldEF0dHIoZWxtLCJ2YWx1ZSIsYXR0cnMudmFsdWUpLG9sZEF0dHJzKWlzVW5kZWYoYXR0cnNba2V5XSkmJihpc1hsaW5rKGtleSk/ZWxtLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsZ2V0WGxpbmtQcm9wKGtleSkpOmlzRW51bWVyYXRlZEF0dHIoa2V5KXx8ZWxtLnJlbW92ZUF0dHJpYnV0ZShrZXkpKX19ZnVuY3Rpb24gc2V0QXR0cihlbCxrZXksdmFsdWUpey0xPGVsLnRhZ05hbWUuaW5kZXhPZigiLSIpP2Jhc2VTZXRBdHRyKGVsLGtleSx2YWx1ZSk6aXNCb29sZWFuQXR0cihrZXkpP2lzRmFsc3lBdHRyVmFsdWUodmFsdWUpP2VsLnJlbW92ZUF0dHJpYnV0ZShrZXkpOih2YWx1ZT0iYWxsb3dmdWxsc2NyZWVuIj09PWtleSYmIkVNQkVEIj09PWVsLnRhZ05hbWU/InRydWUiOmtleSxlbC5zZXRBdHRyaWJ1dGUoa2V5LHZhbHVlKSk6aXNFbnVtZXJhdGVkQXR0cihrZXkpP2VsLnNldEF0dHJpYnV0ZShrZXksaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSl8fCJmYWxzZSI9PT12YWx1ZT8iZmFsc2UiOiJ0cnVlIik6aXNYbGluayhrZXkpP2lzRmFsc3lBdHRyVmFsdWUodmFsdWUpP2VsLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsZ2V0WGxpbmtQcm9wKGtleSkpOmVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsa2V5LHZhbHVlKTpiYXNlU2V0QXR0cihlbCxrZXksdmFsdWUpfWZ1bmN0aW9uIGJhc2VTZXRBdHRyKGVsLGtleSx2YWx1ZSl7aWYoaXNGYWxzeUF0dHJWYWx1ZSh2YWx1ZSkpZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7ZWxzZXtpZihpc0lFJiYhaXNJRTkmJiJURVhUQVJFQSI9PT1lbC50YWdOYW1lJiYicGxhY2Vob2xkZXIiPT09a2V5JiYhZWwuX19pZXBoKXt2YXIgYmxvY2tlcj1mdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoImlucHV0IixibG9ja2VyKX07ZWwuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLGJsb2NrZXIpLGVsLl9faWVwaD0hMH1lbC5zZXRBdHRyaWJ1dGUoa2V5LHZhbHVlKX19dmFyIGF0dHJzPXtjcmVhdGU6dXBkYXRlQXR0cnMsdXBkYXRlOnVwZGF0ZUF0dHJzfTtmdW5jdGlvbiB1cGRhdGVDbGFzcyhvbGRWbm9kZSx2bm9kZSl7dmFyIGVsPXZub2RlLmVsbSxkYXRhPXZub2RlLmRhdGEsb2xkRGF0YT1vbGRWbm9kZS5kYXRhO2lmKCEoaXNVbmRlZihkYXRhLnN0YXRpY0NsYXNzKSYmaXNVbmRlZihkYXRhLmNsYXNzKSYmKGlzVW5kZWYob2xkRGF0YSl8fGlzVW5kZWYob2xkRGF0YS5zdGF0aWNDbGFzcykmJmlzVW5kZWYob2xkRGF0YS5jbGFzcykpKSl7dmFyIGNscz1nZW5DbGFzc0ZvclZub2RlKHZub2RlKSx0cmFuc2l0aW9uQ2xhc3M9ZWwuX3RyYW5zaXRpb25DbGFzc2VzO2lzRGVmKHRyYW5zaXRpb25DbGFzcykmJihjbHM9Y29uY2F0KGNscyxzdHJpbmdpZnlDbGFzcyh0cmFuc2l0aW9uQ2xhc3MpKSksY2xzIT09ZWwuX3ByZXZDbGFzcyYmKGVsLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGNscyksZWwuX3ByZXZDbGFzcz1jbHMpfX12YXIgdGFyZ2V0JDEsa2xhc3M9e2NyZWF0ZTp1cGRhdGVDbGFzcyx1cGRhdGU6dXBkYXRlQ2xhc3N9LFJBTkdFX1RPS0VOPSJfX3IiLENIRUNLQk9YX1JBRElPX1RPS0VOPSJfX2MiO2Z1bmN0aW9uIGFkZCQxKGV2ZW50LGhhbmRsZXIsb25jZSQkMSxjYXB0dXJlLHBhc3NpdmUpe3ZhciBmbjtoYW5kbGVyPShmbj1oYW5kbGVyKS5fd2l0aFRhc2t8fChmbi5fd2l0aFRhc2s9ZnVuY3Rpb24oKXt1c2VNYWNyb1Rhc2s9ITA7dmFyIHJlcz1mbi5hcHBseShudWxsLGFyZ3VtZW50cyk7cmV0dXJuIHVzZU1hY3JvVGFzaz0hMSxyZXN9KSxvbmNlJCQxJiYoaGFuZGxlcj1mdW5jdGlvbihoYW5kbGVyLGV2ZW50LGNhcHR1cmUpe3ZhciBfdGFyZ2V0PXRhcmdldCQxO3JldHVybiBmdW5jdGlvbiBvbmNlSGFuZGxlcigpe251bGwhPT1oYW5kbGVyLmFwcGx5KG51bGwsYXJndW1lbnRzKSYmcmVtb3ZlJDIoZXZlbnQsb25jZUhhbmRsZXIsY2FwdHVyZSxfdGFyZ2V0KX19KGhhbmRsZXIsZXZlbnQsY2FwdHVyZSkpLHRhcmdldCQxLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsaGFuZGxlcixzdXBwb3J0c1Bhc3NpdmU/e2NhcHR1cmU6Y2FwdHVyZSxwYXNzaXZlOnBhc3NpdmV9OmNhcHR1cmUpfWZ1bmN0aW9uIHJlbW92ZSQyKGV2ZW50LGhhbmRsZXIsY2FwdHVyZSxfdGFyZ2V0KXsoX3RhcmdldHx8dGFyZ2V0JDEpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsaGFuZGxlci5fd2l0aFRhc2t8fGhhbmRsZXIsY2FwdHVyZSl9ZnVuY3Rpb24gdXBkYXRlRE9NTGlzdGVuZXJzKG9sZFZub2RlLHZub2RlKXtpZighaXNVbmRlZihvbGRWbm9kZS5kYXRhLm9uKXx8IWlzVW5kZWYodm5vZGUuZGF0YS5vbikpe3ZhciBvbj12bm9kZS5kYXRhLm9ufHx7fSxvbGRPbj1vbGRWbm9kZS5kYXRhLm9ufHx7fTt0YXJnZXQkMT12bm9kZS5lbG0sZnVuY3Rpb24ob24pe2lmKGlzRGVmKG9uW1JBTkdFX1RPS0VOXSkpe3ZhciBldmVudD1pc0lFPyJjaGFuZ2UiOiJpbnB1dCI7b25bZXZlbnRdPVtdLmNvbmNhdChvbltSQU5HRV9UT0tFTl0sb25bZXZlbnRdfHxbXSksZGVsZXRlIG9uW1JBTkdFX1RPS0VOXX1pc0RlZihvbltDSEVDS0JPWF9SQURJT19UT0tFTl0pJiYob24uY2hhbmdlPVtdLmNvbmNhdChvbltDSEVDS0JPWF9SQURJT19UT0tFTl0sb24uY2hhbmdlfHxbXSksZGVsZXRlIG9uW0NIRUNLQk9YX1JBRElPX1RPS0VOXSl9KG9uKSx1cGRhdGVMaXN0ZW5lcnMob24sb2xkT24sYWRkJDEscmVtb3ZlJDIsdm5vZGUuY29udGV4dCksdGFyZ2V0JDE9dm9pZCAwfX12YXIgZXZlbnRzPXtjcmVhdGU6dXBkYXRlRE9NTGlzdGVuZXJzLHVwZGF0ZTp1cGRhdGVET01MaXN0ZW5lcnN9O2Z1bmN0aW9uIHVwZGF0ZURPTVByb3BzKG9sZFZub2RlLHZub2RlKXtpZighaXNVbmRlZihvbGRWbm9kZS5kYXRhLmRvbVByb3BzKXx8IWlzVW5kZWYodm5vZGUuZGF0YS5kb21Qcm9wcykpe3ZhciBrZXksY3VyLGVsbT12bm9kZS5lbG0sb2xkUHJvcHM9b2xkVm5vZGUuZGF0YS5kb21Qcm9wc3x8e30scHJvcHM9dm5vZGUuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGtleSBpbiBpc0RlZihwcm9wcy5fX29iX18pJiYocHJvcHM9dm5vZGUuZGF0YS5kb21Qcm9wcz1leHRlbmQoe30scHJvcHMpKSxvbGRQcm9wcylpc1VuZGVmKHByb3BzW2tleV0pJiYoZWxtW2tleV09IiIpO2ZvcihrZXkgaW4gcHJvcHMpe2lmKGN1cj1wcm9wc1trZXldLCJ0ZXh0Q29udGVudCI9PT1rZXl8fCJpbm5lckhUTUwiPT09a2V5KXtpZih2bm9kZS5jaGlsZHJlbiYmKHZub2RlLmNoaWxkcmVuLmxlbmd0aD0wKSxjdXI9PT1vbGRQcm9wc1trZXldKWNvbnRpbnVlOzE9PT1lbG0uY2hpbGROb2Rlcy5sZW5ndGgmJmVsbS5yZW1vdmVDaGlsZChlbG0uY2hpbGROb2Rlc1swXSl9aWYoInZhbHVlIj09PWtleSl7dmFyIHN0ckN1cj1pc1VuZGVmKGVsbS5fdmFsdWU9Y3VyKT8iIjpTdHJpbmcoY3VyKTtzaG91bGRVcGRhdGVWYWx1ZShlbG0sc3RyQ3VyKSYmKGVsbS52YWx1ZT1zdHJDdXIpfWVsc2UgZWxtW2tleV09Y3VyfX19ZnVuY3Rpb24gc2hvdWxkVXBkYXRlVmFsdWUoZWxtLGNoZWNrVmFsKXtyZXR1cm4hZWxtLmNvbXBvc2luZyYmKCJPUFRJT04iPT09ZWxtLnRhZ05hbWV8fGZ1bmN0aW9uKGVsbSxjaGVja1ZhbCl7dmFyIG5vdEluRm9jdXM9ITA7dHJ5e25vdEluRm9jdXM9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWVsbX1jYXRjaChlKXt9cmV0dXJuIG5vdEluRm9jdXMmJmVsbS52YWx1ZSE9PWNoZWNrVmFsfShlbG0sY2hlY2tWYWwpfHxmdW5jdGlvbihlbG0sbmV3VmFsKXt2YXIgdmFsdWU9ZWxtLnZhbHVlLG1vZGlmaWVycz1lbG0uX3ZNb2RpZmllcnM7aWYoaXNEZWYobW9kaWZpZXJzKSl7aWYobW9kaWZpZXJzLmxhenkpcmV0dXJuITE7aWYobW9kaWZpZXJzLm51bWJlcilyZXR1cm4gdG9OdW1iZXIodmFsdWUpIT09dG9OdW1iZXIobmV3VmFsKTtpZihtb2RpZmllcnMudHJpbSlyZXR1cm4gdmFsdWUudHJpbSgpIT09bmV3VmFsLnRyaW0oKX1yZXR1cm4gdmFsdWUhPT1uZXdWYWx9KGVsbSxjaGVja1ZhbCkpfXZhciBkb21Qcm9wcz17Y3JlYXRlOnVwZGF0ZURPTVByb3BzLHVwZGF0ZTp1cGRhdGVET01Qcm9wc30scGFyc2VTdHlsZVRleHQ9Y2FjaGVkKGZ1bmN0aW9uKGNzc1RleHQpe3ZhciByZXM9e30scHJvcGVydHlEZWxpbWl0ZXI9LzooLispLztyZXR1cm4gY3NzVGV4dC5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7aWYoaXRlbSl7dmFyIHRtcD1pdGVtLnNwbGl0KHByb3BlcnR5RGVsaW1pdGVyKTsxPHRtcC5sZW5ndGgmJihyZXNbdG1wWzBdLnRyaW0oKV09dG1wWzFdLnRyaW0oKSl9fSkscmVzfSk7ZnVuY3Rpb24gbm9ybWFsaXplU3R5bGVEYXRhKGRhdGEpe3ZhciBzdHlsZT1ub3JtYWxpemVTdHlsZUJpbmRpbmcoZGF0YS5zdHlsZSk7cmV0dXJuIGRhdGEuc3RhdGljU3R5bGU/ZXh0ZW5kKGRhdGEuc3RhdGljU3R5bGUsc3R5bGUpOnN0eWxlfWZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlQmluZGluZyhiaW5kaW5nU3R5bGUpe3JldHVybiBBcnJheS5pc0FycmF5KGJpbmRpbmdTdHlsZSk/dG9PYmplY3QoYmluZGluZ1N0eWxlKToic3RyaW5nIj09dHlwZW9mIGJpbmRpbmdTdHlsZT9wYXJzZVN0eWxlVGV4dChiaW5kaW5nU3R5bGUpOmJpbmRpbmdTdHlsZX12YXIgZW1wdHlTdHlsZSxjc3NWYXJSRT0vXi0tLyxpbXBvcnRhbnRSRT0vXHMqIWltcG9ydGFudCQvLHNldFByb3A9ZnVuY3Rpb24oZWwsbmFtZSx2YWwpe2lmKGNzc1ZhclJFLnRlc3QobmFtZSkpZWwuc3R5bGUuc2V0UHJvcGVydHkobmFtZSx2YWwpO2Vsc2UgaWYoaW1wb3J0YW50UkUudGVzdCh2YWwpKWVsLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsIiIpLCJpbXBvcnRhbnQiKTtlbHNle3ZhciBub3JtYWxpemVkTmFtZT1ub3JtYWxpemUobmFtZSk7aWYoQXJyYXkuaXNBcnJheSh2YWwpKWZvcih2YXIgaT0wLGxlbj12YWwubGVuZ3RoO2k8bGVuO2krKyllbC5zdHlsZVtub3JtYWxpemVkTmFtZV09dmFsW2ldO2Vsc2UgZWwuc3R5bGVbbm9ybWFsaXplZE5hbWVdPXZhbH19LHZlbmRvck5hbWVzPVsiV2Via2l0IiwiTW96IiwibXMiXSxub3JtYWxpemU9Y2FjaGVkKGZ1bmN0aW9uKHByb3Ape2lmKGVtcHR5U3R5bGU9ZW1wdHlTdHlsZXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGUsImZpbHRlciIhPT0ocHJvcD1jYW1lbGl6ZShwcm9wKSkmJnByb3AgaW4gZW1wdHlTdHlsZSlyZXR1cm4gcHJvcDtmb3IodmFyIGNhcE5hbWU9cHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStwcm9wLnNsaWNlKDEpLGk9MDtpPHZlbmRvck5hbWVzLmxlbmd0aDtpKyspe3ZhciBuYW1lPXZlbmRvck5hbWVzW2ldK2NhcE5hbWU7aWYobmFtZSBpbiBlbXB0eVN0eWxlKXJldHVybiBuYW1lfX0pO2Z1bmN0aW9uIHVwZGF0ZVN0eWxlKG9sZFZub2RlLHZub2RlKXt2YXIgZGF0YT12bm9kZS5kYXRhLG9sZERhdGE9b2xkVm5vZGUuZGF0YTtpZighKGlzVW5kZWYoZGF0YS5zdGF0aWNTdHlsZSkmJmlzVW5kZWYoZGF0YS5zdHlsZSkmJmlzVW5kZWYob2xkRGF0YS5zdGF0aWNTdHlsZSkmJmlzVW5kZWYob2xkRGF0YS5zdHlsZSkpKXt2YXIgY3VyLG5hbWUsZWw9dm5vZGUuZWxtLG9sZFN0YXRpY1N0eWxlPW9sZERhdGEuc3RhdGljU3R5bGUsb2xkU3R5bGVCaW5kaW5nPW9sZERhdGEubm9ybWFsaXplZFN0eWxlfHxvbGREYXRhLnN0eWxlfHx7fSxvbGRTdHlsZT1vbGRTdGF0aWNTdHlsZXx8b2xkU3R5bGVCaW5kaW5nLHN0eWxlPW5vcm1hbGl6ZVN0eWxlQmluZGluZyh2bm9kZS5kYXRhLnN0eWxlKXx8e307dm5vZGUuZGF0YS5ub3JtYWxpemVkU3R5bGU9aXNEZWYoc3R5bGUuX19vYl9fKT9leHRlbmQoe30sc3R5bGUpOnN0eWxlO3ZhciBuZXdTdHlsZT1mdW5jdGlvbih2bm9kZSxjaGVja0NoaWxkKXt2YXIgc3R5bGVEYXRhLHJlcz17fTtpZihjaGVja0NoaWxkKWZvcih2YXIgY2hpbGROb2RlPXZub2RlO2NoaWxkTm9kZS5jb21wb25lbnRJbnN0YW5jZTspKGNoaWxkTm9kZT1jaGlsZE5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlKSYmY2hpbGROb2RlLmRhdGEmJihzdHlsZURhdGE9bm9ybWFsaXplU3R5bGVEYXRhKGNoaWxkTm9kZS5kYXRhKSkmJmV4dGVuZChyZXMsc3R5bGVEYXRhKTsoc3R5bGVEYXRhPW5vcm1hbGl6ZVN0eWxlRGF0YSh2bm9kZS5kYXRhKSkmJmV4dGVuZChyZXMsc3R5bGVEYXRhKTtmb3IodmFyIHBhcmVudE5vZGU9dm5vZGU7cGFyZW50Tm9kZT1wYXJlbnROb2RlLnBhcmVudDspcGFyZW50Tm9kZS5kYXRhJiYoc3R5bGVEYXRhPW5vcm1hbGl6ZVN0eWxlRGF0YShwYXJlbnROb2RlLmRhdGEpKSYmZXh0ZW5kKHJlcyxzdHlsZURhdGEpO3JldHVybiByZXN9KHZub2RlLCEwKTtmb3IobmFtZSBpbiBvbGRTdHlsZSlpc1VuZGVmKG5ld1N0eWxlW25hbWVdKSYmc2V0UHJvcChlbCxuYW1lLCIiKTtmb3IobmFtZSBpbiBuZXdTdHlsZSkoY3VyPW5ld1N0eWxlW25hbWVdKSE9PW9sZFN0eWxlW25hbWVdJiZzZXRQcm9wKGVsLG5hbWUsbnVsbD09Y3VyPyIiOmN1cil9fXZhciBzdHlsZT17Y3JlYXRlOnVwZGF0ZVN0eWxlLHVwZGF0ZTp1cGRhdGVTdHlsZX07ZnVuY3Rpb24gYWRkQ2xhc3MoZWwsY2xzKXtpZihjbHMmJihjbHM9Y2xzLnRyaW0oKSkpaWYoZWwuY2xhc3NMaXN0KS0xPGNscy5pbmRleE9mKCIgIik/Y2xzLnNwbGl0KC9ccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3JldHVybiBlbC5jbGFzc0xpc3QuYWRkKGMpfSk6ZWwuY2xhc3NMaXN0LmFkZChjbHMpO2Vsc2V7dmFyIGN1cj0iICIrKGVsLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIjtjdXIuaW5kZXhPZigiICIrY2xzKyIgIik8MCYmZWwuc2V0QXR0cmlidXRlKCJjbGFzcyIsKGN1citjbHMpLnRyaW0oKSl9fWZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLGNscyl7aWYoY2xzJiYoY2xzPWNscy50cmltKCkpKWlmKGVsLmNsYXNzTGlzdCktMTxjbHMuaW5kZXhPZigiICIpP2Nscy5zcGxpdCgvXHMrLykuZm9yRWFjaChmdW5jdGlvbihjKXtyZXR1cm4gZWwuY2xhc3NMaXN0LnJlbW92ZShjKX0pOmVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKSxlbC5jbGFzc0xpc3QubGVuZ3RofHxlbC5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIGN1cj0iICIrKGVsLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIix0YXI9IiAiK2NscysiICI7MDw9Y3VyLmluZGV4T2YodGFyKTspY3VyPWN1ci5yZXBsYWNlKHRhciwiICIpOyhjdXI9Y3VyLnRyaW0oKSk/ZWwuc2V0QXR0cmlidXRlKCJjbGFzcyIsY3VyKTplbC5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIil9fWZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uKGRlZil7aWYoZGVmKXtpZigib2JqZWN0IiE9dHlwZW9mIGRlZilyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGRlZj9hdXRvQ3NzVHJhbnNpdGlvbihkZWYpOnZvaWQgMDt2YXIgcmVzPXt9O3JldHVybiExIT09ZGVmLmNzcyYmZXh0ZW5kKHJlcyxhdXRvQ3NzVHJhbnNpdGlvbihkZWYubmFtZXx8InYiKSksZXh0ZW5kKHJlcyxkZWYpLHJlc319dmFyIGF1dG9Dc3NUcmFuc2l0aW9uPWNhY2hlZChmdW5jdGlvbihuYW1lKXtyZXR1cm57ZW50ZXJDbGFzczpuYW1lKyItZW50ZXIiLGVudGVyVG9DbGFzczpuYW1lKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6bmFtZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczpuYW1lKyItbGVhdmUiLGxlYXZlVG9DbGFzczpuYW1lKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6bmFtZSsiLWxlYXZlLWFjdGl2ZSJ9fSksaGFzVHJhbnNpdGlvbj1pbkJyb3dzZXImJiFpc0lFOSxUUkFOU0lUSU9OPSJ0cmFuc2l0aW9uIixBTklNQVRJT049ImFuaW1hdGlvbiIsdHJhbnNpdGlvblByb3A9InRyYW5zaXRpb24iLHRyYW5zaXRpb25FbmRFdmVudD0idHJhbnNpdGlvbmVuZCIsYW5pbWF0aW9uUHJvcD0iYW5pbWF0aW9uIixhbmltYXRpb25FbmRFdmVudD0iYW5pbWF0aW9uZW5kIjtoYXNUcmFuc2l0aW9uJiYodm9pZCAwPT09d2luZG93Lm9udHJhbnNpdGlvbmVuZCYmdm9pZCAwIT09d2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCYmKHRyYW5zaXRpb25Qcm9wPSJXZWJraXRUcmFuc2l0aW9uIix0cmFuc2l0aW9uRW5kRXZlbnQ9IndlYmtpdFRyYW5zaXRpb25FbmQiKSx2b2lkIDA9PT13aW5kb3cub25hbmltYXRpb25lbmQmJnZvaWQgMCE9PXdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCYmKGFuaW1hdGlvblByb3A9IldlYmtpdEFuaW1hdGlvbiIsYW5pbWF0aW9uRW5kRXZlbnQ9IndlYmtpdEFuaW1hdGlvbkVuZCIpKTt2YXIgcmFmPWluQnJvd3Nlcj93aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lP3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpOnNldFRpbWVvdXQ6ZnVuY3Rpb24oZm4pe3JldHVybiBmbigpfTtmdW5jdGlvbiBuZXh0RnJhbWUoZm4pe3JhZihmdW5jdGlvbigpe3JhZihmbil9KX1mdW5jdGlvbiBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsY2xzKXt2YXIgdHJhbnNpdGlvbkNsYXNzZXM9ZWwuX3RyYW5zaXRpb25DbGFzc2VzfHwoZWwuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTt0cmFuc2l0aW9uQ2xhc3Nlcy5pbmRleE9mKGNscyk8MCYmKHRyYW5zaXRpb25DbGFzc2VzLnB1c2goY2xzKSxhZGRDbGFzcyhlbCxjbHMpKX1mdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsY2xzKXtlbC5fdHJhbnNpdGlvbkNsYXNzZXMmJnJlbW92ZShlbC5fdHJhbnNpdGlvbkNsYXNzZXMsY2xzKSxyZW1vdmVDbGFzcyhlbCxjbHMpfWZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCxleHBlY3RlZFR5cGUsY2Ipe3ZhciByZWY9Z2V0VHJhbnNpdGlvbkluZm8oZWwsZXhwZWN0ZWRUeXBlKSx0eXBlPXJlZi50eXBlLHRpbWVvdXQ9cmVmLnRpbWVvdXQscHJvcENvdW50PXJlZi5wcm9wQ291bnQ7aWYoIXR5cGUpcmV0dXJuIGNiKCk7dmFyIGV2ZW50PXR5cGU9PT1UUkFOU0lUSU9OP3RyYW5zaXRpb25FbmRFdmVudDphbmltYXRpb25FbmRFdmVudCxlbmRlZD0wLGVuZD1mdW5jdGlvbigpe2VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsb25FbmQpLGNiKCl9LG9uRW5kPWZ1bmN0aW9uKGUpe2UudGFyZ2V0PT09ZWwmJisrZW5kZWQ+PXByb3BDb3VudCYmZW5kKCl9O3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlbmRlZDxwcm9wQ291bnQmJmVuZCgpfSx0aW1lb3V0KzEpLGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsb25FbmQpfXZhciB0cmFuc2Zvcm1SRT0vXGIodHJhbnNmb3JtfGFsbCkoLHwkKS87ZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkluZm8oZWwsZXhwZWN0ZWRUeXBlKXt2YXIgdHlwZSxzdHlsZXM9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLHRyYW5zaXRpb25EZWxheXM9c3R5bGVzW3RyYW5zaXRpb25Qcm9wKyJEZWxheSJdLnNwbGl0KCIsICIpLHRyYW5zaXRpb25EdXJhdGlvbnM9c3R5bGVzW3RyYW5zaXRpb25Qcm9wKyJEdXJhdGlvbiJdLnNwbGl0KCIsICIpLHRyYW5zaXRpb25UaW1lb3V0PWdldFRpbWVvdXQodHJhbnNpdGlvbkRlbGF5cyx0cmFuc2l0aW9uRHVyYXRpb25zKSxhbmltYXRpb25EZWxheXM9c3R5bGVzW2FuaW1hdGlvblByb3ArIkRlbGF5Il0uc3BsaXQoIiwgIiksYW5pbWF0aW9uRHVyYXRpb25zPXN0eWxlc1thbmltYXRpb25Qcm9wKyJEdXJhdGlvbiJdLnNwbGl0KCIsICIpLGFuaW1hdGlvblRpbWVvdXQ9Z2V0VGltZW91dChhbmltYXRpb25EZWxheXMsYW5pbWF0aW9uRHVyYXRpb25zKSx0aW1lb3V0PTAscHJvcENvdW50PTA7cmV0dXJuIGV4cGVjdGVkVHlwZT09PVRSQU5TSVRJT04/MDx0cmFuc2l0aW9uVGltZW91dCYmKHR5cGU9VFJBTlNJVElPTix0aW1lb3V0PXRyYW5zaXRpb25UaW1lb3V0LHByb3BDb3VudD10cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aCk6ZXhwZWN0ZWRUeXBlPT09QU5JTUFUSU9OPzA8YW5pbWF0aW9uVGltZW91dCYmKHR5cGU9QU5JTUFUSU9OLHRpbWVvdXQ9YW5pbWF0aW9uVGltZW91dCxwcm9wQ291bnQ9YW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aCk6cHJvcENvdW50PSh0eXBlPTA8KHRpbWVvdXQ9TWF0aC5tYXgodHJhbnNpdGlvblRpbWVvdXQsYW5pbWF0aW9uVGltZW91dCkpP2FuaW1hdGlvblRpbWVvdXQ8dHJhbnNpdGlvblRpbWVvdXQ/VFJBTlNJVElPTjpBTklNQVRJT046bnVsbCk/dHlwZT09PVRSQU5TSVRJT04/dHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg6YW5pbWF0aW9uRHVyYXRpb25zLmxlbmd0aDowLHt0eXBlOnR5cGUsdGltZW91dDp0aW1lb3V0LHByb3BDb3VudDpwcm9wQ291bnQsaGFzVHJhbnNmb3JtOnR5cGU9PT1UUkFOU0lUSU9OJiZ0cmFuc2Zvcm1SRS50ZXN0KHN0eWxlc1t0cmFuc2l0aW9uUHJvcCsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIGdldFRpbWVvdXQoZGVsYXlzLGR1cmF0aW9ucyl7Zm9yKDtkZWxheXMubGVuZ3RoPGR1cmF0aW9ucy5sZW5ndGg7KWRlbGF5cz1kZWxheXMuY29uY2F0KGRlbGF5cyk7cmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsZHVyYXRpb25zLm1hcChmdW5jdGlvbihkLGkpe3JldHVybiB0b01zKGQpK3RvTXMoZGVsYXlzW2ldKX0pKX1mdW5jdGlvbiB0b01zKHMpe3JldHVybiAxZTMqTnVtYmVyKHMuc2xpY2UoMCwtMSkpfWZ1bmN0aW9uIGVudGVyKHZub2RlLHRvZ2dsZURpc3BsYXkpe3ZhciBlbD12bm9kZS5lbG07aXNEZWYoZWwuX2xlYXZlQ2IpJiYoZWwuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGVsLl9sZWF2ZUNiKCkpO3ZhciBkYXRhPXJlc29sdmVUcmFuc2l0aW9uKHZub2RlLmRhdGEudHJhbnNpdGlvbik7aWYoIWlzVW5kZWYoZGF0YSkmJiFpc0RlZihlbC5fZW50ZXJDYikmJjE9PT1lbC5ub2RlVHlwZSl7Zm9yKHZhciBjc3M9ZGF0YS5jc3MsdHlwZT1kYXRhLnR5cGUsZW50ZXJDbGFzcz1kYXRhLmVudGVyQ2xhc3MsZW50ZXJUb0NsYXNzPWRhdGEuZW50ZXJUb0NsYXNzLGVudGVyQWN0aXZlQ2xhc3M9ZGF0YS5lbnRlckFjdGl2ZUNsYXNzLGFwcGVhckNsYXNzPWRhdGEuYXBwZWFyQ2xhc3MsYXBwZWFyVG9DbGFzcz1kYXRhLmFwcGVhclRvQ2xhc3MsYXBwZWFyQWN0aXZlQ2xhc3M9ZGF0YS5hcHBlYXJBY3RpdmVDbGFzcyxiZWZvcmVFbnRlcj1kYXRhLmJlZm9yZUVudGVyLGVudGVyPWRhdGEuZW50ZXIsYWZ0ZXJFbnRlcj1kYXRhLmFmdGVyRW50ZXIsZW50ZXJDYW5jZWxsZWQ9ZGF0YS5lbnRlckNhbmNlbGxlZCxiZWZvcmVBcHBlYXI9ZGF0YS5iZWZvcmVBcHBlYXIsYXBwZWFyPWRhdGEuYXBwZWFyLGFmdGVyQXBwZWFyPWRhdGEuYWZ0ZXJBcHBlYXIsYXBwZWFyQ2FuY2VsbGVkPWRhdGEuYXBwZWFyQ2FuY2VsbGVkLGR1cmF0aW9uPWRhdGEuZHVyYXRpb24sY29udGV4dD1hY3RpdmVJbnN0YW5jZSx0cmFuc2l0aW9uTm9kZT1hY3RpdmVJbnN0YW5jZS4kdm5vZGU7dHJhbnNpdGlvbk5vZGUmJnRyYW5zaXRpb25Ob2RlLnBhcmVudDspY29udGV4dD0odHJhbnNpdGlvbk5vZGU9dHJhbnNpdGlvbk5vZGUucGFyZW50KS5jb250ZXh0O3ZhciBpc0FwcGVhcj0hY29udGV4dC5faXNNb3VudGVkfHwhdm5vZGUuaXNSb290SW5zZXJ0O2lmKCFpc0FwcGVhcnx8YXBwZWFyfHwiIj09PWFwcGVhcil7dmFyIHN0YXJ0Q2xhc3M9aXNBcHBlYXImJmFwcGVhckNsYXNzP2FwcGVhckNsYXNzOmVudGVyQ2xhc3MsYWN0aXZlQ2xhc3M9aXNBcHBlYXImJmFwcGVhckFjdGl2ZUNsYXNzP2FwcGVhckFjdGl2ZUNsYXNzOmVudGVyQWN0aXZlQ2xhc3MsdG9DbGFzcz1pc0FwcGVhciYmYXBwZWFyVG9DbGFzcz9hcHBlYXJUb0NsYXNzOmVudGVyVG9DbGFzcyxiZWZvcmVFbnRlckhvb2s9aXNBcHBlYXImJmJlZm9yZUFwcGVhcnx8YmVmb3JlRW50ZXIsZW50ZXJIb29rPWlzQXBwZWFyJiYiZnVuY3Rpb24iPT10eXBlb2YgYXBwZWFyP2FwcGVhcjplbnRlcixhZnRlckVudGVySG9vaz1pc0FwcGVhciYmYWZ0ZXJBcHBlYXJ8fGFmdGVyRW50ZXIsZW50ZXJDYW5jZWxsZWRIb29rPWlzQXBwZWFyJiZhcHBlYXJDYW5jZWxsZWR8fGVudGVyQ2FuY2VsbGVkLGV4cGxpY2l0RW50ZXJEdXJhdGlvbj10b051bWJlcihpc09iamVjdChkdXJhdGlvbik/ZHVyYXRpb24uZW50ZXI6ZHVyYXRpb24pOzA7dmFyIGV4cGVjdHNDU1M9ITEhPT1jc3MmJiFpc0lFOSx1c2VyV2FudHNDb250cm9sPWdldEhvb2tBcmd1bWVudHNMZW5ndGgoZW50ZXJIb29rKSxjYj1lbC5fZW50ZXJDYj1vbmNlKGZ1bmN0aW9uKCl7ZXhwZWN0c0NTUyYmKHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCx0b0NsYXNzKSxyZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsYWN0aXZlQ2xhc3MpKSxjYi5jYW5jZWxsZWQ/KGV4cGVjdHNDU1MmJnJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCxzdGFydENsYXNzKSxlbnRlckNhbmNlbGxlZEhvb2smJmVudGVyQ2FuY2VsbGVkSG9vayhlbCkpOmFmdGVyRW50ZXJIb29rJiZhZnRlckVudGVySG9vayhlbCksZWwuX2VudGVyQ2I9bnVsbH0pO3Zub2RlLmRhdGEuc2hvd3x8bWVyZ2VWTm9kZUhvb2sodm5vZGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgcGFyZW50PWVsLnBhcmVudE5vZGUscGVuZGluZ05vZGU9cGFyZW50JiZwYXJlbnQuX3BlbmRpbmcmJnBhcmVudC5fcGVuZGluZ1t2bm9kZS5rZXldO3BlbmRpbmdOb2RlJiZwZW5kaW5nTm9kZS50YWc9PT12bm9kZS50YWcmJnBlbmRpbmdOb2RlLmVsbS5fbGVhdmVDYiYmcGVuZGluZ05vZGUuZWxtLl9sZWF2ZUNiKCksZW50ZXJIb29rJiZlbnRlckhvb2soZWwsY2IpfSksYmVmb3JlRW50ZXJIb29rJiZiZWZvcmVFbnRlckhvb2soZWwpLGV4cGVjdHNDU1MmJihhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsc3RhcnRDbGFzcyksYWRkVHJhbnNpdGlvbkNsYXNzKGVsLGFjdGl2ZUNsYXNzKSxuZXh0RnJhbWUoZnVuY3Rpb24oKXtyZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsc3RhcnRDbGFzcyksY2IuY2FuY2VsbGVkfHwoYWRkVHJhbnNpdGlvbkNsYXNzKGVsLHRvQ2xhc3MpLHVzZXJXYW50c0NvbnRyb2x8fChpc1ZhbGlkRHVyYXRpb24oZXhwbGljaXRFbnRlckR1cmF0aW9uKT9zZXRUaW1lb3V0KGNiLGV4cGxpY2l0RW50ZXJEdXJhdGlvbik6d2hlblRyYW5zaXRpb25FbmRzKGVsLHR5cGUsY2IpKSl9KSksdm5vZGUuZGF0YS5zaG93JiYodG9nZ2xlRGlzcGxheSYmdG9nZ2xlRGlzcGxheSgpLGVudGVySG9vayYmZW50ZXJIb29rKGVsLGNiKSksZXhwZWN0c0NTU3x8dXNlcldhbnRzQ29udHJvbHx8Y2IoKX19fWZ1bmN0aW9uIGxlYXZlKHZub2RlLHJtKXt2YXIgZWw9dm5vZGUuZWxtO2lzRGVmKGVsLl9lbnRlckNiKSYmKGVsLl9lbnRlckNiLmNhbmNlbGxlZD0hMCxlbC5fZW50ZXJDYigpKTt2YXIgZGF0YT1yZXNvbHZlVHJhbnNpdGlvbih2bm9kZS5kYXRhLnRyYW5zaXRpb24pO2lmKGlzVW5kZWYoZGF0YSl8fDEhPT1lbC5ub2RlVHlwZSlyZXR1cm4gcm0oKTtpZighaXNEZWYoZWwuX2xlYXZlQ2IpKXt2YXIgY3NzPWRhdGEuY3NzLHR5cGU9ZGF0YS50eXBlLGxlYXZlQ2xhc3M9ZGF0YS5sZWF2ZUNsYXNzLGxlYXZlVG9DbGFzcz1kYXRhLmxlYXZlVG9DbGFzcyxsZWF2ZUFjdGl2ZUNsYXNzPWRhdGEubGVhdmVBY3RpdmVDbGFzcyxiZWZvcmVMZWF2ZT1kYXRhLmJlZm9yZUxlYXZlLGxlYXZlPWRhdGEubGVhdmUsYWZ0ZXJMZWF2ZT1kYXRhLmFmdGVyTGVhdmUsbGVhdmVDYW5jZWxsZWQ9ZGF0YS5sZWF2ZUNhbmNlbGxlZCxkZWxheUxlYXZlPWRhdGEuZGVsYXlMZWF2ZSxkdXJhdGlvbj1kYXRhLmR1cmF0aW9uLGV4cGVjdHNDU1M9ITEhPT1jc3MmJiFpc0lFOSx1c2VyV2FudHNDb250cm9sPWdldEhvb2tBcmd1bWVudHNMZW5ndGgobGVhdmUpLGV4cGxpY2l0TGVhdmVEdXJhdGlvbj10b051bWJlcihpc09iamVjdChkdXJhdGlvbik/ZHVyYXRpb24ubGVhdmU6ZHVyYXRpb24pOzA7dmFyIGNiPWVsLl9sZWF2ZUNiPW9uY2UoZnVuY3Rpb24oKXtlbC5wYXJlbnROb2RlJiZlbC5wYXJlbnROb2RlLl9wZW5kaW5nJiYoZWwucGFyZW50Tm9kZS5fcGVuZGluZ1t2bm9kZS5rZXldPW51bGwpLGV4cGVjdHNDU1MmJihyZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsbGVhdmVUb0NsYXNzKSxyZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsbGVhdmVBY3RpdmVDbGFzcykpLGNiLmNhbmNlbGxlZD8oZXhwZWN0c0NTUyYmcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLGxlYXZlQ2xhc3MpLGxlYXZlQ2FuY2VsbGVkJiZsZWF2ZUNhbmNlbGxlZChlbCkpOihybSgpLGFmdGVyTGVhdmUmJmFmdGVyTGVhdmUoZWwpKSxlbC5fbGVhdmVDYj1udWxsfSk7ZGVsYXlMZWF2ZT9kZWxheUxlYXZlKHBlcmZvcm1MZWF2ZSk6cGVyZm9ybUxlYXZlKCl9ZnVuY3Rpb24gcGVyZm9ybUxlYXZlKCl7Y2IuY2FuY2VsbGVkfHwodm5vZGUuZGF0YS5zaG93fHwoKGVsLnBhcmVudE5vZGUuX3BlbmRpbmd8fChlbC5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbdm5vZGUua2V5XT12bm9kZSksYmVmb3JlTGVhdmUmJmJlZm9yZUxlYXZlKGVsKSxleHBlY3RzQ1NTJiYoYWRkVHJhbnNpdGlvbkNsYXNzKGVsLGxlYXZlQ2xhc3MpLGFkZFRyYW5zaXRpb25DbGFzcyhlbCxsZWF2ZUFjdGl2ZUNsYXNzKSxuZXh0RnJhbWUoZnVuY3Rpb24oKXtyZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsbGVhdmVDbGFzcyksY2IuY2FuY2VsbGVkfHwoYWRkVHJhbnNpdGlvbkNsYXNzKGVsLGxlYXZlVG9DbGFzcyksdXNlcldhbnRzQ29udHJvbHx8KGlzVmFsaWREdXJhdGlvbihleHBsaWNpdExlYXZlRHVyYXRpb24pP3NldFRpbWVvdXQoY2IsZXhwbGljaXRMZWF2ZUR1cmF0aW9uKTp3aGVuVHJhbnNpdGlvbkVuZHMoZWwsdHlwZSxjYikpKX0pKSxsZWF2ZSYmbGVhdmUoZWwsY2IpLGV4cGVjdHNDU1N8fHVzZXJXYW50c0NvbnRyb2x8fGNiKCkpfX1mdW5jdGlvbiBpc1ZhbGlkRHVyYXRpb24odmFsKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHZhbCYmIWlzTmFOKHZhbCl9ZnVuY3Rpb24gZ2V0SG9va0FyZ3VtZW50c0xlbmd0aChmbil7aWYoaXNVbmRlZihmbikpcmV0dXJuITE7dmFyIGludm9rZXJGbnM9Zm4uZm5zO3JldHVybiBpc0RlZihpbnZva2VyRm5zKT9nZXRIb29rQXJndW1lbnRzTGVuZ3RoKEFycmF5LmlzQXJyYXkoaW52b2tlckZucyk/aW52b2tlckZuc1swXTppbnZva2VyRm5zKToxPChmbi5fbGVuZ3RofHxmbi5sZW5ndGgpfWZ1bmN0aW9uIF9lbnRlcihfLHZub2RlKXshMCE9PXZub2RlLmRhdGEuc2hvdyYmZW50ZXIodm5vZGUpfXZhciBwYXRjaD1mdW5jdGlvbihiYWNrZW5kKXt2YXIgaSxqLGNicz17fSxtb2R1bGVzPWJhY2tlbmQubW9kdWxlcyxub2RlT3BzPWJhY2tlbmQubm9kZU9wcztmb3IoaT0wO2k8aG9va3MubGVuZ3RoOysraSlmb3IoY2JzW2hvb2tzW2ldXT1bXSxqPTA7ajxtb2R1bGVzLmxlbmd0aDsrK2opaXNEZWYobW9kdWxlc1tqXVtob29rc1tpXV0pJiZjYnNbaG9va3NbaV1dLnB1c2gobW9kdWxlc1tqXVtob29rc1tpXV0pO2Z1bmN0aW9uIHJlbW92ZU5vZGUoZWwpe3ZhciBwYXJlbnQ9bm9kZU9wcy5wYXJlbnROb2RlKGVsKTtpc0RlZihwYXJlbnQpJiZub2RlT3BzLnJlbW92ZUNoaWxkKHBhcmVudCxlbCl9ZnVuY3Rpb24gY3JlYXRlRWxtKHZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSxwYXJlbnRFbG0scmVmRWxtLG5lc3RlZCxvd25lckFycmF5LGluZGV4KXtpZihpc0RlZih2bm9kZS5lbG0pJiZpc0RlZihvd25lckFycmF5KSYmKHZub2RlPW93bmVyQXJyYXlbaW5kZXhdPWNsb25lVk5vZGUodm5vZGUpKSx2bm9kZS5pc1Jvb3RJbnNlcnQ9IW5lc3RlZCwhZnVuY3Rpb24odm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlLHBhcmVudEVsbSxyZWZFbG0pe3ZhciBpPXZub2RlLmRhdGE7aWYoaXNEZWYoaSkpe3ZhciBpc1JlYWN0aXZhdGVkPWlzRGVmKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSYmaS5rZWVwQWxpdmU7aWYoaXNEZWYoaT1pLmhvb2spJiZpc0RlZihpPWkuaW5pdCkmJmkodm5vZGUsITEscGFyZW50RWxtLHJlZkVsbSksaXNEZWYodm5vZGUuY29tcG9uZW50SW5zdGFuY2UpKXJldHVybiBpbml0Q29tcG9uZW50KHZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSksaXNUcnVlKGlzUmVhY3RpdmF0ZWQpJiZmdW5jdGlvbih2bm9kZSxpbnNlcnRlZFZub2RlUXVldWUscGFyZW50RWxtLHJlZkVsbSl7Zm9yKHZhciBpLGlubmVyTm9kZT12bm9kZTtpbm5lck5vZGUuY29tcG9uZW50SW5zdGFuY2U7KWlmKGlubmVyTm9kZT1pbm5lck5vZGUuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlLGlzRGVmKGk9aW5uZXJOb2RlLmRhdGEpJiZpc0RlZihpPWkudHJhbnNpdGlvbikpe2ZvcihpPTA7aTxjYnMuYWN0aXZhdGUubGVuZ3RoOysraSljYnMuYWN0aXZhdGVbaV0oZW1wdHlOb2RlLGlubmVyTm9kZSk7aW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2goaW5uZXJOb2RlKTticmVha31pbnNlcnQocGFyZW50RWxtLHZub2RlLmVsbSxyZWZFbG0pfSh2bm9kZSxpbnNlcnRlZFZub2RlUXVldWUscGFyZW50RWxtLHJlZkVsbSksITB9fSh2bm9kZSxpbnNlcnRlZFZub2RlUXVldWUscGFyZW50RWxtLHJlZkVsbSkpe3ZhciBkYXRhPXZub2RlLmRhdGEsY2hpbGRyZW49dm5vZGUuY2hpbGRyZW4sdGFnPXZub2RlLnRhZztpc0RlZih0YWcpPyh2bm9kZS5lbG09dm5vZGUubnM/bm9kZU9wcy5jcmVhdGVFbGVtZW50TlModm5vZGUubnMsdGFnKTpub2RlT3BzLmNyZWF0ZUVsZW1lbnQodGFnLHZub2RlKSxzZXRTY29wZSh2bm9kZSksY3JlYXRlQ2hpbGRyZW4odm5vZGUsY2hpbGRyZW4saW5zZXJ0ZWRWbm9kZVF1ZXVlKSxpc0RlZihkYXRhKSYmaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlKSk6aXNUcnVlKHZub2RlLmlzQ29tbWVudCk/dm5vZGUuZWxtPW5vZGVPcHMuY3JlYXRlQ29tbWVudCh2bm9kZS50ZXh0KTp2bm9kZS5lbG09bm9kZU9wcy5jcmVhdGVUZXh0Tm9kZSh2bm9kZS50ZXh0KSxpbnNlcnQocGFyZW50RWxtLHZub2RlLmVsbSxyZWZFbG0pfX1mdW5jdGlvbiBpbml0Q29tcG9uZW50KHZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSl7aXNEZWYodm5vZGUuZGF0YS5wZW5kaW5nSW5zZXJ0KSYmKGluc2VydGVkVm5vZGVRdWV1ZS5wdXNoLmFwcGx5KGluc2VydGVkVm5vZGVRdWV1ZSx2bm9kZS5kYXRhLnBlbmRpbmdJbnNlcnQpLHZub2RlLmRhdGEucGVuZGluZ0luc2VydD1udWxsKSx2bm9kZS5lbG09dm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJGVsLGlzUGF0Y2hhYmxlKHZub2RlKT8oaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlKSxzZXRTY29wZSh2bm9kZSkpOihyZWdpc3RlclJlZih2bm9kZSksaW5zZXJ0ZWRWbm9kZVF1ZXVlLnB1c2godm5vZGUpKX1mdW5jdGlvbiBpbnNlcnQocGFyZW50LGVsbSxyZWYkJDEpe2lzRGVmKHBhcmVudCkmJihpc0RlZihyZWYkJDEpP3JlZiQkMS5wYXJlbnROb2RlPT09cGFyZW50JiZub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnQsZWxtLHJlZiQkMSk6bm9kZU9wcy5hcHBlbmRDaGlsZChwYXJlbnQsZWxtKSl9ZnVuY3Rpb24gY3JlYXRlQ2hpbGRyZW4odm5vZGUsY2hpbGRyZW4saW5zZXJ0ZWRWbm9kZVF1ZXVlKXtpZihBcnJheS5pc0FycmF5KGNoaWxkcmVuKSlmb3IodmFyIGk9MDtpPGNoaWxkcmVuLmxlbmd0aDsrK2kpY3JlYXRlRWxtKGNoaWxkcmVuW2ldLGluc2VydGVkVm5vZGVRdWV1ZSx2bm9kZS5lbG0sbnVsbCwhMCxjaGlsZHJlbixpKTtlbHNlIGlzUHJpbWl0aXZlKHZub2RlLnRleHQpJiZub2RlT3BzLmFwcGVuZENoaWxkKHZub2RlLmVsbSxub2RlT3BzLmNyZWF0ZVRleHROb2RlKFN0cmluZyh2bm9kZS50ZXh0KSkpfWZ1bmN0aW9uIGlzUGF0Y2hhYmxlKHZub2RlKXtmb3IoO3Zub2RlLmNvbXBvbmVudEluc3RhbmNlOyl2bm9kZT12bm9kZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIGlzRGVmKHZub2RlLnRhZyl9ZnVuY3Rpb24gaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlKXtmb3IodmFyIGkkMT0wO2kkMTxjYnMuY3JlYXRlLmxlbmd0aDsrK2kkMSljYnMuY3JlYXRlW2kkMV0oZW1wdHlOb2RlLHZub2RlKTtpc0RlZihpPXZub2RlLmRhdGEuaG9vaykmJihpc0RlZihpLmNyZWF0ZSkmJmkuY3JlYXRlKGVtcHR5Tm9kZSx2bm9kZSksaXNEZWYoaS5pbnNlcnQpJiZpbnNlcnRlZFZub2RlUXVldWUucHVzaCh2bm9kZSkpfWZ1bmN0aW9uIHNldFNjb3BlKHZub2RlKXt2YXIgaTtpZihpc0RlZihpPXZub2RlLmZuU2NvcGVJZCkpbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSxpKTtlbHNlIGZvcih2YXIgYW5jZXN0b3I9dm5vZGU7YW5jZXN0b3I7KWlzRGVmKGk9YW5jZXN0b3IuY29udGV4dCkmJmlzRGVmKGk9aS4kb3B0aW9ucy5fc2NvcGVJZCkmJm5vZGVPcHMuc2V0U3R5bGVTY29wZSh2bm9kZS5lbG0saSksYW5jZXN0b3I9YW5jZXN0b3IucGFyZW50O2lzRGVmKGk9YWN0aXZlSW5zdGFuY2UpJiZpIT09dm5vZGUuY29udGV4dCYmaSE9PXZub2RlLmZuQ29udGV4dCYmaXNEZWYoaT1pLiRvcHRpb25zLl9zY29wZUlkKSYmbm9kZU9wcy5zZXRTdHlsZVNjb3BlKHZub2RlLmVsbSxpKX1mdW5jdGlvbiBhZGRWbm9kZXMocGFyZW50RWxtLHJlZkVsbSx2bm9kZXMsc3RhcnRJZHgsZW5kSWR4LGluc2VydGVkVm5vZGVRdWV1ZSl7Zm9yKDtzdGFydElkeDw9ZW5kSWR4Oysrc3RhcnRJZHgpY3JlYXRlRWxtKHZub2Rlc1tzdGFydElkeF0saW5zZXJ0ZWRWbm9kZVF1ZXVlLHBhcmVudEVsbSxyZWZFbG0sITEsdm5vZGVzLHN0YXJ0SWR4KX1mdW5jdGlvbiBpbnZva2VEZXN0cm95SG9vayh2bm9kZSl7dmFyIGksaixkYXRhPXZub2RlLmRhdGE7aWYoaXNEZWYoZGF0YSkpZm9yKGlzRGVmKGk9ZGF0YS5ob29rKSYmaXNEZWYoaT1pLmRlc3Ryb3kpJiZpKHZub2RlKSxpPTA7aTxjYnMuZGVzdHJveS5sZW5ndGg7KytpKWNicy5kZXN0cm95W2ldKHZub2RlKTtpZihpc0RlZihpPXZub2RlLmNoaWxkcmVuKSlmb3Ioaj0wO2o8dm5vZGUuY2hpbGRyZW4ubGVuZ3RoOysrailpbnZva2VEZXN0cm95SG9vayh2bm9kZS5jaGlsZHJlbltqXSl9ZnVuY3Rpb24gcmVtb3ZlVm5vZGVzKHBhcmVudEVsbSx2bm9kZXMsc3RhcnRJZHgsZW5kSWR4KXtmb3IoO3N0YXJ0SWR4PD1lbmRJZHg7KytzdGFydElkeCl7dmFyIGNoPXZub2Rlc1tzdGFydElkeF07aXNEZWYoY2gpJiYoaXNEZWYoY2gudGFnKT8ocmVtb3ZlQW5kSW52b2tlUmVtb3ZlSG9vayhjaCksaW52b2tlRGVzdHJveUhvb2soY2gpKTpyZW1vdmVOb2RlKGNoLmVsbSkpfX1mdW5jdGlvbiByZW1vdmVBbmRJbnZva2VSZW1vdmVIb29rKHZub2RlLHJtKXtpZihpc0RlZihybSl8fGlzRGVmKHZub2RlLmRhdGEpKXt2YXIgaSxsaXN0ZW5lcnM9Y2JzLnJlbW92ZS5sZW5ndGgrMTtmb3IoaXNEZWYocm0pP3JtLmxpc3RlbmVycys9bGlzdGVuZXJzOnJtPWZ1bmN0aW9uKGNoaWxkRWxtLGxpc3RlbmVycyl7ZnVuY3Rpb24gcmVtb3ZlKCl7MD09LS1yZW1vdmUubGlzdGVuZXJzJiZyZW1vdmVOb2RlKGNoaWxkRWxtKX1yZXR1cm4gcmVtb3ZlLmxpc3RlbmVycz1saXN0ZW5lcnMscmVtb3ZlfSh2bm9kZS5lbG0sbGlzdGVuZXJzKSxpc0RlZihpPXZub2RlLmNvbXBvbmVudEluc3RhbmNlKSYmaXNEZWYoaT1pLl92bm9kZSkmJmlzRGVmKGkuZGF0YSkmJnJlbW92ZUFuZEludm9rZVJlbW92ZUhvb2soaSxybSksaT0wO2k8Y2JzLnJlbW92ZS5sZW5ndGg7KytpKWNicy5yZW1vdmVbaV0odm5vZGUscm0pO2lzRGVmKGk9dm5vZGUuZGF0YS5ob29rKSYmaXNEZWYoaT1pLnJlbW92ZSk/aSh2bm9kZSxybSk6cm0oKX1lbHNlIHJlbW92ZU5vZGUodm5vZGUuZWxtKX1mdW5jdGlvbiBmaW5kSWR4SW5PbGQobm9kZSxvbGRDaCxzdGFydCxlbmQpe2Zvcih2YXIgaT1zdGFydDtpPGVuZDtpKyspe3ZhciBjPW9sZENoW2ldO2lmKGlzRGVmKGMpJiZzYW1lVm5vZGUobm9kZSxjKSlyZXR1cm4gaX19ZnVuY3Rpb24gcGF0Y2hWbm9kZShvbGRWbm9kZSx2bm9kZSxpbnNlcnRlZFZub2RlUXVldWUscmVtb3ZlT25seSl7aWYob2xkVm5vZGUhPT12bm9kZSl7dmFyIGVsbT12bm9kZS5lbG09b2xkVm5vZGUuZWxtO2lmKGlzVHJ1ZShvbGRWbm9kZS5pc0FzeW5jUGxhY2Vob2xkZXIpKWlzRGVmKHZub2RlLmFzeW5jRmFjdG9yeS5yZXNvbHZlZCk/aHlkcmF0ZShvbGRWbm9kZS5lbG0sdm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlKTp2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihpc1RydWUodm5vZGUuaXNTdGF0aWMpJiZpc1RydWUob2xkVm5vZGUuaXNTdGF0aWMpJiZ2bm9kZS5rZXk9PT1vbGRWbm9kZS5rZXkmJihpc1RydWUodm5vZGUuaXNDbG9uZWQpfHxpc1RydWUodm5vZGUuaXNPbmNlKSkpdm5vZGUuY29tcG9uZW50SW5zdGFuY2U9b2xkVm5vZGUuY29tcG9uZW50SW5zdGFuY2U7ZWxzZXt2YXIgaSxkYXRhPXZub2RlLmRhdGE7aXNEZWYoZGF0YSkmJmlzRGVmKGk9ZGF0YS5ob29rKSYmaXNEZWYoaT1pLnByZXBhdGNoKSYmaShvbGRWbm9kZSx2bm9kZSk7dmFyIG9sZENoPW9sZFZub2RlLmNoaWxkcmVuLGNoPXZub2RlLmNoaWxkcmVuO2lmKGlzRGVmKGRhdGEpJiZpc1BhdGNoYWJsZSh2bm9kZSkpe2ZvcihpPTA7aTxjYnMudXBkYXRlLmxlbmd0aDsrK2kpY2JzLnVwZGF0ZVtpXShvbGRWbm9kZSx2bm9kZSk7aXNEZWYoaT1kYXRhLmhvb2spJiZpc0RlZihpPWkudXBkYXRlKSYmaShvbGRWbm9kZSx2bm9kZSl9aXNVbmRlZih2bm9kZS50ZXh0KT9pc0RlZihvbGRDaCkmJmlzRGVmKGNoKT9vbGRDaCE9PWNoJiZmdW5jdGlvbihwYXJlbnRFbG0sb2xkQ2gsbmV3Q2gsaW5zZXJ0ZWRWbm9kZVF1ZXVlLHJlbW92ZU9ubHkpe2Zvcih2YXIgb2xkS2V5VG9JZHgsaWR4SW5PbGQsdm5vZGVUb01vdmUsb2xkU3RhcnRJZHg9MCxuZXdTdGFydElkeD0wLG9sZEVuZElkeD1vbGRDaC5sZW5ndGgtMSxvbGRTdGFydFZub2RlPW9sZENoWzBdLG9sZEVuZFZub2RlPW9sZENoW29sZEVuZElkeF0sbmV3RW5kSWR4PW5ld0NoLmxlbmd0aC0xLG5ld1N0YXJ0Vm5vZGU9bmV3Q2hbMF0sbmV3RW5kVm5vZGU9bmV3Q2hbbmV3RW5kSWR4XSxjYW5Nb3ZlPSFyZW1vdmVPbmx5O29sZFN0YXJ0SWR4PD1vbGRFbmRJZHgmJm5ld1N0YXJ0SWR4PD1uZXdFbmRJZHg7KWlzVW5kZWYob2xkU3RhcnRWbm9kZSk/b2xkU3RhcnRWbm9kZT1vbGRDaFsrK29sZFN0YXJ0SWR4XTppc1VuZGVmKG9sZEVuZFZub2RlKT9vbGRFbmRWbm9kZT1vbGRDaFstLW9sZEVuZElkeF06c2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsbmV3U3RhcnRWbm9kZSk/KHBhdGNoVm5vZGUob2xkU3RhcnRWbm9kZSxuZXdTdGFydFZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSksb2xkU3RhcnRWbm9kZT1vbGRDaFsrK29sZFN0YXJ0SWR4XSxuZXdTdGFydFZub2RlPW5ld0NoWysrbmV3U3RhcnRJZHhdKTpzYW1lVm5vZGUob2xkRW5kVm5vZGUsbmV3RW5kVm5vZGUpPyhwYXRjaFZub2RlKG9sZEVuZFZub2RlLG5ld0VuZFZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSksb2xkRW5kVm5vZGU9b2xkQ2hbLS1vbGRFbmRJZHhdLG5ld0VuZFZub2RlPW5ld0NoWy0tbmV3RW5kSWR4XSk6c2FtZVZub2RlKG9sZFN0YXJ0Vm5vZGUsbmV3RW5kVm5vZGUpPyhwYXRjaFZub2RlKG9sZFN0YXJ0Vm5vZGUsbmV3RW5kVm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlKSxjYW5Nb3ZlJiZub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sb2xkU3RhcnRWbm9kZS5lbG0sbm9kZU9wcy5uZXh0U2libGluZyhvbGRFbmRWbm9kZS5lbG0pKSxvbGRTdGFydFZub2RlPW9sZENoWysrb2xkU3RhcnRJZHhdLG5ld0VuZFZub2RlPW5ld0NoWy0tbmV3RW5kSWR4XSk6KHNhbWVWbm9kZShvbGRFbmRWbm9kZSxuZXdTdGFydFZub2RlKT8ocGF0Y2hWbm9kZShvbGRFbmRWbm9kZSxuZXdTdGFydFZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSksY2FuTW92ZSYmbm9kZU9wcy5pbnNlcnRCZWZvcmUocGFyZW50RWxtLG9sZEVuZFZub2RlLmVsbSxvbGRTdGFydFZub2RlLmVsbSksb2xkRW5kVm5vZGU9b2xkQ2hbLS1vbGRFbmRJZHhdKTooaXNVbmRlZihvbGRLZXlUb0lkeCkmJihvbGRLZXlUb0lkeD1jcmVhdGVLZXlUb09sZElkeChvbGRDaCxvbGRTdGFydElkeCxvbGRFbmRJZHgpKSxpc1VuZGVmKGlkeEluT2xkPWlzRGVmKG5ld1N0YXJ0Vm5vZGUua2V5KT9vbGRLZXlUb0lkeFtuZXdTdGFydFZub2RlLmtleV06ZmluZElkeEluT2xkKG5ld1N0YXJ0Vm5vZGUsb2xkQ2gsb2xkU3RhcnRJZHgsb2xkRW5kSWR4KSk/Y3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlLHBhcmVudEVsbSxvbGRTdGFydFZub2RlLmVsbSwhMSxuZXdDaCxuZXdTdGFydElkeCk6c2FtZVZub2RlKHZub2RlVG9Nb3ZlPW9sZENoW2lkeEluT2xkXSxuZXdTdGFydFZub2RlKT8ocGF0Y2hWbm9kZSh2bm9kZVRvTW92ZSxuZXdTdGFydFZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSksb2xkQ2hbaWR4SW5PbGRdPXZvaWQgMCxjYW5Nb3ZlJiZub2RlT3BzLmluc2VydEJlZm9yZShwYXJlbnRFbG0sdm5vZGVUb01vdmUuZWxtLG9sZFN0YXJ0Vm5vZGUuZWxtKSk6Y3JlYXRlRWxtKG5ld1N0YXJ0Vm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlLHBhcmVudEVsbSxvbGRTdGFydFZub2RlLmVsbSwhMSxuZXdDaCxuZXdTdGFydElkeCkpLG5ld1N0YXJ0Vm5vZGU9bmV3Q2hbKytuZXdTdGFydElkeF0pO29sZEVuZElkeDxvbGRTdGFydElkeD9hZGRWbm9kZXMocGFyZW50RWxtLGlzVW5kZWYobmV3Q2hbbmV3RW5kSWR4KzFdKT9udWxsOm5ld0NoW25ld0VuZElkeCsxXS5lbG0sbmV3Q2gsbmV3U3RhcnRJZHgsbmV3RW5kSWR4LGluc2VydGVkVm5vZGVRdWV1ZSk6bmV3RW5kSWR4PG5ld1N0YXJ0SWR4JiZyZW1vdmVWbm9kZXMoMCxvbGRDaCxvbGRTdGFydElkeCxvbGRFbmRJZHgpfShlbG0sb2xkQ2gsY2gsaW5zZXJ0ZWRWbm9kZVF1ZXVlLHJlbW92ZU9ubHkpOmlzRGVmKGNoKT8oaXNEZWYob2xkVm5vZGUudGV4dCkmJm5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCIiKSxhZGRWbm9kZXMoZWxtLG51bGwsY2gsMCxjaC5sZW5ndGgtMSxpbnNlcnRlZFZub2RlUXVldWUpKTppc0RlZihvbGRDaCk/cmVtb3ZlVm5vZGVzKDAsb2xkQ2gsMCxvbGRDaC5sZW5ndGgtMSk6aXNEZWYob2xkVm5vZGUudGV4dCkmJm5vZGVPcHMuc2V0VGV4dENvbnRlbnQoZWxtLCIiKTpvbGRWbm9kZS50ZXh0IT09dm5vZGUudGV4dCYmbm9kZU9wcy5zZXRUZXh0Q29udGVudChlbG0sdm5vZGUudGV4dCksaXNEZWYoZGF0YSkmJmlzRGVmKGk9ZGF0YS5ob29rKSYmaXNEZWYoaT1pLnBvc3RwYXRjaCkmJmkob2xkVm5vZGUsdm5vZGUpfX19ZnVuY3Rpb24gaW52b2tlSW5zZXJ0SG9vayh2bm9kZSxxdWV1ZSxpbml0aWFsKXtpZihpc1RydWUoaW5pdGlhbCkmJmlzRGVmKHZub2RlLnBhcmVudCkpdm5vZGUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD1xdWV1ZTtlbHNlIGZvcih2YXIgaT0wO2k8cXVldWUubGVuZ3RoOysraSlxdWV1ZVtpXS5kYXRhLmhvb2suaW5zZXJ0KHF1ZXVlW2ldKX12YXIgaXNSZW5kZXJlZE1vZHVsZT1tYWtlTWFwKCJhdHRycyxjbGFzcyxzdGF0aWNDbGFzcyxzdGF0aWNTdHlsZSxrZXkiKTtmdW5jdGlvbiBoeWRyYXRlKGVsbSx2bm9kZSxpbnNlcnRlZFZub2RlUXVldWUsaW5WUHJlKXt2YXIgaSx0YWc9dm5vZGUudGFnLGRhdGE9dm5vZGUuZGF0YSxjaGlsZHJlbj12bm9kZS5jaGlsZHJlbjtpZihpblZQcmU9aW5WUHJlfHxkYXRhJiZkYXRhLnByZSx2bm9kZS5lbG09ZWxtLGlzVHJ1ZSh2bm9kZS5pc0NvbW1lbnQpJiZpc0RlZih2bm9kZS5hc3luY0ZhY3RvcnkpKXJldHVybiB2bm9kZS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7aWYoaXNEZWYoZGF0YSkmJihpc0RlZihpPWRhdGEuaG9vaykmJmlzRGVmKGk9aS5pbml0KSYmaSh2bm9kZSwhMCksaXNEZWYoaT12bm9kZS5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBpbml0Q29tcG9uZW50KHZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSksITA7aWYoaXNEZWYodGFnKSl7aWYoaXNEZWYoY2hpbGRyZW4pKWlmKGVsbS5oYXNDaGlsZE5vZGVzKCkpaWYoaXNEZWYoaT1kYXRhKSYmaXNEZWYoaT1pLmRvbVByb3BzKSYmaXNEZWYoaT1pLmlubmVySFRNTCkpe2lmKGkhPT1lbG0uaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBjaGlsZHJlbk1hdGNoPSEwLGNoaWxkTm9kZT1lbG0uZmlyc3RDaGlsZCxpJDE9MDtpJDE8Y2hpbGRyZW4ubGVuZ3RoO2kkMSsrKXtpZighY2hpbGROb2RlfHwhaHlkcmF0ZShjaGlsZE5vZGUsY2hpbGRyZW5baSQxXSxpbnNlcnRlZFZub2RlUXVldWUsaW5WUHJlKSl7Y2hpbGRyZW5NYXRjaD0hMTticmVha31jaGlsZE5vZGU9Y2hpbGROb2RlLm5leHRTaWJsaW5nfWlmKCFjaGlsZHJlbk1hdGNofHxjaGlsZE5vZGUpcmV0dXJuITF9ZWxzZSBjcmVhdGVDaGlsZHJlbih2bm9kZSxjaGlsZHJlbixpbnNlcnRlZFZub2RlUXVldWUpO2lmKGlzRGVmKGRhdGEpKXt2YXIgZnVsbEludm9rZT0hMTtmb3IodmFyIGtleSBpbiBkYXRhKWlmKCFpc1JlbmRlcmVkTW9kdWxlKGtleSkpe2Z1bGxJbnZva2U9ITAsaW52b2tlQ3JlYXRlSG9va3Modm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlKTticmVha30hZnVsbEludm9rZSYmZGF0YS5jbGFzcyYmdHJhdmVyc2UoZGF0YS5jbGFzcyl9fWVsc2UgZWxtLmRhdGEhPT12bm9kZS50ZXh0JiYoZWxtLmRhdGE9dm5vZGUudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKG9sZFZub2RlLHZub2RlLGh5ZHJhdGluZyxyZW1vdmVPbmx5LHBhcmVudEVsbSxyZWZFbG0pe2lmKCFpc1VuZGVmKHZub2RlKSl7dmFyIGVsbSxpc0luaXRpYWxQYXRjaD0hMSxpbnNlcnRlZFZub2RlUXVldWU9W107aWYoaXNVbmRlZihvbGRWbm9kZSkpaXNJbml0aWFsUGF0Y2g9ITAsY3JlYXRlRWxtKHZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSxwYXJlbnRFbG0scmVmRWxtKTtlbHNle3ZhciBpc1JlYWxFbGVtZW50PWlzRGVmKG9sZFZub2RlLm5vZGVUeXBlKTtpZighaXNSZWFsRWxlbWVudCYmc2FtZVZub2RlKG9sZFZub2RlLHZub2RlKSlwYXRjaFZub2RlKG9sZFZub2RlLHZub2RlLGluc2VydGVkVm5vZGVRdWV1ZSxyZW1vdmVPbmx5KTtlbHNle2lmKGlzUmVhbEVsZW1lbnQpe2lmKDE9PT1vbGRWbm9kZS5ub2RlVHlwZSYmb2xkVm5vZGUuaGFzQXR0cmlidXRlKCJkYXRhLXNlcnZlci1yZW5kZXJlZCIpJiYob2xkVm5vZGUucmVtb3ZlQXR0cmlidXRlKCJkYXRhLXNlcnZlci1yZW5kZXJlZCIpLGh5ZHJhdGluZz0hMCksaXNUcnVlKGh5ZHJhdGluZykmJmh5ZHJhdGUob2xkVm5vZGUsdm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlKSlyZXR1cm4gaW52b2tlSW5zZXJ0SG9vayh2bm9kZSxpbnNlcnRlZFZub2RlUXVldWUsITApLG9sZFZub2RlO2VsbT1vbGRWbm9kZSxvbGRWbm9kZT1uZXcgVk5vZGUobm9kZU9wcy50YWdOYW1lKGVsbSkudG9Mb3dlckNhc2UoKSx7fSxbXSx2b2lkIDAsZWxtKX12YXIgb2xkRWxtPW9sZFZub2RlLmVsbSxwYXJlbnRFbG0kMT1ub2RlT3BzLnBhcmVudE5vZGUob2xkRWxtKTtpZihjcmVhdGVFbG0odm5vZGUsaW5zZXJ0ZWRWbm9kZVF1ZXVlLG9sZEVsbS5fbGVhdmVDYj9udWxsOnBhcmVudEVsbSQxLG5vZGVPcHMubmV4dFNpYmxpbmcob2xkRWxtKSksaXNEZWYodm5vZGUucGFyZW50KSlmb3IodmFyIGFuY2VzdG9yPXZub2RlLnBhcmVudCxwYXRjaGFibGU9aXNQYXRjaGFibGUodm5vZGUpO2FuY2VzdG9yOyl7Zm9yKHZhciBpPTA7aTxjYnMuZGVzdHJveS5sZW5ndGg7KytpKWNicy5kZXN0cm95W2ldKGFuY2VzdG9yKTtpZihhbmNlc3Rvci5lbG09dm5vZGUuZWxtLHBhdGNoYWJsZSl7Zm9yKHZhciBpJDE9MDtpJDE8Y2JzLmNyZWF0ZS5sZW5ndGg7KytpJDEpY2JzLmNyZWF0ZVtpJDFdKGVtcHR5Tm9kZSxhbmNlc3Rvcik7dmFyIGluc2VydD1hbmNlc3Rvci5kYXRhLmhvb2suaW5zZXJ0O2lmKGluc2VydC5tZXJnZWQpZm9yKHZhciBpJDI9MTtpJDI8aW5zZXJ0LmZucy5sZW5ndGg7aSQyKyspaW5zZXJ0LmZuc1tpJDJdKCl9ZWxzZSByZWdpc3RlclJlZihhbmNlc3Rvcik7YW5jZXN0b3I9YW5jZXN0b3IucGFyZW50fWlzRGVmKHBhcmVudEVsbSQxKT9yZW1vdmVWbm9kZXMoMCxbb2xkVm5vZGVdLDAsMCk6aXNEZWYob2xkVm5vZGUudGFnKSYmaW52b2tlRGVzdHJveUhvb2sob2xkVm5vZGUpfX1yZXR1cm4gaW52b2tlSW5zZXJ0SG9vayh2bm9kZSxpbnNlcnRlZFZub2RlUXVldWUsaXNJbml0aWFsUGF0Y2gpLHZub2RlLmVsbX1pc0RlZihvbGRWbm9kZSkmJmludm9rZURlc3Ryb3lIb29rKG9sZFZub2RlKX19KHtub2RlT3BzOm5vZGVPcHMsbW9kdWxlczpbYXR0cnMsa2xhc3MsZXZlbnRzLGRvbVByb3BzLHN0eWxlLGluQnJvd3Nlcj97Y3JlYXRlOl9lbnRlcixhY3RpdmF0ZTpfZW50ZXIscmVtb3ZlOmZ1bmN0aW9uKHZub2RlLHJtKXshMCE9PXZub2RlLmRhdGEuc2hvdz9sZWF2ZSh2bm9kZSxybSk6cm0oKX19Ont9XS5jb25jYXQoYmFzZU1vZHVsZXMpfSk7aXNJRTkmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZWw9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtlbCYmZWwudm1vZGVsJiZ0cmlnZ2VyKGVsLCJpbnB1dCIpfSk7dmFyIGRpcmVjdGl2ZT17aW5zZXJ0ZWQ6ZnVuY3Rpb24oZWwsYmluZGluZyx2bm9kZSxvbGRWbm9kZSl7InNlbGVjdCI9PT12bm9kZS50YWc/KG9sZFZub2RlLmVsbSYmIW9sZFZub2RlLmVsbS5fdk9wdGlvbnM/bWVyZ2VWTm9kZUhvb2sodm5vZGUsInBvc3RwYXRjaCIsZnVuY3Rpb24oKXtkaXJlY3RpdmUuY29tcG9uZW50VXBkYXRlZChlbCxiaW5kaW5nLHZub2RlKX0pOnNldFNlbGVjdGVkKGVsLGJpbmRpbmcsdm5vZGUuY29udGV4dCksZWwuX3ZPcHRpb25zPVtdLm1hcC5jYWxsKGVsLm9wdGlvbnMsZ2V0VmFsdWUpKTooInRleHRhcmVhIj09PXZub2RlLnRhZ3x8aXNUZXh0SW5wdXRUeXBlKGVsLnR5cGUpKSYmKGVsLl92TW9kaWZpZXJzPWJpbmRpbmcubW9kaWZpZXJzLGJpbmRpbmcubW9kaWZpZXJzLmxhenl8fChlbC5hZGRFdmVudExpc3RlbmVyKCJjb21wb3NpdGlvbnN0YXJ0IixvbkNvbXBvc2l0aW9uU3RhcnQpLGVsLmFkZEV2ZW50TGlzdGVuZXIoImNvbXBvc2l0aW9uZW5kIixvbkNvbXBvc2l0aW9uRW5kKSxlbC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLG9uQ29tcG9zaXRpb25FbmQpLGlzSUU5JiYoZWwudm1vZGVsPSEwKSkpfSxjb21wb25lbnRVcGRhdGVkOmZ1bmN0aW9uKGVsLGJpbmRpbmcsdm5vZGUpe2lmKCJzZWxlY3QiPT09dm5vZGUudGFnKXtzZXRTZWxlY3RlZChlbCxiaW5kaW5nLHZub2RlLmNvbnRleHQpO3ZhciBwcmV2T3B0aW9ucz1lbC5fdk9wdGlvbnMsY3VyT3B0aW9ucz1lbC5fdk9wdGlvbnM9W10ubWFwLmNhbGwoZWwub3B0aW9ucyxnZXRWYWx1ZSk7aWYoY3VyT3B0aW9ucy5zb21lKGZ1bmN0aW9uKG8saSl7cmV0dXJuIWxvb3NlRXF1YWwobyxwcmV2T3B0aW9uc1tpXSl9KSkoZWwubXVsdGlwbGU/YmluZGluZy52YWx1ZS5zb21lKGZ1bmN0aW9uKHYpe3JldHVybiBoYXNOb01hdGNoaW5nT3B0aW9uKHYsY3VyT3B0aW9ucyl9KTpiaW5kaW5nLnZhbHVlIT09YmluZGluZy5vbGRWYWx1ZSYmaGFzTm9NYXRjaGluZ09wdGlvbihiaW5kaW5nLnZhbHVlLGN1ck9wdGlvbnMpKSYmdHJpZ2dlcihlbCwiY2hhbmdlIil9fX07ZnVuY3Rpb24gc2V0U2VsZWN0ZWQoZWwsYmluZGluZyx2bSl7YWN0dWFsbHlTZXRTZWxlY3RlZChlbCxiaW5kaW5nLHZtKSwoaXNJRXx8aXNFZGdlKSYmc2V0VGltZW91dChmdW5jdGlvbigpe2FjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsYmluZGluZyx2bSl9LDApfWZ1bmN0aW9uIGFjdHVhbGx5U2V0U2VsZWN0ZWQoZWwsYmluZGluZyx2bSl7dmFyIHZhbHVlPWJpbmRpbmcudmFsdWUsaXNNdWx0aXBsZT1lbC5tdWx0aXBsZTtpZighaXNNdWx0aXBsZXx8QXJyYXkuaXNBcnJheSh2YWx1ZSkpe2Zvcih2YXIgc2VsZWN0ZWQsb3B0aW9uLGk9MCxsPWVsLm9wdGlvbnMubGVuZ3RoO2k8bDtpKyspaWYob3B0aW9uPWVsLm9wdGlvbnNbaV0saXNNdWx0aXBsZSlzZWxlY3RlZD0tMTxsb29zZUluZGV4T2YodmFsdWUsZ2V0VmFsdWUob3B0aW9uKSksb3B0aW9uLnNlbGVjdGVkIT09c2VsZWN0ZWQmJihvcHRpb24uc2VsZWN0ZWQ9c2VsZWN0ZWQpO2Vsc2UgaWYobG9vc2VFcXVhbChnZXRWYWx1ZShvcHRpb24pLHZhbHVlKSlyZXR1cm4gdm9pZChlbC5zZWxlY3RlZEluZGV4IT09aSYmKGVsLnNlbGVjdGVkSW5kZXg9aSkpO2lzTXVsdGlwbGV8fChlbC5zZWxlY3RlZEluZGV4PS0xKX19ZnVuY3Rpb24gaGFzTm9NYXRjaGluZ09wdGlvbih2YWx1ZSxvcHRpb25zKXtyZXR1cm4gb3B0aW9ucy5ldmVyeShmdW5jdGlvbihvKXtyZXR1cm4hbG9vc2VFcXVhbChvLHZhbHVlKX0pfWZ1bmN0aW9uIGdldFZhbHVlKG9wdGlvbil7cmV0dXJuIl92YWx1ZSJpbiBvcHRpb24/b3B0aW9uLl92YWx1ZTpvcHRpb24udmFsdWV9ZnVuY3Rpb24gb25Db21wb3NpdGlvblN0YXJ0KGUpe2UudGFyZ2V0LmNvbXBvc2luZz0hMH1mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kKGUpe2UudGFyZ2V0LmNvbXBvc2luZyYmKGUudGFyZ2V0LmNvbXBvc2luZz0hMSx0cmlnZ2VyKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiB0cmlnZ2VyKGVsLHR5cGUpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7ZS5pbml0RXZlbnQodHlwZSwhMCwhMCksZWwuZGlzcGF0Y2hFdmVudChlKX1mdW5jdGlvbiBsb2NhdGVOb2RlKHZub2RlKXtyZXR1cm4hdm5vZGUuY29tcG9uZW50SW5zdGFuY2V8fHZub2RlLmRhdGEmJnZub2RlLmRhdGEudHJhbnNpdGlvbj92bm9kZTpsb2NhdGVOb2RlKHZub2RlLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSl9dmFyIHBsYXRmb3JtRGlyZWN0aXZlcz17bW9kZWw6ZGlyZWN0aXZlLHNob3c6e2JpbmQ6ZnVuY3Rpb24oZWwscmVmLHZub2RlKXt2YXIgdmFsdWU9cmVmLnZhbHVlLHRyYW5zaXRpb24kJDE9KHZub2RlPWxvY2F0ZU5vZGUodm5vZGUpKS5kYXRhJiZ2bm9kZS5kYXRhLnRyYW5zaXRpb24sb3JpZ2luYWxEaXNwbGF5PWVsLl9fdk9yaWdpbmFsRGlzcGxheT0ibm9uZSI9PT1lbC5zdHlsZS5kaXNwbGF5PyIiOmVsLnN0eWxlLmRpc3BsYXk7dmFsdWUmJnRyYW5zaXRpb24kJDE/KHZub2RlLmRhdGEuc2hvdz0hMCxlbnRlcih2bm9kZSxmdW5jdGlvbigpe2VsLnN0eWxlLmRpc3BsYXk9b3JpZ2luYWxEaXNwbGF5fSkpOmVsLnN0eWxlLmRpc3BsYXk9dmFsdWU/b3JpZ2luYWxEaXNwbGF5OiJub25lIn0sdXBkYXRlOmZ1bmN0aW9uKGVsLHJlZix2bm9kZSl7dmFyIHZhbHVlPXJlZi52YWx1ZTshdmFsdWUhPSFyZWYub2xkVmFsdWUmJigodm5vZGU9bG9jYXRlTm9kZSh2bm9kZSkpLmRhdGEmJnZub2RlLmRhdGEudHJhbnNpdGlvbj8odm5vZGUuZGF0YS5zaG93PSEwLHZhbHVlP2VudGVyKHZub2RlLGZ1bmN0aW9uKCl7ZWwuc3R5bGUuZGlzcGxheT1lbC5fX3ZPcmlnaW5hbERpc3BsYXl9KTpsZWF2ZSh2bm9kZSxmdW5jdGlvbigpe2VsLnN0eWxlLmRpc3BsYXk9Im5vbmUifSkpOmVsLnN0eWxlLmRpc3BsYXk9dmFsdWU/ZWwuX192T3JpZ2luYWxEaXNwbGF5OiJub25lIil9LHVuYmluZDpmdW5jdGlvbihlbCxiaW5kaW5nLHZub2RlLG9sZFZub2RlLGlzRGVzdHJveSl7aXNEZXN0cm95fHwoZWwuc3R5bGUuZGlzcGxheT1lbC5fX3ZPcmlnaW5hbERpc3BsYXkpfX19LHRyYW5zaXRpb25Qcm9wcz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gZ2V0UmVhbENoaWxkKHZub2RlKXt2YXIgY29tcE9wdGlvbnM9dm5vZGUmJnZub2RlLmNvbXBvbmVudE9wdGlvbnM7cmV0dXJuIGNvbXBPcHRpb25zJiZjb21wT3B0aW9ucy5DdG9yLm9wdGlvbnMuYWJzdHJhY3Q/Z2V0UmVhbENoaWxkKGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoY29tcE9wdGlvbnMuY2hpbGRyZW4pKTp2bm9kZX1mdW5jdGlvbiBleHRyYWN0VHJhbnNpdGlvbkRhdGEoY29tcCl7dmFyIGRhdGE9e30sb3B0aW9ucz1jb21wLiRvcHRpb25zO2Zvcih2YXIga2V5IGluIG9wdGlvbnMucHJvcHNEYXRhKWRhdGFba2V5XT1jb21wW2tleV07dmFyIGxpc3RlbmVycz1vcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBrZXkkMSBpbiBsaXN0ZW5lcnMpZGF0YVtjYW1lbGl6ZShrZXkkMSldPWxpc3RlbmVyc1trZXkkMV07cmV0dXJuIGRhdGF9ZnVuY3Rpb24gcGxhY2Vob2xkZXIoaCxyYXdDaGlsZCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHJhd0NoaWxkLnRhZykpcmV0dXJuIGgoImtlZXAtYWxpdmUiLHtwcm9wczpyYXdDaGlsZC5jb21wb25lbnRPcHRpb25zLnByb3BzRGF0YX0pfXZhciBUcmFuc2l0aW9uPXtuYW1lOiJ0cmFuc2l0aW9uIixwcm9wczp0cmFuc2l0aW9uUHJvcHMsYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciB0aGlzJDE9dGhpcyxjaGlsZHJlbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKGNoaWxkcmVuJiYoY2hpbGRyZW49Y2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGMpe3JldHVybiBjLnRhZ3x8aXNBc3luY1BsYWNlaG9sZGVyKGMpfSkpLmxlbmd0aCl7MDt2YXIgbW9kZT10aGlzLm1vZGU7MDt2YXIgcmF3Q2hpbGQ9Y2hpbGRyZW5bMF07aWYoZnVuY3Rpb24odm5vZGUpe2Zvcig7dm5vZGU9dm5vZGUucGFyZW50OylpZih2bm9kZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gcmF3Q2hpbGQ7dmFyIGNoaWxkPWdldFJlYWxDaGlsZChyYXdDaGlsZCk7aWYoIWNoaWxkKXJldHVybiByYXdDaGlsZDtpZih0aGlzLl9sZWF2aW5nKXJldHVybiBwbGFjZWhvbGRlcihoLHJhd0NoaWxkKTt2YXIgaWQ9Il9fdHJhbnNpdGlvbi0iK3RoaXMuX3VpZCsiLSI7Y2hpbGQua2V5PW51bGw9PWNoaWxkLmtleT9jaGlsZC5pc0NvbW1lbnQ/aWQrImNvbW1lbnQiOmlkK2NoaWxkLnRhZzppc1ByaW1pdGl2ZShjaGlsZC5rZXkpPzA9PT1TdHJpbmcoY2hpbGQua2V5KS5pbmRleE9mKGlkKT9jaGlsZC5rZXk6aWQrY2hpbGQua2V5OmNoaWxkLmtleTt2YXIgZGF0YT0oY2hpbGQuZGF0YXx8KGNoaWxkLmRhdGE9e30pKS50cmFuc2l0aW9uPWV4dHJhY3RUcmFuc2l0aW9uRGF0YSh0aGlzKSxvbGRSYXdDaGlsZD10aGlzLl92bm9kZSxvbGRDaGlsZD1nZXRSZWFsQ2hpbGQob2xkUmF3Q2hpbGQpO2lmKGNoaWxkLmRhdGEuZGlyZWN0aXZlcyYmY2hpbGQuZGF0YS5kaXJlY3RpdmVzLnNvbWUoZnVuY3Rpb24oZCl7cmV0dXJuInNob3ciPT09ZC5uYW1lfSkmJihjaGlsZC5kYXRhLnNob3c9ITApLG9sZENoaWxkJiZvbGRDaGlsZC5kYXRhJiYhZnVuY3Rpb24oY2hpbGQsb2xkQ2hpbGQpe3JldHVybiBvbGRDaGlsZC5rZXk9PT1jaGlsZC5rZXkmJm9sZENoaWxkLnRhZz09PWNoaWxkLnRhZ30oY2hpbGQsb2xkQ2hpbGQpJiYhaXNBc3luY1BsYWNlaG9sZGVyKG9sZENoaWxkKSYmKCFvbGRDaGlsZC5jb21wb25lbnRJbnN0YW5jZXx8IW9sZENoaWxkLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgb2xkRGF0YT1vbGRDaGlsZC5kYXRhLnRyYW5zaXRpb249ZXh0ZW5kKHt9LGRhdGEpO2lmKCJvdXQtaW4iPT09bW9kZSlyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxtZXJnZVZOb2RlSG9vayhvbGREYXRhLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3RoaXMkMS5fbGVhdmluZz0hMSx0aGlzJDEuJGZvcmNlVXBkYXRlKCl9KSxwbGFjZWhvbGRlcihoLHJhd0NoaWxkKTtpZigiaW4tb3V0Ij09PW1vZGUpe2lmKGlzQXN5bmNQbGFjZWhvbGRlcihjaGlsZCkpcmV0dXJuIG9sZFJhd0NoaWxkO3ZhciBkZWxheWVkTGVhdmUscGVyZm9ybUxlYXZlPWZ1bmN0aW9uKCl7ZGVsYXllZExlYXZlKCl9O21lcmdlVk5vZGVIb29rKGRhdGEsImFmdGVyRW50ZXIiLHBlcmZvcm1MZWF2ZSksbWVyZ2VWTm9kZUhvb2soZGF0YSwiZW50ZXJDYW5jZWxsZWQiLHBlcmZvcm1MZWF2ZSksbWVyZ2VWTm9kZUhvb2sob2xkRGF0YSwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24obGVhdmUpe2RlbGF5ZWRMZWF2ZT1sZWF2ZX0pfX1yZXR1cm4gcmF3Q2hpbGR9fX0scHJvcHM9ZXh0ZW5kKHt0YWc6U3RyaW5nLG1vdmVDbGFzczpTdHJpbmd9LHRyYW5zaXRpb25Qcm9wcyk7ZnVuY3Rpb24gY2FsbFBlbmRpbmdDYnMoYyl7Yy5lbG0uX21vdmVDYiYmYy5lbG0uX21vdmVDYigpLGMuZWxtLl9lbnRlckNiJiZjLmVsbS5fZW50ZXJDYigpfWZ1bmN0aW9uIHJlY29yZFBvc2l0aW9uKGMpe2MuZGF0YS5uZXdQb3M9Yy5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9ZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbihjKXt2YXIgb2xkUG9zPWMuZGF0YS5wb3MsbmV3UG9zPWMuZGF0YS5uZXdQb3MsZHg9b2xkUG9zLmxlZnQtbmV3UG9zLmxlZnQsZHk9b2xkUG9zLnRvcC1uZXdQb3MudG9wO2lmKGR4fHxkeSl7Yy5kYXRhLm1vdmVkPSEwO3ZhciBzPWMuZWxtLnN0eWxlO3MudHJhbnNmb3JtPXMuV2Via2l0VHJhbnNmb3JtPSJ0cmFuc2xhdGUoIitkeCsicHgsIitkeSsicHgpIixzLnRyYW5zaXRpb25EdXJhdGlvbj0iMHMifX1kZWxldGUgcHJvcHMubW9kZTt2YXIgcGxhdGZvcm1Db21wb25lbnRzPXtUcmFuc2l0aW9uOlRyYW5zaXRpb24sVHJhbnNpdGlvbkdyb3VwOntwcm9wczpwcm9wcyxyZW5kZXI6ZnVuY3Rpb24oaCl7Zm9yKHZhciB0YWc9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbWFwPU9iamVjdC5jcmVhdGUobnVsbCkscHJldkNoaWxkcmVuPXRoaXMucHJldkNoaWxkcmVuPXRoaXMuY2hpbGRyZW4scmF3Q2hpbGRyZW49dGhpcy4kc2xvdHMuZGVmYXVsdHx8W10sY2hpbGRyZW49dGhpcy5jaGlsZHJlbj1bXSx0cmFuc2l0aW9uRGF0YT1leHRyYWN0VHJhbnNpdGlvbkRhdGEodGhpcyksaT0wO2k8cmF3Q2hpbGRyZW4ubGVuZ3RoO2krKyl7dmFyIGM9cmF3Q2hpbGRyZW5baV07aWYoYy50YWcpaWYobnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSljaGlsZHJlbi5wdXNoKGMpLCgobWFwW2Mua2V5XT1jKS5kYXRhfHwoYy5kYXRhPXt9KSkudHJhbnNpdGlvbj10cmFuc2l0aW9uRGF0YTtlbHNlO31pZihwcmV2Q2hpbGRyZW4pe2Zvcih2YXIga2VwdD1bXSxyZW1vdmVkPVtdLGkkMT0wO2kkMTxwcmV2Q2hpbGRyZW4ubGVuZ3RoO2kkMSsrKXt2YXIgYyQxPXByZXZDaGlsZHJlbltpJDFdO2MkMS5kYXRhLnRyYW5zaXRpb249dHJhbnNpdGlvbkRhdGEsYyQxLmRhdGEucG9zPWMkMS5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbWFwW2MkMS5rZXldP2tlcHQucHVzaChjJDEpOnJlbW92ZWQucHVzaChjJDEpfXRoaXMua2VwdD1oKHRhZyxudWxsLGtlcHQpLHRoaXMucmVtb3ZlZD1yZW1vdmVkfXJldHVybiBoKHRhZyxudWxsLGNoaWxkcmVuKX0sYmVmb3JlVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5fX3BhdGNoX18odGhpcy5fdm5vZGUsdGhpcy5rZXB0LCExLCEwKSx0aGlzLl92bm9kZT10aGlzLmtlcHR9LHVwZGF0ZWQ6ZnVuY3Rpb24oKXt2YXIgY2hpbGRyZW49dGhpcy5wcmV2Q2hpbGRyZW4sbW92ZUNsYXNzPXRoaXMubW92ZUNsYXNzfHwodGhpcy5uYW1lfHwidiIpKyItbW92ZSI7Y2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLmhhc01vdmUoY2hpbGRyZW5bMF0uZWxtLG1vdmVDbGFzcykmJihjaGlsZHJlbi5mb3JFYWNoKGNhbGxQZW5kaW5nQ2JzKSxjaGlsZHJlbi5mb3JFYWNoKHJlY29yZFBvc2l0aW9uKSxjaGlsZHJlbi5mb3JFYWNoKGFwcGx5VHJhbnNsYXRpb24pLHRoaXMuX3JlZmxvdz1kb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCxjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGMpe2lmKGMuZGF0YS5tb3ZlZCl7dmFyIGVsPWMuZWxtLHM9ZWwuc3R5bGU7YWRkVHJhbnNpdGlvbkNsYXNzKGVsLG1vdmVDbGFzcykscy50cmFuc2Zvcm09cy5XZWJraXRUcmFuc2Zvcm09cy50cmFuc2l0aW9uRHVyYXRpb249IiIsZWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsZWwuX21vdmVDYj1mdW5jdGlvbiBjYihlKXtlJiYhL3RyYW5zZm9ybSQvLnRlc3QoZS5wcm9wZXJ0eU5hbWUpfHwoZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kRXZlbnQsY2IpLGVsLl9tb3ZlQ2I9bnVsbCxyZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsbW92ZUNsYXNzKSl9KX19KSl9LG1ldGhvZHM6e2hhc01vdmU6ZnVuY3Rpb24oZWwsbW92ZUNsYXNzKXtpZighaGFzVHJhbnNpdGlvbilyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBjbG9uZT1lbC5jbG9uZU5vZGUoKTtlbC5fdHJhbnNpdGlvbkNsYXNzZXMmJmVsLl90cmFuc2l0aW9uQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uKGNscyl7cmVtb3ZlQ2xhc3MoY2xvbmUsY2xzKX0pLGFkZENsYXNzKGNsb25lLG1vdmVDbGFzcyksY2xvbmUuc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy4kZWwuYXBwZW5kQ2hpbGQoY2xvbmUpO3ZhciBpbmZvPWdldFRyYW5zaXRpb25JbmZvKGNsb25lKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQoY2xvbmUpLHRoaXMuX2hhc01vdmU9aW5mby5oYXNUcmFuc2Zvcm19fX19O1Z1ZS5jb25maWcubXVzdFVzZVByb3A9ZnVuY3Rpb24odGFnLHR5cGUsYXR0cil7cmV0dXJuInZhbHVlIj09PWF0dHImJmFjY2VwdFZhbHVlKHRhZykmJiJidXR0b24iIT09dHlwZXx8InNlbGVjdGVkIj09PWF0dHImJiJvcHRpb24iPT09dGFnfHwiY2hlY2tlZCI9PT1hdHRyJiYiaW5wdXQiPT09dGFnfHwibXV0ZWQiPT09YXR0ciYmInZpZGVvIj09PXRhZ30sVnVlLmNvbmZpZy5pc1Jlc2VydmVkVGFnPWlzUmVzZXJ2ZWRUYWcsVnVlLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1pc1Jlc2VydmVkQXR0cixWdWUuY29uZmlnLmdldFRhZ05hbWVzcGFjZT1mdW5jdGlvbih0YWcpe3JldHVybiBpc1NWRyh0YWcpPyJzdmciOiJtYXRoIj09PXRhZz8ibWF0aCI6dm9pZCAwfSxWdWUuY29uZmlnLmlzVW5rbm93bkVsZW1lbnQ9ZnVuY3Rpb24odGFnKXtpZighaW5Ccm93c2VyKXJldHVybiEwO2lmKGlzUmVzZXJ2ZWRUYWcodGFnKSlyZXR1cm4hMTtpZih0YWc9dGFnLnRvTG93ZXJDYXNlKCksbnVsbCE9dW5rbm93bkVsZW1lbnRDYWNoZVt0YWddKXJldHVybiB1bmtub3duRWxlbWVudENhY2hlW3RhZ107dmFyIGVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtyZXR1cm4tMTx0YWcuaW5kZXhPZigiLSIpP3Vua25vd25FbGVtZW50Q2FjaGVbdGFnXT1lbC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnR8fGVsLmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxFbGVtZW50OnVua25vd25FbGVtZW50Q2FjaGVbdGFnXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpfSxleHRlbmQoVnVlLm9wdGlvbnMuZGlyZWN0aXZlcyxwbGF0Zm9ybURpcmVjdGl2ZXMpLGV4dGVuZChWdWUub3B0aW9ucy5jb21wb25lbnRzLHBsYXRmb3JtQ29tcG9uZW50cyksVnVlLnByb3RvdHlwZS5fX3BhdGNoX189aW5Ccm93c2VyP3BhdGNoOm5vb3AsVnVlLnByb3RvdHlwZS4kbW91bnQ9ZnVuY3Rpb24oZWwsaHlkcmF0aW5nKXtyZXR1cm4gZnVuY3Rpb24odm0sZWwsaHlkcmF0aW5nKXtyZXR1cm4gdm0uJGVsPWVsLHZtLiRvcHRpb25zLnJlbmRlcnx8KHZtLiRvcHRpb25zLnJlbmRlcj1jcmVhdGVFbXB0eVZOb2RlKSxjYWxsSG9vayh2bSwiYmVmb3JlTW91bnQiKSxuZXcgV2F0Y2hlcih2bSxmdW5jdGlvbigpe3ZtLl91cGRhdGUodm0uX3JlbmRlcigpLGh5ZHJhdGluZyl9LG5vb3AsbnVsbCwhMCksaHlkcmF0aW5nPSExLG51bGw9PXZtLiR2bm9kZSYmKHZtLl9pc01vdW50ZWQ9ITAsY2FsbEhvb2sodm0sIm1vdW50ZWQiKSksdm19KHRoaXMsZWw9ZWwmJmluQnJvd3Nlcj9mdW5jdGlvbihlbCl7aWYoInN0cmluZyIhPXR5cGVvZiBlbClyZXR1cm4gZWw7dmFyIHNlbGVjdGVkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO3JldHVybiBzZWxlY3RlZHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9KGVsKTp2b2lkIDAsaHlkcmF0aW5nKX0saW5Ccm93c2VyJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y29uZmlnLmRldnRvb2xzJiZkZXZ0b29scyYmZGV2dG9vbHMuZW1pdCgiaW5pdCIsVnVlKX0sMCksX193ZWJwYWNrX2V4cG9ydHNfXy5kZWZhdWx0PVZ1ZX0uY2FsbCh0aGlzLF9fd2VicGFja19yZXF1aXJlX18oInlMcGoiKSl9LEwySlU6ZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiOwovKioKICogdnVleCB2My4wLjEKICogKGMpIDIwMTcgRXZhbiBZb3UKICogQGxpY2Vuc2UgTUlUCiAqL3ZhciBkZXZ0b29sSG9vaz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187ZnVuY3Rpb24gZm9yRWFjaFZhbHVlKG9iaixmbil7T2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7cmV0dXJuIGZuKG9ialtrZXldLGtleSl9KX12YXIgTW9kdWxlPWZ1bmN0aW9uKHJhd01vZHVsZSxydW50aW1lKXt0aGlzLnJ1bnRpbWU9cnVudGltZSx0aGlzLl9jaGlsZHJlbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciByYXdTdGF0ZT0odGhpcy5fcmF3TW9kdWxlPXJhd01vZHVsZSkuc3RhdGU7dGhpcy5zdGF0ZT0oImZ1bmN0aW9uIj09dHlwZW9mIHJhd1N0YXRlP3Jhd1N0YXRlKCk6cmF3U3RhdGUpfHx7fX0scHJvdG90eXBlQWNjZXNzb3JzJDE9e25hbWVzcGFjZWQ6e2NvbmZpZ3VyYWJsZTohMH19O3Byb3RvdHlwZUFjY2Vzc29ycyQxLm5hbWVzcGFjZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9yYXdNb2R1bGUubmFtZXNwYWNlZH0sTW9kdWxlLnByb3RvdHlwZS5hZGRDaGlsZD1mdW5jdGlvbihrZXksbW9kdWxlKXt0aGlzLl9jaGlsZHJlbltrZXldPW1vZHVsZX0sTW9kdWxlLnByb3RvdHlwZS5yZW1vdmVDaGlsZD1mdW5jdGlvbihrZXkpe2RlbGV0ZSB0aGlzLl9jaGlsZHJlbltrZXldfSxNb2R1bGUucHJvdG90eXBlLmdldENoaWxkPWZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuW2tleV19LE1vZHVsZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHJhd01vZHVsZSl7dGhpcy5fcmF3TW9kdWxlLm5hbWVzcGFjZWQ9cmF3TW9kdWxlLm5hbWVzcGFjZWQscmF3TW9kdWxlLmFjdGlvbnMmJih0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucz1yYXdNb2R1bGUuYWN0aW9ucykscmF3TW9kdWxlLm11dGF0aW9ucyYmKHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnM9cmF3TW9kdWxlLm11dGF0aW9ucykscmF3TW9kdWxlLmdldHRlcnMmJih0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycz1yYXdNb2R1bGUuZ2V0dGVycyl9LE1vZHVsZS5wcm90b3R5cGUuZm9yRWFjaENoaWxkPWZ1bmN0aW9uKGZuKXtmb3JFYWNoVmFsdWUodGhpcy5fY2hpbGRyZW4sZm4pfSxNb2R1bGUucHJvdG90eXBlLmZvckVhY2hHZXR0ZXI9ZnVuY3Rpb24oZm4pe3RoaXMuX3Jhd01vZHVsZS5nZXR0ZXJzJiZmb3JFYWNoVmFsdWUodGhpcy5fcmF3TW9kdWxlLmdldHRlcnMsZm4pfSxNb2R1bGUucHJvdG90eXBlLmZvckVhY2hBY3Rpb249ZnVuY3Rpb24oZm4pe3RoaXMuX3Jhd01vZHVsZS5hY3Rpb25zJiZmb3JFYWNoVmFsdWUodGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMsZm4pfSxNb2R1bGUucHJvdG90eXBlLmZvckVhY2hNdXRhdGlvbj1mdW5jdGlvbihmbil7dGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucyYmZm9yRWFjaFZhbHVlKHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMsZm4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhNb2R1bGUucHJvdG90eXBlLHByb3RvdHlwZUFjY2Vzc29ycyQxKTt2YXIgTW9kdWxlQ29sbGVjdGlvbj1mdW5jdGlvbihyYXdSb290TW9kdWxlKXt0aGlzLnJlZ2lzdGVyKFtdLHJhd1Jvb3RNb2R1bGUsITEpfTtNb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24ocGF0aCl7cmV0dXJuIHBhdGgucmVkdWNlKGZ1bmN0aW9uKG1vZHVsZSxrZXkpe3JldHVybiBtb2R1bGUuZ2V0Q2hpbGQoa2V5KX0sdGhpcy5yb290KX0sTW9kdWxlQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TmFtZXNwYWNlPWZ1bmN0aW9uKHBhdGgpe3ZhciBtb2R1bGU9dGhpcy5yb290O3JldHVybiBwYXRoLnJlZHVjZShmdW5jdGlvbihuYW1lc3BhY2Usa2V5KXtyZXR1cm4gbmFtZXNwYWNlKygobW9kdWxlPW1vZHVsZS5nZXRDaGlsZChrZXkpKS5uYW1lc3BhY2VkP2tleSsiLyI6IiIpfSwiIil9LE1vZHVsZUNvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihyYXdSb290TW9kdWxlKXshZnVuY3Rpb24gdXBkYXRlKHBhdGgsdGFyZ2V0TW9kdWxlLG5ld01vZHVsZSl7MDt0YXJnZXRNb2R1bGUudXBkYXRlKG5ld01vZHVsZSk7aWYobmV3TW9kdWxlLm1vZHVsZXMpZm9yKHZhciBrZXkgaW4gbmV3TW9kdWxlLm1vZHVsZXMpe2lmKCF0YXJnZXRNb2R1bGUuZ2V0Q2hpbGQoa2V5KSlyZXR1cm4gdm9pZCAwO3VwZGF0ZShwYXRoLmNvbmNhdChrZXkpLHRhcmdldE1vZHVsZS5nZXRDaGlsZChrZXkpLG5ld01vZHVsZS5tb2R1bGVzW2tleV0pfX0oW10sdGhpcy5yb290LHJhd1Jvb3RNb2R1bGUpfSxNb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihwYXRoLHJhd01vZHVsZSxydW50aW1lKXt2YXIgdGhpcyQxPXRoaXM7dm9pZCAwPT09cnVudGltZSYmKHJ1bnRpbWU9ITApO3ZhciBuZXdNb2R1bGU9bmV3IE1vZHVsZShyYXdNb2R1bGUscnVudGltZSk7MD09PXBhdGgubGVuZ3RoP3RoaXMucm9vdD1uZXdNb2R1bGU6dGhpcy5nZXQocGF0aC5zbGljZSgwLC0xKSkuYWRkQ2hpbGQocGF0aFtwYXRoLmxlbmd0aC0xXSxuZXdNb2R1bGUpO3Jhd01vZHVsZS5tb2R1bGVzJiZmb3JFYWNoVmFsdWUocmF3TW9kdWxlLm1vZHVsZXMsZnVuY3Rpb24ocmF3Q2hpbGRNb2R1bGUsa2V5KXt0aGlzJDEucmVnaXN0ZXIocGF0aC5jb25jYXQoa2V5KSxyYXdDaGlsZE1vZHVsZSxydW50aW1lKX0pfSxNb2R1bGVDb2xsZWN0aW9uLnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKHBhdGgpe3ZhciBwYXJlbnQ9dGhpcy5nZXQocGF0aC5zbGljZSgwLC0xKSksa2V5PXBhdGhbcGF0aC5sZW5ndGgtMV07cGFyZW50LmdldENoaWxkKGtleSkucnVudGltZSYmcGFyZW50LnJlbW92ZUNoaWxkKGtleSl9O3ZhciBWdWU7dmFyIFN0b3JlPWZ1bmN0aW9uKG9wdGlvbnMpe3ZhciB0aGlzJDE9dGhpczt2b2lkIDA9PT1vcHRpb25zJiYob3B0aW9ucz17fSksIVZ1ZSYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5WdWUmJmluc3RhbGwod2luZG93LlZ1ZSk7dmFyIHBsdWdpbnM9b3B0aW9ucy5wbHVnaW5zO3ZvaWQgMD09PXBsdWdpbnMmJihwbHVnaW5zPVtdKTt2YXIgc3RyaWN0PW9wdGlvbnMuc3RyaWN0O3ZvaWQgMD09PXN0cmljdCYmKHN0cmljdD0hMSk7dmFyIHN0YXRlPW9wdGlvbnMuc3RhdGU7dm9pZCAwPT09c3RhdGUmJihzdGF0ZT17fSksImZ1bmN0aW9uIj09dHlwZW9mIHN0YXRlJiYoc3RhdGU9c3RhdGUoKXx8e30pLHRoaXMuX2NvbW1pdHRpbmc9ITEsdGhpcy5fYWN0aW9ucz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2FjdGlvblN1YnNjcmliZXJzPVtdLHRoaXMuX211dGF0aW9ucz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX3dyYXBwZWRHZXR0ZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fbW9kdWxlcz1uZXcgTW9kdWxlQ29sbGVjdGlvbihvcHRpb25zKSx0aGlzLl9tb2R1bGVzTmFtZXNwYWNlTWFwPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fc3Vic2NyaWJlcnM9W10sdGhpcy5fd2F0Y2hlclZNPW5ldyBWdWU7dmFyIHN0b3JlPXRoaXMsZGlzcGF0Y2g9dGhpcy5kaXNwYXRjaCxjb21taXQ9dGhpcy5jb21taXQ7dGhpcy5kaXNwYXRjaD1mdW5jdGlvbih0eXBlLHBheWxvYWQpe3JldHVybiBkaXNwYXRjaC5jYWxsKHN0b3JlLHR5cGUscGF5bG9hZCl9LHRoaXMuY29tbWl0PWZ1bmN0aW9uKHR5cGUscGF5bG9hZCxvcHRpb25zKXtyZXR1cm4gY29tbWl0LmNhbGwoc3RvcmUsdHlwZSxwYXlsb2FkLG9wdGlvbnMpfSx0aGlzLnN0cmljdD1zdHJpY3QsaW5zdGFsbE1vZHVsZSh0aGlzLHN0YXRlLFtdLHRoaXMuX21vZHVsZXMucm9vdCkscmVzZXRTdG9yZVZNKHRoaXMsc3RhdGUpLHBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbihwbHVnaW4pe3JldHVybiBwbHVnaW4odGhpcyQxKX0pLFZ1ZS5jb25maWcuZGV2dG9vbHMmJmZ1bmN0aW9uKHN0b3JlKXtkZXZ0b29sSG9vayYmKChzdG9yZS5fZGV2dG9vbEhvb2s9ZGV2dG9vbEhvb2spLmVtaXQoInZ1ZXg6aW5pdCIsc3RvcmUpLGRldnRvb2xIb29rLm9uKCJ2dWV4OnRyYXZlbC10by1zdGF0ZSIsZnVuY3Rpb24odGFyZ2V0U3RhdGUpe3N0b3JlLnJlcGxhY2VTdGF0ZSh0YXJnZXRTdGF0ZSl9KSxzdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24obXV0YXRpb24sc3RhdGUpe2RldnRvb2xIb29rLmVtaXQoInZ1ZXg6bXV0YXRpb24iLG11dGF0aW9uLHN0YXRlKX0pKX0odGhpcyl9LHByb3RvdHlwZUFjY2Vzc29ycz17c3RhdGU6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIGdlbmVyaWNTdWJzY3JpYmUoZm4sc3Vicyl7cmV0dXJuIHN1YnMuaW5kZXhPZihmbik8MCYmc3Vicy5wdXNoKGZuKSxmdW5jdGlvbigpe3ZhciBpPXN1YnMuaW5kZXhPZihmbik7LTE8aSYmc3Vicy5zcGxpY2UoaSwxKX19ZnVuY3Rpb24gcmVzZXRTdG9yZShzdG9yZSxob3Qpe3N0b3JlLl9hY3Rpb25zPU9iamVjdC5jcmVhdGUobnVsbCksc3RvcmUuX211dGF0aW9ucz1PYmplY3QuY3JlYXRlKG51bGwpLHN0b3JlLl93cmFwcGVkR2V0dGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIHN0YXRlPXN0b3JlLnN0YXRlO2luc3RhbGxNb2R1bGUoc3RvcmUsc3RhdGUsW10sc3RvcmUuX21vZHVsZXMucm9vdCwhMCkscmVzZXRTdG9yZVZNKHN0b3JlLHN0YXRlLGhvdCl9ZnVuY3Rpb24gcmVzZXRTdG9yZVZNKHN0b3JlLHN0YXRlLGhvdCl7dmFyIG9sZFZtPXN0b3JlLl92bTtzdG9yZS5nZXR0ZXJzPXt9O3ZhciB3cmFwcGVkR2V0dGVycz1zdG9yZS5fd3JhcHBlZEdldHRlcnMsY29tcHV0ZWQ9e307Zm9yRWFjaFZhbHVlKHdyYXBwZWRHZXR0ZXJzLGZ1bmN0aW9uKGZuLGtleSl7Y29tcHV0ZWRba2V5XT1mdW5jdGlvbigpe3JldHVybiBmbihzdG9yZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZS5nZXR0ZXJzLGtleSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHN0b3JlLl92bVtrZXldfSxlbnVtZXJhYmxlOiEwfSl9KTt2YXIgc2lsZW50PVZ1ZS5jb25maWcuc2lsZW50O1Z1ZS5jb25maWcuc2lsZW50PSEwLHN0b3JlLl92bT1uZXcgVnVlKHtkYXRhOnskJHN0YXRlOnN0YXRlfSxjb21wdXRlZDpjb21wdXRlZH0pLFZ1ZS5jb25maWcuc2lsZW50PXNpbGVudCxzdG9yZS5zdHJpY3QmJmZ1bmN0aW9uKHN0b3JlKXtzdG9yZS5fdm0uJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEuJCRzdGF0ZX0sZnVuY3Rpb24oKXswfSx7ZGVlcDohMCxzeW5jOiEwfSl9KHN0b3JlKSxvbGRWbSYmKGhvdCYmc3RvcmUuX3dpdGhDb21taXQoZnVuY3Rpb24oKXtvbGRWbS5fZGF0YS4kJHN0YXRlPW51bGx9KSxWdWUubmV4dFRpY2soZnVuY3Rpb24oKXtyZXR1cm4gb2xkVm0uJGRlc3Ryb3koKX0pKX1mdW5jdGlvbiBpbnN0YWxsTW9kdWxlKHN0b3JlLHJvb3RTdGF0ZSxwYXRoLG1vZHVsZSxob3Qpe3ZhciBpc1Jvb3Q9IXBhdGgubGVuZ3RoLG5hbWVzcGFjZT1zdG9yZS5fbW9kdWxlcy5nZXROYW1lc3BhY2UocGF0aCk7aWYobW9kdWxlLm5hbWVzcGFjZWQmJihzdG9yZS5fbW9kdWxlc05hbWVzcGFjZU1hcFtuYW1lc3BhY2VdPW1vZHVsZSksIWlzUm9vdCYmIWhvdCl7dmFyIHBhcmVudFN0YXRlPWdldE5lc3RlZFN0YXRlKHJvb3RTdGF0ZSxwYXRoLnNsaWNlKDAsLTEpKSxtb2R1bGVOYW1lPXBhdGhbcGF0aC5sZW5ndGgtMV07c3RvcmUuX3dpdGhDb21taXQoZnVuY3Rpb24oKXtWdWUuc2V0KHBhcmVudFN0YXRlLG1vZHVsZU5hbWUsbW9kdWxlLnN0YXRlKX0pfXZhciBsb2NhbD1tb2R1bGUuY29udGV4dD1mdW5jdGlvbihzdG9yZSxuYW1lc3BhY2UscGF0aCl7dmFyIG5vTmFtZXNwYWNlPSIiPT09bmFtZXNwYWNlLGxvY2FsPXtkaXNwYXRjaDpub05hbWVzcGFjZT9zdG9yZS5kaXNwYXRjaDpmdW5jdGlvbihfdHlwZSxfcGF5bG9hZCxfb3B0aW9ucyl7dmFyIGFyZ3M9dW5pZnlPYmplY3RTdHlsZShfdHlwZSxfcGF5bG9hZCxfb3B0aW9ucykscGF5bG9hZD1hcmdzLnBheWxvYWQsb3B0aW9ucz1hcmdzLm9wdGlvbnMsdHlwZT1hcmdzLnR5cGU7cmV0dXJuIG9wdGlvbnMmJm9wdGlvbnMucm9vdHx8KHR5cGU9bmFtZXNwYWNlK3R5cGUpLHN0b3JlLmRpc3BhdGNoKHR5cGUscGF5bG9hZCl9LGNvbW1pdDpub05hbWVzcGFjZT9zdG9yZS5jb21taXQ6ZnVuY3Rpb24oX3R5cGUsX3BheWxvYWQsX29wdGlvbnMpe3ZhciBhcmdzPXVuaWZ5T2JqZWN0U3R5bGUoX3R5cGUsX3BheWxvYWQsX29wdGlvbnMpLHBheWxvYWQ9YXJncy5wYXlsb2FkLG9wdGlvbnM9YXJncy5vcHRpb25zLHR5cGU9YXJncy50eXBlO29wdGlvbnMmJm9wdGlvbnMucm9vdHx8KHR5cGU9bmFtZXNwYWNlK3R5cGUpLHN0b3JlLmNvbW1pdCh0eXBlLHBheWxvYWQsb3B0aW9ucyl9fTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobG9jYWwse2dldHRlcnM6e2dldDpub05hbWVzcGFjZT9mdW5jdGlvbigpe3JldHVybiBzdG9yZS5nZXR0ZXJzfTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihzdG9yZSxuYW1lc3BhY2Upe3ZhciBnZXR0ZXJzUHJveHk9e30sc3BsaXRQb3M9bmFtZXNwYWNlLmxlbmd0aDtyZXR1cm4gT2JqZWN0LmtleXMoc3RvcmUuZ2V0dGVycykuZm9yRWFjaChmdW5jdGlvbih0eXBlKXtpZih0eXBlLnNsaWNlKDAsc3BsaXRQb3MpPT09bmFtZXNwYWNlKXt2YXIgbG9jYWxUeXBlPXR5cGUuc2xpY2Uoc3BsaXRQb3MpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXR0ZXJzUHJveHksbG9jYWxUeXBlLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gc3RvcmUuZ2V0dGVyc1t0eXBlXX0sZW51bWVyYWJsZTohMH0pfX0pLGdldHRlcnNQcm94eX0oc3RvcmUsbmFtZXNwYWNlKX19LHN0YXRlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZ2V0TmVzdGVkU3RhdGUoc3RvcmUuc3RhdGUscGF0aCl9fX0pLGxvY2FsfShzdG9yZSxuYW1lc3BhY2UscGF0aCk7bW9kdWxlLmZvckVhY2hNdXRhdGlvbihmdW5jdGlvbihtdXRhdGlvbixrZXkpeyFmdW5jdGlvbihzdG9yZSx0eXBlLGhhbmRsZXIsbG9jYWwpeyhzdG9yZS5fbXV0YXRpb25zW3R5cGVdfHwoc3RvcmUuX211dGF0aW9uc1t0eXBlXT1bXSkpLnB1c2goZnVuY3Rpb24ocGF5bG9hZCl7aGFuZGxlci5jYWxsKHN0b3JlLGxvY2FsLnN0YXRlLHBheWxvYWQpfSl9KHN0b3JlLG5hbWVzcGFjZStrZXksbXV0YXRpb24sbG9jYWwpfSksbW9kdWxlLmZvckVhY2hBY3Rpb24oZnVuY3Rpb24oYWN0aW9uLGtleSl7dmFyIHR5cGU9YWN0aW9uLnJvb3Q/a2V5Om5hbWVzcGFjZStrZXksaGFuZGxlcj1hY3Rpb24uaGFuZGxlcnx8YWN0aW9uOyFmdW5jdGlvbihzdG9yZSx0eXBlLGhhbmRsZXIsbG9jYWwpeyhzdG9yZS5fYWN0aW9uc1t0eXBlXXx8KHN0b3JlLl9hY3Rpb25zW3R5cGVdPVtdKSkucHVzaChmdW5jdGlvbihwYXlsb2FkLGNiKXt2YXIgdmFsLHJlcz1oYW5kbGVyLmNhbGwoc3RvcmUse2Rpc3BhdGNoOmxvY2FsLmRpc3BhdGNoLGNvbW1pdDpsb2NhbC5jb21taXQsZ2V0dGVyczpsb2NhbC5nZXR0ZXJzLHN0YXRlOmxvY2FsLnN0YXRlLHJvb3RHZXR0ZXJzOnN0b3JlLmdldHRlcnMscm9vdFN0YXRlOnN0b3JlLnN0YXRlfSxwYXlsb2FkLGNiKTtyZXR1cm4odmFsPXJlcykmJiJmdW5jdGlvbiI9PXR5cGVvZiB2YWwudGhlbnx8KHJlcz1Qcm9taXNlLnJlc29sdmUocmVzKSksc3RvcmUuX2RldnRvb2xIb29rP3Jlcy5jYXRjaChmdW5jdGlvbihlcnIpe3Rocm93IHN0b3JlLl9kZXZ0b29sSG9vay5lbWl0KCJ2dWV4OmVycm9yIixlcnIpLGVycn0pOnJlc30pfShzdG9yZSx0eXBlLGhhbmRsZXIsbG9jYWwpfSksbW9kdWxlLmZvckVhY2hHZXR0ZXIoZnVuY3Rpb24oZ2V0dGVyLGtleSl7IWZ1bmN0aW9uKHN0b3JlLHR5cGUscmF3R2V0dGVyLGxvY2FsKXtpZihzdG9yZS5fd3JhcHBlZEdldHRlcnNbdHlwZV0pcmV0dXJuO3N0b3JlLl93cmFwcGVkR2V0dGVyc1t0eXBlXT1mdW5jdGlvbihzdG9yZSl7cmV0dXJuIHJhd0dldHRlcihsb2NhbC5zdGF0ZSxsb2NhbC5nZXR0ZXJzLHN0b3JlLnN0YXRlLHN0b3JlLmdldHRlcnMpfX0oc3RvcmUsbmFtZXNwYWNlK2tleSxnZXR0ZXIsbG9jYWwpfSksbW9kdWxlLmZvckVhY2hDaGlsZChmdW5jdGlvbihjaGlsZCxrZXkpe2luc3RhbGxNb2R1bGUoc3RvcmUscm9vdFN0YXRlLHBhdGguY29uY2F0KGtleSksY2hpbGQsaG90KX0pfWZ1bmN0aW9uIGdldE5lc3RlZFN0YXRlKHN0YXRlLHBhdGgpe3JldHVybiBwYXRoLmxlbmd0aD9wYXRoLnJlZHVjZShmdW5jdGlvbihzdGF0ZSxrZXkpe3JldHVybiBzdGF0ZVtrZXldfSxzdGF0ZSk6c3RhdGV9ZnVuY3Rpb24gdW5pZnlPYmplY3RTdHlsZSh0eXBlLHBheWxvYWQsb3B0aW9ucyl7dmFyIG9iajtyZXR1cm4gbnVsbCE9PShvYmo9dHlwZSkmJiJvYmplY3QiPT10eXBlb2Ygb2JqJiZ0eXBlLnR5cGUmJihvcHRpb25zPXBheWxvYWQsdHlwZT0ocGF5bG9hZD10eXBlKS50eXBlKSx7dHlwZTp0eXBlLHBheWxvYWQ6cGF5bG9hZCxvcHRpb25zOm9wdGlvbnN9fWZ1bmN0aW9uIGluc3RhbGwoX1Z1ZSl7VnVlJiZfVnVlPT09VnVlfHxmdW5jdGlvbihWdWUpe2lmKDI8PU51bWJlcihWdWUudmVyc2lvbi5zcGxpdCgiLiIpWzBdKSlWdWUubWl4aW4oe2JlZm9yZUNyZWF0ZTp2dWV4SW5pdH0pO2Vsc2V7dmFyIF9pbml0PVZ1ZS5wcm90b3R5cGUuX2luaXQ7VnVlLnByb3RvdHlwZS5faW5pdD1mdW5jdGlvbihvcHRpb25zKXt2b2lkIDA9PT1vcHRpb25zJiYob3B0aW9ucz17fSksb3B0aW9ucy5pbml0PW9wdGlvbnMuaW5pdD9bdnVleEluaXRdLmNvbmNhdChvcHRpb25zLmluaXQpOnZ1ZXhJbml0LF9pbml0LmNhbGwodGhpcyxvcHRpb25zKX19ZnVuY3Rpb24gdnVleEluaXQoKXt2YXIgb3B0aW9ucz10aGlzLiRvcHRpb25zO29wdGlvbnMuc3RvcmU/dGhpcy4kc3RvcmU9ImZ1bmN0aW9uIj09dHlwZW9mIG9wdGlvbnMuc3RvcmU/b3B0aW9ucy5zdG9yZSgpOm9wdGlvbnMuc3RvcmU6b3B0aW9ucy5wYXJlbnQmJm9wdGlvbnMucGFyZW50LiRzdG9yZSYmKHRoaXMuJHN0b3JlPW9wdGlvbnMucGFyZW50LiRzdG9yZSl9fShWdWU9X1Z1ZSl9cHJvdG90eXBlQWNjZXNzb3JzLnN0YXRlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl92bS5fZGF0YS4kJHN0YXRlfSxwcm90b3R5cGVBY2Nlc3NvcnMuc3RhdGUuc2V0PWZ1bmN0aW9uKHYpezB9LFN0b3JlLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24oX3R5cGUsX3BheWxvYWQsX29wdGlvbnMpe3ZhciB0aGlzJDE9dGhpcyxyZWY9dW5pZnlPYmplY3RTdHlsZShfdHlwZSxfcGF5bG9hZCxfb3B0aW9ucyksdHlwZT1yZWYudHlwZSxwYXlsb2FkPXJlZi5wYXlsb2FkLG11dGF0aW9uPShyZWYub3B0aW9ucyx7dHlwZTp0eXBlLHBheWxvYWQ6cGF5bG9hZH0pLGVudHJ5PXRoaXMuX211dGF0aW9uc1t0eXBlXTtlbnRyeSYmKHRoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24oKXtlbnRyeS5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZXIpe2hhbmRsZXIocGF5bG9hZCl9KX0pLHRoaXMuX3N1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24oc3ViKXtyZXR1cm4gc3ViKG11dGF0aW9uLHRoaXMkMS5zdGF0ZSl9KSl9LFN0b3JlLnByb3RvdHlwZS5kaXNwYXRjaD1mdW5jdGlvbihfdHlwZSxfcGF5bG9hZCl7dmFyIHRoaXMkMT10aGlzLHJlZj11bmlmeU9iamVjdFN0eWxlKF90eXBlLF9wYXlsb2FkKSx0eXBlPXJlZi50eXBlLHBheWxvYWQ9cmVmLnBheWxvYWQsYWN0aW9uPXt0eXBlOnR5cGUscGF5bG9hZDpwYXlsb2FkfSxlbnRyeT10aGlzLl9hY3Rpb25zW3R5cGVdO2lmKGVudHJ5KXJldHVybiB0aGlzLl9hY3Rpb25TdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uKHN1Yil7cmV0dXJuIHN1YihhY3Rpb24sdGhpcyQxLnN0YXRlKX0pLDE8ZW50cnkubGVuZ3RoP1Byb21pc2UuYWxsKGVudHJ5Lm1hcChmdW5jdGlvbihoYW5kbGVyKXtyZXR1cm4gaGFuZGxlcihwYXlsb2FkKX0pKTplbnRyeVswXShwYXlsb2FkKX0sU3RvcmUucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihmbil7cmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoZm4sdGhpcy5fc3Vic2NyaWJlcnMpfSxTdG9yZS5wcm90b3R5cGUuc3Vic2NyaWJlQWN0aW9uPWZ1bmN0aW9uKGZuKXtyZXR1cm4gZ2VuZXJpY1N1YnNjcmliZShmbix0aGlzLl9hY3Rpb25TdWJzY3JpYmVycyl9LFN0b3JlLnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbihnZXR0ZXIsY2Isb3B0aW9ucyl7dmFyIHRoaXMkMT10aGlzO3JldHVybiB0aGlzLl93YXRjaGVyVk0uJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGdldHRlcih0aGlzJDEuc3RhdGUsdGhpcyQxLmdldHRlcnMpfSxjYixvcHRpb25zKX0sU3RvcmUucHJvdG90eXBlLnJlcGxhY2VTdGF0ZT1mdW5jdGlvbihzdGF0ZSl7dmFyIHRoaXMkMT10aGlzO3RoaXMuX3dpdGhDb21taXQoZnVuY3Rpb24oKXt0aGlzJDEuX3ZtLl9kYXRhLiQkc3RhdGU9c3RhdGV9KX0sU3RvcmUucHJvdG90eXBlLnJlZ2lzdGVyTW9kdWxlPWZ1bmN0aW9uKHBhdGgscmF3TW9kdWxlLG9wdGlvbnMpe3ZvaWQgMD09PW9wdGlvbnMmJihvcHRpb25zPXt9KSwic3RyaW5nIj09dHlwZW9mIHBhdGgmJihwYXRoPVtwYXRoXSksdGhpcy5fbW9kdWxlcy5yZWdpc3RlcihwYXRoLHJhd01vZHVsZSksaW5zdGFsbE1vZHVsZSh0aGlzLHRoaXMuc3RhdGUscGF0aCx0aGlzLl9tb2R1bGVzLmdldChwYXRoKSxvcHRpb25zLnByZXNlcnZlU3RhdGUpLHJlc2V0U3RvcmVWTSh0aGlzLHRoaXMuc3RhdGUpfSxTdG9yZS5wcm90b3R5cGUudW5yZWdpc3Rlck1vZHVsZT1mdW5jdGlvbihwYXRoKXt2YXIgdGhpcyQxPXRoaXM7InN0cmluZyI9PXR5cGVvZiBwYXRoJiYocGF0aD1bcGF0aF0pLHRoaXMuX21vZHVsZXMudW5yZWdpc3RlcihwYXRoKSx0aGlzLl93aXRoQ29tbWl0KGZ1bmN0aW9uKCl7dmFyIHBhcmVudFN0YXRlPWdldE5lc3RlZFN0YXRlKHRoaXMkMS5zdGF0ZSxwYXRoLnNsaWNlKDAsLTEpKTtWdWUuZGVsZXRlKHBhcmVudFN0YXRlLHBhdGhbcGF0aC5sZW5ndGgtMV0pfSkscmVzZXRTdG9yZSh0aGlzKX0sU3RvcmUucHJvdG90eXBlLmhvdFVwZGF0ZT1mdW5jdGlvbihuZXdPcHRpb25zKXt0aGlzLl9tb2R1bGVzLnVwZGF0ZShuZXdPcHRpb25zKSxyZXNldFN0b3JlKHRoaXMsITApfSxTdG9yZS5wcm90b3R5cGUuX3dpdGhDb21taXQ9ZnVuY3Rpb24oZm4pe3ZhciBjb21taXR0aW5nPXRoaXMuX2NvbW1pdHRpbmc7dGhpcy5fY29tbWl0dGluZz0hMCxmbigpLHRoaXMuX2NvbW1pdHRpbmc9Y29tbWl0dGluZ30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoU3RvcmUucHJvdG90eXBlLHByb3RvdHlwZUFjY2Vzc29ycyk7dmFyIG1hcFN0YXRlPW5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbihuYW1lc3BhY2Usc3RhdGVzKXt2YXIgcmVzPXt9O3JldHVybiBub3JtYWxpemVNYXAoc3RhdGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHJlZil7dmFyIGtleT1yZWYua2V5LHZhbD1yZWYudmFsO3Jlc1trZXldPWZ1bmN0aW9uKCl7dmFyIHN0YXRlPXRoaXMuJHN0b3JlLnN0YXRlLGdldHRlcnM9dGhpcy4kc3RvcmUuZ2V0dGVycztpZihuYW1lc3BhY2Upe3ZhciBtb2R1bGU9Z2V0TW9kdWxlQnlOYW1lc3BhY2UodGhpcy4kc3RvcmUsIm1hcFN0YXRlIixuYW1lc3BhY2UpO2lmKCFtb2R1bGUpcmV0dXJuO3N0YXRlPW1vZHVsZS5jb250ZXh0LnN0YXRlLGdldHRlcnM9bW9kdWxlLmNvbnRleHQuZ2V0dGVyc31yZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdmFsP3ZhbC5jYWxsKHRoaXMsc3RhdGUsZ2V0dGVycyk6c3RhdGVbdmFsXX0scmVzW2tleV0udnVleD0hMH0pLHJlc30pLG1hcE11dGF0aW9ucz1ub3JtYWxpemVOYW1lc3BhY2UoZnVuY3Rpb24obmFtZXNwYWNlLG11dGF0aW9ucyl7dmFyIHJlcz17fTtyZXR1cm4gbm9ybWFsaXplTWFwKG11dGF0aW9ucykuZm9yRWFjaChmdW5jdGlvbihyZWYpe3ZhciBrZXk9cmVmLmtleSx2YWw9cmVmLnZhbDtyZXNba2V5XT1mdW5jdGlvbigpe2Zvcih2YXIgYXJncz1bXSxsZW49YXJndW1lbnRzLmxlbmd0aDtsZW4tLTspYXJnc1tsZW5dPWFyZ3VtZW50c1tsZW5dO3ZhciBjb21taXQ9dGhpcy4kc3RvcmUuY29tbWl0O2lmKG5hbWVzcGFjZSl7dmFyIG1vZHVsZT1nZXRNb2R1bGVCeU5hbWVzcGFjZSh0aGlzLiRzdG9yZSwibWFwTXV0YXRpb25zIixuYW1lc3BhY2UpO2lmKCFtb2R1bGUpcmV0dXJuO2NvbW1pdD1tb2R1bGUuY29udGV4dC5jb21taXR9cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHZhbD92YWwuYXBwbHkodGhpcyxbY29tbWl0XS5jb25jYXQoYXJncykpOmNvbW1pdC5hcHBseSh0aGlzLiRzdG9yZSxbdmFsXS5jb25jYXQoYXJncykpfX0pLHJlc30pLG1hcEdldHRlcnM9bm9ybWFsaXplTmFtZXNwYWNlKGZ1bmN0aW9uKG5hbWVzcGFjZSxnZXR0ZXJzKXt2YXIgcmVzPXt9O3JldHVybiBub3JtYWxpemVNYXAoZ2V0dGVycykuZm9yRWFjaChmdW5jdGlvbihyZWYpe3ZhciBrZXk9cmVmLmtleSx2YWw9cmVmLnZhbDt2YWw9bmFtZXNwYWNlK3ZhbCxyZXNba2V5XT1mdW5jdGlvbigpe2lmKCFuYW1lc3BhY2V8fGdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCJtYXBHZXR0ZXJzIixuYW1lc3BhY2UpKXJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzW3ZhbF19LHJlc1trZXldLnZ1ZXg9ITB9KSxyZXN9KSxtYXBBY3Rpb25zPW5vcm1hbGl6ZU5hbWVzcGFjZShmdW5jdGlvbihuYW1lc3BhY2UsYWN0aW9ucyl7dmFyIHJlcz17fTtyZXR1cm4gbm9ybWFsaXplTWFwKGFjdGlvbnMpLmZvckVhY2goZnVuY3Rpb24ocmVmKXt2YXIga2V5PXJlZi5rZXksdmFsPXJlZi52YWw7cmVzW2tleV09ZnVuY3Rpb24oKXtmb3IodmFyIGFyZ3M9W10sbGVuPWFyZ3VtZW50cy5sZW5ndGg7bGVuLS07KWFyZ3NbbGVuXT1hcmd1bWVudHNbbGVuXTt2YXIgZGlzcGF0Y2g9dGhpcy4kc3RvcmUuZGlzcGF0Y2g7aWYobmFtZXNwYWNlKXt2YXIgbW9kdWxlPWdldE1vZHVsZUJ5TmFtZXNwYWNlKHRoaXMuJHN0b3JlLCJtYXBBY3Rpb25zIixuYW1lc3BhY2UpO2lmKCFtb2R1bGUpcmV0dXJuO2Rpc3BhdGNoPW1vZHVsZS5jb250ZXh0LmRpc3BhdGNofXJldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB2YWw/dmFsLmFwcGx5KHRoaXMsW2Rpc3BhdGNoXS5jb25jYXQoYXJncykpOmRpc3BhdGNoLmFwcGx5KHRoaXMuJHN0b3JlLFt2YWxdLmNvbmNhdChhcmdzKSl9fSkscmVzfSk7ZnVuY3Rpb24gbm9ybWFsaXplTWFwKG1hcCl7cmV0dXJuIEFycmF5LmlzQXJyYXkobWFwKT9tYXAubWFwKGZ1bmN0aW9uKGtleSl7cmV0dXJue2tleTprZXksdmFsOmtleX19KTpPYmplY3Qua2V5cyhtYXApLm1hcChmdW5jdGlvbihrZXkpe3JldHVybntrZXk6a2V5LHZhbDptYXBba2V5XX19KX1mdW5jdGlvbiBub3JtYWxpemVOYW1lc3BhY2UoZm4pe3JldHVybiBmdW5jdGlvbihuYW1lc3BhY2UsbWFwKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIG5hbWVzcGFjZT8obWFwPW5hbWVzcGFjZSxuYW1lc3BhY2U9IiIpOiIvIiE9PW5hbWVzcGFjZS5jaGFyQXQobmFtZXNwYWNlLmxlbmd0aC0xKSYmKG5hbWVzcGFjZSs9Ii8iKSxmbihuYW1lc3BhY2UsbWFwKX19ZnVuY3Rpb24gZ2V0TW9kdWxlQnlOYW1lc3BhY2Uoc3RvcmUsaGVscGVyLG5hbWVzcGFjZSl7cmV0dXJuIHN0b3JlLl9tb2R1bGVzTmFtZXNwYWNlTWFwW25hbWVzcGFjZV19dmFyIGluZGV4X2VzbT17U3RvcmU6U3RvcmUsaW5zdGFsbDppbnN0YWxsLHZlcnNpb246IjMuMC4xIixtYXBTdGF0ZTptYXBTdGF0ZSxtYXBNdXRhdGlvbnM6bWFwTXV0YXRpb25zLG1hcEdldHRlcnM6bWFwR2V0dGVycyxtYXBBY3Rpb25zOm1hcEFjdGlvbnMsY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnM6ZnVuY3Rpb24obmFtZXNwYWNlKXtyZXR1cm57bWFwU3RhdGU6bWFwU3RhdGUuYmluZChudWxsLG5hbWVzcGFjZSksbWFwR2V0dGVyczptYXBHZXR0ZXJzLmJpbmQobnVsbCxuYW1lc3BhY2UpLG1hcE11dGF0aW9uczptYXBNdXRhdGlvbnMuYmluZChudWxsLG5hbWVzcGFjZSksbWFwQWN0aW9uczptYXBBY3Rpb25zLmJpbmQobnVsbCxuYW1lc3BhY2UpfX19O19fd2VicGFja19leHBvcnRzX18uYT1pbmRleF9lc219LEwzakY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJNYXRoIix7aXN1Ymg6ZnVuY3Rpb24oeDAseDEseTAseTEpe3ZhciAkeDA9eDA+Pj4wLCR5MD15MD4+PjA7cmV0dXJuKHgxPj4+MCktKHkxPj4+MCktKCh+JHgwJiR5MHx+KCR4MF4keTApJiR4MC0keTA+Pj4wKT4+PjMxKXwwfX0pfSxMOXMxOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksY29udGV4dD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwc2grIik7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKl9fd2VicGFja19yZXF1aXJlX18oIlVVZVciKSgiaW5jbHVkZXMiKSwiU3RyaW5nIix7aW5jbHVkZXM6ZnVuY3Rpb24oc2VhcmNoU3RyaW5nKXtyZXR1cm4hIX5jb250ZXh0KHRoaXMsc2VhcmNoU3RyaW5nLCJpbmNsdWRlcyIpLmluZGV4T2Yoc2VhcmNoU3RyaW5nLDE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwKX19KX0sTEs4RjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIkFycmF5Iix7aXNBcnJheTpfX3dlYnBhY2tfcmVxdWlyZV9fKCJFV21DIil9KX0sTFFBYzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ITF9LExUVGs6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGdldFByb3RvPV9fd2VicGFja19yZXF1aXJlX18oIk9QM1kiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5Iik7JGV4cG9ydCgkZXhwb3J0LlMsIlJlZmxlY3QiLHtnZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0YXJnZXQpe3JldHVybiBnZXRQcm90byhhbk9iamVjdCh0YXJnZXQpKX19KX0sTFZ3YzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7dmFyICRleHBtMT1NYXRoLmV4cG0xO21vZHVsZS5leHBvcnRzPSEkZXhwbTF8fDIyMDI1LjQ2NTc5NDgwNjcxODwkZXhwbTEoMTApfHwkZXhwbTEoMTApPDIyMDI1LjQ2NTc5NDgwNjcxOHx8LTJlLTE3IT0kZXhwbTEoLTJlLTE3KT9mdW5jdGlvbih4KXtyZXR1cm4gMD09KHg9K3gpP3g6LTFlLTY8eCYmeDwxZS02P3greCp4LzI6TWF0aC5leHAoeCktMX06JGV4cG0xfSxMWU5GOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgZW5oYW5jZUVycm9yPV9fd2VicGFja19yZXF1aXJlX18oIk9IOWMiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihtZXNzYWdlLGNvbmZpZyxjb2RlLHJlcXVlc3QscmVzcG9uc2Upe3ZhciBlcnJvcj1uZXcgRXJyb3IobWVzc2FnZSk7cmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvcixjb25maWcsY29kZSxyZXF1ZXN0LHJlc3BvbnNlKX19LExaV3Q6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe3ZhciB0b1N0cmluZz17fS50b1N0cmluZzttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsLTEpfX0sTGdqdjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygibmU4aSIpLHJlcGVhdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJsMFJuIiksZGVmaW5lZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ2aFBVIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24odGhhdCxtYXhMZW5ndGgsZmlsbFN0cmluZyxsZWZ0KXt2YXIgUz1TdHJpbmcoZGVmaW5lZCh0aGF0KSksc3RyaW5nTGVuZ3RoPVMubGVuZ3RoLGZpbGxTdHI9dm9pZCAwPT09ZmlsbFN0cmluZz8iICI6U3RyaW5nKGZpbGxTdHJpbmcpLGludE1heExlbmd0aD10b0xlbmd0aChtYXhMZW5ndGgpO2lmKGludE1heExlbmd0aDw9c3RyaW5nTGVuZ3RofHwiIj09ZmlsbFN0cilyZXR1cm4gUzt2YXIgZmlsbExlbj1pbnRNYXhMZW5ndGgtc3RyaW5nTGVuZ3RoLHN0cmluZ0ZpbGxlcj1yZXBlYXQuY2FsbChmaWxsU3RyLE1hdGguY2VpbChmaWxsTGVuL2ZpbGxTdHIubGVuZ3RoKSk7cmV0dXJuIHN0cmluZ0ZpbGxlci5sZW5ndGg+ZmlsbExlbiYmKHN0cmluZ0ZpbGxlcj1zdHJpbmdGaWxsZXIuc2xpY2UoMCxmaWxsTGVuKSksbGVmdD9zdHJpbmdGaWxsZXIrUzpTK3N0cmluZ0ZpbGxlcn19LExqZXQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJOdW1iZXIiLHtFUFNJTE9OOk1hdGgucG93KDIsLTUyKX0pfSxMbWVtOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuISghdmFsdWV8fCF2YWx1ZS5fX0NBTkNFTF9fKX19LExveG86ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoInV6Iix7bW9udGhzOiLRj9C90LLQsNGAX9GE0LXQstGA0LDQu1/QvNCw0YDRgl/QsNC/0YDQtdC7X9C80LDQuV/QuNGO0L1f0LjRjtC7X9Cw0LLQs9GD0YHRgl/RgdC10L3RgtGP0LHRgF/QvtC60YLRj9Cx0YBf0L3QvtGP0LHRgF/QtNC10LrQsNCx0YAiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItGP0L3Qsl/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Llf0LjRjtC9X9C40Y7Qu1/QsNCy0LNf0YHQtdC9X9C+0LrRgl/QvdC+0Y9f0LTQtdC6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiLQr9C60YjQsNC90LHQsF/QlNGD0YjQsNC90LHQsF/QodC10YjQsNC90LHQsF/Qp9C+0YDRiNCw0L3QsdCwX9Cf0LDQudGI0LDQvdCx0LBf0JbRg9C80LBf0KjQsNC90LHQsCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLQr9C60Yhf0JTRg9GIX9Ch0LXRiF/Qp9C+0YBf0J/QsNC5X9CW0YPQvF/QqNCw0L0iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItCv0Lpf0JTRg1/QodC1X9Cn0L5f0J/QsF/QltGDX9Co0LAiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJEIE1NTU0gWVlZWSwgZGRkZCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0JHRg9Cz0YPQvSDRgdC+0LDRgl0gTFQgW9C00LBdIixuZXh0RGF5OiJb0K3RgNGC0LDQs9CwXSBMVCBb0LTQsF0iLG5leHRXZWVrOiJkZGRkIFvQutGD0L3QuCDRgdC+0LDRgl0gTFQgW9C00LBdIixsYXN0RGF5OiJb0JrQtdGH0LAg0YHQvtCw0YJdIExUIFvQtNCwXSIsbGFzdFdlZWs6IlvQo9GC0LPQsNC9XSBkZGRkIFvQutGD0L3QuCDRgdC+0LDRgl0gTFQgW9C00LBdIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQr9C60LjQvSAlcyDQuNGH0LjQtNCwIixwYXN0OiLQkdC40YAg0L3QtdGH0LAgJXMg0L7Qu9C00LjQvSIsczoi0YTRg9GA0YHQsNGCIixzczoiJWQg0YTRg9GA0YHQsNGCIixtOiLQsdC40YAg0LTQsNC60LjQutCwIixtbToiJWQg0LTQsNC60LjQutCwIixoOiLQsdC40YAg0YHQvtCw0YIiLGhoOiIlZCDRgdC+0LDRgiIsZDoi0LHQuNGAINC60YPQvSIsZGQ6IiVkINC60YPQvSIsTToi0LHQuNGAINC+0LkiLE1NOiIlZCDQvtC5Iix5OiLQsdC40YAg0LnQuNC7Iix5eToiJWQg0LnQuNC7In0sd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LEx5RTg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBmYWlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obWV0aG9kLGFyZyl7cmV0dXJuISFtZXRob2QmJmZhaWxzKGZ1bmN0aW9uKCl7YXJnP21ldGhvZC5jYWxsKG51bGwsZnVuY3Rpb24oKXt9LDEpOm1ldGhvZC5jYWxsKG51bGwpfSl9fSxNMXhwOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBjb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiYTB4dSIpO21vZHVsZS5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihpdCl7cmV0dXJuIlN0cmluZyI9PWNvZihpdCk/aXQuc3BsaXQoIiIpOk9iamVjdChpdCl9fSxNNlFqOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBJdGVyYXRvcnM9X193ZWJwYWNrX3JlcXVpcmVfXygiaFBJUSIpLElURVJBVE9SPV9fd2VicGFja19yZXF1aXJlX18oIksweFUiKSgiaXRlcmF0b3IiKSxBcnJheVByb3RvPUFycmF5LnByb3RvdHlwZTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIHZvaWQgMCE9PWl0JiYoSXRlcmF0b3JzLkFycmF5PT09aXR8fEFycmF5UHJvdG9bSVRFUkFUT1JdPT09aXQpfX0sTUNTSjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oZm4sYXJncyx0aGF0KXt2YXIgdW49dm9pZCAwPT09dGhhdDtzd2l0Y2goYXJncy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdW4/Zm4oKTpmbi5jYWxsKHRoYXQpO2Nhc2UgMTpyZXR1cm4gdW4/Zm4oYXJnc1swXSk6Zm4uY2FsbCh0aGF0LGFyZ3NbMF0pO2Nhc2UgMjpyZXR1cm4gdW4/Zm4oYXJnc1swXSxhcmdzWzFdKTpmbi5jYWxsKHRoYXQsYXJnc1swXSxhcmdzWzFdKTtjYXNlIDM6cmV0dXJuIHVuP2ZuKGFyZ3NbMF0sYXJnc1sxXSxhcmdzWzJdKTpmbi5jYWxsKHRoYXQsYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0pO2Nhc2UgNDpyZXR1cm4gdW4/Zm4oYXJnc1swXSxhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSk6Zm4uY2FsbCh0aGF0LGFyZ3NbMF0sYXJnc1sxXSxhcmdzWzJdLGFyZ3NbM10pfXJldHVybiBmbi5hcHBseSh0aGF0LGFyZ3MpfX0sTUxXWjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHV0aWxzPV9fd2VicGFja19yZXF1aXJlX18oInhUSisiKTtmdW5jdGlvbiBlbmNvZGUodmFsKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkucmVwbGFjZSgvJTQwL2dpLCJAIikucmVwbGFjZSgvJTNBL2dpLCI6IikucmVwbGFjZSgvJTI0L2csIiQiKS5yZXBsYWNlKC8lMkMvZ2ksIiwiKS5yZXBsYWNlKC8lMjAvZywiKyIpLnJlcGxhY2UoLyU1Qi9naSwiWyIpLnJlcGxhY2UoLyU1RC9naSwiXSIpfW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKHVybCxwYXJhbXMscGFyYW1zU2VyaWFsaXplcil7aWYoIXBhcmFtcylyZXR1cm4gdXJsO3ZhciBzZXJpYWxpemVkUGFyYW1zO2lmKHBhcmFtc1NlcmlhbGl6ZXIpc2VyaWFsaXplZFBhcmFtcz1wYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7ZWxzZSBpZih1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKXNlcmlhbGl6ZWRQYXJhbXM9cGFyYW1zLnRvU3RyaW5nKCk7ZWxzZXt2YXIgcGFydHM9W107dXRpbHMuZm9yRWFjaChwYXJhbXMsZnVuY3Rpb24odmFsLGtleSl7bnVsbCE9dmFsJiYodXRpbHMuaXNBcnJheSh2YWwpP2tleSs9IltdIjp2YWw9W3ZhbF0sdXRpbHMuZm9yRWFjaCh2YWwsZnVuY3Rpb24odil7dXRpbHMuaXNEYXRlKHYpP3Y9di50b0lTT1N0cmluZygpOnV0aWxzLmlzT2JqZWN0KHYpJiYodj1KU09OLnN0cmluZ2lmeSh2KSkscGFydHMucHVzaChlbmNvZGUoa2V5KSsiPSIrZW5jb2RlKHYpKX0pKX0pLHNlcmlhbGl6ZWRQYXJhbXM9cGFydHMuam9pbigiJiIpfXJldHVybiBzZXJpYWxpemVkUGFyYW1zJiYodXJsKz0oLTE9PT11cmwuaW5kZXhPZigiPyIpPyI/IjoiJiIpK3NlcmlhbGl6ZWRQYXJhbXMpLHVybH19LE1QRnA6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBMSUJSQVJZPV9fd2VicGFja19yZXF1aXJlX18oInVPUFMiKSwkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlk3WkMiKSxyZWRlZmluZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJrVGlXIiksaGlkZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJOZWdNIiksSXRlcmF0b3JzPV9fd2VicGFja19yZXF1aXJlX18oIlNCdUUiKSwkaXRlckNyZWF0ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJqMkRDIiksc2V0VG9TdHJpbmdUYWc9X193ZWJwYWNrX3JlcXVpcmVfXygiUmZLQiIpLGdldFByb3RvdHlwZU9mPV9fd2VicGFja19yZXF1aXJlX18oIlUrS0QiKSxJVEVSQVRPUj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJVV2lYIikoIml0ZXJhdG9yIiksQlVHR1k9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSkscmV0dXJuVGhpcz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihCYXNlLE5BTUUsQ29uc3RydWN0b3IsbmV4dCxERUZBVUxULElTX1NFVCxGT1JDRUQpeyRpdGVyQ3JlYXRlKENvbnN0cnVjdG9yLE5BTUUsbmV4dCk7dmFyIG1ldGhvZHMsa2V5LEl0ZXJhdG9yUHJvdG90eXBlLGdldE1ldGhvZD1mdW5jdGlvbihraW5kKXtpZighQlVHR1kmJmtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdO3N3aXRjaChraW5kKXtjYXNlImtleXMiOmNhc2UidmFsdWVzIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsa2luZCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcyxraW5kKX19LFRBRz1OQU1FKyIgSXRlcmF0b3IiLERFRl9WQUxVRVM9InZhbHVlcyI9PURFRkFVTFQsVkFMVUVTX0JVRz0hMSxwcm90bz1CYXNlLnByb3RvdHlwZSwkbmF0aXZlPXByb3RvW0lURVJBVE9SXXx8cHJvdG9bIkBAaXRlcmF0b3IiXXx8REVGQVVMVCYmcHJvdG9bREVGQVVMVF0sJGRlZmF1bHQ9JG5hdGl2ZXx8Z2V0TWV0aG9kKERFRkFVTFQpLCRlbnRyaWVzPURFRkFVTFQ/REVGX1ZBTFVFUz9nZXRNZXRob2QoImVudHJpZXMiKTokZGVmYXVsdDp2b2lkIDAsJGFueU5hdGl2ZT0iQXJyYXkiPT1OQU1FJiZwcm90by5lbnRyaWVzfHwkbmF0aXZlO2lmKCRhbnlOYXRpdmUmJihJdGVyYXRvclByb3RvdHlwZT1nZXRQcm90b3R5cGVPZigkYW55TmF0aXZlLmNhbGwobmV3IEJhc2UpKSkhPT1PYmplY3QucHJvdG90eXBlJiZJdGVyYXRvclByb3RvdHlwZS5uZXh0JiYoc2V0VG9TdHJpbmdUYWcoSXRlcmF0b3JQcm90b3R5cGUsVEFHLCEwKSxMSUJSQVJZfHwiZnVuY3Rpb24iPT10eXBlb2YgSXRlcmF0b3JQcm90b3R5cGVbSVRFUkFUT1JdfHxoaWRlKEl0ZXJhdG9yUHJvdG90eXBlLElURVJBVE9SLHJldHVyblRoaXMpKSxERUZfVkFMVUVTJiYkbmF0aXZlJiYidmFsdWVzIiE9PSRuYXRpdmUubmFtZSYmKFZBTFVFU19CVUc9ITAsJGRlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gJG5hdGl2ZS5jYWxsKHRoaXMpfSksTElCUkFSWSYmIUZPUkNFRHx8IUJVR0dZJiYhVkFMVUVTX0JVRyYmcHJvdG9bSVRFUkFUT1JdfHxoaWRlKHByb3RvLElURVJBVE9SLCRkZWZhdWx0KSxJdGVyYXRvcnNbTkFNRV09JGRlZmF1bHQsSXRlcmF0b3JzW1RBR109cmV0dXJuVGhpcyxERUZBVUxUKWlmKG1ldGhvZHM9e3ZhbHVlczpERUZfVkFMVUVTPyRkZWZhdWx0OmdldE1ldGhvZCgidmFsdWVzIiksa2V5czpJU19TRVQ/JGRlZmF1bHQ6Z2V0TWV0aG9kKCJrZXlzIiksZW50cmllczokZW50cmllc30sRk9SQ0VEKWZvcihrZXkgaW4gbWV0aG9kcylrZXkgaW4gcHJvdG98fHJlZGVmaW5lKHByb3RvLGtleSxtZXRob2RzW2tleV0pO2Vsc2UgJGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKihCVUdHWXx8VkFMVUVTX0JVRyksTkFNRSxtZXRob2RzKTtyZXR1cm4gbWV0aG9kc319LE1iM1E6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe2Z1bmN0aW9uIGNsb25lUm91dGUodG8sZnJvbSl7dmFyIGNsb25lPXtuYW1lOnRvLm5hbWUscGF0aDp0by5wYXRoLGhhc2g6dG8uaGFzaCxxdWVyeTp0by5xdWVyeSxwYXJhbXM6dG8ucGFyYW1zLGZ1bGxQYXRoOnRvLmZ1bGxQYXRoLG1ldGE6dG8ubWV0YX07cmV0dXJuIGZyb20mJihjbG9uZS5mcm9tPWNsb25lUm91dGUoZnJvbSkpLE9iamVjdC5mcmVlemUoY2xvbmUpfWV4cG9ydHMuc3luYz1mdW5jdGlvbihzdG9yZSxyb3V0ZXIsb3B0aW9ucyl7dmFyIG1vZHVsZU5hbWU9KG9wdGlvbnN8fHt9KS5tb2R1bGVOYW1lfHwicm91dGUiO3N0b3JlLnJlZ2lzdGVyTW9kdWxlKG1vZHVsZU5hbWUse25hbWVzcGFjZWQ6ITAsc3RhdGU6Y2xvbmVSb3V0ZShyb3V0ZXIuY3VycmVudFJvdXRlKSxtdXRhdGlvbnM6e1JPVVRFX0NIQU5HRUQ6ZnVuY3Rpb24oc3RhdGUsdHJhbnNpdGlvbil7c3RvcmUuc3RhdGVbbW9kdWxlTmFtZV09Y2xvbmVSb3V0ZSh0cmFuc2l0aW9uLnRvLHRyYW5zaXRpb24uZnJvbSl9fX0pO3ZhciBjdXJyZW50UGF0aCxpc1RpbWVUcmF2ZWxpbmc9ITEsc3RvcmVVbndhdGNoPXN0b3JlLndhdGNoKGZ1bmN0aW9uKHN0YXRlKXtyZXR1cm4gc3RhdGVbbW9kdWxlTmFtZV19LGZ1bmN0aW9uKHJvdXRlKXt2YXIgZnVsbFBhdGg9cm91dGUuZnVsbFBhdGg7ZnVsbFBhdGghPT1jdXJyZW50UGF0aCYmKG51bGwhPWN1cnJlbnRQYXRoJiYoaXNUaW1lVHJhdmVsaW5nPSEwLHJvdXRlci5wdXNoKHJvdXRlKSksY3VycmVudFBhdGg9ZnVsbFBhdGgpfSx7c3luYzohMH0pLGFmdGVyRWFjaFVuSG9vaz1yb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uKHRvLGZyb20pe2lzVGltZVRyYXZlbGluZz9pc1RpbWVUcmF2ZWxpbmc9ITE6KGN1cnJlbnRQYXRoPXRvLmZ1bGxQYXRoLHN0b3JlLmNvbW1pdChtb2R1bGVOYW1lKyIvUk9VVEVfQ0hBTkdFRCIse3RvOnRvLGZyb206ZnJvbX0pKX0pO3JldHVybiBmdW5jdGlvbigpe251bGwhPWFmdGVyRWFjaFVuSG9vayYmYWZ0ZXJFYWNoVW5Ib29rKCksbnVsbCE9c3RvcmVVbndhdGNoJiZzdG9yZVVud2F0Y2goKSxzdG9yZS51bnJlZ2lzdGVyTW9kdWxlKG1vZHVsZU5hbWUpfX19LE1mUU46ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGZuLGFyZ3MsdGhhdCl7dmFyIHVuPXZvaWQgMD09PXRoYXQ7c3dpdGNoKGFyZ3MubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHVuP2ZuKCk6Zm4uY2FsbCh0aGF0KTtjYXNlIDE6cmV0dXJuIHVuP2ZuKGFyZ3NbMF0pOmZuLmNhbGwodGhhdCxhcmdzWzBdKTtjYXNlIDI6cmV0dXJuIHVuP2ZuKGFyZ3NbMF0sYXJnc1sxXSk6Zm4uY2FsbCh0aGF0LGFyZ3NbMF0sYXJnc1sxXSk7Y2FzZSAzOnJldHVybiB1bj9mbihhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSk6Zm4uY2FsbCh0aGF0LGFyZ3NbMF0sYXJnc1sxXSxhcmdzWzJdKTtjYXNlIDQ6cmV0dXJuIHVuP2ZuKGFyZ3NbMF0sYXJnc1sxXSxhcmdzWzJdLGFyZ3NbM10pOmZuLmNhbGwodGhhdCxhcmdzWzBdLGFyZ3NbMV0sYXJnc1syXSxhcmdzWzNdKX1yZXR1cm4gZm4uYXBwbHkodGhhdCxhcmdzKX19LE1xYmw6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIkpCNjgiKSwka2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ3NkdPIik7X193ZWJwYWNrX3JlcXVpcmVfXygiem43TiIpKCJrZXlzIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihpdCl7cmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSl9fSl9LE10ZEI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJNYXRoIix7Y2x6MzI6ZnVuY3Rpb24oeCl7cmV0dXJuKHg+Pj49MCk/MzEtTWF0aC5mbG9vcihNYXRoLmxvZyh4Ky41KSpNYXRoLkxPRzJFKTozMn19KX0sTXVrYjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgZFA9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpLGNyZWF0ZURlc2M9X193ZWJwYWNrX3JlcXVpcmVfXygiUmpELyIpO21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIm5oNGciKT9mdW5jdGlvbihvYmplY3Qsa2V5LHZhbHVlKXtyZXR1cm4gZFAuZihvYmplY3Qsa2V5LGNyZWF0ZURlc2MoMSx2YWx1ZSkpfTpmdW5jdGlvbihvYmplY3Qsa2V5LHZhbHVlKXtyZXR1cm4gb2JqZWN0W2tleV09dmFsdWUsb2JqZWN0fX0sTXZ3QzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgZG9jdW1lbnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiNVQyWSIpLmRvY3VtZW50O21vZHVsZS5leHBvcnRzPWRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LE42Y0o6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIE1hcD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI5QUFuIiksJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksc2hhcmVkPV9fd2VicGFja19yZXF1aXJlX18oIlZUZXIiKSgibWV0YWRhdGEiKSxzdG9yZT1zaGFyZWQuc3RvcmV8fChzaGFyZWQuc3RvcmU9bmV3KF9fd2VicGFja19yZXF1aXJlX18oIkVLMEUiKSkpLGdldE9yQ3JlYXRlTWV0YWRhdGFNYXA9ZnVuY3Rpb24odGFyZ2V0LHRhcmdldEtleSxjcmVhdGUpe3ZhciB0YXJnZXRNZXRhZGF0YT1zdG9yZS5nZXQodGFyZ2V0KTtpZighdGFyZ2V0TWV0YWRhdGEpe2lmKCFjcmVhdGUpcmV0dXJuO3N0b3JlLnNldCh0YXJnZXQsdGFyZ2V0TWV0YWRhdGE9bmV3IE1hcCl9dmFyIGtleU1ldGFkYXRhPXRhcmdldE1ldGFkYXRhLmdldCh0YXJnZXRLZXkpO2lmKCFrZXlNZXRhZGF0YSl7aWYoIWNyZWF0ZSlyZXR1cm47dGFyZ2V0TWV0YWRhdGEuc2V0KHRhcmdldEtleSxrZXlNZXRhZGF0YT1uZXcgTWFwKX1yZXR1cm4ga2V5TWV0YWRhdGF9O21vZHVsZS5leHBvcnRzPXtzdG9yZTpzdG9yZSxtYXA6Z2V0T3JDcmVhdGVNZXRhZGF0YU1hcCxoYXM6ZnVuY3Rpb24oTWV0YWRhdGFLZXksTyxQKXt2YXIgbWV0YWRhdGFNYXA9Z2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLFAsITEpO3JldHVybiB2b2lkIDAhPT1tZXRhZGF0YU1hcCYmbWV0YWRhdGFNYXAuaGFzKE1ldGFkYXRhS2V5KX0sZ2V0OmZ1bmN0aW9uKE1ldGFkYXRhS2V5LE8sUCl7dmFyIG1ldGFkYXRhTWFwPWdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTyxQLCExKTtyZXR1cm4gdm9pZCAwPT09bWV0YWRhdGFNYXA/dm9pZCAwOm1ldGFkYXRhTWFwLmdldChNZXRhZGF0YUtleSl9LHNldDpmdW5jdGlvbihNZXRhZGF0YUtleSxNZXRhZGF0YVZhbHVlLE8sUCl7Z2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLFAsITApLnNldChNZXRhZGF0YUtleSxNZXRhZGF0YVZhbHVlKX0sa2V5czpmdW5jdGlvbih0YXJnZXQsdGFyZ2V0S2V5KXt2YXIgbWV0YWRhdGFNYXA9Z2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0YXJnZXQsdGFyZ2V0S2V5LCExKSxrZXlzPVtdO3JldHVybiBtZXRhZGF0YU1hcCYmbWV0YWRhdGFNYXAuZm9yRWFjaChmdW5jdGlvbihfLGtleSl7a2V5cy5wdXNoKGtleSl9KSxrZXlzfSxrZXk6ZnVuY3Rpb24oaXQpe3JldHVybiB2b2lkIDA9PT1pdHx8InN5bWJvbCI9PXR5cGVvZiBpdD9pdDpTdHJpbmcoaXQpfSxleHA6ZnVuY3Rpb24oTyl7JGV4cG9ydCgkZXhwb3J0LlMsIlJlZmxlY3QiLE8pfX19LE43Vlc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLGNvcmU9X193ZWJwYWNrX3JlcXVpcmVfXygiZzNnNSIpLG1pY3JvdGFzaz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJnSG5uIikoKSxPQlNFUlZBQkxFPV9fd2VicGFja19yZXF1aXJlX18oIksweFUiKSgib2JzZXJ2YWJsZSIpLGFGdW5jdGlvbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCIyT2lGIiksYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLGFuSW5zdGFuY2U9X193ZWJwYWNrX3JlcXVpcmVfXygiOWdYNyIpLHJlZGVmaW5lQWxsPV9fd2VicGFja19yZXF1aXJlX18oIjNMeWoiKSxoaWRlPV9fd2VicGFja19yZXF1aXJlX18oIk11a2IiKSxmb3JPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTbGtZIiksUkVUVVJOPWZvck9mLlJFVFVSTixnZXRNZXRob2Q9ZnVuY3Rpb24oZm4pe3JldHVybiBudWxsPT1mbj92b2lkIDA6YUZ1bmN0aW9uKGZuKX0sY2xlYW51cFN1YnNjcmlwdGlvbj1mdW5jdGlvbihzdWJzY3JpcHRpb24pe3ZhciBjbGVhbnVwPXN1YnNjcmlwdGlvbi5fYztjbGVhbnVwJiYoc3Vic2NyaXB0aW9uLl9jPXZvaWQgMCxjbGVhbnVwKCkpfSxzdWJzY3JpcHRpb25DbG9zZWQ9ZnVuY3Rpb24oc3Vic2NyaXB0aW9uKXtyZXR1cm4gdm9pZCAwPT09c3Vic2NyaXB0aW9uLl9vfSxjbG9zZVN1YnNjcmlwdGlvbj1mdW5jdGlvbihzdWJzY3JpcHRpb24pe3N1YnNjcmlwdGlvbkNsb3NlZChzdWJzY3JpcHRpb24pfHwoc3Vic2NyaXB0aW9uLl9vPXZvaWQgMCxjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikpfSxTdWJzY3JpcHRpb249ZnVuY3Rpb24ob2JzZXJ2ZXIsc3Vic2NyaWJlcil7YW5PYmplY3Qob2JzZXJ2ZXIpLHRoaXMuX2M9dm9pZCAwLHRoaXMuX289b2JzZXJ2ZXIsb2JzZXJ2ZXI9bmV3IFN1YnNjcmlwdGlvbk9ic2VydmVyKHRoaXMpO3RyeXt2YXIgY2xlYW51cD1zdWJzY3JpYmVyKG9ic2VydmVyKSxzdWJzY3JpcHRpb249Y2xlYW51cDtudWxsIT1jbGVhbnVwJiYoImZ1bmN0aW9uIj09dHlwZW9mIGNsZWFudXAudW5zdWJzY3JpYmU/Y2xlYW51cD1mdW5jdGlvbigpe3N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfTphRnVuY3Rpb24oY2xlYW51cCksdGhpcy5fYz1jbGVhbnVwKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBvYnNlcnZlci5lcnJvcihlKX1zdWJzY3JpcHRpb25DbG9zZWQodGhpcykmJmNsZWFudXBTdWJzY3JpcHRpb24odGhpcyl9O1N1YnNjcmlwdGlvbi5wcm90b3R5cGU9cmVkZWZpbmVBbGwoe30se3Vuc3Vic2NyaWJlOmZ1bmN0aW9uKCl7Y2xvc2VTdWJzY3JpcHRpb24odGhpcyl9fSk7dmFyIFN1YnNjcmlwdGlvbk9ic2VydmVyPWZ1bmN0aW9uKHN1YnNjcmlwdGlvbil7dGhpcy5fcz1zdWJzY3JpcHRpb259O1N1YnNjcmlwdGlvbk9ic2VydmVyLnByb3RvdHlwZT1yZWRlZmluZUFsbCh7fSx7bmV4dDpmdW5jdGlvbih2YWx1ZSl7dmFyIHN1YnNjcmlwdGlvbj10aGlzLl9zO2lmKCFzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uKSl7dmFyIG9ic2VydmVyPXN1YnNjcmlwdGlvbi5fbzt0cnl7dmFyIG09Z2V0TWV0aG9kKG9ic2VydmVyLm5leHQpO2lmKG0pcmV0dXJuIG0uY2FsbChvYnNlcnZlcix2YWx1ZSl9Y2F0Y2goZSl7dHJ5e2Nsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbil9ZmluYWxseXt0aHJvdyBlfX19fSxlcnJvcjpmdW5jdGlvbih2YWx1ZSl7dmFyIHN1YnNjcmlwdGlvbj10aGlzLl9zO2lmKHN1YnNjcmlwdGlvbkNsb3NlZChzdWJzY3JpcHRpb24pKXRocm93IHZhbHVlO3ZhciBvYnNlcnZlcj1zdWJzY3JpcHRpb24uX287c3Vic2NyaXB0aW9uLl9vPXZvaWQgMDt0cnl7dmFyIG09Z2V0TWV0aG9kKG9ic2VydmVyLmVycm9yKTtpZighbSl0aHJvdyB2YWx1ZTt2YWx1ZT1tLmNhbGwob2JzZXJ2ZXIsdmFsdWUpfWNhdGNoKGUpe3RyeXtjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbil9ZmluYWxseXt0aHJvdyBlfX1yZXR1cm4gY2xlYW51cFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pLHZhbHVlfSxjb21wbGV0ZTpmdW5jdGlvbih2YWx1ZSl7dmFyIHN1YnNjcmlwdGlvbj10aGlzLl9zO2lmKCFzdWJzY3JpcHRpb25DbG9zZWQoc3Vic2NyaXB0aW9uKSl7dmFyIG9ic2VydmVyPXN1YnNjcmlwdGlvbi5fbztzdWJzY3JpcHRpb24uX289dm9pZCAwO3RyeXt2YXIgbT1nZXRNZXRob2Qob2JzZXJ2ZXIuY29tcGxldGUpO3ZhbHVlPW0/bS5jYWxsKG9ic2VydmVyLHZhbHVlKTp2b2lkIDB9Y2F0Y2goZSl7dHJ5e2NsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKX1maW5hbGx5e3Rocm93IGV9fXJldHVybiBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiksdmFsdWV9fX0pO3ZhciAkT2JzZXJ2YWJsZT1mdW5jdGlvbihzdWJzY3JpYmVyKXthbkluc3RhbmNlKHRoaXMsJE9ic2VydmFibGUsIk9ic2VydmFibGUiLCJfZiIpLl9mPWFGdW5jdGlvbihzdWJzY3JpYmVyKX07cmVkZWZpbmVBbGwoJE9ic2VydmFibGUucHJvdG90eXBlLHtzdWJzY3JpYmU6ZnVuY3Rpb24ob2JzZXJ2ZXIpe3JldHVybiBuZXcgU3Vic2NyaXB0aW9uKG9ic2VydmVyLHRoaXMuX2YpfSxmb3JFYWNoOmZ1bmN0aW9uKGZuKXt2YXIgdGhhdD10aGlzO3JldHVybiBuZXcoY29yZS5Qcm9taXNlfHxnbG9iYWwuUHJvbWlzZSkoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe2FGdW5jdGlvbihmbik7dmFyIHN1YnNjcmlwdGlvbj10aGF0LnN1YnNjcmliZSh7bmV4dDpmdW5jdGlvbih2YWx1ZSl7dHJ5e3JldHVybiBmbih2YWx1ZSl9Y2F0Y2goZSl7cmVqZWN0KGUpLHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfX0sZXJyb3I6cmVqZWN0LGNvbXBsZXRlOnJlc29sdmV9KX0pfX0pLHJlZGVmaW5lQWxsKCRPYnNlcnZhYmxlLHtmcm9tOmZ1bmN0aW9uKHgpe3ZhciBDPSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6JE9ic2VydmFibGUsbWV0aG9kPWdldE1ldGhvZChhbk9iamVjdCh4KVtPQlNFUlZBQkxFXSk7aWYobWV0aG9kKXt2YXIgb2JzZXJ2YWJsZT1hbk9iamVjdChtZXRob2QuY2FsbCh4KSk7cmV0dXJuIG9ic2VydmFibGUuY29uc3RydWN0b3I9PT1DP29ic2VydmFibGU6bmV3IEMoZnVuY3Rpb24ob2JzZXJ2ZXIpe3JldHVybiBvYnNlcnZhYmxlLnN1YnNjcmliZShvYnNlcnZlcil9KX1yZXR1cm4gbmV3IEMoZnVuY3Rpb24ob2JzZXJ2ZXIpe3ZhciBkb25lPSExO3JldHVybiBtaWNyb3Rhc2soZnVuY3Rpb24oKXtpZighZG9uZSl7dHJ5e2lmKGZvck9mKHgsITEsZnVuY3Rpb24oaXQpe2lmKG9ic2VydmVyLm5leHQoaXQpLGRvbmUpcmV0dXJuIFJFVFVSTn0pPT09UkVUVVJOKXJldHVybn1jYXRjaChlKXtpZihkb25lKXRocm93IGU7cmV0dXJuIHZvaWQgb2JzZXJ2ZXIuZXJyb3IoZSl9b2JzZXJ2ZXIuY29tcGxldGUoKX19KSxmdW5jdGlvbigpe2RvbmU9ITB9fSl9LG9mOmZ1bmN0aW9uKCl7Zm9yKHZhciBpPTAsbD1hcmd1bWVudHMubGVuZ3RoLGl0ZW1zPW5ldyBBcnJheShsKTtpPGw7KWl0ZW1zW2ldPWFyZ3VtZW50c1tpKytdO3JldHVybiBuZXcoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczokT2JzZXJ2YWJsZSkoZnVuY3Rpb24ob2JzZXJ2ZXIpe3ZhciBkb25lPSExO3JldHVybiBtaWNyb3Rhc2soZnVuY3Rpb24oKXtpZighZG9uZSl7Zm9yKHZhciBqPTA7ajxpdGVtcy5sZW5ndGg7KytqKWlmKG9ic2VydmVyLm5leHQoaXRlbXNbal0pLGRvbmUpcmV0dXJuO29ic2VydmVyLmNvbXBsZXRlKCl9fSksZnVuY3Rpb24oKXtkb25lPSEwfX0pfX0pLGhpZGUoJE9ic2VydmFibGUucHJvdG90eXBlLE9CU0VSVkFCTEUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLCRleHBvcnQoJGV4cG9ydC5HLHtPYnNlcnZhYmxlOiRPYnNlcnZhYmxlfSksX193ZWJwYWNrX3JlcXVpcmVfXygiZWxacSIpKCJPYnNlcnZhYmxlIil9LE44ZzM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXhwb3J0cy5mPV9fd2VicGFja19yZXF1aXJlX18oIksweFUiKX0sTk84ZjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCI3RERnIikoIlVpbnQ4IiwxLGZ1bmN0aW9uKGluaXQpe3JldHVybiBmdW5jdGlvbihkYXRhLGJ5dGVPZmZzZXQsbGVuZ3RoKXtyZXR1cm4gaW5pdCh0aGlzLGRhdGEsYnl0ZU9mZnNldCxsZW5ndGgpfX0pfSxOVFhrOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGF0PV9fd2VicGFja19yZXF1aXJlX18oIkF2UkUiKSghMCk7JGV4cG9ydCgkZXhwb3J0LlAsIlN0cmluZyIse2F0OmZ1bmN0aW9uKHBvcyl7cmV0dXJuICRhdCh0aGlzLHBvcyl9fSl9LE5WMGs6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe2V4cG9ydHMuZj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZX0sTmVnTTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgZFA9X193ZWJwYWNrX3JlcXVpcmVfXygiMmZhRSIpLGNyZWF0ZURlc2M9X193ZWJwYWNrX3JlcXVpcmVfXygicnIxaSIpO21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oImptREgiKT9mdW5jdGlvbihvYmplY3Qsa2V5LHZhbHVlKXtyZXR1cm4gZFAuZihvYmplY3Qsa2V5LGNyZWF0ZURlc2MoMSx2YWx1ZSkpfTpmdW5jdGlvbihvYmplY3Qsa2V5LHZhbHVlKXtyZXR1cm4gb2JqZWN0W2tleV09dmFsdWUsb2JqZWN0fX0sTnIxODpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlMvai8iKSx0b0Fic29sdXRlSW5kZXg9X193ZWJwYWNrX3JlcXVpcmVfXygiZC9HYyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbih2YWx1ZSl7Zm9yKHZhciBPPXRvT2JqZWN0KHRoaXMpLGxlbmd0aD10b0xlbmd0aChPLmxlbmd0aCksYUxlbj1hcmd1bWVudHMubGVuZ3RoLGluZGV4PXRvQWJzb2x1dGVJbmRleCgxPGFMZW4/YXJndW1lbnRzWzFdOnZvaWQgMCxsZW5ndGgpLGVuZD0yPGFMZW4/YXJndW1lbnRzWzJdOnZvaWQgMCxlbmRQb3M9dm9pZCAwPT09ZW5kP2xlbmd0aDp0b0Fic29sdXRlSW5kZXgoZW5kLGxlbmd0aCk7aW5kZXg8ZW5kUG9zOylPW2luZGV4KytdPXZhbHVlO3JldHVybiBPfX0sIk5zTy8iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBJT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIk0xeHAiKSxkZWZpbmVkPV9fd2VicGFja19yZXF1aXJlX18oIkplczAiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpfX0sTndKMzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgSXRlcmF0b3JzPV9fd2VicGFja19yZXF1aXJlX18oIlNCdUUiKSxJVEVSQVRPUj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJVV2lYIikoIml0ZXJhdG9yIiksQXJyYXlQcm90bz1BcnJheS5wcm90b3R5cGU7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQpe3JldHVybiB2b2lkIDAhPT1pdCYmKEl0ZXJhdG9ycy5BcnJheT09PWl0fHxBcnJheVByb3RvW0lURVJBVE9SXT09PWl0KX19LE56OVU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSx0b0lPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiYUNGaiIpLGFycmF5Sm9pbj1bXS5qb2luOyRleHBvcnQoJGV4cG9ydC5QKyRleHBvcnQuRiooX193ZWJwYWNrX3JlcXVpcmVfXygiWW1xdiIpIT1PYmplY3R8fCFfX3dlYnBhY2tfcmVxdWlyZV9fKCJMeUU4IikoYXJyYXlKb2luKSksIkFycmF5Iix7am9pbjpmdW5jdGlvbihzZXBhcmF0b3Ipe3JldHVybiBhcnJheUpvaW4uY2FsbCh0b0lPYmplY3QodGhpcyksdm9pZCAwPT09c2VwYXJhdG9yPyIsIjpzZXBhcmF0b3IpfX0pfSxPRWJZOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIm5oNGciKSYmImciIT0vLi9nLmZsYWdzJiZfX3dlYnBhY2tfcmVxdWlyZV9fKCJoc3dhIikuZihSZWdFeHAucHJvdG90eXBlLCJmbGFncyIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6X193ZWJwYWNrX3JlcXVpcmVfXygiQy92YSIpfSl9LE9HMTQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5Iiksc2FtZVZhbHVlPV9fd2VicGFja19yZXF1aXJlX18oImc2SEwiKSxyZWdFeHBFeGVjPV9fd2VicGFja19yZXF1aXJlX18oIlh4dXoiKTtfX3dlYnBhY2tfcmVxdWlyZV9fKCJJVStaIikoInNlYXJjaCIsMSxmdW5jdGlvbihkZWZpbmVkLFNFQVJDSCwkc2VhcmNoLG1heWJlQ2FsbE5hdGl2ZSl7cmV0dXJuW2Z1bmN0aW9uKHJlZ2V4cCl7dmFyIE89ZGVmaW5lZCh0aGlzKSxmbj1udWxsPT1yZWdleHA/dm9pZCAwOnJlZ2V4cFtTRUFSQ0hdO3JldHVybiB2b2lkIDAhPT1mbj9mbi5jYWxsKHJlZ2V4cCxPKTpuZXcgUmVnRXhwKHJlZ2V4cClbU0VBUkNIXShTdHJpbmcoTykpfSxmdW5jdGlvbihyZWdleHApe3ZhciByZXM9bWF5YmVDYWxsTmF0aXZlKCRzZWFyY2gscmVnZXhwLHRoaXMpO2lmKHJlcy5kb25lKXJldHVybiByZXMudmFsdWU7dmFyIHJ4PWFuT2JqZWN0KHJlZ2V4cCksUz1TdHJpbmcodGhpcykscHJldmlvdXNMYXN0SW5kZXg9cngubGFzdEluZGV4O3NhbWVWYWx1ZShwcmV2aW91c0xhc3RJbmRleCwwKXx8KHJ4Lmxhc3RJbmRleD0wKTt2YXIgcmVzdWx0PXJlZ0V4cEV4ZWMocngsUyk7cmV0dXJuIHNhbWVWYWx1ZShyeC5sYXN0SW5kZXgscHJldmlvdXNMYXN0SW5kZXgpfHwocngubGFzdEluZGV4PXByZXZpb3VzTGFzdEluZGV4KSxudWxsPT09cmVzdWx0Py0xOnJlc3VsdC5pbmRleH1dfSl9LE9HdGY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGZhaWxzPV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKSxkZWZpbmVkPV9fd2VicGFja19yZXF1aXJlX18oInZoUFUiKSxxdW90PS8iL2csY3JlYXRlSFRNTD1mdW5jdGlvbihzdHJpbmcsdGFnLGF0dHJpYnV0ZSx2YWx1ZSl7dmFyIFM9U3RyaW5nKGRlZmluZWQoc3RyaW5nKSkscDE9IjwiK3RhZztyZXR1cm4iIiE9PWF0dHJpYnV0ZSYmKHAxKz0iICIrYXR0cmlidXRlKyc9IicrU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHF1b3QsIiZxdW90OyIpKyciJykscDErIj4iK1MrIjwvIit0YWcrIj4ifTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihOQU1FLGV4ZWMpe3ZhciBPPXt9O09bTkFNRV09ZXhlYyhjcmVhdGVIVE1MKSwkZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqZmFpbHMoZnVuY3Rpb24oKXt2YXIgdGVzdD0iIltOQU1FXSgnIicpO3JldHVybiB0ZXN0IT09dGVzdC50b0xvd2VyQ2FzZSgpfHwzPHRlc3Quc3BsaXQoJyInKS5sZW5ndGh9KSwiU3RyaW5nIixPKX19LE9IOWM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGVycm9yLGNvbmZpZyxjb2RlLHJlcXVlc3QscmVzcG9uc2Upe3JldHVybiBlcnJvci5jb25maWc9Y29uZmlnLGNvZGUmJihlcnJvci5jb2RlPWNvZGUpLGVycm9yLnJlcXVlc3Q9cmVxdWVzdCxlcnJvci5yZXNwb25zZT1yZXNwb25zZSxlcnJvcn19LE9JWWk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImVuLWNhIix7bW9udGhzOiJKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXkiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTdV9Nb19UdV9XZV9UaF9Gcl9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Img6bW0gQSIsTFRTOiJoOm1tOnNzIEEiLEw6IllZWVktTU0tREQiLExMOiJNTU1NIEQsIFlZWVkiLExMTDoiTU1NTSBELCBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgTU1NTSBELCBZWVlZIGg6bW0gQSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbVG9kYXkgYXRdIExUIixuZXh0RGF5OiJbVG9tb3Jyb3cgYXRdIExUIixuZXh0V2VlazoiZGRkZCBbYXRdIExUIixsYXN0RGF5OiJbWWVzdGVyZGF5IGF0XSBMVCIsbGFzdFdlZWs6IltMYXN0XSBkZGRkIFthdF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImluICVzIixwYXN0OiIlcyBhZ28iLHM6ImEgZmV3IHNlY29uZHMiLHNzOiIlZCBzZWNvbmRzIixtOiJhIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6ImFuIGhvdXIiLGhoOiIlZCBob3VycyIsZDoiYSBkYXkiLGRkOiIlZCBkYXlzIixNOiJhIG1vbnRoIixNTToiJWQgbW9udGhzIix5OiJhIHllYXIiLHl5OiIlZCB5ZWFycyJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0oc3R8bmR8cmR8dGgpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7dmFyIGI9bnVtYmVyJTEwLG91dHB1dD0xPT1+fihudW1iZXIlMTAwLzEwKT8idGgiOjE9PT1iPyJzdCI6Mj09PWI/Im5kIjozPT09Yj8icmQiOiJ0aCI7cmV0dXJuIG51bWJlcitvdXRwdXR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LE9QM1k6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGhhcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhYWd4IiksdG9PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiUy9qLyIpLElFX1BST1RPPV9fd2VicGFja19yZXF1aXJlX18oIllUdkEiKSgiSUVfUFJPVE8iKSxPYmplY3RQcm90bz1PYmplY3QucHJvdG90eXBlO21vZHVsZS5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oTyl7cmV0dXJuIE89dG9PYmplY3QoTyksaGFzKE8sSUVfUFJPVE8pP09bSUVfUFJPVE9dOiJmdW5jdGlvbiI9PXR5cGVvZiBPLmNvbnN0cnVjdG9yJiZPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3Rvcj9PLmNvbnN0cnVjdG9yLnByb3RvdHlwZTpPIGluc3RhbmNlb2YgT2JqZWN0P09iamVjdFByb3RvOm51bGx9fSxPVFR3OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgdXRpbHM9X193ZWJwYWNrX3JlcXVpcmVfXygieFRKKyIpO21vZHVsZS5leHBvcnRzPXV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCk/ZnVuY3Rpb24oKXt2YXIgb3JpZ2luVVJMLG1zaWU9Lyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSx1cmxQYXJzaW5nTm9kZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7ZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpe3ZhciBocmVmPXVybDtyZXR1cm4gbXNpZSYmKHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgiaHJlZiIsaHJlZiksaHJlZj11cmxQYXJzaW5nTm9kZS5ocmVmKSx1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoImhyZWYiLGhyZWYpLHtocmVmOnVybFBhcnNpbmdOb2RlLmhyZWYscHJvdG9jb2w6dXJsUGFyc2luZ05vZGUucHJvdG9jb2w/dXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCIiKToiIixob3N0OnVybFBhcnNpbmdOb2RlLmhvc3Qsc2VhcmNoOnVybFBhcnNpbmdOb2RlLnNlYXJjaD91cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlw/LywiIik6IiIsaGFzaDp1cmxQYXJzaW5nTm9kZS5oYXNoP3VybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCIiKToiIixob3N0bmFtZTp1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxwb3J0OnVybFBhcnNpbmdOb2RlLnBvcnQscGF0aG5hbWU6Ii8iPT09dXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApP3VybFBhcnNpbmdOb2RlLnBhdGhuYW1lOiIvIit1cmxQYXJzaW5nTm9kZS5wYXRobmFtZX19cmV0dXJuIG9yaWdpblVSTD1yZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKSxmdW5jdGlvbihyZXF1ZXN0VVJMKXt2YXIgcGFyc2VkPXV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpP3Jlc29sdmVVUkwocmVxdWVzdFVSTCk6cmVxdWVzdFVSTDtyZXR1cm4gcGFyc2VkLnByb3RvY29sPT09b3JpZ2luVVJMLnByb3RvY29sJiZwYXJzZWQuaG9zdD09PW9yaWdpblVSTC5ob3N0fX0oKTpmdW5jdGlvbigpe3JldHVybiEwfX0sT2FhNzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZW4tZ2IiLHttb250aHM6IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixzczoiJWQgc2Vjb25kcyIsbToiYSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJhbiBob3VyIixoaDoiJWQgaG91cnMiLGQ6ImEgZGF5IixkZDoiJWQgZGF5cyIsTToiYSBtb250aCIsTU06IiVkIG1vbnRocyIseToiYSB5ZWFyIix5eToiJWQgeWVhcnMifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHN0fG5kfHJkfHRoKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3ZhciBiPW51bWJlciUxMCxvdXRwdXQ9MT09fn4obnVtYmVyJTEwMC8xMCk/InRoIjoxPT09Yj8ic3QiOjI9PT1iPyJuZCI6Mz09PWI/InJkIjoidGgiO3JldHVybiBudW1iZXIrb3V0cHV0fSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sT2IwWjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIHN5bWJvbE1hcD17MToi4KWnIiwyOiLgpagiLDM6IuClqSIsNDoi4KWqIiw1OiLgpasiLDY6IuClrCIsNzoi4KWtIiw4OiLgpa4iLDk6IuClryIsMDoi4KWmIn0sbnVtYmVyTWFwPXsi4KWnIjoiMSIsIuClqCI6IjIiLCLgpakiOiIzIiwi4KWqIjoiNCIsIuClqyI6IjUiLCLgpawiOiI2Iiwi4KWtIjoiNyIsIuClriI6IjgiLCLgpa8iOiI5Iiwi4KWmIjoiMCJ9O2Z1bmN0aW9uIHJlbGF0aXZlVGltZU1yKG51bWJlcix3aXRob3V0U3VmZml4LHN0cmluZyxpc0Z1dHVyZSl7dmFyIG91dHB1dD0iIjtpZih3aXRob3V0U3VmZml4KXN3aXRjaChzdHJpbmcpe2Nhc2UicyI6b3V0cHV0PSLgpJXgpL7gpLngpYAg4KS44KWH4KSV4KSC4KSmIjticmVhaztjYXNlInNzIjpvdXRwdXQ9IiVkIOCkuOClh+CkleCkguCkpiI7YnJlYWs7Y2FzZSJtIjpvdXRwdXQ9IuCkj+CklSDgpK7gpL/gpKjgpL/gpJ8iO2JyZWFrO2Nhc2UibW0iOm91dHB1dD0iJWQg4KSu4KS/4KSo4KS/4KSf4KWHIjticmVhaztjYXNlImgiOm91dHB1dD0i4KSP4KSVIOCkpOCkvuCkuCI7YnJlYWs7Y2FzZSJoaCI6b3V0cHV0PSIlZCDgpKTgpL7gpLgiO2JyZWFrO2Nhc2UiZCI6b3V0cHV0PSLgpI/gpJUg4KSm4KS/4KS14KS4IjticmVhaztjYXNlImRkIjpvdXRwdXQ9IiVkIOCkpuCkv+CkteCkuCI7YnJlYWs7Y2FzZSJNIjpvdXRwdXQ9IuCkj+CklSDgpK7gpLngpL/gpKjgpL4iO2JyZWFrO2Nhc2UiTU0iOm91dHB1dD0iJWQg4KSu4KS54KS/4KSo4KWHIjticmVhaztjYXNlInkiOm91dHB1dD0i4KSP4KSVIOCkteCksOCljeCktyI7YnJlYWs7Y2FzZSJ5eSI6b3V0cHV0PSIlZCDgpLXgpLDgpY3gpLfgpYcifWVsc2Ugc3dpdGNoKHN0cmluZyl7Y2FzZSJzIjpvdXRwdXQ9IuCkleCkvuCkueClgCDgpLjgpYfgpJXgpILgpKbgpL7gpIIiO2JyZWFrO2Nhc2Uic3MiOm91dHB1dD0iJWQg4KS44KWH4KSV4KSC4KSm4KS+4KSCIjticmVhaztjYXNlIm0iOm91dHB1dD0i4KSP4KSV4KS+IOCkruCkv+CkqOCkv+Ckn+CkviI7YnJlYWs7Y2FzZSJtbSI6b3V0cHV0PSIlZCDgpK7gpL/gpKjgpL/gpJ/gpL7gpIIiO2JyZWFrO2Nhc2UiaCI6b3V0cHV0PSLgpI/gpJXgpL4g4KSk4KS+4KS44KS+IjticmVhaztjYXNlImhoIjpvdXRwdXQ9IiVkIOCkpOCkvuCkuOCkvuCkgiI7YnJlYWs7Y2FzZSJkIjpvdXRwdXQ9IuCkj+CkleCkviDgpKbgpL/gpLXgpLjgpL4iO2JyZWFrO2Nhc2UiZGQiOm91dHB1dD0iJWQg4KSm4KS/4KS14KS44KS+4KSCIjticmVhaztjYXNlIk0iOm91dHB1dD0i4KSP4KSV4KS+IOCkruCkueCkv+CkqOCljeCkr+CkviI7YnJlYWs7Y2FzZSJNTSI6b3V0cHV0PSIlZCDgpK7gpLngpL/gpKjgpY3gpK/gpL7gpIIiO2JyZWFrO2Nhc2UieSI6b3V0cHV0PSLgpI/gpJXgpL4g4KS14KSw4KWN4KS34KS+IjticmVhaztjYXNlInl5IjpvdXRwdXQ9IiVkIOCkteCksOCljeCkt+CkvuCkgiJ9cmV0dXJuIG91dHB1dC5yZXBsYWNlKC8lZC9pLG51bWJlcil9bW9tZW50LmRlZmluZUxvY2FsZSgibXIiLHttb250aHM6IuCknOCkvuCkqOClh+CkteCkvuCksOClgF/gpKvgpYfgpKzgpY3gpLDgpYHgpLXgpL7gpLDgpYBf4KSu4KS+4KSw4KWN4KSaX+Ckj+CkquCljeCksOCkv+Cksl/gpK7gpYdf4KSc4KWC4KSoX+CknOClgeCksuCliF/gpJHgpJfgpLjgpY3gpJ9f4KS44KSq4KWN4KSf4KWH4KSC4KSs4KSwX+CkkeCkleCljeCkn+Cli+CkrOCksF/gpKjgpYvgpLXgpY3gpLngpYfgpILgpKzgpLBf4KSh4KS/4KS44KWH4KSC4KSs4KSwIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgpJzgpL7gpKjgpYcuX+Ckq+Clh+CkrOCljeCksOClgS5f4KSu4KS+4KSw4KWN4KSaLl/gpI/gpKrgpY3gpLDgpL8uX+CkruClhy5f4KSc4KWC4KSoLl/gpJzgpYHgpLLgpYguX+CkkeCkly5f4KS44KSq4KWN4KSf4KWH4KSCLl/gpJHgpJXgpY3gpJ/gpYsuX+CkqOCli+CkteCljeCkueClh+Ckgi5f4KSh4KS/4KS44KWH4KSCLiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiLgpLDgpLXgpL/gpLXgpL7gpLBf4KS44KWL4KSu4KS14KS+4KSwX+CkruCkguCkl+Cks+CkteCkvuCksF/gpKzgpYHgpKfgpLXgpL7gpLBf4KSX4KWB4KSw4KWC4KS14KS+4KSwX+CktuClgeCkleCljeCksOCkteCkvuCksF/gpLbgpKjgpL/gpLXgpL7gpLAiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4KSw4KS14KS/X+CkuOCli+Ckrl/gpK7gpILgpJfgpLNf4KSs4KWB4KSnX+Ckl+ClgeCksOClgl/gpLbgpYHgpJXgpY3gpLBf4KS24KSo4KS/Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgpLBf4KS44KWLX+CkruCkgl/gpKzgpYFf4KSX4KWBX+CktuClgV/gpLYiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJBIGg6bW0g4KS14KS+4KSc4KSk4KS+IixMVFM6IkEgaDptbTpzcyDgpLXgpL7gpJzgpKTgpL4iLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSwgQSBoOm1tIOCkteCkvuCknOCkpOCkviIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVksIEEgaDptbSDgpLXgpL7gpJzgpKTgpL4ifSxjYWxlbmRhcjp7c2FtZURheToiW+CkhuCknF0gTFQiLG5leHREYXk6IlvgpIngpKbgpY3gpK/gpL5dIExUIixuZXh0V2VlazoiZGRkZCwgTFQiLGxhc3REYXk6IlvgpJXgpL7gpLJdIExUIixsYXN0V2VlazoiW+CkruCkvuCkl+ClgOCksl0gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz4KSu4KSn4KWN4KSv4KWHIixwYXN0OiIlc+CkquClguCksOCljeCkteClgCIsczpyZWxhdGl2ZVRpbWVNcixzczpyZWxhdGl2ZVRpbWVNcixtOnJlbGF0aXZlVGltZU1yLG1tOnJlbGF0aXZlVGltZU1yLGg6cmVsYXRpdmVUaW1lTXIsaGg6cmVsYXRpdmVUaW1lTXIsZDpyZWxhdGl2ZVRpbWVNcixkZDpyZWxhdGl2ZVRpbWVNcixNOnJlbGF0aXZlVGltZU1yLE1NOnJlbGF0aXZlVGltZU1yLHk6cmVsYXRpdmVUaW1lTXIseXk6cmVsYXRpdmVUaW1lTXJ9LHByZXBhcnNlOmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4KWn4KWo4KWp4KWq4KWr4KWs4KWt4KWu4KWv4KWmXS9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbnVtYmVyTWFwW21hdGNoXX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cZC9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gc3ltYm9sTWFwW21hdGNoXX0pfSxtZXJpZGllbVBhcnNlOi/gpLDgpL7gpKTgpY3gpLDgpYB84KS44KSV4KS+4KSz4KWAfOCkpuClgeCkquCkvuCksOClgHzgpLjgpL7gpK/gpILgpJXgpL7gpLPgpYAvLG1lcmlkaWVtSG91cjpmdW5jdGlvbihob3VyLG1lcmlkaWVtKXtyZXR1cm4gMTI9PT1ob3VyJiYoaG91cj0wKSwi4KSw4KS+4KSk4KWN4KSw4KWAIj09PW1lcmlkaWVtP2hvdXI8ND9ob3VyOmhvdXIrMTI6IuCkuOCkleCkvuCks+ClgCI9PT1tZXJpZGllbT9ob3VyOiLgpKbgpYHgpKrgpL7gpLDgpYAiPT09bWVyaWRpZW0/MTA8PWhvdXI/aG91cjpob3VyKzEyOiLgpLjgpL7gpK/gpILgpJXgpL7gpLPgpYAiPT09bWVyaWRpZW0/aG91cisxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDQ/IuCksOCkvuCkpOCljeCksOClgCI6aG91cjwxMD8i4KS44KSV4KS+4KSz4KWAIjpob3VyPDE3PyLgpKbgpYHgpKrgpL7gpLDgpYAiOmhvdXI8MjA/IuCkuOCkvuCkr+CkguCkleCkvuCks+ClgCI6IuCksOCkvuCkpOCljeCksOClgCJ9LHdlZWs6e2RvdzowLGRveTo2fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxPamdkOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXt2YXIgY2VpbD1NYXRoLmNlaWwsZmxvb3I9TWF0aC5mbG9vcjttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIGlzTmFOKGl0PStpdCk/MDooMDxpdD9mbG9vcjpjZWlsKShpdCl9fSxPamtUOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgc3ltYm9sTWFwPXsxOiLgpaciLDI6IuClqCIsMzoi4KWpIiw0OiLgpaoiLDU6IuClqyIsNjoi4KWsIiw3OiLgpa0iLDg6IuClriIsOToi4KWvIiwwOiLgpaYifSxudW1iZXJNYXA9eyLgpaciOiIxIiwi4KWoIjoiMiIsIuClqSI6IjMiLCLgpaoiOiI0Iiwi4KWrIjoiNSIsIuClrCI6IjYiLCLgpa0iOiI3Iiwi4KWuIjoiOCIsIuClryI6IjkiLCLgpaYiOiIwIn07bW9tZW50LmRlZmluZUxvY2FsZSgibmUiLHttb250aHM6IuCknOCkqOCkteCksOClgF/gpKvgpYfgpKzgpY3gpLDgpYHgpLXgpLDgpYBf4KSu4KS+4KSw4KWN4KSaX+CkheCkquCljeCksOCkv+Cksl/gpK7gpIhf4KSc4KWB4KSoX+CknOClgeCksuCkvuCkiF/gpIXgpJfgpLfgpY3gpJ9f4KS44KWH4KSq4KWN4KSf4KWH4KSu4KWN4KSs4KSwX+CkheCkleCljeCkn+Cli+CkrOCksF/gpKjgpYvgpK3gpYfgpK7gpY3gpKzgpLBf4KSh4KS/4KS44KWH4KSu4KWN4KSs4KSwIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgpJzgpKguX+Ckq+Clh+CkrOCljeCksOClgS5f4KSu4KS+4KSw4KWN4KSaX+CkheCkquCljeCksOCkvy5f4KSu4KSIX+CknOClgeCkqF/gpJzgpYHgpLLgpL7gpIguX+CkheCkly5f4KS44KWH4KSq4KWN4KSfLl/gpIXgpJXgpY3gpJ/gpYsuX+CkqOCli+CkreClhy5f4KSh4KS/4KS44KWHLiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiLgpIbgpIfgpKTgpKzgpL7gpLBf4KS44KWL4KSu4KSs4KS+4KSwX+CkruCkmeCljeCkl+CksuCkrOCkvuCksF/gpKzgpYHgpKfgpKzgpL7gpLBf4KSs4KS/4KS54KS/4KSs4KS+4KSwX+CktuClgeCkleCljeCksOCkrOCkvuCksF/gpLbgpKjgpL/gpKzgpL7gpLAiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4KSG4KSH4KSkLl/gpLjgpYvgpK4uX+CkruCkmeCljeCkl+Cksi5f4KSs4KWB4KSnLl/gpKzgpL/gpLngpL8uX+CktuClgeCkleCljeCksC5f4KS24KSo4KS/LiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4KSGLl/gpLjgpYsuX+CkruCkgi5f4KSs4KWBLl/gpKzgpL8uX+CktuClgS5f4KS2LiIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJB4KSV4KWLIGg6bW0g4KSs4KSc4KWHIixMVFM6IkHgpJXgpYsgaDptbTpzcyDgpKzgpJzgpYciLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSwgQeCkleCliyBoOm1tIOCkrOCknOClhyIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVksIEHgpJXgpYsgaDptbSDgpKzgpJzgpYcifSxwcmVwYXJzZTpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvW+Clp+ClqOClqeClquClq+ClrOClreClruClr+Clpl0vZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIG51bWJlck1hcFttYXRjaF19KX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHN5bWJvbE1hcFttYXRjaF19KX0sbWVyaWRpZW1QYXJzZTov4KSw4KS+4KSk4KS/fOCkrOCkv+CkueCkvuCkqHzgpKbgpL/gpIngpIHgpLjgpYt84KS44KS+4KSB4KSdLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksIuCksOCkvuCkpOCkvyI9PT1tZXJpZGllbT9ob3VyPDQ/aG91cjpob3VyKzEyOiLgpKzgpL/gpLngpL7gpKgiPT09bWVyaWRpZW0/aG91cjoi4KSm4KS/4KSJ4KSB4KS44KWLIj09PW1lcmlkaWVtPzEwPD1ob3VyP2hvdXI6aG91cisxMjoi4KS44KS+4KSB4KSdIj09PW1lcmlkaWVtP2hvdXIrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjwzPyLgpLDgpL7gpKTgpL8iOmhvdXI8MTI/IuCkrOCkv+CkueCkvuCkqCI6aG91cjwxNj8i4KSm4KS/4KSJ4KSB4KS44KWLIjpob3VyPDIwPyLgpLjgpL7gpIHgpJ0iOiLgpLDgpL7gpKTgpL8ifSxjYWxlbmRhcjp7c2FtZURheToiW+CkhuCknF0gTFQiLG5leHREYXk6IlvgpK3gpYvgpLLgpL9dIExUIixuZXh0V2VlazoiW+CkhuCkieCkgeCkpuCli10gZGRkZFssXSBMVCIsbGFzdERheToiW+CkueCkv+CknOCli10gTFQiLGxhc3RXZWVrOiJb4KSX4KSP4KSV4KWLXSBkZGRkWyxdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlc+CkruCkviIscGFzdDoiJXMg4KSF4KSX4KS+4KSh4KS/IixzOiLgpJXgpYfgpLngpYAg4KSV4KWN4KS34KSjIixzczoiJWQg4KS44KWH4KSV4KWH4KSj4KWN4KShIixtOiLgpI/gpJUg4KSu4KS/4KSo4KWH4KSfIixtbToiJWQg4KSu4KS/4KSo4KWH4KSfIixoOiLgpI/gpJUg4KSY4KSj4KWN4KSf4KS+IixoaDoiJWQg4KSY4KSj4KWN4KSf4KS+IixkOiLgpI/gpJUg4KSm4KS/4KSoIixkZDoiJWQg4KSm4KS/4KSoIixNOiLgpI/gpJUg4KSu4KS54KS/4KSo4KS+IixNTToiJWQg4KSu4KS54KS/4KSo4KS+Iix5OiLgpI/gpJUg4KSs4KSw4KWN4KS3Iix5eToiJWQg4KSs4KSw4KWN4KS3In0sd2Vlazp7ZG93OjAsZG95OjZ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LE9uSTc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIiksY29yZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJnM2c1IiksTElCUkFSWT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMUUFjIiksd2tzRXh0PV9fd2VicGFja19yZXF1aXJlX18oIk44ZzMiKSxkZWZpbmVQcm9wZXJ0eT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJoc3dhIikuZjttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihuYW1lKXt2YXIgJFN5bWJvbD1jb3JlLlN5bWJvbHx8KGNvcmUuU3ltYm9sPUxJQlJBUlk/e306Z2xvYmFsLlN5bWJvbHx8e30pOyJfIj09bmFtZS5jaGFyQXQoMCl8fG5hbWUgaW4gJFN5bWJvbHx8ZGVmaW5lUHJvcGVydHkoJFN5bWJvbCxuYW1lLHt2YWx1ZTp3a3NFeHQuZihuYW1lKX0pfX0sT3B4YjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJG1ldGFkYXRhPV9fd2VicGFja19yZXF1aXJlX18oIk42Y0oiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksYUZ1bmN0aW9uPV9fd2VicGFja19yZXF1aXJlX18oIjJPaUYiKSx0b01ldGFLZXk9JG1ldGFkYXRhLmtleSxvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhPSRtZXRhZGF0YS5zZXQ7JG1ldGFkYXRhLmV4cCh7bWV0YWRhdGE6ZnVuY3Rpb24obWV0YWRhdGFLZXksbWV0YWRhdGFWYWx1ZSl7cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCx0YXJnZXRLZXkpe29yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEobWV0YWRhdGFLZXksbWV0YWRhdGFWYWx1ZSwodm9pZCAwIT09dGFyZ2V0S2V5P2FuT2JqZWN0OmFGdW5jdGlvbikodGFyZ2V0KSx0b01ldGFLZXkodGFyZ2V0S2V5KSl9fX0pfSxPeHY2OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgc3VmZml4ZXM9ezA6Ii3Rg9C8IiwxOiIt0YPQvCIsMjoiLdGO0LwiLDM6Ii3RjtC8Iiw0OiIt0YPQvCIsNToiLdGD0LwiLDY6Ii3Rg9C8Iiw3OiIt0YPQvCIsODoiLdGD0LwiLDk6Ii3Rg9C8IiwxMDoiLdGD0LwiLDEyOiIt0YPQvCIsMTM6Ii3Rg9C8IiwyMDoiLdGD0LwiLDMwOiIt0Y7QvCIsNDA6Ii3Rg9C8Iiw1MDoiLdGD0LwiLDYwOiIt0YPQvCIsNzA6Ii3Rg9C8Iiw4MDoiLdGD0LwiLDkwOiIt0YPQvCIsMTAwOiIt0YPQvCJ9O21vbWVudC5kZWZpbmVMb2NhbGUoInRnIix7bW9udGhzOiLRj9C90LLQsNGAX9GE0LXQstGA0LDQu1/QvNCw0YDRgl/QsNC/0YDQtdC7X9C80LDQuV/QuNGO0L1f0LjRjtC7X9Cw0LLQs9GD0YHRgl/RgdC10L3RgtGP0LHRgF/QvtC60YLRj9Cx0YBf0L3QvtGP0LHRgF/QtNC10LrQsNCx0YAiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItGP0L3Qsl/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Llf0LjRjtC9X9C40Y7Qu1/QsNCy0LNf0YHQtdC9X9C+0LrRgl/QvdC+0Y9f0LTQtdC6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiLRj9C60YjQsNC90LHQtV/QtNGD0YjQsNC90LHQtV/RgdC10YjQsNC90LHQtV/Rh9C+0YDRiNCw0L3QsdC1X9C/0LDQvdK30YjQsNC90LHQtV/St9GD0LzRitCwX9GI0LDQvdCx0LUiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi0Y/RiNCxX9C00YjQsV/RgdGI0LFf0YfRiNCxX9C/0YjQsV/St9GD0Lxf0YjQvdCxIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLRj9GIX9C00Yhf0YHRiF/Rh9GIX9C/0Yhf0rfQvF/RiNCxIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9CY0LzRgNOv0Lcg0YHQvtCw0YLQuF0gTFQiLG5leHREYXk6IlvQn9Cw0LPQvtKzINGB0L7QsNGC0LhdIExUIixsYXN0RGF5OiJb0JTQuNGA06/QtyDRgdC+0LDRgtC4XSBMVCIsbmV4dFdlZWs6ImRkZGRb0LhdIFvSs9Cw0YTRgtCw0Lgg0L7Rj9C90LTQsCDRgdC+0LDRgtC4XSBMVCIsbGFzdFdlZWs6ImRkZGRb0LhdIFvSs9Cw0YTRgtCw0Lgg0LPRg9C30LDRiNGC0LAg0YHQvtCw0YLQuF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItCx0LDRitC00LggJXMiLHBhc3Q6IiVzINC/0LXRiCIsczoi0Y/QutGH0LDQvdC0INGB0L7QvdC40Y8iLG06ItGP0Log0LTQsNKb0LjSm9CwIixtbToiJWQg0LTQsNKb0LjSm9CwIixoOiLRj9C6INGB0L7QsNGCIixoaDoiJWQg0YHQvtCw0YIiLGQ6ItGP0Log0YDTr9C3IixkZDoiJWQg0YDTr9C3IixNOiLRj9C6INC80L7SsyIsTU06IiVkINC80L7SsyIseToi0Y/QuiDRgdC+0LsiLHl5OiIlZCDRgdC+0LsifSxtZXJpZGllbVBhcnNlOi/RiNCw0LF80YHRg9Cx0rN80YDTr9C3fNCx0LXQs9C+0rMvLG1lcmlkaWVtSG91cjpmdW5jdGlvbihob3VyLG1lcmlkaWVtKXtyZXR1cm4gMTI9PT1ob3VyJiYoaG91cj0wKSwi0YjQsNCxIj09PW1lcmlkaWVtP2hvdXI8ND9ob3VyOmhvdXIrMTI6ItGB0YPQsdKzIj09PW1lcmlkaWVtP2hvdXI6ItGA06/QtyI9PT1tZXJpZGllbT8xMTw9aG91cj9ob3VyOmhvdXIrMTI6ItCx0LXQs9C+0rMiPT09bWVyaWRpZW0/aG91cisxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDQ/ItGI0LDQsSI6aG91cjwxMT8i0YHRg9Cx0rMiOmhvdXI8MTY/ItGA06/QtyI6aG91cjwxOT8i0LHQtdCz0L7SsyI6ItGI0LDQsSJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0tKNGD0Lx80Y7QvCkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXt2YXIgYT1udW1iZXIlMTAsYj0xMDA8PW51bWJlcj8xMDA6bnVsbDtyZXR1cm4gbnVtYmVyKyhzdWZmaXhlc1tudW1iZXJdfHxzdWZmaXhlc1thXXx8c3VmZml4ZXNbYl0pfSx3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sT3l2ZzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKSxpbmhlcml0SWZSZXF1aXJlZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYYnppIiksZFA9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpLmYsZ09QTj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJrSk14IikuZixpc1JlZ0V4cD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJxdVBqIiksJGZsYWdzPV9fd2VicGFja19yZXF1aXJlX18oIkMvdmEiKSwkUmVnRXhwPWdsb2JhbC5SZWdFeHAsQmFzZT0kUmVnRXhwLHByb3RvPSRSZWdFeHAucHJvdG90eXBlLHJlMT0vYS9nLHJlMj0vYS9nLENPUlJFQ1RfTkVXPW5ldyAkUmVnRXhwKHJlMSkhPT1yZTE7aWYoX193ZWJwYWNrX3JlcXVpcmVfXygibmg0ZyIpJiYoIUNPUlJFQ1RfTkVXfHxfX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIikoZnVuY3Rpb24oKXtyZXR1cm4gcmUyW19fd2VicGFja19yZXF1aXJlX18oIksweFUiKSgibWF0Y2giKV09ITEsJFJlZ0V4cChyZTEpIT1yZTF8fCRSZWdFeHAocmUyKT09cmUyfHwiL2EvaSIhPSRSZWdFeHAocmUxLCJpIil9KSkpeyRSZWdFeHA9ZnVuY3Rpb24ocCxmKXt2YXIgdGlSRT10aGlzIGluc3RhbmNlb2YgJFJlZ0V4cCxwaVJFPWlzUmVnRXhwKHApLGZpVT12b2lkIDA9PT1mO3JldHVybiF0aVJFJiZwaVJFJiZwLmNvbnN0cnVjdG9yPT09JFJlZ0V4cCYmZmlVP3A6aW5oZXJpdElmUmVxdWlyZWQoQ09SUkVDVF9ORVc/bmV3IEJhc2UocGlSRSYmIWZpVT9wLnNvdXJjZTpwLGYpOkJhc2UoKHBpUkU9cCBpbnN0YW5jZW9mICRSZWdFeHApP3Auc291cmNlOnAscGlSRSYmZmlVPyRmbGFncy5jYWxsKHApOmYpLHRpUkU/dGhpczpwcm90bywkUmVnRXhwKX07Zm9yKHZhciBwcm94eT1mdW5jdGlvbihrZXkpe2tleSBpbiAkUmVnRXhwfHxkUCgkUmVnRXhwLGtleSx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBCYXNlW2tleV19LHNldDpmdW5jdGlvbihpdCl7QmFzZVtrZXldPWl0fX0pfSxrZXlzPWdPUE4oQmFzZSksaT0wO2tleXMubGVuZ3RoPmk7KXByb3h5KGtleXNbaSsrXSk7KHByb3RvLmNvbnN0cnVjdG9yPSRSZWdFeHApLnByb3RvdHlwZT1wcm90byxfX3dlYnBhY2tfcmVxdWlyZV9fKCJLcm9KIikoZ2xvYmFsLCJSZWdFeHAiLCRSZWdFeHApfV9fd2VicGFja19yZXF1aXJlX18oImVsWnEiKSgiUmVnRXhwIil9LFAyc1k6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9e2RlZmF1bHQ6X193ZWJwYWNrX3JlcXVpcmVfXygiVWJiRSIpLF9fZXNNb2R1bGU6ITB9fSxQQTJyOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgbW9udGhzPSJsZWRlbl/Dum5vcl9ixZllemVuX2R1YmVuX2t2xJt0ZW5fxI1lcnZlbl/EjWVydmVuZWNfc3JwZW5fesOhxZnDrV/FmcOtamVuX2xpc3RvcGFkX3Byb3NpbmVjIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0PSJsZWRfw7pub19ixZllX2R1Yl9rdsSbX8SNdm5fxI12Y19zcnBfesOhxZlfxZnDrWpfbGlzX3BybyIuc3BsaXQoIl8iKSxtb250aHNQYXJzZT1bL15sZWQvaSwvXsO6bm8vaSwvXmLFmWUvaSwvXmR1Yi9pLC9ea3bEmy9pLC9eKMSNdm58xI1lcnZlbiR8xI1lcnZuYSkvaSwvXijEjXZjfMSNZXJ2ZW5lY3zEjWVydmVuY2UpL2ksL15zcnAvaSwvXnrDocWZL2ksL17FmcOtai9pLC9ebGlzL2ksL15wcm8vaV0sbW9udGhzUmVnZXg9L14obGVkZW58w7pub3J8YsWZZXplbnxkdWJlbnxrdsSbdGVufMSNZXJ2ZW5lY3zEjWVydmVuY2V8xI1lcnZlbnzEjWVydm5hfHNycGVufHrDocWZw618xZnDrWplbnxsaXN0b3BhZHxwcm9zaW5lY3xsZWR8w7pub3xixZllfGR1YnxrdsSbfMSNdm58xI12Y3xzcnB8esOhxZl8xZnDrWp8bGlzfHBybykvaTtmdW5jdGlvbiBwbHVyYWwobil7cmV0dXJuIDE8biYmbjw1JiYxIT1+fihuLzEwKX1mdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5LGlzRnV0dXJlKXt2YXIgcmVzdWx0PW51bWJlcisiICI7c3dpdGNoKGtleSl7Y2FzZSJzIjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/InDDoXIgc2VrdW5kIjoicMOhciBzZWt1bmRhbWkiO2Nhc2Uic3MiOnJldHVybiB3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT9yZXN1bHQrKHBsdXJhbChudW1iZXIpPyJzZWt1bmR5Ijoic2VrdW5kIik6cmVzdWx0KyJzZWt1bmRhbWkiO2Nhc2UibSI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/Im1pbnV0YSI6aXNGdXR1cmU/Im1pbnV0dSI6Im1pbnV0b3UiO2Nhc2UibW0iOnJldHVybiB3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT9yZXN1bHQrKHBsdXJhbChudW1iZXIpPyJtaW51dHkiOiJtaW51dCIpOnJlc3VsdCsibWludXRhbWkiO2Nhc2UiaCI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/ImhvZGluYSI6aXNGdXR1cmU/ImhvZGludSI6ImhvZGlub3UiO2Nhc2UiaGgiOnJldHVybiB3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT9yZXN1bHQrKHBsdXJhbChudW1iZXIpPyJob2RpbnkiOiJob2RpbiIpOnJlc3VsdCsiaG9kaW5hbWkiO2Nhc2UiZCI6cmV0dXJuIHdpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJkZW4iOiJkbmVtIjtjYXNlImRkIjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/cmVzdWx0KyhwbHVyYWwobnVtYmVyKT8iZG55IjoiZG7DrSIpOnJlc3VsdCsiZG55IjtjYXNlIk0iOnJldHVybiB3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8ibcSbc8OtYyI6Im3Em3PDrWNlbSI7Y2FzZSJNTSI6cmV0dXJuIHdpdGhvdXRTdWZmaXh8fGlzRnV0dXJlP3Jlc3VsdCsocGx1cmFsKG51bWJlcik/Im3Em3PDrWNlIjoibcSbc8OtY8WvIik6cmVzdWx0KyJtxJtzw61jaSI7Y2FzZSJ5IjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/InJvayI6InJva2VtIjtjYXNlInl5IjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/cmVzdWx0KyhwbHVyYWwobnVtYmVyKT8icm9reSI6ImxldCIpOnJlc3VsdCsibGV0eSJ9fW1vbWVudC5kZWZpbmVMb2NhbGUoImNzIix7bW9udGhzOm1vbnRocyxtb250aHNTaG9ydDptb250aHNTaG9ydCxtb250aHNSZWdleDptb250aHNSZWdleCxtb250aHNTaG9ydFJlZ2V4Om1vbnRoc1JlZ2V4LG1vbnRoc1N0cmljdFJlZ2V4Oi9eKGxlZGVufGxlZG5hfMO6bm9yYXzDum5vcnxixZllemVufGLFmWV6bmF8ZHViZW58ZHVibmF8a3bEm3RlbnxrdsSbdG5hfMSNZXJ2ZW5lY3zEjWVydmVuY2V8xI1lcnZlbnzEjWVydm5hfHNycGVufHNycG5hfHrDocWZw618xZnDrWplbnzFmcOtam5hfGxpc3RvcGFkdXxsaXN0b3BhZHxwcm9zaW5lY3xwcm9zaW5jZSkvaSxtb250aHNTaG9ydFN0cmljdFJlZ2V4Oi9eKGxlZHzDum5vfGLFmWV8ZHVifGt2xJt8xI12bnzEjXZjfHNycHx6w6HFmXzFmcOtanxsaXN8cHJvKS9pLG1vbnRoc1BhcnNlOm1vbnRoc1BhcnNlLGxvbmdNb250aHNQYXJzZTptb250aHNQYXJzZSxzaG9ydE1vbnRoc1BhcnNlOm1vbnRoc1BhcnNlLHdlZWtkYXlzOiJuZWTEm2xlX3BvbmTEm2zDrV/DunRlcsO9X3N0xZllZGFfxI10dnJ0ZWtfcMOhdGVrX3NvYm90YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJuZV9wb1/DunRfc3RfxI10X3DDoV9zbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoibmVfcG9fw7p0X3N0X8SNdF9ww6Ffc28iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQgRC4gTU1NTSBZWVlZIEg6bW0iLGw6IkQuIE0uIFlZWVkifSxjYWxlbmRhcjp7c2FtZURheToiW2RuZXMgdl0gTFQiLG5leHREYXk6Ilt6w610cmEgdl0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3YgbmVkxJtsaSB2XSBMVCI7Y2FzZSAxOmNhc2UgMjpyZXR1cm4iW3ZdIGRkZGQgW3ZdIExUIjtjYXNlIDM6cmV0dXJuIlt2ZSBzdMWZZWR1IHZdIExUIjtjYXNlIDQ6cmV0dXJuIlt2ZSDEjXR2cnRlayB2XSBMVCI7Y2FzZSA1OnJldHVybiJbdiBww6F0ZWsgdl0gTFQiO2Nhc2UgNjpyZXR1cm4iW3Ygc29ib3R1IHZdIExUIn19LGxhc3REYXk6Ilt2xI1lcmEgdl0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW21pbnVsb3UgbmVkxJtsaSB2XSBMVCI7Y2FzZSAxOmNhc2UgMjpyZXR1cm4iW21pbnVsw6ldIGRkZGQgW3ZdIExUIjtjYXNlIDM6cmV0dXJuIlttaW51bG91IHN0xZllZHUgdl0gTFQiO2Nhc2UgNDpjYXNlIDU6cmV0dXJuIlttaW51bMO9XSBkZGRkIFt2XSBMVCI7Y2FzZSA2OnJldHVybiJbbWludWxvdSBzb2JvdHUgdl0gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InDFmWVkICVzIixzOnRyYW5zbGF0ZSxzczp0cmFuc2xhdGUsbTp0cmFuc2xhdGUsbW06dHJhbnNsYXRlLGg6dHJhbnNsYXRlLGhoOnRyYW5zbGF0ZSxkOnRyYW5zbGF0ZSxkZDp0cmFuc2xhdGUsTTp0cmFuc2xhdGUsTU06dHJhbnNsYXRlLHk6dHJhbnNsYXRlLHl5OnRyYW5zbGF0ZX0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxQQkUxOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJZN1pDIiksY29yZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXRXBrIiksZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oIjVUMlkiKSxzcGVjaWVzQ29uc3RydWN0b3I9X193ZWJwYWNrX3JlcXVpcmVfXygiOGdIeiIpLHByb21pc2VSZXNvbHZlPV9fd2VicGFja19yZXF1aXJlX18oInpYaFoiKTskZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LlIsIlByb21pc2UiLHtmaW5hbGx5OmZ1bmN0aW9uKG9uRmluYWxseSl7dmFyIEM9c3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsY29yZS5Qcm9taXNlfHxnbG9iYWwuUHJvbWlzZSksaXNGdW5jdGlvbj0iZnVuY3Rpb24iPT10eXBlb2Ygb25GaW5hbGx5O3JldHVybiB0aGlzLnRoZW4oaXNGdW5jdGlvbj9mdW5jdGlvbih4KXtyZXR1cm4gcHJvbWlzZVJlc29sdmUoQyxvbkZpbmFsbHkoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiB4fSl9Om9uRmluYWxseSxpc0Z1bmN0aW9uP2Z1bmN0aW9uKGUpe3JldHVybiBwcm9taXNlUmVzb2x2ZShDLG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgZX0pfTpvbkZpbmFsbHkpfX0pfSxQRTRCOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgaXNNZXJnZWFibGVPYmplY3Q9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7cmV0dXJuISF2YWx1ZSYmIm9iamVjdCI9PXR5cGVvZiB2YWx1ZX0odmFsdWUpJiYhZnVuY3Rpb24odmFsdWUpe3ZhciBzdHJpbmdWYWx1ZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO3JldHVybiJbb2JqZWN0IFJlZ0V4cF0iPT09c3RyaW5nVmFsdWV8fCJbb2JqZWN0IERhdGVdIj09PXN0cmluZ1ZhbHVlfHxmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlLiQkdHlwZW9mPT09UkVBQ1RfRUxFTUVOVF9UWVBFfSh2YWx1ZSl9KHZhbHVlKX07dmFyIFJFQUNUX0VMRU1FTlRfVFlQRT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuZm9yP1N5bWJvbC5mb3IoInJlYWN0LmVsZW1lbnQiKTo2MDEwMztmdW5jdGlvbiBjbG9uZUlmTmVjZXNzYXJ5KHZhbHVlLG9wdGlvbnNBcmd1bWVudCl7dmFyIHZhbDtyZXR1cm4gb3B0aW9uc0FyZ3VtZW50JiYhMD09PW9wdGlvbnNBcmd1bWVudC5jbG9uZSYmaXNNZXJnZWFibGVPYmplY3QodmFsdWUpP2RlZXBtZXJnZSgodmFsPXZhbHVlLEFycmF5LmlzQXJyYXkodmFsKT9bXTp7fSksdmFsdWUsb3B0aW9uc0FyZ3VtZW50KTp2YWx1ZX1mdW5jdGlvbiBkZWZhdWx0QXJyYXlNZXJnZSh0YXJnZXQsc291cmNlLG9wdGlvbnNBcmd1bWVudCl7dmFyIGRlc3RpbmF0aW9uPXRhcmdldC5zbGljZSgpO3JldHVybiBzb3VyY2UuZm9yRWFjaChmdW5jdGlvbihlLGkpe3ZvaWQgMD09PWRlc3RpbmF0aW9uW2ldP2Rlc3RpbmF0aW9uW2ldPWNsb25lSWZOZWNlc3NhcnkoZSxvcHRpb25zQXJndW1lbnQpOmlzTWVyZ2VhYmxlT2JqZWN0KGUpP2Rlc3RpbmF0aW9uW2ldPWRlZXBtZXJnZSh0YXJnZXRbaV0sZSxvcHRpb25zQXJndW1lbnQpOi0xPT09dGFyZ2V0LmluZGV4T2YoZSkmJmRlc3RpbmF0aW9uLnB1c2goY2xvbmVJZk5lY2Vzc2FyeShlLG9wdGlvbnNBcmd1bWVudCkpfSksZGVzdGluYXRpb259ZnVuY3Rpb24gZGVlcG1lcmdlKHRhcmdldCxzb3VyY2Usb3B0aW9uc0FyZ3VtZW50KXt2YXIgc291cmNlSXNBcnJheT1BcnJheS5pc0FycmF5KHNvdXJjZSk7cmV0dXJuIHNvdXJjZUlzQXJyYXk9PT1BcnJheS5pc0FycmF5KHRhcmdldCk/c291cmNlSXNBcnJheT8oKG9wdGlvbnNBcmd1bWVudHx8e2FycmF5TWVyZ2U6ZGVmYXVsdEFycmF5TWVyZ2V9KS5hcnJheU1lcmdlfHxkZWZhdWx0QXJyYXlNZXJnZSkodGFyZ2V0LHNvdXJjZSxvcHRpb25zQXJndW1lbnQpOmZ1bmN0aW9uKHRhcmdldCxzb3VyY2Usb3B0aW9uc0FyZ3VtZW50KXt2YXIgZGVzdGluYXRpb249e307cmV0dXJuIGlzTWVyZ2VhYmxlT2JqZWN0KHRhcmdldCkmJk9iamVjdC5rZXlzKHRhcmdldCkuZm9yRWFjaChmdW5jdGlvbihrZXkpe2Rlc3RpbmF0aW9uW2tleV09Y2xvbmVJZk5lY2Vzc2FyeSh0YXJnZXRba2V5XSxvcHRpb25zQXJndW1lbnQpfSksT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7aXNNZXJnZWFibGVPYmplY3Qoc291cmNlW2tleV0pJiZ0YXJnZXRba2V5XT9kZXN0aW5hdGlvbltrZXldPWRlZXBtZXJnZSh0YXJnZXRba2V5XSxzb3VyY2Vba2V5XSxvcHRpb25zQXJndW1lbnQpOmRlc3RpbmF0aW9uW2tleV09Y2xvbmVJZk5lY2Vzc2FyeShzb3VyY2Vba2V5XSxvcHRpb25zQXJndW1lbnQpfSksZGVzdGluYXRpb259KHRhcmdldCxzb3VyY2Usb3B0aW9uc0FyZ3VtZW50KTpjbG9uZUlmTmVjZXNzYXJ5KHNvdXJjZSxvcHRpb25zQXJndW1lbnQpfWRlZXBtZXJnZS5hbGw9ZnVuY3Rpb24oYXJyYXksb3B0aW9uc0FyZ3VtZW50KXtpZighQXJyYXkuaXNBcnJheShhcnJheSl8fGFycmF5Lmxlbmd0aDwyKXRocm93IG5ldyBFcnJvcigiZmlyc3QgYXJndW1lbnQgc2hvdWxkIGJlIGFuIGFycmF5IHdpdGggYXQgbGVhc3QgdHdvIGVsZW1lbnRzIik7cmV0dXJuIGFycmF5LnJlZHVjZShmdW5jdGlvbihwcmV2LG5leHQpe3JldHVybiBkZWVwbWVyZ2UocHJldixuZXh0LG9wdGlvbnNBcmd1bWVudCl9KX07dmFyIGRlZXBtZXJnZV8xPWRlZXBtZXJnZTttb2R1bGUuZXhwb3J0cz1kZWVwbWVyZ2VfMX0sUEtVcjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJHBhcnNlSW50PV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKS5wYXJzZUludCwkdHJpbT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJxbmNCIikudHJpbSx3cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCIvZTg4IiksaGV4PS9eWy0rXT8wW3hYXS87bW9kdWxlLmV4cG9ydHM9OCE9PSRwYXJzZUludCh3cysiMDgiKXx8MjIhPT0kcGFyc2VJbnQod3MrIjB4MTYiKT9mdW5jdGlvbihzdHIscmFkaXgpe3ZhciBzdHJpbmc9JHRyaW0oU3RyaW5nKHN0ciksMyk7cmV0dXJuICRwYXJzZUludChzdHJpbmcscmFkaXg+Pj4wfHwoaGV4LnRlc3Qoc3RyaW5nKT8xNjoxMCkpfTokcGFyc2VJbnR9LFBlVVc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBzeW1ib2xNYXA9ezE6IuCvpyIsMjoi4K+oIiwzOiLgr6kiLDQ6IuCvqiIsNToi4K+rIiw2OiLgr6wiLDc6IuCvrSIsODoi4K+uIiw5OiLgr68iLDA6IuCvpiJ9LG51bWJlck1hcD17IuCvpyI6IjEiLCLgr6giOiIyIiwi4K+pIjoiMyIsIuCvqiI6IjQiLCLgr6siOiI1Iiwi4K+sIjoiNiIsIuCvrSI6IjciLCLgr64iOiI4Iiwi4K+vIjoiOSIsIuCvpiI6IjAifTttb21lbnQuZGVmaW5lTG9jYWxlKCJ0YSIse21vbnRoczoi4K6c4K6p4K614K6w4K6/X+CuquCuv+CuquCvjeCusOCuteCusOCuv1/grq7grr7grrDgr43grprgr41f4K6P4K6q4K+N4K6w4K6y4K+NX+CuruCvh1/grpzgr4Lgrqngr41f4K6c4K+C4K6y4K+IX+CuhuCuleCuuOCvjeCun+CvjV/grprgr4bgrqrgr43grp/gr4bgrq7gr43grqrgrrDgr41f4K6F4K6V4K+N4K6f4K+H4K6+4K6q4K6w4K+NX+CuqOCuteCuruCvjeCuquCusOCvjV/grp/grr/grprgrq7gr43grqrgrrDgr40iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IuCunOCuqeCuteCusOCuv1/grqrgrr/grqrgr43grrDgrrXgrrDgrr9f4K6u4K6+4K6w4K+N4K6a4K+NX+Cuj+CuquCvjeCusOCusuCvjV/grq7gr4df4K6c4K+C4K6p4K+NX+CunOCvguCusuCviF/grobgrpXgrrjgr43grp/gr41f4K6a4K+G4K6q4K+N4K6f4K+G4K6u4K+N4K6q4K6w4K+NX+CuheCuleCvjeCun+Cvh+CuvuCuquCusOCvjV/grqjgrrXgrq7gr43grqrgrrDgr41f4K6f4K6/4K6a4K6u4K+N4K6q4K6w4K+NIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLgrp7grr7grq/grr/grrHgr43grrHgr4HgrpXgr43grpXgrr/grrTgrq7gr4hf4K6k4K6/4K6Z4K+N4K6V4K6f4K+N4K6V4K6/4K604K6u4K+IX+CumuCvhuCuteCvjeCuteCuvuCur+CvjeCuleCuv+CutOCuruCviF/grqrgr4HgrqTgrqngr43grpXgrr/grrTgrq7gr4hf4K614K6/4K6v4K6+4K604K6V4K+N4K6V4K6/4K604K6u4K+IX+CuteCvhuCus+CvjeCus+Cuv+CuleCvjeCuleCuv+CutOCuruCviF/grprgrqngrr/grpXgr43grpXgrr/grrTgrq7gr4giLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4K6e4K6+4K6v4K6/4K6x4K+BX+CupOCuv+CumeCvjeCuleCus+CvjV/grprgr4bgrrXgr43grrXgrr7grq/gr41f4K6q4K+B4K6k4K6p4K+NX+CuteCuv+Cur+CuvuCutOCuqeCvjV/grrXgr4bgrrPgr43grrPgrr9f4K6a4K6p4K6/Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgrp7grr5f4K6k4K6/X+CumuCvhl/grqrgr4Ff4K614K6/X+CuteCvhl/grpoiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVksIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6Ilvgrofgrqngr43grrHgr4FdIExUIixuZXh0RGF5OiJb4K6o4K6+4K6z4K+IXSBMVCIsbmV4dFdlZWs6ImRkZGQsIExUIixsYXN0RGF5OiJb4K6o4K+H4K6x4K+N4K6x4K+BXSBMVCIsbGFzdFdlZWs6IlvgrpXgrp/grqjgr43grqQg4K614K6+4K6w4K6u4K+NXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4K6H4K6y4K+NIixwYXN0OiIlcyDgrq7gr4Hgrqngr40iLHM6IuCukuCusOCvgSDgrprgrr/grrIg4K614K6/4K6o4K6+4K6f4K6/4K6V4K6z4K+NIixzczoiJWQg4K614K6/4K6o4K6+4K6f4K6/4K6V4K6z4K+NIixtOiLgrpLgrrDgr4Eg4K6o4K6/4K6u4K6/4K6f4K6u4K+NIixtbToiJWQg4K6o4K6/4K6u4K6/4K6f4K6Z4K+N4K6V4K6z4K+NIixoOiLgrpLgrrDgr4Eg4K6u4K6j4K6/IOCuqOCvh+CusOCuruCvjSIsaGg6IiVkIOCuruCuo+CuvyDgrqjgr4fgrrDgrq7gr40iLGQ6IuCukuCusOCvgSDgrqjgrr7grrPgr40iLGRkOiIlZCDgrqjgrr7grp/gr43grpXgrrPgr40iLE06IuCukuCusOCvgSDgrq7grr7grqTgrq7gr40iLE1NOiIlZCDgrq7grr7grqTgrpngr43grpXgrrPgr40iLHk6IuCukuCusOCvgSDgrrXgrrDgr4Hgrp/grq7gr40iLHl5OiIlZCDgrobgrqPgr43grp/gr4HgrpXgrrPgr40ifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ94K614K6k4K+BLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7cmV0dXJuIG51bWJlcisi4K614K6k4K+BIn0scHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgr6fgr6jgr6ngr6rgr6vgr6zgr63gr67gr6/gr6ZdL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBudW1iZXJNYXBbbWF0Y2hdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBzeW1ib2xNYXBbbWF0Y2hdfSl9LG1lcmlkaWVtUGFyc2U6L+Cur+CuvuCuruCuruCvjXzgrrXgr4jgrpXgrrHgr4h84K6V4K6+4K6y4K+IfOCuqOCuo+CvjeCuquCuleCusuCvjXzgro7grrHgr43grqrgrr7grp/gr4F84K6u4K6+4K6y4K+ILyxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjwyPyIg4K6v4K6+4K6u4K6u4K+NIjpob3VyPDY/IiDgrrXgr4jgrpXgrrHgr4giOmhvdXI8MTA/IiDgrpXgrr7grrLgr4giOmhvdXI8MTQ/IiDgrqjgrqPgr43grqrgrpXgrrLgr40iOmhvdXI8MTg/IiDgro7grrHgr43grqrgrr7grp/gr4EiOmhvdXI8MjI/IiDgrq7grr7grrLgr4giOiIg4K6v4K6+4K6u4K6u4K+NIn0sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKGhvdXIsbWVyaWRpZW0pe3JldHVybiAxMj09PWhvdXImJihob3VyPTApLCLgrq/grr7grq7grq7gr40iPT09bWVyaWRpZW0/aG91cjwyP2hvdXI6aG91cisxMjoi4K614K+I4K6V4K6x4K+IIj09PW1lcmlkaWVtfHwi4K6V4K6+4K6y4K+IIj09PW1lcmlkaWVtP2hvdXI6IuCuqOCuo+CvjeCuquCuleCusuCvjSI9PT1tZXJpZGllbSYmMTA8PWhvdXI/aG91cjpob3VyKzEyfSx3ZWVrOntkb3c6MCxkb3k6Nn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sUHBJdzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIHN5bWJvbE1hcD17MToi4LOnIiwyOiLgs6giLDM6IuCzqSIsNDoi4LOqIiw1OiLgs6siLDY6IuCzrCIsNzoi4LOtIiw4OiLgs64iLDk6IuCzryIsMDoi4LOmIn0sbnVtYmVyTWFwPXsi4LOnIjoiMSIsIuCzqCI6IjIiLCLgs6kiOiIzIiwi4LOqIjoiNCIsIuCzqyI6IjUiLCLgs6wiOiI2Iiwi4LOtIjoiNyIsIuCzriI6IjgiLCLgs68iOiI5Iiwi4LOmIjoiMCJ9O21vbWVudC5kZWZpbmVMb2NhbGUoImtuIix7bW9udGhzOiLgspzgsqjgsrXgsrDgsr9f4LKr4LOG4LKs4LON4LKw4LK14LKw4LK/X+CyruCyvuCysOCzjeCymuCzjV/gso/gsqrgs43gsrDgsr/gsrLgs41f4LKu4LOG4LOVX+CynOCzguCyqOCzjV/gspzgs4HgsrLgs4bgs5Zf4LKG4LKX4LK44LON4LKf4LONX+CyuOCzhuCyquCzjeCyn+CzhuCyguCyrOCysOCzjV/gsoXgspXgs43gsp/gs4bgs4Lgs5XgsqzgsrDgs41f4LKo4LK14LOG4LKC4LKs4LKw4LONX+CyoeCyv+CyuOCzhuCyguCyrOCysOCzjSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4LKc4LKoX+Cyq+CzhuCyrOCzjeCysF/gsq7gsr7gsrDgs43gsprgs41f4LKP4LKq4LON4LKw4LK/4LKy4LONX+CyruCzhuCzlV/gspzgs4Lgsqjgs41f4LKc4LOB4LKy4LOG4LOWX+CyhuCyl+CyuOCzjeCyn+CzjV/gsrjgs4bgsqrgs43gsp/gs4bgsoJf4LKF4LKV4LON4LKf4LOG4LOC4LOVX+CyqOCyteCzhuCygl/gsqHgsr/gsrjgs4bgsoIiLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoi4LKt4LK+4LKo4LOB4LK14LK+4LKwX+CyuOCzhuCzguCzleCyruCyteCyvuCysF/gsq7gsoLgspfgsrPgsrXgsr7gsrBf4LKs4LOB4LKn4LK14LK+4LKwX+Cyl+CzgeCysOCzgeCyteCyvuCysF/gsrbgs4HgspXgs43gsrDgsrXgsr7gsrBf4LK24LKo4LK/4LK14LK+4LKwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCyreCyvuCyqOCzgV/gsrjgs4bgs4Lgs5Xgsq5f4LKu4LKC4LKX4LKzX+CyrOCzgeCyp1/gspfgs4HgsrDgs4Ff4LK24LOB4LKV4LON4LKwX+CytuCyqOCyvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4LKt4LK+X+CyuOCzhuCzguCzlV/gsq7gsoJf4LKs4LOBX+Cyl+CzgV/gsrbgs4Ff4LK2Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIixMVFM6IkEgaDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+Cyh+CyguCypuCzgV0gTFQiLG5leHREYXk6Ilvgsqjgsr7gsrPgs4ZdIExUIixuZXh0V2VlazoiZGRkZCwgTFQiLGxhc3REYXk6Ilvgsqjgsr/gsqjgs43gsqjgs4ZdIExUIixsYXN0V2VlazoiW+CyleCzhuCzguCyqOCzhuCyr10gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIOCyqOCyguCypOCysCIscGFzdDoiJXMg4LK54LK/4LKC4LKm4LOGIixzOiLgspXgs4bgsrLgsrXgs4Eg4LKV4LON4LK34LKj4LKX4LKz4LOBIixzczoiJWQg4LK44LOG4LKV4LOG4LKC4LKh4LOB4LKX4LKz4LOBIixtOiLgspLgsoLgsqbgs4Eg4LKo4LK/4LKu4LK/4LK3IixtbToiJWQg4LKo4LK/4LKu4LK/4LK3IixoOiLgspLgsoLgsqbgs4Eg4LKX4LKC4LKf4LOGIixoaDoiJWQg4LKX4LKC4LKf4LOGIixkOiLgspLgsoLgsqbgs4Eg4LKm4LK/4LKoIixkZDoiJWQg4LKm4LK/4LKoIixNOiLgspLgsoLgsqbgs4Eg4LKk4LK/4LKC4LKX4LKz4LOBIixNTToiJWQg4LKk4LK/4LKC4LKX4LKz4LOBIix5OiLgspLgsoLgsqbgs4Eg4LK14LKw4LON4LK3Iix5eToiJWQg4LK14LKw4LON4LK3In0scHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vgs6fgs6jgs6ngs6rgs6vgs6zgs63gs67gs6/gs6ZdL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBudW1iZXJNYXBbbWF0Y2hdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBzeW1ib2xNYXBbbWF0Y2hdfSl9LG1lcmlkaWVtUGFyc2U6L+CysOCyvuCypOCzjeCysOCyv3zgsqzgs4bgsrPgsr/gspfgs43gspfgs4Z84LKu4LKn4LON4LKv4LK+4LK54LON4LKofOCyuOCyguCynOCzhi8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKGhvdXIsbWVyaWRpZW0pe3JldHVybiAxMj09PWhvdXImJihob3VyPTApLCLgsrDgsr7gsqTgs43gsrDgsr8iPT09bWVyaWRpZW0/aG91cjw0P2hvdXI6aG91cisxMjoi4LKs4LOG4LKz4LK/4LKX4LON4LKX4LOGIj09PW1lcmlkaWVtP2hvdXI6IuCyruCyp+CzjeCyr+CyvuCyueCzjeCyqCI9PT1tZXJpZGllbT8xMDw9aG91cj9ob3VyOmhvdXIrMTI6IuCyuOCyguCynOCzhiI9PT1tZXJpZGllbT9ob3VyKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7cmV0dXJuIGhvdXI8ND8i4LKw4LK+4LKk4LON4LKw4LK/Ijpob3VyPDEwPyLgsqzgs4bgsrPgsr/gspfgs43gspfgs4YiOmhvdXI8MTc/IuCyruCyp+CzjeCyr+CyvuCyueCzjeCyqCI6aG91cjwyMD8i4LK44LKC4LKc4LOGIjoi4LKw4LK+4LKk4LON4LKw4LK/In0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfSjgsqjgs4bgs5UpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7cmV0dXJuIG51bWJlcisi4LKo4LOG4LOVIn0sd2Vlazp7ZG93OjAsZG95OjZ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCJRL3lYIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWTdaQyIpLG5ld1Byb21pc2VDYXBhYmlsaXR5PV9fd2VicGFja19yZXF1aXJlX18oIlpXNXEiKSxwZXJmb3JtPV9fd2VicGFja19yZXF1aXJlX18oIlJEbVYiKTskZXhwb3J0KCRleHBvcnQuUywiUHJvbWlzZSIse3RyeTpmdW5jdGlvbihjYWxsYmFja2ZuKXt2YXIgcHJvbWlzZUNhcGFiaWxpdHk9bmV3UHJvbWlzZUNhcGFiaWxpdHkuZih0aGlzKSxyZXN1bHQ9cGVyZm9ybShjYWxsYmFja2ZuKTtyZXR1cm4ocmVzdWx0LmU/cHJvbWlzZUNhcGFiaWxpdHkucmVqZWN0OnByb21pc2VDYXBhYmlsaXR5LnJlc29sdmUpKHJlc3VsdC52KSxwcm9taXNlQ2FwYWJpbGl0eS5wcm9taXNlfX0pfSxRM25lOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBmb3JPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTbGtZIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXRlcixJVEVSQVRPUil7dmFyIHJlc3VsdD1bXTtyZXR1cm4gZm9yT2YoaXRlciwhMSxyZXN1bHQucHVzaCxyZXN1bHQsSVRFUkFUT1IpLHJlc3VsdH19LFFNTVQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGNvZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhMHh1IiksVEFHPV9fd2VicGFja19yZXF1aXJlX18oIlVXaVgiKSgidG9TdHJpbmdUYWciKSxBUkc9IkFyZ3VtZW50cyI9PWNvZihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0KXt2YXIgTyxULEI7cmV0dXJuIHZvaWQgMD09PWl0PyJVbmRlZmluZWQiOm51bGw9PT1pdD8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihUPWZ1bmN0aW9uKGl0LGtleSl7dHJ5e3JldHVybiBpdFtrZXldfWNhdGNoKGUpe319KE89T2JqZWN0KGl0KSxUQUcpKT9UOkFSRz9jb2YoTyk6Ik9iamVjdCI9PShCPWNvZihPKSkmJiJmdW5jdGlvbiI9PXR5cGVvZiBPLmNhbGxlZT8iQXJndW1lbnRzIjpCfX0sUVd5MjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCJLT1FiIikoIk1hcCIpfSxRWGhmOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBkZWZlcixjaGFubmVsLHBvcnQsY3R4PV9fd2VicGFja19yZXF1aXJlX18oIjJHVFAiKSxpbnZva2U9X193ZWJwYWNrX3JlcXVpcmVfXygiTUNTSiIpLGh0bWw9X193ZWJwYWNrX3JlcXVpcmVfXygiTXZ3QyIpLGNlbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJIc25zIiksZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oIjVUMlkiKSxwcm9jZXNzPWdsb2JhbC5wcm9jZXNzLHNldFRhc2s9Z2xvYmFsLnNldEltbWVkaWF0ZSxjbGVhclRhc2s9Z2xvYmFsLmNsZWFySW1tZWRpYXRlLE1lc3NhZ2VDaGFubmVsPWdsb2JhbC5NZXNzYWdlQ2hhbm5lbCxEaXNwYXRjaD1nbG9iYWwuRGlzcGF0Y2gsY291bnRlcj0wLHF1ZXVlPXt9LHJ1bj1mdW5jdGlvbigpe3ZhciBpZD0rdGhpcztpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpe3ZhciBmbj1xdWV1ZVtpZF07ZGVsZXRlIHF1ZXVlW2lkXSxmbigpfX0sbGlzdGVuZXI9ZnVuY3Rpb24oZXZlbnQpe3J1bi5jYWxsKGV2ZW50LmRhdGEpfTtzZXRUYXNrJiZjbGVhclRhc2t8fChzZXRUYXNrPWZ1bmN0aW9uKGZuKXtmb3IodmFyIGFyZ3M9W10saT0xO2FyZ3VtZW50cy5sZW5ndGg+aTspYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTtyZXR1cm4gcXVldWVbKytjb3VudGVyXT1mdW5jdGlvbigpe2ludm9rZSgiZnVuY3Rpb24iPT10eXBlb2YgZm4/Zm46RnVuY3Rpb24oZm4pLGFyZ3MpfSxkZWZlcihjb3VudGVyKSxjb3VudGVyfSxjbGVhclRhc2s9ZnVuY3Rpb24oaWQpe2RlbGV0ZSBxdWV1ZVtpZF19LCJwcm9jZXNzIj09X193ZWJwYWNrX3JlcXVpcmVfXygiYTB4dSIpKHByb2Nlc3MpP2RlZmVyPWZ1bmN0aW9uKGlkKXtwcm9jZXNzLm5leHRUaWNrKGN0eChydW4saWQsMSkpfTpEaXNwYXRjaCYmRGlzcGF0Y2gubm93P2RlZmVyPWZ1bmN0aW9uKGlkKXtEaXNwYXRjaC5ub3coY3R4KHJ1bixpZCwxKSl9Ok1lc3NhZ2VDaGFubmVsPyhwb3J0PShjaGFubmVsPW5ldyBNZXNzYWdlQ2hhbm5lbCkucG9ydDIsY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2U9bGlzdGVuZXIsZGVmZXI9Y3R4KHBvcnQucG9zdE1lc3NhZ2UscG9ydCwxKSk6Z2xvYmFsLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWdsb2JhbC5pbXBvcnRTY3JpcHRzPyhkZWZlcj1mdW5jdGlvbihpZCl7Z2xvYmFsLnBvc3RNZXNzYWdlKGlkKyIiLCIqIil9LGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixsaXN0ZW5lciwhMSkpOmRlZmVyPSJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gY2VsKCJzY3JpcHQiKT9mdW5jdGlvbihpZCl7aHRtbC5hcHBlbmRDaGlsZChjZWwoInNjcmlwdCIpKS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtodG1sLnJlbW92ZUNoaWxkKHRoaXMpLHJ1bi5jYWxsKGlkKX19OmZ1bmN0aW9uKGlkKXtzZXRUaW1lb3V0KGN0eChydW4saWQsMSksMCl9KSxtb2R1bGUuZXhwb3J0cz17c2V0OnNldFRhc2ssY2xlYXI6Y2xlYXJUYXNrfX0sUWFEYjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGNyZWF0ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLdXRoIiksZGVzY3JpcHRvcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJSakQvIiksc2V0VG9TdHJpbmdUYWc9X193ZWJwYWNrX3JlcXVpcmVfXygiZnlEcSIpLEl0ZXJhdG9yUHJvdG90eXBlPXt9O19fd2VicGFja19yZXF1aXJlX18oIk11a2IiKShJdGVyYXRvclByb3RvdHlwZSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLG1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKENvbnN0cnVjdG9yLE5BTUUsbmV4dCl7Q29uc3RydWN0b3IucHJvdG90eXBlPWNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSx7bmV4dDpkZXNjcmlwdG9yKDEsbmV4dCl9KSxzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvcixOQU1FKyIgSXRlcmF0b3IiKX19LFFiTFo6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2V4cG9ydHMuX19lc01vZHVsZT0hMDt2YXIgb2JqLF9hc3NpZ249X193ZWJwYWNrX3JlcXVpcmVfXygiUDJzWSIpLF9hc3NpZ24yPShvYmo9X2Fzc2lnbikmJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O2V4cG9ydHMuZGVmYXVsdD1fYXNzaWduMi5kZWZhdWx0fHxmdW5jdGlvbih0YXJnZXQpe2Zvcih2YXIgaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe3ZhciBzb3VyY2U9YXJndW1lbnRzW2ldO2Zvcih2YXIga2V5IGluIHNvdXJjZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLGtleSkmJih0YXJnZXRba2V5XT1zb3VyY2Vba2V5XSl9cmV0dXJuIHRhcmdldH19LFFqNEo6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImFyLWt3Iix7bW9udGhzOiLZitmG2KfZitixX9mB2KjYsdin2YrYsV/Zhdin2LHYs1/Yo9io2LHZitmEX9mF2KfZil/ZitmI2YbZitmIX9mK2YjZhNmK2YjYsl/Yuti02Kpf2LTYqtmG2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmG2KjYsV/Yr9is2YbYqNixIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLZitmG2KfZitixX9mB2KjYsdin2YrYsV/Zhdin2LHYs1/Yo9io2LHZitmEX9mF2KfZil/ZitmI2YbZitmIX9mK2YjZhNmK2YjYsl/Yuti02Kpf2LTYqtmG2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmG2KjYsV/Yr9is2YbYqNixIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLYp9mE2KPYrdivX9in2YTYpdiq2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi2KfYrdivX9in2KrZhtmK2YZf2KvZhNin2KvYp9ihX9in2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItitX9mGX9irX9ixX9iuX9isX9izIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9in2YTZitmI2YUg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLG5leHREYXk6IlvYutiv2Kcg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLG5leHRXZWVrOiJkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbGFzdERheToiW9ij2YXYsyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbGFzdFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLZgdmKICVzIixwYXN0OiLZhdmG2LAgJXMiLHM6Itir2YjYp9mGIixzczoiJWQg2KvYp9mG2YrYqSIsbToi2K/ZgtmK2YLYqSIsbW06IiVkINiv2YLYp9im2YIiLGg6Itiz2KfYudipIixoaDoiJWQg2LPYp9i52KfYqiIsZDoi2YrZiNmFIixkZDoiJWQg2KPZitin2YUiLE06Iti02YfYsSIsTU06IiVkINij2LTZh9ixIix5OiLYs9mG2KkiLHl5OiIlZCDYs9mG2YjYp9iqIn0sd2Vlazp7ZG93OjAsZG95OjEyfX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxRbllEOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxjb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiTFpXdCIpOyRleHBvcnQoJGV4cG9ydC5TLCJFcnJvciIse2lzRXJyb3I6ZnVuY3Rpb24oaXQpe3JldHVybiJFcnJvciI9PT1jb2YoaXQpfX0pfSwiUis3KyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGdldEtleXM9X193ZWJwYWNrX3JlcXVpcmVfXygidzZHTyIpLGdPUFM9X193ZWJwYWNrX3JlcXVpcmVfXygibXFsRiIpLHBJRT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJOVjBrIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQpe3ZhciByZXN1bHQ9Z2V0S2V5cyhpdCksZ2V0U3ltYm9scz1nT1BTLmY7aWYoZ2V0U3ltYm9scylmb3IodmFyIGtleSxzeW1ib2xzPWdldFN5bWJvbHMoaXQpLGlzRW51bT1wSUUuZixpPTA7c3ltYm9scy5sZW5ndGg+aTspaXNFbnVtLmNhbGwoaXQsa2V5PXN5bWJvbHNbaSsrXSkmJnJlc3VsdC5wdXNoKGtleSk7cmV0dXJuIHJlc3VsdH19LFI1WFo6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIiksJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksdXNlckFnZW50PV9fd2VicGFja19yZXF1aXJlX18oIm9sOHgiKSxzbGljZT1bXS5zbGljZSxNU0lFPS9NU0lFIC5cLi8udGVzdCh1c2VyQWdlbnQpLHdyYXA9ZnVuY3Rpb24oc2V0KXtyZXR1cm4gZnVuY3Rpb24oZm4sdGltZSl7dmFyIGJvdW5kQXJncz0yPGFyZ3VtZW50cy5sZW5ndGgsYXJncz0hIWJvdW5kQXJncyYmc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIHNldChib3VuZEFyZ3M/ZnVuY3Rpb24oKXsoImZ1bmN0aW9uIj09dHlwZW9mIGZuP2ZuOkZ1bmN0aW9uKGZuKSkuYXBwbHkodGhpcyxhcmdzKX06Zm4sdGltZSl9fTskZXhwb3J0KCRleHBvcnQuRyskZXhwb3J0LkIrJGV4cG9ydC5GKk1TSUUse3NldFRpbWVvdXQ6d3JhcChnbG9iYWwuc2V0VGltZW91dCksc2V0SW50ZXJ2YWw6d3JhcChnbG9iYWwuc2V0SW50ZXJ2YWwpfSl9LFJBd1E6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHByb2Nlc3NSZWxhdGl2ZVRpbWUobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5LGlzRnV0dXJlKXt2YXIgZm9ybWF0PXttOlsiZW5nIE1pbnV0dCIsImVuZ2VyIE1pbnV0dCJdLGg6WyJlbmcgU3Rvbm4iLCJlbmdlciBTdG9ubiJdLGQ6WyJlZW4gRGFnIiwiZW5nZW0gRGFnIl0sTTpbImVlIE1vdW50IiwiZW5nZW0gTW91bnQiXSx5OlsiZWUgSm9lciIsImVuZ2VtIEpvZXIiXX07cmV0dXJuIHdpdGhvdXRTdWZmaXg/Zm9ybWF0W2tleV1bMF06Zm9ybWF0W2tleV1bMV19ZnVuY3Rpb24gZWlmZWxlclJlZ2VsQXBwbGllc1RvTnVtYmVyKG51bWJlcil7aWYobnVtYmVyPXBhcnNlSW50KG51bWJlciwxMCksaXNOYU4obnVtYmVyKSlyZXR1cm4hMTtpZihudW1iZXI8MClyZXR1cm4hMDtpZihudW1iZXI8MTApcmV0dXJuIDQ8PW51bWJlciYmbnVtYmVyPD03O2lmKG51bWJlcjwxMDApe3ZhciBsYXN0RGlnaXQ9bnVtYmVyJTEwLGZpcnN0RGlnaXQ9bnVtYmVyLzEwO3JldHVybiBlaWZlbGVyUmVnZWxBcHBsaWVzVG9OdW1iZXIoMD09PWxhc3REaWdpdD9maXJzdERpZ2l0Omxhc3REaWdpdCl9aWYobnVtYmVyPDFlNCl7Zm9yKDsxMDw9bnVtYmVyOyludW1iZXIvPTEwO3JldHVybiBlaWZlbGVyUmVnZWxBcHBsaWVzVG9OdW1iZXIobnVtYmVyKX1yZXR1cm4gZWlmZWxlclJlZ2VsQXBwbGllc1RvTnVtYmVyKG51bWJlci89MWUzKX1tb21lbnQuZGVmaW5lTG9jYWxlKCJsYiIse21vbnRoczoiSmFudWFyX0ZlYnJ1YXJfTcOkZXJ6X0FicsOrbGxfTWVlX0p1bmlfSnVsaV9BdWd1c3RfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGV6ZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbi5fRmVici5fTXJ6Ll9BYnIuX01lZV9KdW4uX0p1bC5fQXVnLl9TZXB0Ll9Pa3QuX05vdi5fRGV6LiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJTb25uZGVnX03DqWluZGVnX0TDq25zY2hkZWdfTcOrdHR3b2NoX0Rvbm5lc2NoZGVnX0ZyZWlkZWdfU2Ftc2NoZGVnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlNvLl9Nw6kuX0TDqy5fTcOrLl9Eby5fRnIuX1NhLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU29fTcOpX0TDq19Nw6tfRG9fRnJfU2EiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSBbQXVlcl0iLExUUzoiSDptbTpzcyBbQXVlcl0iLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0gW0F1ZXJdIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSBbQXVlcl0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hhdXQgdW1dIExUIixzYW1lRWxzZToiTCIsbmV4dERheToiW011ZXIgdW1dIExUIixuZXh0V2VlazoiZGRkZCBbdW1dIExUIixsYXN0RGF5OiJbR8Orc2NodGVyIHVtXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAyOmNhc2UgNDpyZXR1cm4iW0xlc2NodGVuXSBkZGRkIFt1bV0gTFQiO2RlZmF1bHQ6cmV0dXJuIltMZXNjaHRlXSBkZGRkIFt1bV0gTFQifX19LHJlbGF0aXZlVGltZTp7ZnV0dXJlOmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIGVpZmVsZXJSZWdlbEFwcGxpZXNUb051bWJlcihzdHJpbmcuc3Vic3RyKDAsc3RyaW5nLmluZGV4T2YoIiAiKSkpPyJhICIrc3RyaW5nOiJhbiAiK3N0cmluZ30scGFzdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBlaWZlbGVyUmVnZWxBcHBsaWVzVG9OdW1iZXIoc3RyaW5nLnN1YnN0cigwLHN0cmluZy5pbmRleE9mKCIgIikpKT8idmlydSAiK3N0cmluZzoidmlydW4gIitzdHJpbmd9LHM6ImUgcHVlciBTZWtvbm5lbiIsc3M6IiVkIFNla29ubmVuIixtOnByb2Nlc3NSZWxhdGl2ZVRpbWUsbW06IiVkIE1pbnV0dGVuIixoOnByb2Nlc3NSZWxhdGl2ZVRpbWUsaGg6IiVkIFN0b25uZW4iLGQ6cHJvY2Vzc1JlbGF0aXZlVGltZSxkZDoiJWQgRGVlZyIsTTpwcm9jZXNzUmVsYXRpdmVUaW1lLE1NOiIlZCBNw6lpbnQiLHk6cHJvY2Vzc1JlbGF0aXZlVGltZSx5eToiJWQgSm9lciJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sUkRtVjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oZXhlYyl7dHJ5e3JldHVybntlOiExLHY6ZXhlYygpfX1jYXRjaChlKXtyZXR1cm57ZTohMCx2OmV9fX19LFJMaDk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGNsYXNzb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiSThhKyIpLGZyb209X193ZWJwYWNrX3JlcXVpcmVfXygiUTNuZSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKE5BTUUpe3JldHVybiBmdW5jdGlvbigpe2lmKGNsYXNzb2YodGhpcykhPU5BTUUpdGhyb3cgVHlwZUVycm9yKE5BTUUrIiN0b0pTT04gaXNuJ3QgZ2VuZXJpYyIpO3JldHVybiBmcm9tKHRoaXMpfX19LFJRUkc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSx0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTL2ovIiksYUZ1bmN0aW9uPV9fd2VicGFja19yZXF1aXJlX18oIjJPaUYiKSwkZGVmaW5lUHJvcGVydHk9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpO19fd2VicGFja19yZXF1aXJlX18oIm5oNGciKSYmJGV4cG9ydCgkZXhwb3J0LlArX193ZWJwYWNrX3JlcXVpcmVfXygieGJTbSIpLCJPYmplY3QiLHtfX2RlZmluZUdldHRlcl9fOmZ1bmN0aW9uKFAsZ2V0dGVyKXskZGVmaW5lUHJvcGVydHkuZih0b09iamVjdCh0aGlzKSxQLHtnZXQ6YUZ1bmN0aW9uKGdldHRlciksZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19KX0sIlJVL0wiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIlJxZHkiKTt2YXIgJE9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXRXBrIikuT2JqZWN0O21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0LGtleSxkZXNjKXtyZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCxrZXksZGVzYyl9fSxSVzBWOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTL2ovIiksJGtleXM9X193ZWJwYWNrX3JlcXVpcmVfXygiRFZnQSIpO19fd2VicGFja19yZXF1aXJlX18oIlh0cjgiKSgia2V5cyIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oaXQpe3JldHVybiAka2V5cyh0b09iamVjdChpdCkpfX0pfSxSWWk3OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXt2YXIgY2VpbD1NYXRoLmNlaWwsZmxvb3I9TWF0aC5mbG9vcjttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIGlzTmFOKGl0PStpdCk/MDooMDxpdD9mbG9vcjpjZWlsKShpdCl9fSxSZktCOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBkZWY9X193ZWJwYWNrX3JlcXVpcmVfXygiMmZhRSIpLmYsaGFzPV9fd2VicGFja19yZXF1aXJlX18oIkIrT1QiKSxUQUc9X193ZWJwYWNrX3JlcXVpcmVfXygiVVdpWCIpKCJ0b1N0cmluZ1RhZyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0LHRhZyxzdGF0KXtpdCYmIWhhcyhpdD1zdGF0P2l0Oml0LnByb3RvdHlwZSxUQUcpJiZkZWYoaXQsVEFHLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dGFnfSl9fSwiUmpELyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGJpdG1hcCx2YWx1ZSl7cmV0dXJue2VudW1lcmFibGU6ISgxJmJpdG1hcCksY29uZmlndXJhYmxlOiEoMiZiaXRtYXApLHdyaXRhYmxlOiEoNCZiaXRtYXApLHZhbHVlOnZhbHVlfX19LCJSbitnIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGNyZWF0ZUVycm9yPV9fd2VicGFja19yZXF1aXJlX18oIkxZTkYiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihyZXNvbHZlLHJlamVjdCxyZXNwb25zZSl7dmFyIHZhbGlkYXRlU3RhdHVzPXJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztyZXNwb25zZS5zdGF0dXMmJnZhbGlkYXRlU3RhdHVzJiYhdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKT9yZWplY3QoY3JlYXRlRXJyb3IoIlJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgIityZXNwb25zZS5zdGF0dXMscmVzcG9uc2UuY29uZmlnLG51bGwscmVzcG9uc2UucmVxdWVzdCxyZXNwb25zZSkpOnJlc29sdmUocmVzcG9uc2UpfX0sUnFkeTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJZN1pDIik7JGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKiFfX3dlYnBhY2tfcmVxdWlyZV9fKCJqbURIIiksIk9iamVjdCIse2RlZmluZVByb3BlcnR5Ol9fd2VicGFja19yZXF1aXJlX18oIjJmYUUiKS5mfSl9LFJ3VGs6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5QKyRleHBvcnQuUiwiTWFwIix7dG9KU09OOl9fd2VicGFja19yZXF1aXJlX18oIlJMaDkiKSgiTWFwIil9KX0sIlMvai8iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBkZWZpbmVkPV9fd2VicGFja19yZXF1aXJlX18oInZoUFUiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSl9fSxTNmxuOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5KXt2YXIgcmVzdWx0PW51bWJlcisiICI7c3dpdGNoKGtleSl7Y2FzZSJzcyI6cmV0dXJuIHJlc3VsdCs9MT09PW51bWJlcj8ic2VrdW5kYSI6Mj09PW51bWJlcnx8Mz09PW51bWJlcnx8ND09PW51bWJlcj8ic2VrdW5kZSI6InNla3VuZGkiO2Nhc2UibSI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/ImplZG5hIG1pbnV0YSI6ImplZG5lIG1pbnV0ZSI7Y2FzZSJtbSI6cmV0dXJuIHJlc3VsdCs9MT09PW51bWJlcj8ibWludXRhIjoyPT09bnVtYmVyfHwzPT09bnVtYmVyfHw0PT09bnVtYmVyPyJtaW51dGUiOiJtaW51dGEiO2Nhc2UiaCI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/ImplZGFuIHNhdCI6ImplZG5vZyBzYXRhIjtjYXNlImhoIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyPyJzYXQiOjI9PT1udW1iZXJ8fDM9PT1udW1iZXJ8fDQ9PT1udW1iZXI/InNhdGEiOiJzYXRpIjtjYXNlImRkIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyPyJkYW4iOiJkYW5hIjtjYXNlIk1NIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyPyJtamVzZWMiOjI9PT1udW1iZXJ8fDM9PT1udW1iZXJ8fDQ9PT1udW1iZXI/Im1qZXNlY2EiOiJtamVzZWNpIjtjYXNlInl5IjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyPyJnb2RpbmEiOjI9PT1udW1iZXJ8fDM9PT1udW1iZXJ8fDQ9PT1udW1iZXI/ImdvZGluZSI6ImdvZGluYSJ9fW1vbWVudC5kZWZpbmVMb2NhbGUoImhyIix7bW9udGhzOntmb3JtYXQ6InNpamXEjW5qYV92ZWxqYcSNZV9vxb51amthX3RyYXZuamFfc3ZpYm5qYV9saXBuamFfc3JwbmphX2tvbG92b3phX3J1am5hX2xpc3RvcGFkYV9zdHVkZW5vZ2FfcHJvc2luY2EiLnNwbGl0KCJfIiksc3RhbmRhbG9uZToic2lqZcSNYW5qX3ZlbGphxI1hX2/FvnVqYWtfdHJhdmFual9zdmliYW5qX2xpcGFual9zcnBhbmpfa29sb3Zvel9ydWphbl9saXN0b3BhZF9zdHVkZW5pX3Byb3NpbmFjIi5zcGxpdCgiXyIpfSxtb250aHNTaG9ydDoic2lqLl92ZWxqLl9vxb51Ll90cmEuX3N2aS5fbGlwLl9zcnAuX2tvbC5fcnVqLl9saXMuX3N0dS5fcHJvLiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJuZWRqZWxqYV9wb25lZGplbGpha191dG9yYWtfc3JpamVkYV/EjWV0dnJ0YWtfcGV0YWtfc3Vib3RhIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Im5lZC5fcG9uLl91dG8uX3NyaS5fxI1ldC5fcGV0Ll9zdWIuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJuZV9wb191dF9zcl/EjWVfcGVfc3UiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbZGFuYXMgdV0gTFQiLG5leHREYXk6IltzdXRyYSB1XSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbdV0gW25lZGplbGp1XSBbdV0gTFQiO2Nhc2UgMzpyZXR1cm4iW3VdIFtzcmlqZWR1XSBbdV0gTFQiO2Nhc2UgNjpyZXR1cm4iW3VdIFtzdWJvdHVdIFt1XSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJbdV0gZGRkZCBbdV0gTFQifX0sbGFzdERheToiW2p1xI1lciB1XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpyZXR1cm4iW3Byb8WhbHVdIGRkZGQgW3VdIExUIjtjYXNlIDY6cmV0dXJuIltwcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3Byb8WhbGldIGRkZGQgW3VdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InphICVzIixwYXN0OiJwcmlqZSAlcyIsczoicGFyIHNla3VuZGkiLHNzOnRyYW5zbGF0ZSxtOnRyYW5zbGF0ZSxtbTp0cmFuc2xhdGUsaDp0cmFuc2xhdGUsaGg6dHJhbnNsYXRlLGQ6ImRhbiIsZGQ6dHJhbnNsYXRlLE06Im1qZXNlYyIsTU06dHJhbnNsYXRlLHk6ImdvZGludSIseXk6dHJhbnNsYXRlfSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LFNCdUU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPXt9fSxTRWt3OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPXtkZWZhdWx0Ol9fd2VicGFja19yZXF1aXJlX18oIlJVL0wiKSxfX2VzTW9kdWxlOiEwfX0sU0Z4VzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIHN1ZmZpeGVzPXsxOiItaW5jaSIsNToiLWluY2kiLDg6Ii1pbmNpIiw3MDoiLWluY2kiLDgwOiItaW5jaSIsMjoiLW5jaSIsNzoiLW5jaSIsMjA6Ii1uY2kiLDUwOiItbmNpIiwzOiItw7xuY8O8Iiw0OiItw7xuY8O8IiwxMDA6Ii3DvG5jw7wiLDY6Ii1uY8SxIiw5OiItdW5jdSIsMTA6Ii11bmN1IiwzMDoiLXVuY3UiLDYwOiItxLFuY8SxIiw5MDoiLcSxbmPEsSJ9O21vbWVudC5kZWZpbmVMb2NhbGUoImF6Iix7bW9udGhzOiJ5YW52YXJfZmV2cmFsX21hcnRfYXByZWxfbWF5X2l5dW5faXl1bF9hdnF1c3Rfc2VudHlhYnJfb2t0eWFicl9ub3lhYnJfZGVrYWJyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJ5YW5fZmV2X21hcl9hcHJfbWF5X2l5bl9peWxfYXZxX3Nlbl9va3Rfbm95X2RlayIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiQmF6YXJfQmF6YXIgZXJ0yZlzaV/Dh8mZcsWfyZluYsmZIGF4xZ9hbcSxX8OHyZlyxZ/JmW5iyZlfQ8O8bcmZIGF4xZ9hbcSxX0PDvG3JmV/FnsmZbmLJmSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJCYXpfQnpFX8OHQXhfw4fJmXJfQ0F4X0PDvG1fxZ7JmW4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkJ6X0JFX8OHQV/Dh8mZX0NBX0PDvF/FnsmZIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltidWfDvG4gc2FhdF0gTFQiLG5leHREYXk6IltzYWJhaCBzYWF0XSBMVCIsbmV4dFdlZWs6IltnyZlsyZluIGjJmWZ0yZldIGRkZGQgW3NhYXRdIExUIixsYXN0RGF5OiJbZMO8bsmZbl0gTFQiLGxhc3RXZWVrOiJba2XDp8mZbiBoyZlmdMmZXSBkZGRkIFtzYWF0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgc29ucmEiLHBhc3Q6IiVzIMmZdnbJmWwiLHM6ImJpcm5lw6fJmSBzYW5pecmZIixzczoiJWQgc2FuaXnJmSIsbToiYmlyIGTJmXFpccmZIixtbToiJWQgZMmZcWlxyZkiLGg6ImJpciBzYWF0IixoaDoiJWQgc2FhdCIsZDoiYmlyIGfDvG4iLGRkOiIlZCBnw7xuIixNOiJiaXIgYXkiLE1NOiIlZCBheSIseToiYmlyIGlsIix5eToiJWQgaWwifSxtZXJpZGllbVBhcnNlOi9nZWPJmXxzyZloyZlyfGfDvG5kw7x6fGF4xZ9hbS8saXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuL14oZ8O8bmTDvHp8YXjFn2FtKSQvLnRlc3QoaW5wdXQpfSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjw0PyJnZWPJmSI6aG91cjwxMj8ic8mZaMmZciI6aG91cjwxNz8iZ8O8bmTDvHoiOiJheMWfYW0ifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9LSjEsW5jxLF8aW5jaXxuY2l8w7xuY8O8fG5jxLF8dW5jdSkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXtpZigwPT09bnVtYmVyKXJldHVybiBudW1iZXIrIi3EsW5jxLEiO3ZhciBhPW51bWJlciUxMCxiPW51bWJlciUxMDAtYSxjPTEwMDw9bnVtYmVyPzEwMDpudWxsO3JldHVybiBudW1iZXIrKHN1ZmZpeGVzW2FdfHxzdWZmaXhlc1tiXXx8c3VmZml4ZXNbY10pfSx3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sU01CMjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygiT0d0ZiIpKCJib2xkIixmdW5jdGlvbihjcmVhdGVIVE1MKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCJiIiwiIiwiIil9fSl9LFNQaW46ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSwkcmVkdWNlPV9fd2VicGFja19yZXF1aXJlX18oImV5TXIiKTskZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqIV9fd2VicGFja19yZXF1aXJlX18oIkx5RTgiKShbXS5yZWR1Y2VSaWdodCwhMCksIkFycmF5Iix7cmVkdWNlUmlnaHQ6ZnVuY3Rpb24oY2FsbGJhY2tmbil7cmV0dXJuICRyZWR1Y2UodGhpcyxjYWxsYmFja2ZuLGFyZ3VtZW50cy5sZW5ndGgsYXJndW1lbnRzWzFdLCEwKX19KX0sU1JmYzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSx0b0xlbmd0aD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJuZThpIiksYWR2YW5jZVN0cmluZ0luZGV4PV9fd2VicGFja19yZXF1aXJlX18oIkE1QU4iKSxyZWdFeHBFeGVjPV9fd2VicGFja19yZXF1aXJlX18oIlh4dXoiKTtfX3dlYnBhY2tfcmVxdWlyZV9fKCJJVStaIikoIm1hdGNoIiwxLGZ1bmN0aW9uKGRlZmluZWQsTUFUQ0gsJG1hdGNoLG1heWJlQ2FsbE5hdGl2ZSl7cmV0dXJuW2Z1bmN0aW9uKHJlZ2V4cCl7dmFyIE89ZGVmaW5lZCh0aGlzKSxmbj1udWxsPT1yZWdleHA/dm9pZCAwOnJlZ2V4cFtNQVRDSF07cmV0dXJuIHZvaWQgMCE9PWZuP2ZuLmNhbGwocmVnZXhwLE8pOm5ldyBSZWdFeHAocmVnZXhwKVtNQVRDSF0oU3RyaW5nKE8pKX0sZnVuY3Rpb24ocmVnZXhwKXt2YXIgcmVzPW1heWJlQ2FsbE5hdGl2ZSgkbWF0Y2gscmVnZXhwLHRoaXMpO2lmKHJlcy5kb25lKXJldHVybiByZXMudmFsdWU7dmFyIHJ4PWFuT2JqZWN0KHJlZ2V4cCksUz1TdHJpbmcodGhpcyk7aWYoIXJ4Lmdsb2JhbClyZXR1cm4gcmVnRXhwRXhlYyhyeCxTKTtmb3IodmFyIHJlc3VsdCxmdWxsVW5pY29kZT1yeC51bmljb2RlLEE9W10sbj1yeC5sYXN0SW5kZXg9MDtudWxsIT09KHJlc3VsdD1yZWdFeHBFeGVjKHJ4LFMpKTspe3ZhciBtYXRjaFN0cj1TdHJpbmcocmVzdWx0WzBdKTsiIj09PShBW25dPW1hdGNoU3RyKSYmKHJ4Lmxhc3RJbmRleD1hZHZhbmNlU3RyaW5nSW5kZXgoUyx0b0xlbmd0aChyeC5sYXN0SW5kZXgpLGZ1bGxVbmljb2RlKSksbisrfXJldHVybiAwPT09bj9udWxsOkF9XX0pfSxTYXRPOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJ6aC1oayIse21vbnRoczoi5LiA5pyIX+S6jOaciF/kuInmnIhf5Zub5pyIX+S6lOaciF/lha3mnIhf5LiD5pyIX+WFq+aciF/kuZ3mnIhf5Y2B5pyIX+WNgeS4gOaciF/ljYHkuozmnIgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IjHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLmmJ/mnJ/ml6Vf5pif5pyf5LiAX+aYn+acn+S6jF/mmJ/mnJ/kuIlf5pif5pyf5ZubX+aYn+acn+S6lF/mmJ/mnJ/lha0iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi6YCx5pelX+mAseS4gF/pgLHkuoxf6YCx5LiJX+mAseWbm1/pgLHkupRf6YCx5YWtIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLml6Vf5LiAX+S6jF/kuIlf5ZubX+S6lF/lha0iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS9NTS9ERCIsTEw6IllZWVnlubRN5pyIROaXpSIsTExMOiJZWVlZ5bm0TeaciETml6UgSEg6bW0iLExMTEw6IllZWVnlubRN5pyIROaXpWRkZGQgSEg6bW0iLGw6IllZWVkvTS9EIixsbDoiWVlZWeW5tE3mnIhE5pelIixsbGw6IllZWVnlubRN5pyIROaXpSBISDptbSIsbGxsbDoiWVlZWeW5tE3mnIhE5pelZGRkZCBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L+WHjOaZqHzml6nkuIp85LiK5Y2IfOS4reWNiHzkuIvljYh85pma5LiKLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksIuWHjOaZqCI9PT1tZXJpZGllbXx8IuaXqeS4iiI9PT1tZXJpZGllbXx8IuS4iuWNiCI9PT1tZXJpZGllbT9ob3VyOiLkuK3ljYgiPT09bWVyaWRpZW0/MTE8PWhvdXI/aG91cjpob3VyKzEyOiLkuIvljYgiPT09bWVyaWRpZW18fCLmmZrkuIoiPT09bWVyaWRpZW0/aG91cisxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3ZhciBobT0xMDAqaG91cittaW51dGU7cmV0dXJuIGhtPDYwMD8i5YeM5pmoIjpobTw5MDA/IuaXqeS4iiI6aG08MTEzMD8i5LiK5Y2IIjpobTwxMjMwPyLkuK3ljYgiOmhtPDE4MDA/IuS4i+WNiCI6IuaZmuS4iiJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb5LuK5aSpXUxUIixuZXh0RGF5OiJb5piO5aSpXUxUIixuZXh0V2VlazoiW+S4i11kZGRkTFQiLGxhc3REYXk6IlvmmKjlpKldTFQiLGxhc3RXZWVrOiJb5LiKXWRkZGRMVCIsc2FtZUVsc2U6IkwifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KOaXpXzmnIh86YCxKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIscGVyaW9kKXtzd2l0Y2gocGVyaW9kKXtjYXNlImQiOmNhc2UiRCI6Y2FzZSJEREQiOnJldHVybiBudW1iZXIrIuaXpSI7Y2FzZSJNIjpyZXR1cm4gbnVtYmVyKyLmnIgiO2Nhc2UidyI6Y2FzZSJXIjpyZXR1cm4gbnVtYmVyKyLpgLEiO2RlZmF1bHQ6cmV0dXJuIG51bWJlcn19LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlc+WFpyIscGFzdDoiJXPliY0iLHM6IuW5vuenkiIsc3M6IiVkIOenkiIsbToiMSDliIbpkJgiLG1tOiIlZCDliIbpkJgiLGg6IjEg5bCP5pmCIixoaDoiJWQg5bCP5pmCIixkOiIxIOWkqSIsZGQ6IiVkIOWkqSIsTToiMSDlgIvmnIgiLE1NOiIlZCDlgIvmnIgiLHk6IjEg5bm0Iix5eToiJWQg5bm0In19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sU2xrWTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgY3R4PV9fd2VicGFja19yZXF1aXJlX18oIm0wUHAiKSxjYWxsPV9fd2VicGFja19yZXF1aXJlX18oIkg2aGYiKSxpc0FycmF5SXRlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNNlFqIiksYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKSxnZXRJdGVyRm49X193ZWJwYWNrX3JlcXVpcmVfXygiSis2ZSIpLEJSRUFLPXt9LFJFVFVSTj17fTsoZXhwb3J0cz1tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdGVyYWJsZSxlbnRyaWVzLGZuLHRoYXQsSVRFUkFUT1Ipe3ZhciBsZW5ndGgsc3RlcCxpdGVyYXRvcixyZXN1bHQsaXRlckZuPUlURVJBVE9SP2Z1bmN0aW9uKCl7cmV0dXJuIGl0ZXJhYmxlfTpnZXRJdGVyRm4oaXRlcmFibGUpLGY9Y3R4KGZuLHRoYXQsZW50cmllcz8yOjEpLGluZGV4PTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGl0ZXJGbil0aHJvdyBUeXBlRXJyb3IoaXRlcmFibGUrIiBpcyBub3QgaXRlcmFibGUhIik7aWYoaXNBcnJheUl0ZXIoaXRlckZuKSl7Zm9yKGxlbmd0aD10b0xlbmd0aChpdGVyYWJsZS5sZW5ndGgpO2luZGV4PGxlbmd0aDtpbmRleCsrKWlmKChyZXN1bHQ9ZW50cmllcz9mKGFuT2JqZWN0KHN0ZXA9aXRlcmFibGVbaW5kZXhdKVswXSxzdGVwWzFdKTpmKGl0ZXJhYmxlW2luZGV4XSkpPT09QlJFQUt8fHJlc3VsdD09PVJFVFVSTilyZXR1cm4gcmVzdWx0fWVsc2UgZm9yKGl0ZXJhdG9yPWl0ZXJGbi5jYWxsKGl0ZXJhYmxlKTshKHN0ZXA9aXRlcmF0b3IubmV4dCgpKS5kb25lOylpZigocmVzdWx0PWNhbGwoaXRlcmF0b3IsZixzdGVwLnZhbHVlLGVudHJpZXMpKT09PUJSRUFLfHxyZXN1bHQ9PT1SRVRVUk4pcmV0dXJuIHJlc3VsdH0pLkJSRUFLPUJSRUFLLGV4cG9ydHMuUkVUVVJOPVJFVFVSTn0sVDM5YjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHN0cm9uZz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ3bXZHIiksdmFsaWRhdGU9X193ZWJwYWNrX3JlcXVpcmVfXygiczVxWSIpO21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIjRMaUQiKSgiU2V0IixmdW5jdGlvbihnZXQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBnZXQodGhpcywwPGFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7YWRkOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gc3Ryb25nLmRlZih2YWxpZGF0ZSh0aGlzLCJTZXQiKSx2YWx1ZT0wPT09dmFsdWU/MDp2YWx1ZSx2YWx1ZSl9fSxzdHJvbmcpfSxUSldOOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oIjVUMlkiKSxjb3JlPV9fd2VicGFja19yZXF1aXJlX18oIldFcGsiKSxkUD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIyZmFFIiksREVTQ1JJUFRPUlM9X193ZWJwYWNrX3JlcXVpcmVfXygiam1ESCIpLFNQRUNJRVM9X193ZWJwYWNrX3JlcXVpcmVfXygiVVdpWCIpKCJzcGVjaWVzIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oS0VZKXt2YXIgQz0iZnVuY3Rpb24iPT10eXBlb2YgY29yZVtLRVldP2NvcmVbS0VZXTpnbG9iYWxbS0VZXTtERVNDUklQVE9SUyYmQyYmIUNbU1BFQ0lFU10mJmRQLmYoQyxTUEVDSUVTLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSxUZHB1OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIjdERGciKSgiRmxvYXQ2NCIsOCxmdW5jdGlvbihpbml0KXtyZXR1cm4gZnVuY3Rpb24oZGF0YSxieXRlT2Zmc2V0LGxlbmd0aCl7cmV0dXJuIGluaXQodGhpcyxkYXRhLGJ5dGVPZmZzZXQsbGVuZ3RoKX19KX0sVHVHRDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgSVRFUkFUT1I9X193ZWJwYWNrX3JlcXVpcmVfXygiVVdpWCIpKCJpdGVyYXRvciIpLFNBRkVfQ0xPU0lORz0hMTt0cnl7dmFyIHJpdGVyPVs3XVtJVEVSQVRPUl0oKTtyaXRlci5yZXR1cm49ZnVuY3Rpb24oKXtTQUZFX0NMT1NJTkc9ITB9LEFycmF5LmZyb20ocml0ZXIsZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goZSl7fW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGV4ZWMsc2tpcENsb3Npbmcpe2lmKCFza2lwQ2xvc2luZyYmIVNBRkVfQ0xPU0lORylyZXR1cm4hMTt2YXIgc2FmZT0hMTt0cnl7dmFyIGFycj1bN10saXRlcj1hcnJbSVRFUkFUT1JdKCk7aXRlci5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6c2FmZT0hMH19LGFycltJVEVSQVRPUl09ZnVuY3Rpb24oKXtyZXR1cm4gaXRlcn0sZXhlYyhhcnIpfWNhdGNoKGUpe31yZXR1cm4gc2FmZX19LFR6ZTA6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO19fd2VicGFja19yZXF1aXJlX18oInFuY0IiKSgidHJpbSIsZnVuY3Rpb24oJHRyaW0pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiAkdHJpbSh0aGlzLDMpfX0pfSwiVStLRCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGhhcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJCK09UIiksdG9PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiSkI2OCIpLElFX1BST1RPPV9fd2VicGFja19yZXF1aXJlX18oIlZWbHgiKSgiSUVfUFJPVE8iKSxPYmplY3RQcm90bz1PYmplY3QucHJvdG90eXBlO21vZHVsZS5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oTyl7cmV0dXJuIE89dG9PYmplY3QoTyksaGFzKE8sSUVfUFJPVE8pP09bSUVfUFJPVE9dOiJmdW5jdGlvbiI9PXR5cGVvZiBPLmNvbnN0cnVjdG9yJiZPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3Rvcj9PLmNvbnN0cnVjdG9yLnByb3RvdHlwZTpPIGluc3RhbmNlb2YgT2JqZWN0P09iamVjdFByb3RvOm51bGx9fSxVMnQ5OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSwkYXNpbmg9TWF0aC5hc2luaDskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqISgkYXNpbmgmJjA8MS8kYXNpbmgoMCkpLCJNYXRoIix7YXNpbmg6ZnVuY3Rpb24gYXNpbmgoeCl7cmV0dXJuIGlzRmluaXRlKHg9K3gpJiYwIT14P3g8MD8tYXNpbmgoLXgpOk1hdGgubG9nKHgrTWF0aC5zcXJ0KHgqeCsxKSk6eH19KX0sVURoUjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiaWQiLHttb250aHM6IkphbnVhcmlfRmVicnVhcmlfTWFyZXRfQXByaWxfTWVpX0p1bmlfSnVsaV9BZ3VzdHVzX1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0Rlc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmViX01hcl9BcHJfTWVpX0p1bl9KdWxfQWd0X1NlcF9Pa3RfTm92X0RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiTWluZ2d1X1NlbmluX1NlbGFzYV9SYWJ1X0thbWlzX0p1bWF0X1NhYnR1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Ik1pbl9TZW5fU2VsX1JhYl9LYW1fSnVtX1NhYiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiTWdfU25fU2xfUmJfS21fSm1fU2IiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISC5tbSIsTFRTOiJISC5tbS5zcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0ifSxtZXJpZGllbVBhcnNlOi9wYWdpfHNpYW5nfHNvcmV8bWFsYW0vLG1lcmlkaWVtSG91cjpmdW5jdGlvbihob3VyLG1lcmlkaWVtKXtyZXR1cm4gMTI9PT1ob3VyJiYoaG91cj0wKSwicGFnaSI9PT1tZXJpZGllbT9ob3VyOiJzaWFuZyI9PT1tZXJpZGllbT8xMTw9aG91cj9ob3VyOmhvdXIrMTI6InNvcmUiPT09bWVyaWRpZW18fCJtYWxhbSI9PT1tZXJpZGllbT9ob3VyKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cnMsbWludXRlcyxpc0xvd2VyKXtyZXR1cm4gaG91cnM8MTE/InBhZ2kiOmhvdXJzPDE1PyJzaWFuZyI6aG91cnM8MTk/InNvcmUiOiJtYWxhbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSGFyaSBpbmkgcHVrdWxdIExUIixuZXh0RGF5OiJbQmVzb2sgcHVrdWxdIExUIixuZXh0V2VlazoiZGRkZCBbcHVrdWxdIExUIixsYXN0RGF5OiJbS2VtYXJpbiBwdWt1bF0gTFQiLGxhc3RXZWVrOiJkZGRkIFtsYWx1IHB1a3VsXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZGFsYW0gJXMiLHBhc3Q6IiVzIHlhbmcgbGFsdSIsczoiYmViZXJhcGEgZGV0aWsiLHNzOiIlZCBkZXRpayIsbToic2VtZW5pdCIsbW06IiVkIG1lbml0IixoOiJzZWphbSIsaGg6IiVkIGphbSIsZDoic2VoYXJpIixkZDoiJWQgaGFyaSIsTToic2VidWxhbiIsTU06IiVkIGJ1bGFuIix5OiJzZXRhaHVuIix5eToiJWQgdGFodW4ifSx3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sVUV4ZDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgZ2V0S2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJEVmdBIiksdG9JT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oImFDRmoiKSxpc0VudW09X193ZWJwYWNrX3JlcXVpcmVfXygiVXFjRiIpLmY7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXNFbnRyaWVzKXtyZXR1cm4gZnVuY3Rpb24oaXQpe2Zvcih2YXIga2V5LE89dG9JT2JqZWN0KGl0KSxrZXlzPWdldEtleXMoTyksbGVuZ3RoPWtleXMubGVuZ3RoLGk9MCxyZXN1bHQ9W107aTxsZW5ndGg7KWlzRW51bS5jYWxsKE8sa2V5PWtleXNbaSsrXSkmJnJlc3VsdC5wdXNoKGlzRW50cmllcz9ba2V5LE9ba2V5XV06T1trZXldKTtyZXR1cm4gcmVzdWx0fX19LFVPMzk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGRvbmUsdmFsdWUpe3JldHVybnt2YWx1ZTp2YWx1ZSxkb25lOiEhZG9uZX19fSxVU0N4OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJnYSIse21vbnRoczpbIkVhbsOhaXIiLCJGZWFiaHJhIiwiTcOhcnRhIiwiQWlicmXDoW4iLCJCZWFsdGFpbmUiLCJNw6lpdGhlYW1oIiwiScO6aWwiLCJMw7puYXNhIiwiTWXDoW4gRsOzbWhhaXIiLCJEZWFpcmVhZGggRsOzbWhhaXIiLCJTYW1oYWluIiwiTm9sbGFpZyJdLG1vbnRoc1Nob3J0OlsiRWFuw6EiLCJGZWFiIiwiTcOhcnQiLCJBaWJyIiwiQmVhbCIsIk3DqWl0IiwiScO6aWwiLCJMw7puYSIsIk1lw6FuIiwiRGVhaSIsIlNhbWgiLCJOb2xsIl0sbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czpbIkTDqSBEb21obmFpZ2giLCJEw6kgTHVhaW4iLCJEw6kgTcOhaXJ0IiwiRMOpIEPDqWFkYW9pbiIsIkTDqWFyZGFvaW4iLCJEw6kgaEFvaW5lIiwiRMOpIFNhdGhhcm4iXSx3ZWVrZGF5c1Nob3J0OlsiRG9tIiwiTHVhIiwiTcOhaSIsIkPDqWEiLCJEw6lhIiwiaEFvIiwiU2F0Il0sd2Vla2RheXNNaW46WyJEbyIsIkx1IiwiTcOhIiwiQ2UiLCJEw6kiLCJoQSIsIlNhIl0sbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSW5uaXUgYWddIExUIixuZXh0RGF5OiJbQW3DoXJhY2ggYWddIExUIixuZXh0V2VlazoiZGRkZCBbYWddIExUIixsYXN0RGF5OiJbSW5uw6kgYWlnXSBMVCIsbGFzdFdlZWs6ImRkZGQgW3NlbyBjYWl0ZV0gW2FnXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaSAlcyIscGFzdDoiJXMgw7Mgc2hpbiIsczoiY8O6cGxhIHNvaWNpbmQiLHNzOiIlZCBzb2ljaW5kIixtOiJuw7NpbcOpYWQiLG1tOiIlZCBuw7NpbcOpYWQiLGg6InVhaXIgYW4gY2hsb2lnIixoaDoiJWQgdWFpciBhbiBjaGxvaWciLGQ6ImzDoSIsZGQ6IiVkIGzDoSIsTToibcOtIixNTToiJWQgbcOtIix5OiJibGlhaW4iLHl5OiIlZCBibGlhaW4ifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KGR8bmF8bWgpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7dmFyIG91dHB1dD0xPT09bnVtYmVyPyJkIjpudW1iZXIlMTA9PTI/Im5hIjoibWgiO3JldHVybiBudW1iZXIrb3V0cHV0fSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sVVVlVzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgTUFUQ0g9X193ZWJwYWNrX3JlcXVpcmVfXygiSzB4VSIpKCJtYXRjaCIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKEtFWSl7dmFyIHJlPS8uLzt0cnl7Ii8uLyJbS0VZXShyZSl9Y2F0Y2goZSl7dHJ5e3JldHVybiByZVtNQVRDSF09ITEsISIvLi8iW0tFWV0ocmUpfWNhdGNoKGYpe319cmV0dXJuITB9fSxVV2lYOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBzdG9yZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCIyOXMvIikoIndrcyIpLHVpZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJZcUFjIiksU3ltYm9sPV9fd2VicGFja19yZXF1aXJlX18oIjVUMlkiKS5TeW1ib2wsVVNFX1NZTUJPTD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sOyhtb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihuYW1lKXtyZXR1cm4gc3RvcmVbbmFtZV18fChzdG9yZVtuYW1lXT1VU0VfU1lNQk9MJiZTeW1ib2xbbmFtZV18fChVU0VfU1lNQk9MP1N5bWJvbDp1aWQpKCJTeW1ib2wuIituYW1lKSl9KS5zdG9yZT1zdG9yZX0sVWJiRTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCJvOE5IIiksbW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiV0VwayIpLk9iamVjdC5hc3NpZ259LFVnb3M6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciByZTEscmUyLHJlZ2V4cEZsYWdzPV9fd2VicGFja19yZXF1aXJlX18oIkMvdmEiKSxuYXRpdmVFeGVjPVJlZ0V4cC5wcm90b3R5cGUuZXhlYyxuYXRpdmVSZXBsYWNlPVN0cmluZy5wcm90b3R5cGUucmVwbGFjZSxwYXRjaGVkRXhlYz1uYXRpdmVFeGVjLFVQREFURVNfTEFTVF9JTkRFWF9XUk9ORz0ocmUxPS9hLyxyZTI9L2IqL2csbmF0aXZlRXhlYy5jYWxsKHJlMSwiYSIpLG5hdGl2ZUV4ZWMuY2FsbChyZTIsImEiKSwwIT09cmUxLmxhc3RJbmRleHx8MCE9PXJlMi5sYXN0SW5kZXgpLE5QQ0dfSU5DTFVERUQ9dm9pZCAwIT09LygpPz8vLmV4ZWMoIiIpWzFdOyhVUERBVEVTX0xBU1RfSU5ERVhfV1JPTkd8fE5QQ0dfSU5DTFVERUQpJiYocGF0Y2hlZEV4ZWM9ZnVuY3Rpb24oc3RyKXt2YXIgbGFzdEluZGV4LHJlQ29weSxtYXRjaCxpLHJlPXRoaXM7cmV0dXJuIE5QQ0dfSU5DTFVERUQmJihyZUNvcHk9bmV3IFJlZ0V4cCgiXiIrcmUuc291cmNlKyIkKD8hXFxzKSIscmVnZXhwRmxhZ3MuY2FsbChyZSkpKSxVUERBVEVTX0xBU1RfSU5ERVhfV1JPTkcmJihsYXN0SW5kZXg9cmUubGFzdEluZGV4KSxtYXRjaD1uYXRpdmVFeGVjLmNhbGwocmUsc3RyKSxVUERBVEVTX0xBU1RfSU5ERVhfV1JPTkcmJm1hdGNoJiYocmUubGFzdEluZGV4PXJlLmdsb2JhbD9tYXRjaC5pbmRleCttYXRjaFswXS5sZW5ndGg6bGFzdEluZGV4KSxOUENHX0lOQ0xVREVEJiZtYXRjaCYmMTxtYXRjaC5sZW5ndGgmJm5hdGl2ZVJlcGxhY2UuY2FsbChtYXRjaFswXSxyZUNvcHksZnVuY3Rpb24oKXtmb3IoaT0xO2k8YXJndW1lbnRzLmxlbmd0aC0yO2krKyl2b2lkIDA9PT1hcmd1bWVudHNbaV0mJihtYXRjaFtpXT12b2lkIDApfSksbWF0Y2h9KSxtb2R1bGUuZXhwb3J0cz1wYXRjaGVkRXhlY30sVW5CSzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHV0aWxzPV9fd2VicGFja19yZXF1aXJlX18oInhUSisiKSx0cmFuc2Zvcm1EYXRhPV9fd2VicGFja19yZXF1aXJlX18oInhBR1EiKSxpc0NhbmNlbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMbWVtIiksZGVmYXVsdHM9X193ZWJwYWNrX3JlcXVpcmVfXygiSkVRciIpLGlzQWJzb2x1dGVVUkw9X193ZWJwYWNrX3JlcXVpcmVfXygiMlNWZCIpLGNvbWJpbmVVUkxzPV9fd2VicGFja19yZXF1aXJlX18oIjVvTXAiKTtmdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyl7Y29uZmlnLmNhbmNlbFRva2VuJiZjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpfW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGNvbmZpZyl7cmV0dXJuIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSxjb25maWcuYmFzZVVSTCYmIWlzQWJzb2x1dGVVUkwoY29uZmlnLnVybCkmJihjb25maWcudXJsPWNvbWJpbmVVUkxzKGNvbmZpZy5iYXNlVVJMLGNvbmZpZy51cmwpKSxjb25maWcuaGVhZGVycz1jb25maWcuaGVhZGVyc3x8e30sY29uZmlnLmRhdGE9dHJhbnNmb3JtRGF0YShjb25maWcuZGF0YSxjb25maWcuaGVhZGVycyxjb25maWcudHJhbnNmb3JtUmVxdWVzdCksY29uZmlnLmhlYWRlcnM9dXRpbHMubWVyZ2UoY29uZmlnLmhlYWRlcnMuY29tbW9ufHx7fSxjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXXx8e30sY29uZmlnLmhlYWRlcnN8fHt9KSx1dGlscy5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsInBvc3QiLCJwdXQiLCJwYXRjaCIsImNvbW1vbiJdLGZ1bmN0aW9uKG1ldGhvZCl7ZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF19KSwoY29uZmlnLmFkYXB0ZXJ8fGRlZmF1bHRzLmFkYXB0ZXIpKGNvbmZpZykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7cmV0dXJuIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSxyZXNwb25zZS5kYXRhPXRyYW5zZm9ybURhdGEocmVzcG9uc2UuZGF0YSxyZXNwb25zZS5oZWFkZXJzLGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZSkscmVzcG9uc2V9LGZ1bmN0aW9uKHJlYXNvbil7cmV0dXJuIGlzQ2FuY2VsKHJlYXNvbil8fCh0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZykscmVhc29uJiZyZWFzb24ucmVzcG9uc2UmJihyZWFzb24ucmVzcG9uc2UuZGF0YT10cmFuc2Zvcm1EYXRhKHJlYXNvbi5yZXNwb25zZS5kYXRhLHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZSkpKSxQcm9taXNlLnJlamVjdChyZWFzb24pfSl9fSxVcFFXOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgbW9udGhzPVsi2KzZhtmI2LHbjCIsItmB2LHZiNix24wiLCLZhdin2LHahiIsItin2b7YsduM2YQiLCLZhdim24wiLCLYrNmI2YYiLCLYrNmI2YTYp9im24wiLCLYp9qv2LPYqiIsItiz2KrZhdio2LEiLCLYp9qp2KrZiNio2LEiLCLZhtmI2YXYqNixIiwi2K/Ys9mF2KjYsSJdLGRheXM9WyLYp9iq2YjYp9ixIiwi2b7bjNixIiwi2YXZhtqv2YQiLCLYqNiv2r4iLCLYrNmF2LnYsdin2KoiLCLYrNmF2LnbgSIsItuB2YHYqtuBIl07bW9tZW50LmRlZmluZUxvY2FsZSgidXIiLHttb250aHM6bW9udGhzLG1vbnRoc1Nob3J0Om1vbnRocyx3ZWVrZGF5czpkYXlzLHdlZWtkYXlzU2hvcnQ6ZGF5cyx3ZWVrZGF5c01pbjpkYXlzLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZNiMIEQgTU1NTSBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov2LXYqNitfNi02KfZhS8saXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuIti02KfZhSI9PT1pbnB1dH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7cmV0dXJuIGhvdXI8MTI/Iti12KjYrSI6Iti02KfZhSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KLYrCDYqNmI2YLYql0gTFQiLG5leHREYXk6IlvaqdmEINio2YjZgtiqXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9io2YjZgtiqXSBMVCIsbGFzdERheToiW9qv2LDYtNiq24Eg2LHZiNiyINio2YjZgtiqXSBMVCIsbGFzdFdlZWs6Ilvar9iw2LTYqtuBXSBkZGRkIFvYqNmI2YLYql0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzINio2LnYryIscGFzdDoiJXMg2YLYqNmEIixzOiLahtmG2K8g2LPbjNqp2YbaiCIsc3M6IiVkINiz24zaqdmG2ogiLG06Itin24zaqSDZhdmG2bkiLG1tOiIlZCDZhdmG2bkiLGg6Itin24zaqSDar9q+2YbZuduBIixoaDoiJWQg2q/avtmG2bnbkiIsZDoi2KfbjNqpINiv2YYiLGRkOiIlZCDYr9mGIixNOiLYp9uM2qkg2YXYp9uBIixNTToiJWQg2YXYp9uBIix5OiLYp9uM2qkg2LPYp9mEIix5eToiJWQg2LPYp9mEIn0scHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL9iML2csIiwiKX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvLC9nLCLYjCIpfSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sVXFjRjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7ZXhwb3J0cy5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSxVcjFEOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJzcyIse21vbnRoczoiQmhpbWJpZHZ3YW5lX0luZGxvdmFuYV9JbmRsb3YnbGVua2h1bHVfTWFiYXNhX0lua2h3ZWtod2V0aV9JbmhsYWJhX0tob2x3YW5lX0luZ2NpX0lueW9uaV9JbXBoYWxhX0x3ZXRpX0luZ29uZ29uaSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiQmhpX0luYV9JbnVfTWFiX0lua19JbmhfS2hvX0lnY19JbnlfSW1wX0x3ZV9JZ28iLnNwbGl0KCJfIiksd2Vla2RheXM6Ikxpc29udGZvX1Vtc29tYnVsdWtvX0xlc2liaWxpX0xlc2l0c2F0ZnVfTGVzaW5lX0xlc2lobGFudV9VbWdjaWJlbG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiTGlzX1VtYl9Mc2JfTGVzX0xzaV9Mc2hfVW1nIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJMaV9Vc19MYl9MdF9Mc19MaF9VZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJoOm1tIEEiLExUUzoiaDptbTpzcyBBIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEifSxjYWxlbmRhcjp7c2FtZURheToiW05hbXVobGEgbmdhXSBMVCIsbmV4dERheToiW0t1c2FzYSBuZ2FdIExUIixuZXh0V2VlazoiZGRkZCBbbmdhXSBMVCIsbGFzdERheToiW0l0b2xvIG5nYV0gTFQiLGxhc3RXZWVrOiJkZGRkIFtsZWxpcGhlbGlsZV0gW25nYV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im5nYSAlcyIscGFzdDoid2VudGVrYSBuZ2EgJXMiLHM6ImVtaXp1endhbmEgbG9tY2FuZSIsc3M6IiVkIG16dXp3YW5hIixtOiJ1bXp1enUiLG1tOiIlZCBlbWl6dXp1IixoOiJsaWhvcmEiLGhoOiIlZCBlbWFob3JhIixkOiJsaWxhbmdhIixkZDoiJWQgZW1hbGFuZ2EiLE06ImlueWFuZ2EiLE1NOiIlZCB0aW55YW5nYSIseToidW1ueWFrYSIseXk6IiVkIGltaW55YWthIn0sbWVyaWRpZW1QYXJzZTovZWt1c2VuaXxlbWluaXxlbnRzYW1iYW1hfGVidXN1a3UvLG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXJzLG1pbnV0ZXMsaXNMb3dlcil7cmV0dXJuIGhvdXJzPDExPyJla3VzZW5pIjpob3VyczwxNT8iZW1pbmkiOmhvdXJzPDE5PyJlbnRzYW1iYW1hIjoiZWJ1c3VrdSJ9LG1lcmlkaWVtSG91cjpmdW5jdGlvbihob3VyLG1lcmlkaWVtKXtyZXR1cm4gMTI9PT1ob3VyJiYoaG91cj0wKSwiZWt1c2VuaSI9PT1tZXJpZGllbT9ob3VyOiJlbWluaSI9PT1tZXJpZGllbT8xMTw9aG91cj9ob3VyOmhvdXIrMTI6ImVudHNhbWJhbWEiPT09bWVyaWRpZW18fCJlYnVzdWt1Ij09PW1lcmlkaWVtPzA9PT1ob3VyPzA6aG91cisxMjp2b2lkIDB9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0vLG9yZGluYWw6IiVkIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sIlYrZUoiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGluZGV4T2Y9X193ZWJwYWNrX3JlcXVpcmVfXygidzJhNSIpKCExKSwkbmF0aXZlPVtdLmluZGV4T2YsTkVHQVRJVkVfWkVSTz0hISRuYXRpdmUmJjEvWzFdLmluZGV4T2YoMSwtMCk8MDskZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqKE5FR0FUSVZFX1pFUk98fCFfX3dlYnBhY2tfcmVxdWlyZV9fKCJMeUU4IikoJG5hdGl2ZSkpLCJBcnJheSIse2luZGV4T2Y6ZnVuY3Rpb24oc2VhcmNoRWxlbWVudCl7cmV0dXJuIE5FR0FUSVZFX1pFUk8/JG5hdGl2ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fDA6JGluZGV4T2YodGhpcyxzZWFyY2hFbGVtZW50LGFyZ3VtZW50c1sxXSl9fSl9LCJWL0RYIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpO19fd2VicGFja19yZXF1aXJlX18oIlh0cjgiKSgiaXNTZWFsZWQiLGZ1bmN0aW9uKCRpc1NlYWxlZCl7cmV0dXJuIGZ1bmN0aW9uKGl0KXtyZXR1cm4haXNPYmplY3QoaXQpfHwhISRpc1NlYWxlZCYmJGlzU2VhbGVkKGl0KX19KX0sVjJ4OTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgidGV0Iix7bW9udGhzOiJKYW5laXJ1X0ZldmVyZWlydV9NYXJzdV9BYnJpbF9NYWl1X0p1w7F1X0p1bGx1X0FndXN0dV9TZXRlbWJydV9PdXR1YnJ1X05vdmVtYnJ1X0RlemVtYnJ1Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmV2X01hcl9BYnJfTWFpX0p1bl9KdWxfQWdvX1NldF9PdXRfTm92X0RleiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiRG9taW5ndV9TZWd1bmRhX1RlcnNhX0t1YXJ0YV9LaW50YV9TZXN0YV9TYWJhZHUiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiRG9tX1NlZ19UZXJzX0t1YV9LaW50X1Nlc3RfU2FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEb19TZWdfVGVfS3VfS2lfU2VzX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW09oaW4gaWhhXSBMVCIsbmV4dERheToiW0FiYW4gaWhhXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2loYV0gTFQiLGxhc3REYXk6IltIb3Jpc2VpayBpaGFdIExUIixsYXN0V2VlazoiZGRkZCBbc2VtYW5hIGtvdHVrXSBbaWhhXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaWhhICVzIixwYXN0OiIlcyBsaXViYSIsczoibWludXR1IGJhbHVuIixzczoibWludXR1ICVkIixtOiJtaW51dHUgaWRhIixtbToibWludXR1ICVkIixoOiJvcmFzIGlkYSIsaGg6Im9yYXMgJWQiLGQ6Imxvcm9uIGlkYSIsZGQ6Imxvcm9uICVkIixNOiJmdWxhbiBpZGEiLE1NOiJmdWxhbiAlZCIseToidGluYW4gaWRhIix5eToidGluYW4gJWQifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHN0fG5kfHJkfHRoKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3ZhciBiPW51bWJlciUxMCxvdXRwdXQ9MT09fn4obnVtYmVyJTEwMC8xMCk/InRoIjoxPT09Yj8ic3QiOjI9PT1iPyJuZCI6Mz09PWI/InJkIjoidGgiO3JldHVybiBudW1iZXIrb3V0cHV0fSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sVjdvQzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwO3ZhciBvYmosX2RlZmluZVByb3BlcnR5PV9fd2VicGFja19yZXF1aXJlX18oIlNFa3ciKSxfZGVmaW5lUHJvcGVydHkyPShvYmo9X2RlZmluZVByb3BlcnR5KSYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07ZXhwb3J0cy5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ITEsZGVzY3JpcHRvci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIGRlc2NyaXB0b3ImJihkZXNjcmlwdG9yLndyaXRhYmxlPSEwKSwoMCxfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKX19cmV0dXJuIGZ1bmN0aW9uKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe3JldHVybiBwcm90b1Byb3BzJiZkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKSxzdGF0aWNQcm9wcyYmZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyksQ29uc3RydWN0b3J9fSgpfSxWSnNQOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgY3R4PV9fd2VicGFja19yZXF1aXJlX18oIjJHVFAiKSwkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlk3WkMiKSx0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJKQjY4IiksY2FsbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJzTndJIiksaXNBcnJheUl0ZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiTndKMyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oInRFZWoiKSxjcmVhdGVQcm9wZXJ0eT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJJUDFaIiksZ2V0SXRlckZuPV9fd2VicGFja19yZXF1aXJlX18oImZOWkEiKTskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqIV9fd2VicGFja19yZXF1aXJlX18oIlR1R0QiKShmdW5jdGlvbihpdGVyKXtBcnJheS5mcm9tKGl0ZXIpfSksIkFycmF5Iix7ZnJvbTpmdW5jdGlvbihhcnJheUxpa2Upe3ZhciBsZW5ndGgscmVzdWx0LHN0ZXAsaXRlcmF0b3IsTz10b09iamVjdChhcnJheUxpa2UpLEM9ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSxhTGVuPWFyZ3VtZW50cy5sZW5ndGgsbWFwZm49MTxhTGVuP2FyZ3VtZW50c1sxXTp2b2lkIDAsbWFwcGluZz12b2lkIDAhPT1tYXBmbixpbmRleD0wLGl0ZXJGbj1nZXRJdGVyRm4oTyk7aWYobWFwcGluZyYmKG1hcGZuPWN0eChtYXBmbiwyPGFMZW4/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksbnVsbD09aXRlckZufHxDPT1BcnJheSYmaXNBcnJheUl0ZXIoaXRlckZuKSlmb3IocmVzdWx0PW5ldyBDKGxlbmd0aD10b0xlbmd0aChPLmxlbmd0aCkpO2luZGV4PGxlbmd0aDtpbmRleCsrKWNyZWF0ZVByb3BlcnR5KHJlc3VsdCxpbmRleCxtYXBwaW5nP21hcGZuKE9baW5kZXhdLGluZGV4KTpPW2luZGV4XSk7ZWxzZSBmb3IoaXRlcmF0b3I9aXRlckZuLmNhbGwoTykscmVzdWx0PW5ldyBDOyEoc3RlcD1pdGVyYXRvci5uZXh0KCkpLmRvbmU7aW5kZXgrKyljcmVhdGVQcm9wZXJ0eShyZXN1bHQsaW5kZXgsbWFwcGluZz9jYWxsKGl0ZXJhdG9yLG1hcGZuLFtzdGVwLnZhbHVlLGluZGV4XSwhMCk6c3RlcC52YWx1ZSk7cmV0dXJuIHJlc3VsdC5sZW5ndGg9aW5kZXgscmVzdWx0fX0pfSxWS2lyOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGZhaWxzPV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKSxhTnVtYmVyVmFsdWU9X193ZWJwYWNrX3JlcXVpcmVfXygidnZtTyIpLCR0b1ByZWNpc2lvbj0xLi50b1ByZWNpc2lvbjskZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqKCRmYWlscyhmdW5jdGlvbigpe3JldHVybiIxIiE9PSR0b1ByZWNpc2lvbi5jYWxsKDEsdm9pZCAwKX0pfHwhJGZhaWxzKGZ1bmN0aW9uKCl7JHRvUHJlY2lzaW9uLmNhbGwoe30pfSkpLCJOdW1iZXIiLHt0b1ByZWNpc2lvbjpmdW5jdGlvbihwcmVjaXNpb24pe3ZhciB0aGF0PWFOdW1iZXJWYWx1ZSh0aGlzLCJOdW1iZXIjdG9QcmVjaXNpb246IGluY29ycmVjdCBpbnZvY2F0aW9uISIpO3JldHVybiB2b2lkIDA9PT1wcmVjaXNpb24/JHRvUHJlY2lzaW9uLmNhbGwodGhhdCk6JHRvUHJlY2lzaW9uLmNhbGwodGhhdCxwcmVjaXNpb24pfX0pfSxWUnptOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgSW50ZXJuYWwsbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5LE93blByb21pc2VDYXBhYmlsaXR5LFdyYXBwZXIsTElCUkFSWT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMUUFjIiksZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKSxjdHg9X193ZWJwYWNrX3JlcXVpcmVfXygibTBQcCIpLGNsYXNzb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiSThhKyIpLCRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKSxhRnVuY3Rpb249X193ZWJwYWNrX3JlcXVpcmVfXygiMk9pRiIpLGFuSW5zdGFuY2U9X193ZWJwYWNrX3JlcXVpcmVfXygiOWdYNyIpLGZvck9mPV9fd2VicGFja19yZXF1aXJlX18oIlNsa1kiKSxzcGVjaWVzQ29uc3RydWN0b3I9X193ZWJwYWNrX3JlcXVpcmVfXygiNjlibiIpLHRhc2s9X193ZWJwYWNrX3JlcXVpcmVfXygiR1pFdSIpLnNldCxtaWNyb3Rhc2s9X193ZWJwYWNrX3JlcXVpcmVfXygiZ0hubiIpKCksbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGU9X193ZWJwYWNrX3JlcXVpcmVfXygicGJoRSIpLHBlcmZvcm09X193ZWJwYWNrX3JlcXVpcmVfXygibklDWiIpLHVzZXJBZ2VudD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJvbDh4IikscHJvbWlzZVJlc29sdmU9X193ZWJwYWNrX3JlcXVpcmVfXygidktyZCIpLFR5cGVFcnJvcj1nbG9iYWwuVHlwZUVycm9yLHByb2Nlc3M9Z2xvYmFsLnByb2Nlc3MsdmVyc2lvbnM9cHJvY2VzcyYmcHJvY2Vzcy52ZXJzaW9ucyx2OD12ZXJzaW9ucyYmdmVyc2lvbnMudjh8fCIiLCRQcm9taXNlPWdsb2JhbC5Qcm9taXNlLGlzTm9kZT0icHJvY2VzcyI9PWNsYXNzb2YocHJvY2VzcyksZW1wdHk9ZnVuY3Rpb24oKXt9LG5ld1Byb21pc2VDYXBhYmlsaXR5PW5ld0dlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eT1uZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZS5mLFVTRV9OQVRJVkU9ISFmdW5jdGlvbigpe3RyeXt2YXIgcHJvbWlzZT0kUHJvbWlzZS5yZXNvbHZlKDEpLEZha2VQcm9taXNlPShwcm9taXNlLmNvbnN0cnVjdG9yPXt9KVtfX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIikoInNwZWNpZXMiKV09ZnVuY3Rpb24oZXhlYyl7ZXhlYyhlbXB0eSxlbXB0eSl9O3JldHVybihpc05vZGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZwcm9taXNlLnRoZW4oZW1wdHkpaW5zdGFuY2VvZiBGYWtlUHJvbWlzZSYmMCE9PXY4LmluZGV4T2YoIjYuNiIpJiYtMT09PXVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUvNjYiKX1jYXRjaChlKXt9fSgpLGlzVGhlbmFibGU9ZnVuY3Rpb24oaXQpe3ZhciB0aGVuO3JldHVybiEoIWlzT2JqZWN0KGl0KXx8ImZ1bmN0aW9uIiE9dHlwZW9mKHRoZW49aXQudGhlbikpJiZ0aGVufSxub3RpZnk9ZnVuY3Rpb24ocHJvbWlzZSxpc1JlamVjdCl7aWYoIXByb21pc2UuX24pe3Byb21pc2UuX249ITA7dmFyIGNoYWluPXByb21pc2UuX2M7bWljcm90YXNrKGZ1bmN0aW9uKCl7Zm9yKHZhciB2YWx1ZT1wcm9taXNlLl92LG9rPTE9PXByb21pc2UuX3MsaT0wLHJ1bj1mdW5jdGlvbihyZWFjdGlvbil7dmFyIHJlc3VsdCx0aGVuLGV4aXRlZCxoYW5kbGVyPW9rP3JlYWN0aW9uLm9rOnJlYWN0aW9uLmZhaWwscmVzb2x2ZT1yZWFjdGlvbi5yZXNvbHZlLHJlamVjdD1yZWFjdGlvbi5yZWplY3QsZG9tYWluPXJlYWN0aW9uLmRvbWFpbjt0cnl7aGFuZGxlcj8ob2t8fCgyPT1wcm9taXNlLl9oJiZvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKSxwcm9taXNlLl9oPTEpLCEwPT09aGFuZGxlcj9yZXN1bHQ9dmFsdWU6KGRvbWFpbiYmZG9tYWluLmVudGVyKCkscmVzdWx0PWhhbmRsZXIodmFsdWUpLGRvbWFpbiYmKGRvbWFpbi5leGl0KCksZXhpdGVkPSEwKSkscmVzdWx0PT09cmVhY3Rpb24ucHJvbWlzZT9yZWplY3QoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOih0aGVuPWlzVGhlbmFibGUocmVzdWx0KSk/dGhlbi5jYWxsKHJlc3VsdCxyZXNvbHZlLHJlamVjdCk6cmVzb2x2ZShyZXN1bHQpKTpyZWplY3QodmFsdWUpfWNhdGNoKGUpe2RvbWFpbiYmIWV4aXRlZCYmZG9tYWluLmV4aXQoKSxyZWplY3QoZSl9fTtjaGFpbi5sZW5ndGg+aTspcnVuKGNoYWluW2krK10pO3Byb21pc2UuX2M9W10scHJvbWlzZS5fbj0hMSxpc1JlamVjdCYmIXByb21pc2UuX2gmJm9uVW5oYW5kbGVkKHByb21pc2UpfSl9fSxvblVuaGFuZGxlZD1mdW5jdGlvbihwcm9taXNlKXt0YXNrLmNhbGwoZ2xvYmFsLGZ1bmN0aW9uKCl7dmFyIHJlc3VsdCxoYW5kbGVyLGNvbnNvbGUsdmFsdWU9cHJvbWlzZS5fdix1bmhhbmRsZWQ9aXNVbmhhbmRsZWQocHJvbWlzZSk7aWYodW5oYW5kbGVkJiYocmVzdWx0PXBlcmZvcm0oZnVuY3Rpb24oKXtpc05vZGU/cHJvY2Vzcy5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLHZhbHVlLHByb21pc2UpOihoYW5kbGVyPWdsb2JhbC5vbnVuaGFuZGxlZHJlamVjdGlvbik/aGFuZGxlcih7cHJvbWlzZTpwcm9taXNlLHJlYXNvbjp2YWx1ZX0pOihjb25zb2xlPWdsb2JhbC5jb25zb2xlKSYmY29uc29sZS5lcnJvciYmY29uc29sZS5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIix2YWx1ZSl9KSxwcm9taXNlLl9oPWlzTm9kZXx8aXNVbmhhbmRsZWQocHJvbWlzZSk/MjoxKSxwcm9taXNlLl9hPXZvaWQgMCx1bmhhbmRsZWQmJnJlc3VsdC5lKXRocm93IHJlc3VsdC52fSl9LGlzVW5oYW5kbGVkPWZ1bmN0aW9uKHByb21pc2Upe3JldHVybiAxIT09cHJvbWlzZS5faCYmMD09PShwcm9taXNlLl9hfHxwcm9taXNlLl9jKS5sZW5ndGh9LG9uSGFuZGxlVW5oYW5kbGVkPWZ1bmN0aW9uKHByb21pc2Upe3Rhc2suY2FsbChnbG9iYWwsZnVuY3Rpb24oKXt2YXIgaGFuZGxlcjtpc05vZGU/cHJvY2Vzcy5lbWl0KCJyZWplY3Rpb25IYW5kbGVkIixwcm9taXNlKTooaGFuZGxlcj1nbG9iYWwub25yZWplY3Rpb25oYW5kbGVkKSYmaGFuZGxlcih7cHJvbWlzZTpwcm9taXNlLHJlYXNvbjpwcm9taXNlLl92fSl9KX0sJHJlamVjdD1mdW5jdGlvbih2YWx1ZSl7dmFyIHByb21pc2U9dGhpcztwcm9taXNlLl9kfHwocHJvbWlzZS5fZD0hMCwocHJvbWlzZT1wcm9taXNlLl93fHxwcm9taXNlKS5fdj12YWx1ZSxwcm9taXNlLl9zPTIscHJvbWlzZS5fYXx8KHByb21pc2UuX2E9cHJvbWlzZS5fYy5zbGljZSgpKSxub3RpZnkocHJvbWlzZSwhMCkpfSwkcmVzb2x2ZT1mdW5jdGlvbih2YWx1ZSl7dmFyIHRoZW4scHJvbWlzZT10aGlzO2lmKCFwcm9taXNlLl9kKXtwcm9taXNlLl9kPSEwLHByb21pc2U9cHJvbWlzZS5fd3x8cHJvbWlzZTt0cnl7aWYocHJvbWlzZT09PXZhbHVlKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodGhlbj1pc1RoZW5hYmxlKHZhbHVlKSk/bWljcm90YXNrKGZ1bmN0aW9uKCl7dmFyIHdyYXBwZXI9e193OnByb21pc2UsX2Q6ITF9O3RyeXt0aGVuLmNhbGwodmFsdWUsY3R4KCRyZXNvbHZlLHdyYXBwZXIsMSksY3R4KCRyZWplY3Qsd3JhcHBlciwxKSl9Y2F0Y2goZSl7JHJlamVjdC5jYWxsKHdyYXBwZXIsZSl9fSk6KHByb21pc2UuX3Y9dmFsdWUscHJvbWlzZS5fcz0xLG5vdGlmeShwcm9taXNlLCExKSl9Y2F0Y2goZSl7JHJlamVjdC5jYWxsKHtfdzpwcm9taXNlLF9kOiExfSxlKX19fTtVU0VfTkFUSVZFfHwoJFByb21pc2U9ZnVuY3Rpb24oZXhlY3V0b3Ipe2FuSW5zdGFuY2UodGhpcywkUHJvbWlzZSwiUHJvbWlzZSIsIl9oIiksYUZ1bmN0aW9uKGV4ZWN1dG9yKSxJbnRlcm5hbC5jYWxsKHRoaXMpO3RyeXtleGVjdXRvcihjdHgoJHJlc29sdmUsdGhpcywxKSxjdHgoJHJlamVjdCx0aGlzLDEpKX1jYXRjaChlcnIpeyRyZWplY3QuY2FsbCh0aGlzLGVycil9fSwoSW50ZXJuYWw9ZnVuY3Rpb24oZXhlY3V0b3Ipe3RoaXMuX2M9W10sdGhpcy5fYT12b2lkIDAsdGhpcy5fcz0wLHRoaXMuX2Q9ITEsdGhpcy5fdj12b2lkIDAsdGhpcy5faD0wLHRoaXMuX249ITF9KS5wcm90b3R5cGU9X193ZWJwYWNrX3JlcXVpcmVfXygiM0x5aiIpKCRQcm9taXNlLnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbihvbkZ1bGZpbGxlZCxvblJlamVjdGVkKXt2YXIgcmVhY3Rpb249bmV3UHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsJFByb21pc2UpKTtyZXR1cm4gcmVhY3Rpb24ub2s9ImZ1bmN0aW9uIiE9dHlwZW9mIG9uRnVsZmlsbGVkfHxvbkZ1bGZpbGxlZCxyZWFjdGlvbi5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiBvblJlamVjdGVkJiZvblJlamVjdGVkLHJlYWN0aW9uLmRvbWFpbj1pc05vZGU/cHJvY2Vzcy5kb21haW46dm9pZCAwLHRoaXMuX2MucHVzaChyZWFjdGlvbiksdGhpcy5fYSYmdGhpcy5fYS5wdXNoKHJlYWN0aW9uKSx0aGlzLl9zJiZub3RpZnkodGhpcywhMSkscmVhY3Rpb24ucHJvbWlzZX0sY2F0Y2g6ZnVuY3Rpb24ob25SZWplY3RlZCl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsb25SZWplY3RlZCl9fSksT3duUHJvbWlzZUNhcGFiaWxpdHk9ZnVuY3Rpb24oKXt2YXIgcHJvbWlzZT1uZXcgSW50ZXJuYWw7dGhpcy5wcm9taXNlPXByb21pc2UsdGhpcy5yZXNvbHZlPWN0eCgkcmVzb2x2ZSxwcm9taXNlLDEpLHRoaXMucmVqZWN0PWN0eCgkcmVqZWN0LHByb21pc2UsMSl9LG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmY9bmV3UHJvbWlzZUNhcGFiaWxpdHk9ZnVuY3Rpb24oQyl7cmV0dXJuIEM9PT0kUHJvbWlzZXx8Qz09PVdyYXBwZXI/bmV3IE93blByb21pc2VDYXBhYmlsaXR5KEMpOm5ld0dlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eShDKX0pLCRleHBvcnQoJGV4cG9ydC5HKyRleHBvcnQuVyskZXhwb3J0LkYqIVVTRV9OQVRJVkUse1Byb21pc2U6JFByb21pc2V9KSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJmeURxIikoJFByb21pc2UsIlByb21pc2UiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJlbFpxIikoIlByb21pc2UiKSxXcmFwcGVyPV9fd2VicGFja19yZXF1aXJlX18oImczZzUiKS5Qcm9taXNlLCRleHBvcnQoJGV4cG9ydC5TKyRleHBvcnQuRiohVVNFX05BVElWRSwiUHJvbWlzZSIse3JlamVjdDpmdW5jdGlvbihyKXt2YXIgY2FwYWJpbGl0eT1uZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKTtyZXR1cm4oMCxjYXBhYmlsaXR5LnJlamVjdCkociksY2FwYWJpbGl0eS5wcm9taXNlfX0pLCRleHBvcnQoJGV4cG9ydC5TKyRleHBvcnQuRiooTElCUkFSWXx8IVVTRV9OQVRJVkUpLCJQcm9taXNlIix7cmVzb2x2ZTpmdW5jdGlvbih4KXtyZXR1cm4gcHJvbWlzZVJlc29sdmUoTElCUkFSWSYmdGhpcz09PVdyYXBwZXI/JFByb21pc2U6dGhpcyx4KX19KSwkZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqIShVU0VfTkFUSVZFJiZfX3dlYnBhY2tfcmVxdWlyZV9fKCJYTVZoIikoZnVuY3Rpb24oaXRlcil7JFByb21pc2UuYWxsKGl0ZXIpLmNhdGNoKGVtcHR5KX0pKSwiUHJvbWlzZSIse2FsbDpmdW5jdGlvbihpdGVyYWJsZSl7dmFyIEM9dGhpcyxjYXBhYmlsaXR5PW5ld1Byb21pc2VDYXBhYmlsaXR5KEMpLHJlc29sdmU9Y2FwYWJpbGl0eS5yZXNvbHZlLHJlamVjdD1jYXBhYmlsaXR5LnJlamVjdCxyZXN1bHQ9cGVyZm9ybShmdW5jdGlvbigpe3ZhciB2YWx1ZXM9W10saW5kZXg9MCxyZW1haW5pbmc9MTtmb3JPZihpdGVyYWJsZSwhMSxmdW5jdGlvbihwcm9taXNlKXt2YXIgJGluZGV4PWluZGV4KyssYWxyZWFkeUNhbGxlZD0hMTt2YWx1ZXMucHVzaCh2b2lkIDApLHJlbWFpbmluZysrLEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKXthbHJlYWR5Q2FsbGVkfHwoYWxyZWFkeUNhbGxlZD0hMCx2YWx1ZXNbJGluZGV4XT12YWx1ZSwtLXJlbWFpbmluZ3x8cmVzb2x2ZSh2YWx1ZXMpKX0scmVqZWN0KX0pLC0tcmVtYWluaW5nfHxyZXNvbHZlKHZhbHVlcyl9KTtyZXR1cm4gcmVzdWx0LmUmJnJlamVjdChyZXN1bHQudiksY2FwYWJpbGl0eS5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGl0ZXJhYmxlKXt2YXIgQz10aGlzLGNhcGFiaWxpdHk9bmV3UHJvbWlzZUNhcGFiaWxpdHkoQykscmVqZWN0PWNhcGFiaWxpdHkucmVqZWN0LHJlc3VsdD1wZXJmb3JtKGZ1bmN0aW9uKCl7Zm9yT2YoaXRlcmFibGUsITEsZnVuY3Rpb24ocHJvbWlzZSl7Qy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLHJlamVjdCl9KX0pO3JldHVybiByZXN1bHQuZSYmcmVqZWN0KHJlc3VsdC52KSxjYXBhYmlsaXR5LnByb21pc2V9fSl9LFZUZXI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGNvcmU9X193ZWJwYWNrX3JlcXVpcmVfXygiZzNnNSIpLGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIiksc3RvcmU9Z2xvYmFsWyJfX2NvcmUtanNfc2hhcmVkX18iXXx8KGdsb2JhbFsiX19jb3JlLWpzX3NoYXJlZF9fIl09e30pOyhtb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihrZXksdmFsdWUpe3JldHVybiBzdG9yZVtrZXldfHwoc3RvcmVba2V5XT12b2lkIDAhPT12YWx1ZT92YWx1ZTp7fSl9KSgidmVyc2lvbnMiLFtdKS5wdXNoKHt2ZXJzaW9uOmNvcmUudmVyc2lvbixtb2RlOl9fd2VicGFja19yZXF1aXJlX18oIkxRQWMiKT8icHVyZSI6Imdsb2JhbCIsY29weXJpZ2h0OiLCqSAyMDE5IERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpIn0pfSxWVmx4OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBzaGFyZWQ9X193ZWJwYWNrX3JlcXVpcmVfXygiMjlzLyIpKCJrZXlzIiksdWlkPV9fd2VicGFja19yZXF1aXJlX18oIllxQWMiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihrZXkpe3JldHVybiBzaGFyZWRba2V5XXx8KHNoYXJlZFtrZXldPXVpZChrZXkpKX19LFZjbHE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBtb250aHNTaG9ydERvdD0iZW5lLl9mZWIuX21hci5fYWJyLl9tYXkuX2p1bi5fanVsLl9hZ28uX3NlcC5fb2N0Ll9ub3YuX2RpYy4iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ9ImVuZV9mZWJfbWFyX2Ficl9tYXlfanVuX2p1bF9hZ29fc2VwX29jdF9ub3ZfZGljIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlPVsvXmVuZS9pLC9eZmViL2ksL15tYXIvaSwvXmFici9pLC9ebWF5L2ksL15qdW4vaSwvXmp1bC9pLC9eYWdvL2ksL15zZXAvaSwvXm9jdC9pLC9ebm92L2ksL15kaWMvaV0sbW9udGhzUmVnZXg9L14oZW5lcm98ZmVicmVyb3xtYXJ6b3xhYnJpbHxtYXlvfGp1bmlvfGp1bGlvfGFnb3N0b3xzZXB0aWVtYnJlfG9jdHVicmV8bm92aWVtYnJlfGRpY2llbWJyZXxlbmVcLj98ZmViXC4/fG1hclwuP3xhYnJcLj98bWF5XC4/fGp1blwuP3xqdWxcLj98YWdvXC4/fHNlcFwuP3xvY3RcLj98bm92XC4/fGRpY1wuPykvaTttb21lbnQuZGVmaW5lTG9jYWxlKCJlcy11cyIse21vbnRoczoiZW5lcm9fZmVicmVyb19tYXJ6b19hYnJpbF9tYXlvX2p1bmlvX2p1bGlvX2Fnb3N0b19zZXB0aWVtYnJlX29jdHVicmVfbm92aWVtYnJlX2RpY2llbWJyZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDpmdW5jdGlvbihtLGZvcm1hdCl7cmV0dXJuIG0/Ly1NTU0tLy50ZXN0KGZvcm1hdCk/bW9udGhzU2hvcnRbbS5tb250aCgpXTptb250aHNTaG9ydERvdFttLm1vbnRoKCldOm1vbnRoc1Nob3J0RG90fSxtb250aHNSZWdleDptb250aHNSZWdleCxtb250aHNTaG9ydFJlZ2V4Om1vbnRoc1JlZ2V4LG1vbnRoc1N0cmljdFJlZ2V4Oi9eKGVuZXJvfGZlYnJlcm98bWFyem98YWJyaWx8bWF5b3xqdW5pb3xqdWxpb3xhZ29zdG98c2VwdGllbWJyZXxvY3R1YnJlfG5vdmllbWJyZXxkaWNpZW1icmUpL2ksbW9udGhzU2hvcnRTdHJpY3RSZWdleDovXihlbmVcLj98ZmViXC4/fG1hclwuP3xhYnJcLj98bWF5XC4/fGp1blwuP3xqdWxcLj98YWdvXC4/fHNlcFwuP3xvY3RcLj98bm92XC4/fGRpY1wuPykvaSxtb250aHNQYXJzZTptb250aHNQYXJzZSxsb25nTW9udGhzUGFyc2U6bW9udGhzUGFyc2Usc2hvcnRNb250aHNQYXJzZTptb250aHNQYXJzZSx3ZWVrZGF5czoiZG9taW5nb19sdW5lc19tYXJ0ZXNfbWnDqXJjb2xlc19qdWV2ZXNfdmllcm5lc19zw6FiYWRvIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImRvbS5fbHVuLl9tYXIuX21pw6kuX2p1ZS5fdmllLl9zw6FiLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiZG9fbHVfbWFfbWlfanVfdmlfc8OhIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6Img6bW0gQSIsTFRTOiJoOm1tOnNzIEEiLEw6Ik1NL0REL1lZWVkiLExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkiLExMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIGg6bW0gQSJ9LGNhbGVuZGFyOntzYW1lRGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltob3kgYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LG5leHREYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW21hw7FhbmEgYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LG5leHRXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuImRkZGQgW2EgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxsYXN0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltheWVyIGEgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiJbZWxdIGRkZGQgW3Bhc2FkbyBhIGxhIisoMSE9PXRoaXMuaG91cnMoKT8icyI6IiIpKyJdIExUIn0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZW4gJXMiLHBhc3Q6ImhhY2UgJXMiLHM6InVub3Mgc2VndW5kb3MiLHNzOiIlZCBzZWd1bmRvcyIsbToidW4gbWludXRvIixtbToiJWQgbWludXRvcyIsaDoidW5hIGhvcmEiLGhoOiIlZCBob3JhcyIsZDoidW4gZMOtYSIsZGQ6IiVkIGTDrWFzIixNOiJ1biBtZXMiLE1NOiIlZCBtZXNlcyIseToidW4gYcOxbyIseXk6IiVkIGHDsW9zIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6Iix3ZWVrOntkb3c6MCxkb3k6Nn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sVmQzSDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGFGdW5jdGlvbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCIyT2lGIiksdG9PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiUy9qLyIpLGZhaWxzPV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKSwkc29ydD1bXS5zb3J0LHRlc3Q9WzEsMiwzXTskZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqKGZhaWxzKGZ1bmN0aW9uKCl7dGVzdC5zb3J0KHZvaWQgMCl9KXx8IWZhaWxzKGZ1bmN0aW9uKCl7dGVzdC5zb3J0KG51bGwpfSl8fCFfX3dlYnBhY2tfcmVxdWlyZV9fKCJMeUU4IikoJHNvcnQpKSwiQXJyYXkiLHtzb3J0OmZ1bmN0aW9uKGNvbXBhcmVmbil7cmV0dXJuIHZvaWQgMD09PWNvbXBhcmVmbj8kc29ydC5jYWxsKHRvT2JqZWN0KHRoaXMpKTokc29ydC5jYWxsKHRvT2JqZWN0KHRoaXMpLGFGdW5jdGlvbihjb21wYXJlZm4pKX19KX0sVnBVTzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksdG9BYnNvbHV0ZUluZGV4PV9fd2VicGFja19yZXF1aXJlX18oImQvR2MiKSxmcm9tQ2hhckNvZGU9U3RyaW5nLmZyb21DaGFyQ29kZSwkZnJvbUNvZGVQb2ludD1TdHJpbmcuZnJvbUNvZGVQb2ludDskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqKCEhJGZyb21Db2RlUG9pbnQmJjEhPSRmcm9tQ29kZVBvaW50Lmxlbmd0aCksIlN0cmluZyIse2Zyb21Db2RlUG9pbnQ6ZnVuY3Rpb24oeCl7Zm9yKHZhciBjb2RlLHJlcz1bXSxhTGVuPWFyZ3VtZW50cy5sZW5ndGgsaT0wO2k8YUxlbjspe2lmKGNvZGU9K2FyZ3VtZW50c1tpKytdLHRvQWJzb2x1dGVJbmRleChjb2RlLDExMTQxMTEpIT09Y29kZSl0aHJvdyBSYW5nZUVycm9yKGNvZGUrIiBpcyBub3QgYSB2YWxpZCBjb2RlIHBvaW50Iik7cmVzLnB1c2goY29kZTw2NTUzNj9mcm9tQ2hhckNvZGUoY29kZSk6ZnJvbUNoYXJDb2RlKDU1Mjk2KygoY29kZS09NjU1MzYpPj4xMCksY29kZSUxMDI0KzU2MzIwKSl9cmV0dXJuIHJlcy5qb2luKCIiKX19KX0sVzA3MDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgdG9JT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIk5zTy8iKSx0b0xlbmd0aD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ0RWVqIiksdG9BYnNvbHV0ZUluZGV4PV9fd2VicGFja19yZXF1aXJlX18oIkQ4a1kiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihJU19JTkNMVURFUyl7cmV0dXJuIGZ1bmN0aW9uKCR0aGlzLGVsLGZyb21JbmRleCl7dmFyIHZhbHVlLE89dG9JT2JqZWN0KCR0aGlzKSxsZW5ndGg9dG9MZW5ndGgoTy5sZW5ndGgpLGluZGV4PXRvQWJzb2x1dGVJbmRleChmcm9tSW5kZXgsbGVuZ3RoKTtpZihJU19JTkNMVURFUyYmZWwhPWVsKXtmb3IoO2luZGV4PGxlbmd0aDspaWYoKHZhbHVlPU9baW5kZXgrK10pIT12YWx1ZSlyZXR1cm4hMH1lbHNlIGZvcig7aW5kZXg8bGVuZ3RoO2luZGV4KyspaWYoKElTX0lOQ0xVREVTfHxpbmRleCBpbiBPKSYmT1tpbmRleF09PT1lbClyZXR1cm4gSVNfSU5DTFVERVN8fGluZGV4fHwwO3JldHVybiFJU19JTkNMVURFUyYmLTF9fX0sV0VwazpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7dmFyIGNvcmU9bW9kdWxlLmV4cG9ydHM9e3ZlcnNpb246IjIuNi41In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9Y29yZSl9LFdMTDQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TKyRleHBvcnQuRiohX193ZWJwYWNrX3JlcXVpcmVfXygibmg0ZyIpLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0aWVzOl9fd2VicGFja19yZXF1aXJlX18oIkZKVzUiKX0pfSwiV1gvVSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGRlbGF5LG5vVHJhaWxpbmcsY2FsbGJhY2ssZGVib3VuY2VNb2RlKXt2YXIgdGltZW91dElELGxhc3RFeGVjPTA7cmV0dXJuImJvb2xlYW4iIT10eXBlb2Ygbm9UcmFpbGluZyYmKGRlYm91bmNlTW9kZT1jYWxsYmFjayxjYWxsYmFjaz1ub1RyYWlsaW5nLG5vVHJhaWxpbmc9dm9pZCAwKSxmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXMsZWxhcHNlZD1OdW1iZXIobmV3IERhdGUpLWxhc3RFeGVjLGFyZ3M9YXJndW1lbnRzO2Z1bmN0aW9uIGV4ZWMoKXtsYXN0RXhlYz1OdW1iZXIobmV3IERhdGUpLGNhbGxiYWNrLmFwcGx5KHNlbGYsYXJncyl9ZGVib3VuY2VNb2RlJiYhdGltZW91dElEJiZleGVjKCksdGltZW91dElEJiZjbGVhclRpbWVvdXQodGltZW91dElEKSx2b2lkIDA9PT1kZWJvdW5jZU1vZGUmJmRlbGF5PGVsYXBzZWQ/ZXhlYygpOiEwIT09bm9UcmFpbGluZyYmKHRpbWVvdXRJRD1zZXRUaW1lb3V0KGRlYm91bmNlTW9kZT9mdW5jdGlvbigpe3RpbWVvdXRJRD12b2lkIDB9OmV4ZWMsdm9pZCAwPT09ZGVib3VuY2VNb2RlP2RlbGF5LWVsYXBzZWQ6ZGVsYXkpKX19fSxXWXJqOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgbW9udGhzPVsi3pberN6C3qreh96m3oPeqSIsIt6K3qzehN6w3oPeqt6H3qbeg96pIiwi3onep96D3qjel96qIiwi3oferd6V3rDeg96p3o3eqiIsIt6J3q0iLCLelt6r3oLesCIsIt6W3qrejd6m3ofeqCIsIt6H3q/ejt6m3pDesN6T3qoiLCLekN6s3pXesN6T3qzeid6w3oTept6D3qoiLCLeh96u3obesN6T3q/ehN6m3oPeqiIsIt6C3q7eiN6s3onesN6E3qbeg96qIiwi3pHeqN6Q3qzeid6w3oTept6D3qoiXSx3ZWVrZGF5cz1bIt6H3qfei96o3ofesN6M3qYiLCLegN6v3onepiIsIt6H3qbegt6w3o7ep96D3qYiLCLehN6q3ovepiIsIt6E3qreg96n3pDesN6K3qbejN6oIiwi3oDeqt6G3qreg96qIiwi3oDert6C3qjegN6o3oPeqiJdO21vbWVudC5kZWZpbmVMb2NhbGUoImR2Iix7bW9udGhzOm1vbnRocyxtb250aHNTaG9ydDptb250aHMsd2Vla2RheXM6d2Vla2RheXMsd2Vla2RheXNTaG9ydDp3ZWVrZGF5cyx3ZWVrZGF5c01pbjoi3ofep96L3qhf3oDer96J3qZf3ofept6C3rBf3oTeqt6L3qZf3oTeqt6D3qdf3oDeqt6G3qpf3oDert6C3qgiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiRC9NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L96J3oZ83oneii8saXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuIt6J3ooiPT09aW5wdXR9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDEyPyLeid6GIjoi3oneiiJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb3oneqN6H3qbei96qXSBMVCIsbmV4dERheToiW96J3qfei96m3onep10gTFQiLG5leHRXZWVrOiJkZGRkIExUIixsYXN0RGF5OiJb3ofeqN6H3rDelN6sXSBMVCIsbGFzdFdlZWs6Ilveit6n3ofeqN6M3qreiN6oXSBkZGRkIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLejN6s3oPerd6O3qbeh96oICVzIixwYXN0OiLeht6q3oPeqN6C3rAgJXMiLHM6It6Q3qjeht6q3oLesN6M3qreht6u3oXerN6H3rAiLHNzOiJkJSDekN6o3obeqt6C3rDejN6qIixtOiLeid6o3oLeqN6T3qzeh96wIixtbToi3oneqN6C3qjek96qICVkIixoOiLejt6m3pHeqN6H3qjeg96s3ofesCIsaGg6It6O3qbekd6o3ofeqN6D3qogJWQiLGQ6It6L3qreiN6m3oDerN6H3rAiLGRkOiLei96q3ojept6Q3rAgJWQiLE06It6J3qbegN6s3ofesCIsTU06It6J3qbekN6wICVkIix5OiLeh96m3oDept6D3qzeh96wIix5eToi3ofept6A3qbeg96qICVkIn0scHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL9iML2csIiwiKX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvLC9nLCLYjCIpfSx3ZWVrOntkb3c6Nyxkb3k6MTJ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LFd4Umw6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciB3ZWVrRW5kaW5ncz0idmFzw6FybmFwIGjDqXRmxZFuIGtlZGRlbiBzemVyZMOhbiBjc8O8dMO2cnTDtmvDtm4gcMOpbnRla2VuIHN6b21iYXRvbiIuc3BsaXQoIiAiKTtmdW5jdGlvbiB0cmFuc2xhdGUobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5LGlzRnV0dXJlKXt2YXIgbnVtPW51bWJlcjtzd2l0Y2goa2V5KXtjYXNlInMiOnJldHVybiBpc0Z1dHVyZXx8d2l0aG91dFN1ZmZpeD8ibsOpaMOhbnkgbcOhc29kcGVyYyI6Im7DqWjDoW55IG3DoXNvZHBlcmNlIjtjYXNlInNzIjpyZXR1cm4gbnVtKyhpc0Z1dHVyZXx8d2l0aG91dFN1ZmZpeCk/IiBtw6Fzb2RwZXJjIjoiIG3DoXNvZHBlcmNlIjtjYXNlIm0iOnJldHVybiJlZ3kiKyhpc0Z1dHVyZXx8d2l0aG91dFN1ZmZpeD8iIHBlcmMiOiIgcGVyY2UiKTtjYXNlIm1tIjpyZXR1cm4gbnVtKyhpc0Z1dHVyZXx8d2l0aG91dFN1ZmZpeD8iIHBlcmMiOiIgcGVyY2UiKTtjYXNlImgiOnJldHVybiJlZ3kiKyhpc0Z1dHVyZXx8d2l0aG91dFN1ZmZpeD8iIMOzcmEiOiIgw7Nyw6FqYSIpO2Nhc2UiaGgiOnJldHVybiBudW0rKGlzRnV0dXJlfHx3aXRob3V0U3VmZml4PyIgw7NyYSI6IiDDs3LDoWphIik7Y2FzZSJkIjpyZXR1cm4iZWd5IisoaXNGdXR1cmV8fHdpdGhvdXRTdWZmaXg/IiBuYXAiOiIgbmFwamEiKTtjYXNlImRkIjpyZXR1cm4gbnVtKyhpc0Z1dHVyZXx8d2l0aG91dFN1ZmZpeD8iIG5hcCI6IiBuYXBqYSIpO2Nhc2UiTSI6cmV0dXJuImVneSIrKGlzRnV0dXJlfHx3aXRob3V0U3VmZml4PyIgaMOzbmFwIjoiIGjDs25hcGphIik7Y2FzZSJNTSI6cmV0dXJuIG51bSsoaXNGdXR1cmV8fHdpdGhvdXRTdWZmaXg/IiBow7NuYXAiOiIgaMOzbmFwamEiKTtjYXNlInkiOnJldHVybiJlZ3kiKyhpc0Z1dHVyZXx8d2l0aG91dFN1ZmZpeD8iIMOpdiI6IiDDqXZlIik7Y2FzZSJ5eSI6cmV0dXJuIG51bSsoaXNGdXR1cmV8fHdpdGhvdXRTdWZmaXg/IiDDqXYiOiIgw6l2ZSIpfXJldHVybiIifWZ1bmN0aW9uIHdlZWsoaXNGdXR1cmUpe3JldHVybihpc0Z1dHVyZT8iIjoiW23Dumx0XSAiKSsiWyIrd2Vla0VuZGluZ3NbdGhpcy5kYXkoKV0rIl0gTFRbLWtvcl0ifW1vbWVudC5kZWZpbmVMb2NhbGUoImh1Iix7bW9udGhzOiJqYW51w6FyX2ZlYnJ1w6FyX23DoXJjaXVzX8OhcHJpbGlzX23DoWp1c19qw7puaXVzX2rDumxpdXNfYXVndXN6dHVzX3N6ZXB0ZW1iZXJfb2t0w7NiZXJfbm92ZW1iZXJfZGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbcOhcmNfw6Fwcl9tw6FqX2rDum5fasO6bF9hdWdfc3plcHRfb2t0X25vdl9kZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6InZhc8Ohcm5hcF9ow6l0ZsWRX2tlZGRfc3plcmRhX2Nzw7x0w7ZydMO2a19ww6ludGVrX3N6b21iYXQiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoidmFzX2jDqXRfa2VkZF9zemVfY3PDvHRfcMOpbl9zem8iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46InZfaF9rX3N6ZV9jc19wX3N6byIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiWVlZWS5NTS5ERC4iLExMOiJZWVlZLiBNTU1NIEQuIixMTEw6IllZWVkuIE1NTU0gRC4gSDptbSIsTExMTDoiWVlZWS4gTU1NTSBELiwgZGRkZCBIOm1tIn0sbWVyaWRpZW1QYXJzZTovZGV8ZHUvaSxpc1BNOmZ1bmN0aW9uKGlucHV0KXtyZXR1cm4idSI9PT1pbnB1dC5jaGFyQXQoMSkudG9Mb3dlckNhc2UoKX0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cnMsbWludXRlcyxpc0xvd2VyKXtyZXR1cm4gaG91cnM8MTI/ITA9PT1pc0xvd2VyPyJkZSI6IkRFIjohMD09PWlzTG93ZXI/ImR1IjoiRFUifSxjYWxlbmRhcjp7c2FtZURheToiW21hXSBMVFsta29yXSIsbmV4dERheToiW2hvbG5hcF0gTFRbLWtvcl0iLG5leHRXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIHdlZWsuY2FsbCh0aGlzLCEwKX0sbGFzdERheToiW3RlZ25hcF0gTFRbLWtvcl0iLGxhc3RXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIHdlZWsuY2FsbCh0aGlzLCExKX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgbcO6bHZhIixwYXN0OiIlcyIsczp0cmFuc2xhdGUsc3M6dHJhbnNsYXRlLG06dHJhbnNsYXRlLG1tOnRyYW5zbGF0ZSxoOnRyYW5zbGF0ZSxoaDp0cmFuc2xhdGUsZDp0cmFuc2xhdGUsZGQ6dHJhbnNsYXRlLE06dHJhbnNsYXRlLE1NOnRyYW5zbGF0ZSx5OnRyYW5zbGF0ZSx5eTp0cmFuc2xhdGV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sWDcwOTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgic3YiLHttb250aHM6ImphbnVhcmlfZmVicnVhcmlfbWFyc19hcHJpbF9tYWpfanVuaV9qdWxpX2F1Z3VzdGlfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbWFyX2Fwcl9tYWpfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJzw7ZuZGFnX23DpW5kYWdfdGlzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7ZyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InPDtm5fbcOlbl90aXNfb25zX3Rvcl9mcmVfbMO2ciIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoic8O2X23DpV90aV9vbl90b19mcl9sw7YiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIFtrbC5dIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIFtrbC5dIEhIOm1tIixsbGw6IkQgTU1NIFlZWVkgSEg6bW0iLGxsbGw6ImRkZCBEIE1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltJZGFnXSBMVCIsbmV4dERheToiW0ltb3Jnb25dIExUIixsYXN0RGF5OiJbSWfDpXJdIExUIixuZXh0V2VlazoiW1DDpV0gZGRkZCBMVCIsbGFzdFdlZWs6IltJXSBkZGRkW3NdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJvbSAlcyIscGFzdDoiZsO2ciAlcyBzZWRhbiIsczoibsOlZ3JhIHNla3VuZGVyIixzczoiJWQgc2VrdW5kZXIiLG06ImVuIG1pbnV0IixtbToiJWQgbWludXRlciIsaDoiZW4gdGltbWUiLGhoOiIlZCB0aW1tYXIiLGQ6ImVuIGRhZyIsZGQ6IiVkIGRhZ2FyIixNOiJlbiBtw6VuYWQiLE1NOiIlZCBtw6VuYWRlciIseToiZXR0IMOlciIseXk6IiVkIMOlciJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0oZXxhKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3ZhciBiPW51bWJlciUxMCxvdXRwdXQ9MT09fn4obnVtYmVyJTEwMC8xMCk/ImUiOjE9PT1iPyJhIjoyPT09Yj8iYSI6ImUiO3JldHVybiBudW1iZXIrb3V0cHV0fSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sWERwZzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiemgtY24iLHttb250aHM6IuS4gOaciF/kuozmnIhf5LiJ5pyIX+Wbm+aciF/kupTmnIhf5YWt5pyIX+S4g+aciF/lhavmnIhf5Lmd5pyIX+WNgeaciF/ljYHkuIDmnIhf5Y2B5LqM5pyIIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiIx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi5pif5pyf5pelX+aYn+acn+S4gF/mmJ/mnJ/kuoxf5pif5pyf5LiJX+aYn+acn+Wbm1/mmJ/mnJ/kupRf5pif5pyf5YWtIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuWRqOaXpV/lkajkuIBf5ZGo5LqMX+WRqOS4iV/lkajlm5tf5ZGo5LqUX+WRqOWFrSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi5pelX+S4gF/kuoxf5LiJX+Wbm1/kupRf5YWtIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IllZWVkvTU0vREQiLExMOiJZWVlZ5bm0TeaciETml6UiLExMTDoiWVlZWeW5tE3mnIhE5pelQWjngrltbeWIhiIsTExMTDoiWVlZWeW5tE3mnIhE5pelZGRkZEFo54K5bW3liIYiLGw6IllZWVkvTS9EIixsbDoiWVlZWeW5tE3mnIhE5pelIixsbGw6IllZWVnlubRN5pyIROaXpSBISDptbSIsbGxsbDoiWVlZWeW5tE3mnIhE5pelZGRkZCBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L+WHjOaZqHzml6nkuIp85LiK5Y2IfOS4reWNiHzkuIvljYh85pma5LiKLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksIuWHjOaZqCI9PT1tZXJpZGllbXx8IuaXqeS4iiI9PT1tZXJpZGllbXx8IuS4iuWNiCI9PT1tZXJpZGllbT9ob3VyOiLkuIvljYgiPT09bWVyaWRpZW18fCLmmZrkuIoiPT09bWVyaWRpZW0/aG91cisxMjoxMTw9aG91cj9ob3VyOmhvdXIrMTJ9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3ZhciBobT0xMDAqaG91cittaW51dGU7cmV0dXJuIGhtPDYwMD8i5YeM5pmoIjpobTw5MDA/IuaXqeS4iiI6aG08MTEzMD8i5LiK5Y2IIjpobTwxMjMwPyLkuK3ljYgiOmhtPDE4MDA/IuS4i+WNiCI6IuaZmuS4iiJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb5LuK5aSpXUxUIixuZXh0RGF5OiJb5piO5aSpXUxUIixuZXh0V2VlazoiW+S4i11kZGRkTFQiLGxhc3REYXk6IlvmmKjlpKldTFQiLGxhc3RXZWVrOiJb5LiKXWRkZGRMVCIsc2FtZUVsc2U6IkwifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KOaXpXzmnIh85ZGoKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIscGVyaW9kKXtzd2l0Y2gocGVyaW9kKXtjYXNlImQiOmNhc2UiRCI6Y2FzZSJEREQiOnJldHVybiBudW1iZXIrIuaXpSI7Y2FzZSJNIjpyZXR1cm4gbnVtYmVyKyLmnIgiO2Nhc2UidyI6Y2FzZSJXIjpyZXR1cm4gbnVtYmVyKyLlkagiO2RlZmF1bHQ6cmV0dXJuIG51bWJlcn19LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlc+WGhSIscGFzdDoiJXPliY0iLHM6IuWHoOenkiIsc3M6IiVkIOenkiIsbToiMSDliIbpkp8iLG1tOiIlZCDliIbpkp8iLGg6IjEg5bCP5pe2IixoaDoiJWQg5bCP5pe2IixkOiIxIOWkqSIsZGQ6IiVkIOWkqSIsTToiMSDkuKrmnIgiLE1NOiIlZCDkuKrmnIgiLHk6IjEg5bm0Iix5eToiJWQg5bm0In0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LCJYSlUvIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaGlkZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJOZWdNIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24odGFyZ2V0LHNyYyxzYWZlKXtmb3IodmFyIGtleSBpbiBzcmMpc2FmZSYmdGFyZ2V0W2tleV0/dGFyZ2V0W2tleV09c3JjW2tleV06aGlkZSh0YXJnZXQsa2V5LHNyY1trZXldKTtyZXR1cm4gdGFyZ2V0fX0sWEtGVTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKSxjb3JlPV9fd2VicGFja19yZXF1aXJlX18oImczZzUiKSxoaWRlPV9fd2VicGFja19yZXF1aXJlX18oIk11a2IiKSxyZWRlZmluZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLcm9KIiksY3R4PV9fd2VicGFja19yZXF1aXJlX18oIm0wUHAiKSwkZXhwb3J0PWZ1bmN0aW9uKHR5cGUsbmFtZSxzb3VyY2Upe3ZhciBrZXksb3duLG91dCxleHAsSVNfRk9SQ0VEPXR5cGUmJGV4cG9ydC5GLElTX0dMT0JBTD10eXBlJiRleHBvcnQuRyxJU19TVEFUSUM9dHlwZSYkZXhwb3J0LlMsSVNfUFJPVE89dHlwZSYkZXhwb3J0LlAsSVNfQklORD10eXBlJiRleHBvcnQuQix0YXJnZXQ9SVNfR0xPQkFMP2dsb2JhbDpJU19TVEFUSUM/Z2xvYmFsW25hbWVdfHwoZ2xvYmFsW25hbWVdPXt9KTooZ2xvYmFsW25hbWVdfHx7fSkucHJvdG90eXBlLGV4cG9ydHM9SVNfR0xPQkFMP2NvcmU6Y29yZVtuYW1lXXx8KGNvcmVbbmFtZV09e30pLGV4cFByb3RvPWV4cG9ydHMucHJvdG90eXBlfHwoZXhwb3J0cy5wcm90b3R5cGU9e30pO2ZvcihrZXkgaW4gSVNfR0xPQkFMJiYoc291cmNlPW5hbWUpLHNvdXJjZSlvdXQ9KChvd249IUlTX0ZPUkNFRCYmdGFyZ2V0JiZ2b2lkIDAhPT10YXJnZXRba2V5XSk/dGFyZ2V0OnNvdXJjZSlba2V5XSxleHA9SVNfQklORCYmb3duP2N0eChvdXQsZ2xvYmFsKTpJU19QUk9UTyYmImZ1bmN0aW9uIj09dHlwZW9mIG91dD9jdHgoRnVuY3Rpb24uY2FsbCxvdXQpOm91dCx0YXJnZXQmJnJlZGVmaW5lKHRhcmdldCxrZXksb3V0LHR5cGUmJGV4cG9ydC5VKSxleHBvcnRzW2tleV0hPW91dCYmaGlkZShleHBvcnRzLGtleSxleHApLElTX1BST1RPJiZleHBQcm90b1trZXldIT1vdXQmJihleHBQcm90b1trZXldPW91dCl9O2dsb2JhbC5jb3JlPWNvcmUsJGV4cG9ydC5GPTEsJGV4cG9ydC5HPTIsJGV4cG9ydC5TPTQsJGV4cG9ydC5QPTgsJGV4cG9ydC5CPTE2LCRleHBvcnQuVz0zMiwkZXhwb3J0LlU9NjQsJGV4cG9ydC5SPTEyOCxtb2R1bGUuZXhwb3J0cz0kZXhwb3J0fSxYTHZOOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJ0ZSIse21vbnRoczoi4LCc4LCo4LC14LCw4LC/X+Cwq+Cwv+CwrOCxjeCwsOCwteCwsOCwv1/gsK7gsL7gsLDgsY3gsJrgsL9f4LCP4LCq4LGN4LCw4LC/4LCy4LGNX+CwruCxh1/gsJzgsYLgsKjgsY1f4LCc4LGB4LCy4LGIX+CwhuCwl+CwuOCxjeCwn+CxgV/gsLjgsYbgsKrgsY3gsJ/gsYbgsILgsKzgsLDgsY1f4LCF4LCV4LGN4LCf4LGL4LCs4LCw4LGNX+CwqOCwteCwguCwrOCwsOCxjV/gsKHgsL/gsLjgsYbgsILgsKzgsLDgsY0iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IuCwnOCwqC5f4LCr4LC/4LCs4LGN4LCwLl/gsK7gsL7gsLDgsY3gsJrgsL9f4LCP4LCq4LGN4LCw4LC/Ll/gsK7gsYdf4LCc4LGC4LCo4LGNX+CwnOCxgeCwsuCxiF/gsIbgsJcuX+CwuOCxhuCwquCxjS5f4LCF4LCV4LGN4LCf4LGLLl/gsKjgsLUuX+CwoeCwv+CwuOCxhi4iLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoi4LCG4LCm4LC/4LC14LC+4LCw4LCCX+CwuOCxi+CwruCwteCwvuCwsOCwgl/gsK7gsILgsJfgsLPgsLXgsL7gsLDgsIJf4LCs4LGB4LCn4LC14LC+4LCw4LCCX+Cwl+CxgeCwsOCxgeCwteCwvuCwsOCwgl/gsLbgsYHgsJXgsY3gsLDgsLXgsL7gsLDgsIJf4LC24LCo4LC/4LC14LC+4LCw4LCCIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCwhuCwpuCwv1/gsLjgsYvgsK5f4LCu4LCC4LCX4LCzX+CwrOCxgeCwp1/gsJfgsYHgsLDgsYFf4LC24LGB4LCV4LGN4LCwX+CwtuCwqOCwvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4LCGX+CwuOCxi1/gsK7gsIJf4LCs4LGBX+Cwl+CxgV/gsLbgsYFf4LC2Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIixMVFM6IkEgaDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+CwqOCxh+CwoeCxgV0gTFQiLG5leHREYXk6IlvgsLDgsYfgsKrgsYFdIExUIixuZXh0V2VlazoiZGRkZCwgTFQiLGxhc3REYXk6IlvgsKjgsL/gsKjgsY3gsKhdIExUIixsYXN0V2VlazoiW+Cwl+CwpF0gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIOCwsuCxiyIscGFzdDoiJXMg4LCV4LGN4LCw4LC/4LCk4LCCIixzOiLgsJXgsYrgsKjgsY3gsKjgsL8g4LCV4LGN4LC34LCj4LC+4LCy4LGBIixzczoiJWQg4LC44LGG4LCV4LCo4LGN4LCy4LGBIixtOiLgsJLgsJUg4LCo4LC/4LCu4LC/4LC34LCCIixtbToiJWQg4LCo4LC/4LCu4LC/4LC34LC+4LCy4LGBIixoOiLgsJLgsJUg4LCX4LCC4LCfIixoaDoiJWQg4LCX4LCC4LCf4LCy4LGBIixkOiLgsJLgsJUg4LCw4LGL4LCc4LGBIixkZDoiJWQg4LCw4LGL4LCc4LGB4LCy4LGBIixNOiLgsJLgsJUg4LCo4LGG4LCyIixNTToiJWQg4LCo4LGG4LCy4LCy4LGBIix5OiLgsJLgsJUg4LC44LCC4LC14LCk4LGN4LC44LCw4LCCIix5eToiJWQg4LC44LCC4LC14LCk4LGN4LC44LCw4LC+4LCy4LGBIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfeCwtS8sb3JkaW5hbDoiJWTgsLUiLG1lcmlkaWVtUGFyc2U6L+CwsOCwvuCwpOCxjeCwsOCwv3zgsIngsKbgsK/gsIJ84LCu4LCn4LGN4LCv4LC+4LC54LGN4LCo4LCCfOCwuOCwvuCwr+CwguCwpOCxjeCwsOCwgi8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKGhvdXIsbWVyaWRpZW0pe3JldHVybiAxMj09PWhvdXImJihob3VyPTApLCLgsLDgsL7gsKTgsY3gsLDgsL8iPT09bWVyaWRpZW0/aG91cjw0P2hvdXI6aG91cisxMjoi4LCJ4LCm4LCv4LCCIj09PW1lcmlkaWVtP2hvdXI6IuCwruCwp+CxjeCwr+CwvuCwueCxjeCwqOCwgiI9PT1tZXJpZGllbT8xMDw9aG91cj9ob3VyOmhvdXIrMTI6IuCwuOCwvuCwr+CwguCwpOCxjeCwsOCwgiI9PT1tZXJpZGllbT9ob3VyKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7cmV0dXJuIGhvdXI8ND8i4LCw4LC+4LCk4LGN4LCw4LC/Ijpob3VyPDEwPyLgsIngsKbgsK/gsIIiOmhvdXI8MTc/IuCwruCwp+CxjeCwr+CwvuCwueCxjeCwqOCwgiI6aG91cjwyMD8i4LC44LC+4LCv4LCC4LCk4LGN4LCw4LCCIjoi4LCw4LC+4LCk4LGN4LCw4LC/In0sd2Vlazp7ZG93OjAsZG95OjZ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LFhNVmg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIElURVJBVE9SPV9fd2VicGFja19yZXF1aXJlX18oIksweFUiKSgiaXRlcmF0b3IiKSxTQUZFX0NMT1NJTkc9ITE7dHJ5e3ZhciByaXRlcj1bN11bSVRFUkFUT1JdKCk7cml0ZXIucmV0dXJuPWZ1bmN0aW9uKCl7U0FGRV9DTE9TSU5HPSEwfSxBcnJheS5mcm9tKHJpdGVyLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKGUpe31tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihleGVjLHNraXBDbG9zaW5nKXtpZighc2tpcENsb3NpbmcmJiFTQUZFX0NMT1NJTkcpcmV0dXJuITE7dmFyIHNhZmU9ITE7dHJ5e3ZhciBhcnI9WzddLGl0ZXI9YXJyW0lURVJBVE9SXSgpO2l0ZXIubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOnNhZmU9ITB9fSxhcnJbSVRFUkFUT1JdPWZ1bmN0aW9uKCl7cmV0dXJuIGl0ZXJ9LGV4ZWMoYXJyKX1jYXRjaChlKXt9cmV0dXJuIHNhZmV9fSxYVUNXOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIktPUWIiKSgiV2Vha01hcCIpfSxYWkNwOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIktPUWIiKSgiV2Vha1NldCIpfSxYYnppOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0Iiksc2V0UHJvdG90eXBlT2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiaTVkYyIpLnNldDttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbih0aGF0LHRhcmdldCxDKXt2YXIgUCxTPXRhcmdldC5jb25zdHJ1Y3RvcjtyZXR1cm4gUyE9PUMmJiJmdW5jdGlvbiI9PXR5cGVvZiBTJiYoUD1TLnByb3RvdHlwZSkhPT1DLnByb3RvdHlwZSYmaXNPYmplY3QoUCkmJnNldFByb3RvdHlwZU9mJiZzZXRQcm90b3R5cGVPZih0aGF0LFApLHRoYXR9fSxYZktHOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSwkcGFyc2VGbG9hdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIxMUlaIik7JGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKihOdW1iZXIucGFyc2VGbG9hdCE9JHBhcnNlRmxvYXQpLCJOdW1iZXIiLHtwYXJzZUZsb2F0OiRwYXJzZUZsb2F0fSl9LFhmTzM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkYXQ9X193ZWJwYWNrX3JlcXVpcmVfXygiQXZSRSIpKCEwKTtfX3dlYnBhY2tfcmVxdWlyZV9fKCJBZm56IikoU3RyaW5nLCJTdHJpbmciLGZ1bmN0aW9uKGl0ZXJhdGVkKXt0aGlzLl90PVN0cmluZyhpdGVyYXRlZCksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBwb2ludCxPPXRoaXMuX3QsaW5kZXg9dGhpcy5faTtyZXR1cm4gaW5kZXg+PU8ubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KHBvaW50PSRhdChPLGluZGV4KSx0aGlzLl9pKz1wb2ludC5sZW5ndGgse3ZhbHVlOnBvaW50LGRvbmU6ITF9KX0pfSxYdHI4OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxjb3JlPV9fd2VicGFja19yZXF1aXJlX18oImczZzUiKSxmYWlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oS0VZLGV4ZWMpe3ZhciBmbj0oY29yZS5PYmplY3R8fHt9KVtLRVldfHxPYmplY3RbS0VZXSxleHA9e307ZXhwW0tFWV09ZXhlYyhmbiksJGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKmZhaWxzKGZ1bmN0aW9uKCl7Zm4oMSl9KSwiT2JqZWN0IixleHApfX0sWHh1ejpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGNsYXNzb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiSThhKyIpLGJ1aWx0aW5FeGVjPVJlZ0V4cC5wcm90b3R5cGUuZXhlYzttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihSLFMpe3ZhciBleGVjPVIuZXhlYztpZigiZnVuY3Rpb24iPT10eXBlb2YgZXhlYyl7dmFyIHJlc3VsdD1leGVjLmNhbGwoUixTKTtpZigib2JqZWN0IiE9dHlwZW9mIHJlc3VsdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJSZWdFeHAgZXhlYyBtZXRob2QgcmV0dXJuZWQgc29tZXRoaW5nIG90aGVyIHRoYW4gYW4gT2JqZWN0IG9yIG51bGwiKTtyZXR1cm4gcmVzdWx0fWlmKCJSZWdFeHAiIT09Y2xhc3NvZihSKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJSZWdFeHAjZXhlYyBjYWxsZWQgb24gaW5jb21wYXRpYmxlIHJlY2VpdmVyIik7cmV0dXJuIGJ1aWx0aW5FeGVjLmNhbGwoUixTKX19LFk3WkM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1VDJZIiksY29yZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXRXBrIiksY3R4PV9fd2VicGFja19yZXF1aXJlX18oIjJHVFAiKSxoaWRlPV9fd2VicGFja19yZXF1aXJlX18oIk5lZ00iKSxoYXM9X193ZWJwYWNrX3JlcXVpcmVfXygiQitPVCIpLCRleHBvcnQ9ZnVuY3Rpb24odHlwZSxuYW1lLHNvdXJjZSl7dmFyIGtleSxvd24sb3V0LElTX0ZPUkNFRD10eXBlJiRleHBvcnQuRixJU19HTE9CQUw9dHlwZSYkZXhwb3J0LkcsSVNfU1RBVElDPXR5cGUmJGV4cG9ydC5TLElTX1BST1RPPXR5cGUmJGV4cG9ydC5QLElTX0JJTkQ9dHlwZSYkZXhwb3J0LkIsSVNfV1JBUD10eXBlJiRleHBvcnQuVyxleHBvcnRzPUlTX0dMT0JBTD9jb3JlOmNvcmVbbmFtZV18fChjb3JlW25hbWVdPXt9KSxleHBQcm90bz1leHBvcnRzLnByb3RvdHlwZSx0YXJnZXQ9SVNfR0xPQkFMP2dsb2JhbDpJU19TVEFUSUM/Z2xvYmFsW25hbWVdOihnbG9iYWxbbmFtZV18fHt9KS5wcm90b3R5cGU7Zm9yKGtleSBpbiBJU19HTE9CQUwmJihzb3VyY2U9bmFtZSksc291cmNlKShvd249IUlTX0ZPUkNFRCYmdGFyZ2V0JiZ2b2lkIDAhPT10YXJnZXRba2V5XSkmJmhhcyhleHBvcnRzLGtleSl8fChvdXQ9b3duP3RhcmdldFtrZXldOnNvdXJjZVtrZXldLGV4cG9ydHNba2V5XT1JU19HTE9CQUwmJiJmdW5jdGlvbiIhPXR5cGVvZiB0YXJnZXRba2V5XT9zb3VyY2Vba2V5XTpJU19CSU5EJiZvd24/Y3R4KG91dCxnbG9iYWwpOklTX1dSQVAmJnRhcmdldFtrZXldPT1vdXQ/ZnVuY3Rpb24oQyl7dmFyIEY9ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMgaW5zdGFuY2VvZiBDKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgQztjYXNlIDE6cmV0dXJuIG5ldyBDKGEpO2Nhc2UgMjpyZXR1cm4gbmV3IEMoYSxiKX1yZXR1cm4gbmV3IEMoYSxiLGMpfXJldHVybiBDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIEYucHJvdG90eXBlPUMucHJvdG90eXBlLEZ9KG91dCk6SVNfUFJPVE8mJiJmdW5jdGlvbiI9PXR5cGVvZiBvdXQ/Y3R4KEZ1bmN0aW9uLmNhbGwsb3V0KTpvdXQsSVNfUFJPVE8mJigoZXhwb3J0cy52aXJ0dWFsfHwoZXhwb3J0cy52aXJ0dWFsPXt9KSlba2V5XT1vdXQsdHlwZSYkZXhwb3J0LlImJmV4cFByb3RvJiYhZXhwUHJvdG9ba2V5XSYmaGlkZShleHBQcm90byxrZXksb3V0KSkpfTskZXhwb3J0LkY9MSwkZXhwb3J0Lkc9MiwkZXhwb3J0LlM9NCwkZXhwb3J0LlA9OCwkZXhwb3J0LkI9MTYsJGV4cG9ydC5XPTMyLCRleHBvcnQuVT02NCwkZXhwb3J0LlI9MTI4LG1vZHVsZS5leHBvcnRzPSRleHBvcnR9LFk5bHo6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiN0REZyIpKCJGbG9hdDMyIiw0LGZ1bmN0aW9uKGluaXQpe3JldHVybiBmdW5jdGlvbihkYXRhLGJ5dGVPZmZzZXQsbGVuZ3RoKXtyZXR1cm4gaW5pdCh0aGlzLGRhdGEsYnl0ZU9mZnNldCxsZW5ndGgpfX0pfSxZSlZIOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGV2ZXJ5PV9fd2VicGFja19yZXF1aXJlX18oIkNra1QiKSg0KTskZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqIV9fd2VicGFja19yZXF1aXJlX18oIkx5RTgiKShbXS5ldmVyeSwhMCksIkFycmF5Iix7ZXZlcnk6ZnVuY3Rpb24oY2FsbGJhY2tmbil7cmV0dXJuICRldmVyeSh0aGlzLGNhbGxiYWNrZm4sYXJndW1lbnRzWzFdKX19KX0sWVJleDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgidWctY24iLHttb250aHM6ItmK2KfZhtuL2KfYsV/ZgduQ24vYsdin2YRf2YXYp9ix2Kpf2KbYp9m+2LHbkNmEX9mF2KfZil/YptmJ2Yrbh9mGX9im2YnZituH2YRf2KbYp9uL2Lrbh9iz2Kpf2LPbkNmG2Krbldio2YnYsV/YptuG2YPYqtuV2KjZidixX9mG2YjZitin2KjZidixX9iv25DZg9in2KjZidixIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLZitin2Ybbi9in2LFf2YHbkNuL2LHYp9mEX9mF2KfYsdiqX9im2KfZvtix25DZhF/Zhdin2Ypf2KbZidmK24fZhl/YptmJ2Yrbh9mEX9im2Kfbi9i624fYs9iqX9iz25DZhtiq25XYqNmJ2LFf2KbbhtmD2Krbldio2YnYsV/ZhtmI2YrYp9io2YnYsV/Yr9uQ2YPYp9io2YnYsSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi2YrbldmD2LTbldmG2KjblV/Yr9uI2LTbldmG2KjblV/Ys9uV2YrYtNuV2YbYqNuVX9qG2KfYsdi025XZhtio25Vf2b7bldmK2LTbldmG2KjblV/YrNuI2YXblV/YtNuV2YbYqNuVIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItmK25Vf2K/biF/Ys9uVX9qG2Kdf2b7blV/YrNuIX9i025UiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItmK25Vf2K/biF/Ys9uVX9qG2Kdf2b7blV/YrNuIX9i025UiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IllZWVkt2YrZidmE2YlNLdim2KfZitmG2YnarUQt2YPbiNmG2YkiLExMTDoiWVlZWS3ZitmJ2YTZiU0t2KbYp9mK2YbZidqtRC3Zg9uI2YbZidiMIEhIOm1tIixMTExMOiJkZGRk2IwgWVlZWS3ZitmJ2YTZiU0t2KbYp9mK2YbZidqtRC3Zg9uI2YbZidiMIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov2YrbkNix2YnZhSDZg9uQ2obblXzYs9uV2r7bldixfNqG24jYtNiq2YnZhiDYqNuH2LHbh9mGfNqG24jYtHzahtuI2LTYqtmJ2YYg2YPbkNmK2YnZhnzZg9uV2oYvLG1lcmlkaWVtSG91cjpmdW5jdGlvbihob3VyLG1lcmlkaWVtKXtyZXR1cm4gMTI9PT1ob3VyJiYoaG91cj0wKSwi2YrbkNix2YnZhSDZg9uQ2obblSI9PT1tZXJpZGllbXx8Itiz25XavtuV2LEiPT09bWVyaWRpZW18fCLahtuI2LTYqtmJ2YYg2Kjbh9ix24fZhiI9PT1tZXJpZGllbT9ob3VyOiLahtuI2LTYqtmJ2YYg2YPbkNmK2YnZhiI9PT1tZXJpZGllbXx8ItmD25XahiI9PT1tZXJpZGllbT9ob3VyKzEyOjExPD1ob3VyP2hvdXI6aG91cisxMn0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7dmFyIGhtPTEwMCpob3VyK21pbnV0ZTtyZXR1cm4gaG08NjAwPyLZituQ2LHZidmFINmD25DahtuVIjpobTw5MDA/Itiz25XavtuV2LEiOmhtPDExMzA/ItqG24jYtNiq2YnZhiDYqNuH2LHbh9mGIjpobTwxMjMwPyLahtuI2LQiOmhtPDE4MDA/ItqG24jYtNiq2YnZhiDZg9uQ2YrZidmGIjoi2YPbldqGIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvYqNuI2q/biNmGINiz2KfYptuV2KpdIExUIixuZXh0RGF5OiJb2Kbbldiq25Ug2LPYp9im25XYql0gTFQiLG5leHRXZWVrOiJb2YPbkNmE25XYsdmD2YldIGRkZGQgW9iz2KfYptuV2KpdIExUIixsYXN0RGF5OiJb2KrbhtmG24jar9uI2YZdIExUIixsYXN0V2VlazoiW9im2KfZhNiv2YnZhtmC2YldIGRkZGQgW9iz2KfYptuV2KpdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDZg9uQ2YrZidmGIixwYXN0OiIlcyDYqNuH2LHbh9mGIixzOiLZhtuV2obahtuVINiz25DZg9mI2YbYqiIsc3M6IiVkINiz25DZg9mI2YbYqiIsbToi2KjZidixINmF2YnZhtuH2KoiLG1tOiIlZCDZhdmJ2Ybbh9iqIixoOiLYqNmJ2LEg2LPYp9im25XYqiIsaGg6IiVkINiz2KfYptuV2KoiLGQ6Itio2YnYsSDZg9uI2YYiLGRkOiIlZCDZg9uI2YYiLE06Itio2YnYsSDYptin2YoiLE1NOiIlZCDYptin2YoiLHk6Itio2YnYsSDZitmJ2YQiLHl5OiIlZCDZitmJ2YQifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KC3Zg9uI2YbZiXwt2KbYp9mKfC3avtuV2b7YqtuVKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIscGVyaW9kKXtzd2l0Y2gocGVyaW9kKXtjYXNlImQiOmNhc2UiRCI6Y2FzZSJEREQiOnJldHVybiBudW1iZXIrIi3Zg9uI2YbZiSI7Y2FzZSJ3IjpjYXNlIlciOnJldHVybiBudW1iZXIrIi3avtuV2b7YqtuVIjtkZWZhdWx0OnJldHVybiBudW1iZXJ9fSxwcmVwYXJzZTpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgv2IwvZywiLCIpfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC8sL2csItiMIil9LHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxZVHZBOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBzaGFyZWQ9X193ZWJwYWNrX3JlcXVpcmVfXygiVlRlciIpKCJrZXlzIiksdWlkPV9fd2VicGFja19yZXF1aXJlX18oInlscXMiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihrZXkpe3JldHVybiBzaGFyZWRba2V5XXx8KHNoYXJlZFtrZXldPXVpZChrZXkpKX19LFltcXY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGNvZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMWld0Iik7bW9kdWxlLmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGl0KXtyZXR1cm4iU3RyaW5nIj09Y29mKGl0KT9pdC5zcGxpdCgiIik6T2JqZWN0KGl0KX19LFlxQWM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe3ZhciBpZD0wLHB4PU1hdGgucmFuZG9tKCk7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oa2V5KXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWtleT8iIjprZXksIilfIiwoKytpZCtweCkudG9TdHJpbmcoMzYpKX19LFl1VGk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG1vZHVsZSl7cmV0dXJuIG1vZHVsZS53ZWJwYWNrUG9seWZpbGx8fChtb2R1bGUuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSxtb2R1bGUucGF0aHM9W10sbW9kdWxlLmNoaWxkcmVufHwobW9kdWxlLmNoaWxkcmVuPVtdKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCJsb2FkZWQiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBtb2R1bGUubH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCJpZCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZS5pfX0pLG1vZHVsZS53ZWJwYWNrUG9seWZpbGw9MSksbW9kdWxlfX0sWjJLdTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLCRpbmNsdWRlcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ3MmE1IikoITApOyRleHBvcnQoJGV4cG9ydC5QLCJBcnJheSIse2luY2x1ZGVzOmZ1bmN0aW9uKGVsKXtyZXR1cm4gJGluY2x1ZGVzKHRoaXMsZWwsMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLF9fd2VicGFja19yZXF1aXJlX18oIm5HeXUiKSgiaW5jbHVkZXMiKX0sWjRRTTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIG1vbnRocz1bItis2YbZiNix2YoiLCLZgdmK2KjYsdmI2LHZiiIsItmF2KfYsdqGIiwi2KfZvtix2YrZhCIsItmF2KbZiiIsItis2YjZhiIsItis2YjZhNin2KHZkCIsItii2q/Ys9m9Iiwi2LPZitm+2b3Zhdio2LEiLCLYotqq2b3ZiNio2LEiLCLZhtmI2YXYqNixIiwi2orYs9mF2KjYsSJdLGRheXM9WyLYotqG2LEiLCLYs9mI2YXYsSIsItin2rHYp9ix2YgiLCLYp9ix2KjYuSIsItiu2YXZitizIiwi2KzZhdi5Iiwi2ofZhtqH2LEiXTttb21lbnQuZGVmaW5lTG9jYWxlKCJzZCIse21vbnRoczptb250aHMsbW9udGhzU2hvcnQ6bW9udGhzLHdlZWtkYXlzOmRheXMsd2Vla2RheXNTaG9ydDpkYXlzLHdlZWtkYXlzTWluOmRheXMsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRk2IwgRCBNTU1NIFlZWVkgSEg6bW0ifSxtZXJpZGllbVBhcnNlOi/Ytdio2K182LTYp9mFLyxpc1BNOmZ1bmN0aW9uKGlucHV0KXtyZXR1cm4i2LTYp9mFIj09PWlucHV0fSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjwxMj8i2LXYqNitIjoi2LTYp9mFIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvYp9qEXSBMVCIsbmV4dERheToiW9iz2oDYp9q72YpdIExUIixuZXh0V2VlazoiZGRkZCBb2Kfas9mK2YYg2YfZgdiq2Yog2KrZil0gTFQiLGxhc3REYXk6Ilvaqtin2YTZh9mHXSBMVCIsbGFzdFdlZWs6Ilvar9iy2LHZitmEINmH2YHYqtmKXSBkZGRkIFvYqtmKXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg2b7ZiNihIixwYXN0OiIlcyDYp9qzIixzOiLahtmG2K8g2LPZitqq2YbaiiIsc3M6IiVkINiz2YraqtmG2ooiLG06ItmH2qog2YXZhtm9IixtbToiJWQg2YXZhtm9IixoOiLZh9qqINqq2YTYp9qqIixoaDoiJWQg2qrZhNin2qoiLGQ6ItmH2qog2o/ZitmG2YfZhiIsZGQ6IiVkINqP2YrZhtmH2YYiLE06ItmH2qog2YXZh9mK2YbZiCIsTU06IiVkINmF2YfZitmG2KciLHk6ItmH2qog2LPYp9mEIix5eToiJWQg2LPYp9mEIn0scHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL9iML2csIiwiKX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvLC9nLCLYjCIpfSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sWjZ2RjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgTUVUQT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5bHFzIikoIm1ldGEiKSxpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0IiksaGFzPV9fd2VicGFja19yZXF1aXJlX18oImFhZ3giKSxzZXREZXNjPV9fd2VicGFja19yZXF1aXJlX18oImhzd2EiKS5mLGlkPTAsaXNFeHRlbnNpYmxlPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LEZSRUVaRT0hX193ZWJwYWNrX3JlcXVpcmVfXygiZWVWcSIpKGZ1bmN0aW9uKCl7cmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLHNldE1ldGE9ZnVuY3Rpb24oaXQpe3NldERlc2MoaXQsTUVUQSx7dmFsdWU6e2k6Ik8iKyArK2lkLHc6e319fSl9LG1ldGE9bW9kdWxlLmV4cG9ydHM9e0tFWTpNRVRBLE5FRUQ6ITEsZmFzdEtleTpmdW5jdGlvbihpdCxjcmVhdGUpe2lmKCFpc09iamVjdChpdCkpcmV0dXJuInN5bWJvbCI9PXR5cGVvZiBpdD9pdDooInN0cmluZyI9PXR5cGVvZiBpdD8iUyI6IlAiKStpdDtpZighaGFzKGl0LE1FVEEpKXtpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4iRiI7aWYoIWNyZWF0ZSlyZXR1cm4iRSI7c2V0TWV0YShpdCl9cmV0dXJuIGl0W01FVEFdLml9LGdldFdlYWs6ZnVuY3Rpb24oaXQsY3JlYXRlKXtpZighaGFzKGl0LE1FVEEpKXtpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4hMDtpZighY3JlYXRlKXJldHVybiExO3NldE1ldGEoaXQpfXJldHVybiBpdFtNRVRBXS53fSxvbkZyZWV6ZTpmdW5jdGlvbihpdCl7cmV0dXJuIEZSRUVaRSYmbWV0YS5ORUVEJiZpc0V4dGVuc2libGUoaXQpJiYhaGFzKGl0LE1FVEEpJiZzZXRNZXRhKGl0KSxpdH19fSxaQU1QOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJtcy1teSIse21vbnRoczoiSmFudWFyaV9GZWJydWFyaV9NYWNfQXByaWxfTWVpX0p1bl9KdWxhaV9PZ29zX1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0Rpc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmViX01hY19BcHJfTWVpX0p1bl9KdWxfT2dzX1NlcF9Pa3RfTm92X0RpcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiQWhhZF9Jc25pbl9TZWxhc2FfUmFidV9LaGFtaXNfSnVtYWF0X1NhYnR1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkFoZF9Jc25fU2VsX1JhYl9LaGFfSnVtX1NhYiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiQWhfSXNfU2xfUmJfS21fSm1fU2IiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISC5tbSIsTFRTOiJISC5tbS5zcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0ifSxtZXJpZGllbVBhcnNlOi9wYWdpfHRlbmdhaGFyaXxwZXRhbmd8bWFsYW0vLG1lcmlkaWVtSG91cjpmdW5jdGlvbihob3VyLG1lcmlkaWVtKXtyZXR1cm4gMTI9PT1ob3VyJiYoaG91cj0wKSwicGFnaSI9PT1tZXJpZGllbT9ob3VyOiJ0ZW5nYWhhcmkiPT09bWVyaWRpZW0/MTE8PWhvdXI/aG91cjpob3VyKzEyOiJwZXRhbmciPT09bWVyaWRpZW18fCJtYWxhbSI9PT1tZXJpZGllbT9ob3VyKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cnMsbWludXRlcyxpc0xvd2VyKXtyZXR1cm4gaG91cnM8MTE/InBhZ2kiOmhvdXJzPDE1PyJ0ZW5nYWhhcmkiOmhvdXJzPDE5PyJwZXRhbmciOiJtYWxhbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSGFyaSBpbmkgcHVrdWxdIExUIixuZXh0RGF5OiJbRXNvayBwdWt1bF0gTFQiLG5leHRXZWVrOiJkZGRkIFtwdWt1bF0gTFQiLGxhc3REYXk6IltLZWxtYXJpbiBwdWt1bF0gTFQiLGxhc3RXZWVrOiJkZGRkIFtsZXBhcyBwdWt1bF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImRhbGFtICVzIixwYXN0OiIlcyB5YW5nIGxlcGFzIixzOiJiZWJlcmFwYSBzYWF0IixzczoiJWQgc2FhdCIsbToic2VtaW5pdCIsbW06IiVkIG1pbml0IixoOiJzZWphbSIsaGg6IiVkIGphbSIsZDoic2VoYXJpIixkZDoiJWQgaGFyaSIsTToic2VidWxhbiIsTU06IiVkIGJ1bGFuIix5OiJzZXRhaHVuIix5eToiJWQgdGFodW4ifSx3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sWkQ2NzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHJlZGVmaW5lQWxsPV9fd2VicGFja19yZXF1aXJlX18oIjNMeWoiKSxnZXRXZWFrPV9fd2VicGFja19yZXF1aXJlX18oIlo2dkYiKS5nZXRXZWFrLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSxpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0IiksYW5JbnN0YW5jZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCI5Z1g3IiksZm9yT2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiU2xrWSIpLGNyZWF0ZUFycmF5TWV0aG9kPV9fd2VicGFja19yZXF1aXJlX18oIkNra1QiKSwkaGFzPV9fd2VicGFja19yZXF1aXJlX18oImFhZ3giKSx2YWxpZGF0ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJzNXFZIiksYXJyYXlGaW5kPWNyZWF0ZUFycmF5TWV0aG9kKDUpLGFycmF5RmluZEluZGV4PWNyZWF0ZUFycmF5TWV0aG9kKDYpLGlkPTAsdW5jYXVnaHRGcm96ZW5TdG9yZT1mdW5jdGlvbih0aGF0KXtyZXR1cm4gdGhhdC5fbHx8KHRoYXQuX2w9bmV3IFVuY2F1Z2h0RnJvemVuU3RvcmUpfSxVbmNhdWdodEZyb3plblN0b3JlPWZ1bmN0aW9uKCl7dGhpcy5hPVtdfSxmaW5kVW5jYXVnaHRGcm96ZW49ZnVuY3Rpb24oc3RvcmUsa2V5KXtyZXR1cm4gYXJyYXlGaW5kKHN0b3JlLmEsZnVuY3Rpb24oaXQpe3JldHVybiBpdFswXT09PWtleX0pfTtVbmNhdWdodEZyb3plblN0b3JlLnByb3RvdHlwZT17Z2V0OmZ1bmN0aW9uKGtleSl7dmFyIGVudHJ5PWZpbmRVbmNhdWdodEZyb3plbih0aGlzLGtleSk7aWYoZW50cnkpcmV0dXJuIGVudHJ5WzFdfSxoYXM6ZnVuY3Rpb24oa2V5KXtyZXR1cm4hIWZpbmRVbmNhdWdodEZyb3plbih0aGlzLGtleSl9LHNldDpmdW5jdGlvbihrZXksdmFsdWUpe3ZhciBlbnRyeT1maW5kVW5jYXVnaHRGcm96ZW4odGhpcyxrZXkpO2VudHJ5P2VudHJ5WzFdPXZhbHVlOnRoaXMuYS5wdXNoKFtrZXksdmFsdWVdKX0sZGVsZXRlOmZ1bmN0aW9uKGtleSl7dmFyIGluZGV4PWFycmF5RmluZEluZGV4KHRoaXMuYSxmdW5jdGlvbihpdCl7cmV0dXJuIGl0WzBdPT09a2V5fSk7cmV0dXJufmluZGV4JiZ0aGlzLmEuc3BsaWNlKGluZGV4LDEpLCEhfmluZGV4fX0sbW9kdWxlLmV4cG9ydHM9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHdyYXBwZXIsTkFNRSxJU19NQVAsQURERVIpe3ZhciBDPXdyYXBwZXIoZnVuY3Rpb24odGhhdCxpdGVyYWJsZSl7YW5JbnN0YW5jZSh0aGF0LEMsTkFNRSwiX2kiKSx0aGF0Ll90PU5BTUUsdGhhdC5faT1pZCsrLHRoYXQuX2w9dm9pZCAwLG51bGwhPWl0ZXJhYmxlJiZmb3JPZihpdGVyYWJsZSxJU19NQVAsdGhhdFtBRERFUl0sdGhhdCl9KTtyZXR1cm4gcmVkZWZpbmVBbGwoQy5wcm90b3R5cGUse2RlbGV0ZTpmdW5jdGlvbihrZXkpe2lmKCFpc09iamVjdChrZXkpKXJldHVybiExO3ZhciBkYXRhPWdldFdlYWsoa2V5KTtyZXR1cm4hMD09PWRhdGE/dW5jYXVnaHRGcm96ZW5TdG9yZSh2YWxpZGF0ZSh0aGlzLE5BTUUpKS5kZWxldGUoa2V5KTpkYXRhJiYkaGFzKGRhdGEsdGhpcy5faSkmJmRlbGV0ZSBkYXRhW3RoaXMuX2ldfSxoYXM6ZnVuY3Rpb24oa2V5KXtpZighaXNPYmplY3Qoa2V5KSlyZXR1cm4hMTt2YXIgZGF0YT1nZXRXZWFrKGtleSk7cmV0dXJuITA9PT1kYXRhP3VuY2F1Z2h0RnJvemVuU3RvcmUodmFsaWRhdGUodGhpcyxOQU1FKSkuaGFzKGtleSk6ZGF0YSYmJGhhcyhkYXRhLHRoaXMuX2kpfX0pLEN9LGRlZjpmdW5jdGlvbih0aGF0LGtleSx2YWx1ZSl7dmFyIGRhdGE9Z2V0V2Vhayhhbk9iamVjdChrZXkpLCEwKTtyZXR1cm4hMD09PWRhdGE/dW5jYXVnaHRGcm96ZW5TdG9yZSh0aGF0KS5zZXQoa2V5LHZhbHVlKTpkYXRhW3RoYXQuX2ldPXZhbHVlLHRoYXR9LHVmc3RvcmU6dW5jYXVnaHRGcm96ZW5TdG9yZX19LCJaTlgvIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlMvai8iKSx0b1ByaW1pdGl2ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhcG1UIiksZ2V0UHJvdG90eXBlT2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiT1AzWSIpLGdldE93blByb3BlcnR5RGVzY3JpcHRvcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJFZW1IIikuZjtfX3dlYnBhY2tfcmVxdWlyZV9fKCJuaDRnIikmJiRleHBvcnQoJGV4cG9ydC5QK19fd2VicGFja19yZXF1aXJlX18oInhiU20iKSwiT2JqZWN0Iix7X19sb29rdXBTZXR0ZXJfXzpmdW5jdGlvbihQKXt2YXIgRCxPPXRvT2JqZWN0KHRoaXMpLEs9dG9QcmltaXRpdmUoUCwhMCk7ZG97aWYoRD1nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTyxLKSlyZXR1cm4gRC5zZXR9d2hpbGUoTz1nZXRQcm90b3R5cGVPZihPKSl9fSl9LFpXNXE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBhRnVuY3Rpb249X193ZWJwYWNrX3JlcXVpcmVfXygiZWFvaCIpO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KEMpe3ZhciByZXNvbHZlLHJlamVjdDt0aGlzLnByb21pc2U9bmV3IEMoZnVuY3Rpb24oJCRyZXNvbHZlLCQkcmVqZWN0KXtpZih2b2lkIDAhPT1yZXNvbHZlfHx2b2lkIDAhPT1yZWplY3QpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Jlc29sdmU9JCRyZXNvbHZlLHJlamVjdD0kJHJlamVjdH0pLHRoaXMucmVzb2x2ZT1hRnVuY3Rpb24ocmVzb2x2ZSksdGhpcy5yZWplY3Q9YUZ1bmN0aW9uKHJlamVjdCl9bW9kdWxlLmV4cG9ydHMuZj1mdW5jdGlvbihDKXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpfX0sWmR1bzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZW8iLHttb250aHM6ImphbnVhcm9fZmVicnVhcm9fbWFydG9fYXByaWxvX21ham9fanVuaW9fanVsaW9fYcWtZ3VzdG9fc2VwdGVtYnJvX29rdG9icm9fbm92ZW1icm9fZGVjZW1icm8iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbWFyX2Fwcl9tYWpfanVuX2p1bF9hxa1nX3NlcF9va3Rfbm92X2RlYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiZGltYW7EiW9fbHVuZG9fbWFyZG9fbWVya3JlZG9fxLVhxa1kb192ZW5kcmVkb19zYWJhdG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiZGltX2x1bl9tYXJkX21lcmtfxLVhxa1fdmVuX3NhYiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiZGlfbHVfbWFfbWVfxLVhX3ZlX3NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IllZWVktTU0tREQiLExMOiJEWy1hIGRlXSBNTU1NLCBZWVlZIixMTEw6IkRbLWEgZGVdIE1NTU0sIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIFtsYV0gRFstYSBkZV0gTU1NTSwgWVlZWSBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L1thcF1cLnRcLm0vaSxpc1BNOmZ1bmN0aW9uKGlucHV0KXtyZXR1cm4icCI9PT1pbnB1dC5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKX0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cnMsbWludXRlcyxpc0xvd2VyKXtyZXR1cm4gMTE8aG91cnM/aXNMb3dlcj8icC50Lm0uIjoiUC5ULk0uIjppc0xvd2VyPyJhLnQubS4iOiJBLlQuTS4ifSxjYWxlbmRhcjp7c2FtZURheToiW0hvZGlhxa0gamVdIExUIixuZXh0RGF5OiJbTW9yZ2HFrSBqZV0gTFQiLG5leHRXZWVrOiJkZGRkIFtqZV0gTFQiLGxhc3REYXk6IltIaWVyYcWtIGplXSBMVCIsbGFzdFdlZWs6IltwYXNpbnRhXSBkZGRkIFtqZV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InBvc3QgJXMiLHBhc3Q6ImFudGHFrSAlcyIsczoic2VrdW5kb2oiLHNzOiIlZCBzZWt1bmRvaiIsbToibWludXRvIixtbToiJWQgbWludXRvaiIsaDoiaG9ybyIsaGg6IiVkIGhvcm9qIixkOiJ0YWdvIixkZDoiJWQgdGFnb2oiLE06Im1vbmF0byIsTU06IiVkIG1vbmF0b2oiLHk6Imphcm8iLHl5OiIlZCBqYXJvaiJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1hLyxvcmRpbmFsOiIlZGEiLHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxac2hpOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0Iik7X193ZWJwYWNrX3JlcXVpcmVfXygiWHRyOCIpKCJpc0Zyb3plbiIsZnVuY3Rpb24oJGlzRnJvemVuKXtyZXR1cm4gZnVuY3Rpb24oaXQpe3JldHVybiFpc09iamVjdChpdCl8fCEhJGlzRnJvemVuJiYkaXNGcm96ZW4oaXQpfX0pfSxadm1yOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oImlvRmYiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJoSGhFIiksX193ZWJwYWNrX3JlcXVpcmVfXygiSEFFLyIpLF9fd2VicGFja19yZXF1aXJlX18oIldMTDQiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJtWWJhIiksX193ZWJwYWNrX3JlcXVpcmVfXygiNVBmMCIpLF9fd2VicGFja19yZXF1aXJlX18oIlJXMFYiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJKZHVMIiksX193ZWJwYWNrX3JlcXVpcmVfXygiRFcyRSIpLF9fd2VicGFja19yZXF1aXJlX18oInoybzIiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJtdXJhIiksX193ZWJwYWNrX3JlcXVpcmVfXygiWnNoaSIpLF9fd2VicGFja19yZXF1aXJlX18oIlYvRFgiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJGbHNEIiksX193ZWJwYWNrX3JlcXVpcmVfXygiOTFHUCIpLF9fd2VicGFja19yZXF1aXJlX18oIjI1ZE4iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCIvU1MvIiksX193ZWJwYWNrX3JlcXVpcmVfXygiQnR2dCIpLF9fd2VicGFja19yZXF1aXJlX18oIjJTcGoiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJmMy9kIiksX193ZWJwYWNrX3JlcXVpcmVfXygiSVh0OSIpLF9fd2VicGFja19yZXF1aXJlX18oIkdOQWUiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ0eXkrIiksX193ZWJwYWNrX3JlcXVpcmVfXygieGZZNSIpLF9fd2VicGFja19yZXF1aXJlX18oIkEyelciKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJWS2lyIiksX193ZWJwYWNrX3JlcXVpcmVfXygiTGpldCIpLF9fd2VicGFja19yZXF1aXJlX18oIi9LQWkiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJmTjk2IiksX193ZWJwYWNrX3JlcXVpcmVfXygiN2gwVCIpLF9fd2VicGFja19yZXF1aXJlX18oInNiRjgiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJoL000IiksX193ZWJwYWNrX3JlcXVpcmVfXygia25oRCIpLF9fd2VicGFja19yZXF1aXJlX18oIlhmS0ciKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJCUDhVIiksX193ZWJwYWNrX3JlcXVpcmVfXygiZnlWZSIpLF9fd2VicGFja19yZXF1aXJlX18oIlUydDkiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCIyYXRwIiksX193ZWJwYWNrX3JlcXVpcmVfXygiK2F1TyIpLF9fd2VicGFja19yZXF1aXJlX18oIk10ZEIiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJKY21vIiksX193ZWJwYWNrX3JlcXVpcmVfXygibnp5eCIpLF9fd2VicGFja19yZXF1aXJlX18oIkJDN0MiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ4OFpPIiksX193ZWJwYWNrX3JlcXVpcmVfXygiOVA5MyIpLF9fd2VicGFja19yZXF1aXJlX18oImVIS0siKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJCSi9sIiksX193ZWJwYWNrX3JlcXVpcmVfXygicHAvVCIpLF9fd2VicGFja19yZXF1aXJlX18oIkN5SHoiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJiQm9QIiksX193ZWJwYWNrX3JlcXVpcmVfXygieDhZaiIpLF9fd2VicGFja19yZXF1aXJlX18oImhMVDIiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJWcFVPIiksX193ZWJwYWNrX3JlcXVpcmVfXygiZUkzMyIpLF9fd2VicGFja19yZXF1aXJlX18oIlR6ZTAiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJYZk8zIiksX193ZWJwYWNrX3JlcXVpcmVfXygib0RJdSIpLF9fd2VicGFja19yZXF1aXJlX18oInJ2WmMiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJMOXMxIiksX193ZWJwYWNrX3JlcXVpcmVfXygiRkxsciIpLF9fd2VicGFja19yZXF1aXJlX18oIjlWbUYiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJoRWtOIiksX193ZWJwYWNrX3JlcXVpcmVfXygibklZNyIpLF9fd2VicGFja19yZXF1aXJlX18oIitvUGIiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJTTUIyIiksX193ZWJwYWNrX3JlcXVpcmVfXygiMG1ONCIpLF9fd2VicGFja19yZXF1aXJlX18oImJEY1ciKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJuc2lIIiksX193ZWJwYWNrX3JlcXVpcmVfXygiMExEbiIpLF9fd2VicGFja19yZXF1aXJlX18oInRVcmciKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCI4NGJGIiksX193ZWJwYWNrX3JlcXVpcmVfXygiRkVqciIpLF9fd2VicGFja19yZXF1aXJlX18oIlp6NFQiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJKQ3FqIiksX193ZWJwYWNrX3JlcXVpcmVfXygiZU02aSIpLF9fd2VicGFja19yZXF1aXJlX18oIkFwaFAiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJqcVgwIiksX193ZWJwYWNrX3JlcXVpcmVfXygiaDdObCIpLF9fd2VicGFja19yZXF1aXJlX18oInlNNGIiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJMSzhGIiksX193ZWJwYWNrX3JlcXVpcmVfXygiSEV3dCIpLF9fd2VicGFja19yZXF1aXJlX18oIjZBUTkiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJOejlVIiksX193ZWJwYWNrX3JlcXVpcmVfXygiSTc4ZSIpLF9fd2VicGFja19yZXF1aXJlX18oIlZkM0giKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCI4K0tWIiksX193ZWJwYWNrX3JlcXVpcmVfXygiYldmeCIpLF9fd2VicGFja19yZXF1aXJlX18oIjBsL3QiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJkWitZIiksX193ZWJwYWNrX3JlcXVpcmVfXygiWUpWSCIpLF9fd2VicGFja19yZXF1aXJlX18oIkROaVAiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJTUGluIiksX193ZWJwYWNrX3JlcXVpcmVfXygiVitlSiIpLF9fd2VicGFja19yZXF1aXJlX18oIm1HV0siKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJkRStUIiksX193ZWJwYWNrX3JlcXVpcmVfXygiYkh0ciIpLF9fd2VicGFja19yZXF1aXJlX18oImRSU0siKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJJTllyIiksX193ZWJwYWNrX3JlcXVpcmVfXygiMEUrVyIpLF9fd2VicGFja19yZXF1aXJlX18oInl0OE8iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJPeXZnIiksX193ZWJwYWNrX3JlcXVpcmVfXygic01YeCIpLF9fd2VicGFja19yZXF1aXJlX18oImExVGgiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJPRWJZIiksX193ZWJwYWNrX3JlcXVpcmVfXygiU1JmYyIpLF9fd2VicGFja19yZXF1aXJlX18oInBJRm8iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJPRzE0IiksX193ZWJwYWNrX3JlcXVpcmVfXygiS0tYciIpLF9fd2VicGFja19yZXF1aXJlX18oIlZSem0iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCI5QUFuIiksX193ZWJwYWNrX3JlcXVpcmVfXygiVDM5YiIpLF9fd2VicGFja19yZXF1aXJlX18oIkVLMEUiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3Q3NSIiksX193ZWJwYWNrX3JlcXVpcmVfXygieG04MCIpLF9fd2VicGFja19yZXF1aXJlX18oIkppL2wiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJzRncxIiksX193ZWJwYWNrX3JlcXVpcmVfXygiTk84ZiIpLF9fd2VicGFja19yZXF1aXJlX18oImFxSS8iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJGYXc1IiksX193ZWJwYWNrX3JlcXVpcmVfXygicjFiViIpLF9fd2VicGFja19yZXF1aXJlX18oInR1U28iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJuQ25LIiksX193ZWJwYWNrX3JlcXVpcmVfXygiWTlseiIpLF9fd2VicGFja19yZXF1aXJlX18oIlRkcHUiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCIzeHR5IiksX193ZWJwYWNrX3JlcXVpcmVfXygiSTVjdiIpLF9fd2VicGFja19yZXF1aXJlX18oImlNb1YiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ1aFpkIiksX193ZWJwYWNrX3JlcXVpcmVfXygiZi9hTiIpLF9fd2VicGFja19yZXF1aXJlX18oIjBZV00iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCI2OTRlIiksX193ZWJwYWNrX3JlcXVpcmVfXygiTFRUayIpLF9fd2VicGFja19yZXF1aXJlX18oIjlyTWsiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJJbEZ4IiksX193ZWJwYWNrX3JlcXVpcmVfXygieHBpdiIpLF9fd2VicGFja19yZXF1aXJlX18oIm9aL08iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJrbFBEIiksX193ZWJwYWNrX3JlcXVpcmVfXygia25VOSIpLF9fd2VicGFja19yZXF1aXJlX18oIloyS3UiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCI2VmFVIiksX193ZWJwYWNrX3JlcXVpcmVfXygiY2ZGYiIpLF9fd2VicGFja19yZXF1aXJlX18oIk5UWGsiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCI5WFpyIiksX193ZWJwYWNrX3JlcXVpcmVfXygiN1ZDMSIpLF9fd2VicGFja19yZXF1aXJlX18oIkk3NFciKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJmQTYzIiksX193ZWJwYWNrX3JlcXVpcmVfXygibUkxUiIpLF9fd2VicGFja19yZXF1aXJlX18oInJFMm8iKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ4OHFaIiksX193ZWJwYWNrX3JlcXVpcmVfXygiam02MiIpLF9fd2VicGFja19yZXF1aXJlX18oImhoWFEiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCIvOEZiIiksX193ZWJwYWNrX3JlcXVpcmVfXygiUlFSRyIpLF9fd2VicGFja19yZXF1aXJlX18oIi91ZjEiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ1YUhHIiksX193ZWJwYWNrX3JlcXVpcmVfXygiWk5YLyIpLF9fd2VicGFja19yZXF1aXJlX18oIlJ3VGsiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCIyNXFuIiksX193ZWJwYWNrX3JlcXVpcmVfXygiY3BzSSIpLF9fd2VicGFja19yZXF1aXJlX18oIm1jWGUiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJkazg1IiksX193ZWJwYWNrX3JlcXVpcmVfXygidmRGaiIpLF9fd2VicGFja19yZXF1aXJlX18oIlFXeTIiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCIzWXBXIiksX193ZWJwYWNrX3JlcXVpcmVfXygiWFVDVyIpLF9fd2VicGFja19yZXF1aXJlX18oIlhaQ3AiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJERFlJIiksX193ZWJwYWNrX3JlcXVpcmVfXygib2pSKyIpLF9fd2VicGFja19yZXF1aXJlX18oIlFuWUQiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJDZUNkIiksX193ZWJwYWNrX3JlcXVpcmVfXygiREFDcyIpLF9fd2VicGFja19yZXF1aXJlX18oIkowZ2QiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJINUdUIiksX193ZWJwYWNrX3JlcXVpcmVfXygibkFCZSIpLF9fd2VicGFja19yZXF1aXJlX18oIkwzakYiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ0TUprIiksX193ZWJwYWNrX3JlcXVpcmVfXygiSHhpYyIpLF9fd2VicGFja19yZXF1aXJlX18oImFTczgiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ4M1VoIiksX193ZWJwYWNrX3JlcXVpcmVfXygiaWx6ZSIpLF9fd2VicGFja19yZXF1aXJlX18oIjdYNTgiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJDWDJ1IiksX193ZWJwYWNrX3JlcXVpcmVfXygicWN4TyIpLF9fd2VicGFja19yZXF1aXJlX18oIjQ5RDQiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJ6cStDIiksX193ZWJwYWNrX3JlcXVpcmVfXygiNDVUdiIpLF9fd2VicGFja19yZXF1aXJlX18oInVBdGQiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJCcWZWIiksX193ZWJwYWNrX3JlcXVpcmVfXygiZk4vMyIpLF9fd2VicGFja19yZXF1aXJlX18oImlXK1MiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCI3RGxoIiksX193ZWJwYWNrX3JlcXVpcmVfXygiT3B4YiIpLF9fd2VicGFja19yZXF1aXJlX18oIkRTVjMiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJON1ZXIiksX193ZWJwYWNrX3JlcXVpcmVfXygiUjVYWiIpLF9fd2VicGFja19yZXF1aXJlX18oIkV3K1QiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJyR3FvIiksbW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiZzNnNSIpfSxaeGdpOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiNVQyWSIpLGNvcmU9X193ZWJwYWNrX3JlcXVpcmVfXygiV0VwayIpLExJQlJBUlk9X193ZWJwYWNrX3JlcXVpcmVfXygidU9QUyIpLHdrc0V4dD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ6TGtHIiksZGVmaW5lUHJvcGVydHk9X193ZWJwYWNrX3JlcXVpcmVfXygiMmZhRSIpLmY7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obmFtZSl7dmFyICRTeW1ib2w9Y29yZS5TeW1ib2x8fChjb3JlLlN5bWJvbD1MSUJSQVJZP3t9Omdsb2JhbC5TeW1ib2x8fHt9KTsiXyI9PW5hbWUuY2hhckF0KDApfHxuYW1lIGluICRTeW1ib2x8fGRlZmluZVByb3BlcnR5KCRTeW1ib2wsbmFtZSx7dmFsdWU6d2tzRXh0LmYobmFtZSl9KX19LFp6NFQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO19fd2VicGFja19yZXF1aXJlX18oIk9HdGYiKSgic3ViIixmdW5jdGlvbihjcmVhdGVIVE1MKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCJzdWIiLCIiLCIiKX19KX0sYTB4dTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7dmFyIHRvU3RyaW5nPXt9LnRvU3RyaW5nO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0KXtyZXR1cm4gdG9TdHJpbmcuY2FsbChpdCkuc2xpY2UoOCwtMSl9fSxhMVRoOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fKCJPRWJZIik7dmFyIGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSwkZmxhZ3M9X193ZWJwYWNrX3JlcXVpcmVfXygiQy92YSIpLERFU0NSSVBUT1JTPV9fd2VicGFja19yZXF1aXJlX18oIm5oNGciKSwkdG9TdHJpbmc9Ly4vLnRvU3RyaW5nLGRlZmluZT1mdW5jdGlvbihmbil7X193ZWJwYWNrX3JlcXVpcmVfXygiS3JvSiIpKFJlZ0V4cC5wcm90b3R5cGUsInRvU3RyaW5nIixmbiwhMCl9O19fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe3JldHVybiIvYS9iIiE9JHRvU3RyaW5nLmNhbGwoe3NvdXJjZToiYSIsZmxhZ3M6ImIifSl9KT9kZWZpbmUoZnVuY3Rpb24oKXt2YXIgUj1hbk9iamVjdCh0aGlzKTtyZXR1cm4iLyIuY29uY2F0KFIuc291cmNlLCIvIiwiZmxhZ3MiaW4gUj9SLmZsYWdzOiFERVNDUklQVE9SUyYmUiBpbnN0YW5jZW9mIFJlZ0V4cD8kZmxhZ3MuY2FsbChSKTp2b2lkIDApfSk6InRvU3RyaW5nIiE9JHRvU3RyaW5nLm5hbWUmJmRlZmluZShmdW5jdGlvbigpe3JldHVybiAkdG9TdHJpbmcuY2FsbCh0aGlzKX0pfSxhQ0ZqOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBJT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlltcXYiKSxkZWZpbmVkPV9fd2VicGFja19yZXF1aXJlX18oInZoUFUiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpfX0sYUlkZjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcmVsYXRpdmVUaW1lV2l0aE11dGF0aW9uKG51bWJlcix3aXRob3V0U3VmZml4LGtleSl7cmV0dXJuIG51bWJlcisiICIrZnVuY3Rpb24odGV4dCxudW1iZXIpe3JldHVybiAyIT09bnVtYmVyP3RleHQ6ZnVuY3Rpb24odGV4dCl7dmFyIG11dGF0aW9uVGFibGU9e206InYiLGI6InYiLGQ6InoifTtyZXR1cm4gdm9pZCAwIT09bXV0YXRpb25UYWJsZVt0ZXh0LmNoYXJBdCgwKV0/bXV0YXRpb25UYWJsZVt0ZXh0LmNoYXJBdCgwKV0rdGV4dC5zdWJzdHJpbmcoMSk6dGV4dH0odGV4dCl9KHttbToibXVudXRlbm4iLE1NOiJtaXoiLGRkOiJkZXZlemgifVtrZXldLG51bWJlcil9ZnVuY3Rpb24gbGFzdE51bWJlcihudW1iZXIpe3JldHVybiA5PG51bWJlcj9sYXN0TnVtYmVyKG51bWJlciUxMCk6bnVtYmVyfW1vbWVudC5kZWZpbmVMb2NhbGUoImJyIix7bW9udGhzOiJHZW52ZXJfQydod2V2cmVyX01ldXJ6aF9FYnJlbF9NYWVfTWV6aGV2ZW5fR291ZXJlX0Vvc3RfR3dlbmdvbG9fSGVyZV9EdV9LZXJ6dSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiR2VuX0MnaHdlX01ldV9FYnJfTWFlX0V2ZV9Hb3VfRW9zX0d3ZV9IZXJfRHVfS2VyIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdWxfTHVuX01ldXJ6aF9NZXJjJ2hlcl9ZYW91X0d3ZW5lcl9TYWRvcm4iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU3VsX0x1bl9NZXVfTWVyX1lhb19Hd2VfU2FkIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTdV9MdV9NZV9NZXJfWWFfR3dfU2EiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiaFtlXW1tIEEiLExUUzoiaFtlXW1tOnNzIEEiLEw6IkREL01NL1lZWVkiLExMOiJEIFthIHZpel0gTU1NTSBZWVlZIixMTEw6IkQgW2Egdml6XSBNTU1NIFlZWVkgaFtlXW1tIEEiLExMTEw6ImRkZGQsIEQgW2Egdml6XSBNTU1NIFlZWVkgaFtlXW1tIEEifSxjYWxlbmRhcjp7c2FtZURheToiW0hpeml2IGRhXSBMVCIsbmV4dERheToiW1dhcmMnaG9hemggZGFdIExUIixuZXh0V2VlazoiZGRkZCBbZGFdIExUIixsYXN0RGF5OiJbRGVjJ2ggZGFdIExUIixsYXN0V2VlazoiZGRkZCBbcGFzZXQgZGFdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJhLWJlbm4gJXMiLHBhc3Q6IiVzICd6byIsczoidW4gbmViZXVkIHNlZ29uZGVubm/DuSIsc3M6IiVkIGVpbGVubiIsbToidXIgdnVudXRlbm4iLG1tOnJlbGF0aXZlVGltZVdpdGhNdXRhdGlvbixoOiJ1biBldXIiLGhoOiIlZCBldXIiLGQ6InVuIGRldmV6aCIsZGQ6cmVsYXRpdmVUaW1lV2l0aE11dGF0aW9uLE06InVyIG1peiIsTU06cmVsYXRpdmVUaW1lV2l0aE11dGF0aW9uLHk6InVyIGJsb2F6Iix5eTpmdW5jdGlvbihudW1iZXIpe3N3aXRjaChsYXN0TnVtYmVyKG51bWJlcikpe2Nhc2UgMTpjYXNlIDM6Y2FzZSA0OmNhc2UgNTpjYXNlIDk6cmV0dXJuIG51bWJlcisiIGJsb2F6IjtkZWZhdWx0OnJldHVybiBudW1iZXIrIiB2bG9heiJ9fX0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfShhw7F8dmV0KS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3ZhciBvdXRwdXQ9MT09PW51bWJlcj8iYcOxIjoidmV0IjtyZXR1cm4gbnVtYmVyK291dHB1dH0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGFJc246ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoIm1pIix7bW9udGhzOiJLb2hpLXTEgXRlX0h1aS10YW5ndXJ1X1BvdXTFqy10ZS1yYW5naV9QYWVuZ2Etd2jEgXdoxIFfSGFyYXR1YV9QaXBpcmlfSMWNbmdvaW5nb2lfSGVyZS10dXJpLWvFjWvEgV9NYWh1cnVfV2hpcmluZ2EtxIEtbnVrdV9XaGlyaW5nYS3EgS1yYW5naV9IYWtpaGVhIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJLb2hpX0h1aV9Qb3VfUGFlX0hhcmFfUGlwaV9IxY1uZ29pX0hlcmVfTWFodV9XaGktbnVfV2hpLXJhX0hha2kiLnNwbGl0KCJfIiksbW9udGhzUmVnZXg6Lyg/OlsnYS16XHUwMTAxXHUwMTREXHUwMTZCXStcLT8pezEsM30vaSxtb250aHNTdHJpY3RSZWdleDovKD86WydhLXpcdTAxMDFcdTAxNERcdTAxNkJdK1wtPyl7MSwzfS9pLG1vbnRoc1Nob3J0UmVnZXg6Lyg/OlsnYS16XHUwMTAxXHUwMTREXHUwMTZCXStcLT8pezEsM30vaSxtb250aHNTaG9ydFN0cmljdFJlZ2V4Oi8oPzpbJ2Etelx1MDEwMVx1MDE0RFx1MDE2Ql0rXC0/KXsxLDJ9L2ksd2Vla2RheXM6IlLEgXRhcHVfTWFuZV9UxatyZWlfV2VuZXJlaV9UxIFpdGVfUGFyYWlyZV9IxIF0YXJlaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJUYV9NYV9UxatfV2VfVMSBaV9QYV9IxIEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlRhX01hX1TFq19XZV9UxIFpX1BhX0jEgSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgW2ldIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBbaV0gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2kgdGVpZSBtYWhhbmEsIGldIExUIixuZXh0RGF5OiJbYXBvcG8gaV0gTFQiLG5leHRXZWVrOiJkZGRkIFtpXSBMVCIsbGFzdERheToiW2luYW5haGkgaV0gTFQiLGxhc3RXZWVrOiJkZGRkIFt3aGFrYW11dHVuZ2EgaV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Imkgcm90byBpICVzIixwYXN0OiIlcyBpIG11YSIsczoidGUgaMSTa29uYSBydWFydWEiLHNzOiIlZCBoxJNrb25hIixtOiJoZSBtZW5ldGkiLG1tOiIlZCBtZW5ldGkiLGg6InRlIGhhb3JhIixoaDoiJWQgaGFvcmEiLGQ6ImhlIHJhIixkZDoiJWQgcmEiLE06ImhlIG1hcmFtYSIsTU06IiVkIG1hcmFtYSIseToiaGUgdGF1Iix5eToiJWQgdGF1In0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6Iix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sYVFrVTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgibWsiLHttb250aHM6ItGY0LDQvdGD0LDRgNC4X9GE0LXQstGA0YPQsNGA0Lhf0LzQsNGA0YJf0LDQv9GA0LjQu1/QvNCw0Zhf0ZjRg9C90Lhf0ZjRg9C70Lhf0LDQstCz0YPRgdGCX9GB0LXQv9GC0LXQvNCy0YDQuF/QvtC60YLQvtC80LLRgNC4X9C90L7QtdC80LLRgNC4X9C00LXQutC10LzQstGA0LgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItGY0LDQvV/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Zhf0ZjRg9C9X9GY0YPQu1/QsNCy0LNf0YHQtdC/X9C+0LrRgl/QvdC+0LVf0LTQtdC6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiLQvdC10LTQtdC70LBf0L/QvtC90LXQtNC10LvQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNC10LTQsF/Rh9C10YLQstGA0YLQvtC6X9C/0LXRgtC+0Lpf0YHQsNCx0L7RgtCwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItC90LXQtF/Qv9C+0L1f0LLRgtC+X9GB0YDQtV/Rh9C10YJf0L/QtdGCX9GB0LDQsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0L1lX9C/b1/QstGCX9GB0YBf0YfQtV/Qv9C1X9GBYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiRC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0JTQtdC90LXRgSDQstC+XSBMVCIsbmV4dERheToiW9Cj0YLRgNC1INCy0L5dIExUIixuZXh0V2VlazoiW9CS0L5dIGRkZGQgW9Cy0L5dIExUIixsYXN0RGF5OiJb0JLRh9C10YDQsCDQstC+XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpjYXNlIDY6cmV0dXJuIlvQmNC30LzQuNC90LDRgtCw0YLQsF0gZGRkZCBb0LLQvl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW9CY0LfQvNC40L3QsNGC0LjQvtGCXSBkZGRkIFvQstC+XSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQv9C+0YHQu9C1ICVzIixwYXN0OiLQv9GA0LXQtCAlcyIsczoi0L3QtdC60L7Qu9C60YMg0YHQtdC60YPQvdC00LgiLHNzOiIlZCDRgdC10LrRg9C90LTQuCIsbToi0LzQuNC90YPRgtCwIixtbToiJWQg0LzQuNC90YPRgtC4IixoOiLRh9Cw0YEiLGhoOiIlZCDRh9Cw0YHQsCIsZDoi0LTQtdC9IixkZDoiJWQg0LTQtdC90LAiLE06ItC80LXRgdC10YYiLE1NOiIlZCDQvNC10YHQtdGG0LgiLHk6ItCz0L7QtNC40L3QsCIseXk6IiVkINCz0L7QtNC40L3QuCJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0tKNC10LJ80LXQvXzRgtC4fNCy0Lh80YDQuHzQvNC4KS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3ZhciBsYXN0RGlnaXQ9bnVtYmVyJTEwLGxhc3QyRGlnaXRzPW51bWJlciUxMDA7cmV0dXJuIDA9PT1udW1iZXI/bnVtYmVyKyIt0LXQsiI6MD09PWxhc3QyRGlnaXRzP251bWJlcisiLdC10L0iOjEwPGxhc3QyRGlnaXRzJiZsYXN0MkRpZ2l0czwyMD9udW1iZXIrIi3RgtC4IjoxPT09bGFzdERpZ2l0P251bWJlcisiLdCy0LgiOjI9PT1sYXN0RGlnaXQ/bnVtYmVyKyIt0YDQuCI6Nz09PWxhc3REaWdpdHx8OD09PWxhc3REaWdpdD9udW1iZXIrIi3QvNC4IjpudW1iZXIrIi3RgtC4In0sd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGFTczg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLERFR19QRVJfUkFEPU1hdGguUEkvMTgwOyRleHBvcnQoJGV4cG9ydC5TLCJNYXRoIix7cmFkaWFuczpmdW5jdGlvbihkZWdyZWVzKXtyZXR1cm4gZGVncmVlcypERUdfUEVSX1JBRH19KX0sYVc3ZTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3Z2VVIiksX193ZWJwYWNrX3JlcXVpcmVfXygiRmxRZiIpLF9fd2VicGFja19yZXF1aXJlX18oImJCeTkiKSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJKTVcrIiksX193ZWJwYWNrX3JlcXVpcmVfXygiUEJFMSIpLF9fd2VicGFja19yZXF1aXJlX18oIlEveVgiKSxtb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJXRXBrIikuUHJvbWlzZX0sYWFneDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7dmFyIGhhc093blByb3BlcnR5PXt9Lmhhc093blByb3BlcnR5O21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0LGtleSl7cmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsa2V5KX19LGFkT3o6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiWnhnaSIpKCJhc3luY0l0ZXJhdG9yIil9LGFwbVQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCxTKXtpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDt2YXIgZm4sdmFsO2lmKFMmJiJmdW5jdGlvbiI9PXR5cGVvZihmbj1pdC50b1N0cmluZykmJiFpc09iamVjdCh2YWw9Zm4uY2FsbChpdCkpKXJldHVybiB2YWw7aWYoImZ1bmN0aW9uIj09dHlwZW9mKGZuPWl0LnZhbHVlT2YpJiYhaXNPYmplY3QodmFsPWZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO2lmKCFTJiYiZnVuY3Rpb24iPT10eXBlb2YoZm49aXQudG9TdHJpbmcpJiYhaXNPYmplY3QodmFsPWZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsO3Rocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIil9fSwiYXFJLyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiN0REZyIpKCJVaW50OCIsMSxmdW5jdGlvbihpbml0KXtyZXR1cm4gZnVuY3Rpb24oZGF0YSxieXRlT2Zmc2V0LGxlbmd0aCl7cmV0dXJuIGluaXQodGhpcyxkYXRhLGJ5dGVPZmZzZXQsbGVuZ3RoKX19LCEwKX0sImFyL3AiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAka2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1dk1WIiksaGlkZGVuS2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJGcEhhIikuY29uY2F0KCJsZW5ndGgiLCJwcm90b3R5cGUiKTtleHBvcnRzLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKE8pe3JldHVybiAka2V5cyhPLGhpZGRlbktleXMpfX0sYjFEeTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZW4tbnoiLHttb250aHM6IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiaDptbSBBIixMVFM6Img6bW06c3MgQSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltUb2RheSBhdF0gTFQiLG5leHREYXk6IltUb21vcnJvdyBhdF0gTFQiLG5leHRXZWVrOiJkZGRkIFthdF0gTFQiLGxhc3REYXk6IltZZXN0ZXJkYXkgYXRdIExUIixsYXN0V2VlazoiW0xhc3RdIGRkZGQgW2F0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaW4gJXMiLHBhc3Q6IiVzIGFnbyIsczoiYSBmZXcgc2Vjb25kcyIsc3M6IiVkIHNlY29uZHMiLG06ImEgbWludXRlIixtbToiJWQgbWludXRlcyIsaDoiYW4gaG91ciIsaGg6IiVkIGhvdXJzIixkOiJhIGRheSIsZGQ6IiVkIGRheXMiLE06ImEgbW9udGgiLE1NOiIlZCBtb250aHMiLHk6ImEgeWVhciIseXk6IiVkIHllYXJzIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfShzdHxuZHxyZHx0aCkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXt2YXIgYj1udW1iZXIlMTAsb3V0cHV0PTE9PX5+KG51bWJlciUxMDAvMTApPyJ0aCI6MT09PWI/InN0IjoyPT09Yj8ibmQiOjM9PT1iPyJyZCI6InRoIjtyZXR1cm4gbnVtYmVyK291dHB1dH0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGJCb1A6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGV4cG0xPV9fd2VicGFja19yZXF1aXJlX18oIkxWd2MiKSxleHA9TWF0aC5leHA7JGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKl9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe3JldHVybi0yZS0xNyE9IU1hdGguc2luaCgtMmUtMTcpfSksIk1hdGgiLHtzaW5oOmZ1bmN0aW9uKHgpe3JldHVybiBNYXRoLmFicyh4PSt4KTwxPyhleHBtMSh4KS1leHBtMSgteCkpLzI6KGV4cCh4LTEpLWV4cCgteC0xKSkqKE1hdGguRS8yKX19KX0sYkJ5OTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3MmQrIik7Zm9yKHZhciBnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiNVQyWSIpLGhpZGU9X193ZWJwYWNrX3JlcXVpcmVfXygiTmVnTSIpLEl0ZXJhdG9ycz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTQnVFIiksVE9fU1RSSU5HX1RBRz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJVV2lYIikoInRvU3RyaW5nVGFnIiksRE9NSXRlcmFibGVzPSJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdCIuc3BsaXQoIiwiKSxpPTA7aTxET01JdGVyYWJsZXMubGVuZ3RoO2krKyl7dmFyIE5BTUU9RE9NSXRlcmFibGVzW2ldLENvbGxlY3Rpb249Z2xvYmFsW05BTUVdLHByb3RvPUNvbGxlY3Rpb24mJkNvbGxlY3Rpb24ucHJvdG90eXBlO3Byb3RvJiYhcHJvdG9bVE9fU1RSSU5HX1RBR10mJmhpZGUocHJvdG8sVE9fU1RSSU5HX1RBRyxOQU1FKSxJdGVyYXRvcnNbTkFNRV09SXRlcmF0b3JzLkFycmF5fX0sYkRjVzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygiT0d0ZiIpKCJmb250Y29sb3IiLGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe3JldHVybiBmdW5jdGlvbihjb2xvcil7cmV0dXJuIGNyZWF0ZUhUTUwodGhpcywiZm9udCIsImNvbG9yIixjb2xvcil9fSl9LGJIdHI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5QLCJBcnJheSIse2ZpbGw6X193ZWJwYWNrX3JlcXVpcmVfXygiTnIxOCIpfSksX193ZWJwYWNrX3JlcXVpcmVfXygibkd5dSIpKCJmaWxsIil9LGJPTXQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoIm5iIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJzX2FwcmlsX21haV9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2Rlc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW4uX2ZlYi5fbWFyc19hcHJpbF9tYWlfanVuaV9qdWxpX2F1Zy5fc2VwLl9va3QuX25vdi5fZGVzLiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJzw7huZGFnX21hbmRhZ190aXJzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7hyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InPDuC5fbWEuX3RpLl9vbi5fdG8uX2ZyLl9sw7guIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzw7hfbWFfdGlfb25fdG9fZnJfbMO4Ii5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBba2wuXSBISDptbSIsTExMTDoiZGRkZCBELiBNTU1NIFlZWVkgW2tsLl0gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2kgZGFnIGtsLl0gTFQiLG5leHREYXk6IltpIG1vcmdlbiBrbC5dIExUIixuZXh0V2VlazoiZGRkZCBba2wuXSBMVCIsbGFzdERheToiW2kgZ8OlciBrbC5dIExUIixsYXN0V2VlazoiW2ZvcnJpZ2VdIGRkZGQgW2tsLl0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9tICVzIixwYXN0OiIlcyBzaWRlbiIsczoibm9lbiBzZWt1bmRlciIsc3M6IiVkIHNla3VuZGVyIixtOiJldHQgbWludXR0IixtbToiJWQgbWludXR0ZXIiLGg6ImVuIHRpbWUiLGhoOiIlZCB0aW1lciIsZDoiZW4gZGFnIixkZDoiJWQgZGFnZXIiLE06ImVuIG3DpW5lZCIsTU06IiVkIG3DpW5lZGVyIix5OiJldHQgw6VyIix5eToiJWQgw6VyIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxiV2Z4OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJG1hcD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJDa2tUIikoMSk7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKiFfX3dlYnBhY2tfcmVxdWlyZV9fKCJMeUU4IikoW10ubWFwLCEwKSwiQXJyYXkiLHttYXA6ZnVuY3Rpb24oY2FsbGJhY2tmbil7cmV0dXJuICRtYXAodGhpcyxjYWxsYmFja2ZuLGFyZ3VtZW50c1sxXSl9fSl9LGJYbTc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBzdWZmaXhlcz17MDoiLdGI0ZYiLDE6Ii3RiNGWIiwyOiIt0YjRliIsMzoiLdGI0ZYiLDQ6Ii3RiNGWIiw1OiIt0YjRliIsNjoiLdGI0YsiLDc6Ii3RiNGWIiw4OiIt0YjRliIsOToiLdGI0YsiLDEwOiIt0YjRiyIsMjA6Ii3RiNGLIiwzMDoiLdGI0YsiLDQwOiIt0YjRiyIsNTA6Ii3RiNGWIiw2MDoiLdGI0YsiLDcwOiIt0YjRliIsODA6Ii3RiNGWIiw5MDoiLdGI0YsiLDEwMDoiLdGI0ZYifTttb21lbnQuZGVmaW5lTG9jYWxlKCJrayIse21vbnRoczoi0pvQsNKj0YLQsNGAX9Cw0pvQv9Cw0L1f0L3QsNGD0YDRi9C3X9GB05nRg9GW0YBf0LzQsNC80YvRgF/QvNCw0YPRgdGL0Lxf0YjRltC70LTQtV/RgtCw0LzRi9C3X9Kb0YvRgNC60q/QudC10Lpf0pvQsNC30LDQvV/Sm9Cw0YDQsNGI0LBf0LbQtdC70YLQvtKb0YHQsNC9Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLSm9Cw0qNf0LDSm9C/X9C90LDRg1/RgdOZ0YNf0LzQsNC8X9C80LDRg1/RiNGW0Ltf0YLQsNC8X9Kb0YvRgF/Sm9Cw0Ldf0pvQsNGAX9C20LXQuyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi0LbQtdC60YHQtdC90LHRll/QtNKv0LnRgdC10L3QsdGWX9GB0LXQudGB0LXQvdCx0ZZf0YHTmdGA0YHQtdC90LHRll/QsdC10LnRgdC10L3QsdGWX9C20rHQvNCwX9GB0LXQvdCx0ZYiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi0LbQtdC6X9C00q/QuV/RgdC10Llf0YHTmdGAX9Cx0LXQuV/QttKx0Lxf0YHQtdC9Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLQttC6X9C00Llf0YHQuV/RgdGAX9Cx0Llf0LbQvF/RgdC9Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9CR0q/Qs9GW0L0g0YHQsNKT0LDRgl0gTFQiLG5leHREYXk6IlvQldGA0YLQtdKjINGB0LDSk9Cw0YJdIExUIixuZXh0V2VlazoiZGRkZCBb0YHQsNKT0LDRgl0gTFQiLGxhc3REYXk6IlvQmtC10YjQtSDRgdCw0pPQsNGCXSBMVCIsbGFzdFdlZWs6IlvTqNGC0LrQtdC9INCw0L/RgtCw0L3Ri9KjXSBkZGRkIFvRgdCw0pPQsNGCXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg0ZbRiNGW0L3QtNC1IixwYXN0OiIlcyDQsdKx0YDRi9C9IixzOiLQsdGW0YDQvdC10YjQtSDRgdC10LrRg9C90LQiLHNzOiIlZCDRgdC10LrRg9C90LQiLG06ItCx0ZbRgCDQvNC40L3Rg9GCIixtbToiJWQg0LzQuNC90YPRgiIsaDoi0LHRltGAINGB0LDSk9Cw0YIiLGhoOiIlZCDRgdCw0pPQsNGCIixkOiLQsdGW0YAg0LrSr9C9IixkZDoiJWQg0LrSr9C9IixNOiLQsdGW0YAg0LDQuSIsTU06IiVkINCw0LkiLHk6ItCx0ZbRgCDQttGL0LsiLHl5OiIlZCDQttGL0LsifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9LSjRiNGWfNGI0YspLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7dmFyIGE9bnVtYmVyJTEwLGI9MTAwPD1udW1iZXI/MTAwOm51bGw7cmV0dXJuIG51bWJlcisoc3VmZml4ZXNbbnVtYmVyXXx8c3VmZml4ZXNbYV18fHN1ZmZpeGVzW2JdKX0sd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGJZTTY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImFyLXRuIix7bW9udGhzOiLYrNin2YbZgdmKX9mB2YrZgdix2Ypf2YXYp9ix2LNf2KPZgdix2YrZhF/Zhdin2Ypf2KzZiNin2YZf2KzZiNmK2YTZitipX9ij2YjYql/Ys9io2KrZhdio2LFf2KPZg9iq2YjYqNixX9mG2YjZgdmF2KjYsV/Yr9mK2LPZhdio2LEiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Itis2KfZhtmB2Ypf2YHZitmB2LHZil/Zhdin2LHYs1/Yo9mB2LHZitmEX9mF2KfZil/YrNmI2KfZhl/YrNmI2YrZhNmK2Klf2KPZiNiqX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Itij2K3Yr1/Ypdir2YbZitmGX9ir2YTYp9ir2KfYoV/Yo9ix2KjYudin2KFf2K7ZhdmK2LNf2KzZhdi52Klf2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLYrV/Zhl/Yq1/YsV/Yrl/YrF/YsyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvYp9mE2YrZiNmFINi52YTZiSDYp9mE2LPYp9i52KldIExUIixuZXh0RGF5OiJb2LrYr9inINi52YTZiSDYp9mE2LPYp9i52KldIExUIixuZXh0V2VlazoiZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLGxhc3REYXk6IlvYo9mF2LMg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLGxhc3RXZWVrOiJkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi2YHZiiAlcyIscGFzdDoi2YXZhtiwICVzIixzOiLYq9mI2KfZhiIsc3M6IiVkINir2KfZhtmK2KkiLG06Itiv2YLZitmC2KkiLG1tOiIlZCDYr9mC2KfYptmCIixoOiLYs9in2LnYqSIsaGg6IiVkINiz2KfYudin2KoiLGQ6ItmK2YjZhSIsZGQ6IiVkINij2YrYp9mFIixNOiLYtNmH2LEiLE1NOiIlZCDYo9i02YfYsSIseToi2LPZhtipIix5eToiJWQg2LPZhtmI2KfYqiJ9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxiZGdLOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyksZnVuY3Rpb24oZ2xvYmFsKXt2YXIgTWFwU2hpbT1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgTWFwKXJldHVybiBNYXA7ZnVuY3Rpb24gZ2V0SW5kZXgoYXJyLGtleSl7dmFyIHJlc3VsdD0tMTtyZXR1cm4gYXJyLnNvbWUoZnVuY3Rpb24oZW50cnksaW5kZXgpe3JldHVybiBlbnRyeVswXT09PWtleSYmKHJlc3VsdD1pbmRleCwhMCl9KSxyZXN1bHR9cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gY2xhc3NfMSgpe3RoaXMuX19lbnRyaWVzX189W119cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbGFzc18xLnByb3RvdHlwZSwic2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZW50cmllc19fLmxlbmd0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxjbGFzc18xLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oa2V5KXt2YXIgaW5kZXg9Z2V0SW5kZXgodGhpcy5fX2VudHJpZXNfXyxrZXkpLGVudHJ5PXRoaXMuX19lbnRyaWVzX19baW5kZXhdO3JldHVybiBlbnRyeSYmZW50cnlbMV19LGNsYXNzXzEucHJvdG90eXBlLnNldD1mdW5jdGlvbihrZXksdmFsdWUpe3ZhciBpbmRleD1nZXRJbmRleCh0aGlzLl9fZW50cmllc19fLGtleSk7fmluZGV4P3RoaXMuX19lbnRyaWVzX19baW5kZXhdWzFdPXZhbHVlOnRoaXMuX19lbnRyaWVzX18ucHVzaChba2V5LHZhbHVlXSl9LGNsYXNzXzEucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihrZXkpe3ZhciBlbnRyaWVzPXRoaXMuX19lbnRyaWVzX18saW5kZXg9Z2V0SW5kZXgoZW50cmllcyxrZXkpO35pbmRleCYmZW50cmllcy5zcGxpY2UoaW5kZXgsMSl9LGNsYXNzXzEucHJvdG90eXBlLmhhcz1mdW5jdGlvbihrZXkpe3JldHVybiEhfmdldEluZGV4KHRoaXMuX19lbnRyaWVzX18sa2V5KX0sY2xhc3NfMS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZW50cmllc19fLnNwbGljZSgwKX0sY2xhc3NfMS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihjYWxsYmFjayxjdHgpe3ZvaWQgMD09PWN0eCYmKGN0eD1udWxsKTtmb3IodmFyIF9pPTAsX2E9dGhpcy5fX2VudHJpZXNfXztfaTxfYS5sZW5ndGg7X2krKyl7dmFyIGVudHJ5PV9hW19pXTtjYWxsYmFjay5jYWxsKGN0eCxlbnRyeVsxXSxlbnRyeVswXSl9fSxjbGFzc18xfSgpfSgpLGlzQnJvd3Nlcj0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCYmd2luZG93LmRvY3VtZW50PT09ZG9jdW1lbnQsZ2xvYmFsJDE9dm9pZCAwIT09Z2xvYmFsJiZnbG9iYWwuTWF0aD09PU1hdGg/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT09TWF0aD9zZWxmOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09PU1hdGg/d2luZG93OkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCkscmVxdWVzdEFuaW1hdGlvbkZyYW1lJDE9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVlc3RBbmltYXRpb25GcmFtZT9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZChnbG9iYWwkMSk6ZnVuY3Rpb24oY2FsbGJhY2spe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIGNhbGxiYWNrKERhdGUubm93KCkpfSwxZTMvNjApfSx0cmFpbGluZ1RpbWVvdXQ9Mjt2YXIgdHJhbnNpdGlvbktleXM9WyJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJ3aWR0aCIsImhlaWdodCIsInNpemUiLCJ3ZWlnaHQiXSxtdXRhdGlvbk9ic2VydmVyU3VwcG9ydGVkPSJ1bmRlZmluZWQiIT10eXBlb2YgTXV0YXRpb25PYnNlcnZlcixSZXNpemVPYnNlcnZlckNvbnRyb2xsZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIoKXt0aGlzLmNvbm5lY3RlZF89ITEsdGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXz0hMSx0aGlzLm11dGF0aW9uc09ic2VydmVyXz1udWxsLHRoaXMub2JzZXJ2ZXJzXz1bXSx0aGlzLm9uVHJhbnNpdGlvbkVuZF89dGhpcy5vblRyYW5zaXRpb25FbmRfLmJpbmQodGhpcyksdGhpcy5yZWZyZXNoPWZ1bmN0aW9uKGNhbGxiYWNrLGRlbGF5KXt2YXIgbGVhZGluZ0NhbGw9ITEsdHJhaWxpbmdDYWxsPSExLGxhc3RDYWxsVGltZT0wO2Z1bmN0aW9uIHJlc29sdmVQZW5kaW5nKCl7bGVhZGluZ0NhbGwmJihsZWFkaW5nQ2FsbD0hMSxjYWxsYmFjaygpKSx0cmFpbGluZ0NhbGwmJnByb3h5KCl9ZnVuY3Rpb24gdGltZW91dENhbGxiYWNrKCl7cmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEocmVzb2x2ZVBlbmRpbmcpfWZ1bmN0aW9uIHByb3h5KCl7dmFyIHRpbWVTdGFtcD1EYXRlLm5vdygpO2lmKGxlYWRpbmdDYWxsKXtpZih0aW1lU3RhbXAtbGFzdENhbGxUaW1lPHRyYWlsaW5nVGltZW91dClyZXR1cm47dHJhaWxpbmdDYWxsPSEwfWVsc2UgdHJhaWxpbmdDYWxsPSEobGVhZGluZ0NhbGw9ITApLHNldFRpbWVvdXQodGltZW91dENhbGxiYWNrLGRlbGF5KTtsYXN0Q2FsbFRpbWU9dGltZVN0YW1wfXJldHVybiBwcm94eX0odGhpcy5yZWZyZXNoLmJpbmQodGhpcyksMjApfXJldHVybiBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLmFkZE9ic2VydmVyPWZ1bmN0aW9uKG9ic2VydmVyKXt+dGhpcy5vYnNlcnZlcnNfLmluZGV4T2Yob2JzZXJ2ZXIpfHx0aGlzLm9ic2VydmVyc18ucHVzaChvYnNlcnZlciksdGhpcy5jb25uZWN0ZWRffHx0aGlzLmNvbm5lY3RfKCl9LFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlT2JzZXJ2ZXI9ZnVuY3Rpb24ob2JzZXJ2ZXIpe3ZhciBvYnNlcnZlcnM9dGhpcy5vYnNlcnZlcnNfLGluZGV4PW9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTt+aW5kZXgmJm9ic2VydmVycy5zcGxpY2UoaW5kZXgsMSksIW9ic2VydmVycy5sZW5ndGgmJnRoaXMuY29ubmVjdGVkXyYmdGhpcy5kaXNjb25uZWN0XygpfSxSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZU9ic2VydmVyc18oKSYmdGhpcy5yZWZyZXNoKCl9LFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlT2JzZXJ2ZXJzXz1mdW5jdGlvbigpe3ZhciBhY3RpdmVPYnNlcnZlcnM9dGhpcy5vYnNlcnZlcnNfLmZpbHRlcihmdW5jdGlvbihvYnNlcnZlcil7cmV0dXJuIG9ic2VydmVyLmdhdGhlckFjdGl2ZSgpLG9ic2VydmVyLmhhc0FjdGl2ZSgpfSk7cmV0dXJuIGFjdGl2ZU9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKG9ic2VydmVyKXtyZXR1cm4gb2JzZXJ2ZXIuYnJvYWRjYXN0QWN0aXZlKCl9KSwwPGFjdGl2ZU9ic2VydmVycy5sZW5ndGh9LFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUuY29ubmVjdF89ZnVuY3Rpb24oKXtpc0Jyb3dzZXImJiF0aGlzLmNvbm5lY3RlZF8mJihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJ0cmFuc2l0aW9uZW5kIix0aGlzLm9uVHJhbnNpdGlvbkVuZF8pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLHRoaXMucmVmcmVzaCksbXV0YXRpb25PYnNlcnZlclN1cHBvcnRlZD8odGhpcy5tdXRhdGlvbnNPYnNlcnZlcl89bmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5yZWZyZXNoKSx0aGlzLm11dGF0aW9uc09ic2VydmVyXy5vYnNlcnZlKGRvY3VtZW50LHthdHRyaWJ1dGVzOiEwLGNoaWxkTGlzdDohMCxjaGFyYWN0ZXJEYXRhOiEwLHN1YnRyZWU6ITB9KSk6KGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTVN1YnRyZWVNb2RpZmllZCIsdGhpcy5yZWZyZXNoKSx0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfPSEwKSx0aGlzLmNvbm5lY3RlZF89ITApfSxSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLmRpc2Nvbm5lY3RfPWZ1bmN0aW9uKCl7aXNCcm93c2VyJiZ0aGlzLmNvbm5lY3RlZF8mJihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJ0cmFuc2l0aW9uZW5kIix0aGlzLm9uVHJhbnNpdGlvbkVuZF8pLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLHRoaXMucmVmcmVzaCksdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8mJnRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfLmRpc2Nvbm5lY3QoKSx0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfJiZkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01TdWJ0cmVlTW9kaWZpZWQiLHRoaXMucmVmcmVzaCksdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl89bnVsbCx0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfPSExLHRoaXMuY29ubmVjdGVkXz0hMSl9LFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUub25UcmFuc2l0aW9uRW5kXz1mdW5jdGlvbihfYSl7dmFyIF9iPV9hLnByb3BlcnR5TmFtZSxwcm9wZXJ0eU5hbWU9dm9pZCAwPT09X2I/IiI6X2I7dHJhbnNpdGlvbktleXMuc29tZShmdW5jdGlvbihrZXkpe3JldHVybiEhfnByb3BlcnR5TmFtZS5pbmRleE9mKGtleSl9KSYmdGhpcy5yZWZyZXNoKCl9LFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluc3RhbmNlX3x8KHRoaXMuaW5zdGFuY2VfPW5ldyBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIpLHRoaXMuaW5zdGFuY2VffSxSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuaW5zdGFuY2VfPW51bGwsUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyfSgpLGRlZmluZUNvbmZpZ3VyYWJsZT1mdW5jdGlvbih0YXJnZXQscHJvcHMpe2Zvcih2YXIgX2k9MCxfYT1PYmplY3Qua2V5cyhwcm9wcyk7X2k8X2EubGVuZ3RoO19pKyspe3ZhciBrZXk9X2FbX2ldO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsa2V5LHt2YWx1ZTpwcm9wc1trZXldLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITEsY29uZmlndXJhYmxlOiEwfSl9cmV0dXJuIHRhcmdldH0sZ2V0V2luZG93T2Y9ZnVuY3Rpb24odGFyZ2V0KXtyZXR1cm4gdGFyZ2V0JiZ0YXJnZXQub3duZXJEb2N1bWVudCYmdGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXd8fGdsb2JhbCQxfSxlbXB0eVJlY3Q9Y3JlYXRlUmVjdEluaXQoMCwwLDAsMCk7ZnVuY3Rpb24gdG9GbG9hdCh2YWx1ZSl7cmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpfHwwfWZ1bmN0aW9uIGdldEJvcmRlcnNTaXplKHN0eWxlcyl7Zm9yKHZhciBwb3NpdGlvbnM9W10sX2k9MTtfaTxhcmd1bWVudHMubGVuZ3RoO19pKyspcG9zaXRpb25zW19pLTFdPWFyZ3VtZW50c1tfaV07cmV0dXJuIHBvc2l0aW9ucy5yZWR1Y2UoZnVuY3Rpb24oc2l6ZSxwb3NpdGlvbil7cmV0dXJuIHNpemUrdG9GbG9hdChzdHlsZXNbImJvcmRlci0iK3Bvc2l0aW9uKyItd2lkdGgiXSl9LDApfWZ1bmN0aW9uIGdldEhUTUxFbGVtZW50Q29udGVudFJlY3QodGFyZ2V0KXt2YXIgY2xpZW50V2lkdGg9dGFyZ2V0LmNsaWVudFdpZHRoLGNsaWVudEhlaWdodD10YXJnZXQuY2xpZW50SGVpZ2h0O2lmKCFjbGllbnRXaWR0aCYmIWNsaWVudEhlaWdodClyZXR1cm4gZW1wdHlSZWN0O3ZhciBzdHlsZXM9Z2V0V2luZG93T2YodGFyZ2V0KS5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkscGFkZGluZ3M9ZnVuY3Rpb24oc3R5bGVzKXtmb3IodmFyIHBhZGRpbmdzPXt9LF9pPTAscG9zaXRpb25zXzE9WyJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiXTtfaTxwb3NpdGlvbnNfMS5sZW5ndGg7X2krKyl7dmFyIHBvc2l0aW9uPXBvc2l0aW9uc18xW19pXSx2YWx1ZT1zdHlsZXNbInBhZGRpbmctIitwb3NpdGlvbl07cGFkZGluZ3NbcG9zaXRpb25dPXRvRmxvYXQodmFsdWUpfXJldHVybiBwYWRkaW5nc30oc3R5bGVzKSxob3JpelBhZD1wYWRkaW5ncy5sZWZ0K3BhZGRpbmdzLnJpZ2h0LHZlcnRQYWQ9cGFkZGluZ3MudG9wK3BhZGRpbmdzLmJvdHRvbSx3aWR0aD10b0Zsb2F0KHN0eWxlcy53aWR0aCksaGVpZ2h0PXRvRmxvYXQoc3R5bGVzLmhlaWdodCk7aWYoImJvcmRlci1ib3giPT09c3R5bGVzLmJveFNpemluZyYmKE1hdGgucm91bmQod2lkdGgraG9yaXpQYWQpIT09Y2xpZW50V2lkdGgmJih3aWR0aC09Z2V0Qm9yZGVyc1NpemUoc3R5bGVzLCJsZWZ0IiwicmlnaHQiKStob3JpelBhZCksTWF0aC5yb3VuZChoZWlnaHQrdmVydFBhZCkhPT1jbGllbnRIZWlnaHQmJihoZWlnaHQtPWdldEJvcmRlcnNTaXplKHN0eWxlcywidG9wIiwiYm90dG9tIikrdmVydFBhZCkpLCFmdW5jdGlvbih0YXJnZXQpe3JldHVybiB0YXJnZXQ9PT1nZXRXaW5kb3dPZih0YXJnZXQpLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudH0odGFyZ2V0KSl7dmFyIHZlcnRTY3JvbGxiYXI9TWF0aC5yb3VuZCh3aWR0aCtob3JpelBhZCktY2xpZW50V2lkdGgsaG9yaXpTY3JvbGxiYXI9TWF0aC5yb3VuZChoZWlnaHQrdmVydFBhZCktY2xpZW50SGVpZ2h0OzEhPT1NYXRoLmFicyh2ZXJ0U2Nyb2xsYmFyKSYmKHdpZHRoLT12ZXJ0U2Nyb2xsYmFyKSwxIT09TWF0aC5hYnMoaG9yaXpTY3JvbGxiYXIpJiYoaGVpZ2h0LT1ob3JpelNjcm9sbGJhcil9cmV0dXJuIGNyZWF0ZVJlY3RJbml0KHBhZGRpbmdzLmxlZnQscGFkZGluZ3MudG9wLHdpZHRoLGhlaWdodCl9dmFyIGlzU1ZHR3JhcGhpY3NFbGVtZW50PSJ1bmRlZmluZWQiIT10eXBlb2YgU1ZHR3JhcGhpY3NFbGVtZW50P2Z1bmN0aW9uKHRhcmdldCl7cmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuU1ZHR3JhcGhpY3NFbGVtZW50fTpmdW5jdGlvbih0YXJnZXQpe3JldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBnZXRXaW5kb3dPZih0YXJnZXQpLlNWR0VsZW1lbnQmJiJmdW5jdGlvbiI9PXR5cGVvZiB0YXJnZXQuZ2V0QkJveH07ZnVuY3Rpb24gZ2V0Q29udGVudFJlY3QodGFyZ2V0KXtyZXR1cm4gaXNCcm93c2VyP2lzU1ZHR3JhcGhpY3NFbGVtZW50KHRhcmdldCk/ZnVuY3Rpb24odGFyZ2V0KXt2YXIgYmJveD10YXJnZXQuZ2V0QkJveCgpO3JldHVybiBjcmVhdGVSZWN0SW5pdCgwLDAsYmJveC53aWR0aCxiYm94LmhlaWdodCl9KHRhcmdldCk6Z2V0SFRNTEVsZW1lbnRDb250ZW50UmVjdCh0YXJnZXQpOmVtcHR5UmVjdH1mdW5jdGlvbiBjcmVhdGVSZWN0SW5pdCh4LHksd2lkdGgsaGVpZ2h0KXtyZXR1cm57eDp4LHk6eSx3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0fX12YXIgUmVzaXplT2JzZXJ2YXRpb249ZnVuY3Rpb24oKXtmdW5jdGlvbiBSZXNpemVPYnNlcnZhdGlvbih0YXJnZXQpe3RoaXMuYnJvYWRjYXN0V2lkdGg9MCx0aGlzLmJyb2FkY2FzdEhlaWdodD0wLHRoaXMuY29udGVudFJlY3RfPWNyZWF0ZVJlY3RJbml0KDAsMCwwLDApLHRoaXMudGFyZ2V0PXRhcmdldH1yZXR1cm4gUmVzaXplT2JzZXJ2YXRpb24ucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7dmFyIHJlY3Q9Z2V0Q29udGVudFJlY3QodGhpcy50YXJnZXQpO3JldHVybih0aGlzLmNvbnRlbnRSZWN0Xz1yZWN0KS53aWR0aCE9PXRoaXMuYnJvYWRjYXN0V2lkdGh8fHJlY3QuaGVpZ2h0IT09dGhpcy5icm9hZGNhc3RIZWlnaHR9LFJlc2l6ZU9ic2VydmF0aW9uLnByb3RvdHlwZS5icm9hZGNhc3RSZWN0PWZ1bmN0aW9uKCl7dmFyIHJlY3Q9dGhpcy5jb250ZW50UmVjdF87cmV0dXJuIHRoaXMuYnJvYWRjYXN0V2lkdGg9cmVjdC53aWR0aCx0aGlzLmJyb2FkY2FzdEhlaWdodD1yZWN0LmhlaWdodCxyZWN0fSxSZXNpemVPYnNlcnZhdGlvbn0oKSxSZXNpemVPYnNlcnZlckVudHJ5PWZ1bmN0aW9uKHRhcmdldCxyZWN0SW5pdCl7dmFyIF9hLHgseSx3aWR0aCxoZWlnaHQsQ29uc3RyLHJlY3QsY29udGVudFJlY3Q9KHg9KF9hPXJlY3RJbml0KS54LHk9X2EueSx3aWR0aD1fYS53aWR0aCxoZWlnaHQ9X2EuaGVpZ2h0LENvbnN0cj0idW5kZWZpbmVkIiE9dHlwZW9mIERPTVJlY3RSZWFkT25seT9ET01SZWN0UmVhZE9ubHk6T2JqZWN0LHJlY3Q9T2JqZWN0LmNyZWF0ZShDb25zdHIucHJvdG90eXBlKSxkZWZpbmVDb25maWd1cmFibGUocmVjdCx7eDp4LHk6eSx3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0LHRvcDp5LHJpZ2h0Ongrd2lkdGgsYm90dG9tOmhlaWdodCt5LGxlZnQ6eH0pLHJlY3QpO2RlZmluZUNvbmZpZ3VyYWJsZSh0aGlzLHt0YXJnZXQ6dGFyZ2V0LGNvbnRlbnRSZWN0OmNvbnRlbnRSZWN0fSl9LFJlc2l6ZU9ic2VydmVyU1BJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXJTUEkoY2FsbGJhY2ssY29udHJvbGxlcixjYWxsYmFja0N0eCl7aWYodGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfPVtdLHRoaXMub2JzZXJ2YXRpb25zXz1uZXcgTWFwU2hpbSwiZnVuY3Rpb24iIT10eXBlb2YgY2FsbGJhY2spdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIGNhbGxiYWNrIHByb3ZpZGVkIGFzIHBhcmFtZXRlciAxIGlzIG5vdCBhIGZ1bmN0aW9uLiIpO3RoaXMuY2FsbGJhY2tfPWNhbGxiYWNrLHRoaXMuY29udHJvbGxlcl89Y29udHJvbGxlcix0aGlzLmNhbGxiYWNrQ3R4Xz1jYWxsYmFja0N0eH1yZXR1cm4gUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLm9ic2VydmU9ZnVuY3Rpb24odGFyZ2V0KXtpZighYXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgVHlwZUVycm9yKCIxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuIik7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBFbGVtZW50JiZFbGVtZW50IGluc3RhbmNlb2YgT2JqZWN0KXtpZighKHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuRWxlbWVudCkpdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgIkVsZW1lbnQiLicpO3ZhciBvYnNlcnZhdGlvbnM9dGhpcy5vYnNlcnZhdGlvbnNfO29ic2VydmF0aW9ucy5oYXModGFyZ2V0KXx8KG9ic2VydmF0aW9ucy5zZXQodGFyZ2V0LG5ldyBSZXNpemVPYnNlcnZhdGlvbih0YXJnZXQpKSx0aGlzLmNvbnRyb2xsZXJfLmFkZE9ic2VydmVyKHRoaXMpLHRoaXMuY29udHJvbGxlcl8ucmVmcmVzaCgpKX19LFJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS51bm9ic2VydmU9ZnVuY3Rpb24odGFyZ2V0KXtpZighYXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgVHlwZUVycm9yKCIxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuIik7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBFbGVtZW50JiZFbGVtZW50IGluc3RhbmNlb2YgT2JqZWN0KXtpZighKHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuRWxlbWVudCkpdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgIkVsZW1lbnQiLicpO3ZhciBvYnNlcnZhdGlvbnM9dGhpcy5vYnNlcnZhdGlvbnNfO29ic2VydmF0aW9ucy5oYXModGFyZ2V0KSYmKG9ic2VydmF0aW9ucy5kZWxldGUodGFyZ2V0KSxvYnNlcnZhdGlvbnMuc2l6ZXx8dGhpcy5jb250cm9sbGVyXy5yZW1vdmVPYnNlcnZlcih0aGlzKSl9fSxSZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3RoaXMuY2xlYXJBY3RpdmUoKSx0aGlzLm9ic2VydmF0aW9uc18uY2xlYXIoKSx0aGlzLmNvbnRyb2xsZXJfLnJlbW92ZU9ic2VydmVyKHRoaXMpfSxSZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuZ2F0aGVyQWN0aXZlPWZ1bmN0aW9uKCl7dmFyIF90aGlzPXRoaXM7dGhpcy5jbGVhckFjdGl2ZSgpLHRoaXMub2JzZXJ2YXRpb25zXy5mb3JFYWNoKGZ1bmN0aW9uKG9ic2VydmF0aW9uKXtvYnNlcnZhdGlvbi5pc0FjdGl2ZSgpJiZfdGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLnB1c2gob2JzZXJ2YXRpb24pfSl9LFJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS5icm9hZGNhc3RBY3RpdmU9ZnVuY3Rpb24oKXtpZih0aGlzLmhhc0FjdGl2ZSgpKXt2YXIgY3R4PXRoaXMuY2FsbGJhY2tDdHhfLGVudHJpZXM9dGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLm1hcChmdW5jdGlvbihvYnNlcnZhdGlvbil7cmV0dXJuIG5ldyBSZXNpemVPYnNlcnZlckVudHJ5KG9ic2VydmF0aW9uLnRhcmdldCxvYnNlcnZhdGlvbi5icm9hZGNhc3RSZWN0KCkpfSk7dGhpcy5jYWxsYmFja18uY2FsbChjdHgsZW50cmllcyxjdHgpLHRoaXMuY2xlYXJBY3RpdmUoKX19LFJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS5jbGVhckFjdGl2ZT1mdW5jdGlvbigpe3RoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXy5zcGxpY2UoMCl9LFJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS5oYXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gMDx0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18ubGVuZ3RofSxSZXNpemVPYnNlcnZlclNQSX0oKSxvYnNlcnZlcnM9InVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwP25ldyBXZWFrTWFwOm5ldyBNYXBTaGltLFJlc2l6ZU9ic2VydmVyPWZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyKGNhbGxiYWNrKXtpZighKHRoaXMgaW5zdGFuY2VvZiBSZXNpemVPYnNlcnZlcikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uLiIpO2lmKCFhcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBUeXBlRXJyb3IoIjEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC4iKTt2YXIgY29udHJvbGxlcj1SZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKSxvYnNlcnZlcj1uZXcgUmVzaXplT2JzZXJ2ZXJTUEkoY2FsbGJhY2ssY29udHJvbGxlcix0aGlzKTtvYnNlcnZlcnMuc2V0KHRoaXMsb2JzZXJ2ZXIpfTtbIm9ic2VydmUiLCJ1bm9ic2VydmUiLCJkaXNjb25uZWN0Il0uZm9yRWFjaChmdW5jdGlvbihtZXRob2Qpe1Jlc2l6ZU9ic2VydmVyLnByb3RvdHlwZVttZXRob2RdPWZ1bmN0aW9uKCl7dmFyIF9hO3JldHVybihfYT1vYnNlcnZlcnMuZ2V0KHRoaXMpKVttZXRob2RdLmFwcGx5KF9hLGFyZ3VtZW50cyl9fSk7dmFyIGluZGV4PXZvaWQgMCE9PWdsb2JhbCQxLlJlc2l6ZU9ic2VydmVyP2dsb2JhbCQxLlJlc2l6ZU9ic2VydmVyOlJlc2l6ZU9ic2VydmVyO19fd2VicGFja19leHBvcnRzX18uZGVmYXVsdD1pbmRleH0uY2FsbCh0aGlzLF9fd2VicGFja19yZXF1aXJlX18oInlMcGoiKSl9LGJwaWg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoIml0Iix7bW9udGhzOiJnZW5uYWlvX2ZlYmJyYWlvX21hcnpvX2FwcmlsZV9tYWdnaW9fZ2l1Z25vX2x1Z2xpb19hZ29zdG9fc2V0dGVtYnJlX290dG9icmVfbm92ZW1icmVfZGljZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imdlbl9mZWJfbWFyX2Fwcl9tYWdfZ2l1X2x1Z19hZ29fc2V0X290dF9ub3ZfZGljIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJkb21lbmljYV9sdW5lZMOsX21hcnRlZMOsX21lcmNvbGVkw6xfZ2lvdmVkw6xfdmVuZXJkw6xfc2FiYXRvIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImRvbV9sdW5fbWFyX21lcl9naW9fdmVuX3NhYiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiZG9fbHVfbWFfbWVfZ2lfdmVfc2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltPZ2dpIGFsbGVdIExUIixuZXh0RGF5OiJbRG9tYW5pIGFsbGVdIExUIixuZXh0V2VlazoiZGRkZCBbYWxsZV0gTFQiLGxhc3REYXk6IltJZXJpIGFsbGVdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIltsYSBzY29yc2FdIGRkZGQgW2FsbGVdIExUIjtkZWZhdWx0OnJldHVybiJbbG8gc2NvcnNvXSBkZGRkIFthbGxlXSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOmZ1bmN0aW9uKHMpe3JldHVybigvXlswLTldLiskLy50ZXN0KHMpPyJ0cmEiOiJpbiIpKyIgIitzfSxwYXN0OiIlcyBmYSIsczoiYWxjdW5pIHNlY29uZGkiLHNzOiIlZCBzZWNvbmRpIixtOiJ1biBtaW51dG8iLG1tOiIlZCBtaW51dGkiLGg6InVuJ29yYSIsaGg6IiVkIG9yZSIsZDoidW4gZ2lvcm5vIixkZDoiJWQgZ2lvcm5pIixNOiJ1biBtZXNlIixNTToiJWQgbWVzaSIseToidW4gYW5ubyIseXk6IiVkIGFubmkifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9wrovLG9yZGluYWw6IiVkwroiLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxieEtYOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJpdC1jaCIse21vbnRoczoiZ2VubmFpb19mZWJicmFpb19tYXJ6b19hcHJpbGVfbWFnZ2lvX2dpdWdub19sdWdsaW9fYWdvc3RvX3NldHRlbWJyZV9vdHRvYnJlX25vdmVtYnJlX2RpY2VtYnJlIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJnZW5fZmViX21hcl9hcHJfbWFnX2dpdV9sdWdfYWdvX3NldF9vdHRfbm92X2RpYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiZG9tZW5pY2FfbHVuZWTDrF9tYXJ0ZWTDrF9tZXJjb2xlZMOsX2dpb3ZlZMOsX3ZlbmVyZMOsX3NhYmF0byIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkb21fbHVuX21hcl9tZXJfZ2lvX3Zlbl9zYWIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ImRvX2x1X21hX21lX2dpX3ZlX3NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbT2dnaSBhbGxlXSBMVCIsbmV4dERheToiW0RvbWFuaSBhbGxlXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2FsbGVdIExUIixsYXN0RGF5OiJbSWVyaSBhbGxlXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbbGEgc2NvcnNhXSBkZGRkIFthbGxlXSBMVCI7ZGVmYXVsdDpyZXR1cm4iW2xvIHNjb3Jzb10gZGRkZCBbYWxsZV0gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZTpmdW5jdGlvbihzKXtyZXR1cm4oL15bMC05XS4rJC8udGVzdChzKT8idHJhIjoiaW4iKSsiICIrc30scGFzdDoiJXMgZmEiLHM6ImFsY3VuaSBzZWNvbmRpIixzczoiJWQgc2Vjb25kaSIsbToidW4gbWludXRvIixtbToiJWQgbWludXRpIixoOiJ1bidvcmEiLGhoOiIlZCBvcmUiLGQ6InVuIGdpb3JubyIsZGQ6IiVkIGdpb3JuaSIsTToidW4gbWVzZSIsTU06IiVkIG1lc2kiLHk6InVuIGFubm8iLHl5OiIlZCBhbm5pIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6Iix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sY1JpeDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIG1vbnRoc1Nob3J0V2l0aERvdHM9Imphbi5fZmViLl9tcnQuX2Fwci5fbWFpX2p1bi5fanVsLl9hdWcuX3NlcC5fb2t0Ll9ub3YuX2Rlcy4iLnNwbGl0KCJfIiksbW9udGhzU2hvcnRXaXRob3V0RG90cz0iamFuX2ZlYl9tcnRfYXByX21haV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZXMiLnNwbGl0KCJfIik7bW9tZW50LmRlZmluZUxvY2FsZSgiZnkiLHttb250aHM6Imphbm5ld2FyaXNfZmVicmV3YXJpc19tYWFydF9hcHJpbF9tYWFpZV9qdW55X2p1bHlfYXVndXN0dXNfc2VwdGltYmVyX29rdG9iZXJfbm92aW1iZXJfZGVzaW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ZnVuY3Rpb24obSxmb3JtYXQpe3JldHVybiBtPy8tTU1NLS8udGVzdChmb3JtYXQpP21vbnRoc1Nob3J0V2l0aG91dERvdHNbbS5tb250aCgpXTptb250aHNTaG9ydFdpdGhEb3RzW20ubW9udGgoKV06bW9udGhzU2hvcnRXaXRoRG90c30sbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoic25laW5fbW9hbmRlaV90aWlzZGVpX3dvYW5zZGVpX3RvbmdlcnNkZWlfZnJlZWRfc25lb24iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoic2kuX21vLl90aS5fd28uX3RvLl9mci5fc28uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTaV9Nb19UaV9Xb19Ub19Gcl9TbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQtTU0tWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6Iltoam9lZCBvbV0gTFQiLG5leHREYXk6Ilttb2FybiBvbV0gTFQiLG5leHRXZWVrOiJkZGRkIFtvbV0gTFQiLGxhc3REYXk6IltqdXN0ZXIgb21dIExUIixsYXN0V2VlazoiW8O0ZnLDu25lXSBkZGRkIFtvbV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9lciAlcyIscGFzdDoiJXMgbHluIixzOiJpbiBwZWFyIHNla29uZGVuIixzczoiJWQgc2Vrb25kZW4iLG06ImllbiBtaW7DunQiLG1tOiIlZCBtaW51dGVuIixoOiJpZW4gb2VyZSIsaGg6IiVkIG9lcmVuIixkOiJpZW4gZGVpIixkZDoiJWQgZGFnZW4iLE06ImllbiBtb2FubmUiLE1NOiIlZCBtb2FubmVuIix5OiJpZW4gamllciIseXk6IiVkIGppZXJyZW4ifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHN0ZXxkZSkvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXtyZXR1cm4gbnVtYmVyKygxPT09bnVtYmVyfHw4PT09bnVtYmVyfHwyMDw9bnVtYmVyPyJzdGUiOiJkZSIpfSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sY2NFNzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgdG9JbnRlZ2VyPV9fd2VicGFja19yZXF1aXJlX18oIk9qZ2QiKSxkZWZpbmVkPV9fd2VicGFja19yZXF1aXJlX18oIkplczAiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihUT19TVFJJTkcpe3JldHVybiBmdW5jdGlvbih0aGF0LHBvcyl7dmFyIGEsYixzPVN0cmluZyhkZWZpbmVkKHRoYXQpKSxpPXRvSW50ZWdlcihwb3MpLGw9cy5sZW5ndGg7cmV0dXJuIGk8MHx8bDw9aT9UT19TVFJJTkc/IiI6dm9pZCAwOihhPXMuY2hhckNvZGVBdChpKSk8NTUyOTZ8fDU2MzE5PGF8fGkrMT09PWx8fChiPXMuY2hhckNvZGVBdChpKzEpKTw1NjMyMHx8NTczNDM8Yj9UT19TVFJJTkc/cy5jaGFyQXQoaSk6YTpUT19TVFJJTkc/cy5zbGljZShpLGkrMik6Yi01NjMyMCsoYS01NTI5Njw8MTApKzY1NTM2fX19LGNmRmI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxmbGF0dGVuSW50b0FycmF5PV9fd2VicGFja19yZXF1aXJlX18oInhGL2IiKSx0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTL2ovIiksdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygibmU4aSIpLHRvSW50ZWdlcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJSWWk3IiksYXJyYXlTcGVjaWVzQ3JlYXRlPV9fd2VicGFja19yZXF1aXJlX18oInpSd28iKTskZXhwb3J0KCRleHBvcnQuUCwiQXJyYXkiLHtmbGF0dGVuOmZ1bmN0aW9uKCl7dmFyIGRlcHRoQXJnPWFyZ3VtZW50c1swXSxPPXRvT2JqZWN0KHRoaXMpLHNvdXJjZUxlbj10b0xlbmd0aChPLmxlbmd0aCksQT1hcnJheVNwZWNpZXNDcmVhdGUoTywwKTtyZXR1cm4gZmxhdHRlbkludG9BcnJheShBLE8sTyxzb3VyY2VMZW4sMCx2b2lkIDA9PT1kZXB0aEFyZz8xOnRvSW50ZWdlcihkZXB0aEFyZykpLEF9fSksX193ZWJwYWNrX3JlcXVpcmVfXygibkd5dSIpKCJmbGF0dGVuIil9LGNwc0k6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygieHFGYyIpKCJNYXAiKX0sY3pNbzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZW4taWwiLHttb250aHM6IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixtOiJhIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6ImFuIGhvdXIiLGhoOiIlZCBob3VycyIsZDoiYSBkYXkiLGRkOiIlZCBkYXlzIixNOiJhIG1vbnRoIixNTToiJWQgbW9udGhzIix5OiJhIHllYXIiLHl5OiIlZCB5ZWFycyJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0oc3R8bmR8cmR8dGgpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7dmFyIGI9bnVtYmVyJTEwLG91dHB1dD0xPT1+fihudW1iZXIlMTAwLzEwKT8idGgiOjE9PT1iPyJzdCI6Mj09PWI/Im5kIjozPT09Yj8icmQiOiJ0aCI7cmV0dXJuIG51bWJlcitvdXRwdXR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGN6Tks6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBnZXRLZXlzPV9fd2VicGFja19yZXF1aXJlX18oIkRWZ0EiKSxnT1BTPV9fd2VicGFja19yZXF1aXJlX18oIkppRWEiKSxwSUU9X193ZWJwYWNrX3JlcXVpcmVfXygiVXFjRiIpLHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlMvai8iKSxJT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlltcXYiKSwkYXNzaWduPU9iamVjdC5hc3NpZ247bW9kdWxlLmV4cG9ydHM9ISRhc3NpZ258fF9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe3ZhciBBPXt9LEI9e30sUz1TeW1ib2woKSxLPSJhYmNkZWZnaGlqa2xtbm9wcXJzdCI7cmV0dXJuIEFbU109NyxLLnNwbGl0KCIiKS5mb3JFYWNoKGZ1bmN0aW9uKGspe0Jba109a30pLDchPSRhc3NpZ24oe30sQSlbU118fE9iamVjdC5rZXlzKCRhc3NpZ24oe30sQikpLmpvaW4oIiIpIT1LfSk/ZnVuY3Rpb24odGFyZ2V0LHNvdXJjZSl7Zm9yKHZhciBUPXRvT2JqZWN0KHRhcmdldCksYUxlbj1hcmd1bWVudHMubGVuZ3RoLGluZGV4PTEsZ2V0U3ltYm9scz1nT1BTLmYsaXNFbnVtPXBJRS5mO2luZGV4PGFMZW47KWZvcih2YXIga2V5LFM9SU9iamVjdChhcmd1bWVudHNbaW5kZXgrK10pLGtleXM9Z2V0U3ltYm9scz9nZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKTpnZXRLZXlzKFMpLGxlbmd0aD1rZXlzLmxlbmd0aCxqPTA7ajxsZW5ndGg7KWlzRW51bS5jYWxsKFMsa2V5PWtleXNbaisrXSkmJihUW2tleV09U1trZXldKTtyZXR1cm4gVH06JGFzc2lnbn0sImQvR2MiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiUllpNyIpLG1heD1NYXRoLm1heCxtaW49TWF0aC5taW47bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaW5kZXgsbGVuZ3RoKXtyZXR1cm4oaW5kZXg9dG9JbnRlZ2VyKGluZGV4KSk8MD9tYXgoaW5kZXgrbGVuZ3RoLDApOm1pbihpbmRleCxsZW5ndGgpfX0sImRFK1QiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUCwiQXJyYXkiLHtjb3B5V2l0aGluOl9fd2VicGFja19yZXF1aXJlX18oInVwS3giKX0pLF9fd2VicGFja19yZXF1aXJlX18oIm5HeXUiKSgiY29weVdpdGhpbiIpfSxkTndBOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJzdyIse21vbnRoczoiSmFudWFyaV9GZWJydWFyaV9NYWNoaV9BcHJpbGlfTWVpX0p1bmlfSnVsYWlfQWdvc3RpX1NlcHRlbWJhX09rdG9iYV9Ob3ZlbWJhX0Rlc2VtYmEiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFjX0Fwcl9NZWlfSnVuX0p1bF9BZ29fU2VwX09rdF9Ob3ZfRGVzIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJKdW1hcGlsaV9KdW1hdGF0dV9KdW1hbm5lX0p1bWF0YW5vX0FsaGFtaXNpX0lqdW1hYV9KdW1hbW9zaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJKcGxfSnRhdF9Kbm5lX0p0YW5fQWxoX0lqbV9KbW9zIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJKMl9KM19KNF9KNV9BbF9Jal9KMSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbbGVvIHNhYV0gTFQiLG5leHREYXk6IltrZXNobyBzYWFdIExUIixuZXh0V2VlazoiW3dpa2kgaWpheW9dIGRkZGQgW3NhYXRdIExUIixsYXN0RGF5OiJbamFuYV0gTFQiLGxhc3RXZWVrOiJbd2lraSBpbGl5b3BpdGFdIGRkZGQgW3NhYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBiYWFkYXllIixwYXN0OiJ0b2tlYSAlcyIsczoiaGl2aSBwdW5kZSIsc3M6InNla3VuZGUgJWQiLG06ImRha2lrYSBtb2phIixtbToiZGFraWthICVkIixoOiJzYWEgbGltb2phIixoaDoibWFzYWEgJWQiLGQ6InNpa3UgbW9qYSIsZGQ6Im1hc2lrdSAlZCIsTToibXdlemkgbW1vamEiLE1NOiJtaWV6aSAlZCIseToibXdha2EgbW1vamEiLHl5OiJtaWFrYSAlZCJ9LHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxkUlNLOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGZpbmQ9X193ZWJwYWNrX3JlcXVpcmVfXygiQ2trVCIpKDUpLGZvcmNlZD0hMDsiZmluZCJpbltdJiZBcnJheSgxKS5maW5kKGZ1bmN0aW9uKCl7Zm9yY2VkPSExfSksJGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKmZvcmNlZCwiQXJyYXkiLHtmaW5kOmZ1bmN0aW9uKGNhbGxiYWNrZm4pe3JldHVybiAkZmluZCh0aGlzLGNhbGxiYWNrZm4sMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLF9fd2VicGFja19yZXF1aXJlX18oIm5HeXUiKSgiZmluZCIpfSwiZForWSI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSwkc29tZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJDa2tUIikoMyk7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKiFfX3dlYnBhY2tfcmVxdWlyZV9fKCJMeUU4IikoW10uc29tZSwhMCksIkFycmF5Iix7c29tZTpmdW5jdGlvbihjYWxsYmFja2ZuKXtyZXR1cm4gJHNvbWUodGhpcyxjYWxsYmFja2ZuLGFyZ3VtZW50c1sxXSl9fSl9LGRrODU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygieHFGYyIpKCJXZWFrTWFwIil9LGRsMHE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiWnhnaSIpKCJvYnNlcnZhYmxlIil9LGR5Wlg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe3ZhciBnbG9iYWw9bW9kdWxlLmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9Z2xvYmFsKX0sImUrYWUiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgbW9udGhzPSJqYW51w6FyX2ZlYnJ1w6FyX21hcmVjX2FwcsOtbF9tw6FqX2rDum5fasO6bF9hdWd1c3Rfc2VwdGVtYmVyX29rdMOzYmVyX25vdmVtYmVyX2RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0PSJqYW5fZmViX21hcl9hcHJfbcOhal9qw7puX2rDumxfYXVnX3NlcF9va3Rfbm92X2RlYyIuc3BsaXQoIl8iKTtmdW5jdGlvbiBwbHVyYWwobil7cmV0dXJuIDE8biYmbjw1fWZ1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsd2l0aG91dFN1ZmZpeCxrZXksaXNGdXR1cmUpe3ZhciByZXN1bHQ9bnVtYmVyKyIgIjtzd2l0Y2goa2V5KXtjYXNlInMiOnJldHVybiB3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8icMOhciBzZWvDum5kIjoicMOhciBzZWt1bmRhbWkiO2Nhc2Uic3MiOnJldHVybiB3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT9yZXN1bHQrKHBsdXJhbChudW1iZXIpPyJzZWt1bmR5Ijoic2Vrw7puZCIpOnJlc3VsdCsic2VrdW5kYW1pIjtjYXNlIm0iOnJldHVybiB3aXRob3V0U3VmZml4PyJtaW7DunRhIjppc0Z1dHVyZT8ibWluw7p0dSI6Im1pbsO6dG91IjtjYXNlIm1tIjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/cmVzdWx0KyhwbHVyYWwobnVtYmVyKT8ibWluw7p0eSI6Im1pbsO6dCIpOnJlc3VsdCsibWluw7p0YW1pIjtjYXNlImgiOnJldHVybiB3aXRob3V0U3VmZml4PyJob2RpbmEiOmlzRnV0dXJlPyJob2RpbnUiOiJob2Rpbm91IjtjYXNlImhoIjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/cmVzdWx0KyhwbHVyYWwobnVtYmVyKT8iaG9kaW55IjoiaG9kw61uIik6cmVzdWx0KyJob2RpbmFtaSI7Y2FzZSJkIjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/ImRlxYgiOiJkxYhvbSI7Y2FzZSJkZCI6cmV0dXJuIHdpdGhvdXRTdWZmaXh8fGlzRnV0dXJlP3Jlc3VsdCsocGx1cmFsKG51bWJlcik/ImRuaSI6ImRuw60iKTpyZXN1bHQrImTFiGFtaSI7Y2FzZSJNIjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/Im1lc2lhYyI6Im1lc2lhY29tIjtjYXNlIk1NIjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/cmVzdWx0KyhwbHVyYWwobnVtYmVyKT8ibWVzaWFjZSI6Im1lc2lhY292Iik6cmVzdWx0KyJtZXNpYWNtaSI7Y2FzZSJ5IjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/InJvayI6InJva29tIjtjYXNlInl5IjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/cmVzdWx0KyhwbHVyYWwobnVtYmVyKT8icm9reSI6InJva292Iik6cmVzdWx0KyJyb2ttaSJ9fW1vbWVudC5kZWZpbmVMb2NhbGUoInNrIix7bW9udGhzOm1vbnRocyxtb250aHNTaG9ydDptb250aHNTaG9ydCx3ZWVrZGF5czoibmVkZcS+YV9wb25kZWxva191dG9yb2tfc3RyZWRhX8WhdHZydG9rX3BpYXRva19zb2JvdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoibmVfcG9fdXRfc3RfxaF0X3BpX3NvIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJuZV9wb191dF9zdF/FoXRfcGlfc28iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQgRC4gTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2RuZXMgb10gTFQiLG5leHREYXk6Ilt6YWp0cmEgb10gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3YgbmVkZcS+dSBvXSBMVCI7Y2FzZSAxOmNhc2UgMjpyZXR1cm4iW3ZdIGRkZGQgW29dIExUIjtjYXNlIDM6cmV0dXJuIlt2IHN0cmVkdSBvXSBMVCI7Y2FzZSA0OnJldHVybiJbdm8gxaF0dnJ0b2sgb10gTFQiO2Nhc2UgNTpyZXR1cm4iW3YgcGlhdG9rIG9dIExUIjtjYXNlIDY6cmV0dXJuIlt2IHNvYm90dSBvXSBMVCJ9fSxsYXN0RGF5OiJbdsSNZXJhIG9dIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlttaW51bMO6IG5lZGXEvnUgb10gTFQiO2Nhc2UgMTpjYXNlIDI6cmV0dXJuIlttaW51bMO9XSBkZGRkIFtvXSBMVCI7Y2FzZSAzOnJldHVybiJbbWludWzDuiBzdHJlZHUgb10gTFQiO2Nhc2UgNDpjYXNlIDU6cmV0dXJuIlttaW51bMO9XSBkZGRkIFtvXSBMVCI7Y2FzZSA2OnJldHVybiJbbWludWzDuiBzb2JvdHUgb10gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InByZWQgJXMiLHM6dHJhbnNsYXRlLHNzOnRyYW5zbGF0ZSxtOnRyYW5zbGF0ZSxtbTp0cmFuc2xhdGUsaDp0cmFuc2xhdGUsaGg6dHJhbnNsYXRlLGQ6dHJhbnNsYXRlLGRkOnRyYW5zbGF0ZSxNOnRyYW5zbGF0ZSxNTTp0cmFuc2xhdGUseTp0cmFuc2xhdGUseXk6dHJhbnNsYXRlfSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGU3eVY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIHRvSU9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhQ0ZqIiksZ09QTj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJrSk14IikuZix0b1N0cmluZz17fS50b1N0cmluZyx3aW5kb3dOYW1lcz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdO21vZHVsZS5leHBvcnRzLmY9ZnVuY3Rpb24oaXQpe3JldHVybiB3aW5kb3dOYW1lcyYmIltvYmplY3QgV2luZG93XSI9PXRvU3RyaW5nLmNhbGwoaXQpP2Z1bmN0aW9uKGl0KXt0cnl7cmV0dXJuIGdPUE4oaXQpfWNhdGNoKGUpe3JldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpfX0oaXQpOmdPUE4odG9JT2JqZWN0KGl0KSl9fSxlSEtLOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUywiTWF0aCIse2xvZzEwOmZ1bmN0aW9uKHgpe3JldHVybiBNYXRoLmxvZyh4KSpNYXRoLkxPRzEwRX19KX0sZUkzMzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksdG9JT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oImFDRmoiKSx0b0xlbmd0aD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJuZThpIik7JGV4cG9ydCgkZXhwb3J0LlMsIlN0cmluZyIse3JhdzpmdW5jdGlvbihjYWxsU2l0ZSl7Zm9yKHZhciB0cGw9dG9JT2JqZWN0KGNhbGxTaXRlLnJhdyksbGVuPXRvTGVuZ3RoKHRwbC5sZW5ndGgpLGFMZW49YXJndW1lbnRzLmxlbmd0aCxyZXM9W10saT0wO2k8bGVuOylyZXMucHVzaChTdHJpbmcodHBsW2krK10pKSxpPGFMZW4mJnJlcy5wdXNoKFN0cmluZyhhcmd1bWVudHNbaV0pKTtyZXR1cm4gcmVzLmpvaW4oIiIpfX0pfSxlTTZpOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUywiRGF0ZSIse25vdzpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0pfSxlVXRGOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPSFfX3dlYnBhY2tfcmVxdWlyZV9fKCJqbURIIikmJiFfX3dlYnBhY2tfcmVxdWlyZV9fKCJLVXhQIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19yZXF1aXJlX18oIkhzbnMiKSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LGVhb2g6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgaXQpdGhyb3cgVHlwZUVycm9yKGl0KyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGl0fX0sZWVWcTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oZXhlYyl7dHJ5e3JldHVybiEhZXhlYygpfWNhdGNoKGUpe3JldHVybiEwfX19LGVsWnE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLGRQPV9fd2VicGFja19yZXF1aXJlX18oImhzd2EiKSxERVNDUklQVE9SUz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJuaDRnIiksU1BFQ0lFUz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIikoInNwZWNpZXMiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihLRVkpe3ZhciBDPWdsb2JhbFtLRVldO0RFU0NSSVBUT1JTJiZDJiYhQ1tTUEVDSUVTXSYmZFAuZihDLFNQRUNJRVMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LGVuZGQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIENhbmNlbChtZXNzYWdlKXt0aGlzLm1lc3NhZ2U9bWVzc2FnZX1DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkNhbmNlbCIrKHRoaXMubWVzc2FnZT8iOiAiK3RoaXMubWVzc2FnZToiIil9LENhbmNlbC5wcm90b3R5cGUuX19DQU5DRUxfXz0hMCxtb2R1bGUuZXhwb3J0cz1DYW5jZWx9LGVxeWo6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciB1dGlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ4VEorIik7bW9kdWxlLmV4cG9ydHM9dXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKT97d3JpdGU6ZnVuY3Rpb24obmFtZSx2YWx1ZSxleHBpcmVzLHBhdGgsZG9tYWluLHNlY3VyZSl7dmFyIGNvb2tpZT1bXTtjb29raWUucHVzaChuYW1lKyI9IitlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKSx1dGlscy5pc051bWJlcihleHBpcmVzKSYmY29va2llLnB1c2goImV4cGlyZXM9IituZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKSx1dGlscy5pc1N0cmluZyhwYXRoKSYmY29va2llLnB1c2goInBhdGg9IitwYXRoKSx1dGlscy5pc1N0cmluZyhkb21haW4pJiZjb29raWUucHVzaCgiZG9tYWluPSIrZG9tYWluKSwhMD09PXNlY3VyZSYmY29va2llLnB1c2goInNlY3VyZSIpLGRvY3VtZW50LmNvb2tpZT1jb29raWUuam9pbigiOyAiKX0scmVhZDpmdW5jdGlvbihuYW1lKXt2YXIgbWF0Y2g9ZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoIihefDtcXHMqKSgiK25hbWUrIik9KFteO10qKSIpKTtyZXR1cm4gbWF0Y2g/ZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKTpudWxsfSxyZW1vdmU6ZnVuY3Rpb24obmFtZSl7dGhpcy53cml0ZShuYW1lLCIiLERhdGUubm93KCktODY0ZTUpfX06e3dyaXRlOmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHJlbW92ZTpmdW5jdGlvbigpe319fSxleU1yOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBhRnVuY3Rpb249X193ZWJwYWNrX3JlcXVpcmVfXygiMk9pRiIpLHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlMvai8iKSxJT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlltcXYiKSx0b0xlbmd0aD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJuZThpIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24odGhhdCxjYWxsYmFja2ZuLGFMZW4sbWVtbyxpc1JpZ2h0KXthRnVuY3Rpb24oY2FsbGJhY2tmbik7dmFyIE89dG9PYmplY3QodGhhdCksc2VsZj1JT2JqZWN0KE8pLGxlbmd0aD10b0xlbmd0aChPLmxlbmd0aCksaW5kZXg9aXNSaWdodD9sZW5ndGgtMTowLGk9aXNSaWdodD8tMToxO2lmKGFMZW48Milmb3IoOzspe2lmKGluZGV4IGluIHNlbGYpe21lbW89c2VsZltpbmRleF0saW5kZXgrPWk7YnJlYWt9aWYoaW5kZXgrPWksaXNSaWdodD9pbmRleDwwOmxlbmd0aDw9aW5kZXgpdGhyb3cgVHlwZUVycm9yKCJSZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlIil9Zm9yKDtpc1JpZ2h0PzA8PWluZGV4OmluZGV4PGxlbmd0aDtpbmRleCs9aSlpbmRleCBpbiBzZWxmJiYobWVtbz1jYWxsYmFja2ZuKG1lbW8sc2VsZltpbmRleF0saW5kZXgsTykpO3JldHVybiBtZW1vfX0sZXo0OTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHVzZUhhc0ZlYXR1cmUsRXhlY3V0aW9uRW52aXJvbm1lbnQ9X193ZWJwYWNrX3JlcXVpcmVfXygibzk3aiIpO0V4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSYmKHVzZUhhc0ZlYXR1cmU9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24mJmRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUmJiEwIT09ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgiIiwiIikpCi8qKgogKiBDaGVja3MgaWYgYW4gZXZlbnQgaXMgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGV4ZWN1dGlvbiBlbnZpcm9ubWVudC4KICoKICogTk9URTogVGhpcyB3aWxsIG5vdCB3b3JrIGNvcnJlY3RseSBmb3Igbm9uLWdlbmVyaWMgZXZlbnRzIHN1Y2ggYXMgYGNoYW5nZWAsCiAqIGByZXNldGAsIGBsb2FkYCwgYGVycm9yYCwgYW5kIGBzZWxlY3RgLgogKgogKiBCb3Jyb3dzIGZyb20gTW9kZXJuaXpyLgogKgogKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lU3VmZml4IEV2ZW50IG5hbWUsIGUuZy4gImNsaWNrIi4KICogQHBhcmFtIHs/Ym9vbGVhbn0gY2FwdHVyZSBDaGVjayBpZiB0aGUgY2FwdHVyZSBwaGFzZSBpcyBzdXBwb3J0ZWQuCiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIHN1cHBvcnRlZC4KICogQGludGVybmFsCiAqIEBsaWNlbnNlIE1vZGVybml6ciAzLjAuMHByZSAoQ3VzdG9tIEJ1aWxkKSB8IE1JVAogKi8sbW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oZXZlbnROYW1lU3VmZml4LGNhcHR1cmUpe2lmKCFFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET018fGNhcHR1cmUmJiEoImFkZEV2ZW50TGlzdGVuZXIiaW4gZG9jdW1lbnQpKXJldHVybiExO3ZhciBldmVudE5hbWU9Im9uIitldmVudE5hbWVTdWZmaXgsaXNTdXBwb3J0ZWQ9ZXZlbnROYW1lIGluIGRvY3VtZW50O2lmKCFpc1N1cHBvcnRlZCl7dmFyIGVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZWxlbWVudC5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCJyZXR1cm47IiksaXNTdXBwb3J0ZWQ9ImZ1bmN0aW9uIj09dHlwZW9mIGVsZW1lbnRbZXZlbnROYW1lXX1yZXR1cm4haXNTdXBwb3J0ZWQmJnVzZUhhc0ZlYXR1cmUmJiJ3aGVlbCI9PT1ldmVudE5hbWVTdWZmaXgmJihpc1N1cHBvcnRlZD1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCJFdmVudHMud2hlZWwiLCIzLjAiKSksaXNTdXBwb3J0ZWR9fSwiZi9hTiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksRW51bWVyYXRlPWZ1bmN0aW9uKGl0ZXJhdGVkKXt0aGlzLl90PWFuT2JqZWN0KGl0ZXJhdGVkKSx0aGlzLl9pPTA7dmFyIGtleSxrZXlzPXRoaXMuX2s9W107Zm9yKGtleSBpbiBpdGVyYXRlZClrZXlzLnB1c2goa2V5KX07X193ZWJwYWNrX3JlcXVpcmVfXygiUWFEYiIpKEVudW1lcmF0ZSwiT2JqZWN0IixmdW5jdGlvbigpe3ZhciBrZXksa2V5cz10aGlzLl9rO2Rve2lmKHRoaXMuX2k+PWtleXMubGVuZ3RoKXJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19d2hpbGUoISgoa2V5PWtleXNbdGhpcy5faSsrXSlpbiB0aGlzLl90KSk7cmV0dXJue3ZhbHVlOmtleSxkb25lOiExfX0pLCRleHBvcnQoJGV4cG9ydC5TLCJSZWZsZWN0Iix7ZW51bWVyYXRlOmZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuIG5ldyBFbnVtZXJhdGUodGFyZ2V0KX19KX0sImYzL2QiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBkUD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJoc3dhIikuZixGUHJvdG89RnVuY3Rpb24ucHJvdG90eXBlLG5hbWVSRT0vXlxzKmZ1bmN0aW9uIChbXiAoXSopLzsibmFtZSJpbiBGUHJvdG98fF9fd2VicGFja19yZXF1aXJlX18oIm5oNGciKSYmZFAoRlByb3RvLCJuYW1lIix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3RyeXtyZXR1cm4oIiIrdGhpcykubWF0Y2gobmFtZVJFKVsxXX1jYXRjaChlKXtyZXR1cm4iIn19fSl9LGZBNjM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO19fd2VicGFja19yZXF1aXJlX18oInFuY0IiKSgidHJpbVJpZ2h0IixmdW5jdGlvbigkdHJpbSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICR0cmltKHRoaXMsMil9fSwidHJpbUVuZCIpfSwiZk4vMyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIG1ldGFkYXRhPV9fd2VicGFja19yZXF1aXJlX18oIk42Y0oiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5Iiksb3JkaW5hcnlPd25NZXRhZGF0YUtleXM9bWV0YWRhdGEua2V5cyx0b01ldGFLZXk9bWV0YWRhdGEua2V5O21ldGFkYXRhLmV4cCh7Z2V0T3duTWV0YWRhdGFLZXlzOmZ1bmN0aW9uKHRhcmdldCl7cmV0dXJuIG9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKGFuT2JqZWN0KHRhcmdldCksYXJndW1lbnRzLmxlbmd0aDwyP3ZvaWQgMDp0b01ldGFLZXkoYXJndW1lbnRzWzFdKSl9fSl9LGZOOTY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJOdW1iZXIiLHtpc0ludGVnZXI6X193ZWJwYWNrX3JlcXVpcmVfXygibkJJUyIpfSl9LGZOWkE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGNsYXNzb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiUU1NVCIpLElURVJBVE9SPV9fd2VicGFja19yZXF1aXJlX18oIlVXaVgiKSgiaXRlcmF0b3IiKSxJdGVyYXRvcnM9X193ZWJwYWNrX3JlcXVpcmVfXygiU0J1RSIpO21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIldFcGsiKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbihpdCl7aWYobnVsbCE9aXQpcmV0dXJuIGl0W0lURVJBVE9SXXx8aXRbIkBAaXRlcmF0b3IiXXx8SXRlcmF0b3JzW2NsYXNzb2YoaXQpXX19LGZwQzU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGRQPV9fd2VicGFja19yZXF1aXJlX18oIjJmYUUiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1SzdaIiksZ2V0S2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ3NkdPIik7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiam1ESCIpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKE8sUHJvcGVydGllcyl7YW5PYmplY3QoTyk7Zm9yKHZhciBQLGtleXM9Z2V0S2V5cyhQcm9wZXJ0aWVzKSxsZW5ndGg9a2V5cy5sZW5ndGgsaT0wO2k8bGVuZ3RoOylkUC5mKE8sUD1rZXlzW2krK10sUHJvcGVydGllc1tQXSk7cmV0dXJuIE99fSxmeURxOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBkZWY9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpLmYsaGFzPV9fd2VicGFja19yZXF1aXJlX18oImFhZ3giKSxUQUc9X193ZWJwYWNrX3JlcXVpcmVfXygiSzB4VSIpKCJ0b1N0cmluZ1RhZyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0LHRhZyxzdGF0KXtpdCYmIWhhcyhpdD1zdGF0P2l0Oml0LnByb3RvdHlwZSxUQUcpJiZkZWYoaXQsVEFHLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dGFnfSl9fSxmeVZlOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxsb2cxcD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIxc2E3Iiksc3FydD1NYXRoLnNxcnQsJGFjb3NoPU1hdGguYWNvc2g7JGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKiEoJGFjb3NoJiY3MTA9PU1hdGguZmxvb3IoJGFjb3NoKE51bWJlci5NQVhfVkFMVUUpKSYmJGFjb3NoKDEvMCk9PTEvMCksIk1hdGgiLHthY29zaDpmdW5jdGlvbih4KXtyZXR1cm4oeD0reCk8MT9OYU46OTQ5MDYyNjUuNjI0MjUxNTY8eD9NYXRoLmxvZyh4KStNYXRoLkxOMjpsb2cxcCh4LTErc3FydCh4LTEpKnNxcnQoeCsxKSl9fSl9LGZ6UGc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoInlvIix7bW9udGhzOiJT4bq5zIFy4bq5zIFfRcyAcmXMgGxlzIBf4bq4cuG6ucyAbmHMgF9JzIBnYmXMgV9FzIBiaWJpX0/MgGt1zIBkdV9BZ+G6uW1vX0/MgGd1zIFuX093ZXdlX+G7jMyAd2HMgHJhzIBfQmXMgWx1zIFf4buMzIBw4bq5zIDMgCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiU+G6ucyBcl9FzIBybF/hurhybl9JzIBnYl9FzIBiaV9PzIBrdcyAX0Fn4bq5X0/MgGd1zIFfT3dlX+G7jMyAd2HMgF9CZcyBbF/hu4zMgHDhurnMgMyAIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJBzIBpzIBrdcyBX0FqZcyBX0nMgHPhurnMgWd1bl/hu4xq4buNzIFydcyBX+G7jGrhu43MgWLhu41f4bq4dGnMgF9BzIBiYcyBbeG6ucyBdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiQcyAacyAa19BamXMgV9JzIBz4bq5zIFf4buManJf4buMamJf4bq4dGnMgF9BzIBiYcyBIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJBzIBpzIBfQWpfScyAc1/hu4xyX+G7jGJf4bq4dF9BzIBiIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiaDptbSBBIixMVFM6Img6bW06c3MgQSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltPzIBuacyAIG5pXSBMVCIsbmV4dERheToiW+G7jMyAbGEgbmldIExUIixuZXh0V2VlazoiZGRkZCBb4buMc+G6ucyAIHRvzIFuJ2Lhu41dIFtuaV0gTFQiLGxhc3REYXk6IltBzIBuYSBuaV0gTFQiLGxhc3RXZWVrOiJkZGRkIFvhu4xz4bq5zIAgdG/MgWzhu43MgV0gW25pXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToibmnMgSAlcyIscGFzdDoiJXMga+G7jWphzIEiLHM6ImnMgHPhurlqdcyBIGFheWHMgSBkaWUiLHNzOiJhYXlhzIEgJWQiLG06ImnMgHPhurlqdcyBIGthbiIsbW06ImnMgHPhurlqdcyBICVkIixoOiJ3YcyBa2F0aSBrYW4iLGhoOiJ3YcyBa2F0aSAlZCIsZDoi4buNauG7jcyBIGthbiIsZGQ6IuG7jWrhu43MgSAlZCIsTToib3N1zIAga2FuIixNTToib3N1zIAgJWQiLHk6IuG7jWR1zIFuIGthbiIseXk6IuG7jWR1zIFuICVkIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTov4buNauG7jcyBXHNcZHsxLDJ9LyxvcmRpbmFsOiLhu41q4buNzIEgJWQiLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxnM2c1OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXt2YXIgY29yZT1tb2R1bGUuZXhwb3J0cz17dmVyc2lvbjoiMi42LjUifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1jb3JlKX0sZzRFRTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSx0b1ByaW1pdGl2ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhcG1UIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaGludCl7aWYoInN0cmluZyIhPT1oaW50JiYibnVtYmVyIiE9PWhpbnQmJiJkZWZhdWx0IiE9PWhpbnQpdGhyb3cgVHlwZUVycm9yKCJJbmNvcnJlY3QgaGludCIpO3JldHVybiB0b1ByaW1pdGl2ZShhbk9iamVjdCh0aGlzKSwibnVtYmVyIiE9aGludCl9fSxnNkhMOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKHgseSl7cmV0dXJuIHg9PT15PzAhPT14fHwxL3g9PTEveTp4IT14JiZ5IT15fX0sImdEUysiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPXtkZWZhdWx0Ol9fd2VicGFja19yZXF1aXJlX18oIm9oK2ciKSxfX2VzTW9kdWxlOiEwfX0sZ0hubjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKSxtYWNyb3Rhc2s9X193ZWJwYWNrX3JlcXVpcmVfXygiR1pFdSIpLnNldCxPYnNlcnZlcj1nbG9iYWwuTXV0YXRpb25PYnNlcnZlcnx8Z2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIscHJvY2Vzcz1nbG9iYWwucHJvY2VzcyxQcm9taXNlPWdsb2JhbC5Qcm9taXNlLGlzTm9kZT0icHJvY2VzcyI9PV9fd2VicGFja19yZXF1aXJlX18oIkxaV3QiKShwcm9jZXNzKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBoZWFkLGxhc3Qsbm90aWZ5LGZsdXNoPWZ1bmN0aW9uKCl7dmFyIHBhcmVudCxmbjtmb3IoaXNOb2RlJiYocGFyZW50PXByb2Nlc3MuZG9tYWluKSYmcGFyZW50LmV4aXQoKTtoZWFkOyl7Zm49aGVhZC5mbixoZWFkPWhlYWQubmV4dDt0cnl7Zm4oKX1jYXRjaChlKXt0aHJvdyBoZWFkP25vdGlmeSgpOmxhc3Q9dm9pZCAwLGV9fWxhc3Q9dm9pZCAwLHBhcmVudCYmcGFyZW50LmVudGVyKCl9O2lmKGlzTm9kZSlub3RpZnk9ZnVuY3Rpb24oKXtwcm9jZXNzLm5leHRUaWNrKGZsdXNoKX07ZWxzZSBpZighT2JzZXJ2ZXJ8fGdsb2JhbC5uYXZpZ2F0b3ImJmdsb2JhbC5uYXZpZ2F0b3Iuc3RhbmRhbG9uZSlpZihQcm9taXNlJiZQcm9taXNlLnJlc29sdmUpe3ZhciBwcm9taXNlPVByb21pc2UucmVzb2x2ZSh2b2lkIDApO25vdGlmeT1mdW5jdGlvbigpe3Byb21pc2UudGhlbihmbHVzaCl9fWVsc2Ugbm90aWZ5PWZ1bmN0aW9uKCl7bWFjcm90YXNrLmNhbGwoZ2xvYmFsLGZsdXNoKX07ZWxzZXt2YXIgdG9nZ2xlPSEwLG5vZGU9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyBPYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLHtjaGFyYWN0ZXJEYXRhOiEwfSksbm90aWZ5PWZ1bmN0aW9uKCl7bm9kZS5kYXRhPXRvZ2dsZT0hdG9nZ2xlfX1yZXR1cm4gZnVuY3Rpb24oZm4pe3ZhciB0YXNrPXtmbjpmbixuZXh0OnZvaWQgMH07bGFzdCYmKGxhc3QubmV4dD10YXNrKSxoZWFkfHwoaGVhZD10YXNrLG5vdGlmeSgpKSxsYXN0PXRhc2t9fX0sZ1ZWSzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcHJvY2Vzc1JlbGF0aXZlVGltZShudW1iZXIsd2l0aG91dFN1ZmZpeCxrZXksaXNGdXR1cmUpe3ZhciByZXN1bHQ9bnVtYmVyKyIgIjtzd2l0Y2goa2V5KXtjYXNlInMiOnJldHVybiB3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8ibmVrYWogc2VrdW5kIjoibmVrYWogc2VrdW5kYW1pIjtjYXNlInNzIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyP3dpdGhvdXRTdWZmaXg/InNla3VuZG8iOiJzZWt1bmRpIjoyPT09bnVtYmVyP3dpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJzZWt1bmRpIjoic2VrdW5kYWgiOm51bWJlcjw1P3dpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJzZWt1bmRlIjoic2VrdW5kYWgiOiJzZWt1bmQiO2Nhc2UibSI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/ImVuYSBtaW51dGEiOiJlbm8gbWludXRvIjtjYXNlIm1tIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyP3dpdGhvdXRTdWZmaXg/Im1pbnV0YSI6Im1pbnV0byI6Mj09PW51bWJlcj93aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8ibWludXRpIjoibWludXRhbWEiOm51bWJlcjw1P3dpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJtaW51dGUiOiJtaW51dGFtaSI6d2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/Im1pbnV0IjoibWludXRhbWkiO2Nhc2UiaCI6cmV0dXJuIHdpdGhvdXRTdWZmaXg/ImVuYSB1cmEiOiJlbm8gdXJvIjtjYXNlImhoIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyP3dpdGhvdXRTdWZmaXg/InVyYSI6InVybyI6Mj09PW51bWJlcj93aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8idXJpIjoidXJhbWEiOm51bWJlcjw1P3dpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJ1cmUiOiJ1cmFtaSI6d2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/InVyIjoidXJhbWkiO2Nhc2UiZCI6cmV0dXJuIHdpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJlbiBkYW4iOiJlbmltIGRuZW0iO2Nhc2UiZGQiOnJldHVybiByZXN1bHQrPTE9PT1udW1iZXI/d2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/ImRhbiI6ImRuZW0iOjI9PT1udW1iZXI/d2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/ImRuaSI6ImRuZXZvbWEiOndpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJkbmkiOiJkbmV2aSI7Y2FzZSJNIjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/ImVuIG1lc2VjIjoiZW5pbSBtZXNlY2VtIjtjYXNlIk1NIjpyZXR1cm4gcmVzdWx0Kz0xPT09bnVtYmVyP3dpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJtZXNlYyI6Im1lc2VjZW0iOjI9PT1udW1iZXI/d2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/Im1lc2VjYSI6Im1lc2VjZW1hIjpudW1iZXI8NT93aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8ibWVzZWNlIjoibWVzZWNpIjp3aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8ibWVzZWNldiI6Im1lc2VjaSI7Y2FzZSJ5IjpyZXR1cm4gd2l0aG91dFN1ZmZpeHx8aXNGdXR1cmU/ImVubyBsZXRvIjoiZW5pbSBsZXRvbSI7Y2FzZSJ5eSI6cmV0dXJuIHJlc3VsdCs9MT09PW51bWJlcj93aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8ibGV0byI6ImxldG9tIjoyPT09bnVtYmVyP3dpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJsZXRpIjoibGV0b21hIjpudW1iZXI8NT93aXRob3V0U3VmZml4fHxpc0Z1dHVyZT8ibGV0YSI6ImxldGkiOndpdGhvdXRTdWZmaXh8fGlzRnV0dXJlPyJsZXQiOiJsZXRpIn19bW9tZW50LmRlZmluZUxvY2FsZSgic2wiLHttb250aHM6ImphbnVhcl9mZWJydWFyX21hcmVjX2FwcmlsX21hal9qdW5pal9qdWxpal9hdmd1c3Rfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbi5fZmViLl9tYXIuX2Fwci5fbWFqLl9qdW4uX2p1bC5fYXZnLl9zZXAuX29rdC5fbm92Ll9kZWMuIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlRXhhY3Q6ITAsd2Vla2RheXM6Im5lZGVsamFfcG9uZWRlbGpla190b3Jla19zcmVkYV/EjWV0cnRla19wZXRla19zb2JvdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoibmVkLl9wb24uX3Rvci5fc3JlLl/EjWV0Ll9wZXQuX3NvYi4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Im5lX3BvX3RvX3NyX8SNZV9wZV9zbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltkYW5lcyBvYl0gTFQiLG5leHREYXk6IltqdXRyaSBvYl0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3ZdIFtuZWRlbGpvXSBbb2JdIExUIjtjYXNlIDM6cmV0dXJuIlt2XSBbc3JlZG9dIFtvYl0gTFQiO2Nhc2UgNjpyZXR1cm4iW3ZdIFtzb2JvdG9dIFtvYl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3ZdIGRkZGQgW29iXSBMVCJ9fSxsYXN0RGF5OiJbdsSNZXJhaiBvYl0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3ByZWrFoW5qb10gW25lZGVsam9dIFtvYl0gTFQiO2Nhc2UgMzpyZXR1cm4iW3ByZWrFoW5qb10gW3NyZWRvXSBbb2JdIExUIjtjYXNlIDY6cmV0dXJuIltwcmVqxaFuam9dIFtzb2JvdG9dIFtvYl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3ByZWrFoW5qaV0gZGRkZCBbb2JdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IsSNZXogJXMiLHBhc3Q6InByZWQgJXMiLHM6cHJvY2Vzc1JlbGF0aXZlVGltZSxzczpwcm9jZXNzUmVsYXRpdmVUaW1lLG06cHJvY2Vzc1JlbGF0aXZlVGltZSxtbTpwcm9jZXNzUmVsYXRpdmVUaW1lLGg6cHJvY2Vzc1JlbGF0aXZlVGltZSxoaDpwcm9jZXNzUmVsYXRpdmVUaW1lLGQ6cHJvY2Vzc1JlbGF0aXZlVGltZSxkZDpwcm9jZXNzUmVsYXRpdmVUaW1lLE06cHJvY2Vzc1JlbGF0aXZlVGltZSxNTTpwcm9jZXNzUmVsYXRpdmVUaW1lLHk6cHJvY2Vzc1JlbGF0aXZlVGltZSx5eTpwcm9jZXNzUmVsYXRpdmVUaW1lfSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95Ojd9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGdla0I6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBudW1iZXJzUGFzdD0ibm9sbGEgeWtzaSBrYWtzaSBrb2xtZSBuZWxqw6Qgdmlpc2kga3V1c2kgc2VpdHNlbcOkbiBrYWhkZWtzYW4geWhkZWtzw6RuIi5zcGxpdCgiICIpLG51bWJlcnNGdXR1cmU9WyJub2xsYSIsInloZGVuIiwia2FoZGVuIiwia29sbWVuIiwibmVsasOkbiIsInZpaWRlbiIsImt1dWRlbiIsbnVtYmVyc1Bhc3RbN10sbnVtYmVyc1Bhc3RbOF0sbnVtYmVyc1Bhc3RbOV1dO2Z1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsd2l0aG91dFN1ZmZpeCxrZXksaXNGdXR1cmUpe3ZhciByZXN1bHQ9IiI7c3dpdGNoKGtleSl7Y2FzZSJzIjpyZXR1cm4gaXNGdXR1cmU/Im11dXRhbWFuIHNla3VubmluIjoibXV1dGFtYSBzZWt1bnRpIjtjYXNlInNzIjpyZXR1cm4gaXNGdXR1cmU/InNla3VubmluIjoic2VrdW50aWEiO2Nhc2UibSI6cmV0dXJuIGlzRnV0dXJlPyJtaW51dXRpbiI6Im1pbnV1dHRpIjtjYXNlIm1tIjpyZXN1bHQ9aXNGdXR1cmU/Im1pbnV1dGluIjoibWludXV0dGlhIjticmVhaztjYXNlImgiOnJldHVybiBpc0Z1dHVyZT8idHVubmluIjoidHVudGkiO2Nhc2UiaGgiOnJlc3VsdD1pc0Z1dHVyZT8idHVubmluIjoidHVudGlhIjticmVhaztjYXNlImQiOnJldHVybiBpc0Z1dHVyZT8icMOkaXbDpG4iOiJww6RpdsOkIjtjYXNlImRkIjpyZXN1bHQ9aXNGdXR1cmU/InDDpGl2w6RuIjoicMOkaXbDpMOkIjticmVhaztjYXNlIk0iOnJldHVybiBpc0Z1dHVyZT8ia3V1a2F1ZGVuIjoia3V1a2F1c2kiO2Nhc2UiTU0iOnJlc3VsdD1pc0Z1dHVyZT8ia3V1a2F1ZGVuIjoia3V1a2F1dHRhIjticmVhaztjYXNlInkiOnJldHVybiBpc0Z1dHVyZT8idnVvZGVuIjoidnVvc2kiO2Nhc2UieXkiOnJlc3VsdD1pc0Z1dHVyZT8idnVvZGVuIjoidnVvdHRhIn1yZXR1cm4gcmVzdWx0PWZ1bmN0aW9uKG51bWJlcixpc0Z1dHVyZSl7cmV0dXJuIG51bWJlcjwxMD9pc0Z1dHVyZT9udW1iZXJzRnV0dXJlW251bWJlcl06bnVtYmVyc1Bhc3RbbnVtYmVyXTpudW1iZXJ9KG51bWJlcixpc0Z1dHVyZSkrIiAiK3Jlc3VsdH1tb21lbnQuZGVmaW5lTG9jYWxlKCJmaSIse21vbnRoczoidGFtbWlrdXVfaGVsbWlrdXVfbWFhbGlza3V1X2h1aHRpa3V1X3RvdWtva3V1X2tlc8Oka3V1X2hlaW7DpGt1dV9lbG9rdXVfc3l5c2t1dV9sb2tha3V1X21hcnJhc2t1dV9qb3VsdWt1dSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoidGFtbWlfaGVsbWlfbWFhbGlzX2h1aHRpX3RvdWtvX2tlc8OkX2hlaW7DpF9lbG9fc3l5c19sb2thX21hcnJhc19qb3VsdSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic3VubnVudGFpX21hYW5hbnRhaV90aWlzdGFpX2tlc2tpdmlpa2tvX3RvcnN0YWlfcGVyamFudGFpX2xhdWFudGFpIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InN1X21hX3RpX2tlX3RvX3BlX2xhIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzdV9tYV90aV9rZV90b19wZV9sYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhILm1tIixMVFM6IkhILm1tLnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRG8gTU1NTVt0YV0gWVlZWSIsTExMOiJEbyBNTU1NW3RhXSBZWVlZLCBba2xvXSBISC5tbSIsTExMTDoiZGRkZCwgRG8gTU1NTVt0YV0gWVlZWSwgW2tsb10gSEgubW0iLGw6IkQuTS5ZWVlZIixsbDoiRG8gTU1NIFlZWVkiLGxsbDoiRG8gTU1NIFlZWVksIFtrbG9dIEhILm1tIixsbGxsOiJkZGQsIERvIE1NTSBZWVlZLCBba2xvXSBISC5tbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbdMOkbsOkw6RuXSBba2xvXSBMVCIsbmV4dERheToiW2h1b21lbm5hXSBba2xvXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2tsb10gTFQiLGxhc3REYXk6IltlaWxlbl0gW2tsb10gTFQiLGxhc3RXZWVrOiJbdmlpbWVdIGRkZGRbbmFdIFtrbG9dIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBww6TDpHN0w6QiLHBhc3Q6IiVzIHNpdHRlbiIsczp0cmFuc2xhdGUsc3M6dHJhbnNsYXRlLG06dHJhbnNsYXRlLG1tOnRyYW5zbGF0ZSxoOnRyYW5zbGF0ZSxoaDp0cmFuc2xhdGUsZDp0cmFuc2xhdGUsZGQ6dHJhbnNsYXRlLE06dHJhbnNsYXRlLE1NOnRyYW5zbGF0ZSx5OnRyYW5zbGF0ZSx5eTp0cmFuc2xhdGV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sZ2pDVDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIHN5bWJvbE1hcD17MToi2aEiLDI6ItmiIiwzOiLZoyIsNDoi2aQiLDU6ItmlIiw2OiLZpiIsNzoi2aciLDg6ItmoIiw5OiLZqSIsMDoi2aAifSxudW1iZXJNYXA9eyLZoSI6IjEiLCLZoiI6IjIiLCLZoyI6IjMiLCLZpCI6IjQiLCLZpSI6IjUiLCLZpiI6IjYiLCLZpyI6IjciLCLZqCI6IjgiLCLZqSI6IjkiLCLZoCI6IjAifTttb21lbnQuZGVmaW5lTG9jYWxlKCJhci1zYSIse21vbnRoczoi2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2YrZiF/ZitmI2YbZitmIX9mK2YjZhNmK2Yhf2KPYutiz2LfYs1/Ys9io2KrZhdio2LFf2KPZg9iq2YjYqNixX9mG2YjZgdmF2KjYsV/Yr9mK2LPZhdio2LEiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItmK2YbYp9mK2LFf2YHYqNix2KfZitixX9mF2KfYsdizX9ij2KjYsdmK2YRf2YXYp9mK2Yhf2YrZiNmG2YrZiF/ZitmI2YTZitmIX9ij2LrYs9i32LNf2LPYqNiq2YXYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YHZhdio2LFf2K/Zitiz2YXYqNixIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItitX9mGX9irX9ixX9iuX9isX9izIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxtZXJpZGllbVBhcnNlOi/YtXzZhS8saXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuItmFIj09PWlucHV0fSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjwxMj8i2LUiOiLZhSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhNmK2YjZhSDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dERheToiW9i62K/YpyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0RGF5OiJb2KPZhdizINi52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0V2VlazoiZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItmB2YogJXMiLHBhc3Q6ItmF2YbYsCAlcyIsczoi2KvZiNin2YYiLHNzOiIlZCDYq9in2YbZitipIixtOiLYr9mC2YrZgtipIixtbToiJWQg2K/Zgtin2KbZgiIsaDoi2LPYp9i52KkiLGhoOiIlZCDYs9in2LnYp9iqIixkOiLZitmI2YUiLGRkOiIlZCDYo9mK2KfZhSIsTToi2LTZh9ixIixNTToiJWQg2KPYtNmH2LEiLHk6Itiz2YbYqSIseXk6IiVkINiz2YbZiNin2KoifSxwcmVwYXJzZTpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvW9mh2aLZo9mk2aXZptmn2ajZqdmgXS9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbnVtYmVyTWFwW21hdGNoXX0pLnJlcGxhY2UoL9iML2csIiwiKX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHN5bWJvbE1hcFttYXRjaF19KS5yZXBsYWNlKC8sL2csItiMIil9LHdlZWs6e2RvdzowLGRveTo2fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwiaC9NNCI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJOdW1iZXIiLHtNQVhfU0FGRV9JTlRFR0VSOjkwMDcxOTkyNTQ3NDA5OTF9KX0saDdObDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgRGF0ZVByb3RvPURhdGUucHJvdG90eXBlLCR0b1N0cmluZz1EYXRlUHJvdG8udG9TdHJpbmcsZ2V0VGltZT1EYXRlUHJvdG8uZ2V0VGltZTtuZXcgRGF0ZShOYU4pKyIiIT0iSW52YWxpZCBEYXRlIiYmX193ZWJwYWNrX3JlcXVpcmVfXygiS3JvSiIpKERhdGVQcm90bywidG9TdHJpbmciLGZ1bmN0aW9uKCl7dmFyIHZhbHVlPWdldFRpbWUuY2FsbCh0aGlzKTtyZXR1cm4gdmFsdWU9PXZhbHVlPyR0b1N0cmluZy5jYWxsKHRoaXMpOiJJbnZhbGlkIERhdGUifSl9LGhEYW06ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7fX0saEVrTjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygiT0d0ZiIpKCJhbmNob3IiLGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe3JldHVybiBmdW5jdGlvbihuYW1lKXtyZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCJhIiwibmFtZSIsbmFtZSl9fSl9LGhIaEU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJPYmplY3QiLHtjcmVhdGU6X193ZWJwYWNrX3JlcXVpcmVfXygiS3V0aCIpfSl9LGhLcnM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImJnIix7bW9udGhzOiLRj9C90YPQsNGA0Lhf0YTQtdCy0YDRg9Cw0YDQuF/QvNCw0YDRgl/QsNC/0YDQuNC7X9C80LDQuV/RjtC90Lhf0Y7Qu9C4X9Cw0LLQs9GD0YHRgl/RgdC10L/RgtC10LzQstGA0Lhf0L7QutGC0L7QvNCy0YDQuF/QvdC+0LXQvNCy0YDQuF/QtNC10LrQtdC80LLRgNC4Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLRj9C90YBf0YTQtdCyX9C80LDRgF/QsNC/0YBf0LzQsNC5X9GO0L3QuF/RjtC70Lhf0LDQstCzX9GB0LXQv1/QvtC60YJf0L3QvtC1X9C00LXQuiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi0L3QtdC00LXQu9GPX9C/0L7QvdC10LTQtdC70L3QuNC6X9Cy0YLQvtGA0L3QuNC6X9GB0YDRj9C00LBf0YfQtdGC0LLRitGA0YLRitC6X9C/0LXRgtGK0Lpf0YHRitCx0L7RgtCwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItC90LXQtF/Qv9C+0L1f0LLRgtC+X9GB0YDRj1/Rh9C10YJf0L/QtdGCX9GB0YrQsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0L3QtF/Qv9C9X9Cy0YJf0YHRgF/Rh9GCX9C/0YJf0YHQsSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiRC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0JTQvdC10YEg0LJdIExUIixuZXh0RGF5OiJb0KPRgtGA0LUg0LJdIExUIixuZXh0V2VlazoiZGRkZCBb0LJdIExUIixsYXN0RGF5OiJb0JLRh9C10YDQsCDQsl0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpjYXNlIDM6Y2FzZSA2OnJldHVybiJb0JIg0LjQt9C80LjQvdCw0LvQsNGC0LBdIGRkZGQgW9CyXSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJb0JIg0LjQt9C80LjQvdCw0LvQuNGPXSBkZGRkIFvQsl0gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi0YHQu9C10LQgJXMiLHBhc3Q6ItC/0YDQtdC00LggJXMiLHM6ItC90Y/QutC+0LvQutC+INGB0LXQutGD0L3QtNC4IixzczoiJWQg0YHQtdC60YPQvdC00LgiLG06ItC80LjQvdGD0YLQsCIsbW06IiVkINC80LjQvdGD0YLQuCIsaDoi0YfQsNGBIixoaDoiJWQg0YfQsNGB0LAiLGQ6ItC00LXQvSIsZGQ6IiVkINC00L3QuCIsTToi0LzQtdGB0LXRhiIsTU06IiVkINC80LXRgdC10YbQsCIseToi0LPQvtC00LjQvdCwIix5eToiJWQg0LPQvtC00LjQvdC4In0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfS0o0LXQsnzQtdC9fNGC0Lh80LLQuHzRgNC4fNC80LgpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7dmFyIGxhc3REaWdpdD1udW1iZXIlMTAsbGFzdDJEaWdpdHM9bnVtYmVyJTEwMDtyZXR1cm4gMD09PW51bWJlcj9udW1iZXIrIi3QtdCyIjowPT09bGFzdDJEaWdpdHM/bnVtYmVyKyIt0LXQvSI6MTA8bGFzdDJEaWdpdHMmJmxhc3QyRGlnaXRzPDIwP251bWJlcisiLdGC0LgiOjE9PT1sYXN0RGlnaXQ/bnVtYmVyKyIt0LLQuCI6Mj09PWxhc3REaWdpdD9udW1iZXIrIi3RgNC4Ijo3PT09bGFzdERpZ2l0fHw4PT09bGFzdERpZ2l0P251bWJlcisiLdC80LgiOm51bWJlcisiLdGC0LgifSx3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0saExUMjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHt0cnVuYzpmdW5jdGlvbihpdCl7cmV0dXJuKDA8aXQ/TWF0aC5mbG9vcjpNYXRoLmNlaWwpKGl0KX19KX0saFBJUTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9e319LGhoWFE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLCR2YWx1ZXM9X193ZWJwYWNrX3JlcXVpcmVfXygiVUV4ZCIpKCExKTskZXhwb3J0KCRleHBvcnQuUywiT2JqZWN0Iix7dmFsdWVzOmZ1bmN0aW9uKGl0KXtyZXR1cm4gJHZhbHVlcyhpdCl9fSl9LGhvbkY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBzeW1ib2xNYXA9ezE6IuGBgSIsMjoi4YGCIiwzOiLhgYMiLDQ6IuGBhCIsNToi4YGFIiw2OiLhgYYiLDc6IuGBhyIsODoi4YGIIiw5OiLhgYkiLDA6IuGBgCJ9LG51bWJlck1hcD17IuGBgSI6IjEiLCLhgYIiOiIyIiwi4YGDIjoiMyIsIuGBhCI6IjQiLCLhgYUiOiI1Iiwi4YGGIjoiNiIsIuGBhyI6IjciLCLhgYgiOiI4Iiwi4YGJIjoiOSIsIuGBgCI6IjAifTttb21lbnQuZGVmaW5lTG9jYWxlKCJteSIse21vbnRoczoi4YCH4YCU4YC64YCU4YCd4YCr4YCb4YCuX+GAluGAseGAluGAseGArOGAuuGAneGAq+GAm+GArl/hgJnhgJDhgLpf4YCn4YCV4YC84YCuX+GAmeGAsV/hgIfhgL3hgJThgLpf4YCH4YCw4YCc4YCt4YCv4YCE4YC6X+GAnuGAvOGAguGAr+GAkOGAul/hgIXhgIDhgLrhgJDhgIThgLrhgJjhgKxf4YCh4YCx4YCs4YCA4YC64YCQ4YCt4YCv4YCY4YCsX+GAlOGAreGAr+GAneGAhOGAuuGAmOGArF/hgJLhgK7hgIfhgIThgLrhgJjhgKwiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IuGAh+GAlOGAul/hgJbhgLFf4YCZ4YCQ4YC6X+GAleGAvOGArl/hgJnhgLFf4YCH4YC94YCU4YC6X+GAnOGAreGAr+GAhOGAul/hgJ7hgLxf4YCF4YCA4YC6X+GAoeGAseGArOGAgOGAul/hgJThgK3hgK9f4YCS4YCuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLhgJDhgJThgIThgLrhgLnhgILhgJThgL3hgLFf4YCQ4YCU4YCE4YC64YC54YCc4YCsX+GAoeGAhOGAuuGAueGAguGAq1/hgJfhgK/hgJLhgLnhgJPhgJ/hgLDhgLhf4YCA4YC84YCs4YCe4YCV4YCQ4YCx4YC4X+GAnuGAseGArOGAgOGAvOGArF/hgIXhgJThgLEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4YCU4YC94YCxX+GAnOGArF/hgILhgKtf4YCf4YCw4YC4X+GAgOGAvOGArF/hgJ7hgLHhgKxf4YCU4YCxIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLhgJThgL3hgLFf4YCc4YCsX+GAguGAq1/hgJ/hgLDhgLhf4YCA4YC84YCsX+GAnuGAseGArF/hgJThgLEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvhgJrhgJThgLEuXSBMVCBb4YCZ4YC+4YCsXSIsbmV4dERheToiW+GAmeGAlOGAgOGAuuGAluGAvOGAlOGAul0gTFQgW+GAmeGAvuGArF0iLG5leHRXZWVrOiJkZGRkIExUIFvhgJnhgL7hgKxdIixsYXN0RGF5OiJb4YCZ4YCU4YCxLuGAgF0gTFQgW+GAmeGAvuGArF0iLGxhc3RXZWVrOiJb4YCV4YC84YCu4YC44YCB4YCy4YC34YCe4YCx4YCsXSBkZGRkIExUIFvhgJnhgL7hgKxdIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLhgJzhgKzhgJnhgIrhgLrhgLcgJXMg4YCZ4YC+4YCsIixwYXN0OiLhgJzhgL3hgJThgLrhgIHhgLLhgLfhgJ7hgLHhgKwgJXMg4YCAIixzOiLhgIXhgIDhgLnhgIDhgJThgLou4YCh4YCU4YCK4YC64YC44YCE4YCa4YC6IixzczoiJWQg4YCF4YCA4YC54YCA4YCU4YC34YC6IixtOiLhgJDhgIXhgLrhgJnhgK3hgJThgIXhgLoiLG1tOiIlZCDhgJnhgK3hgJThgIXhgLoiLGg6IuGAkOGAheGAuuGAlOGArOGAm+GAriIsaGg6IiVkIOGAlOGArOGAm+GAriIsZDoi4YCQ4YCF4YC64YCb4YCA4YC6IixkZDoiJWQg4YCb4YCA4YC6IixNOiLhgJDhgIXhgLrhgJwiLE1NOiIlZCDhgJwiLHk6IuGAkOGAheGAuuGAlOGAvuGAheGAuiIseXk6IiVkIOGAlOGAvuGAheGAuiJ9LHByZXBhcnNlOmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4YGB4YGC4YGD4YGE4YGF4YGG4YGH4YGI4YGJ4YGAXS9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbnVtYmVyTWFwW21hdGNoXX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cZC9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gc3ltYm9sTWFwW21hdGNoXX0pfSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0saHN3YTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLElFOF9ET01fREVGSU5FPV9fd2VicGFja19yZXF1aXJlX18oInhwcWwiKSx0b1ByaW1pdGl2ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhcG1UIiksZFA9T2JqZWN0LmRlZmluZVByb3BlcnR5O2V4cG9ydHMuZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJuaDRnIik/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKE8sUCxBdHRyaWJ1dGVzKXtpZihhbk9iamVjdChPKSxQPXRvUHJpbWl0aXZlKFAsITApLGFuT2JqZWN0KEF0dHJpYnV0ZXMpLElFOF9ET01fREVGSU5FKXRyeXtyZXR1cm4gZFAoTyxQLEF0dHJpYnV0ZXMpfWNhdGNoKGUpe31pZigiZ2V0ImluIEF0dHJpYnV0ZXN8fCJzZXQiaW4gQXR0cmlidXRlcyl0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiBBdHRyaWJ1dGVzJiYoT1tQXT1BdHRyaWJ1dGVzLnZhbHVlKSxPfX0saTVkYzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSxjaGVjaz1mdW5jdGlvbihPLHByb3RvKXtpZihhbk9iamVjdChPKSwhaXNPYmplY3QocHJvdG8pJiZudWxsIT09cHJvdG8pdGhyb3cgVHlwZUVycm9yKHByb3RvKyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O21vZHVsZS5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHRlc3QsYnVnZ3ksc2V0KXt0cnl7KHNldD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJtMFBwIikoRnVuY3Rpb24uY2FsbCxfX3dlYnBhY2tfcmVxdWlyZV9fKCJFZW1IIikuZihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMikpKHRlc3QsW10pLGJ1Z2d5PSEodGVzdCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChlKXtidWdneT0hMH1yZXR1cm4gZnVuY3Rpb24oTyxwcm90byl7cmV0dXJuIGNoZWNrKE8scHJvdG8pLGJ1Z2d5P08uX19wcm90b19fPXByb3RvOnNldChPLHByb3RvKSxPfX0oe30sITEpOnZvaWQgMCksY2hlY2s6Y2hlY2t9fSxpQ2M1OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtleHBvcnRzLl9fZXNNb2R1bGU9ITAsZXhwb3J0cy5kZWZhdWx0PWZ1bmN0aW9uKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0saUVEZDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZ2wiLHttb250aHM6InhhbmVpcm9fZmVicmVpcm9fbWFyem9fYWJyaWxfbWFpb194dcOxb194dWxsb19hZ29zdG9fc2V0ZW1icm9fb3V0dWJyb19ub3ZlbWJyb19kZWNlbWJybyIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoieGFuLl9mZWIuX21hci5fYWJyLl9tYWkuX3h1w7EuX3h1bC5fYWdvLl9zZXQuX291dC5fbm92Ll9kZWMuIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlRXhhY3Q6ITAsd2Vla2RheXM6ImRvbWluZ29fbHVuc19tYXJ0ZXNfbcOpcmNvcmVzX3hvdmVzX3ZlbnJlc19zw6FiYWRvIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImRvbS5fbHVuLl9tYXIuX23DqXIuX3hvdi5fdmVuLl9zw6FiLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiZG9fbHVfbWFfbcOpX3hvX3ZlX3PDoSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkiLExMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQgW2RlXSBNTU1NIFtkZV0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW2hveGUgIisoMSE9PXRoaXMuaG91cnMoKT8iw6FzIjoiw6EiKSsiXSBMVCJ9LG5leHREYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW21hw7HDoSAiKygxIT09dGhpcy5ob3VycygpPyLDoXMiOiLDoSIpKyJdIExUIn0sbmV4dFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iZGRkZCBbIisoMSE9PXRoaXMuaG91cnMoKT8iw6FzIjoiYSIpKyJdIExUIn0sbGFzdERheTpmdW5jdGlvbigpe3JldHVybiJbb250ZSAiKygxIT09dGhpcy5ob3VycygpPyLDoSI6ImEiKSsiXSBMVCJ9LGxhc3RXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIltvXSBkZGRkIFtwYXNhZG8gIisoMSE9PXRoaXMuaG91cnMoKT8iw6FzIjoiYSIpKyJdIExUIn0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZTpmdW5jdGlvbihzdHIpe3JldHVybiAwPT09c3RyLmluZGV4T2YoInVuIik/Im4iK3N0cjoiZW4gIitzdHJ9LHBhc3Q6ImhhaSAlcyIsczoidW5zIHNlZ3VuZG9zIixzczoiJWQgc2VndW5kb3MiLG06InVuIG1pbnV0byIsbW06IiVkIG1pbnV0b3MiLGg6InVuaGEgaG9yYSIsaGg6IiVkIGhvcmFzIixkOiJ1biBkw61hIixkZDoiJWQgZMOtYXMiLE06InVuIG1lcyIsTU06IiVkIG1lc2VzIix5OiJ1biBhbm8iLHl5OiIlZCBhbm9zIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6Iix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0saU1vVjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgZFA9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpLCRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSx0b1ByaW1pdGl2ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhcG1UIik7JGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKl9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe1JlZmxlY3QuZGVmaW5lUHJvcGVydHkoZFAuZih7fSwxLHt2YWx1ZToxfSksMSx7dmFsdWU6Mn0pfSksIlJlZmxlY3QiLHtkZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbih0YXJnZXQscHJvcGVydHlLZXksYXR0cmlidXRlcyl7YW5PYmplY3QodGFyZ2V0KSxwcm9wZXJ0eUtleT10b1ByaW1pdGl2ZShwcm9wZXJ0eUtleSwhMCksYW5PYmplY3QoYXR0cmlidXRlcyk7dHJ5e3JldHVybiBkUC5mKHRhcmdldCxwcm9wZXJ0eUtleSxhdHRyaWJ1dGVzKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19fSl9LCJpVytTIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgbWV0YWRhdGE9X193ZWJwYWNrX3JlcXVpcmVfXygiTjZjSiIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSxnZXRQcm90b3R5cGVPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJPUDNZIiksb3JkaW5hcnlIYXNPd25NZXRhZGF0YT1tZXRhZGF0YS5oYXMsdG9NZXRhS2V5PW1ldGFkYXRhLmtleSxvcmRpbmFyeUhhc01ldGFkYXRhPWZ1bmN0aW9uKE1ldGFkYXRhS2V5LE8sUCl7aWYob3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSxPLFApKXJldHVybiEwO3ZhciBwYXJlbnQ9Z2V0UHJvdG90eXBlT2YoTyk7cmV0dXJuIG51bGwhPT1wYXJlbnQmJm9yZGluYXJ5SGFzTWV0YWRhdGEoTWV0YWRhdGFLZXkscGFyZW50LFApfTttZXRhZGF0YS5leHAoe2hhc01ldGFkYXRhOmZ1bmN0aW9uKG1ldGFkYXRhS2V5LHRhcmdldCl7cmV0dXJuIG9yZGluYXJ5SGFzTWV0YWRhdGEobWV0YWRhdGFLZXksYW5PYmplY3QodGFyZ2V0KSxhcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOnRvTWV0YUtleShhcmd1bWVudHNbMl0pKX19KX0saVl1TDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIG1vbnRoc1Nob3J0RG90PSJlbmUuX2ZlYi5fbWFyLl9hYnIuX21heS5fanVuLl9qdWwuX2Fnby5fc2VwLl9vY3QuX25vdi5fZGljLiIuc3BsaXQoIl8iKSxtb250aHNTaG9ydD0iZW5lX2ZlYl9tYXJfYWJyX21heV9qdW5fanVsX2Fnb19zZXBfb2N0X25vdl9kaWMiLnNwbGl0KCJfIiksbW9udGhzUGFyc2U9Wy9eZW5lL2ksL15mZWIvaSwvXm1hci9pLC9eYWJyL2ksL15tYXkvaSwvXmp1bi9pLC9eanVsL2ksL15hZ28vaSwvXnNlcC9pLC9eb2N0L2ksL15ub3YvaSwvXmRpYy9pXSxtb250aHNSZWdleD0vXihlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlfGVuZVwuP3xmZWJcLj98bWFyXC4/fGFiclwuP3xtYXlcLj98anVuXC4/fGp1bFwuP3xhZ29cLj98c2VwXC4/fG9jdFwuP3xub3ZcLj98ZGljXC4/KS9pO21vbWVudC5kZWZpbmVMb2NhbGUoImVzIix7bW9udGhzOiJlbmVyb19mZWJyZXJvX21hcnpvX2FicmlsX21heW9fanVuaW9fanVsaW9fYWdvc3RvX3NlcHRpZW1icmVfb2N0dWJyZV9ub3ZpZW1icmVfZGljaWVtYnJlIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OmZ1bmN0aW9uKG0sZm9ybWF0KXtyZXR1cm4gbT8vLU1NTS0vLnRlc3QoZm9ybWF0KT9tb250aHNTaG9ydFttLm1vbnRoKCldOm1vbnRoc1Nob3J0RG90W20ubW9udGgoKV06bW9udGhzU2hvcnREb3R9LG1vbnRoc1JlZ2V4Om1vbnRoc1JlZ2V4LG1vbnRoc1Nob3J0UmVnZXg6bW9udGhzUmVnZXgsbW9udGhzU3RyaWN0UmVnZXg6L14oZW5lcm98ZmVicmVyb3xtYXJ6b3xhYnJpbHxtYXlvfGp1bmlvfGp1bGlvfGFnb3N0b3xzZXB0aWVtYnJlfG9jdHVicmV8bm92aWVtYnJlfGRpY2llbWJyZSkvaSxtb250aHNTaG9ydFN0cmljdFJlZ2V4Oi9eKGVuZVwuP3xmZWJcLj98bWFyXC4/fGFiclwuP3xtYXlcLj98anVuXC4/fGp1bFwuP3xhZ29cLj98c2VwXC4/fG9jdFwuP3xub3ZcLj98ZGljXC4/KS9pLG1vbnRoc1BhcnNlOm1vbnRoc1BhcnNlLGxvbmdNb250aHNQYXJzZTptb250aHNQYXJzZSxzaG9ydE1vbnRoc1BhcnNlOm1vbnRoc1BhcnNlLHdlZWtkYXlzOiJkb21pbmdvX2x1bmVzX21hcnRlc19tacOpcmNvbGVzX2p1ZXZlc192aWVybmVzX3PDoWJhZG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiZG9tLl9sdW4uX21hci5fbWnDqS5fanVlLl92aWUuX3PDoWIuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJkb19sdV9tYV9taV9qdV92aV9zw6EiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIixMTEw6IkQgW2RlXSBNTU1NIFtkZV0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltob3kgYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LG5leHREYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW21hw7FhbmEgYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LG5leHRXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuImRkZGQgW2EgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxsYXN0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltheWVyIGEgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiJbZWxdIGRkZGQgW3Bhc2FkbyBhIGxhIisoMSE9PXRoaXMuaG91cnMoKT8icyI6IiIpKyJdIExUIn0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZW4gJXMiLHBhc3Q6ImhhY2UgJXMiLHM6InVub3Mgc2VndW5kb3MiLHNzOiIlZCBzZWd1bmRvcyIsbToidW4gbWludXRvIixtbToiJWQgbWludXRvcyIsaDoidW5hIGhvcmEiLGhoOiIlZCBob3JhcyIsZDoidW4gZMOtYSIsZGQ6IiVkIGTDrWFzIixNOiJ1biBtZXMiLE1NOiIlZCBtZXNlcyIseToidW4gYcOxbyIseXk6IiVkIGHDsW9zIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6Iix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0saWx6ZTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHt1bXVsaDpmdW5jdGlvbih1LHYpe3ZhciAkdT0rdSwkdj0rdix1MD02NTUzNSYkdSx2MD02NTUzNSYkdix1MT0kdT4+PjE2LHYxPSR2Pj4+MTYsdD0odTEqdjA+Pj4wKSsodTAqdjA+Pj4xNik7cmV0dXJuIHUxKnYxKyh0Pj4+MTYpKygodTAqdjE+Pj4wKSsoNjU1MzUmdCk+Pj4xNil9fSl9LGlvRmY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLGhhcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhYWd4IiksREVTQ1JJUFRPUlM9X193ZWJwYWNrX3JlcXVpcmVfXygibmg0ZyIpLCRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLHJlZGVmaW5lPV9fd2VicGFja19yZXF1aXJlX18oIktyb0oiKSxNRVRBPV9fd2VicGFja19yZXF1aXJlX18oIlo2dkYiKS5LRVksJGZhaWxzPV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKSxzaGFyZWQ9X193ZWJwYWNrX3JlcXVpcmVfXygiVlRlciIpLHNldFRvU3RyaW5nVGFnPV9fd2VicGFja19yZXF1aXJlX18oImZ5RHEiKSx1aWQ9X193ZWJwYWNrX3JlcXVpcmVfXygieWxxcyIpLHdrcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIiksd2tzRXh0PV9fd2VicGFja19yZXF1aXJlX18oIk44ZzMiKSx3a3NEZWZpbmU9X193ZWJwYWNrX3JlcXVpcmVfXygiT25JNyIpLGVudW1LZXlzPV9fd2VicGFja19yZXF1aXJlX18oIjFNQm4iKSxpc0FycmF5PV9fd2VicGFja19yZXF1aXJlX18oIkVXbUMiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpLHRvSU9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhQ0ZqIiksdG9QcmltaXRpdmU9X193ZWJwYWNrX3JlcXVpcmVfXygiYXBtVCIpLGNyZWF0ZURlc2M9X193ZWJwYWNrX3JlcXVpcmVfXygiUmpELyIpLF9jcmVhdGU9X193ZWJwYWNrX3JlcXVpcmVfXygiS3V0aCIpLGdPUE5FeHQ9X193ZWJwYWNrX3JlcXVpcmVfXygiZTd5ViIpLCRHT1BEPV9fd2VicGFja19yZXF1aXJlX18oIkVlbUgiKSwkRFA9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpLCRrZXlzPV9fd2VicGFja19yZXF1aXJlX18oIkRWZ0EiKSxnT1BEPSRHT1BELmYsZFA9JERQLmYsZ09QTj1nT1BORXh0LmYsJFN5bWJvbD1nbG9iYWwuU3ltYm9sLCRKU09OPWdsb2JhbC5KU09OLF9zdHJpbmdpZnk9JEpTT04mJiRKU09OLnN0cmluZ2lmeSxISURERU49d2tzKCJfaGlkZGVuIiksVE9fUFJJTUlUSVZFPXdrcygidG9QcmltaXRpdmUiKSxpc0VudW09e30ucHJvcGVydHlJc0VudW1lcmFibGUsU3ltYm9sUmVnaXN0cnk9c2hhcmVkKCJzeW1ib2wtcmVnaXN0cnkiKSxBbGxTeW1ib2xzPXNoYXJlZCgic3ltYm9scyIpLE9QU3ltYm9scz1zaGFyZWQoIm9wLXN5bWJvbHMiKSxPYmplY3RQcm90bz1PYmplY3QucHJvdG90eXBlLFVTRV9OQVRJVkU9ImZ1bmN0aW9uIj09dHlwZW9mICRTeW1ib2wsUU9iamVjdD1nbG9iYWwuUU9iamVjdCxzZXR0ZXI9IVFPYmplY3R8fCFRT2JqZWN0LnByb3RvdHlwZXx8IVFPYmplY3QucHJvdG90eXBlLmZpbmRDaGlsZCxzZXRTeW1ib2xEZXNjPURFU0NSSVBUT1JTJiYkZmFpbHMoZnVuY3Rpb24oKXtyZXR1cm4gNyE9X2NyZWF0ZShkUCh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiBkUCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihpdCxrZXksRCl7dmFyIHByb3RvRGVzYz1nT1BEKE9iamVjdFByb3RvLGtleSk7cHJvdG9EZXNjJiZkZWxldGUgT2JqZWN0UHJvdG9ba2V5XSxkUChpdCxrZXksRCkscHJvdG9EZXNjJiZpdCE9PU9iamVjdFByb3RvJiZkUChPYmplY3RQcm90byxrZXkscHJvdG9EZXNjKX06ZFAsd3JhcD1mdW5jdGlvbih0YWcpe3ZhciBzeW09QWxsU3ltYm9sc1t0YWddPV9jcmVhdGUoJFN5bWJvbC5wcm90b3R5cGUpO3JldHVybiBzeW0uX2s9dGFnLHN5bX0saXNTeW1ib2w9VVNFX05BVElWRSYmInN5bWJvbCI9PXR5cGVvZiAkU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGl0KXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGl0fTpmdW5jdGlvbihpdCl7cmV0dXJuIGl0IGluc3RhbmNlb2YgJFN5bWJvbH0sJGRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGl0LGtleSxEKXtyZXR1cm4gaXQ9PT1PYmplY3RQcm90byYmJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scyxrZXksRCksYW5PYmplY3QoaXQpLGtleT10b1ByaW1pdGl2ZShrZXksITApLGFuT2JqZWN0KEQpLGhhcyhBbGxTeW1ib2xzLGtleSk/KEQuZW51bWVyYWJsZT8oaGFzKGl0LEhJRERFTikmJml0W0hJRERFTl1ba2V5XSYmKGl0W0hJRERFTl1ba2V5XT0hMSksRD1fY3JlYXRlKEQse2VudW1lcmFibGU6Y3JlYXRlRGVzYygwLCExKX0pKTooaGFzKGl0LEhJRERFTil8fGRQKGl0LEhJRERFTixjcmVhdGVEZXNjKDEse30pKSxpdFtISURERU5dW2tleV09ITApLHNldFN5bWJvbERlc2MoaXQsa2V5LEQpKTpkUChpdCxrZXksRCl9LCRkZWZpbmVQcm9wZXJ0aWVzPWZ1bmN0aW9uKGl0LFApe2FuT2JqZWN0KGl0KTtmb3IodmFyIGtleSxrZXlzPWVudW1LZXlzKFA9dG9JT2JqZWN0KFApKSxpPTAsbD1rZXlzLmxlbmd0aDtpPGw7KSRkZWZpbmVQcm9wZXJ0eShpdCxrZXk9a2V5c1tpKytdLFBba2V5XSk7cmV0dXJuIGl0fSwkcHJvcGVydHlJc0VudW1lcmFibGU9ZnVuY3Rpb24oa2V5KXt2YXIgRT1pc0VudW0uY2FsbCh0aGlzLGtleT10b1ByaW1pdGl2ZShrZXksITApKTtyZXR1cm4hKHRoaXM9PT1PYmplY3RQcm90byYmaGFzKEFsbFN5bWJvbHMsa2V5KSYmIWhhcyhPUFN5bWJvbHMsa2V5KSkmJighKEV8fCFoYXModGhpcyxrZXkpfHwhaGFzKEFsbFN5bWJvbHMsa2V5KXx8aGFzKHRoaXMsSElEREVOKSYmdGhpc1tISURERU5dW2tleV0pfHxFKX0sJGdldE93blByb3BlcnR5RGVzY3JpcHRvcj1mdW5jdGlvbihpdCxrZXkpe2lmKGl0PXRvSU9iamVjdChpdCksa2V5PXRvUHJpbWl0aXZlKGtleSwhMCksaXQhPT1PYmplY3RQcm90b3x8IWhhcyhBbGxTeW1ib2xzLGtleSl8fGhhcyhPUFN5bWJvbHMsa2V5KSl7dmFyIEQ9Z09QRChpdCxrZXkpO3JldHVybiFEfHwhaGFzKEFsbFN5bWJvbHMsa2V5KXx8aGFzKGl0LEhJRERFTikmJml0W0hJRERFTl1ba2V5XXx8KEQuZW51bWVyYWJsZT0hMCksRH19LCRnZXRPd25Qcm9wZXJ0eU5hbWVzPWZ1bmN0aW9uKGl0KXtmb3IodmFyIGtleSxuYW1lcz1nT1BOKHRvSU9iamVjdChpdCkpLHJlc3VsdD1bXSxpPTA7bmFtZXMubGVuZ3RoPmk7KWhhcyhBbGxTeW1ib2xzLGtleT1uYW1lc1tpKytdKXx8a2V5PT1ISURERU58fGtleT09TUVUQXx8cmVzdWx0LnB1c2goa2V5KTtyZXR1cm4gcmVzdWx0fSwkZ2V0T3duUHJvcGVydHlTeW1ib2xzPWZ1bmN0aW9uKGl0KXtmb3IodmFyIGtleSxJU19PUD1pdD09PU9iamVjdFByb3RvLG5hbWVzPWdPUE4oSVNfT1A/T1BTeW1ib2xzOnRvSU9iamVjdChpdCkpLHJlc3VsdD1bXSxpPTA7bmFtZXMubGVuZ3RoPmk7KSFoYXMoQWxsU3ltYm9scyxrZXk9bmFtZXNbaSsrXSl8fElTX09QJiYhaGFzKE9iamVjdFByb3RvLGtleSl8fHJlc3VsdC5wdXNoKEFsbFN5bWJvbHNba2V5XSk7cmV0dXJuIHJlc3VsdH07VVNFX05BVElWRXx8KHJlZGVmaW5lKCgkU3ltYm9sPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mICRTeW1ib2wpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhIik7dmFyIHRhZz11aWQoMDxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1swXTp2b2lkIDApLCRzZXQ9ZnVuY3Rpb24odmFsdWUpe3RoaXM9PT1PYmplY3RQcm90byYmJHNldC5jYWxsKE9QU3ltYm9scyx2YWx1ZSksaGFzKHRoaXMsSElEREVOKSYmaGFzKHRoaXNbSElEREVOXSx0YWcpJiYodGhpc1tISURERU5dW3RhZ109ITEpLHNldFN5bWJvbERlc2ModGhpcyx0YWcsY3JlYXRlRGVzYygxLHZhbHVlKSl9O3JldHVybiBERVNDUklQVE9SUyYmc2V0dGVyJiZzZXRTeW1ib2xEZXNjKE9iamVjdFByb3RvLHRhZyx7Y29uZmlndXJhYmxlOiEwLHNldDokc2V0fSksd3JhcCh0YWcpfSkucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLCRHT1BELmY9JGdldE93blByb3BlcnR5RGVzY3JpcHRvciwkRFAuZj0kZGVmaW5lUHJvcGVydHksX193ZWJwYWNrX3JlcXVpcmVfXygia0pNeCIpLmY9Z09QTkV4dC5mPSRnZXRPd25Qcm9wZXJ0eU5hbWVzLF9fd2VicGFja19yZXF1aXJlX18oIlVxY0YiKS5mPSRwcm9wZXJ0eUlzRW51bWVyYWJsZSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJKaUVhIikuZj0kZ2V0T3duUHJvcGVydHlTeW1ib2xzLERFU0NSSVBUT1JTJiYhX193ZWJwYWNrX3JlcXVpcmVfXygiTFFBYyIpJiZyZWRlZmluZShPYmplY3RQcm90bywicHJvcGVydHlJc0VudW1lcmFibGUiLCRwcm9wZXJ0eUlzRW51bWVyYWJsZSwhMCksd2tzRXh0LmY9ZnVuY3Rpb24obmFtZSl7cmV0dXJuIHdyYXAod2tzKG5hbWUpKX0pLCRleHBvcnQoJGV4cG9ydC5HKyRleHBvcnQuVyskZXhwb3J0LkYqIVVTRV9OQVRJVkUse1N5bWJvbDokU3ltYm9sfSk7Zm9yKHZhciBlczZTeW1ib2xzPSJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxqPTA7ZXM2U3ltYm9scy5sZW5ndGg+ajspd2tzKGVzNlN5bWJvbHNbaisrXSk7Zm9yKHZhciB3ZWxsS25vd25TeW1ib2xzPSRrZXlzKHdrcy5zdG9yZSksaz0wO3dlbGxLbm93blN5bWJvbHMubGVuZ3RoPms7KXdrc0RlZmluZSh3ZWxsS25vd25TeW1ib2xzW2srK10pOyRleHBvcnQoJGV4cG9ydC5TKyRleHBvcnQuRiohVVNFX05BVElWRSwiU3ltYm9sIix7Zm9yOmZ1bmN0aW9uKGtleSl7cmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSxrZXkrPSIiKT9TeW1ib2xSZWdpc3RyeVtrZXldOlN5bWJvbFJlZ2lzdHJ5W2tleV09JFN5bWJvbChrZXkpfSxrZXlGb3I6ZnVuY3Rpb24oc3ltKXtpZighaXNTeW1ib2woc3ltKSl0aHJvdyBUeXBlRXJyb3Ioc3ltKyIgaXMgbm90IGEgc3ltYm9sISIpO2Zvcih2YXIga2V5IGluIFN5bWJvbFJlZ2lzdHJ5KWlmKFN5bWJvbFJlZ2lzdHJ5W2tleV09PT1zeW0pcmV0dXJuIGtleX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7c2V0dGVyPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtzZXR0ZXI9ITF9fSksJGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKiFVU0VfTkFUSVZFLCJPYmplY3QiLHtjcmVhdGU6ZnVuY3Rpb24oaXQsUCl7cmV0dXJuIHZvaWQgMD09PVA/X2NyZWF0ZShpdCk6JGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksUCl9LGRlZmluZVByb3BlcnR5OiRkZWZpbmVQcm9wZXJ0eSxkZWZpbmVQcm9wZXJ0aWVzOiRkZWZpbmVQcm9wZXJ0aWVzLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjokZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLGdldE93blByb3BlcnR5TmFtZXM6JGdldE93blByb3BlcnR5TmFtZXMsZ2V0T3duUHJvcGVydHlTeW1ib2xzOiRnZXRPd25Qcm9wZXJ0eVN5bWJvbHN9KSwkSlNPTiYmJGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKighVVNFX05BVElWRXx8JGZhaWxzKGZ1bmN0aW9uKCl7dmFyIFM9JFN5bWJvbCgpO3JldHVybiJbbnVsbF0iIT1fc3RyaW5naWZ5KFtTXSl8fCJ7fSIhPV9zdHJpbmdpZnkoe2E6U30pfHwie30iIT1fc3RyaW5naWZ5KE9iamVjdChTKSl9KSksIkpTT04iLHtzdHJpbmdpZnk6ZnVuY3Rpb24oaXQpe2Zvcih2YXIgcmVwbGFjZXIsJHJlcGxhY2VyLGFyZ3M9W2l0XSxpPTE7YXJndW1lbnRzLmxlbmd0aD5pOylhcmdzLnB1c2goYXJndW1lbnRzW2krK10pO2lmKCRyZXBsYWNlcj1yZXBsYWNlcj1hcmdzWzFdLChpc09iamVjdChyZXBsYWNlcil8fHZvaWQgMCE9PWl0KSYmIWlzU3ltYm9sKGl0KSlyZXR1cm4gaXNBcnJheShyZXBsYWNlcil8fChyZXBsYWNlcj1mdW5jdGlvbihrZXksdmFsdWUpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiAkcmVwbGFjZXImJih2YWx1ZT0kcmVwbGFjZXIuY2FsbCh0aGlzLGtleSx2YWx1ZSkpLCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlfSksYXJnc1sxXT1yZXBsYWNlcixfc3RyaW5naWZ5LmFwcGx5KCRKU09OLGFyZ3MpfX0pLCRTeW1ib2wucHJvdG90eXBlW1RPX1BSSU1JVElWRV18fF9fd2VicGFja19yZXF1aXJlX18oIk11a2IiKSgkU3ltYm9sLnByb3RvdHlwZSxUT19QUklNSVRJVkUsJFN5bWJvbC5wcm90b3R5cGUudmFsdWVPZiksc2V0VG9TdHJpbmdUYWcoJFN5bWJvbCwiU3ltYm9sIiksc2V0VG9TdHJpbmdUYWcoTWF0aCwiTWF0aCIsITApLHNldFRvU3RyaW5nVGFnKGdsb2JhbC5KU09OLCJKU09OIiwhMCl9LGlxNHY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiTXFibCIpLG1vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIldFcGsiKS5PYmplY3Qua2V5c30sajJEQzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGNyZWF0ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJvVm1sIiksZGVzY3JpcHRvcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJycjFpIiksc2V0VG9TdHJpbmdUYWc9X193ZWJwYWNrX3JlcXVpcmVfXygiUmZLQiIpLEl0ZXJhdG9yUHJvdG90eXBlPXt9O19fd2VicGFja19yZXF1aXJlX18oIk5lZ00iKShJdGVyYXRvclByb3RvdHlwZSxfX3dlYnBhY2tfcmVxdWlyZV9fKCJVV2lYIikoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLG1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKENvbnN0cnVjdG9yLE5BTUUsbmV4dCl7Q29uc3RydWN0b3IucHJvdG90eXBlPWNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSx7bmV4dDpkZXNjcmlwdG9yKDEsbmV4dCl9KSxzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvcixOQU1FKyIgSXRlcmF0b3IiKX19LGpFOVo6ZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiOwovKioKICAqIHZ1ZS1yb3V0ZXIgdjMuMC4xCiAgKiAoYykgMjAxNyBFdmFuIFlvdQogICogQGxpY2Vuc2UgTUlUCiAgKi9mdW5jdGlvbiB3YXJuKGNvbmRpdGlvbixtZXNzYWdlKXswfWZ1bmN0aW9uIGlzRXJyb3IoZXJyKXtyZXR1cm4tMTxPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZXJyKS5pbmRleE9mKCJFcnJvciIpfXZhciBWaWV3PXtuYW1lOiJyb3V0ZXItdmlldyIsZnVuY3Rpb25hbDohMCxwcm9wczp7bmFtZTp7dHlwZTpTdHJpbmcsZGVmYXVsdDoiZGVmYXVsdCJ9fSxyZW5kZXI6ZnVuY3Rpb24oXyxyZWYpe3ZhciBwcm9wcz1yZWYucHJvcHMsY2hpbGRyZW49cmVmLmNoaWxkcmVuLHBhcmVudD1yZWYucGFyZW50LGRhdGE9cmVmLmRhdGE7ZGF0YS5yb3V0ZXJWaWV3PSEwO2Zvcih2YXIgaD1wYXJlbnQuJGNyZWF0ZUVsZW1lbnQsbmFtZT1wcm9wcy5uYW1lLHJvdXRlPXBhcmVudC4kcm91dGUsY2FjaGU9cGFyZW50Ll9yb3V0ZXJWaWV3Q2FjaGV8fChwYXJlbnQuX3JvdXRlclZpZXdDYWNoZT17fSksZGVwdGg9MCxpbmFjdGl2ZT0hMTtwYXJlbnQmJnBhcmVudC5fcm91dGVyUm9vdCE9PXBhcmVudDspcGFyZW50LiR2bm9kZSYmcGFyZW50LiR2bm9kZS5kYXRhLnJvdXRlclZpZXcmJmRlcHRoKysscGFyZW50Ll9pbmFjdGl2ZSYmKGluYWN0aXZlPSEwKSxwYXJlbnQ9cGFyZW50LiRwYXJlbnQ7aWYoZGF0YS5yb3V0ZXJWaWV3RGVwdGg9ZGVwdGgsaW5hY3RpdmUpcmV0dXJuIGgoY2FjaGVbbmFtZV0sZGF0YSxjaGlsZHJlbik7dmFyIG1hdGNoZWQ9cm91dGUubWF0Y2hlZFtkZXB0aF07aWYoIW1hdGNoZWQpcmV0dXJuIGNhY2hlW25hbWVdPW51bGwsaCgpO3ZhciBjb21wb25lbnQ9Y2FjaGVbbmFtZV09bWF0Y2hlZC5jb21wb25lbnRzW25hbWVdO2RhdGEucmVnaXN0ZXJSb3V0ZUluc3RhbmNlPWZ1bmN0aW9uKHZtLHZhbCl7dmFyIGN1cnJlbnQ9bWF0Y2hlZC5pbnN0YW5jZXNbbmFtZV07KHZhbCYmY3VycmVudCE9PXZtfHwhdmFsJiZjdXJyZW50PT09dm0pJiYobWF0Y2hlZC5pbnN0YW5jZXNbbmFtZV09dmFsKX0sKGRhdGEuaG9va3x8KGRhdGEuaG9vaz17fSkpLnByZXBhdGNoPWZ1bmN0aW9uKF8sdm5vZGUpe21hdGNoZWQuaW5zdGFuY2VzW25hbWVdPXZub2RlLmNvbXBvbmVudEluc3RhbmNlfTt2YXIgcHJvcHNUb1Bhc3M9ZGF0YS5wcm9wcz1mdW5jdGlvbihyb3V0ZSxjb25maWcpe3N3aXRjaCh0eXBlb2YgY29uZmlnKXtjYXNlInVuZGVmaW5lZCI6cmV0dXJuO2Nhc2Uib2JqZWN0IjpyZXR1cm4gY29uZmlnO2Nhc2UiZnVuY3Rpb24iOnJldHVybiBjb25maWcocm91dGUpO2Nhc2UiYm9vbGVhbiI6cmV0dXJuIGNvbmZpZz9yb3V0ZS5wYXJhbXM6dm9pZCAwO2RlZmF1bHQ6MH19KHJvdXRlLG1hdGNoZWQucHJvcHMmJm1hdGNoZWQucHJvcHNbbmFtZV0pO2lmKHByb3BzVG9QYXNzKXtwcm9wc1RvUGFzcz1kYXRhLnByb3BzPWZ1bmN0aW9uKHRvLGZyb20pe2Zvcih2YXIga2V5IGluIGZyb20pdG9ba2V5XT1mcm9tW2tleV07cmV0dXJuIHRvfSh7fSxwcm9wc1RvUGFzcyk7dmFyIGF0dHJzPWRhdGEuYXR0cnM9ZGF0YS5hdHRyc3x8e307Zm9yKHZhciBrZXkgaW4gcHJvcHNUb1Bhc3MpY29tcG9uZW50LnByb3BzJiZrZXkgaW4gY29tcG9uZW50LnByb3BzfHwoYXR0cnNba2V5XT1wcm9wc1RvUGFzc1trZXldLGRlbGV0ZSBwcm9wc1RvUGFzc1trZXldKX1yZXR1cm4gaChjb21wb25lbnQsZGF0YSxjaGlsZHJlbil9fTt2YXIgZW5jb2RlUmVzZXJ2ZVJFPS9bIScoKSpdL2csZW5jb2RlUmVzZXJ2ZVJlcGxhY2VyPWZ1bmN0aW9uKGMpe3JldHVybiIlIitjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpfSxjb21tYVJFPS8lMkMvZyxlbmNvZGU9ZnVuY3Rpb24oc3RyKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cikucmVwbGFjZShlbmNvZGVSZXNlcnZlUkUsZW5jb2RlUmVzZXJ2ZVJlcGxhY2VyKS5yZXBsYWNlKGNvbW1hUkUsIiwiKX0sZGVjb2RlPWRlY29kZVVSSUNvbXBvbmVudDtmdW5jdGlvbiBwYXJzZVF1ZXJ5KHF1ZXJ5KXt2YXIgcmVzPXt9O3JldHVybihxdWVyeT1xdWVyeS50cmltKCkucmVwbGFjZSgvXihcP3wjfCYpLywiIikpJiZxdWVyeS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pe3ZhciBwYXJ0cz1wYXJhbS5yZXBsYWNlKC9cKy9nLCIgIikuc3BsaXQoIj0iKSxrZXk9ZGVjb2RlKHBhcnRzLnNoaWZ0KCkpLHZhbD0wPHBhcnRzLmxlbmd0aD9kZWNvZGUocGFydHMuam9pbigiPSIpKTpudWxsO3ZvaWQgMD09PXJlc1trZXldP3Jlc1trZXldPXZhbDpBcnJheS5pc0FycmF5KHJlc1trZXldKT9yZXNba2V5XS5wdXNoKHZhbCk6cmVzW2tleV09W3Jlc1trZXldLHZhbF19KSxyZXN9ZnVuY3Rpb24gc3RyaW5naWZ5UXVlcnkob2JqKXt2YXIgcmVzPW9iaj9PYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbihrZXkpe3ZhciB2YWw9b2JqW2tleV07aWYodm9pZCAwPT09dmFsKXJldHVybiIiO2lmKG51bGw9PT12YWwpcmV0dXJuIGVuY29kZShrZXkpO2lmKEFycmF5LmlzQXJyYXkodmFsKSl7dmFyIHJlc3VsdD1bXTtyZXR1cm4gdmFsLmZvckVhY2goZnVuY3Rpb24odmFsMil7dm9pZCAwIT09dmFsMiYmKG51bGw9PT12YWwyP3Jlc3VsdC5wdXNoKGVuY29kZShrZXkpKTpyZXN1bHQucHVzaChlbmNvZGUoa2V5KSsiPSIrZW5jb2RlKHZhbDIpKSl9KSxyZXN1bHQuam9pbigiJiIpfXJldHVybiBlbmNvZGUoa2V5KSsiPSIrZW5jb2RlKHZhbCl9KS5maWx0ZXIoZnVuY3Rpb24oeCl7cmV0dXJuIDA8eC5sZW5ndGh9KS5qb2luKCImIik6bnVsbDtyZXR1cm4gcmVzPyI/IityZXM6IiJ9dmFyIHRyYWlsaW5nU2xhc2hSRT0vXC8/JC87ZnVuY3Rpb24gY3JlYXRlUm91dGUocmVjb3JkLGxvY2F0aW9uLHJlZGlyZWN0ZWRGcm9tLHJvdXRlcil7dmFyIHN0cmluZ2lmeVF1ZXJ5JCQxPXJvdXRlciYmcm91dGVyLm9wdGlvbnMuc3RyaW5naWZ5UXVlcnkscXVlcnk9bG9jYXRpb24ucXVlcnl8fHt9O3RyeXtxdWVyeT1jbG9uZShxdWVyeSl9Y2F0Y2goZSl7fXZhciByb3V0ZT17bmFtZTpsb2NhdGlvbi5uYW1lfHxyZWNvcmQmJnJlY29yZC5uYW1lLG1ldGE6cmVjb3JkJiZyZWNvcmQubWV0YXx8e30scGF0aDpsb2NhdGlvbi5wYXRofHwiLyIsaGFzaDpsb2NhdGlvbi5oYXNofHwiIixxdWVyeTpxdWVyeSxwYXJhbXM6bG9jYXRpb24ucGFyYW1zfHx7fSxmdWxsUGF0aDpnZXRGdWxsUGF0aChsb2NhdGlvbixzdHJpbmdpZnlRdWVyeSQkMSksbWF0Y2hlZDpyZWNvcmQ/ZnVuY3Rpb24ocmVjb3JkKXt2YXIgcmVzPVtdO2Zvcig7cmVjb3JkOylyZXMudW5zaGlmdChyZWNvcmQpLHJlY29yZD1yZWNvcmQucGFyZW50O3JldHVybiByZXN9KHJlY29yZCk6W119O3JldHVybiByZWRpcmVjdGVkRnJvbSYmKHJvdXRlLnJlZGlyZWN0ZWRGcm9tPWdldEZ1bGxQYXRoKHJlZGlyZWN0ZWRGcm9tLHN0cmluZ2lmeVF1ZXJ5JCQxKSksT2JqZWN0LmZyZWV6ZShyb3V0ZSl9ZnVuY3Rpb24gY2xvbmUodmFsdWUpe2lmKEFycmF5LmlzQXJyYXkodmFsdWUpKXJldHVybiB2YWx1ZS5tYXAoY2xvbmUpO2lmKHZhbHVlJiYib2JqZWN0Ij09dHlwZW9mIHZhbHVlKXt2YXIgcmVzPXt9O2Zvcih2YXIga2V5IGluIHZhbHVlKXJlc1trZXldPWNsb25lKHZhbHVlW2tleV0pO3JldHVybiByZXN9cmV0dXJuIHZhbHVlfXZhciBTVEFSVD1jcmVhdGVSb3V0ZShudWxsLHtwYXRoOiIvIn0pO2Z1bmN0aW9uIGdldEZ1bGxQYXRoKHJlZixfc3RyaW5naWZ5UXVlcnkpe3ZhciBwYXRoPXJlZi5wYXRoLHF1ZXJ5PXJlZi5xdWVyeTt2b2lkIDA9PT1xdWVyeSYmKHF1ZXJ5PXt9KTt2YXIgaGFzaD1yZWYuaGFzaDtyZXR1cm4gdm9pZCAwPT09aGFzaCYmKGhhc2g9IiIpLChwYXRofHwiLyIpKyhfc3RyaW5naWZ5UXVlcnl8fHN0cmluZ2lmeVF1ZXJ5KShxdWVyeSkraGFzaH1mdW5jdGlvbiBpc1NhbWVSb3V0ZShhLGIpe3JldHVybiBiPT09U1RBUlQ/YT09PWI6ISFiJiYoYS5wYXRoJiZiLnBhdGg/YS5wYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCIiKT09PWIucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwiIikmJmEuaGFzaD09PWIuaGFzaCYmaXNPYmplY3RFcXVhbChhLnF1ZXJ5LGIucXVlcnkpOiEoIWEubmFtZXx8IWIubmFtZSkmJihhLm5hbWU9PT1iLm5hbWUmJmEuaGFzaD09PWIuaGFzaCYmaXNPYmplY3RFcXVhbChhLnF1ZXJ5LGIucXVlcnkpJiZpc09iamVjdEVxdWFsKGEucGFyYW1zLGIucGFyYW1zKSkpfWZ1bmN0aW9uIGlzT2JqZWN0RXF1YWwoYSxiKXtpZih2b2lkIDA9PT1hJiYoYT17fSksdm9pZCAwPT09YiYmKGI9e30pLCFhfHwhYilyZXR1cm4gYT09PWI7dmFyIGFLZXlzPU9iamVjdC5rZXlzKGEpLGJLZXlzPU9iamVjdC5rZXlzKGIpO3JldHVybiBhS2V5cy5sZW5ndGg9PT1iS2V5cy5sZW5ndGgmJmFLZXlzLmV2ZXJ5KGZ1bmN0aW9uKGtleSl7dmFyIGFWYWw9YVtrZXldLGJWYWw9YltrZXldO3JldHVybiJvYmplY3QiPT10eXBlb2YgYVZhbCYmIm9iamVjdCI9PXR5cGVvZiBiVmFsP2lzT2JqZWN0RXF1YWwoYVZhbCxiVmFsKTpTdHJpbmcoYVZhbCk9PT1TdHJpbmcoYlZhbCl9KX12YXIgX1Z1ZSx0b1R5cGVzPVtTdHJpbmcsT2JqZWN0XSxldmVudFR5cGVzPVtTdHJpbmcsQXJyYXldLExpbms9e25hbWU6InJvdXRlci1saW5rIixwcm9wczp7dG86e3R5cGU6dG9UeXBlcyxyZXF1aXJlZDohMH0sdGFnOnt0eXBlOlN0cmluZyxkZWZhdWx0OiJhIn0sZXhhY3Q6Qm9vbGVhbixhcHBlbmQ6Qm9vbGVhbixyZXBsYWNlOkJvb2xlYW4sYWN0aXZlQ2xhc3M6U3RyaW5nLGV4YWN0QWN0aXZlQ2xhc3M6U3RyaW5nLGV2ZW50Ont0eXBlOmV2ZW50VHlwZXMsZGVmYXVsdDoiY2xpY2sifX0scmVuZGVyOmZ1bmN0aW9uKGgpe3ZhciB0aGlzJDE9dGhpcyxyb3V0ZXI9dGhpcy4kcm91dGVyLGN1cnJlbnQ9dGhpcy4kcm91dGUscmVmPXJvdXRlci5yZXNvbHZlKHRoaXMudG8sY3VycmVudCx0aGlzLmFwcGVuZCksbG9jYXRpb249cmVmLmxvY2F0aW9uLHJvdXRlPXJlZi5yb3V0ZSxocmVmPXJlZi5ocmVmLGNsYXNzZXM9e30sZ2xvYmFsQWN0aXZlQ2xhc3M9cm91dGVyLm9wdGlvbnMubGlua0FjdGl2ZUNsYXNzLGdsb2JhbEV4YWN0QWN0aXZlQ2xhc3M9cm91dGVyLm9wdGlvbnMubGlua0V4YWN0QWN0aXZlQ2xhc3MsYWN0aXZlQ2xhc3NGYWxsYmFjaz1udWxsPT1nbG9iYWxBY3RpdmVDbGFzcz8icm91dGVyLWxpbmstYWN0aXZlIjpnbG9iYWxBY3RpdmVDbGFzcyxleGFjdEFjdGl2ZUNsYXNzRmFsbGJhY2s9bnVsbD09Z2xvYmFsRXhhY3RBY3RpdmVDbGFzcz8icm91dGVyLWxpbmstZXhhY3QtYWN0aXZlIjpnbG9iYWxFeGFjdEFjdGl2ZUNsYXNzLGFjdGl2ZUNsYXNzPW51bGw9PXRoaXMuYWN0aXZlQ2xhc3M/YWN0aXZlQ2xhc3NGYWxsYmFjazp0aGlzLmFjdGl2ZUNsYXNzLGV4YWN0QWN0aXZlQ2xhc3M9bnVsbD09dGhpcy5leGFjdEFjdGl2ZUNsYXNzP2V4YWN0QWN0aXZlQ2xhc3NGYWxsYmFjazp0aGlzLmV4YWN0QWN0aXZlQ2xhc3MsY29tcGFyZVRhcmdldD1sb2NhdGlvbi5wYXRoP2NyZWF0ZVJvdXRlKG51bGwsbG9jYXRpb24sbnVsbCxyb3V0ZXIpOnJvdXRlO2NsYXNzZXNbZXhhY3RBY3RpdmVDbGFzc109aXNTYW1lUm91dGUoY3VycmVudCxjb21wYXJlVGFyZ2V0KSxjbGFzc2VzW2FjdGl2ZUNsYXNzXT10aGlzLmV4YWN0P2NsYXNzZXNbZXhhY3RBY3RpdmVDbGFzc106ZnVuY3Rpb24oY3VycmVudCx0YXJnZXQpe3JldHVybiAwPT09Y3VycmVudC5wYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCIvIikuaW5kZXhPZih0YXJnZXQucGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwiLyIpKSYmKCF0YXJnZXQuaGFzaHx8Y3VycmVudC5oYXNoPT09dGFyZ2V0Lmhhc2gpJiZmdW5jdGlvbihjdXJyZW50LHRhcmdldCl7Zm9yKHZhciBrZXkgaW4gdGFyZ2V0KWlmKCEoa2V5IGluIGN1cnJlbnQpKXJldHVybiExO3JldHVybiEwfShjdXJyZW50LnF1ZXJ5LHRhcmdldC5xdWVyeSl9KGN1cnJlbnQsY29tcGFyZVRhcmdldCk7dmFyIGhhbmRsZXI9ZnVuY3Rpb24oZSl7Z3VhcmRFdmVudChlKSYmKHRoaXMkMS5yZXBsYWNlP3JvdXRlci5yZXBsYWNlKGxvY2F0aW9uKTpyb3V0ZXIucHVzaChsb2NhdGlvbikpfSxvbj17Y2xpY2s6Z3VhcmRFdmVudH07QXJyYXkuaXNBcnJheSh0aGlzLmV2ZW50KT90aGlzLmV2ZW50LmZvckVhY2goZnVuY3Rpb24oZSl7b25bZV09aGFuZGxlcn0pOm9uW3RoaXMuZXZlbnRdPWhhbmRsZXI7dmFyIGRhdGE9e2NsYXNzOmNsYXNzZXN9O2lmKCJhIj09PXRoaXMudGFnKWRhdGEub249b24sZGF0YS5hdHRycz17aHJlZjpocmVmfTtlbHNle3ZhciBhPWZ1bmN0aW9uIGZpbmRBbmNob3IoY2hpbGRyZW4pe2lmKGNoaWxkcmVuKWZvcih2YXIgY2hpbGQsaT0wO2k8Y2hpbGRyZW4ubGVuZ3RoO2krKyl7aWYoImEiPT09KGNoaWxkPWNoaWxkcmVuW2ldKS50YWcpcmV0dXJuIGNoaWxkO2lmKGNoaWxkLmNoaWxkcmVuJiYoY2hpbGQ9ZmluZEFuY2hvcihjaGlsZC5jaGlsZHJlbikpKXJldHVybiBjaGlsZH19KHRoaXMuJHNsb3RzLmRlZmF1bHQpO2lmKGEpe2EuaXNTdGF0aWM9ITE7dmFyIGV4dGVuZD1fVnVlLnV0aWwuZXh0ZW5kOyhhLmRhdGE9ZXh0ZW5kKHt9LGEuZGF0YSkpLm9uPW9uLChhLmRhdGEuYXR0cnM9ZXh0ZW5kKHt9LGEuZGF0YS5hdHRycykpLmhyZWY9aHJlZn1lbHNlIGRhdGEub249b259cmV0dXJuIGgodGhpcy50YWcsZGF0YSx0aGlzLiRzbG90cy5kZWZhdWx0KX19O2Z1bmN0aW9uIGd1YXJkRXZlbnQoZSl7aWYoIShlLm1ldGFLZXl8fGUuYWx0S2V5fHxlLmN0cmxLZXl8fGUuc2hpZnRLZXl8fGUuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwIT09ZS5idXR0b24mJjAhPT1lLmJ1dHRvbikpe2lmKGUuY3VycmVudFRhcmdldCYmZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSl7dmFyIHRhcmdldD1lLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCJ0YXJnZXQiKTtpZigvXGJfYmxhbmtcYi9pLnRlc3QodGFyZ2V0KSlyZXR1cm59cmV0dXJuIGUucHJldmVudERlZmF1bHQmJmUucHJldmVudERlZmF1bHQoKSwhMH19ZnVuY3Rpb24gaW5zdGFsbChWdWUpe2lmKCFpbnN0YWxsLmluc3RhbGxlZHx8X1Z1ZSE9PVZ1ZSl7aW5zdGFsbC5pbnN0YWxsZWQ9ITA7dmFyIGlzRGVmPWZ1bmN0aW9uKHYpe3JldHVybiB2b2lkIDAhPT12fSxyZWdpc3Rlckluc3RhbmNlPWZ1bmN0aW9uKHZtLGNhbGxWYWwpe3ZhciBpPXZtLiRvcHRpb25zLl9wYXJlbnRWbm9kZTtpc0RlZihpKSYmaXNEZWYoaT1pLmRhdGEpJiZpc0RlZihpPWkucmVnaXN0ZXJSb3V0ZUluc3RhbmNlKSYmaSh2bSxjYWxsVmFsKX07KF9WdWU9VnVlKS5taXhpbih7YmVmb3JlQ3JlYXRlOmZ1bmN0aW9uKCl7aXNEZWYodGhpcy4kb3B0aW9ucy5yb3V0ZXIpPygodGhpcy5fcm91dGVyUm9vdD10aGlzKS5fcm91dGVyPXRoaXMuJG9wdGlvbnMucm91dGVyLHRoaXMuX3JvdXRlci5pbml0KHRoaXMpLFZ1ZS51dGlsLmRlZmluZVJlYWN0aXZlKHRoaXMsIl9yb3V0ZSIsdGhpcy5fcm91dGVyLmhpc3RvcnkuY3VycmVudCkpOnRoaXMuX3JvdXRlclJvb3Q9dGhpcy4kcGFyZW50JiZ0aGlzLiRwYXJlbnQuX3JvdXRlclJvb3R8fHRoaXMscmVnaXN0ZXJJbnN0YW5jZSh0aGlzLHRoaXMpfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtyZWdpc3Rlckluc3RhbmNlKHRoaXMpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCIkcm91dGVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JvdXRlclJvb3QuX3JvdXRlcn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwiJHJvdXRlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JvdXRlclJvb3QuX3JvdXRlfX0pLFZ1ZS5jb21wb25lbnQoInJvdXRlci12aWV3IixWaWV3KSxWdWUuY29tcG9uZW50KCJyb3V0ZXItbGluayIsTGluayk7dmFyIHN0cmF0cz1WdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztzdHJhdHMuYmVmb3JlUm91dGVFbnRlcj1zdHJhdHMuYmVmb3JlUm91dGVMZWF2ZT1zdHJhdHMuYmVmb3JlUm91dGVVcGRhdGU9c3RyYXRzLmNyZWF0ZWR9fXZhciBpbkJyb3dzZXI9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c7ZnVuY3Rpb24gcmVzb2x2ZVBhdGgocmVsYXRpdmUsYmFzZSxhcHBlbmQpe3ZhciBmaXJzdENoYXI9cmVsYXRpdmUuY2hhckF0KDApO2lmKCIvIj09PWZpcnN0Q2hhcilyZXR1cm4gcmVsYXRpdmU7aWYoIj8iPT09Zmlyc3RDaGFyfHwiIyI9PT1maXJzdENoYXIpcmV0dXJuIGJhc2UrcmVsYXRpdmU7dmFyIHN0YWNrPWJhc2Uuc3BsaXQoIi8iKTthcHBlbmQmJnN0YWNrW3N0YWNrLmxlbmd0aC0xXXx8c3RhY2sucG9wKCk7Zm9yKHZhciBzZWdtZW50cz1yZWxhdGl2ZS5yZXBsYWNlKC9eXC8vLCIiKS5zcGxpdCgiLyIpLGk9MDtpPHNlZ21lbnRzLmxlbmd0aDtpKyspe3ZhciBzZWdtZW50PXNlZ21lbnRzW2ldOyIuLiI9PT1zZWdtZW50P3N0YWNrLnBvcCgpOiIuIiE9PXNlZ21lbnQmJnN0YWNrLnB1c2goc2VnbWVudCl9cmV0dXJuIiIhPT1zdGFja1swXSYmc3RhY2sudW5zaGlmdCgiIiksc3RhY2suam9pbigiLyIpfWZ1bmN0aW9uIGNsZWFuUGF0aChwYXRoKXtyZXR1cm4gcGF0aC5yZXBsYWNlKC9cL1wvL2csIi8iKX12YXIgaXNhcnJheT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhcnIpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpfSxwYXRoVG9SZWdleHBfMT1wYXRoVG9SZWdleHAscGFyc2VfMT1wYXJzZSxjb21waWxlXzE9ZnVuY3Rpb24oc3RyLG9wdGlvbnMpe3JldHVybiB0b2tlbnNUb0Z1bmN0aW9uKHBhcnNlKHN0cixvcHRpb25zKSl9LHRva2Vuc1RvRnVuY3Rpb25fMT10b2tlbnNUb0Z1bmN0aW9uLHRva2Vuc1RvUmVnRXhwXzE9dG9rZW5zVG9SZWdFeHAsUEFUSF9SRUdFWFA9bmV3IFJlZ0V4cChbIihcXFxcLikiLCIoW1xcLy5dKT8oPzooPzpcXDooXFx3KykoPzpcXCgoKD86XFxcXC58W15cXFxcKCldKSspXFwpKT98XFwoKCg/OlxcXFwufFteXFxcXCgpXSkrKVxcKSkoWysqP10pP3woXFwqKSkiXS5qb2luKCJ8IiksImciKTtmdW5jdGlvbiBwYXJzZShzdHIsb3B0aW9ucyl7Zm9yKHZhciByZXMsdG9rZW5zPVtdLGtleT0wLGluZGV4PTAscGF0aD0iIixkZWZhdWx0RGVsaW1pdGVyPW9wdGlvbnMmJm9wdGlvbnMuZGVsaW1pdGVyfHwiLyI7bnVsbCE9KHJlcz1QQVRIX1JFR0VYUC5leGVjKHN0cikpOyl7dmFyIG09cmVzWzBdLGVzY2FwZWQ9cmVzWzFdLG9mZnNldD1yZXMuaW5kZXg7aWYocGF0aCs9c3RyLnNsaWNlKGluZGV4LG9mZnNldCksaW5kZXg9b2Zmc2V0K20ubGVuZ3RoLGVzY2FwZWQpcGF0aCs9ZXNjYXBlZFsxXTtlbHNle3ZhciBuZXh0PXN0cltpbmRleF0scHJlZml4PXJlc1syXSxuYW1lPXJlc1szXSxjYXB0dXJlPXJlc1s0XSxncm91cD1yZXNbNV0sbW9kaWZpZXI9cmVzWzZdLGFzdGVyaXNrPXJlc1s3XTtwYXRoJiYodG9rZW5zLnB1c2gocGF0aCkscGF0aD0iIik7dmFyIHBhcnRpYWw9bnVsbCE9cHJlZml4JiZudWxsIT1uZXh0JiZuZXh0IT09cHJlZml4LHJlcGVhdD0iKyI9PT1tb2RpZmllcnx8IioiPT09bW9kaWZpZXIsb3B0aW9uYWw9Ij8iPT09bW9kaWZpZXJ8fCIqIj09PW1vZGlmaWVyLGRlbGltaXRlcj1yZXNbMl18fGRlZmF1bHREZWxpbWl0ZXIscGF0dGVybj1jYXB0dXJlfHxncm91cDt0b2tlbnMucHVzaCh7bmFtZTpuYW1lfHxrZXkrKyxwcmVmaXg6cHJlZml4fHwiIixkZWxpbWl0ZXI6ZGVsaW1pdGVyLG9wdGlvbmFsOm9wdGlvbmFsLHJlcGVhdDpyZXBlYXQscGFydGlhbDpwYXJ0aWFsLGFzdGVyaXNrOiEhYXN0ZXJpc2sscGF0dGVybjpwYXR0ZXJuP2VzY2FwZUdyb3VwKHBhdHRlcm4pOmFzdGVyaXNrPyIuKiI6IlteIitlc2NhcGVTdHJpbmcoZGVsaW1pdGVyKSsiXSs/In0pfX1yZXR1cm4gaW5kZXg8c3RyLmxlbmd0aCYmKHBhdGgrPXN0ci5zdWJzdHIoaW5kZXgpKSxwYXRoJiZ0b2tlbnMucHVzaChwYXRoKSx0b2tlbnN9ZnVuY3Rpb24gZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5KHN0cil7cmV0dXJuIGVuY29kZVVSSShzdHIpLnJlcGxhY2UoL1tcLz8jXS9nLGZ1bmN0aW9uKGMpe3JldHVybiIlIitjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCl9KX1mdW5jdGlvbiB0b2tlbnNUb0Z1bmN0aW9uKHRva2Vucyl7Zm9yKHZhciBtYXRjaGVzPW5ldyBBcnJheSh0b2tlbnMubGVuZ3RoKSxpPTA7aTx0b2tlbnMubGVuZ3RoO2krKykib2JqZWN0Ij09dHlwZW9mIHRva2Vuc1tpXSYmKG1hdGNoZXNbaV09bmV3IFJlZ0V4cCgiXig/OiIrdG9rZW5zW2ldLnBhdHRlcm4rIikkIikpO3JldHVybiBmdW5jdGlvbihvYmosb3B0cyl7Zm9yKHZhciBwYXRoPSIiLGRhdGE9b2JqfHx7fSxlbmNvZGU9KG9wdHN8fHt9KS5wcmV0dHk/ZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5OmVuY29kZVVSSUNvbXBvbmVudCxpPTA7aTx0b2tlbnMubGVuZ3RoO2krKyl7dmFyIHRva2VuPXRva2Vuc1tpXTtpZigic3RyaW5nIiE9dHlwZW9mIHRva2VuKXt2YXIgc2VnbWVudCx2YWx1ZT1kYXRhW3Rva2VuLm5hbWVdO2lmKG51bGw9PXZhbHVlKXtpZih0b2tlbi5vcHRpb25hbCl7dG9rZW4ucGFydGlhbCYmKHBhdGgrPXRva2VuLnByZWZpeCk7Y29udGludWV9dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgIicrdG9rZW4ubmFtZSsnIiB0byBiZSBkZWZpbmVkJyl9aWYoaXNhcnJheSh2YWx1ZSkpe2lmKCF0b2tlbi5yZXBlYXQpdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgIicrdG9rZW4ubmFtZSsnIiB0byBub3QgcmVwZWF0LCBidXQgcmVjZWl2ZWQgYCcrSlNPTi5zdHJpbmdpZnkodmFsdWUpKyJgIik7aWYoMD09PXZhbHVlLmxlbmd0aCl7aWYodG9rZW4ub3B0aW9uYWwpY29udGludWU7dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgIicrdG9rZW4ubmFtZSsnIiB0byBub3QgYmUgZW1wdHknKX1mb3IodmFyIGo9MDtqPHZhbHVlLmxlbmd0aDtqKyspe2lmKHNlZ21lbnQ9ZW5jb2RlKHZhbHVlW2pdKSwhbWF0Y2hlc1tpXS50ZXN0KHNlZ21lbnQpKXRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGFsbCAiJyt0b2tlbi5uYW1lKyciIHRvIG1hdGNoICInK3Rva2VuLnBhdHRlcm4rJyIsIGJ1dCByZWNlaXZlZCBgJytKU09OLnN0cmluZ2lmeShzZWdtZW50KSsiYCIpO3BhdGgrPSgwPT09aj90b2tlbi5wcmVmaXg6dG9rZW4uZGVsaW1pdGVyKStzZWdtZW50fX1lbHNle2lmKHNlZ21lbnQ9dG9rZW4uYXN0ZXJpc2s/ZW5jb2RlVVJJKHZhbHVlKS5yZXBsYWNlKC9bPyNdL2csZnVuY3Rpb24oYyl7cmV0dXJuIiUiK2MuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKX0pOmVuY29kZSh2YWx1ZSksIW1hdGNoZXNbaV0udGVzdChzZWdtZW50KSl0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCAiJyt0b2tlbi5uYW1lKyciIHRvIG1hdGNoICInK3Rva2VuLnBhdHRlcm4rJyIsIGJ1dCByZWNlaXZlZCAiJytzZWdtZW50KyciJyk7cGF0aCs9dG9rZW4ucHJlZml4K3NlZ21lbnR9fWVsc2UgcGF0aCs9dG9rZW59cmV0dXJuIHBhdGh9fWZ1bmN0aW9uIGVzY2FwZVN0cmluZyhzdHIpe3JldHVybiBzdHIucmVwbGFjZSgvKFsuKyo/PV4hOiR7fSgpW1xdfFwvXFxdKS9nLCJcXCQxIil9ZnVuY3Rpb24gZXNjYXBlR3JvdXAoZ3JvdXApe3JldHVybiBncm91cC5yZXBsYWNlKC8oWz0hOiRcLygpXSkvZywiXFwkMSIpfWZ1bmN0aW9uIGF0dGFjaEtleXMocmUsa2V5cyl7cmV0dXJuIHJlLmtleXM9a2V5cyxyZX1mdW5jdGlvbiBmbGFncyhvcHRpb25zKXtyZXR1cm4gb3B0aW9ucy5zZW5zaXRpdmU/IiI6ImkifWZ1bmN0aW9uIHRva2Vuc1RvUmVnRXhwKHRva2VucyxrZXlzLG9wdGlvbnMpe2lzYXJyYXkoa2V5cyl8fChvcHRpb25zPWtleXN8fG9wdGlvbnMsa2V5cz1bXSk7Zm9yKHZhciBzdHJpY3Q9KG9wdGlvbnM9b3B0aW9uc3x8e30pLnN0cmljdCxlbmQ9ITEhPT1vcHRpb25zLmVuZCxyb3V0ZT0iIixpPTA7aTx0b2tlbnMubGVuZ3RoO2krKyl7dmFyIHRva2VuPXRva2Vuc1tpXTtpZigic3RyaW5nIj09dHlwZW9mIHRva2VuKXJvdXRlKz1lc2NhcGVTdHJpbmcodG9rZW4pO2Vsc2V7dmFyIHByZWZpeD1lc2NhcGVTdHJpbmcodG9rZW4ucHJlZml4KSxjYXB0dXJlPSIoPzoiK3Rva2VuLnBhdHRlcm4rIikiO2tleXMucHVzaCh0b2tlbiksdG9rZW4ucmVwZWF0JiYoY2FwdHVyZSs9Iig/OiIrcHJlZml4K2NhcHR1cmUrIikqIikscm91dGUrPWNhcHR1cmU9dG9rZW4ub3B0aW9uYWw/dG9rZW4ucGFydGlhbD9wcmVmaXgrIigiK2NhcHR1cmUrIik/IjoiKD86IitwcmVmaXgrIigiK2NhcHR1cmUrIikpPyI6cHJlZml4KyIoIitjYXB0dXJlKyIpIn19dmFyIGRlbGltaXRlcj1lc2NhcGVTdHJpbmcob3B0aW9ucy5kZWxpbWl0ZXJ8fCIvIiksZW5kc1dpdGhEZWxpbWl0ZXI9cm91dGUuc2xpY2UoLWRlbGltaXRlci5sZW5ndGgpPT09ZGVsaW1pdGVyO3JldHVybiBzdHJpY3R8fChyb3V0ZT0oZW5kc1dpdGhEZWxpbWl0ZXI/cm91dGUuc2xpY2UoMCwtZGVsaW1pdGVyLmxlbmd0aCk6cm91dGUpKyIoPzoiK2RlbGltaXRlcisiKD89JCkpPyIpLHJvdXRlKz1lbmQ/IiQiOnN0cmljdCYmZW5kc1dpdGhEZWxpbWl0ZXI/IiI6Iig/PSIrZGVsaW1pdGVyKyJ8JCkiLGF0dGFjaEtleXMobmV3IFJlZ0V4cCgiXiIrcm91dGUsZmxhZ3Mob3B0aW9ucykpLGtleXMpfWZ1bmN0aW9uIHBhdGhUb1JlZ2V4cChwYXRoLGtleXMsb3B0aW9ucyl7cmV0dXJuIGlzYXJyYXkoa2V5cyl8fChvcHRpb25zPWtleXN8fG9wdGlvbnMsa2V5cz1bXSksb3B0aW9ucz1vcHRpb25zfHx7fSxwYXRoIGluc3RhbmNlb2YgUmVnRXhwP2Z1bmN0aW9uKHBhdGgsa2V5cyl7dmFyIGdyb3Vwcz1wYXRoLnNvdXJjZS5tYXRjaCgvXCgoPyFcPykvZyk7aWYoZ3JvdXBzKWZvcih2YXIgaT0wO2k8Z3JvdXBzLmxlbmd0aDtpKyspa2V5cy5wdXNoKHtuYW1lOmkscHJlZml4Om51bGwsZGVsaW1pdGVyOm51bGwsb3B0aW9uYWw6ITEscmVwZWF0OiExLHBhcnRpYWw6ITEsYXN0ZXJpc2s6ITEscGF0dGVybjpudWxsfSk7cmV0dXJuIGF0dGFjaEtleXMocGF0aCxrZXlzKX0ocGF0aCxrZXlzKTppc2FycmF5KHBhdGgpP2Z1bmN0aW9uKHBhdGgsa2V5cyxvcHRpb25zKXtmb3IodmFyIHBhcnRzPVtdLGk9MDtpPHBhdGgubGVuZ3RoO2krKylwYXJ0cy5wdXNoKHBhdGhUb1JlZ2V4cChwYXRoW2ldLGtleXMsb3B0aW9ucykuc291cmNlKTtyZXR1cm4gYXR0YWNoS2V5cyhuZXcgUmVnRXhwKCIoPzoiK3BhcnRzLmpvaW4oInwiKSsiKSIsZmxhZ3Mob3B0aW9ucykpLGtleXMpfShwYXRoLGtleXMsb3B0aW9ucyk6ZnVuY3Rpb24ocGF0aCxrZXlzLG9wdGlvbnMpe3JldHVybiB0b2tlbnNUb1JlZ0V4cChwYXJzZShwYXRoLG9wdGlvbnMpLGtleXMsb3B0aW9ucyl9KHBhdGgsa2V5cyxvcHRpb25zKX1wYXRoVG9SZWdleHBfMS5wYXJzZT1wYXJzZV8xLHBhdGhUb1JlZ2V4cF8xLmNvbXBpbGU9Y29tcGlsZV8xLHBhdGhUb1JlZ2V4cF8xLnRva2Vuc1RvRnVuY3Rpb249dG9rZW5zVG9GdW5jdGlvbl8xLHBhdGhUb1JlZ2V4cF8xLnRva2Vuc1RvUmVnRXhwPXRva2Vuc1RvUmVnRXhwXzE7dmFyIHJlZ2V4cENvbXBpbGVDYWNoZT1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIGZpbGxQYXJhbXMocGF0aCxwYXJhbXMscm91dGVNc2cpe3RyeXtyZXR1cm4ocmVnZXhwQ29tcGlsZUNhY2hlW3BhdGhdfHwocmVnZXhwQ29tcGlsZUNhY2hlW3BhdGhdPXBhdGhUb1JlZ2V4cF8xLmNvbXBpbGUocGF0aCkpKShwYXJhbXN8fHt9LHtwcmV0dHk6ITB9KX1jYXRjaChlKXtyZXR1cm4iIn19ZnVuY3Rpb24gY3JlYXRlUm91dGVNYXAocm91dGVzLG9sZFBhdGhMaXN0LG9sZFBhdGhNYXAsb2xkTmFtZU1hcCl7dmFyIHBhdGhMaXN0PW9sZFBhdGhMaXN0fHxbXSxwYXRoTWFwPW9sZFBhdGhNYXB8fE9iamVjdC5jcmVhdGUobnVsbCksbmFtZU1hcD1vbGROYW1lTWFwfHxPYmplY3QuY3JlYXRlKG51bGwpO3JvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uKHJvdXRlKXshZnVuY3Rpb24gYWRkUm91dGVSZWNvcmQocGF0aExpc3QscGF0aE1hcCxuYW1lTWFwLHJvdXRlLHBhcmVudCxtYXRjaEFzKXt2YXIgcGF0aD1yb3V0ZS5wYXRoO3ZhciBuYW1lPXJvdXRlLm5hbWU7MDt2YXIgcGF0aFRvUmVnZXhwT3B0aW9ucz1yb3V0ZS5wYXRoVG9SZWdleHBPcHRpb25zfHx7fTt2YXIgbm9ybWFsaXplZFBhdGg9bm9ybWFsaXplUGF0aChwYXRoLHBhcmVudCxwYXRoVG9SZWdleHBPcHRpb25zLnN0cmljdCk7ImJvb2xlYW4iPT10eXBlb2Ygcm91dGUuY2FzZVNlbnNpdGl2ZSYmKHBhdGhUb1JlZ2V4cE9wdGlvbnMuc2Vuc2l0aXZlPXJvdXRlLmNhc2VTZW5zaXRpdmUpO3ZhciByZWNvcmQ9e3BhdGg6bm9ybWFsaXplZFBhdGgscmVnZXg6Y29tcGlsZVJvdXRlUmVnZXgobm9ybWFsaXplZFBhdGgscGF0aFRvUmVnZXhwT3B0aW9ucyksY29tcG9uZW50czpyb3V0ZS5jb21wb25lbnRzfHx7ZGVmYXVsdDpyb3V0ZS5jb21wb25lbnR9LGluc3RhbmNlczp7fSxuYW1lOm5hbWUscGFyZW50OnBhcmVudCxtYXRjaEFzOm1hdGNoQXMscmVkaXJlY3Q6cm91dGUucmVkaXJlY3QsYmVmb3JlRW50ZXI6cm91dGUuYmVmb3JlRW50ZXIsbWV0YTpyb3V0ZS5tZXRhfHx7fSxwcm9wczpudWxsPT1yb3V0ZS5wcm9wcz97fTpyb3V0ZS5jb21wb25lbnRzP3JvdXRlLnByb3BzOntkZWZhdWx0OnJvdXRlLnByb3BzfX07cm91dGUuY2hpbGRyZW4mJnJvdXRlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpe3ZhciBjaGlsZE1hdGNoQXM9bWF0Y2hBcz9jbGVhblBhdGgobWF0Y2hBcysiLyIrY2hpbGQucGF0aCk6dm9pZCAwO2FkZFJvdXRlUmVjb3JkKHBhdGhMaXN0LHBhdGhNYXAsbmFtZU1hcCxjaGlsZCxyZWNvcmQsY2hpbGRNYXRjaEFzKX0pO2lmKHZvaWQgMCE9PXJvdXRlLmFsaWFzKXt2YXIgYWxpYXNlcz1BcnJheS5pc0FycmF5KHJvdXRlLmFsaWFzKT9yb3V0ZS5hbGlhczpbcm91dGUuYWxpYXNdO2FsaWFzZXMuZm9yRWFjaChmdW5jdGlvbihhbGlhcyl7dmFyIGFsaWFzUm91dGU9e3BhdGg6YWxpYXMsY2hpbGRyZW46cm91dGUuY2hpbGRyZW59O2FkZFJvdXRlUmVjb3JkKHBhdGhMaXN0LHBhdGhNYXAsbmFtZU1hcCxhbGlhc1JvdXRlLHBhcmVudCxyZWNvcmQucGF0aHx8Ii8iKX0pfXBhdGhNYXBbcmVjb3JkLnBhdGhdfHwocGF0aExpc3QucHVzaChyZWNvcmQucGF0aCkscGF0aE1hcFtyZWNvcmQucGF0aF09cmVjb3JkKTtuYW1lJiYobmFtZU1hcFtuYW1lXXx8KG5hbWVNYXBbbmFtZV09cmVjb3JkKSl9KHBhdGhMaXN0LHBhdGhNYXAsbmFtZU1hcCxyb3V0ZSl9KTtmb3IodmFyIGk9MCxsPXBhdGhMaXN0Lmxlbmd0aDtpPGw7aSsrKSIqIj09PXBhdGhMaXN0W2ldJiYocGF0aExpc3QucHVzaChwYXRoTGlzdC5zcGxpY2UoaSwxKVswXSksbC0tLGktLSk7cmV0dXJue3BhdGhMaXN0OnBhdGhMaXN0LHBhdGhNYXA6cGF0aE1hcCxuYW1lTWFwOm5hbWVNYXB9fWZ1bmN0aW9uIGNvbXBpbGVSb3V0ZVJlZ2V4KHBhdGgscGF0aFRvUmVnZXhwT3B0aW9ucyl7cmV0dXJuIHBhdGhUb1JlZ2V4cF8xKHBhdGgsW10scGF0aFRvUmVnZXhwT3B0aW9ucyl9ZnVuY3Rpb24gbm9ybWFsaXplUGF0aChwYXRoLHBhcmVudCxzdHJpY3Qpe3JldHVybiBzdHJpY3R8fChwYXRoPXBhdGgucmVwbGFjZSgvXC8kLywiIikpLCIvIj09PXBhdGhbMF0/cGF0aDpudWxsPT1wYXJlbnQ/cGF0aDpjbGVhblBhdGgocGFyZW50LnBhdGgrIi8iK3BhdGgpfWZ1bmN0aW9uIG5vcm1hbGl6ZUxvY2F0aW9uKHJhdyxjdXJyZW50LGFwcGVuZCxyb3V0ZXIpe3ZhciBuZXh0PSJzdHJpbmciPT10eXBlb2YgcmF3P3twYXRoOnJhd306cmF3O2lmKG5leHQubmFtZXx8bmV4dC5fbm9ybWFsaXplZClyZXR1cm4gbmV4dDtpZighbmV4dC5wYXRoJiZuZXh0LnBhcmFtcyYmY3VycmVudCl7KG5leHQ9YXNzaWduKHt9LG5leHQpKS5fbm9ybWFsaXplZD0hMDt2YXIgcGFyYW1zPWFzc2lnbihhc3NpZ24oe30sY3VycmVudC5wYXJhbXMpLG5leHQucGFyYW1zKTtpZihjdXJyZW50Lm5hbWUpbmV4dC5uYW1lPWN1cnJlbnQubmFtZSxuZXh0LnBhcmFtcz1wYXJhbXM7ZWxzZSBpZihjdXJyZW50Lm1hdGNoZWQubGVuZ3RoKXt2YXIgcmF3UGF0aD1jdXJyZW50Lm1hdGNoZWRbY3VycmVudC5tYXRjaGVkLmxlbmd0aC0xXS5wYXRoO25leHQucGF0aD1maWxsUGFyYW1zKHJhd1BhdGgscGFyYW1zLGN1cnJlbnQucGF0aCl9ZWxzZSAwO3JldHVybiBuZXh0fXZhciBwYXJzZWRQYXRoPWZ1bmN0aW9uKHBhdGgpe3ZhciBoYXNoPSIiLHF1ZXJ5PSIiLGhhc2hJbmRleD1wYXRoLmluZGV4T2YoIiMiKTswPD1oYXNoSW5kZXgmJihoYXNoPXBhdGguc2xpY2UoaGFzaEluZGV4KSxwYXRoPXBhdGguc2xpY2UoMCxoYXNoSW5kZXgpKTt2YXIgcXVlcnlJbmRleD1wYXRoLmluZGV4T2YoIj8iKTtyZXR1cm4gMDw9cXVlcnlJbmRleCYmKHF1ZXJ5PXBhdGguc2xpY2UocXVlcnlJbmRleCsxKSxwYXRoPXBhdGguc2xpY2UoMCxxdWVyeUluZGV4KSkse3BhdGg6cGF0aCxxdWVyeTpxdWVyeSxoYXNoOmhhc2h9fShuZXh0LnBhdGh8fCIiKSxiYXNlUGF0aD1jdXJyZW50JiZjdXJyZW50LnBhdGh8fCIvIixwYXRoPXBhcnNlZFBhdGgucGF0aD9yZXNvbHZlUGF0aChwYXJzZWRQYXRoLnBhdGgsYmFzZVBhdGgsYXBwZW5kfHxuZXh0LmFwcGVuZCk6YmFzZVBhdGgscXVlcnk9ZnVuY3Rpb24ocXVlcnksZXh0cmFRdWVyeSxfcGFyc2VRdWVyeSl7dm9pZCAwPT09ZXh0cmFRdWVyeSYmKGV4dHJhUXVlcnk9e30pO3ZhciBwYXJzZWRRdWVyeSxwYXJzZT1fcGFyc2VRdWVyeXx8cGFyc2VRdWVyeTt0cnl7cGFyc2VkUXVlcnk9cGFyc2UocXVlcnl8fCIiKX1jYXRjaChlKXtwYXJzZWRRdWVyeT17fX1mb3IodmFyIGtleSBpbiBleHRyYVF1ZXJ5KXBhcnNlZFF1ZXJ5W2tleV09ZXh0cmFRdWVyeVtrZXldO3JldHVybiBwYXJzZWRRdWVyeX0ocGFyc2VkUGF0aC5xdWVyeSxuZXh0LnF1ZXJ5LHJvdXRlciYmcm91dGVyLm9wdGlvbnMucGFyc2VRdWVyeSksaGFzaD1uZXh0Lmhhc2h8fHBhcnNlZFBhdGguaGFzaDtyZXR1cm4gaGFzaCYmIiMiIT09aGFzaC5jaGFyQXQoMCkmJihoYXNoPSIjIitoYXNoKSx7X25vcm1hbGl6ZWQ6ITAscGF0aDpwYXRoLHF1ZXJ5OnF1ZXJ5LGhhc2g6aGFzaH19ZnVuY3Rpb24gYXNzaWduKGEsYil7Zm9yKHZhciBrZXkgaW4gYilhW2tleV09YltrZXldO3JldHVybiBhfWZ1bmN0aW9uIGNyZWF0ZU1hdGNoZXIocm91dGVzLHJvdXRlcil7dmFyIHJlZj1jcmVhdGVSb3V0ZU1hcChyb3V0ZXMpLHBhdGhMaXN0PXJlZi5wYXRoTGlzdCxwYXRoTWFwPXJlZi5wYXRoTWFwLG5hbWVNYXA9cmVmLm5hbWVNYXA7ZnVuY3Rpb24gbWF0Y2gocmF3LGN1cnJlbnRSb3V0ZSxyZWRpcmVjdGVkRnJvbSl7dmFyIGxvY2F0aW9uPW5vcm1hbGl6ZUxvY2F0aW9uKHJhdyxjdXJyZW50Um91dGUsITEscm91dGVyKSxuYW1lPWxvY2F0aW9uLm5hbWU7aWYobmFtZSl7dmFyIHJlY29yZD1uYW1lTWFwW25hbWVdO2lmKCFyZWNvcmQpcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLGxvY2F0aW9uKTt2YXIgcGFyYW1OYW1lcz1yZWNvcmQucmVnZXgua2V5cy5maWx0ZXIoZnVuY3Rpb24oa2V5KXtyZXR1cm4ha2V5Lm9wdGlvbmFsfSkubWFwKGZ1bmN0aW9uKGtleSl7cmV0dXJuIGtleS5uYW1lfSk7aWYoIm9iamVjdCIhPXR5cGVvZiBsb2NhdGlvbi5wYXJhbXMmJihsb2NhdGlvbi5wYXJhbXM9e30pLGN1cnJlbnRSb3V0ZSYmIm9iamVjdCI9PXR5cGVvZiBjdXJyZW50Um91dGUucGFyYW1zKWZvcih2YXIga2V5IGluIGN1cnJlbnRSb3V0ZS5wYXJhbXMpIShrZXkgaW4gbG9jYXRpb24ucGFyYW1zKSYmLTE8cGFyYW1OYW1lcy5pbmRleE9mKGtleSkmJihsb2NhdGlvbi5wYXJhbXNba2V5XT1jdXJyZW50Um91dGUucGFyYW1zW2tleV0pO2lmKHJlY29yZClyZXR1cm4gbG9jYXRpb24ucGF0aD1maWxsUGFyYW1zKHJlY29yZC5wYXRoLGxvY2F0aW9uLnBhcmFtcyksX2NyZWF0ZVJvdXRlKHJlY29yZCxsb2NhdGlvbixyZWRpcmVjdGVkRnJvbSl9ZWxzZSBpZihsb2NhdGlvbi5wYXRoKXtsb2NhdGlvbi5wYXJhbXM9e307Zm9yKHZhciBpPTA7aTxwYXRoTGlzdC5sZW5ndGg7aSsrKXt2YXIgcGF0aD1wYXRoTGlzdFtpXSxyZWNvcmQkMT1wYXRoTWFwW3BhdGhdO2lmKG1hdGNoUm91dGUocmVjb3JkJDEucmVnZXgsbG9jYXRpb24ucGF0aCxsb2NhdGlvbi5wYXJhbXMpKXJldHVybiBfY3JlYXRlUm91dGUocmVjb3JkJDEsbG9jYXRpb24scmVkaXJlY3RlZEZyb20pfX1yZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsbG9jYXRpb24pfWZ1bmN0aW9uIHJlZGlyZWN0KHJlY29yZCxsb2NhdGlvbil7dmFyIG9yaWdpbmFsUmVkaXJlY3Q9cmVjb3JkLnJlZGlyZWN0LHJlZGlyZWN0PSJmdW5jdGlvbiI9PXR5cGVvZiBvcmlnaW5hbFJlZGlyZWN0P29yaWdpbmFsUmVkaXJlY3QoY3JlYXRlUm91dGUocmVjb3JkLGxvY2F0aW9uLG51bGwscm91dGVyKSk6b3JpZ2luYWxSZWRpcmVjdDtpZigic3RyaW5nIj09dHlwZW9mIHJlZGlyZWN0JiYocmVkaXJlY3Q9e3BhdGg6cmVkaXJlY3R9KSwhcmVkaXJlY3R8fCJvYmplY3QiIT10eXBlb2YgcmVkaXJlY3QpcmV0dXJuIF9jcmVhdGVSb3V0ZShudWxsLGxvY2F0aW9uKTt2YXIgcmU9cmVkaXJlY3QsbmFtZT1yZS5uYW1lLHBhdGg9cmUucGF0aCxxdWVyeT1sb2NhdGlvbi5xdWVyeSxoYXNoPWxvY2F0aW9uLmhhc2gscGFyYW1zPWxvY2F0aW9uLnBhcmFtcztpZihxdWVyeT1yZS5oYXNPd25Qcm9wZXJ0eSgicXVlcnkiKT9yZS5xdWVyeTpxdWVyeSxoYXNoPXJlLmhhc093blByb3BlcnR5KCJoYXNoIik/cmUuaGFzaDpoYXNoLHBhcmFtcz1yZS5oYXNPd25Qcm9wZXJ0eSgicGFyYW1zIik/cmUucGFyYW1zOnBhcmFtcyxuYW1lKXtuYW1lTWFwW25hbWVdO3JldHVybiBtYXRjaCh7X25vcm1hbGl6ZWQ6ITAsbmFtZTpuYW1lLHF1ZXJ5OnF1ZXJ5LGhhc2g6aGFzaCxwYXJhbXM6cGFyYW1zfSx2b2lkIDAsbG9jYXRpb24pfWlmKHBhdGgpe3ZhciByYXdQYXRoPWZ1bmN0aW9uKHBhdGgscmVjb3JkKXtyZXR1cm4gcmVzb2x2ZVBhdGgocGF0aCxyZWNvcmQucGFyZW50P3JlY29yZC5wYXJlbnQucGF0aDoiLyIsITApfShwYXRoLHJlY29yZCk7cmV0dXJuIG1hdGNoKHtfbm9ybWFsaXplZDohMCxwYXRoOmZpbGxQYXJhbXMocmF3UGF0aCxwYXJhbXMpLHF1ZXJ5OnF1ZXJ5LGhhc2g6aGFzaH0sdm9pZCAwLGxvY2F0aW9uKX1yZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsbG9jYXRpb24pfWZ1bmN0aW9uIF9jcmVhdGVSb3V0ZShyZWNvcmQsbG9jYXRpb24scmVkaXJlY3RlZEZyb20pe3JldHVybiByZWNvcmQmJnJlY29yZC5yZWRpcmVjdD9yZWRpcmVjdChyZWNvcmQscmVkaXJlY3RlZEZyb218fGxvY2F0aW9uKTpyZWNvcmQmJnJlY29yZC5tYXRjaEFzP2Z1bmN0aW9uKHJlY29yZCxsb2NhdGlvbixtYXRjaEFzKXt2YXIgYWxpYXNlZE1hdGNoPW1hdGNoKHtfbm9ybWFsaXplZDohMCxwYXRoOmZpbGxQYXJhbXMobWF0Y2hBcyxsb2NhdGlvbi5wYXJhbXMpfSk7aWYoYWxpYXNlZE1hdGNoKXt2YXIgbWF0Y2hlZD1hbGlhc2VkTWF0Y2gubWF0Y2hlZCxhbGlhc2VkUmVjb3JkPW1hdGNoZWRbbWF0Y2hlZC5sZW5ndGgtMV07cmV0dXJuIGxvY2F0aW9uLnBhcmFtcz1hbGlhc2VkTWF0Y2gucGFyYW1zLF9jcmVhdGVSb3V0ZShhbGlhc2VkUmVjb3JkLGxvY2F0aW9uKX1yZXR1cm4gX2NyZWF0ZVJvdXRlKG51bGwsbG9jYXRpb24pfSgwLGxvY2F0aW9uLHJlY29yZC5tYXRjaEFzKTpjcmVhdGVSb3V0ZShyZWNvcmQsbG9jYXRpb24scmVkaXJlY3RlZEZyb20scm91dGVyKX1yZXR1cm57bWF0Y2g6bWF0Y2gsYWRkUm91dGVzOmZ1bmN0aW9uKHJvdXRlcyl7Y3JlYXRlUm91dGVNYXAocm91dGVzLHBhdGhMaXN0LHBhdGhNYXAsbmFtZU1hcCl9fX1mdW5jdGlvbiBtYXRjaFJvdXRlKHJlZ2V4LHBhdGgscGFyYW1zKXt2YXIgbT1wYXRoLm1hdGNoKHJlZ2V4KTtpZighbSlyZXR1cm4hMTtpZighcGFyYW1zKXJldHVybiEwO2Zvcih2YXIgaT0xLGxlbj1tLmxlbmd0aDtpPGxlbjsrK2kpe3ZhciBrZXk9cmVnZXgua2V5c1tpLTFdLHZhbD0ic3RyaW5nIj09dHlwZW9mIG1baV0/ZGVjb2RlVVJJQ29tcG9uZW50KG1baV0pOm1baV07a2V5JiYocGFyYW1zW2tleS5uYW1lXT12YWwpfXJldHVybiEwfXZhciBwb3NpdGlvblN0b3JlPU9iamVjdC5jcmVhdGUobnVsbCk7ZnVuY3Rpb24gc2V0dXBTY3JvbGwoKXt3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe2tleTpnZXRTdGF0ZUtleSgpfSwiIiksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInBvcHN0YXRlIixmdW5jdGlvbihlKXt2YXIga2V5O3NhdmVTY3JvbGxQb3NpdGlvbigpLGUuc3RhdGUmJmUuc3RhdGUua2V5JiYoa2V5PWUuc3RhdGUua2V5LF9rZXk9a2V5KX0pfWZ1bmN0aW9uIGhhbmRsZVNjcm9sbChyb3V0ZXIsdG8sZnJvbSxpc1BvcCl7aWYocm91dGVyLmFwcCl7dmFyIGJlaGF2aW9yPXJvdXRlci5vcHRpb25zLnNjcm9sbEJlaGF2aW9yO2JlaGF2aW9yJiZyb3V0ZXIuYXBwLiRuZXh0VGljayhmdW5jdGlvbigpe3ZhciBwb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBrZXk9Z2V0U3RhdGVLZXkoKTtpZihrZXkpcmV0dXJuIHBvc2l0aW9uU3RvcmVba2V5XX0oKSxzaG91bGRTY3JvbGw9YmVoYXZpb3IodG8sZnJvbSxpc1BvcD9wb3NpdGlvbjpudWxsKTtzaG91bGRTY3JvbGwmJigiZnVuY3Rpb24iPT10eXBlb2Ygc2hvdWxkU2Nyb2xsLnRoZW4/c2hvdWxkU2Nyb2xsLnRoZW4oZnVuY3Rpb24oc2hvdWxkU2Nyb2xsKXtzY3JvbGxUb1Bvc2l0aW9uKHNob3VsZFNjcm9sbCxwb3NpdGlvbil9KS5jYXRjaChmdW5jdGlvbihlcnIpezB9KTpzY3JvbGxUb1Bvc2l0aW9uKHNob3VsZFNjcm9sbCxwb3NpdGlvbikpfSl9fWZ1bmN0aW9uIHNhdmVTY3JvbGxQb3NpdGlvbigpe3ZhciBrZXk9Z2V0U3RhdGVLZXkoKTtrZXkmJihwb3NpdGlvblN0b3JlW2tleV09e3g6d2luZG93LnBhZ2VYT2Zmc2V0LHk6d2luZG93LnBhZ2VZT2Zmc2V0fSl9ZnVuY3Rpb24gaXNWYWxpZFBvc2l0aW9uKG9iail7cmV0dXJuIGlzTnVtYmVyKG9iai54KXx8aXNOdW1iZXIob2JqLnkpfWZ1bmN0aW9uIG5vcm1hbGl6ZVBvc2l0aW9uKG9iail7cmV0dXJue3g6aXNOdW1iZXIob2JqLngpP29iai54OndpbmRvdy5wYWdlWE9mZnNldCx5OmlzTnVtYmVyKG9iai55KT9vYmoueTp3aW5kb3cucGFnZVlPZmZzZXR9fWZ1bmN0aW9uIGlzTnVtYmVyKHYpe3JldHVybiJudW1iZXIiPT10eXBlb2Ygdn1mdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uKHNob3VsZFNjcm9sbCxwb3NpdGlvbil7dmFyIG9iaixpc09iamVjdD0ib2JqZWN0Ij09dHlwZW9mIHNob3VsZFNjcm9sbDtpZihpc09iamVjdCYmInN0cmluZyI9PXR5cGVvZiBzaG91bGRTY3JvbGwuc2VsZWN0b3Ipe3ZhciBlbD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNob3VsZFNjcm9sbC5zZWxlY3Rvcik7aWYoZWwpe3ZhciBvZmZzZXQ9c2hvdWxkU2Nyb2xsLm9mZnNldCYmIm9iamVjdCI9PXR5cGVvZiBzaG91bGRTY3JvbGwub2Zmc2V0P3Nob3VsZFNjcm9sbC5vZmZzZXQ6e307cG9zaXRpb249ZnVuY3Rpb24oZWwsb2Zmc2V0KXt2YXIgZG9jUmVjdD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZWxSZWN0PWVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybnt4OmVsUmVjdC5sZWZ0LWRvY1JlY3QubGVmdC1vZmZzZXQueCx5OmVsUmVjdC50b3AtZG9jUmVjdC50b3Atb2Zmc2V0Lnl9fShlbCxvZmZzZXQ9e3g6aXNOdW1iZXIoKG9iaj1vZmZzZXQpLngpP29iai54OjAseTppc051bWJlcihvYmoueSk/b2JqLnk6MH0pfWVsc2UgaXNWYWxpZFBvc2l0aW9uKHNob3VsZFNjcm9sbCkmJihwb3NpdGlvbj1ub3JtYWxpemVQb3NpdGlvbihzaG91bGRTY3JvbGwpKX1lbHNlIGlzT2JqZWN0JiZpc1ZhbGlkUG9zaXRpb24oc2hvdWxkU2Nyb2xsKSYmKHBvc2l0aW9uPW5vcm1hbGl6ZVBvc2l0aW9uKHNob3VsZFNjcm9sbCkpO3Bvc2l0aW9uJiZ3aW5kb3cuc2Nyb2xsVG8ocG9zaXRpb24ueCxwb3NpdGlvbi55KX12YXIgdWEsc3VwcG9ydHNQdXNoU3RhdGU9aW5Ccm93c2VyJiYoKC0xPT09KHVhPXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJBbmRyb2lkIDIuIikmJi0xPT09dWEuaW5kZXhPZigiQW5kcm9pZCA0LjAiKXx8LTE9PT11YS5pbmRleE9mKCJNb2JpbGUgU2FmYXJpIil8fC0xIT09dWEuaW5kZXhPZigiQ2hyb21lIil8fC0xIT09dWEuaW5kZXhPZigiV2luZG93cyBQaG9uZSIpKSYmd2luZG93Lmhpc3RvcnkmJiJwdXNoU3RhdGUiaW4gd2luZG93Lmhpc3RvcnkpLFRpbWU9aW5Ccm93c2VyJiZ3aW5kb3cucGVyZm9ybWFuY2UmJndpbmRvdy5wZXJmb3JtYW5jZS5ub3c/d2luZG93LnBlcmZvcm1hbmNlOkRhdGUsX2tleT1nZW5LZXkoKTtmdW5jdGlvbiBnZW5LZXkoKXtyZXR1cm4gVGltZS5ub3coKS50b0ZpeGVkKDMpfWZ1bmN0aW9uIGdldFN0YXRlS2V5KCl7cmV0dXJuIF9rZXl9ZnVuY3Rpb24gcHVzaFN0YXRlKHVybCxyZXBsYWNlKXtzYXZlU2Nyb2xsUG9zaXRpb24oKTt2YXIgaGlzdG9yeT13aW5kb3cuaGlzdG9yeTt0cnl7cmVwbGFjZT9oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7a2V5Ol9rZXl9LCIiLHVybCk6KF9rZXk9Z2VuS2V5KCksaGlzdG9yeS5wdXNoU3RhdGUoe2tleTpfa2V5fSwiIix1cmwpKX1jYXRjaChlKXt3aW5kb3cubG9jYXRpb25bcmVwbGFjZT8icmVwbGFjZSI6ImFzc2lnbiJdKHVybCl9fWZ1bmN0aW9uIHJlcGxhY2VTdGF0ZSh1cmwpe3B1c2hTdGF0ZSh1cmwsITApfWZ1bmN0aW9uIHJ1blF1ZXVlKHF1ZXVlLGZuLGNiKXt2YXIgc3RlcD1mdW5jdGlvbihpbmRleCl7aW5kZXg+PXF1ZXVlLmxlbmd0aD9jYigpOnF1ZXVlW2luZGV4XT9mbihxdWV1ZVtpbmRleF0sZnVuY3Rpb24oKXtzdGVwKGluZGV4KzEpfSk6c3RlcChpbmRleCsxKX07c3RlcCgwKX1mdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnRzKG1hdGNoZWQpe3JldHVybiBmdW5jdGlvbih0byxmcm9tLG5leHQpe3ZhciBoYXNBc3luYz0hMSxwZW5kaW5nPTAsZXJyb3I9bnVsbDtmbGF0TWFwQ29tcG9uZW50cyhtYXRjaGVkLGZ1bmN0aW9uKGRlZixfLG1hdGNoLGtleSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZiYmdm9pZCAwPT09ZGVmLmNpZCl7aGFzQXN5bmM9ITAscGVuZGluZysrO3ZhciByZXMscmVzb2x2ZT1vbmNlKGZ1bmN0aW9uKHJlc29sdmVkRGVmKXt2YXIgb2JqOygob2JqPXJlc29sdmVkRGVmKS5fX2VzTW9kdWxlfHxoYXNTeW1ib2wmJiJNb2R1bGUiPT09b2JqW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYocmVzb2x2ZWREZWY9cmVzb2x2ZWREZWYuZGVmYXVsdCksZGVmLnJlc29sdmVkPSJmdW5jdGlvbiI9PXR5cGVvZiByZXNvbHZlZERlZj9yZXNvbHZlZERlZjpfVnVlLmV4dGVuZChyZXNvbHZlZERlZiksbWF0Y2guY29tcG9uZW50c1trZXldPXJlc29sdmVkRGVmLC0tcGVuZGluZzw9MCYmbmV4dCgpfSkscmVqZWN0PW9uY2UoZnVuY3Rpb24ocmVhc29uKXt2YXIgbXNnPSJGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQgIitrZXkrIjogIityZWFzb247ZXJyb3J8fChlcnJvcj1pc0Vycm9yKHJlYXNvbik/cmVhc29uOm5ldyBFcnJvcihtc2cpLG5leHQoZXJyb3IpKX0pO3RyeXtyZXM9ZGVmKHJlc29sdmUscmVqZWN0KX1jYXRjaChlKXtyZWplY3QoZSl9aWYocmVzKWlmKCJmdW5jdGlvbiI9PXR5cGVvZiByZXMudGhlbilyZXMudGhlbihyZXNvbHZlLHJlamVjdCk7ZWxzZXt2YXIgY29tcD1yZXMuY29tcG9uZW50O2NvbXAmJiJmdW5jdGlvbiI9PXR5cGVvZiBjb21wLnRoZW4mJmNvbXAudGhlbihyZXNvbHZlLHJlamVjdCl9fX0pLGhhc0FzeW5jfHxuZXh0KCl9fWZ1bmN0aW9uIGZsYXRNYXBDb21wb25lbnRzKG1hdGNoZWQsZm4pe3JldHVybiBmbGF0dGVuKG1hdGNoZWQubWFwKGZ1bmN0aW9uKG0pe3JldHVybiBPYmplY3Qua2V5cyhtLmNvbXBvbmVudHMpLm1hcChmdW5jdGlvbihrZXkpe3JldHVybiBmbihtLmNvbXBvbmVudHNba2V5XSxtLmluc3RhbmNlc1trZXldLG0sa2V5KX0pfSkpfWZ1bmN0aW9uIGZsYXR0ZW4oYXJyKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxhcnIpfXZhciBoYXNTeW1ib2w9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWc7ZnVuY3Rpb24gb25jZShmbil7dmFyIGNhbGxlZD0hMTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGFyZ3M9W10sbGVuPWFyZ3VtZW50cy5sZW5ndGg7bGVuLS07KWFyZ3NbbGVuXT1hcmd1bWVudHNbbGVuXTtpZighY2FsbGVkKXJldHVybiBjYWxsZWQ9ITAsZm4uYXBwbHkodGhpcyxhcmdzKX19dmFyIEhpc3Rvcnk9ZnVuY3Rpb24ocm91dGVyLGJhc2Upe3RoaXMucm91dGVyPXJvdXRlcix0aGlzLmJhc2U9ZnVuY3Rpb24oYmFzZSl7aWYoIWJhc2UpaWYoaW5Ccm93c2VyKXt2YXIgYmFzZUVsPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJhc2UiKTtiYXNlPShiYXNlPWJhc2VFbCYmYmFzZUVsLmdldEF0dHJpYnV0ZSgiaHJlZiIpfHwiLyIpLnJlcGxhY2UoL15odHRwcz86XC9cL1teXC9dKy8sIiIpfWVsc2UgYmFzZT0iLyI7Ii8iIT09YmFzZS5jaGFyQXQoMCkmJihiYXNlPSIvIitiYXNlKTtyZXR1cm4gYmFzZS5yZXBsYWNlKC9cLyQvLCIiKX0oYmFzZSksdGhpcy5jdXJyZW50PVNUQVJULHRoaXMucGVuZGluZz1udWxsLHRoaXMucmVhZHk9ITEsdGhpcy5yZWFkeUNicz1bXSx0aGlzLnJlYWR5RXJyb3JDYnM9W10sdGhpcy5lcnJvckNicz1bXX07ZnVuY3Rpb24gZXh0cmFjdEd1YXJkcyhyZWNvcmRzLG5hbWUsYmluZCxyZXZlcnNlKXt2YXIgZ3VhcmRzPWZsYXRNYXBDb21wb25lbnRzKHJlY29yZHMsZnVuY3Rpb24oZGVmLGluc3RhbmNlLG1hdGNoLGtleSl7dmFyIGd1YXJkPWZ1bmN0aW9uKGRlZixrZXkpeyJmdW5jdGlvbiIhPXR5cGVvZiBkZWYmJihkZWY9X1Z1ZS5leHRlbmQoZGVmKSk7cmV0dXJuIGRlZi5vcHRpb25zW2tleV19KGRlZixuYW1lKTtpZihndWFyZClyZXR1cm4gQXJyYXkuaXNBcnJheShndWFyZCk/Z3VhcmQubWFwKGZ1bmN0aW9uKGd1YXJkKXtyZXR1cm4gYmluZChndWFyZCxpbnN0YW5jZSxtYXRjaCxrZXkpfSk6YmluZChndWFyZCxpbnN0YW5jZSxtYXRjaCxrZXkpfSk7cmV0dXJuIGZsYXR0ZW4ocmV2ZXJzZT9ndWFyZHMucmV2ZXJzZSgpOmd1YXJkcyl9ZnVuY3Rpb24gYmluZEd1YXJkKGd1YXJkLGluc3RhbmNlKXtpZihpbnN0YW5jZSlyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZ3VhcmQuYXBwbHkoaW5zdGFuY2UsYXJndW1lbnRzKX19SGlzdG9yeS5wcm90b3R5cGUubGlzdGVuPWZ1bmN0aW9uKGNiKXt0aGlzLmNiPWNifSxIaXN0b3J5LnByb3RvdHlwZS5vblJlYWR5PWZ1bmN0aW9uKGNiLGVycm9yQ2Ipe3RoaXMucmVhZHk/Y2IoKToodGhpcy5yZWFkeUNicy5wdXNoKGNiKSxlcnJvckNiJiZ0aGlzLnJlYWR5RXJyb3JDYnMucHVzaChlcnJvckNiKSl9LEhpc3RvcnkucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24oZXJyb3JDYil7dGhpcy5lcnJvckNicy5wdXNoKGVycm9yQ2IpfSxIaXN0b3J5LnByb3RvdHlwZS50cmFuc2l0aW9uVG89ZnVuY3Rpb24obG9jYXRpb24sb25Db21wbGV0ZSxvbkFib3J0KXt2YXIgdGhpcyQxPXRoaXMscm91dGU9dGhpcy5yb3V0ZXIubWF0Y2gobG9jYXRpb24sdGhpcy5jdXJyZW50KTt0aGlzLmNvbmZpcm1UcmFuc2l0aW9uKHJvdXRlLGZ1bmN0aW9uKCl7dGhpcyQxLnVwZGF0ZVJvdXRlKHJvdXRlKSxvbkNvbXBsZXRlJiZvbkNvbXBsZXRlKHJvdXRlKSx0aGlzJDEuZW5zdXJlVVJMKCksdGhpcyQxLnJlYWR5fHwodGhpcyQxLnJlYWR5PSEwLHRoaXMkMS5yZWFkeUNicy5mb3JFYWNoKGZ1bmN0aW9uKGNiKXtjYihyb3V0ZSl9KSl9LGZ1bmN0aW9uKGVycil7b25BYm9ydCYmb25BYm9ydChlcnIpLGVyciYmIXRoaXMkMS5yZWFkeSYmKHRoaXMkMS5yZWFkeT0hMCx0aGlzJDEucmVhZHlFcnJvckNicy5mb3JFYWNoKGZ1bmN0aW9uKGNiKXtjYihlcnIpfSkpfSl9LEhpc3RvcnkucHJvdG90eXBlLmNvbmZpcm1UcmFuc2l0aW9uPWZ1bmN0aW9uKHJvdXRlLG9uQ29tcGxldGUsb25BYm9ydCl7dmFyIHRoaXMkMT10aGlzLGN1cnJlbnQ9dGhpcy5jdXJyZW50LGFib3J0PWZ1bmN0aW9uKGVycil7aXNFcnJvcihlcnIpJiYodGhpcyQxLmVycm9yQ2JzLmxlbmd0aD90aGlzJDEuZXJyb3JDYnMuZm9yRWFjaChmdW5jdGlvbihjYil7Y2IoZXJyKX0pOih3YXJuKCksY29uc29sZS5lcnJvcihlcnIpKSksb25BYm9ydCYmb25BYm9ydChlcnIpfTtpZihpc1NhbWVSb3V0ZShyb3V0ZSxjdXJyZW50KSYmcm91dGUubWF0Y2hlZC5sZW5ndGg9PT1jdXJyZW50Lm1hdGNoZWQubGVuZ3RoKXJldHVybiB0aGlzLmVuc3VyZVVSTCgpLGFib3J0KCk7dmFyIHJlZj1mdW5jdGlvbihjdXJyZW50LG5leHQpe3ZhciBpLG1heD1NYXRoLm1heChjdXJyZW50Lmxlbmd0aCxuZXh0Lmxlbmd0aCk7Zm9yKGk9MDtpPG1heCYmY3VycmVudFtpXT09PW5leHRbaV07aSsrKTtyZXR1cm57dXBkYXRlZDpuZXh0LnNsaWNlKDAsaSksYWN0aXZhdGVkOm5leHQuc2xpY2UoaSksZGVhY3RpdmF0ZWQ6Y3VycmVudC5zbGljZShpKX19KHRoaXMuY3VycmVudC5tYXRjaGVkLHJvdXRlLm1hdGNoZWQpLHVwZGF0ZWQ9cmVmLnVwZGF0ZWQsZGVhY3RpdmF0ZWQ9cmVmLmRlYWN0aXZhdGVkLGFjdGl2YXRlZD1yZWYuYWN0aXZhdGVkLHF1ZXVlPVtdLmNvbmNhdChmdW5jdGlvbihkZWFjdGl2YXRlZCl7cmV0dXJuIGV4dHJhY3RHdWFyZHMoZGVhY3RpdmF0ZWQsImJlZm9yZVJvdXRlTGVhdmUiLGJpbmRHdWFyZCwhMCl9KGRlYWN0aXZhdGVkKSx0aGlzLnJvdXRlci5iZWZvcmVIb29rcyxmdW5jdGlvbih1cGRhdGVkKXtyZXR1cm4gZXh0cmFjdEd1YXJkcyh1cGRhdGVkLCJiZWZvcmVSb3V0ZVVwZGF0ZSIsYmluZEd1YXJkKX0odXBkYXRlZCksYWN0aXZhdGVkLm1hcChmdW5jdGlvbihtKXtyZXR1cm4gbS5iZWZvcmVFbnRlcn0pLHJlc29sdmVBc3luY0NvbXBvbmVudHMoYWN0aXZhdGVkKSk7dGhpcy5wZW5kaW5nPXJvdXRlO3ZhciBpdGVyYXRvcj1mdW5jdGlvbihob29rLG5leHQpe2lmKHRoaXMkMS5wZW5kaW5nIT09cm91dGUpcmV0dXJuIGFib3J0KCk7dHJ5e2hvb2socm91dGUsY3VycmVudCxmdW5jdGlvbih0byl7ITE9PT10b3x8aXNFcnJvcih0byk/KHRoaXMkMS5lbnN1cmVVUkwoITApLGFib3J0KHRvKSk6InN0cmluZyI9PXR5cGVvZiB0b3x8Im9iamVjdCI9PXR5cGVvZiB0byYmKCJzdHJpbmciPT10eXBlb2YgdG8ucGF0aHx8InN0cmluZyI9PXR5cGVvZiB0by5uYW1lKT8oYWJvcnQoKSwib2JqZWN0Ij09dHlwZW9mIHRvJiZ0by5yZXBsYWNlP3RoaXMkMS5yZXBsYWNlKHRvKTp0aGlzJDEucHVzaCh0bykpOm5leHQodG8pfSl9Y2F0Y2goZSl7YWJvcnQoZSl9fTtydW5RdWV1ZShxdWV1ZSxpdGVyYXRvcixmdW5jdGlvbigpe3ZhciBwb3N0RW50ZXJDYnM9W107cnVuUXVldWUoZnVuY3Rpb24oYWN0aXZhdGVkLGNicyxpc1ZhbGlkKXtyZXR1cm4gZXh0cmFjdEd1YXJkcyhhY3RpdmF0ZWQsImJlZm9yZVJvdXRlRW50ZXIiLGZ1bmN0aW9uKGd1YXJkLF8sbWF0Y2gsa2V5KXtyZXR1cm4gZnVuY3Rpb24oZ3VhcmQsbWF0Y2gsa2V5LGNicyxpc1ZhbGlkKXtyZXR1cm4gZnVuY3Rpb24odG8sZnJvbSxuZXh0KXtyZXR1cm4gZ3VhcmQodG8sZnJvbSxmdW5jdGlvbihjYil7bmV4dChjYiksImZ1bmN0aW9uIj09dHlwZW9mIGNiJiZjYnMucHVzaChmdW5jdGlvbigpeyFmdW5jdGlvbiBwb2xsKGNiLGluc3RhbmNlcyxrZXksaXNWYWxpZCl7aW5zdGFuY2VzW2tleV0/Y2IoaW5zdGFuY2VzW2tleV0pOmlzVmFsaWQoKSYmc2V0VGltZW91dChmdW5jdGlvbigpe3BvbGwoY2IsaW5zdGFuY2VzLGtleSxpc1ZhbGlkKX0sMTYpfShjYixtYXRjaC5pbnN0YW5jZXMsa2V5LGlzVmFsaWQpfSl9KX19KGd1YXJkLG1hdGNoLGtleSxjYnMsaXNWYWxpZCl9KX0oYWN0aXZhdGVkLHBvc3RFbnRlckNicyxmdW5jdGlvbigpe3JldHVybiB0aGlzJDEuY3VycmVudD09PXJvdXRlfSkuY29uY2F0KHRoaXMkMS5yb3V0ZXIucmVzb2x2ZUhvb2tzKSxpdGVyYXRvcixmdW5jdGlvbigpe2lmKHRoaXMkMS5wZW5kaW5nIT09cm91dGUpcmV0dXJuIGFib3J0KCk7dGhpcyQxLnBlbmRpbmc9bnVsbCxvbkNvbXBsZXRlKHJvdXRlKSx0aGlzJDEucm91dGVyLmFwcCYmdGhpcyQxLnJvdXRlci5hcHAuJG5leHRUaWNrKGZ1bmN0aW9uKCl7cG9zdEVudGVyQ2JzLmZvckVhY2goZnVuY3Rpb24oY2Ipe2NiKCl9KX0pfSl9KX0sSGlzdG9yeS5wcm90b3R5cGUudXBkYXRlUm91dGU9ZnVuY3Rpb24ocm91dGUpe3ZhciBwcmV2PXRoaXMuY3VycmVudDt0aGlzLmN1cnJlbnQ9cm91dGUsdGhpcy5jYiYmdGhpcy5jYihyb3V0ZSksdGhpcy5yb3V0ZXIuYWZ0ZXJIb29rcy5mb3JFYWNoKGZ1bmN0aW9uKGhvb2spe2hvb2smJmhvb2socm91dGUscHJldil9KX07dmFyIEhUTUw1SGlzdG9yeT1mdW5jdGlvbihIaXN0b3J5JCQxKXtmdW5jdGlvbiBIVE1MNUhpc3Rvcnkocm91dGVyLGJhc2Upe3ZhciB0aGlzJDE9dGhpcztIaXN0b3J5JCQxLmNhbGwodGhpcyxyb3V0ZXIsYmFzZSk7dmFyIGV4cGVjdFNjcm9sbD1yb3V0ZXIub3B0aW9ucy5zY3JvbGxCZWhhdmlvcjtleHBlY3RTY3JvbGwmJnNldHVwU2Nyb2xsKCk7dmFyIGluaXRMb2NhdGlvbj1nZXRMb2NhdGlvbih0aGlzLmJhc2UpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJwb3BzdGF0ZSIsZnVuY3Rpb24oZSl7dmFyIGN1cnJlbnQ9dGhpcyQxLmN1cnJlbnQsbG9jYXRpb249Z2V0TG9jYXRpb24odGhpcyQxLmJhc2UpO3RoaXMkMS5jdXJyZW50PT09U1RBUlQmJmxvY2F0aW9uPT09aW5pdExvY2F0aW9ufHx0aGlzJDEudHJhbnNpdGlvblRvKGxvY2F0aW9uLGZ1bmN0aW9uKHJvdXRlKXtleHBlY3RTY3JvbGwmJmhhbmRsZVNjcm9sbChyb3V0ZXIscm91dGUsY3VycmVudCwhMCl9KX0pfXJldHVybiBIaXN0b3J5JCQxJiYoSFRNTDVIaXN0b3J5Ll9fcHJvdG9fXz1IaXN0b3J5JCQxKSwoKEhUTUw1SGlzdG9yeS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShIaXN0b3J5JCQxJiZIaXN0b3J5JCQxLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPUhUTUw1SGlzdG9yeSkucHJvdG90eXBlLmdvPWZ1bmN0aW9uKG4pe3dpbmRvdy5oaXN0b3J5LmdvKG4pfSxIVE1MNUhpc3RvcnkucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24obG9jYXRpb24sb25Db21wbGV0ZSxvbkFib3J0KXt2YXIgdGhpcyQxPXRoaXMsZnJvbVJvdXRlPXRoaXMuY3VycmVudDt0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbixmdW5jdGlvbihyb3V0ZSl7cHVzaFN0YXRlKGNsZWFuUGF0aCh0aGlzJDEuYmFzZStyb3V0ZS5mdWxsUGF0aCkpLGhhbmRsZVNjcm9sbCh0aGlzJDEucm91dGVyLHJvdXRlLGZyb21Sb3V0ZSwhMSksb25Db21wbGV0ZSYmb25Db21wbGV0ZShyb3V0ZSl9LG9uQWJvcnQpfSxIVE1MNUhpc3RvcnkucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24obG9jYXRpb24sb25Db21wbGV0ZSxvbkFib3J0KXt2YXIgdGhpcyQxPXRoaXMsZnJvbVJvdXRlPXRoaXMuY3VycmVudDt0aGlzLnRyYW5zaXRpb25Ubyhsb2NhdGlvbixmdW5jdGlvbihyb3V0ZSl7cmVwbGFjZVN0YXRlKGNsZWFuUGF0aCh0aGlzJDEuYmFzZStyb3V0ZS5mdWxsUGF0aCkpLGhhbmRsZVNjcm9sbCh0aGlzJDEucm91dGVyLHJvdXRlLGZyb21Sb3V0ZSwhMSksb25Db21wbGV0ZSYmb25Db21wbGV0ZShyb3V0ZSl9LG9uQWJvcnQpfSxIVE1MNUhpc3RvcnkucHJvdG90eXBlLmVuc3VyZVVSTD1mdW5jdGlvbihwdXNoKXtpZihnZXRMb2NhdGlvbih0aGlzLmJhc2UpIT09dGhpcy5jdXJyZW50LmZ1bGxQYXRoKXt2YXIgY3VycmVudD1jbGVhblBhdGgodGhpcy5iYXNlK3RoaXMuY3VycmVudC5mdWxsUGF0aCk7cHVzaD9wdXNoU3RhdGUoY3VycmVudCk6cmVwbGFjZVN0YXRlKGN1cnJlbnQpfX0sSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nZXRDdXJyZW50TG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gZ2V0TG9jYXRpb24odGhpcy5iYXNlKX0sSFRNTDVIaXN0b3J5fShIaXN0b3J5KTtmdW5jdGlvbiBnZXRMb2NhdGlvbihiYXNlKXt2YXIgcGF0aD13aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7cmV0dXJuIGJhc2UmJjA9PT1wYXRoLmluZGV4T2YoYmFzZSkmJihwYXRoPXBhdGguc2xpY2UoYmFzZS5sZW5ndGgpKSwocGF0aHx8Ii8iKSt3aW5kb3cubG9jYXRpb24uc2VhcmNoK3dpbmRvdy5sb2NhdGlvbi5oYXNofXZhciBIYXNoSGlzdG9yeT1mdW5jdGlvbihIaXN0b3J5JCQxKXtmdW5jdGlvbiBIYXNoSGlzdG9yeShyb3V0ZXIsYmFzZSxmYWxsYmFjayl7SGlzdG9yeSQkMS5jYWxsKHRoaXMscm91dGVyLGJhc2UpLGZhbGxiYWNrJiZmdW5jdGlvbihiYXNlKXt2YXIgbG9jYXRpb249Z2V0TG9jYXRpb24oYmFzZSk7aWYoIS9eXC8jLy50ZXN0KGxvY2F0aW9uKSlyZXR1cm4gd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoY2xlYW5QYXRoKGJhc2UrIi8jIitsb2NhdGlvbikpLCEwfSh0aGlzLmJhc2UpfHxlbnN1cmVTbGFzaCgpfXJldHVybiBIaXN0b3J5JCQxJiYoSGFzaEhpc3RvcnkuX19wcm90b19fPUhpc3RvcnkkJDEpLCgoSGFzaEhpc3RvcnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSGlzdG9yeSQkMSYmSGlzdG9yeSQkMS5wcm90b3R5cGUpKS5jb25zdHJ1Y3Rvcj1IYXNoSGlzdG9yeSkucHJvdG90eXBlLnNldHVwTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIHRoaXMkMT10aGlzLGV4cGVjdFNjcm9sbD10aGlzLnJvdXRlci5vcHRpb25zLnNjcm9sbEJlaGF2aW9yLHN1cHBvcnRzU2Nyb2xsPXN1cHBvcnRzUHVzaFN0YXRlJiZleHBlY3RTY3JvbGw7c3VwcG9ydHNTY3JvbGwmJnNldHVwU2Nyb2xsKCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoc3VwcG9ydHNQdXNoU3RhdGU/InBvcHN0YXRlIjoiaGFzaGNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgY3VycmVudD10aGlzJDEuY3VycmVudDtlbnN1cmVTbGFzaCgpJiZ0aGlzJDEudHJhbnNpdGlvblRvKGdldEhhc2goKSxmdW5jdGlvbihyb3V0ZSl7c3VwcG9ydHNTY3JvbGwmJmhhbmRsZVNjcm9sbCh0aGlzJDEucm91dGVyLHJvdXRlLGN1cnJlbnQsITApLHN1cHBvcnRzUHVzaFN0YXRlfHxyZXBsYWNlSGFzaChyb3V0ZS5mdWxsUGF0aCl9KX0pfSxIYXNoSGlzdG9yeS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihsb2NhdGlvbixvbkNvbXBsZXRlLG9uQWJvcnQpe3ZhciB0aGlzJDE9dGhpcyxmcm9tUm91dGU9dGhpcy5jdXJyZW50O3RoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLGZ1bmN0aW9uKHJvdXRlKXtwdXNoSGFzaChyb3V0ZS5mdWxsUGF0aCksaGFuZGxlU2Nyb2xsKHRoaXMkMS5yb3V0ZXIscm91dGUsZnJvbVJvdXRlLCExKSxvbkNvbXBsZXRlJiZvbkNvbXBsZXRlKHJvdXRlKX0sb25BYm9ydCl9LEhhc2hIaXN0b3J5LnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGxvY2F0aW9uLG9uQ29tcGxldGUsb25BYm9ydCl7dmFyIHRoaXMkMT10aGlzLGZyb21Sb3V0ZT10aGlzLmN1cnJlbnQ7dGhpcy50cmFuc2l0aW9uVG8obG9jYXRpb24sZnVuY3Rpb24ocm91dGUpe3JlcGxhY2VIYXNoKHJvdXRlLmZ1bGxQYXRoKSxoYW5kbGVTY3JvbGwodGhpcyQxLnJvdXRlcixyb3V0ZSxmcm9tUm91dGUsITEpLG9uQ29tcGxldGUmJm9uQ29tcGxldGUocm91dGUpfSxvbkFib3J0KX0sSGFzaEhpc3RvcnkucHJvdG90eXBlLmdvPWZ1bmN0aW9uKG4pe3dpbmRvdy5oaXN0b3J5LmdvKG4pfSxIYXNoSGlzdG9yeS5wcm90b3R5cGUuZW5zdXJlVVJMPWZ1bmN0aW9uKHB1c2gpe3ZhciBjdXJyZW50PXRoaXMuY3VycmVudC5mdWxsUGF0aDtnZXRIYXNoKCkhPT1jdXJyZW50JiYocHVzaD9wdXNoSGFzaChjdXJyZW50KTpyZXBsYWNlSGFzaChjdXJyZW50KSl9LEhhc2hIaXN0b3J5LnByb3RvdHlwZS5nZXRDdXJyZW50TG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gZ2V0SGFzaCgpfSxIYXNoSGlzdG9yeX0oSGlzdG9yeSk7ZnVuY3Rpb24gZW5zdXJlU2xhc2goKXt2YXIgcGF0aD1nZXRIYXNoKCk7cmV0dXJuIi8iPT09cGF0aC5jaGFyQXQoMCl8fChyZXBsYWNlSGFzaCgiLyIrcGF0aCksITEpfWZ1bmN0aW9uIGdldEhhc2goKXt2YXIgaHJlZj13aW5kb3cubG9jYXRpb24uaHJlZixpbmRleD1ocmVmLmluZGV4T2YoIiMiKTtyZXR1cm4tMT09PWluZGV4PyIiOmhyZWYuc2xpY2UoaW5kZXgrMSl9ZnVuY3Rpb24gZ2V0VXJsKHBhdGgpe3ZhciBocmVmPXdpbmRvdy5sb2NhdGlvbi5ocmVmLGk9aHJlZi5pbmRleE9mKCIjIik7cmV0dXJuKDA8PWk/aHJlZi5zbGljZSgwLGkpOmhyZWYpKyIjIitwYXRofWZ1bmN0aW9uIHB1c2hIYXNoKHBhdGgpe3N1cHBvcnRzUHVzaFN0YXRlP3B1c2hTdGF0ZShnZXRVcmwocGF0aCkpOndpbmRvdy5sb2NhdGlvbi5oYXNoPXBhdGh9ZnVuY3Rpb24gcmVwbGFjZUhhc2gocGF0aCl7c3VwcG9ydHNQdXNoU3RhdGU/cmVwbGFjZVN0YXRlKGdldFVybChwYXRoKSk6d2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZ2V0VXJsKHBhdGgpKX12YXIgQWJzdHJhY3RIaXN0b3J5PWZ1bmN0aW9uKEhpc3RvcnkkJDEpe2Z1bmN0aW9uIEFic3RyYWN0SGlzdG9yeShyb3V0ZXIsYmFzZSl7SGlzdG9yeSQkMS5jYWxsKHRoaXMscm91dGVyLGJhc2UpLHRoaXMuc3RhY2s9W10sdGhpcy5pbmRleD0tMX1yZXR1cm4gSGlzdG9yeSQkMSYmKEFic3RyYWN0SGlzdG9yeS5fX3Byb3RvX189SGlzdG9yeSQkMSksKChBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSGlzdG9yeSQkMSYmSGlzdG9yeSQkMS5wcm90b3R5cGUpKS5jb25zdHJ1Y3Rvcj1BYnN0cmFjdEhpc3RvcnkpLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGxvY2F0aW9uLG9uQ29tcGxldGUsb25BYm9ydCl7dmFyIHRoaXMkMT10aGlzO3RoaXMudHJhbnNpdGlvblRvKGxvY2F0aW9uLGZ1bmN0aW9uKHJvdXRlKXt0aGlzJDEuc3RhY2s9dGhpcyQxLnN0YWNrLnNsaWNlKDAsdGhpcyQxLmluZGV4KzEpLmNvbmNhdChyb3V0ZSksdGhpcyQxLmluZGV4Kyssb25Db21wbGV0ZSYmb25Db21wbGV0ZShyb3V0ZSl9LG9uQWJvcnQpfSxBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24obG9jYXRpb24sb25Db21wbGV0ZSxvbkFib3J0KXt2YXIgdGhpcyQxPXRoaXM7dGhpcy50cmFuc2l0aW9uVG8obG9jYXRpb24sZnVuY3Rpb24ocm91dGUpe3RoaXMkMS5zdGFjaz10aGlzJDEuc3RhY2suc2xpY2UoMCx0aGlzJDEuaW5kZXgpLmNvbmNhdChyb3V0ZSksb25Db21wbGV0ZSYmb25Db21wbGV0ZShyb3V0ZSl9LG9uQWJvcnQpfSxBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmdvPWZ1bmN0aW9uKG4pe3ZhciB0aGlzJDE9dGhpcyx0YXJnZXRJbmRleD10aGlzLmluZGV4K247aWYoISh0YXJnZXRJbmRleDwwfHx0YXJnZXRJbmRleD49dGhpcy5zdGFjay5sZW5ndGgpKXt2YXIgcm91dGU9dGhpcy5zdGFja1t0YXJnZXRJbmRleF07dGhpcy5jb25maXJtVHJhbnNpdGlvbihyb3V0ZSxmdW5jdGlvbigpe3RoaXMkMS5pbmRleD10YXJnZXRJbmRleCx0aGlzJDEudXBkYXRlUm91dGUocm91dGUpfSl9fSxBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmdldEN1cnJlbnRMb2NhdGlvbj1mdW5jdGlvbigpe3ZhciBjdXJyZW50PXRoaXMuc3RhY2tbdGhpcy5zdGFjay5sZW5ndGgtMV07cmV0dXJuIGN1cnJlbnQ/Y3VycmVudC5mdWxsUGF0aDoiLyJ9LEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZW5zdXJlVVJMPWZ1bmN0aW9uKCl7fSxBYnN0cmFjdEhpc3Rvcnl9KEhpc3RvcnkpLFZ1ZVJvdXRlcj1mdW5jdGlvbihvcHRpb25zKXt2b2lkIDA9PT1vcHRpb25zJiYob3B0aW9ucz17fSksdGhpcy5hcHA9bnVsbCx0aGlzLmFwcHM9W10sdGhpcy5vcHRpb25zPW9wdGlvbnMsdGhpcy5iZWZvcmVIb29rcz1bXSx0aGlzLnJlc29sdmVIb29rcz1bXSx0aGlzLmFmdGVySG9va3M9W10sdGhpcy5tYXRjaGVyPWNyZWF0ZU1hdGNoZXIob3B0aW9ucy5yb3V0ZXN8fFtdLHRoaXMpO3ZhciBtb2RlPW9wdGlvbnMubW9kZXx8Imhhc2giO3N3aXRjaCh0aGlzLmZhbGxiYWNrPSJoaXN0b3J5Ij09PW1vZGUmJiFzdXBwb3J0c1B1c2hTdGF0ZSYmITEhPT1vcHRpb25zLmZhbGxiYWNrLHRoaXMuZmFsbGJhY2smJihtb2RlPSJoYXNoIiksaW5Ccm93c2VyfHwobW9kZT0iYWJzdHJhY3QiKSx0aGlzLm1vZGU9bW9kZSl7Y2FzZSJoaXN0b3J5Ijp0aGlzLmhpc3Rvcnk9bmV3IEhUTUw1SGlzdG9yeSh0aGlzLG9wdGlvbnMuYmFzZSk7YnJlYWs7Y2FzZSJoYXNoIjp0aGlzLmhpc3Rvcnk9bmV3IEhhc2hIaXN0b3J5KHRoaXMsb3B0aW9ucy5iYXNlLHRoaXMuZmFsbGJhY2spO2JyZWFrO2Nhc2UiYWJzdHJhY3QiOnRoaXMuaGlzdG9yeT1uZXcgQWJzdHJhY3RIaXN0b3J5KHRoaXMsb3B0aW9ucy5iYXNlKTticmVhaztkZWZhdWx0OjB9fSxwcm90b3R5cGVBY2Nlc3NvcnM9e2N1cnJlbnRSb3V0ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gcmVnaXN0ZXJIb29rKGxpc3QsZm4pe3JldHVybiBsaXN0LnB1c2goZm4pLGZ1bmN0aW9uKCl7dmFyIGk9bGlzdC5pbmRleE9mKGZuKTstMTxpJiZsaXN0LnNwbGljZShpLDEpfX1WdWVSb3V0ZXIucHJvdG90eXBlLm1hdGNoPWZ1bmN0aW9uKHJhdyxjdXJyZW50LHJlZGlyZWN0ZWRGcm9tKXtyZXR1cm4gdGhpcy5tYXRjaGVyLm1hdGNoKHJhdyxjdXJyZW50LHJlZGlyZWN0ZWRGcm9tKX0scHJvdG90eXBlQWNjZXNzb3JzLmN1cnJlbnRSb3V0ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaXN0b3J5JiZ0aGlzLmhpc3RvcnkuY3VycmVudH0sVnVlUm91dGVyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGFwcCl7dmFyIHRoaXMkMT10aGlzO2lmKHRoaXMuYXBwcy5wdXNoKGFwcCksIXRoaXMuYXBwKXt0aGlzLmFwcD1hcHA7dmFyIGhpc3Rvcnk9dGhpcy5oaXN0b3J5O2lmKGhpc3RvcnkgaW5zdGFuY2VvZiBIVE1MNUhpc3RvcnkpaGlzdG9yeS50cmFuc2l0aW9uVG8oaGlzdG9yeS5nZXRDdXJyZW50TG9jYXRpb24oKSk7ZWxzZSBpZihoaXN0b3J5IGluc3RhbmNlb2YgSGFzaEhpc3Rvcnkpe3ZhciBzZXR1cEhhc2hMaXN0ZW5lcj1mdW5jdGlvbigpe2hpc3Rvcnkuc2V0dXBMaXN0ZW5lcnMoKX07aGlzdG9yeS50cmFuc2l0aW9uVG8oaGlzdG9yeS5nZXRDdXJyZW50TG9jYXRpb24oKSxzZXR1cEhhc2hMaXN0ZW5lcixzZXR1cEhhc2hMaXN0ZW5lcil9aGlzdG9yeS5saXN0ZW4oZnVuY3Rpb24ocm91dGUpe3RoaXMkMS5hcHBzLmZvckVhY2goZnVuY3Rpb24oYXBwKXthcHAuX3JvdXRlPXJvdXRlfSl9KX19LFZ1ZVJvdXRlci5wcm90b3R5cGUuYmVmb3JlRWFjaD1mdW5jdGlvbihmbil7cmV0dXJuIHJlZ2lzdGVySG9vayh0aGlzLmJlZm9yZUhvb2tzLGZuKX0sVnVlUm91dGVyLnByb3RvdHlwZS5iZWZvcmVSZXNvbHZlPWZ1bmN0aW9uKGZuKXtyZXR1cm4gcmVnaXN0ZXJIb29rKHRoaXMucmVzb2x2ZUhvb2tzLGZuKX0sVnVlUm91dGVyLnByb3RvdHlwZS5hZnRlckVhY2g9ZnVuY3Rpb24oZm4pe3JldHVybiByZWdpc3Rlckhvb2sodGhpcy5hZnRlckhvb2tzLGZuKX0sVnVlUm91dGVyLnByb3RvdHlwZS5vblJlYWR5PWZ1bmN0aW9uKGNiLGVycm9yQ2Ipe3RoaXMuaGlzdG9yeS5vblJlYWR5KGNiLGVycm9yQ2IpfSxWdWVSb3V0ZXIucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24oZXJyb3JDYil7dGhpcy5oaXN0b3J5Lm9uRXJyb3IoZXJyb3JDYil9LFZ1ZVJvdXRlci5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihsb2NhdGlvbixvbkNvbXBsZXRlLG9uQWJvcnQpe3RoaXMuaGlzdG9yeS5wdXNoKGxvY2F0aW9uLG9uQ29tcGxldGUsb25BYm9ydCl9LFZ1ZVJvdXRlci5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihsb2NhdGlvbixvbkNvbXBsZXRlLG9uQWJvcnQpe3RoaXMuaGlzdG9yeS5yZXBsYWNlKGxvY2F0aW9uLG9uQ29tcGxldGUsb25BYm9ydCl9LFZ1ZVJvdXRlci5wcm90b3R5cGUuZ289ZnVuY3Rpb24obil7dGhpcy5oaXN0b3J5LmdvKG4pfSxWdWVSb3V0ZXIucHJvdG90eXBlLmJhY2s9ZnVuY3Rpb24oKXt0aGlzLmdvKC0xKX0sVnVlUm91dGVyLnByb3RvdHlwZS5mb3J3YXJkPWZ1bmN0aW9uKCl7dGhpcy5nbygxKX0sVnVlUm91dGVyLnByb3RvdHlwZS5nZXRNYXRjaGVkQ29tcG9uZW50cz1mdW5jdGlvbih0byl7dmFyIHJvdXRlPXRvP3RvLm1hdGNoZWQ/dG86dGhpcy5yZXNvbHZlKHRvKS5yb3V0ZTp0aGlzLmN1cnJlbnRSb3V0ZTtyZXR1cm4gcm91dGU/W10uY29uY2F0LmFwcGx5KFtdLHJvdXRlLm1hdGNoZWQubWFwKGZ1bmN0aW9uKG0pe3JldHVybiBPYmplY3Qua2V5cyhtLmNvbXBvbmVudHMpLm1hcChmdW5jdGlvbihrZXkpe3JldHVybiBtLmNvbXBvbmVudHNba2V5XX0pfSkpOltdfSxWdWVSb3V0ZXIucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odG8sY3VycmVudCxhcHBlbmQpe3ZhciBsb2NhdGlvbj1ub3JtYWxpemVMb2NhdGlvbih0byxjdXJyZW50fHx0aGlzLmhpc3RvcnkuY3VycmVudCxhcHBlbmQsdGhpcykscm91dGU9dGhpcy5tYXRjaChsb2NhdGlvbixjdXJyZW50KSxmdWxsUGF0aD1yb3V0ZS5yZWRpcmVjdGVkRnJvbXx8cm91dGUuZnVsbFBhdGg7cmV0dXJue2xvY2F0aW9uOmxvY2F0aW9uLHJvdXRlOnJvdXRlLGhyZWY6ZnVuY3Rpb24oYmFzZSxmdWxsUGF0aCxtb2RlKXt2YXIgcGF0aD0iaGFzaCI9PT1tb2RlPyIjIitmdWxsUGF0aDpmdWxsUGF0aDtyZXR1cm4gYmFzZT9jbGVhblBhdGgoYmFzZSsiLyIrcGF0aCk6cGF0aH0odGhpcy5oaXN0b3J5LmJhc2UsZnVsbFBhdGgsdGhpcy5tb2RlKSxub3JtYWxpemVkVG86bG9jYXRpb24scmVzb2x2ZWQ6cm91dGV9fSxWdWVSb3V0ZXIucHJvdG90eXBlLmFkZFJvdXRlcz1mdW5jdGlvbihyb3V0ZXMpe3RoaXMubWF0Y2hlci5hZGRSb3V0ZXMocm91dGVzKSx0aGlzLmhpc3RvcnkuY3VycmVudCE9PVNUQVJUJiZ0aGlzLmhpc3RvcnkudHJhbnNpdGlvblRvKHRoaXMuaGlzdG9yeS5nZXRDdXJyZW50TG9jYXRpb24oKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZ1ZVJvdXRlci5wcm90b3R5cGUscHJvdG90eXBlQWNjZXNzb3JzKSxWdWVSb3V0ZXIuaW5zdGFsbD1pbnN0YWxsLFZ1ZVJvdXRlci52ZXJzaW9uPSIzLjAuMSIsaW5Ccm93c2VyJiZ3aW5kb3cuVnVlJiZ3aW5kb3cuVnVlLnVzZShWdWVSb3V0ZXIpLF9fd2VicGFja19leHBvcnRzX18uYT1WdWVSb3V0ZXJ9LGpVZVk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImVsIix7bW9udGhzTm9taW5hdGl2ZUVsOiLOmc6xzr3Ov8+FzqzPgc65zr/Pgl/Ops61zrLPgc6/z4XOrM+BzrnOv8+CX86czqzPgc+EzrnOv8+CX86Rz4DPgc6vzrvOuc6/z4JfzpzOrM65zr/Pgl/Omc6/z43Ovc65zr/Pgl/Omc6/z43Ou865zr/Pgl/Okc+NzrPOv8+Fz4PPhM6/z4JfzqPOtc+Az4TOrc68zrLPgc65zr/Pgl/On866z4TPjs6yz4HOuc6/z4Jfzp3Ov86tzrzOss+BzrnOv8+CX86UzrXOus6tzrzOss+BzrnOv8+CIi5zcGxpdCgiXyIpLG1vbnRoc0dlbml0aXZlRWw6Is6ZzrHOvc6/z4XOsc+Bzq/Ov8+FX86mzrXOss+Bzr/Phc6xz4HOr86/z4VfzpzOsc+Bz4TOr86/z4VfzpHPgM+BzrnOu86vzr/PhV/OnM6xzpDOv8+FX86Zzr/Phc69zq/Ov8+FX86Zzr/Phc67zq/Ov8+FX86Rz4XOs86/z43Pg8+Ezr/PhV/Oo861z4DPhM61zrzOss+Bzq/Ov8+FX86fzrrPhM+JzrLPgc6vzr/PhV/Onc6/zrXOvM6yz4HOr86/z4VfzpTOtc66zrXOvM6yz4HOr86/z4UiLnNwbGl0KCJfIiksbW9udGhzOmZ1bmN0aW9uKG1vbWVudFRvRm9ybWF0LGZvcm1hdCl7cmV0dXJuIG1vbWVudFRvRm9ybWF0PyJzdHJpbmciPT10eXBlb2YgZm9ybWF0JiYvRC8udGVzdChmb3JtYXQuc3Vic3RyaW5nKDAsZm9ybWF0LmluZGV4T2YoIk1NTU0iKSkpP3RoaXMuX21vbnRoc0dlbml0aXZlRWxbbW9tZW50VG9Gb3JtYXQubW9udGgoKV06dGhpcy5fbW9udGhzTm9taW5hdGl2ZUVsW21vbWVudFRvRm9ybWF0Lm1vbnRoKCldOnRoaXMuX21vbnRoc05vbWluYXRpdmVFbH0sbW9udGhzU2hvcnQ6Is6ZzrHOvV/Ops61zrJfzpzOsc+BX86Rz4DPgV/OnM6xz4pfzpnOv8+Fzr1fzpnOv8+FzrtfzpHPhc6zX86jzrXPgF/On866z4Rfzp3Ov861X86UzrXOuiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoizprPhc+BzrnOsc66zq5fzpTOtc+Fz4TOrc+BzrFfzqTPgc6vz4TOt1/OpM61z4TOrM+Bz4TOt1/OoM6tzrzPgM+EzrdfzqDOsc+BzrHPg866zrXPhc6uX86jzqzOss6yzrHPhM6/Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Is6az4XPgV/OlM61z4VfzqTPgc65X86kzrXPhF/OoM61zrxfzqDOsc+BX86jzrHOsiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoizprPhV/OlM61X86kz4FfzqTOtV/OoM61X86gzrFfzqPOsSIuc3BsaXQoIl8iKSxtZXJpZGllbTpmdW5jdGlvbihob3VycyxtaW51dGVzLGlzTG93ZXIpe3JldHVybiAxMTxob3Vycz9pc0xvd2VyPyLOvM68IjoizpzOnCI6aXNMb3dlcj8iz4DOvCI6Is6gzpwifSxpc1BNOmZ1bmN0aW9uKGlucHV0KXtyZXR1cm4izrwiPT09KGlucHV0KyIiKS50b0xvd2VyQ2FzZSgpWzBdfSxtZXJpZGllbVBhcnNlOi9bzqDOnF1cLj/OnD9cLj8vaSxsb25nRGF0ZUZvcm1hdDp7TFQ6Img6bW0gQSIsTFRTOiJoOm1tOnNzIEEiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBoOm1tIEEiLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIGg6bW0gQSJ9LGNhbGVuZGFyRWw6e3NhbWVEYXk6IlvOo86uzrzOtc+BzrEge31dIExUIixuZXh0RGF5OiJbzpHPjc+BzrnOvyB7fV0gTFQiLG5leHRXZWVrOiJkZGRkIFt7fV0gTFQiLGxhc3REYXk6IlvOp864zrXPgiB7fV0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgNjpyZXR1cm4iW8+Ezr8gz4DPgc6/zrfOs86/z43OvM61zr3Ov10gZGRkZCBbe31dIExUIjtkZWZhdWx0OnJldHVybiJbz4TOt869IM+Az4HOv863zrPOv8+NzrzOtc69zrddIGRkZGQgW3t9XSBMVCJ9fSxzYW1lRWxzZToiTCJ9LGNhbGVuZGFyOmZ1bmN0aW9uKGtleSxtb20pe3ZhciBpbnB1dCxvdXRwdXQ9dGhpcy5fY2FsZW5kYXJFbFtrZXldLGhvdXJzPW1vbSYmbW9tLmhvdXJzKCk7cmV0dXJuKChpbnB1dD1vdXRwdXQpaW5zdGFuY2VvZiBGdW5jdGlvbnx8IltvYmplY3QgRnVuY3Rpb25dIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkpJiYob3V0cHV0PW91dHB1dC5hcHBseShtb20pKSxvdXRwdXQucmVwbGFjZSgie30iLGhvdXJzJTEyPT0xPyLPg8+EzrciOiLPg8+EzrnPgiIpfSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiz4POtSAlcyIscGFzdDoiJXMgz4DPgc65zr0iLHM6Is67zq/Os86xIM60zrXPhc+EzrXPgc+MzrvOtc+Az4TOsSIsc3M6IiVkIM60zrXPhc+EzrXPgc+MzrvOtc+Az4TOsSIsbToizq3Ovc6xIM67zrXPgM+Ez4wiLG1tOiIlZCDOu861z4DPhM6sIixoOiLOvM6vzrEgz47Pgc6xIixoaDoiJWQgz47Pgc61z4IiLGQ6Is68zq/OsSDOvM6tz4HOsSIsZGQ6IiVkIM68zq3Pgc61z4IiLE06Is6tzr3Osc+CIM68zq7Ovc6xz4IiLE1NOiIlZCDOvM6uzr3Otc+CIix5OiLOrc69zrHPgiDPh8+Bz4zOvc6/z4IiLHl5OiIlZCDPh8+Bz4zOvc65zrEifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9zrcvLG9yZGluYWw6IiVkzrciLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxqVmRDOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgbW9udGhzTm9taW5hdGl2ZT0ic3R5Y3plxYRfbHV0eV9tYXJ6ZWNfa3dpZWNpZcWEX21hal9jemVyd2llY19saXBpZWNfc2llcnBpZcWEX3dyemVzaWXFhF9wYcW6ZHppZXJuaWtfbGlzdG9wYWRfZ3J1ZHppZcWEIi5zcGxpdCgiXyIpLG1vbnRoc1N1YmplY3RpdmU9InN0eWN6bmlhX2x1dGVnb19tYXJjYV9rd2lldG5pYV9tYWphX2N6ZXJ3Y2FfbGlwY2Ffc2llcnBuaWFfd3J6ZcWbbmlhX3Bhxbpkemllcm5pa2FfbGlzdG9wYWRhX2dydWRuaWEiLnNwbGl0KCJfIik7ZnVuY3Rpb24gcGx1cmFsKG4pe3JldHVybiBuJTEwPDUmJjE8biUxMCYmfn4obi8xMCklMTAhPTF9ZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlcix3aXRob3V0U3VmZml4LGtleSl7dmFyIHJlc3VsdD1udW1iZXIrIiAiO3N3aXRjaChrZXkpe2Nhc2Uic3MiOnJldHVybiByZXN1bHQrKHBsdXJhbChudW1iZXIpPyJzZWt1bmR5Ijoic2VrdW5kIik7Y2FzZSJtIjpyZXR1cm4gd2l0aG91dFN1ZmZpeD8ibWludXRhIjoibWludXTEmSI7Y2FzZSJtbSI6cmV0dXJuIHJlc3VsdCsocGx1cmFsKG51bWJlcik/Im1pbnV0eSI6Im1pbnV0Iik7Y2FzZSJoIjpyZXR1cm4gd2l0aG91dFN1ZmZpeD8iZ29kemluYSI6ImdvZHppbsSZIjtjYXNlImhoIjpyZXR1cm4gcmVzdWx0KyhwbHVyYWwobnVtYmVyKT8iZ29kemlueSI6ImdvZHppbiIpO2Nhc2UiTU0iOnJldHVybiByZXN1bHQrKHBsdXJhbChudW1iZXIpPyJtaWVzacSFY2UiOiJtaWVzacSZY3kiKTtjYXNlInl5IjpyZXR1cm4gcmVzdWx0KyhwbHVyYWwobnVtYmVyKT8ibGF0YSI6ImxhdCIpfX1tb21lbnQuZGVmaW5lTG9jYWxlKCJwbCIse21vbnRoczpmdW5jdGlvbihtb21lbnRUb0Zvcm1hdCxmb3JtYXQpe3JldHVybiBtb21lbnRUb0Zvcm1hdD8iIj09PWZvcm1hdD8iKCIrbW9udGhzU3ViamVjdGl2ZVttb21lbnRUb0Zvcm1hdC5tb250aCgpXSsifCIrbW9udGhzTm9taW5hdGl2ZVttb21lbnRUb0Zvcm1hdC5tb250aCgpXSsiKSI6L0QgTU1NTS8udGVzdChmb3JtYXQpP21vbnRoc1N1YmplY3RpdmVbbW9tZW50VG9Gb3JtYXQubW9udGgoKV06bW9udGhzTm9taW5hdGl2ZVttb21lbnRUb0Zvcm1hdC5tb250aCgpXTptb250aHNOb21pbmF0aXZlfSxtb250aHNTaG9ydDoic3R5X2x1dF9tYXJfa3dpX21hal9jemVfbGlwX3NpZV93cnpfcGHFul9saXNfZ3J1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiJuaWVkemllbGFfcG9uaWVkemlhxYJla193dG9yZWtfxZtyb2RhX2N6d2FydGVrX3BpxIV0ZWtfc29ib3RhIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Im5kel9wb25fd3RfxZtyX2N6d19wdF9zb2IiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Ik5kX1BuX1d0X8Wacl9Del9QdF9TbyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltEemnFmyBvXSBMVCIsbmV4dERheToiW0p1dHJvIG9dIExUIixuZXh0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIltXIG5pZWR6aWVsxJkgb10gTFQiO2Nhc2UgMjpyZXR1cm4iW1dlIHd0b3JlayBvXSBMVCI7Y2FzZSAzOnJldHVybiJbVyDFm3JvZMSZIG9dIExUIjtjYXNlIDY6cmV0dXJuIltXIHNvYm90xJkgb10gTFQiO2RlZmF1bHQ6cmV0dXJuIltXXSBkZGRkIFtvXSBMVCJ9fSxsYXN0RGF5OiJbV2N6b3JhaiBvXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbVyB6ZXN6xYLEhSBuaWVkemllbMSZIG9dIExUIjtjYXNlIDM6cmV0dXJuIltXIHplc3rFgsSFIMWbcm9kxJkgb10gTFQiO2Nhc2UgNjpyZXR1cm4iW1cgemVzesWCxIUgc29ib3TEmSBvXSBMVCI7ZGVmYXVsdDpyZXR1cm4iW1cgemVzesWCeV0gZGRkZCBbb10gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6IiVzIHRlbXUiLHM6ImtpbGthIHNla3VuZCIsc3M6dHJhbnNsYXRlLG06dHJhbnNsYXRlLG1tOnRyYW5zbGF0ZSxoOnRyYW5zbGF0ZSxoaDp0cmFuc2xhdGUsZDoiMSBkemllxYQiLGRkOiIlZCBkbmkiLE06Im1pZXNpxIVjIixNTTp0cmFuc2xhdGUseToicm9rIix5eTp0cmFuc2xhdGV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sImpmUysiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgQ2FuY2VsPV9fd2VicGFja19yZXF1aXJlX18oImVuZGQiKTtmdW5jdGlvbiBDYW5jZWxUb2tlbihleGVjdXRvcil7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGV4ZWN1dG9yKXRocm93IG5ldyBUeXBlRXJyb3IoImV4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4iKTt2YXIgcmVzb2x2ZVByb21pc2U7dGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpe3Jlc29sdmVQcm9taXNlPXJlc29sdmV9KTt2YXIgdG9rZW49dGhpcztleGVjdXRvcihmdW5jdGlvbihtZXNzYWdlKXt0b2tlbi5yZWFzb258fCh0b2tlbi5yZWFzb249bmV3IENhbmNlbChtZXNzYWdlKSxyZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pKX0pfUNhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkPWZ1bmN0aW9uKCl7aWYodGhpcy5yZWFzb24pdGhyb3cgdGhpcy5yZWFzb259LENhbmNlbFRva2VuLnNvdXJjZT1mdW5jdGlvbigpe3ZhciBjYW5jZWw7cmV0dXJue3Rva2VuOm5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbihjKXtjYW5jZWw9Y30pLGNhbmNlbDpjYW5jZWx9fSxtb2R1bGUuZXhwb3J0cz1DYW5jZWxUb2tlbn0samZTQzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7dmFyIHN5bWJvbE1hcD17MToi27EiLDI6ItuyIiwzOiLbsyIsNDoi27QiLDU6Itu1Iiw2OiLbtiIsNzoi27ciLDg6Itu4Iiw5OiLbuSIsMDoi27AifSxudW1iZXJNYXA9eyLbsSI6IjEiLCLbsiI6IjIiLCLbsyI6IjMiLCLbtCI6IjQiLCLbtSI6IjUiLCLbtiI6IjYiLCLbtyI6IjciLCLbuCI6IjgiLCLbuSI6IjkiLCLbsCI6IjAifTttb21lbnQuZGVmaW5lTG9jYWxlKCJmYSIse21vbnRoczoi2pjYp9mG2YjbjNmHX9mB2YjYsduM2Ydf2YXYp9ix2LNf2KLZiNix24zZhF/ZhdmHX9qY2YjYptmGX9qY2YjYptuM2Ydf2KfZiNiqX9iz2b7Yqtin2YXYqNixX9in2qnYqtio2LFf2YbZiNin2YXYqNixX9iv2LPYp9mF2KjYsSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi2pjYp9mG2YjbjNmHX9mB2YjYsduM2Ydf2YXYp9ix2LNf2KLZiNix24zZhF/ZhdmHX9qY2YjYptmGX9qY2YjYptuM2Ydf2KfZiNiqX9iz2b7Yqtin2YXYqNixX9in2qnYqtio2LFf2YbZiNin2YXYqNixX9iv2LPYp9mF2KjYsSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi24zaqeKAjNi02YbYqNmHX9iv2YjYtNmG2KjZh1/Ys9mH4oCM2LTZhtio2Ydf2obZh9in2LHYtNmG2KjZh1/ZvtmG2KzigIzYtNmG2KjZh1/YrNmF2LnZh1/YtNmG2KjZhyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLbjNqp4oCM2LTZhtio2Ydf2K/ZiNi02YbYqNmHX9iz2YfigIzYtNmG2KjZh1/ahtmH2KfYsdi02YbYqNmHX9m+2YbYrOKAjNi02YbYqNmHX9is2YXYudmHX9i02YbYqNmHIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLbjF/Yr1/Ys1/ahl/Zvl/YrF/YtCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L9mC2KjZhCDYp9iyINi42YfYsXzYqNi52K8g2KfYsiDYuNmH2LEvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybi/YqNi52K8g2KfYsiDYuNmH2LEvLnRlc3QoaW5wdXQpfSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjwxMj8i2YLYqNmEINin2LIg2LjZh9ixIjoi2KjYudivINin2LIg2LjZh9ixIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvYp9mF2LHZiNiyINiz2KfYudiqXSBMVCIsbmV4dERheToiW9mB2LHYr9inINiz2KfYudiqXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9iz2KfYudiqXSBMVCIsbGFzdERheToiW9iv24zYsdmI2LIg2LPYp9i52KpdIExUIixsYXN0V2VlazoiZGRkZCBb2b7bjNi0XSBb2LPYp9i52KpdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLYr9ixICVzIixwYXN0OiIlcyDZvtuM2LQiLHM6ItqG2YbYryDYq9in2YbbjNmHIixzczoi2KvYp9mG24zZhyBkJSIsbToi24zaqSDYr9mC24zZgtmHIixtbToiJWQg2K/ZgtuM2YLZhyIsaDoi24zaqSDYs9in2LnYqiIsaGg6IiVkINiz2KfYudiqIixkOiLbjNqpINix2YjYsiIsZGQ6IiVkINix2YjYsiIsTToi24zaqSDZhdin2YciLE1NOiIlZCDZhdin2YciLHk6ItuM2qkg2LPYp9mEIix5eToiJWQg2LPYp9mEIn0scHJlcGFyc2U6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1vbsC3buV0vZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIG51bWJlck1hcFttYXRjaF19KS5yZXBsYWNlKC/YjC9nLCIsIil9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24obWF0Y2gpe3JldHVybiBzeW1ib2xNYXBbbWF0Y2hdfSkucmVwbGFjZSgvLC9nLCLYjCIpfSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ92YUvLG9yZGluYWw6IiVk2YUiLHdlZWs6e2Rvdzo2LGRveToxMn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sam02MjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksb3duS2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJtUXR2IiksdG9JT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oImFDRmoiKSxnT1BEPV9fd2VicGFja19yZXF1aXJlX18oIkVlbUgiKSxjcmVhdGVQcm9wZXJ0eT1fX3dlYnBhY2tfcmVxdWlyZV9fKCI4YTdyIik7JGV4cG9ydCgkZXhwb3J0LlMsIk9iamVjdCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcnM6ZnVuY3Rpb24ob2JqZWN0KXtmb3IodmFyIGtleSxkZXNjLE89dG9JT2JqZWN0KG9iamVjdCksZ2V0RGVzYz1nT1BELmYsa2V5cz1vd25LZXlzKE8pLHJlc3VsdD17fSxpPTA7a2V5cy5sZW5ndGg+aTspdm9pZCAwIT09KGRlc2M9Z2V0RGVzYyhPLGtleT1rZXlzW2krK10pKSYmY3JlYXRlUHJvcGVydHkocmVzdWx0LGtleSxkZXNjKTtyZXR1cm4gcmVzdWx0fX0pfSxqbURIOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPSFfX3dlYnBhY2tfcmVxdWlyZV9fKCJLVXhQIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxqbk80OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgc3ltYm9sTWFwPXsxOiLZoSIsMjoi2aIiLDM6ItmjIiw0OiLZpCIsNToi2aUiLDY6ItmmIiw3OiLZpyIsODoi2agiLDk6ItmpIiwwOiLZoCJ9LG51bWJlck1hcD17ItmhIjoiMSIsItmiIjoiMiIsItmjIjoiMyIsItmkIjoiNCIsItmlIjoiNSIsItmmIjoiNiIsItmnIjoiNyIsItmoIjoiOCIsItmpIjoiOSIsItmgIjoiMCJ9LHBsdXJhbEZvcm09ZnVuY3Rpb24obil7cmV0dXJuIDA9PT1uPzA6MT09PW4/MToyPT09bj8yOjM8PW4lMTAwJiZuJTEwMDw9MTA/MzoxMTw9biUxMDA/NDo1fSxwbHVyYWxzPXtzOlsi2KPZgtmEINmF2YYg2KvYp9mG2YrYqSIsItir2KfZhtmK2Kkg2YjYp9it2K/YqSIsWyLYq9in2YbZitiq2KfZhiIsItir2KfZhtmK2KrZitmGIl0sIiVkINir2YjYp9mGIiwiJWQg2KvYp9mG2YrYqSIsIiVkINir2KfZhtmK2KkiXSxtOlsi2KPZgtmEINmF2YYg2K/ZgtmK2YLYqSIsItiv2YLZitmC2Kkg2YjYp9it2K/YqSIsWyLYr9mC2YrZgtiq2KfZhiIsItiv2YLZitmC2KrZitmGIl0sIiVkINiv2YLYp9im2YIiLCIlZCDYr9mC2YrZgtipIiwiJWQg2K/ZgtmK2YLYqSJdLGg6WyLYo9mC2YQg2YXZhiDYs9in2LnYqSIsItiz2KfYudipINmI2KfYrdiv2KkiLFsi2LPYp9i52KrYp9mGIiwi2LPYp9i52KrZitmGIl0sIiVkINiz2KfYudin2KoiLCIlZCDYs9in2LnYqSIsIiVkINiz2KfYudipIl0sZDpbItij2YLZhCDZhdmGINmK2YjZhSIsItmK2YjZhSDZiNin2K3YryIsWyLZitmI2YXYp9mGIiwi2YrZiNmF2YrZhiJdLCIlZCDYo9mK2KfZhSIsIiVkINmK2YjZhdmL2KciLCIlZCDZitmI2YUiXSxNOlsi2KPZgtmEINmF2YYg2LTZh9ixIiwi2LTZh9ixINmI2KfYrdivIixbIti02YfYsdin2YYiLCLYtNmH2LHZitmGIl0sIiVkINij2LTZh9ixIiwiJWQg2LTZh9ix2KciLCIlZCDYtNmH2LEiXSx5Olsi2KPZgtmEINmF2YYg2LnYp9mFIiwi2LnYp9mFINmI2KfYrdivIixbIti52KfZhdin2YYiLCLYudin2YXZitmGIl0sIiVkINij2LnZiNin2YUiLCIlZCDYudin2YXZi9inIiwiJWQg2LnYp9mFIl19LHBsdXJhbGl6ZT1mdW5jdGlvbih1KXtyZXR1cm4gZnVuY3Rpb24obnVtYmVyLHdpdGhvdXRTdWZmaXgsc3RyaW5nLGlzRnV0dXJlKXt2YXIgZj1wbHVyYWxGb3JtKG51bWJlciksc3RyPXBsdXJhbHNbdV1bcGx1cmFsRm9ybShudW1iZXIpXTtyZXR1cm4gMj09PWYmJihzdHI9c3RyW3dpdGhvdXRTdWZmaXg/MDoxXSksc3RyLnJlcGxhY2UoLyVkL2ksbnVtYmVyKX19LG1vbnRocz1bItmK2YbYp9mK2LEiLCLZgdio2LHYp9mK2LEiLCLZhdin2LHYsyIsItij2KjYsdmK2YQiLCLZhdin2YrZiCIsItmK2YjZhtmK2YgiLCLZitmI2YTZitmIIiwi2KPYutiz2LfYsyIsItiz2KjYqtmF2KjYsSIsItij2YPYqtmI2KjYsSIsItmG2YjZgdmF2KjYsSIsItiv2YrYs9mF2KjYsSJdO21vbWVudC5kZWZpbmVMb2NhbGUoImFyIix7bW9udGhzOm1vbnRocyxtb250aHNTaG9ydDptb250aHMsd2Vla2RheXM6Itin2YTYo9it2K9f2KfZhNil2KvZhtmK2YZf2KfZhNir2YTYp9ir2KfYoV/Yp9mE2KPYsdio2LnYp9ihX9in2YTYrtmF2YrYs1/Yp9mE2KzZhdi52Klf2KfZhNiz2KjYqiIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLYo9it2K9f2KXYq9mG2YrZhl/Yq9mE2KfYq9in2KFf2KPYsdio2LnYp9ihX9iu2YXZitizX9is2YXYudipX9iz2KjYqiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi2K1f2YZf2Ktf2LFf2K5f2Kxf2LMiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkQv4oCPTS/igI9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxtZXJpZGllbVBhcnNlOi/YtXzZhS8saXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuItmFIj09PWlucHV0fSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjwxMj8i2LUiOiLZhSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhNmK2YjZhSDYudmG2K8g2KfZhNiz2KfYudipXSBMVCIsbmV4dERheToiW9i62K/Zi9inINi52YbYryDYp9mE2LPYp9i52KldIExUIixuZXh0V2VlazoiZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQiLGxhc3REYXk6IlvYo9mF2LMg2LnZhtivINin2YTYs9in2LnYqV0gTFQiLGxhc3RXZWVrOiJkZGRkIFvYudmG2K8g2KfZhNiz2KfYudipXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi2KjYudivICVzIixwYXN0OiLZhdmG2LAgJXMiLHM6cGx1cmFsaXplKCJzIiksc3M6cGx1cmFsaXplKCJzIiksbTpwbHVyYWxpemUoIm0iKSxtbTpwbHVyYWxpemUoIm0iKSxoOnBsdXJhbGl6ZSgiaCIpLGhoOnBsdXJhbGl6ZSgiaCIpLGQ6cGx1cmFsaXplKCJkIiksZGQ6cGx1cmFsaXplKCJkIiksTTpwbHVyYWxpemUoIk0iKSxNTTpwbHVyYWxpemUoIk0iKSx5OnBsdXJhbGl6ZSgieSIpLHl5OnBsdXJhbGl6ZSgieSIpfSxwcmVwYXJzZTpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvW9mh2aLZo9mk2aXZptmn2ajZqdmgXS9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbnVtYmVyTWFwW21hdGNoXX0pLnJlcGxhY2UoL9iML2csIiwiKX0scG9zdGZvcm1hdDpmdW5jdGlvbihzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihtYXRjaCl7cmV0dXJuIHN5bWJvbE1hcFttYXRjaF19KS5yZXBsYWNlKC8sL2csItiMIil9LHdlZWs6e2Rvdzo2LGRveToxMn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sam82WTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwLGV4cG9ydHMuZGVmYXVsdD1mdW5jdGlvbihvYmosa2V5cyl7dmFyIHRhcmdldD17fTtmb3IodmFyIGkgaW4gb2JqKTA8PWtleXMuaW5kZXhPZihpKXx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaixpKSYmKHRhcmdldFtpXT1vYmpbaV0pO3JldHVybiB0YXJnZXR9fSxqcVgwOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSx0b0lTT1N0cmluZz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJqdEJyIik7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKihEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyE9PXRvSVNPU3RyaW5nKSwiRGF0ZSIse3RvSVNPU3RyaW5nOnRvSVNPU3RyaW5nfSl9LGpyZms6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe3ZhciBfaWUsX2ZpcmVmb3gsX29wZXJhLF93ZWJraXQsX2Nocm9tZSxfaWVfcmVhbF92ZXJzaW9uLF9vc3gsX3dpbmRvd3MsX2xpbnV4LF9hbmRyb2lkLF93aW42NCxfaXBob25lLF9pcGFkLF9uYXRpdmUsX21vYmlsZSxfcG9wdWxhdGVkPSExO2Z1bmN0aW9uIF9wb3B1bGF0ZSgpe2lmKCFfcG9wdWxhdGVkKXtfcG9wdWxhdGVkPSEwO3ZhciB1YXM9bmF2aWdhdG9yLnVzZXJBZ2VudCxhZ2VudD0vKD86TVNJRS4oXGQrXC5cZCspKXwoPzooPzpGaXJlZm94fEdyYW5QYXJhZGlzb3xJY2V3ZWFzZWwpLihcZCtcLlxkKykpfCg/Ok9wZXJhKD86LitWZXJzaW9uLnwuKShcZCtcLlxkKykpfCg/OkFwcGxlV2ViS2l0LihcZCsoPzpcLlxkKyk/KSl8KD86VHJpZGVudFwvXGQrXC5cZCsuKnJ2OihcZCtcLlxkKykpLy5leGVjKHVhcyksb3M9LyhNYWMgT1MgWCl8KFdpbmRvd3MpfChMaW51eCkvLmV4ZWModWFzKTtpZihfaXBob25lPS9cYihpUGhvbmV8aVBbYW9dZCkvLmV4ZWModWFzKSxfaXBhZD0vXGIoaVBbYW9dZCkvLmV4ZWModWFzKSxfYW5kcm9pZD0vQW5kcm9pZC9pLmV4ZWModWFzKSxfbmF0aXZlPS9GQkFOXC9cdys7L2kuZXhlYyh1YXMpLF9tb2JpbGU9L01vYmlsZS9pLmV4ZWModWFzKSxfd2luNjQ9ISEvV2luNjQvLmV4ZWModWFzKSxhZ2VudCl7KF9pZT1hZ2VudFsxXT9wYXJzZUZsb2F0KGFnZW50WzFdKTphZ2VudFs1XT9wYXJzZUZsb2F0KGFnZW50WzVdKTpOYU4pJiZkb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiYoX2llPWRvY3VtZW50LmRvY3VtZW50TW9kZSk7dmFyIHRyaWRlbnQ9Lyg/OlRyaWRlbnRcLyhcZCsuXGQrKSkvLmV4ZWModWFzKTtfaWVfcmVhbF92ZXJzaW9uPXRyaWRlbnQ/cGFyc2VGbG9hdCh0cmlkZW50WzFdKSs0Ol9pZSxfZmlyZWZveD1hZ2VudFsyXT9wYXJzZUZsb2F0KGFnZW50WzJdKTpOYU4sX29wZXJhPWFnZW50WzNdP3BhcnNlRmxvYXQoYWdlbnRbM10pOk5hTixfd2Via2l0PWFnZW50WzRdP3BhcnNlRmxvYXQoYWdlbnRbNF0pOk5hTixfY2hyb21lPV93ZWJraXQ/KGFnZW50PS8oPzpDaHJvbWVcLyhcZCtcLlxkKykpLy5leGVjKHVhcykpJiZhZ2VudFsxXT9wYXJzZUZsb2F0KGFnZW50WzFdKTpOYU46TmFOfWVsc2UgX2llPV9maXJlZm94PV9vcGVyYT1fY2hyb21lPV93ZWJraXQ9TmFOO2lmKG9zKXtpZihvc1sxXSl7dmFyIHZlcj0vKD86TWFjIE9TIFggKFxkKyg/OlsuX11cZCspPykpLy5leGVjKHVhcyk7X29zeD0hdmVyfHxwYXJzZUZsb2F0KHZlclsxXS5yZXBsYWNlKCJfIiwiLiIpKX1lbHNlIF9vc3g9ITE7X3dpbmRvd3M9ISFvc1syXSxfbGludXg9ISFvc1szXX1lbHNlIF9vc3g9X3dpbmRvd3M9X2xpbnV4PSExfX12YXIgVXNlckFnZW50X0RFUFJFQ0FURUQ9e2llOmZ1bmN0aW9uKCl7cmV0dXJuIF9wb3B1bGF0ZSgpfHxfaWV9LGllQ29tcGF0aWJpbGl0eU1vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gX3BvcHVsYXRlKCl8fF9pZTxfaWVfcmVhbF92ZXJzaW9ufSxpZTY0OmZ1bmN0aW9uKCl7cmV0dXJuIFVzZXJBZ2VudF9ERVBSRUNBVEVELmllKCkmJl93aW42NH0sZmlyZWZveDpmdW5jdGlvbigpe3JldHVybiBfcG9wdWxhdGUoKXx8X2ZpcmVmb3h9LG9wZXJhOmZ1bmN0aW9uKCl7cmV0dXJuIF9wb3B1bGF0ZSgpfHxfb3BlcmF9LHdlYmtpdDpmdW5jdGlvbigpe3JldHVybiBfcG9wdWxhdGUoKXx8X3dlYmtpdH0sc2FmYXJpOmZ1bmN0aW9uKCl7cmV0dXJuIFVzZXJBZ2VudF9ERVBSRUNBVEVELndlYmtpdCgpfSxjaHJvbWU6ZnVuY3Rpb24oKXtyZXR1cm4gX3BvcHVsYXRlKCl8fF9jaHJvbWV9LHdpbmRvd3M6ZnVuY3Rpb24oKXtyZXR1cm4gX3BvcHVsYXRlKCl8fF93aW5kb3dzfSxvc3g6ZnVuY3Rpb24oKXtyZXR1cm4gX3BvcHVsYXRlKCl8fF9vc3h9LGxpbnV4OmZ1bmN0aW9uKCl7cmV0dXJuIF9wb3B1bGF0ZSgpfHxfbGludXh9LGlwaG9uZTpmdW5jdGlvbigpe3JldHVybiBfcG9wdWxhdGUoKXx8X2lwaG9uZX0sbW9iaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIF9wb3B1bGF0ZSgpfHxfaXBob25lfHxfaXBhZHx8X2FuZHJvaWR8fF9tb2JpbGV9LG5hdGl2ZUFwcDpmdW5jdGlvbigpe3JldHVybiBfcG9wdWxhdGUoKXx8X25hdGl2ZX0sYW5kcm9pZDpmdW5jdGlvbigpe3JldHVybiBfcG9wdWxhdGUoKXx8X2FuZHJvaWR9LGlwYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gX3BvcHVsYXRlKCl8fF9pcGFkfX07bW9kdWxlLmV4cG9ydHM9VXNlckFnZW50X0RFUFJFQ0FURUR9LGp0QnI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBmYWlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIiksZ2V0VGltZT1EYXRlLnByb3RvdHlwZS5nZXRUaW1lLCR0b0lTT1N0cmluZz1EYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyxsej1mdW5jdGlvbihudW0pe3JldHVybiA5PG51bT9udW06IjAiK251bX07bW9kdWxlLmV4cG9ydHM9ZmFpbHMoZnVuY3Rpb24oKXtyZXR1cm4iMDM4NS0wNy0yNVQwNzowNjozOS45OTlaIiE9JHRvSVNPU3RyaW5nLmNhbGwobmV3IERhdGUoLTVlMTMtMSkpfSl8fCFmYWlscyhmdW5jdGlvbigpeyR0b0lTT1N0cmluZy5jYWxsKG5ldyBEYXRlKE5hTikpfSk/ZnVuY3Rpb24oKXtpZighaXNGaW5pdGUoZ2V0VGltZS5jYWxsKHRoaXMpKSl0aHJvdyBSYW5nZUVycm9yKCJJbnZhbGlkIHRpbWUgdmFsdWUiKTt2YXIgZD10aGlzLHk9ZC5nZXRVVENGdWxsWWVhcigpLG09ZC5nZXRVVENNaWxsaXNlY29uZHMoKSxzPXk8MD8iLSI6OTk5OTx5PyIrIjoiIjtyZXR1cm4gcysoIjAwMDAwIitNYXRoLmFicyh5KSkuc2xpY2Uocz8tNjotNCkrIi0iK2x6KGQuZ2V0VVRDTW9udGgoKSsxKSsiLSIrbHooZC5nZXRVVENEYXRlKCkpKyJUIitseihkLmdldFVUQ0hvdXJzKCkpKyI6IitseihkLmdldFVUQ01pbnV0ZXMoKSkrIjoiK2x6KGQuZ2V0VVRDU2Vjb25kcygpKSsiLiIrKDk5PG0/bToiMCIrbHoobSkpKyJaIn06JHRvSVNPU3RyaW5nfSxrQU1IOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBjb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiYTB4dSIpO21vZHVsZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGFyZyl7cmV0dXJuIkFycmF5Ij09Y29mKGFyZyl9fSxrRU9hOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijt2YXIgc3ltYm9sTWFwPXsxOiLgp6ciLDI6IuCnqCIsMzoi4KepIiw0OiLgp6oiLDU6IuCnqyIsNjoi4KesIiw3OiLgp60iLDg6IuCnriIsOToi4KevIiwwOiLgp6YifSxudW1iZXJNYXA9eyLgp6ciOiIxIiwi4KeoIjoiMiIsIuCnqSI6IjMiLCLgp6oiOiI0Iiwi4KerIjoiNSIsIuCnrCI6IjYiLCLgp60iOiI3Iiwi4KeuIjoiOCIsIuCnryI6IjkiLCLgp6YiOiIwIn07bW9tZW50LmRlZmluZUxvY2FsZSgiYm4iLHttb250aHM6IuCmnOCmvuCmqOCngeCnn+CmvuCmsOCngF/gpqvgp4fgpqzgp43gprDgp4Hgp5/gpr7gprDgpr9f4Kau4Ka+4Kaw4KeN4KaaX+Cmj+CmquCnjeCmsOCmv+Cmsl/gpq7gp4df4Kac4KeB4KaoX+CmnOCngeCmsuCmvuCmh1/gpobgppfgprjgp43gpp9f4Ka44KeH4Kaq4KeN4Kaf4KeH4Kau4KeN4Kas4KawX+CmheCmleCnjeCmn+Cni+CmrOCmsF/gpqjgpq3gp4fgpq7gp43gpqzgprBf4Kah4Ka/4Ka44KeH4Kau4KeN4Kas4KawIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgppzgpr7gpqjgp4Ff4Kar4KeH4KasX+CmruCmvuCmsOCnjeCmml/gpo/gpqrgp43gprBf4Kau4KeHX+CmnOCngeCmqF/gppzgp4HgprJf4KaG4KaXX+CmuOCnh+CmquCnjeCmn1/gpoXgppXgp43gpp/gp4tf4Kao4Kat4KeHX+CmoeCmv+CmuOCnhyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4Kaw4Kas4Ka/4Kas4Ka+4KawX+CmuOCni+CmruCmrOCmvuCmsF/gpq7gppngp43gppfgprLgpqzgpr7gprBf4Kas4KeB4Kan4Kas4Ka+4KawX+CmrOCng+CmueCmuOCnjeCmquCmpOCmv+CmrOCmvuCmsF/gprbgp4HgppXgp43gprDgpqzgpr7gprBf4Ka24Kao4Ka/4Kas4Ka+4KawIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCmsOCmrOCmv1/gprjgp4vgpq5f4Kau4KaZ4KeN4KaX4KayX+CmrOCngeCmp1/gpqzgp4Pgprngprjgp43gpqrgpqTgpr9f4Ka24KeB4KaV4KeN4KawX+CmtuCmqOCmvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4Kaw4Kas4Ka/X+CmuOCni+Cmrl/gpq7gppngp43gppdf4Kas4KeB4KanX+CmrOCng+CmueCmg1/gprbgp4HgppXgp43gprBf4Ka24Kao4Ka/Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIOCmuOCmruCnnyIsTFRTOiJBIGg6bW06c3Mg4Ka44Kau4KefIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVksIEEgaDptbSDgprjgpq7gp58iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4Ka44Kau4KefIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvgpobgppxdIExUIixuZXh0RGF5OiJb4KaG4KaX4Ka+4Kau4KeA4KaV4Ka+4KayXSBMVCIsbmV4dFdlZWs6ImRkZGQsIExUIixsYXN0RGF5OiJb4KaX4Kak4KaV4Ka+4KayXSBMVCIsbGFzdFdlZWs6IlvgppfgpqRdIGRkZGQsIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDgpqrgprDgp4ciLHBhc3Q6IiVzIOCmhuCml+CnhyIsczoi4KaV4Kef4KeH4KaVIOCmuOCnh+CmleCnh+CmqOCnjeCmoSIsc3M6IiVkIOCmuOCnh+CmleCnh+CmqOCnjeCmoSIsbToi4KaP4KaVIOCmruCmv+CmqOCmv+CmnyIsbW06IiVkIOCmruCmv+CmqOCmv+CmnyIsaDoi4KaP4KaVIOCmmOCmqOCnjeCmn+CmviIsaGg6IiVkIOCmmOCmqOCnjeCmn+CmviIsZDoi4KaP4KaVIOCmpuCmv+CmqCIsZGQ6IiVkIOCmpuCmv+CmqCIsTToi4KaP4KaVIOCmruCmvuCmuCIsTU06IiVkIOCmruCmvuCmuCIseToi4KaP4KaVIOCmrOCmm+CmsCIseXk6IiVkIOCmrOCmm+CmsCJ9LHByZXBhcnNlOmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9b4Ken4Keo4Kep4Keq4Ker4Kes4Ket4Keu4Kev4KemXS9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gbnVtYmVyTWFwW21hdGNoXX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC9cZC9nLGZ1bmN0aW9uKG1hdGNoKXtyZXR1cm4gc3ltYm9sTWFwW21hdGNoXX0pfSxtZXJpZGllbVBhcnNlOi/gprDgpr7gpqR84Ka44KaV4Ka+4KayfOCmpuCngeCmquCngeCmsHzgpqzgpr/gppXgpr7gprJ84Kaw4Ka+4KakLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksIuCmsOCmvuCmpCI9PT1tZXJpZGllbSYmNDw9aG91cnx8IuCmpuCngeCmquCngeCmsCI9PT1tZXJpZGllbSYmaG91cjw1fHwi4Kas4Ka/4KaV4Ka+4KayIj09PW1lcmlkaWVtP2hvdXIrMTI6aG91cn0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cixtaW51dGUsaXNMb3dlcil7cmV0dXJuIGhvdXI8ND8i4Kaw4Ka+4KakIjpob3VyPDEwPyLgprjgppXgpr7gprIiOmhvdXI8MTc/IuCmpuCngeCmquCngeCmsCI6aG91cjwyMD8i4Kas4Ka/4KaV4Ka+4KayIjoi4Kaw4Ka+4KakIn0sd2Vlazp7ZG93OjAsZG95OjZ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGtKTXg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRrZXlzPV9fd2VicGFja19yZXF1aXJlX18oInpoQWIiKSxoaWRkZW5LZXlzPV9fd2VicGFja19yZXF1aXJlX18oIjRSNHUiKS5jb25jYXQoImxlbmd0aCIsInByb3RvdHlwZSIpO2V4cG9ydHMuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24oTyl7cmV0dXJuICRrZXlzKE8saGlkZGVuS2V5cyl9fSxrT3BOOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJ6aC10dyIse21vbnRoczoi5LiA5pyIX+S6jOaciF/kuInmnIhf5Zub5pyIX+S6lOaciF/lha3mnIhf5LiD5pyIX+WFq+aciF/kuZ3mnIhf5Y2B5pyIX+WNgeS4gOaciF/ljYHkuozmnIgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IjHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLmmJ/mnJ/ml6Vf5pif5pyf5LiAX+aYn+acn+S6jF/mmJ/mnJ/kuIlf5pif5pyf5ZubX+aYn+acn+S6lF/mmJ/mnJ/lha0iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi6YCx5pelX+mAseS4gF/pgLHkuoxf6YCx5LiJX+mAseWbm1/pgLHkupRf6YCx5YWtIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLml6Vf5LiAX+S6jF/kuIlf5ZubX+S6lF/lha0iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS9NTS9ERCIsTEw6IllZWVnlubRN5pyIROaXpSIsTExMOiJZWVlZ5bm0TeaciETml6UgSEg6bW0iLExMTEw6IllZWVnlubRN5pyIROaXpWRkZGQgSEg6bW0iLGw6IllZWVkvTS9EIixsbDoiWVlZWeW5tE3mnIhE5pelIixsbGw6IllZWVnlubRN5pyIROaXpSBISDptbSIsbGxsbDoiWVlZWeW5tE3mnIhE5pelZGRkZCBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L+WHjOaZqHzml6nkuIp85LiK5Y2IfOS4reWNiHzkuIvljYh85pma5LiKLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oaG91cixtZXJpZGllbSl7cmV0dXJuIDEyPT09aG91ciYmKGhvdXI9MCksIuWHjOaZqCI9PT1tZXJpZGllbXx8IuaXqeS4iiI9PT1tZXJpZGllbXx8IuS4iuWNiCI9PT1tZXJpZGllbT9ob3VyOiLkuK3ljYgiPT09bWVyaWRpZW0/MTE8PWhvdXI/aG91cjpob3VyKzEyOiLkuIvljYgiPT09bWVyaWRpZW18fCLmmZrkuIoiPT09bWVyaWRpZW0/aG91cisxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3ZhciBobT0xMDAqaG91cittaW51dGU7cmV0dXJuIGhtPDYwMD8i5YeM5pmoIjpobTw5MDA/IuaXqeS4iiI6aG08MTEzMD8i5LiK5Y2IIjpobTwxMjMwPyLkuK3ljYgiOmhtPDE4MDA/IuS4i+WNiCI6IuaZmuS4iiJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb5LuK5aSpXSBMVCIsbmV4dERheToiW+aYjuWkqV0gTFQiLG5leHRXZWVrOiJb5LiLXWRkZGQgTFQiLGxhc3REYXk6IlvmmKjlpKldIExUIixsYXN0V2VlazoiW+S4il1kZGRkIExUIixzYW1lRWxzZToiTCJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0o5pelfOaciHzpgLEpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcixwZXJpb2Qpe3N3aXRjaChwZXJpb2Qpe2Nhc2UiZCI6Y2FzZSJEIjpjYXNlIkRERCI6cmV0dXJuIG51bWJlcisi5pelIjtjYXNlIk0iOnJldHVybiBudW1iZXIrIuaciCI7Y2FzZSJ3IjpjYXNlIlciOnJldHVybiBudW1iZXIrIumAsSI7ZGVmYXVsdDpyZXR1cm4gbnVtYmVyfX0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz5YWnIixwYXN0OiIlc+WJjSIsczoi5bm+56eSIixzczoiJWQg56eSIixtOiIxIOWIhumQmCIsbW06IiVkIOWIhumQmCIsaDoiMSDlsI/mmYIiLGhoOiIlZCDlsI/mmYIiLGQ6IjEg5aSpIixkZDoiJWQg5aSpIixNOiIxIOWAi+aciCIsTU06IiVkIOWAi+aciCIseToiMSDlubQiLHl5OiIlZCDlubQifX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxrVGlXOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIk5lZ00iKX0sa2NvUzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgc2lnbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJsdnRtIikscG93PU1hdGgucG93LEVQU0lMT049cG93KDIsLTUyKSxFUFNJTE9OMzI9cG93KDIsLTIzKSxNQVgzMj1wb3coMiwxMjcpKigyLUVQU0lMT04zMiksTUlOMzI9cG93KDIsLTEyNik7bW9kdWxlLmV4cG9ydHM9TWF0aC5mcm91bmR8fGZ1bmN0aW9uKHgpe3ZhciBhLHJlc3VsdCwkYWJzPU1hdGguYWJzKHgpLCRzaWduPXNpZ24oeCk7cmV0dXJuICRhYnM8TUlOMzI/JHNpZ24qKCRhYnMvTUlOMzIvRVBTSUxPTjMyKzEvRVBTSUxPTi0xL0VQU0lMT04pKk1JTjMyKkVQU0lMT04zMjpNQVgzMjwocmVzdWx0PShhPSgxK0VQU0lMT04zMi9FUFNJTE9OKSokYWJzKS0oYS0kYWJzKSl8fHJlc3VsdCE9cmVzdWx0PyRzaWduKigxLzApOiRzaWduKnJlc3VsdH19LGtsUEQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGRQPV9fd2VicGFja19yZXF1aXJlX18oImhzd2EiKSxnT1BEPV9fd2VicGFja19yZXF1aXJlX18oIkVlbUgiKSxnZXRQcm90b3R5cGVPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJPUDNZIiksaGFzPV9fd2VicGFja19yZXF1aXJlX18oImFhZ3giKSwkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxjcmVhdGVEZXNjPV9fd2VicGFja19yZXF1aXJlX18oIlJqRC8iKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpOyRleHBvcnQoJGV4cG9ydC5TLCJSZWZsZWN0Iix7c2V0OmZ1bmN0aW9uIHNldCh0YXJnZXQscHJvcGVydHlLZXksVil7dmFyIGV4aXN0aW5nRGVzY3JpcHRvcixwcm90byxyZWNlaXZlcj1hcmd1bWVudHMubGVuZ3RoPDQ/dGFyZ2V0OmFyZ3VtZW50c1szXSxvd25EZXNjPWdPUEQuZihhbk9iamVjdCh0YXJnZXQpLHByb3BlcnR5S2V5KTtpZighb3duRGVzYyl7aWYoaXNPYmplY3QocHJvdG89Z2V0UHJvdG90eXBlT2YodGFyZ2V0KSkpcmV0dXJuIHNldChwcm90byxwcm9wZXJ0eUtleSxWLHJlY2VpdmVyKTtvd25EZXNjPWNyZWF0ZURlc2MoMCl9aWYoaGFzKG93bkRlc2MsInZhbHVlIikpe2lmKCExPT09b3duRGVzYy53cml0YWJsZXx8IWlzT2JqZWN0KHJlY2VpdmVyKSlyZXR1cm4hMTtpZihleGlzdGluZ0Rlc2NyaXB0b3I9Z09QRC5mKHJlY2VpdmVyLHByb3BlcnR5S2V5KSl7aWYoZXhpc3RpbmdEZXNjcmlwdG9yLmdldHx8ZXhpc3RpbmdEZXNjcmlwdG9yLnNldHx8ITE9PT1leGlzdGluZ0Rlc2NyaXB0b3Iud3JpdGFibGUpcmV0dXJuITE7ZXhpc3RpbmdEZXNjcmlwdG9yLnZhbHVlPVYsZFAuZihyZWNlaXZlcixwcm9wZXJ0eUtleSxleGlzdGluZ0Rlc2NyaXB0b3IpfWVsc2UgZFAuZihyZWNlaXZlcixwcm9wZXJ0eUtleSxjcmVhdGVEZXNjKDAsVikpO3JldHVybiEwfXJldHVybiB2b2lkIDAhPT1vd25EZXNjLnNldCYmKG93bkRlc2Muc2V0LmNhbGwocmVjZWl2ZXIsViksITApfX0pfSxrblU5OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxzZXRQcm90bz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJpNWRjIik7c2V0UHJvdG8mJiRleHBvcnQoJGV4cG9ydC5TLCJSZWZsZWN0Iix7c2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odGFyZ2V0LHByb3RvKXtzZXRQcm90by5jaGVjayh0YXJnZXQscHJvdG8pO3RyeXtyZXR1cm4gc2V0UHJvdG8uc2V0KHRhcmdldCxwcm90byksITB9Y2F0Y2goZSl7cmV0dXJuITF9fX0pfSxrbmhEOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUywiTnVtYmVyIix7TUlOX1NBRkVfSU5URUdFUjotOTAwNzE5OTI1NDc0MDk5MX0pfSxrdnJuOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXt2YXIgbmVzdFJFPS9eKGF0dHJzfHByb3BzfG9ufG5hdGl2ZU9ufGNsYXNzfHN0eWxlfGhvb2spJC87ZnVuY3Rpb24gbWVyZ2VGbihhLGIpe3JldHVybiBmdW5jdGlvbigpe2EmJmEuYXBwbHkodGhpcyxhcmd1bWVudHMpLGImJmIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1tb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihvYmpzKXtyZXR1cm4gb2Jqcy5yZWR1Y2UoZnVuY3Rpb24oYSxiKXt2YXIgYWEsYmIsa2V5LG5lc3RlZEtleSx0ZW1wO2ZvcihrZXkgaW4gYilpZihhYT1hW2tleV0sYmI9YltrZXldLGFhJiZuZXN0UkUudGVzdChrZXkpKWlmKCJjbGFzcyI9PT1rZXkmJigic3RyaW5nIj09dHlwZW9mIGFhJiYodGVtcD1hYSxhW2tleV09YWE9e30sYWFbdGVtcF09ITApLCJzdHJpbmciPT10eXBlb2YgYmImJih0ZW1wPWJiLGJba2V5XT1iYj17fSxiYlt0ZW1wXT0hMCkpLCJvbiI9PT1rZXl8fCJuYXRpdmVPbiI9PT1rZXl8fCJob29rIj09PWtleSlmb3IobmVzdGVkS2V5IGluIGJiKWFhW25lc3RlZEtleV09bWVyZ2VGbihhYVtuZXN0ZWRLZXldLGJiW25lc3RlZEtleV0pO2Vsc2UgaWYoQXJyYXkuaXNBcnJheShhYSkpYVtrZXldPWFhLmNvbmNhdChiYik7ZWxzZSBpZihBcnJheS5pc0FycmF5KGJiKSlhW2tleV09W2FhXS5jb25jYXQoYmIpO2Vsc2UgZm9yKG5lc3RlZEtleSBpbiBiYilhYVtuZXN0ZWRLZXldPWJiW25lc3RlZEtleV07ZWxzZSBhW2tleV09YltrZXldO3JldHVybiBhfSx7fSl9fSxrd1oxOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgZ2V0S2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ3NkdPIiksZ09QUz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJtcWxGIikscElFPV9fd2VicGFja19yZXF1aXJlX18oIk5WMGsiKSx0b09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJKQjY4IiksSU9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNMXhwIiksJGFzc2lnbj1PYmplY3QuYXNzaWduO21vZHVsZS5leHBvcnRzPSEkYXNzaWdufHxfX3dlYnBhY2tfcmVxdWlyZV9fKCJLVXhQIikoZnVuY3Rpb24oKXt2YXIgQT17fSxCPXt9LFM9U3ltYm9sKCksSz0iYWJjZGVmZ2hpamtsbW5vcHFyc3QiO3JldHVybiBBW1NdPTcsSy5zcGxpdCgiIikuZm9yRWFjaChmdW5jdGlvbihrKXtCW2tdPWt9KSw3IT0kYXNzaWduKHt9LEEpW1NdfHxPYmplY3Qua2V5cygkYXNzaWduKHt9LEIpKS5qb2luKCIiKSE9S30pP2Z1bmN0aW9uKHRhcmdldCxzb3VyY2Upe2Zvcih2YXIgVD10b09iamVjdCh0YXJnZXQpLGFMZW49YXJndW1lbnRzLmxlbmd0aCxpbmRleD0xLGdldFN5bWJvbHM9Z09QUy5mLGlzRW51bT1wSUUuZjtpbmRleDxhTGVuOylmb3IodmFyIGtleSxTPUlPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKSxrZXlzPWdldFN5bWJvbHM/Z2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSk6Z2V0S2V5cyhTKSxsZW5ndGg9a2V5cy5sZW5ndGgsaj0wO2o8bGVuZ3RoOylpc0VudW0uY2FsbChTLGtleT1rZXlzW2orK10pJiYoVFtrZXldPVNba2V5XSk7cmV0dXJuIFR9OiRhc3NpZ259LGwwUm46ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciB0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiUllpNyIpLGRlZmluZWQ9X193ZWJwYWNrX3JlcXVpcmVfXygidmhQVSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGNvdW50KXt2YXIgc3RyPVN0cmluZyhkZWZpbmVkKHRoaXMpKSxyZXM9IiIsbj10b0ludGVnZXIoY291bnQpO2lmKG48MHx8bj09MS8wKXRocm93IFJhbmdlRXJyb3IoIkNvdW50IGNhbid0IGJlIG5lZ2F0aXZlIik7Zm9yKDswPG47KG4+Pj49MSkmJihzdHIrPXN0cikpMSZuJiYocmVzKz1zdHIpO3JldHVybiByZXN9fSxsNWVwOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJjeSIse21vbnRoczoiSW9uYXdyX0Nod2Vmcm9yX01hd3J0aF9FYnJpbGxfTWFpX01laGVmaW5fR29yZmZlbm5hZl9Bd3N0X01lZGlfSHlkcmVmX1RhY2h3ZWRkX1JoYWdmeXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Iklvbl9DaHdlX01hd19FYnJfTWFpX01laF9Hb3JfQXdzX01lZF9IeWRfVGFjaF9SaGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEeWRkIFN1bF9EeWRkIExsdW5fRHlkZCBNYXdydGhfRHlkZCBNZXJjaGVyX0R5ZGQgSWF1X0R5ZGQgR3dlbmVyX0R5ZGQgU2Fkd3JuIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bF9MbHVuX01hd19NZXJfSWF1X0d3ZV9TYWQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X0xsX01hX01lX0lhX0d3X1NhIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIZWRkaXcgYW1dIExUIixuZXh0RGF5OiJbWWZvcnkgYW1dIExUIixuZXh0V2VlazoiZGRkZCBbYW1dIExUIixsYXN0RGF5OiJbRGRvZSBhbV0gTFQiLGxhc3RXZWVrOiJkZGRkIFtkaXdldGhhZiBhbV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im1ld24gJXMiLHBhc3Q6IiVzIHluIMO0bCIsczoieWNoeWRpZyBlaWxpYWRhdSIsc3M6IiVkIGVpbGlhZCIsbToibXVudWQiLG1tOiIlZCBtdW51ZCIsaDoiYXdyIixoaDoiJWQgYXdyIixkOiJkaXdybm9kIixkZDoiJWQgZGl3cm5vZCIsTToibWlzIixNTToiJWQgbWlzIix5OiJibHd5ZGR5biIseXk6IiVkIGZseW5lZGQifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KGZlZHxhaW58YWZ8aWx8eWRkfGVkfGVnKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3ZhciBiPW51bWJlcixvdXRwdXQ9IiI7cmV0dXJuIDIwPGI/b3V0cHV0PTQwPT09Ynx8NTA9PT1ifHw2MD09PWJ8fDgwPT09Ynx8MTAwPT09Yj8iZmVkIjoiYWluIjowPGImJihvdXRwdXQ9WyIiLCJhZiIsImlsIiwieWRkIiwieWRkIiwiZWQiLCJlZCIsImVkIiwiZmVkIiwiZmVkIiwiZmVkIiwiZWciLCJmZWQiLCJlZyIsImVnIiwiZmVkIiwiZWciLCJlZyIsImZlZCIsImVnIiwiZmVkIl1bYl0pLG51bWJlcitvdXRwdXR9LHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxsWHpvOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsKG51bWJlcix3aXRob3V0U3VmZml4LGtleSl7dmFyIG51bSxmb3Jtcyxmb3JtYXQ9e3NzOndpdGhvdXRTdWZmaXg/ItGB0LXQutGD0L3QtNCwX9GB0LXQutGD0L3QtNGLX9GB0LXQutGD0L3QtCI6ItGB0LXQutGD0L3QtNGDX9GB0LXQutGD0L3QtNGLX9GB0LXQutGD0L3QtCIsbW06d2l0aG91dFN1ZmZpeD8i0LzQuNC90YPRgtCwX9C80LjQvdGD0YLRi1/QvNC40L3Rg9GCIjoi0LzQuNC90YPRgtGDX9C80LjQvdGD0YLRi1/QvNC40L3Rg9GCIixoaDoi0YfQsNGBX9GH0LDRgdCwX9GH0LDRgdC+0LIiLGRkOiLQtNC10L3RjF/QtNC90Y9f0LTQvdC10LkiLE1NOiLQvNC10YHRj9GGX9C80LXRgdGP0YbQsF/QvNC10YHRj9GG0LXQsiIseXk6ItCz0L7QtF/Qs9C+0LTQsF/Qu9C10YIifTtyZXR1cm4ibSI9PT1rZXk/d2l0aG91dFN1ZmZpeD8i0LzQuNC90YPRgtCwIjoi0LzQuNC90YPRgtGDIjpudW1iZXIrIiAiKyhudW09K251bWJlcixmb3Jtcz1mb3JtYXRba2V5XS5zcGxpdCgiXyIpLG51bSUxMD09MSYmbnVtJTEwMCE9MTE/Zm9ybXNbMF06Mjw9bnVtJTEwJiZudW0lMTA8PTQmJihudW0lMTAwPDEwfHwyMDw9bnVtJTEwMCk/Zm9ybXNbMV06Zm9ybXNbMl0pfXZhciBtb250aHNQYXJzZT1bL17Rj9C90LIvaSwvXtGE0LXQsi9pLC9e0LzQsNGAL2ksL17QsNC/0YAvaSwvXtC80LBb0LnRj10vaSwvXtC40Y7QvS9pLC9e0LjRjtC7L2ksL17QsNCy0LMvaSwvXtGB0LXQvS9pLC9e0L7QutGCL2ksL17QvdC+0Y8vaSwvXtC00LXQui9pXTttb21lbnQuZGVmaW5lTG9jYWxlKCJydSIse21vbnRoczp7Zm9ybWF0OiLRj9C90LLQsNGA0Y9f0YTQtdCy0YDQsNC70Y9f0LzQsNGA0YLQsF/QsNC/0YDQtdC70Y9f0LzQsNGPX9C40Y7QvdGPX9C40Y7Qu9GPX9Cw0LLQs9GD0YHRgtCwX9GB0LXQvdGC0Y/QsdGA0Y9f0L7QutGC0Y/QsdGA0Y9f0L3QvtGP0LHRgNGPX9C00LXQutCw0LHRgNGPIi5zcGxpdCgiXyIpLHN0YW5kYWxvbmU6ItGP0L3QstCw0YDRjF/RhNC10LLRgNCw0LvRjF/QvNCw0YDRgl/QsNC/0YDQtdC70Yxf0LzQsNC5X9C40Y7QvdGMX9C40Y7Qu9GMX9Cw0LLQs9GD0YHRgl/RgdC10L3RgtGP0LHRgNGMX9C+0LrRgtGP0LHRgNGMX9C90L7Rj9Cx0YDRjF/QtNC10LrQsNCx0YDRjCIuc3BsaXQoIl8iKX0sbW9udGhzU2hvcnQ6e2Zvcm1hdDoi0Y/QvdCyLl/RhNC10LLRgC5f0LzQsNGALl/QsNC/0YAuX9C80LDRj1/QuNGO0L3Rj1/QuNGO0LvRj1/QsNCy0LMuX9GB0LXQvdGCLl/QvtC60YIuX9C90L7Rj9CxLl/QtNC10LouIi5zcGxpdCgiXyIpLHN0YW5kYWxvbmU6ItGP0L3Qsi5f0YTQtdCy0YAuX9C80LDRgNGCX9Cw0L/RgC5f0LzQsNC5X9C40Y7QvdGMX9C40Y7Qu9GMX9Cw0LLQsy5f0YHQtdC90YIuX9C+0LrRgi5f0L3QvtGP0LEuX9C00LXQui4iLnNwbGl0KCJfIil9LHdlZWtkYXlzOntzdGFuZGFsb25lOiLQstC+0YHQutGA0LXRgdC10L3RjNC1X9C/0L7QvdC10LTQtdC70YzQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNC10LTQsF/Rh9C10YLQstC10YDQs1/Qv9GP0YLQvdC40YbQsF/RgdGD0LHQsdC+0YLQsCIuc3BsaXQoIl8iKSxmb3JtYXQ6ItCy0L7RgdC60YDQtdGB0LXQvdGM0LVf0L/QvtC90LXQtNC10LvRjNC90LjQul/QstGC0L7RgNC90LjQul/RgdGA0LXQtNGDX9GH0LXRgtCy0LXRgNCzX9C/0Y/RgtC90LjRhtGDX9GB0YPQsdCx0L7RgtGDIi5zcGxpdCgiXyIpLGlzRm9ybWF0Oi9cWyA/W9CS0LJdID8oPzrQv9GA0L7RiNC70YPRjnzRgdC70LXQtNGD0Y7RidGD0Y580Y3RgtGDKT8gP1xdID9kZGRkL30sd2Vla2RheXNTaG9ydDoi0LLRgV/Qv9C9X9Cy0YJf0YHRgF/Rh9GCX9C/0YJf0YHQsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0LLRgV/Qv9C9X9Cy0YJf0YHRgF/Rh9GCX9C/0YJf0YHQsSIuc3BsaXQoIl8iKSxtb250aHNQYXJzZTptb250aHNQYXJzZSxsb25nTW9udGhzUGFyc2U6bW9udGhzUGFyc2Usc2hvcnRNb250aHNQYXJzZTptb250aHNQYXJzZSxtb250aHNSZWdleDovXijRj9C90LLQsNGAW9GM0Y9dfNGP0L3QslwuP3zRhNC10LLRgNCw0Ltb0YzRj1180YTQtdCy0YA/XC4/fNC80LDRgNGC0LA/fNC80LDRgFwuP3zQsNC/0YDQtdC7W9GM0Y9dfNCw0L/RgFwuP3zQvNCwW9C50Y9dfNC40Y7QvVvRjNGPXXzQuNGO0L1cLj980LjRjtC7W9GM0Y9dfNC40Y7Qu1wuP3zQsNCy0LPRg9GB0YLQsD980LDQstCzXC4/fNGB0LXQvdGC0Y/QsdGAW9GM0Y9dfNGB0LXQvdGCP1wuP3zQvtC60YLRj9Cx0YBb0YzRj1180L7QutGCXC4/fNC90L7Rj9Cx0YBb0YzRj1180L3QvtGP0LE/XC4/fNC00LXQutCw0LHRgFvRjNGPXXzQtNC10LpcLj8pL2ksbW9udGhzU2hvcnRSZWdleDovXijRj9C90LLQsNGAW9GM0Y9dfNGP0L3QslwuP3zRhNC10LLRgNCw0Ltb0YzRj1180YTQtdCy0YA/XC4/fNC80LDRgNGC0LA/fNC80LDRgFwuP3zQsNC/0YDQtdC7W9GM0Y9dfNCw0L/RgFwuP3zQvNCwW9C50Y9dfNC40Y7QvVvRjNGPXXzQuNGO0L1cLj980LjRjtC7W9GM0Y9dfNC40Y7Qu1wuP3zQsNCy0LPRg9GB0YLQsD980LDQstCzXC4/fNGB0LXQvdGC0Y/QsdGAW9GM0Y9dfNGB0LXQvdGCP1wuP3zQvtC60YLRj9Cx0YBb0YzRj1180L7QutGCXC4/fNC90L7Rj9Cx0YBb0YzRj1180L3QvtGP0LE/XC4/fNC00LXQutCw0LHRgFvRjNGPXXzQtNC10LpcLj8pL2ksbW9udGhzU3RyaWN0UmVnZXg6L14o0Y/QvdCy0LDRgFvRj9GMXXzRhNC10LLRgNCw0Ltb0Y/RjF180LzQsNGA0YLQsD980LDQv9GA0LXQu1vRj9GMXXzQvNCwW9GP0LldfNC40Y7QvVvRj9GMXXzQuNGO0Ltb0Y/RjF180LDQstCz0YPRgdGC0LA/fNGB0LXQvdGC0Y/QsdGAW9GP0YxdfNC+0LrRgtGP0LHRgFvRj9GMXXzQvdC+0Y/QsdGAW9GP0YxdfNC00LXQutCw0LHRgFvRj9GMXSkvaSxtb250aHNTaG9ydFN0cmljdFJlZ2V4Oi9eKNGP0L3QslwufNGE0LXQstGAP1wufNC80LDRgFvRgi5dfNCw0L/RgFwufNC80LBb0Y/QuV180LjRjtC9W9GM0Y8uXXzQuNGO0Ltb0YzRjy5dfNCw0LLQs1wufNGB0LXQvdGCP1wufNC+0LrRglwufNC90L7Rj9CxP1wufNC00LXQulwuKS9pLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkg0LMuIixMTEw6IkQgTU1NTSBZWVlZINCzLiwgSDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkg0LMuLCBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvQodC10LPQvtC00L3Rjywg0LJdIExUIixuZXh0RGF5OiJb0JfQsNCy0YLRgNCwLCDQsl0gTFQiLGxhc3REYXk6IlvQktGH0LXRgNCwLCDQsl0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKG5vdyl7aWYobm93LndlZWsoKT09PXRoaXMud2VlaygpKXJldHVybiAyPT09dGhpcy5kYXkoKT8iW9CS0L5dIGRkZGQsIFvQsl0gTFQiOiJb0JJdIGRkZGQsIFvQsl0gTFQiO3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlvQkiDRgdC70LXQtNGD0Y7RidC10LVdIGRkZGQsIFvQsl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OnJldHVybiJb0JIg0YHQu9C10LTRg9GO0YnQuNC5XSBkZGRkLCBb0LJdIExUIjtjYXNlIDM6Y2FzZSA1OmNhc2UgNjpyZXR1cm4iW9CSINGB0LvQtdC00YPRjtGJ0YPRjl0gZGRkZCwgW9CyXSBMVCJ9fSxsYXN0V2VlazpmdW5jdGlvbihub3cpe2lmKG5vdy53ZWVrKCk9PT10aGlzLndlZWsoKSlyZXR1cm4gMj09PXRoaXMuZGF5KCk/IlvQktC+XSBkZGRkLCBb0LJdIExUIjoiW9CSXSBkZGRkLCBb0LJdIExUIjtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJb0JIg0L/RgNC+0YjQu9C+0LVdIGRkZGQsIFvQsl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OnJldHVybiJb0JIg0L/RgNC+0YjQu9GL0LldIGRkZGQsIFvQsl0gTFQiO2Nhc2UgMzpjYXNlIDU6Y2FzZSA2OnJldHVybiJb0JIg0L/RgNC+0YjQu9GD0Y5dIGRkZGQsIFvQsl0gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi0YfQtdGA0LXQtyAlcyIscGFzdDoiJXMg0L3QsNC30LDQtCIsczoi0L3QtdGB0LrQvtC70YzQutC+INGB0LXQutGD0L3QtCIsc3M6cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxtOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwsbW06cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxoOiLRh9Cw0YEiLGhoOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwsZDoi0LTQtdC90YwiLGRkOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwsTToi0LzQtdGB0Y/RhiIsTU06cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCx5OiLQs9C+0LQiLHl5OnJlbGF0aXZlVGltZVdpdGhQbHVyYWx9LG1lcmlkaWVtUGFyc2U6L9C90L7Rh9C4fNGD0YLRgNCwfNC00L3Rj3zQstC10YfQtdGA0LAvaSxpc1BNOmZ1bmN0aW9uKGlucHV0KXtyZXR1cm4vXijQtNC90Y980LLQtdGH0LXRgNCwKSQvLnRlc3QoaW5wdXQpfSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjw0PyLQvdC+0YfQuCI6aG91cjwxMj8i0YPRgtGA0LAiOmhvdXI8MTc/ItC00L3RjyI6ItCy0LXRh9C10YDQsCJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0tKNC5fNCz0L580Y8pLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcixwZXJpb2Qpe3N3aXRjaChwZXJpb2Qpe2Nhc2UiTSI6Y2FzZSJkIjpjYXNlIkRERCI6cmV0dXJuIG51bWJlcisiLdC5IjtjYXNlIkQiOnJldHVybiBudW1iZXIrIi3Qs9C+IjtjYXNlInciOmNhc2UiVyI6cmV0dXJuIG51bWJlcisiLdGPIjtkZWZhdWx0OnJldHVybiBudW1iZXJ9fSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sbFl0UTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdHJhbnNsYXRlKG51bWJlcix3aXRob3V0U3VmZml4LGtleSxpc0Z1dHVyZSl7c3dpdGNoKGtleSl7Y2FzZSJzIjpyZXR1cm4gd2l0aG91dFN1ZmZpeD8i0YXRjdC00YXRjdC9INGB0LXQutGD0L3QtCI6ItGF0Y3QtNGF0Y3QvSDRgdC10LrRg9C90LTRi9C9IjtjYXNlInNzIjpyZXR1cm4gbnVtYmVyKyh3aXRob3V0U3VmZml4PyIg0YHQtdC60YPQvdC0IjoiINGB0LXQutGD0L3QtNGL0L0iKTtjYXNlIm0iOmNhc2UibW0iOnJldHVybiBudW1iZXIrKHdpdGhvdXRTdWZmaXg/IiDQvNC40L3Rg9GCIjoiINC80LjQvdGD0YLRi9C9Iik7Y2FzZSJoIjpjYXNlImhoIjpyZXR1cm4gbnVtYmVyKyh3aXRob3V0U3VmZml4PyIg0YbQsNCzIjoiINGG0LDQs9C40LnQvSIpO2Nhc2UiZCI6Y2FzZSJkZCI6cmV0dXJuIG51bWJlcisod2l0aG91dFN1ZmZpeD8iINOp0LTTqdGAIjoiINOp0LTRgNC40LnQvSIpO2Nhc2UiTSI6Y2FzZSJNTSI6cmV0dXJuIG51bWJlcisod2l0aG91dFN1ZmZpeD8iINGB0LDRgCI6IiDRgdCw0YDRi9C9Iik7Y2FzZSJ5IjpjYXNlInl5IjpyZXR1cm4gbnVtYmVyKyh3aXRob3V0U3VmZml4PyIg0LbQuNC7IjoiINC20LjQu9C40LnQvSIpO2RlZmF1bHQ6cmV0dXJuIG51bWJlcn19bW9tZW50LmRlZmluZUxvY2FsZSgibW4iLHttb250aHM6ItCd0Y3Qs9C00q/Qs9GN0Y3RgCDRgdCw0YBf0KXQvtGR0YDQtNGD0LPQsNCw0YAg0YHQsNGAX9CT0YPRgNCw0LLQtNGD0LPQsNCw0YAg0YHQsNGAX9CU06nRgNOp0LLQtNKv0LPRjdGN0YAg0YHQsNGAX9Ci0LDQstC00YPQs9Cw0LDRgCDRgdCw0YBf0JfRg9GA0LPQsNC00YPQs9Cw0LDRgCDRgdCw0YBf0JTQvtC70LTRg9Cz0LDQsNGAINGB0LDRgF/QndCw0LnQvNC00YPQs9Cw0LDRgCDRgdCw0YBf0JXRgdC00q/Qs9GN0Y3RgCDRgdCw0YBf0JDRgNCw0LLQtNGD0LPQsNCw0YAg0YHQsNGAX9CQ0YDQstCw0L0g0L3RjdCz0LTSr9Cz0Y3RjdGAINGB0LDRgF/QkNGA0LLQsNC9INGF0L7RkdGA0LTRg9Cz0LDQsNGAINGB0LDRgCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiMSDRgdCw0YBfMiDRgdCw0YBfMyDRgdCw0YBfNCDRgdCw0YBfNSDRgdCw0YBfNiDRgdCw0YBfNyDRgdCw0YBfOCDRgdCw0YBfOSDRgdCw0YBfMTAg0YHQsNGAXzExINGB0LDRgF8xMiDRgdCw0YAiLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoi0J3Rj9C8X9CU0LDQstCw0LBf0JzRj9Cz0LzQsNGAX9Cb0YXQsNCz0LLQsF/Qn9Kv0YDRjdCyX9CR0LDQsNGB0LDQvV/QkdGP0LzQsdCwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItCd0Y/QvF/QlNCw0LJf0JzRj9CzX9Cb0YXQsF/Qn9Kv0YBf0JHQsNCwX9CR0Y/QvCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0J3Rj1/QlNCwX9Cc0Y9f0JvRhV/Qn9KvX9CR0LBf0JHRjyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IllZWVkg0L7QvdGLIE1NTU3Ri9C9IEQiLExMTDoiWVlZWSDQvtC90YsgTU1NTdGL0L0gRCBISDptbSIsTExMTDoiZGRkZCwgWVlZWSDQvtC90YsgTU1NTdGL0L0gRCBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L9Ku06h80q7QpS9pLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybiLSrtClIj09PWlucHV0fSxtZXJpZGllbTpmdW5jdGlvbihob3VyLG1pbnV0ZSxpc0xvd2VyKXtyZXR1cm4gaG91cjwxMj8i0q7TqCI6ItKu0KUifSxjYWxlbmRhcjp7c2FtZURheToiW9Oo0L3TqdOp0LTTqdGAXSBMVCIsbmV4dERheToiW9Cc0LDRgNCz0LDQsNGIXSBMVCIsbmV4dFdlZWs6IlvQmNGA0Y3RhV0gZGRkZCBMVCIsbGFzdERheToiW9Oo0YfQuNCz0LTTqdGAXSBMVCIsbGFzdFdlZWs6IlvTqNC90LPTqdGA0YHTqdC9XSBkZGRkIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDQtNCw0YDQsNCwIixwYXN0OiIlcyDTqdC80L3TqSIsczp0cmFuc2xhdGUsc3M6dHJhbnNsYXRlLG06dHJhbnNsYXRlLG1tOnRyYW5zbGF0ZSxoOnRyYW5zbGF0ZSxoaDp0cmFuc2xhdGUsZDp0cmFuc2xhdGUsZGQ6dHJhbnNsYXRlLE06dHJhbnNsYXRlLE1NOnRyYW5zbGF0ZSx5OnRyYW5zbGF0ZSx5eTp0cmFuc2xhdGV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0g06nQtNOp0YAvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyLHBlcmlvZCl7c3dpdGNoKHBlcmlvZCl7Y2FzZSJkIjpjYXNlIkQiOmNhc2UiREREIjpyZXR1cm4gbnVtYmVyKyIg06nQtNOp0YAiO2RlZmF1bHQ6cmV0dXJuIG51bWJlcn19fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LGxnbnQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBzdWZmaXhlcz17MDoiLdGH0q8iLDE6Ii3Rh9C4IiwyOiIt0YfQuCIsMzoiLdGH0q8iLDQ6Ii3Rh9KvIiw1OiIt0YfQuCIsNjoiLdGH0YsiLDc6Ii3Rh9C4Iiw4OiIt0YfQuCIsOToiLdGH0YMiLDEwOiIt0YfRgyIsMjA6Ii3Rh9GLIiwzMDoiLdGH0YMiLDQwOiIt0YfRiyIsNTA6Ii3Rh9KvIiw2MDoiLdGH0YsiLDcwOiIt0YfQuCIsODA6Ii3Rh9C4Iiw5MDoiLdGH0YMiLDEwMDoiLdGH0q8ifTttb21lbnQuZGVmaW5lTG9jYWxlKCJreSIse21vbnRoczoi0Y/QvdCy0LDRgNGMX9GE0LXQstGA0LDQu9GMX9C80LDRgNGCX9Cw0L/RgNC10LvRjF/QvNCw0Llf0LjRjtC90Yxf0LjRjtC70Yxf0LDQstCz0YPRgdGCX9GB0LXQvdGC0Y/QsdGA0Yxf0L7QutGC0Y/QsdGA0Yxf0L3QvtGP0LHRgNGMX9C00LXQutCw0LHRgNGMIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLRj9C90LJf0YTQtdCyX9C80LDRgNGCX9Cw0L/RgF/QvNCw0Llf0LjRjtC90Yxf0LjRjtC70Yxf0LDQstCzX9GB0LXQvV/QvtC60YJf0L3QvtGPX9C00LXQuiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi0JbQtdC60YjQtdC80LHQuF/QlNKv0LnRiNOp0LzQsdKvX9Co0LXQudGI0LXQvNCx0Lhf0KjQsNGA0YjQtdC80LHQuF/QkdC10LnRiNC10LzQsdC4X9CW0YPQvNCwX9CY0YjQtdC80LHQuCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLQltC10Lpf0JTSr9C5X9Co0LXQuV/QqNCw0YBf0JHQtdC5X9CW0YPQvF/QmNGI0LUiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItCW0Lpf0JTQuV/QqNC5X9Co0YBf0JHQuV/QltC8X9CY0YgiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0JHSr9Cz0q/QvSDRgdCw0LDRgl0gTFQiLG5leHREYXk6IlvQrdGA0YLQtdKjINGB0LDQsNGCXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9GB0LDQsNGCXSBMVCIsbGFzdERheToiW9Ca0LXRh9GN0Y0g0YHQsNCw0YJdIExUIixsYXN0V2VlazoiW9Oo0YLQutOp0L0g0LDQv9GC0LDQvdGL0L1dIGRkZGQgW9C60q/QvdKvXSBb0YHQsNCw0YJdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDQuNGH0LjQvdC00LUiLHBhc3Q6IiVzINC80YPRgNGD0L0iLHM6ItCx0LjRgNC90LXRh9C1INGB0LXQutGD0L3QtCIsc3M6IiVkINGB0LXQutGD0L3QtCIsbToi0LHQuNGAINC80q/QvdOp0YIiLG1tOiIlZCDQvNKv0L3TqdGCIixoOiLQsdC40YAg0YHQsNCw0YIiLGhoOiIlZCDRgdCw0LDRgiIsZDoi0LHQuNGAINC60q/QvSIsZGQ6IiVkINC60q/QvSIsTToi0LHQuNGAINCw0LkiLE1NOiIlZCDQsNC5Iix5OiLQsdC40YAg0LbRi9C7Iix5eToiJWQg0LbRi9C7In0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfS0o0YfQuHzRh9GLfNGH0q980YfRgykvLG9yZGluYWw6ZnVuY3Rpb24obnVtYmVyKXt2YXIgYT1udW1iZXIlMTAsYj0xMDA8PW51bWJlcj8xMDA6bnVsbDtyZXR1cm4gbnVtYmVyKyhzdWZmaXhlc1tudW1iZXJdfHxzdWZmaXhlc1thXXx8c3VmZml4ZXNbYl0pfSx3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sbHZ0bTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9TWF0aC5zaWdufHxmdW5jdGlvbih4KXtyZXR1cm4gMD09KHg9K3gpfHx4IT14P3g6eDwwPy0xOjF9fSxseXhvOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByZWxhdGl2ZVRpbWVXaXRoUGx1cmFsKG51bWJlcix3aXRob3V0U3VmZml4LGtleSl7dmFyIHNlcGFyYXRvcj0iICI7cmV0dXJuKDIwPD1udW1iZXIlMTAwfHwxMDA8PW51bWJlciYmbnVtYmVyJTEwMD09MCkmJihzZXBhcmF0b3I9IiBkZSAiKSxudW1iZXIrc2VwYXJhdG9yK3tzczoic2VjdW5kZSIsbW06Im1pbnV0ZSIsaGg6Im9yZSIsZGQ6InppbGUiLE1NOiJsdW5pIix5eToiYW5pIn1ba2V5XX1tb21lbnQuZGVmaW5lTG9jYWxlKCJybyIse21vbnRoczoiaWFudWFyaWVfZmVicnVhcmllX21hcnRpZV9hcHJpbGllX21haV9pdW5pZV9pdWxpZV9hdWd1c3Rfc2VwdGVtYnJpZV9vY3RvbWJyaWVfbm9pZW1icmllX2RlY2VtYnJpZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiaWFuLl9mZWJyLl9tYXJ0Ll9hcHIuX21haV9pdW4uX2l1bC5fYXVnLl9zZXB0Ll9vY3QuX25vdi5fZGVjLiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJkdW1pbmljxINfbHVuaV9tYXLIm2lfbWllcmN1cmlfam9pX3ZpbmVyaV9zw6JtYsSDdMSDIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkR1bV9MdW5fTWFyX01pZV9Kb2lfVmluX1PDom0iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkR1X0x1X01hX01pX0pvX1ZpX1PDoiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2F6aSBsYV0gTFQiLG5leHREYXk6Ilttw6JpbmUgbGFdIExUIixuZXh0V2VlazoiZGRkZCBbbGFdIExUIixsYXN0RGF5OiJbaWVyaSBsYV0gTFQiLGxhc3RXZWVrOiJbZm9zdGFdIGRkZGQgW2xhXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToicGVzdGUgJXMiLHBhc3Q6IiVzIMOubiB1cm3EgyIsczoiY8OidGV2YSBzZWN1bmRlIixzczpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLG06InVuIG1pbnV0IixtbTpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLGg6Im8gb3LEgyIsaGg6cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxkOiJvIHppIixkZDpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLE06Im8gbHVuxIMiLE1NOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwseToidW4gYW4iLHl5OnJlbGF0aXZlVGltZVdpdGhQbHVyYWx9LHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxtMFBwOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBhRnVuY3Rpb249X193ZWJwYWNrX3JlcXVpcmVfXygiMk9pRiIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGZuLHRoYXQsbGVuZ3RoKXtpZihhRnVuY3Rpb24oZm4pLHZvaWQgMD09PXRoYXQpcmV0dXJuIGZuO3N3aXRjaChsZW5ndGgpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGZuLmNhbGwodGhhdCxhKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihhLGIpe3JldHVybiBmbi5jYWxsKHRoYXQsYSxiKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZuLmNhbGwodGhhdCxhLGIsYyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBmbi5hcHBseSh0aGF0LGFyZ3VtZW50cyl9fX0sbTFjSDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5fX2VzTW9kdWxlPSEwO3ZhciBvYmosX2Zyb209X193ZWJwYWNrX3JlcXVpcmVfXygicmZYaSIpLF9mcm9tMj0ob2JqPV9mcm9tKSYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07ZXhwb3J0cy5kZWZhdWx0PWZ1bmN0aW9uKGFycil7aWYoQXJyYXkuaXNBcnJheShhcnIpKXtmb3IodmFyIGk9MCxhcnIyPUFycmF5KGFyci5sZW5ndGgpO2k8YXJyLmxlbmd0aDtpKyspYXJyMltpXT1hcnJbaV07cmV0dXJuIGFycjJ9cmV0dXJuKDAsX2Zyb20yLmRlZmF1bHQpKGFycil9fSxtR1dLOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksdG9JT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oImFDRmoiKSx0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiUllpNyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKSwkbmF0aXZlPVtdLmxhc3RJbmRleE9mLE5FR0FUSVZFX1pFUk89ISEkbmF0aXZlJiYxL1sxXS5sYXN0SW5kZXhPZigxLC0wKTwwOyRleHBvcnQoJGV4cG9ydC5QKyRleHBvcnQuRiooTkVHQVRJVkVfWkVST3x8IV9fd2VicGFja19yZXF1aXJlX18oIkx5RTgiKSgkbmF0aXZlKSksIkFycmF5Iix7bGFzdEluZGV4T2Y6ZnVuY3Rpb24oc2VhcmNoRWxlbWVudCl7aWYoTkVHQVRJVkVfWkVSTylyZXR1cm4gJG5hdGl2ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fDA7dmFyIE89dG9JT2JqZWN0KHRoaXMpLGxlbmd0aD10b0xlbmd0aChPLmxlbmd0aCksaW5kZXg9bGVuZ3RoLTE7Zm9yKDE8YXJndW1lbnRzLmxlbmd0aCYmKGluZGV4PU1hdGgubWluKGluZGV4LHRvSW50ZWdlcihhcmd1bWVudHNbMV0pKSksaW5kZXg8MCYmKGluZGV4PWxlbmd0aCtpbmRleCk7MDw9aW5kZXg7aW5kZXgtLSlpZihpbmRleCBpbiBPJiZPW2luZGV4XT09PXNlYXJjaEVsZW1lbnQpcmV0dXJuIGluZGV4fHwwO3JldHVybi0xfX0pfSxtSTFSOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksZGVmaW5lZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ2aFBVIiksdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygibmU4aSIpLGlzUmVnRXhwPV9fd2VicGFja19yZXF1aXJlX18oInF1UGoiKSxnZXRGbGFncz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJDL3ZhIiksUmVnRXhwUHJvdG89UmVnRXhwLnByb3RvdHlwZSwkUmVnRXhwU3RyaW5nSXRlcmF0b3I9ZnVuY3Rpb24ocmVnZXhwLHN0cmluZyl7dGhpcy5fcj1yZWdleHAsdGhpcy5fcz1zdHJpbmd9O19fd2VicGFja19yZXF1aXJlX18oIlFhRGIiKSgkUmVnRXhwU3RyaW5nSXRlcmF0b3IsIlJlZ0V4cCBTdHJpbmciLGZ1bmN0aW9uKCl7dmFyIG1hdGNoPXRoaXMuX3IuZXhlYyh0aGlzLl9zKTtyZXR1cm57dmFsdWU6bWF0Y2gsZG9uZTpudWxsPT09bWF0Y2h9fSksJGV4cG9ydCgkZXhwb3J0LlAsIlN0cmluZyIse21hdGNoQWxsOmZ1bmN0aW9uKHJlZ2V4cCl7aWYoZGVmaW5lZCh0aGlzKSwhaXNSZWdFeHAocmVnZXhwKSl0aHJvdyBUeXBlRXJyb3IocmVnZXhwKyIgaXMgbm90IGEgcmVnZXhwISIpO3ZhciBTPVN0cmluZyh0aGlzKSxmbGFncz0iZmxhZ3MiaW4gUmVnRXhwUHJvdG8/U3RyaW5nKHJlZ2V4cC5mbGFncyk6Z2V0RmxhZ3MuY2FsbChyZWdleHApLHJ4PW5ldyBSZWdFeHAocmVnZXhwLnNvdXJjZSx+ZmxhZ3MuaW5kZXhPZigiZyIpP2ZsYWdzOiJnIitmbGFncyk7cmV0dXJuIHJ4Lmxhc3RJbmRleD10b0xlbmd0aChyZWdleHAubGFzdEluZGV4KSxuZXcgJFJlZ0V4cFN0cmluZ0l0ZXJhdG9yKHJ4LFMpfX0pfSxtUXR2OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBnT1BOPV9fd2VicGFja19yZXF1aXJlX18oImtKTXgiKSxnT1BTPV9fd2VicGFja19yZXF1aXJlX18oIkppRWEiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksUmVmbGVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIikuUmVmbGVjdDttb2R1bGUuZXhwb3J0cz1SZWZsZWN0JiZSZWZsZWN0Lm93bktleXN8fGZ1bmN0aW9uKGl0KXt2YXIga2V5cz1nT1BOLmYoYW5PYmplY3QoaXQpKSxnZXRTeW1ib2xzPWdPUFMuZjtyZXR1cm4gZ2V0U3ltYm9scz9rZXlzLmNvbmNhdChnZXRTeW1ib2xzKGl0KSk6a2V5c319LG1ZYmE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIHRvSU9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhQ0ZqIiksJGdldE93blByb3BlcnR5RGVzY3JpcHRvcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJFZW1IIikuZjtfX3dlYnBhY2tfcmVxdWlyZV9fKCJYdHI4IikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oaXQsa2V5KXtyZXR1cm4gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0b0lPYmplY3QoaXQpLGtleSl9fSl9LG1jWGU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygieHFGYyIpKCJTZXQiKX0sbXFsRjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7ZXhwb3J0cy5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LG11cmE6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKSxtZXRhPV9fd2VicGFja19yZXF1aXJlX18oIlo2dkYiKS5vbkZyZWV6ZTtfX3dlYnBhY2tfcmVxdWlyZV9fKCJYdHI4IikoInByZXZlbnRFeHRlbnNpb25zIixmdW5jdGlvbigkcHJldmVudEV4dGVuc2lvbnMpe3JldHVybiBmdW5jdGlvbihpdCl7cmV0dXJuICRwcmV2ZW50RXh0ZW5zaW9ucyYmaXNPYmplY3QoaXQpPyRwcmV2ZW50RXh0ZW5zaW9ucyhtZXRhKGl0KSk6aXR9fSl9LG42Ym06ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEUoKXt0aGlzLm1lc3NhZ2U9IlN0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3RlciJ9KEUucHJvdG90eXBlPW5ldyBFcnJvcikuY29kZT01LEUucHJvdG90eXBlLm5hbWU9IkludmFsaWRDaGFyYWN0ZXJFcnJvciIsbW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaW5wdXQpe2Zvcih2YXIgYmxvY2ssY2hhckNvZGUsc3RyPVN0cmluZyhpbnB1dCksb3V0cHV0PSIiLGlkeD0wLG1hcD0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0iO3N0ci5jaGFyQXQoMHxpZHgpfHwobWFwPSI9IixpZHglMSk7b3V0cHV0Kz1tYXAuY2hhckF0KDYzJmJsb2NrPj44LWlkeCUxKjgpKXtpZigyNTU8KGNoYXJDb2RlPXN0ci5jaGFyQ29kZUF0KGlkeCs9Ljc1KSkpdGhyb3cgbmV3IEU7YmxvY2s9YmxvY2s8PDh8Y2hhckNvZGV9cmV0dXJuIG91dHB1dH19LG5BQmU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJNYXRoIix7aWFkZGg6ZnVuY3Rpb24oeDAseDEseTAseTEpe3ZhciAkeDA9eDA+Pj4wLCR5MD15MD4+PjA7cmV0dXJuKHgxPj4+MCkrKHkxPj4+MCkrKCgkeDAmJHkwfCgkeDB8JHkwKSZ+KCR4MCskeTA+Pj4wKSk+Pj4zMSl8MH19KX0sbkJJUzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpLGZsb29yPU1hdGguZmxvb3I7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaXQpe3JldHVybiFpc09iamVjdChpdCkmJmlzRmluaXRlKGl0KSYmZmxvb3IoaXQpPT09aXR9fSxuQ25LOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oIjdERGciKSgiVWludDMyIiw0LGZ1bmN0aW9uKGluaXQpe3JldHVybiBmdW5jdGlvbihkYXRhLGJ5dGVPZmZzZXQsbGVuZ3RoKXtyZXR1cm4gaW5pdCh0aGlzLGRhdGEsYnl0ZU9mZnNldCxsZW5ndGgpfX0pfSxuR3l1OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBVTlNDT1BBQkxFUz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIikoInVuc2NvcGFibGVzIiksQXJyYXlQcm90bz1BcnJheS5wcm90b3R5cGU7bnVsbD09QXJyYXlQcm90b1tVTlNDT1BBQkxFU10mJl9fd2VicGFja19yZXF1aXJlX18oIk11a2IiKShBcnJheVByb3RvLFVOU0NPUEFCTEVTLHt9KSxtb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihrZXkpe0FycmF5UHJvdG9bVU5TQ09QQUJMRVNdW2tleV09ITB9fSxuSUNaOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihleGVjKXt0cnl7cmV0dXJue2U6ITEsdjpleGVjKCl9fWNhdGNoKGUpe3JldHVybntlOiEwLHY6ZX19fX0sbklZNzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygiT0d0ZiIpKCJiaWciLGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjcmVhdGVIVE1MKHRoaXMsImJpZyIsIiIsIiIpfX0pfSxuZThpOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiUllpNyIpLG1pbj1NYXRoLm1pbjttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIDA8aXQ/bWluKHRvSW50ZWdlcihpdCksOTAwNzE5OTI1NDc0MDk5MSk6MH19LG5oNGc6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9IV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LG5zaUg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO19fd2VicGFja19yZXF1aXJlX18oIk9HdGYiKSgiZm9udHNpemUiLGZ1bmN0aW9uKGNyZWF0ZUhUTUwpe3JldHVybiBmdW5jdGlvbihzaXplKXtyZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCJmb250Iiwic2l6ZSIsc2l6ZSl9fSl9LG55WWM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImZyIix7bW9udGhzOiJqYW52aWVyX2bDqXZyaWVyX21hcnNfYXZyaWxfbWFpX2p1aW5fanVpbGxldF9hb8O7dF9zZXB0ZW1icmVfb2N0b2JyZV9ub3ZlbWJyZV9kw6ljZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ImphbnYuX2bDqXZyLl9tYXJzX2F2ci5fbWFpX2p1aW5fanVpbC5fYW/Du3Rfc2VwdC5fb2N0Ll9ub3YuX2TDqWMuIi5zcGxpdCgiXyIpLG1vbnRoc1BhcnNlRXhhY3Q6ITAsd2Vla2RheXM6ImRpbWFuY2hlX2x1bmRpX21hcmRpX21lcmNyZWRpX2pldWRpX3ZlbmRyZWRpX3NhbWVkaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkaW0uX2x1bi5fbWFyLl9tZXIuX2pldS5fdmVuLl9zYW0uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJkaV9sdV9tYV9tZV9qZV92ZV9zYSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltBdWpvdXJk4oCZaHVpIMOgXSBMVCIsbmV4dERheToiW0RlbWFpbiDDoF0gTFQiLG5leHRXZWVrOiJkZGRkIFvDoF0gTFQiLGxhc3REYXk6IltIaWVyIMOgXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2Rlcm5pZXIgw6BdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYW5zICVzIixwYXN0OiJpbCB5IGEgJXMiLHM6InF1ZWxxdWVzIHNlY29uZGVzIixzczoiJWQgc2Vjb25kZXMiLG06InVuZSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJ1bmUgaGV1cmUiLGhoOiIlZCBoZXVyZXMiLGQ6InVuIGpvdXIiLGRkOiIlZCBqb3VycyIsTToidW4gbW9pcyIsTU06IiVkIG1vaXMiLHk6InVuIGFuIix5eToiJWQgYW5zIn0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfShlcnwpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcixwZXJpb2Qpe3N3aXRjaChwZXJpb2Qpe2Nhc2UiRCI6cmV0dXJuIG51bWJlcisoMT09PW51bWJlcj8iZXIiOiIiKTtkZWZhdWx0OmNhc2UiTSI6Y2FzZSJRIjpjYXNlIkRERCI6Y2FzZSJkIjpyZXR1cm4gbnVtYmVyKygxPT09bnVtYmVyPyJlciI6ImUiKTtjYXNlInciOmNhc2UiVyI6cmV0dXJuIG51bWJlcisoMT09PW51bWJlcj8icmUiOiJlIil9fSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sbnp5eDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJGV4cG0xPV9fd2VicGFja19yZXF1aXJlX18oIkxWd2MiKTskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqKCRleHBtMSE9TWF0aC5leHBtMSksIk1hdGgiLHtleHBtMTokZXhwbTF9KX0sbzFiRTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiYXItZHoiLHttb250aHM6Itis2KfZhtmB2Ypf2YHZitmB2LHZil/Zhdin2LHYs1/Yo9mB2LHZitmEX9mF2KfZil/YrNmI2KfZhl/YrNmI2YrZhNmK2Klf2KPZiNiqX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi2KzYp9mG2YHZil/ZgdmK2YHYsdmKX9mF2KfYsdizX9ij2YHYsdmK2YRf2YXYp9mKX9is2YjYp9mGX9is2YjZitmE2YrYqV/Yo9mI2Kpf2LPYqNiq2YXYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YHZhdio2LFf2K/Zitiz2YXYqNixIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi2KfYrdivX9in2KvZhtmK2YZf2KvZhNin2KvYp9ihX9in2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Itij2K1f2KXYq1/Yq9mE2Kdf2KPYsV/YrtmFX9is2YVf2LPYqCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvYp9mE2YrZiNmFINi52YTZiSDYp9mE2LPYp9i52KldIExUIixuZXh0RGF5OiJb2LrYr9inINi52YTZiSDYp9mE2LPYp9i52KldIExUIixuZXh0V2VlazoiZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLGxhc3REYXk6IlvYo9mF2LMg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLGxhc3RXZWVrOiJkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi2YHZiiAlcyIscGFzdDoi2YXZhtiwICVzIixzOiLYq9mI2KfZhiIsc3M6IiVkINir2KfZhtmK2KkiLG06Itiv2YLZitmC2KkiLG1tOiIlZCDYr9mC2KfYptmCIixoOiLYs9in2LnYqSIsaGg6IiVkINiz2KfYudin2KoiLGQ6ItmK2YjZhSIsZGQ6IiVkINij2YrYp9mFIixNOiLYtNmH2LEiLE1NOiIlZCDYo9i02YfYsSIseToi2LPZhtipIix5eToiJWQg2LPZhtmI2KfYqiJ9LHdlZWs6e2RvdzowLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxvOE5IOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlk3WkMiKTskZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYsIk9iamVjdCIse2Fzc2lnbjpfX3dlYnBhY2tfcmVxdWlyZV9fKCJrd1oxIil9KX0sbzk3ajpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGNhblVzZURPTT0hKCJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93fHwhd2luZG93LmRvY3VtZW50fHwhd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpLEV4ZWN1dGlvbkVudmlyb25tZW50PXtjYW5Vc2VET006Y2FuVXNlRE9NLGNhblVzZVdvcmtlcnM6InVuZGVmaW5lZCIhPXR5cGVvZiBXb3JrZXIsY2FuVXNlRXZlbnRMaXN0ZW5lcnM6Y2FuVXNlRE9NJiYhKCF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciYmIXdpbmRvdy5hdHRhY2hFdmVudCksY2FuVXNlVmlld3BvcnQ6Y2FuVXNlRE9NJiYhIXdpbmRvdy5zY3JlZW4saXNJbldvcmtlcjohY2FuVXNlRE9NfTttb2R1bGUuZXhwb3J0cz1FeGVjdXRpb25FbnZpcm9ubWVudH0sb0RJdTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLCRhdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJBdlJFIikoITEpOyRleHBvcnQoJGV4cG9ydC5QLCJTdHJpbmciLHtjb2RlUG9pbnRBdDpmdW5jdGlvbihwb3Mpe3JldHVybiAkYXQodGhpcyxwb3MpfX0pfSxvVjViOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7dmFyIGhlbHBlcnNfZXh0ZW5kcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJRYkxaIiksZXh0ZW5kc19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihoZWxwZXJzX2V4dGVuZHMpLGhlbHBlcnNfdHlwZW9mPV9fd2VicGFja19yZXF1aXJlX18oIkVKaXkiKSx0eXBlb2ZfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oaGVscGVyc190eXBlb2YpLGZvcm1hdFJlZ0V4cD0vJVtzZGolXS9nO2Z1bmN0aW9uIGZvcm1hdCgpe2Zvcih2YXIgX2xlbj1hcmd1bWVudHMubGVuZ3RoLGFyZ3M9QXJyYXkoX2xlbiksX2tleT0wO19rZXk8X2xlbjtfa2V5KyspYXJnc1tfa2V5XT1hcmd1bWVudHNbX2tleV07dmFyIGk9MSxmPWFyZ3NbMF0sbGVuPWFyZ3MubGVuZ3RoO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBmKXJldHVybiBmLmFwcGx5KG51bGwsYXJncy5zbGljZSgxKSk7aWYoInN0cmluZyIhPXR5cGVvZiBmKXJldHVybiBmO2Zvcih2YXIgc3RyPVN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCxmdW5jdGlvbih4KXtpZigiJSUiPT09eClyZXR1cm4iJSI7aWYobGVuPD1pKXJldHVybiB4O3N3aXRjaCh4KXtjYXNlIiVzIjpyZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7Y2FzZSIlZCI6cmV0dXJuIE51bWJlcihhcmdzW2krK10pO2Nhc2UiJWoiOnRyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKX1jYXRjaChfKXtyZXR1cm4iW0NpcmN1bGFyXSJ9YnJlYWs7ZGVmYXVsdDpyZXR1cm4geH19KSxhcmc9YXJnc1tpXTtpPGxlbjthcmc9YXJnc1srK2ldKXN0cis9IiAiK2FyZztyZXR1cm4gc3RyfWZ1bmN0aW9uIGlzRW1wdHlWYWx1ZSh2YWx1ZSx0eXBlKXtyZXR1cm4gbnVsbD09dmFsdWV8fCghKCJhcnJheSIhPT10eXBlfHwhQXJyYXkuaXNBcnJheSh2YWx1ZSl8fHZhbHVlLmxlbmd0aCl8fCEoIWZ1bmN0aW9uKHR5cGUpe3JldHVybiJzdHJpbmciPT09dHlwZXx8InVybCI9PT10eXBlfHwiaGV4Ij09PXR5cGV8fCJlbWFpbCI9PT10eXBlfHwicGF0dGVybiI9PT10eXBlfSh0eXBlKXx8InN0cmluZyIhPXR5cGVvZiB2YWx1ZXx8dmFsdWUpKX1mdW5jdGlvbiBhc3luY1NlcmlhbEFycmF5KGFycixmdW5jLGNhbGxiYWNrKXt2YXIgaW5kZXg9MCxhcnJMZW5ndGg9YXJyLmxlbmd0aDshZnVuY3Rpb24gbmV4dChlcnJvcnMpe2lmKGVycm9ycyYmZXJyb3JzLmxlbmd0aCljYWxsYmFjayhlcnJvcnMpO2Vsc2V7dmFyIG9yaWdpbmFsPWluZGV4O2luZGV4Kz0xLG9yaWdpbmFsPGFyckxlbmd0aD9mdW5jKGFycltvcmlnaW5hbF0sbmV4dCk6Y2FsbGJhY2soW10pfX0oW10pfWZ1bmN0aW9uIGFzeW5jTWFwKG9iakFycixvcHRpb24sZnVuYyxjYWxsYmFjayl7aWYob3B0aW9uLmZpcnN0KXJldHVybiBhc3luY1NlcmlhbEFycmF5KGZ1bmN0aW9uKG9iakFycil7dmFyIHJldD1bXTtyZXR1cm4gT2JqZWN0LmtleXMob2JqQXJyKS5mb3JFYWNoKGZ1bmN0aW9uKGspe3JldC5wdXNoLmFwcGx5KHJldCxvYmpBcnJba10pfSkscmV0fShvYmpBcnIpLGZ1bmMsY2FsbGJhY2spO3ZhciBmaXJzdEZpZWxkcz1vcHRpb24uZmlyc3RGaWVsZHN8fFtdOyEwPT09Zmlyc3RGaWVsZHMmJihmaXJzdEZpZWxkcz1PYmplY3Qua2V5cyhvYmpBcnIpKTt2YXIgb2JqQXJyS2V5cz1PYmplY3Qua2V5cyhvYmpBcnIpLG9iakFyckxlbmd0aD1vYmpBcnJLZXlzLmxlbmd0aCx0b3RhbD0wLHJlc3VsdHM9W10sbmV4dD1mdW5jdGlvbihlcnJvcnMpe3Jlc3VsdHMucHVzaC5hcHBseShyZXN1bHRzLGVycm9ycyksKyt0b3RhbD09PW9iakFyckxlbmd0aCYmY2FsbGJhY2socmVzdWx0cyl9O29iakFycktleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpe3ZhciBhcnI9b2JqQXJyW2tleV07LTEhPT1maXJzdEZpZWxkcy5pbmRleE9mKGtleSk/YXN5bmNTZXJpYWxBcnJheShhcnIsZnVuYyxuZXh0KTpmdW5jdGlvbihhcnIsZnVuYyxjYWxsYmFjayl7dmFyIHJlc3VsdHM9W10sdG90YWw9MCxhcnJMZW5ndGg9YXJyLmxlbmd0aDtmdW5jdGlvbiBjb3VudChlcnJvcnMpe3Jlc3VsdHMucHVzaC5hcHBseShyZXN1bHRzLGVycm9ycyksKyt0b3RhbD09PWFyckxlbmd0aCYmY2FsbGJhY2socmVzdWx0cyl9YXJyLmZvckVhY2goZnVuY3Rpb24oYSl7ZnVuYyhhLGNvdW50KX0pfShhcnIsZnVuYyxuZXh0KX0pfWZ1bmN0aW9uIGNvbXBsZW1lbnRFcnJvcihydWxlKXtyZXR1cm4gZnVuY3Rpb24ob2Upe3JldHVybiBvZSYmb2UubWVzc2FnZT8ob2UuZmllbGQ9b2UuZmllbGR8fHJ1bGUuZnVsbEZpZWxkLG9lKTp7bWVzc2FnZTpvZSxmaWVsZDpvZS5maWVsZHx8cnVsZS5mdWxsRmllbGR9fX1mdW5jdGlvbiBkZWVwTWVyZ2UodGFyZ2V0LHNvdXJjZSl7aWYoc291cmNlKWZvcih2YXIgcyBpbiBzb3VyY2UpaWYoc291cmNlLmhhc093blByb3BlcnR5KHMpKXt2YXIgdmFsdWU9c291cmNlW3NdOyJvYmplY3QiPT09KHZvaWQgMD09PXZhbHVlPyJ1bmRlZmluZWQiOnR5cGVvZl9kZWZhdWx0KCkodmFsdWUpKSYmIm9iamVjdCI9PT10eXBlb2ZfZGVmYXVsdCgpKHRhcmdldFtzXSk/dGFyZ2V0W3NdPWV4dGVuZHNfZGVmYXVsdCgpKHt9LHRhcmdldFtzXSx2YWx1ZSk6dGFyZ2V0W3NdPXZhbHVlfXJldHVybiB0YXJnZXR9dmFyIHJ1bGVfcmVxdWlyZWQ9ZnVuY3Rpb24ocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMsdHlwZSl7IXJ1bGUucmVxdWlyZWR8fHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShydWxlLmZpZWxkKSYmIWlzRW1wdHlWYWx1ZSh2YWx1ZSx0eXBlfHxydWxlLnR5cGUpfHxlcnJvcnMucHVzaChmb3JtYXQob3B0aW9ucy5tZXNzYWdlcy5yZXF1aXJlZCxydWxlLmZ1bGxGaWVsZCkpfTt2YXIgcnVsZV93aGl0ZXNwYWNlPWZ1bmN0aW9uKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKXsoL15ccyskLy50ZXN0KHZhbHVlKXx8IiI9PT12YWx1ZSkmJmVycm9ycy5wdXNoKGZvcm1hdChvcHRpb25zLm1lc3NhZ2VzLndoaXRlc3BhY2UscnVsZS5mdWxsRmllbGQpKX0scGF0dGVybj17ZW1haWw6L14oKFtePD4oKVxbXF1cXC4sOzpcc0AiXSsoXC5bXjw+KClcW1xdXFwuLDs6XHNAIl0rKSopfCgiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31dKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC8sdXJsOm5ldyBSZWdFeHAoIl4oPyFtYWlsdG86KSg/Oig/Omh0dHB8aHR0cHN8ZnRwKTovL3wvLykoPzpcXFMrKD86OlxcUyopP0ApPyg/Oig/Oig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMDFdXFxkfDIyWzAtM10pKD86XFwuKD86MT9cXGR7MSwyfXwyWzAtNF1cXGR8MjVbMC01XSkpezJ9KD86XFwuKD86WzAtOV1cXGQ/fDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNF0pKXwoPzooPzpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSstPykqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSg/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldKy0/KSpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSspKig/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmZdezIsfSkpKXxsb2NhbGhvc3QpKD86OlxcZHsyLDV9KT8oPzooL3xcXD98IylbXlxcc10qKT8kIiwiaSIpLGhleDovXiM/KFthLWYwLTldezZ9fFthLWYwLTldezN9KSQvaX0sdHlwZXM9e2ludGVnZXI6ZnVuY3Rpb24odmFsdWUpe3JldHVybiB0eXBlcy5udW1iZXIodmFsdWUpJiZwYXJzZUludCh2YWx1ZSwxMCk9PT12YWx1ZX0sZmxvYXQ6ZnVuY3Rpb24odmFsdWUpe3JldHVybiB0eXBlcy5udW1iZXIodmFsdWUpJiYhdHlwZXMuaW50ZWdlcih2YWx1ZSl9LGFycmF5OmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSl9LHJlZ2V4cDpmdW5jdGlvbih2YWx1ZSl7aWYodmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApcmV0dXJuITA7dHJ5e3JldHVybiEhbmV3IFJlZ0V4cCh2YWx1ZSl9Y2F0Y2goZSl7cmV0dXJuITF9fSxkYXRlOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdmFsdWUuZ2V0VGltZSYmImZ1bmN0aW9uIj09dHlwZW9mIHZhbHVlLmdldE1vbnRoJiYiZnVuY3Rpb24iPT10eXBlb2YgdmFsdWUuZ2V0WWVhcn0sbnVtYmVyOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4haXNOYU4odmFsdWUpJiYibnVtYmVyIj09dHlwZW9mIHZhbHVlfSxvYmplY3Q6ZnVuY3Rpb24odmFsdWUpe3JldHVybiJvYmplY3QiPT09KHZvaWQgMD09PXZhbHVlPyJ1bmRlZmluZWQiOnR5cGVvZl9kZWZhdWx0KCkodmFsdWUpKSYmIXR5cGVzLmFycmF5KHZhbHVlKX0sbWV0aG9kOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdmFsdWV9LGVtYWlsOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHZhbHVlJiYhIXZhbHVlLm1hdGNoKHBhdHRlcm4uZW1haWwpJiZ2YWx1ZS5sZW5ndGg8MjU1fSx1cmw6ZnVuY3Rpb24odmFsdWUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdmFsdWUmJiEhdmFsdWUubWF0Y2gocGF0dGVybi51cmwpfSxoZXg6ZnVuY3Rpb24odmFsdWUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdmFsdWUmJiEhdmFsdWUubWF0Y2gocGF0dGVybi5oZXgpfX07dmFyIHJ1bGVfdHlwZT1mdW5jdGlvbihydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyl7aWYocnVsZS5yZXF1aXJlZCYmdm9pZCAwPT09dmFsdWUpcnVsZV9yZXF1aXJlZChydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyk7ZWxzZXt2YXIgcnVsZVR5cGU9cnVsZS50eXBlOy0xPFsiaW50ZWdlciIsImZsb2F0IiwiYXJyYXkiLCJyZWdleHAiLCJvYmplY3QiLCJtZXRob2QiLCJlbWFpbCIsIm51bWJlciIsImRhdGUiLCJ1cmwiLCJoZXgiXS5pbmRleE9mKHJ1bGVUeXBlKT90eXBlc1tydWxlVHlwZV0odmFsdWUpfHxlcnJvcnMucHVzaChmb3JtYXQob3B0aW9ucy5tZXNzYWdlcy50eXBlc1tydWxlVHlwZV0scnVsZS5mdWxsRmllbGQscnVsZS50eXBlKSk6cnVsZVR5cGUmJih2b2lkIDA9PT12YWx1ZT8idW5kZWZpbmVkIjp0eXBlb2ZfZGVmYXVsdCgpKHZhbHVlKSkhPT1ydWxlLnR5cGUmJmVycm9ycy5wdXNoKGZvcm1hdChvcHRpb25zLm1lc3NhZ2VzLnR5cGVzW3J1bGVUeXBlXSxydWxlLmZ1bGxGaWVsZCxydWxlLnR5cGUpKX19O3ZhciBlc19ydWxlPXtyZXF1aXJlZDpydWxlX3JlcXVpcmVkLHdoaXRlc3BhY2U6cnVsZV93aGl0ZXNwYWNlLHR5cGU6cnVsZV90eXBlLHJhbmdlOmZ1bmN0aW9uKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKXt2YXIgbGVuPSJudW1iZXIiPT10eXBlb2YgcnVsZS5sZW4sbWluPSJudW1iZXIiPT10eXBlb2YgcnVsZS5taW4sbWF4PSJudW1iZXIiPT10eXBlb2YgcnVsZS5tYXgsdmFsPXZhbHVlLGtleT1udWxsLG51bT0ibnVtYmVyIj09dHlwZW9mIHZhbHVlLHN0cj0ic3RyaW5nIj09dHlwZW9mIHZhbHVlLGFycj1BcnJheS5pc0FycmF5KHZhbHVlKTtpZihudW0/a2V5PSJudW1iZXIiOnN0cj9rZXk9InN0cmluZyI6YXJyJiYoa2V5PSJhcnJheSIpLCFrZXkpcmV0dXJuITE7YXJyJiYodmFsPXZhbHVlLmxlbmd0aCksc3RyJiYodmFsPXZhbHVlLnJlcGxhY2UoL1tcdUQ4MDAtXHVEQkZGXVtcdURDMDAtXHVERkZGXS9nLCJfIikubGVuZ3RoKSxsZW4/dmFsIT09cnVsZS5sZW4mJmVycm9ycy5wdXNoKGZvcm1hdChvcHRpb25zLm1lc3NhZ2VzW2tleV0ubGVuLHJ1bGUuZnVsbEZpZWxkLHJ1bGUubGVuKSk6bWluJiYhbWF4JiZ2YWw8cnVsZS5taW4/ZXJyb3JzLnB1c2goZm9ybWF0KG9wdGlvbnMubWVzc2FnZXNba2V5XS5taW4scnVsZS5mdWxsRmllbGQscnVsZS5taW4pKTptYXgmJiFtaW4mJnZhbD5ydWxlLm1heD9lcnJvcnMucHVzaChmb3JtYXQob3B0aW9ucy5tZXNzYWdlc1trZXldLm1heCxydWxlLmZ1bGxGaWVsZCxydWxlLm1heCkpOm1pbiYmbWF4JiYodmFsPHJ1bGUubWlufHx2YWw+cnVsZS5tYXgpJiZlcnJvcnMucHVzaChmb3JtYXQob3B0aW9ucy5tZXNzYWdlc1trZXldLnJhbmdlLHJ1bGUuZnVsbEZpZWxkLHJ1bGUubWluLHJ1bGUubWF4KSl9LGVudW06ZnVuY3Rpb24ocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpe3J1bGUuZW51bT1BcnJheS5pc0FycmF5KHJ1bGUuZW51bSk/cnVsZS5lbnVtOltdLC0xPT09cnVsZS5lbnVtLmluZGV4T2YodmFsdWUpJiZlcnJvcnMucHVzaChmb3JtYXQob3B0aW9ucy5tZXNzYWdlcy5lbnVtLHJ1bGUuZnVsbEZpZWxkLHJ1bGUuZW51bS5qb2luKCIsICIpKSl9LHBhdHRlcm46ZnVuY3Rpb24ocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpe3J1bGUucGF0dGVybiYmKHJ1bGUucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cD8ocnVsZS5wYXR0ZXJuLmxhc3RJbmRleD0wLHJ1bGUucGF0dGVybi50ZXN0KHZhbHVlKXx8ZXJyb3JzLnB1c2goZm9ybWF0KG9wdGlvbnMubWVzc2FnZXMucGF0dGVybi5taXNtYXRjaCxydWxlLmZ1bGxGaWVsZCx2YWx1ZSxydWxlLnBhdHRlcm4pKSk6InN0cmluZyI9PXR5cGVvZiBydWxlLnBhdHRlcm4mJihuZXcgUmVnRXhwKHJ1bGUucGF0dGVybikudGVzdCh2YWx1ZSl8fGVycm9ycy5wdXNoKGZvcm1hdChvcHRpb25zLm1lc3NhZ2VzLnBhdHRlcm4ubWlzbWF0Y2gscnVsZS5mdWxsRmllbGQsdmFsdWUscnVsZS5wYXR0ZXJuKSkpKX19O3ZhciB2YWxpZGF0b3JfdHlwZT1mdW5jdGlvbihydWxlLHZhbHVlLGNhbGxiYWNrLHNvdXJjZSxvcHRpb25zKXt2YXIgcnVsZVR5cGU9cnVsZS50eXBlLGVycm9ycz1bXTtpZihydWxlLnJlcXVpcmVkfHwhcnVsZS5yZXF1aXJlZCYmc291cmNlLmhhc093blByb3BlcnR5KHJ1bGUuZmllbGQpKXtpZihpc0VtcHR5VmFsdWUodmFsdWUscnVsZVR5cGUpJiYhcnVsZS5yZXF1aXJlZClyZXR1cm4gY2FsbGJhY2soKTtlc19ydWxlLnJlcXVpcmVkKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zLHJ1bGVUeXBlKSxpc0VtcHR5VmFsdWUodmFsdWUscnVsZVR5cGUpfHxlc19ydWxlLnR5cGUocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpfWNhbGxiYWNrKGVycm9ycyl9LGVzX3ZhbGlkYXRvcj17c3RyaW5nOmZ1bmN0aW9uKHJ1bGUsdmFsdWUsY2FsbGJhY2ssc291cmNlLG9wdGlvbnMpe3ZhciBlcnJvcnM9W107aWYocnVsZS5yZXF1aXJlZHx8IXJ1bGUucmVxdWlyZWQmJnNvdXJjZS5oYXNPd25Qcm9wZXJ0eShydWxlLmZpZWxkKSl7aWYoaXNFbXB0eVZhbHVlKHZhbHVlLCJzdHJpbmciKSYmIXJ1bGUucmVxdWlyZWQpcmV0dXJuIGNhbGxiYWNrKCk7ZXNfcnVsZS5yZXF1aXJlZChydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucywic3RyaW5nIiksaXNFbXB0eVZhbHVlKHZhbHVlLCJzdHJpbmciKXx8KGVzX3J1bGUudHlwZShydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyksZXNfcnVsZS5yYW5nZShydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyksZXNfcnVsZS5wYXR0ZXJuKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKSwhMD09PXJ1bGUud2hpdGVzcGFjZSYmZXNfcnVsZS53aGl0ZXNwYWNlKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKSl9Y2FsbGJhY2soZXJyb3JzKX0sbWV0aG9kOmZ1bmN0aW9uKHJ1bGUsdmFsdWUsY2FsbGJhY2ssc291cmNlLG9wdGlvbnMpe3ZhciBlcnJvcnM9W107aWYocnVsZS5yZXF1aXJlZHx8IXJ1bGUucmVxdWlyZWQmJnNvdXJjZS5oYXNPd25Qcm9wZXJ0eShydWxlLmZpZWxkKSl7aWYoaXNFbXB0eVZhbHVlKHZhbHVlKSYmIXJ1bGUucmVxdWlyZWQpcmV0dXJuIGNhbGxiYWNrKCk7ZXNfcnVsZS5yZXF1aXJlZChydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyksdm9pZCAwIT09dmFsdWUmJmVzX3J1bGUudHlwZShydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyl9Y2FsbGJhY2soZXJyb3JzKX0sbnVtYmVyOmZ1bmN0aW9uKHJ1bGUsdmFsdWUsY2FsbGJhY2ssc291cmNlLG9wdGlvbnMpe3ZhciBlcnJvcnM9W107aWYocnVsZS5yZXF1aXJlZHx8IXJ1bGUucmVxdWlyZWQmJnNvdXJjZS5oYXNPd25Qcm9wZXJ0eShydWxlLmZpZWxkKSl7aWYoaXNFbXB0eVZhbHVlKHZhbHVlKSYmIXJ1bGUucmVxdWlyZWQpcmV0dXJuIGNhbGxiYWNrKCk7ZXNfcnVsZS5yZXF1aXJlZChydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyksdm9pZCAwIT09dmFsdWUmJihlc19ydWxlLnR5cGUocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpLGVzX3J1bGUucmFuZ2UocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpKX1jYWxsYmFjayhlcnJvcnMpfSxib29sZWFuOmZ1bmN0aW9uKHJ1bGUsdmFsdWUsY2FsbGJhY2ssc291cmNlLG9wdGlvbnMpe3ZhciBlcnJvcnM9W107aWYocnVsZS5yZXF1aXJlZHx8IXJ1bGUucmVxdWlyZWQmJnNvdXJjZS5oYXNPd25Qcm9wZXJ0eShydWxlLmZpZWxkKSl7aWYoaXNFbXB0eVZhbHVlKHZhbHVlKSYmIXJ1bGUucmVxdWlyZWQpcmV0dXJuIGNhbGxiYWNrKCk7ZXNfcnVsZS5yZXF1aXJlZChydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyksdm9pZCAwIT09dmFsdWUmJmVzX3J1bGUudHlwZShydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyl9Y2FsbGJhY2soZXJyb3JzKX0scmVnZXhwOmZ1bmN0aW9uKHJ1bGUsdmFsdWUsY2FsbGJhY2ssc291cmNlLG9wdGlvbnMpe3ZhciBlcnJvcnM9W107aWYocnVsZS5yZXF1aXJlZHx8IXJ1bGUucmVxdWlyZWQmJnNvdXJjZS5oYXNPd25Qcm9wZXJ0eShydWxlLmZpZWxkKSl7aWYoaXNFbXB0eVZhbHVlKHZhbHVlKSYmIXJ1bGUucmVxdWlyZWQpcmV0dXJuIGNhbGxiYWNrKCk7ZXNfcnVsZS5yZXF1aXJlZChydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyksaXNFbXB0eVZhbHVlKHZhbHVlKXx8ZXNfcnVsZS50eXBlKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKX1jYWxsYmFjayhlcnJvcnMpfSxpbnRlZ2VyOmZ1bmN0aW9uKHJ1bGUsdmFsdWUsY2FsbGJhY2ssc291cmNlLG9wdGlvbnMpe3ZhciBlcnJvcnM9W107aWYocnVsZS5yZXF1aXJlZHx8IXJ1bGUucmVxdWlyZWQmJnNvdXJjZS5oYXNPd25Qcm9wZXJ0eShydWxlLmZpZWxkKSl7aWYoaXNFbXB0eVZhbHVlKHZhbHVlKSYmIXJ1bGUucmVxdWlyZWQpcmV0dXJuIGNhbGxiYWNrKCk7ZXNfcnVsZS5yZXF1aXJlZChydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyksdm9pZCAwIT09dmFsdWUmJihlc19ydWxlLnR5cGUocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpLGVzX3J1bGUucmFuZ2UocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpKX1jYWxsYmFjayhlcnJvcnMpfSxmbG9hdDpmdW5jdGlvbihydWxlLHZhbHVlLGNhbGxiYWNrLHNvdXJjZSxvcHRpb25zKXt2YXIgZXJyb3JzPVtdO2lmKHJ1bGUucmVxdWlyZWR8fCFydWxlLnJlcXVpcmVkJiZzb3VyY2UuaGFzT3duUHJvcGVydHkocnVsZS5maWVsZCkpe2lmKGlzRW1wdHlWYWx1ZSh2YWx1ZSkmJiFydWxlLnJlcXVpcmVkKXJldHVybiBjYWxsYmFjaygpO2VzX3J1bGUucmVxdWlyZWQocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpLHZvaWQgMCE9PXZhbHVlJiYoZXNfcnVsZS50eXBlKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKSxlc19ydWxlLnJhbmdlKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKSl9Y2FsbGJhY2soZXJyb3JzKX0sYXJyYXk6ZnVuY3Rpb24ocnVsZSx2YWx1ZSxjYWxsYmFjayxzb3VyY2Usb3B0aW9ucyl7dmFyIGVycm9ycz1bXTtpZihydWxlLnJlcXVpcmVkfHwhcnVsZS5yZXF1aXJlZCYmc291cmNlLmhhc093blByb3BlcnR5KHJ1bGUuZmllbGQpKXtpZihpc0VtcHR5VmFsdWUodmFsdWUsImFycmF5IikmJiFydWxlLnJlcXVpcmVkKXJldHVybiBjYWxsYmFjaygpO2VzX3J1bGUucmVxdWlyZWQocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMsImFycmF5IiksaXNFbXB0eVZhbHVlKHZhbHVlLCJhcnJheSIpfHwoZXNfcnVsZS50eXBlKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKSxlc19ydWxlLnJhbmdlKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKSl9Y2FsbGJhY2soZXJyb3JzKX0sb2JqZWN0OmZ1bmN0aW9uKHJ1bGUsdmFsdWUsY2FsbGJhY2ssc291cmNlLG9wdGlvbnMpe3ZhciBlcnJvcnM9W107aWYocnVsZS5yZXF1aXJlZHx8IXJ1bGUucmVxdWlyZWQmJnNvdXJjZS5oYXNPd25Qcm9wZXJ0eShydWxlLmZpZWxkKSl7aWYoaXNFbXB0eVZhbHVlKHZhbHVlKSYmIXJ1bGUucmVxdWlyZWQpcmV0dXJuIGNhbGxiYWNrKCk7ZXNfcnVsZS5yZXF1aXJlZChydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyksdm9pZCAwIT09dmFsdWUmJmVzX3J1bGUudHlwZShydWxlLHZhbHVlLHNvdXJjZSxlcnJvcnMsb3B0aW9ucyl9Y2FsbGJhY2soZXJyb3JzKX0sZW51bTpmdW5jdGlvbihydWxlLHZhbHVlLGNhbGxiYWNrLHNvdXJjZSxvcHRpb25zKXt2YXIgZXJyb3JzPVtdO2lmKHJ1bGUucmVxdWlyZWR8fCFydWxlLnJlcXVpcmVkJiZzb3VyY2UuaGFzT3duUHJvcGVydHkocnVsZS5maWVsZCkpe2lmKGlzRW1wdHlWYWx1ZSh2YWx1ZSkmJiFydWxlLnJlcXVpcmVkKXJldHVybiBjYWxsYmFjaygpO2VzX3J1bGUucmVxdWlyZWQocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpLHZhbHVlJiZlc19ydWxlLmVudW0ocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpfWNhbGxiYWNrKGVycm9ycyl9LHBhdHRlcm46ZnVuY3Rpb24ocnVsZSx2YWx1ZSxjYWxsYmFjayxzb3VyY2Usb3B0aW9ucyl7dmFyIGVycm9ycz1bXTtpZihydWxlLnJlcXVpcmVkfHwhcnVsZS5yZXF1aXJlZCYmc291cmNlLmhhc093blByb3BlcnR5KHJ1bGUuZmllbGQpKXtpZihpc0VtcHR5VmFsdWUodmFsdWUsInN0cmluZyIpJiYhcnVsZS5yZXF1aXJlZClyZXR1cm4gY2FsbGJhY2soKTtlc19ydWxlLnJlcXVpcmVkKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKSxpc0VtcHR5VmFsdWUodmFsdWUsInN0cmluZyIpfHxlc19ydWxlLnBhdHRlcm4ocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpfWNhbGxiYWNrKGVycm9ycyl9LGRhdGU6ZnVuY3Rpb24ocnVsZSx2YWx1ZSxjYWxsYmFjayxzb3VyY2Usb3B0aW9ucyl7dmFyIGVycm9ycz1bXTtpZihydWxlLnJlcXVpcmVkfHwhcnVsZS5yZXF1aXJlZCYmc291cmNlLmhhc093blByb3BlcnR5KHJ1bGUuZmllbGQpKXtpZihpc0VtcHR5VmFsdWUodmFsdWUpJiYhcnVsZS5yZXF1aXJlZClyZXR1cm4gY2FsbGJhY2soKTtpZihlc19ydWxlLnJlcXVpcmVkKHJ1bGUsdmFsdWUsc291cmNlLGVycm9ycyxvcHRpb25zKSwhaXNFbXB0eVZhbHVlKHZhbHVlKSl7dmFyIGRhdGVPYmplY3Q9dm9pZCAwO2RhdGVPYmplY3Q9Im51bWJlciI9PXR5cGVvZiB2YWx1ZT9uZXcgRGF0ZSh2YWx1ZSk6dmFsdWUsZXNfcnVsZS50eXBlKHJ1bGUsZGF0ZU9iamVjdCxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpLGRhdGVPYmplY3QmJmVzX3J1bGUucmFuZ2UocnVsZSxkYXRlT2JqZWN0LmdldFRpbWUoKSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMpfX1jYWxsYmFjayhlcnJvcnMpfSx1cmw6dmFsaWRhdG9yX3R5cGUsaGV4OnZhbGlkYXRvcl90eXBlLGVtYWlsOnZhbGlkYXRvcl90eXBlLHJlcXVpcmVkOmZ1bmN0aW9uKHJ1bGUsdmFsdWUsY2FsbGJhY2ssc291cmNlLG9wdGlvbnMpe3ZhciBlcnJvcnM9W10sdHlwZT1BcnJheS5pc0FycmF5KHZhbHVlKT8iYXJyYXkiOnZvaWQgMD09PXZhbHVlPyJ1bmRlZmluZWQiOnR5cGVvZl9kZWZhdWx0KCkodmFsdWUpO2VzX3J1bGUucmVxdWlyZWQocnVsZSx2YWx1ZSxzb3VyY2UsZXJyb3JzLG9wdGlvbnMsdHlwZSksY2FsbGJhY2soZXJyb3JzKX19O2Z1bmN0aW9uIG5ld01lc3NhZ2VzKCl7cmV0dXJue2RlZmF1bHQ6IlZhbGlkYXRpb24gZXJyb3Igb24gZmllbGQgJXMiLHJlcXVpcmVkOiIlcyBpcyByZXF1aXJlZCIsZW51bToiJXMgbXVzdCBiZSBvbmUgb2YgJXMiLHdoaXRlc3BhY2U6IiVzIGNhbm5vdCBiZSBlbXB0eSIsZGF0ZTp7Zm9ybWF0OiIlcyBkYXRlICVzIGlzIGludmFsaWQgZm9yIGZvcm1hdCAlcyIscGFyc2U6IiVzIGRhdGUgY291bGQgbm90IGJlIHBhcnNlZCwgJXMgaXMgaW52YWxpZCAiLGludmFsaWQ6IiVzIGRhdGUgJXMgaXMgaW52YWxpZCJ9LHR5cGVzOntzdHJpbmc6IiVzIGlzIG5vdCBhICVzIixtZXRob2Q6IiVzIGlzIG5vdCBhICVzIChmdW5jdGlvbikiLGFycmF5OiIlcyBpcyBub3QgYW4gJXMiLG9iamVjdDoiJXMgaXMgbm90IGFuICVzIixudW1iZXI6IiVzIGlzIG5vdCBhICVzIixkYXRlOiIlcyBpcyBub3QgYSAlcyIsYm9vbGVhbjoiJXMgaXMgbm90IGEgJXMiLGludGVnZXI6IiVzIGlzIG5vdCBhbiAlcyIsZmxvYXQ6IiVzIGlzIG5vdCBhICVzIixyZWdleHA6IiVzIGlzIG5vdCBhIHZhbGlkICVzIixlbWFpbDoiJXMgaXMgbm90IGEgdmFsaWQgJXMiLHVybDoiJXMgaXMgbm90IGEgdmFsaWQgJXMiLGhleDoiJXMgaXMgbm90IGEgdmFsaWQgJXMifSxzdHJpbmc6e2xlbjoiJXMgbXVzdCBiZSBleGFjdGx5ICVzIGNoYXJhY3RlcnMiLG1pbjoiJXMgbXVzdCBiZSBhdCBsZWFzdCAlcyBjaGFyYWN0ZXJzIixtYXg6IiVzIGNhbm5vdCBiZSBsb25nZXIgdGhhbiAlcyBjaGFyYWN0ZXJzIixyYW5nZToiJXMgbXVzdCBiZSBiZXR3ZWVuICVzIGFuZCAlcyBjaGFyYWN0ZXJzIn0sbnVtYmVyOntsZW46IiVzIG11c3QgZXF1YWwgJXMiLG1pbjoiJXMgY2Fubm90IGJlIGxlc3MgdGhhbiAlcyIsbWF4OiIlcyBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuICVzIixyYW5nZToiJXMgbXVzdCBiZSBiZXR3ZWVuICVzIGFuZCAlcyJ9LGFycmF5OntsZW46IiVzIG11c3QgYmUgZXhhY3RseSAlcyBpbiBsZW5ndGgiLG1pbjoiJXMgY2Fubm90IGJlIGxlc3MgdGhhbiAlcyBpbiBsZW5ndGgiLG1heDoiJXMgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiAlcyBpbiBsZW5ndGgiLHJhbmdlOiIlcyBtdXN0IGJlIGJldHdlZW4gJXMgYW5kICVzIGluIGxlbmd0aCJ9LHBhdHRlcm46e21pc21hdGNoOiIlcyB2YWx1ZSAlcyBkb2VzIG5vdCBtYXRjaCBwYXR0ZXJuICVzIn0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgY2xvbmVkPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcykpO3JldHVybiBjbG9uZWQuY2xvbmU9dGhpcy5jbG9uZSxjbG9uZWR9fX12YXIgbWVzc2FnZXNfbWVzc2FnZXM9bmV3TWVzc2FnZXMoKTtmdW5jdGlvbiBTY2hlbWEoZGVzY3JpcHRvcil7dGhpcy5ydWxlcz1udWxsLHRoaXMuX21lc3NhZ2VzPW1lc3NhZ2VzX21lc3NhZ2VzLHRoaXMuZGVmaW5lKGRlc2NyaXB0b3IpfVNjaGVtYS5wcm90b3R5cGU9e21lc3NhZ2VzOmZ1bmN0aW9uKF9tZXNzYWdlcyl7cmV0dXJuIF9tZXNzYWdlcyYmKHRoaXMuX21lc3NhZ2VzPWRlZXBNZXJnZShuZXdNZXNzYWdlcygpLF9tZXNzYWdlcykpLHRoaXMuX21lc3NhZ2VzfSxkZWZpbmU6ZnVuY3Rpb24ocnVsZXMpe2lmKCFydWxlcyl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjb25maWd1cmUgYSBzY2hlbWEgd2l0aCBubyBydWxlcyIpO2lmKCJvYmplY3QiIT09KHZvaWQgMD09PXJ1bGVzPyJ1bmRlZmluZWQiOnR5cGVvZl9kZWZhdWx0KCkocnVsZXMpKXx8QXJyYXkuaXNBcnJheShydWxlcykpdGhyb3cgbmV3IEVycm9yKCJSdWxlcyBtdXN0IGJlIGFuIG9iamVjdCIpO3RoaXMucnVsZXM9e307dmFyIHo9dm9pZCAwLGl0ZW09dm9pZCAwO2Zvcih6IGluIHJ1bGVzKXJ1bGVzLmhhc093blByb3BlcnR5KHopJiYoaXRlbT1ydWxlc1t6XSx0aGlzLnJ1bGVzW3pdPUFycmF5LmlzQXJyYXkoaXRlbSk/aXRlbTpbaXRlbV0pfSx2YWxpZGF0ZTpmdW5jdGlvbihzb3VyY2VfKXt2YXIgX3RoaXM9dGhpcyxvPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxvYz1hcmd1bWVudHNbMl0sc291cmNlPXNvdXJjZV8sb3B0aW9ucz1vLGNhbGxiYWNrPW9jO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBvcHRpb25zJiYoY2FsbGJhY2s9b3B0aW9ucyxvcHRpb25zPXt9KSx0aGlzLnJ1bGVzJiYwIT09T2JqZWN0LmtleXModGhpcy5ydWxlcykubGVuZ3RoKXtpZihvcHRpb25zLm1lc3NhZ2VzKXt2YXIgbWVzc2FnZXM9dGhpcy5tZXNzYWdlcygpO21lc3NhZ2VzPT09bWVzc2FnZXNfbWVzc2FnZXMmJihtZXNzYWdlcz1uZXdNZXNzYWdlcygpKSxkZWVwTWVyZ2UobWVzc2FnZXMsb3B0aW9ucy5tZXNzYWdlcyksb3B0aW9ucy5tZXNzYWdlcz1tZXNzYWdlc31lbHNlIG9wdGlvbnMubWVzc2FnZXM9dGhpcy5tZXNzYWdlcygpO3ZhciBhcnI9dm9pZCAwLHZhbHVlPXZvaWQgMCxzZXJpZXM9e307KG9wdGlvbnMua2V5c3x8T2JqZWN0LmtleXModGhpcy5ydWxlcykpLmZvckVhY2goZnVuY3Rpb24oeil7YXJyPV90aGlzLnJ1bGVzW3pdLHZhbHVlPXNvdXJjZVt6XSxhcnIuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgcnVsZT1yOyJmdW5jdGlvbiI9PXR5cGVvZiBydWxlLnRyYW5zZm9ybSYmKHNvdXJjZT09PXNvdXJjZV8mJihzb3VyY2U9ZXh0ZW5kc19kZWZhdWx0KCkoe30sc291cmNlKSksdmFsdWU9c291cmNlW3pdPXJ1bGUudHJhbnNmb3JtKHZhbHVlKSksKHJ1bGU9ImZ1bmN0aW9uIj09dHlwZW9mIHJ1bGU/e3ZhbGlkYXRvcjpydWxlfTpleHRlbmRzX2RlZmF1bHQoKSh7fSxydWxlKSkudmFsaWRhdG9yPV90aGlzLmdldFZhbGlkYXRpb25NZXRob2QocnVsZSkscnVsZS5maWVsZD16LHJ1bGUuZnVsbEZpZWxkPXJ1bGUuZnVsbEZpZWxkfHx6LHJ1bGUudHlwZT1fdGhpcy5nZXRUeXBlKHJ1bGUpLHJ1bGUudmFsaWRhdG9yJiYoc2VyaWVzW3pdPXNlcmllc1t6XXx8W10sc2VyaWVzW3pdLnB1c2goe3J1bGU6cnVsZSx2YWx1ZTp2YWx1ZSxzb3VyY2U6c291cmNlLGZpZWxkOnp9KSl9KX0pO3ZhciBlcnJvckZpZWxkcz17fTthc3luY01hcChzZXJpZXMsb3B0aW9ucyxmdW5jdGlvbihkYXRhLGRvSXQpe3ZhciBydWxlPWRhdGEucnVsZSxkZWVwPSEoIm9iamVjdCIhPT1ydWxlLnR5cGUmJiJhcnJheSIhPT1ydWxlLnR5cGV8fCJvYmplY3QiIT09dHlwZW9mX2RlZmF1bHQoKShydWxlLmZpZWxkcykmJiJvYmplY3QiIT09dHlwZW9mX2RlZmF1bHQoKShydWxlLmRlZmF1bHRGaWVsZCkpO2Z1bmN0aW9uIGFkZEZ1bGxmaWVsZChrZXksc2NoZW1hKXtyZXR1cm4gZXh0ZW5kc19kZWZhdWx0KCkoe30sc2NoZW1hLHtmdWxsRmllbGQ6cnVsZS5mdWxsRmllbGQrIi4iK2tleX0pfWZ1bmN0aW9uIGNiKCl7dmFyIGVycm9ycz0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W107aWYoQXJyYXkuaXNBcnJheShlcnJvcnMpfHwoZXJyb3JzPVtlcnJvcnNdKSxlcnJvcnMubGVuZ3RoLGVycm9ycy5sZW5ndGgmJnJ1bGUubWVzc2FnZSYmKGVycm9ycz1bXS5jb25jYXQocnVsZS5tZXNzYWdlKSksZXJyb3JzPWVycm9ycy5tYXAoY29tcGxlbWVudEVycm9yKHJ1bGUpKSxvcHRpb25zLmZpcnN0JiZlcnJvcnMubGVuZ3RoKXJldHVybiBlcnJvckZpZWxkc1tydWxlLmZpZWxkXT0xLGRvSXQoZXJyb3JzKTtpZihkZWVwKXtpZihydWxlLnJlcXVpcmVkJiYhZGF0YS52YWx1ZSlyZXR1cm4gZXJyb3JzPXJ1bGUubWVzc2FnZT9bXS5jb25jYXQocnVsZS5tZXNzYWdlKS5tYXAoY29tcGxlbWVudEVycm9yKHJ1bGUpKTpvcHRpb25zLmVycm9yP1tvcHRpb25zLmVycm9yKHJ1bGUsZm9ybWF0KG9wdGlvbnMubWVzc2FnZXMucmVxdWlyZWQscnVsZS5maWVsZCkpXTpbXSxkb0l0KGVycm9ycyk7dmFyIGZpZWxkc1NjaGVtYT17fTtpZihydWxlLmRlZmF1bHRGaWVsZClmb3IodmFyIGsgaW4gZGF0YS52YWx1ZSlkYXRhLnZhbHVlLmhhc093blByb3BlcnR5KGspJiYoZmllbGRzU2NoZW1hW2tdPXJ1bGUuZGVmYXVsdEZpZWxkKTtmb3IodmFyIGYgaW4gZmllbGRzU2NoZW1hPWV4dGVuZHNfZGVmYXVsdCgpKHt9LGZpZWxkc1NjaGVtYSxkYXRhLnJ1bGUuZmllbGRzKSlpZihmaWVsZHNTY2hlbWEuaGFzT3duUHJvcGVydHkoZikpe3ZhciBmaWVsZFNjaGVtYT1BcnJheS5pc0FycmF5KGZpZWxkc1NjaGVtYVtmXSk/ZmllbGRzU2NoZW1hW2ZdOltmaWVsZHNTY2hlbWFbZl1dO2ZpZWxkc1NjaGVtYVtmXT1maWVsZFNjaGVtYS5tYXAoYWRkRnVsbGZpZWxkLmJpbmQobnVsbCxmKSl9dmFyIHNjaGVtYT1uZXcgU2NoZW1hKGZpZWxkc1NjaGVtYSk7c2NoZW1hLm1lc3NhZ2VzKG9wdGlvbnMubWVzc2FnZXMpLGRhdGEucnVsZS5vcHRpb25zJiYoZGF0YS5ydWxlLm9wdGlvbnMubWVzc2FnZXM9b3B0aW9ucy5tZXNzYWdlcyxkYXRhLnJ1bGUub3B0aW9ucy5lcnJvcj1vcHRpb25zLmVycm9yKSxzY2hlbWEudmFsaWRhdGUoZGF0YS52YWx1ZSxkYXRhLnJ1bGUub3B0aW9uc3x8b3B0aW9ucyxmdW5jdGlvbihlcnJzKXtkb0l0KGVycnMmJmVycnMubGVuZ3RoP2Vycm9ycy5jb25jYXQoZXJycyk6ZXJycyl9KX1lbHNlIGRvSXQoZXJyb3JzKX1kZWVwPWRlZXAmJihydWxlLnJlcXVpcmVkfHwhcnVsZS5yZXF1aXJlZCYmZGF0YS52YWx1ZSkscnVsZS5maWVsZD1kYXRhLmZpZWxkO3ZhciByZXM9cnVsZS52YWxpZGF0b3IocnVsZSxkYXRhLnZhbHVlLGNiLGRhdGEuc291cmNlLG9wdGlvbnMpO3JlcyYmcmVzLnRoZW4mJnJlcy50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGNiKCl9LGZ1bmN0aW9uKGUpe3JldHVybiBjYihlKX0pfSxmdW5jdGlvbihyZXN1bHRzKXshZnVuY3Rpb24ocmVzdWx0cyl7dmFyIGUsaT12b2lkIDAsZmllbGQ9dm9pZCAwLGVycm9ycz1bXSxmaWVsZHM9e307Zm9yKGk9MDtpPHJlc3VsdHMubGVuZ3RoO2krKyllPXJlc3VsdHNbaV0sQXJyYXkuaXNBcnJheShlKT9lcnJvcnM9ZXJyb3JzLmNvbmNhdC5hcHBseShlcnJvcnMsZSk6ZXJyb3JzLnB1c2goZSk7aWYoZXJyb3JzLmxlbmd0aClmb3IoaT0wO2k8ZXJyb3JzLmxlbmd0aDtpKyspZmllbGRzW2ZpZWxkPWVycm9yc1tpXS5maWVsZF09ZmllbGRzW2ZpZWxkXXx8W10sZmllbGRzW2ZpZWxkXS5wdXNoKGVycm9yc1tpXSk7ZWxzZSBmaWVsZHM9ZXJyb3JzPW51bGw7Y2FsbGJhY2soZXJyb3JzLGZpZWxkcyl9KHJlc3VsdHMpfSl9ZWxzZSBjYWxsYmFjayYmY2FsbGJhY2soKX0sZ2V0VHlwZTpmdW5jdGlvbihydWxlKXtpZih2b2lkIDA9PT1ydWxlLnR5cGUmJnJ1bGUucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCYmKHJ1bGUudHlwZT0icGF0dGVybiIpLCJmdW5jdGlvbiIhPXR5cGVvZiBydWxlLnZhbGlkYXRvciYmcnVsZS50eXBlJiYhZXNfdmFsaWRhdG9yLmhhc093blByb3BlcnR5KHJ1bGUudHlwZSkpdGhyb3cgbmV3IEVycm9yKGZvcm1hdCgiVW5rbm93biBydWxlIHR5cGUgJXMiLHJ1bGUudHlwZSkpO3JldHVybiBydWxlLnR5cGV8fCJzdHJpbmcifSxnZXRWYWxpZGF0aW9uTWV0aG9kOmZ1bmN0aW9uKHJ1bGUpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBydWxlLnZhbGlkYXRvcilyZXR1cm4gcnVsZS52YWxpZGF0b3I7dmFyIGtleXM9T2JqZWN0LmtleXMocnVsZSksbWVzc2FnZUluZGV4PWtleXMuaW5kZXhPZigibWVzc2FnZSIpO3JldHVybi0xIT09bWVzc2FnZUluZGV4JiZrZXlzLnNwbGljZShtZXNzYWdlSW5kZXgsMSksMT09PWtleXMubGVuZ3RoJiYicmVxdWlyZWQiPT09a2V5c1swXT9lc192YWxpZGF0b3IucmVxdWlyZWQ6ZXNfdmFsaWRhdG9yW3RoaXMuZ2V0VHlwZShydWxlKV18fCExfX0sU2NoZW1hLnJlZ2lzdGVyPWZ1bmN0aW9uKHR5cGUsdmFsaWRhdG9yKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdmFsaWRhdG9yKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHJlZ2lzdGVyIGEgdmFsaWRhdG9yIGJ5IHR5cGUsIHZhbGlkYXRvciBpcyBub3QgYSBmdW5jdGlvbiIpO2VzX3ZhbGlkYXRvclt0eXBlXT12YWxpZGF0b3J9LFNjaGVtYS5tZXNzYWdlcz1tZXNzYWdlc19tZXNzYWdlcztfX3dlYnBhY2tfZXhwb3J0c19fLmRlZmF1bHQ9U2NoZW1hfSxvVm1sOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1SzdaIiksZFBzPV9fd2VicGFja19yZXF1aXJlX18oImZwQzUiKSxlbnVtQnVnS2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJGcEhhIiksSUVfUFJPVE89X193ZWJwYWNrX3JlcXVpcmVfXygiVlZseCIpKCJJRV9QUk9UTyIpLEVtcHR5PWZ1bmN0aW9uKCl7fSxjcmVhdGVEaWN0PWZ1bmN0aW9uKCl7dmFyIGlmcmFtZURvY3VtZW50LGlmcmFtZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJIc25zIikoImlmcmFtZSIpLGk9ZW51bUJ1Z0tleXMubGVuZ3RoO2ZvcihpZnJhbWUuc3R5bGUuZGlzcGxheT0ibm9uZSIsX193ZWJwYWNrX3JlcXVpcmVfXygiTXZ3QyIpLmFwcGVuZENoaWxkKGlmcmFtZSksaWZyYW1lLnNyYz0iamF2YXNjcmlwdDoiLChpZnJhbWVEb2N1bWVudD1pZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudCkub3BlbigpLGlmcmFtZURvY3VtZW50LndyaXRlKCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFwvc2NyaXB0PiIpLGlmcmFtZURvY3VtZW50LmNsb3NlKCksY3JlYXRlRGljdD1pZnJhbWVEb2N1bWVudC5GO2ktLTspZGVsZXRlIGNyZWF0ZURpY3QucHJvdG90eXBlW2VudW1CdWdLZXlzW2ldXTtyZXR1cm4gY3JlYXRlRGljdCgpfTttb2R1bGUuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihPLFByb3BlcnRpZXMpe3ZhciByZXN1bHQ7cmV0dXJuIG51bGwhPT1PPyhFbXB0eS5wcm90b3R5cGU9YW5PYmplY3QoTykscmVzdWx0PW5ldyBFbXB0eSxFbXB0eS5wcm90b3R5cGU9bnVsbCxyZXN1bHRbSUVfUFJPVE9dPU8pOnJlc3VsdD1jcmVhdGVEaWN0KCksdm9pZCAwPT09UHJvcGVydGllcz9yZXN1bHQ6ZFBzKHJlc3VsdCxQcm9wZXJ0aWVzKX19LCJvWi9PIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLCRwcmV2ZW50RXh0ZW5zaW9ucz1PYmplY3QucHJldmVudEV4dGVuc2lvbnM7JGV4cG9ydCgkZXhwb3J0LlMsIlJlZmxlY3QiLHtwcmV2ZW50RXh0ZW5zaW9uczpmdW5jdGlvbih0YXJnZXQpe2FuT2JqZWN0KHRhcmdldCk7dHJ5e3JldHVybiAkcHJldmVudEV4dGVuc2lvbnMmJiRwcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpLCEwfWNhdGNoKGUpe3JldHVybiExfX19KX0sIm9oK2ciOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBjb3JlPV9fd2VicGFja19yZXF1aXJlX18oIldFcGsiKSwkSlNPTj1jb3JlLkpTT058fChjb3JlLkpTT049e3N0cmluZ2lmeTpKU09OLnN0cmluZ2lmeX0pO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0KXtyZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLGFyZ3VtZW50cyl9fSxvaW9SOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBjdHg9X193ZWJwYWNrX3JlcXVpcmVfXygiMkdUUCIpLGNhbGw9X193ZWJwYWNrX3JlcXVpcmVfXygic053SSIpLGlzQXJyYXlJdGVyPV9fd2VicGFja19yZXF1aXJlX18oIk53SjMiKSxhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1SzdaIiksdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygidEVlaiIpLGdldEl0ZXJGbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJmTlpBIiksQlJFQUs9e30sUkVUVVJOPXt9OyhleHBvcnRzPW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0ZXJhYmxlLGVudHJpZXMsZm4sdGhhdCxJVEVSQVRPUil7dmFyIGxlbmd0aCxzdGVwLGl0ZXJhdG9yLHJlc3VsdCxpdGVyRm49SVRFUkFUT1I/ZnVuY3Rpb24oKXtyZXR1cm4gaXRlcmFibGV9OmdldEl0ZXJGbihpdGVyYWJsZSksZj1jdHgoZm4sdGhhdCxlbnRyaWVzPzI6MSksaW5kZXg9MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgaXRlckZuKXRocm93IFR5cGVFcnJvcihpdGVyYWJsZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTtpZihpc0FycmF5SXRlcihpdGVyRm4pKXtmb3IobGVuZ3RoPXRvTGVuZ3RoKGl0ZXJhYmxlLmxlbmd0aCk7aW5kZXg8bGVuZ3RoO2luZGV4KyspaWYoKHJlc3VsdD1lbnRyaWVzP2YoYW5PYmplY3Qoc3RlcD1pdGVyYWJsZVtpbmRleF0pWzBdLHN0ZXBbMV0pOmYoaXRlcmFibGVbaW5kZXhdKSk9PT1CUkVBS3x8cmVzdWx0PT09UkVUVVJOKXJldHVybiByZXN1bHR9ZWxzZSBmb3IoaXRlcmF0b3I9aXRlckZuLmNhbGwoaXRlcmFibGUpOyEoc3RlcD1pdGVyYXRvci5uZXh0KCkpLmRvbmU7KWlmKChyZXN1bHQ9Y2FsbChpdGVyYXRvcixmLHN0ZXAudmFsdWUsZW50cmllcykpPT09QlJFQUt8fHJlc3VsdD09PVJFVFVSTilyZXR1cm4gcmVzdWx0fSkuQlJFQUs9QlJFQUssZXhwb3J0cy5SRVRVUk49UkVUVVJOfSwib2pSKyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpOyRleHBvcnQoJGV4cG9ydC5TLCJTeXN0ZW0iLHtnbG9iYWw6X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpfSl9LG9sOHg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIG5hdmlnYXRvcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIikubmF2aWdhdG9yO21vZHVsZS5leHBvcnRzPW5hdmlnYXRvciYmbmF2aWdhdG9yLnVzZXJBZ2VudHx8IiJ9LCJwL3JMIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiYm0iLHttb250aHM6Ilphbnd1eWVrYWxvX0Zld3VydXlla2Fsb19NYXJpc2lrYWxvX0F3aXJpbGlrYWxvX03Jm2thbG9fWnV3yZtua2Fsb19adWx1eWVrYWxvX1V0aWthbG9fU8mbdGFuYnVydWthbG9fyZRrdXTJlGJ1cnVrYWxvX05vd2FuYnVydWthbG9fRGVzYW5idXJ1a2FsbyIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiWmFuX0Zld19NYXJfQXdpX03Jm19adXdfWnVsX1V0aV9TyZt0X8mUa3VfTm93X0RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiS2FyaV9OdMmbbsmbbl9UYXJhdGFfQXJhYmFfQWxhbWlzYV9KdW1hX1NpYmlyaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJLYXJfTnTJm19UYXJfQXJhX0FsYV9KdW1fU2liIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJLYV9OdF9UYV9Bcl9BbF9KdV9TaSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiTU1NTSBbdGlsZV0gRCBbc2FuXSBZWVlZIixMTEw6Ik1NTU0gW3RpbGVdIEQgW3Nhbl0gWVlZWSBbbMmbcsmbXSBISDptbSIsTExMTDoiZGRkZCBNTU1NIFt0aWxlXSBEIFtzYW5dIFlZWVkgW2zJm3LJm10gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0JpIGzJm3LJm10gTFQiLG5leHREYXk6IltTaW5pIGzJm3LJm10gTFQiLG5leHRXZWVrOiJkZGRkIFtkb24gbMmbcsmbXSBMVCIsbGFzdERheToiW0t1bnUgbMmbcsmbXSBMVCIsbGFzdFdlZWs6ImRkZGQgW3TJm23Jm25lbiBsyZtyyZtdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBryZRuyZQiLHBhc3Q6ImEgYsmbICVzIGLJlCIsczoic2FuZ2EgZGFtYSBkYW1hIixzczoic2Vrb25kaSAlZCIsbToibWluaXRpIGtlbGVuIixtbToibWluaXRpICVkIixoOiJsyZtyyZsga2VsZW4iLGhoOiJsyZtyyZsgJWQiLGQ6InRpbGUga2VsZW4iLGRkOiJ0aWxlICVkIixNOiJrYWxvIGtlbGVuIixNTToia2FsbyAlZCIseToic2FuIGtlbGVuIix5eToic2FuICVkIn0sd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LHBJRm86ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5IiksdG9PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiUy9qLyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKSx0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiUllpNyIpLGFkdmFuY2VTdHJpbmdJbmRleD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJBNUFOIikscmVnRXhwRXhlYz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYeHV6IiksbWF4PU1hdGgubWF4LG1pbj1NYXRoLm1pbixmbG9vcj1NYXRoLmZsb29yLFNVQlNUSVRVVElPTl9TWU1CT0xTPS9cJChbJCZgJ118XGRcZD98PFtePl0qPikvZyxTVUJTVElUVVRJT05fU1lNQk9MU19OT19OQU1FRD0vXCQoWyQmYCddfFxkXGQ/KS9nO19fd2VicGFja19yZXF1aXJlX18oIklVK1oiKSgicmVwbGFjZSIsMixmdW5jdGlvbihkZWZpbmVkLFJFUExBQ0UsJHJlcGxhY2UsbWF5YmVDYWxsTmF0aXZlKXtyZXR1cm5bZnVuY3Rpb24oc2VhcmNoVmFsdWUscmVwbGFjZVZhbHVlKXt2YXIgTz1kZWZpbmVkKHRoaXMpLGZuPW51bGw9PXNlYXJjaFZhbHVlP3ZvaWQgMDpzZWFyY2hWYWx1ZVtSRVBMQUNFXTtyZXR1cm4gdm9pZCAwIT09Zm4/Zm4uY2FsbChzZWFyY2hWYWx1ZSxPLHJlcGxhY2VWYWx1ZSk6JHJlcGxhY2UuY2FsbChTdHJpbmcoTyksc2VhcmNoVmFsdWUscmVwbGFjZVZhbHVlKX0sZnVuY3Rpb24ocmVnZXhwLHJlcGxhY2VWYWx1ZSl7dmFyIHJlcz1tYXliZUNhbGxOYXRpdmUoJHJlcGxhY2UscmVnZXhwLHRoaXMscmVwbGFjZVZhbHVlKTtpZihyZXMuZG9uZSlyZXR1cm4gcmVzLnZhbHVlO3ZhciByeD1hbk9iamVjdChyZWdleHApLFM9U3RyaW5nKHRoaXMpLGZ1bmN0aW9uYWxSZXBsYWNlPSJmdW5jdGlvbiI9PXR5cGVvZiByZXBsYWNlVmFsdWU7ZnVuY3Rpb25hbFJlcGxhY2V8fChyZXBsYWNlVmFsdWU9U3RyaW5nKHJlcGxhY2VWYWx1ZSkpO3ZhciBnbG9iYWw9cnguZ2xvYmFsO2lmKGdsb2JhbCl7dmFyIGZ1bGxVbmljb2RlPXJ4LnVuaWNvZGU7cngubGFzdEluZGV4PTB9Zm9yKHZhciByZXN1bHRzPVtdOzspe3ZhciByZXN1bHQ9cmVnRXhwRXhlYyhyeCxTKTtpZihudWxsPT09cmVzdWx0KWJyZWFrO2lmKHJlc3VsdHMucHVzaChyZXN1bHQpLCFnbG9iYWwpYnJlYWs7IiI9PT1TdHJpbmcocmVzdWx0WzBdKSYmKHJ4Lmxhc3RJbmRleD1hZHZhbmNlU3RyaW5nSW5kZXgoUyx0b0xlbmd0aChyeC5sYXN0SW5kZXgpLGZ1bGxVbmljb2RlKSl9Zm9yKHZhciBpdCxhY2N1bXVsYXRlZFJlc3VsdD0iIixuZXh0U291cmNlUG9zaXRpb249MCxpPTA7aTxyZXN1bHRzLmxlbmd0aDtpKyspe3Jlc3VsdD1yZXN1bHRzW2ldO2Zvcih2YXIgbWF0Y2hlZD1TdHJpbmcocmVzdWx0WzBdKSxwb3NpdGlvbj1tYXgobWluKHRvSW50ZWdlcihyZXN1bHQuaW5kZXgpLFMubGVuZ3RoKSwwKSxjYXB0dXJlcz1bXSxqPTE7ajxyZXN1bHQubGVuZ3RoO2orKyljYXB0dXJlcy5wdXNoKHZvaWQgMD09PShpdD1yZXN1bHRbal0pP2l0OlN0cmluZyhpdCkpO3ZhciBuYW1lZENhcHR1cmVzPXJlc3VsdC5ncm91cHM7aWYoZnVuY3Rpb25hbFJlcGxhY2Upe3ZhciByZXBsYWNlckFyZ3M9W21hdGNoZWRdLmNvbmNhdChjYXB0dXJlcyxwb3NpdGlvbixTKTt2b2lkIDAhPT1uYW1lZENhcHR1cmVzJiZyZXBsYWNlckFyZ3MucHVzaChuYW1lZENhcHR1cmVzKTt2YXIgcmVwbGFjZW1lbnQ9U3RyaW5nKHJlcGxhY2VWYWx1ZS5hcHBseSh2b2lkIDAscmVwbGFjZXJBcmdzKSl9ZWxzZSByZXBsYWNlbWVudD1nZXRTdWJzdGl0dXRpb24obWF0Y2hlZCxTLHBvc2l0aW9uLGNhcHR1cmVzLG5hbWVkQ2FwdHVyZXMscmVwbGFjZVZhbHVlKTtuZXh0U291cmNlUG9zaXRpb248PXBvc2l0aW9uJiYoYWNjdW11bGF0ZWRSZXN1bHQrPVMuc2xpY2UobmV4dFNvdXJjZVBvc2l0aW9uLHBvc2l0aW9uKStyZXBsYWNlbWVudCxuZXh0U291cmNlUG9zaXRpb249cG9zaXRpb24rbWF0Y2hlZC5sZW5ndGgpfXJldHVybiBhY2N1bXVsYXRlZFJlc3VsdCtTLnNsaWNlKG5leHRTb3VyY2VQb3NpdGlvbil9XTtmdW5jdGlvbiBnZXRTdWJzdGl0dXRpb24obWF0Y2hlZCxzdHIscG9zaXRpb24sY2FwdHVyZXMsbmFtZWRDYXB0dXJlcyxyZXBsYWNlbWVudCl7dmFyIHRhaWxQb3M9cG9zaXRpb24rbWF0Y2hlZC5sZW5ndGgsbT1jYXB0dXJlcy5sZW5ndGgsc3ltYm9scz1TVUJTVElUVVRJT05fU1lNQk9MU19OT19OQU1FRDtyZXR1cm4gdm9pZCAwIT09bmFtZWRDYXB0dXJlcyYmKG5hbWVkQ2FwdHVyZXM9dG9PYmplY3QobmFtZWRDYXB0dXJlcyksc3ltYm9scz1TVUJTVElUVVRJT05fU1lNQk9MUyksJHJlcGxhY2UuY2FsbChyZXBsYWNlbWVudCxzeW1ib2xzLGZ1bmN0aW9uKG1hdGNoLGNoKXt2YXIgY2FwdHVyZTtzd2l0Y2goY2guY2hhckF0KDApKXtjYXNlIiQiOnJldHVybiIkIjtjYXNlIiYiOnJldHVybiBtYXRjaGVkO2Nhc2UiYCI6cmV0dXJuIHN0ci5zbGljZSgwLHBvc2l0aW9uKTtjYXNlIiciOnJldHVybiBzdHIuc2xpY2UodGFpbFBvcyk7Y2FzZSI8IjpjYXB0dXJlPW5hbWVkQ2FwdHVyZXNbY2guc2xpY2UoMSwtMSldO2JyZWFrO2RlZmF1bHQ6dmFyIG49K2NoO2lmKDA9PT1uKXJldHVybiBtYXRjaDtpZihtPG4pe3ZhciBmPWZsb29yKG4vMTApO3JldHVybiAwPT09Zj9tYXRjaDpmPD1tP3ZvaWQgMD09PWNhcHR1cmVzW2YtMV0/Y2guY2hhckF0KDEpOmNhcHR1cmVzW2YtMV0rY2guY2hhckF0KDEpOm1hdGNofWNhcHR1cmU9Y2FwdHVyZXNbbi0xXX1yZXR1cm4gdm9pZCAwPT09Y2FwdHVyZT8iIjpjYXB0dXJlfSl9fSl9LHBiaEU6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBhRnVuY3Rpb249X193ZWJwYWNrX3JlcXVpcmVfXygiMk9pRiIpO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KEMpe3ZhciByZXNvbHZlLHJlamVjdDt0aGlzLnByb21pc2U9bmV3IEMoZnVuY3Rpb24oJCRyZXNvbHZlLCQkcmVqZWN0KXtpZih2b2lkIDAhPT1yZXNvbHZlfHx2b2lkIDAhPT1yZWplY3QpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Jlc29sdmU9JCRyZXNvbHZlLHJlamVjdD0kJHJlamVjdH0pLHRoaXMucmVzb2x2ZT1hRnVuY3Rpb24ocmVzb2x2ZSksdGhpcy5yZWplY3Q9YUZ1bmN0aW9uKHJlamVjdCl9bW9kdWxlLmV4cG9ydHMuZj1mdW5jdGlvbihDKXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpfX0sInBwL1QiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUywiTWF0aCIse2xvZzI6ZnVuY3Rpb24oeCl7cmV0dXJuIE1hdGgubG9nKHgpL01hdGguTE4yfX0pfSxxNkxKOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBnbG9iYWw9X193ZWJwYWNrX3JlcXVpcmVfXygiNVQyWSIpLG1hY3JvdGFzaz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJRWGhmIikuc2V0LE9ic2VydmVyPWdsb2JhbC5NdXRhdGlvbk9ic2VydmVyfHxnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixwcm9jZXNzPWdsb2JhbC5wcm9jZXNzLFByb21pc2U9Z2xvYmFsLlByb21pc2UsaXNOb2RlPSJwcm9jZXNzIj09X193ZWJwYWNrX3JlcXVpcmVfXygiYTB4dSIpKHByb2Nlc3MpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGhlYWQsbGFzdCxub3RpZnksZmx1c2g9ZnVuY3Rpb24oKXt2YXIgcGFyZW50LGZuO2Zvcihpc05vZGUmJihwYXJlbnQ9cHJvY2Vzcy5kb21haW4pJiZwYXJlbnQuZXhpdCgpO2hlYWQ7KXtmbj1oZWFkLmZuLGhlYWQ9aGVhZC5uZXh0O3RyeXtmbigpfWNhdGNoKGUpe3Rocm93IGhlYWQ/bm90aWZ5KCk6bGFzdD12b2lkIDAsZX19bGFzdD12b2lkIDAscGFyZW50JiZwYXJlbnQuZW50ZXIoKX07aWYoaXNOb2RlKW5vdGlmeT1mdW5jdGlvbigpe3Byb2Nlc3MubmV4dFRpY2soZmx1c2gpfTtlbHNlIGlmKCFPYnNlcnZlcnx8Z2xvYmFsLm5hdmlnYXRvciYmZ2xvYmFsLm5hdmlnYXRvci5zdGFuZGFsb25lKWlmKFByb21pc2UmJlByb21pc2UucmVzb2x2ZSl7dmFyIHByb21pc2U9UHJvbWlzZS5yZXNvbHZlKHZvaWQgMCk7bm90aWZ5PWZ1bmN0aW9uKCl7cHJvbWlzZS50aGVuKGZsdXNoKX19ZWxzZSBub3RpZnk9ZnVuY3Rpb24oKXttYWNyb3Rhc2suY2FsbChnbG9iYWwsZmx1c2gpfTtlbHNle3ZhciB0b2dnbGU9ITAsbm9kZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IE9ic2VydmVyKGZsdXNoKS5vYnNlcnZlKG5vZGUse2NoYXJhY3RlckRhdGE6ITB9KSxub3RpZnk9ZnVuY3Rpb24oKXtub2RlLmRhdGE9dG9nZ2xlPSF0b2dnbGV9fXJldHVybiBmdW5jdGlvbihmbil7dmFyIHRhc2s9e2ZuOmZuLG5leHQ6dm9pZCAwfTtsYXN0JiYobGFzdC5uZXh0PXRhc2spLGhlYWR8fChoZWFkPXRhc2ssbm90aWZ5KCkpLGxhc3Q9dGFza319fSxxOWVnOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihyZWdFeHAscmVwbGFjZSl7dmFyIHJlcGxhY2VyPXJlcGxhY2U9PT1PYmplY3QocmVwbGFjZSk/ZnVuY3Rpb24ocGFydCl7cmV0dXJuIHJlcGxhY2VbcGFydF19OnJlcGxhY2U7cmV0dXJuIGZ1bmN0aW9uKGl0KXtyZXR1cm4gU3RyaW5nKGl0KS5yZXBsYWNlKHJlZ0V4cCxyZXBsYWNlcil9fX0scWN4TzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLG5ld1Byb21pc2VDYXBhYmlsaXR5PV9fd2VicGFja19yZXF1aXJlX18oInBiaEUiKSxwZXJmb3JtPV9fd2VicGFja19yZXF1aXJlX18oIm5JQ1oiKTskZXhwb3J0KCRleHBvcnQuUywiUHJvbWlzZSIse3RyeTpmdW5jdGlvbihjYWxsYmFja2ZuKXt2YXIgcHJvbWlzZUNhcGFiaWxpdHk9bmV3UHJvbWlzZUNhcGFiaWxpdHkuZih0aGlzKSxyZXN1bHQ9cGVyZm9ybShjYWxsYmFja2ZuKTtyZXR1cm4ocmVzdWx0LmU/cHJvbWlzZUNhcGFiaWxpdHkucmVqZWN0OnByb21pc2VDYXBhYmlsaXR5LnJlc29sdmUpKHJlc3VsdC52KSxwcm9taXNlQ2FwYWJpbGl0eS5wcm9taXNlfX0pfSxxbmNCOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxkZWZpbmVkPV9fd2VicGFja19yZXF1aXJlX18oInZoUFUiKSxmYWlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlZVZxIiksc3BhY2VzPV9fd2VicGFja19yZXF1aXJlX18oIi9lODgiKSxzcGFjZT0iWyIrc3BhY2VzKyJdIixsdHJpbT1SZWdFeHAoIl4iK3NwYWNlK3NwYWNlKyIqIikscnRyaW09UmVnRXhwKHNwYWNlK3NwYWNlKyIqJCIpLGV4cG9ydGVyPWZ1bmN0aW9uKEtFWSxleGVjLEFMSUFTKXt2YXIgZXhwPXt9LEZPUkNFPWZhaWxzKGZ1bmN0aW9uKCl7cmV0dXJuISFzcGFjZXNbS0VZXSgpfHwi4oCLwoUiIT0i4oCLwoUiW0tFWV0oKX0pLGZuPWV4cFtLRVldPUZPUkNFP2V4ZWModHJpbSk6c3BhY2VzW0tFWV07QUxJQVMmJihleHBbQUxJQVNdPWZuKSwkZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LkYqRk9SQ0UsIlN0cmluZyIsZXhwKX0sdHJpbT1leHBvcnRlci50cmltPWZ1bmN0aW9uKHN0cmluZyxUWVBFKXtyZXR1cm4gc3RyaW5nPVN0cmluZyhkZWZpbmVkKHN0cmluZykpLDEmVFlQRSYmKHN0cmluZz1zdHJpbmcucmVwbGFjZShsdHJpbSwiIikpLDImVFlQRSYmKHN0cmluZz1zdHJpbmcucmVwbGFjZShydHJpbSwiIikpLHN0cmluZ307bW9kdWxlLmV4cG9ydHM9ZXhwb3J0ZXJ9LHF1UGo6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGlzT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjAvUjQiKSxjb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiTFpXdCIpLE1BVENIPV9fd2VicGFja19yZXF1aXJlX18oIksweFUiKSgibWF0Y2giKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7dmFyIGlzUmVnRXhwO3JldHVybiBpc09iamVjdChpdCkmJih2b2lkIDAhPT0oaXNSZWdFeHA9aXRbTUFUQ0hdKT8hIWlzUmVnRXhwOiJSZWdFeHAiPT1jb2YoaXQpKX19LHIxYlY6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiN0REZyIpKCJVaW50MTYiLDIsZnVuY3Rpb24oaW5pdCl7cmV0dXJuIGZ1bmN0aW9uKGRhdGEsYnl0ZU9mZnNldCxsZW5ndGgpe3JldHVybiBpbml0KHRoaXMsZGF0YSxieXRlT2Zmc2V0LGxlbmd0aCl9fSl9LHJFMm86ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiT25JNyIpKCJhc3luY0l0ZXJhdG9yIil9LHJHcW86ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7Zm9yKHZhciAkaXRlcmF0b3JzPV9fd2VicGFja19yZXF1aXJlX18oInl0OE8iKSxnZXRLZXlzPV9fd2VicGFja19yZXF1aXJlX18oIkRWZ0EiKSxyZWRlZmluZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLcm9KIiksZ2xvYmFsPV9fd2VicGFja19yZXF1aXJlX18oImR5WlgiKSxoaWRlPV9fd2VicGFja19yZXF1aXJlX18oIk11a2IiKSxJdGVyYXRvcnM9X193ZWJwYWNrX3JlcXVpcmVfXygiaFBJUSIpLHdrcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIiksSVRFUkFUT1I9d2tzKCJpdGVyYXRvciIpLFRPX1NUUklOR19UQUc9d2tzKCJ0b1N0cmluZ1RhZyIpLEFycmF5VmFsdWVzPUl0ZXJhdG9ycy5BcnJheSxET01JdGVyYWJsZXM9e0NTU1J1bGVMaXN0OiEwLENTU1N0eWxlRGVjbGFyYXRpb246ITEsQ1NTVmFsdWVMaXN0OiExLENsaWVudFJlY3RMaXN0OiExLERPTVJlY3RMaXN0OiExLERPTVN0cmluZ0xpc3Q6ITEsRE9NVG9rZW5MaXN0OiEwLERhdGFUcmFuc2Zlckl0ZW1MaXN0OiExLEZpbGVMaXN0OiExLEhUTUxBbGxDb2xsZWN0aW9uOiExLEhUTUxDb2xsZWN0aW9uOiExLEhUTUxGb3JtRWxlbWVudDohMSxIVE1MU2VsZWN0RWxlbWVudDohMSxNZWRpYUxpc3Q6ITAsTWltZVR5cGVBcnJheTohMSxOYW1lZE5vZGVNYXA6ITEsTm9kZUxpc3Q6ITAsUGFpbnRSZXF1ZXN0TGlzdDohMSxQbHVnaW46ITEsUGx1Z2luQXJyYXk6ITEsU1ZHTGVuZ3RoTGlzdDohMSxTVkdOdW1iZXJMaXN0OiExLFNWR1BhdGhTZWdMaXN0OiExLFNWR1BvaW50TGlzdDohMSxTVkdTdHJpbmdMaXN0OiExLFNWR1RyYW5zZm9ybUxpc3Q6ITEsU291cmNlQnVmZmVyTGlzdDohMSxTdHlsZVNoZWV0TGlzdDohMCxUZXh0VHJhY2tDdWVMaXN0OiExLFRleHRUcmFja0xpc3Q6ITEsVG91Y2hMaXN0OiExfSxjb2xsZWN0aW9ucz1nZXRLZXlzKERPTUl0ZXJhYmxlcyksaT0wO2k8Y29sbGVjdGlvbnMubGVuZ3RoO2krKyl7dmFyIGtleSxOQU1FPWNvbGxlY3Rpb25zW2ldLGV4cGxpY2l0PURPTUl0ZXJhYmxlc1tOQU1FXSxDb2xsZWN0aW9uPWdsb2JhbFtOQU1FXSxwcm90bz1Db2xsZWN0aW9uJiZDb2xsZWN0aW9uLnByb3RvdHlwZTtpZihwcm90byYmKHByb3RvW0lURVJBVE9SXXx8aGlkZShwcm90byxJVEVSQVRPUixBcnJheVZhbHVlcykscHJvdG9bVE9fU1RSSU5HX1RBR118fGhpZGUocHJvdG8sVE9fU1RSSU5HX1RBRyxOQU1FKSxJdGVyYXRvcnNbTkFNRV09QXJyYXlWYWx1ZXMsZXhwbGljaXQpKWZvcihrZXkgaW4gJGl0ZXJhdG9ycylwcm90b1trZXldfHxyZWRlZmluZShwcm90byxrZXksJGl0ZXJhdG9yc1trZXldLCEwKX19LHJhTHI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHJlbGF0aXZlVGltZVdpdGhQbHVyYWwobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5KXt2YXIgbnVtLGZvcm1zLGZvcm1hdD17c3M6d2l0aG91dFN1ZmZpeD8i0YHQtdC60YPQvdC00LBf0YHQtdC60YPQvdC00Lhf0YHQtdC60YPQvdC0Ijoi0YHQtdC60YPQvdC00YNf0YHQtdC60YPQvdC00Lhf0YHQtdC60YPQvdC0IixtbTp3aXRob3V0U3VmZml4PyLRhdCy0LjQu9C40L3QsF/RhdCy0LjQu9C40L3QuF/RhdCy0LjQu9C40L0iOiLRhdCy0LjQu9C40L3Rg1/RhdCy0LjQu9C40L3QuF/RhdCy0LjQu9C40L0iLGhoOndpdGhvdXRTdWZmaXg/ItCz0L7QtNC40L3QsF/Qs9C+0LTQuNC90Lhf0LPQvtC00LjQvSI6ItCz0L7QtNC40L3Rg1/Qs9C+0LTQuNC90Lhf0LPQvtC00LjQvSIsZGQ6ItC00LXQvdGMX9C00L3Rll/QtNC90ZbQsiIsTU06ItC80ZbRgdGP0YbRjF/QvNGW0YHRj9GG0ZZf0LzRltGB0Y/RhtGW0LIiLHl5OiLRgNGW0Lpf0YDQvtC60Lhf0YDQvtC60ZbQsiJ9O3JldHVybiJtIj09PWtleT93aXRob3V0U3VmZml4PyLRhdCy0LjQu9C40L3QsCI6ItGF0LLQuNC70LjQvdGDIjoiaCI9PT1rZXk/d2l0aG91dFN1ZmZpeD8i0LPQvtC00LjQvdCwIjoi0LPQvtC00LjQvdGDIjpudW1iZXIrIiAiKyhudW09K251bWJlcixmb3Jtcz1mb3JtYXRba2V5XS5zcGxpdCgiXyIpLG51bSUxMD09MSYmbnVtJTEwMCE9MTE/Zm9ybXNbMF06Mjw9bnVtJTEwJiZudW0lMTA8PTQmJihudW0lMTAwPDEwfHwyMDw9bnVtJTEwMCk/Zm9ybXNbMV06Zm9ybXNbMl0pfWZ1bmN0aW9uIHByb2Nlc3NIb3Vyc0Z1bmN0aW9uKHN0cil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHN0cisi0L4iKygxMT09PXRoaXMuaG91cnMoKT8i0LEiOiIiKSsiXSBMVCJ9fW1vbWVudC5kZWZpbmVMb2NhbGUoInVrIix7bW9udGhzOntmb3JtYXQ6ItGB0ZbRh9C90Y9f0LvRjtGC0L7Qs9C+X9Cx0LXRgNC10LfQvdGPX9C60LLRltGC0L3Rj1/RgtGA0LDQstC90Y9f0YfQtdGA0LLQvdGPX9C70LjQv9C90Y9f0YHQtdGA0L/QvdGPX9Cy0LXRgNC10YHQvdGPX9C20L7QstGC0L3Rj1/Qu9C40YHRgtC+0L/QsNC00LBf0LPRgNGD0LTQvdGPIi5zcGxpdCgiXyIpLHN0YW5kYWxvbmU6ItGB0ZbRh9C10L3RjF/Qu9GO0YLQuNC5X9Cx0LXRgNC10LfQtdC90Yxf0LrQstGW0YLQtdC90Yxf0YLRgNCw0LLQtdC90Yxf0YfQtdGA0LLQtdC90Yxf0LvQuNC/0LXQvdGMX9GB0LXRgNC/0LXQvdGMX9Cy0LXRgNC10YHQtdC90Yxf0LbQvtCy0YLQtdC90Yxf0LvQuNGB0YLQvtC/0LDQtF/Qs9GA0YPQtNC10L3RjCIuc3BsaXQoIl8iKX0sbW9udGhzU2hvcnQ6ItGB0ZbRh1/Qu9GO0YJf0LHQtdGAX9C60LLRltGCX9GC0YDQsNCyX9GH0LXRgNCyX9C70LjQv1/RgdC10YDQv1/QstC10YBf0LbQvtCy0YJf0LvQuNGB0YJf0LPRgNGD0LQiLnNwbGl0KCJfIiksd2Vla2RheXM6ZnVuY3Rpb24obSxmb3JtYXQpe3ZhciB3ZWVrZGF5cz17bm9taW5hdGl2ZToi0L3QtdC00ZbQu9GPX9C/0L7QvdC10LTRltC70L7Qul/QstGW0LLRgtC+0YDQvtC6X9GB0LXRgNC10LTQsF/Rh9C10YLQstC10YBf0L/igJnRj9GC0L3QuNGG0Y9f0YHRg9Cx0L7RgtCwIi5zcGxpdCgiXyIpLGFjY3VzYXRpdmU6ItC90LXQtNGW0LvRjl/Qv9C+0L3QtdC00ZbQu9C+0Lpf0LLRltCy0YLQvtGA0L7Qul/RgdC10YDQtdC00YNf0YfQtdGC0LLQtdGAX9C/4oCZ0Y/RgtC90LjRhtGOX9GB0YPQsdC+0YLRgyIuc3BsaXQoIl8iKSxnZW5pdGl2ZToi0L3QtdC00ZbQu9GWX9C/0L7QvdC10LTRltC70LrQsF/QstGW0LLRgtC+0YDQutCwX9GB0LXRgNC10LTQuF/Rh9C10YLQstC10YDQs9CwX9C/4oCZ0Y/RgtC90LjRhtGWX9GB0YPQsdC+0YLQuCIuc3BsaXQoIl8iKX07aWYoITA9PT1tKXJldHVybiB3ZWVrZGF5cy5ub21pbmF0aXZlLnNsaWNlKDEsNykuY29uY2F0KHdlZWtkYXlzLm5vbWluYXRpdmUuc2xpY2UoMCwxKSk7aWYoIW0pcmV0dXJuIHdlZWtkYXlzLm5vbWluYXRpdmU7dmFyIG5vdW5DYXNlPS8oXFtb0JLQstCj0YNdXF0pID9kZGRkLy50ZXN0KGZvcm1hdCk/ImFjY3VzYXRpdmUiOi9cWz8oPzrQvNC40L3Rg9C70L7Rl3zQvdCw0YHRgtGD0L/QvdC+0ZcpPyA/XF0gP2RkZGQvLnRlc3QoZm9ybWF0KT8iZ2VuaXRpdmUiOiJub21pbmF0aXZlIjtyZXR1cm4gd2Vla2RheXNbbm91bkNhc2VdW20uZGF5KCldfSx3ZWVrZGF5c1Nob3J0OiLQvdC0X9C/0L1f0LLRgl/RgdGAX9GH0YJf0L/Rgl/RgdCxIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLQvdC0X9C/0L1f0LLRgl/RgdGAX9GH0YJf0L/Rgl/RgdCxIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSDRgC4iLExMTDoiRCBNTU1NIFlZWVkg0YAuLCBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkg0YAuLCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OnByb2Nlc3NIb3Vyc0Z1bmN0aW9uKCJb0KHRjNC+0LPQvtC00L3RliAiKSxuZXh0RGF5OnByb2Nlc3NIb3Vyc0Z1bmN0aW9uKCJb0JfQsNCy0YLRgNCwICIpLGxhc3REYXk6cHJvY2Vzc0hvdXJzRnVuY3Rpb24oIlvQktGH0L7RgNCwICIpLG5leHRXZWVrOnByb2Nlc3NIb3Vyc0Z1bmN0aW9uKCJb0KNdIGRkZGQgWyIpLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpjYXNlIDM6Y2FzZSA1OmNhc2UgNjpyZXR1cm4gcHJvY2Vzc0hvdXJzRnVuY3Rpb24oIlvQnNC40L3Rg9C70L7Rl10gZGRkZCBbIikuY2FsbCh0aGlzKTtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpyZXR1cm4gcHJvY2Vzc0hvdXJzRnVuY3Rpb24oIlvQnNC40L3Rg9C70L7Qs9C+XSBkZGRkIFsiKS5jYWxsKHRoaXMpfX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi0LfQsCAlcyIscGFzdDoiJXMg0YLQvtC80YMiLHM6ItC00LXQutGW0LvRjNC60LAg0YHQtdC60YPQvdC0IixzczpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLG06cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxtbTpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLGg6ItCz0L7QtNC40L3RgyIsaGg6cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxkOiLQtNC10L3RjCIsZGQ6cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxNOiLQvNGW0YHRj9GG0YwiLE1NOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwseToi0YDRltC6Iix5eTpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsfSxtZXJpZGllbVBhcnNlOi/QvdC+0YfRlnzRgNCw0L3QutGDfNC00L3Rj3zQstC10YfQvtGA0LAvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybi9eKNC00L3Rj3zQstC10YfQvtGA0LApJC8udGVzdChpbnB1dCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDQ/ItC90L7Rh9GWIjpob3VyPDEyPyLRgNCw0L3QutGDIjpob3VyPDE3PyLQtNC90Y8iOiLQstC10YfQvtGA0LAifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9LSjQuXzQs9C+KS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIscGVyaW9kKXtzd2l0Y2gocGVyaW9kKXtjYXNlIk0iOmNhc2UiZCI6Y2FzZSJEREQiOmNhc2UidyI6Y2FzZSJXIjpyZXR1cm4gbnVtYmVyKyIt0LkiO2Nhc2UiRCI6cmV0dXJuIG51bWJlcisiLdCz0L4iO2RlZmF1bHQ6cmV0dXJuIG51bWJlcn19LHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSxyZlhpOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe21vZHVsZS5leHBvcnRzPXtkZWZhdWx0Ol9fd2VicGFja19yZXF1aXJlX18oIjB0VlEiKSxfX2VzTW9kdWxlOiEwfX0scnIxaTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oYml0bWFwLHZhbHVlKXtyZXR1cm57ZW51bWVyYWJsZTohKDEmYml0bWFwKSxjb25maWd1cmFibGU6ISgyJmJpdG1hcCksd3JpdGFibGU6ISg0JmJpdG1hcCksdmFsdWU6dmFsdWV9fX0scnZaYzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKSxjb250ZXh0PV9fd2VicGFja19yZXF1aXJlX18oIjBzaCsiKSwkZW5kc1dpdGg9IiIuZW5kc1dpdGg7JGV4cG9ydCgkZXhwb3J0LlArJGV4cG9ydC5GKl9fd2VicGFja19yZXF1aXJlX18oIlVVZVciKSgiZW5kc1dpdGgiKSwiU3RyaW5nIix7ZW5kc1dpdGg6ZnVuY3Rpb24oc2VhcmNoU3RyaW5nKXt2YXIgdGhhdD1jb250ZXh0KHRoaXMsc2VhcmNoU3RyaW5nLCJlbmRzV2l0aCIpLGVuZFBvc2l0aW9uPTE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMV06dm9pZCAwLGxlbj10b0xlbmd0aCh0aGF0Lmxlbmd0aCksZW5kPXZvaWQgMD09PWVuZFBvc2l0aW9uP2xlbjpNYXRoLm1pbih0b0xlbmd0aChlbmRQb3NpdGlvbiksbGVuKSxzZWFyY2g9U3RyaW5nKHNlYXJjaFN0cmluZyk7cmV0dXJuICRlbmRzV2l0aD8kZW5kc1dpdGguY2FsbCh0aGF0LHNlYXJjaCxlbmQpOnRoYXQuc2xpY2UoZW5kLXNlYXJjaC5sZW5ndGgsZW5kKT09PXNlYXJjaH19KX0sInMrdWsiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlcix3aXRob3V0U3VmZml4LGtleSxpc0Z1dHVyZSl7dmFyIGZvcm1hdD17bTpbImVpbmUgTWludXRlIiwiZWluZXIgTWludXRlIl0saDpbImVpbmUgU3R1bmRlIiwiZWluZXIgU3R1bmRlIl0sZDpbImVpbiBUYWciLCJlaW5lbSBUYWciXSxkZDpbbnVtYmVyKyIgVGFnZSIsbnVtYmVyKyIgVGFnZW4iXSxNOlsiZWluIE1vbmF0IiwiZWluZW0gTW9uYXQiXSxNTTpbbnVtYmVyKyIgTW9uYXRlIixudW1iZXIrIiBNb25hdGVuIl0seTpbImVpbiBKYWhyIiwiZWluZW0gSmFociJdLHl5OltudW1iZXIrIiBKYWhyZSIsbnVtYmVyKyIgSmFocmVuIl19O3JldHVybiB3aXRob3V0U3VmZml4P2Zvcm1hdFtrZXldWzBdOmZvcm1hdFtrZXldWzFdfW1vbWVudC5kZWZpbmVMb2NhbGUoImRlLWF0Iix7bW9udGhzOiJKw6RubmVyX0ZlYnJ1YXJfTcOkcnpfQXByaWxfTWFpX0p1bmlfSnVsaV9BdWd1c3RfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGV6ZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IkrDpG4uX0ZlYi5fTcOkcnpfQXByLl9NYWlfSnVuaV9KdWxpX0F1Zy5fU2VwLl9Pa3QuX05vdi5fRGV6LiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJTb25udGFnX01vbnRhZ19EaWVuc3RhZ19NaXR0d29jaF9Eb25uZXJzdGFnX0ZyZWl0YWdfU2Ftc3RhZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTby5fTW8uX0RpLl9NaS5fRG8uX0ZyLl9TYS4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlNvX01vX0RpX01pX0RvX0ZyX1NhIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltoZXV0ZSB1bV0gTFQgW1Vocl0iLHNhbWVFbHNlOiJMIixuZXh0RGF5OiJbbW9yZ2VuIHVtXSBMVCBbVWhyXSIsbmV4dFdlZWs6ImRkZGQgW3VtXSBMVCBbVWhyXSIsbGFzdERheToiW2dlc3Rlcm4gdW1dIExUIFtVaHJdIixsYXN0V2VlazoiW2xldHp0ZW5dIGRkZGQgW3VtXSBMVCBbVWhyXSJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoidm9yICVzIixzOiJlaW4gcGFhciBTZWt1bmRlbiIsc3M6IiVkIFNla3VuZGVuIixtOnByb2Nlc3NSZWxhdGl2ZVRpbWUsbW06IiVkIE1pbnV0ZW4iLGg6cHJvY2Vzc1JlbGF0aXZlVGltZSxoaDoiJWQgU3R1bmRlbiIsZDpwcm9jZXNzUmVsYXRpdmVUaW1lLGRkOnByb2Nlc3NSZWxhdGl2ZVRpbWUsTTpwcm9jZXNzUmVsYXRpdmVUaW1lLE1NOnByb2Nlc3NSZWxhdGl2ZVRpbWUseTpwcm9jZXNzUmVsYXRpdmVUaW1lLHl5OnByb2Nlc3NSZWxhdGl2ZVRpbWV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sczVxWTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0LFRZUEUpe2lmKCFpc09iamVjdChpdCl8fGl0Ll90IT09VFlQRSl0aHJvdyBUeXBlRXJyb3IoIkluY29tcGF0aWJsZSByZWNlaXZlciwgIitUWVBFKyIgcmVxdWlyZWQhIik7cmV0dXJuIGl0fX0sc0Z3MTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCI3RERnIikoIkludDgiLDEsZnVuY3Rpb24oaW5pdCl7cmV0dXJuIGZ1bmN0aW9uKGRhdGEsYnl0ZU9mZnNldCxsZW5ndGgpe3JldHVybiBpbml0KHRoaXMsZGF0YSxieXRlT2Zmc2V0LGxlbmd0aCl9fSl9LHNNWHg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciByZWdleHBFeGVjPV9fd2VicGFja19yZXF1aXJlX18oIlVnb3MiKTtfX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIikoe3RhcmdldDoiUmVnRXhwIixwcm90bzohMCxmb3JjZWQ6cmVnZXhwRXhlYyE9PS8uLy5leGVjfSx7ZXhlYzpyZWdleHBFeGVjfSl9LHNOd0k6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIjVLN1oiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdGVyYXRvcixmbix2YWx1ZSxlbnRyaWVzKXt0cnl7cmV0dXJuIGVudHJpZXM/Zm4oYW5PYmplY3QodmFsdWUpWzBdLHZhbHVlWzFdKTpmbih2YWx1ZSl9Y2F0Y2goZSl7dmFyIHJldD1pdGVyYXRvci5yZXR1cm47dGhyb3cgdm9pZCAwIT09cmV0JiZhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpLGV9fX0sc2JGODpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksaXNJbnRlZ2VyPV9fd2VicGFja19yZXF1aXJlX18oIm5CSVMiKSxhYnM9TWF0aC5hYnM7JGV4cG9ydCgkZXhwb3J0LlMsIk51bWJlciIse2lzU2FmZUludGVnZXI6ZnVuY3Rpb24obnVtYmVyKXtyZXR1cm4gaXNJbnRlZ2VyKG51bWJlcikmJmFicyhudW1iZXIpPD05MDA3MTk5MjU0NzQwOTkxfX0pfSxzcDN6OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJsbyIse21vbnRoczoi4Lqh4Lqx4LqH4LqB4Lqt4LqZX+C6geC6uOC6oeC6nuC6sl/guqHgurXgupngurJf4LuA4Lqh4Lqq4LqyX+C6nuC6tuC6lOC6quC6sOC6nuC6sl/guqHgurTgupbgurjgupngurJf4LqB4LuN4Lql4Lqw4LqB4Lq74LqUX+C6quC6tOC6h+C6q+C6sl/guoHgurHgupnguo3gurJf4LqV4Lq44Lql4LqyX+C6nuC6sOC6iOC6tOC6gV/gupfgurHgupnguqfgurIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IuC6oeC6seC6h+C6geC6reC6mV/guoHgurjguqHgup7gurJf4Lqh4Lq14LqZ4LqyX+C7gOC6oeC6quC6sl/gup7gurbgupTguqrgurDgup7gurJf4Lqh4Lq04LqW4Lq44LqZ4LqyX+C6geC7jeC6peC6sOC6geC6u+C6lF/guqrgurTguofguqvgurJf4LqB4Lqx4LqZ4LqN4LqyX+C6leC6uOC6peC6sl/gup7gurDguojgurTguoFf4LqX4Lqx4LqZ4Lqn4LqyIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLguq3gurLgupfgurTgupRf4LqI4Lqx4LqZX+C6reC6seC6h+C6hOC6suC6mV/gup7gurjgupRf4Lqe4Lqw4Lqr4Lqx4LqUX+C6quC6uOC6gV/gu4DguqrgurvgurIiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4LqX4Lq04LqUX+C6iOC6seC6mV/guq3gurHguofguoTgurLguplf4Lqe4Lq44LqUX+C6nuC6sOC6q+C6seC6lF/guqrgurjguoFf4LuA4Lqq4Lq74LqyIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgupdf4LqIX+C6reC6hF/gup5f4Lqe4LqrX+C6quC6gV/guqoiLnNwbGl0KCJfIiksd2Vla2RheXNQYXJzZUV4YWN0OiEwLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoi4Lqn4Lqx4LqZZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L+C6leC6reC6meC7gOC6iuC6u+C7ieC6snzgupXguq3gupngu4HguqXguocvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybiLgupXguq3gupngu4HguqXguociPT09aW5wdXR9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDEyPyLgupXguq3gupngu4Dguorgurvgu4ngurIiOiLgupXguq3gupngu4HguqXguocifSxjYWxlbmRhcjp7c2FtZURheToiW+C6oeC6t+C7ieC6meC6teC7ieC7gOC6p+C6peC6sl0gTFQiLG5leHREYXk6IlvguqHgurfgu4nguq3gurfgu4jgupngu4DguqfguqXgurJdIExUIixuZXh0V2VlazoiW+C6p+C6seC6mV1kZGRkW+C7nOC7ieC6suC7gOC6p+C6peC6sl0gTFQiLGxhc3REYXk6IlvguqHgurfgu4nguqfgurLgupngupngurXgu4ngu4DguqfguqXgurJdIExUIixsYXN0V2VlazoiW+C6p+C6seC6mV1kZGRkW+C7geC6peC7ieC6p+C6meC6teC7ieC7gOC6p+C6peC6sl0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IuC6reC6teC6gSAlcyIscGFzdDoiJXPgupzgu4jgurLgupnguqHgurIiLHM6IuC6muC7jeC7iOC7gOC6l+C6u+C7iOC6suC7g+C6lOC6p+C6tOC6meC6suC6l+C6tSIsc3M6IiVkIOC6p+C6tOC6meC6suC6l+C6tSIsbToiMSDgupngurLgupfgurUiLG1tOiIlZCDgupngurLgupfgurUiLGg6IjEg4LqK4Lq74LuI4Lqn4LuC4Lqh4LqHIixoaDoiJWQg4LqK4Lq74LuI4Lqn4LuC4Lqh4LqHIixkOiIxIOC6oeC6t+C7iSIsZGQ6IiVkIOC6oeC6t+C7iSIsTToiMSDgu4DgupTgurfguq3gupkiLE1NOiIlZCDgu4DgupTgurfguq3gupkiLHk6IjEg4Lqb4Lq1Iix5eToiJWQg4Lqb4Lq1In0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovKOC6l+C6teC7iClcZHsxLDJ9LyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7cmV0dXJuIuC6l+C6teC7iCIrbnVtYmVyfX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSx0RWVqOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b0ludGVnZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiT2pnZCIpLG1pbj1NYXRoLm1pbjttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7cmV0dXJuIDA8aXQ/bWluKHRvSW50ZWdlcihpdCksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHRHbFg6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHByb2Nlc3NSZWxhdGl2ZVRpbWUobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5LGlzRnV0dXJlKXt2YXIgZm9ybWF0PXttOlsiZWluZSBNaW51dGUiLCJlaW5lciBNaW51dGUiXSxoOlsiZWluZSBTdHVuZGUiLCJlaW5lciBTdHVuZGUiXSxkOlsiZWluIFRhZyIsImVpbmVtIFRhZyJdLGRkOltudW1iZXIrIiBUYWdlIixudW1iZXIrIiBUYWdlbiJdLE06WyJlaW4gTW9uYXQiLCJlaW5lbSBNb25hdCJdLE1NOltudW1iZXIrIiBNb25hdGUiLG51bWJlcisiIE1vbmF0ZW4iXSx5OlsiZWluIEphaHIiLCJlaW5lbSBKYWhyIl0seXk6W251bWJlcisiIEphaHJlIixudW1iZXIrIiBKYWhyZW4iXX07cmV0dXJuIHdpdGhvdXRTdWZmaXg/Zm9ybWF0W2tleV1bMF06Zm9ybWF0W2tleV1bMV19bW9tZW50LmRlZmluZUxvY2FsZSgiZGUiLHttb250aHM6IkphbnVhcl9GZWJydWFyX03DpHJ6X0FwcmlsX01haV9KdW5pX0p1bGlfQXVndXN0X1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0RlemVtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW4uX0ZlYi5fTcOkcnpfQXByLl9NYWlfSnVuaV9KdWxpX0F1Zy5fU2VwLl9Pa3QuX05vdi5fRGV6LiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJTb25udGFnX01vbnRhZ19EaWVuc3RhZ19NaXR0d29jaF9Eb25uZXJzdGFnX0ZyZWl0YWdfU2Ftc3RhZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTby5fTW8uX0RpLl9NaS5fRG8uX0ZyLl9TYS4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlNvX01vX0RpX01pX0RvX0ZyX1NhIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltoZXV0ZSB1bV0gTFQgW1Vocl0iLHNhbWVFbHNlOiJMIixuZXh0RGF5OiJbbW9yZ2VuIHVtXSBMVCBbVWhyXSIsbmV4dFdlZWs6ImRkZGQgW3VtXSBMVCBbVWhyXSIsbGFzdERheToiW2dlc3Rlcm4gdW1dIExUIFtVaHJdIixsYXN0V2VlazoiW2xldHp0ZW5dIGRkZGQgW3VtXSBMVCBbVWhyXSJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoidm9yICVzIixzOiJlaW4gcGFhciBTZWt1bmRlbiIsc3M6IiVkIFNla3VuZGVuIixtOnByb2Nlc3NSZWxhdGl2ZVRpbWUsbW06IiVkIE1pbnV0ZW4iLGg6cHJvY2Vzc1JlbGF0aXZlVGltZSxoaDoiJWQgU3R1bmRlbiIsZDpwcm9jZXNzUmVsYXRpdmVUaW1lLGRkOnByb2Nlc3NSZWxhdGl2ZVRpbWUsTTpwcm9jZXNzUmVsYXRpdmVUaW1lLE1NOnByb2Nlc3NSZWxhdGl2ZVRpbWUseTpwcm9jZXNzUmVsYXRpdmVUaW1lLHl5OnByb2Nlc3NSZWxhdGl2ZVRpbWV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sdE1KazpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtpbXVsaDpmdW5jdGlvbih1LHYpe3ZhciAkdT0rdSwkdj0rdix1MD02NTUzNSYkdSx2MD02NTUzNSYkdix1MT0kdT4+MTYsdjE9JHY+PjE2LHQ9KHUxKnYwPj4+MCkrKHUwKnYwPj4+MTYpO3JldHVybiB1MSp2MSsodD4+MTYpKygodTAqdjE+Pj4wKSsoNjU1MzUmdCk+PjE2KX19KX0sdFEyQjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHV0aWxzPV9fd2VicGFja19yZXF1aXJlX18oInhUSisiKSxzZXR0bGU9X193ZWJwYWNrX3JlcXVpcmVfXygiUm4rZyIpLGJ1aWxkVVJMPV9fd2VicGFja19yZXF1aXJlX18oIk1MV1oiKSxwYXJzZUhlYWRlcnM9X193ZWJwYWNrX3JlcXVpcmVfXygidzBWaSIpLGlzVVJMU2FtZU9yaWdpbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJPVFR3IiksY3JlYXRlRXJyb3I9X193ZWJwYWNrX3JlcXVpcmVfXygiTFlORiIpLGJ0b2E9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5idG9hJiZ3aW5kb3cuYnRvYS5iaW5kKHdpbmRvdyl8fF9fd2VicGFja19yZXF1aXJlX18oIm42Ym0iKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihjb25maWcpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7dmFyIHJlcXVlc3REYXRhPWNvbmZpZy5kYXRhLHJlcXVlc3RIZWFkZXJzPWNvbmZpZy5oZWFkZXJzO3V0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpJiZkZWxldGUgcmVxdWVzdEhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdO3ZhciByZXF1ZXN0PW5ldyBYTUxIdHRwUmVxdWVzdCxsb2FkRXZlbnQ9Im9ucmVhZHlzdGF0ZWNoYW5nZSIseERvbWFpbj0hMTtpZigidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvd3x8IXdpbmRvdy5YRG9tYWluUmVxdWVzdHx8IndpdGhDcmVkZW50aWFscyJpbiByZXF1ZXN0fHxpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCl8fChyZXF1ZXN0PW5ldyB3aW5kb3cuWERvbWFpblJlcXVlc3QsbG9hZEV2ZW50PSJvbmxvYWQiLHhEb21haW49ITAscmVxdWVzdC5vbnByb2dyZXNzPWZ1bmN0aW9uKCl7fSxyZXF1ZXN0Lm9udGltZW91dD1mdW5jdGlvbigpe30pLGNvbmZpZy5hdXRoKXt2YXIgdXNlcm5hbWU9Y29uZmlnLmF1dGgudXNlcm5hbWV8fCIiLHBhc3N3b3JkPWNvbmZpZy5hdXRoLnBhc3N3b3JkfHwiIjtyZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uPSJCYXNpYyAiK2J0b2EodXNlcm5hbWUrIjoiK3Bhc3N3b3JkKX1pZihyZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLGJ1aWxkVVJMKGNvbmZpZy51cmwsY29uZmlnLnBhcmFtcyxjb25maWcucGFyYW1zU2VyaWFsaXplciksITApLHJlcXVlc3QudGltZW91dD1jb25maWcudGltZW91dCxyZXF1ZXN0W2xvYWRFdmVudF09ZnVuY3Rpb24oKXtpZihyZXF1ZXN0JiYoND09PXJlcXVlc3QucmVhZHlTdGF0ZXx8eERvbWFpbikmJigwIT09cmVxdWVzdC5zdGF0dXN8fHJlcXVlc3QucmVzcG9uc2VVUkwmJjA9PT1yZXF1ZXN0LnJlc3BvbnNlVVJMLmluZGV4T2YoImZpbGU6IikpKXt2YXIgcmVzcG9uc2VIZWFkZXJzPSJnZXRBbGxSZXNwb25zZUhlYWRlcnMiaW4gcmVxdWVzdD9wYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk6bnVsbCxyZXNwb25zZT17ZGF0YTpjb25maWcucmVzcG9uc2VUeXBlJiYidGV4dCIhPT1jb25maWcucmVzcG9uc2VUeXBlP3JlcXVlc3QucmVzcG9uc2U6cmVxdWVzdC5yZXNwb25zZVRleHQsc3RhdHVzOjEyMjM9PT1yZXF1ZXN0LnN0YXR1cz8yMDQ6cmVxdWVzdC5zdGF0dXMsc3RhdHVzVGV4dDoxMjIzPT09cmVxdWVzdC5zdGF0dXM/Ik5vIENvbnRlbnQiOnJlcXVlc3Quc3RhdHVzVGV4dCxoZWFkZXJzOnJlc3BvbnNlSGVhZGVycyxjb25maWc6Y29uZmlnLHJlcXVlc3Q6cmVxdWVzdH07c2V0dGxlKHJlc29sdmUscmVqZWN0LHJlc3BvbnNlKSxyZXF1ZXN0PW51bGx9fSxyZXF1ZXN0Lm9uZXJyb3I9ZnVuY3Rpb24oKXtyZWplY3QoY3JlYXRlRXJyb3IoIk5ldHdvcmsgRXJyb3IiLGNvbmZpZyxudWxsLHJlcXVlc3QpKSxyZXF1ZXN0PW51bGx9LHJlcXVlc3Qub250aW1lb3V0PWZ1bmN0aW9uKCl7cmVqZWN0KGNyZWF0ZUVycm9yKCJ0aW1lb3V0IG9mICIrY29uZmlnLnRpbWVvdXQrIm1zIGV4Y2VlZGVkIixjb25maWcsIkVDT05OQUJPUlRFRCIscmVxdWVzdCkpLHJlcXVlc3Q9bnVsbH0sdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSl7dmFyIGNvb2tpZXM9X193ZWJwYWNrX3JlcXVpcmVfXygiZXF5aiIpLHhzcmZWYWx1ZT0oY29uZmlnLndpdGhDcmVkZW50aWFsc3x8aXNVUkxTYW1lT3JpZ2luKGNvbmZpZy51cmwpKSYmY29uZmlnLnhzcmZDb29raWVOYW1lP2Nvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpOnZvaWQgMDt4c3JmVmFsdWUmJihyZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdPXhzcmZWYWx1ZSl9aWYoInNldFJlcXVlc3RIZWFkZXIiaW4gcmVxdWVzdCYmdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycyxmdW5jdGlvbih2YWwsa2V5KXt2b2lkIDA9PT1yZXF1ZXN0RGF0YSYmImNvbnRlbnQtdHlwZSI9PT1rZXkudG9Mb3dlckNhc2UoKT9kZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTpyZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LHZhbCl9KSxjb25maWcud2l0aENyZWRlbnRpYWxzJiYocmVxdWVzdC53aXRoQ3JlZGVudGlhbHM9ITApLGNvbmZpZy5yZXNwb25zZVR5cGUpdHJ5e3JlcXVlc3QucmVzcG9uc2VUeXBlPWNvbmZpZy5yZXNwb25zZVR5cGV9Y2F0Y2goZSl7aWYoImpzb24iIT09Y29uZmlnLnJlc3BvbnNlVHlwZSl0aHJvdyBlfSJmdW5jdGlvbiI9PXR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzJiZyZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixjb25maWcub25Eb3dubG9hZFByb2dyZXNzKSwiZnVuY3Rpb24iPT10eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MmJnJlcXVlc3QudXBsb2FkJiZyZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCJwcm9ncmVzcyIsY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpLGNvbmZpZy5jYW5jZWxUb2tlbiYmY29uZmlnLmNhbmNlbFRva2VuLnByb21pc2UudGhlbihmdW5jdGlvbihjYW5jZWwpe3JlcXVlc3QmJihyZXF1ZXN0LmFib3J0KCkscmVqZWN0KGNhbmNlbCkscmVxdWVzdD1udWxsKX0pLHZvaWQgMD09PXJlcXVlc3REYXRhJiYocmVxdWVzdERhdGE9bnVsbCkscmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhKX0pfX0sdFQzSjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgidHptLWxhdG4iLHttb250aHM6ImlubmF5cl9icsukYXlyy6RfbWFyy6Rzy6RfaWJyaXJfbWF5eXdfeXdueXdfeXdseXd6X8mjd8WhdF/FoXd0YW5iaXJfa3TLpHdicsukX253d2FuYmlyX2R3am5iaXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ImlubmF5cl9icsukYXlyy6RfbWFyy6Rzy6RfaWJyaXJfbWF5eXdfeXdueXdfeXdseXd6X8mjd8WhdF/FoXd0YW5iaXJfa3TLpHdicsukX253d2FuYmlyX2R3am5iaXIiLnNwbGl0KCJfIiksd2Vla2RheXM6ImFzYW1hc19heW5hc19hc2luYXNfYWtyYXNfYWt3YXNfYXNpbXdhc19hc2nhuI15YXMiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiYXNhbWFzX2F5bmFzX2FzaW5hc19ha3Jhc19ha3dhc19hc2ltd2FzX2FzaeG4jXlhcyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiYXNhbWFzX2F5bmFzX2FzaW5hc19ha3Jhc19ha3dhc19hc2ltd2FzX2FzaeG4jXlhcyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2FzZGtoIGddIExUIixuZXh0RGF5OiJbYXNrYSBnXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2ddIExUIixsYXN0RGF5OiJbYXNzYW50IGddIExUIixsYXN0V2VlazoiZGRkZCBbZ10gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImRhZGtoIHMgeWFuICVzIixwYXN0OiJ5YW4gJXMiLHM6ImltaWsiLHNzOiIlZCBpbWlrIixtOiJtaW514biNIixtbToiJWQgbWludeG4jSIsaDoic2HJm2EiLGhoOiIlZCB0YXNzYcmbaW4iLGQ6ImFzcyIsZGQ6IiVkIG9zc2FuIixNOiJheW93ciIsTU06IiVkIGl5eWlybiIseToiYXNnYXMiLHl5OiIlZCBpc2dhc24ifSx3ZWVrOntkb3c6Nixkb3k6MTJ9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LHRVQ3Y6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoImp2Iix7bW9udGhzOiJKYW51YXJpX0ZlYnJ1YXJpX01hcmV0X0FwcmlsX01laV9KdW5pX0p1bGlfQWd1c3R1c19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3BlbWJlcl9EZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01laV9KdW5fSnVsX0Fnc19TZXBfT2t0X05vcF9EZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6Ik1pbmdndV9TZW5lbl9TZWxvc29fUmVidV9LZW1pc19KZW11d2FoX1NlcHR1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Ik1pbl9TZW5fU2VsX1JlYl9LZW1fSmVtX1NlcCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiTWdfU25fU2xfUmJfS21fSm1fU3AiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISC5tbSIsTFRTOiJISC5tbS5zcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0ifSxtZXJpZGllbVBhcnNlOi9lbmppbmd8c2l5YW5nfHNvbnRlbnxuZGFsdS8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKGhvdXIsbWVyaWRpZW0pe3JldHVybiAxMj09PWhvdXImJihob3VyPTApLCJlbmppbmciPT09bWVyaWRpZW0/aG91cjoic2l5YW5nIj09PW1lcmlkaWVtPzExPD1ob3VyP2hvdXI6aG91cisxMjoic29udGVuIj09PW1lcmlkaWVtfHwibmRhbHUiPT09bWVyaWRpZW0/aG91cisxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXJzLG1pbnV0ZXMsaXNMb3dlcil7cmV0dXJuIGhvdXJzPDExPyJlbmppbmciOmhvdXJzPDE1PyJzaXlhbmciOmhvdXJzPDE5PyJzb250ZW4iOiJuZGFsdSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbRGludGVuIHB1bmlrbyBwdWt1bF0gTFQiLG5leHREYXk6IltNYmVuamFuZyBwdWt1bF0gTFQiLG5leHRXZWVrOiJkZGRkIFtwdWt1bF0gTFQiLGxhc3REYXk6IltLYWxhIHdpbmdpIHB1a3VsXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2tlcGVuZ2tlciBwdWt1bF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IndvbnRlbiBpbmcgJXMiLHBhc3Q6IiVzIGluZ2thbmcga2VwZW5na2VyIixzOiJzYXdldGF3aXMgZGV0aWsiLHNzOiIlZCBkZXRpayIsbToic2V0dW5nZ2FsIG1lbml0IixtbToiJWQgbWVuaXQiLGg6InNldHVuZ2dhbCBqYW0iLGhoOiIlZCBqYW0iLGQ6InNlZGludGVuIixkZDoiJWQgZGludGVuIixNOiJzZXd1bGFuIixNTToiJWQgd3VsYW4iLHk6InNldGF1biIseXk6IiVkIHRhdW4ifSx3ZWVrOntkb3c6MSxkb3k6N319KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sdFVyZzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXygiT0d0ZiIpKCJsaW5rIixmdW5jdGlvbihjcmVhdGVIVE1MKXtyZXR1cm4gZnVuY3Rpb24odXJsKXtyZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCJhIiwiaHJlZiIsdXJsKX19KX0sdHVTbzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCI3RERnIikoIkludDMyIiw0LGZ1bmN0aW9uKGluaXQpe3JldHVybiBmdW5jdGlvbihkYXRhLGJ5dGVPZmZzZXQsbGVuZ3RoKXtyZXR1cm4gaW5pdCh0aGlzLGRhdGEsYnl0ZU9mZnNldCxsZW5ndGgpfX0pfSwidHl5KyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpLCRwYXJzZUZsb2F0PV9fd2VicGFja19yZXF1aXJlX18oIjExSVoiKTskZXhwb3J0KCRleHBvcnQuRyskZXhwb3J0LkYqKHBhcnNlRmxvYXQhPSRwYXJzZUZsb2F0KSx7cGFyc2VGbG9hdDokcGFyc2VGbG9hdH0pfSx1M0dJOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlcix3aXRob3V0U3VmZml4LGtleSxpc0Z1dHVyZSl7dmFyIGZvcm1hdD17bTpbImVpbmUgTWludXRlIiwiZWluZXIgTWludXRlIl0saDpbImVpbmUgU3R1bmRlIiwiZWluZXIgU3R1bmRlIl0sZDpbImVpbiBUYWciLCJlaW5lbSBUYWciXSxkZDpbbnVtYmVyKyIgVGFnZSIsbnVtYmVyKyIgVGFnZW4iXSxNOlsiZWluIE1vbmF0IiwiZWluZW0gTW9uYXQiXSxNTTpbbnVtYmVyKyIgTW9uYXRlIixudW1iZXIrIiBNb25hdGVuIl0seTpbImVpbiBKYWhyIiwiZWluZW0gSmFociJdLHl5OltudW1iZXIrIiBKYWhyZSIsbnVtYmVyKyIgSmFocmVuIl19O3JldHVybiB3aXRob3V0U3VmZml4P2Zvcm1hdFtrZXldWzBdOmZvcm1hdFtrZXldWzFdfW1vbWVudC5kZWZpbmVMb2NhbGUoImRlLWNoIix7bW9udGhzOiJKYW51YXJfRmVicnVhcl9Nw6Ryel9BcHJpbF9NYWlfSnVuaV9KdWxpX0F1Z3VzdF9TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EZXplbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuLl9GZWIuX03DpHJ6X0Fwci5fTWFpX0p1bmlfSnVsaV9BdWcuX1NlcC5fT2t0Ll9Ob3YuX0Rlei4iLnNwbGl0KCJfIiksbW9udGhzUGFyc2VFeGFjdDohMCx3ZWVrZGF5czoiU29ubnRhZ19Nb250YWdfRGllbnN0YWdfTWl0dHdvY2hfRG9ubmVyc3RhZ19GcmVpdGFnX1NhbXN0YWciLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU29fTW9fRGlfTWlfRG9fRnJfU2EiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlNvX01vX0RpX01pX0RvX0ZyX1NhIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltoZXV0ZSB1bV0gTFQgW1Vocl0iLHNhbWVFbHNlOiJMIixuZXh0RGF5OiJbbW9yZ2VuIHVtXSBMVCBbVWhyXSIsbmV4dFdlZWs6ImRkZGQgW3VtXSBMVCBbVWhyXSIsbGFzdERheToiW2dlc3Rlcm4gdW1dIExUIFtVaHJdIixsYXN0V2VlazoiW2xldHp0ZW5dIGRkZGQgW3VtXSBMVCBbVWhyXSJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoidm9yICVzIixzOiJlaW4gcGFhciBTZWt1bmRlbiIsc3M6IiVkIFNla3VuZGVuIixtOnByb2Nlc3NSZWxhdGl2ZVRpbWUsbW06IiVkIE1pbnV0ZW4iLGg6cHJvY2Vzc1JlbGF0aXZlVGltZSxoaDoiJWQgU3R1bmRlbiIsZDpwcm9jZXNzUmVsYXRpdmVUaW1lLGRkOnByb2Nlc3NSZWxhdGl2ZVRpbWUsTTpwcm9jZXNzUmVsYXRpdmVUaW1lLE1NOnByb2Nlc3NSZWxhdGl2ZVRpbWUseTpwcm9jZXNzUmVsYXRpdmVUaW1lLHl5OnByb2Nlc3NSZWxhdGl2ZVRpbWV9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sdUF0ZDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgU2V0PV9fd2VicGFja19yZXF1aXJlX18oIlQzOWIiKSxmcm9tPV9fd2VicGFja19yZXF1aXJlX18oIlEzbmUiKSxtZXRhZGF0YT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJONmNKIiksYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLGdldFByb3RvdHlwZU9mPV9fd2VicGFja19yZXF1aXJlX18oIk9QM1kiKSxvcmRpbmFyeU93bk1ldGFkYXRhS2V5cz1tZXRhZGF0YS5rZXlzLHRvTWV0YUtleT1tZXRhZGF0YS5rZXksb3JkaW5hcnlNZXRhZGF0YUtleXM9ZnVuY3Rpb24oTyxQKXt2YXIgb0tleXM9b3JkaW5hcnlPd25NZXRhZGF0YUtleXMoTyxQKSxwYXJlbnQ9Z2V0UHJvdG90eXBlT2YoTyk7aWYobnVsbD09PXBhcmVudClyZXR1cm4gb0tleXM7dmFyIHBLZXlzPW9yZGluYXJ5TWV0YWRhdGFLZXlzKHBhcmVudCxQKTtyZXR1cm4gcEtleXMubGVuZ3RoP29LZXlzLmxlbmd0aD9mcm9tKG5ldyBTZXQob0tleXMuY29uY2F0KHBLZXlzKSkpOnBLZXlzOm9LZXlzfTttZXRhZGF0YS5leHAoe2dldE1ldGFkYXRhS2V5czpmdW5jdGlvbih0YXJnZXQpe3JldHVybiBvcmRpbmFyeU1ldGFkYXRhS2V5cyhhbk9iamVjdCh0YXJnZXQpLGFyZ3VtZW50cy5sZW5ndGg8Mj92b2lkIDA6dG9NZXRhS2V5KGFyZ3VtZW50c1sxXSkpfX0pfSx1RXllOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0Ijttb21lbnQuZGVmaW5lTG9jYWxlKCJubiIse21vbnRoczoiamFudWFyX2ZlYnJ1YXJfbWFyc19hcHJpbF9tYWlfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuX2ZlYl9tYXJfYXByX21haV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6InN1bmRhZ19tw6VuZGFnX3R5c2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbGF1cmRhZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJzdW5fbcOlbl90eXNfb25zX3Rvcl9mcmVfbGF1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzdV9tw6VfdHlfb25fdG9fZnJfbMO4Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIFtrbC5dIEg6bW0iLExMTEw6ImRkZGQgRC4gTU1NTSBZWVlZIFtrbC5dIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltJIGRhZyBrbG9ra2FdIExUIixuZXh0RGF5OiJbSSBtb3Jnb24ga2xva2thXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2tsb2trYV0gTFQiLGxhc3REYXk6IltJIGfDpXIga2xva2thXSBMVCIsbGFzdFdlZWs6IltGw7hyZWfDpWFuZGVdIGRkZGQgW2tsb2trYV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9tICVzIixwYXN0OiIlcyBzaWRhbiIsczoibm9rcmUgc2VrdW5kIixzczoiJWQgc2VrdW5kIixtOiJlaXQgbWludXR0IixtbToiJWQgbWludXR0IixoOiJlaW4gdGltZSIsaGg6IiVkIHRpbWFyIixkOiJlaW4gZGFnIixkZDoiJWQgZGFnYXIiLE06ImVpbiBtw6VuYWQiLE1NOiIlZCBtw6VuYWRlciIseToiZWl0IMOlciIseXk6IiVkIMOlciJ9LGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0sdU9QUzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ITB9LHVYd0k6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciB1bml0cz17c3M6InNla3VuZGVzX3Nla3VuZMSTbV9zZWt1bmRlX3Nla3VuZGVzIi5zcGxpdCgiXyIpLG06Im1pbsWrdGVzX21pbsWrdMSTbV9taW7Fq3RlX21pbsWrdGVzIi5zcGxpdCgiXyIpLG1tOiJtaW7Fq3Rlc19taW7Fq3TEk21fbWluxat0ZV9taW7Fq3RlcyIuc3BsaXQoIl8iKSxoOiJzdHVuZGFzX3N0dW5kxIFtX3N0dW5kYV9zdHVuZGFzIi5zcGxpdCgiXyIpLGhoOiJzdHVuZGFzX3N0dW5kxIFtX3N0dW5kYV9zdHVuZGFzIi5zcGxpdCgiXyIpLGQ6ImRpZW5hc19kaWVuxIFtX2RpZW5hX2RpZW5hcyIuc3BsaXQoIl8iKSxkZDoiZGllbmFzX2RpZW7EgW1fZGllbmFfZGllbmFzIi5zcGxpdCgiXyIpLE06Im3Ek25lxaFhX23Ek25lxaFpZW1fbcSTbmVzaXNfbcSTbmXFoWkiLnNwbGl0KCJfIiksTU06Im3Ek25lxaFhX23Ek25lxaFpZW1fbcSTbmVzaXNfbcSTbmXFoWkiLnNwbGl0KCJfIikseToiZ2FkYV9nYWRpZW1fZ2Fkc19nYWRpIi5zcGxpdCgiXyIpLHl5OiJnYWRhX2dhZGllbV9nYWRzX2dhZGkiLnNwbGl0KCJfIil9O2Z1bmN0aW9uIGZvcm1hdChmb3JtcyxudW1iZXIsd2l0aG91dFN1ZmZpeCl7cmV0dXJuIHdpdGhvdXRTdWZmaXg/bnVtYmVyJTEwPT0xJiZudW1iZXIlMTAwIT0xMT9mb3Jtc1syXTpmb3Jtc1szXTpudW1iZXIlMTA9PTEmJm51bWJlciUxMDAhPTExP2Zvcm1zWzBdOmZvcm1zWzFdfWZ1bmN0aW9uIHJlbGF0aXZlVGltZVdpdGhQbHVyYWwobnVtYmVyLHdpdGhvdXRTdWZmaXgsa2V5KXtyZXR1cm4gbnVtYmVyKyIgIitmb3JtYXQodW5pdHNba2V5XSxudW1iZXIsd2l0aG91dFN1ZmZpeCl9ZnVuY3Rpb24gcmVsYXRpdmVUaW1lV2l0aFNpbmd1bGFyKG51bWJlcix3aXRob3V0U3VmZml4LGtleSl7cmV0dXJuIGZvcm1hdCh1bml0c1trZXldLG51bWJlcix3aXRob3V0U3VmZml4KX1tb21lbnQuZGVmaW5lTG9jYWxlKCJsdiIse21vbnRoczoiamFudsSBcmlzX2ZlYnJ1xIFyaXNfbWFydHNfYXByxKtsaXNfbWFpanNfasWrbmlqc19qxatsaWpzX2F1Z3VzdHNfc2VwdGVtYnJpc19va3RvYnJpc19ub3ZlbWJyaXNfZGVjZW1icmlzIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW5fZmViX21hcl9hcHJfbWFpX2rFq25fasWrbF9hdWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJzdsSTdGRpZW5hX3Bpcm1kaWVuYV9vdHJkaWVuYV90cmXFoWRpZW5hX2NldHVydGRpZW5hX3BpZWt0ZGllbmFfc2VzdGRpZW5hIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN2X1BfT19UX0NfUGtfUyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3ZfUF9PX1RfQ19Qa19TIi5zcGxpdCgiXyIpLHdlZWtkYXlzUGFyc2VFeGFjdDohMCxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZLiIsTEw6IllZWVkuIFtnYWRhXSBELiBNTU1NIixMTEw6IllZWVkuIFtnYWRhXSBELiBNTU1NLCBISDptbSIsTExMTDoiWVlZWS4gW2dhZGFdIEQuIE1NTU0sIGRkZGQsIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvFoG9kaWVuIHB1bGtzdGVuXSBMVCIsbmV4dERheToiW1LEq3QgcHVsa3N0ZW5dIExUIixuZXh0V2VlazoiZGRkZCBbcHVsa3N0ZW5dIExUIixsYXN0RGF5OiJbVmFrYXIgcHVsa3N0ZW5dIExUIixsYXN0V2VlazoiW1BhZ8SBanXFocSBXSBkZGRkIFtwdWxrc3Rlbl0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InDEk2MgJXMiLHBhc3Q6InBpcm1zICVzIixzOmZ1bmN0aW9uKG51bWJlcix3aXRob3V0U3VmZml4KXtyZXR1cm4gd2l0aG91dFN1ZmZpeD8iZGHFvmFzIHNla3VuZGVzIjoiZGHFvsSBbSBzZWt1bmTEk20ifSxzczpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLG06cmVsYXRpdmVUaW1lV2l0aFNpbmd1bGFyLG1tOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwsaDpyZWxhdGl2ZVRpbWVXaXRoU2luZ3VsYXIsaGg6cmVsYXRpdmVUaW1lV2l0aFBsdXJhbCxkOnJlbGF0aXZlVGltZVdpdGhTaW5ndWxhcixkZDpyZWxhdGl2ZVRpbWVXaXRoUGx1cmFsLE06cmVsYXRpdmVUaW1lV2l0aFNpbmd1bGFyLE1NOnJlbGF0aXZlVGltZVdpdGhQbHVyYWwseTpyZWxhdGl2ZVRpbWVXaXRoU2luZ3VsYXIseXk6cmVsYXRpdmVUaW1lV2l0aFBsdXJhbH0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSx1YUhHOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksdG9PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiUy9qLyIpLHRvUHJpbWl0aXZlPV9fd2VicGFja19yZXF1aXJlX18oImFwbVQiKSxnZXRQcm90b3R5cGVPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJPUDNZIiksZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yPV9fd2VicGFja19yZXF1aXJlX18oIkVlbUgiKS5mO19fd2VicGFja19yZXF1aXJlX18oIm5oNGciKSYmJGV4cG9ydCgkZXhwb3J0LlArX193ZWJwYWNrX3JlcXVpcmVfXygieGJTbSIpLCJPYmplY3QiLHtfX2xvb2t1cEdldHRlcl9fOmZ1bmN0aW9uKFApe3ZhciBELE89dG9PYmplY3QodGhpcyksSz10b1ByaW1pdGl2ZShQLCEwKTtkb3tpZihEPWdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLEspKXJldHVybiBELmdldH13aGlsZShPPWdldFByb3RvdHlwZU9mKE8pKX19KX0sdWhaZDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksZ09QRD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJFZW1IIikuZixhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ5M3c5Iik7JGV4cG9ydCgkZXhwb3J0LlMsIlJlZmxlY3QiLHtkZWxldGVQcm9wZXJ0eTpmdW5jdGlvbih0YXJnZXQscHJvcGVydHlLZXkpe3ZhciBkZXNjPWdPUEQoYW5PYmplY3QodGFyZ2V0KSxwcm9wZXJ0eUtleSk7cmV0dXJuIShkZXNjJiYhZGVzYy5jb25maWd1cmFibGUpJiZkZWxldGUgdGFyZ2V0W3Byb3BlcnR5S2V5XX19KX0sdXBLeDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHRvT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIlMvai8iKSx0b0Fic29sdXRlSW5kZXg9X193ZWJwYWNrX3JlcXVpcmVfXygiZC9HYyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKTttb2R1bGUuZXhwb3J0cz1bXS5jb3B5V2l0aGlufHxmdW5jdGlvbih0YXJnZXQsc3RhcnQpe3ZhciBPPXRvT2JqZWN0KHRoaXMpLGxlbj10b0xlbmd0aChPLmxlbmd0aCksdG89dG9BYnNvbHV0ZUluZGV4KHRhcmdldCxsZW4pLGZyb209dG9BYnNvbHV0ZUluZGV4KHN0YXJ0LGxlbiksZW5kPTI8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMl06dm9pZCAwLGNvdW50PU1hdGgubWluKCh2b2lkIDA9PT1lbmQ/bGVuOnRvQWJzb2x1dGVJbmRleChlbmQsbGVuKSktZnJvbSxsZW4tdG8pLGluYz0xO2Zvcihmcm9tPHRvJiZ0bzxmcm9tK2NvdW50JiYoaW5jPS0xLGZyb20rPWNvdW50LTEsdG8rPWNvdW50LTEpOzA8Y291bnQtLTspZnJvbSBpbiBPP09bdG9dPU9bZnJvbV06ZGVsZXRlIE9bdG9dLHRvKz1pbmMsZnJvbSs9aW5jO3JldHVybiBPfX0sdkJQOTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgbmF2aWdhdG9yPV9fd2VicGFja19yZXF1aXJlX18oIjVUMlkiKS5uYXZpZ2F0b3I7bW9kdWxlLmV4cG9ydHM9bmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50fHwiIn0sdkRxaTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ6dVI0Iil9LHZLcmQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSxpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0IiksbmV3UHJvbWlzZUNhcGFiaWxpdHk9X193ZWJwYWNrX3JlcXVpcmVfXygicGJoRSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKEMseCl7aWYoYW5PYmplY3QoQyksaXNPYmplY3QoeCkmJnguY29uc3RydWN0b3I9PT1DKXJldHVybiB4O3ZhciBwcm9taXNlQ2FwYWJpbGl0eT1uZXdQcm9taXNlQ2FwYWJpbGl0eS5mKEMpO3JldHVybigwLHByb21pc2VDYXBhYmlsaXR5LnJlc29sdmUpKHgpLHByb21pc2VDYXBhYmlsaXR5LnByb21pc2V9fSx2ZEZqOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe19fd2VicGFja19yZXF1aXJlX18oInhxRmMiKSgiV2Vha1NldCIpfSx2aFBVOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCl7aWYobnVsbD09aXQpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIitpdCk7cmV0dXJuIGl0fX0sdnZtTzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgY29mPV9fd2VicGFja19yZXF1aXJlX18oIkxaV3QiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihpdCxtc2cpe2lmKCJudW1iZXIiIT10eXBlb2YgaXQmJiJOdW1iZXIiIT1jb2YoaXQpKXRocm93IFR5cGVFcnJvcihtc2cpO3JldHVybitpdH19LHZ3dUw6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIHBJRT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJOVjBrIiksY3JlYXRlRGVzYz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJycjFpIiksdG9JT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oIk5zTy8iKSx0b1ByaW1pdGl2ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJHOE1vIiksaGFzPV9fd2VicGFja19yZXF1aXJlX18oIkIrT1QiKSxJRThfRE9NX0RFRklORT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJlVXRGIiksZ09QRD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2V4cG9ydHMuZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJqbURIIik/Z09QRDpmdW5jdGlvbihPLFApe2lmKE89dG9JT2JqZWN0KE8pLFA9dG9QcmltaXRpdmUoUCwhMCksSUU4X0RPTV9ERUZJTkUpdHJ5e3JldHVybiBnT1BEKE8sUCl9Y2F0Y2goZSl7fWlmKGhhcyhPLFApKXJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sUCksT1tQXSl9fSx3MFZpOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgdXRpbHM9X193ZWJwYWNrX3JlcXVpcmVfXygieFRKKyIpLGlnbm9yZUR1cGxpY2F0ZU9mPVsiYWdlIiwiYXV0aG9yaXphdGlvbiIsImNvbnRlbnQtbGVuZ3RoIiwiY29udGVudC10eXBlIiwiZXRhZyIsImV4cGlyZXMiLCJmcm9tIiwiaG9zdCIsImlmLW1vZGlmaWVkLXNpbmNlIiwiaWYtdW5tb2RpZmllZC1zaW5jZSIsImxhc3QtbW9kaWZpZWQiLCJsb2NhdGlvbiIsIm1heC1mb3J3YXJkcyIsInByb3h5LWF1dGhvcml6YXRpb24iLCJyZWZlcmVyIiwicmV0cnktYWZ0ZXIiLCJ1c2VyLWFnZW50Il07bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oaGVhZGVycyl7dmFyIGtleSx2YWwsaSxwYXJzZWQ9e307cmV0dXJuIGhlYWRlcnMmJnV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgiXG4iKSxmdW5jdGlvbihsaW5lKXtpZihpPWxpbmUuaW5kZXhPZigiOiIpLGtleT11dGlscy50cmltKGxpbmUuc3Vic3RyKDAsaSkpLnRvTG93ZXJDYXNlKCksdmFsPXV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSsxKSksa2V5KXtpZihwYXJzZWRba2V5XSYmMDw9aWdub3JlRHVwbGljYXRlT2YuaW5kZXhPZihrZXkpKXJldHVybjtwYXJzZWRba2V5XT0ic2V0LWNvb2tpZSI9PT1rZXk/KHBhcnNlZFtrZXldP3BhcnNlZFtrZXldOltdKS5jb25jYXQoW3ZhbF0pOnBhcnNlZFtrZXldP3BhcnNlZFtrZXldKyIsICIrdmFsOnZhbH19KSxwYXJzZWR9fSx3MmE1OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciB0b0lPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiYUNGaiIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKSx0b0Fic29sdXRlSW5kZXg9X193ZWJwYWNrX3JlcXVpcmVfXygiZC9HYyIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKElTX0lOQ0xVREVTKXtyZXR1cm4gZnVuY3Rpb24oJHRoaXMsZWwsZnJvbUluZGV4KXt2YXIgdmFsdWUsTz10b0lPYmplY3QoJHRoaXMpLGxlbmd0aD10b0xlbmd0aChPLmxlbmd0aCksaW5kZXg9dG9BYnNvbHV0ZUluZGV4KGZyb21JbmRleCxsZW5ndGgpO2lmKElTX0lOQ0xVREVTJiZlbCE9ZWwpe2Zvcig7aW5kZXg8bGVuZ3RoOylpZigodmFsdWU9T1tpbmRleCsrXSkhPXZhbHVlKXJldHVybiEwfWVsc2UgZm9yKDtpbmRleDxsZW5ndGg7aW5kZXgrKylpZigoSVNfSU5DTFVERVN8fGluZGV4IGluIE8pJiZPW2luZGV4XT09PWVsKXJldHVybiBJU19JTkNMVURFU3x8aW5kZXh8fDA7cmV0dXJuIUlTX0lOQ0xVREVTJiYtMX19fSwidzJkKyI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBhZGRUb1Vuc2NvcGFibGVzPV9fd2VicGFja19yZXF1aXJlX18oImhEYW0iKSxzdGVwPV9fd2VicGFja19yZXF1aXJlX18oIlVPMzkiKSxJdGVyYXRvcnM9X193ZWJwYWNrX3JlcXVpcmVfXygiU0J1RSIpLHRvSU9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJOc08vIik7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiTVBGcCIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oaXRlcmF0ZWQsa2luZCl7dGhpcy5fdD10b0lPYmplY3QoaXRlcmF0ZWQpLHRoaXMuX2k9MCx0aGlzLl9rPWtpbmR9LGZ1bmN0aW9uKCl7dmFyIE89dGhpcy5fdCxraW5kPXRoaXMuX2ssaW5kZXg9dGhpcy5faSsrO3JldHVybiFPfHxpbmRleD49Ty5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLHN0ZXAoMSkpOnN0ZXAoMCwia2V5cyI9PWtpbmQ/aW5kZXg6InZhbHVlcyI9PWtpbmQ/T1tpbmRleF06W2luZGV4LE9baW5kZXhdXSl9LCJ2YWx1ZXMiKSxJdGVyYXRvcnMuQXJndW1lbnRzPUl0ZXJhdG9ycy5BcnJheSxhZGRUb1Vuc2NvcGFibGVzKCJrZXlzIiksYWRkVG9VbnNjb3BhYmxlcygidmFsdWVzIiksYWRkVG9VbnNjb3BhYmxlcygiZW50cmllcyIpfSx3NkdPOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAka2V5cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1dk1WIiksZW51bUJ1Z0tleXM9X193ZWJwYWNrX3JlcXVpcmVfXygiRnBIYSIpO21vZHVsZS5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbihPKXtyZXR1cm4gJGtleXMoTyxlbnVtQnVnS2V5cyl9fSx3Q3NSOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgd2Vhaz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJaRDY3IiksdmFsaWRhdGU9X193ZWJwYWNrX3JlcXVpcmVfXygiczVxWSIpO19fd2VicGFja19yZXF1aXJlX18oIjRMaUQiKSgiV2Vha1NldCIsZnVuY3Rpb24oZ2V0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZ2V0KHRoaXMsMDxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2FkZDpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHdlYWsuZGVmKHZhbGlkYXRlKHRoaXMsIldlYWtTZXQiKSx2YWx1ZSwhMCl9fSx3ZWFrLCExLCEwKX0sd0ppSjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXttb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCIxSzhwIil9LHdRazk6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoInR6bSIse21vbnRoczoi4rWJ4rWP4rWP4rSw4rWi4rWUX+K0seK1leK0sOK1ouK1lV/itY7itLDitZXitZpf4rWJ4rSx4rWU4rWJ4rWUX+K1juK0sOK1ouK1ouK1k1/itaLitZPitY/itaLitZNf4rWi4rWT4rWN4rWi4rWT4rWjX+K1luK1k+K1m+K1nF/itZvitZPitZzitLDitY/itLHitYnitZRf4rS94rWf4rWT4rSx4rWVX+K1j+K1k+K1oeK0sOK1j+K0seK1ieK1lF/itLfitZPitYritY/itLHitYnitZQiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IuK1ieK1j+K1j+K0sOK1ouK1lF/itLHitZXitLDitaLitZVf4rWO4rSw4rWV4rWaX+K1ieK0seK1lOK1ieK1lF/itY7itLDitaLitaLitZNf4rWi4rWT4rWP4rWi4rWTX+K1ouK1k+K1jeK1ouK1k+K1o1/itZbitZPitZvitZxf4rWb4rWT4rWc4rSw4rWP4rSx4rWJ4rWUX+K0veK1n+K1k+K0seK1lV/itY/itZPitaHitLDitY/itLHitYnitZRf4rS34rWT4rWK4rWP4rSx4rWJ4rWUIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLitLDitZnitLDitY7itLDitZlf4rSw4rWi4rWP4rSw4rWZX+K0sOK1meK1ieK1j+K0sOK1mV/itLDitL3itZTitLDitZlf4rSw4rS94rWh4rSw4rWZX+K0sOK1meK1ieK1juK1oeK0sOK1mV/itLDitZnitYnitLnitaLitLDitZkiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi4rSw4rWZ4rSw4rWO4rSw4rWZX+K0sOK1ouK1j+K0sOK1mV/itLDitZnitYnitY/itLDitZlf4rSw4rS94rWU4rSw4rWZX+K0sOK0veK1oeK0sOK1mV/itLDitZnitYnitY7itaHitLDitZlf4rSw4rWZ4rWJ4rS54rWi4rSw4rWZIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLitLDitZnitLDitY7itLDitZlf4rSw4rWi4rWP4rSw4rWZX+K0sOK1meK1ieK1j+K0sOK1mV/itLDitL3itZTitLDitZlf4rSw4rS94rWh4rSw4rWZX+K0sOK1meK1ieK1juK1oeK0sOK1mV/itLDitZnitYnitLnitaLitLDitZkiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvitLDitZnitLfitYUg4rS0XSBMVCIsbmV4dERheToiW+K0sOK1meK0veK0sCDitLRdIExUIixuZXh0V2VlazoiZGRkZCBb4rS0XSBMVCIsbGFzdERheToiW+K0sOK1muK0sOK1j+K1nCDitLRdIExUIixsYXN0V2VlazoiZGRkZCBb4rS0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi4rS34rSw4rS34rWFIOK1mSDitaLitLDitY8gJXMiLHBhc3Q6IuK1ouK0sOK1jyAlcyIsczoi4rWJ4rWO4rWJ4rS9IixzczoiJWQg4rWJ4rWO4rWJ4rS9IixtOiLitY7itYnitY/itZPitLoiLG1tOiIlZCDitY7itYnitY/itZPitLoiLGg6IuK1meK0sOK1hOK0sCIsaGg6IiVkIOK1nOK0sOK1meK1meK0sOK1hOK1ieK1jyIsZDoi4rSw4rWZ4rWZIixkZDoiJWQgb+K1meK1meK0sOK1jyIsTToi4rSw4rWib+K1k+K1lCIsTU06IiVkIOK1ieK1ouK1ouK1ieK1lOK1jyIseToi4rSw4rWZ4rSz4rSw4rWZIix5eToiJWQg4rWJ4rWZ4rSz4rSw4rWZ4rWPIn0sd2Vlazp7ZG93OjYsZG95OjEyfX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSwid2QvUiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7KGZ1bmN0aW9uKG1vZHVsZSl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGhvb2tDYWxsYmFjayxzb21lO2Z1bmN0aW9uIGhvb2tzKCl7cmV0dXJuIGhvb2tDYWxsYmFjay5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gaXNBcnJheShpbnB1dCl7cmV0dXJuIGlucHV0IGluc3RhbmNlb2YgQXJyYXl8fCJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpfWZ1bmN0aW9uIGlzT2JqZWN0KGlucHV0KXtyZXR1cm4gbnVsbCE9aW5wdXQmJiJbb2JqZWN0IE9iamVjdF0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KX1mdW5jdGlvbiBpc1VuZGVmaW5lZChpbnB1dCl7cmV0dXJuIHZvaWQgMD09PWlucHV0fWZ1bmN0aW9uIGlzTnVtYmVyKGlucHV0KXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGlucHV0fHwiW29iamVjdCBOdW1iZXJdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCl9ZnVuY3Rpb24gaXNEYXRlKGlucHV0KXtyZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBEYXRlfHwiW29iamVjdCBEYXRlXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpfWZ1bmN0aW9uIG1hcChhcnIsZm4pe3ZhciBpLHJlcz1bXTtmb3IoaT0wO2k8YXJyLmxlbmd0aDsrK2kpcmVzLnB1c2goZm4oYXJyW2ldLGkpKTtyZXR1cm4gcmVzfWZ1bmN0aW9uIGhhc093blByb3AoYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYil9ZnVuY3Rpb24gZXh0ZW5kKGEsYil7Zm9yKHZhciBpIGluIGIpaGFzT3duUHJvcChiLGkpJiYoYVtpXT1iW2ldKTtyZXR1cm4gaGFzT3duUHJvcChiLCJ0b1N0cmluZyIpJiYoYS50b1N0cmluZz1iLnRvU3RyaW5nKSxoYXNPd25Qcm9wKGIsInZhbHVlT2YiKSYmKGEudmFsdWVPZj1iLnZhbHVlT2YpLGF9ZnVuY3Rpb24gY3JlYXRlVVRDKGlucHV0LGZvcm1hdCxsb2NhbGUsc3RyaWN0KXtyZXR1cm4gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCxmb3JtYXQsbG9jYWxlLHN0cmljdCwhMCkudXRjKCl9ZnVuY3Rpb24gZ2V0UGFyc2luZ0ZsYWdzKG0pe3JldHVybiBudWxsPT1tLl9wZiYmKG0uX3BmPXtlbXB0eTohMSx1bnVzZWRUb2tlbnM6W10sdW51c2VkSW5wdXQ6W10sb3ZlcmZsb3c6LTIsY2hhcnNMZWZ0T3ZlcjowLG51bGxJbnB1dDohMSxpbnZhbGlkTW9udGg6bnVsbCxpbnZhbGlkRm9ybWF0OiExLHVzZXJJbnZhbGlkYXRlZDohMSxpc286ITEscGFyc2VkRGF0ZVBhcnRzOltdLG1lcmlkaWVtOm51bGwscmZjMjgyMjohMSx3ZWVrZGF5TWlzbWF0Y2g6ITF9KSxtLl9wZn1mdW5jdGlvbiBpc1ZhbGlkKG0pe2lmKG51bGw9PW0uX2lzVmFsaWQpe3ZhciBmbGFncz1nZXRQYXJzaW5nRmxhZ3MobSkscGFyc2VkUGFydHM9c29tZS5jYWxsKGZsYWdzLnBhcnNlZERhdGVQYXJ0cyxmdW5jdGlvbihpKXtyZXR1cm4gbnVsbCE9aX0pLGlzTm93VmFsaWQ9IWlzTmFOKG0uX2QuZ2V0VGltZSgpKSYmZmxhZ3Mub3ZlcmZsb3c8MCYmIWZsYWdzLmVtcHR5JiYhZmxhZ3MuaW52YWxpZE1vbnRoJiYhZmxhZ3MuaW52YWxpZFdlZWtkYXkmJiFmbGFncy53ZWVrZGF5TWlzbWF0Y2gmJiFmbGFncy5udWxsSW5wdXQmJiFmbGFncy5pbnZhbGlkRm9ybWF0JiYhZmxhZ3MudXNlckludmFsaWRhdGVkJiYoIWZsYWdzLm1lcmlkaWVtfHxmbGFncy5tZXJpZGllbSYmcGFyc2VkUGFydHMpO2lmKG0uX3N0cmljdCYmKGlzTm93VmFsaWQ9aXNOb3dWYWxpZCYmMD09PWZsYWdzLmNoYXJzTGVmdE92ZXImJjA9PT1mbGFncy51bnVzZWRUb2tlbnMubGVuZ3RoJiZ2b2lkIDA9PT1mbGFncy5iaWdIb3VyKSxudWxsIT1PYmplY3QuaXNGcm96ZW4mJk9iamVjdC5pc0Zyb3plbihtKSlyZXR1cm4gaXNOb3dWYWxpZDttLl9pc1ZhbGlkPWlzTm93VmFsaWR9cmV0dXJuIG0uX2lzVmFsaWR9ZnVuY3Rpb24gY3JlYXRlSW52YWxpZChmbGFncyl7dmFyIG09Y3JlYXRlVVRDKE5hTik7cmV0dXJuIG51bGwhPWZsYWdzP2V4dGVuZChnZXRQYXJzaW5nRmxhZ3MobSksZmxhZ3MpOmdldFBhcnNpbmdGbGFncyhtKS51c2VySW52YWxpZGF0ZWQ9ITAsbX1zb21lPUFycmF5LnByb3RvdHlwZS5zb21lP0FycmF5LnByb3RvdHlwZS5zb21lOmZ1bmN0aW9uKGZ1bil7Zm9yKHZhciB0PU9iamVjdCh0aGlzKSxsZW49dC5sZW5ndGg+Pj4wLGk9MDtpPGxlbjtpKyspaWYoaSBpbiB0JiZmdW4uY2FsbCh0aGlzLHRbaV0saSx0KSlyZXR1cm4hMDtyZXR1cm4hMX07dmFyIG1vbWVudFByb3BlcnRpZXM9aG9va3MubW9tZW50UHJvcGVydGllcz1bXTtmdW5jdGlvbiBjb3B5Q29uZmlnKHRvLGZyb20pe3ZhciBpLHByb3AsdmFsO2lmKGlzVW5kZWZpbmVkKGZyb20uX2lzQU1vbWVudE9iamVjdCl8fCh0by5faXNBTW9tZW50T2JqZWN0PWZyb20uX2lzQU1vbWVudE9iamVjdCksaXNVbmRlZmluZWQoZnJvbS5faSl8fCh0by5faT1mcm9tLl9pKSxpc1VuZGVmaW5lZChmcm9tLl9mKXx8KHRvLl9mPWZyb20uX2YpLGlzVW5kZWZpbmVkKGZyb20uX2wpfHwodG8uX2w9ZnJvbS5fbCksaXNVbmRlZmluZWQoZnJvbS5fc3RyaWN0KXx8KHRvLl9zdHJpY3Q9ZnJvbS5fc3RyaWN0KSxpc1VuZGVmaW5lZChmcm9tLl90em0pfHwodG8uX3R6bT1mcm9tLl90em0pLGlzVW5kZWZpbmVkKGZyb20uX2lzVVRDKXx8KHRvLl9pc1VUQz1mcm9tLl9pc1VUQyksaXNVbmRlZmluZWQoZnJvbS5fb2Zmc2V0KXx8KHRvLl9vZmZzZXQ9ZnJvbS5fb2Zmc2V0KSxpc1VuZGVmaW5lZChmcm9tLl9wZil8fCh0by5fcGY9Z2V0UGFyc2luZ0ZsYWdzKGZyb20pKSxpc1VuZGVmaW5lZChmcm9tLl9sb2NhbGUpfHwodG8uX2xvY2FsZT1mcm9tLl9sb2NhbGUpLDA8bW9tZW50UHJvcGVydGllcy5sZW5ndGgpZm9yKGk9MDtpPG1vbWVudFByb3BlcnRpZXMubGVuZ3RoO2krKylwcm9wPW1vbWVudFByb3BlcnRpZXNbaV0saXNVbmRlZmluZWQodmFsPWZyb21bcHJvcF0pfHwodG9bcHJvcF09dmFsKTtyZXR1cm4gdG99dmFyIHVwZGF0ZUluUHJvZ3Jlc3M9ITE7ZnVuY3Rpb24gTW9tZW50KGNvbmZpZyl7Y29weUNvbmZpZyh0aGlzLGNvbmZpZyksdGhpcy5fZD1uZXcgRGF0ZShudWxsIT1jb25maWcuX2Q/Y29uZmlnLl9kLmdldFRpbWUoKTpOYU4pLHRoaXMuaXNWYWxpZCgpfHwodGhpcy5fZD1uZXcgRGF0ZShOYU4pKSwhMT09PXVwZGF0ZUluUHJvZ3Jlc3MmJih1cGRhdGVJblByb2dyZXNzPSEwLGhvb2tzLnVwZGF0ZU9mZnNldCh0aGlzKSx1cGRhdGVJblByb2dyZXNzPSExKX1mdW5jdGlvbiBpc01vbWVudChvYmope3JldHVybiBvYmogaW5zdGFuY2VvZiBNb21lbnR8fG51bGwhPW9iaiYmbnVsbCE9b2JqLl9pc0FNb21lbnRPYmplY3R9ZnVuY3Rpb24gYWJzRmxvb3IobnVtYmVyKXtyZXR1cm4gbnVtYmVyPDA/TWF0aC5jZWlsKG51bWJlcil8fDA6TWF0aC5mbG9vcihudW1iZXIpfWZ1bmN0aW9uIHRvSW50KGFyZ3VtZW50Rm9yQ29lcmNpb24pe3ZhciBjb2VyY2VkTnVtYmVyPSthcmd1bWVudEZvckNvZXJjaW9uLHZhbHVlPTA7cmV0dXJuIDAhPT1jb2VyY2VkTnVtYmVyJiZpc0Zpbml0ZShjb2VyY2VkTnVtYmVyKSYmKHZhbHVlPWFic0Zsb29yKGNvZXJjZWROdW1iZXIpKSx2YWx1ZX1mdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycmF5MSxhcnJheTIsZG9udENvbnZlcnQpe3ZhciBpLGxlbj1NYXRoLm1pbihhcnJheTEubGVuZ3RoLGFycmF5Mi5sZW5ndGgpLGxlbmd0aERpZmY9TWF0aC5hYnMoYXJyYXkxLmxlbmd0aC1hcnJheTIubGVuZ3RoKSxkaWZmcz0wO2ZvcihpPTA7aTxsZW47aSsrKShkb250Q29udmVydCYmYXJyYXkxW2ldIT09YXJyYXkyW2ldfHwhZG9udENvbnZlcnQmJnRvSW50KGFycmF5MVtpXSkhPT10b0ludChhcnJheTJbaV0pKSYmZGlmZnMrKztyZXR1cm4gZGlmZnMrbGVuZ3RoRGlmZn1mdW5jdGlvbiB3YXJuKG1zZyl7ITE9PT1ob29rcy5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3MmJiJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oIkRlcHJlY2F0aW9uIHdhcm5pbmc6ICIrbXNnKX1mdW5jdGlvbiBkZXByZWNhdGUobXNnLGZuKXt2YXIgZmlyc3RUaW1lPSEwO3JldHVybiBleHRlbmQoZnVuY3Rpb24oKXtpZihudWxsIT1ob29rcy5kZXByZWNhdGlvbkhhbmRsZXImJmhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlcihudWxsLG1zZyksZmlyc3RUaW1lKXtmb3IodmFyIGFyZyxhcmdzPVtdLGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXtpZihhcmc9IiIsIm9iamVjdCI9PXR5cGVvZiBhcmd1bWVudHNbaV0pe2Zvcih2YXIga2V5IGluIGFyZys9IlxuWyIraSsiXSAiLGFyZ3VtZW50c1swXSlhcmcrPWtleSsiOiAiK2FyZ3VtZW50c1swXVtrZXldKyIsICI7YXJnPWFyZy5zbGljZSgwLC0yKX1lbHNlIGFyZz1hcmd1bWVudHNbaV07YXJncy5wdXNoKGFyZyl9d2Fybihtc2crIlxuQXJndW1lbnRzOiAiK0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpLmpvaW4oIiIpKyJcbiIrKG5ldyBFcnJvcikuc3RhY2spLGZpcnN0VGltZT0hMX1yZXR1cm4gZm4uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxmbil9dmFyIGtleXMsZGVwcmVjYXRpb25zPXt9O2Z1bmN0aW9uIGRlcHJlY2F0ZVNpbXBsZShuYW1lLG1zZyl7bnVsbCE9aG9va3MuZGVwcmVjYXRpb25IYW5kbGVyJiZob29rcy5kZXByZWNhdGlvbkhhbmRsZXIobmFtZSxtc2cpLGRlcHJlY2F0aW9uc1tuYW1lXXx8KHdhcm4obXNnKSxkZXByZWNhdGlvbnNbbmFtZV09ITApfWZ1bmN0aW9uIGlzRnVuY3Rpb24oaW5wdXQpe3JldHVybiBpbnB1dCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHwiW29iamVjdCBGdW5jdGlvbl0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KX1mdW5jdGlvbiBtZXJnZUNvbmZpZ3MocGFyZW50Q29uZmlnLGNoaWxkQ29uZmlnKXt2YXIgcHJvcCxyZXM9ZXh0ZW5kKHt9LHBhcmVudENvbmZpZyk7Zm9yKHByb3AgaW4gY2hpbGRDb25maWcpaGFzT3duUHJvcChjaGlsZENvbmZpZyxwcm9wKSYmKGlzT2JqZWN0KHBhcmVudENvbmZpZ1twcm9wXSkmJmlzT2JqZWN0KGNoaWxkQ29uZmlnW3Byb3BdKT8ocmVzW3Byb3BdPXt9LGV4dGVuZChyZXNbcHJvcF0scGFyZW50Q29uZmlnW3Byb3BdKSxleHRlbmQocmVzW3Byb3BdLGNoaWxkQ29uZmlnW3Byb3BdKSk6bnVsbCE9Y2hpbGRDb25maWdbcHJvcF0/cmVzW3Byb3BdPWNoaWxkQ29uZmlnW3Byb3BdOmRlbGV0ZSByZXNbcHJvcF0pO2Zvcihwcm9wIGluIHBhcmVudENvbmZpZyloYXNPd25Qcm9wKHBhcmVudENvbmZpZyxwcm9wKSYmIWhhc093blByb3AoY2hpbGRDb25maWcscHJvcCkmJmlzT2JqZWN0KHBhcmVudENvbmZpZ1twcm9wXSkmJihyZXNbcHJvcF09ZXh0ZW5kKHt9LHJlc1twcm9wXSkpO3JldHVybiByZXN9ZnVuY3Rpb24gTG9jYWxlKGNvbmZpZyl7bnVsbCE9Y29uZmlnJiZ0aGlzLnNldChjb25maWcpfWhvb2tzLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncz0hMSxob29rcy5kZXByZWNhdGlvbkhhbmRsZXI9bnVsbCxrZXlzPU9iamVjdC5rZXlzP09iamVjdC5rZXlzOmZ1bmN0aW9uKG9iail7dmFyIGkscmVzPVtdO2ZvcihpIGluIG9iailoYXNPd25Qcm9wKG9iaixpKSYmcmVzLnB1c2goaSk7cmV0dXJuIHJlc307dmFyIGFsaWFzZXM9e307ZnVuY3Rpb24gYWRkVW5pdEFsaWFzKHVuaXQsc2hvcnRoYW5kKXt2YXIgbG93ZXJDYXNlPXVuaXQudG9Mb3dlckNhc2UoKTthbGlhc2VzW2xvd2VyQ2FzZV09YWxpYXNlc1tsb3dlckNhc2UrInMiXT1hbGlhc2VzW3Nob3J0aGFuZF09dW5pdH1mdW5jdGlvbiBub3JtYWxpemVVbml0cyh1bml0cyl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB1bml0cz9hbGlhc2VzW3VuaXRzXXx8YWxpYXNlc1t1bml0cy50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gbm9ybWFsaXplT2JqZWN0VW5pdHMoaW5wdXRPYmplY3Qpe3ZhciBub3JtYWxpemVkUHJvcCxwcm9wLG5vcm1hbGl6ZWRJbnB1dD17fTtmb3IocHJvcCBpbiBpbnB1dE9iamVjdCloYXNPd25Qcm9wKGlucHV0T2JqZWN0LHByb3ApJiYobm9ybWFsaXplZFByb3A9bm9ybWFsaXplVW5pdHMocHJvcCkpJiYobm9ybWFsaXplZElucHV0W25vcm1hbGl6ZWRQcm9wXT1pbnB1dE9iamVjdFtwcm9wXSk7cmV0dXJuIG5vcm1hbGl6ZWRJbnB1dH12YXIgcHJpb3JpdGllcz17fTtmdW5jdGlvbiBhZGRVbml0UHJpb3JpdHkodW5pdCxwcmlvcml0eSl7cHJpb3JpdGllc1t1bml0XT1wcmlvcml0eX1mdW5jdGlvbiBnZXRQcmlvcml0aXplZFVuaXRzKHVuaXRzT2JqKXt2YXIgdW5pdHM9W107Zm9yKHZhciB1IGluIHVuaXRzT2JqKXVuaXRzLnB1c2goe3VuaXQ6dSxwcmlvcml0eTpwcmlvcml0aWVzW3VdfSk7cmV0dXJuIHVuaXRzLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5wcmlvcml0eS1iLnByaW9yaXR5fSksdW5pdHN9ZnVuY3Rpb24gemVyb0ZpbGwobnVtYmVyLHRhcmdldExlbmd0aCxmb3JjZVNpZ24pe3ZhciBhYnNOdW1iZXI9IiIrTWF0aC5hYnMobnVtYmVyKSx6ZXJvc1RvRmlsbD10YXJnZXRMZW5ndGgtYWJzTnVtYmVyLmxlbmd0aCxzaWduPTA8PW51bWJlcjtyZXR1cm4oc2lnbj9mb3JjZVNpZ24/IisiOiIiOiItIikrTWF0aC5wb3coMTAsTWF0aC5tYXgoMCx6ZXJvc1RvRmlsbCkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpK2Fic051bWJlcn12YXIgZm9ybWF0dGluZ1Rva2Vucz0vKFxbW15cW10qXF0pfChcXCk/KFtIaF1tbShzcyk/fE1vfE1NP00/TT98RG98REREb3xERD9EP0Q/fGRkZD9kP3xkbz98d1tvfHddP3xXW298V10/fFFvP3xZWVlZWVl8WVlZWVl8WVlZWXxZWXxnZyhnZ2c/KT98R0coR0dHPyk/fGV8RXxhfEF8aGg/fEhIP3xraz98bW0/fHNzP3xTezEsOX18eHxYfHp6P3xaWj98LikvZyxsb2NhbEZvcm1hdHRpbmdUb2tlbnM9LyhcW1teXFtdKlxdKXwoXFwpPyhMVFN8TFR8TEw/TD9MP3xsezEsNH0pL2csZm9ybWF0RnVuY3Rpb25zPXt9LGZvcm1hdFRva2VuRnVuY3Rpb25zPXt9O2Z1bmN0aW9uIGFkZEZvcm1hdFRva2VuKHRva2VuLHBhZGRlZCxvcmRpbmFsLGNhbGxiYWNrKXt2YXIgZnVuYz1jYWxsYmFjazsic3RyaW5nIj09dHlwZW9mIGNhbGxiYWNrJiYoZnVuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzW2NhbGxiYWNrXSgpfSksdG9rZW4mJihmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl09ZnVuYykscGFkZGVkJiYoZm9ybWF0VG9rZW5GdW5jdGlvbnNbcGFkZGVkWzBdXT1mdW5jdGlvbigpe3JldHVybiB6ZXJvRmlsbChmdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxwYWRkZWRbMV0scGFkZGVkWzJdKX0pLG9yZGluYWwmJihmb3JtYXRUb2tlbkZ1bmN0aW9uc1tvcmRpbmFsXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5vcmRpbmFsKGZ1bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRva2VuKX0pfWZ1bmN0aW9uIGZvcm1hdE1vbWVudChtLGZvcm1hdCl7cmV0dXJuIG0uaXNWYWxpZCgpPyhmb3JtYXQ9ZXhwYW5kRm9ybWF0KGZvcm1hdCxtLmxvY2FsZURhdGEoKSksZm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF09Zm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF18fGZ1bmN0aW9uKGZvcm1hdCl7dmFyIGksbGVuZ3RoLGlucHV0LGFycmF5PWZvcm1hdC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKTtmb3IoaT0wLGxlbmd0aD1hcnJheS5sZW5ndGg7aTxsZW5ndGg7aSsrKWZvcm1hdFRva2VuRnVuY3Rpb25zW2FycmF5W2ldXT9hcnJheVtpXT1mb3JtYXRUb2tlbkZ1bmN0aW9uc1thcnJheVtpXV06YXJyYXlbaV09KGlucHV0PWFycmF5W2ldKS5tYXRjaCgvXFtbXHNcU10vKT9pbnB1dC5yZXBsYWNlKC9eXFt8XF0kL2csIiIpOmlucHV0LnJlcGxhY2UoL1xcL2csIiIpO3JldHVybiBmdW5jdGlvbihtb20pe3ZhciBpLG91dHB1dD0iIjtmb3IoaT0wO2k8bGVuZ3RoO2krKylvdXRwdXQrPWlzRnVuY3Rpb24oYXJyYXlbaV0pP2FycmF5W2ldLmNhbGwobW9tLGZvcm1hdCk6YXJyYXlbaV07cmV0dXJuIG91dHB1dH19KGZvcm1hdCksZm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF0obSkpOm0ubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCl9ZnVuY3Rpb24gZXhwYW5kRm9ybWF0KGZvcm1hdCxsb2NhbGUpe3ZhciBpPTU7ZnVuY3Rpb24gcmVwbGFjZUxvbmdEYXRlRm9ybWF0VG9rZW5zKGlucHV0KXtyZXR1cm4gbG9jYWxlLmxvbmdEYXRlRm9ybWF0KGlucHV0KXx8aW5wdXR9Zm9yKGxvY2FsRm9ybWF0dGluZ1Rva2Vucy5sYXN0SW5kZXg9MDswPD1pJiZsb2NhbEZvcm1hdHRpbmdUb2tlbnMudGVzdChmb3JtYXQpOylmb3JtYXQ9Zm9ybWF0LnJlcGxhY2UobG9jYWxGb3JtYXR0aW5nVG9rZW5zLHJlcGxhY2VMb25nRGF0ZUZvcm1hdFRva2VucyksbG9jYWxGb3JtYXR0aW5nVG9rZW5zLmxhc3RJbmRleD0wLGktPTE7cmV0dXJuIGZvcm1hdH12YXIgbWF0Y2gxPS9cZC8sbWF0Y2gyPS9cZFxkLyxtYXRjaDM9L1xkezN9LyxtYXRjaDQ9L1xkezR9LyxtYXRjaDY9L1srLV0/XGR7Nn0vLG1hdGNoMXRvMj0vXGRcZD8vLG1hdGNoM3RvND0vXGRcZFxkXGQ/LyxtYXRjaDV0bzY9L1xkXGRcZFxkXGRcZD8vLG1hdGNoMXRvMz0vXGR7MSwzfS8sbWF0Y2gxdG80PS9cZHsxLDR9LyxtYXRjaDF0bzY9L1srLV0/XGR7MSw2fS8sbWF0Y2hVbnNpZ25lZD0vXGQrLyxtYXRjaFNpZ25lZD0vWystXT9cZCsvLG1hdGNoT2Zmc2V0PS9afFsrLV1cZFxkOj9cZFxkL2dpLG1hdGNoU2hvcnRPZmZzZXQ9L1p8WystXVxkXGQoPzo6P1xkXGQpPy9naSxtYXRjaFdvcmQ9L1swLTldezAsMjU2fVsnYS16XHUwMEEwLVx1MDVGRlx1MDcwMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkYwN1x1RkYxMC1cdUZGRUZdezEsMjU2fXxbXHUwNjAwLVx1MDZGRlwvXXsxLDI1Nn0oXHMqP1tcdTA2MDAtXHUwNkZGXXsxLDI1Nn0pezEsMn0vaSxyZWdleGVzPXt9O2Z1bmN0aW9uIGFkZFJlZ2V4VG9rZW4odG9rZW4scmVnZXgsc3RyaWN0UmVnZXgpe3JlZ2V4ZXNbdG9rZW5dPWlzRnVuY3Rpb24ocmVnZXgpP3JlZ2V4OmZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZURhdGEpe3JldHVybiBpc1N0cmljdCYmc3RyaWN0UmVnZXg/c3RyaWN0UmVnZXg6cmVnZXh9fWZ1bmN0aW9uIGdldFBhcnNlUmVnZXhGb3JUb2tlbih0b2tlbixjb25maWcpe3JldHVybiBoYXNPd25Qcm9wKHJlZ2V4ZXMsdG9rZW4pP3JlZ2V4ZXNbdG9rZW5dKGNvbmZpZy5fc3RyaWN0LGNvbmZpZy5fbG9jYWxlKTpuZXcgUmVnRXhwKHJlZ2V4RXNjYXBlKHRva2VuLnJlcGxhY2UoIlxcIiwiIikucmVwbGFjZSgvXFwoXFspfFxcKFxdKXxcWyhbXlxdXFtdKilcXXxcXCguKS9nLGZ1bmN0aW9uKG1hdGNoZWQscDEscDIscDMscDQpe3JldHVybiBwMXx8cDJ8fHAzfHxwNH0pKSl9ZnVuY3Rpb24gcmVnZXhFc2NhcGUocyl7cmV0dXJuIHMucmVwbGFjZSgvWy1cL1xcXiQqKz8uKCl8W1xde31dL2csIlxcJCYiKX12YXIgdG9rZW5zPXt9O2Z1bmN0aW9uIGFkZFBhcnNlVG9rZW4odG9rZW4sY2FsbGJhY2spe3ZhciBpLGZ1bmM9Y2FsbGJhY2s7Zm9yKCJzdHJpbmciPT10eXBlb2YgdG9rZW4mJih0b2tlbj1bdG9rZW5dKSxpc051bWJlcihjYWxsYmFjaykmJihmdW5jPWZ1bmN0aW9uKGlucHV0LGFycmF5KXthcnJheVtjYWxsYmFja109dG9JbnQoaW5wdXQpfSksaT0wO2k8dG9rZW4ubGVuZ3RoO2krKyl0b2tlbnNbdG9rZW5baV1dPWZ1bmN9ZnVuY3Rpb24gYWRkV2Vla1BhcnNlVG9rZW4odG9rZW4sY2FsbGJhY2spe2FkZFBhcnNlVG9rZW4odG9rZW4sZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnLHRva2VuKXtjb25maWcuX3c9Y29uZmlnLl93fHx7fSxjYWxsYmFjayhpbnB1dCxjb25maWcuX3csY29uZmlnLHRva2VuKX0pfWZ1bmN0aW9uIGFkZFRpbWVUb0FycmF5RnJvbVRva2VuKHRva2VuLGlucHV0LGNvbmZpZyl7bnVsbCE9aW5wdXQmJmhhc093blByb3AodG9rZW5zLHRva2VuKSYmdG9rZW5zW3Rva2VuXShpbnB1dCxjb25maWcuX2EsY29uZmlnLHRva2VuKX12YXIgWUVBUj0wLE1PTlRIPTEsREFURT0yLEhPVVI9MyxNSU5VVEU9NCxTRUNPTkQ9NSxNSUxMSVNFQ09ORD02LFdFRUs9NyxXRUVLREFZPTg7ZnVuY3Rpb24gZGF5c0luWWVhcih5ZWFyKXtyZXR1cm4gaXNMZWFwWWVhcih5ZWFyKT8zNjY6MzY1fWZ1bmN0aW9uIGlzTGVhcFllYXIoeWVhcil7cmV0dXJuIHllYXIlND09MCYmeWVhciUxMDAhPTB8fHllYXIlNDAwPT0wfWFkZEZvcm1hdFRva2VuKCJZIiwwLDAsZnVuY3Rpb24oKXt2YXIgeT10aGlzLnllYXIoKTtyZXR1cm4geTw9OTk5OT8iIit5OiIrIit5fSksYWRkRm9ybWF0VG9rZW4oMCxbIllZIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueWVhcigpJTEwMH0pLGFkZEZvcm1hdFRva2VuKDAsWyJZWVlZIiw0XSwwLCJ5ZWFyIiksYWRkRm9ybWF0VG9rZW4oMCxbIllZWVlZIiw1XSwwLCJ5ZWFyIiksYWRkRm9ybWF0VG9rZW4oMCxbIllZWVlZWSIsNiwhMF0sMCwieWVhciIpLGFkZFVuaXRBbGlhcygieWVhciIsInkiKSxhZGRVbml0UHJpb3JpdHkoInllYXIiLDEpLGFkZFJlZ2V4VG9rZW4oIlkiLG1hdGNoU2lnbmVkKSxhZGRSZWdleFRva2VuKCJZWSIsbWF0Y2gxdG8yLG1hdGNoMiksYWRkUmVnZXhUb2tlbigiWVlZWSIsbWF0Y2gxdG80LG1hdGNoNCksYWRkUmVnZXhUb2tlbigiWVlZWVkiLG1hdGNoMXRvNixtYXRjaDYpLGFkZFJlZ2V4VG9rZW4oIllZWVlZWSIsbWF0Y2gxdG82LG1hdGNoNiksYWRkUGFyc2VUb2tlbihbIllZWVlZIiwiWVlZWVlZIl0sWUVBUiksYWRkUGFyc2VUb2tlbigiWVlZWSIsZnVuY3Rpb24oaW5wdXQsYXJyYXkpe2FycmF5W1lFQVJdPTI9PT1pbnB1dC5sZW5ndGg/aG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpOnRvSW50KGlucHV0KX0pLGFkZFBhcnNlVG9rZW4oIllZIixmdW5jdGlvbihpbnB1dCxhcnJheSl7YXJyYXlbWUVBUl09aG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpfSksYWRkUGFyc2VUb2tlbigiWSIsZnVuY3Rpb24oaW5wdXQsYXJyYXkpe2FycmF5W1lFQVJdPXBhcnNlSW50KGlucHV0LDEwKX0pLGhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyPWZ1bmN0aW9uKGlucHV0KXtyZXR1cm4gdG9JbnQoaW5wdXQpKyg2ODx0b0ludChpbnB1dCk/MTkwMDoyZTMpfTt2YXIgaW5kZXhPZixnZXRTZXRZZWFyPW1ha2VHZXRTZXQoIkZ1bGxZZWFyIiwhMCk7ZnVuY3Rpb24gbWFrZUdldFNldCh1bml0LGtlZXBUaW1lKXtyZXR1cm4gZnVuY3Rpb24odmFsdWUpe3JldHVybiBudWxsIT12YWx1ZT8oc2V0JDEodGhpcyx1bml0LHZhbHVlKSxob29rcy51cGRhdGVPZmZzZXQodGhpcyxrZWVwVGltZSksdGhpcyk6Z2V0KHRoaXMsdW5pdCl9fWZ1bmN0aW9uIGdldChtb20sdW5pdCl7cmV0dXJuIG1vbS5pc1ZhbGlkKCk/bW9tLl9kWyJnZXQiKyhtb20uX2lzVVRDPyJVVEMiOiIiKSt1bml0XSgpOk5hTn1mdW5jdGlvbiBzZXQkMShtb20sdW5pdCx2YWx1ZSl7bW9tLmlzVmFsaWQoKSYmIWlzTmFOKHZhbHVlKSYmKCJGdWxsWWVhciI9PT11bml0JiZpc0xlYXBZZWFyKG1vbS55ZWFyKCkpJiYxPT09bW9tLm1vbnRoKCkmJjI5PT09bW9tLmRhdGUoKT9tb20uX2RbInNldCIrKG1vbS5faXNVVEM/IlVUQyI6IiIpK3VuaXRdKHZhbHVlLG1vbS5tb250aCgpLGRheXNJbk1vbnRoKHZhbHVlLG1vbS5tb250aCgpKSk6bW9tLl9kWyJzZXQiKyhtb20uX2lzVVRDPyJVVEMiOiIiKSt1bml0XSh2YWx1ZSkpfWZ1bmN0aW9uIGRheXNJbk1vbnRoKHllYXIsbW9udGgpe2lmKGlzTmFOKHllYXIpfHxpc05hTihtb250aCkpcmV0dXJuIE5hTjt2YXIgeCxtb2RNb250aD0obW9udGglKHg9MTIpK3gpJXg7cmV0dXJuIHllYXIrPShtb250aC1tb2RNb250aCkvMTIsMT09PW1vZE1vbnRoP2lzTGVhcFllYXIoeWVhcik/Mjk6Mjg6MzEtbW9kTW9udGglNyUyfWluZGV4T2Y9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/QXJyYXkucHJvdG90eXBlLmluZGV4T2Y6ZnVuY3Rpb24obyl7dmFyIGk7Zm9yKGk9MDtpPHRoaXMubGVuZ3RoOysraSlpZih0aGlzW2ldPT09bylyZXR1cm4gaTtyZXR1cm4tMX0sYWRkRm9ybWF0VG9rZW4oIk0iLFsiTU0iLDJdLCJNbyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb250aCgpKzF9KSxhZGRGb3JtYXRUb2tlbigiTU1NIiwwLDAsZnVuY3Rpb24oZm9ybWF0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzU2hvcnQodGhpcyxmb3JtYXQpfSksYWRkRm9ybWF0VG9rZW4oIk1NTU0iLDAsMCxmdW5jdGlvbihmb3JtYXQpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHModGhpcyxmb3JtYXQpfSksYWRkVW5pdEFsaWFzKCJtb250aCIsIk0iKSxhZGRVbml0UHJpb3JpdHkoIm1vbnRoIiw4KSxhZGRSZWdleFRva2VuKCJNIixtYXRjaDF0bzIpLGFkZFJlZ2V4VG9rZW4oIk1NIixtYXRjaDF0bzIsbWF0Y2gyKSxhZGRSZWdleFRva2VuKCJNTU0iLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS5tb250aHNTaG9ydFJlZ2V4KGlzU3RyaWN0KX0pLGFkZFJlZ2V4VG9rZW4oIk1NTU0iLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS5tb250aHNSZWdleChpc1N0cmljdCl9KSxhZGRQYXJzZVRva2VuKFsiTSIsIk1NIl0sZnVuY3Rpb24oaW5wdXQsYXJyYXkpe2FycmF5W01PTlRIXT10b0ludChpbnB1dCktMX0pLGFkZFBhcnNlVG9rZW4oWyJNTU0iLCJNTU1NIl0sZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnLHRva2VuKXt2YXIgbW9udGg9Y29uZmlnLl9sb2NhbGUubW9udGhzUGFyc2UoaW5wdXQsdG9rZW4sY29uZmlnLl9zdHJpY3QpO251bGwhPW1vbnRoP2FycmF5W01PTlRIXT1tb250aDpnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkTW9udGg9aW5wdXR9KTt2YXIgTU9OVEhTX0lOX0ZPUk1BVD0vRFtvRF0/KFxbW15cW1xdXSpcXXxccykrTU1NTT8vLGRlZmF1bHRMb2NhbGVNb250aHM9IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksZGVmYXVsdExvY2FsZU1vbnRoc1Nob3J0PSJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYyIuc3BsaXQoIl8iKTtmdW5jdGlvbiBoYW5kbGVTdHJpY3RQYXJzZShtb250aE5hbWUsZm9ybWF0LHN0cmljdCl7dmFyIGksaWksbW9tLGxsYz1tb250aE5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKTtpZighdGhpcy5fbW9udGhzUGFyc2UpZm9yKHRoaXMuX21vbnRoc1BhcnNlPVtdLHRoaXMuX2xvbmdNb250aHNQYXJzZT1bXSx0aGlzLl9zaG9ydE1vbnRoc1BhcnNlPVtdLGk9MDtpPDEyOysraSltb209Y3JlYXRlVVRDKFsyZTMsaV0pLHRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV09dGhpcy5tb250aHNTaG9ydChtb20sIiIpLnRvTG9jYWxlTG93ZXJDYXNlKCksdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldPXRoaXMubW9udGhzKG1vbSwiIikudG9Mb2NhbGVMb3dlckNhc2UoKTtyZXR1cm4gc3RyaWN0PyJNTU0iPT09Zm9ybWF0Py0xIT09KGlpPWluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGxsYykpP2lpOm51bGw6LTEhPT0oaWk9aW5kZXhPZi5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSxsbGMpKT9paTpudWxsOiJNTU0iPT09Zm9ybWF0Py0xIT09KGlpPWluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGxsYykpP2lpOi0xIT09KGlpPWluZGV4T2YuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsbGxjKSk/aWk6bnVsbDotMSE9PShpaT1pbmRleE9mLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLGxsYykpP2lpOi0xIT09KGlpPWluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLGxsYykpP2lpOm51bGx9ZnVuY3Rpb24gc2V0TW9udGgobW9tLHZhbHVlKXt2YXIgZGF5T2ZNb250aDtpZighbW9tLmlzVmFsaWQoKSlyZXR1cm4gbW9tO2lmKCJzdHJpbmciPT10eXBlb2YgdmFsdWUpaWYoL15cZCskLy50ZXN0KHZhbHVlKSl2YWx1ZT10b0ludCh2YWx1ZSk7ZWxzZSBpZighaXNOdW1iZXIodmFsdWU9bW9tLmxvY2FsZURhdGEoKS5tb250aHNQYXJzZSh2YWx1ZSkpKXJldHVybiBtb207cmV0dXJuIGRheU9mTW9udGg9TWF0aC5taW4obW9tLmRhdGUoKSxkYXlzSW5Nb250aChtb20ueWVhcigpLHZhbHVlKSksbW9tLl9kWyJzZXQiKyhtb20uX2lzVVRDPyJVVEMiOiIiKSsiTW9udGgiXSh2YWx1ZSxkYXlPZk1vbnRoKSxtb219ZnVuY3Rpb24gZ2V0U2V0TW9udGgodmFsdWUpe3JldHVybiBudWxsIT12YWx1ZT8oc2V0TW9udGgodGhpcyx2YWx1ZSksaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsITApLHRoaXMpOmdldCh0aGlzLCJNb250aCIpfXZhciBkZWZhdWx0TW9udGhzU2hvcnRSZWdleD1tYXRjaFdvcmQsZGVmYXVsdE1vbnRoc1JlZ2V4PW1hdGNoV29yZDtmdW5jdGlvbiBjb21wdXRlTW9udGhzUGFyc2UoKXtmdW5jdGlvbiBjbXBMZW5SZXYoYSxiKXtyZXR1cm4gYi5sZW5ndGgtYS5sZW5ndGh9dmFyIGksbW9tLHNob3J0UGllY2VzPVtdLGxvbmdQaWVjZXM9W10sbWl4ZWRQaWVjZXM9W107Zm9yKGk9MDtpPDEyO2krKyltb209Y3JlYXRlVVRDKFsyZTMsaV0pLHNob3J0UGllY2VzLnB1c2godGhpcy5tb250aHNTaG9ydChtb20sIiIpKSxsb25nUGllY2VzLnB1c2godGhpcy5tb250aHMobW9tLCIiKSksbWl4ZWRQaWVjZXMucHVzaCh0aGlzLm1vbnRocyhtb20sIiIpKSxtaXhlZFBpZWNlcy5wdXNoKHRoaXMubW9udGhzU2hvcnQobW9tLCIiKSk7Zm9yKHNob3J0UGllY2VzLnNvcnQoY21wTGVuUmV2KSxsb25nUGllY2VzLnNvcnQoY21wTGVuUmV2KSxtaXhlZFBpZWNlcy5zb3J0KGNtcExlblJldiksaT0wO2k8MTI7aSsrKXNob3J0UGllY2VzW2ldPXJlZ2V4RXNjYXBlKHNob3J0UGllY2VzW2ldKSxsb25nUGllY2VzW2ldPXJlZ2V4RXNjYXBlKGxvbmdQaWVjZXNbaV0pO2ZvcihpPTA7aTwyNDtpKyspbWl4ZWRQaWVjZXNbaV09cmVnZXhFc2NhcGUobWl4ZWRQaWVjZXNbaV0pO3RoaXMuX21vbnRoc1JlZ2V4PW5ldyBSZWdFeHAoIl4oIittaXhlZFBpZWNlcy5qb2luKCJ8IikrIikiLCJpIiksdGhpcy5fbW9udGhzU2hvcnRSZWdleD10aGlzLl9tb250aHNSZWdleCx0aGlzLl9tb250aHNTdHJpY3RSZWdleD1uZXcgUmVnRXhwKCJeKCIrbG9uZ1BpZWNlcy5qb2luKCJ8IikrIikiLCJpIiksdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleD1uZXcgUmVnRXhwKCJeKCIrc2hvcnRQaWVjZXMuam9pbigifCIpKyIpIiwiaSIpfWZ1bmN0aW9uIGNyZWF0ZVVUQ0RhdGUoeSl7dmFyIGRhdGU7aWYoeTwxMDAmJjA8PXkpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7YXJnc1swXT15KzQwMCxkYXRlPW5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KG51bGwsYXJncykpLGlzRmluaXRlKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSkmJmRhdGUuc2V0VVRDRnVsbFllYXIoeSl9ZWxzZSBkYXRlPW5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KG51bGwsYXJndW1lbnRzKSk7cmV0dXJuIGRhdGV9ZnVuY3Rpb24gZmlyc3RXZWVrT2Zmc2V0KHllYXIsZG93LGRveSl7dmFyIGZ3ZD03K2Rvdy1kb3ksZndkbHc9KDcrY3JlYXRlVVRDRGF0ZSh5ZWFyLDAsZndkKS5nZXRVVENEYXkoKS1kb3cpJTc7cmV0dXJuLWZ3ZGx3K2Z3ZC0xfWZ1bmN0aW9uIGRheU9mWWVhckZyb21XZWVrcyh5ZWFyLHdlZWssd2Vla2RheSxkb3csZG95KXt2YXIgcmVzWWVhcixyZXNEYXlPZlllYXIsbG9jYWxXZWVrZGF5PSg3K3dlZWtkYXktZG93KSU3LHdlZWtPZmZzZXQ9Zmlyc3RXZWVrT2Zmc2V0KHllYXIsZG93LGRveSksZGF5T2ZZZWFyPTErNyood2Vlay0xKStsb2NhbFdlZWtkYXkrd2Vla09mZnNldDtyZXR1cm4gcmVzRGF5T2ZZZWFyPWRheU9mWWVhcjw9MD9kYXlzSW5ZZWFyKHJlc1llYXI9eWVhci0xKStkYXlPZlllYXI6ZGF5T2ZZZWFyPmRheXNJblllYXIoeWVhcik/KHJlc1llYXI9eWVhcisxLGRheU9mWWVhci1kYXlzSW5ZZWFyKHllYXIpKToocmVzWWVhcj15ZWFyLGRheU9mWWVhcikse3llYXI6cmVzWWVhcixkYXlPZlllYXI6cmVzRGF5T2ZZZWFyfX1mdW5jdGlvbiB3ZWVrT2ZZZWFyKG1vbSxkb3csZG95KXt2YXIgcmVzV2VlayxyZXNZZWFyLHdlZWtPZmZzZXQ9Zmlyc3RXZWVrT2Zmc2V0KG1vbS55ZWFyKCksZG93LGRveSksd2Vlaz1NYXRoLmZsb29yKChtb20uZGF5T2ZZZWFyKCktd2Vla09mZnNldC0xKS83KSsxO3JldHVybiB3ZWVrPDE/KHJlc1llYXI9bW9tLnllYXIoKS0xLHJlc1dlZWs9d2Vlayt3ZWVrc0luWWVhcihyZXNZZWFyLGRvdyxkb3kpKTp3ZWVrPndlZWtzSW5ZZWFyKG1vbS55ZWFyKCksZG93LGRveSk/KHJlc1dlZWs9d2Vlay13ZWVrc0luWWVhcihtb20ueWVhcigpLGRvdyxkb3kpLHJlc1llYXI9bW9tLnllYXIoKSsxKToocmVzWWVhcj1tb20ueWVhcigpLHJlc1dlZWs9d2Vlaykse3dlZWs6cmVzV2Vlayx5ZWFyOnJlc1llYXJ9fWZ1bmN0aW9uIHdlZWtzSW5ZZWFyKHllYXIsZG93LGRveSl7dmFyIHdlZWtPZmZzZXQ9Zmlyc3RXZWVrT2Zmc2V0KHllYXIsZG93LGRveSksd2Vla09mZnNldE5leHQ9Zmlyc3RXZWVrT2Zmc2V0KHllYXIrMSxkb3csZG95KTtyZXR1cm4oZGF5c0luWWVhcih5ZWFyKS13ZWVrT2Zmc2V0K3dlZWtPZmZzZXROZXh0KS83fWZ1bmN0aW9uIHBhcnNlV2Vla2RheShpbnB1dCxsb2NhbGUpe3JldHVybiJzdHJpbmciIT10eXBlb2YgaW5wdXQ/aW5wdXQ6aXNOYU4oaW5wdXQpPyJudW1iZXIiPT10eXBlb2YoaW5wdXQ9bG9jYWxlLndlZWtkYXlzUGFyc2UoaW5wdXQpKT9pbnB1dDpudWxsOnBhcnNlSW50KGlucHV0LDEwKX1mdW5jdGlvbiBwYXJzZUlzb1dlZWtkYXkoaW5wdXQsbG9jYWxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGlucHV0P2xvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0KSU3fHw3OmlzTmFOKGlucHV0KT9udWxsOmlucHV0fWZ1bmN0aW9uIHNoaWZ0V2Vla2RheXMod3Msbil7cmV0dXJuIHdzLnNsaWNlKG4sNykuY29uY2F0KHdzLnNsaWNlKDAsbikpfWFkZEZvcm1hdFRva2VuKCJ3IixbInd3IiwyXSwid28iLCJ3ZWVrIiksYWRkRm9ybWF0VG9rZW4oIlciLFsiV1ciLDJdLCJXbyIsImlzb1dlZWsiKSxhZGRVbml0QWxpYXMoIndlZWsiLCJ3IiksYWRkVW5pdEFsaWFzKCJpc29XZWVrIiwiVyIpLGFkZFVuaXRQcmlvcml0eSgid2VlayIsNSksYWRkVW5pdFByaW9yaXR5KCJpc29XZWVrIiw1KSxhZGRSZWdleFRva2VuKCJ3IixtYXRjaDF0bzIpLGFkZFJlZ2V4VG9rZW4oInd3IixtYXRjaDF0bzIsbWF0Y2gyKSxhZGRSZWdleFRva2VuKCJXIixtYXRjaDF0bzIpLGFkZFJlZ2V4VG9rZW4oIldXIixtYXRjaDF0bzIsbWF0Y2gyKSxhZGRXZWVrUGFyc2VUb2tlbihbInciLCJ3dyIsIlciLCJXVyJdLGZ1bmN0aW9uKGlucHV0LHdlZWssY29uZmlnLHRva2VuKXt3ZWVrW3Rva2VuLnN1YnN0cigwLDEpXT10b0ludChpbnB1dCl9KSxhZGRGb3JtYXRUb2tlbigiZCIsMCwiZG8iLCJkYXkiKSxhZGRGb3JtYXRUb2tlbigiZGQiLDAsMCxmdW5jdGlvbihmb3JtYXQpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbih0aGlzLGZvcm1hdCl9KSxhZGRGb3JtYXRUb2tlbigiZGRkIiwwLDAsZnVuY3Rpb24oZm9ybWF0KXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNTaG9ydCh0aGlzLGZvcm1hdCl9KSxhZGRGb3JtYXRUb2tlbigiZGRkZCIsMCwwLGZ1bmN0aW9uKGZvcm1hdCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzKHRoaXMsZm9ybWF0KX0pLGFkZEZvcm1hdFRva2VuKCJlIiwwLDAsIndlZWtkYXkiKSxhZGRGb3JtYXRUb2tlbigiRSIsMCwwLCJpc29XZWVrZGF5IiksYWRkVW5pdEFsaWFzKCJkYXkiLCJkIiksYWRkVW5pdEFsaWFzKCJ3ZWVrZGF5IiwiZSIpLGFkZFVuaXRBbGlhcygiaXNvV2Vla2RheSIsIkUiKSxhZGRVbml0UHJpb3JpdHkoImRheSIsMTEpLGFkZFVuaXRQcmlvcml0eSgid2Vla2RheSIsMTEpLGFkZFVuaXRQcmlvcml0eSgiaXNvV2Vla2RheSIsMTEpLGFkZFJlZ2V4VG9rZW4oImQiLG1hdGNoMXRvMiksYWRkUmVnZXhUb2tlbigiZSIsbWF0Y2gxdG8yKSxhZGRSZWdleFRva2VuKCJFIixtYXRjaDF0bzIpLGFkZFJlZ2V4VG9rZW4oImRkIixmdW5jdGlvbihpc1N0cmljdCxsb2NhbGUpe3JldHVybiBsb2NhbGUud2Vla2RheXNNaW5SZWdleChpc1N0cmljdCl9KSxhZGRSZWdleFRva2VuKCJkZGQiLGZ1bmN0aW9uKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS53ZWVrZGF5c1Nob3J0UmVnZXgoaXNTdHJpY3QpfSksYWRkUmVnZXhUb2tlbigiZGRkZCIsZnVuY3Rpb24oaXNTdHJpY3QsbG9jYWxlKXtyZXR1cm4gbG9jYWxlLndlZWtkYXlzUmVnZXgoaXNTdHJpY3QpfSksYWRkV2Vla1BhcnNlVG9rZW4oWyJkZCIsImRkZCIsImRkZGQiXSxmdW5jdGlvbihpbnB1dCx3ZWVrLGNvbmZpZyx0b2tlbil7dmFyIHdlZWtkYXk9Y29uZmlnLl9sb2NhbGUud2Vla2RheXNQYXJzZShpbnB1dCx0b2tlbixjb25maWcuX3N0cmljdCk7bnVsbCE9d2Vla2RheT93ZWVrLmQ9d2Vla2RheTpnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkV2Vla2RheT1pbnB1dH0pLGFkZFdlZWtQYXJzZVRva2VuKFsiZCIsImUiLCJFIl0sZnVuY3Rpb24oaW5wdXQsd2Vlayxjb25maWcsdG9rZW4pe3dlZWtbdG9rZW5dPXRvSW50KGlucHV0KX0pO3ZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXM9IlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Ii5zcGxpdCgiXyIpLGRlZmF1bHRMb2NhbGVXZWVrZGF5c1Nob3J0PSJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksZGVmYXVsdExvY2FsZVdlZWtkYXlzTWluPSJTdV9Nb19UdV9XZV9UaF9Gcl9TYSIuc3BsaXQoIl8iKTtmdW5jdGlvbiBoYW5kbGVTdHJpY3RQYXJzZSQxKHdlZWtkYXlOYW1lLGZvcm1hdCxzdHJpY3Qpe3ZhciBpLGlpLG1vbSxsbGM9d2Vla2RheU5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKTtpZighdGhpcy5fd2Vla2RheXNQYXJzZSlmb3IodGhpcy5fd2Vla2RheXNQYXJzZT1bXSx0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2U9W10sdGhpcy5fbWluV2Vla2RheXNQYXJzZT1bXSxpPTA7aTw3OysraSltb209Y3JlYXRlVVRDKFsyZTMsMV0pLmRheShpKSx0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldPXRoaXMud2Vla2RheXNNaW4obW9tLCIiKS50b0xvY2FsZUxvd2VyQ2FzZSgpLHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXT10aGlzLndlZWtkYXlzU2hvcnQobW9tLCIiKS50b0xvY2FsZUxvd2VyQ2FzZSgpLHRoaXMuX3dlZWtkYXlzUGFyc2VbaV09dGhpcy53ZWVrZGF5cyhtb20sIiIpLnRvTG9jYWxlTG93ZXJDYXNlKCk7cmV0dXJuIHN0cmljdD8iZGRkZCI9PT1mb3JtYXQ/LTEhPT0oaWk9aW5kZXhPZi5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsbGxjKSk/aWk6bnVsbDoiZGRkIj09PWZvcm1hdD8tMSE9PShpaT1pbmRleE9mLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGxsYykpP2lpOm51bGw6LTEhPT0oaWk9aW5kZXhPZi5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsbGxjKSk/aWk6bnVsbDoiZGRkZCI9PT1mb3JtYXQ/LTEhPT0oaWk9aW5kZXhPZi5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsbGxjKSk/aWk6LTEhPT0oaWk9aW5kZXhPZi5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSxsbGMpKT9paTotMSE9PShpaT1pbmRleE9mLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxsbGMpKT9paTpudWxsOiJkZGQiPT09Zm9ybWF0Py0xIT09KGlpPWluZGV4T2YuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsbGxjKSk/aWk6LTEhPT0oaWk9aW5kZXhPZi5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsbGxjKSk/aWk6LTEhPT0oaWk9aW5kZXhPZi5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsbGxjKSk/aWk6bnVsbDotMSE9PShpaT1pbmRleE9mLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSxsbGMpKT9paTotMSE9PShpaT1pbmRleE9mLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSxsbGMpKT9paTotMSE9PShpaT1pbmRleE9mLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLGxsYykpP2lpOm51bGx9dmFyIGRlZmF1bHRXZWVrZGF5c1JlZ2V4PW1hdGNoV29yZCxkZWZhdWx0V2Vla2RheXNTaG9ydFJlZ2V4PW1hdGNoV29yZCxkZWZhdWx0V2Vla2RheXNNaW5SZWdleD1tYXRjaFdvcmQ7ZnVuY3Rpb24gY29tcHV0ZVdlZWtkYXlzUGFyc2UoKXtmdW5jdGlvbiBjbXBMZW5SZXYoYSxiKXtyZXR1cm4gYi5sZW5ndGgtYS5sZW5ndGh9dmFyIGksbW9tLG1pbnAsc2hvcnRwLGxvbmdwLG1pblBpZWNlcz1bXSxzaG9ydFBpZWNlcz1bXSxsb25nUGllY2VzPVtdLG1peGVkUGllY2VzPVtdO2ZvcihpPTA7aTw3O2krKyltb209Y3JlYXRlVVRDKFsyZTMsMV0pLmRheShpKSxtaW5wPXRoaXMud2Vla2RheXNNaW4obW9tLCIiKSxzaG9ydHA9dGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwiIiksbG9uZ3A9dGhpcy53ZWVrZGF5cyhtb20sIiIpLG1pblBpZWNlcy5wdXNoKG1pbnApLHNob3J0UGllY2VzLnB1c2goc2hvcnRwKSxsb25nUGllY2VzLnB1c2gobG9uZ3ApLG1peGVkUGllY2VzLnB1c2gobWlucCksbWl4ZWRQaWVjZXMucHVzaChzaG9ydHApLG1peGVkUGllY2VzLnB1c2gobG9uZ3ApO2ZvcihtaW5QaWVjZXMuc29ydChjbXBMZW5SZXYpLHNob3J0UGllY2VzLnNvcnQoY21wTGVuUmV2KSxsb25nUGllY2VzLnNvcnQoY21wTGVuUmV2KSxtaXhlZFBpZWNlcy5zb3J0KGNtcExlblJldiksaT0wO2k8NztpKyspc2hvcnRQaWVjZXNbaV09cmVnZXhFc2NhcGUoc2hvcnRQaWVjZXNbaV0pLGxvbmdQaWVjZXNbaV09cmVnZXhFc2NhcGUobG9uZ1BpZWNlc1tpXSksbWl4ZWRQaWVjZXNbaV09cmVnZXhFc2NhcGUobWl4ZWRQaWVjZXNbaV0pO3RoaXMuX3dlZWtkYXlzUmVnZXg9bmV3IFJlZ0V4cCgiXigiK21peGVkUGllY2VzLmpvaW4oInwiKSsiKSIsImkiKSx0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXg9dGhpcy5fd2Vla2RheXNSZWdleCx0aGlzLl93ZWVrZGF5c01pblJlZ2V4PXRoaXMuX3dlZWtkYXlzUmVnZXgsdGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleD1uZXcgUmVnRXhwKCJeKCIrbG9uZ1BpZWNlcy5qb2luKCJ8IikrIikiLCJpIiksdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4PW5ldyBSZWdFeHAoIl4oIitzaG9ydFBpZWNlcy5qb2luKCJ8IikrIikiLCJpIiksdGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleD1uZXcgUmVnRXhwKCJeKCIrbWluUGllY2VzLmpvaW4oInwiKSsiKSIsImkiKX1mdW5jdGlvbiBoRm9ybWF0KCl7cmV0dXJuIHRoaXMuaG91cnMoKSUxMnx8MTJ9ZnVuY3Rpb24gbWVyaWRpZW0odG9rZW4sbG93ZXJjYXNlKXthZGRGb3JtYXRUb2tlbih0b2tlbiwwLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubWVyaWRpZW0odGhpcy5ob3VycygpLHRoaXMubWludXRlcygpLGxvd2VyY2FzZSl9KX1mdW5jdGlvbiBtYXRjaE1lcmlkaWVtKGlzU3RyaWN0LGxvY2FsZSl7cmV0dXJuIGxvY2FsZS5fbWVyaWRpZW1QYXJzZX1hZGRGb3JtYXRUb2tlbigiSCIsWyJISCIsMl0sMCwiaG91ciIpLGFkZEZvcm1hdFRva2VuKCJoIixbImhoIiwyXSwwLGhGb3JtYXQpLGFkZEZvcm1hdFRva2VuKCJrIixbImtrIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG91cnMoKXx8MjR9KSxhZGRGb3JtYXRUb2tlbigiaG1tIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm4iIitoRm9ybWF0LmFwcGx5KHRoaXMpK3plcm9GaWxsKHRoaXMubWludXRlcygpLDIpfSksYWRkRm9ybWF0VG9rZW4oImhtbXNzIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm4iIitoRm9ybWF0LmFwcGx5KHRoaXMpK3plcm9GaWxsKHRoaXMubWludXRlcygpLDIpK3plcm9GaWxsKHRoaXMuc2Vjb25kcygpLDIpfSksYWRkRm9ybWF0VG9rZW4oIkhtbSIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuIiIrdGhpcy5ob3VycygpK3plcm9GaWxsKHRoaXMubWludXRlcygpLDIpfSksYWRkRm9ybWF0VG9rZW4oIkhtbXNzIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm4iIit0aGlzLmhvdXJzKCkremVyb0ZpbGwodGhpcy5taW51dGVzKCksMikremVyb0ZpbGwodGhpcy5zZWNvbmRzKCksMil9KSxtZXJpZGllbSgiYSIsITApLG1lcmlkaWVtKCJBIiwhMSksYWRkVW5pdEFsaWFzKCJob3VyIiwiaCIpLGFkZFVuaXRQcmlvcml0eSgiaG91ciIsMTMpLGFkZFJlZ2V4VG9rZW4oImEiLG1hdGNoTWVyaWRpZW0pLGFkZFJlZ2V4VG9rZW4oIkEiLG1hdGNoTWVyaWRpZW0pLGFkZFJlZ2V4VG9rZW4oIkgiLG1hdGNoMXRvMiksYWRkUmVnZXhUb2tlbigiaCIsbWF0Y2gxdG8yKSxhZGRSZWdleFRva2VuKCJrIixtYXRjaDF0bzIpLGFkZFJlZ2V4VG9rZW4oIkhIIixtYXRjaDF0bzIsbWF0Y2gyKSxhZGRSZWdleFRva2VuKCJoaCIsbWF0Y2gxdG8yLG1hdGNoMiksYWRkUmVnZXhUb2tlbigia2siLG1hdGNoMXRvMixtYXRjaDIpLGFkZFJlZ2V4VG9rZW4oImhtbSIsbWF0Y2gzdG80KSxhZGRSZWdleFRva2VuKCJobW1zcyIsbWF0Y2g1dG82KSxhZGRSZWdleFRva2VuKCJIbW0iLG1hdGNoM3RvNCksYWRkUmVnZXhUb2tlbigiSG1tc3MiLG1hdGNoNXRvNiksYWRkUGFyc2VUb2tlbihbIkgiLCJISCJdLEhPVVIpLGFkZFBhcnNlVG9rZW4oWyJrIiwia2siXSxmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe3ZhciBrSW5wdXQ9dG9JbnQoaW5wdXQpO2FycmF5W0hPVVJdPTI0PT09a0lucHV0PzA6a0lucHV0fSksYWRkUGFyc2VUb2tlbihbImEiLCJBIl0sZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXtjb25maWcuX2lzUG09Y29uZmlnLl9sb2NhbGUuaXNQTShpbnB1dCksY29uZmlnLl9tZXJpZGllbT1pbnB1dH0pLGFkZFBhcnNlVG9rZW4oWyJoIiwiaGgiXSxmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe2FycmF5W0hPVVJdPXRvSW50KGlucHV0KSxnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyPSEwfSksYWRkUGFyc2VUb2tlbigiaG1tIixmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe3ZhciBwb3M9aW5wdXQubGVuZ3RoLTI7YXJyYXlbSE9VUl09dG9JbnQoaW5wdXQuc3Vic3RyKDAscG9zKSksYXJyYXlbTUlOVVRFXT10b0ludChpbnB1dC5zdWJzdHIocG9zKSksZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91cj0hMH0pLGFkZFBhcnNlVG9rZW4oImhtbXNzIixmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe3ZhciBwb3MxPWlucHV0Lmxlbmd0aC00LHBvczI9aW5wdXQubGVuZ3RoLTI7YXJyYXlbSE9VUl09dG9JbnQoaW5wdXQuc3Vic3RyKDAscG9zMSkpLGFycmF5W01JTlVURV09dG9JbnQoaW5wdXQuc3Vic3RyKHBvczEsMikpLGFycmF5W1NFQ09ORF09dG9JbnQoaW5wdXQuc3Vic3RyKHBvczIpKSxnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyPSEwfSksYWRkUGFyc2VUb2tlbigiSG1tIixmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe3ZhciBwb3M9aW5wdXQubGVuZ3RoLTI7YXJyYXlbSE9VUl09dG9JbnQoaW5wdXQuc3Vic3RyKDAscG9zKSksYXJyYXlbTUlOVVRFXT10b0ludChpbnB1dC5zdWJzdHIocG9zKSl9KSxhZGRQYXJzZVRva2VuKCJIbW1zcyIsZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXt2YXIgcG9zMT1pbnB1dC5sZW5ndGgtNCxwb3MyPWlucHV0Lmxlbmd0aC0yO2FycmF5W0hPVVJdPXRvSW50KGlucHV0LnN1YnN0cigwLHBvczEpKSxhcnJheVtNSU5VVEVdPXRvSW50KGlucHV0LnN1YnN0cihwb3MxLDIpKSxhcnJheVtTRUNPTkRdPXRvSW50KGlucHV0LnN1YnN0cihwb3MyKSl9KTt2YXIgZ2xvYmFsTG9jYWxlLGdldFNldEhvdXI9bWFrZUdldFNldCgiSG91cnMiLCEwKSxiYXNlQ29uZmlnPXtjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LGxvbmdEYXRlRm9ybWF0OntMVFM6Img6bW06c3MgQSIsTFQ6Img6bW0gQSIsTDoiTU0vREQvWVlZWSIsTEw6Ik1NTU0gRCwgWVlZWSIsTExMOiJNTU1NIEQsIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBIn0saW52YWxpZERhdGU6IkludmFsaWQgZGF0ZSIsb3JkaW5hbDoiJWQiLGRheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0vLHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixzczoiJWQgc2Vjb25kcyIsbToiYSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJhbiBob3VyIixoaDoiJWQgaG91cnMiLGQ6ImEgZGF5IixkZDoiJWQgZGF5cyIsTToiYSBtb250aCIsTU06IiVkIG1vbnRocyIseToiYSB5ZWFyIix5eToiJWQgeWVhcnMifSxtb250aHM6ZGVmYXVsdExvY2FsZU1vbnRocyxtb250aHNTaG9ydDpkZWZhdWx0TG9jYWxlTW9udGhzU2hvcnQsd2Vlazp7ZG93OjAsZG95OjZ9LHdlZWtkYXlzOmRlZmF1bHRMb2NhbGVXZWVrZGF5cyx3ZWVrZGF5c01pbjpkZWZhdWx0TG9jYWxlV2Vla2RheXNNaW4sd2Vla2RheXNTaG9ydDpkZWZhdWx0TG9jYWxlV2Vla2RheXNTaG9ydCxtZXJpZGllbVBhcnNlOi9bYXBdXC4/bT9cLj8vaX0sbG9jYWxlcz17fSxsb2NhbGVGYW1pbGllcz17fTtmdW5jdGlvbiBub3JtYWxpemVMb2NhbGUoa2V5KXtyZXR1cm4ga2V5P2tleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoIl8iLCItIik6a2V5fWZ1bmN0aW9uIGxvYWRMb2NhbGUobmFtZSl7dmFyIG9sZExvY2FsZT1udWxsO2lmKCFsb2NhbGVzW25hbWVdJiZ2b2lkIDAhPT1tb2R1bGUmJm1vZHVsZSYmbW9kdWxlLmV4cG9ydHMpdHJ5e29sZExvY2FsZT1nbG9iYWxMb2NhbGUuX2FiYnIsX193ZWJwYWNrX3JlcXVpcmVfXygiUm5oWiIpKCIuLyIrbmFtZSksZ2V0U2V0R2xvYmFsTG9jYWxlKG9sZExvY2FsZSl9Y2F0Y2goZSl7fXJldHVybiBsb2NhbGVzW25hbWVdfWZ1bmN0aW9uIGdldFNldEdsb2JhbExvY2FsZShrZXksdmFsdWVzKXt2YXIgZGF0YTtyZXR1cm4ga2V5JiYoKGRhdGE9aXNVbmRlZmluZWQodmFsdWVzKT9nZXRMb2NhbGUoa2V5KTpkZWZpbmVMb2NhbGUoa2V5LHZhbHVlcykpP2dsb2JhbExvY2FsZT1kYXRhOiJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oIkxvY2FsZSAiK2tleSsiIG5vdCBmb3VuZC4gRGlkIHlvdSBmb3JnZXQgdG8gbG9hZCBpdD8iKSksZ2xvYmFsTG9jYWxlLl9hYmJyfWZ1bmN0aW9uIGRlZmluZUxvY2FsZShuYW1lLGNvbmZpZyl7aWYobnVsbD09PWNvbmZpZylyZXR1cm4gZGVsZXRlIGxvY2FsZXNbbmFtZV0sbnVsbDt2YXIgbG9jYWxlLHBhcmVudENvbmZpZz1iYXNlQ29uZmlnO2lmKGNvbmZpZy5hYmJyPW5hbWUsbnVsbCE9bG9jYWxlc1tuYW1lXSlkZXByZWNhdGVTaW1wbGUoImRlZmluZUxvY2FsZU92ZXJyaWRlIiwidXNlIG1vbWVudC51cGRhdGVMb2NhbGUobG9jYWxlTmFtZSwgY29uZmlnKSB0byBjaGFuZ2UgYW4gZXhpc3RpbmcgbG9jYWxlLiBtb21lbnQuZGVmaW5lTG9jYWxlKGxvY2FsZU5hbWUsIGNvbmZpZykgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY3JlYXRpbmcgYSBuZXcgbG9jYWxlIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RlZmluZS1sb2NhbGUvIGZvciBtb3JlIGluZm8uIikscGFyZW50Q29uZmlnPWxvY2FsZXNbbmFtZV0uX2NvbmZpZztlbHNlIGlmKG51bGwhPWNvbmZpZy5wYXJlbnRMb2NhbGUpaWYobnVsbCE9bG9jYWxlc1tjb25maWcucGFyZW50TG9jYWxlXSlwYXJlbnRDb25maWc9bG9jYWxlc1tjb25maWcucGFyZW50TG9jYWxlXS5fY29uZmlnO2Vsc2V7aWYobnVsbD09KGxvY2FsZT1sb2FkTG9jYWxlKGNvbmZpZy5wYXJlbnRMb2NhbGUpKSlyZXR1cm4gbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV18fChsb2NhbGVGYW1pbGllc1tjb25maWcucGFyZW50TG9jYWxlXT1bXSksbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV0ucHVzaCh7bmFtZTpuYW1lLGNvbmZpZzpjb25maWd9KSxudWxsO3BhcmVudENvbmZpZz1sb2NhbGUuX2NvbmZpZ31yZXR1cm4gbG9jYWxlc1tuYW1lXT1uZXcgTG9jYWxlKG1lcmdlQ29uZmlncyhwYXJlbnRDb25maWcsY29uZmlnKSksbG9jYWxlRmFtaWxpZXNbbmFtZV0mJmxvY2FsZUZhbWlsaWVzW25hbWVdLmZvckVhY2goZnVuY3Rpb24oeCl7ZGVmaW5lTG9jYWxlKHgubmFtZSx4LmNvbmZpZyl9KSxnZXRTZXRHbG9iYWxMb2NhbGUobmFtZSksbG9jYWxlc1tuYW1lXX1mdW5jdGlvbiBnZXRMb2NhbGUoa2V5KXt2YXIgbG9jYWxlO2lmKGtleSYma2V5Ll9sb2NhbGUmJmtleS5fbG9jYWxlLl9hYmJyJiYoa2V5PWtleS5fbG9jYWxlLl9hYmJyKSwha2V5KXJldHVybiBnbG9iYWxMb2NhbGU7aWYoIWlzQXJyYXkoa2V5KSl7aWYobG9jYWxlPWxvYWRMb2NhbGUoa2V5KSlyZXR1cm4gbG9jYWxlO2tleT1ba2V5XX1yZXR1cm4gZnVuY3Rpb24obmFtZXMpe2Zvcih2YXIgaixuZXh0LGxvY2FsZSxzcGxpdCxpPTA7aTxuYW1lcy5sZW5ndGg7KXtmb3Ioc3BsaXQ9bm9ybWFsaXplTG9jYWxlKG5hbWVzW2ldKS5zcGxpdCgiLSIpLGo9c3BsaXQubGVuZ3RoLG5leHQ9KG5leHQ9bm9ybWFsaXplTG9jYWxlKG5hbWVzW2krMV0pKT9uZXh0LnNwbGl0KCItIik6bnVsbDswPGo7KXtpZihsb2NhbGU9bG9hZExvY2FsZShzcGxpdC5zbGljZSgwLGopLmpvaW4oIi0iKSkpcmV0dXJuIGxvY2FsZTtpZihuZXh0JiZuZXh0Lmxlbmd0aD49aiYmY29tcGFyZUFycmF5cyhzcGxpdCxuZXh0LCEwKT49ai0xKWJyZWFrO2otLX1pKyt9cmV0dXJuIGdsb2JhbExvY2FsZX0oa2V5KX1mdW5jdGlvbiBjaGVja092ZXJmbG93KG0pe3ZhciBvdmVyZmxvdyxhPW0uX2E7cmV0dXJuIGEmJi0yPT09Z2V0UGFyc2luZ0ZsYWdzKG0pLm92ZXJmbG93JiYob3ZlcmZsb3c9YVtNT05USF08MHx8MTE8YVtNT05USF0/TU9OVEg6YVtEQVRFXTwxfHxhW0RBVEVdPmRheXNJbk1vbnRoKGFbWUVBUl0sYVtNT05USF0pP0RBVEU6YVtIT1VSXTwwfHwyNDxhW0hPVVJdfHwyND09PWFbSE9VUl0mJigwIT09YVtNSU5VVEVdfHwwIT09YVtTRUNPTkRdfHwwIT09YVtNSUxMSVNFQ09ORF0pP0hPVVI6YVtNSU5VVEVdPDB8fDU5PGFbTUlOVVRFXT9NSU5VVEU6YVtTRUNPTkRdPDB8fDU5PGFbU0VDT05EXT9TRUNPTkQ6YVtNSUxMSVNFQ09ORF08MHx8OTk5PGFbTUlMTElTRUNPTkRdP01JTExJU0VDT05EOi0xLGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dEYXlPZlllYXImJihvdmVyZmxvdzxZRUFSfHxEQVRFPG92ZXJmbG93KSYmKG92ZXJmbG93PURBVEUpLGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dXZWVrcyYmLTE9PT1vdmVyZmxvdyYmKG92ZXJmbG93PVdFRUspLGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dXZWVrZGF5JiYtMT09PW92ZXJmbG93JiYob3ZlcmZsb3c9V0VFS0RBWSksZ2V0UGFyc2luZ0ZsYWdzKG0pLm92ZXJmbG93PW92ZXJmbG93KSxtfWZ1bmN0aW9uIGRlZmF1bHRzKGEsYixjKXtyZXR1cm4gbnVsbCE9YT9hOm51bGwhPWI/YjpjfWZ1bmN0aW9uIGNvbmZpZ0Zyb21BcnJheShjb25maWcpe3ZhciBpLGRhdGUsY3VycmVudERhdGUsZXhwZWN0ZWRXZWVrZGF5LHllYXJUb1VzZSxpbnB1dD1bXTtpZighY29uZmlnLl9kKXtmb3IoY3VycmVudERhdGU9ZnVuY3Rpb24oY29uZmlnKXt2YXIgbm93VmFsdWU9bmV3IERhdGUoaG9va3Mubm93KCkpO3JldHVybiBjb25maWcuX3VzZVVUQz9bbm93VmFsdWUuZ2V0VVRDRnVsbFllYXIoKSxub3dWYWx1ZS5nZXRVVENNb250aCgpLG5vd1ZhbHVlLmdldFVUQ0RhdGUoKV06W25vd1ZhbHVlLmdldEZ1bGxZZWFyKCksbm93VmFsdWUuZ2V0TW9udGgoKSxub3dWYWx1ZS5nZXREYXRlKCldfShjb25maWcpLGNvbmZpZy5fdyYmbnVsbD09Y29uZmlnLl9hW0RBVEVdJiZudWxsPT1jb25maWcuX2FbTU9OVEhdJiZmdW5jdGlvbihjb25maWcpe3ZhciB3LHdlZWtZZWFyLHdlZWssd2Vla2RheSxkb3csZG95LHRlbXAsd2Vla2RheU92ZXJmbG93O2lmKG51bGwhPSh3PWNvbmZpZy5fdykuR0d8fG51bGwhPXcuV3x8bnVsbCE9dy5FKWRvdz0xLGRveT00LHdlZWtZZWFyPWRlZmF1bHRzKHcuR0csY29uZmlnLl9hW1lFQVJdLHdlZWtPZlllYXIoY3JlYXRlTG9jYWwoKSwxLDQpLnllYXIpLHdlZWs9ZGVmYXVsdHMody5XLDEpLCgod2Vla2RheT1kZWZhdWx0cyh3LkUsMSkpPDF8fDc8d2Vla2RheSkmJih3ZWVrZGF5T3ZlcmZsb3c9ITApO2Vsc2V7ZG93PWNvbmZpZy5fbG9jYWxlLl93ZWVrLmRvdyxkb3k9Y29uZmlnLl9sb2NhbGUuX3dlZWsuZG95O3ZhciBjdXJXZWVrPXdlZWtPZlllYXIoY3JlYXRlTG9jYWwoKSxkb3csZG95KTt3ZWVrWWVhcj1kZWZhdWx0cyh3LmdnLGNvbmZpZy5fYVtZRUFSXSxjdXJXZWVrLnllYXIpLHdlZWs9ZGVmYXVsdHMody53LGN1cldlZWsud2VlayksbnVsbCE9dy5kPygod2Vla2RheT13LmQpPDB8fDY8d2Vla2RheSkmJih3ZWVrZGF5T3ZlcmZsb3c9ITApOm51bGwhPXcuZT8od2Vla2RheT13LmUrZG93LCh3LmU8MHx8Njx3LmUpJiYod2Vla2RheU92ZXJmbG93PSEwKSk6d2Vla2RheT1kb3d9d2VlazwxfHx3ZWVrPndlZWtzSW5ZZWFyKHdlZWtZZWFyLGRvdyxkb3kpP2dldFBhcnNpbmdGbGFncyhjb25maWcpLl9vdmVyZmxvd1dlZWtzPSEwOm51bGwhPXdlZWtkYXlPdmVyZmxvdz9nZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dXZWVrZGF5PSEwOih0ZW1wPWRheU9mWWVhckZyb21XZWVrcyh3ZWVrWWVhcix3ZWVrLHdlZWtkYXksZG93LGRveSksY29uZmlnLl9hW1lFQVJdPXRlbXAueWVhcixjb25maWcuX2RheU9mWWVhcj10ZW1wLmRheU9mWWVhcil9KGNvbmZpZyksbnVsbCE9Y29uZmlnLl9kYXlPZlllYXImJih5ZWFyVG9Vc2U9ZGVmYXVsdHMoY29uZmlnLl9hW1lFQVJdLGN1cnJlbnREYXRlW1lFQVJdKSwoY29uZmlnLl9kYXlPZlllYXI+ZGF5c0luWWVhcih5ZWFyVG9Vc2UpfHwwPT09Y29uZmlnLl9kYXlPZlllYXIpJiYoZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93RGF5T2ZZZWFyPSEwKSxkYXRlPWNyZWF0ZVVUQ0RhdGUoeWVhclRvVXNlLDAsY29uZmlnLl9kYXlPZlllYXIpLGNvbmZpZy5fYVtNT05USF09ZGF0ZS5nZXRVVENNb250aCgpLGNvbmZpZy5fYVtEQVRFXT1kYXRlLmdldFVUQ0RhdGUoKSksaT0wO2k8MyYmbnVsbD09Y29uZmlnLl9hW2ldOysraSljb25maWcuX2FbaV09aW5wdXRbaV09Y3VycmVudERhdGVbaV07Zm9yKDtpPDc7aSsrKWNvbmZpZy5fYVtpXT1pbnB1dFtpXT1udWxsPT1jb25maWcuX2FbaV0/Mj09PWk/MTowOmNvbmZpZy5fYVtpXTsyND09PWNvbmZpZy5fYVtIT1VSXSYmMD09PWNvbmZpZy5fYVtNSU5VVEVdJiYwPT09Y29uZmlnLl9hW1NFQ09ORF0mJjA9PT1jb25maWcuX2FbTUlMTElTRUNPTkRdJiYoY29uZmlnLl9uZXh0RGF5PSEwLGNvbmZpZy5fYVtIT1VSXT0wKSxjb25maWcuX2Q9KGNvbmZpZy5fdXNlVVRDP2NyZWF0ZVVUQ0RhdGU6ZnVuY3Rpb24oeSxtLGQsaCxNLHMsbXMpe3ZhciBkYXRlO3JldHVybiB5PDEwMCYmMDw9eT8oZGF0ZT1uZXcgRGF0ZSh5KzQwMCxtLGQsaCxNLHMsbXMpLGlzRmluaXRlKGRhdGUuZ2V0RnVsbFllYXIoKSkmJmRhdGUuc2V0RnVsbFllYXIoeSkpOmRhdGU9bmV3IERhdGUoeSxtLGQsaCxNLHMsbXMpLGRhdGV9KS5hcHBseShudWxsLGlucHV0KSxleHBlY3RlZFdlZWtkYXk9Y29uZmlnLl91c2VVVEM/Y29uZmlnLl9kLmdldFVUQ0RheSgpOmNvbmZpZy5fZC5nZXREYXkoKSxudWxsIT1jb25maWcuX3R6bSYmY29uZmlnLl9kLnNldFVUQ01pbnV0ZXMoY29uZmlnLl9kLmdldFVUQ01pbnV0ZXMoKS1jb25maWcuX3R6bSksY29uZmlnLl9uZXh0RGF5JiYoY29uZmlnLl9hW0hPVVJdPTI0KSxjb25maWcuX3cmJnZvaWQgMCE9PWNvbmZpZy5fdy5kJiZjb25maWcuX3cuZCE9PWV4cGVjdGVkV2Vla2RheSYmKGdldFBhcnNpbmdGbGFncyhjb25maWcpLndlZWtkYXlNaXNtYXRjaD0hMCl9fXZhciBleHRlbmRlZElzb1JlZ2V4PS9eXHMqKCg/OlsrLV1cZHs2fXxcZHs0fSktKD86XGRcZC1cZFxkfFdcZFxkLVxkfFdcZFxkfFxkXGRcZHxcZFxkKSkoPzooVHwgKShcZFxkKD86OlxkXGQoPzo6XGRcZCg/OlsuLF1cZCspPyk/KT8pKFtcK1wtXVxkXGQoPzo6P1xkXGQpP3xccypaKT8pPyQvLGJhc2ljSXNvUmVnZXg9L15ccyooKD86WystXVxkezZ9fFxkezR9KSg/OlxkXGRcZFxkfFdcZFxkXGR8V1xkXGR8XGRcZFxkfFxkXGQpKSg/OihUfCApKFxkXGQoPzpcZFxkKD86XGRcZCg/OlsuLF1cZCspPyk/KT8pKFtcK1wtXVxkXGQoPzo6P1xkXGQpP3xccypaKT8pPyQvLHR6UmVnZXg9L1p8WystXVxkXGQoPzo6P1xkXGQpPy8saXNvRGF0ZXM9W1siWVlZWVlZLU1NLUREIiwvWystXVxkezZ9LVxkXGQtXGRcZC9dLFsiWVlZWS1NTS1ERCIsL1xkezR9LVxkXGQtXGRcZC9dLFsiR0dHRy1bV11XVy1FIiwvXGR7NH0tV1xkXGQtXGQvXSxbIkdHR0ctW1ddV1ciLC9cZHs0fS1XXGRcZC8sITFdLFsiWVlZWS1EREQiLC9cZHs0fS1cZHszfS9dLFsiWVlZWS1NTSIsL1xkezR9LVxkXGQvLCExXSxbIllZWVlZWU1NREQiLC9bKy1dXGR7MTB9L10sWyJZWVlZTU1ERCIsL1xkezh9L10sWyJHR0dHW1ddV1dFIiwvXGR7NH1XXGR7M30vXSxbIkdHR0dbV11XVyIsL1xkezR9V1xkezJ9LywhMV0sWyJZWVlZREREIiwvXGR7N30vXV0saXNvVGltZXM9W1siSEg6bW06c3MuU1NTUyIsL1xkXGQ6XGRcZDpcZFxkXC5cZCsvXSxbIkhIOm1tOnNzLFNTU1MiLC9cZFxkOlxkXGQ6XGRcZCxcZCsvXSxbIkhIOm1tOnNzIiwvXGRcZDpcZFxkOlxkXGQvXSxbIkhIOm1tIiwvXGRcZDpcZFxkL10sWyJISG1tc3MuU1NTUyIsL1xkXGRcZFxkXGRcZFwuXGQrL10sWyJISG1tc3MsU1NTUyIsL1xkXGRcZFxkXGRcZCxcZCsvXSxbIkhIbW1zcyIsL1xkXGRcZFxkXGRcZC9dLFsiSEhtbSIsL1xkXGRcZFxkL10sWyJISCIsL1xkXGQvXV0sYXNwTmV0SnNvblJlZ2V4PS9eXC8/RGF0ZVwoKFwtP1xkKykvaTtmdW5jdGlvbiBjb25maWdGcm9tSVNPKGNvbmZpZyl7dmFyIGksbCxhbGxvd1RpbWUsZGF0ZUZvcm1hdCx0aW1lRm9ybWF0LHR6Rm9ybWF0LHN0cmluZz1jb25maWcuX2ksbWF0Y2g9ZXh0ZW5kZWRJc29SZWdleC5leGVjKHN0cmluZyl8fGJhc2ljSXNvUmVnZXguZXhlYyhzdHJpbmcpO2lmKG1hdGNoKXtmb3IoZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaXNvPSEwLGk9MCxsPWlzb0RhdGVzLmxlbmd0aDtpPGw7aSsrKWlmKGlzb0RhdGVzW2ldWzFdLmV4ZWMobWF0Y2hbMV0pKXtkYXRlRm9ybWF0PWlzb0RhdGVzW2ldWzBdLGFsbG93VGltZT0hMSE9PWlzb0RhdGVzW2ldWzJdO2JyZWFrfWlmKG51bGw9PWRhdGVGb3JtYXQpcmV0dXJuIHZvaWQoY29uZmlnLl9pc1ZhbGlkPSExKTtpZihtYXRjaFszXSl7Zm9yKGk9MCxsPWlzb1RpbWVzLmxlbmd0aDtpPGw7aSsrKWlmKGlzb1RpbWVzW2ldWzFdLmV4ZWMobWF0Y2hbM10pKXt0aW1lRm9ybWF0PShtYXRjaFsyXXx8IiAiKStpc29UaW1lc1tpXVswXTticmVha31pZihudWxsPT10aW1lRm9ybWF0KXJldHVybiB2b2lkKGNvbmZpZy5faXNWYWxpZD0hMSl9aWYoIWFsbG93VGltZSYmbnVsbCE9dGltZUZvcm1hdClyZXR1cm4gdm9pZChjb25maWcuX2lzVmFsaWQ9ITEpO2lmKG1hdGNoWzRdKXtpZighdHpSZWdleC5leGVjKG1hdGNoWzRdKSlyZXR1cm4gdm9pZChjb25maWcuX2lzVmFsaWQ9ITEpO3R6Rm9ybWF0PSJaIn1jb25maWcuX2Y9ZGF0ZUZvcm1hdCsodGltZUZvcm1hdHx8IiIpKyh0ekZvcm1hdHx8IiIpLGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKX1lbHNlIGNvbmZpZy5faXNWYWxpZD0hMX12YXIgcmZjMjgyMj0vXig/OihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLD9ccyk/KFxkezEsMn0pXHMoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpXHMoXGR7Miw0fSlccyhcZFxkKTooXGRcZCkoPzo6KFxkXGQpKT9ccyg/OihVVHxHTVR8W0VDTVBdW1NEXVQpfChbWnpdKXwoWystXVxkezR9KSkkLztmdW5jdGlvbiBleHRyYWN0RnJvbVJGQzI4MjJTdHJpbmdzKHllYXJTdHIsbW9udGhTdHIsZGF5U3RyLGhvdXJTdHIsbWludXRlU3RyLHNlY29uZFN0cil7dmFyIHJlc3VsdD1bZnVuY3Rpb24oeWVhclN0cil7dmFyIHllYXI9cGFyc2VJbnQoeWVhclN0ciwxMCk7cmV0dXJuIHllYXI8PTQ5PzJlMyt5ZWFyOnllYXI8PTk5OT8xOTAwK3llYXI6eWVhcn0oeWVhclN0ciksZGVmYXVsdExvY2FsZU1vbnRoc1Nob3J0LmluZGV4T2YobW9udGhTdHIpLHBhcnNlSW50KGRheVN0ciwxMCkscGFyc2VJbnQoaG91clN0ciwxMCkscGFyc2VJbnQobWludXRlU3RyLDEwKV07cmV0dXJuIHNlY29uZFN0ciYmcmVzdWx0LnB1c2gocGFyc2VJbnQoc2Vjb25kU3RyLDEwKSkscmVzdWx0fXZhciBvYnNPZmZzZXRzPXtVVDowLEdNVDowLEVEVDotMjQwLEVTVDotMzAwLENEVDotMzAwLENTVDotMzYwLE1EVDotMzYwLE1TVDotNDIwLFBEVDotNDIwLFBTVDotNDgwfTtmdW5jdGlvbiBjb25maWdGcm9tUkZDMjgyMihjb25maWcpe3ZhciBtYXRjaD1yZmMyODIyLmV4ZWMoY29uZmlnLl9pLnJlcGxhY2UoL1woW14pXSpcKXxbXG5cdF0vZywiICIpLnJlcGxhY2UoLyhcc1xzKykvZywiICIpLnJlcGxhY2UoL15cc1xzKi8sIiIpLnJlcGxhY2UoL1xzXHMqJC8sIiIpKTtpZihtYXRjaCl7dmFyIHBhcnNlZEFycmF5PWV4dHJhY3RGcm9tUkZDMjgyMlN0cmluZ3MobWF0Y2hbNF0sbWF0Y2hbM10sbWF0Y2hbMl0sbWF0Y2hbNV0sbWF0Y2hbNl0sbWF0Y2hbN10pO2lmKCFmdW5jdGlvbih3ZWVrZGF5U3RyLHBhcnNlZElucHV0LGNvbmZpZyl7aWYod2Vla2RheVN0cil7dmFyIHdlZWtkYXlQcm92aWRlZD1kZWZhdWx0TG9jYWxlV2Vla2RheXNTaG9ydC5pbmRleE9mKHdlZWtkYXlTdHIpLHdlZWtkYXlBY3R1YWw9bmV3IERhdGUocGFyc2VkSW5wdXRbMF0scGFyc2VkSW5wdXRbMV0scGFyc2VkSW5wdXRbMl0pLmdldERheSgpO2lmKHdlZWtkYXlQcm92aWRlZCE9PXdlZWtkYXlBY3R1YWwpcmV0dXJuIGdldFBhcnNpbmdGbGFncyhjb25maWcpLndlZWtkYXlNaXNtYXRjaD0hMCxjb25maWcuX2lzVmFsaWQ9ITF9cmV0dXJuITB9KG1hdGNoWzFdLHBhcnNlZEFycmF5LGNvbmZpZykpcmV0dXJuO2NvbmZpZy5fYT1wYXJzZWRBcnJheSxjb25maWcuX3R6bT1mdW5jdGlvbihvYnNPZmZzZXQsbWlsaXRhcnlPZmZzZXQsbnVtT2Zmc2V0KXtpZihvYnNPZmZzZXQpcmV0dXJuIG9ic09mZnNldHNbb2JzT2Zmc2V0XTtpZihtaWxpdGFyeU9mZnNldClyZXR1cm4gMDt2YXIgaG09cGFyc2VJbnQobnVtT2Zmc2V0LDEwKSxtPWhtJTEwMCxoPShobS1tKS8xMDA7cmV0dXJuIDYwKmgrbX0obWF0Y2hbOF0sbWF0Y2hbOV0sbWF0Y2hbMTBdKSxjb25maWcuX2Q9Y3JlYXRlVVRDRGF0ZS5hcHBseShudWxsLGNvbmZpZy5fYSksY29uZmlnLl9kLnNldFVUQ01pbnV0ZXMoY29uZmlnLl9kLmdldFVUQ01pbnV0ZXMoKS1jb25maWcuX3R6bSksZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykucmZjMjgyMj0hMH1lbHNlIGNvbmZpZy5faXNWYWxpZD0hMX1mdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyl7aWYoY29uZmlnLl9mIT09aG9va3MuSVNPXzg2MDEpaWYoY29uZmlnLl9mIT09aG9va3MuUkZDXzI4MjIpe2NvbmZpZy5fYT1bXSxnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5lbXB0eT0hMDt2YXIgaSxwYXJzZWRJbnB1dCx0b2tlbnMsdG9rZW4sc2tpcHBlZCxzdHJpbmc9IiIrY29uZmlnLl9pLHN0cmluZ0xlbmd0aD1zdHJpbmcubGVuZ3RoLHRvdGFsUGFyc2VkSW5wdXRMZW5ndGg9MDtmb3IodG9rZW5zPWV4cGFuZEZvcm1hdChjb25maWcuX2YsY29uZmlnLl9sb2NhbGUpLm1hdGNoKGZvcm1hdHRpbmdUb2tlbnMpfHxbXSxpPTA7aTx0b2tlbnMubGVuZ3RoO2krKyl0b2tlbj10b2tlbnNbaV0sKHBhcnNlZElucHV0PShzdHJpbmcubWF0Y2goZ2V0UGFyc2VSZWdleEZvclRva2VuKHRva2VuLGNvbmZpZykpfHxbXSlbMF0pJiYoMDwoc2tpcHBlZD1zdHJpbmcuc3Vic3RyKDAsc3RyaW5nLmluZGV4T2YocGFyc2VkSW5wdXQpKSkubGVuZ3RoJiZnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHNraXBwZWQpLHN0cmluZz1zdHJpbmcuc2xpY2Uoc3RyaW5nLmluZGV4T2YocGFyc2VkSW5wdXQpK3BhcnNlZElucHV0Lmxlbmd0aCksdG90YWxQYXJzZWRJbnB1dExlbmd0aCs9cGFyc2VkSW5wdXQubGVuZ3RoKSxmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl0/KHBhcnNlZElucHV0P2dldFBhcnNpbmdGbGFncyhjb25maWcpLmVtcHR5PSExOmdldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZFRva2Vucy5wdXNoKHRva2VuKSxhZGRUaW1lVG9BcnJheUZyb21Ub2tlbih0b2tlbixwYXJzZWRJbnB1dCxjb25maWcpKTpjb25maWcuX3N0cmljdCYmIXBhcnNlZElucHV0JiZnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRUb2tlbnMucHVzaCh0b2tlbik7Z2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuY2hhcnNMZWZ0T3Zlcj1zdHJpbmdMZW5ndGgtdG90YWxQYXJzZWRJbnB1dExlbmd0aCwwPHN0cmluZy5sZW5ndGgmJmdldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZElucHV0LnB1c2goc3RyaW5nKSxjb25maWcuX2FbSE9VUl08PTEyJiYhMD09PWdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXImJjA8Y29uZmlnLl9hW0hPVVJdJiYoZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91cj12b2lkIDApLGdldFBhcnNpbmdGbGFncyhjb25maWcpLnBhcnNlZERhdGVQYXJ0cz1jb25maWcuX2Euc2xpY2UoMCksZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykubWVyaWRpZW09Y29uZmlnLl9tZXJpZGllbSxjb25maWcuX2FbSE9VUl09KGxvY2FsZT1jb25maWcuX2xvY2FsZSxob3VyPWNvbmZpZy5fYVtIT1VSXSxudWxsPT0obWVyaWRpZW09Y29uZmlnLl9tZXJpZGllbSk/aG91cjpudWxsIT1sb2NhbGUubWVyaWRpZW1Ib3VyP2xvY2FsZS5tZXJpZGllbUhvdXIoaG91cixtZXJpZGllbSk6KG51bGwhPWxvY2FsZS5pc1BNJiYoKGlzUG09bG9jYWxlLmlzUE0obWVyaWRpZW0pKSYmaG91cjwxMiYmKGhvdXIrPTEyKSxpc1BtfHwxMiE9PWhvdXJ8fChob3VyPTApKSxob3VyKSksY29uZmlnRnJvbUFycmF5KGNvbmZpZyksY2hlY2tPdmVyZmxvdyhjb25maWcpfWVsc2UgY29uZmlnRnJvbVJGQzI4MjIoY29uZmlnKTtlbHNlIGNvbmZpZ0Zyb21JU08oY29uZmlnKTt2YXIgbG9jYWxlLGhvdXIsbWVyaWRpZW0saXNQbX1mdW5jdGlvbiBwcmVwYXJlQ29uZmlnKGNvbmZpZyl7dmFyIGlucHV0PWNvbmZpZy5faSxmb3JtYXQ9Y29uZmlnLl9mO3JldHVybiBjb25maWcuX2xvY2FsZT1jb25maWcuX2xvY2FsZXx8Z2V0TG9jYWxlKGNvbmZpZy5fbCksbnVsbD09PWlucHV0fHx2b2lkIDA9PT1mb3JtYXQmJiIiPT09aW5wdXQ/Y3JlYXRlSW52YWxpZCh7bnVsbElucHV0OiEwfSk6KCJzdHJpbmciPT10eXBlb2YgaW5wdXQmJihjb25maWcuX2k9aW5wdXQ9Y29uZmlnLl9sb2NhbGUucHJlcGFyc2UoaW5wdXQpKSxpc01vbWVudChpbnB1dCk/bmV3IE1vbWVudChjaGVja092ZXJmbG93KGlucHV0KSk6KGlzRGF0ZShpbnB1dCk/Y29uZmlnLl9kPWlucHV0OmlzQXJyYXkoZm9ybWF0KT9mdW5jdGlvbihjb25maWcpe3ZhciB0ZW1wQ29uZmlnLGJlc3RNb21lbnQsc2NvcmVUb0JlYXQsaSxjdXJyZW50U2NvcmU7aWYoMD09PWNvbmZpZy5fZi5sZW5ndGgpcmV0dXJuIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRGb3JtYXQ9ITAsY29uZmlnLl9kPW5ldyBEYXRlKE5hTik7Zm9yKGk9MDtpPGNvbmZpZy5fZi5sZW5ndGg7aSsrKWN1cnJlbnRTY29yZT0wLHRlbXBDb25maWc9Y29weUNvbmZpZyh7fSxjb25maWcpLG51bGwhPWNvbmZpZy5fdXNlVVRDJiYodGVtcENvbmZpZy5fdXNlVVRDPWNvbmZpZy5fdXNlVVRDKSx0ZW1wQ29uZmlnLl9mPWNvbmZpZy5fZltpXSxjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KHRlbXBDb25maWcpLGlzVmFsaWQodGVtcENvbmZpZykmJihjdXJyZW50U2NvcmUrPWdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS5jaGFyc0xlZnRPdmVyLGN1cnJlbnRTY29yZSs9MTAqZ2V0UGFyc2luZ0ZsYWdzKHRlbXBDb25maWcpLnVudXNlZFRva2Vucy5sZW5ndGgsZ2V0UGFyc2luZ0ZsYWdzKHRlbXBDb25maWcpLnNjb3JlPWN1cnJlbnRTY29yZSwobnVsbD09c2NvcmVUb0JlYXR8fGN1cnJlbnRTY29yZTxzY29yZVRvQmVhdCkmJihzY29yZVRvQmVhdD1jdXJyZW50U2NvcmUsYmVzdE1vbWVudD10ZW1wQ29uZmlnKSk7ZXh0ZW5kKGNvbmZpZyxiZXN0TW9tZW50fHx0ZW1wQ29uZmlnKX0oY29uZmlnKTpmb3JtYXQ/Y29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdChjb25maWcpOmZ1bmN0aW9uKGNvbmZpZyl7dmFyIGlucHV0PWNvbmZpZy5faTtpc1VuZGVmaW5lZChpbnB1dCk/Y29uZmlnLl9kPW5ldyBEYXRlKGhvb2tzLm5vdygpKTppc0RhdGUoaW5wdXQpP2NvbmZpZy5fZD1uZXcgRGF0ZShpbnB1dC52YWx1ZU9mKCkpOiJzdHJpbmciPT10eXBlb2YgaW5wdXQ/ZnVuY3Rpb24oY29uZmlnKXt2YXIgbWF0Y2hlZD1hc3BOZXRKc29uUmVnZXguZXhlYyhjb25maWcuX2kpO2lmKG51bGwhPT1tYXRjaGVkKXJldHVybiBjb25maWcuX2Q9bmV3IERhdGUoK21hdGNoZWRbMV0pO2NvbmZpZ0Zyb21JU08oY29uZmlnKSwhMT09PWNvbmZpZy5faXNWYWxpZCYmKGRlbGV0ZSBjb25maWcuX2lzVmFsaWQsY29uZmlnRnJvbVJGQzI4MjIoY29uZmlnKSwhMT09PWNvbmZpZy5faXNWYWxpZCYmKGRlbGV0ZSBjb25maWcuX2lzVmFsaWQsaG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soY29uZmlnKSkpfShjb25maWcpOmlzQXJyYXkoaW5wdXQpPyhjb25maWcuX2E9bWFwKGlucHV0LnNsaWNlKDApLGZ1bmN0aW9uKG9iail7cmV0dXJuIHBhcnNlSW50KG9iaiwxMCl9KSxjb25maWdGcm9tQXJyYXkoY29uZmlnKSk6aXNPYmplY3QoaW5wdXQpP2Z1bmN0aW9uKGNvbmZpZyl7aWYoIWNvbmZpZy5fZCl7dmFyIGk9bm9ybWFsaXplT2JqZWN0VW5pdHMoY29uZmlnLl9pKTtjb25maWcuX2E9bWFwKFtpLnllYXIsaS5tb250aCxpLmRheXx8aS5kYXRlLGkuaG91cixpLm1pbnV0ZSxpLnNlY29uZCxpLm1pbGxpc2Vjb25kXSxmdW5jdGlvbihvYmope3JldHVybiBvYmomJnBhcnNlSW50KG9iaiwxMCl9KSxjb25maWdGcm9tQXJyYXkoY29uZmlnKX19KGNvbmZpZyk6aXNOdW1iZXIoaW5wdXQpP2NvbmZpZy5fZD1uZXcgRGF0ZShpbnB1dCk6aG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soY29uZmlnKX0oY29uZmlnKSxpc1ZhbGlkKGNvbmZpZyl8fChjb25maWcuX2Q9bnVsbCksY29uZmlnKSl9ZnVuY3Rpb24gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCxmb3JtYXQsbG9jYWxlLHN0cmljdCxpc1VUQyl7dmFyIHJlcyxjPXt9O3JldHVybiEwIT09bG9jYWxlJiYhMSE9PWxvY2FsZXx8KHN0cmljdD1sb2NhbGUsbG9jYWxlPXZvaWQgMCksKGlzT2JqZWN0KGlucHV0KSYmZnVuY3Rpb24ob2JqKXtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcylyZXR1cm4gMD09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubGVuZ3RoO3ZhciBrO2ZvcihrIGluIG9iailpZihvYmouaGFzT3duUHJvcGVydHkoaykpcmV0dXJuITE7cmV0dXJuITB9KGlucHV0KXx8aXNBcnJheShpbnB1dCkmJjA9PT1pbnB1dC5sZW5ndGgpJiYoaW5wdXQ9dm9pZCAwKSxjLl9pc0FNb21lbnRPYmplY3Q9ITAsYy5fdXNlVVRDPWMuX2lzVVRDPWlzVVRDLGMuX2w9bG9jYWxlLGMuX2k9aW5wdXQsYy5fZj1mb3JtYXQsYy5fc3RyaWN0PXN0cmljdCwocmVzPW5ldyBNb21lbnQoY2hlY2tPdmVyZmxvdyhwcmVwYXJlQ29uZmlnKGMpKSkpLl9uZXh0RGF5JiYocmVzLmFkZCgxLCJkIikscmVzLl9uZXh0RGF5PXZvaWQgMCkscmVzfWZ1bmN0aW9uIGNyZWF0ZUxvY2FsKGlucHV0LGZvcm1hdCxsb2NhbGUsc3RyaWN0KXtyZXR1cm4gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCxmb3JtYXQsbG9jYWxlLHN0cmljdCwhMSl9aG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2s9ZGVwcmVjYXRlKCJ2YWx1ZSBwcm92aWRlZCBpcyBub3QgaW4gYSByZWNvZ25pemVkIFJGQzI4MjIgb3IgSVNPIGZvcm1hdC4gbW9tZW50IGNvbnN0cnVjdGlvbiBmYWxscyBiYWNrIHRvIGpzIERhdGUoKSwgd2hpY2ggaXMgbm90IHJlbGlhYmxlIGFjcm9zcyBhbGwgYnJvd3NlcnMgYW5kIHZlcnNpb25zLiBOb24gUkZDMjgyMi9JU08gZGF0ZSBmb3JtYXRzIGFyZSBkaXNjb3VyYWdlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGFuIHVwY29taW5nIG1ham9yIHJlbGVhc2UuIFBsZWFzZSByZWZlciB0byBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2pzLWRhdGUvIGZvciBtb3JlIGluZm8uIixmdW5jdGlvbihjb25maWcpe2NvbmZpZy5fZD1uZXcgRGF0ZShjb25maWcuX2krKGNvbmZpZy5fdXNlVVRDPyIgVVRDIjoiIikpfSksaG9va3MuSVNPXzg2MDE9ZnVuY3Rpb24oKXt9LGhvb2tzLlJGQ18yODIyPWZ1bmN0aW9uKCl7fTt2YXIgcHJvdG90eXBlTWluPWRlcHJlY2F0ZSgibW9tZW50KCkubWluIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWF4IGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvbWluLW1heC8iLGZ1bmN0aW9uKCl7dmFyIG90aGVyPWNyZWF0ZUxvY2FsLmFwcGx5KG51bGwsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJm90aGVyLmlzVmFsaWQoKT9vdGhlcjx0aGlzP3RoaXM6b3RoZXI6Y3JlYXRlSW52YWxpZCgpfSkscHJvdG90eXBlTWF4PWRlcHJlY2F0ZSgibW9tZW50KCkubWF4IGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWluIGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvbWluLW1heC8iLGZ1bmN0aW9uKCl7dmFyIG90aGVyPWNyZWF0ZUxvY2FsLmFwcGx5KG51bGwsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJm90aGVyLmlzVmFsaWQoKT90aGlzPG90aGVyP3RoaXM6b3RoZXI6Y3JlYXRlSW52YWxpZCgpfSk7ZnVuY3Rpb24gcGlja0J5KGZuLG1vbWVudHMpe3ZhciByZXMsaTtpZigxPT09bW9tZW50cy5sZW5ndGgmJmlzQXJyYXkobW9tZW50c1swXSkmJihtb21lbnRzPW1vbWVudHNbMF0pLCFtb21lbnRzLmxlbmd0aClyZXR1cm4gY3JlYXRlTG9jYWwoKTtmb3IocmVzPW1vbWVudHNbMF0saT0xO2k8bW9tZW50cy5sZW5ndGg7KytpKW1vbWVudHNbaV0uaXNWYWxpZCgpJiYhbW9tZW50c1tpXVtmbl0ocmVzKXx8KHJlcz1tb21lbnRzW2ldKTtyZXR1cm4gcmVzfXZhciBvcmRlcmluZz1bInllYXIiLCJxdWFydGVyIiwibW9udGgiLCJ3ZWVrIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsIm1pbGxpc2Vjb25kIl07ZnVuY3Rpb24gRHVyYXRpb24oZHVyYXRpb24pe3ZhciBub3JtYWxpemVkSW5wdXQ9bm9ybWFsaXplT2JqZWN0VW5pdHMoZHVyYXRpb24pLHllYXJzPW5vcm1hbGl6ZWRJbnB1dC55ZWFyfHwwLHF1YXJ0ZXJzPW5vcm1hbGl6ZWRJbnB1dC5xdWFydGVyfHwwLG1vbnRocz1ub3JtYWxpemVkSW5wdXQubW9udGh8fDAsd2Vla3M9bm9ybWFsaXplZElucHV0LndlZWt8fG5vcm1hbGl6ZWRJbnB1dC5pc29XZWVrfHwwLGRheXM9bm9ybWFsaXplZElucHV0LmRheXx8MCxob3Vycz1ub3JtYWxpemVkSW5wdXQuaG91cnx8MCxtaW51dGVzPW5vcm1hbGl6ZWRJbnB1dC5taW51dGV8fDAsc2Vjb25kcz1ub3JtYWxpemVkSW5wdXQuc2Vjb25kfHwwLG1pbGxpc2Vjb25kcz1ub3JtYWxpemVkSW5wdXQubWlsbGlzZWNvbmR8fDA7dGhpcy5faXNWYWxpZD1mdW5jdGlvbihtKXtmb3IodmFyIGtleSBpbiBtKWlmKC0xPT09aW5kZXhPZi5jYWxsKG9yZGVyaW5nLGtleSl8fG51bGwhPW1ba2V5XSYmaXNOYU4obVtrZXldKSlyZXR1cm4hMTtmb3IodmFyIHVuaXRIYXNEZWNpbWFsPSExLGk9MDtpPG9yZGVyaW5nLmxlbmd0aDsrK2kpaWYobVtvcmRlcmluZ1tpXV0pe2lmKHVuaXRIYXNEZWNpbWFsKXJldHVybiExO3BhcnNlRmxvYXQobVtvcmRlcmluZ1tpXV0pIT09dG9JbnQobVtvcmRlcmluZ1tpXV0pJiYodW5pdEhhc0RlY2ltYWw9ITApfXJldHVybiEwfShub3JtYWxpemVkSW5wdXQpLHRoaXMuX21pbGxpc2Vjb25kcz0rbWlsbGlzZWNvbmRzKzFlMypzZWNvbmRzKzZlNCptaW51dGVzKzFlMypob3Vycyo2MCo2MCx0aGlzLl9kYXlzPStkYXlzKzcqd2Vla3MsdGhpcy5fbW9udGhzPSttb250aHMrMypxdWFydGVycysxMip5ZWFycyx0aGlzLl9kYXRhPXt9LHRoaXMuX2xvY2FsZT1nZXRMb2NhbGUoKSx0aGlzLl9idWJibGUoKX1mdW5jdGlvbiBpc0R1cmF0aW9uKG9iail7cmV0dXJuIG9iaiBpbnN0YW5jZW9mIER1cmF0aW9ufWZ1bmN0aW9uIGFic1JvdW5kKG51bWJlcil7cmV0dXJuIG51bWJlcjwwPy0xKk1hdGgucm91bmQoLTEqbnVtYmVyKTpNYXRoLnJvdW5kKG51bWJlcil9ZnVuY3Rpb24gb2Zmc2V0KHRva2VuLHNlcGFyYXRvcil7YWRkRm9ybWF0VG9rZW4odG9rZW4sMCwwLGZ1bmN0aW9uKCl7dmFyIG9mZnNldD10aGlzLnV0Y09mZnNldCgpLHNpZ249IisiO3JldHVybiBvZmZzZXQ8MCYmKG9mZnNldD0tb2Zmc2V0LHNpZ249Ii0iKSxzaWduK3plcm9GaWxsKH5+KG9mZnNldC82MCksMikrc2VwYXJhdG9yK3plcm9GaWxsKH5+b2Zmc2V0JTYwLDIpfSl9b2Zmc2V0KCJaIiwiOiIpLG9mZnNldCgiWloiLCIiKSxhZGRSZWdleFRva2VuKCJaIixtYXRjaFNob3J0T2Zmc2V0KSxhZGRSZWdleFRva2VuKCJaWiIsbWF0Y2hTaG9ydE9mZnNldCksYWRkUGFyc2VUb2tlbihbIloiLCJaWiJdLGZ1bmN0aW9uKGlucHV0LGFycmF5LGNvbmZpZyl7Y29uZmlnLl91c2VVVEM9ITAsY29uZmlnLl90em09b2Zmc2V0RnJvbVN0cmluZyhtYXRjaFNob3J0T2Zmc2V0LGlucHV0KX0pO3ZhciBjaHVua09mZnNldD0vKFtcK1wtXXxcZFxkKS9naTtmdW5jdGlvbiBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoZXIsc3RyaW5nKXt2YXIgbWF0Y2hlcz0oc3RyaW5nfHwiIikubWF0Y2gobWF0Y2hlcik7aWYobnVsbD09PW1hdGNoZXMpcmV0dXJuIG51bGw7dmFyIGNodW5rPW1hdGNoZXNbbWF0Y2hlcy5sZW5ndGgtMV18fFtdLHBhcnRzPShjaHVuaysiIikubWF0Y2goY2h1bmtPZmZzZXQpfHxbIi0iLDAsMF0sbWludXRlcz02MCpwYXJ0c1sxXSt0b0ludChwYXJ0c1syXSk7cmV0dXJuIDA9PT1taW51dGVzPzA6IisiPT09cGFydHNbMF0/bWludXRlczotbWludXRlc31mdW5jdGlvbiBjbG9uZVdpdGhPZmZzZXQoaW5wdXQsbW9kZWwpe3ZhciByZXMsZGlmZjtyZXR1cm4gbW9kZWwuX2lzVVRDPyhyZXM9bW9kZWwuY2xvbmUoKSxkaWZmPShpc01vbWVudChpbnB1dCl8fGlzRGF0ZShpbnB1dCk/aW5wdXQudmFsdWVPZigpOmNyZWF0ZUxvY2FsKGlucHV0KS52YWx1ZU9mKCkpLXJlcy52YWx1ZU9mKCkscmVzLl9kLnNldFRpbWUocmVzLl9kLnZhbHVlT2YoKStkaWZmKSxob29rcy51cGRhdGVPZmZzZXQocmVzLCExKSxyZXMpOmNyZWF0ZUxvY2FsKGlucHV0KS5sb2NhbCgpfWZ1bmN0aW9uIGdldERhdGVPZmZzZXQobSl7cmV0dXJuIDE1Ki1NYXRoLnJvdW5kKG0uX2QuZ2V0VGltZXpvbmVPZmZzZXQoKS8xNSl9ZnVuY3Rpb24gaXNVdGMoKXtyZXR1cm4hIXRoaXMuaXNWYWxpZCgpJiZ0aGlzLl9pc1VUQyYmMD09PXRoaXMuX29mZnNldH1ob29rcy51cGRhdGVPZmZzZXQ9ZnVuY3Rpb24oKXt9O3ZhciBhc3BOZXRSZWdleD0vXihcLXxcKyk/KD86KFxkKilbLiBdKT8oXGQrKVw6KFxkKykoPzpcOihcZCspKFwuXGQqKT8pPyQvLGlzb1JlZ2V4PS9eKC18XCspP1AoPzooWy0rXT9bMC05LC5dKilZKT8oPzooWy0rXT9bMC05LC5dKilNKT8oPzooWy0rXT9bMC05LC5dKilXKT8oPzooWy0rXT9bMC05LC5dKilEKT8oPzpUKD86KFstK10/WzAtOSwuXSopSCk/KD86KFstK10/WzAtOSwuXSopTSk/KD86KFstK10/WzAtOSwuXSopUyk/KT8kLztmdW5jdGlvbiBjcmVhdGVEdXJhdGlvbihpbnB1dCxrZXkpe3ZhciBzaWduLHJldCxkaWZmUmVzLGJhc2Usb3RoZXIscmVzLGR1cmF0aW9uPWlucHV0LG1hdGNoPW51bGw7cmV0dXJuIGlzRHVyYXRpb24oaW5wdXQpP2R1cmF0aW9uPXttczppbnB1dC5fbWlsbGlzZWNvbmRzLGQ6aW5wdXQuX2RheXMsTTppbnB1dC5fbW9udGhzfTppc051bWJlcihpbnB1dCk/KGR1cmF0aW9uPXt9LGtleT9kdXJhdGlvbltrZXldPWlucHV0OmR1cmF0aW9uLm1pbGxpc2Vjb25kcz1pbnB1dCk6KG1hdGNoPWFzcE5ldFJlZ2V4LmV4ZWMoaW5wdXQpKT8oc2lnbj0iLSI9PT1tYXRjaFsxXT8tMToxLGR1cmF0aW9uPXt5OjAsZDp0b0ludChtYXRjaFtEQVRFXSkqc2lnbixoOnRvSW50KG1hdGNoW0hPVVJdKSpzaWduLG06dG9JbnQobWF0Y2hbTUlOVVRFXSkqc2lnbixzOnRvSW50KG1hdGNoW1NFQ09ORF0pKnNpZ24sbXM6dG9JbnQoYWJzUm91bmQoMWUzKm1hdGNoW01JTExJU0VDT05EXSkpKnNpZ259KToobWF0Y2g9aXNvUmVnZXguZXhlYyhpbnB1dCkpPyhzaWduPSItIj09PW1hdGNoWzFdPy0xOjEsZHVyYXRpb249e3k6cGFyc2VJc28obWF0Y2hbMl0sc2lnbiksTTpwYXJzZUlzbyhtYXRjaFszXSxzaWduKSx3OnBhcnNlSXNvKG1hdGNoWzRdLHNpZ24pLGQ6cGFyc2VJc28obWF0Y2hbNV0sc2lnbiksaDpwYXJzZUlzbyhtYXRjaFs2XSxzaWduKSxtOnBhcnNlSXNvKG1hdGNoWzddLHNpZ24pLHM6cGFyc2VJc28obWF0Y2hbOF0sc2lnbil9KTpudWxsPT1kdXJhdGlvbj9kdXJhdGlvbj17fToib2JqZWN0Ij09dHlwZW9mIGR1cmF0aW9uJiYoImZyb20iaW4gZHVyYXRpb258fCJ0byJpbiBkdXJhdGlvbikmJihiYXNlPWNyZWF0ZUxvY2FsKGR1cmF0aW9uLmZyb20pLG90aGVyPWNyZWF0ZUxvY2FsKGR1cmF0aW9uLnRvKSxkaWZmUmVzPWJhc2UuaXNWYWxpZCgpJiZvdGhlci5pc1ZhbGlkKCk/KG90aGVyPWNsb25lV2l0aE9mZnNldChvdGhlcixiYXNlKSxiYXNlLmlzQmVmb3JlKG90aGVyKT9yZXM9cG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShiYXNlLG90aGVyKTooKHJlcz1wb3NpdGl2ZU1vbWVudHNEaWZmZXJlbmNlKG90aGVyLGJhc2UpKS5taWxsaXNlY29uZHM9LXJlcy5taWxsaXNlY29uZHMscmVzLm1vbnRocz0tcmVzLm1vbnRocykscmVzKTp7bWlsbGlzZWNvbmRzOjAsbW9udGhzOjB9LChkdXJhdGlvbj17fSkubXM9ZGlmZlJlcy5taWxsaXNlY29uZHMsZHVyYXRpb24uTT1kaWZmUmVzLm1vbnRocykscmV0PW5ldyBEdXJhdGlvbihkdXJhdGlvbiksaXNEdXJhdGlvbihpbnB1dCkmJmhhc093blByb3AoaW5wdXQsIl9sb2NhbGUiKSYmKHJldC5fbG9jYWxlPWlucHV0Ll9sb2NhbGUpLHJldH1mdW5jdGlvbiBwYXJzZUlzbyhpbnAsc2lnbil7dmFyIHJlcz1pbnAmJnBhcnNlRmxvYXQoaW5wLnJlcGxhY2UoIiwiLCIuIikpO3JldHVybihpc05hTihyZXMpPzA6cmVzKSpzaWdufWZ1bmN0aW9uIHBvc2l0aXZlTW9tZW50c0RpZmZlcmVuY2UoYmFzZSxvdGhlcil7dmFyIHJlcz17fTtyZXR1cm4gcmVzLm1vbnRocz1vdGhlci5tb250aCgpLWJhc2UubW9udGgoKSsxMioob3RoZXIueWVhcigpLWJhc2UueWVhcigpKSxiYXNlLmNsb25lKCkuYWRkKHJlcy5tb250aHMsIk0iKS5pc0FmdGVyKG90aGVyKSYmLS1yZXMubW9udGhzLHJlcy5taWxsaXNlY29uZHM9K290aGVyLStiYXNlLmNsb25lKCkuYWRkKHJlcy5tb250aHMsIk0iKSxyZXN9ZnVuY3Rpb24gY3JlYXRlQWRkZXIoZGlyZWN0aW9uLG5hbWUpe3JldHVybiBmdW5jdGlvbih2YWwscGVyaW9kKXt2YXIgdG1wO3JldHVybiBudWxsPT09cGVyaW9kfHxpc05hTigrcGVyaW9kKXx8KGRlcHJlY2F0ZVNpbXBsZShuYW1lLCJtb21lbnQoKS4iK25hbWUrIihwZXJpb2QsIG51bWJlcikgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBtb21lbnQoKS4iK25hbWUrIihudW1iZXIsIHBlcmlvZCkuIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2FkZC1pbnZlcnRlZC1wYXJhbS8gZm9yIG1vcmUgaW5mby4iKSx0bXA9dmFsLHZhbD1wZXJpb2QscGVyaW9kPXRtcCksYWRkU3VidHJhY3QodGhpcyxjcmVhdGVEdXJhdGlvbih2YWw9InN0cmluZyI9PXR5cGVvZiB2YWw/K3ZhbDp2YWwscGVyaW9kKSxkaXJlY3Rpb24pLHRoaXN9fWZ1bmN0aW9uIGFkZFN1YnRyYWN0KG1vbSxkdXJhdGlvbixpc0FkZGluZyx1cGRhdGVPZmZzZXQpe3ZhciBtaWxsaXNlY29uZHM9ZHVyYXRpb24uX21pbGxpc2Vjb25kcyxkYXlzPWFic1JvdW5kKGR1cmF0aW9uLl9kYXlzKSxtb250aHM9YWJzUm91bmQoZHVyYXRpb24uX21vbnRocyk7bW9tLmlzVmFsaWQoKSYmKHVwZGF0ZU9mZnNldD1udWxsPT11cGRhdGVPZmZzZXR8fHVwZGF0ZU9mZnNldCxtb250aHMmJnNldE1vbnRoKG1vbSxnZXQobW9tLCJNb250aCIpK21vbnRocyppc0FkZGluZyksZGF5cyYmc2V0JDEobW9tLCJEYXRlIixnZXQobW9tLCJEYXRlIikrZGF5cyppc0FkZGluZyksbWlsbGlzZWNvbmRzJiZtb20uX2Quc2V0VGltZShtb20uX2QudmFsdWVPZigpK21pbGxpc2Vjb25kcyppc0FkZGluZyksdXBkYXRlT2Zmc2V0JiZob29rcy51cGRhdGVPZmZzZXQobW9tLGRheXN8fG1vbnRocykpfWNyZWF0ZUR1cmF0aW9uLmZuPUR1cmF0aW9uLnByb3RvdHlwZSxjcmVhdGVEdXJhdGlvbi5pbnZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuIGNyZWF0ZUR1cmF0aW9uKE5hTil9O3ZhciBhZGQ9Y3JlYXRlQWRkZXIoMSwiYWRkIiksc3VidHJhY3Q9Y3JlYXRlQWRkZXIoLTEsInN1YnRyYWN0Iik7ZnVuY3Rpb24gbW9udGhEaWZmKGEsYil7dmFyIGFuY2hvcjIsYWRqdXN0LHdob2xlTW9udGhEaWZmPTEyKihiLnllYXIoKS1hLnllYXIoKSkrKGIubW9udGgoKS1hLm1vbnRoKCkpLGFuY2hvcj1hLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmLCJtb250aHMiKTtyZXR1cm4gYWRqdXN0PWItYW5jaG9yPDA/KGFuY2hvcjI9YS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZi0xLCJtb250aHMiKSwoYi1hbmNob3IpLyhhbmNob3ItYW5jaG9yMikpOihhbmNob3IyPWEuY2xvbmUoKS5hZGQod2hvbGVNb250aERpZmYrMSwibW9udGhzIiksKGItYW5jaG9yKS8oYW5jaG9yMi1hbmNob3IpKSwtKHdob2xlTW9udGhEaWZmK2FkanVzdCl8fDB9ZnVuY3Rpb24gbG9jYWxlKGtleSl7dmFyIG5ld0xvY2FsZURhdGE7cmV0dXJuIHZvaWQgMD09PWtleT90aGlzLl9sb2NhbGUuX2FiYnI6KG51bGwhPShuZXdMb2NhbGVEYXRhPWdldExvY2FsZShrZXkpKSYmKHRoaXMuX2xvY2FsZT1uZXdMb2NhbGVEYXRhKSx0aGlzKX1ob29rcy5kZWZhdWx0Rm9ybWF0PSJZWVlZLU1NLUREVEhIOm1tOnNzWiIsaG9va3MuZGVmYXVsdEZvcm1hdFV0Yz0iWVlZWS1NTS1ERFRISDptbTpzc1taXSI7dmFyIGxhbmc9ZGVwcmVjYXRlKCJtb21lbnQoKS5sYW5nKCkgaXMgZGVwcmVjYXRlZC4gSW5zdGVhZCwgdXNlIG1vbWVudCgpLmxvY2FsZURhdGEoKSB0byBnZXQgdGhlIGxhbmd1YWdlIGNvbmZpZ3VyYXRpb24uIFVzZSBtb21lbnQoKS5sb2NhbGUoKSB0byBjaGFuZ2UgbGFuZ3VhZ2VzLiIsZnVuY3Rpb24oa2V5KXtyZXR1cm4gdm9pZCAwPT09a2V5P3RoaXMubG9jYWxlRGF0YSgpOnRoaXMubG9jYWxlKGtleSl9KTtmdW5jdGlvbiBsb2NhbGVEYXRhKCl7cmV0dXJuIHRoaXMuX2xvY2FsZX12YXIgTVNfUEVSXzQwMF9ZRUFSUz0xMjYyMjc4MDhlNTtmdW5jdGlvbiBtb2QkMShkaXZpZGVuZCxkaXZpc29yKXtyZXR1cm4oZGl2aWRlbmQlZGl2aXNvcitkaXZpc29yKSVkaXZpc29yfWZ1bmN0aW9uIGxvY2FsU3RhcnRPZkRhdGUoeSxtLGQpe3JldHVybiB5PDEwMCYmMDw9eT9uZXcgRGF0ZSh5KzQwMCxtLGQpLU1TX1BFUl80MDBfWUVBUlM6bmV3IERhdGUoeSxtLGQpLnZhbHVlT2YoKX1mdW5jdGlvbiB1dGNTdGFydE9mRGF0ZSh5LG0sZCl7cmV0dXJuIHk8MTAwJiYwPD15P0RhdGUuVVRDKHkrNDAwLG0sZCktTVNfUEVSXzQwMF9ZRUFSUzpEYXRlLlVUQyh5LG0sZCl9ZnVuY3Rpb24gYWRkV2Vla1llYXJGb3JtYXRUb2tlbih0b2tlbixnZXR0ZXIpe2FkZEZvcm1hdFRva2VuKDAsW3Rva2VuLHRva2VuLmxlbmd0aF0sMCxnZXR0ZXIpfWZ1bmN0aW9uIGdldFNldFdlZWtZZWFySGVscGVyKGlucHV0LHdlZWssd2Vla2RheSxkb3csZG95KXt2YXIgd2Vla3NUYXJnZXQ7cmV0dXJuIG51bGw9PWlucHV0P3dlZWtPZlllYXIodGhpcyxkb3csZG95KS55ZWFyOigod2Vla3NUYXJnZXQ9d2Vla3NJblllYXIoaW5wdXQsZG93LGRveSkpPHdlZWsmJih3ZWVrPXdlZWtzVGFyZ2V0KSxmdW5jdGlvbih3ZWVrWWVhcix3ZWVrLHdlZWtkYXksZG93LGRveSl7dmFyIGRheU9mWWVhckRhdGE9ZGF5T2ZZZWFyRnJvbVdlZWtzKHdlZWtZZWFyLHdlZWssd2Vla2RheSxkb3csZG95KSxkYXRlPWNyZWF0ZVVUQ0RhdGUoZGF5T2ZZZWFyRGF0YS55ZWFyLDAsZGF5T2ZZZWFyRGF0YS5kYXlPZlllYXIpO3JldHVybiB0aGlzLnllYXIoZGF0ZS5nZXRVVENGdWxsWWVhcigpKSx0aGlzLm1vbnRoKGRhdGUuZ2V0VVRDTW9udGgoKSksdGhpcy5kYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpKSx0aGlzfS5jYWxsKHRoaXMsaW5wdXQsd2Vlayx3ZWVrZGF5LGRvdyxkb3kpKX1hZGRGb3JtYXRUb2tlbigwLFsiZ2ciLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWVrWWVhcigpJTEwMH0pLGFkZEZvcm1hdFRva2VuKDAsWyJHRyIsMl0sMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzb1dlZWtZZWFyKCklMTAwfSksYWRkV2Vla1llYXJGb3JtYXRUb2tlbigiZ2dnZyIsIndlZWtZZWFyIiksYWRkV2Vla1llYXJGb3JtYXRUb2tlbigiZ2dnZ2ciLCJ3ZWVrWWVhciIpLGFkZFdlZWtZZWFyRm9ybWF0VG9rZW4oIkdHR0ciLCJpc29XZWVrWWVhciIpLGFkZFdlZWtZZWFyRm9ybWF0VG9rZW4oIkdHR0dHIiwiaXNvV2Vla1llYXIiKSxhZGRVbml0QWxpYXMoIndlZWtZZWFyIiwiZ2ciKSxhZGRVbml0QWxpYXMoImlzb1dlZWtZZWFyIiwiR0ciKSxhZGRVbml0UHJpb3JpdHkoIndlZWtZZWFyIiwxKSxhZGRVbml0UHJpb3JpdHkoImlzb1dlZWtZZWFyIiwxKSxhZGRSZWdleFRva2VuKCJHIixtYXRjaFNpZ25lZCksYWRkUmVnZXhUb2tlbigiZyIsbWF0Y2hTaWduZWQpLGFkZFJlZ2V4VG9rZW4oIkdHIixtYXRjaDF0bzIsbWF0Y2gyKSxhZGRSZWdleFRva2VuKCJnZyIsbWF0Y2gxdG8yLG1hdGNoMiksYWRkUmVnZXhUb2tlbigiR0dHRyIsbWF0Y2gxdG80LG1hdGNoNCksYWRkUmVnZXhUb2tlbigiZ2dnZyIsbWF0Y2gxdG80LG1hdGNoNCksYWRkUmVnZXhUb2tlbigiR0dHR0ciLG1hdGNoMXRvNixtYXRjaDYpLGFkZFJlZ2V4VG9rZW4oImdnZ2dnIixtYXRjaDF0bzYsbWF0Y2g2KSxhZGRXZWVrUGFyc2VUb2tlbihbImdnZ2ciLCJnZ2dnZyIsIkdHR0ciLCJHR0dHRyJdLGZ1bmN0aW9uKGlucHV0LHdlZWssY29uZmlnLHRva2VuKXt3ZWVrW3Rva2VuLnN1YnN0cigwLDIpXT10b0ludChpbnB1dCl9KSxhZGRXZWVrUGFyc2VUb2tlbihbImdnIiwiR0ciXSxmdW5jdGlvbihpbnB1dCx3ZWVrLGNvbmZpZyx0b2tlbil7d2Vla1t0b2tlbl09aG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpfSksYWRkRm9ybWF0VG9rZW4oIlEiLDAsIlFvIiwicXVhcnRlciIpLGFkZFVuaXRBbGlhcygicXVhcnRlciIsIlEiKSxhZGRVbml0UHJpb3JpdHkoInF1YXJ0ZXIiLDcpLGFkZFJlZ2V4VG9rZW4oIlEiLG1hdGNoMSksYWRkUGFyc2VUb2tlbigiUSIsZnVuY3Rpb24oaW5wdXQsYXJyYXkpe2FycmF5W01PTlRIXT0zKih0b0ludChpbnB1dCktMSl9KSxhZGRGb3JtYXRUb2tlbigiRCIsWyJERCIsMl0sIkRvIiwiZGF0ZSIpLGFkZFVuaXRBbGlhcygiZGF0ZSIsIkQiKSxhZGRVbml0UHJpb3JpdHkoImRhdGUiLDkpLGFkZFJlZ2V4VG9rZW4oIkQiLG1hdGNoMXRvMiksYWRkUmVnZXhUb2tlbigiREQiLG1hdGNoMXRvMixtYXRjaDIpLGFkZFJlZ2V4VG9rZW4oIkRvIixmdW5jdGlvbihpc1N0cmljdCxsb2NhbGUpe3JldHVybiBpc1N0cmljdD9sb2NhbGUuX2RheU9mTW9udGhPcmRpbmFsUGFyc2V8fGxvY2FsZS5fb3JkaW5hbFBhcnNlOmxvY2FsZS5fZGF5T2ZNb250aE9yZGluYWxQYXJzZUxlbmllbnR9KSxhZGRQYXJzZVRva2VuKFsiRCIsIkREIl0sREFURSksYWRkUGFyc2VUb2tlbigiRG8iLGZ1bmN0aW9uKGlucHV0LGFycmF5KXthcnJheVtEQVRFXT10b0ludChpbnB1dC5tYXRjaChtYXRjaDF0bzIpWzBdKX0pO3ZhciBnZXRTZXREYXlPZk1vbnRoPW1ha2VHZXRTZXQoIkRhdGUiLCEwKTthZGRGb3JtYXRUb2tlbigiREREIixbIkREREQiLDNdLCJERERvIiwiZGF5T2ZZZWFyIiksYWRkVW5pdEFsaWFzKCJkYXlPZlllYXIiLCJEREQiKSxhZGRVbml0UHJpb3JpdHkoImRheU9mWWVhciIsNCksYWRkUmVnZXhUb2tlbigiREREIixtYXRjaDF0bzMpLGFkZFJlZ2V4VG9rZW4oIkREREQiLG1hdGNoMyksYWRkUGFyc2VUb2tlbihbIkRERCIsIkREREQiXSxmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe2NvbmZpZy5fZGF5T2ZZZWFyPXRvSW50KGlucHV0KX0pLGFkZEZvcm1hdFRva2VuKCJtIixbIm1tIiwyXSwwLCJtaW51dGUiKSxhZGRVbml0QWxpYXMoIm1pbnV0ZSIsIm0iKSxhZGRVbml0UHJpb3JpdHkoIm1pbnV0ZSIsMTQpLGFkZFJlZ2V4VG9rZW4oIm0iLG1hdGNoMXRvMiksYWRkUmVnZXhUb2tlbigibW0iLG1hdGNoMXRvMixtYXRjaDIpLGFkZFBhcnNlVG9rZW4oWyJtIiwibW0iXSxNSU5VVEUpO3ZhciBnZXRTZXRNaW51dGU9bWFrZUdldFNldCgiTWludXRlcyIsITEpO2FkZEZvcm1hdFRva2VuKCJzIixbInNzIiwyXSwwLCJzZWNvbmQiKSxhZGRVbml0QWxpYXMoInNlY29uZCIsInMiKSxhZGRVbml0UHJpb3JpdHkoInNlY29uZCIsMTUpLGFkZFJlZ2V4VG9rZW4oInMiLG1hdGNoMXRvMiksYWRkUmVnZXhUb2tlbigic3MiLG1hdGNoMXRvMixtYXRjaDIpLGFkZFBhcnNlVG9rZW4oWyJzIiwic3MiXSxTRUNPTkQpO3ZhciB0b2tlbixnZXRTZXRTZWNvbmQ9bWFrZUdldFNldCgiU2Vjb25kcyIsITEpO2ZvcihhZGRGb3JtYXRUb2tlbigiUyIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJufn4odGhpcy5taWxsaXNlY29uZCgpLzEwMCl9KSxhZGRGb3JtYXRUb2tlbigwLFsiU1MiLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm5+fih0aGlzLm1pbGxpc2Vjb25kKCkvMTApfSksYWRkRm9ybWF0VG9rZW4oMCxbIlNTUyIsM10sMCwibWlsbGlzZWNvbmQiKSxhZGRGb3JtYXRUb2tlbigwLFsiU1NTUyIsNF0sMCxmdW5jdGlvbigpe3JldHVybiAxMCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxhZGRGb3JtYXRUb2tlbigwLFsiU1NTU1MiLDVdLDAsZnVuY3Rpb24oKXtyZXR1cm4gMTAwKnRoaXMubWlsbGlzZWNvbmQoKX0pLGFkZEZvcm1hdFRva2VuKDAsWyJTU1NTU1MiLDZdLDAsZnVuY3Rpb24oKXtyZXR1cm4gMWUzKnRoaXMubWlsbGlzZWNvbmQoKX0pLGFkZEZvcm1hdFRva2VuKDAsWyJTU1NTU1NTIiw3XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxhZGRGb3JtYXRUb2tlbigwLFsiU1NTU1NTU1MiLDhdLDAsZnVuY3Rpb24oKXtyZXR1cm4gMWU1KnRoaXMubWlsbGlzZWNvbmQoKX0pLGFkZEZvcm1hdFRva2VuKDAsWyJTU1NTU1NTU1MiLDldLDAsZnVuY3Rpb24oKXtyZXR1cm4gMWU2KnRoaXMubWlsbGlzZWNvbmQoKX0pLGFkZFVuaXRBbGlhcygibWlsbGlzZWNvbmQiLCJtcyIpLGFkZFVuaXRQcmlvcml0eSgibWlsbGlzZWNvbmQiLDE2KSxhZGRSZWdleFRva2VuKCJTIixtYXRjaDF0bzMsbWF0Y2gxKSxhZGRSZWdleFRva2VuKCJTUyIsbWF0Y2gxdG8zLG1hdGNoMiksYWRkUmVnZXhUb2tlbigiU1NTIixtYXRjaDF0bzMsbWF0Y2gzKSx0b2tlbj0iU1NTUyI7dG9rZW4ubGVuZ3RoPD05O3Rva2VuKz0iUyIpYWRkUmVnZXhUb2tlbih0b2tlbixtYXRjaFVuc2lnbmVkKTtmdW5jdGlvbiBwYXJzZU1zKGlucHV0LGFycmF5KXthcnJheVtNSUxMSVNFQ09ORF09dG9JbnQoMWUzKigiMC4iK2lucHV0KSl9Zm9yKHRva2VuPSJTIjt0b2tlbi5sZW5ndGg8PTk7dG9rZW4rPSJTIilhZGRQYXJzZVRva2VuKHRva2VuLHBhcnNlTXMpO3ZhciBnZXRTZXRNaWxsaXNlY29uZD1tYWtlR2V0U2V0KCJNaWxsaXNlY29uZHMiLCExKTthZGRGb3JtYXRUb2tlbigieiIsMCwwLCJ6b25lQWJiciIpLGFkZEZvcm1hdFRva2VuKCJ6eiIsMCwwLCJ6b25lTmFtZSIpO3ZhciBwcm90bz1Nb21lbnQucHJvdG90eXBlO2Z1bmN0aW9uIHByZVBhcnNlUG9zdEZvcm1hdChzdHJpbmcpe3JldHVybiBzdHJpbmd9cHJvdG8uYWRkPWFkZCxwcm90by5jYWxlbmRhcj1mdW5jdGlvbih0aW1lLGZvcm1hdHMpe3ZhciBub3c9dGltZXx8Y3JlYXRlTG9jYWwoKSxzb2Q9Y2xvbmVXaXRoT2Zmc2V0KG5vdyx0aGlzKS5zdGFydE9mKCJkYXkiKSxmb3JtYXQ9aG9va3MuY2FsZW5kYXJGb3JtYXQodGhpcyxzb2QpfHwic2FtZUVsc2UiLG91dHB1dD1mb3JtYXRzJiYoaXNGdW5jdGlvbihmb3JtYXRzW2Zvcm1hdF0pP2Zvcm1hdHNbZm9ybWF0XS5jYWxsKHRoaXMsbm93KTpmb3JtYXRzW2Zvcm1hdF0pO3JldHVybiB0aGlzLmZvcm1hdChvdXRwdXR8fHRoaXMubG9jYWxlRGF0YSgpLmNhbGVuZGFyKGZvcm1hdCx0aGlzLGNyZWF0ZUxvY2FsKG5vdykpKX0scHJvdG8uY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE1vbWVudCh0aGlzKX0scHJvdG8uZGlmZj1mdW5jdGlvbihpbnB1dCx1bml0cyxhc0Zsb2F0KXt2YXIgdGhhdCx6b25lRGVsdGEsb3V0cHV0O2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gTmFOO2lmKCEodGhhdD1jbG9uZVdpdGhPZmZzZXQoaW5wdXQsdGhpcykpLmlzVmFsaWQoKSlyZXR1cm4gTmFOO3N3aXRjaCh6b25lRGVsdGE9NmU0Kih0aGF0LnV0Y09mZnNldCgpLXRoaXMudXRjT2Zmc2V0KCkpLHVuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKSl7Y2FzZSJ5ZWFyIjpvdXRwdXQ9bW9udGhEaWZmKHRoaXMsdGhhdCkvMTI7YnJlYWs7Y2FzZSJtb250aCI6b3V0cHV0PW1vbnRoRGlmZih0aGlzLHRoYXQpO2JyZWFrO2Nhc2UicXVhcnRlciI6b3V0cHV0PW1vbnRoRGlmZih0aGlzLHRoYXQpLzM7YnJlYWs7Y2FzZSJzZWNvbmQiOm91dHB1dD0odGhpcy10aGF0KS8xZTM7YnJlYWs7Y2FzZSJtaW51dGUiOm91dHB1dD0odGhpcy10aGF0KS82ZTQ7YnJlYWs7Y2FzZSJob3VyIjpvdXRwdXQ9KHRoaXMtdGhhdCkvMzZlNTticmVhaztjYXNlImRheSI6b3V0cHV0PSh0aGlzLXRoYXQtem9uZURlbHRhKS84NjRlNTticmVhaztjYXNlIndlZWsiOm91dHB1dD0odGhpcy10aGF0LXpvbmVEZWx0YSkvNjA0OGU1O2JyZWFrO2RlZmF1bHQ6b3V0cHV0PXRoaXMtdGhhdH1yZXR1cm4gYXNGbG9hdD9vdXRwdXQ6YWJzRmxvb3Iob3V0cHV0KX0scHJvdG8uZW5kT2Y9ZnVuY3Rpb24odW5pdHMpe3ZhciB0aW1lO2lmKHZvaWQgMD09PSh1bml0cz1ub3JtYWxpemVVbml0cyh1bml0cykpfHwibWlsbGlzZWNvbmQiPT09dW5pdHN8fCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gdGhpczt2YXIgc3RhcnRPZkRhdGU9dGhpcy5faXNVVEM/dXRjU3RhcnRPZkRhdGU6bG9jYWxTdGFydE9mRGF0ZTtzd2l0Y2godW5pdHMpe2Nhc2UieWVhciI6dGltZT1zdGFydE9mRGF0ZSh0aGlzLnllYXIoKSsxLDAsMSktMTticmVhaztjYXNlInF1YXJ0ZXIiOnRpbWU9c3RhcnRPZkRhdGUodGhpcy55ZWFyKCksdGhpcy5tb250aCgpLXRoaXMubW9udGgoKSUzKzMsMSktMTticmVhaztjYXNlIm1vbnRoIjp0aW1lPXN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSsxLDEpLTE7YnJlYWs7Y2FzZSJ3ZWVrIjp0aW1lPXN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSx0aGlzLmRhdGUoKS10aGlzLndlZWtkYXkoKSs3KS0xO2JyZWFrO2Nhc2UiaXNvV2VlayI6dGltZT1zdGFydE9mRGF0ZSh0aGlzLnllYXIoKSx0aGlzLm1vbnRoKCksdGhpcy5kYXRlKCktKHRoaXMuaXNvV2Vla2RheSgpLTEpKzcpLTE7YnJlYWs7Y2FzZSJkYXkiOmNhc2UiZGF0ZSI6dGltZT1zdGFydE9mRGF0ZSh0aGlzLnllYXIoKSx0aGlzLm1vbnRoKCksdGhpcy5kYXRlKCkrMSktMTticmVhaztjYXNlImhvdXIiOnRpbWU9dGhpcy5fZC52YWx1ZU9mKCksdGltZSs9MzZlNS1tb2QkMSh0aW1lKyh0aGlzLl9pc1VUQz8wOjZlNCp0aGlzLnV0Y09mZnNldCgpKSwzNmU1KS0xO2JyZWFrO2Nhc2UibWludXRlIjp0aW1lPXRoaXMuX2QudmFsdWVPZigpLHRpbWUrPTZlNC1tb2QkMSh0aW1lLDZlNCktMTticmVhaztjYXNlInNlY29uZCI6dGltZT10aGlzLl9kLnZhbHVlT2YoKSx0aW1lKz0xZTMtbW9kJDEodGltZSwxZTMpLTF9cmV0dXJuIHRoaXMuX2Quc2V0VGltZSh0aW1lKSxob29rcy51cGRhdGVPZmZzZXQodGhpcywhMCksdGhpc30scHJvdG8uZm9ybWF0PWZ1bmN0aW9uKGlucHV0U3RyaW5nKXtpbnB1dFN0cmluZ3x8KGlucHV0U3RyaW5nPXRoaXMuaXNVdGMoKT9ob29rcy5kZWZhdWx0Rm9ybWF0VXRjOmhvb2tzLmRlZmF1bHRGb3JtYXQpO3ZhciBvdXRwdXQ9Zm9ybWF0TW9tZW50KHRoaXMsaW5wdXRTdHJpbmcpO3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5wb3N0Zm9ybWF0KG91dHB1dCl9LHByb3RvLmZyb209ZnVuY3Rpb24odGltZSx3aXRob3V0U3VmZml4KXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJihpc01vbWVudCh0aW1lKSYmdGltZS5pc1ZhbGlkKCl8fGNyZWF0ZUxvY2FsKHRpbWUpLmlzVmFsaWQoKSk/Y3JlYXRlRHVyYXRpb24oe3RvOnRoaXMsZnJvbTp0aW1lfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF3aXRob3V0U3VmZml4KTp0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpfSxwcm90by5mcm9tTm93PWZ1bmN0aW9uKHdpdGhvdXRTdWZmaXgpe3JldHVybiB0aGlzLmZyb20oY3JlYXRlTG9jYWwoKSx3aXRob3V0U3VmZml4KX0scHJvdG8udG89ZnVuY3Rpb24odGltZSx3aXRob3V0U3VmZml4KXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJihpc01vbWVudCh0aW1lKSYmdGltZS5pc1ZhbGlkKCl8fGNyZWF0ZUxvY2FsKHRpbWUpLmlzVmFsaWQoKSk/Y3JlYXRlRHVyYXRpb24oe2Zyb206dGhpcyx0bzp0aW1lfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF3aXRob3V0U3VmZml4KTp0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpfSxwcm90by50b05vdz1mdW5jdGlvbih3aXRob3V0U3VmZml4KXtyZXR1cm4gdGhpcy50byhjcmVhdGVMb2NhbCgpLHdpdGhvdXRTdWZmaXgpfSxwcm90by5nZXQ9ZnVuY3Rpb24odW5pdHMpe3JldHVybiBpc0Z1bmN0aW9uKHRoaXNbdW5pdHM9bm9ybWFsaXplVW5pdHModW5pdHMpXSk/dGhpc1t1bml0c10oKTp0aGlzfSxwcm90by5pbnZhbGlkQXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZ2V0UGFyc2luZ0ZsYWdzKHRoaXMpLm92ZXJmbG93fSxwcm90by5pc0FmdGVyPWZ1bmN0aW9uKGlucHV0LHVuaXRzKXt2YXIgbG9jYWxJbnB1dD1pc01vbWVudChpbnB1dCk/aW5wdXQ6Y3JlYXRlTG9jYWwoaW5wdXQpO3JldHVybiEoIXRoaXMuaXNWYWxpZCgpfHwhbG9jYWxJbnB1dC5pc1ZhbGlkKCkpJiYoIm1pbGxpc2Vjb25kIj09PSh1bml0cz1ub3JtYWxpemVVbml0cyh1bml0cyl8fCJtaWxsaXNlY29uZCIpP3RoaXMudmFsdWVPZigpPmxvY2FsSW5wdXQudmFsdWVPZigpOmxvY2FsSW5wdXQudmFsdWVPZigpPHRoaXMuY2xvbmUoKS5zdGFydE9mKHVuaXRzKS52YWx1ZU9mKCkpfSxwcm90by5pc0JlZm9yZT1mdW5jdGlvbihpbnB1dCx1bml0cyl7dmFyIGxvY2FsSW5wdXQ9aXNNb21lbnQoaW5wdXQpP2lucHV0OmNyZWF0ZUxvY2FsKGlucHV0KTtyZXR1cm4hKCF0aGlzLmlzVmFsaWQoKXx8IWxvY2FsSW5wdXQuaXNWYWxpZCgpKSYmKCJtaWxsaXNlY29uZCI9PT0odW5pdHM9bm9ybWFsaXplVW5pdHModW5pdHMpfHwibWlsbGlzZWNvbmQiKT90aGlzLnZhbHVlT2YoKTxsb2NhbElucHV0LnZhbHVlT2YoKTp0aGlzLmNsb25lKCkuZW5kT2YodW5pdHMpLnZhbHVlT2YoKTxsb2NhbElucHV0LnZhbHVlT2YoKSl9LHByb3RvLmlzQmV0d2Vlbj1mdW5jdGlvbihmcm9tLHRvLHVuaXRzLGluY2x1c2l2aXR5KXt2YXIgbG9jYWxGcm9tPWlzTW9tZW50KGZyb20pP2Zyb206Y3JlYXRlTG9jYWwoZnJvbSksbG9jYWxUbz1pc01vbWVudCh0byk/dG86Y3JlYXRlTG9jYWwodG8pO3JldHVybiEhKHRoaXMuaXNWYWxpZCgpJiZsb2NhbEZyb20uaXNWYWxpZCgpJiZsb2NhbFRvLmlzVmFsaWQoKSkmJigiKCI9PT0oaW5jbHVzaXZpdHk9aW5jbHVzaXZpdHl8fCIoKSIpWzBdP3RoaXMuaXNBZnRlcihsb2NhbEZyb20sdW5pdHMpOiF0aGlzLmlzQmVmb3JlKGxvY2FsRnJvbSx1bml0cykpJiYoIikiPT09aW5jbHVzaXZpdHlbMV0/dGhpcy5pc0JlZm9yZShsb2NhbFRvLHVuaXRzKTohdGhpcy5pc0FmdGVyKGxvY2FsVG8sdW5pdHMpKX0scHJvdG8uaXNTYW1lPWZ1bmN0aW9uKGlucHV0LHVuaXRzKXt2YXIgaW5wdXRNcyxsb2NhbElucHV0PWlzTW9tZW50KGlucHV0KT9pbnB1dDpjcmVhdGVMb2NhbChpbnB1dCk7cmV0dXJuISghdGhpcy5pc1ZhbGlkKCl8fCFsb2NhbElucHV0LmlzVmFsaWQoKSkmJigibWlsbGlzZWNvbmQiPT09KHVuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKXx8Im1pbGxpc2Vjb25kIik/dGhpcy52YWx1ZU9mKCk9PT1sb2NhbElucHV0LnZhbHVlT2YoKTooaW5wdXRNcz1sb2NhbElucHV0LnZhbHVlT2YoKSx0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cykudmFsdWVPZigpPD1pbnB1dE1zJiZpbnB1dE1zPD10aGlzLmNsb25lKCkuZW5kT2YodW5pdHMpLnZhbHVlT2YoKSkpfSxwcm90by5pc1NhbWVPckFmdGVyPWZ1bmN0aW9uKGlucHV0LHVuaXRzKXtyZXR1cm4gdGhpcy5pc1NhbWUoaW5wdXQsdW5pdHMpfHx0aGlzLmlzQWZ0ZXIoaW5wdXQsdW5pdHMpfSxwcm90by5pc1NhbWVPckJlZm9yZT1mdW5jdGlvbihpbnB1dCx1bml0cyl7cmV0dXJuIHRoaXMuaXNTYW1lKGlucHV0LHVuaXRzKXx8dGhpcy5pc0JlZm9yZShpbnB1dCx1bml0cyl9LHByb3RvLmlzVmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4gaXNWYWxpZCh0aGlzKX0scHJvdG8ubGFuZz1sYW5nLHByb3RvLmxvY2FsZT1sb2NhbGUscHJvdG8ubG9jYWxlRGF0YT1sb2NhbGVEYXRhLHByb3RvLm1heD1wcm90b3R5cGVNYXgscHJvdG8ubWluPXByb3RvdHlwZU1pbixwcm90by5wYXJzaW5nRmxhZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gZXh0ZW5kKHt9LGdldFBhcnNpbmdGbGFncyh0aGlzKSl9LHByb3RvLnNldD1mdW5jdGlvbih1bml0cyx2YWx1ZSl7aWYoIm9iamVjdCI9PXR5cGVvZiB1bml0cylmb3IodmFyIHByaW9yaXRpemVkPWdldFByaW9yaXRpemVkVW5pdHModW5pdHM9bm9ybWFsaXplT2JqZWN0VW5pdHModW5pdHMpKSxpPTA7aTxwcmlvcml0aXplZC5sZW5ndGg7aSsrKXRoaXNbcHJpb3JpdGl6ZWRbaV0udW5pdF0odW5pdHNbcHJpb3JpdGl6ZWRbaV0udW5pdF0pO2Vsc2UgaWYoaXNGdW5jdGlvbih0aGlzW3VuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKV0pKXJldHVybiB0aGlzW3VuaXRzXSh2YWx1ZSk7cmV0dXJuIHRoaXN9LHByb3RvLnN0YXJ0T2Y9ZnVuY3Rpb24odW5pdHMpe3ZhciB0aW1lO2lmKHZvaWQgMD09PSh1bml0cz1ub3JtYWxpemVVbml0cyh1bml0cykpfHwibWlsbGlzZWNvbmQiPT09dW5pdHN8fCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gdGhpczt2YXIgc3RhcnRPZkRhdGU9dGhpcy5faXNVVEM/dXRjU3RhcnRPZkRhdGU6bG9jYWxTdGFydE9mRGF0ZTtzd2l0Y2godW5pdHMpe2Nhc2UieWVhciI6dGltZT1zdGFydE9mRGF0ZSh0aGlzLnllYXIoKSwwLDEpO2JyZWFrO2Nhc2UicXVhcnRlciI6dGltZT1zdGFydE9mRGF0ZSh0aGlzLnllYXIoKSx0aGlzLm1vbnRoKCktdGhpcy5tb250aCgpJTMsMSk7YnJlYWs7Y2FzZSJtb250aCI6dGltZT1zdGFydE9mRGF0ZSh0aGlzLnllYXIoKSx0aGlzLm1vbnRoKCksMSk7YnJlYWs7Y2FzZSJ3ZWVrIjp0aW1lPXN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSx0aGlzLmRhdGUoKS10aGlzLndlZWtkYXkoKSk7YnJlYWs7Y2FzZSJpc29XZWVrIjp0aW1lPXN0YXJ0T2ZEYXRlKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSx0aGlzLmRhdGUoKS0odGhpcy5pc29XZWVrZGF5KCktMSkpO2JyZWFrO2Nhc2UiZGF5IjpjYXNlImRhdGUiOnRpbWU9c3RhcnRPZkRhdGUodGhpcy55ZWFyKCksdGhpcy5tb250aCgpLHRoaXMuZGF0ZSgpKTticmVhaztjYXNlImhvdXIiOnRpbWU9dGhpcy5fZC52YWx1ZU9mKCksdGltZS09bW9kJDEodGltZSsodGhpcy5faXNVVEM/MDo2ZTQqdGhpcy51dGNPZmZzZXQoKSksMzZlNSk7YnJlYWs7Y2FzZSJtaW51dGUiOnRpbWU9dGhpcy5fZC52YWx1ZU9mKCksdGltZS09bW9kJDEodGltZSw2ZTQpO2JyZWFrO2Nhc2Uic2Vjb25kIjp0aW1lPXRoaXMuX2QudmFsdWVPZigpLHRpbWUtPW1vZCQxKHRpbWUsMWUzKX1yZXR1cm4gdGhpcy5fZC5zZXRUaW1lKHRpbWUpLGhvb2tzLnVwZGF0ZU9mZnNldCh0aGlzLCEwKSx0aGlzfSxwcm90by5zdWJ0cmFjdD1zdWJ0cmFjdCxwcm90by50b0FycmF5PWZ1bmN0aW9uKCl7dmFyIG09dGhpcztyZXR1cm5bbS55ZWFyKCksbS5tb250aCgpLG0uZGF0ZSgpLG0uaG91cigpLG0ubWludXRlKCksbS5zZWNvbmQoKSxtLm1pbGxpc2Vjb25kKCldfSxwcm90by50b09iamVjdD1mdW5jdGlvbigpe3ZhciBtPXRoaXM7cmV0dXJue3llYXJzOm0ueWVhcigpLG1vbnRoczptLm1vbnRoKCksZGF0ZTptLmRhdGUoKSxob3VyczptLmhvdXJzKCksbWludXRlczptLm1pbnV0ZXMoKSxzZWNvbmRzOm0uc2Vjb25kcygpLG1pbGxpc2Vjb25kczptLm1pbGxpc2Vjb25kcygpfX0scHJvdG8udG9EYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKX0scHJvdG8udG9JU09TdHJpbmc9ZnVuY3Rpb24oa2VlcE9mZnNldCl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsO3ZhciB1dGM9ITAhPT1rZWVwT2Zmc2V0LG09dXRjP3RoaXMuY2xvbmUoKS51dGMoKTp0aGlzO3JldHVybiBtLnllYXIoKTwwfHw5OTk5PG0ueWVhcigpP2Zvcm1hdE1vbWVudChtLHV0Yz8iWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdIjoiWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTWiIpOmlzRnVuY3Rpb24oRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcpP3V0Yz90aGlzLnRvRGF0ZSgpLnRvSVNPU3RyaW5nKCk6bmV3IERhdGUodGhpcy52YWx1ZU9mKCkrNjAqdGhpcy51dGNPZmZzZXQoKSoxZTMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgiWiIsZm9ybWF0TW9tZW50KG0sIloiKSk6Zm9ybWF0TW9tZW50KG0sdXRjPyJZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdIjoiWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1oiKX0scHJvdG8uaW5zcGVjdD1mdW5jdGlvbigpe2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4ibW9tZW50LmludmFsaWQoLyogIit0aGlzLl9pKyIgKi8pIjt2YXIgZnVuYz0ibW9tZW50Iix6b25lPSIiO3RoaXMuaXNMb2NhbCgpfHwoZnVuYz0wPT09dGhpcy51dGNPZmZzZXQoKT8ibW9tZW50LnV0YyI6Im1vbWVudC5wYXJzZVpvbmUiLHpvbmU9IloiKTt2YXIgcHJlZml4PSJbIitmdW5jKycoIl0nLHllYXI9MDw9dGhpcy55ZWFyKCkmJnRoaXMueWVhcigpPD05OTk5PyJZWVlZIjoiWVlZWVlZIixzdWZmaXg9em9uZSsnWyIpXSc7cmV0dXJuIHRoaXMuZm9ybWF0KHByZWZpeCt5ZWFyKyItTU0tRERbVF1ISDptbTpzcy5TU1MiK3N1ZmZpeCl9LHByb3RvLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzVmFsaWQoKT90aGlzLnRvSVNPU3RyaW5nKCk6bnVsbH0scHJvdG8udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9uZSgpLmxvY2FsZSgiZW4iKS5mb3JtYXQoImRkZCBNTU0gREQgWVlZWSBISDptbTpzcyBbR01UXVpaIil9LHByb3RvLnVuaXg9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKS8xZTMpfSxwcm90by52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2QudmFsdWVPZigpLTZlNCoodGhpcy5fb2Zmc2V0fHwwKX0scHJvdG8uY3JlYXRpb25EYXRhPWZ1bmN0aW9uKCl7cmV0dXJue2lucHV0OnRoaXMuX2ksZm9ybWF0OnRoaXMuX2YsbG9jYWxlOnRoaXMuX2xvY2FsZSxpc1VUQzp0aGlzLl9pc1VUQyxzdHJpY3Q6dGhpcy5fc3RyaWN0fX0scHJvdG8ueWVhcj1nZXRTZXRZZWFyLHByb3RvLmlzTGVhcFllYXI9ZnVuY3Rpb24oKXtyZXR1cm4gaXNMZWFwWWVhcih0aGlzLnllYXIoKSl9LHByb3RvLndlZWtZZWFyPWZ1bmN0aW9uKGlucHV0KXtyZXR1cm4gZ2V0U2V0V2Vla1llYXJIZWxwZXIuY2FsbCh0aGlzLGlucHV0LHRoaXMud2VlaygpLHRoaXMud2Vla2RheSgpLHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyx0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3kpfSxwcm90by5pc29XZWVrWWVhcj1mdW5jdGlvbihpbnB1dCl7cmV0dXJuIGdldFNldFdlZWtZZWFySGVscGVyLmNhbGwodGhpcyxpbnB1dCx0aGlzLmlzb1dlZWsoKSx0aGlzLmlzb1dlZWtkYXkoKSwxLDQpfSxwcm90by5xdWFydGVyPXByb3RvLnF1YXJ0ZXJzPWZ1bmN0aW9uKGlucHV0KXtyZXR1cm4gbnVsbD09aW5wdXQ/TWF0aC5jZWlsKCh0aGlzLm1vbnRoKCkrMSkvMyk6dGhpcy5tb250aCgzKihpbnB1dC0xKSt0aGlzLm1vbnRoKCklMyl9LHByb3RvLm1vbnRoPWdldFNldE1vbnRoLHByb3RvLmRheXNJbk1vbnRoPWZ1bmN0aW9uKCl7cmV0dXJuIGRheXNJbk1vbnRoKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSl9LHByb3RvLndlZWs9cHJvdG8ud2Vla3M9ZnVuY3Rpb24oaW5wdXQpe3ZhciB3ZWVrPXRoaXMubG9jYWxlRGF0YSgpLndlZWsodGhpcyk7cmV0dXJuIG51bGw9PWlucHV0P3dlZWs6dGhpcy5hZGQoNyooaW5wdXQtd2VlayksImQiKX0scHJvdG8uaXNvV2Vlaz1wcm90by5pc29XZWVrcz1mdW5jdGlvbihpbnB1dCl7dmFyIHdlZWs9d2Vla09mWWVhcih0aGlzLDEsNCkud2VlaztyZXR1cm4gbnVsbD09aW5wdXQ/d2Vlazp0aGlzLmFkZCg3KihpbnB1dC13ZWVrKSwiZCIpfSxwcm90by53ZWVrc0luWWVhcj1mdW5jdGlvbigpe3ZhciB3ZWVrSW5mbz10aGlzLmxvY2FsZURhdGEoKS5fd2VlaztyZXR1cm4gd2Vla3NJblllYXIodGhpcy55ZWFyKCksd2Vla0luZm8uZG93LHdlZWtJbmZvLmRveSl9LHByb3RvLmlzb1dlZWtzSW5ZZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMueWVhcigpLDEsNCl9LHByb3RvLmRhdGU9Z2V0U2V0RGF5T2ZNb250aCxwcm90by5kYXk9cHJvdG8uZGF5cz1mdW5jdGlvbihpbnB1dCl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1pbnB1dD90aGlzOk5hTjt2YXIgZGF5PXRoaXMuX2lzVVRDP3RoaXMuX2QuZ2V0VVRDRGF5KCk6dGhpcy5fZC5nZXREYXkoKTtyZXR1cm4gbnVsbCE9aW5wdXQ/KGlucHV0PXBhcnNlV2Vla2RheShpbnB1dCx0aGlzLmxvY2FsZURhdGEoKSksdGhpcy5hZGQoaW5wdXQtZGF5LCJkIikpOmRheX0scHJvdG8ud2Vla2RheT1mdW5jdGlvbihpbnB1dCl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1pbnB1dD90aGlzOk5hTjt2YXIgd2Vla2RheT0odGhpcy5kYXkoKSs3LXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyklNztyZXR1cm4gbnVsbD09aW5wdXQ/d2Vla2RheTp0aGlzLmFkZChpbnB1dC13ZWVrZGF5LCJkIil9LHByb3RvLmlzb1dlZWtkYXk9ZnVuY3Rpb24oaW5wdXQpe2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gbnVsbCE9aW5wdXQ/dGhpczpOYU47aWYobnVsbD09aW5wdXQpcmV0dXJuIHRoaXMuZGF5KCl8fDc7dmFyIHdlZWtkYXk9cGFyc2VJc29XZWVrZGF5KGlucHV0LHRoaXMubG9jYWxlRGF0YSgpKTtyZXR1cm4gdGhpcy5kYXkodGhpcy5kYXkoKSU3P3dlZWtkYXk6d2Vla2RheS03KX0scHJvdG8uZGF5T2ZZZWFyPWZ1bmN0aW9uKGlucHV0KXt2YXIgZGF5T2ZZZWFyPU1hdGgucm91bmQoKHRoaXMuY2xvbmUoKS5zdGFydE9mKCJkYXkiKS10aGlzLmNsb25lKCkuc3RhcnRPZigieWVhciIpKS84NjRlNSkrMTtyZXR1cm4gbnVsbD09aW5wdXQ/ZGF5T2ZZZWFyOnRoaXMuYWRkKGlucHV0LWRheU9mWWVhciwiZCIpfSxwcm90by5ob3VyPXByb3RvLmhvdXJzPWdldFNldEhvdXIscHJvdG8ubWludXRlPXByb3RvLm1pbnV0ZXM9Z2V0U2V0TWludXRlLHByb3RvLnNlY29uZD1wcm90by5zZWNvbmRzPWdldFNldFNlY29uZCxwcm90by5taWxsaXNlY29uZD1wcm90by5taWxsaXNlY29uZHM9Z2V0U2V0TWlsbGlzZWNvbmQscHJvdG8udXRjT2Zmc2V0PWZ1bmN0aW9uKGlucHV0LGtlZXBMb2NhbFRpbWUsa2VlcE1pbnV0ZXMpe3ZhciBsb2NhbEFkanVzdCxvZmZzZXQ9dGhpcy5fb2Zmc2V0fHwwO2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gbnVsbCE9aW5wdXQ/dGhpczpOYU47aWYobnVsbD09aW5wdXQpcmV0dXJuIHRoaXMuX2lzVVRDP29mZnNldDpnZXREYXRlT2Zmc2V0KHRoaXMpO2lmKCJzdHJpbmciPT10eXBlb2YgaW5wdXQpe2lmKG51bGw9PT0oaW5wdXQ9b2Zmc2V0RnJvbVN0cmluZyhtYXRjaFNob3J0T2Zmc2V0LGlucHV0KSkpcmV0dXJuIHRoaXN9ZWxzZSBNYXRoLmFicyhpbnB1dCk8MTYmJiFrZWVwTWludXRlcyYmKGlucHV0Kj02MCk7cmV0dXJuIXRoaXMuX2lzVVRDJiZrZWVwTG9jYWxUaW1lJiYobG9jYWxBZGp1c3Q9Z2V0RGF0ZU9mZnNldCh0aGlzKSksdGhpcy5fb2Zmc2V0PWlucHV0LHRoaXMuX2lzVVRDPSEwLG51bGwhPWxvY2FsQWRqdXN0JiZ0aGlzLmFkZChsb2NhbEFkanVzdCwibSIpLG9mZnNldCE9PWlucHV0JiYoIWtlZXBMb2NhbFRpbWV8fHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M/YWRkU3VidHJhY3QodGhpcyxjcmVhdGVEdXJhdGlvbihpbnB1dC1vZmZzZXQsIm0iKSwxLCExKTp0aGlzLl9jaGFuZ2VJblByb2dyZXNzfHwodGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz0hMCxob29rcy51cGRhdGVPZmZzZXQodGhpcywhMCksdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz1udWxsKSksdGhpc30scHJvdG8udXRjPWZ1bmN0aW9uKGtlZXBMb2NhbFRpbWUpe3JldHVybiB0aGlzLnV0Y09mZnNldCgwLGtlZXBMb2NhbFRpbWUpfSxwcm90by5sb2NhbD1mdW5jdGlvbihrZWVwTG9jYWxUaW1lKXtyZXR1cm4gdGhpcy5faXNVVEMmJih0aGlzLnV0Y09mZnNldCgwLGtlZXBMb2NhbFRpbWUpLHRoaXMuX2lzVVRDPSExLGtlZXBMb2NhbFRpbWUmJnRoaXMuc3VidHJhY3QoZ2V0RGF0ZU9mZnNldCh0aGlzKSwibSIpKSx0aGlzfSxwcm90by5wYXJzZVpvbmU9ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLl90em0pdGhpcy51dGNPZmZzZXQodGhpcy5fdHptLCExLCEwKTtlbHNlIGlmKCJzdHJpbmciPT10eXBlb2YgdGhpcy5faSl7dmFyIHRab25lPW9mZnNldEZyb21TdHJpbmcobWF0Y2hPZmZzZXQsdGhpcy5faSk7bnVsbCE9dFpvbmU/dGhpcy51dGNPZmZzZXQodFpvbmUpOnRoaXMudXRjT2Zmc2V0KDAsITApfXJldHVybiB0aGlzfSxwcm90by5oYXNBbGlnbmVkSG91ck9mZnNldD1mdW5jdGlvbihpbnB1dCl7cmV0dXJuISF0aGlzLmlzVmFsaWQoKSYmKGlucHV0PWlucHV0P2NyZWF0ZUxvY2FsKGlucHV0KS51dGNPZmZzZXQoKTowLCh0aGlzLnV0Y09mZnNldCgpLWlucHV0KSU2MD09MCl9LHByb3RvLmlzRFNUPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXRjT2Zmc2V0KCk+dGhpcy5jbG9uZSgpLm1vbnRoKDApLnV0Y09mZnNldCgpfHx0aGlzLnV0Y09mZnNldCgpPnRoaXMuY2xvbmUoKS5tb250aCg1KS51dGNPZmZzZXQoKX0scHJvdG8uaXNMb2NhbD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5pc1ZhbGlkKCkmJiF0aGlzLl9pc1VUQ30scHJvdG8uaXNVdGNPZmZzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuaXNWYWxpZCgpJiZ0aGlzLl9pc1VUQ30scHJvdG8uaXNVdGM9aXNVdGMscHJvdG8uaXNVVEM9aXNVdGMscHJvdG8uem9uZUFiYnI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNVVEM/IlVUQyI6IiJ9LHByb3RvLnpvbmVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVVRDPyJDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZSI6IiJ9LHByb3RvLmRhdGVzPWRlcHJlY2F0ZSgiZGF0ZXMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIGRhdGUgaW5zdGVhZC4iLGdldFNldERheU9mTW9udGgpLHByb3RvLm1vbnRocz1kZXByZWNhdGUoIm1vbnRocyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgbW9udGggaW5zdGVhZCIsZ2V0U2V0TW9udGgpLHByb3RvLnllYXJzPWRlcHJlY2F0ZSgieWVhcnMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIHllYXIgaW5zdGVhZCIsZ2V0U2V0WWVhcikscHJvdG8uem9uZT1kZXByZWNhdGUoIm1vbWVudCgpLnpvbmUgaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudCgpLnV0Y09mZnNldCBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL3pvbmUvIixmdW5jdGlvbihpbnB1dCxrZWVwTG9jYWxUaW1lKXtyZXR1cm4gbnVsbCE9aW5wdXQ/KCJzdHJpbmciIT10eXBlb2YgaW5wdXQmJihpbnB1dD0taW5wdXQpLHRoaXMudXRjT2Zmc2V0KGlucHV0LGtlZXBMb2NhbFRpbWUpLHRoaXMpOi10aGlzLnV0Y09mZnNldCgpfSkscHJvdG8uaXNEU1RTaGlmdGVkPWRlcHJlY2F0ZSgiaXNEU1RTaGlmdGVkIGlzIGRlcHJlY2F0ZWQuIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RzdC1zaGlmdGVkLyBmb3IgbW9yZSBpbmZvcm1hdGlvbiIsZnVuY3Rpb24oKXtpZighaXNVbmRlZmluZWQodGhpcy5faXNEU1RTaGlmdGVkKSlyZXR1cm4gdGhpcy5faXNEU1RTaGlmdGVkO3ZhciBjPXt9O2lmKGNvcHlDb25maWcoYyx0aGlzKSwoYz1wcmVwYXJlQ29uZmlnKGMpKS5fYSl7dmFyIG90aGVyPWMuX2lzVVRDP2NyZWF0ZVVUQyhjLl9hKTpjcmVhdGVMb2NhbChjLl9hKTt0aGlzLl9pc0RTVFNoaWZ0ZWQ9dGhpcy5pc1ZhbGlkKCkmJjA8Y29tcGFyZUFycmF5cyhjLl9hLG90aGVyLnRvQXJyYXkoKSl9ZWxzZSB0aGlzLl9pc0RTVFNoaWZ0ZWQ9ITE7cmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZH0pO3ZhciBwcm90byQxPUxvY2FsZS5wcm90b3R5cGU7ZnVuY3Rpb24gZ2V0JDEoZm9ybWF0LGluZGV4LGZpZWxkLHNldHRlcil7dmFyIGxvY2FsZT1nZXRMb2NhbGUoKSx1dGM9Y3JlYXRlVVRDKCkuc2V0KHNldHRlcixpbmRleCk7cmV0dXJuIGxvY2FsZVtmaWVsZF0odXRjLGZvcm1hdCl9ZnVuY3Rpb24gbGlzdE1vbnRoc0ltcGwoZm9ybWF0LGluZGV4LGZpZWxkKXtpZihpc051bWJlcihmb3JtYXQpJiYoaW5kZXg9Zm9ybWF0LGZvcm1hdD12b2lkIDApLGZvcm1hdD1mb3JtYXR8fCIiLG51bGwhPWluZGV4KXJldHVybiBnZXQkMShmb3JtYXQsaW5kZXgsZmllbGQsIm1vbnRoIik7dmFyIGksb3V0PVtdO2ZvcihpPTA7aTwxMjtpKyspb3V0W2ldPWdldCQxKGZvcm1hdCxpLGZpZWxkLCJtb250aCIpO3JldHVybiBvdXR9ZnVuY3Rpb24gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4LGZpZWxkKXsiYm9vbGVhbiI9PXR5cGVvZiBsb2NhbGVTb3J0ZWQ/aXNOdW1iZXIoZm9ybWF0KSYmKGluZGV4PWZvcm1hdCxmb3JtYXQ9dm9pZCAwKTooZm9ybWF0PWxvY2FsZVNvcnRlZCxsb2NhbGVTb3J0ZWQ9ITEsaXNOdW1iZXIoaW5kZXg9Zm9ybWF0KSYmKGluZGV4PWZvcm1hdCxmb3JtYXQ9dm9pZCAwKSksZm9ybWF0PWZvcm1hdHx8IiI7dmFyIGksbG9jYWxlPWdldExvY2FsZSgpLHNoaWZ0PWxvY2FsZVNvcnRlZD9sb2NhbGUuX3dlZWsuZG93OjA7aWYobnVsbCE9aW5kZXgpcmV0dXJuIGdldCQxKGZvcm1hdCwoaW5kZXgrc2hpZnQpJTcsZmllbGQsImRheSIpO3ZhciBvdXQ9W107Zm9yKGk9MDtpPDc7aSsrKW91dFtpXT1nZXQkMShmb3JtYXQsKGkrc2hpZnQpJTcsZmllbGQsImRheSIpO3JldHVybiBvdXR9cHJvdG8kMS5jYWxlbmRhcj1mdW5jdGlvbihrZXksbW9tLG5vdyl7dmFyIG91dHB1dD10aGlzLl9jYWxlbmRhcltrZXldfHx0aGlzLl9jYWxlbmRhci5zYW1lRWxzZTtyZXR1cm4gaXNGdW5jdGlvbihvdXRwdXQpP291dHB1dC5jYWxsKG1vbSxub3cpOm91dHB1dH0scHJvdG8kMS5sb25nRGF0ZUZvcm1hdD1mdW5jdGlvbihrZXkpe3ZhciBmb3JtYXQ9dGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5XSxmb3JtYXRVcHBlcj10aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXkudG9VcHBlckNhc2UoKV07cmV0dXJuIWZvcm1hdCYmZm9ybWF0VXBwZXI/KHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV09Zm9ybWF0VXBwZXIucmVwbGFjZSgvTU1NTXxNTXxERHxkZGRkL2csZnVuY3Rpb24odmFsKXtyZXR1cm4gdmFsLnNsaWNlKDEpfSksdGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5XSk6Zm9ybWF0fSxwcm90byQxLmludmFsaWREYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ludmFsaWREYXRlfSxwcm90byQxLm9yZGluYWw9ZnVuY3Rpb24obnVtYmVyKXtyZXR1cm4gdGhpcy5fb3JkaW5hbC5yZXBsYWNlKCIlZCIsbnVtYmVyKX0scHJvdG8kMS5wcmVwYXJzZT1wcmVQYXJzZVBvc3RGb3JtYXQscHJvdG8kMS5wb3N0Zm9ybWF0PXByZVBhcnNlUG9zdEZvcm1hdCxwcm90byQxLnJlbGF0aXZlVGltZT1mdW5jdGlvbihudW1iZXIsd2l0aG91dFN1ZmZpeCxzdHJpbmcsaXNGdXR1cmUpe3ZhciBvdXRwdXQ9dGhpcy5fcmVsYXRpdmVUaW1lW3N0cmluZ107cmV0dXJuIGlzRnVuY3Rpb24ob3V0cHV0KT9vdXRwdXQobnVtYmVyLHdpdGhvdXRTdWZmaXgsc3RyaW5nLGlzRnV0dXJlKTpvdXRwdXQucmVwbGFjZSgvJWQvaSxudW1iZXIpfSxwcm90byQxLnBhc3RGdXR1cmU9ZnVuY3Rpb24oZGlmZixvdXRwdXQpe3ZhciBmb3JtYXQ9dGhpcy5fcmVsYXRpdmVUaW1lWzA8ZGlmZj8iZnV0dXJlIjoicGFzdCJdO3JldHVybiBpc0Z1bmN0aW9uKGZvcm1hdCk/Zm9ybWF0KG91dHB1dCk6Zm9ybWF0LnJlcGxhY2UoLyVzL2ksb3V0cHV0KX0scHJvdG8kMS5zZXQ9ZnVuY3Rpb24oY29uZmlnKXt2YXIgcHJvcCxpO2ZvcihpIGluIGNvbmZpZylpc0Z1bmN0aW9uKHByb3A9Y29uZmlnW2ldKT90aGlzW2ldPXByb3A6dGhpc1siXyIraV09cHJvcDt0aGlzLl9jb25maWc9Y29uZmlnLHRoaXMuX2RheU9mTW9udGhPcmRpbmFsUGFyc2VMZW5pZW50PW5ldyBSZWdFeHAoKHRoaXMuX2RheU9mTW9udGhPcmRpbmFsUGFyc2Uuc291cmNlfHx0aGlzLl9vcmRpbmFsUGFyc2Uuc291cmNlKSsifCIrL1xkezEsMn0vLnNvdXJjZSl9LHByb3RvJDEubW9udGhzPWZ1bmN0aW9uKG0sZm9ybWF0KXtyZXR1cm4gbT9pc0FycmF5KHRoaXMuX21vbnRocyk/dGhpcy5fbW9udGhzW20ubW9udGgoKV06dGhpcy5fbW9udGhzWyh0aGlzLl9tb250aHMuaXNGb3JtYXR8fE1PTlRIU19JTl9GT1JNQVQpLnRlc3QoZm9ybWF0KT8iZm9ybWF0Ijoic3RhbmRhbG9uZSJdW20ubW9udGgoKV06aXNBcnJheSh0aGlzLl9tb250aHMpP3RoaXMuX21vbnRoczp0aGlzLl9tb250aHMuc3RhbmRhbG9uZX0scHJvdG8kMS5tb250aHNTaG9ydD1mdW5jdGlvbihtLGZvcm1hdCl7cmV0dXJuIG0/aXNBcnJheSh0aGlzLl9tb250aHNTaG9ydCk/dGhpcy5fbW9udGhzU2hvcnRbbS5tb250aCgpXTp0aGlzLl9tb250aHNTaG9ydFtNT05USFNfSU5fRk9STUFULnRlc3QoZm9ybWF0KT8iZm9ybWF0Ijoic3RhbmRhbG9uZSJdW20ubW9udGgoKV06aXNBcnJheSh0aGlzLl9tb250aHNTaG9ydCk/dGhpcy5fbW9udGhzU2hvcnQ6dGhpcy5fbW9udGhzU2hvcnQuc3RhbmRhbG9uZX0scHJvdG8kMS5tb250aHNQYXJzZT1mdW5jdGlvbihtb250aE5hbWUsZm9ybWF0LHN0cmljdCl7dmFyIGksbW9tLHJlZ2V4O2lmKHRoaXMuX21vbnRoc1BhcnNlRXhhY3QpcmV0dXJuIGhhbmRsZVN0cmljdFBhcnNlLmNhbGwodGhpcyxtb250aE5hbWUsZm9ybWF0LHN0cmljdCk7Zm9yKHRoaXMuX21vbnRoc1BhcnNlfHwodGhpcy5fbW9udGhzUGFyc2U9W10sdGhpcy5fbG9uZ01vbnRoc1BhcnNlPVtdLHRoaXMuX3Nob3J0TW9udGhzUGFyc2U9W10pLGk9MDtpPDEyO2krKyl7aWYobW9tPWNyZWF0ZVVUQyhbMmUzLGldKSxzdHJpY3QmJiF0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0mJih0aGlzLl9sb25nTW9udGhzUGFyc2VbaV09bmV3IFJlZ0V4cCgiXiIrdGhpcy5tb250aHMobW9tLCIiKS5yZXBsYWNlKCIuIiwiIikrIiQiLCJpIiksdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXT1uZXcgUmVnRXhwKCJeIit0aGlzLm1vbnRoc1Nob3J0KG1vbSwiIikucmVwbGFjZSgiLiIsIiIpKyIkIiwiaSIpKSxzdHJpY3R8fHRoaXMuX21vbnRoc1BhcnNlW2ldfHwocmVnZXg9Il4iK3RoaXMubW9udGhzKG1vbSwiIikrInxeIit0aGlzLm1vbnRoc1Nob3J0KG1vbSwiIiksdGhpcy5fbW9udGhzUGFyc2VbaV09bmV3IFJlZ0V4cChyZWdleC5yZXBsYWNlKCIuIiwiIiksImkiKSksc3RyaWN0JiYiTU1NTSI9PT1mb3JtYXQmJnRoaXMuX2xvbmdNb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpcmV0dXJuIGk7aWYoc3RyaWN0JiYiTU1NIj09PWZvcm1hdCYmdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpcmV0dXJuIGk7aWYoIXN0cmljdCYmdGhpcy5fbW9udGhzUGFyc2VbaV0udGVzdChtb250aE5hbWUpKXJldHVybiBpfX0scHJvdG8kMS5tb250aHNSZWdleD1mdW5jdGlvbihpc1N0cmljdCl7cmV0dXJuIHRoaXMuX21vbnRoc1BhcnNlRXhhY3Q/KGhhc093blByb3AodGhpcywiX21vbnRoc1JlZ2V4Iil8fGNvbXB1dGVNb250aHNQYXJzZS5jYWxsKHRoaXMpLGlzU3RyaWN0P3RoaXMuX21vbnRoc1N0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1JlZ2V4KTooaGFzT3duUHJvcCh0aGlzLCJfbW9udGhzUmVnZXgiKXx8KHRoaXMuX21vbnRoc1JlZ2V4PWRlZmF1bHRNb250aHNSZWdleCksdGhpcy5fbW9udGhzU3RyaWN0UmVnZXgmJmlzU3RyaWN0P3RoaXMuX21vbnRoc1N0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1JlZ2V4KX0scHJvdG8kMS5tb250aHNTaG9ydFJlZ2V4PWZ1bmN0aW9uKGlzU3RyaWN0KXtyZXR1cm4gdGhpcy5fbW9udGhzUGFyc2VFeGFjdD8oaGFzT3duUHJvcCh0aGlzLCJfbW9udGhzUmVnZXgiKXx8Y29tcHV0ZU1vbnRoc1BhcnNlLmNhbGwodGhpcyksaXNTdHJpY3Q/dGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleDp0aGlzLl9tb250aHNTaG9ydFJlZ2V4KTooaGFzT3duUHJvcCh0aGlzLCJfbW9udGhzU2hvcnRSZWdleCIpfHwodGhpcy5fbW9udGhzU2hvcnRSZWdleD1kZWZhdWx0TW9udGhzU2hvcnRSZWdleCksdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCYmaXNTdHJpY3Q/dGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleDp0aGlzLl9tb250aHNTaG9ydFJlZ2V4KX0scHJvdG8kMS53ZWVrPWZ1bmN0aW9uKG1vbSl7cmV0dXJuIHdlZWtPZlllYXIobW9tLHRoaXMuX3dlZWsuZG93LHRoaXMuX3dlZWsuZG95KS53ZWVrfSxwcm90byQxLmZpcnN0RGF5T2ZZZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dlZWsuZG95fSxwcm90byQxLmZpcnN0RGF5T2ZXZWVrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dlZWsuZG93fSxwcm90byQxLndlZWtkYXlzPWZ1bmN0aW9uKG0sZm9ybWF0KXt2YXIgd2Vla2RheXM9aXNBcnJheSh0aGlzLl93ZWVrZGF5cyk/dGhpcy5fd2Vla2RheXM6dGhpcy5fd2Vla2RheXNbbSYmITAhPT1tJiZ0aGlzLl93ZWVrZGF5cy5pc0Zvcm1hdC50ZXN0KGZvcm1hdCk/ImZvcm1hdCI6InN0YW5kYWxvbmUiXTtyZXR1cm4hMD09PW0/c2hpZnRXZWVrZGF5cyh3ZWVrZGF5cyx0aGlzLl93ZWVrLmRvdyk6bT93ZWVrZGF5c1ttLmRheSgpXTp3ZWVrZGF5c30scHJvdG8kMS53ZWVrZGF5c01pbj1mdW5jdGlvbihtKXtyZXR1cm4hMD09PW0/c2hpZnRXZWVrZGF5cyh0aGlzLl93ZWVrZGF5c01pbix0aGlzLl93ZWVrLmRvdyk6bT90aGlzLl93ZWVrZGF5c01pblttLmRheSgpXTp0aGlzLl93ZWVrZGF5c01pbn0scHJvdG8kMS53ZWVrZGF5c1Nob3J0PWZ1bmN0aW9uKG0pe3JldHVybiEwPT09bT9zaGlmdFdlZWtkYXlzKHRoaXMuX3dlZWtkYXlzU2hvcnQsdGhpcy5fd2Vlay5kb3cpOm0/dGhpcy5fd2Vla2RheXNTaG9ydFttLmRheSgpXTp0aGlzLl93ZWVrZGF5c1Nob3J0fSxwcm90byQxLndlZWtkYXlzUGFyc2U9ZnVuY3Rpb24od2Vla2RheU5hbWUsZm9ybWF0LHN0cmljdCl7dmFyIGksbW9tLHJlZ2V4O2lmKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdClyZXR1cm4gaGFuZGxlU3RyaWN0UGFyc2UkMS5jYWxsKHRoaXMsd2Vla2RheU5hbWUsZm9ybWF0LHN0cmljdCk7Zm9yKHRoaXMuX3dlZWtkYXlzUGFyc2V8fCh0aGlzLl93ZWVrZGF5c1BhcnNlPVtdLHRoaXMuX21pbldlZWtkYXlzUGFyc2U9W10sdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlPVtdLHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlPVtdKSxpPTA7aTw3O2krKyl7aWYobW9tPWNyZWF0ZVVUQyhbMmUzLDFdKS5kYXkoaSksc3RyaWN0JiYhdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV0mJih0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXT1uZXcgUmVnRXhwKCJeIit0aGlzLndlZWtkYXlzKG1vbSwiIikucmVwbGFjZSgiLiIsIlxcLj8iKSsiJCIsImkiKSx0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbaV09bmV3IFJlZ0V4cCgiXiIrdGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwiIikucmVwbGFjZSgiLiIsIlxcLj8iKSsiJCIsImkiKSx0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldPW5ldyBSZWdFeHAoIl4iK3RoaXMud2Vla2RheXNNaW4obW9tLCIiKS5yZXBsYWNlKCIuIiwiXFwuPyIpKyIkIiwiaSIpKSx0aGlzLl93ZWVrZGF5c1BhcnNlW2ldfHwocmVnZXg9Il4iK3RoaXMud2Vla2RheXMobW9tLCIiKSsifF4iK3RoaXMud2Vla2RheXNTaG9ydChtb20sIiIpKyJ8XiIrdGhpcy53ZWVrZGF5c01pbihtb20sIiIpLHRoaXMuX3dlZWtkYXlzUGFyc2VbaV09bmV3IFJlZ0V4cChyZWdleC5yZXBsYWNlKCIuIiwiIiksImkiKSksc3RyaWN0JiYiZGRkZCI9PT1mb3JtYXQmJnRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKXJldHVybiBpO2lmKHN0cmljdCYmImRkZCI9PT1mb3JtYXQmJnRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSlyZXR1cm4gaTtpZihzdHJpY3QmJiJkZCI9PT1mb3JtYXQmJnRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpcmV0dXJuIGk7aWYoIXN0cmljdCYmdGhpcy5fd2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSlyZXR1cm4gaX19LHByb3RvJDEud2Vla2RheXNSZWdleD1mdW5jdGlvbihpc1N0cmljdCl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdD8oaGFzT3duUHJvcCh0aGlzLCJfd2Vla2RheXNSZWdleCIpfHxjb21wdXRlV2Vla2RheXNQYXJzZS5jYWxsKHRoaXMpLGlzU3RyaWN0P3RoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNSZWdleCk6KGhhc093blByb3AodGhpcywiX3dlZWtkYXlzUmVnZXgiKXx8KHRoaXMuX3dlZWtkYXlzUmVnZXg9ZGVmYXVsdFdlZWtkYXlzUmVnZXgpLHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXgmJmlzU3RyaWN0P3RoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNSZWdleCl9LHByb3RvJDEud2Vla2RheXNTaG9ydFJlZ2V4PWZ1bmN0aW9uKGlzU3RyaWN0KXtyZXR1cm4gdGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0PyhoYXNPd25Qcm9wKHRoaXMsIl93ZWVrZGF5c1JlZ2V4Iil8fGNvbXB1dGVXZWVrZGF5c1BhcnNlLmNhbGwodGhpcyksaXNTdHJpY3Q/dGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCk6KGhhc093blByb3AodGhpcywiX3dlZWtkYXlzU2hvcnRSZWdleCIpfHwodGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4PWRlZmF1bHRXZWVrZGF5c1Nob3J0UmVnZXgpLHRoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleCYmaXNTdHJpY3Q/dGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCl9LHByb3RvJDEud2Vla2RheXNNaW5SZWdleD1mdW5jdGlvbihpc1N0cmljdCl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdD8oaGFzT3duUHJvcCh0aGlzLCJfd2Vla2RheXNSZWdleCIpfHxjb21wdXRlV2Vla2RheXNQYXJzZS5jYWxsKHRoaXMpLGlzU3RyaWN0P3RoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNNaW5SZWdleCk6KGhhc093blByb3AodGhpcywiX3dlZWtkYXlzTWluUmVnZXgiKXx8KHRoaXMuX3dlZWtkYXlzTWluUmVnZXg9ZGVmYXVsdFdlZWtkYXlzTWluUmVnZXgpLHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXgmJmlzU3RyaWN0P3RoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg6dGhpcy5fd2Vla2RheXNNaW5SZWdleCl9LHByb3RvJDEuaXNQTT1mdW5jdGlvbihpbnB1dCl7cmV0dXJuInAiPT09KGlucHV0KyIiKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKX0scHJvdG8kMS5tZXJpZGllbT1mdW5jdGlvbihob3VycyxtaW51dGVzLGlzTG93ZXIpe3JldHVybiAxMTxob3Vycz9pc0xvd2VyPyJwbSI6IlBNIjppc0xvd2VyPyJhbSI6IkFNIn0sZ2V0U2V0R2xvYmFsTG9jYWxlKCJlbiIse2RheU9mTW9udGhPcmRpbmFsUGFyc2U6L1xkezEsMn0odGh8c3R8bmR8cmQpLyxvcmRpbmFsOmZ1bmN0aW9uKG51bWJlcil7dmFyIGI9bnVtYmVyJTEwLG91dHB1dD0xPT09dG9JbnQobnVtYmVyJTEwMC8xMCk/InRoIjoxPT09Yj8ic3QiOjI9PT1iPyJuZCI6Mz09PWI/InJkIjoidGgiO3JldHVybiBudW1iZXIrb3V0cHV0fX0pLGhvb2tzLmxhbmc9ZGVwcmVjYXRlKCJtb21lbnQubGFuZyBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZSBpbnN0ZWFkLiIsZ2V0U2V0R2xvYmFsTG9jYWxlKSxob29rcy5sYW5nRGF0YT1kZXByZWNhdGUoIm1vbWVudC5sYW5nRGF0YSBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZURhdGEgaW5zdGVhZC4iLGdldExvY2FsZSk7dmFyIG1hdGhBYnM9TWF0aC5hYnM7ZnVuY3Rpb24gYWRkU3VidHJhY3QkMShkdXJhdGlvbixpbnB1dCx2YWx1ZSxkaXJlY3Rpb24pe3ZhciBvdGhlcj1jcmVhdGVEdXJhdGlvbihpbnB1dCx2YWx1ZSk7cmV0dXJuIGR1cmF0aW9uLl9taWxsaXNlY29uZHMrPWRpcmVjdGlvbipvdGhlci5fbWlsbGlzZWNvbmRzLGR1cmF0aW9uLl9kYXlzKz1kaXJlY3Rpb24qb3RoZXIuX2RheXMsZHVyYXRpb24uX21vbnRocys9ZGlyZWN0aW9uKm90aGVyLl9tb250aHMsZHVyYXRpb24uX2J1YmJsZSgpfWZ1bmN0aW9uIGFic0NlaWwobnVtYmVyKXtyZXR1cm4gbnVtYmVyPDA/TWF0aC5mbG9vcihudW1iZXIpOk1hdGguY2VpbChudW1iZXIpfWZ1bmN0aW9uIGRheXNUb01vbnRocyhkYXlzKXtyZXR1cm4gNDgwMCpkYXlzLzE0NjA5N31mdW5jdGlvbiBtb250aHNUb0RheXMobW9udGhzKXtyZXR1cm4gMTQ2MDk3Km1vbnRocy80ODAwfWZ1bmN0aW9uIG1ha2VBcyhhbGlhcyl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoYWxpYXMpfX12YXIgYXNNaWxsaXNlY29uZHM9bWFrZUFzKCJtcyIpLGFzU2Vjb25kcz1tYWtlQXMoInMiKSxhc01pbnV0ZXM9bWFrZUFzKCJtIiksYXNIb3Vycz1tYWtlQXMoImgiKSxhc0RheXM9bWFrZUFzKCJkIiksYXNXZWVrcz1tYWtlQXMoInciKSxhc01vbnRocz1tYWtlQXMoIk0iKSxhc1F1YXJ0ZXJzPW1ha2VBcygiUSIpLGFzWWVhcnM9bWFrZUFzKCJ5Iik7ZnVuY3Rpb24gbWFrZUdldHRlcihuYW1lKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/dGhpcy5fZGF0YVtuYW1lXTpOYU59fXZhciBtaWxsaXNlY29uZHM9bWFrZUdldHRlcigibWlsbGlzZWNvbmRzIiksc2Vjb25kcz1tYWtlR2V0dGVyKCJzZWNvbmRzIiksbWludXRlcz1tYWtlR2V0dGVyKCJtaW51dGVzIiksaG91cnM9bWFrZUdldHRlcigiaG91cnMiKSxkYXlzPW1ha2VHZXR0ZXIoImRheXMiKSxtb250aHM9bWFrZUdldHRlcigibW9udGhzIikseWVhcnM9bWFrZUdldHRlcigieWVhcnMiKSxyb3VuZD1NYXRoLnJvdW5kLHRocmVzaG9sZHM9e3NzOjQ0LHM6NDUsbTo0NSxoOjIyLGQ6MjYsTToxMX0sYWJzJDE9TWF0aC5hYnM7ZnVuY3Rpb24gc2lnbih4KXtyZXR1cm4oMDx4KS0oeDwwKXx8K3h9ZnVuY3Rpb24gdG9JU09TdHJpbmckMSgpe2lmKCF0aGlzLmlzVmFsaWQoKSlyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTt2YXIgbWludXRlcyxob3VycyxzZWNvbmRzPWFicyQxKHRoaXMuX21pbGxpc2Vjb25kcykvMWUzLGRheXM9YWJzJDEodGhpcy5fZGF5cyksbW9udGhzPWFicyQxKHRoaXMuX21vbnRocyk7bWludXRlcz1hYnNGbG9vcihzZWNvbmRzLzYwKSxob3Vycz1hYnNGbG9vcihtaW51dGVzLzYwKSxzZWNvbmRzJT02MCxtaW51dGVzJT02MDt2YXIgWT1hYnNGbG9vcihtb250aHMvMTIpLE09bW9udGhzJT0xMixEPWRheXMsaD1ob3VycyxtPW1pbnV0ZXMscz1zZWNvbmRzP3NlY29uZHMudG9GaXhlZCgzKS5yZXBsYWNlKC9cLj8wKyQvLCIiKToiIix0b3RhbD10aGlzLmFzU2Vjb25kcygpO2lmKCF0b3RhbClyZXR1cm4iUDBEIjt2YXIgdG90YWxTaWduPXRvdGFsPDA/Ii0iOiIiLHltU2lnbj1zaWduKHRoaXMuX21vbnRocykhPT1zaWduKHRvdGFsKT8iLSI6IiIsZGF5c1NpZ249c2lnbih0aGlzLl9kYXlzKSE9PXNpZ24odG90YWwpPyItIjoiIixobXNTaWduPXNpZ24odGhpcy5fbWlsbGlzZWNvbmRzKSE9PXNpZ24odG90YWwpPyItIjoiIjtyZXR1cm4gdG90YWxTaWduKyJQIisoWT95bVNpZ24rWSsiWSI6IiIpKyhNP3ltU2lnbitNKyJNIjoiIikrKEQ/ZGF5c1NpZ24rRCsiRCI6IiIpKyhofHxtfHxzPyJUIjoiIikrKGg/aG1zU2lnbitoKyJIIjoiIikrKG0/aG1zU2lnbittKyJNIjoiIikrKHM/aG1zU2lnbitzKyJTIjoiIil9dmFyIHByb3RvJDI9RHVyYXRpb24ucHJvdG90eXBlO3JldHVybiBwcm90byQyLmlzVmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWYWxpZH0scHJvdG8kMi5hYnM9ZnVuY3Rpb24oKXt2YXIgZGF0YT10aGlzLl9kYXRhO3JldHVybiB0aGlzLl9taWxsaXNlY29uZHM9bWF0aEFicyh0aGlzLl9taWxsaXNlY29uZHMpLHRoaXMuX2RheXM9bWF0aEFicyh0aGlzLl9kYXlzKSx0aGlzLl9tb250aHM9bWF0aEFicyh0aGlzLl9tb250aHMpLGRhdGEubWlsbGlzZWNvbmRzPW1hdGhBYnMoZGF0YS5taWxsaXNlY29uZHMpLGRhdGEuc2Vjb25kcz1tYXRoQWJzKGRhdGEuc2Vjb25kcyksZGF0YS5taW51dGVzPW1hdGhBYnMoZGF0YS5taW51dGVzKSxkYXRhLmhvdXJzPW1hdGhBYnMoZGF0YS5ob3VycyksZGF0YS5tb250aHM9bWF0aEFicyhkYXRhLm1vbnRocyksZGF0YS55ZWFycz1tYXRoQWJzKGRhdGEueWVhcnMpLHRoaXN9LHByb3RvJDIuYWRkPWZ1bmN0aW9uKGlucHV0LHZhbHVlKXtyZXR1cm4gYWRkU3VidHJhY3QkMSh0aGlzLGlucHV0LHZhbHVlLDEpfSxwcm90byQyLnN1YnRyYWN0PWZ1bmN0aW9uKGlucHV0LHZhbHVlKXtyZXR1cm4gYWRkU3VidHJhY3QkMSh0aGlzLGlucHV0LHZhbHVlLC0xKX0scHJvdG8kMi5hcz1mdW5jdGlvbih1bml0cyl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBOYU47dmFyIGRheXMsbW9udGhzLG1pbGxpc2Vjb25kcz10aGlzLl9taWxsaXNlY29uZHM7aWYoIm1vbnRoIj09PSh1bml0cz1ub3JtYWxpemVVbml0cyh1bml0cykpfHwicXVhcnRlciI9PT11bml0c3x8InllYXIiPT09dW5pdHMpc3dpdGNoKGRheXM9dGhpcy5fZGF5cyttaWxsaXNlY29uZHMvODY0ZTUsbW9udGhzPXRoaXMuX21vbnRocytkYXlzVG9Nb250aHMoZGF5cyksdW5pdHMpe2Nhc2UibW9udGgiOnJldHVybiBtb250aHM7Y2FzZSJxdWFydGVyIjpyZXR1cm4gbW9udGhzLzM7Y2FzZSJ5ZWFyIjpyZXR1cm4gbW9udGhzLzEyfWVsc2Ugc3dpdGNoKGRheXM9dGhpcy5fZGF5cytNYXRoLnJvdW5kKG1vbnRoc1RvRGF5cyh0aGlzLl9tb250aHMpKSx1bml0cyl7Y2FzZSJ3ZWVrIjpyZXR1cm4gZGF5cy83K21pbGxpc2Vjb25kcy82MDQ4ZTU7Y2FzZSJkYXkiOnJldHVybiBkYXlzK21pbGxpc2Vjb25kcy84NjRlNTtjYXNlImhvdXIiOnJldHVybiAyNCpkYXlzK21pbGxpc2Vjb25kcy8zNmU1O2Nhc2UibWludXRlIjpyZXR1cm4gMTQ0MCpkYXlzK21pbGxpc2Vjb25kcy82ZTQ7Y2FzZSJzZWNvbmQiOnJldHVybiA4NjQwMCpkYXlzK21pbGxpc2Vjb25kcy8xZTM7Y2FzZSJtaWxsaXNlY29uZCI6cmV0dXJuIE1hdGguZmxvb3IoODY0ZTUqZGF5cykrbWlsbGlzZWNvbmRzO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHVuaXQgIit1bml0cyl9fSxwcm90byQyLmFzTWlsbGlzZWNvbmRzPWFzTWlsbGlzZWNvbmRzLHByb3RvJDIuYXNTZWNvbmRzPWFzU2Vjb25kcyxwcm90byQyLmFzTWludXRlcz1hc01pbnV0ZXMscHJvdG8kMi5hc0hvdXJzPWFzSG91cnMscHJvdG8kMi5hc0RheXM9YXNEYXlzLHByb3RvJDIuYXNXZWVrcz1hc1dlZWtzLHByb3RvJDIuYXNNb250aHM9YXNNb250aHMscHJvdG8kMi5hc1F1YXJ0ZXJzPWFzUXVhcnRlcnMscHJvdG8kMi5hc1llYXJzPWFzWWVhcnMscHJvdG8kMi52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuX21pbGxpc2Vjb25kcys4NjRlNSp0aGlzLl9kYXlzK3RoaXMuX21vbnRocyUxMioyNTkyZTYrMzE1MzZlNip0b0ludCh0aGlzLl9tb250aHMvMTIpOk5hTn0scHJvdG8kMi5fYnViYmxlPWZ1bmN0aW9uKCl7dmFyIHNlY29uZHMsbWludXRlcyxob3Vycyx5ZWFycyxtb250aHNGcm9tRGF5cyxtaWxsaXNlY29uZHM9dGhpcy5fbWlsbGlzZWNvbmRzLGRheXM9dGhpcy5fZGF5cyxtb250aHM9dGhpcy5fbW9udGhzLGRhdGE9dGhpcy5fZGF0YTtyZXR1cm4gMDw9bWlsbGlzZWNvbmRzJiYwPD1kYXlzJiYwPD1tb250aHN8fG1pbGxpc2Vjb25kczw9MCYmZGF5czw9MCYmbW9udGhzPD0wfHwobWlsbGlzZWNvbmRzKz04NjRlNSphYnNDZWlsKG1vbnRoc1RvRGF5cyhtb250aHMpK2RheXMpLG1vbnRocz1kYXlzPTApLGRhdGEubWlsbGlzZWNvbmRzPW1pbGxpc2Vjb25kcyUxZTMsc2Vjb25kcz1hYnNGbG9vcihtaWxsaXNlY29uZHMvMWUzKSxkYXRhLnNlY29uZHM9c2Vjb25kcyU2MCxtaW51dGVzPWFic0Zsb29yKHNlY29uZHMvNjApLGRhdGEubWludXRlcz1taW51dGVzJTYwLGhvdXJzPWFic0Zsb29yKG1pbnV0ZXMvNjApLGRhdGEuaG91cnM9aG91cnMlMjQsZGF5cys9YWJzRmxvb3IoaG91cnMvMjQpLG1vbnRoc0Zyb21EYXlzPWFic0Zsb29yKGRheXNUb01vbnRocyhkYXlzKSksbW9udGhzKz1tb250aHNGcm9tRGF5cyxkYXlzLT1hYnNDZWlsKG1vbnRoc1RvRGF5cyhtb250aHNGcm9tRGF5cykpLHllYXJzPWFic0Zsb29yKG1vbnRocy8xMiksbW9udGhzJT0xMixkYXRhLmRheXM9ZGF5cyxkYXRhLm1vbnRocz1tb250aHMsZGF0YS55ZWFycz15ZWFycyx0aGlzfSxwcm90byQyLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIGNyZWF0ZUR1cmF0aW9uKHRoaXMpfSxwcm90byQyLmdldD1mdW5jdGlvbih1bml0cyl7cmV0dXJuIHVuaXRzPW5vcm1hbGl6ZVVuaXRzKHVuaXRzKSx0aGlzLmlzVmFsaWQoKT90aGlzW3VuaXRzKyJzIl0oKTpOYU59LHByb3RvJDIubWlsbGlzZWNvbmRzPW1pbGxpc2Vjb25kcyxwcm90byQyLnNlY29uZHM9c2Vjb25kcyxwcm90byQyLm1pbnV0ZXM9bWludXRlcyxwcm90byQyLmhvdXJzPWhvdXJzLHByb3RvJDIuZGF5cz1kYXlzLHByb3RvJDIud2Vla3M9ZnVuY3Rpb24oKXtyZXR1cm4gYWJzRmxvb3IodGhpcy5kYXlzKCkvNyl9LHByb3RvJDIubW9udGhzPW1vbnRocyxwcm90byQyLnllYXJzPXllYXJzLHByb3RvJDIuaHVtYW5pemU9ZnVuY3Rpb24od2l0aFN1ZmZpeCl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO3ZhciBsb2NhbGU9dGhpcy5sb2NhbGVEYXRhKCksb3V0cHV0PWZ1bmN0aW9uKHBvc05lZ0R1cmF0aW9uLHdpdGhvdXRTdWZmaXgsbG9jYWxlKXt2YXIgZHVyYXRpb249Y3JlYXRlRHVyYXRpb24ocG9zTmVnRHVyYXRpb24pLmFicygpLHNlY29uZHM9cm91bmQoZHVyYXRpb24uYXMoInMiKSksbWludXRlcz1yb3VuZChkdXJhdGlvbi5hcygibSIpKSxob3Vycz1yb3VuZChkdXJhdGlvbi5hcygiaCIpKSxkYXlzPXJvdW5kKGR1cmF0aW9uLmFzKCJkIikpLG1vbnRocz1yb3VuZChkdXJhdGlvbi5hcygiTSIpKSx5ZWFycz1yb3VuZChkdXJhdGlvbi5hcygieSIpKSxhPXNlY29uZHM8PXRocmVzaG9sZHMuc3MmJlsicyIsc2Vjb25kc118fHNlY29uZHM8dGhyZXNob2xkcy5zJiZbInNzIixzZWNvbmRzXXx8bWludXRlczw9MSYmWyJtIl18fG1pbnV0ZXM8dGhyZXNob2xkcy5tJiZbIm1tIixtaW51dGVzXXx8aG91cnM8PTEmJlsiaCJdfHxob3Vyczx0aHJlc2hvbGRzLmgmJlsiaGgiLGhvdXJzXXx8ZGF5czw9MSYmWyJkIl18fGRheXM8dGhyZXNob2xkcy5kJiZbImRkIixkYXlzXXx8bW9udGhzPD0xJiZbIk0iXXx8bW9udGhzPHRocmVzaG9sZHMuTSYmWyJNTSIsbW9udGhzXXx8eWVhcnM8PTEmJlsieSJdfHxbInl5Iix5ZWFyc107cmV0dXJuIGFbMl09d2l0aG91dFN1ZmZpeCxhWzNdPTA8K3Bvc05lZ0R1cmF0aW9uLGFbNF09bG9jYWxlLGZ1bmN0aW9uKHN0cmluZyxudW1iZXIsd2l0aG91dFN1ZmZpeCxpc0Z1dHVyZSxsb2NhbGUpe3JldHVybiBsb2NhbGUucmVsYXRpdmVUaW1lKG51bWJlcnx8MSwhIXdpdGhvdXRTdWZmaXgsc3RyaW5nLGlzRnV0dXJlKX0uYXBwbHkobnVsbCxhKX0odGhpcywhd2l0aFN1ZmZpeCxsb2NhbGUpO3JldHVybiB3aXRoU3VmZml4JiYob3V0cHV0PWxvY2FsZS5wYXN0RnV0dXJlKCt0aGlzLG91dHB1dCkpLGxvY2FsZS5wb3N0Zm9ybWF0KG91dHB1dCl9LHByb3RvJDIudG9JU09TdHJpbmc9dG9JU09TdHJpbmckMSxwcm90byQyLnRvU3RyaW5nPXRvSVNPU3RyaW5nJDEscHJvdG8kMi50b0pTT049dG9JU09TdHJpbmckMSxwcm90byQyLmxvY2FsZT1sb2NhbGUscHJvdG8kMi5sb2NhbGVEYXRhPWxvY2FsZURhdGEscHJvdG8kMi50b0lzb1N0cmluZz1kZXByZWNhdGUoInRvSXNvU3RyaW5nKCkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0b0lTT1N0cmluZygpIGluc3RlYWQgKG5vdGljZSB0aGUgY2FwaXRhbHMpIix0b0lTT1N0cmluZyQxKSxwcm90byQyLmxhbmc9bGFuZyxhZGRGb3JtYXRUb2tlbigiWCIsMCwwLCJ1bml4IiksYWRkRm9ybWF0VG9rZW4oIngiLDAsMCwidmFsdWVPZiIpLGFkZFJlZ2V4VG9rZW4oIngiLG1hdGNoU2lnbmVkKSxhZGRSZWdleFRva2VuKCJYIiwvWystXT9cZCsoXC5cZHsxLDN9KT8vKSxhZGRQYXJzZVRva2VuKCJYIixmdW5jdGlvbihpbnB1dCxhcnJheSxjb25maWcpe2NvbmZpZy5fZD1uZXcgRGF0ZSgxZTMqcGFyc2VGbG9hdChpbnB1dCwxMCkpfSksYWRkUGFyc2VUb2tlbigieCIsZnVuY3Rpb24oaW5wdXQsYXJyYXksY29uZmlnKXtjb25maWcuX2Q9bmV3IERhdGUodG9JbnQoaW5wdXQpKX0pLGhvb2tzLnZlcnNpb249IjIuMjQuMCIsaG9va0NhbGxiYWNrPWNyZWF0ZUxvY2FsLGhvb2tzLmZuPXByb3RvLGhvb2tzLm1pbj1mdW5jdGlvbigpe3JldHVybiBwaWNrQnkoImlzQmVmb3JlIixbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSl9LGhvb2tzLm1heD1mdW5jdGlvbigpe3JldHVybiBwaWNrQnkoImlzQWZ0ZXIiLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKX0saG9va3Mubm93PWZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93P0RhdGUubm93KCk6K25ldyBEYXRlfSxob29rcy51dGM9Y3JlYXRlVVRDLGhvb2tzLnVuaXg9ZnVuY3Rpb24oaW5wdXQpe3JldHVybiBjcmVhdGVMb2NhbCgxZTMqaW5wdXQpfSxob29rcy5tb250aHM9ZnVuY3Rpb24oZm9ybWF0LGluZGV4KXtyZXR1cm4gbGlzdE1vbnRoc0ltcGwoZm9ybWF0LGluZGV4LCJtb250aHMiKX0saG9va3MuaXNEYXRlPWlzRGF0ZSxob29rcy5sb2NhbGU9Z2V0U2V0R2xvYmFsTG9jYWxlLGhvb2tzLmludmFsaWQ9Y3JlYXRlSW52YWxpZCxob29rcy5kdXJhdGlvbj1jcmVhdGVEdXJhdGlvbixob29rcy5pc01vbWVudD1pc01vbWVudCxob29rcy53ZWVrZGF5cz1mdW5jdGlvbihsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4KXtyZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4LCJ3ZWVrZGF5cyIpfSxob29rcy5wYXJzZVpvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gY3JlYXRlTG9jYWwuYXBwbHkobnVsbCxhcmd1bWVudHMpLnBhcnNlWm9uZSgpfSxob29rcy5sb2NhbGVEYXRhPWdldExvY2FsZSxob29rcy5pc0R1cmF0aW9uPWlzRHVyYXRpb24saG9va3MubW9udGhzU2hvcnQ9ZnVuY3Rpb24oZm9ybWF0LGluZGV4KXtyZXR1cm4gbGlzdE1vbnRoc0ltcGwoZm9ybWF0LGluZGV4LCJtb250aHNTaG9ydCIpfSxob29rcy53ZWVrZGF5c01pbj1mdW5jdGlvbihsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4KXtyZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4LCJ3ZWVrZGF5c01pbiIpfSxob29rcy5kZWZpbmVMb2NhbGU9ZGVmaW5lTG9jYWxlLGhvb2tzLnVwZGF0ZUxvY2FsZT1mdW5jdGlvbihuYW1lLGNvbmZpZyl7aWYobnVsbCE9Y29uZmlnKXt2YXIgbG9jYWxlLHRtcExvY2FsZSxwYXJlbnRDb25maWc9YmFzZUNvbmZpZztudWxsIT0odG1wTG9jYWxlPWxvYWRMb2NhbGUobmFtZSkpJiYocGFyZW50Q29uZmlnPXRtcExvY2FsZS5fY29uZmlnKSxjb25maWc9bWVyZ2VDb25maWdzKHBhcmVudENvbmZpZyxjb25maWcpLChsb2NhbGU9bmV3IExvY2FsZShjb25maWcpKS5wYXJlbnRMb2NhbGU9bG9jYWxlc1tuYW1lXSxsb2NhbGVzW25hbWVdPWxvY2FsZSxnZXRTZXRHbG9iYWxMb2NhbGUobmFtZSl9ZWxzZSBudWxsIT1sb2NhbGVzW25hbWVdJiYobnVsbCE9bG9jYWxlc1tuYW1lXS5wYXJlbnRMb2NhbGU/bG9jYWxlc1tuYW1lXT1sb2NhbGVzW25hbWVdLnBhcmVudExvY2FsZTpudWxsIT1sb2NhbGVzW25hbWVdJiZkZWxldGUgbG9jYWxlc1tuYW1lXSk7cmV0dXJuIGxvY2FsZXNbbmFtZV19LGhvb2tzLmxvY2FsZXM9ZnVuY3Rpb24oKXtyZXR1cm4ga2V5cyhsb2NhbGVzKX0saG9va3Mud2Vla2RheXNTaG9ydD1mdW5jdGlvbihsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4KXtyZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsZm9ybWF0LGluZGV4LCJ3ZWVrZGF5c1Nob3J0Iil9LGhvb2tzLm5vcm1hbGl6ZVVuaXRzPW5vcm1hbGl6ZVVuaXRzLGhvb2tzLnJlbGF0aXZlVGltZVJvdW5kaW5nPWZ1bmN0aW9uKHJvdW5kaW5nRnVuY3Rpb24pe3JldHVybiB2b2lkIDAhPT1yb3VuZGluZ0Z1bmN0aW9uPyJmdW5jdGlvbiI9PXR5cGVvZiByb3VuZGluZ0Z1bmN0aW9uJiYocm91bmQ9cm91bmRpbmdGdW5jdGlvbiwhMCk6cm91bmR9LGhvb2tzLnJlbGF0aXZlVGltZVRocmVzaG9sZD1mdW5jdGlvbih0aHJlc2hvbGQsbGltaXQpe3JldHVybiB2b2lkIDAhPT10aHJlc2hvbGRzW3RocmVzaG9sZF0mJih2b2lkIDA9PT1saW1pdD90aHJlc2hvbGRzW3RocmVzaG9sZF06KHRocmVzaG9sZHNbdGhyZXNob2xkXT1saW1pdCwicyI9PT10aHJlc2hvbGQmJih0aHJlc2hvbGRzLnNzPWxpbWl0LTEpLCEwKSl9LGhvb2tzLmNhbGVuZGFyRm9ybWF0PWZ1bmN0aW9uKG15TW9tZW50LG5vdyl7dmFyIGRpZmY9bXlNb21lbnQuZGlmZihub3csImRheXMiLCEwKTtyZXR1cm4gZGlmZjwtNj8ic2FtZUVsc2UiOmRpZmY8LTE/Imxhc3RXZWVrIjpkaWZmPDA/Imxhc3REYXkiOmRpZmY8MT8ic2FtZURheSI6ZGlmZjwyPyJuZXh0RGF5IjpkaWZmPDc/Im5leHRXZWVrIjoic2FtZUVsc2UifSxob29rcy5wcm90b3R5cGU9cHJvdG8saG9va3MuSFRNTDVfRk1UPXtEQVRFVElNRV9MT0NBTDoiWVlZWS1NTS1ERFRISDptbSIsREFURVRJTUVfTE9DQUxfU0VDT05EUzoiWVlZWS1NTS1ERFRISDptbTpzcyIsREFURVRJTUVfTE9DQUxfTVM6IllZWVktTU0tRERUSEg6bW06c3MuU1NTIixEQVRFOiJZWVlZLU1NLUREIixUSU1FOiJISDptbSIsVElNRV9TRUNPTkRTOiJISDptbTpzcyIsVElNRV9NUzoiSEg6bW06c3MuU1NTIixXRUVLOiJHR0dHLVtXXVdXIixNT05USDoiWVlZWS1NTSJ9LGhvb2tzfSgpfSkuY2FsbCh0aGlzLF9fd2VicGFja19yZXF1aXJlX18oIll1VGkiKShtb2R1bGUpKX0sd2dlVTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyl7fSx3bXZHOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgZFA9X193ZWJwYWNrX3JlcXVpcmVfXygiaHN3YSIpLmYsY3JlYXRlPV9fd2VicGFja19yZXF1aXJlX18oIkt1dGgiKSxyZWRlZmluZUFsbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIzTHlqIiksY3R4PV9fd2VicGFja19yZXF1aXJlX18oIm0wUHAiKSxhbkluc3RhbmNlPV9fd2VicGFja19yZXF1aXJlX18oIjlnWDciKSxmb3JPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJTbGtZIiksJGl0ZXJEZWZpbmU9X193ZWJwYWNrX3JlcXVpcmVfXygiQWZueiIpLHN0ZXA9X193ZWJwYWNrX3JlcXVpcmVfXygiMVRzQSIpLHNldFNwZWNpZXM9X193ZWJwYWNrX3JlcXVpcmVfXygiZWxacSIpLERFU0NSSVBUT1JTPV9fd2VicGFja19yZXF1aXJlX18oIm5oNGciKSxmYXN0S2V5PV9fd2VicGFja19yZXF1aXJlX18oIlo2dkYiKS5mYXN0S2V5LHZhbGlkYXRlPV9fd2VicGFja19yZXF1aXJlX18oInM1cVkiKSxTSVpFPURFU0NSSVBUT1JTPyJfcyI6InNpemUiLGdldEVudHJ5PWZ1bmN0aW9uKHRoYXQsa2V5KXt2YXIgZW50cnksaW5kZXg9ZmFzdEtleShrZXkpO2lmKCJGIiE9PWluZGV4KXJldHVybiB0aGF0Ll9pW2luZGV4XTtmb3IoZW50cnk9dGhhdC5fZjtlbnRyeTtlbnRyeT1lbnRyeS5uKWlmKGVudHJ5Lms9PWtleSlyZXR1cm4gZW50cnl9O21vZHVsZS5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbih3cmFwcGVyLE5BTUUsSVNfTUFQLEFEREVSKXt2YXIgQz13cmFwcGVyKGZ1bmN0aW9uKHRoYXQsaXRlcmFibGUpe2FuSW5zdGFuY2UodGhhdCxDLE5BTUUsIl9pIiksdGhhdC5fdD1OQU1FLHRoYXQuX2k9Y3JlYXRlKG51bGwpLHRoYXQuX2Y9dm9pZCAwLHRoYXQuX2w9dm9pZCAwLHRoYXRbU0laRV09MCxudWxsIT1pdGVyYWJsZSYmZm9yT2YoaXRlcmFibGUsSVNfTUFQLHRoYXRbQURERVJdLHRoYXQpfSk7cmV0dXJuIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLHtjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgdGhhdD12YWxpZGF0ZSh0aGlzLE5BTUUpLGRhdGE9dGhhdC5faSxlbnRyeT10aGF0Ll9mO2VudHJ5O2VudHJ5PWVudHJ5Lm4pZW50cnkucj0hMCxlbnRyeS5wJiYoZW50cnkucD1lbnRyeS5wLm49dm9pZCAwKSxkZWxldGUgZGF0YVtlbnRyeS5pXTt0aGF0Ll9mPXRoYXQuX2w9dm9pZCAwLHRoYXRbU0laRV09MH0sZGVsZXRlOmZ1bmN0aW9uKGtleSl7dmFyIHRoYXQ9dmFsaWRhdGUodGhpcyxOQU1FKSxlbnRyeT1nZXRFbnRyeSh0aGF0LGtleSk7aWYoZW50cnkpe3ZhciBuZXh0PWVudHJ5Lm4scHJldj1lbnRyeS5wO2RlbGV0ZSB0aGF0Ll9pW2VudHJ5LmldLGVudHJ5LnI9ITAscHJldiYmKHByZXYubj1uZXh0KSxuZXh0JiYobmV4dC5wPXByZXYpLHRoYXQuX2Y9PWVudHJ5JiYodGhhdC5fZj1uZXh0KSx0aGF0Ll9sPT1lbnRyeSYmKHRoYXQuX2w9cHJldiksdGhhdFtTSVpFXS0tfXJldHVybiEhZW50cnl9LGZvckVhY2g6ZnVuY3Rpb24oY2FsbGJhY2tmbil7dmFsaWRhdGUodGhpcyxOQU1FKTtmb3IodmFyIGVudHJ5LGY9Y3R4KGNhbGxiYWNrZm4sMTxhcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyk7ZW50cnk9ZW50cnk/ZW50cnkubjp0aGlzLl9mOylmb3IoZihlbnRyeS52LGVudHJ5LmssdGhpcyk7ZW50cnkmJmVudHJ5LnI7KWVudHJ5PWVudHJ5LnB9LGhhczpmdW5jdGlvbihrZXkpe3JldHVybiEhZ2V0RW50cnkodmFsaWRhdGUodGhpcyxOQU1FKSxrZXkpfX0pLERFU0NSSVBUT1JTJiZkUChDLnByb3RvdHlwZSwic2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB2YWxpZGF0ZSh0aGlzLE5BTUUpW1NJWkVdfX0pLEN9LGRlZjpmdW5jdGlvbih0aGF0LGtleSx2YWx1ZSl7dmFyIHByZXYsaW5kZXgsZW50cnk9Z2V0RW50cnkodGhhdCxrZXkpO3JldHVybiBlbnRyeT9lbnRyeS52PXZhbHVlOih0aGF0Ll9sPWVudHJ5PXtpOmluZGV4PWZhc3RLZXkoa2V5LCEwKSxrOmtleSx2OnZhbHVlLHA6cHJldj10aGF0Ll9sLG46dm9pZCAwLHI6ITF9LHRoYXQuX2Z8fCh0aGF0Ll9mPWVudHJ5KSxwcmV2JiYocHJldi5uPWVudHJ5KSx0aGF0W1NJWkVdKyssIkYiIT09aW5kZXgmJih0aGF0Ll9pW2luZGV4XT1lbnRyeSkpLHRoYXR9LGdldEVudHJ5OmdldEVudHJ5LHNldFN0cm9uZzpmdW5jdGlvbihDLE5BTUUsSVNfTUFQKXskaXRlckRlZmluZShDLE5BTUUsZnVuY3Rpb24oaXRlcmF0ZWQsa2luZCl7dGhpcy5fdD12YWxpZGF0ZShpdGVyYXRlZCxOQU1FKSx0aGlzLl9rPWtpbmQsdGhpcy5fbD12b2lkIDB9LGZ1bmN0aW9uKCl7Zm9yKHZhciBraW5kPXRoaXMuX2ssZW50cnk9dGhpcy5fbDtlbnRyeSYmZW50cnkucjspZW50cnk9ZW50cnkucDtyZXR1cm4gdGhpcy5fdCYmKHRoaXMuX2w9ZW50cnk9ZW50cnk/ZW50cnkubjp0aGlzLl90Ll9mKT9zdGVwKDAsImtleXMiPT1raW5kP2VudHJ5Lms6InZhbHVlcyI9PWtpbmQ/ZW50cnkudjpbZW50cnkuayxlbnRyeS52XSk6KHRoaXMuX3Q9dm9pZCAwLHN0ZXAoMSkpfSxJU19NQVA/ImVudHJpZXMiOiJ2YWx1ZXMiLCFJU19NQVAsITApLHNldFNwZWNpZXMoTkFNRSl9fX0seDNVaDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIik7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtzY2FsZTpfX3dlYnBhY2tfcmVxdWlyZV9fKCI2ZElUIil9KX0seDZwSDpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiaGUiLHttb250aHM6IteZ16DXldeQ16hf16TXkdeo15XXkNeoX9ee16jXpV/XkNek16jXmdecX9ee15DXmV/XmdeV16DXmV/XmdeV15zXmV/XkNeV15LXldeh15hf16HXpNeY157XkdeoX9eQ15XXp9eY15XXkdeoX9eg15XXkdee15HXqF/Xk9em157XkdeoIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLXmdeg15XXs1/XpNeR16jXs1/Xnteo16Vf15DXpNeo17Nf157XkNeZX9eZ15XXoNeZX9eZ15XXnNeZX9eQ15XXktezX9eh16TXmNezX9eQ15XXp9ezX9eg15XXkdezX9eT16bXntezIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLXqNeQ16nXldefX9ep16DXmV/Xqdec15nXqdeZX9eo15HXmdei15lf15fXnteZ16nXmV/XqdeZ16nXmV/XqdeR16oiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi15DXs1/XkdezX9eS17Nf15PXs1/XlNezX9eV17Nf16nXsyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi15Bf15Ff15Jf15Nf15Rf15Vf16kiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgW9eRXU1NTU0gWVlZWSIsTExMOiJEIFvXkV1NTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgW9eRXU1NTU0gWVlZWSBISDptbSIsbDoiRC9NL1lZWVkiLGxsOiJEIE1NTSBZWVlZIixsbGw6IkQgTU1NIFlZWVkgSEg6bW0iLGxsbGw6ImRkZCwgRCBNTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb15TXmdeV150g15HWvl1MVCIsbmV4dERheToiW9ee15fXqCDXkda+XUxUIixuZXh0V2VlazoiZGRkZCBb15HXqdei15RdIExUIixsYXN0RGF5OiJb15DXqtee15XXnCDXkda+XUxUIixsYXN0V2VlazoiW9eR15nXldedXSBkZGRkIFvXlNeQ15fXqNeV158g15HXqdei15RdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLXkdei15XXkyAlcyIscGFzdDoi15zXpNeg15kgJXMiLHM6Itee16HXpNeoINep16DXmdeV16oiLHNzOiIlZCDXqdeg15nXldeqIixtOiLXk9en15QiLG1tOiIlZCDXk9en15XXqiIsaDoi16nXoteUIixoaDpmdW5jdGlvbihudW1iZXIpe3JldHVybiAyPT09bnVtYmVyPyLXqdei16rXmdeZ150iOm51bWJlcisiINep16LXldeqIn0sZDoi15nXldedIixkZDpmdW5jdGlvbihudW1iZXIpe3JldHVybiAyPT09bnVtYmVyPyLXmdeV157XmdeZ150iOm51bWJlcisiINeZ157XmdedIn0sTToi15fXldeT16kiLE1NOmZ1bmN0aW9uKG51bWJlcil7cmV0dXJuIDI9PT1udW1iZXI/IteX15XXk9ep15nXmdedIjpudW1iZXIrIiDXl9eV15PXqdeZ150ifSx5OiLXqdeg15QiLHl5OmZ1bmN0aW9uKG51bWJlcil7cmV0dXJuIDI9PT1udW1iZXI/Itep16DXqteZ15nXnSI6bnVtYmVyJTEwPT0wJiYxMCE9PW51bWJlcj9udW1iZXIrIiDXqdeg15QiOm51bWJlcisiINep16DXmdedIn19LG1lcmlkaWVtUGFyc2U6L9eQ15fXlCLXpnzXnNek16DXlCLXpnzXkNeX16jXmSDXlNem15TXqNeZ15nXnXzXnNek16DXmSDXlNem15TXqNeZ15nXnXzXnNek16DXldeqINeR15XXp9eofNeR15HXlden16h815HXoteo15EvaSxpc1BNOmZ1bmN0aW9uKGlucHV0KXtyZXR1cm4vXijXkNeX15Qi16Z815DXl9eo15kg15TXpteU16jXmdeZ151815HXoteo15EpJC8udGVzdChpbnB1dCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGhvdXIsbWludXRlLGlzTG93ZXIpe3JldHVybiBob3VyPDU/Itec16TXoNeV16og15HXlden16giOmhvdXI8MTA/IteR15HXlden16giOmhvdXI8MTI/aXNMb3dlcj8n15zXpNeg15Qi16YnOiLXnNek16DXmSDXlNem15TXqNeZ15nXnSI6aG91cjwxOD9pc0xvd2VyPyfXkNeX15Qi16YnOiLXkNeX16jXmSDXlNem15TXqNeZ15nXnSI6IteR16LXqNeRIn19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0seDhZajpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksZXhwbTE9X193ZWJwYWNrX3JlcXVpcmVfXygiTFZ3YyIpLGV4cD1NYXRoLmV4cDskZXhwb3J0KCRleHBvcnQuUywiTWF0aCIse3Rhbmg6ZnVuY3Rpb24oeCl7dmFyIGE9ZXhwbTEoeD0reCksYj1leHBtMSgteCk7cmV0dXJuIGE9PTEvMD8xOmI9PTEvMD8tMTooYS1iKS8oZXhwKHgpK2V4cCgteCkpfX0pfSx4OFpPOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKSxhYnM9TWF0aC5hYnM7JGV4cG9ydCgkZXhwb3J0LlMsIk1hdGgiLHtoeXBvdDpmdW5jdGlvbih2YWx1ZTEsdmFsdWUyKXtmb3IodmFyIGFyZyxkaXYsc3VtPTAsaT0wLGFMZW49YXJndW1lbnRzLmxlbmd0aCxsYXJnPTA7aTxhTGVuOylsYXJnPChhcmc9YWJzKGFyZ3VtZW50c1tpKytdKSk/KHN1bT1zdW0qKGRpdj1sYXJnL2FyZykqZGl2KzEsbGFyZz1hcmcpOnN1bSs9MDxhcmc/KGRpdj1hcmcvbGFyZykqZGl2OmFyZztyZXR1cm4gbGFyZz09PTEvMD8xLzA6bGFyZypNYXRoLnNxcnQoc3VtKX19KX0seDhxWjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtfX3dlYnBhY2tfcmVxdWlyZV9fKCJPbkk3IikoIm9ic2VydmFibGUiKX0seEFHUTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHV0aWxzPV9fd2VicGFja19yZXF1aXJlX18oInhUSisiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihkYXRhLGhlYWRlcnMsZm5zKXtyZXR1cm4gdXRpbHMuZm9yRWFjaChmbnMsZnVuY3Rpb24oZm4pe2RhdGE9Zm4oZGF0YSxoZWFkZXJzKX0pLGRhdGF9fSwieEYvYiI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBpc0FycmF5PV9fd2VicGFja19yZXF1aXJlX18oIkVXbUMiKSxpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0IiksdG9MZW5ndGg9X193ZWJwYWNrX3JlcXVpcmVfXygibmU4aSIpLGN0eD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJtMFBwIiksSVNfQ09OQ0FUX1NQUkVBREFCTEU9X193ZWJwYWNrX3JlcXVpcmVfXygiSzB4VSIpKCJpc0NvbmNhdFNwcmVhZGFibGUiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbiBmbGF0dGVuSW50b0FycmF5KHRhcmdldCxvcmlnaW5hbCxzb3VyY2Usc291cmNlTGVuLHN0YXJ0LGRlcHRoLG1hcHBlcix0aGlzQXJnKXtmb3IodmFyIGVsZW1lbnQsc3ByZWFkYWJsZSx0YXJnZXRJbmRleD1zdGFydCxzb3VyY2VJbmRleD0wLG1hcEZuPSEhbWFwcGVyJiZjdHgobWFwcGVyLHRoaXNBcmcsMyk7c291cmNlSW5kZXg8c291cmNlTGVuOyl7aWYoc291cmNlSW5kZXggaW4gc291cmNlKXtpZihlbGVtZW50PW1hcEZuP21hcEZuKHNvdXJjZVtzb3VyY2VJbmRleF0sc291cmNlSW5kZXgsb3JpZ2luYWwpOnNvdXJjZVtzb3VyY2VJbmRleF0sc3ByZWFkYWJsZT0hMSxpc09iamVjdChlbGVtZW50KSYmKHNwcmVhZGFibGU9dm9pZCAwIT09KHNwcmVhZGFibGU9ZWxlbWVudFtJU19DT05DQVRfU1BSRUFEQUJMRV0pPyEhc3ByZWFkYWJsZTppc0FycmF5KGVsZW1lbnQpKSxzcHJlYWRhYmxlJiYwPGRlcHRoKXRhcmdldEluZGV4PWZsYXR0ZW5JbnRvQXJyYXkodGFyZ2V0LG9yaWdpbmFsLGVsZW1lbnQsdG9MZW5ndGgoZWxlbWVudC5sZW5ndGgpLHRhcmdldEluZGV4LGRlcHRoLTEpLTE7ZWxzZXtpZig5MDA3MTk5MjU0NzQwOTkxPD10YXJnZXRJbmRleCl0aHJvdyBUeXBlRXJyb3IoKTt0YXJnZXRbdGFyZ2V0SW5kZXhdPWVsZW1lbnR9dGFyZ2V0SW5kZXgrK31zb3VyY2VJbmRleCsrfXJldHVybiB0YXJnZXRJbmRleH19LCJ4VEorIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGJpbmQ9X193ZWJwYWNrX3JlcXVpcmVfXygiSFNzYSIpLGlzQnVmZmVyPV9fd2VicGFja19yZXF1aXJlX18oIkJFdGciKSx0b1N0cmluZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIGlzQXJyYXkodmFsKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09dG9TdHJpbmcuY2FsbCh2YWwpfWZ1bmN0aW9uIGlzT2JqZWN0KHZhbCl7cmV0dXJuIG51bGwhPT12YWwmJiJvYmplY3QiPT10eXBlb2YgdmFsfWZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKXtyZXR1cm4iW29iamVjdCBGdW5jdGlvbl0iPT09dG9TdHJpbmcuY2FsbCh2YWwpfWZ1bmN0aW9uIGZvckVhY2gob2JqLGZuKXtpZihudWxsIT1vYmopaWYoIm9iamVjdCIhPXR5cGVvZiBvYmomJihvYmo9W29ial0pLGlzQXJyYXkob2JqKSlmb3IodmFyIGk9MCxsPW9iai5sZW5ndGg7aTxsO2krKylmbi5jYWxsKG51bGwsb2JqW2ldLGksb2JqKTtlbHNlIGZvcih2YXIga2V5IGluIG9iailPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLGtleSkmJmZuLmNhbGwobnVsbCxvYmpba2V5XSxrZXksb2JqKX1tb2R1bGUuZXhwb3J0cz17aXNBcnJheTppc0FycmF5LGlzQXJyYXlCdWZmZXI6ZnVuY3Rpb24odmFsKXtyZXR1cm4iW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09dG9TdHJpbmcuY2FsbCh2YWwpfSxpc0J1ZmZlcjppc0J1ZmZlcixpc0Zvcm1EYXRhOmZ1bmN0aW9uKHZhbCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBGb3JtRGF0YSYmdmFsIGluc3RhbmNlb2YgRm9ybURhdGF9LGlzQXJyYXlCdWZmZXJWaWV3OmZ1bmN0aW9uKHZhbCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmQXJyYXlCdWZmZXIuaXNWaWV3P0FycmF5QnVmZmVyLmlzVmlldyh2YWwpOnZhbCYmdmFsLmJ1ZmZlciYmdmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfSxpc1N0cmluZzpmdW5jdGlvbih2YWwpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdmFsfSxpc051bWJlcjpmdW5jdGlvbih2YWwpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdmFsfSxpc09iamVjdDppc09iamVjdCxpc1VuZGVmaW5lZDpmdW5jdGlvbih2YWwpe3JldHVybiB2b2lkIDA9PT12YWx9LGlzRGF0ZTpmdW5jdGlvbih2YWwpe3JldHVybiJbb2JqZWN0IERhdGVdIj09PXRvU3RyaW5nLmNhbGwodmFsKX0saXNGaWxlOmZ1bmN0aW9uKHZhbCl7cmV0dXJuIltvYmplY3QgRmlsZV0iPT09dG9TdHJpbmcuY2FsbCh2YWwpfSxpc0Jsb2I6ZnVuY3Rpb24odmFsKXtyZXR1cm4iW29iamVjdCBCbG9iXSI9PT10b1N0cmluZy5jYWxsKHZhbCl9LGlzRnVuY3Rpb246aXNGdW5jdGlvbixpc1N0cmVhbTpmdW5jdGlvbih2YWwpe3JldHVybiBpc09iamVjdCh2YWwpJiZpc0Z1bmN0aW9uKHZhbC5waXBlKX0saXNVUkxTZWFyY2hQYXJhbXM6ZnVuY3Rpb24odmFsKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIFVSTFNlYXJjaFBhcmFtcyYmdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zfSxpc1N0YW5kYXJkQnJvd3NlckVudjpmdW5jdGlvbigpe3JldHVybigidW5kZWZpbmVkIj09dHlwZW9mIG5hdmlnYXRvcnx8IlJlYWN0TmF0aXZlIiE9PW5hdmlnYXRvci5wcm9kdWN0KSYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnR9LGZvckVhY2g6Zm9yRWFjaCxtZXJnZTpmdW5jdGlvbiBtZXJnZSgpe3ZhciByZXN1bHQ9e307ZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLGtleSl7Im9iamVjdCI9PXR5cGVvZiByZXN1bHRba2V5XSYmIm9iamVjdCI9PXR5cGVvZiB2YWw/cmVzdWx0W2tleV09bWVyZ2UocmVzdWx0W2tleV0sdmFsKTpyZXN1bHRba2V5XT12YWx9Zm9yKHZhciBpPTAsbD1hcmd1bWVudHMubGVuZ3RoO2k8bDtpKyspZm9yRWFjaChhcmd1bWVudHNbaV0sYXNzaWduVmFsdWUpO3JldHVybiByZXN1bHR9LGV4dGVuZDpmdW5jdGlvbihhLGIsdGhpc0FyZyl7cmV0dXJuIGZvckVhY2goYixmdW5jdGlvbih2YWwsa2V5KXthW2tleV09dGhpc0FyZyYmImZ1bmN0aW9uIj09dHlwZW9mIHZhbD9iaW5kKHZhbCx0aGlzQXJnKTp2YWx9KSxhfSx0cmltOmZ1bmN0aW9uKHN0cil7cmV0dXJuIHN0ci5yZXBsYWNlKC9eXHMqLywiIikucmVwbGFjZSgvXHMqJC8sIiIpfX19LHhiU206ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO21vZHVsZS5leHBvcnRzPV9fd2VicGFja19yZXF1aXJlX18oIkxRQWMiKXx8IV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe3ZhciBLPU1hdGgucmFuZG9tKCk7X19kZWZpbmVTZXR0ZXJfXy5jYWxsKG51bGwsSyxmdW5jdGlvbigpe30pLGRlbGV0ZSBfX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIilbS119KX0seGZZNTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGdsb2JhbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJkeVpYIiksaGFzPV9fd2VicGFja19yZXF1aXJlX18oImFhZ3giKSxjb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiTFpXdCIpLGluaGVyaXRJZlJlcXVpcmVkPV9fd2VicGFja19yZXF1aXJlX18oIlhiemkiKSx0b1ByaW1pdGl2ZT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhcG1UIiksZmFpbHM9X193ZWJwYWNrX3JlcXVpcmVfXygiZWVWcSIpLGdPUE49X193ZWJwYWNrX3JlcXVpcmVfXygia0pNeCIpLmYsZ09QRD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJFZW1IIikuZixkUD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJoc3dhIikuZiwkdHJpbT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJxbmNCIikudHJpbSwkTnVtYmVyPWdsb2JhbC5OdW1iZXIsQmFzZT0kTnVtYmVyLHByb3RvPSROdW1iZXIucHJvdG90eXBlLEJST0tFTl9DT0Y9Ik51bWJlciI9PWNvZihfX3dlYnBhY2tfcmVxdWlyZV9fKCJLdXRoIikocHJvdG8pKSxUUklNPSJ0cmltImluIFN0cmluZy5wcm90b3R5cGUsdG9OdW1iZXI9ZnVuY3Rpb24oYXJndW1lbnQpe3ZhciBpdD10b1ByaW1pdGl2ZShhcmd1bWVudCwhMSk7aWYoInN0cmluZyI9PXR5cGVvZiBpdCYmMjxpdC5sZW5ndGgpe3ZhciB0aGlyZCxyYWRpeCxtYXhDb2RlLGZpcnN0PShpdD1UUklNP2l0LnRyaW0oKTokdHJpbShpdCwzKSkuY2hhckNvZGVBdCgwKTtpZig0Mz09PWZpcnN0fHw0NT09PWZpcnN0KXtpZig4OD09PSh0aGlyZD1pdC5jaGFyQ29kZUF0KDIpKXx8MTIwPT09dGhpcmQpcmV0dXJuIE5hTn1lbHNlIGlmKDQ4PT09Zmlyc3Qpe3N3aXRjaChpdC5jaGFyQ29kZUF0KDEpKXtjYXNlIDY2OmNhc2UgOTg6cmFkaXg9MixtYXhDb2RlPTQ5O2JyZWFrO2Nhc2UgNzk6Y2FzZSAxMTE6cmFkaXg9OCxtYXhDb2RlPTU1O2JyZWFrO2RlZmF1bHQ6cmV0dXJuK2l0fWZvcih2YXIgY29kZSxkaWdpdHM9aXQuc2xpY2UoMiksaT0wLGw9ZGlnaXRzLmxlbmd0aDtpPGw7aSsrKWlmKChjb2RlPWRpZ2l0cy5jaGFyQ29kZUF0KGkpKTw0OHx8bWF4Q29kZTxjb2RlKXJldHVybiBOYU47cmV0dXJuIHBhcnNlSW50KGRpZ2l0cyxyYWRpeCl9fXJldHVybitpdH07aWYoISROdW1iZXIoIiAwbzEiKXx8ISROdW1iZXIoIjBiMSIpfHwkTnVtYmVyKCIrMHgxIikpeyROdW1iZXI9ZnVuY3Rpb24odmFsdWUpe3ZhciBpdD1hcmd1bWVudHMubGVuZ3RoPDE/MDp2YWx1ZSx0aGF0PXRoaXM7cmV0dXJuIHRoYXQgaW5zdGFuY2VvZiAkTnVtYmVyJiYoQlJPS0VOX0NPRj9mYWlscyhmdW5jdGlvbigpe3Byb3RvLnZhbHVlT2YuY2FsbCh0aGF0KX0pOiJOdW1iZXIiIT1jb2YodGhhdCkpP2luaGVyaXRJZlJlcXVpcmVkKG5ldyBCYXNlKHRvTnVtYmVyKGl0KSksdGhhdCwkTnVtYmVyKTp0b051bWJlcihpdCl9O2Zvcih2YXIga2V5LGtleXM9X193ZWJwYWNrX3JlcXVpcmVfXygibmg0ZyIpP2dPUE4oQmFzZSk6Ik1BWF9WQUxVRSxNSU5fVkFMVUUsTmFOLE5FR0FUSVZFX0lORklOSVRZLFBPU0lUSVZFX0lORklOSVRZLEVQU0lMT04saXNGaW5pdGUsaXNJbnRlZ2VyLGlzTmFOLGlzU2FmZUludGVnZXIsTUFYX1NBRkVfSU5URUdFUixNSU5fU0FGRV9JTlRFR0VSLHBhcnNlRmxvYXQscGFyc2VJbnQsaXNJbnRlZ2VyIi5zcGxpdCgiLCIpLGo9MDtrZXlzLmxlbmd0aD5qO2orKyloYXMoQmFzZSxrZXk9a2V5c1tqXSkmJiFoYXMoJE51bWJlcixrZXkpJiZkUCgkTnVtYmVyLGtleSxnT1BEKEJhc2Usa2V5KSk7KCROdW1iZXIucHJvdG90eXBlPXByb3RvKS5jb25zdHJ1Y3Rvcj0kTnVtYmVyLF9fd2VicGFja19yZXF1aXJlX18oIktyb0oiKShnbG9iYWwsIk51bWJlciIsJE51bWJlcil9fSx4bTgwOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgJGV4cG9ydD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJYS0ZVIiksJHR5cGVkPV9fd2VicGFja19yZXF1aXJlX18oIkQ0aVYiKSxidWZmZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiN1F0eiIpLGFuT2JqZWN0PV9fd2VicGFja19yZXF1aXJlX18oInkzdzkiKSx0b0Fic29sdXRlSW5kZXg9X193ZWJwYWNrX3JlcXVpcmVfXygiZC9HYyIpLHRvTGVuZ3RoPV9fd2VicGFja19yZXF1aXJlX18oIm5lOGkiKSxpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0IiksQXJyYXlCdWZmZXI9X193ZWJwYWNrX3JlcXVpcmVfXygiZHlaWCIpLkFycmF5QnVmZmVyLHNwZWNpZXNDb25zdHJ1Y3Rvcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCI2OWJuIiksJEFycmF5QnVmZmVyPWJ1ZmZlci5BcnJheUJ1ZmZlciwkRGF0YVZpZXc9YnVmZmVyLkRhdGFWaWV3LCRpc1ZpZXc9JHR5cGVkLkFCViYmQXJyYXlCdWZmZXIuaXNWaWV3LCRzbGljZT0kQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlLFZJRVc9JHR5cGVkLlZJRVc7JGV4cG9ydCgkZXhwb3J0LkcrJGV4cG9ydC5XKyRleHBvcnQuRiooQXJyYXlCdWZmZXIhPT0kQXJyYXlCdWZmZXIpLHtBcnJheUJ1ZmZlcjokQXJyYXlCdWZmZXJ9KSwkZXhwb3J0KCRleHBvcnQuUyskZXhwb3J0LkYqISR0eXBlZC5DT05TVFIsIkFycmF5QnVmZmVyIix7aXNWaWV3OmZ1bmN0aW9uKGl0KXtyZXR1cm4gJGlzVmlldyYmJGlzVmlldyhpdCl8fGlzT2JqZWN0KGl0KSYmVklFVyBpbiBpdH19KSwkZXhwb3J0KCRleHBvcnQuUCskZXhwb3J0LlUrJGV4cG9ydC5GKl9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe3JldHVybiFuZXcgJEFycmF5QnVmZmVyKDIpLnNsaWNlKDEsdm9pZCAwKS5ieXRlTGVuZ3RofSksIkFycmF5QnVmZmVyIix7c2xpY2U6ZnVuY3Rpb24oc3RhcnQsZW5kKXtpZih2b2lkIDAhPT0kc2xpY2UmJnZvaWQgMD09PWVuZClyZXR1cm4gJHNsaWNlLmNhbGwoYW5PYmplY3QodGhpcyksc3RhcnQpO2Zvcih2YXIgbGVuPWFuT2JqZWN0KHRoaXMpLmJ5dGVMZW5ndGgsZmlyc3Q9dG9BYnNvbHV0ZUluZGV4KHN0YXJ0LGxlbiksZmluPXRvQWJzb2x1dGVJbmRleCh2b2lkIDA9PT1lbmQ/bGVuOmVuZCxsZW4pLHJlc3VsdD1uZXcoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsJEFycmF5QnVmZmVyKSkodG9MZW5ndGgoZmluLWZpcnN0KSksdmlld1M9bmV3ICREYXRhVmlldyh0aGlzKSx2aWV3VD1uZXcgJERhdGFWaWV3KHJlc3VsdCksaW5kZXg9MDtmaXJzdDxmaW47KXZpZXdULnNldFVpbnQ4KGluZGV4Kyssdmlld1MuZ2V0VWludDgoZmlyc3QrKykpO3JldHVybiByZXN1bHR9fSksX193ZWJwYWNrX3JlcXVpcmVfXygiZWxacSIpKCJBcnJheUJ1ZmZlciIpfSx4cGl2OmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlhLRlUiKTskZXhwb3J0KCRleHBvcnQuUywiUmVmbGVjdCIse293bktleXM6X193ZWJwYWNrX3JlcXVpcmVfXygibVF0diIpfSl9LHhwcWw6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7bW9kdWxlLmV4cG9ydHM9IV9fd2VicGFja19yZXF1aXJlX18oIm5oNGciKSYmIV9fd2VicGFja19yZXF1aXJlX18oImVlVnEiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX3JlcXVpcmVfXygiSXc3MSIpKCJkaXYiKSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0seHFGYzpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyICRleHBvcnQ9X193ZWJwYWNrX3JlcXVpcmVfXygiWEtGVSIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKENPTExFQ1RJT04peyRleHBvcnQoJGV4cG9ydC5TLENPTExFQ1RJT04se29mOmZ1bmN0aW9uKCl7Zm9yKHZhciBsZW5ndGg9YXJndW1lbnRzLmxlbmd0aCxBPW5ldyBBcnJheShsZW5ndGgpO2xlbmd0aC0tOylBW2xlbmd0aF09YXJndW1lbnRzW2xlbmd0aF07cmV0dXJuIG5ldyB0aGlzKEEpfX0pfX0seTN3OTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiMC9SNCIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGl0KXtpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGl0fX0seUs5czpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIHV0aWxzPV9fd2VicGFja19yZXF1aXJlX18oInhUSisiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihoZWFkZXJzLG5vcm1hbGl6ZWROYW1lKXt1dGlscy5mb3JFYWNoKGhlYWRlcnMsZnVuY3Rpb24odmFsdWUsbmFtZSl7bmFtZSE9PW5vcm1hbGl6ZWROYW1lJiZuYW1lLnRvVXBwZXJDYXNlKCk9PT1ub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpJiYoaGVhZGVyc1tub3JtYWxpemVkTmFtZV09dmFsdWUsZGVsZXRlIGhlYWRlcnNbbmFtZV0pfSl9fSx5THBqOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzKXt2YXIgZztnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCk7dHJ5e2c9Z3x8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKXx8ZXZhbCgidGhpcyIpfWNhdGNoKGUpeyJvYmplY3QiPT10eXBlb2Ygd2luZG93JiYoZz13aW5kb3cpfW1vZHVsZS5leHBvcnRzPWd9LHlNNGI6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIFRPX1BSSU1JVElWRT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLMHhVIikoInRvUHJpbWl0aXZlIikscHJvdG89RGF0ZS5wcm90b3R5cGU7VE9fUFJJTUlUSVZFIGluIHByb3RvfHxfX3dlYnBhY2tfcmVxdWlyZV9fKCJNdWtiIikocHJvdG8sVE9fUFJJTUlUSVZFLF9fd2VicGFja19yZXF1aXJlX18oImc0RUUiKSl9LHlQTXM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO21vbWVudC5kZWZpbmVMb2NhbGUoInNxIix7bW9udGhzOiJKYW5hcl9TaGt1cnRfTWFyc19QcmlsbF9NYWpfUWVyc2hvcl9Lb3JyaWtfR3VzaHRfU2h0YXRvcl9UZXRvcl9Ow6tudG9yX0RoamV0b3IiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9TaGtfTWFyX1ByaV9NYWpfUWVyX0tvcl9HdXNfU2h0X1RldF9Ow6tuX0RoaiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiRSBEaWVsX0UgSMOrbsOrX0UgTWFydMOrX0UgTcOrcmt1csOrX0UgRW5qdGVfRSBQcmVtdGVfRSBTaHR1bsOrIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IkRpZV9Iw6tuX01hcl9Nw6tyX0Vual9QcmVfU2h0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEX0hfTWFfTcOrX0VfUF9TaCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbWVyaWRpZW1QYXJzZTovUER8TUQvLGlzUE06ZnVuY3Rpb24oaW5wdXQpe3JldHVybiJNIj09PWlucHV0LmNoYXJBdCgwKX0sbWVyaWRpZW06ZnVuY3Rpb24oaG91cnMsbWludXRlcyxpc0xvd2VyKXtyZXR1cm4gaG91cnM8MTI/IlBEIjoiTUQifSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltTb3QgbsOrXSBMVCIsbmV4dERheToiW05lc8OrciBuw6tdIExUIixuZXh0V2VlazoiZGRkZCBbbsOrXSBMVCIsbGFzdERheToiW0RqZSBuw6tdIExUIixsYXN0V2VlazoiZGRkZCBbZSBrYWx1YXIgbsOrXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToibsOrICVzIixwYXN0OiIlcyBtw6sgcGFyw6siLHM6ImRpc2Egc2Vrb25kYSIsc3M6IiVkIHNla29uZGEiLG06Im5qw6sgbWludXTDqyIsbW06IiVkIG1pbnV0YSIsaDoibmrDqyBvcsOrIixoaDoiJWQgb3LDqyIsZDoibmrDqyBkaXTDqyIsZGQ6IiVkIGRpdMOrIixNOiJuasOrIG11YWoiLE1NOiIlZCBtdWFqIix5OiJuasOrIHZpdCIseXk6IiVkIHZpdGUifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSl9KF9fd2VicGFja19yZXF1aXJlX18oIndkL1IiKSl9LHlscXM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMpe3ZhciBpZD0wLHB4PU1hdGgucmFuZG9tKCk7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oa2V5KXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWtleT8iIjprZXksIilfIiwoKytpZCtweCkudG9TdHJpbmcoMzYpKX19LHl0OE86ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBhZGRUb1Vuc2NvcGFibGVzPV9fd2VicGFja19yZXF1aXJlX18oIm5HeXUiKSxzdGVwPV9fd2VicGFja19yZXF1aXJlX18oIjFUc0EiKSxJdGVyYXRvcnM9X193ZWJwYWNrX3JlcXVpcmVfXygiaFBJUSIpLHRvSU9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJhQ0ZqIik7bW9kdWxlLmV4cG9ydHM9X193ZWJwYWNrX3JlcXVpcmVfXygiQWZueiIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oaXRlcmF0ZWQsa2luZCl7dGhpcy5fdD10b0lPYmplY3QoaXRlcmF0ZWQpLHRoaXMuX2k9MCx0aGlzLl9rPWtpbmR9LGZ1bmN0aW9uKCl7dmFyIE89dGhpcy5fdCxraW5kPXRoaXMuX2ssaW5kZXg9dGhpcy5faSsrO3JldHVybiFPfHxpbmRleD49Ty5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLHN0ZXAoMSkpOnN0ZXAoMCwia2V5cyI9PWtpbmQ/aW5kZXg6InZhbHVlcyI9PWtpbmQ/T1tpbmRleF06W2luZGV4LE9baW5kZXhdXSl9LCJ2YWx1ZXMiKSxJdGVyYXRvcnMuQXJndW1lbnRzPUl0ZXJhdG9ycy5BcnJheSxhZGRUb1Vuc2NvcGFibGVzKCJrZXlzIiksYWRkVG9VbnNjb3BhYmxlcygidmFsdWVzIiksYWRkVG9VbnNjb3BhYmxlcygiZW50cmllcyIpfSx6MUZDOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18peyFmdW5jdGlvbihtb21lbnQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBwcm9jZXNzUmVsYXRpdmVUaW1lKG51bWJlcix3aXRob3V0U3VmZml4LGtleSxpc0Z1dHVyZSl7dmFyIGZvcm1hdD17czpbInZpZW5zYXMgc2VjdW5kcyIsIidpZW5zYXMgc2VjdW5kcyJdLHNzOltudW1iZXIrIiBzZWN1bmRzIixudW1iZXIrIiBzZWN1bmRzIl0sbTpbIiduIG3DrXV0IiwiJ2llbnMgbcOtdXQiXSxtbTpbbnVtYmVyKyIgbcOtdXRzIixudW1iZXIrIiBtw611dHMiXSxoOlsiJ24gw75vcmEiLCInaWVuc2Egw75vcmEiXSxoaDpbbnVtYmVyKyIgw75vcmFzIixudW1iZXIrIiDDvm9yYXMiXSxkOlsiJ24geml1YSIsIidpZW5zYSB6aXVhIl0sZGQ6W251bWJlcisiIHppdWFzIixudW1iZXIrIiB6aXVhcyJdLE06WyInbiBtZXMiLCInaWVucyBtZXMiXSxNTTpbbnVtYmVyKyIgbWVzZW4iLG51bWJlcisiIG1lc2VuIl0seTpbIiduIGFyIiwiJ2llbnMgYXIiXSx5eTpbbnVtYmVyKyIgYXJzIixudW1iZXIrIiBhcnMiXX07cmV0dXJuIGlzRnV0dXJlP2Zvcm1hdFtrZXldWzBdOndpdGhvdXRTdWZmaXg/Zm9ybWF0W2tleV1bMF06Zm9ybWF0W2tleV1bMV19bW9tZW50LmRlZmluZUxvY2FsZSgidHpsIix7bW9udGhzOiJKYW51YXJfRmV2cmFnbGhfTWFyw6dfQXZyw691X01haV9Hw7xuX0p1bGlhX0d1c2NodF9TZXRlbXZhcl9MaXN0b3DDpHRzX05vZW12YXJfWmVjZW12YXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZXZfTWFyX0F2cl9NYWlfR8O8bl9KdWxfR3VzX1NldF9MaXNfTm9lX1plYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiU8O6bGFkaV9Mw7puZcOnaV9NYWl0emlfTcOhcmN1cmlfWGjDumFkaV9WacOpbmVyw6dpX1PDoXR1cmkiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU8O6bF9Mw7puX01haV9Nw6FyX1how7pfVmnDqV9Tw6F0Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTw7pfTMO6X01hX03DoV9YaF9WaV9Tw6EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISC5tbSIsTFRTOiJISC5tbS5zcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gW2RhbGxhc10gWVlZWSIsTExMOiJELiBNTU1NIFtkYWxsYXNdIFlZWVkgSEgubW0iLExMTEw6ImRkZGQsIFtsaV0gRC4gTU1NTSBbZGFsbGFzXSBZWVlZIEhILm1tIn0sbWVyaWRpZW1QYXJzZTovZFwnb3xkXCdhL2ksaXNQTTpmdW5jdGlvbihpbnB1dCl7cmV0dXJuImQnbyI9PT1pbnB1dC50b0xvd2VyQ2FzZSgpfSxtZXJpZGllbTpmdW5jdGlvbihob3VycyxtaW51dGVzLGlzTG93ZXIpe3JldHVybiAxMTxob3Vycz9pc0xvd2VyPyJkJ28iOiJEJ08iOmlzTG93ZXI/ImQnYSI6IkQnQSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbb3hoaSDDoF0gTFQiLG5leHREYXk6IltkZW3DoCDDoF0gTFQiLG5leHRXZWVrOiJkZGRkIFvDoF0gTFQiLGxhc3REYXk6IltpZWlyaSDDoF0gTFQiLGxhc3RXZWVrOiJbc8O8ciBlbF0gZGRkZCBbbGFzdGV1IMOgXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToib3NwcmVpICVzIixwYXN0OiJqYSVzIixzOnByb2Nlc3NSZWxhdGl2ZVRpbWUsc3M6cHJvY2Vzc1JlbGF0aXZlVGltZSxtOnByb2Nlc3NSZWxhdGl2ZVRpbWUsbW06cHJvY2Vzc1JlbGF0aXZlVGltZSxoOnByb2Nlc3NSZWxhdGl2ZVRpbWUsaGg6cHJvY2Vzc1JlbGF0aXZlVGltZSxkOnByb2Nlc3NSZWxhdGl2ZVRpbWUsZGQ6cHJvY2Vzc1JlbGF0aXZlVGltZSxNOnByb2Nlc3NSZWxhdGl2ZVRpbWUsTU06cHJvY2Vzc1JlbGF0aXZlVGltZSx5OnByb2Nlc3NSZWxhdGl2ZVRpbWUseXk6cHJvY2Vzc1JlbGF0aXZlVGltZX0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSx6Mm8yOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBpc09iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCIwL1I0IiksbWV0YT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJaNnZGIikub25GcmVlemU7X193ZWJwYWNrX3JlcXVpcmVfXygiWHRyOCIpKCJzZWFsIixmdW5jdGlvbigkc2VhbCl7cmV0dXJuIGZ1bmN0aW9uKGl0KXtyZXR1cm4gJHNlYWwmJmlzT2JqZWN0KGl0KT8kc2VhbChtZXRhKGl0KSk6aXR9fSl9LHozVmQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciBudW1iZXJzTm91bnM9InBhZ2hfd2HigJlfY2hh4oCZX3dlal9sb1NfdmFnaF9qYXZfU29jaF9jaG9yZ2hfSHV0Ii5zcGxpdCgiXyIpO2Z1bmN0aW9uIHRyYW5zbGF0ZShudW1iZXIsd2l0aG91dFN1ZmZpeCxzdHJpbmcsaXNGdXR1cmUpe3ZhciBudW1iZXJOb3VuPWZ1bmN0aW9uKG51bWJlcil7dmFyIGh1bmRyZWQ9TWF0aC5mbG9vcihudW1iZXIlMWUzLzEwMCksdGVuPU1hdGguZmxvb3IobnVtYmVyJTEwMC8xMCksb25lPW51bWJlciUxMCx3b3JkPSIiO3JldHVybiAwPGh1bmRyZWQmJih3b3JkKz1udW1iZXJzTm91bnNbaHVuZHJlZF0rInZhdGxoIiksMDx0ZW4mJih3b3JkKz0oIiIhPT13b3JkPyIgIjoiIikrbnVtYmVyc05vdW5zW3Rlbl0rIm1hSCIpLDA8b25lJiYod29yZCs9KCIiIT09d29yZD8iICI6IiIpK251bWJlcnNOb3Vuc1tvbmVdKSwiIj09PXdvcmQ/InBhZ2giOndvcmR9KG51bWJlcik7c3dpdGNoKHN0cmluZyl7Y2FzZSJzcyI6cmV0dXJuIG51bWJlck5vdW4rIiBsdXAiO2Nhc2UibW0iOnJldHVybiBudW1iZXJOb3VuKyIgdHVwIjtjYXNlImhoIjpyZXR1cm4gbnVtYmVyTm91bisiIHJlcCI7Y2FzZSJkZCI6cmV0dXJuIG51bWJlck5vdW4rIiBqYWoiO2Nhc2UiTU0iOnJldHVybiBudW1iZXJOb3VuKyIgamFyIjtjYXNlInl5IjpyZXR1cm4gbnVtYmVyTm91bisiIERJUyJ9fW1vbWVudC5kZWZpbmVMb2NhbGUoInRsaCIse21vbnRoczoidGVyYeKAmSBqYXIgd2HigJlfdGVyYeKAmSBqYXIgY2hh4oCZX3RlcmHigJkgamFyIHdlal90ZXJh4oCZIGphciBsb1NfdGVyYeKAmSBqYXIgdmFnaF90ZXJh4oCZIGphciBqYXZfdGVyYeKAmSBqYXIgU29jaF90ZXJh4oCZIGphciBjaG9yZ2hfdGVyYeKAmSBqYXIgSHV0X3RlcmHigJkgamFyIHdh4oCZbWFIX3RlcmHigJkgamFyIHdh4oCZbWFIIHdh4oCZX3RlcmHigJkgamFyIHdh4oCZbWFIIGNoYeKAmSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFyIHdh4oCZX2phciBjaGHigJlfamFyIHdlal9qYXIgbG9TX2phciB2YWdoX2phciBqYXZfamFyIFNvY2hfamFyIGNob3JnaF9qYXIgSHV0X2phciB3YeKAmW1hSF9qYXIgd2HigJltYUggd2HigJlfamFyIHdh4oCZbWFIIGNoYeKAmSIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJsb2ptSXRqYWpfRGFTamFqX3Bvdmphal9naEl0bGhqYWpfbG9naGphal9idXFqYWpfZ2hJbmphaiIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJsb2ptSXRqYWpfRGFTamFqX3Bvdmphal9naEl0bGhqYWpfbG9naGphal9idXFqYWpfZ2hJbmphaiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoibG9qbUl0amFqX0RhU2phal9wb3ZqYWpfZ2hJdGxoamFqX2xvZ2hqYWpfYnVxamFqX2doSW5qYWoiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbRGFIamFqXSBMVCIsbmV4dERheToiW3dh4oCZbGVTXSBMVCIsbmV4dFdlZWs6IkxMTCIsbGFzdERheToiW3dh4oCZSHXigJldIExUIixsYXN0V2VlazoiTExMIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOmZ1bmN0aW9uKG91dHB1dCl7dmFyIHRpbWU9b3V0cHV0O3JldHVybiB0aW1lPS0xIT09b3V0cHV0LmluZGV4T2YoImphaiIpP3RpbWUuc2xpY2UoMCwtMykrImxlUyI6LTEhPT1vdXRwdXQuaW5kZXhPZigiamFyIik/dGltZS5zbGljZSgwLC0zKSsid2FRIjotMSE9PW91dHB1dC5pbmRleE9mKCJESVMiKT90aW1lLnNsaWNlKDAsLTMpKyJuZW0iOnRpbWUrIiBwSXEifSxwYXN0OmZ1bmN0aW9uKG91dHB1dCl7dmFyIHRpbWU9b3V0cHV0O3JldHVybiB0aW1lPS0xIT09b3V0cHV0LmluZGV4T2YoImphaiIpP3RpbWUuc2xpY2UoMCwtMykrIkh14oCZIjotMSE9PW91dHB1dC5pbmRleE9mKCJqYXIiKT90aW1lLnNsaWNlKDAsLTMpKyJ3ZW4iOi0xIT09b3V0cHV0LmluZGV4T2YoIkRJUyIpP3RpbWUuc2xpY2UoMCwtMykrImJlbiI6dGltZSsiIHJldCJ9LHM6InB1UyBsdXAiLHNzOnRyYW5zbGF0ZSxtOiJ3YeKAmSB0dXAiLG1tOnRyYW5zbGF0ZSxoOiJ3YeKAmSByZXAiLGhoOnRyYW5zbGF0ZSxkOiJ3YeKAmSBqYWoiLGRkOnRyYW5zbGF0ZSxNOiJ3YeKAmSBqYXIiLE1NOnRyYW5zbGF0ZSx5OiJ3YeKAmSBESVMiLHl5OnRyYW5zbGF0ZX0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfSx6TGtHOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe2V4cG9ydHMuZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJVV2lYIil9LHpSd286ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIHNwZWNpZXNDb25zdHJ1Y3Rvcj1fX3dlYnBhY2tfcmVxdWlyZV9fKCI2Rk1PIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24ob3JpZ2luYWwsbGVuZ3RoKXtyZXR1cm4gbmV3KHNwZWNpZXNDb25zdHJ1Y3RvcihvcmlnaW5hbCkpKGxlbmd0aCl9fSx6WGhaOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBhbk9iamVjdD1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1SzdaIiksaXNPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiOTNJNCIpLG5ld1Byb21pc2VDYXBhYmlsaXR5PV9fd2VicGFja19yZXF1aXJlX18oIlpXNXEiKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihDLHgpe2lmKGFuT2JqZWN0KEMpLGlzT2JqZWN0KHgpJiZ4LmNvbnN0cnVjdG9yPT09QylyZXR1cm4geDt2YXIgcHJvbWlzZUNhcGFiaWxpdHk9bmV3UHJvbWlzZUNhcGFiaWxpdHkuZihDKTtyZXR1cm4oMCxwcm9taXNlQ2FwYWJpbGl0eS5yZXNvbHZlKSh4KSxwcm9taXNlQ2FwYWJpbGl0eS5wcm9taXNlfX0semF2RTpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXshZnVuY3Rpb24obW9tZW50KXsidXNlIHN0cmljdCI7bW9tZW50LmRlZmluZUxvY2FsZSgiZW4tU0ciLHttb250aHM6IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixzczoiJWQgc2Vjb25kcyIsbToiYSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJhbiBob3VyIixoaDoiJWQgaG91cnMiLGQ6ImEgZGF5IixkZDoiJWQgZGF5cyIsTToiYSBtb250aCIsTU06IiVkIG1vbnRocyIseToiYSB5ZWFyIix5eToiJWQgeWVhcnMifSxkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHN0fG5kfHJkfHRoKS8sb3JkaW5hbDpmdW5jdGlvbihudW1iZXIpe3ZhciBiPW51bWJlciUxMCxvdXRwdXQ9MT09fn4obnVtYmVyJTEwMC8xMCk/InRoIjoxPT09Yj8ic3QiOjI9PT1iPyJuZCI6Mz09PWI/InJkIjoidGgiO3JldHVybiBudW1iZXIrb3V0cHV0fSx3ZWVrOntkb3c6MSxkb3k6NH19KX0oX193ZWJwYWNrX3JlcXVpcmVfXygid2QvUiIpKX0semhBYjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt2YXIgaGFzPV9fd2VicGFja19yZXF1aXJlX18oImFhZ3giKSx0b0lPYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygiYUNGaiIpLGFycmF5SW5kZXhPZj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ3MmE1IikoITEpLElFX1BST1RPPV9fd2VicGFja19yZXF1aXJlX18oIllUdkEiKSgiSUVfUFJPVE8iKTttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihvYmplY3QsbmFtZXMpe3ZhciBrZXksTz10b0lPYmplY3Qob2JqZWN0KSxpPTAscmVzdWx0PVtdO2ZvcihrZXkgaW4gTylrZXkhPUlFX1BST1RPJiZoYXMoTyxrZXkpJiZyZXN1bHQucHVzaChrZXkpO2Zvcig7bmFtZXMubGVuZ3RoPmk7KWhhcyhPLGtleT1uYW1lc1tpKytdKSYmKH5hcnJheUluZGV4T2YocmVzdWx0LGtleSl8fHJlc3VsdC5wdXNoKGtleSkpO3JldHVybiByZXN1bHR9fSx6bjdOOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciAkZXhwb3J0PV9fd2VicGFja19yZXF1aXJlX18oIlk3WkMiKSxjb3JlPV9fd2VicGFja19yZXF1aXJlX18oIldFcGsiKSxmYWlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLVXhQIik7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oS0VZLGV4ZWMpe3ZhciBmbj0oY29yZS5PYmplY3R8fHt9KVtLRVldfHxPYmplY3RbS0VZXSxleHA9e307ZXhwW0tFWV09ZXhlYyhmbiksJGV4cG9ydCgkZXhwb3J0LlMrJGV4cG9ydC5GKmZhaWxzKGZ1bmN0aW9uKCl7Zm4oMSl9KSwiT2JqZWN0IixleHApfX0sInpxK0MiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe3ZhciBtZXRhZGF0YT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJONmNKIiksYW5PYmplY3Q9X193ZWJwYWNrX3JlcXVpcmVfXygieTN3OSIpLHRvTWV0YUtleT1tZXRhZGF0YS5rZXksZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcD1tZXRhZGF0YS5tYXAsc3RvcmU9bWV0YWRhdGEuc3RvcmU7bWV0YWRhdGEuZXhwKHtkZWxldGVNZXRhZGF0YTpmdW5jdGlvbihtZXRhZGF0YUtleSx0YXJnZXQpe3ZhciB0YXJnZXRLZXk9YXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDp0b01ldGFLZXkoYXJndW1lbnRzWzJdKSxtZXRhZGF0YU1hcD1nZXRPckNyZWF0ZU1ldGFkYXRhTWFwKGFuT2JqZWN0KHRhcmdldCksdGFyZ2V0S2V5LCExKTtpZih2b2lkIDA9PT1tZXRhZGF0YU1hcHx8IW1ldGFkYXRhTWFwLmRlbGV0ZShtZXRhZGF0YUtleSkpcmV0dXJuITE7aWYobWV0YWRhdGFNYXAuc2l6ZSlyZXR1cm4hMDt2YXIgdGFyZ2V0TWV0YWRhdGE9c3RvcmUuZ2V0KHRhcmdldCk7cmV0dXJuIHRhcmdldE1ldGFkYXRhLmRlbGV0ZSh0YXJnZXRLZXkpLCEhdGFyZ2V0TWV0YWRhdGEuc2l6ZXx8c3RvcmUuZGVsZXRlKHRhcmdldCl9fSl9LHp1UjQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciB1dGlscz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ4VEorIiksYmluZD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJIU3NhIiksQXhpb3M9X193ZWJwYWNrX3JlcXVpcmVfXygiQ2dhUyIpLGRlZmF1bHRzPV9fd2VicGFja19yZXF1aXJlX18oIkpFUXIiKTtmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKXt2YXIgY29udGV4dD1uZXcgQXhpb3MoZGVmYXVsdENvbmZpZyksaW5zdGFuY2U9YmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCxjb250ZXh0KTtyZXR1cm4gdXRpbHMuZXh0ZW5kKGluc3RhbmNlLEF4aW9zLnByb3RvdHlwZSxjb250ZXh0KSx1dGlscy5leHRlbmQoaW5zdGFuY2UsY29udGV4dCksaW5zdGFuY2V9dmFyIGF4aW9zPWNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtheGlvcy5BeGlvcz1BeGlvcyxheGlvcy5jcmVhdGU9ZnVuY3Rpb24oaW5zdGFuY2VDb25maWcpe3JldHVybiBjcmVhdGVJbnN0YW5jZSh1dGlscy5tZXJnZShkZWZhdWx0cyxpbnN0YW5jZUNvbmZpZykpfSxheGlvcy5DYW5jZWw9X193ZWJwYWNrX3JlcXVpcmVfXygiZW5kZCIpLGF4aW9zLkNhbmNlbFRva2VuPV9fd2VicGFja19yZXF1aXJlX18oImpmUysiKSxheGlvcy5pc0NhbmNlbD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMbWVtIiksYXhpb3MuYWxsPWZ1bmN0aW9uKHByb21pc2VzKXtyZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpfSxheGlvcy5zcHJlYWQ9X193ZWJwYWNrX3JlcXVpcmVfXygiRGZaQiIpLG1vZHVsZS5leHBvcnRzPWF4aW9zLG1vZHVsZS5leHBvcnRzLmRlZmF1bHQ9YXhpb3N9LHp4NlM6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7IWZ1bmN0aW9uKG1vbWVudCl7InVzZSBzdHJpY3QiO3ZhciB0cmFuc2xhdG9yPXt3b3Jkczp7c3M6WyJzZWt1bmRhIiwic2VrdW5kZSIsInNla3VuZGkiXSxtOlsiamVkYW4gbWludXQiLCJqZWRuZSBtaW51dGUiXSxtbTpbIm1pbnV0IiwibWludXRlIiwibWludXRhIl0saDpbImplZGFuIHNhdCIsImplZG5vZyBzYXRhIl0saGg6WyJzYXQiLCJzYXRhIiwic2F0aSJdLGRkOlsiZGFuIiwiZGFuYSIsImRhbmEiXSxNTTpbIm1lc2VjIiwibWVzZWNhIiwibWVzZWNpIl0seXk6WyJnb2RpbmEiLCJnb2RpbmUiLCJnb2RpbmEiXX0sY29ycmVjdEdyYW1tYXRpY2FsQ2FzZTpmdW5jdGlvbihudW1iZXIsd29yZEtleSl7cmV0dXJuIDE9PT1udW1iZXI/d29yZEtleVswXToyPD1udW1iZXImJm51bWJlcjw9ND93b3JkS2V5WzFdOndvcmRLZXlbMl19LHRyYW5zbGF0ZTpmdW5jdGlvbihudW1iZXIsd2l0aG91dFN1ZmZpeCxrZXkpe3ZhciB3b3JkS2V5PXRyYW5zbGF0b3Iud29yZHNba2V5XTtyZXR1cm4gMT09PWtleS5sZW5ndGg/d2l0aG91dFN1ZmZpeD93b3JkS2V5WzBdOndvcmRLZXlbMV06bnVtYmVyKyIgIit0cmFuc2xhdG9yLmNvcnJlY3RHcmFtbWF0aWNhbENhc2UobnVtYmVyLHdvcmRLZXkpfX07bW9tZW50LmRlZmluZUxvY2FsZSgic3IiLHttb250aHM6ImphbnVhcl9mZWJydWFyX21hcnRfYXByaWxfbWFqX2p1bl9qdWxfYXZndXN0X3NlcHRlbWJhcl9va3RvYmFyX25vdmVtYmFyX2RlY2VtYmFyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW4uX2ZlYi5fbWFyLl9hcHIuX21hal9qdW5fanVsX2F2Zy5fc2VwLl9va3QuX25vdi5fZGVjLiIuc3BsaXQoIl8iKSxtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOiJuZWRlbGphX3BvbmVkZWxqYWtfdXRvcmFrX3NyZWRhX8SNZXR2cnRha19wZXRha19zdWJvdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoibmVkLl9wb24uX3V0by5fc3JlLl/EjWV0Ll9wZXQuX3N1Yi4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Im5lX3BvX3V0X3NyX8SNZV9wZV9zdSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1BhcnNlRXhhY3Q6ITAsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltkYW5hcyB1XSBMVCIsbmV4dERheToiW3N1dHJhIHVdIExUIixuZXh0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlt1XSBbbmVkZWxqdV0gW3VdIExUIjtjYXNlIDM6cmV0dXJuIlt1XSBbc3JlZHVdIFt1XSBMVCI7Y2FzZSA2OnJldHVybiJbdV0gW3N1Ym90dV0gW3VdIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpjYXNlIDU6cmV0dXJuIlt1XSBkZGRkIFt1XSBMVCJ9fSxsYXN0RGF5OiJbanXEjWUgdV0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuWyJbcHJvxaFsZV0gW25lZGVsamVdIFt1XSBMVCIsIltwcm/FoWxvZ10gW3BvbmVkZWxqa2FdIFt1XSBMVCIsIltwcm/FoWxvZ10gW3V0b3JrYV0gW3VdIExUIiwiW3Byb8WhbGVdIFtzcmVkZV0gW3VdIExUIiwiW3Byb8WhbG9nXSBbxI1ldHZydGthXSBbdV0gTFQiLCJbcHJvxaFsb2ddIFtwZXRrYV0gW3VdIExUIiwiW3Byb8WhbGVdIFtzdWJvdGVdIFt1XSBMVCJdW3RoaXMuZGF5KCldfSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJ6YSAlcyIscGFzdDoicHJlICVzIixzOiJuZWtvbGlrbyBzZWt1bmRpIixzczp0cmFuc2xhdG9yLnRyYW5zbGF0ZSxtOnRyYW5zbGF0b3IudHJhbnNsYXRlLG1tOnRyYW5zbGF0b3IudHJhbnNsYXRlLGg6dHJhbnNsYXRvci50cmFuc2xhdGUsaGg6dHJhbnNsYXRvci50cmFuc2xhdGUsZDoiZGFuIixkZDp0cmFuc2xhdG9yLnRyYW5zbGF0ZSxNOiJtZXNlYyIsTU06dHJhbnNsYXRvci50cmFuc2xhdGUseToiZ29kaW51Iix5eTp0cmFuc2xhdG9yLnRyYW5zbGF0ZX0sZGF5T2ZNb250aE9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pfShfX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikpfX1dKTs=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="6181593" offset="0" length="16384" />
          <PacketInfo time="6181828" offset="16384" length="16384" />
          <PacketInfo time="6181890" offset="32768" length="16384" />
          <PacketInfo time="6182031" offset="49152" length="16384" />
          <PacketInfo time="6182031" offset="65536" length="16384" />
          <PacketInfo time="6182687" offset="81920" length="16384" />
          <PacketInfo time="6182734" offset="98304" length="16384" />
          <PacketInfo time="6182859" offset="114688" length="16384" />
          <PacketInfo time="6183531" offset="131072" length="16384" />
          <PacketInfo time="6183578" offset="147456" length="16384" />
          <PacketInfo time="6183593" offset="163840" length="16384" />
          <PacketInfo time="6183609" offset="180224" length="16384" />
          <PacketInfo time="6183609" offset="196608" length="16384" />
          <PacketInfo time="6183609" offset="212992" length="16384" />
          <PacketInfo time="6183625" offset="229376" length="16384" />
          <PacketInfo time="6183625" offset="245760" length="16384" />
          <PacketInfo time="6183656" offset="262144" length="16384" />
          <PacketInfo time="6183703" offset="278528" length="16384" />
          <PacketInfo time="6183750" offset="294912" length="16384" />
          <PacketInfo time="6183828" offset="311296" length="16384" />
          <PacketInfo time="6183906" offset="327680" length="16384" />
          <PacketInfo time="6184015" offset="344064" length="16384" />
          <PacketInfo time="6184078" offset="360448" length="16384" />
          <PacketInfo time="6184140" offset="376832" length="16384" />
          <PacketInfo time="6184218" offset="393216" length="16384" />
          <PacketInfo time="6184343" offset="409600" length="16384" />
          <PacketInfo time="6184390" offset="425984" length="16384" />
          <PacketInfo time="6184468" offset="442368" length="16384" />
          <PacketInfo time="6184515" offset="458752" length="16384" />
          <PacketInfo time="6184593" offset="475136" length="16384" />
          <PacketInfo time="6184640" offset="491520" length="16384" />
          <PacketInfo time="6184687" offset="507904" length="16384" />
          <PacketInfo time="6184843" offset="524288" length="16384" />
          <PacketInfo time="6184890" offset="540672" length="16384" />
          <PacketInfo time="6184937" offset="557056" length="16384" />
          <PacketInfo time="6185015" offset="573440" length="16384" />
          <PacketInfo time="6185093" offset="589824" length="16384" />
          <PacketInfo time="6185125" offset="606208" length="16384" />
          <PacketInfo time="6185156" offset="622592" length="16384" />
          <PacketInfo time="6185203" offset="638976" length="16384" />
          <PacketInfo time="6185234" offset="655360" length="16384" />
          <PacketInfo time="6185250" offset="671744" length="16384" />
          <PacketInfo time="6185281" offset="688128" length="16384" />
          <PacketInfo time="6185312" offset="704512" length="16384" />
          <PacketInfo time="6185328" offset="720896" length="16384" />
          <PacketInfo time="6185359" offset="737280" length="16384" />
          <PacketInfo time="6185375" offset="753664" length="5702" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="10743" hostname="center.t.dacube.cn" path="/static/js/app.5d115900.js" url="https://center.t.dacube.cn/static/js/app.5d115900.js" ip="139.9.5.231" port="443" connectionId="10" origin="HTML" frame="1" startDateTime="2019-04-16T14:14:17.313+08:00" startTime="6182750" endTime="6183531">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2VudGVyLnQuZGFjdWJlLmNu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81Ni4wLjI5MjQuOTAgU2FmYXJpLzUzNy4zNiAyMzQ1RXhwbG9yZXIvOS42LjAuMTg2Mjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24v</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>emgtQ04semg7cT0wLjg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdGF0aWMvanMvYXBwLjVkMTE1OTAwLmpzIEhUVFAvMS4xDQpIb3N0OiBjZW50ZXIudC5kYWN1YmUuY24NCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNTYuMC4yOTI0LjkwIFNhZmFyaS81MzcuMzYgMjM0NUV4cGxvcmVyLzkuNi4wLjE4NjI3DQpBY2NlcHQ6ICovKg0KUmVmZXJlcjogaHR0cHM6Ly9jZW50ZXIudC5kYWN1YmUuY24vDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IHpoLUNOLHpoO3E9MC44DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>46114</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Server" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbngvMS4xMi4y</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBBcHIgMjAxOSAwNjowOTozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDYxMTQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxMSBBcHIgMjAxOSAwMzoxOTozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjVjYWViMjRhLWI0MjIi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IG5naW54LzEuMTIuMg0KRGF0ZTogVHVlLCAxNiBBcHIgMjAxOSAwNjowOTozNiBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDQ2MTE0DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDExIEFwciAyMDE5IDAzOjE5OjM4IEdNVA0KRVRhZzogIjVjYWViMjRhLWI0MjIiDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>KHdpbmRvdy53ZWJwYWNrSnNvbnA9d2luZG93LndlYnBhY2tKc29ucHx8W10pLnB1c2goW1siYXBwIl0sezA6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7X193ZWJwYWNrX3JlcXVpcmVfXygiMjAxYyIpLF9fd2VicGFja19yZXF1aXJlX18oIlZ0ZGkiKSxtb2R1bGUuZXhwb3J0cz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJBeVkvIil9LCIwTUhiIjpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt9LCIxd1VvIjpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIF9ub2RlX21vZHVsZXNfbWluaV9jc3NfZXh0cmFjdF9wbHVnaW5fZGlzdF9sb2FkZXJfanNfbm9kZV9tb2R1bGVzX2Nzc19sb2FkZXJfaW5kZXhfanNfcmVmXzhfMV9ub2RlX21vZHVsZXNfdnVlX2xvYWRlcl9saWJfbG9hZGVyc19zdHlsZVBvc3RMb2FkZXJfanNfbm9kZV9tb2R1bGVzX3Bvc3Rjc3NfbG9hZGVyX2xpYl9pbmRleF9qc19yZWZfOF8yX25vZGVfbW9kdWxlc19zdHlsdXNfbG9hZGVyX2luZGV4X2pzX3JlZl84XzNfbm9kZV9tb2R1bGVzX3Z1ZV9sb2FkZXJfbGliX2luZGV4X2pzX3Z1ZV9sb2FkZXJfb3B0aW9uc19hcHBfdnVlX3Z1ZV90eXBlX3N0eWxlX2luZGV4XzBfaWRfM2U2OWFjOTBfbGFuZ19zdHlsdXNfc2NvcGVkX3RydWVfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX189X193ZWJwYWNrX3JlcXVpcmVfXygiREFyayIpO19fd2VicGFja19yZXF1aXJlX18ubihfbm9kZV9tb2R1bGVzX21pbmlfY3NzX2V4dHJhY3RfcGx1Z2luX2Rpc3RfbG9hZGVyX2pzX25vZGVfbW9kdWxlc19jc3NfbG9hZGVyX2luZGV4X2pzX3JlZl84XzFfbm9kZV9tb2R1bGVzX3Z1ZV9sb2FkZXJfbGliX2xvYWRlcnNfc3R5bGVQb3N0TG9hZGVyX2pzX25vZGVfbW9kdWxlc19wb3N0Y3NzX2xvYWRlcl9saWJfaW5kZXhfanNfcmVmXzhfMl9ub2RlX21vZHVsZXNfc3R5bHVzX2xvYWRlcl9pbmRleF9qc19yZWZfOF8zX25vZGVfbW9kdWxlc192dWVfbG9hZGVyX2xpYl9pbmRleF9qc192dWVfbG9hZGVyX29wdGlvbnNfYXBwX3Z1ZV92dWVfdHlwZV9zdHlsZV9pbmRleF8wX2lkXzNlNjlhYzkwX2xhbmdfc3R5bHVzX3Njb3BlZF90cnVlX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKS5hfSwiM0tLbyI6ZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO19fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJrIixmdW5jdGlvbigpe3JldHVybiBzZW5kTWVzZ30pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJpIixmdW5jdGlvbigpe3JldHVybiBzYXZlTWVzZ1N0YXR1c30pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJjIixmdW5jdGlvbigpe3JldHVybiBnZXRNZXNnUmVjb3JkfSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImQiLGZ1bmN0aW9uKCl7cmV0dXJuIGdldE1lc2dpbmZvUn0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJiIixmdW5jdGlvbigpe3JldHVybiBkZWxldGVNZXNnfSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImEiLGZ1bmN0aW9uKCl7cmV0dXJuIGRlbGV0ZUNvbnZlcnNhdGlvbn0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJqIixmdW5jdGlvbigpe3JldHVybiBzYXZlVW5yZWFkQ291bnR9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiZiIsZnVuY3Rpb24oKXtyZXR1cm4gZ2V0VXNlckxpc3R9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiaCIsZnVuY3Rpb24oKXtyZXR1cm4gbWVzZ1NraXB9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiZSIsZnVuY3Rpb24oKXtyZXR1cm4gZ2V0TXNnaW5mb30pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJnIixmdW5jdGlvbigpe3JldHVybiBpbnNlcnRNc2dpc3JlYWR9KTt2YXIgYmFiZWxfcnVudGltZV9oZWxwZXJzX3RvQ29uc3VtYWJsZUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX189X193ZWJwYWNrX3JlcXVpcmVfXygibTFjSCIpLGJhYmVsX3J1bnRpbWVfaGVscGVyc190b0NvbnN1bWFibGVBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGJhYmVsX3J1bnRpbWVfaGVscGVyc190b0NvbnN1bWFibGVBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKSxiYWJlbF9ydW50aW1lX2hlbHBlcnNfZXh0ZW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fPV9fd2VicGFja19yZXF1aXJlX18oIlFiTFoiKSxiYWJlbF9ydW50aW1lX2hlbHBlcnNfZXh0ZW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGJhYmVsX3J1bnRpbWVfaGVscGVyc19leHRlbmRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pLGJhYmVsX3J1bnRpbWVfaGVscGVyc19vYmplY3RXaXRob3V0UHJvcGVydGllc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fPV9fd2VicGFja19yZXF1aXJlX18oImpvNlkiKSxiYWJlbF9ydW50aW1lX2hlbHBlcnNfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihiYWJlbF9ydW50aW1lX2hlbHBlcnNfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyksX3V0aWxzX3JlcXVlc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ0M1VuIiksX3N0b3Jlc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fPV9fd2VicGFja19yZXF1aXJlX18oInBIdnciKSxfZmlsdGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fPV9fd2VicGFja19yZXF1aXJlX18oImlYVXciKTtmdW5jdGlvbiBzZW5kTWVzZyhfcmVmKXt2YXIgcHJvcHM9YmFiZWxfcnVudGltZV9oZWxwZXJzX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCgpKF9yZWYsW10pLGNvbXBpZD1fc3RvcmVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uYS5zdGF0ZS5jb21waWQ7cmV0dXJuIF91dGlsc19yZXF1ZXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uYS5wb3N0KCJVc2VyL3NlbmRNZXNnIixiYWJlbF9ydW50aW1lX2hlbHBlcnNfZXh0ZW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh7Y29tcGlkOmNvbXBpZCxzZW5kX3N0YXR1czohMX0scHJvcHMpKX1mdW5jdGlvbiBzYXZlTWVzZ1N0YXR1cyh0eXBlLG1zZ2lkLHNlbmRTdGF0dXMpe3JldHVybiBfdXRpbHNfcmVxdWVzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmEucG9zdCgiVXNlci9zYXZlTWVzZ1N0YXR1cyIse3R5cGU6dHlwZSxtc2dpZDptc2dpZCxzZW5kU3RhdHVzOnNlbmRTdGF0dXN9KX1mdW5jdGlvbiBnZXRNZXNnUmVjb3JkKCl7dmFyIGNvbXBpZD1fc3RvcmVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uYS5zdGF0ZS5jb21waWQ7aWYoY29tcGlkKXJldHVybiBfdXRpbHNfcmVxdWVzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmEuZ2V0KCJVc2VyL2dldE1lc2dSZWNvcmQvIitfc3RvcmVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uYS5zdGF0ZS51c2VyRGF0YS5lYXNlbW9ibmFtZSsiLyIrY29tcGlkKS50aGVuKGZ1bmN0aW9uKHJlcyl7aWYoMjAwPT09cmVzLmNvZGUpe3ZhciB0b3BEYXRhPU9iamVjdChfZmlsdGVyc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fLnNvcnREYXRhKShyZXMucmVzdWx0LmZpbHRlcihmdW5jdGlvbih2KXtyZXR1cm4gdi5pc3RvcH0pKSxub3RvcERhdGE9T2JqZWN0KF9maWx0ZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18uc29ydERhdGEpKHJlcy5yZXN1bHQuZmlsdGVyKGZ1bmN0aW9uKHYpe3JldHVybiF2LmlzdG9wfSkpLGRhdGE9W10uY29uY2F0KGJhYmVsX3J1bnRpbWVfaGVscGVyc190b0NvbnN1bWFibGVBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQoKSh0b3BEYXRhKSxiYWJlbF9ydW50aW1lX2hlbHBlcnNfdG9Db25zdW1hYmxlQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0KCkobm90b3BEYXRhKSk7cmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uKHYsaSl7InBlcnNvbiI9PT12LnR5cGU/ZGF0YVtpXS5ndWlkPXYudXNlcmNvZGU6Imdyb3VwIj09PXYudHlwZT9kYXRhW2ldLmd1aWQ9Imdyb3VwIit2Lmdyb3VwaWQ6ZGF0YVtpXS5ndWlkPXYubW9kbGVuYW1lK3YudHlwZSxkYXRhW2ldLnVucmVhZD1kYXRhW2ldLnVucmVhZD9kYXRhW2ldLnVucmVhZDowfSksZGF0YX19KX1mdW5jdGlvbiBnZXRNZXNnaW5mb1IoX3JlZjIpe3ZhciB0eXBlPV9yZWYyLnR5cGUsZnJvbWNvZGU9X3JlZjIuZnJvbWNvZGUsc3RhcnQ9X3JlZjIuc3RhcnQscGFnZXNpemU9X3JlZjIucGFnZXNpemUsX3JlZjIkYXBwTmFtZT1fcmVmMi5hcHBOYW1lLGFwcE5hbWU9dm9pZCAwPT09X3JlZjIkYXBwTmFtZT8ic2h1b2dlc2hhbmUiOl9yZWYyJGFwcE5hbWU7cmV0dXJuIF91dGlsc19yZXF1ZXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uYS5nZXQoIlVzZXIvZ2V0TWVzZ2luZm9SLyIrdHlwZSsiLyIrYXBwTmFtZSsiLyIrX3N0b3Jlc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmEuc3RhdGUudXNlckRhdGEuZWFzZW1vYm5hbWUrIi8iK2Zyb21jb2RlKyIvIitzdGFydCsiLyIrcGFnZXNpemUpLnRoZW4oZnVuY3Rpb24ocmVzKXtpZigyMDA9PT1yZXMuY29kZSl7dmFyIGxpc3Q9T2JqZWN0KF9maWx0ZXJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18uZGVXZWlnaHQpKHJlcy5yZXN1bHQubGlzdCxbXSwibXNnX2lkIik7cmV0dXJuIGJhYmVsX3J1bnRpbWVfaGVscGVyc19leHRlbmRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKHt9LHJlcyx7cmVzdWx0OmJhYmVsX3J1bnRpbWVfaGVscGVyc19leHRlbmRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKHt9LHJlcy5yZXN1bHQse2xpc3Q6bGlzdH0pfSl9fSl9ZnVuY3Rpb24gZGVsZXRlTWVzZyhfcmVmMyl7dmFyIHByb3BzPWJhYmVsX3J1bnRpbWVfaGVscGVyc19vYmplY3RXaXRob3V0UHJvcGVydGllc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQoKShfcmVmMyxbXSk7cmV0dXJuIF91dGlsc19yZXF1ZXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uYS5wb3N0KCJVc2VyL2RlbGV0ZU1zZyIsYmFiZWxfcnVudGltZV9oZWxwZXJzX2V4dGVuZHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkoe30scHJvcHMse2Vhc2Vtb2JuYW1lOl9zdG9yZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5hLnN0YXRlLnVzZXJEYXRhLmVhc2Vtb2JuYW1lfSkpfWZ1bmN0aW9uIGRlbGV0ZUNvbnZlcnNhdGlvbih0eXBlLGRlbGV0ZXRpbWUsdGFyZ2V0dXNlcixtb2RsZW5hbWUpe3ZhciBuYW1lPSIiO3N3aXRjaCh0eXBlKXtjYXNlImdyb3VwIjpuYW1lPSLnvqTmtojmga8iO2JyZWFrO2Nhc2UicGVyc29uIjpuYW1lPSLkuKrkurrkv6Hmga8iO2JyZWFrO2Nhc2Uic3lzdGVtIjpuYW1lPSLns7vnu5/mtojmga8ifXJldHVybiBfdXRpbHNfcmVxdWVzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmEucG9zdCgiVXNlci9kZWxldGVDb252ZXJzYXRpb24iLHt0eXBlOnR5cGUsZGVsZXRldGltZTpkZWxldGV0aW1lLHRhcmdldHVzZXI6dGFyZ2V0dXNlcixlYXNlbW9ibmFtZTpfc3RvcmVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uYS5zdGF0ZS51c2VyRGF0YS5lYXNlbW9ibmFtZSxtb2RsZW5hbWU6bmFtZXx8bW9kbGVuYW1lfSl9ZnVuY3Rpb24gc2F2ZVVucmVhZENvdW50KGxpc3RzKXt2YXIgaXRlbT1saXN0cy5zbGljZSgpO3JldHVybiBpdGVtLm1hcChmdW5jdGlvbih2KXt2YXIgbmFtZT0iIjtzd2l0Y2godi50eXBlKXtjYXNlImdyb3VwIjpuYW1lPSLnvqTmtojmga8iO2JyZWFrO2Nhc2UicGVyc29uIjpuYW1lPSLkuKrkurrkv6Hmga8iO2JyZWFrO2Nhc2Uic3lzdGVtIjpuYW1lPSLns7vnu5/mtojmga8ifXYudXNlcmVhc2Vtb2JuYW1lPV9zdG9yZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5hLnN0YXRlLnVzZXJEYXRhLmVhc2Vtb2JuYW1lLHYubW9kbGVuYW1lPW5hbWV8fHYubW9kbGVuYW1lfSksX3V0aWxzX3JlcXVlc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5hLnBvc3QoIlVzZXIvc2F2ZVVucmVhZCIsaXRlbSl9ZnVuY3Rpb24gZ2V0VXNlckxpc3QoKXt2YXIgY29tcGlkPV9zdG9yZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5hLnN0YXRlLmNvbXBpZDtyZXR1cm4gX3V0aWxzX3JlcXVlc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5hLmdldCgiVXNlci9nZXRVc2VyTGlzdC8iK19zdG9yZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5hLnN0YXRlLnVzZXJEYXRhLnVzZXJjb2RlKyIvIitjb21waWQpfWZ1bmN0aW9uIG1lc2dTa2lwKHVybCl7cmV0dXJuIF91dGlsc19yZXF1ZXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uYS5wb3N0KCJBcHBsaWNhdGlvbi91c2VyL21lc2dTa2lwLyIse3VybDp1cmx9KX1mdW5jdGlvbiBnZXRNc2dpbmZvKG1zZ2lkLHR5cGUpe3JldHVybiBfdXRpbHNfcmVxdWVzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmEucG9zdCgiVXNlci9nZXRNc2dpbmZvIix7bXNnaWQ6bXNnaWQsdHlwZTp0eXBlfSl9ZnVuY3Rpb24gaW5zZXJ0TXNnaXNyZWFkKF9yZWY0KXt2YXIgcHJvcHM9YmFiZWxfcnVudGltZV9oZWxwZXJzX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCgpKF9yZWY0LFtdKTtyZXR1cm4gX3V0aWxzX3JlcXVlc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5hLnBvc3QoIlVzZXIvaW5zZXJ0TXNnaXNyZWFkIixiYWJlbF9ydW50aW1lX2hlbHBlcnNfZXh0ZW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKSh7fSxwcm9wcykpfX0sIjVNeGEiOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe30sIjhXSnoiOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgdnVlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX189X193ZWJwYWNrX3JlcXVpcmVfXygiS3c1ciIpLHZ1ZV9yb3V0ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJqRTlaIik7dnVlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uZGVmYXVsdC51c2UodnVlX3JvdXRlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmEpO3ZhciByb3V0ZXM9W3twYXRoOiIvIixyZWRpcmVjdDoiL2hvbWUvbWVzc2FnZSJ9LHtwYXRoOiIvbG9naW4iLGNvbXBvbmVudDpmdW5jdGlvbigpe3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLTNmZmUiKS50aGVuKF9fd2VicGFja19yZXF1aXJlX18uYmluZChudWxsLCJudFlsIikpfSxyZWRpcmVjdDoiL2xvZ2luL2luZGV4IixjaGlsZHJlbjpbe3BhdGg6ImluZGV4Iixjb21wb25lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJjaHVuay1iNWU0IikudGhlbihfX3dlYnBhY2tfcmVxdWlyZV9fLmJpbmQobnVsbCwiM0QrYyIpKX19LHtwYXRoOiJyZXRyaWV2ZSIsY29tcG9uZW50OmZ1bmN0aW9uKCl7cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZSgiY2h1bmstMzZmZiIpLnRoZW4oX193ZWJwYWNrX3JlcXVpcmVfXy5iaW5kKG51bGwsIjZZV0QiKSl9fSx7cGF0aDoiY2hvb3NlIixjb21wb25lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJjaHVuay0zODRmIikudGhlbihfX3dlYnBhY2tfcmVxdWlyZV9fLmJpbmQobnVsbCwiR2xhayIpKX19XX0se3BhdGg6Ii9ob21lIixyZWRpcmVjdDoiL2hvbWUvbWVzc2FnZSIsY29tcG9uZW50OmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UuYWxsKFtfX3dlYnBhY2tfcmVxdWlyZV9fLmUoIkx2RGwiKSxfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLTkzODkiKSxfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLWNiNmUiKSxfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLWJhMmYiKSxfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLThlYmIiKV0pLnRoZW4oX193ZWJwYWNrX3JlcXVpcmVfXy5iaW5kKG51bGwsIk4va0QiKSl9LGNoaWxkcmVuOlt7cGF0aDoibWVzc2FnZSIsY29tcG9uZW50OmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UuYWxsKFtfX3dlYnBhY2tfcmVxdWlyZV9fLmUoIkx2RGwiKSxfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLTkzODkiKSxfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLWNiNmUiKSxfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLTQ3NmMiKSxfX3dlYnBhY2tfcmVxdWlyZV9fLmUoImNodW5rLTI5ZGIiKV0pLnRoZW4oX193ZWJwYWNrX3JlcXVpcmVfXy5iaW5kKG51bGwsIkhSRkYiKSl9fSx7cGF0aDoiYWRkcmVzc0xpc3QiLGNvbXBvbmVudDpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLmFsbChbX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJMdkRsIiksX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJjaHVuay05Mzg5IiksX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJjaHVuay00NzZjIiksX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJjaHVuay02Mjg1IildKS50aGVuKF9fd2VicGFja19yZXF1aXJlX18uYmluZChudWxsLCJMSjd1IikpfX0se3BhdGg6ImFwcGxpY2F0aW9uIixjb21wb25lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJjaHVuay00Y2Y2IikudGhlbihfX3dlYnBhY2tfcmVxdWlyZV9fLmJpbmQobnVsbCwiUkRCVyIpKX19XX0se3BhdGg6Ii9wcml2YWN5UG9saWN5Iixjb21wb25lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJjaHVuay0wM2Y1IikudGhlbihfX3dlYnBhY2tfcmVxdWlyZV9fLmJpbmQobnVsbCwiYmttciIpKX19LHtwYXRoOiIqIixjb21wb25lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5lKCJjaHVuay0xZDM1IikudGhlbihfX3dlYnBhY2tfcmVxdWlyZV9fLmJpbmQobnVsbCwiWStaQSIpKX19XSxyb3V0ZXI9bmV3IHZ1ZV9yb3V0ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5hKHttb2RlOiJoYXNoIixyb3V0ZXM6cm91dGVzfSk7X193ZWJwYWNrX2V4cG9ydHNfXy5hPXJvdXRlcn0sIkF5WS8iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe30sREFyazpmdW5jdGlvbihtb2R1bGUsZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKXt9LEtxNHQ6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7fSxOM3dFOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgX25vZGVfbW9kdWxlc19taW5pX2Nzc19leHRyYWN0X3BsdWdpbl9kaXN0X2xvYWRlcl9qc19ub2RlX21vZHVsZXNfY3NzX2xvYWRlcl9pbmRleF9qc19yZWZfOF8xX25vZGVfbW9kdWxlc192dWVfbG9hZGVyX2xpYl9sb2FkZXJzX3N0eWxlUG9zdExvYWRlcl9qc19ub2RlX21vZHVsZXNfcG9zdGNzc19sb2FkZXJfbGliX2luZGV4X2pzX3JlZl84XzJfbm9kZV9tb2R1bGVzX3N0eWx1c19sb2FkZXJfaW5kZXhfanNfcmVmXzhfM19ub2RlX21vZHVsZXNfdnVlX2xvYWRlcl9saWJfaW5kZXhfanNfdnVlX2xvYWRlcl9vcHRpb25zX21vZHVsZV92dWVfdnVlX3R5cGVfc3R5bGVfaW5kZXhfMF9pZF9lNTRhMzk3YV9sYW5nX3N0eWx1c19zY29wZWRfdHJ1ZV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXz1fX3dlYnBhY2tfcmVxdWlyZV9fKCI1TXhhIik7X193ZWJwYWNrX3JlcXVpcmVfXy5uKF9ub2RlX21vZHVsZXNfbWluaV9jc3NfZXh0cmFjdF9wbHVnaW5fZGlzdF9sb2FkZXJfanNfbm9kZV9tb2R1bGVzX2Nzc19sb2FkZXJfaW5kZXhfanNfcmVmXzhfMV9ub2RlX21vZHVsZXNfdnVlX2xvYWRlcl9saWJfbG9hZGVyc19zdHlsZVBvc3RMb2FkZXJfanNfbm9kZV9tb2R1bGVzX3Bvc3Rjc3NfbG9hZGVyX2xpYl9pbmRleF9qc19yZWZfOF8yX25vZGVfbW9kdWxlc19zdHlsdXNfbG9hZGVyX2luZGV4X2pzX3JlZl84XzNfbm9kZV9tb2R1bGVzX3Z1ZV9sb2FkZXJfbGliX2luZGV4X2pzX3Z1ZV9sb2FkZXJfb3B0aW9uc19tb2R1bGVfdnVlX3Z1ZV90eXBlX3N0eWxlX2luZGV4XzBfaWRfZTU0YTM5N2FfbGFuZ19zdHlsdXNfc2NvcGVkX3RydWVfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pLmF9LFJuaFo6ZnVuY3Rpb24obW9kdWxlLGV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyl7dmFyIG1hcD17Ii4vYWYiOiJLL3RjIiwiLi9hZi5qcyI6IksvdGMiLCIuL2FyIjoiam5PNCIsIi4vYXItZHoiOiJvMWJFIiwiLi9hci1kei5qcyI6Im8xYkUiLCIuL2FyLWt3IjoiUWo0SiIsIi4vYXIta3cuanMiOiJRajRKIiwiLi9hci1seSI6IkhQM2giLCIuL2FyLWx5LmpzIjoiSFAzaCIsIi4vYXItbWEiOiJDb1JKIiwiLi9hci1tYS5qcyI6IkNvUkoiLCIuL2FyLXNhIjoiZ2pDVCIsIi4vYXItc2EuanMiOiJnakNUIiwiLi9hci10biI6ImJZTTYiLCIuL2FyLXRuLmpzIjoiYllNNiIsIi4vYXIuanMiOiJqbk80IiwiLi9heiI6IlNGeFciLCIuL2F6LmpzIjoiU0Z4VyIsIi4vYmUiOiJIOEVEIiwiLi9iZS5qcyI6Ikg4RUQiLCIuL2JnIjoiaEtycyIsIi4vYmcuanMiOiJoS3JzIiwiLi9ibSI6InAvckwiLCIuL2JtLmpzIjoicC9yTCIsIi4vYm4iOiJrRU9hIiwiLi9ibi5qcyI6ImtFT2EiLCIuL2JvIjoiMG1vKyIsIi4vYm8uanMiOiIwbW8rIiwiLi9iciI6ImFJZGYiLCIuL2JyLmpzIjoiYUlkZiIsIi4vYnMiOiJKVlNKIiwiLi9icy5qcyI6IkpWU0oiLCIuL2NhIjoiMXhaNCIsIi4vY2EuanMiOiIxeFo0IiwiLi9jcyI6IlBBMnIiLCIuL2NzLmpzIjoiUEEyciIsIi4vY3YiOiJBK3hhIiwiLi9jdi5qcyI6IkEreGEiLCIuL2N5IjoibDVlcCIsIi4vY3kuanMiOiJsNWVwIiwiLi9kYSI6IkR4UXYiLCIuL2RhLmpzIjoiRHhRdiIsIi4vZGUiOiJ0R2xYIiwiLi9kZS1hdCI6InMrdWsiLCIuL2RlLWF0LmpzIjoicyt1ayIsIi4vZGUtY2giOiJ1M0dJIiwiLi9kZS1jaC5qcyI6InUzR0kiLCIuL2RlLmpzIjoidEdsWCIsIi4vZHYiOiJXWXJqIiwiLi9kdi5qcyI6IldZcmoiLCIuL2VsIjoialVlWSIsIi4vZWwuanMiOiJqVWVZIiwiLi9lbi1TRyI6InphdkUiLCIuL2VuLVNHLmpzIjoiemF2RSIsIi4vZW4tYXUiOiJEbXZpIiwiLi9lbi1hdS5qcyI6IkRtdmkiLCIuL2VuLWNhIjoiT0lZaSIsIi4vZW4tY2EuanMiOiJPSVlpIiwiLi9lbi1nYiI6Ik9hYTciLCIuL2VuLWdiLmpzIjoiT2FhNyIsIi4vZW4taWUiOiI0ZE93IiwiLi9lbi1pZS5qcyI6IjRkT3ciLCIuL2VuLWlsIjoiY3pNbyIsIi4vZW4taWwuanMiOiJjek1vIiwiLi9lbi1ueiI6ImIxRHkiLCIuL2VuLW56LmpzIjoiYjFEeSIsIi4vZW8iOiJaZHVvIiwiLi9lby5qcyI6IlpkdW8iLCIuL2VzIjoiaVl1TCIsIi4vZXMtZG8iOiJDanpUIiwiLi9lcy1kby5qcyI6IkNqelQiLCIuL2VzLXVzIjoiVmNscSIsIi4vZXMtdXMuanMiOiJWY2xxIiwiLi9lcy5qcyI6ImlZdUwiLCIuL2V0IjoiN0JqQyIsIi4vZXQuanMiOiI3QmpDIiwiLi9ldSI6IkQvSk0iLCIuL2V1LmpzIjoiRC9KTSIsIi4vZmEiOiJqZlNDIiwiLi9mYS5qcyI6ImpmU0MiLCIuL2ZpIjoiZ2VrQiIsIi4vZmkuanMiOiJnZWtCIiwiLi9mbyI6IkJ5RjQiLCIuL2ZvLmpzIjoiQnlGNCIsIi4vZnIiOiJueVljIiwiLi9mci1jYSI6IjJmam4iLCIuL2ZyLWNhLmpzIjoiMmZqbiIsIi4vZnItY2giOiJEa2t5IiwiLi9mci1jaC5qcyI6IkRra3kiLCIuL2ZyLmpzIjoibnlZYyIsIi4vZnkiOiJjUml4IiwiLi9meS5qcyI6ImNSaXgiLCIuL2dhIjoiVVNDeCIsIi4vZ2EuanMiOiJVU0N4IiwiLi9nZCI6IjlyUmkiLCIuL2dkLmpzIjoiOXJSaSIsIi4vZ2wiOiJpRURkIiwiLi9nbC5qcyI6ImlFRGQiLCIuL2dvbS1sYXRuIjoiREtyKyIsIi4vZ29tLWxhdG4uanMiOiJES3IrIiwiLi9ndSI6IjRNVjMiLCIuL2d1LmpzIjoiNE1WMyIsIi4vaGUiOiJ4NnBIIiwiLi9oZS5qcyI6Ing2cEgiLCIuL2hpIjoiM0UxciIsIi4vaGkuanMiOiIzRTFyIiwiLi9ociI6IlM2bG4iLCIuL2hyLmpzIjoiUzZsbiIsIi4vaHUiOiJXeFJsIiwiLi9odS5qcyI6Ild4UmwiLCIuL2h5LWFtIjoiMXJZeSIsIi4vaHktYW0uanMiOiIxcll5IiwiLi9pZCI6IlVEaFIiLCIuL2lkLmpzIjoiVURoUiIsIi4vaXMiOiJCVmczIiwiLi9pcy5qcyI6IkJWZzMiLCIuL2l0IjoiYnBpaCIsIi4vaXQtY2giOiJieEtYIiwiLi9pdC1jaC5qcyI6ImJ4S1giLCIuL2l0LmpzIjoiYnBpaCIsIi4vamEiOiJCNTVOIiwiLi9qYS5qcyI6IkI1NU4iLCIuL2p2IjoidFVDdiIsIi4vanYuanMiOiJ0VUN2IiwiLi9rYSI6IklCdFoiLCIuL2thLmpzIjoiSUJ0WiIsIi4va2siOiJiWG03IiwiLi9ray5qcyI6ImJYbTciLCIuL2ttIjoiNkIwWSIsIi4va20uanMiOiI2QjBZIiwiLi9rbiI6IlBwSXciLCIuL2tuLmpzIjoiUHBJdyIsIi4va28iOiJJdmkrIiwiLi9rby5qcyI6Ikl2aSsiLCIuL2t1IjoiSkNGLyIsIi4va3UuanMiOiJKQ0YvIiwiLi9reSI6ImxnbnQiLCIuL2t5LmpzIjoibGdudCIsIi4vbGIiOiJSQXdRIiwiLi9sYi5qcyI6IlJBd1EiLCIuL2xvIjoic3AzeiIsIi4vbG8uanMiOiJzcDN6IiwiLi9sdCI6Ikp2bFciLCIuL2x0LmpzIjoiSnZsVyIsIi4vbHYiOiJ1WHdJIiwiLi9sdi5qcyI6InVYd0kiLCIuL21lIjoiS1R6MCIsIi4vbWUuanMiOiJLVHowIiwiLi9taSI6ImFJc24iLCIuL21pLmpzIjoiYUlzbiIsIi4vbWsiOiJhUWtVIiwiLi9tay5qcyI6ImFRa1UiLCIuL21sIjoiQXZ2WSIsIi4vbWwuanMiOiJBdnZZIiwiLi9tbiI6ImxZdFEiLCIuL21uLmpzIjoibFl0USIsIi4vbXIiOiJPYjBaIiwiLi9tci5qcyI6Ik9iMFoiLCIuL21zIjoiNitRQiIsIi4vbXMtbXkiOiJaQU1QIiwiLi9tcy1teS5qcyI6IlpBTVAiLCIuL21zLmpzIjoiNitRQiIsIi4vbXQiOiJHMFV5IiwiLi9tdC5qcyI6IkcwVXkiLCIuL215IjoiaG9uRiIsIi4vbXkuanMiOiJob25GIiwiLi9uYiI6ImJPTXQiLCIuL25iLmpzIjoiYk9NdCIsIi4vbmUiOiJPamtUIiwiLi9uZS5qcyI6Ik9qa1QiLCIuL25sIjoiK3MwZyIsIi4vbmwtYmUiOiIyeWt2IiwiLi9ubC1iZS5qcyI6IjJ5a3YiLCIuL25sLmpzIjoiK3MwZyIsIi4vbm4iOiJ1RXllIiwiLi9ubi5qcyI6InVFeWUiLCIuL3BhLWluIjoiOC8rUiIsIi4vcGEtaW4uanMiOiI4LytSIiwiLi9wbCI6ImpWZEMiLCIuL3BsLmpzIjoialZkQyIsIi4vcHQiOiI4bUJEIiwiLi9wdC1iciI6IjB0UmsiLCIuL3B0LWJyLmpzIjoiMHRSayIsIi4vcHQuanMiOiI4bUJEIiwiLi9ybyI6Imx5eG8iLCIuL3JvLmpzIjoibHl4byIsIi4vcnUiOiJsWHpvIiwiLi9ydS5qcyI6ImxYem8iLCIuL3NkIjoiWjRRTSIsIi4vc2QuanMiOiJaNFFNIiwiLi9zZSI6Ii8vOXciLCIuL3NlLmpzIjoiLy85dyIsIi4vc2kiOiI3YVY5IiwiLi9zaS5qcyI6IjdhVjkiLCIuL3NrIjoiZSthZSIsIi4vc2suanMiOiJlK2FlIiwiLi9zbCI6ImdWVksiLCIuL3NsLmpzIjoiZ1ZWSyIsIi4vc3EiOiJ5UE1zIiwiLi9zcS5qcyI6InlQTXMiLCIuL3NyIjoieng2UyIsIi4vc3ItY3lybCI6IkUrbFYiLCIuL3NyLWN5cmwuanMiOiJFK2xWIiwiLi9zci5qcyI6Inp4NlMiLCIuL3NzIjoiVXIxRCIsIi4vc3MuanMiOiJVcjFEIiwiLi9zdiI6Ilg3MDkiLCIuL3N2LmpzIjoiWDcwOSIsIi4vc3ciOiJkTndBIiwiLi9zdy5qcyI6ImROd0EiLCIuL3RhIjoiUGVVVyIsIi4vdGEuanMiOiJQZVVXIiwiLi90ZSI6IlhMdk4iLCIuL3RlLmpzIjoiWEx2TiIsIi4vdGV0IjoiVjJ4OSIsIi4vdGV0LmpzIjoiVjJ4OSIsIi4vdGciOiJPeHY2IiwiLi90Zy5qcyI6Ik94djYiLCIuL3RoIjoiRU9nVyIsIi4vdGguanMiOiJFT2dXIiwiLi90bC1waCI6IkR6aTAiLCIuL3RsLXBoLmpzIjoiRHppMCIsIi4vdGxoIjoiejNWZCIsIi4vdGxoLmpzIjoiejNWZCIsIi4vdHIiOiJEb0hyIiwiLi90ci5qcyI6IkRvSHIiLCIuL3R6bCI6InoxRkMiLCIuL3R6bC5qcyI6InoxRkMiLCIuL3R6bSI6IndRazkiLCIuL3R6bS1sYXRuIjoidFQzSiIsIi4vdHptLWxhdG4uanMiOiJ0VDNKIiwiLi90em0uanMiOiJ3UWs5IiwiLi91Zy1jbiI6IllSZXgiLCIuL3VnLWNuLmpzIjoiWVJleCIsIi4vdWsiOiJyYUxyIiwiLi91ay5qcyI6InJhTHIiLCIuL3VyIjoiVXBRVyIsIi4vdXIuanMiOiJVcFFXIiwiLi91eiI6IkxveG8iLCIuL3V6LWxhdG4iOiJBUTY4IiwiLi91ei1sYXRuLmpzIjoiQVE2OCIsIi4vdXouanMiOiJMb3hvIiwiLi92aSI6IktTRjgiLCIuL3ZpLmpzIjoiS1NGOCIsIi4veC1wc2V1ZG8iOiIvWDV2IiwiLi94LXBzZXVkby5qcyI6Ii9YNXYiLCIuL3lvIjoiZnpQZyIsIi4veW8uanMiOiJmelBnIiwiLi96aC1jbiI6IlhEcGciLCIuL3poLWNuLmpzIjoiWERwZyIsIi4vemgtaGsiOiJTYXRPIiwiLi96aC1oay5qcyI6IlNhdE8iLCIuL3poLXR3Ijoia09wTiIsIi4vemgtdHcuanMiOiJrT3BOIn07ZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKXt2YXIgaWQ9d2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpfWZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpe3ZhciBpZD1tYXBbcmVxXTtpZihpZCsxKXJldHVybiBpZDt2YXIgZT1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIityZXErIiciKTt0aHJvdyBlLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGV9d2VicGFja0NvbnRleHQua2V5cz1mdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhtYXApfSx3ZWJwYWNrQ29udGV4dC5yZXNvbHZlPXdlYnBhY2tDb250ZXh0UmVzb2x2ZSwobW9kdWxlLmV4cG9ydHM9d2VicGFja0NvbnRleHQpLmlkPSJSbmhaIn0sVnRkaTpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7X193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO3ZhciBrZXlzPV9fd2VicGFja19yZXF1aXJlX18oIkdRZUUiKSxrZXlzX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGtleXMpLHZ1ZV9ydW50aW1lX2VzbT1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLdzVyIiksdnVleF9yb3V0ZXJfc3luYz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJNYjNRIiksdmlld3NfUXJEb3dudnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfPXtkYXRhOmZ1bmN0aW9uKCl7cmV0dXJue3FyRGF0YTpbe2ltZzoic3pybV9pb3MiLG5hbWU6IuaVsOaZuuiejeWqku+8iGlPU++8iSIsbGluazoiaHR0cHM6Ly9pdHVuZXMuYXBwbGUuY29tL2NuL2FwcC8lRTYlOTUlQjAlRTYlOTklQkElRTglOUUlOEQlRTUlQUElOTIvaWQxNDM2NDUzODEwP210PTgifSx7aW1nOiJzenJtIixuYW1lOiLmlbDmmbrono3lqpLvvIhBbmRyb2lk77yJIixsaW5rOiJodHRwczovL3BjY2NlbnRlci5vc3MtY24tcWluZ2Rhby5hbGl5dW5jcy5jb20vZ3lrai1jb28tYWRtaW4vY2VudGVyLWFuZHJvaWQvY2VudGVyLWFuZHJvaWQuYXBrIn0se2ltZzoic3p4bXQiLG5hbWU6IuaVsOaZuuaWsOWqkuS9k++8iOiwt+atjOaPkuS7tu+8iSIsbGluazoiaHR0cHM6Ly9wY2NjZW50ZXIub3NzLWNuLXFpbmdkYW8uYWxpeXVuY3MuY29tL2d5a2otY29vLWFkbWluL2Nocm9tZS1leHRlbnNpb24vY2hyb21lLWV4dGVuc2lvbi56aXAifV19fX0sY29tcG9uZW50Tm9ybWFsaXplcj0oX193ZWJwYWNrX3JlcXVpcmVfXygiY1duSiIpLF9fd2VicGFja19yZXF1aXJlX18oIktIZCsiKSksY29tcG9uZW50PU9iamVjdChjb21wb25lbnROb3JtYWxpemVyLmEpKHZpZXdzX1FyRG93bnZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzXyxmdW5jdGlvbigpe3ZhciBfdm09dGhpcyxfaD1fdm0uJGNyZWF0ZUVsZW1lbnQsX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoImRpdiIse3N0YXRpY0NsYXNzOiJxcmRvd24ifSxfdm0uX2woX3ZtLnFyRGF0YSxmdW5jdGlvbihkYXRhKXtyZXR1cm4gX2MoImRpdiIse2tleTpkYXRhLmltZyxzdGF0aWNDbGFzczoicXIifSxbX2MoImVsLXBvcG92ZXIiLHthdHRyczp7cGxhY2VtZW50OiJ0b3AiLHdpZHRoOiIxNDAiLHRyaWdnZXI6ImhvdmVyIn19LFtfYygiaW1nIix7c3RhdGljQ2xhc3M6InBvcC1pbWciLGF0dHJzOntzcmM6Ii4uL3N0YXRpYy9pbWFnZXMvIitkYXRhLmltZysiLnBuZyIsYWx0OmRhdGEubmFtZX19KSxfdm0uX3YoIiAiKSxfYygiZGl2Iix7c3RhdGljQ2xhc3M6InFyY29kZSIsYXR0cnM6e3Nsb3Q6InJlZmVyZW5jZSJ9LHNsb3Q6InJlZmVyZW5jZSJ9LFtfYygiaW1nIix7YXR0cnM6e3NyYzoiLi4vc3RhdGljL2ltYWdlcy8iK2RhdGEuaW1nKyIucG5nIixhbHQ6ZGF0YS5uYW1lfX0pXSldKSxfdm0uX3YoIiAiKSxfYygiYSIse2F0dHJzOntocmVmOmRhdGEubGlua319LFtfYygiZGl2IixbX3ZtLl92KF92bS5fcyhkYXRhLm5hbWUuc3BsaXQoIu+8iCIpWzBdKSldKSxfdm0uX3YoIiAiKSxfYygiZGl2IixbX3ZtLl92KCLvvIgiK192bS5fcyhkYXRhLm5hbWUuc3BsaXQoIu+8iCIpWzFdKSldKV0pXSwxKX0pKX0sW10sITEsbnVsbCwiZDYxMjkxN2MiLG51bGwpO2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0iUXJEb3duLnZ1ZSI7dmFyIHNyY19hcHB2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc189e25hbWU6ImFwcCIsY29tcG9uZW50czp7UXJEb3duOmNvbXBvbmVudC5leHBvcnRzfX0sYXBwX2NvbXBvbmVudD0oX193ZWJwYWNrX3JlcXVpcmVfXygiMXdVbyIpLE9iamVjdChjb21wb25lbnROb3JtYWxpemVyLmEpKHNyY19hcHB2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc18sZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHthdHRyczp7aWQ6ImFwcCJ9fSxbX2MoInJvdXRlci12aWV3IiksX3ZtLl92KCIgIiksX3ZtLiRyb3V0ZS5wYXRoLmluY2x1ZGVzKCJsb2dpbiIpP19jKCJkaXYiLHtzdGF0aWNDbGFzczoiYXBwLWxvZ2luLWNvbnRlbnQifSxbX2MoImgzIix7c3RhdGljQ2xhc3M6InRpdGxlIn0sW192bS5fdigi5pWw5pm66J6N5aqS4oCU4oCU6J6N5aqS5L2T5Lit5b+D5pm66IO96J6N5ZCI6YeH57yW5bmz5Y+wIildKSxfdm0uX3YoIiAiKSxfdm0uX20oMCksX3ZtLl92KCIgIiksX2MoInFyLWRvd24iKV0sMSk6X3ZtLl9lKCksX3ZtLl92KCIgIiksX2MoImRpdiIse2NsYXNzOlsiQ29weXJpZ2h0Iix7YmxhY2s6ITA9PT1fdm0uJHN0b3JlLnN0YXRlLnVzZXJEYXRhLnBvcnRhbH1dfSxbX3ZtLl92KCJDb3B5cmlnaHQgwqkgMjAxOSDogJXkupHnp5HmioAg54mI5p2D5omA5pyJIildKV0sMSl9LFtmdW5jdGlvbigpe3ZhciBfaD10aGlzLiRjcmVhdGVFbGVtZW50LF9jPXRoaXMuX3NlbGYuX2N8fF9oO3JldHVybiBfYygidWwiLHtzdGF0aWNDbGFzczoibGlzdCJ9LFtfYygibGkiLFt0aGlzLl92KCLlpKfmlbDmja4mQUnmmbrog73vvIzlvIDlkK/lhajlqpLkvZPml7bku6PigJzono3lkIgr4oCdIildKSx0aGlzLl92KCIgIiksX2MoImxpIixbdGhpcy5fdigi5rex5oyW5pWw5o2u5Lu35YC877yM5omT6YCg5byA5pS+5YWx5Lqr5paw55Sf5oCBIildKV0pfV0sITEsbnVsbCwiM2U2OWFjOTAiLG51bGwpKTthcHBfY29tcG9uZW50Lm9wdGlvbnMuX19maWxlPSJhcHAudnVlIjt2YXIgYXBwPWFwcF9jb21wb25lbnQuZXhwb3J0cyxyb3V0ZXJzPV9fd2VicGFja19yZXF1aXJlX18oIjhXSnoiKSxzdG9yZXM9X193ZWJwYWNrX3JlcXVpcmVfXygicEh2dyIpLGNvbXBvbmVudHNfbW9kdWxldnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfPXtwcm9wczp7dGl0bGU6U3RyaW5nLGNlbnRlclRpdGxlOlN0cmluZyxpY29uOlN0cmluZyxpY29uVzp7dHlwZTpOdW1iZXIsZGVmYXVsdDoyMn19fSxtb2R1bGVfY29tcG9uZW50PShfX3dlYnBhY2tfcmVxdWlyZV9fKCJOM3dFIiksT2JqZWN0KGNvbXBvbmVudE5vcm1hbGl6ZXIuYSkoY29tcG9uZW50c19tb2R1bGV2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc18sZnVuY3Rpb24oKXt2YXIgX3ZtPXRoaXMsX2g9X3ZtLiRjcmVhdGVFbGVtZW50LF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCJkaXYiLHtzdGF0aWNDbGFzczoibW9kdWxlIn0sW192bS50aXRsZT9fYygiZGl2Iix7c3RhdGljQ2xhc3M6InRpdGxlIn0sW19jKCJpIix7Y2xhc3M6WyJpY29uZm9udCIsX3ZtLmljb25dLHN0eWxlOntmb250U2l6ZTpfdm0uaWNvblcrInB4In19KSxfdm0uX3YoIiAiKSxfYygic3BhbiIsW192bS5fdihfdm0uX3MoX3ZtLnRpdGxlKSldKV0pOl92bS5fZSgpLF92bS5fdigiICIpLF92bS5jZW50ZXJUaXRsZT9fYygiZGl2Iix7c3RhdGljQ2xhc3M6ImNlbnRlclRpdGxlIn0sW192bS5fdihfdm0uX3MoX3ZtLmNlbnRlclRpdGxlKSldKTpfdm0uX2UoKSxfdm0uX3YoIiAiKSxfdm0uX3QoImRlZmF1bHQiKV0sMil9LFtdLCExLG51bGwsImU1NGEzOTdhIixudWxsKSk7bW9kdWxlX2NvbXBvbmVudC5vcHRpb25zLl9fZmlsZT0ibW9kdWxlLnZ1ZSI7dmFyIGNvbXBvbmVudHNfbW9kdWxlPW1vZHVsZV9jb21wb25lbnQuZXhwb3J0cyxkaXZpZGVyX2NvbXBvbmVudD0oX193ZWJwYWNrX3JlcXVpcmVfXygiZk9paSIpLE9iamVjdChjb21wb25lbnROb3JtYWxpemVyLmEpKHt9LGZ1bmN0aW9uKCl7dmFyIF9oPXRoaXMuJGNyZWF0ZUVsZW1lbnQ7cmV0dXJuKHRoaXMuX3NlbGYuX2N8fF9oKSgiZGl2Iix7c3RhdGljQ2xhc3M6ImRpdmlkZXIifSl9LFtdLCExLG51bGwsIjcyNzBmOTZkIixudWxsKSk7ZGl2aWRlcl9jb21wb25lbnQub3B0aW9ucy5fX2ZpbGU9ImRpdmlkZXIudnVlIjt2YXIgZGl2aWRlcj1kaXZpZGVyX2NvbXBvbmVudC5leHBvcnRzLGZpbHRlcnM9X193ZWJwYWNrX3JlcXVpcmVfXygiaVhVdyIpO2Z1bmN0aW9uIGdldExvY2FsKGtleSl7cmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSl8fCIifXJvdXRlcnMuYS5iZWZvcmVFYWNoKGZ1bmN0aW9uKHRvLGZyb20sbmV4dCl7dmFyIGhyZWY9d2luZG93LmxvY2F0aW9uLmhyZWY7IWhyZWYuc3RhcnRzV2l0aCgiaHR0cDovLyIpfHxocmVmLmluY2x1ZGVzKCJsb2NhbGhvc3Q6Iil8fGhyZWYuaW5jbHVkZXMoIjo5NTI4Iil8fHdpbmRvdy5vcGVuKGhyZWYucmVwbGFjZSgvaHR0cDovLCJodHRwczoiKSwiX3NlbGYiKTt2YXIga2V5LHZhbHVlLHRva2VuPU9iamVjdChmaWx0ZXJzLmdldFBhcmFtcykoInRva2VuIil8fGdldExvY2FsKCJtZXNnX3Rva2VuIil8fCIiO2tleT0ibWVzZ190b2tlbiIsdmFsdWU9dG9rZW4sbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LHZhbHVlKSxPYmplY3QoZmlsdGVycy5nZXRQYXJhbXMpKCJ0b2tlbiIpfHxnZXRMb2NhbCgibWVzZ190b2tlbiIpJiZnZXRMb2NhbCgidXNlcl9kYXRhIil8fHRvLmZ1bGxQYXRoLmluY2x1ZGVzKCIvbG9naW4iKT9uZXh0KCk6bmV4dCh7cGF0aDoiL2xvZ2luIn0pfSk7dmFyIGVsZW1lbnRfdWlfY29tbW9uPV9fd2VicGFja19yZXF1aXJlX18oIlhKWVQiKTtfX3dlYnBhY2tfcmVxdWlyZV9fKCIwTUhiIik7X193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImltQ29ubiIsZnVuY3Rpb24oKXtyZXR1cm4gaW1Db25ufSksdnVlX3J1bnRpbWVfZXNtLmRlZmF1bHQudXNlKGVsZW1lbnRfdWlfY29tbW9uLlBvcG92ZXIpLHZ1ZV9ydW50aW1lX2VzbS5kZWZhdWx0LnVzZShlbGVtZW50X3VpX2NvbW1vbi5QYWdpbmF0aW9uKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uTG9hZGluZyksdnVlX3J1bnRpbWVfZXNtLmRlZmF1bHQudXNlKGVsZW1lbnRfdWlfY29tbW9uLlNjcm9sbGJhciksdnVlX3J1bnRpbWVfZXNtLmRlZmF1bHQudXNlKGVsZW1lbnRfdWlfY29tbW9uLklucHV0KSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uQnV0dG9uKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uQ2hlY2tib3gpLHZ1ZV9ydW50aW1lX2VzbS5kZWZhdWx0LnVzZShlbGVtZW50X3VpX2NvbW1vbi5DaGVja2JveEdyb3VwKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uVG9vbHRpcCksdnVlX3J1bnRpbWVfZXNtLmRlZmF1bHQudXNlKGVsZW1lbnRfdWlfY29tbW9uLkNhcm91c2VsKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uQ2Fyb3VzZWxJdGVtKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uRGlhbG9nKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uU3dpdGNoKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uVGFnKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uU2xpZGVyKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC51c2UoZWxlbWVudF91aV9jb21tb24uQmFkZ2UpLHZ1ZV9ydW50aW1lX2VzbS5kZWZhdWx0LmNvbXBvbmVudCgiTW9kdWxlIixjb21wb25lbnRzX21vZHVsZSksdnVlX3J1bnRpbWVfZXNtLmRlZmF1bHQuY29tcG9uZW50KCJEaXZpZGVyIixkaXZpZGVyKSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC5wcm90b3R5cGUuJFdlYklNPXdpbmRvdy5XZWJJTSx2dWVfcnVudGltZV9lc20uZGVmYXVsdC5wcm90b3R5cGUuJG5vdGlmeT1lbGVtZW50X3VpX2NvbW1vbi5Ob3RpZmljYXRpb24sdnVlX3J1bnRpbWVfZXNtLmRlZmF1bHQucHJvdG90eXBlLiRtc2dib3g9ZWxlbWVudF91aV9jb21tb24uTWVzc2FnZUJveDt2YXIgaW1Db25uPW5ldyBXZWJJTS5jb25uZWN0aW9uKHtpc011bHRpTG9naW5TZXNzaW9uczpXZWJJTS5jb25maWcuaXNNdWx0aUxvZ2luU2Vzc2lvbnMsaHR0cHM6ImJvb2xlYW4iPT10eXBlb2YgV2ViSU0uY29uZmlnLmh0dHBzP1dlYklNLmNvbmZpZy5odHRwczoiaHR0cHM6Ij09PWxvY2F0aW9uLnByb3RvY29sLHVybDpXZWJJTS5jb25maWcueG1wcFVSTCxpc0F1dG9Mb2dpbjohMCxoZWFydEJlYXRXYWl0OldlYklNLmNvbmZpZy5oZWFydEJlYXRXYWl0LGF1dG9SZWNvbm5lY3ROdW1NYXg6V2ViSU0uY29uZmlnLmF1dG9SZWNvbm5lY3ROdW1NYXgsYXV0b1JlY29ubmVjdEludGVydmFsOldlYklNLmNvbmZpZy5hdXRvUmVjb25uZWN0SW50ZXJ2YWwsYXBpVXJsOldlYklNLmNvbmZpZy5hcGlVUkx9KSxydGNDYWxsPW5ldyBXZWJJTS5XZWJSVEMuQ2FsbCh7Y29ubmVjdGlvbjppbUNvbm4sbWVkaWFTdHJlYW1Db25zdGFpbnRzOnthdWRpbzohMCx2aWRlbzohMH19KTt2dWVfcnVudGltZV9lc20uZGVmYXVsdC5wcm90b3R5cGUuJGltQ29ubj1pbUNvbm4sdnVlX3J1bnRpbWVfZXNtLmRlZmF1bHQucHJvdG90eXBlLiRydGNDYWxsPXJ0Y0NhbGwsa2V5c19kZWZhdWx0KCkoZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbihrKXtyZXR1cm4gdnVlX3J1bnRpbWVfZXNtLmRlZmF1bHQuZmlsdGVyKGssZmlsdGVyc1trXSl9KSxPYmplY3QodnVleF9yb3V0ZXJfc3luYy5zeW5jKShzdG9yZXMuYSxyb3V0ZXJzLmEpLHZ1ZV9ydW50aW1lX2VzbS5kZWZhdWx0LmRpcmVjdGl2ZSgiZHJhZyIsZnVuY3Rpb24oZWwsYmluZGluZyl7ZWwub25tb3VzZWRvd249ZnVuY3Rpb24oZSl7dmFyIGRpdng9ZS5jbGllbnRYLWVsLm9mZnNldExlZnQsZGl2eT1lLmNsaWVudFktZWwub2Zmc2V0VG9wLGRvY1c9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLGRvY0g9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtkb2N1bWVudC5vbm1vdXNlbW92ZT1mdW5jdGlvbihlKXt2YXIgbD1lLmNsaWVudFgtZGl2eCx0PWUuY2xpZW50WS1kaXZ5O2w8MCYmKGw9MCksbD5kb2NXLWVsLmNsaWVudFdpZHRoJiYobD1kb2NXLWVsLmNsaWVudFdpZHRoKSx0PDAmJih0PTApLHQ+ZG9jSC1lbC5jbGllbnRIZWlnaHQmJih0PWRvY0gtZWwuY2xpZW50SGVpZ2h0KSxlbC5zdHlsZS5sZWZ0PWwrInB4IixlbC5zdHlsZS50b3A9dCsicHgifSxkb2N1bWVudC5vbm1vdXNldXA9ZnVuY3Rpb24oZSl7ZG9jdW1lbnQub25tb3VzZW1vdmU9bnVsbCxkb2N1bWVudC5vbm1vdXNldXA9bnVsbH19fSksbmV3IHZ1ZV9ydW50aW1lX2VzbS5kZWZhdWx0KHtlbDoiI2FwcCIscm91dGVyOnJvdXRlcnMuYSxzdG9yZTpzdG9yZXMuYSxyZW5kZXI6ZnVuY3Rpb24oaCl7cmV0dXJuIGgoYXBwKX0sZGF0YTp7ZXZlbnRIdWI6bmV3IHZ1ZV9ydW50aW1lX2VzbS5kZWZhdWx0fX0pfSxjV25KOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgX25vZGVfbW9kdWxlc19taW5pX2Nzc19leHRyYWN0X3BsdWdpbl9kaXN0X2xvYWRlcl9qc19ub2RlX21vZHVsZXNfY3NzX2xvYWRlcl9pbmRleF9qc19yZWZfOF8xX25vZGVfbW9kdWxlc192dWVfbG9hZGVyX2xpYl9sb2FkZXJzX3N0eWxlUG9zdExvYWRlcl9qc19ub2RlX21vZHVsZXNfcG9zdGNzc19sb2FkZXJfbGliX2luZGV4X2pzX3JlZl84XzJfbm9kZV9tb2R1bGVzX3N0eWx1c19sb2FkZXJfaW5kZXhfanNfcmVmXzhfM19ub2RlX21vZHVsZXNfdnVlX2xvYWRlcl9saWJfaW5kZXhfanNfdnVlX2xvYWRlcl9vcHRpb25zX1FyRG93bl92dWVfdnVlX3R5cGVfc3R5bGVfaW5kZXhfMF9pZF9kNjEyOTE3Y19sYW5nX3N0eWx1c19zY29wZWRfdHJ1ZV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJLcTR0Iik7X193ZWJwYWNrX3JlcXVpcmVfXy5uKF9ub2RlX21vZHVsZXNfbWluaV9jc3NfZXh0cmFjdF9wbHVnaW5fZGlzdF9sb2FkZXJfanNfbm9kZV9tb2R1bGVzX2Nzc19sb2FkZXJfaW5kZXhfanNfcmVmXzhfMV9ub2RlX21vZHVsZXNfdnVlX2xvYWRlcl9saWJfbG9hZGVyc19zdHlsZVBvc3RMb2FkZXJfanNfbm9kZV9tb2R1bGVzX3Bvc3Rjc3NfbG9hZGVyX2xpYl9pbmRleF9qc19yZWZfOF8yX25vZGVfbW9kdWxlc19zdHlsdXNfbG9hZGVyX2luZGV4X2pzX3JlZl84XzNfbm9kZV9tb2R1bGVzX3Z1ZV9sb2FkZXJfbGliX2luZGV4X2pzX3Z1ZV9sb2FkZXJfb3B0aW9uc19RckRvd25fdnVlX3Z1ZV90eXBlX3N0eWxlX2luZGV4XzBfaWRfZDYxMjkxN2NfbGFuZ19zdHlsdXNfc2NvcGVkX3RydWVfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pLmF9LGZPaWk6ZnVuY3Rpb24obW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7InVzZSBzdHJpY3QiO3ZhciBfbm9kZV9tb2R1bGVzX21pbmlfY3NzX2V4dHJhY3RfcGx1Z2luX2Rpc3RfbG9hZGVyX2pzX25vZGVfbW9kdWxlc19jc3NfbG9hZGVyX2luZGV4X2pzX3JlZl84XzFfbm9kZV9tb2R1bGVzX3Z1ZV9sb2FkZXJfbGliX2xvYWRlcnNfc3R5bGVQb3N0TG9hZGVyX2pzX25vZGVfbW9kdWxlc19wb3N0Y3NzX2xvYWRlcl9saWJfaW5kZXhfanNfcmVmXzhfMl9ub2RlX21vZHVsZXNfc3R5bHVzX2xvYWRlcl9pbmRleF9qc19yZWZfOF8zX25vZGVfbW9kdWxlc192dWVfbG9hZGVyX2xpYl9pbmRleF9qc192dWVfbG9hZGVyX29wdGlvbnNfZGl2aWRlcl92dWVfdnVlX3R5cGVfc3R5bGVfaW5kZXhfMF9pZF83MjcwZjk2ZF9sYW5nX3N0eWx1c19zY29wZWRfdHJ1ZV9fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJqa3MvIik7X193ZWJwYWNrX3JlcXVpcmVfXy5uKF9ub2RlX21vZHVsZXNfbWluaV9jc3NfZXh0cmFjdF9wbHVnaW5fZGlzdF9sb2FkZXJfanNfbm9kZV9tb2R1bGVzX2Nzc19sb2FkZXJfaW5kZXhfanNfcmVmXzhfMV9ub2RlX21vZHVsZXNfdnVlX2xvYWRlcl9saWJfbG9hZGVyc19zdHlsZVBvc3RMb2FkZXJfanNfbm9kZV9tb2R1bGVzX3Bvc3Rjc3NfbG9hZGVyX2xpYl9pbmRleF9qc19yZWZfOF8yX25vZGVfbW9kdWxlc19zdHlsdXNfbG9hZGVyX2luZGV4X2pzX3JlZl84XzNfbm9kZV9tb2R1bGVzX3Z1ZV9sb2FkZXJfbGliX2luZGV4X2pzX3Z1ZV9sb2FkZXJfb3B0aW9uc19kaXZpZGVyX3Z1ZV92dWVfdHlwZV9zdHlsZV9pbmRleF8wX2lkXzcyNzBmOTZkX2xhbmdfc3R5bHVzX3Njb3BlZF90cnVlX19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKS5hfSxpWFV3OmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0IjtfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sInZhbGlkYXRlIixmdW5jdGlvbigpe3JldHVybiB2YWxpZGF0ZX0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJ2YWxpZGF0ZUVtYWlsIixmdW5jdGlvbigpe3JldHVybiB2YWxpZGF0ZUVtYWlsfSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImdldFBhcmFtcyIsZnVuY3Rpb24oKXtyZXR1cm4gZ2V0UGFyYW1zfSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sInJ0Y01lc3NhZ2UiLGZ1bmN0aW9uKCl7cmV0dXJuIHJ0Y01lc3NhZ2V9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywidGltZXN0YW1wVG9Nb250aCIsZnVuY3Rpb24oKXtyZXR1cm4gdGltZXN0YW1wVG9Nb250aH0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJ0aW1lc3RhbXBUb0RheSIsZnVuY3Rpb24oKXtyZXR1cm4gdGltZXN0YW1wVG9EYXl9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywidGltZXN0YW1wVG9NZXNzYWdlIixmdW5jdGlvbigpe3JldHVybiB0aW1lc3RhbXBUb01lc3NhZ2V9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiR1VJRCIsZnVuY3Rpb24oKXtyZXR1cm4gR1VJRH0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJkZVdlaWdodCIsZnVuY3Rpb24oKXtyZXR1cm4gZGVXZWlnaHR9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiY29tcGFyZSIsZnVuY3Rpb24oKXtyZXR1cm4gY29tcGFyZX0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJzb3J0RGF0YSIsZnVuY3Rpb24oKXtyZXR1cm4gc29ydERhdGF9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywidG9UZXh0YXJlYSIsZnVuY3Rpb24oKXtyZXR1cm4gdG9UZXh0YXJlYX0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJ0b1JldmVyc2FsVGV4dGFyZWEiLGZ1bmN0aW9uKCl7cmV0dXJuIHRvUmV2ZXJzYWxUZXh0YXJlYX0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJ0cmltIixmdW5jdGlvbigpe3JldHVybiB0cmltfSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImlzRmlsZXNpemUiLGZ1bmN0aW9uKCl7cmV0dXJuIGlzRmlsZXNpemV9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiaW1nc1R5cGUiLGZ1bmN0aW9uKCl7cmV0dXJuIGltZ3NUeXBlfSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sInppcHNUeXBlIixmdW5jdGlvbigpe3JldHVybiB6aXBzVHlwZX0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJkb2NzVHlwZSIsZnVuY3Rpb24oKXtyZXR1cm4gZG9jc1R5cGV9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywicGRmc1R5cGUiLGZ1bmN0aW9uKCl7cmV0dXJuIHBkZnNUeXBlfSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sInBwdHNUeXBlIixmdW5jdGlvbigpe3JldHVybiBwcHRzVHlwZX0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJleGNlbHNUeXBlIixmdW5jdGlvbigpe3JldHVybiBleGNlbHNUeXBlfSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImN1cnJlbnRGaWxlSWNvbiIsZnVuY3Rpb24oKXtyZXR1cm4gY3VycmVudEZpbGVJY29ufSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIm1lc3NhZ2UiLGZ1bmN0aW9uKCl7cmV0dXJuIG1lc3NhZ2V9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywic2V0VXJsVG9rZW4iLGZ1bmN0aW9uKCl7cmV0dXJuIHNldFVybFRva2VufSksX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImN1cnJlbnRHcm91cE5hbWUiLGZ1bmN0aW9uKCl7cmV0dXJuIGN1cnJlbnRHcm91cE5hbWV9KTt2YXIgYmFiZWxfcnVudGltZV9oZWxwZXJzX3RvQ29uc3VtYWJsZUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX189X193ZWJwYWNrX3JlcXVpcmVfXygibTFjSCIpLGJhYmVsX3J1bnRpbWVfaGVscGVyc190b0NvbnN1bWFibGVBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGJhYmVsX3J1bnRpbWVfaGVscGVyc190b0NvbnN1bWFibGVBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKSxiYWJlbF9ydW50aW1lX2hlbHBlcnNfZXh0ZW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fPV9fd2VicGFja19yZXF1aXJlX18oIlFiTFoiKSxiYWJlbF9ydW50aW1lX2hlbHBlcnNfZXh0ZW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGJhYmVsX3J1bnRpbWVfaGVscGVyc19leHRlbmRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pLG1vbWVudD1fX3dlYnBhY2tfcmVxdWlyZV9fKCJ3ZC9SIikscmVQaG9uZT0vXlsxXVszLDQsNSw2LDcsOCw5XVswLTldezl9JC8scmVFbWFpbD0vXltBLVphLXpcZF0rKFstXy5dW0EtWmEtelxkXSspKkAoW0EtWmEtelxkXStbLS5dKStbQS1aYS16XGRdezIsNH0kLyx2YWxpZGF0ZT1mdW5jdGlvbihzdHIpe3JldHVybiByZVBob25lLnRlc3Qoc3RyKX0sdmFsaWRhdGVFbWFpbD1mdW5jdGlvbihzdHIpe3JldHVybiByZUVtYWlsLnRlc3Qoc3RyKX0sZ2V0UGFyYW1zPWZ1bmN0aW9uKGtleSl7dmFyIHBhcmFtcz13aW5kb3cubG9jYXRpb24uaGFzaC5zcGxpdCgiPyIpWzFdfHx3aW5kb3cubG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpO2lmKCFwYXJhbXMpcmV0dXJuIG51bGw7dmFyIHJlZz1uZXcgUmVnRXhwKCIoXnwmKSIra2V5KyI9KFteJl0qKSgmfCQpIiwiaSIpLHI9cGFyYW1zLm1hdGNoKHJlZyk7cmV0dXJuIG51bGwhPT1yP3VuZXNjYXBlKHJbMl0pOm51bGx9LHJ0Y01lc3NhZ2U9ZnVuY3Rpb24oKXt2YXIgdXNlcmRhdGE9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LGl0ZW09MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGRhdGE9YmFiZWxfcnVudGltZV9oZWxwZXJzX2V4dGVuZHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkoe30sdXNlcmRhdGEsaXRlbSksc3RyZWFtPXZvaWQgMCxleHQ9SlNPTi5wYXJzZShkYXRhLnBheWxvYWQpLmV4dDtzd2l0Y2goZXh0LnN0cmVhbVR5cGUpe2Nhc2UiVk9JQ0UiOnN0cmVhbT0i6K+t6Z+zIjticmVhaztjYXNlIlZJREVPIjpzdHJlYW09IuinhumikSJ9dmFyIHN0cj12b2lkIDA7c3dpdGNoKGV4dC5yZWFzb24pe2Nhc2UiZGVjbGluZSI6c3RyPXN0cmVhbSsi6YCa6K+d5bey5ouS57udIjticmVhaztjYXNlImJ1c3kiOmNhc2UiaGFuZ3VwIjpzdHI9c3RyZWFtKyLpgJror53lt7Llj5bmtogiO2JyZWFrO2Nhc2UibGF1bmNoIjpzdHI9KGRhdGEudXNlcm5hbWV8fCIiKSsi5Y+R6LW35LqGIitzdHJlYW0rIumAmuivnSI7YnJlYWs7Y2FzZSJzdWNjZXNzIjpzdHI9IumAmuivneaXtumVv++8miIrZXh0LmR1cmF0aW9uO2JyZWFrO2RlZmF1bHQ6c3RyPXN0cmVhbSsi6YCa6K+d5bey5Y+W5raIIn1yZXR1cm4gc3RyfSx0aW1lc3RhbXBUb01vbnRoPWZ1bmN0aW9uKHRpbWVzdGFtcCl7cmV0dXJuIG5ldyBEYXRlKHRpbWVzdGFtcCkuZ2V0RnVsbFllYXIoKTwobmV3IERhdGUpLmdldEZ1bGxZZWFyKCk/bW9tZW50KHRpbWVzdGFtcCkuZm9ybWF0KCJZWVlZLU1NLUREIik6bW9tZW50KHRpbWVzdGFtcCkuZm9ybWF0KCJNTS1ERCBISDptbSIpfSx0aW1lc3RhbXBUb0RheT1mdW5jdGlvbih0aW1lc3RhbXBTdHJpbmcpe2lmKCF0aW1lc3RhbXBTdHJpbmcpcmV0dXJuIG1vbWVudChuZXcgRGF0ZSkuZm9ybWF0KCJISDptbSIpO3ZhciB0aW1lc3RhbXA9cGFyc2VJbnQodGltZXN0YW1wU3RyaW5nKSx0aW1lc3RhbXBEYXRlPW5ldyBEYXRlKHRpbWVzdGFtcCksdGltZXN0YW1wTW9tZW50RGF0ZT1tb21lbnQodGltZXN0YW1wRGF0ZSksZGF0ZT1uZXcgRGF0ZSxtb21lbnREYXRlPW1vbWVudChkYXRlKTtyZXR1cm4gdGltZXN0YW1wRGF0ZS50b0RhdGVTdHJpbmcoKT09PWRhdGUudG9EYXRlU3RyaW5nKCk/dGltZXN0YW1wTW9tZW50RGF0ZS5mb3JtYXQoIkhIOm1tIik6dGltZXN0YW1wTW9tZW50RGF0ZS5mb3JtYXQoIllZWVktTU0tREQiKT09PW1vbWVudERhdGUuYWRkKC0xLCJkYXlzIikuZm9ybWF0KCJZWVlZLU1NLUREIik/IuaYqOWkqSI6bmV3IERhdGUodGltZXN0YW1wKS5nZXRGdWxsWWVhcigpPChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKT90aW1lc3RhbXBNb21lbnREYXRlLmZvcm1hdCgiWVlZWS1NTS1ERCIpOnRpbWVzdGFtcE1vbWVudERhdGUuZm9ybWF0KCJNTS1ERCIpfSx0aW1lc3RhbXBUb01lc3NhZ2U9ZnVuY3Rpb24odGltZXN0YW1wU3RyaW5nLGlzSW50YWN0KXt2YXIgdGltZXN0YW1wPXBhcnNlSW50KHRpbWVzdGFtcFN0cmluZyksdGltZXN0YW1wRGF0ZT1uZXcgRGF0ZSh0aW1lc3RhbXApLHRpbWVzdGFtcE1vbWVudERhdGU9bW9tZW50KHRpbWVzdGFtcERhdGUpLGRhdGU9bmV3IERhdGUsbW9tZW50RGF0ZT1tb21lbnQoZGF0ZSk7cmV0dXJuIHRpbWVzdGFtcERhdGUudG9EYXRlU3RyaW5nKCk9PT1kYXRlLnRvRGF0ZVN0cmluZygpP2lzSW50YWN0P3RpbWVzdGFtcE1vbWVudERhdGUuZm9ybWF0KCJISDptbTpzcyIpOnRpbWVzdGFtcE1vbWVudERhdGUuZm9ybWF0KCJISDptbSIpOnRpbWVzdGFtcE1vbWVudERhdGUuZm9ybWF0KCJZWVlZLU1NLUREIik9PT1tb21lbnREYXRlLmFkZCgtMSwiZGF5cyIpLmZvcm1hdCgiWVlZWS1NTS1ERCIpP2lzSW50YWN0PyLmmKjlpKkgIit0aW1lc3RhbXBNb21lbnREYXRlLmZvcm1hdCgiSEg6bW06c3MiKToi5pio5aSpICIrdGltZXN0YW1wTW9tZW50RGF0ZS5mb3JtYXQoIkhIOm1tIik6bmV3IERhdGUodGltZXN0YW1wKS5nZXRGdWxsWWVhcigpPChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKT9pc0ludGFjdD90aW1lc3RhbXBNb21lbnREYXRlLmZvcm1hdCgiWVlZWS1NTS1ERCBISDptbTpzcyIpOnRpbWVzdGFtcE1vbWVudERhdGUuZm9ybWF0KCJZWVlZLU1NLUREIEhIOm1tIik6aXNJbnRhY3Q/dGltZXN0YW1wTW9tZW50RGF0ZS5mb3JtYXQoIk1NLUREIEhIOm1tOnNzIik6dGltZXN0YW1wTW9tZW50RGF0ZS5mb3JtYXQoIk1NLUREIEhIOm1tIil9LEdVSUQ9ZnVuY3Rpb24oKXtyZXR1cm4oWzFlN10rLTFlMystNGUzKy04ZTMrLTFlMTEpLnJlcGxhY2UoL1swMThdL2csZnVuY3Rpb24oYyl7cmV0dXJuKGNeY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0mMTU+PmMvNCkudG9TdHJpbmcoMTYpfSl9LGRlV2VpZ2h0PWZ1bmN0aW9uKGEsYixwcm9wKXt2YXIgaGFzaD17fSxyZXN1bHQ9YTtyZXR1cm4gcmVzdWx0PVtdLmNvbmNhdChiYWJlbF9ydW50aW1lX2hlbHBlcnNfdG9Db25zdW1hYmxlQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0KCkocmVzdWx0KSxiYWJlbF9ydW50aW1lX2hlbHBlcnNfdG9Db25zdW1hYmxlQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0KCkoYikpLnJlZHVjZShmdW5jdGlvbihpdGVtLG5leHQpe3JldHVybiFoYXNoW25leHRbcHJvcF1dJiYoaGFzaFtuZXh0W3Byb3BdXT1pdGVtLnB1c2gobmV4dCkpLGl0ZW19LFtdKX0sY29tcGFyZT1mdW5jdGlvbihhLGIpe3JldHVybiBhLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LHNvcnREYXRhPWZ1bmN0aW9uKGRhdGEpe3ZhciBwcm9wPTE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToidGltZXN0YW1wIjtyZXR1cm4gZGF0YS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIHBhcnNlSW50KGJbcHJvcF0pLXBhcnNlSW50KGFbcHJvcF0pfSl9LHRvVGV4dGFyZWE9ZnVuY3Rpb24oc3RyKXtyZXR1cm4gc3RyPShzdHI9c3RyLnJlcGxhY2UobmV3IFJlZ0V4cCgiXG4iLCJnIiksIjxicj4iKSkucmVwbGFjZShuZXcgUmVnRXhwKCIgIiwiZyIpLCImbmJzcDsiKX0sdG9SZXZlcnNhbFRleHRhcmVhPWZ1bmN0aW9uKHN0cil7cmV0dXJuIHN0cj9zdHI9KHN0cj1zdHIucmVwbGFjZShuZXcgUmVnRXhwKCI8YnI+IiwiZyIpLCJcbiIpKS5yZXBsYWNlKG5ldyBSZWdFeHAoIiZuYnNwOyIsImciKSwiICIpOiIifSx0cmltPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWUucmVwbGFjZSgvW1xzXHJcbl0vZywiIil9LGlzRmlsZXNpemU9ZnVuY3Rpb24oYml0KXt2YXIga2I9KGJpdC8xMDI0KS50b0ZpeGVkKDEpLG1iPShiaXQvMTAyNC8xMDI0KS50b0ZpeGVkKDEpLGdiPShiaXQvMTAyNC8xMDI0LzEwMjQpLnRvRml4ZWQoMSk7cmV0dXJuIDE8PWdiP2diKyIgR0IiOjE8PW1iP21iKyIgTUIiOmtiKyIgS0IifSxpbWdzVHlwZT17anBnOiEwLGpwZWc6ITAsc3ZnOiEwLGdpZjohMCxwbmc6ITAsYm1wOiEwfSx6aXBzVHlwZT17cmFyOiEwLHppcDohMCwiN3oiOiEwLGd6OiEwLGJ6OiEwLGFjZTohMCx1aGE6ITAsdWhkOiEwLHpwYXE6ITAsYXJqOiEwfSxkb2NzVHlwZT17ZG9jOiEwLGRvY3g6ITB9LHBkZnNUeXBlPXtwZGY6ITB9LHBwdHNUeXBlPXtwcHQ6ITAscHB0eDohMH0sZXhjZWxzVHlwZT17eGxzOiEwLHhsc3g6ITB9LGN1cnJlbnRGaWxlSWNvbj1mdW5jdGlvbih0eXBlKXtyZXR1cm4gdHlwZS50b0xvd2VyQ2FzZSgpaW4gaW1nc1R5cGU/Imljb24taW1nIjp0eXBlLnRvTG93ZXJDYXNlKClpbiB6aXBzVHlwZT8iaWNvbi1wYWNrYWdlIjp0eXBlLnRvTG93ZXJDYXNlKClpbiBkb2NzVHlwZT8iaWNvbi13b3JkIjp0eXBlLnRvTG93ZXJDYXNlKClpbiBwZGZzVHlwZT8iaWNvbi1wZGYiOnR5cGUudG9Mb3dlckNhc2UoKWluIHBwdHNUeXBlPyJpY29uLXBwdCI6dHlwZS50b0xvd2VyQ2FzZSgpaW4gZXhjZWxzVHlwZT8iaWNvbi1leGNlbCI6Imljb24tZmlsZSJ9LG1lc3NhZ2U9ZnVuY3Rpb24oaXRlbSl7dmFyIHBheWxvYWQ9SlNPTi5wYXJzZShpdGVtLnBheWxvYWQpO2lmKHBheWxvYWQpe3ZhciBtc2c9dm9pZCAwO3N3aXRjaChwYXlsb2FkLnR5cGV8fGl0ZW0ubWVzZ190eXBlKXtjYXNlInR4dCI6bXNnPXBheWxvYWQuZXh0JiZwYXlsb2FkLmV4dC5zdHJlYW1UeXBlPyJWT0lDRSI9PT1wYXlsb2FkLmV4dC5zdHJlYW1UeXBlPyJb6K+t6Z+z6YCa6K+d5raI5oGvXSI6Ilvop4bpopHpgJror53mtojmga9dIjpwYXlsb2FkLm1zZyYmInN0cmluZyI9PXR5cGVvZiBwYXlsb2FkLm1zZyYmcGF5bG9hZC5tc2cuaW5jbHVkZXMoIlxuIik/cGF5bG9hZC5tc2cuc3BsaXQoIlxuIilbMF0rIiAgLi4uIjpwYXlsb2FkLm1zZzticmVhaztjYXNlImltZyI6bXNnPSJb5Zu+54mHXSI7YnJlYWs7Y2FzZSJmaWxlIjptc2c9Ilvmlofku7ZdIjticmVhaztjYXNlImF1ZGlvIjptc2c9Ilvor63pn7NdIjticmVhaztjYXNlImFwcCI6Y2FzZSJzeXN0ZW0iOm1zZz1wYXlsb2FkLm1zZy5pbmNsdWRlcygneyInKT9KU09OLnBhcnNlKHBheWxvYWQubXNnKS5jb250ZW50OiJzdHJpbmciPT10eXBlb2YgcGF5bG9hZC5tc2c/cGF5bG9hZC5tc2c6cGF5bG9hZC5tc2cuY29udGVudH1yZXR1cm4gbXNnfX0sc2V0VXJsVG9rZW49ZnVuY3Rpb24odXJsKXtpZighdXJsKXJldHVybiIiO3ZhciB0b2tlbj1nZXRQYXJhbXMoInRva2VuIil8fGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJtZXNnX3Rva2VuIiksaGVhZD11cmwuc3BsaXQoIj8iKVswXSsiP3Rva2VuPSIrdG9rZW47cmV0dXJuIHVybC5zcGxpdCgiPyIpWzFdP2hlYWQrIiYiK3VybC5zcGxpdCgiPyIpWzFdOmhlYWR9LGN1cnJlbnRHcm91cE5hbWU9ZnVuY3Rpb24oaXRlbSl7dmFyIGdyb3VwbmFtZT1pdGVtLmdyb3VwbmFtZTshZ3JvdXBuYW1lJiZpdGVtLnBjY1VzZXJJbmZvcyYmQXJyYXkuaXNBcnJheShpdGVtLnBjY1VzZXJJbmZvcykmJihncm91cG5hbWU9NTxpdGVtLnBjY1VzZXJJbmZvcy5sZW5ndGg/aXRlbS5wY2NVc2VySW5mb3MubWFwKGZ1bmN0aW9uKHYpe3JldHVybiB2LnVzZXJuYW1lfSkuc2xpY2UoMCw1KS5qb2luKCIsIikrIiDnrYkiOml0ZW0ucGNjVXNlckluZm9zLm1hcChmdW5jdGlvbih2KXtyZXR1cm4gdi51c2VybmFtZX0pLnNsaWNlKDAsNSkpO3ZhciBncm91cG5hbWVBcnI9Z3JvdXBuYW1lLnNwbGl0KCIuIik7cmV0dXJuIGl0ZW0uaXNvcmc/Z3JvdXBuYW1lQXJyW2dyb3VwbmFtZUFyci5sZW5ndGgtMV06Z3JvdXBuYW1lfX0sImprcy8iOmZ1bmN0aW9uKG1vZHVsZSxleHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pe30scEh2dzpmdW5jdGlvbihtb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXsidXNlIHN0cmljdCI7dmFyIGJhYmVsX3J1bnRpbWVfaGVscGVyc190eXBlb2ZfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJFSml5IiksYmFiZWxfcnVudGltZV9oZWxwZXJzX3R5cGVvZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGJhYmVsX3J1bnRpbWVfaGVscGVyc190eXBlb2ZfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyksYmFiZWxfcnVudGltZV9jb3JlX2pzX2pzb25fc3RyaW5naWZ5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX189X193ZWJwYWNrX3JlcXVpcmVfXygiZ0RTKyIpLGJhYmVsX3J1bnRpbWVfY29yZV9qc19qc29uX3N0cmluZ2lmeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGJhYmVsX3J1bnRpbWVfY29yZV9qc19qc29uX3N0cmluZ2lmeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKSxiYWJlbF9ydW50aW1lX2hlbHBlcnNfdG9Db25zdW1hYmxlQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJtMWNIIiksYmFiZWxfcnVudGltZV9oZWxwZXJzX3RvQ29uc3VtYWJsZUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oYmFiZWxfcnVudGltZV9oZWxwZXJzX3RvQ29uc3VtYWJsZUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18pLGJhYmVsX3J1bnRpbWVfaGVscGVyc19leHRlbmRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX189X193ZWJwYWNrX3JlcXVpcmVfXygiUWJMWiIpLGJhYmVsX3J1bnRpbWVfaGVscGVyc19leHRlbmRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19fZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oYmFiZWxfcnVudGltZV9oZWxwZXJzX2V4dGVuZHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyksdnVlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X189X193ZWJwYWNrX3JlcXVpcmVfXygiS3c1ciIpLHZ1ZXhfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJMMkpVIiksX2FjdGlvbnNfbWVzc2FnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fPV9fd2VicGFja19yZXF1aXJlX18oIjNLS28iKTt2dWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LnVzZSh2dWV4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18uYSksX193ZWJwYWNrX2V4cG9ydHNfXy5hPW5ldyB2dWV4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18uYS5TdG9yZSh7c3RhdGU6e3VzZXJEYXRhOnt9LGhpc3RvcnlJZDoiIixjb21waWQ6IiIsaGVhZEl0ZW06IiIsY29tcG9ueXM6W10sY29tcG9ueU5hbWU6IiIsc2VjdGlvbklkOjAsc2VsZlNlY3Rpb246MCxhZGRyZXNzQnJlYWQ6W10sZGVmYXVsdEFkZHJlc3NCcmVhZDpbXSxtZXNzYWdlOltdLGhpc3RvcnlMaXN0OltdLHRvdGFsUGFnZToxLG1lc3NhZ2VXYWl0OiExLHVucmVhZHM6MCxuZXdIcmVmOiIiLGNhbGxFbGU6IiIsaGFzUG9ydGFsOiExLGNhbGxVc2VyOnt9LG5vdEdyb3VwVXNlcjpbXSxyZXBvcnRDb3VudDp7fSxmb3JlaWduOntjb21wYW55OkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImZvcmNvbXAiKSl8fCExLGdyb3VwOkpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImZvcmdyb3VwIikpfHwhMX0sZm9yZWlnbkRhdGE6e2xhYmVsOiIiLGxpc3Q6W10sbm9kZWtleToiIn19LG11dGF0aW9uczp7c2V0UmVwb3J0Q291bnQ6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7c3RhdGUucmVwb3J0Q291bnQ9cGF5bG9hZH0sc2V0Tm90R3JvdXBVc2VyOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3N0YXRlLm5vdEdyb3VwVXNlci5maW5kKGZ1bmN0aW9uKHYpe3JldHVybiB2LnVzZXJjb2RlPT09cGF5bG9hZC51c2VyY29kZX0pfHxzdGF0ZS5ub3RHcm91cFVzZXIucHVzaChwYXlsb2FkKX0sc2V0Q2FsbFVzZXI6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7c3RhdGUuY2FsbFVzZXI9cGF5bG9hZH0sc2V0Q2FsbEVsZTpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXtzdGF0ZS5jYWxsRWxlPXBheWxvYWR9LHNldE5ld0hyZWY6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7c3RhdGUubmV3SHJlZj1wYXlsb2FkfSxzZXRIYXNQb3J0YWw6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7c3RhdGUuaGFzUG9ydGFsPXBheWxvYWR9LHNldEF2YXRvcjpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXt2YXIgaGlzdG9yeUxpc3Q9c3RhdGUuaGlzdG9yeUxpc3Quc2xpY2UoKTtoaXN0b3J5TGlzdC5tYXAoZnVuY3Rpb24odil7QXJyYXkuaXNBcnJheSh2LnBjY1VzZXJJbmZvcykmJnYucGNjVXNlckluZm9zLm1hcChmdW5jdGlvbihwY2Mpe3BjYy51c2VyY29kZT09PXBheWxvYWQudXNlcmNvZGUmJihwY2MuaGVhZGltZz1wYXlsb2FkLmhlYWRpbWcpfSl9KSxzdGF0ZS5oaXN0b3J5TGlzdD1oaXN0b3J5TGlzdH0sc2V0Q29tcGlkOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3N0YXRlLmNvbXBpZD1wYXlsb2FkfSxzZXRNZXNzYWdlV2FpdDpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXtzdGF0ZS5tZXNzYWdlV2FpdD1wYXlsb2FkfSxzZXRVbnJlYWRzOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3N0YXRlLnVucmVhZHM9cGF5bG9hZH0sc2V0VG90YWxQYWdlOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3N0YXRlLnRvdGFsUGFnZT1wYXlsb2FkfSxzZXRVc2VyRGF0YTpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXtzdGF0ZS51c2VyRGF0YT1wYXlsb2FkfSxzZXRIaXN0b3J5SWQ6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7aWYoc3RhdGUuaGlzdG9yeUlkIT09cGF5bG9hZCl7c3RhdGUuaGlzdG9yeUlkPXBheWxvYWQ7dmFyIGl0ZW09c3RhdGUuaGlzdG9yeUxpc3QuZmluZChmdW5jdGlvbih2KXtyZXR1cm4gdi5ndWlkPT09cGF5bG9hZH0pO2lmKGl0ZW0mJml0ZW0udW5yZWFkKXt2YXIgcmVtYWluaW5nPXN0YXRlLnVucmVhZHMtaXRlbS51bnJlYWQ7c3RhdGUudW5yZWFkcz1pdGVtLm5vX2Rpc3R1cmI/c3RhdGUudW5yZWFkczpyZW1haW5pbmc8MD8wOnJlbWFpbmluZyxPYmplY3QoX2FjdGlvbnNfbWVzc2FnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fLmopKFtiYWJlbF9ydW50aW1lX2hlbHBlcnNfZXh0ZW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fX2RlZmF1bHQoKSh7fSxpdGVtLHt1bnJlYWQ6MH0pXSl9fX0sc2V0SGlzdG9yeUxpc3Q6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7cGF5bG9hZC5sZW5ndGgmJihzdGF0ZS51bnJlYWRzPXBheWxvYWQuZmlsdGVyKGZ1bmN0aW9uKHYpe3JldHVybiF2Lm5vX2Rpc3R1cmJ9KS5tYXAoZnVuY3Rpb24odil7cmV0dXJuIHYudW5yZWFkfSkucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYn0pKSxzdGF0ZS5oaXN0b3J5TGlzdD1wYXlsb2FkfSxhZGRJdGVtOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3ZhciBuZXdMaXN0PXN0YXRlLmhpc3RvcnlMaXN0LnNsaWNlKCksaW5kZXg9bmV3TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0uZ3VpZD09PXBheWxvYWQuZ3VpZH0pLHNldFRvcD1mdW5jdGlvbihpbmRleCl7cGF5bG9hZC5pc3RvcD9uZXdMaXN0LnVuc2hpZnQocGF5bG9hZCk6bmV3TGlzdC5zcGxpY2UoaW5kZXgsMCxwYXlsb2FkKX07aWYoLTE9PT1pbmRleCl7c2V0VG9wKG5ld0xpc3QuZmlsdGVyKGZ1bmN0aW9uKHYpe3JldHVybiB2LmlzdG9wfSkubGVuZ3RoKX1lbHNle25ld0xpc3Quc3BsaWNlKGluZGV4LDEscGF5bG9hZCk7dmFyIF9ub3JtYWxJbmRleD1uZXdMaXN0LmZpbHRlcihmdW5jdGlvbih2KXtyZXR1cm4gdi5pc3RvcH0pLmxlbmd0aDtuZXdMaXN0LnNwbGljZShpbmRleCwxKSxzZXRUb3AoX25vcm1hbEluZGV4KX1zdGF0ZS5oaXN0b3J5TGlzdD1uZXdMaXN0fSx1cGRhdGVJdGVtOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3ZhciBuZXdMaXN0PXN0YXRlLmhpc3RvcnlMaXN0LnNsaWNlKCksaW5kZXg9bmV3TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0uZ3VpZD09PXBheWxvYWQuZ3VpZH0pOy0xIT09aW5kZXgmJm5ld0xpc3Quc3BsaWNlKGluZGV4LDEscGF5bG9hZCksc3RhdGUuaGlzdG9yeUxpc3Q9bmV3TGlzdH0sY2xvc2VJdGVtOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3ZhciBuZXdMaXN0PXN0YXRlLmhpc3RvcnlMaXN0LnNsaWNlKCksaW5kZXg9bmV3TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24oaXRlbSl7cmV0dXJuIGl0ZW0uZ3VpZD09PXBheWxvYWR9KSx0YXJnZXQ9bmV3TGlzdC5zcGxpY2UoaW5kZXgsMSk7T2JqZWN0KF9hY3Rpb25zX21lc3NhZ2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXy5hKSh0YXJnZXRbMF0udHlwZSx0YXJnZXRbMF0udGltZXN0YW1wLHRhcmdldFswXS50YXJnZXR1c2VyLHRhcmdldFswXS5tb2RsZW5hbWUpO3ZhciBoaXN0b3J5SWQ9c3RhdGUuaGlzdG9yeUlkO3BheWxvYWQ9PT1zdGF0ZS5oaXN0b3J5SWQmJihoaXN0b3J5SWQ9IiIpLHN0YXRlLmhpc3RvcnlJZD1oaXN0b3J5SWQsc3RhdGUuaGlzdG9yeUxpc3Q9bmV3TGlzdCxzdGF0ZS51bnJlYWRzPXRhcmdldFswXS5ub19kaXN0dXJiP3N0YXRlLnVucmVhZHM6c3RhdGUudW5yZWFkcy10YXJnZXRbMF0udW5yZWFkLE9iamVjdChfYWN0aW9uc19tZXNzYWdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18uaikoW2JhYmVsX3J1bnRpbWVfaGVscGVyc19leHRlbmRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19fZGVmYXVsdCgpKHt9LHRhcmdldFswXSx7dW5yZWFkOjB9KV0pfSxzZXRNZXNzYWdlOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe2lmKEFycmF5LmlzQXJyYXkocGF5bG9hZCkpc3RhdGUubWVzc2FnZT1wYXlsb2FkO2Vsc2UgaWYocGF5bG9hZC5tc2dfaWQpe3ZhciBtZXNzYWdlPXN0YXRlLm1lc3NhZ2UsaW5kZXg9bWVzc2FnZS5maW5kSW5kZXgoZnVuY3Rpb24odil7cmV0dXJuIHYubXNnX2lkPT09cGF5bG9hZC5tc2dfaWR9KTttZXNzYWdlLnNwbGljZShpbmRleCwxLHBheWxvYWQpfX0sYWRkTWVzc2FnZTpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXt2YXIgbWVzc2FnZT1bXS5jb25jYXQoYmFiZWxfcnVudGltZV9oZWxwZXJzX3RvQ29uc3VtYWJsZUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCgpKHN0YXRlLm1lc3NhZ2UpKTttZXNzYWdlLnB1c2gocGF5bG9hZCksc3RhdGUubWVzc2FnZT1tZXNzYWdlfSxtb3JlTWVzc2FnZTpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXt2YXIgbWVzc2FnZT1bXS5jb25jYXQoYmFiZWxfcnVudGltZV9oZWxwZXJzX3RvQ29uc3VtYWJsZUFycmF5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCgpKHBheWxvYWQpLGJhYmVsX3J1bnRpbWVfaGVscGVyc190b0NvbnN1bWFibGVBcnJheV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQoKShzdGF0ZS5tZXNzYWdlKSk7c3RhdGUubWVzc2FnZT1tZXNzYWdlfSxyZW1vdmVNZXNzYWdlOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3ZhciBtZXNzYWdlPVtdLmNvbmNhdChiYWJlbF9ydW50aW1lX2hlbHBlcnNfdG9Db25zdW1hYmxlQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0KCkoc3RhdGUubWVzc2FnZSkpLGluZGV4PW1lc3NhZ2UuZmluZEluZGV4KGZ1bmN0aW9uKHYpe3JldHVybiB2Lm1zZ19pZD09PXBheWxvYWR9KTstMSE9PWluZGV4JiZtZXNzYWdlLnNwbGljZShpbmRleCwxKSxzdGF0ZS5tZXNzYWdlPW1lc3NhZ2V9LGNsZWFyTWVzc2FnZTpmdW5jdGlvbihzdGF0ZSl7c3RhdGUubWVzc2FnZT1bXX0sc2V0SGVhZEl0ZW06ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7c3RhdGUuaGVhZEl0ZW09cGF5bG9hZH0sc2V0Q29tcG9ueXM6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7c3RhdGUuY29tcG9ueXM9cGF5bG9hZH0sc2V0Q29tcG9ueU5hbWU6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7c3RhdGUuY29tcG9ueU5hbWU9cGF5bG9hZH0sc2V0U2VjdGlvbklkOmZ1bmN0aW9uKHN0YXRlLHBheWxvYWQpe3BheWxvYWR8fChzdGF0ZS5hZGRyZXNzQnJlYWQ9W10pLHN0YXRlLnNlY3Rpb25JZD1wYXlsb2FkfSxzZXRTZWxmU2VjdGlvbjpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXtzdGF0ZS5zZWxmU2VjdGlvbj1wYXlsb2FkfSxzZXRBZGRyZXNzQnJlYWQ6ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7cGF5bG9hZC5mYWJpZHx8KHN0YXRlLmFkZHJlc3NCcmVhZD1bXSk7dmFyIGFkZHJlc3NCcmVhZD1zdGF0ZS5hZGRyZXNzQnJlYWQsaW5kZXg9YWRkcmVzc0JyZWFkLmZpbmRJbmRleChmdW5jdGlvbih2KXtyZXR1cm4gdi5mYWJpZD09PXBheWxvYWQuZmFiaWR9KTtpZigtMT09PWluZGV4KXt2YXIgbGV2ZWw9cGFyc2VJbnQocGF5bG9hZC5sZXZlbCwxMCktMzthZGRyZXNzQnJlYWRbbGV2ZWxdP2FkZHJlc3NCcmVhZC5zcGxpY2UobGV2ZWwsMSxwYXlsb2FkKTphZGRyZXNzQnJlYWQucHVzaChwYXlsb2FkKX1lbHNlIGFkZHJlc3NCcmVhZD1hZGRyZXNzQnJlYWQuc3BsaWNlKDAsaW5kZXgrMSk7c3RhdGUuYWRkcmVzc0JyZWFkPWFkZHJlc3NCcmVhZH0saW5pdEFkZHJlc3NCcmVhZDpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXt2YXIgYWRkcmVzc0JyZWFkPXBheWxvYWQucmVzdWx0LnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gcGFyc2VJbnQoYS5sZXZlbCktcGFyc2VJbnQoYi5sZXZlbCl9KTtzdGF0ZS5hZGRyZXNzQnJlYWQ9SlNPTi5wYXJzZShiYWJlbF9ydW50aW1lX2NvcmVfanNfanNvbl9zdHJpbmdpZnlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0KCkoYWRkcmVzc0JyZWFkKSkscGF5bG9hZC5kZWZhdWx0JiYoc3RhdGUuZGVmYXVsdEFkZHJlc3NCcmVhZD1KU09OLnBhcnNlKGJhYmVsX3J1bnRpbWVfY29yZV9qc19qc29uX3N0cmluZ2lmeV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKShhZGRyZXNzQnJlYWQpKSl9LHJlc2V0OmZ1bmN0aW9uKHN0YXRlKXtmb3IodmFyIGtleSBpbiBzdGF0ZSl7aWYoInJvdXRlIj09PWtleSlyZXR1cm47dmFyIHR5cGU9YmFiZWxfcnVudGltZV9oZWxwZXJzX3R5cGVvZl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQoKShzdGF0ZVtrZXldKTtBcnJheS5pc0FycmF5KHN0YXRlW2tleV0pP3N0YXRlW2tleV09W106InN0cmluZyI9PT10eXBlP3N0YXRlW2tleV09IiI6Im9iamVjdCI9PT10eXBlP3N0YXRlW2tleV09e306ImJvb2xlYW4iPT09dHlwZSYmKHN0YXRlW2tleV09ITEpfX0sc2V0VXNlckZvcmVpZ246ZnVuY3Rpb24oc3RhdGUscGF5bG9hZCl7c3RhdGUuZm9yZWlnbj1wYXlsb2FkfSxzZXRGb3JlaWduRGF0YTpmdW5jdGlvbihzdGF0ZSxwYXlsb2FkKXtzdGF0ZS5mb3JlaWduRGF0YT1wYXlsb2FkfX0sZ2V0dGVyczp7aW5pdEJyYW5jaDpmdW5jdGlvbihzdGF0ZSl7cmV0dXJuW3tmYWJpZDowLGZhYm5hbWU6Iue7hOe7h+e7k+aehCJ9LHN0YXRlLnNlbGZTZWN0aW9uXX0saGVscExpbms6ZnVuY3Rpb24oKXtyZXR1cm4iaHR0cHM6Ly93d3cueXVxdWUuY29tL3hpYW9tYW8tZG9sb20vc3pybSJ9LG5vdGljZUxpbms6ZnVuY3Rpb24oKXtyZXR1cm4iaHR0cHM6Ly93d3cueXVxdWUuY29tL3hpYW9tYW8tZG9sb20vZ3hnZyJ9LGluaXRBZGRyZXNzQnJlYWQ6ZnVuY3Rpb24oc3RhdGUpe3ZhciBhZGRyZXNzQnJlYWQ9YmFiZWxfcnVudGltZV9jb3JlX2pzX2pzb25fc3RyaW5naWZ5X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKFtdLmNvbmNhdChiYWJlbF9ydW50aW1lX2hlbHBlcnNfdG9Db25zdW1hYmxlQXJyYXlfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0KCkoc3RhdGUuZGVmYXVsdEFkZHJlc3NCcmVhZCkpKTtzdGF0ZS5hZGRyZXNzQnJlYWQ9SlNPTi5wYXJzZShhZGRyZXNzQnJlYWQpfSxhY3RpdmVJdGVtOmZ1bmN0aW9uKHN0YXRlKXtyZXR1cm4gc3RhdGUuaGlzdG9yeUxpc3QuZmluZChmdW5jdGlvbih2KXtyZXR1cm4gdi5ndWlkPT09c3RhdGUuaGlzdG9yeUlkfSl9fX0pfSx0M1VuOmZ1bmN0aW9uKG1vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18peyJ1c2Ugc3RyaWN0Ijt2YXIgY29yZV9qc19wcm9taXNlPV9fd2VicGFja19yZXF1aXJlX18oIjRkN0YiKSxwcm9taXNlX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGNvcmVfanNfcHJvbWlzZSksaGVscGVyc190eXBlb2Y9X193ZWJwYWNrX3JlcXVpcmVfXygiRUppeSIpLHR5cGVvZl9kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihoZWxwZXJzX3R5cGVvZiksaGVscGVyc19leHRlbmRzPV9fd2VicGFja19yZXF1aXJlX18oIlFiTFoiKSxleHRlbmRzX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGhlbHBlcnNfZXh0ZW5kcyksY2xhc3NDYWxsQ2hlY2s9X193ZWJwYWNrX3JlcXVpcmVfXygiaUNjNSIpLGNsYXNzQ2FsbENoZWNrX2RlZmF1bHQ9X193ZWJwYWNrX3JlcXVpcmVfXy5uKGNsYXNzQ2FsbENoZWNrKSxjcmVhdGVDbGFzcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJWN29DIiksY3JlYXRlQ2xhc3NfZGVmYXVsdD1fX3dlYnBhY2tfcmVxdWlyZV9fLm4oY3JlYXRlQ2xhc3MpLGF4aW9zPV9fd2VicGFja19yZXF1aXJlX18oInZEcWkiKSxheGlvc19kZWZhdWx0PV9fd2VicGFja19yZXF1aXJlX18ubihheGlvcyksZWxlbWVudF91aV9jb21tb249X193ZWJwYWNrX3JlcXVpcmVfXygiWEpZVCIpLHJvdXRlcnM9X193ZWJwYWNrX3JlcXVpcmVfXygiOFdKeiIpLHN0b3Jlcz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJwSHZ3IiksZmlsdGVycz1fX3dlYnBhY2tfcmVxdWlyZV9fKCJpWFV3IiksbWFpbj1fX3dlYnBhY2tfcmVxdWlyZV9fKCJWdGRpIik7X193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sImEiLGZ1bmN0aW9uKCl7cmV0dXJuIHJlcXVlc3R9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiYyIsZnVuY3Rpb24oKXtyZXR1cm4gcmVxdWVzdE1SUH0pLF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCJiIixmdW5jdGlvbigpe3JldHVybiByZXF1ZXN0NEp9KSxfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywiZCIsZnVuY3Rpb24oKXtyZXR1cm4gcmVxdWVzdFdYfSk7dmFyIGhyZWY9d2luZG93LmxvY2F0aW9uLmhyZWYsSE9TVD0iaHR0cHM6Ly9nLmRhY3ViZS5jbi8iO2hyZWYuaW5jbHVkZXMoIi50LiIpP0hPU1Q9Imh0dHBzOi8vZy50LmRhY3ViZS5jbi8iOmhyZWYuaW5jbHVkZXMoIi5kLiIpJiYoSE9TVD0iaHR0cHM6Ly9nLmQuZGFjdWJlLmNuOjk5OC8iKTt2YXIgcmVxdWVzdF9SZXF1ZXN0Q2xpZW50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUmVxdWVzdENsaWVudChvcHRpb25zKXtjbGFzc0NhbGxDaGVja19kZWZhdWx0KCkodGhpcyxSZXF1ZXN0Q2xpZW50KSx0aGlzLm9wdGlvbnM9ZXh0ZW5kc19kZWZhdWx0KCkoe30sUmVxdWVzdENsaWVudC5nZXREZWZhdWx0T3B0aW9ucygpLG9wdGlvbnMpfXJldHVybiBjcmVhdGVDbGFzc19kZWZhdWx0KCkoUmVxdWVzdENsaWVudCxudWxsLFt7a2V5OiJnZXREZWZhdWx0T3B0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm57aGVhZGVyczp7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uIiwiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fX19XSksY3JlYXRlQ2xhc3NfZGVmYXVsdCgpKFJlcXVlc3RDbGllbnQsW3trZXk6Il9idWlsZFF1ZXJ5Iix2YWx1ZTpmdW5jdGlvbih1cmwscXVlcnkpe3JldHVybiBxdWVyeSYmIm9iamVjdCI9PT0odm9pZCAwPT09cXVlcnk/InVuZGVmaW5lZCI6dHlwZW9mX2RlZmF1bHQoKShxdWVyeSkpP3VybCsiPyIrZnVuY3Rpb24gc2VyaWFsaXplKG9iaixwcmVmaXgpe3ZhciBzdHI9W107Zm9yKHZhciBwcm9wIGluIG9iailpZihvYmouaGFzT3duUHJvcGVydHkocHJvcCkpe3ZhciBrZXk9cHJlZml4P3ByZWZpeCsiWyIrcHJvcCsiXSI6cHJvcCx2YWx1ZT1vYmpbcHJvcF07c3RyLnB1c2gobnVsbCE9PXZhbHVlJiYib2JqZWN0Ij09PSh2b2lkIDA9PT12YWx1ZT8idW5kZWZpbmVkIjp0eXBlb2ZfZGVmYXVsdCgpKHZhbHVlKSk/c2VyaWFsaXplKHZhbHVlLGtleSk6ZW5jb2RlVVJJQ29tcG9uZW50KGtleSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpfXJldHVybiBzdHIuZmlsdGVyKGZ1bmN0aW9uKHF1ZXJ5KXtyZXR1cm4gcXVlcnkubGVuZ3RofSkuam9pbigiJiIpfShxdWVyeSk6dXJsfX0se2tleToiX21ha2VSZXF1ZXN0ZXIiLHZhbHVlOmZ1bmN0aW9uKG1ldGhvZCl7dmFyIF9vcHRpb25zPXRoaXMub3B0aW9ucyxBUElIb3N0PV9vcHRpb25zLkFQSUhvc3QsaGVhZGVycz1fb3B0aW9ucy5oZWFkZXJzLHJlc3BvbnNlVHlwZT1fb3B0aW9ucy5yZXNwb25zZVR5cGUsaW5zdGFuY2U9YXhpb3NfZGVmYXVsdC5hLmNyZWF0ZSh7YmFzZVVSTDpBUElIb3N0LHJlc3BvbnNlVHlwZTpyZXNwb25zZVR5cGV8fCJqc29uIn0pO3JldHVybiBpbnN0YW5jZS5kZWZhdWx0cy5oZWFkZXJzPWhlYWRlcnMsZnVuY3Rpb24odXJsLGRhdGEpe2Zvcih2YXIgX2xlbj1hcmd1bWVudHMubGVuZ3RoLG90aGVycz1BcnJheSgyPF9sZW4/X2xlbi0yOjApLF9rZXk9Mjtfa2V5PF9sZW47X2tleSsrKW90aGVyc1tfa2V5LTJdPWFyZ3VtZW50c1tfa2V5XTt2YXIgc291cmNlPWF4aW9zLkNhbmNlbFRva2VuLnNvdXJjZSgpLHByb21pc2U9aW5zdGFuY2UoZXh0ZW5kc19kZWZhdWx0KCkoe3VybDp1cmwsbWV0aG9kOm1ldGhvZCxkYXRhOmRhdGF9LG90aGVycyx7aGVhZGVyczp7dG9rZW46T2JqZWN0KGZpbHRlcnMuZ2V0UGFyYW1zKSgidG9rZW4iKXx8bG9jYWxTdG9yYWdlLmdldEl0ZW0oIm1lc2dfdG9rZW4iKSx1c2V0eXBlOiJwYyJ9LGNhbmNlbFRva2VuOnNvdXJjZS50b2tlbn0pKS50aGVuKGZ1bmN0aW9uKHJlcyl7cmV0dXJuIDU1ODghPT1yZXMuZGF0YS5jb2RlJiYyMDEhPT1yZXMuZGF0YS5jb2RlfHwocm91dGVycy5hLnJlcGxhY2UoIi9sb2dpbiIpLGVsZW1lbnRfdWlfY29tbW9uLk5vdGlmaWNhdGlvbi5lcnJvcih7dGl0bGU6Iui2heaXtiIsbWVzc2FnZToi55m75b2V6LaF5pe277yM6K+36YeN5paw55m75b2VIn0pLHN0b3Jlcy5hLmNvbW1pdCgic2V0VW5yZWFkcyIsMCksbWFpbi5pbUNvbm4uY2xvc2UoKSksMjAwIT09cmVzLmRhdGEuY29kZSYmZWxlbWVudF91aV9jb21tb24uTm90aWZpY2F0aW9uLmVycm9yKHt0aXRsZToi6ZSZ6K+vIixtZXNzYWdlOnJlcy5kYXRhLm1zZ3x8cmVzLmRhdGEubWVzc2FnZX0pLHJlcy5kYXRhfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3Ipe2lmKGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKSxlcnJvci5yZXNwb25zZSYmNDAxPT09ZXJyb3IucmVzcG9uc2Uuc3RhdHVzJiYocm91dGVycy5hLnJlcGxhY2UoIi9sb2dpbiIpLHN0b3Jlcy5hLmNvbW1pdCgic2V0VW5yZWFkcyIsMCksZWxlbWVudF91aV9jb21tb24uTm90aWZpY2F0aW9uLmVycm9yKHt0aXRsZToi6LaF5pe2IixtZXNzYWdlOiLnmbvlvZXotoXml7bvvIzor7fph43mlrDnmbvlvZUifSksc2V0VGltZW91dChmdW5jdGlvbigpe3N0b3Jlcy5hLmNvbW1pdCgicmVzZXQiKSxtYWluLmltQ29ubi5jbG9zZSgpfSw1MDApKSxheGlvc19kZWZhdWx0LmEuaXNDYW5jZWwoZXJyb3IpKXJldHVybiBfX0RFVl9fJiZjb25zb2xlLmRlYnVnKCItLS0gcmVxdWVzdCB1cmw6ICIrSE9TVCt1cmwrIiBDYW5jZWxlZCAiKyhlcnJvci5tZXNzYWdlfHwibm8gbWVzc2FnZSIpKyIgLS0tIikscHJvbWlzZV9kZWZhdWx0LmEucmVqZWN0KGVycm9yKTt2YXIgbWFrZUVycm9yPXZvaWQgMDtyZXR1cm4gbWFrZUVycm9yPSJFQ09OTkFCT1JURUQiPT09ZXJyb3IuY29kZT97c3RhdHVzOmVycm9yLmNvZGUsc3RhdHVzVGV4dDplcnJvci5tZXNzYWdlLHJlcXVlc3RVcmw6SE9TVCt1cmwsZGF0YTpudWxsLG1lc3NhZ2U6ZXJyb3IubWVzc2FnZX06e3N0YXR1czplcnJvci5yZXNwb25zZSYmZXJyb3IucmVzcG9uc2Uuc3RhdHVzLHN0YXR1c1RleHQ6ZXJyb3IucmVzcG9uc2UmJmVycm9yLnJlc3BvbnNlLnN0YXR1c1RleHQscmVxdWVzdFVybDpIT1NUK3VybCxkYXRhOmVycm9yLnJlc3BvbnNlJiZlcnJvci5yZXNwb25zZS5kYXRhLG1lc3NhZ2U6IlJlcXVlc3QgRXJyb3IiLGVycm9yOmVycm9yfSxwcm9taXNlX2RlZmF1bHQuYS5yZWplY3QobWFrZUVycm9yKX0pO3JldHVybiBwcm9taXNlLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5jZWw9c291cmNlLmNhbmNlbCxwcm9taXNlfX19LHtrZXk6ImdldCIsdmFsdWU6ZnVuY3Rpb24odXJsLHF1ZXJ5KXt2YXIgY29tYmluZWRVcmw9dGhpcy5fYnVpbGRRdWVyeSh1cmwscXVlcnkpO3JldHVybiB0aGlzLl9tYWtlUmVxdWVzdGVyKCJHRVQiKShjb21iaW5lZFVybCl9fSx7a2V5OiJwb3N0Iix2YWx1ZTpmdW5jdGlvbih1cmwsZGF0YSl7cmV0dXJuIHRoaXMuX21ha2VSZXF1ZXN0ZXIoIlBPU1QiKSh1cmwsZGF0YSl9fV0pLFJlcXVlc3RDbGllbnR9KCkscmVxdWVzdD1uZXcgcmVxdWVzdF9SZXF1ZXN0Q2xpZW50KHtBUElIb3N0OkhPU1QrIk1FU0ctQURNSU4vIixoZWFkZXJzOnt2ZXJzaW9uOiIyLjAifX0pLHJlcXVlc3RNUlA9bmV3IHJlcXVlc3RfUmVxdWVzdENsaWVudCh7QVBJSG9zdDpIT1NUKyJNUlAtU0VSVklDRS8ifSkscmVxdWVzdDRKPW5ldyByZXF1ZXN0X1JlcXVlc3RDbGllbnQoe0FQSUhvc3Q6SE9TVCsiVVAtUEFQRVItNEovIn0pLHJlcXVlc3RXWD1uZXcgcmVxdWVzdF9SZXF1ZXN0Q2xpZW50KHtBUElIb3N0OkhPU1QrIldYLVNFUlZJQ0UvIn0pfX0sW1swLCJydW50aW1lIiwiY2h1bmstZWxlbWVudFVJIiwiY2h1bmstbGlicyJdXV0pOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="6183531" offset="0" length="16384" />
          <PacketInfo time="6183562" offset="16384" length="16384" />
          <PacketInfo time="6183578" offset="32768" length="13600" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
  </HTTPTask>
</HTTPSnapshot>