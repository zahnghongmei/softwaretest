(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0e60"],{"3D+c":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var box=__webpack_require__("BYwC"),actions=__webpack_require__("9At1"),href=window.location.href,HOST="https://g.dacube.cn/";href.includes(".t.")?HOST="https://g.t.dacube.cn/":href.includes(".d.")&&(HOST="https://g.d.dacube.cn:998/");var login_loginvue_type_script_lang_js_={components:{Box:box.a},data:function(){return{selectTab:"账户登录",tabs:["账户登录","扫码登录"],checked:!0,submitDatas:{account:{value:localStorage.getItem("user")?localStorage.getItem("user").split("&")[0]:"",type:"text",icon:"icon-user",error:!1},password:{value:localStorage.getItem("user")?localStorage.getItem("user").split("&")[1]:"",type:"password",icon:"icon-psw",error:!1}},isWait:!1,websock:null,stompClient:null,qrcodeImg:"",loading:!1,isPast:!1}},created:function(){var _this=this;window.addEventListener("beforeunload",function(event){event.preventDefault(),_this.stompClient&&_this.websocketclose()},!0)},methods:{createQrCode:function(){var _this2=this;return actions.f().then(function(res){if(_this2.loading=!1,200===res.code)return _this2.qrcodeImg=res.result.image,res.result.code}).catch(function(_){return _this2.loading=!1})},initWebSocket:function(){var wsuri=HOST+"/MESG-ADMIN/ws";this.websock=new SockJS(wsuri),this.stompClient=Stomp.over(this.websock),this.stompClient.connect({},this.connectCallback,this.errorCallback)},connectCallback:function(frame){var _this3=this;this.createQrCode().then(function(code){_this3.isPast=!1,_this3.stompClient.subscribe("/topic/"+code,function(greeting){var _this4=this;if(greeting.body){var data=JSON.parse(greeting.body);data.code===code&&data.usercode&&(localStorage.setItem("mesg_token",data.token),localStorage.setItem("user_data",greeting.body),this.$nextTick(function(){_this4.$router.push("/login/choose")}))}else this.isPast=!0,this.$notify.error({title:"失败",message:"二维码已过期，请刷新后重试"})}.bind(_this3))})},errorCallback:function(){this.isPast=!0},websocketclose:function(){null!==this.stompClient&&this.stompClient.disconnect(),console.log("connection closed")},handleSwitch:function(value){"扫码登录"===value?(this.loading=!0,this.initWebSocket()):this.websock&&this.websocketclose(),this.selectTab=value},goRetrieve:function(){this.$router.push("retrieve")},handleInput:function(value,data){this.submitDatas[data].value=value,"password"!==data&&(this.$options.filters.validate(value)||!value?this.$set(this.submitDatas[data],"error",!1):this.$set(this.submitDatas[data],"error",!0))},handleLogin:function(){var _this5=this,phone=this.submitDatas.account.value,userpwd=this.submitDatas.password.value;return phone?this.$options.filters.validate(phone)?userpwd?(this.isWait=!0,void actions.J({phone:phone,userpwd:userpwd}).then(function(res){200===res.code&&(_this5.checked?localStorage.setItem("user",phone+"&"+userpwd):localStorage.removeItem("user"),_this5.$nextTick(function(){_this5.$router.push("/login/choose?token="+res.result.token)})),_this5.isWait=!1}).catch(function(_){return _this5.isWait=!1})):(this.$set(this.submitDatas.password,"error",!0),void this.$notify.error({title:"错误",message:"请输入密码"})):(this.$set(this.submitDatas.account,"error",!0),void this.$notify.error({title:"错误",message:"请输入正确的手机号"})):(this.$set(this.submitDatas.account,"error",!0),void this.$notify.error({title:"错误",message:"请输入手机号"}))}},destroyed:function(){this.stompClient&&this.websocketclose()}},componentNormalizer=(__webpack_require__("MQrj"),__webpack_require__("48Fp"),__webpack_require__("KHd+")),component=Object(componentNormalizer.a)(login_loginvue_type_script_lang_js_,function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("Box",{staticClass:"loginBox"},[_c("div",{staticClass:"title"},_vm._l(_vm.tabs,function(tab){return _c("span",{key:tab,class:{select:_vm.selectTab===tab},on:{click:function($event){_vm.handleSwitch(tab)}}},[_vm._v(_vm._s(tab))])})),_vm._v(" "),_c("div",{directives:[{name:"show",rawName:"v-show",value:"账户登录"===_vm.selectTab,expression:"selectTab === '账户登录'"}],staticClass:"submit"},[_vm._l(Object.keys(_vm.submitDatas),function(data,index){return _c("div",{key:index,staticClass:"inputBox"},[_c("el-input",{class:{error:_vm.submitDatas[data].error},attrs:{value:_vm.submitDatas[data].value,type:_vm.submitDatas[data].type,"prefix-icon":"iconfont "+_vm.submitDatas[data].icon,"auto-complete":"off",clearable:""},on:{input:function(value){return _vm.handleInput(value,data)}},nativeOn:{keyup:function($event){return"button"in $event||!_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?_vm.handleLogin($event):null}}})],1)}),_vm._v(" "),_c("el-checkbox",{staticClass:"remember",model:{value:_vm.checked,callback:function($$v){_vm.checked=$$v},expression:"checked"}},[_vm._v("记住密码")]),_vm._v(" "),_c("el-button",{staticClass:"primary",attrs:{type:"primary",loading:_vm.isWait},on:{click:_vm.handleLogin}},[_vm._v(_vm._s(_vm.isWait?"登录中":"登录"))]),_vm._v(" "),_c("div",{staticClass:"forget",on:{click:_vm.goRetrieve}},[_vm._v("忘记密码")])],2),_vm._v(" "),_c("div",{directives:[{name:"show",rawName:"v-show",value:"扫码登录"===_vm.selectTab,expression:"selectTab === '扫码登录'"},{name:"loading",rawName:"v-loading",value:_vm.loading,expression:"loading"}],staticClass:"scan"},[_c("img",{staticClass:"qrCode",style:{visibility:_vm.loading?"hidden":"visible"},attrs:{src:"data:img/jpg;base64,"+_vm.qrcodeImg,alt:"二维码"}}),_vm._v(" "),_vm.isPast?_c("i",{staticClass:"mask"},[_vm._v("二维码已过期，请重新刷新二维码")]):_vm._e(),_vm._v(" "),_c("div",{staticClass:"tips"},[_vm._v("\n      请使用融媒体中心APP扫码登录\n      "),_c("span",{staticClass:"refrensh",on:{click:_vm.connectCallback}},[_c("i",{staticClass:"iconfont icon-shuaxinreloadn1000"}),_vm._v("刷新\n      ")])])])])},[],!1,null,"4e53bde0",null);component.options.__file="login.vue";__webpack_exports__.default=component.exports},"48Fp":function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_1_lang_css___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("cY6h");__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_3_2_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_1_lang_css___WEBPACK_IMPORTED_MODULE_0__).a},"4pIM":function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_2_node_modules_stylus_loader_index_js_ref_8_3_node_modules_vue_loader_lib_index_js_vue_loader_options_box_vue_vue_type_style_index_0_id_672d0fc6_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("Lgzz");__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_2_node_modules_stylus_loader_index_js_ref_8_3_node_modules_vue_loader_lib_index_js_vue_loader_options_box_vue_vue_type_style_index_0_id_672d0fc6_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},"9At1":function(module,__webpack_exports__,__webpack_require__){"use strict";var stringify=__webpack_require__("gDS+"),stringify_default=__webpack_require__.n(stringify),helpers_extends=__webpack_require__("QbLZ"),extends_default=__webpack_require__.n(helpers_extends),objectWithoutProperties=__webpack_require__("jo6Y"),objectWithoutProperties_default=__webpack_require__.n(objectWithoutProperties),request=__webpack_require__("t3Un"),stores=__webpack_require__("pHvw");function login(_ref){var props=objectWithoutProperties_default()(_ref,[]),req=request.a.post("User/login",extends_default()({},props));return req.then(function(res){200===res.code&&localStorage.setItem("user_data",stringify_default()(res.result))}),req}function updateUser(_ref2){var props=objectWithoutProperties_default()(_ref2,[]);return request.a.post("User/updateUser",extends_default()({},props))}function loginout(){var req=request.a.get("User/loginout");return req.then(function(res){200===res.code&&(stores.a.commit("setUnreads",0),setTimeout(function(){stores.a.commit("reset")},500))}),req}function forgetPassword(loginname){return request.a.get("System/forgetPassword?phone="+loginname)}function reLogin(phone,randNum){var req=request.a.get("System/reLogin?randNum="+randNum+"&phone="+phone);return req.then(function(res){200===res.code&&localStorage.setItem("mesg_token",res.result.token)}),req}function updatePassword(_ref3){var props=objectWithoutProperties_default()(_ref3,[]),req=request.a.post("User/updatePassword",extends_default()({},props));return req.then(function(res){200===res.code&&localStorage.removeItem("mesg_token")}),req}function getCompanyByUsercode(usercode){return request.a.get("User/getCompanyByUsercode/"+usercode)}function getPccFabricByCompanyId(companyid){return request.a.get("User/getPccFabricByCompanyId/"+companyid)}function getPccFabricByParentid(id){return request.a.get("User/getPccFabricByParentid/"+id)}function getPccFabricByUserCode(usercode,companyId){return request.a.get("User/getPccFabricByUserCode/"+usercode+"/"+companyId)}function getPccUserInfoByUserCode(usercode,companyId){return request.a.get("User/getPccUserInfoByUserCode/"+usercode+"/"+companyId)}function getUsersByFabid(fabid){return request.a.get("User/getUsersByFabid/"+fabid)}function updatePassWord(_ref4){var props=objectWithoutProperties_default()(_ref4,[]);return request.a.post("personal/updatePassWord",extends_default()({},props))}function updatePersonalInformation(_ref5){var props=objectWithoutProperties_default()(_ref5,[]);return request.a.post("personal/updatePersonalInformation",extends_default()({},props))}function findGroupinfoByKey(_ref6){var keyword=_ref6.keyword,_ref6$type=_ref6.type,type=void 0===_ref6$type?"all":_ref6$type,storeCompid=stores.a.state.compid,key=keyword.replace(/'/g,"");return request.a.get("User/findGroupinfoByKey/"+key+"/"+storeCompid+"/"+type)}function processImg(_ref7){var props=objectWithoutProperties_default()(_ref7,[]);return request.a.post("personal/processImg",extends_default()({},props))}function getDefaultHeadImgList(){return request.a.get("personal/getDefaultHeadImgList")}function updateHeadImg(headimg){return request.a.post("personal/updateHeadImg",{usercode:stores.a.state.userData.usercode,headimg:headimg})}function personalAbout(){return request.a.get("personal/about")}function uploadFile(data){return request.a.post("User/uploadFile",data)}function createQrCode(){return request.a.get("System/createQrCode")}function getUserByE(easemobname){return request.a.post("User/getUserByE",{easemobname:easemobname})}function getUsersByFabids(ids){return request.a.post("User/getUsersByFabid",{fabids:ids})}function creatChatgroups(_ref){var props=objectWithoutProperties_default()(_ref,[]);return request.a.post("User/creatChatgroups",extends_default()({},props))}function deleteChatGroup(groupid){return request.a.get("User/System/deleteChatGroup/"+groupid)}function updateChatgroup(_ref2){var props=objectWithoutProperties_default()(_ref2,[]);return request.a.post("User/System/updateChatgroup",extends_default()({},props))}function addChatGroupUsers(_ref3){var props=objectWithoutProperties_default()(_ref3,[]);return request.a.post("User/addChatGroupUsers",extends_default()({},props))}function findUserlistByKeyword(_ref4){var keyword=_ref4.keyword,groupid=_ref4.groupid,key=keyword.replace(/'/g,"");return request.a.get("User/findUserlistByKeyword/"+key+"/"+groupid)}function getGroupList(){return request.a.get("User/getGroupList/"+stores.a.state.userData.easemobname)}function deleteGroupPerson(groupid,easemobname,type,timestamp){return request.a.post("User/deleteGroupUser2",{groupid:groupid,easemobname:easemobname,type:type,timestamp:timestamp})}function setGroup(_ref5){var props=objectWithoutProperties_default()(_ref5,[]);return request.a.post("User/setGroup",extends_default()({usereasemobname:stores.a.state.userData.easemobname},props))}function getGroupinfoByGroupid(groupid){return request.a.get("User/getGroupinfoByGroupid/"+groupid)}function changeOwner(_ref6){var props=objectWithoutProperties_default()(_ref6,[]);return request.a.post("User/changeOwner",extends_default()({oldOwner:stores.a.state.userData.easemobname},props))}var message=__webpack_require__("3KKo");function getAppList(){return request.a.get("Application/getAppList/"+stores.a.state.userData.usercode)}function appLogin(appid){var compid=stores.a.state.compid;return request.a.post("Application/user/appLogin",{appid:appid,loginType:"pc",styleType:"",usercode:stores.a.state.userData.usercode,compid:compid})}function getPortalLatestTopic(){return request.b.get("portal/getLatestTopic?top=10")}function newer_article(){return request.c.post("mrp/v1/data_portal/newer_article",{userId:stores.a.state.userData.usercode,orgId:stores.a.state.compid,token:"",seed:"",params:{}})}function newer_material(){return request.c.post("mrp/v1/data_portal/newer_material",{userId:stores.a.state.userData.usercode,orgId:stores.a.state.compid,token:"",seed:"",params:{}})}function getWeChatData(){return request.a.get("User/getWeChatData/"+stores.a.state.userData.usercode)}function data_counter(){return request.c.post("mrp/v1/data_portal/data_counter",{userId:stores.a.state.userData.usercode,orgId:stores.a.state.compid,token:"",seed:"",params:{}})}function dapingGraphicAudit(){return request.d.get("WxGraphicAudit/dapingGraphicAudit")}function audit_data(){return request.c.post("mrp/v1/data_portal/audit_data",{userId:stores.a.state.userData.usercode,orgId:stores.a.state.compid,token:"",seed:"",params:{}})}function topicStatistics(){return request.b.get("portal/topicStatistics")}function taskDynamicsAll(pageNo){return request.b.get("portal/taskDynamics/all?pageNo="+pageNo+"&pageSize=10")}function taskDynamicsProcessing(pageNo){return request.b.get("portal/taskDynamics/processing?pageNo="+pageNo+"&pageSize=10")}function taskDynamicsOverdue(pageNo){return request.b.get("portal/taskDynamics/overdue?pageNo="+pageNo+"&pageSize=10")}function getForeignCompanys(){return request.a.get("OrgOut/listOutComp")}function getForeignGroups(){return request.a.get("OrgOut/listOutGroup")}__webpack_require__.d(__webpack_exports__,"J",function(){return login}),__webpack_require__.d(__webpack_exports__,"eb",function(){return updateUser}),__webpack_require__.d(__webpack_exports__,"K",function(){return loginout}),__webpack_require__.d(__webpack_exports__,"n",function(){return forgetPassword}),__webpack_require__.d(__webpack_exports__,"Q",function(){return reLogin}),__webpack_require__.d(__webpack_exports__,"cb",function(){return updatePassword}),__webpack_require__.d(__webpack_exports__,"p",function(){return getCompanyByUsercode}),__webpack_require__.d(__webpack_exports__,"y",function(){return getPccFabricByCompanyId}),__webpack_require__.d(__webpack_exports__,"z",function(){return getPccFabricByParentid}),__webpack_require__.d(__webpack_exports__,"A",function(){return getPccFabricByUserCode}),__webpack_require__.d(__webpack_exports__,"B",function(){return getPccUserInfoByUserCode}),__webpack_require__.d(__webpack_exports__,"F",function(){return getUsersByFabid}),__webpack_require__.d(__webpack_exports__,"bb",function(){return updatePassWord}),__webpack_require__.d(__webpack_exports__,"db",function(){return updatePersonalInformation}),__webpack_require__.d(__webpack_exports__,"l",function(){return findGroupinfoByKey}),__webpack_require__.d(__webpack_exports__,"P",function(){return processImg}),__webpack_require__.d(__webpack_exports__,"q",function(){return getDefaultHeadImgList}),__webpack_require__.d(__webpack_exports__,"ab",function(){return updateHeadImg}),__webpack_require__.d(__webpack_exports__,"O",function(){return personalAbout}),__webpack_require__.d(__webpack_exports__,"fb",function(){return uploadFile}),__webpack_require__.d(__webpack_exports__,"f",function(){return createQrCode}),__webpack_require__.d(__webpack_exports__,"D",function(){return getUserByE}),__webpack_require__.d(__webpack_exports__,"G",function(){return getUsersByFabids}),__webpack_require__.d(__webpack_exports__,"e",function(){return creatChatgroups}),__webpack_require__.d(__webpack_exports__,"i",function(){return deleteChatGroup}),__webpack_require__.d(__webpack_exports__,"Z",function(){return updateChatgroup}),__webpack_require__.d(__webpack_exports__,"a",function(){return addChatGroupUsers}),__webpack_require__.d(__webpack_exports__,!1,function(){}),__webpack_require__.d(__webpack_exports__,"m",function(){return findUserlistByKeyword}),__webpack_require__.d(__webpack_exports__,"t",function(){return getGroupList}),__webpack_require__.d(__webpack_exports__,"j",function(){return deleteGroupPerson}),__webpack_require__.d(__webpack_exports__,"U",function(){return setGroup}),__webpack_require__.d(__webpack_exports__,"u",function(){return getGroupinfoByGroupid}),__webpack_require__.d(__webpack_exports__,"d",function(){return changeOwner}),__webpack_require__.d(__webpack_exports__,"T",function(){return message.k}),__webpack_require__.d(__webpack_exports__,"R",function(){return message.i}),__webpack_require__.d(__webpack_exports__,"v",function(){return message.c}),__webpack_require__.d(__webpack_exports__,"w",function(){return message.d}),__webpack_require__.d(__webpack_exports__,"k",function(){return message.b}),__webpack_require__.d(__webpack_exports__,!1,function(){return message.a}),__webpack_require__.d(__webpack_exports__,"S",function(){return message.j}),__webpack_require__.d(__webpack_exports__,"E",function(){return message.f}),__webpack_require__.d(__webpack_exports__,"L",function(){return message.h}),__webpack_require__.d(__webpack_exports__,"x",function(){return message.e}),__webpack_require__.d(__webpack_exports__,"I",function(){return message.g}),__webpack_require__.d(__webpack_exports__,"o",function(){return getAppList}),__webpack_require__.d(__webpack_exports__,"b",function(){return appLogin}),__webpack_require__.d(__webpack_exports__,"C",function(){return getPortalLatestTopic}),__webpack_require__.d(__webpack_exports__,"M",function(){return newer_article}),__webpack_require__.d(__webpack_exports__,"N",function(){return newer_material}),__webpack_require__.d(__webpack_exports__,"H",function(){return getWeChatData}),__webpack_require__.d(__webpack_exports__,"h",function(){return data_counter}),__webpack_require__.d(__webpack_exports__,"g",function(){return dapingGraphicAudit}),__webpack_require__.d(__webpack_exports__,"c",function(){return audit_data}),__webpack_require__.d(__webpack_exports__,"Y",function(){return topicStatistics}),__webpack_require__.d(__webpack_exports__,"V",function(){return taskDynamicsAll}),__webpack_require__.d(__webpack_exports__,"X",function(){return taskDynamicsProcessing}),__webpack_require__.d(__webpack_exports__,"W",function(){return taskDynamicsOverdue}),__webpack_require__.d(__webpack_exports__,"r",function(){return getForeignCompanys}),__webpack_require__.d(__webpack_exports__,"s",function(){return getForeignGroups})},BYwC:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("4pIM");var componentNormalizer=__webpack_require__("KHd+"),component=Object(componentNormalizer.a)({},function(){var _h=this.$createElement;return(this._self._c||_h)("div",{staticClass:"boxes"},[this._t("default")],2)},[],!1,null,"672d0fc6",null);component.options.__file="box.vue";__webpack_exports__.a=component.exports},Lgzz:function(module,exports,__webpack_require__){},MQrj:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_2_node_modules_stylus_loader_index_js_ref_8_3_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_4e53bde0_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("XPNk");__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_2_node_modules_stylus_loader_index_js_ref_8_3_node_modules_vue_loader_lib_index_js_vue_loader_options_login_vue_vue_type_style_index_0_id_4e53bde0_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__).a},XPNk:function(module,exports,__webpack_require__){},cY6h:function(module,exports,__webpack_require__){}}]);